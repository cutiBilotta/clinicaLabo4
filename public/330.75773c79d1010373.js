"use strict";(self.webpackChunkclinica=self.webpackChunkclinica||[]).push([[330],{7330:(M,m,r)=>{r.r(m),r.d(m,{LoginModule:()=>y});var d=r(6814),a=r(95),u=r(1826),p=r(5861);class h{constructor(c,e,o){this.email=c,this.contrase\u00f1a=e,this.perfil=o}toJSON(){return{email:this.email,password:this.contrase\u00f1a,perfil:this.perfil}}}var g=r(9672),t=r(5879),f=r(4108),v=r(6751),b=r(6700);function x(n,c){if(1&n){const e=t.EpF();t.TgZ(0,"div")(1,"form")(2,"label",13),t._uU(3,"Email"),t.qZA(),t.TgZ(4,"input",14),t.NdJ("ngModelChange",function(s){t.CHM(e);const i=t.oxw();return t.KtG(i.email=s)}),t.qZA(),t.TgZ(5,"label",15),t._uU(6,"Password"),t.qZA(),t.TgZ(7,"input",16),t.NdJ("ngModelChange",function(s){t.CHM(e);const i=t.oxw();return t.KtG(i.password=s)}),t.qZA()()()}if(2&n){const e=t.oxw();t.xp6(4),t.Q6J("ngModel",e.email),t.xp6(3),t.Q6J("ngModel",e.password)}}function Z(n,c){if(1&n){const e=t.EpF();t.TgZ(0,"div")(1,"button",18),t.NdJ("click",function(){const i=t.CHM(e).$implicit,l=t.oxw(2);return t.KtG(l.autocompletar(i))}),t.TgZ(2,"small"),t._uU(3),t.qZA(),t._UZ(4,"img",19),t.qZA(),t._UZ(5,"br"),t.qZA()}if(2&n){const e=c.$implicit;t.xp6(3),t.Oqu(e.perfil),t.xp6(1),t.Q6J("src",e.imagenURL,t.LSH)}}function _(n,c){if(1&n&&(t.TgZ(0,"div"),t.YNc(1,Z,6,2,"div",17),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("ngForOf",e.usuariosAcceso)}}function C(n,c){1&n&&(t.TgZ(0,"div",20),t._UZ(1,"img",21),t.qZA())}const T=[{path:"",component:(()=>{class n{constructor(e,o,s,i){this.authService=e,this.database=o,this.router=s,this.storageService=i,this.email="",this.password="",this.perfil="",this.usuarios=[],this.mensajeError="",this.usuariosAcceso=["jmkeixwzrgmlvbkgxm@cazlv.com","dvzbjkhmoexktcouuj@cazlq.com","haazgxzjipavfpigda@cazlv.com","agus.bilotta@gmail.com","july.bilotta@gmail.com","cavvurxgzmyqtgrmbc@cwmxc.com"],this.spinner=!0,this.isOpen=!0}ngOnInit(){var e=this;this.database.obtenerTodos("usuarios").subscribe(function(){var o=(0,p.Z)(function*(s){e.usuarios=s.map(i=>{let l=i.payload.doc.data();return l.id=i.payload.doc.id,l}),console.log(e.usuarios);for(const i of e.usuarios)if(i.imgPerfil&&i.imgPerfil.length>0){const l=i.imgPerfil[0],A=yield e.storageService.obtenerImagen("users",l);i.imagenURL=A}e.usuariosAcceso=e.usuarios.map(i=>e.usuariosAcceso.includes(i.email)?{nombre:i.nombre,email:i.email,perfil:i.perfil,password:i.password,imagenURL:i.imagenURL}:null).filter(i=>null!==i),e.spinner=!1});return function(s){return o.apply(this,arguments)}}())}autocompletar(e){this.email=e.email,this.password=e.password}getRouterOutletState(e){return e.isActivated?e.activatedRoute:""}ingresar(){this.isOpen=!this.isOpen,this.user=new h(this.email,this.password,"indefinido");let e=this.usuarios.find(o=>o.email==this.email);setTimeout(()=>{if(e){if(this.perfil=e.perfil,"especialista"==this.perfil.toLocaleLowerCase()&&0==e.habilitacion)return void(this.mensajeError="Usted no se encuentra habilitado");this.authService.login(this.user.email,this.password).then(o=>{o?.user?o?.user?.emailVerified?o?.user&&o.user.emailVerified&&this.router.navigate(["/home"]):this.mensajeError="El usuario no ha verificado el email":this.mensajeError="Contrase\xf1a incorrecta"}).catch(o=>{console.log("Error al iniciar sesi\xf3n:",o)})}},1e3)}static#t=this.\u0275fac=function(o){return new(o||n)(t.Y36(f.e),t.Y36(v.T),t.Y36(u.F0),t.Y36(b.V))};static#e=this.\u0275cmp=t.Xpm({type:n,selectors:[["app-login"]],decls:37,vars:7,consts:[[1,"container"],[1,"row","justify-content-center"],[1,"col-4"],[1,"card"],[1,"card-header","text-center"],[1,"card-body","p-4","bg-light"],[4,"ngIf"],[1,"text-danger","text-center"],[2,"text-align","center"],["type","button",1,"btn","m-2","btn-md","btn-success",3,"click"],[1,"card-body","scroll",2,"text-align","center"],["o","outlet"],["class","spinner-container text-center mb-4",4,"ngIf"],["for","email",2,"float","left"],["type","email","id","email","name","email","placeholder","Email","autocomplete","off",1,"form-control","m-2",3,"ngModel","ngModelChange"],["for","password",2,"float","left"],["type","password","id","password","name","password","placeholder","Password","autocomplete","off",1,"form-control","m-2",3,"ngModel","ngModelChange"],[4,"ngFor","ngForOf"],["type","button",1,"btn","m-2","btn-lg",2,"background-color","#88abc2","width","150px","height","150px","text-align","center",3,"click"],[2,"width","90px","height","90px",3,"src"],[1,"spinner-container","text-center","mb-4"],["src","../../../../assets/img/spinner.png","alt","spinner"]],template:function(o,s){if(1&o&&(t.TgZ(0,"body")(1,"div",0)(2,"div")(3,"div",1)(4,"div",2),t._UZ(5,"br")(6,"br")(7,"br")(8,"br")(9,"br"),t.TgZ(10,"div",3)(11,"h5",4),t._uU(12,"Ya tienes cuenta?"),t.qZA(),t.TgZ(13,"div",5),t.YNc(14,x,8,2,"div",6),t.TgZ(15,"p",7)(16,"b"),t._uU(17),t.qZA()(),t.TgZ(18,"div",8)(19,"button",9),t.NdJ("click",function(){return s.ingresar()}),t.TgZ(20,"b"),t._uU(21,"Ingresar"),t.qZA()()()()()(),t.TgZ(22,"div",2),t._UZ(23,"br")(24,"br")(25,"br")(26,"br")(27,"br"),t.TgZ(28,"div",3)(29,"h5",4),t._uU(30,"Elige el perfil"),t.qZA(),t.TgZ(31,"div",10),t.YNc(32,_,2,1,"div",6),t.qZA(),t.TgZ(33,"div"),t._UZ(34,"router-outlet",null,11),t.qZA(),t.YNc(36,C,2,0,"div",12),t.qZA()()()()()()),2&o){const i=t.MAs(35);t.xp6(2),t.Q6J("@slideInAnimation",void 0),t.xp6(12),t.Q6J("ngIf",null!=s.usuarios&&s.usuarios.length>0),t.xp6(3),t.Oqu(s.mensajeError),t.xp6(2),t.Q6J("@openClose",s.isOpen?"open":"closed"),t.xp6(13),t.Q6J("ngIf",!s.spinner),t.xp6(1),t.Q6J("@slideInAnimation",s.getRouterOutletState(i)),t.xp6(3),t.Q6J("ngIf",s.spinner)}},dependencies:[d.sg,d.O5,u.lC,a._Y,a.Fj,a.JJ,a.JL,a.On,a.F],styles:['@charset "UTF-8";body[_ngcontent-%COMP%]{background-image:url(doctor-patient.16ee9885c92d93cd.jpg);height:100vh;width:100vw;background-size:100%}.spinner-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:100%}.spinner-container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:50px;height:50px;animation:_ngcontent-%COMP%_spin 1s linear infinite}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.scroll[_ngcontent-%COMP%]{max-height:350px;overflow-y:auto}'],data:{animation:[g.qx,g.JN]}})}return n})()}];let w=(()=>{class n{static#t=this.\u0275fac=function(o){return new(o||n)};static#e=this.\u0275mod=t.oAB({type:n});static#i=this.\u0275inj=t.cJS({imports:[u.Bz.forChild(T),u.Bz]})}return n})(),y=(()=>{class n{static#t=this.\u0275fac=function(o){return new(o||n)};static#e=this.\u0275mod=t.oAB({type:n});static#i=this.\u0275inj=t.cJS({imports:[d.ez,w,a.u5]})}return n})()}}]);