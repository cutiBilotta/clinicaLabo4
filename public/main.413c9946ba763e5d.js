"use strict";(self.webpackChunkclinica=self.webpackChunkclinica||[]).push([[179],{9058:(Yt,Je,$)=>{$.d(Je,{BH:()=>Pe,G6:()=>Bt,L:()=>qe,LL:()=>Xe,Pz:()=>He,Sg:()=>$e,UG:()=>de,ZB:()=>Ve,ZR:()=>Ue,aH:()=>me,b$:()=>Qn,eu:()=>Se,hl:()=>be,jU:()=>Ot,m9:()=>Vi,ne:()=>ir,pd:()=>an,r3:()=>Ee,ru:()=>wt,tV:()=>ye,uI:()=>ft,vZ:()=>pt,w1:()=>Pr,xO:()=>$n,xb:()=>ze,z$:()=>ot,zd:()=>Mt});const Oe=function(we){const ie=[];let se=0;for(let re=0;re<we.length;re++){let ue=we.charCodeAt(re);ue<128?ie[se++]=ue:ue<2048?(ie[se++]=ue>>6|192,ie[se++]=63&ue|128):55296==(64512&ue)&&re+1<we.length&&56320==(64512&we.charCodeAt(re+1))?(ue=65536+((1023&ue)<<10)+(1023&we.charCodeAt(++re)),ie[se++]=ue>>18|240,ie[se++]=ue>>12&63|128,ie[se++]=ue>>6&63|128,ie[se++]=63&ue|128):(ie[se++]=ue>>12|224,ie[se++]=ue>>6&63|128,ie[se++]=63&ue|128)}return ie},Te={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(we,ie){if(!Array.isArray(we))throw Error("encodeByteArray takes an array as a parameter");this.init_();const se=ie?this.byteToCharMapWebSafe_:this.byteToCharMap_,re=[];for(let ue=0;ue<we.length;ue+=3){const Le=we[ue],_t=ue+1<we.length,Pt=_t?we[ue+1]:0,zt=ue+2<we.length,gn=zt?we[ue+2]:0;let Vr=(15&Pt)<<2|gn>>6,oi=63&gn;zt||(oi=64,_t||(Vr=64)),re.push(se[Le>>2],se[(3&Le)<<4|Pt>>4],se[Vr],se[oi])}return re.join("")},encodeString(we,ie){return this.HAS_NATIVE_SUPPORT&&!ie?btoa(we):this.encodeByteArray(Oe(we),ie)},decodeString(we,ie){return this.HAS_NATIVE_SUPPORT&&!ie?atob(we):function(we){const ie=[];let se=0,re=0;for(;se<we.length;){const ue=we[se++];if(ue<128)ie[re++]=String.fromCharCode(ue);else if(ue>191&&ue<224){const Le=we[se++];ie[re++]=String.fromCharCode((31&ue)<<6|63&Le)}else if(ue>239&&ue<365){const zt=((7&ue)<<18|(63&we[se++])<<12|(63&we[se++])<<6|63&we[se++])-65536;ie[re++]=String.fromCharCode(55296+(zt>>10)),ie[re++]=String.fromCharCode(56320+(1023&zt))}else{const Le=we[se++],_t=we[se++];ie[re++]=String.fromCharCode((15&ue)<<12|(63&Le)<<6|63&_t)}}return ie.join("")}(this.decodeStringToByteArray(we,ie))},decodeStringToByteArray(we,ie){this.init_();const se=ie?this.charToByteMapWebSafe_:this.charToByteMap_,re=[];for(let ue=0;ue<we.length;){const Le=se[we.charAt(ue++)],Pt=ue<we.length?se[we.charAt(ue)]:0;++ue;const gn=ue<we.length?se[we.charAt(ue)]:64;++ue;const hn=ue<we.length?se[we.charAt(ue)]:64;if(++ue,null==Le||null==Pt||null==gn||null==hn)throw new ke;re.push(Le<<2|Pt>>4),64!==gn&&(re.push(Pt<<4&240|gn>>2),64!==hn&&re.push(gn<<6&192|hn))}return re},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let we=0;we<this.ENCODED_VALS.length;we++)this.byteToCharMap_[we]=this.ENCODED_VALS.charAt(we),this.charToByteMap_[this.byteToCharMap_[we]]=we,this.byteToCharMapWebSafe_[we]=this.ENCODED_VALS_WEBSAFE.charAt(we),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[we]]=we,we>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(we)]=we,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(we)]=we)}}};class ke extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const qe=function(we){return function(we){const ie=Oe(we);return Te.encodeByteArray(ie,!0)}(we).replace(/\./g,"")},ye=function(we){try{return Te.decodeString(we,!0)}catch(ie){console.error("base64Decode failed: ",ie)}return null};function Ve(we,ie){if(!(ie instanceof Object))return ie;switch(ie.constructor){case Date:return new Date(ie.getTime());case Object:void 0===we&&(we={});break;case Array:we=[];break;default:return ie}for(const se in ie)!ie.hasOwnProperty(se)||!ht(se)||(we[se]=Ve(we[se],ie[se]));return we}function ht(we){return"__proto__"!==we}const bt=()=>{try{return function st(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const we=process.env.__FIREBASE_DEFAULTS__;return we?JSON.parse(we):void 0})()||(()=>{if(typeof document>"u")return;let we;try{we=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const ie=we&&ye(we[1]);return ie&&JSON.parse(ie)})()}catch(we){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${we}`)}},me=()=>{var we;return null===(we=bt())||void 0===we?void 0:we.config},He=we=>{var ie;return null===(ie=bt())||void 0===ie?void 0:ie[`_${we}`]};class Pe{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((ie,se)=>{this.resolve=ie,this.reject=se})}wrapCallback(ie){return(se,re)=>{se?this.reject(se):this.resolve(re),"function"==typeof ie&&(this.promise.catch(()=>{}),1===ie.length?ie(se):ie(se,re))}}}function $e(we,ie){if(we.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const re=ie||"demo-project",ue=we.iat||0,Le=we.sub||we.user_id;if(!Le)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const _t=Object.assign({iss:`https://securetoken.google.com/${re}`,aud:re,iat:ue,exp:ue+3600,auth_time:ue,sub:Le,user_id:Le,firebase:{sign_in_provider:"custom",identities:{}}},we);return[qe(JSON.stringify({alg:"none",type:"JWT"})),qe(JSON.stringify(_t)),""].join(".")}function ot(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function ft(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ot())}function de(){var we;const ie=null===(we=bt())||void 0===we?void 0:we.forceEnvironment;if("node"===ie)return!0;if("browser"===ie)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function Ot(){return"object"==typeof self&&self.self===self}function wt(){const we="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof we&&void 0!==we.id}function Qn(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function Pr(){const we=ot();return we.indexOf("MSIE ")>=0||we.indexOf("Trident/")>=0}function Bt(){return!de()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function be(){try{return"object"==typeof indexedDB}catch{return!1}}function Se(){return new Promise((we,ie)=>{try{let se=!0;const re="validate-browser-context-for-indexeddb-analytics-module",ue=self.indexedDB.open(re);ue.onsuccess=()=>{ue.result.close(),se||self.indexedDB.deleteDatabase(re),we(!0)},ue.onupgradeneeded=()=>{se=!1},ue.onerror=()=>{var Le;ie((null===(Le=ue.error)||void 0===Le?void 0:Le.message)||"")}}catch(se){ie(se)}})}class Ue extends Error{constructor(ie,se,re){super(se),this.code=ie,this.customData=re,this.name="FirebaseError",Object.setPrototypeOf(this,Ue.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Xe.prototype.create)}}class Xe{constructor(ie,se,re){this.service=ie,this.serviceName=se,this.errors=re}create(ie,...se){const re=se[0]||{},ue=`${this.service}/${ie}`,Le=this.errors[ie],_t=Le?function Ft(we,ie){return we.replace(St,(se,re)=>{const ue=ie[re];return null!=ue?String(ue):`<${re}?>`})}(Le,re):"Error";return new Ue(ue,`${this.serviceName}: ${_t} (${ue}).`,re)}}const St=/\{\$([^}]+)}/g;function Ee(we,ie){return Object.prototype.hasOwnProperty.call(we,ie)}function ze(we){for(const ie in we)if(Object.prototype.hasOwnProperty.call(we,ie))return!1;return!0}function pt(we,ie){if(we===ie)return!0;const se=Object.keys(we),re=Object.keys(ie);for(const ue of se){if(!re.includes(ue))return!1;const Le=we[ue],_t=ie[ue];if(Lt(Le)&&Lt(_t)){if(!pt(Le,_t))return!1}else if(Le!==_t)return!1}for(const ue of re)if(!se.includes(ue))return!1;return!0}function Lt(we){return null!==we&&"object"==typeof we}function $n(we){const ie=[];for(const[se,re]of Object.entries(we))Array.isArray(re)?re.forEach(ue=>{ie.push(encodeURIComponent(se)+"="+encodeURIComponent(ue))}):ie.push(encodeURIComponent(se)+"="+encodeURIComponent(re));return ie.length?"&"+ie.join("&"):""}function Mt(we){const ie={};return we.replace(/^\?/,"").split("&").forEach(re=>{if(re){const[ue,Le]=re.split("=");ie[decodeURIComponent(ue)]=decodeURIComponent(Le)}}),ie}function an(we){const ie=we.indexOf("?");if(!ie)return"";const se=we.indexOf("#",ie);return we.substring(ie,se>0?se:void 0)}function ir(we,ie){const se=new cn(we,ie);return se.subscribe.bind(se)}class cn{constructor(ie,se){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=se,this.task.then(()=>{ie(this)}).catch(re=>{this.error(re)})}next(ie){this.forEachObserver(se=>{se.next(ie)})}error(ie){this.forEachObserver(se=>{se.error(ie)}),this.close(ie)}complete(){this.forEachObserver(ie=>{ie.complete()}),this.close()}subscribe(ie,se,re){let ue;if(void 0===ie&&void 0===se&&void 0===re)throw new Error("Missing Observer.");ue=function jn(we,ie){if("object"!=typeof we||null===we)return!1;for(const se of ie)if(se in we&&"function"==typeof we[se])return!0;return!1}(ie,["next","error","complete"])?ie:{next:ie,error:se,complete:re},void 0===ue.next&&(ue.next=Gr),void 0===ue.error&&(ue.error=Gr),void 0===ue.complete&&(ue.complete=Gr);const Le=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?ue.error(this.finalError):ue.complete()}catch{}}),this.observers.push(ue),Le}unsubscribeOne(ie){void 0===this.observers||void 0===this.observers[ie]||(delete this.observers[ie],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(ie){if(!this.finalized)for(let se=0;se<this.observers.length;se++)this.sendOne(se,ie)}sendOne(ie,se){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[ie])try{se(this.observers[ie])}catch(re){typeof console<"u"&&console.error&&console.error(re)}})}close(ie){this.finalized||(this.finalized=!0,void 0!==ie&&(this.finalError=ie),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Gr(){}function Vi(we){return we&&we._delegate?we._delegate:we}},4108:(Yt,Je,$)=>{$.d(Je,{e:()=>Fd});var E=$(5861),_e=$(7398),le=$(9058),Oe=$(534),Ne=$(7879),Te=$(7582),ke=$(4537);const mt=function st(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},Ct=new le.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),jt=new Ne.Yd("@firebase/auth");function me(P,...y){jt.logLevel<=Ne.in.ERROR&&jt.error(`Auth (${Oe.SDK_VERSION}): ${P}`,...y)}function He(P,...y){throw ft(P,...y)}function Pe(P,...y){return ft(P,...y)}function ft(P,...y){if("string"!=typeof P){const w=y[0],x=[...y.slice(1)];return x[0]&&(x[0].appName=P.name),P._errorFactory.create(w,...x)}return Ct.create(P,...y)}function de(P,y,...w){if(!P)throw ft(y,...w)}function Ot(P){const y="INTERNAL ASSERTION FAILED: "+P;throw me(y),new Error(y)}function wt(P,y){P||Ot(y)}function Pr(){var P;return typeof self<"u"&&(null===(P=self.location)||void 0===P?void 0:P.protocol)||null}class Bt{constructor(y,w){this.shortDelay=y,this.longDelay=w,wt(w>y,"Short delay should be less than long delay!"),this.isMobile=(0,le.uI)()||(0,le.b$)()}get(){return function mr(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(function On(){return"http:"===Pr()||"https:"===Pr()}()||(0,le.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}class Se{static initialize(y,w,x){this.fetchImpl=y,w&&(this.headersImpl=w),x&&(this.responseImpl=x)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:typeof globalThis<"u"&&globalThis.fetch?globalThis.fetch:typeof fetch<"u"?fetch:void Ot("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:typeof globalThis<"u"&&globalThis.Headers?globalThis.Headers:typeof Headers<"u"?Headers:void Ot("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:typeof globalThis<"u"&&globalThis.Response?globalThis.Response:typeof Response<"u"?Response:void Ot("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Ke={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},Fe=new Bt(3e4,6e4);function Ue(P,y){return P.tenantId&&!y.tenantId?Object.assign(Object.assign({},y),{tenantId:P.tenantId}):y}function Xe(P,y,w,x){return Ft.apply(this,arguments)}function Ft(){return(Ft=(0,E.Z)(function*(P,y,w,x,Q={}){return St(P,Q,(0,E.Z)(function*(){let ce={},je={};x&&("GET"===y?je=x:ce={body:JSON.stringify(x)});const at=(0,le.xO)(Object.assign({key:P.config.apiKey},je)).slice(1),At=yield P._getAdditionalHeaders();return At["Content-Type"]="application/json",P.languageCode&&(At["X-Firebase-Locale"]=P.languageCode),Se.fetch()(Zt(P,P.config.apiHost,w,at),Object.assign({method:y,headers:At,referrerPolicy:"no-referrer"},ce))}))})).apply(this,arguments)}function St(P,y,w){return cr.apply(this,arguments)}function cr(){return(cr=(0,E.Z)(function*(P,y,w){P._canInitEmulator=!1;const x=Object.assign(Object.assign({},Ke),y);try{const Q=new An(P),ce=yield Promise.race([w(),Q.promise]);Q.clearNetworkTimeout();const je=yield ce.json();if("needConfirmation"in je)throw Gn(P,"account-exists-with-different-credential",je);if(ce.ok&&!("errorMessage"in je))return je;{const at=ce.ok?je.errorMessage:je.error.message,[At,pn]=at.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===At)throw Gn(P,"credential-already-in-use",je);if("EMAIL_EXISTS"===At)throw Gn(P,"email-already-in-use",je);if("USER_DISABLED"===At)throw Gn(P,"user-disabled",je);const Rn=x[At]||At.toLowerCase().replace(/[_\s]+/g,"-");if(pn)throw function $e(P,y,w){const x=Object.assign(Object.assign({},mt()),{[y]:w});return new le.LL("auth","Firebase",x).create(y,{appName:P.name})}(P,Rn,pn);He(P,Rn)}}catch(Q){if(Q instanceof le.ZR)throw Q;He(P,"network-request-failed",{message:String(Q)})}})).apply(this,arguments)}function Zt(P,y,w,x){const Q=`${y}${w}?${x}`;return P.config.emulator?function be(P,y){wt(P.emulator,"Emulator should always be set here");const{url:w}=P.emulator;return y?`${w}${y.startsWith("/")?y.slice(1):y}`:w}(P.config,Q):`${P.config.apiScheme}://${Q}`}class An{constructor(y){this.auth=y,this.timer=null,this.promise=new Promise((w,x)=>{this.timer=setTimeout(()=>x(Pe(this.auth,"network-request-failed")),Fe.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Gn(P,y,w){const x={appName:P.name};w.email&&(x.email=w.email),w.phoneNumber&&(x.phoneNumber=w.phoneNumber);const Q=Pe(P,y,x);return Q.customData._tokenResponse=w,Q}function Mt(){return(Mt=(0,E.Z)(function*(P,y){return Xe(P,"POST","/v1/accounts:delete",y)})).apply(this,arguments)}function cn(){return(cn=(0,E.Z)(function*(P,y){return Xe(P,"POST","/v1/accounts:lookup",y)})).apply(this,arguments)}function Hr(P){if(P)try{const y=new Date(Number(P));if(!isNaN(y.getTime()))return y.toUTCString()}catch{}}function Kr(){return(Kr=(0,E.Z)(function*(P,y=!1){const w=(0,le.m9)(P),x=yield w.getIdToken(y),Q=$i(x);de(Q&&Q.exp&&Q.auth_time&&Q.iat,w.auth,"internal-error");const ce="object"==typeof Q.firebase?Q.firebase:void 0,je=ce?.sign_in_provider;return{claims:Q,token:x,authTime:Hr(en(Q.auth_time)),issuedAtTime:Hr(en(Q.iat)),expirationTime:Hr(en(Q.exp)),signInProvider:je||null,signInSecondFactor:ce?.sign_in_second_factor||null}})).apply(this,arguments)}function en(P){return 1e3*Number(P)}function $i(P){const[y,w,x]=P.split(".");if(void 0===y||void 0===w||void 0===x)return me("JWT malformed, contained fewer than 3 sections"),null;try{const Q=(0,le.tV)(w);return Q?JSON.parse(Q):(me("Failed to decode base64 JWT payload"),null)}catch(Q){return me("Caught error parsing JWT payload as JSON",Q?.toString()),null}}function Dn(P,y){return ki.apply(this,arguments)}function ki(){return(ki=(0,E.Z)(function*(P,y,w=!1){if(w)return y;try{return yield y}catch(x){throw x instanceof le.ZR&&function Oa({code:P}){return"auth/user-disabled"===P||"auth/user-token-expired"===P}(x)&&P.auth.currentUser===P&&(yield P.auth.signOut()),x}})).apply(this,arguments)}class Xi{constructor(y){this.user=y,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(y){var w;if(y){const x=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),x}{this.errorBackoff=3e4;const Q=(null!==(w=this.user.stsTokenManager.expirationTime)&&void 0!==w?w:0)-Date.now()-3e5;return Math.max(0,Q)}}schedule(y=!1){var w=this;if(!this.isRunning)return;const x=this.getInterval(y);this.timerId=setTimeout((0,E.Z)(function*(){yield w.iteration()}),x)}iteration(){var y=this;return(0,E.Z)(function*(){try{yield y.user.getIdToken(!0)}catch(w){return void("auth/network-request-failed"===w?.code&&y.schedule(!0))}y.schedule()})()}}class _o{constructor(y,w){this.createdAt=y,this.lastLoginAt=w,this._initializeTime()}_initializeTime(){this.lastSignInTime=Hr(this.lastLoginAt),this.creationTime=Hr(this.createdAt)}_copy(y){this.createdAt=y.createdAt,this.lastLoginAt=y.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function ur(P){return Ti.apply(this,arguments)}function Ti(){return Ti=(0,E.Z)(function*(P){var y;const w=P.auth,x=yield P.getIdToken(),Q=yield Dn(P,function ir(P,y){return cn.apply(this,arguments)}(w,{idToken:x}));de(Q?.users.length,w,"internal-error");const ce=Q.users[0];P._notifyReloadListener(ce);const je=null!==(y=ce.providerUserInfo)&&void 0!==y&&y.length?function Li(P){return P.map(y=>{var{providerId:w}=y,x=(0,Te._T)(y,["providerId"]);return{providerId:w,uid:x.rawId||"",displayName:x.displayName||null,email:x.email||null,phoneNumber:x.phoneNumber||null,photoURL:x.photoUrl||null}})}(ce.providerUserInfo):[],at=function Oi(P,y){return[...P.filter(x=>!y.some(Q=>Q.providerId===x.providerId)),...y]}(P.providerData,je),Rn=!!P.isAnonymous&&!(P.email&&ce.passwordHash||at?.length),Fr={uid:ce.localId,displayName:ce.displayName||null,photoURL:ce.photoUrl||null,email:ce.email||null,emailVerified:ce.emailVerified||!1,phoneNumber:ce.phoneNumber||null,tenantId:ce.tenantId||null,providerData:at,metadata:new _o(ce.createdAt,ce.lastLoginAt),isAnonymous:Rn};Object.assign(P,Fr)}),Ti.apply(this,arguments)}function Fi(){return(Fi=(0,E.Z)(function*(P){const y=(0,le.m9)(P);yield ur(y),yield y.auth._persistUserIfCurrent(y),y.auth._notifyListenersIfCurrent(y)})).apply(this,arguments)}function we(){return(we=(0,E.Z)(function*(P,y){const w=yield St(P,{},(0,E.Z)(function*(){const x=(0,le.xO)({grant_type:"refresh_token",refresh_token:y}).slice(1),{tokenApiHost:Q,apiKey:ce}=P.config,je=Zt(P,Q,"/v1/token",`key=${ce}`),at=yield P._getAdditionalHeaders();return at["Content-Type"]="application/x-www-form-urlencoded",Se.fetch()(je,{method:"POST",headers:at,body:x})}));return{accessToken:w.access_token,expiresIn:w.expires_in,refreshToken:w.refresh_token}})).apply(this,arguments)}class ie{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(y){de(y.idToken,"internal-error"),de(typeof y.idToken<"u","internal-error"),de(typeof y.refreshToken<"u","internal-error");const w="expiresIn"in y&&typeof y.expiresIn<"u"?Number(y.expiresIn):function wn(P){const y=$i(P);return de(y,"internal-error"),de(typeof y.exp<"u","internal-error"),de(typeof y.iat<"u","internal-error"),Number(y.exp)-Number(y.iat)}(y.idToken);this.updateTokensAndExpiration(y.idToken,y.refreshToken,w)}getToken(y,w=!1){var x=this;return(0,E.Z)(function*(){return de(!x.accessToken||x.refreshToken,y,"user-token-expired"),w||!x.accessToken||x.isExpired?x.refreshToken?(yield x.refresh(y,x.refreshToken),x.accessToken):null:x.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(y,w){var x=this;return(0,E.Z)(function*(){const{accessToken:Q,refreshToken:ce,expiresIn:je}=yield function Vi(P,y){return we.apply(this,arguments)}(y,w);x.updateTokensAndExpiration(Q,ce,Number(je))})()}updateTokensAndExpiration(y,w,x){this.refreshToken=w||null,this.accessToken=y||null,this.expirationTime=Date.now()+1e3*x}static fromJSON(y,w){const{refreshToken:x,accessToken:Q,expirationTime:ce}=w,je=new ie;return x&&(de("string"==typeof x,"internal-error",{appName:y}),je.refreshToken=x),Q&&(de("string"==typeof Q,"internal-error",{appName:y}),je.accessToken=Q),ce&&(de("number"==typeof ce,"internal-error",{appName:y}),je.expirationTime=ce),je}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(y){this.accessToken=y.accessToken,this.refreshToken=y.refreshToken,this.expirationTime=y.expirationTime}_clone(){return Object.assign(new ie,this.toJSON())}_performRefresh(){return Ot("not implemented")}}function se(P,y){de("string"==typeof P||typeof P>"u","internal-error",{appName:y})}class re{constructor(y){var{uid:w,auth:x,stsTokenManager:Q}=y,ce=(0,Te._T)(y,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Xi(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=w,this.auth=x,this.stsTokenManager=Q,this.accessToken=Q.accessToken,this.displayName=ce.displayName||null,this.email=ce.email||null,this.emailVerified=ce.emailVerified||!1,this.phoneNumber=ce.phoneNumber||null,this.photoURL=ce.photoURL||null,this.isAnonymous=ce.isAnonymous||!1,this.tenantId=ce.tenantId||null,this.providerData=ce.providerData?[...ce.providerData]:[],this.metadata=new _o(ce.createdAt||void 0,ce.lastLoginAt||void 0)}getIdToken(y){var w=this;return(0,E.Z)(function*(){const x=yield Dn(w,w.stsTokenManager.getToken(w.auth,y));return de(x,w.auth,"internal-error"),w.accessToken!==x&&(w.accessToken=x,yield w.auth._persistUserIfCurrent(w),w.auth._notifyListenersIfCurrent(w)),x})()}getIdTokenResult(y){return function Gr(P){return Kr.apply(this,arguments)}(this,y)}reload(){return function hs(P){return Fi.apply(this,arguments)}(this)}_assign(y){this!==y&&(de(this.uid===y.uid,this.auth,"internal-error"),this.displayName=y.displayName,this.photoURL=y.photoURL,this.email=y.email,this.emailVerified=y.emailVerified,this.phoneNumber=y.phoneNumber,this.isAnonymous=y.isAnonymous,this.tenantId=y.tenantId,this.providerData=y.providerData.map(w=>Object.assign({},w)),this.metadata._copy(y.metadata),this.stsTokenManager._assign(y.stsTokenManager))}_clone(y){const w=new re(Object.assign(Object.assign({},this),{auth:y,stsTokenManager:this.stsTokenManager._clone()}));return w.metadata._copy(this.metadata),w}_onReload(y){de(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=y,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(y){this.reloadListener?this.reloadListener(y):this.reloadUserInfo=y}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(y,w=!1){var x=this;return(0,E.Z)(function*(){let Q=!1;y.idToken&&y.idToken!==x.stsTokenManager.accessToken&&(x.stsTokenManager.updateFromServerResponse(y),Q=!0),w&&(yield ur(x)),yield x.auth._persistUserIfCurrent(x),Q&&x.auth._notifyListenersIfCurrent(x)})()}delete(){var y=this;return(0,E.Z)(function*(){const w=yield y.getIdToken();return yield Dn(y,function $n(P,y){return Mt.apply(this,arguments)}(y.auth,{idToken:w})),y.stsTokenManager.clearRefreshToken(),y.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(y=>Object.assign({},y)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(y,w){var x,Q,ce,je,at,At,pn,Rn;const Fr=null!==(x=w.displayName)&&void 0!==x?x:void 0,Ca=null!==(Q=w.email)&&void 0!==Q?Q:void 0,ro=null!==(ce=w.phoneNumber)&&void 0!==ce?ce:void 0,td=null!==(je=w.photoURL)&&void 0!==je?je:void 0,So=null!==(at=w.tenantId)&&void 0!==at?at:void 0,nd=null!==(At=w._redirectEventId)&&void 0!==At?At:void 0,Du=null!==(pn=w.createdAt)&&void 0!==pn?pn:void 0,Ro=null!==(Rn=w.lastLoginAt)&&void 0!==Rn?Rn:void 0,{uid:Nr,emailVerified:rd,isAnonymous:Rl,providerData:Cu,stsTokenManager:hf}=w;de(Nr&&hf,y,"internal-error");const fr=ie.fromJSON(this.name,hf);de("string"==typeof Nr,y,"internal-error"),se(Fr,y.name),se(Ca,y.name),de("boolean"==typeof rd,y,"internal-error"),de("boolean"==typeof Rl,y,"internal-error"),se(ro,y.name),se(td,y.name),se(So,y.name),se(nd,y.name),se(Du,y.name),se(Ro,y.name);const Oc=new re({uid:Nr,auth:y,email:Ca,emailVerified:rd,displayName:Fr,isAnonymous:Rl,photoURL:td,phoneNumber:ro,tenantId:So,stsTokenManager:fr,createdAt:Du,lastLoginAt:Ro});return Cu&&Array.isArray(Cu)&&(Oc.providerData=Cu.map(ff=>Object.assign({},ff))),nd&&(Oc._redirectEventId=nd),Oc}static _fromIdTokenResponse(y,w,x=!1){return(0,E.Z)(function*(){const Q=new ie;Q.updateFromServerResponse(w);const ce=new re({uid:w.localId,auth:y,stsTokenManager:Q,isAnonymous:x});return yield ur(ce),ce})()}}const ue=new Map;function Le(P){wt(P instanceof Function,"Expected a class definition");let y=ue.get(P);return y?(wt(y instanceof P,"Instance stored in cache mismatched with class"),y):(y=new P,ue.set(P,y),y)}const Pt=(()=>{class P{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,E.Z)(function*(){return!0})()}_set(w,x){var Q=this;return(0,E.Z)(function*(){Q.storage[w]=x})()}_get(w){var x=this;return(0,E.Z)(function*(){const Q=x.storage[w];return void 0===Q?null:Q})()}_remove(w){var x=this;return(0,E.Z)(function*(){delete x.storage[w]})()}_addListener(w,x){}_removeListener(w,x){}}return P.type="NONE",P})();function zt(P,y,w){return`firebase:${P}:${y}:${w}`}class gn{constructor(y,w,x){this.persistence=y,this.auth=w,this.userKey=x;const{config:Q,name:ce}=this.auth;this.fullUserKey=zt(this.userKey,Q.apiKey,ce),this.fullPersistenceKey=zt("persistence",Q.apiKey,ce),this.boundEventHandler=w._onStorageEvent.bind(w),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(y){return this.persistence._set(this.fullUserKey,y.toJSON())}getCurrentUser(){var y=this;return(0,E.Z)(function*(){const w=yield y.persistence._get(y.fullUserKey);return w?re._fromJSON(y.auth,w):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(y){var w=this;return(0,E.Z)(function*(){if(w.persistence===y)return;const x=yield w.getCurrentUser();return yield w.removeCurrentUser(),w.persistence=y,x?w.setCurrentUser(x):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(y,w,x="authUser"){return(0,E.Z)(function*(){if(!w.length)return new gn(Le(Pt),y,x);const Q=(yield Promise.all(w.map(function(){var pn=(0,E.Z)(function*(Rn){if(yield Rn._isAvailable())return Rn});return function(Rn){return pn.apply(this,arguments)}}()))).filter(pn=>pn);let ce=Q[0]||Le(Pt);const je=zt(x,y.config.apiKey,y.name);let at=null;for(const pn of w)try{const Rn=yield pn._get(je);if(Rn){const Fr=re._fromJSON(y,Rn);pn!==ce&&(at=Fr),ce=pn;break}}catch{}const At=Q.filter(pn=>pn._shouldAllowMigration);return ce._shouldAllowMigration&&At.length?(ce=At[0],at&&(yield ce._set(je,at.toJSON())),yield Promise.all(w.map(function(){var pn=(0,E.Z)(function*(Rn){if(Rn!==ce)try{yield Rn._remove(je)}catch{}});return function(Rn){return pn.apply(this,arguments)}}())),new gn(ce,y,x)):new gn(ce,y,x)})()}}function Xt(P){const y=P.toLowerCase();if(y.includes("opera/")||y.includes("opr/")||y.includes("opios/"))return"Opera";if(function Gs(P=(0,le.z$)()){return/iemobile/i.test(P)}(y))return"IEMobile";if(y.includes("msie")||y.includes("trident/"))return"IE";if(y.includes("edge/"))return"Edge";if(function hn(P=(0,le.z$)()){return/firefox\//i.test(P)}(y))return"Firefox";if(y.includes("silk/"))return"Silk";if(function it(P=(0,le.z$)()){return/blackberry/i.test(P)}(y))return"Blackberry";if(function Ge(P=(0,le.z$)()){return/webos/i.test(P)}(y))return"Webos";if(function Vr(P=(0,le.z$)()){const y=P.toLowerCase();return y.includes("safari/")&&!y.includes("chrome/")&&!y.includes("crios/")&&!y.includes("android")}(y))return"Safari";if((y.includes("chrome/")||function oi(P=(0,le.z$)()){return/crios\//i.test(P)}(y))&&!y.includes("edge/"))return"Chrome";if(function Js(P=(0,le.z$)()){return/android/i.test(P)}(y))return"Android";{const x=P.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===x?.length)return x[1]}return"Other"}function Or(P,y=[]){let w;switch(P){case"Browser":w=Xt((0,le.z$)());break;case"Worker":w=`${Xt((0,le.z$)())}-${P}`;break;default:w=P}const x=y.length?y.join(","):"FirebaseCore-web";return`${w}/JsCore/${Oe.SDK_VERSION}/${x}`}class Xs{constructor(y){this.auth=y,this.queue=[]}pushCallback(y,w){const x=ce=>new Promise((je,at)=>{try{je(y(ce))}catch(At){at(At)}});x.onAbort=w,this.queue.push(x);const Q=this.queue.length-1;return()=>{this.queue[Q]=()=>Promise.resolve()}}runMiddleware(y){var w=this;return(0,E.Z)(function*(){if(w.auth.currentUser===y)return;const x=[];try{for(const Q of w.queue)yield Q(y),Q.onAbort&&x.push(Q.onAbort)}catch(Q){x.reverse();for(const ce of x)try{ce()}catch{}throw w.auth._errorFactory.create("login-blocked",{originalMessage:Q?.message})}})()}}function ws(){return(ws=(0,E.Z)(function*(P,y={}){return Xe(P,"GET","/v2/passwordPolicy",Ue(P,y))})).apply(this,arguments)}class Qo{constructor(y){var w,x,Q,ce;const je=y.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(w=je.minPasswordLength)&&void 0!==w?w:6,je.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=je.maxPasswordLength),void 0!==je.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=je.containsLowercaseCharacter),void 0!==je.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=je.containsUppercaseCharacter),void 0!==je.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=je.containsNumericCharacter),void 0!==je.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=je.containsNonAlphanumericCharacter),this.enforcementState=y.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(Q=null===(x=y.allowedNonAlphanumericCharacters)||void 0===x?void 0:x.join(""))&&void 0!==Q?Q:"",this.forceUpgradeOnSignin=null!==(ce=y.forceUpgradeOnSignin)&&void 0!==ce&&ce,this.schemaVersion=y.schemaVersion}validatePassword(y){var w,x,Q,ce,je,at;const At={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(y,At),this.validatePasswordCharacterOptions(y,At),At.isValid&&(At.isValid=null===(w=At.meetsMinPasswordLength)||void 0===w||w),At.isValid&&(At.isValid=null===(x=At.meetsMaxPasswordLength)||void 0===x||x),At.isValid&&(At.isValid=null===(Q=At.containsLowercaseLetter)||void 0===Q||Q),At.isValid&&(At.isValid=null===(ce=At.containsUppercaseLetter)||void 0===ce||ce),At.isValid&&(At.isValid=null===(je=At.containsNumericCharacter)||void 0===je||je),At.isValid&&(At.isValid=null===(at=At.containsNonAlphanumericCharacter)||void 0===at||at),At}validatePasswordLengthOptions(y,w){const x=this.customStrengthOptions.minPasswordLength,Q=this.customStrengthOptions.maxPasswordLength;x&&(w.meetsMinPasswordLength=y.length>=x),Q&&(w.meetsMaxPasswordLength=y.length<=Q)}validatePasswordCharacterOptions(y,w){let x;this.updatePasswordCharacterOptionsStatuses(w,!1,!1,!1,!1);for(let Q=0;Q<y.length;Q++)x=y.charAt(Q),this.updatePasswordCharacterOptionsStatuses(w,x>="a"&&x<="z",x>="A"&&x<="Z",x>="0"&&x<="9",this.allowedNonAlphanumericCharacters.includes(x))}updatePasswordCharacterOptionsStatuses(y,w,x,Q,ce){this.customStrengthOptions.containsLowercaseLetter&&(y.containsLowercaseLetter||(y.containsLowercaseLetter=w)),this.customStrengthOptions.containsUppercaseLetter&&(y.containsUppercaseLetter||(y.containsUppercaseLetter=x)),this.customStrengthOptions.containsNumericCharacter&&(y.containsNumericCharacter||(y.containsNumericCharacter=Q)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(y.containsNonAlphanumericCharacter||(y.containsNonAlphanumericCharacter=ce))}}class Ya{constructor(y,w,x,Q){this.app=y,this.heartbeatServiceProvider=w,this.appCheckServiceProvider=x,this.config=Q,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Za(this),this.idTokenSubscription=new Za(this),this.beforeStateQueue=new Xs(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Ct,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=y.name,this.clientVersion=Q.sdkClientVersion}_initializeWithPersistence(y,w){var x=this;return w&&(this._popupRedirectResolver=Le(w)),this._initializationPromise=this.queue((0,E.Z)(function*(){var Q,ce;if(!x._deleted&&(x.persistenceManager=yield gn.create(x,y),!x._deleted)){if(null!==(Q=x._popupRedirectResolver)&&void 0!==Q&&Q._shouldInitProactively)try{yield x._popupRedirectResolver._initialize(x)}catch{}yield x.initializeCurrentUser(w),x.lastNotifiedUid=(null===(ce=x.currentUser)||void 0===ce?void 0:ce.uid)||null,!x._deleted&&(x._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var y=this;return(0,E.Z)(function*(){if(y._deleted)return;const w=yield y.assertedPersistence.getCurrentUser();if(y.currentUser||w){if(y.currentUser&&w&&y.currentUser.uid===w.uid)return y._currentUser._assign(w),void(yield y.currentUser.getIdToken());yield y._updateCurrentUser(w,!0)}})()}initializeCurrentUser(y){var w=this;return(0,E.Z)(function*(){var x;const Q=yield w.assertedPersistence.getCurrentUser();let ce=Q,je=!1;if(y&&w.config.authDomain){yield w.getOrInitRedirectPersistenceManager();const at=null===(x=w.redirectUser)||void 0===x?void 0:x._redirectEventId,At=ce?._redirectEventId,pn=yield w.tryRedirectSignIn(y);(!at||at===At)&&pn?.user&&(ce=pn.user,je=!0)}if(!ce)return w.directlySetCurrentUser(null);if(!ce._redirectEventId){if(je)try{yield w.beforeStateQueue.runMiddleware(ce)}catch(at){ce=Q,w._popupRedirectResolver._overrideRedirectResult(w,()=>Promise.reject(at))}return ce?w.reloadAndSetCurrentUserOrClear(ce):w.directlySetCurrentUser(null)}return de(w._popupRedirectResolver,w,"argument-error"),yield w.getOrInitRedirectPersistenceManager(),w.redirectUser&&w.redirectUser._redirectEventId===ce._redirectEventId?w.directlySetCurrentUser(ce):w.reloadAndSetCurrentUserOrClear(ce)})()}tryRedirectSignIn(y){var w=this;return(0,E.Z)(function*(){let x=null;try{x=yield w._popupRedirectResolver._completeRedirectFn(w,y,!0)}catch{yield w._setRedirectUser(null)}return x})()}reloadAndSetCurrentUserOrClear(y){var w=this;return(0,E.Z)(function*(){try{yield ur(y)}catch(x){if("auth/network-request-failed"!==x?.code)return w.directlySetCurrentUser(null)}return w.directlySetCurrentUser(y)})()}useDeviceLanguage(){this.languageCode=function tn(){if(typeof navigator>"u")return null;const P=navigator;return P.languages&&P.languages[0]||P.language||null}()}_delete(){var y=this;return(0,E.Z)(function*(){y._deleted=!0})()}updateCurrentUser(y){var w=this;return(0,E.Z)(function*(){const x=y?(0,le.m9)(y):null;return x&&de(x.auth.config.apiKey===w.config.apiKey,w,"invalid-user-token"),w._updateCurrentUser(x&&x._clone(w))})()}_updateCurrentUser(y,w=!1){var x=this;return(0,E.Z)(function*(){if(!x._deleted)return y&&de(x.tenantId===y.tenantId,x,"tenant-id-mismatch"),w||(yield x.beforeStateQueue.runMiddleware(y)),x.queue((0,E.Z)(function*(){yield x.directlySetCurrentUser(y),x.notifyAuthListeners()}))})()}signOut(){var y=this;return(0,E.Z)(function*(){return yield y.beforeStateQueue.runMiddleware(null),(y.redirectPersistenceManager||y._popupRedirectResolver)&&(yield y._setRedirectUser(null)),y._updateCurrentUser(null,!0)})()}setPersistence(y){var w=this;return this.queue((0,E.Z)(function*(){yield w.assertedPersistence.setPersistence(Le(y))}))}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(y){var w=this;return(0,E.Z)(function*(){w._getPasswordPolicyInternal()||(yield w._updatePasswordPolicy());const x=w._getPasswordPolicyInternal();return x.schemaVersion!==w.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(w._errorFactory.create("unsupported-password-policy-schema-version",{})):x.validatePassword(y)})()}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){var y=this;return(0,E.Z)(function*(){const w=yield function Bi(P){return ws.apply(this,arguments)}(y),x=new Qo(w);null===y.tenantId?y._projectPasswordPolicy=x:y._tenantPasswordPolicies[y.tenantId]=x})()}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(y){this._errorFactory=new le.LL("auth","Firebase",y())}onAuthStateChanged(y,w,x){return this.registerStateListener(this.authStateSubscription,y,w,x)}beforeAuthStateChanged(y,w){return this.beforeStateQueue.pushCallback(y,w)}onIdTokenChanged(y,w,x){return this.registerStateListener(this.idTokenSubscription,y,w,x)}authStateReady(){return new Promise((y,w)=>{if(this.currentUser)y();else{const x=this.onAuthStateChanged(()=>{x(),y()},w)}})}toJSON(){var y;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(y=this._currentUser)||void 0===y?void 0:y.toJSON()}}_setRedirectUser(y,w){var x=this;return(0,E.Z)(function*(){const Q=yield x.getOrInitRedirectPersistenceManager(w);return null===y?Q.removeCurrentUser():Q.setCurrentUser(y)})()}getOrInitRedirectPersistenceManager(y){var w=this;return(0,E.Z)(function*(){if(!w.redirectPersistenceManager){const x=y&&Le(y)||w._popupRedirectResolver;de(x,w,"argument-error"),w.redirectPersistenceManager=yield gn.create(w,[Le(x._redirectPersistence)],"redirectUser"),w.redirectUser=yield w.redirectPersistenceManager.getCurrentUser()}return w.redirectPersistenceManager})()}_redirectUserForId(y){var w=this;return(0,E.Z)(function*(){var x,Q;return w._isInitialized&&(yield w.queue((0,E.Z)(function*(){}))),(null===(x=w._currentUser)||void 0===x?void 0:x._redirectEventId)===y?w._currentUser:(null===(Q=w.redirectUser)||void 0===Q?void 0:Q._redirectEventId)===y?w.redirectUser:null})()}_persistUserIfCurrent(y){var w=this;return(0,E.Z)(function*(){if(y===w.currentUser)return w.queue((0,E.Z)(function*(){return w.directlySetCurrentUser(y)}))})()}_notifyListenersIfCurrent(y){y===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var y,w;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const x=null!==(w=null===(y=this.currentUser)||void 0===y?void 0:y.uid)&&void 0!==w?w:null;this.lastNotifiedUid!==x&&(this.lastNotifiedUid=x,this.authStateSubscription.next(this.currentUser))}registerStateListener(y,w,x,Q){if(this._deleted)return()=>{};const ce="function"==typeof w?w:w.next.bind(w);let je=!1;const at=this._isInitialized?Promise.resolve():this._initializationPromise;if(de(at,this,"internal-error"),at.then(()=>{je||ce(this.currentUser)}),"function"==typeof w){const At=y.addObserver(w,x,Q);return()=>{je=!0,At()}}{const At=y.addObserver(w);return()=>{je=!0,At()}}}directlySetCurrentUser(y){var w=this;return(0,E.Z)(function*(){w.currentUser&&w.currentUser!==y&&w._currentUser._stopProactiveRefresh(),y&&w.isProactiveRefreshEnabled&&y._startProactiveRefresh(),w.currentUser=y,y?yield w.assertedPersistence.setCurrentUser(y):yield w.assertedPersistence.removeCurrentUser()})()}queue(y){return this.operations=this.operations.then(y,y),this.operations}get assertedPersistence(){return de(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(y){!y||this.frameworks.includes(y)||(this.frameworks.push(y),this.frameworks.sort(),this.clientVersion=Or(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var y=this;return(0,E.Z)(function*(){var w;const x={"X-Client-Version":y.clientVersion};y.app.options.appId&&(x["X-Firebase-gmpid"]=y.app.options.appId);const Q=yield null===(w=y.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===w?void 0:w.getHeartbeatsHeader();Q&&(x["X-Firebase-Client"]=Q);const ce=yield y._getAppCheckToken();return ce&&(x["X-Firebase-AppCheck"]=ce),x})()}_getAppCheckToken(){var y=this;return(0,E.Z)(function*(){var w;const x=yield null===(w=y.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===w?void 0:w.getToken();return x?.error&&function Re(P,...y){jt.logLevel<=Ne.in.WARN&&jt.warn(`Auth (${Oe.SDK_VERSION}): ${P}`,...y)}(`Error while retrieving App Check token: ${x.error}`),x?.token})()}}class Za{constructor(y){this.auth=y,this.observer=null,this.addObserver=(0,le.ne)(w=>this.observer=w)}get next(){return de(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function es(){return(es=(0,E.Z)(function*(P,y){return Xe(P,"POST","/v1/accounts:sendOobCode",Ue(P,y))})).apply(this,arguments)}function ts(){return(ts=(0,E.Z)(function*(P,y){return function hi(P,y){return es.apply(this,arguments)}(P,y)})).apply(this,arguments)}function co(){return co=(0,E.Z)(function*(P,y){const w=(0,le.m9)(P),Q={requestType:"VERIFY_EMAIL",idToken:yield P.getIdToken()};y&&function Vs(P,y,w){var x;de((null===(x=w.url)||void 0===x?void 0:x.length)>0,P,"invalid-continue-uri"),de(typeof w.dynamicLinkDomain>"u"||w.dynamicLinkDomain.length>0,P,"invalid-dynamic-link-domain"),y.continueUrl=w.url,y.dynamicLinkDomain=w.dynamicLinkDomain,y.canHandleCodeInApp=w.handleCodeInApp,w.iOS&&(de(w.iOS.bundleId.length>0,P,"missing-ios-bundle-id"),y.iOSBundleId=w.iOS.bundleId),w.android&&(de(w.android.packageName.length>0,P,"missing-android-pkg-name"),y.androidInstallApp=w.android.installApp,y.androidMinimumVersionCode=w.android.minimumVersion,y.androidPackageName=w.android.packageName)}(w.auth,Q,y);const{email:ce}=yield function Cr(P,y){return ts.apply(this,arguments)}(w.auth,Q);ce!==P.email&&(yield P.reload())}),co.apply(this,arguments)}(function Jo(P){return`__${P}${Math.floor(1e6*Math.random())}`})("rcb"),new Bt(3e4,6e4),new Bt(2e3,1e4),new Bt(3e4,6e4),new Bt(5e3,15e3),encodeURIComponent("fac");var xd="@firebase/auth";class Nc{constructor(y){this.auth=y,this.internalListeners=new Map}getUid(){var y;return this.assertAuthConfigured(),(null===(y=this.auth.currentUser)||void 0===y?void 0:y.uid)||null}getToken(y){var w=this;return(0,E.Z)(function*(){return w.assertAuthConfigured(),yield w.auth._initializationPromise,w.auth.currentUser?{accessToken:yield w.auth.currentUser.getIdToken(y)}:null})()}addAuthTokenListener(y){if(this.assertAuthConfigured(),this.internalListeners.has(y))return;const w=this.auth.onIdTokenChanged(x=>{y(x?.stsTokenManager.accessToken||null)});this.internalListeners.set(y,w),this.updateProactiveRefresh()}removeAuthTokenListener(y){this.assertAuthConfigured();const w=this.internalListeners.get(y);w&&(this.internalListeners.delete(y),w(),this.updateProactiveRefresh())}assertAuthConfigured(){de(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}(0,le.Pz)("authIdTokenMaxAge"),function Ha(P){(0,Oe._registerComponent)(new ke.wA("auth",(y,{options:w})=>{const x=y.getProvider("app").getImmediate(),Q=y.getProvider("heartbeat"),ce=y.getProvider("app-check-internal"),{apiKey:je,authDomain:at}=x.options;de(je&&!je.includes(":"),"invalid-api-key",{appName:x.name});const At={apiKey:je,authDomain:at,clientPlatform:P,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Or(P)},pn=new Ya(x,Q,ce,At);return function ui(P,y){const w=y?.persistence||[],x=(Array.isArray(w)?w:[w]).map(Le);y?.errorMap&&P._updateErrorMap(y.errorMap),P._initializeWithPersistence(x,y?.popupRedirectResolver)}(pn,w),pn},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((y,w,x)=>{y.getProvider("auth-internal").initialize()})),(0,Oe._registerComponent)(new ke.wA("auth-internal",y=>{const w=function Mn(P){return(0,le.m9)(P)}(y.getProvider("auth").getImmediate());return new Nc(w)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,Oe.registerVersion)(xd,"1.3.1",function ed(P){switch(P){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(P)),(0,Oe.registerVersion)(xd,"1.3.1","esm2017")}("Browser");var js=$(5879),Ih=$(7213),Pc=$(9027);let Fd=(()=>{class P{constructor(w,x){this.afauth=w,this.firestore=x}sendVerificationEmail(){var w=this;return(0,E.Z)(function*(){const x=yield w.afauth.currentUser;if(!x)throw new Error("El usuario actual es nulo.");try{yield function Cc(P,y){return co.apply(this,arguments)}(x)}catch(Q){console.error("Error al enviar el correo de verificaci\xf3n:",Q)}})()}register(w,x){var Q=this;return(0,E.Z)(function*(){try{const ce=yield Q.afauth.createUserWithEmailAndPassword(w,x);return ce&&ce.user?(yield Q.sendVerificationEmail(),ce):(console.log("No se pudo obtener el usuario despu\xe9s del registro."),null)}catch(ce){return console.log("Error en register: ",ce),null}})()}login(w,x){var Q=this;return(0,E.Z)(function*(){try{const ce=yield Q.afauth.signInWithEmailAndPassword(w,x);return ce.user?ce:null}catch(ce){return console.log("error en login: ",ce),null}})()}getUserLogged(){return this.afauth.authState}getAuthState(){return this.afauth.authState}logout(){this.afauth.signOut()}getUserEmail(){return this.afauth.authState.pipe((0,_e.U)(w=>w?w.email:null))}getUserEmailByUID(w){return this.firestore.collection("users").doc(w).valueChanges().pipe((0,_e.U)(x=>x?x.email:null))}static#e=this.\u0275fac=function(x){return new(x||P)(js.LFG(Ih.zQ),js.LFG(Pc.ST))};static#t=this.\u0275prov=js.Yz7({token:P,factory:P.\u0275fac,providedIn:"root"})}return P})()},6751:(Yt,Je,$)=>{$.d(Je,{T:()=>le});var E=$(5879),_e=$(9027);let le=(()=>{class Oe{constructor(Te){this.firestore=Te,this.usuarios=[],this.obtenerTodos("usuarios").subscribe(ke=>{this.usuarios=ke.map(T=>{let qe=T.payload.doc.data();return qe.id=T.payload.doc.id,qe})})}crear(Te,ke){return this.firestore.collection(Te).add(ke)}obtenerPorId(Te,ke){return this.firestore.collection(Te).doc(ke).snapshotChanges()}obtenerTodos(Te){return this.firestore.collection(Te).snapshotChanges()}actualizar(Te,ke,T){return this.firestore.collection(Te).doc(T).set(ke)}eliminar(Te,ke){return this.firestore.collection(Te).doc(ke).delete()}createWithCustomId(Te,ke,T){this.firestore.collection(Te).doc(ke).set(T)}static#e=this.\u0275fac=function(ke){return new(ke||Oe)(E.LFG(_e.ST))};static#t=this.\u0275prov=E.Yz7({token:Oe,factory:Oe.\u0275fac,providedIn:"root"})}return Oe})()},6051:(Yt,Je,$)=>{var E=$(6593),_e=$(95),le=$(1826),Oe=$(6751),Ne=$(4664),Te=$(2096),ke=$(4108),T=$(5879);const ht=[{path:"",redirectTo:"bienvenida",pathMatch:"full"},{path:"bienvenida",loadChildren:()=>$.e(119).then($.bind($,6119)).then(c=>c.BienvenidaModule)},{path:"registro",loadChildren:()=>Promise.all([$.e(700),$.e(228)]).then($.bind($,8228)).then(c=>c.RegistroModule)},{path:"login",loadChildren:()=>Promise.all([$.e(700),$.e(330)]).then($.bind($,7330)).then(c=>c.LoginModule)},{path:"verificacion",loadChildren:()=>$.e(187).then($.bind($,9187)).then(c=>c.VerificacionEmailModule)},{path:"seccion-usuarios",loadChildren:()=>Promise.all([$.e(700),$.e(228),$.e(893)]).then($.bind($,5893)).then(c=>c.SeccionUsuariosModule),canActivate:[(c,h)=>{const a=(0,T.f3M)(ke.e),d=(0,T.f3M)(Oe.T);return(0,T.f3M)(le.F0),a.getUserEmail().pipe((0,Ne.w)(S=>{if(S){console.log(S);const B=S,Y=d.usuarios.find(ae=>ae.email==B);if(Y&&("administrador"==Y.perfil||"Administrador"==Y.perfil))return console.log("Administrador True"),(0,Te.of)(!0)}return(0,Te.of)(!1)}))}]},{path:"home",loadChildren:()=>Promise.all([$.e(700),$.e(140),$.e(730),$.e(310)]).then($.bind($,1310)).then(c=>c.HomeModule)},{path:"solicitar-turno",loadChildren:()=>Promise.all([$.e(700),$.e(140),$.e(730)]).then($.bind($,8730)).then(c=>c.SolicitarTurnoModule),canActivate:[(c,h)=>{const a=(0,T.f3M)(ke.e),d=(0,T.f3M)(Oe.T);return(0,T.f3M)(le.F0),a.getUserEmail().pipe((0,Ne.w)(S=>{if(S){console.log(S);const B=S,Y=d.usuarios.find(ae=>ae.email==B);if(Y&&"especialista"!=Y.perfil.toLocaleLowerCase())return(0,Te.of)(!0)}return(0,Te.of)(!1)}))}]},{path:"mi-perfil",loadChildren:()=>Promise.all([$.e(700),$.e(140),$.e(227)]).then($.bind($,4227)).then(c=>c.MiPerfilModule)},{path:"mis-turnos",loadChildren:()=>$.e(832).then($.bind($,6832)).then(c=>c.MisTurnosModule)},{path:"carga-historia-clinica",loadChildren:()=>Promise.all([$.e(140),$.e(957)]).then($.bind($,2957)).then(c=>c.CargaHistClinicaModule),canActivate:[(c,h)=>{const a=(0,T.f3M)(ke.e),d=(0,T.f3M)(Oe.T);return(0,T.f3M)(le.F0),a.getUserEmail().pipe((0,Ne.w)(S=>{if(S){console.log(S);const B=S,Y=d.usuarios.find(ae=>ae.email==B);if(Y&&"especialista"==Y.perfil.toLocaleLowerCase())return(0,Te.of)(!0)}return(0,Te.of)(!1)}))}]},{path:"**",component:(()=>{class c{static#e=this.\u0275fac=function(d){return new(d||c)};static#t=this.\u0275cmp=T.Xpm({type:c,selectors:[["app-not-found"]],decls:10,vars:0,consts:[[1,"container"],[1,"text-center","text-dark"],["src","../../../assets/img/not-found.png","alt",""]],template:function(d,m){1&d&&(T.TgZ(0,"body")(1,"div",0),T._UZ(2,"br")(3,"br"),T.TgZ(4,"h1",1),T._uU(5,"P\xe1gina no encontrada"),T.qZA(),T.TgZ(6,"div"),T._UZ(7,"br")(8,"br")(9,"img",2),T.qZA()()())},styles:["body[_ngcontent-%COMP%]{background-color:#49708a;width:100vw;height:100vh;text-align:center}"]})}return c})()}];let st=(()=>{class c{static#e=this.\u0275fac=function(d){return new(d||c)};static#t=this.\u0275mod=T.oAB({type:c});static#n=this.\u0275inj=T.cJS({imports:[le.Bz.forRoot(ht),le.Bz]})}return c})(),Et=(()=>{class c{constructor(){this.title="clinica"}static#e=this.\u0275fac=function(d){return new(d||c)};static#t=this.\u0275cmp=T.Xpm({type:c,selectors:[["app-root"]],decls:1,vars:0,template:function(d,m){1&d&&T._UZ(0,"router-outlet")},dependencies:[le.lC]})}return c})();var mt=$(7217),Ct=$(5592),bt=$(6232),jt=$(8645),Re=$(4829),me=$(1631),He=$(4266),Pe=$(4674),$e=$(7400);const ot=["addListener","removeListener"],ft=["addEventListener","removeEventListener"],de=["on","off"];function Ot(c,h,a,d){if((0,Pe.m)(a)&&(d=a,a=void 0),d)return Ot(c,h,a).pipe((0,$e.Z)(d));const[m,S]=function Pr(c){return(0,Pe.m)(c.addEventListener)&&(0,Pe.m)(c.removeEventListener)}(c)?ft.map(B=>Y=>c[B](h,Y,a)):function Qn(c){return(0,Pe.m)(c.addListener)&&(0,Pe.m)(c.removeListener)}(c)?ot.map(wt(c,h)):function On(c){return(0,Pe.m)(c.on)&&(0,Pe.m)(c.off)}(c)?de.map(wt(c,h)):[];if(!m&&(0,He.z)(c))return(0,me.z)(B=>Ot(B,h,a))((0,Re.Xf)(c));if(!m)throw new TypeError("Invalid event target");return new Ct.y(B=>{const Y=(...ae)=>B.next(1<ae.length?ae:ae[0]);return m(Y),()=>S(Y)})}function wt(c,h){return a=>d=>c[a](h,d)}var mr=$(6321),tn=$(671);const{isArray:Se}=Array;function Ke(c){return 1===c.length&&Se(c[0])?c[0]:c}var Fe=$(8251);$(3019);var St=$(9940);function cr(...c){const h=(0,St.jO)(c),a=Ke(c);return a.length?new Ct.y(d=>{let m=a.map(()=>[]),S=a.map(()=>!1);d.add(()=>{m=S=null});for(let B=0;!d.closed&&B<a.length;B++)(0,Re.Xf)(a[B]).subscribe((0,Fe.x)(d,Y=>{if(m[B].push(Y),m.every(ae=>ae.length)){const ae=m.map(pe=>pe.shift());d.next(h?h(...ae):ae),m.some((pe,Ce)=>!pe.length&&S[Ce])&&d.complete()}},()=>{S[B]=!0,!m[B].length&&d.complete()}));return()=>{m=S=null}}):bt.E}var Ut=$(5211),Zt=$(9773),Ln=$(2181),An=$(8180),Gn=$(9397),Ee=$(7398),xe=$(9360),ze=$(2737),lt=$(2420);function pt(...c){const h=(0,St.jO)(c);return(0,xe.e)((a,d)=>{const m=c.length,S=new Array(m);let B=c.map(()=>!1),Y=!1;for(let ae=0;ae<m;ae++)(0,Re.Xf)(c[ae]).subscribe((0,Fe.x)(d,pe=>{S[ae]=pe,!Y&&!B[ae]&&(B[ae]=!0,(Y=B.every(ze.y))&&(B=null))},lt.Z));a.subscribe((0,Fe.x)(d,ae=>{if(Y){const pe=[ae,...S];d.next(h?h(...pe):pe)}}))})}$(975),$(7921),$(3997);var cn=$(6814);Math,Math,Math;const Tl=["*"],Mi=["dialog"];function te(c){return"string"==typeof c}function Ze(c){return null!=c}function Hi(c){return(c||document.body).getBoundingClientRect()}const Ta={animation:!0,transitionTimerDelayMs:5},mh=()=>{},{transitionTimerDelayMs:Is}=Ta,_u=new Map,Ni=(c,h,a,d)=>{let m=d.context||{};const S=_u.get(h);if(S)switch(d.runningTransition){case"continue":return bt.E;case"stop":c.run(()=>S.transition$.complete()),m=Object.assign(S.context,m),_u.delete(h)}const B=a(h,d.animation,m)||mh;if(!d.animation||"none"===window.getComputedStyle(h).transitionProperty)return c.run(()=>B()),(0,Te.of)(void 0).pipe(function pi(c){return h=>new Ct.y(a=>h.subscribe({next:B=>c.run(()=>a.next(B)),error:B=>c.run(()=>a.error(B)),complete:()=>c.run(()=>a.complete())}))}(c));const Y=new jt.x,ae=new jt.x,pe=Y.pipe(function qn(...c){return h=>(0,Ut.z)(h,(0,Te.of)(...c))}(!0));_u.set(h,{transition$:Y,complete:()=>{ae.next(),ae.complete()},context:m});const Ce=function Ua(c){const{transitionDelay:h,transitionDuration:a}=window.getComputedStyle(c);return 1e3*(parseFloat(h)+parseFloat(a))}(h);return c.runOutsideAngular(()=>{const rt=Ot(h,"transitionend").pipe((0,Zt.R)(pe),(0,Ln.h)(({target:dt})=>dt===h));(function Ue(...c){return 1===(c=Ke(c)).length?(0,Re.Xf)(c[0]):new Ct.y(function Xe(c){return h=>{let a=[];for(let d=0;a&&!h.closed&&d<c.length;d++)a.push((0,Re.Xf)(c[d]).subscribe((0,Fe.x)(h,m=>{if(a){for(let S=0;S<a.length;S++)S!==d&&a[S].unsubscribe();a=null}h.next(m)})))}}(c))})(function be(c=0,h,a=mr.P){let d=-1;return null!=h&&((0,tn.K)(h)?a=h:d=h),new Ct.y(m=>{let S=function Bt(c){return c instanceof Date&&!isNaN(c)}(c)?+c-a.now():c;S<0&&(S=0);let B=0;return a.schedule(function(){m.closed||(m.next(B++),0<=d?this.schedule(void 0,d):m.complete())},S)})}(Ce+Is).pipe((0,Zt.R)(pe)),rt,ae).pipe((0,Zt.R)(pe)).subscribe(()=>{_u.delete(h),c.run(()=>{B(),Y.next(),Y.complete()})})}),Y.asObservable()};let ba=(()=>{class c{constructor(){this.animation=Ta.animation}static#e=this.\u0275fac=function(d){return new(d||c)};static#t=this.\u0275prov=T.Yz7({token:c,factory:c.\u0275fac,providedIn:"root"})}return c})(),Eu=(()=>{class c{static#e=this.\u0275fac=function(d){return new(d||c)};static#t=this.\u0275mod=T.oAB({type:c});static#n=this.\u0275inj=T.cJS({})}return c})(),$o=(()=>{class c{static#e=this.\u0275fac=function(d){return new(d||c)};static#t=this.\u0275mod=T.oAB({type:c});static#n=this.\u0275inj=T.cJS({})}return c})(),Ql=(()=>{class c{static#e=this.\u0275fac=function(d){return new(d||c)};static#t=this.\u0275mod=T.oAB({type:c});static#n=this.\u0275inj=T.cJS({})}return c})(),si=(()=>{class c{static#e=this.\u0275fac=function(d){return new(d||c)};static#t=this.\u0275mod=T.oAB({type:c});static#n=this.\u0275inj=T.cJS({})}return c})();var Wr=function(c){return c[c.Tab=9]="Tab",c[c.Enter=13]="Enter",c[c.Escape=27]="Escape",c[c.Space=32]="Space",c[c.PageUp=33]="PageUp",c[c.PageDown=34]="PageDown",c[c.End=35]="End",c[c.Home=36]="Home",c[c.ArrowLeft=37]="ArrowLeft",c[c.ArrowUp=38]="ArrowUp",c[c.ArrowRight=39]="ArrowRight",c[c.ArrowDown=40]="ArrowDown",c}(Wr||{});typeof navigator<"u"&&navigator.userAgent&&(/iPad|iPhone|iPod/.test(navigator.userAgent)||/Macintosh/.test(navigator.userAgent)&&navigator.maxTouchPoints&&navigator.maxTouchPoints>2||/Android/.test(navigator.userAgent));const nu=["a[href]","button:not([disabled])",'input:not([disabled]):not([type="hidden"])',"select:not([disabled])","textarea:not([disabled])","[contenteditable]",'[tabindex]:not([tabindex="-1"])'].join(", ");function yh(c){const h=Array.from(c.querySelectorAll(nu)).filter(a=>-1!==a.tabIndex);return[h[0],h[h.length-1]]}new Date(1882,10,12),new Date(2174,10,25);let Su=(()=>{class c{static#e=this.\u0275fac=function(d){return new(d||c)};static#t=this.\u0275mod=T.oAB({type:c});static#n=this.\u0275inj=T.cJS({})}return c})(),Hd=(()=>{class c{static#e=this.\u0275fac=function(d){return new(d||c)};static#t=this.\u0275mod=T.oAB({type:c});static#n=this.\u0275inj=T.cJS({})}return c})();class pl{constructor(h,a,d){this.nodes=h,this.viewRef=a,this.componentRef=d}}let ld=(()=>{class c{constructor(a,d){this._el=a,this._zone=d}ngOnInit(){this._zone.onStable.asObservable().pipe((0,An.q)(1)).subscribe(()=>{Ni(this._zone,this._el.nativeElement,(a,d)=>{d&&Hi(a),a.classList.add("show")},{animation:this.animation,runningTransition:"continue"})})}hide(){return Ni(this._zone,this._el.nativeElement,({classList:a})=>a.remove("show"),{animation:this.animation,runningTransition:"stop"})}static#e=this.\u0275fac=function(d){return new(d||c)(T.Y36(T.SBq),T.Y36(T.R0b))};static#t=this.\u0275cmp=T.Xpm({type:c,selectors:[["ngb-modal-backdrop"]],hostAttrs:[2,"z-index","1055"],hostVars:6,hostBindings:function(d,m){2&d&&(T.Tol("modal-backdrop"+(m.backdropClass?" "+m.backdropClass:"")),T.ekj("show",!m.animation)("fade",m.animation))},inputs:{animation:"animation",backdropClass:"backdropClass"},standalone:!0,features:[T.jDz],decls:0,vars:0,template:function(d,m){},encapsulation:2})}return c})();class Dp{update(h){}close(h){}dismiss(h){}}const Cp=["animation","ariaLabelledBy","ariaDescribedBy","backdrop","centered","fullscreen","keyboard","scrollable","size","windowClass","modalDialogClass"],D=["animation","backdropClass"];class g{_applyWindowOptions(h,a){Cp.forEach(d=>{Ze(a[d])&&(h[d]=a[d])})}_applyBackdropOptions(h,a){D.forEach(d=>{Ze(a[d])&&(h[d]=a[d])})}update(h){this._applyWindowOptions(this._windowCmptRef.instance,h),this._backdropCmptRef&&this._backdropCmptRef.instance&&this._applyBackdropOptions(this._backdropCmptRef.instance,h)}get componentInstance(){if(this._contentRef&&this._contentRef.componentRef)return this._contentRef.componentRef.instance}get closed(){return this._closed.asObservable().pipe((0,Zt.R)(this._hidden))}get dismissed(){return this._dismissed.asObservable().pipe((0,Zt.R)(this._hidden))}get hidden(){return this._hidden.asObservable()}get shown(){return this._windowCmptRef.instance.shown.asObservable()}constructor(h,a,d,m){this._windowCmptRef=h,this._contentRef=a,this._backdropCmptRef=d,this._beforeDismiss=m,this._closed=new jt.x,this._dismissed=new jt.x,this._hidden=new jt.x,h.instance.dismissEvent.subscribe(S=>{this.dismiss(S)}),this.result=new Promise((S,B)=>{this._resolve=S,this._reject=B}),this.result.then(null,()=>{})}close(h){this._windowCmptRef&&(this._closed.next(h),this._resolve(h),this._removeModalElements())}_dismiss(h){this._dismissed.next(h),this._reject(h),this._removeModalElements()}dismiss(h){if(this._windowCmptRef)if(this._beforeDismiss){const a=this._beforeDismiss();!function Gt(c){return c&&c.then}(a)?!1!==a&&this._dismiss(h):a.then(d=>{!1!==d&&this._dismiss(h)},()=>{})}else this._dismiss(h)}_removeModalElements(){const h=this._windowCmptRef.instance.hide(),a=this._backdropCmptRef?this._backdropCmptRef.instance.hide():(0,Te.of)(void 0);h.subscribe(()=>{const{nativeElement:d}=this._windowCmptRef.location;d.parentNode.removeChild(d),this._windowCmptRef.destroy(),this._contentRef&&this._contentRef.viewRef&&this._contentRef.viewRef.destroy(),this._windowCmptRef=null,this._contentRef=null}),a.subscribe(()=>{if(this._backdropCmptRef){const{nativeElement:d}=this._backdropCmptRef.location;d.parentNode.removeChild(d),this._backdropCmptRef.destroy(),this._backdropCmptRef=null}}),cr(h,a).subscribe(()=>{this._hidden.next(),this._hidden.complete()})}}var v=function(c){return c[c.BACKDROP_CLICK=0]="BACKDROP_CLICK",c[c.ESC=1]="ESC",c}(v||{});let C=(()=>{class c{constructor(a,d,m){this._document=a,this._elRef=d,this._zone=m,this._closed$=new jt.x,this._elWithFocus=null,this.backdrop=!0,this.keyboard=!0,this.dismissEvent=new T.vpe,this.shown=new jt.x,this.hidden=new jt.x}get fullscreenClass(){return!0===this.fullscreen?" modal-fullscreen":te(this.fullscreen)?` modal-fullscreen-${this.fullscreen}-down`:""}dismiss(a){this.dismissEvent.emit(a)}ngOnInit(){this._elWithFocus=this._document.activeElement,this._zone.onStable.asObservable().pipe((0,An.q)(1)).subscribe(()=>{this._show()})}ngOnDestroy(){this._disableEventHandling()}hide(){const{nativeElement:a}=this._elRef,d={animation:this.animation,runningTransition:"stop"},B=cr(Ni(this._zone,a,()=>a.classList.remove("show"),d),Ni(this._zone,this._dialogEl.nativeElement,()=>{},d));return B.subscribe(()=>{this.hidden.next(),this.hidden.complete()}),this._disableEventHandling(),this._restoreFocus(),B}_show(){const a={animation:this.animation,runningTransition:"continue"};cr(Ni(this._zone,this._elRef.nativeElement,(S,B)=>{B&&Hi(S),S.classList.add("show")},a),Ni(this._zone,this._dialogEl.nativeElement,()=>{},a)).subscribe(()=>{this.shown.next(),this.shown.complete()}),this._enableEventHandling(),this._setFocus()}_enableEventHandling(){const{nativeElement:a}=this._elRef;this._zone.runOutsideAngular(()=>{Ot(a,"keydown").pipe((0,Zt.R)(this._closed$),(0,Ln.h)(m=>m.which===Wr.Escape)).subscribe(m=>{this.keyboard?requestAnimationFrame(()=>{m.defaultPrevented||this._zone.run(()=>this.dismiss(v.ESC))}):"static"===this.backdrop&&this._bumpBackdrop()});let d=!1;Ot(this._dialogEl.nativeElement,"mousedown").pipe((0,Zt.R)(this._closed$),(0,Gn.b)(()=>d=!1),(0,Ne.w)(()=>Ot(a,"mouseup").pipe((0,Zt.R)(this._closed$),(0,An.q)(1))),(0,Ln.h)(({target:m})=>a===m)).subscribe(()=>{d=!0}),Ot(a,"click").pipe((0,Zt.R)(this._closed$)).subscribe(({target:m})=>{a===m&&("static"===this.backdrop?this._bumpBackdrop():!0===this.backdrop&&!d&&this._zone.run(()=>this.dismiss(v.BACKDROP_CLICK))),d=!1})})}_disableEventHandling(){this._closed$.next()}_setFocus(){const{nativeElement:a}=this._elRef;if(!a.contains(document.activeElement)){const d=a.querySelector("[ngbAutofocus]"),m=yh(a)[0];(d||m||a).focus()}}_restoreFocus(){const a=this._document.body,d=this._elWithFocus;let m;m=d&&d.focus&&a.contains(d)?d:a,this._zone.runOutsideAngular(()=>{setTimeout(()=>m.focus()),this._elWithFocus=null})}_bumpBackdrop(){"static"===this.backdrop&&Ni(this._zone,this._elRef.nativeElement,({classList:a})=>(a.add("modal-static"),()=>a.remove("modal-static")),{animation:this.animation,runningTransition:"continue"})}static#e=this.\u0275fac=function(d){return new(d||c)(T.Y36(cn.K0),T.Y36(T.SBq),T.Y36(T.R0b))};static#t=this.\u0275cmp=T.Xpm({type:c,selectors:[["ngb-modal-window"]],viewQuery:function(d,m){if(1&d&&T.Gf(Mi,7),2&d){let S;T.iGM(S=T.CRH())&&(m._dialogEl=S.first)}},hostAttrs:["role","dialog","tabindex","-1"],hostVars:7,hostBindings:function(d,m){2&d&&(T.uIk("aria-modal",!0)("aria-labelledby",m.ariaLabelledBy)("aria-describedby",m.ariaDescribedBy),T.Tol("modal d-block"+(m.windowClass?" "+m.windowClass:"")),T.ekj("fade",m.animation))},inputs:{animation:"animation",ariaLabelledBy:"ariaLabelledBy",ariaDescribedBy:"ariaDescribedBy",backdrop:"backdrop",centered:"centered",fullscreen:"fullscreen",keyboard:"keyboard",scrollable:"scrollable",size:"size",windowClass:"windowClass",modalDialogClass:"modalDialogClass"},outputs:{dismissEvent:"dismiss"},standalone:!0,features:[T.jDz],ngContentSelectors:Tl,decls:4,vars:2,consts:[["role","document"],["dialog",""],[1,"modal-content"]],template:function(d,m){1&d&&(T.F$t(),T.TgZ(0,"div",0,1)(2,"div",2),T.Hsn(3),T.qZA()()),2&d&&T.Tol("modal-dialog"+(m.size?" modal-"+m.size:"")+(m.centered?" modal-dialog-centered":"")+m.fullscreenClass+(m.scrollable?" modal-dialog-scrollable":"")+(m.modalDialogClass?" "+m.modalDialogClass:""))},styles:["ngb-modal-window .component-host-scrollable{display:flex;flex-direction:column;overflow:hidden}\n"],encapsulation:2})}return c})(),G=(()=>{class c{constructor(a){this._document=a}hide(){const a=Math.abs(window.innerWidth-this._document.documentElement.clientWidth),d=this._document.body,m=d.style,{overflow:S,paddingRight:B}=m;if(a>0){const Y=parseFloat(window.getComputedStyle(d).paddingRight);m.paddingRight=`${Y+a}px`}return m.overflow="hidden",()=>{a>0&&(m.paddingRight=B),m.overflow=S}}static#e=this.\u0275fac=function(d){return new(d||c)(T.LFG(cn.K0))};static#t=this.\u0275prov=T.Yz7({token:c,factory:c.\u0275fac,providedIn:"root"})}return c})(),X=(()=>{class c{constructor(a,d,m,S,B,Y,ae){this._applicationRef=a,this._injector=d,this._environmentInjector=m,this._document=S,this._scrollBar=B,this._rendererFactory=Y,this._ngZone=ae,this._activeWindowCmptHasChanged=new jt.x,this._ariaHiddenValues=new Map,this._scrollBarRestoreFn=null,this._modalRefs=[],this._windowCmpts=[],this._activeInstances=new T.vpe,this._activeWindowCmptHasChanged.subscribe(()=>{if(this._windowCmpts.length){const pe=this._windowCmpts[this._windowCmpts.length-1];((c,h,a,d=!1)=>{c.runOutsideAngular(()=>{const m=Ot(h,"focusin").pipe((0,Zt.R)(a),(0,Ee.U)(S=>S.target));Ot(h,"keydown").pipe((0,Zt.R)(a),(0,Ln.h)(S=>S.which===Wr.Tab),pt(m)).subscribe(([S,B])=>{const[Y,ae]=yh(h);(B===Y||B===h)&&S.shiftKey&&(ae.focus(),S.preventDefault()),B===ae&&!S.shiftKey&&(Y.focus(),S.preventDefault())}),d&&Ot(h,"click").pipe((0,Zt.R)(a),pt(m),(0,Ee.U)(S=>S[1])).subscribe(S=>S.focus())})})(this._ngZone,pe.location.nativeElement,this._activeWindowCmptHasChanged),this._revertAriaHidden(),this._setAriaHidden(pe.location.nativeElement)}})}_restoreScrollBar(){const a=this._scrollBarRestoreFn;a&&(this._scrollBarRestoreFn=null,a())}_hideScrollBar(){this._scrollBarRestoreFn||(this._scrollBarRestoreFn=this._scrollBar.hide())}open(a,d,m){const S=m.container instanceof HTMLElement?m.container:Ze(m.container)?this._document.querySelector(m.container):this._document.body,B=this._rendererFactory.createRenderer(null,null);if(!S)throw new Error(`The specified modal container "${m.container||"body"}" was not found in the DOM.`);this._hideScrollBar();const Y=new Dp,ae=(a=m.injector||a).get(T.lqb,null)||this._environmentInjector,pe=this._getContentRef(a,ae,d,Y,m);let Ce=!1!==m.backdrop?this._attachBackdrop(S):void 0,rt=this._attachWindowComponent(S,pe.nodes),ut=new g(rt,pe,Ce,m.beforeDismiss);return this._registerModalRef(ut),this._registerWindowCmpt(rt),ut.hidden.pipe((0,An.q)(1)).subscribe(()=>Promise.resolve(!0).then(()=>{this._modalRefs.length||(B.removeClass(this._document.body,"modal-open"),this._restoreScrollBar(),this._revertAriaHidden())})),Y.close=dt=>{ut.close(dt)},Y.dismiss=dt=>{ut.dismiss(dt)},Y.update=dt=>{ut.update(dt)},ut.update(m),1===this._modalRefs.length&&B.addClass(this._document.body,"modal-open"),Ce&&Ce.instance&&Ce.changeDetectorRef.detectChanges(),rt.changeDetectorRef.detectChanges(),ut}get activeInstances(){return this._activeInstances}dismissAll(a){this._modalRefs.forEach(d=>d.dismiss(a))}hasOpenModals(){return this._modalRefs.length>0}_attachBackdrop(a){let d=(0,T.LMc)(ld,{environmentInjector:this._applicationRef.injector,elementInjector:this._injector});return this._applicationRef.attachView(d.hostView),a.appendChild(d.location.nativeElement),d}_attachWindowComponent(a,d){let m=(0,T.LMc)(C,{environmentInjector:this._applicationRef.injector,elementInjector:this._injector,projectableNodes:d});return this._applicationRef.attachView(m.hostView),a.appendChild(m.location.nativeElement),m}_getContentRef(a,d,m,S,B){return m?m instanceof T.Rgc?this._createFromTemplateRef(m,S):te(m)?this._createFromString(m):this._createFromComponent(a,d,m,S,B):new pl([])}_createFromTemplateRef(a,d){const S=a.createEmbeddedView({$implicit:d,close(B){d.close(B)},dismiss(B){d.dismiss(B)}});return this._applicationRef.attachView(S),new pl([S.rootNodes],S)}_createFromString(a){const d=this._document.createTextNode(`${a}`);return new pl([[d]])}_createFromComponent(a,d,m,S,B){const Y=T.zs3.create({providers:[{provide:Dp,useValue:S}],parent:a}),ae=(0,T.LMc)(m,{environmentInjector:d,elementInjector:Y}),pe=ae.location.nativeElement;return B.scrollable&&pe.classList.add("component-host-scrollable"),this._applicationRef.attachView(ae.hostView),new pl([[pe]],ae.hostView,ae)}_setAriaHidden(a){const d=a.parentElement;d&&a!==this._document.body&&(Array.from(d.children).forEach(m=>{m!==a&&"SCRIPT"!==m.nodeName&&(this._ariaHiddenValues.set(m,m.getAttribute("aria-hidden")),m.setAttribute("aria-hidden","true"))}),this._setAriaHidden(d))}_revertAriaHidden(){this._ariaHiddenValues.forEach((a,d)=>{a?d.setAttribute("aria-hidden",a):d.removeAttribute("aria-hidden")}),this._ariaHiddenValues.clear()}_registerModalRef(a){const d=()=>{const m=this._modalRefs.indexOf(a);m>-1&&(this._modalRefs.splice(m,1),this._activeInstances.emit(this._modalRefs))};this._modalRefs.push(a),this._activeInstances.emit(this._modalRefs),a.result.then(d,d)}_registerWindowCmpt(a){this._windowCmpts.push(a),this._activeWindowCmptHasChanged.next(),a.onDestroy(()=>{const d=this._windowCmpts.indexOf(a);d>-1&&(this._windowCmpts.splice(d,1),this._activeWindowCmptHasChanged.next())})}static#e=this.\u0275fac=function(d){return new(d||c)(T.LFG(T.z2F),T.LFG(T.zs3),T.LFG(T.lqb),T.LFG(cn.K0),T.LFG(G),T.LFG(T.FYo),T.LFG(T.R0b))};static#t=this.\u0275prov=T.Yz7({token:c,factory:c.\u0275fac,providedIn:"root"})}return c})(),De=(()=>{class c{constructor(a){this._ngbConfig=a,this.backdrop=!0,this.fullscreen=!1,this.keyboard=!0}get animation(){return void 0===this._animation?this._ngbConfig.animation:this._animation}set animation(a){this._animation=a}static#e=this.\u0275fac=function(d){return new(d||c)(T.LFG(ba))};static#t=this.\u0275prov=T.Yz7({token:c,factory:c.\u0275fac,providedIn:"root"})}return c})(),We=(()=>{class c{constructor(a,d,m){this._injector=a,this._modalStack=d,this._config=m}open(a,d={}){const m={...this._config,animation:this._config.animation,...d};return this._modalStack.open(this._injector,a,m)}get activeInstances(){return this._modalStack.activeInstances}dismissAll(a){this._modalStack.dismissAll(a)}hasOpenModals(){return this._modalStack.hasOpenModals()}static#e=this.\u0275fac=function(d){return new(d||c)(T.LFG(T.zs3),T.LFG(X),T.LFG(De))};static#t=this.\u0275prov=T.Yz7({token:c,factory:c.\u0275fac,providedIn:"root"})}return c})(),gt=(()=>{class c{static#e=this.\u0275fac=function(d){return new(d||c)};static#t=this.\u0275mod=T.oAB({type:c});static#n=this.\u0275inj=T.cJS({providers:[We]})}return c})(),gl=(()=>{class c{static#e=this.\u0275fac=function(d){return new(d||c)};static#t=this.\u0275mod=T.oAB({type:c});static#n=this.\u0275inj=T.cJS({})}return c})(),wh=(()=>{class c{static#e=this.\u0275fac=function(d){return new(d||c)};static#t=this.\u0275mod=T.oAB({type:c});static#n=this.\u0275inj=T.cJS({})}return c})(),Lg=(()=>{class c{static#e=this.\u0275fac=function(d){return new(d||c)};static#t=this.\u0275mod=T.oAB({type:c});static#n=this.\u0275inj=T.cJS({})}return c})(),Vg=(()=>{class c{static#e=this.\u0275fac=function(d){return new(d||c)};static#t=this.\u0275mod=T.oAB({type:c});static#n=this.\u0275inj=T.cJS({})}return c})(),Ml=(()=>{class c{static#e=this.\u0275fac=function(d){return new(d||c)};static#t=this.\u0275mod=T.oAB({type:c});static#n=this.\u0275inj=T.cJS({})}return c})(),Sh=(()=>{class c{static#e=this.\u0275fac=function(d){return new(d||c)};static#t=this.\u0275mod=T.oAB({type:c});static#n=this.\u0275inj=T.cJS({})}return c})(),Rh=(()=>{class c{static#e=this.\u0275fac=function(d){return new(d||c)};static#t=this.\u0275mod=T.oAB({type:c});static#n=this.\u0275inj=T.cJS({})}return c})(),qm=(()=>{class c{static#e=this.\u0275fac=function(d){return new(d||c)};static#t=this.\u0275mod=T.oAB({type:c});static#n=this.\u0275inj=T.cJS({})}return c})(),Fp=(()=>{class c{static#e=this.\u0275fac=function(d){return new(d||c)};static#t=this.\u0275mod=T.oAB({type:c});static#n=this.\u0275inj=T.cJS({})}return c})();new T.OlP("live announcer delay",{providedIn:"root",factory:function Rf(){return 100}});let Nf=(()=>{class c{static#e=this.\u0275fac=function(d){return new(d||c)};static#t=this.\u0275mod=T.oAB({type:c});static#n=this.\u0275inj=T.cJS({})}return c})(),Oh=(()=>{class c{static#e=this.\u0275fac=function(d){return new(d||c)};static#t=this.\u0275mod=T.oAB({type:c});static#n=this.\u0275inj=T.cJS({})}return c})();const Of=[Eu,$o,Ql,si,Su,Hd,gt,gl,Oh,wh,Lg,Vg,Ml,Sh,Rh,qm,Fp,Nf];let hd=(()=>{class c{static#e=this.\u0275fac=function(d){return new(d||c)};static#t=this.\u0275mod=T.oAB({type:c});static#n=this.\u0275inj=T.cJS({imports:[Of,Eu,$o,Ql,si,Su,Hd,gt,gl,Oh,wh,Lg,Vg,Ml,Sh,Rh,qm,Fp,Nf]})}return c})();var di=$(6825);function xl(c){return new T.vHH(3e3,!1)}function au(c){switch(c.length){case 0:return new di.ZN;case 1:return c[0];default:return new di.ZE(c)}}function Up(c,h,a=new Map,d=new Map){const m=[],S=[];let B=-1,Y=null;if(h.forEach(ae=>{const pe=ae.get("offset"),Ce=pe==B,rt=Ce&&Y||new Map;ae.forEach((ut,dt)=>{let Nt=dt,$t=ut;if("offset"!==dt)switch(Nt=c.normalizePropertyName(Nt,m),$t){case di.k1:$t=a.get(dt);break;case di.l3:$t=d.get(dt);break;default:$t=c.normalizeStyleValue(dt,Nt,$t,m)}rt.set(Nt,$t)}),Ce||S.push(rt),Y=rt,B=pe}),m.length)throw function fy(c){return new T.vHH(3502,!1)}();return S}function Yd(c,h,a,d){switch(h){case"start":c.onStart(()=>d(a&&Zd(a,"start",c)));break;case"done":c.onDone(()=>d(a&&Zd(a,"done",c)));break;case"destroy":c.onDestroy(()=>d(a&&Zd(a,"destroy",c)))}}function Zd(c,h,a){const S=cc(c.element,c.triggerName,c.fromState,c.toState,h||c.phaseName,a.totalTime??c.totalTime,!!a.disabled),B=c._data;return null!=B&&(S._data=B),S}function cc(c,h,a,d,m="",S=0,B){return{element:c,triggerName:h,fromState:a,toState:d,phaseName:m,totalTime:S,disabled:!!B}}function za(c,h,a){let d=c.get(h);return d||c.set(h,d=a),d}function i_(c){const h=c.indexOf(":");return[c.substring(1,h),c.slice(h+1)]}const s_=(()=>typeof document>"u"?null:document.documentElement)();function Ff(c){const h=c.parentNode||c.host||null;return h===s_?null:h}let pd=null,Lf=!1;function Xg(c,h){for(;h;){if(h===c)return!0;h=Ff(h)}return!1}function o_(c,h,a){if(a)return Array.from(c.querySelectorAll(h));const d=c.querySelector(h);return d?[d]:[]}let Vh=(()=>{class c{validateStyleProperty(a){return function Jg(c){pd||(pd=function my(){return typeof document<"u"?document.body:null}()||{},Lf=!!pd.style&&"WebkitAppearance"in pd.style);let h=!0;return pd.style&&!function Qg(c){return"ebkit"==c.substring(1,6)}(c)&&(h=c in pd.style,!h&&Lf&&(h="Webkit"+c.charAt(0).toUpperCase()+c.slice(1)in pd.style)),h}(a)}matchesElement(a,d){return!1}containsElement(a,d){return Xg(a,d)}getParentElement(a){return Ff(a)}query(a,d,m){return o_(a,d,m)}computeStyle(a,d,m){return m||""}animate(a,d,m,S,B,Y=[],ae){return new di.ZN(m,S)}static#e=this.\u0275fac=function(d){return new(d||c)};static#t=this.\u0275prov=T.Yz7({token:c,factory:c.\u0275fac})}return c})(),gd=(()=>{class c{static#e=this.NOOP=new Vh}return c})();const Hp=1e3,Lc="ng-enter",Bh="ng-leave",md="ng-trigger",_d=".ng-trigger",Qd="ng-animating",Vc=".ng-animating";function lu(c){if("number"==typeof c)return c;const h=c.match(/^(-?[\.\d]+)(m?s)/);return!h||h.length<2?0:Jd(parseFloat(h[1]),h[2])}function Jd(c,h){return"s"===h?c*Hp:c}function dc(c,h,a){return c.hasOwnProperty("duration")?c:function $p(c,h,a){let m,S=0,B="";if("string"==typeof c){const Y=c.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===Y)return h.push(xl()),{duration:0,delay:0,easing:""};m=Jd(parseFloat(Y[1]),Y[2]);const ae=Y[3];null!=ae&&(S=Jd(parseFloat(ae),Y[4]));const pe=Y[5];pe&&(B=pe)}else m=c;if(!a){let Y=!1,ae=h.length;m<0&&(h.push(function uy(){return new T.vHH(3100,!1)}()),Y=!0),S<0&&(h.push(function Mh(){return new T.vHH(3101,!1)}()),Y=!0),Y&&h.splice(ae,0,xl())}return{duration:m,delay:S,easing:B}}(c,h,a)}function hc(c,h={}){return Object.keys(c).forEach(a=>{h[a]=c[a]}),h}function yd(c){const h=new Map;return Object.keys(c).forEach(a=>{h.set(a,c[a])}),h}function Bc(c,h=new Map,a){if(a)for(let[d,m]of a)h.set(d,m);for(let[d,m]of c)h.set(d,m);return h}function fc(c,h,a){h.forEach((d,m)=>{const S=Uh(m);a&&!a.has(m)&&a.set(m,c.style[S]),c.style[S]=d})}function pc(c,h){h.forEach((a,d)=>{const m=Uh(d);c.style[m]=""})}function Uc(c){return Array.isArray(c)?1==c.length?c[0]:(0,di.vP)(c):c}const nm=new RegExp("{{\\s*(.+?)\\s*}}","g");function _y(c){let h=[];if("string"==typeof c){let a;for(;a=nm.exec(c);)h.push(a[1]);nm.lastIndex=0}return h}function fo(c,h,a){const d=c.toString(),m=d.replace(nm,(S,B)=>{let Y=h[B];return null==Y&&(a.push(function Fc(c){return new T.vHH(3003,!1)}()),Y=""),Y.toString()});return m==d?c:m}function Xd(c){const h=[];let a=c.next();for(;!a.done;)h.push(a.value),a=c.next();return h}const zp=/-+([a-z0-9])/g;function Uh(c){return c.replace(zp,(...h)=>h[1].toUpperCase())}function kl(c,h,a){switch(h.type){case 7:return c.visitTrigger(h,a);case 0:return c.visitState(h,a);case 1:return c.visitTransition(h,a);case 2:return c.visitSequence(h,a);case 3:return c.visitGroup(h,a);case 4:return c.visitAnimate(h,a);case 5:return c.visitKeyframes(h,a);case 6:return c.visitStyle(h,a);case 8:return c.visitReference(h,a);case 9:return c.visitAnimateChild(h,a);case 10:return c.visitAnimateRef(h,a);case 11:return c.visitQuery(h,a);case 12:return c.visitStagger(h,a);default:throw function Xm(c){return new T.vHH(3004,!1)}()}}function rm(c,h){return window.getComputedStyle(c)[h]}const Ou="*";function gc(c,h){const a=[];return"string"==typeof c?c.split(/\s*,\s*/).forEach(d=>function sm(c,h,a){if(":"==c[0]){const ae=function Gf(c,h){switch(c){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(a,d)=>parseFloat(d)>parseFloat(a);case":decrement":return(a,d)=>parseFloat(d)<parseFloat(a);default:return h.push(function Kg(c){return new T.vHH(3016,!1)}()),"* => *"}}(c,a);if("function"==typeof ae)return void h.push(ae);c=ae}const d=c.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==d||d.length<4)return a.push(function qg(c){return new T.vHH(3015,!1)}()),h;const m=d[1],S=d[2],B=d[3];h.push(om(m,B));"<"==S[0]&&!(m==Ou&&B==Ou)&&h.push(om(B,m))}(d,a,h)):a.push(c),a}const vd=new Set(["true","1"]),jh=new Set(["false","0"]);function om(c,h){const a=vd.has(c)||jh.has(c),d=vd.has(h)||jh.has(h);return(m,S)=>{let B=c==Ou||c==m,Y=h==Ou||h==S;return!B&&a&&"boolean"==typeof m&&(B=m?vd.has(c):jh.has(c)),!Y&&d&&"boolean"==typeof S&&(Y=S?vd.has(h):jh.has(h)),B&&Y}}const qp=new RegExp("s*:selfs*,?","g");function uu(c,h,a,d){return new Kp(c).build(h,a,d)}class Kp{constructor(h){this._driver=h}build(h,a,d){const m=new am(a);return this._resetContextStyleTimingState(m),kl(this,Uc(h),m)}_resetContextStyleTimingState(h){h.currentQuerySelector="",h.collectedStyles=new Map,h.collectedStyles.set("",new Map),h.currentTime=0}visitTrigger(h,a){let d=a.queryCount=0,m=a.depCount=0;const S=[],B=[];return"@"==h.name.charAt(0)&&a.errors.push(function e_(){return new T.vHH(3006,!1)}()),h.definitions.forEach(Y=>{if(this._resetContextStyleTimingState(a),0==Y.type){const ae=Y,pe=ae.name;pe.toString().split(/\s*,\s*/).forEach(Ce=>{ae.name=Ce,S.push(this.visitState(ae,a))}),ae.name=pe}else if(1==Y.type){const ae=this.visitTransition(Y,a);d+=ae.queryCount,m+=ae.depCount,B.push(ae)}else a.errors.push(function dy(){return new T.vHH(3007,!1)}())}),{type:7,name:h.name,states:S,transitions:B,queryCount:d,depCount:m,options:null}}visitState(h,a){const d=this.visitStyle(h.styles,a),m=h.options&&h.options.params||null;if(d.containsDynamicStyles){const S=new Set,B=m||{};d.styles.forEach(Y=>{Y instanceof Map&&Y.forEach(ae=>{_y(ae).forEach(pe=>{B.hasOwnProperty(pe)||S.add(pe)})})}),S.size&&(Xd(S.values()),a.errors.push(function zg(c,h){return new T.vHH(3008,!1)}()))}return{type:0,name:h.name,style:d,options:m?{params:m}:null}}visitTransition(h,a){a.queryCount=0,a.depCount=0;const d=kl(this,Uc(h.animation),a);return{type:1,matchers:gc(h.expr,a.errors),animation:d,queryCount:a.queryCount,depCount:a.depCount,options:Mu(h.options)}}visitSequence(h,a){return{type:2,steps:h.steps.map(d=>kl(this,d,a)),options:Mu(h.options)}}visitGroup(h,a){const d=a.currentTime;let m=0;const S=h.steps.map(B=>{a.currentTime=d;const Y=kl(this,B,a);return m=Math.max(m,a.currentTime),Y});return a.currentTime=m,{type:3,steps:S,options:Mu(h.options)}}visitAnimate(h,a){const d=function lm(c,h){if(c.hasOwnProperty("duration"))return c;if("number"==typeof c)return zf(dc(c,h).duration,0,"");const a=c;if(a.split(/\s+/).some(S=>"{"==S.charAt(0)&&"{"==S.charAt(1))){const S=zf(0,0,"");return S.dynamic=!0,S.strValue=a,S}const m=dc(a,h);return zf(m.duration,m.delay,m.easing)}(h.timings,a.errors);a.currentAnimateTimings=d;let m,S=h.styles?h.styles:(0,di.oB)({});if(5==S.type)m=this.visitKeyframes(S,a);else{let B=h.styles,Y=!1;if(!B){Y=!0;const pe={};d.easing&&(pe.easing=d.easing),B=(0,di.oB)(pe)}a.currentTime+=d.duration+d.delay;const ae=this.visitStyle(B,a);ae.isEmptyStep=Y,m=ae}return a.currentAnimateTimings=null,{type:4,timings:d,style:m,options:null}}visitStyle(h,a){const d=this._makeStyleAst(h,a);return this._validateStyleAst(d,a),d}_makeStyleAst(h,a){const d=[],m=Array.isArray(h.styles)?h.styles:[h.styles];for(let Y of m)"string"==typeof Y?Y===di.l3?d.push(Y):a.errors.push(new T.vHH(3002,!1)):d.push(yd(Y));let S=!1,B=null;return d.forEach(Y=>{if(Y instanceof Map&&(Y.has("easing")&&(B=Y.get("easing"),Y.delete("easing")),!S))for(let ae of Y.values())if(ae.toString().indexOf("{{")>=0){S=!0;break}}),{type:6,styles:d,easing:B,offset:h.offset,containsDynamicStyles:S,options:null}}_validateStyleAst(h,a){const d=a.currentAnimateTimings;let m=a.currentTime,S=a.currentTime;d&&S>0&&(S-=d.duration+d.delay),h.styles.forEach(B=>{"string"!=typeof B&&B.forEach((Y,ae)=>{const pe=a.collectedStyles.get(a.currentQuerySelector),Ce=pe.get(ae);let rt=!0;Ce&&(S!=m&&S>=Ce.startTime&&m<=Ce.endTime&&(a.errors.push(function xh(c,h,a,d,m){return new T.vHH(3010,!1)}()),rt=!1),S=Ce.startTime),rt&&pe.set(ae,{startTime:S,endTime:m}),a.options&&function tm(c,h,a){const d=h.params||{},m=_y(c);m.length&&m.forEach(S=>{d.hasOwnProperty(S)||a.push(function Lp(c){return new T.vHH(3001,!1)}())})}(Y,a.options,a.errors)})})}visitKeyframes(h,a){const d={type:5,styles:[],options:null};if(!a.currentAnimateTimings)return a.errors.push(function Mf(){return new T.vHH(3011,!1)}()),d;let S=0;const B=[];let Y=!1,ae=!1,pe=0;const Ce=h.steps.map(Nn=>{const xn=this._makeStyleAst(Nn,a);let vr=null!=xn.offset?xn.offset:function l_(c){if("string"==typeof c)return null;let h=null;if(Array.isArray(c))c.forEach(a=>{if(a instanceof Map&&a.has("offset")){const d=a;h=parseFloat(d.get("offset")),d.delete("offset")}});else if(c instanceof Map&&c.has("offset")){const a=c;h=parseFloat(a.get("offset")),a.delete("offset")}return h}(xn.styles),Pn=0;return null!=vr&&(S++,Pn=xn.offset=vr),ae=ae||Pn<0||Pn>1,Y=Y||Pn<pe,pe=Pn,B.push(Pn),xn});ae&&a.errors.push(function Wg(){return new T.vHH(3012,!1)}()),Y&&a.errors.push(function n_(){return new T.vHH(3200,!1)}());const rt=h.steps.length;let ut=0;S>0&&S<rt?a.errors.push(function Vp(){return new T.vHH(3202,!1)}()):0==S&&(ut=1/(rt-1));const dt=rt-1,Nt=a.currentTime,$t=a.currentAnimateTimings,Ht=$t.duration;return Ce.forEach((Nn,xn)=>{const vr=ut>0?xn==dt?1:ut*xn:B[xn],Pn=vr*Ht;a.currentTime=Nt+$t.delay+Pn,$t.duration=Pn,this._validateStyleAst(Nn,a),Nn.offset=vr,d.styles.push(Nn)}),d}visitReference(h,a){return{type:8,animation:kl(this,Uc(h.animation),a),options:Mu(h.options)}}visitAnimateChild(h,a){return a.depCount++,{type:9,options:Mu(h.options)}}visitAnimateRef(h,a){return{type:10,animation:this.visitReference(h.animation,a),options:Mu(h.options)}}visitQuery(h,a){const d=a.currentQuerySelector,m=h.options||{};a.queryCount++,a.currentQuery=h;const[S,B]=function Yp(c){const h=!!c.split(/\s*,\s*/).find(a=>":self"==a);return h&&(c=c.replace(qp,"")),c=c.replace(/@\*/g,_d).replace(/@\w+/g,a=>_d+"-"+a.slice(1)).replace(/:animating/g,Vc),[c,h]}(h.selector);a.currentQuerySelector=d.length?d+" "+S:S,za(a.collectedStyles,a.currentQuerySelector,new Map);const Y=kl(this,Uc(h.animation),a);return a.currentQuery=null,a.currentQuerySelector=d,{type:11,selector:S,limit:m.limit||0,optional:!!m.optional,includeSelf:B,animation:Y,originalSelector:h.selector,options:Mu(h.options)}}visitStagger(h,a){a.currentQuery||a.errors.push(function fd(){return new T.vHH(3013,!1)}());const d="full"===h.timings?{duration:0,delay:0,easing:"full"}:dc(h.timings,a.errors,!0);return{type:12,animation:kl(this,Uc(h.animation),a),timings:d,options:null}}}class am{constructor(h){this.errors=h,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles=new Map,this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function Mu(c){return c?(c=hc(c)).params&&(c.params=function Iy(c){return c?hc(c):null}(c.params)):c={},c}function zf(c,h,a){return{duration:c,delay:h,easing:a}}function Zp(c,h,a,d,m,S,B=null,Y=!1){return{type:1,element:c,keyframes:h,preStyleProps:a,postStyleProps:d,duration:m,delay:S,totalTime:m+S,easing:B,subTimeline:Y}}class Id{constructor(){this._map=new Map}get(h){return this._map.get(h)||[]}append(h,a){let d=this._map.get(h);d||this._map.set(h,d=[]),d.push(...a)}has(h){return this._map.has(h)}clear(){this._map.clear()}}const xu=new RegExp(":enter","g"),Ey=new RegExp(":leave","g");function Wf(c,h,a,d,m,S=new Map,B=new Map,Y,ae,pe=[]){return(new mc).buildKeyframes(c,h,a,d,m,S,B,Y,ae,pe)}class mc{buildKeyframes(h,a,d,m,S,B,Y,ae,pe,Ce=[]){pe=pe||new Id;const rt=new qf(h,a,pe,m,S,Ce,[]);rt.options=ae;const ut=ae.delay?lu(ae.delay):0;rt.currentTimeline.delayNextStep(ut),rt.currentTimeline.setStyles([B],null,rt.errors,ae),kl(this,d,rt);const dt=rt.timelines.filter(Nt=>Nt.containsAnimation());if(dt.length&&Y.size){let Nt;for(let $t=dt.length-1;$t>=0;$t--){const Ht=dt[$t];if(Ht.element===a){Nt=Ht;break}}Nt&&!Nt.allowOnlyTimelineStyles()&&Nt.setStyles([Y],null,rt.errors,ae)}return dt.length?dt.map(Nt=>Nt.buildKeyframes()):[Zp(a,[],[],[],0,ut,"",!1)]}visitTrigger(h,a){}visitState(h,a){}visitTransition(h,a){}visitAnimateChild(h,a){const d=a.subInstructions.get(a.element);if(d){const m=a.createSubContext(h.options),S=a.currentTimeline.currentTime,B=this._visitSubInstructions(d,m,m.options);S!=B&&a.transformIntoNewTimeline(B)}a.previousNode=h}visitAnimateRef(h,a){const d=a.createSubContext(h.options);d.transformIntoNewTimeline(),this._applyAnimationRefDelays([h.options,h.animation.options],a,d),this.visitReference(h.animation,d),a.transformIntoNewTimeline(d.currentTimeline.currentTime),a.previousNode=h}_applyAnimationRefDelays(h,a,d){for(const m of h){const S=m?.delay;if(S){const B="number"==typeof S?S:lu(fo(S,m?.params??{},a.errors));d.delayNextStep(B)}}}_visitSubInstructions(h,a,d){let S=a.currentTimeline.currentTime;const B=null!=d.duration?lu(d.duration):null,Y=null!=d.delay?lu(d.delay):null;return 0!==B&&h.forEach(ae=>{const pe=a.appendInstructionToTimeline(ae,B,Y);S=Math.max(S,pe.duration+pe.delay)}),S}visitReference(h,a){a.updateOptions(h.options,!0),kl(this,h.animation,a),a.previousNode=h}visitSequence(h,a){const d=a.subContextCount;let m=a;const S=h.options;if(S&&(S.params||S.delay)&&(m=a.createSubContext(S),m.transformIntoNewTimeline(),null!=S.delay)){6==m.previousNode.type&&(m.currentTimeline.snapshotCurrentStyles(),m.previousNode=Ed);const B=lu(S.delay);m.delayNextStep(B)}h.steps.length&&(h.steps.forEach(B=>kl(this,B,m)),m.currentTimeline.applyStylesToKeyframe(),m.subContextCount>d&&m.transformIntoNewTimeline()),a.previousNode=h}visitGroup(h,a){const d=[];let m=a.currentTimeline.currentTime;const S=h.options&&h.options.delay?lu(h.options.delay):0;h.steps.forEach(B=>{const Y=a.createSubContext(h.options);S&&Y.delayNextStep(S),kl(this,B,Y),m=Math.max(m,Y.currentTimeline.currentTime),d.push(Y.currentTimeline)}),d.forEach(B=>a.currentTimeline.mergeTimelineCollectedStyles(B)),a.transformIntoNewTimeline(m),a.previousNode=h}_visitTiming(h,a){if(h.dynamic){const d=h.strValue;return dc(a.params?fo(d,a.params,a.errors):d,a.errors)}return{duration:h.duration,delay:h.delay,easing:h.easing}}visitAnimate(h,a){const d=a.currentAnimateTimings=this._visitTiming(h.timings,a),m=a.currentTimeline;d.delay&&(a.incrementTime(d.delay),m.snapshotCurrentStyles());const S=h.style;5==S.type?this.visitKeyframes(S,a):(a.incrementTime(d.duration),this.visitStyle(S,a),m.applyStylesToKeyframe()),a.currentAnimateTimings=null,a.previousNode=h}visitStyle(h,a){const d=a.currentTimeline,m=a.currentAnimateTimings;!m&&d.hasCurrentStyleProperties()&&d.forwardFrame();const S=m&&m.easing||h.easing;h.isEmptyStep?d.applyEmptyStep(S):d.setStyles(h.styles,S,a.errors,a.options),a.previousNode=h}visitKeyframes(h,a){const d=a.currentAnimateTimings,m=a.currentTimeline.duration,S=d.duration,Y=a.createSubContext().currentTimeline;Y.easing=d.easing,h.styles.forEach(ae=>{Y.forwardTime((ae.offset||0)*S),Y.setStyles(ae.styles,ae.easing,a.errors,a.options),Y.applyStylesToKeyframe()}),a.currentTimeline.mergeTimelineCollectedStyles(Y),a.transformIntoNewTimeline(m+S),a.previousNode=h}visitQuery(h,a){const d=a.currentTimeline.currentTime,m=h.options||{},S=m.delay?lu(m.delay):0;S&&(6===a.previousNode.type||0==d&&a.currentTimeline.hasCurrentStyleProperties())&&(a.currentTimeline.snapshotCurrentStyles(),a.previousNode=Ed);let B=d;const Y=a.invokeQuery(h.selector,h.originalSelector,h.limit,h.includeSelf,!!m.optional,a.errors);a.currentQueryTotal=Y.length;let ae=null;Y.forEach((pe,Ce)=>{a.currentQueryIndex=Ce;const rt=a.createSubContext(h.options,pe);S&&rt.delayNextStep(S),pe===a.element&&(ae=rt.currentTimeline),kl(this,h.animation,rt),rt.currentTimeline.applyStylesToKeyframe(),B=Math.max(B,rt.currentTimeline.currentTime)}),a.currentQueryIndex=0,a.currentQueryTotal=0,a.transformIntoNewTimeline(B),ae&&(a.currentTimeline.mergeTimelineCollectedStyles(ae),a.currentTimeline.snapshotCurrentStyles()),a.previousNode=h}visitStagger(h,a){const d=a.parentContext,m=a.currentTimeline,S=h.timings,B=Math.abs(S.duration),Y=B*(a.currentQueryTotal-1);let ae=B*a.currentQueryIndex;switch(S.duration<0?"reverse":S.easing){case"reverse":ae=Y-ae;break;case"full":ae=d.currentStaggerTime}const Ce=a.currentTimeline;ae&&Ce.delayNextStep(ae);const rt=Ce.currentTime;kl(this,h.animation,a),a.previousNode=h,d.currentStaggerTime=m.currentTime-rt+(m.startTime-d.currentTimeline.startTime)}}const Ed={};class qf{constructor(h,a,d,m,S,B,Y,ae){this._driver=h,this.element=a,this.subInstructions=d,this._enterClassName=m,this._leaveClassName=S,this.errors=B,this.timelines=Y,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=Ed,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=ae||new Jp(this._driver,a,0),Y.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(h,a){if(!h)return;const d=h;let m=this.options;null!=d.duration&&(m.duration=lu(d.duration)),null!=d.delay&&(m.delay=lu(d.delay));const S=d.params;if(S){let B=m.params;B||(B=this.options.params={}),Object.keys(S).forEach(Y=>{(!a||!B.hasOwnProperty(Y))&&(B[Y]=fo(S[Y],B,this.errors))})}}_copyOptions(){const h={};if(this.options){const a=this.options.params;if(a){const d=h.params={};Object.keys(a).forEach(m=>{d[m]=a[m]})}}return h}createSubContext(h=null,a,d){const m=a||this.element,S=new qf(this._driver,m,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(m,d||0));return S.previousNode=this.previousNode,S.currentAnimateTimings=this.currentAnimateTimings,S.options=this._copyOptions(),S.updateOptions(h),S.currentQueryIndex=this.currentQueryIndex,S.currentQueryTotal=this.currentQueryTotal,S.parentContext=this,this.subContextCount++,S}transformIntoNewTimeline(h){return this.previousNode=Ed,this.currentTimeline=this.currentTimeline.fork(this.element,h),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(h,a,d){const m={duration:a??h.duration,delay:this.currentTimeline.currentTime+(d??0)+h.delay,easing:""},S=new cm(this._driver,h.element,h.keyframes,h.preStyleProps,h.postStyleProps,m,h.stretchStartingKeyframe);return this.timelines.push(S),m}incrementTime(h){this.currentTimeline.forwardTime(this.currentTimeline.duration+h)}delayNextStep(h){h>0&&this.currentTimeline.delayNextStep(h)}invokeQuery(h,a,d,m,S,B){let Y=[];if(m&&Y.push(this.element),h.length>0){h=(h=h.replace(xu,"."+this._enterClassName)).replace(Ey,"."+this._leaveClassName);let pe=this._driver.query(this.element,h,1!=d);0!==d&&(pe=d<0?pe.slice(pe.length+d,pe.length):pe.slice(0,d)),Y.push(...pe)}return!S&&0==Y.length&&B.push(function xf(c){return new T.vHH(3014,!1)}()),Y}}class Jp{constructor(h,a,d,m){this._driver=h,this.element=a,this.startTime=d,this._elementTimelineStylesLookup=m,this.duration=0,this.easing=null,this._previousKeyframe=new Map,this._currentKeyframe=new Map,this._keyframes=new Map,this._styleSummary=new Map,this._localTimelineStyles=new Map,this._pendingStyles=new Map,this._backFill=new Map,this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(a),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(a,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(h){const a=1===this._keyframes.size&&this._pendingStyles.size;this.duration||a?(this.forwardTime(this.currentTime+h),a&&this.snapshotCurrentStyles()):this.startTime+=h}fork(h,a){return this.applyStylesToKeyframe(),new Jp(this._driver,h,a||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(h){this.applyStylesToKeyframe(),this.duration=h,this._loadKeyframe()}_updateStyle(h,a){this._localTimelineStyles.set(h,a),this._globalTimelineStyles.set(h,a),this._styleSummary.set(h,{time:this.currentTime,value:a})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(h){h&&this._previousKeyframe.set("easing",h);for(let[a,d]of this._globalTimelineStyles)this._backFill.set(a,d||di.l3),this._currentKeyframe.set(a,di.l3);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(h,a,d,m){a&&this._previousKeyframe.set("easing",a);const S=m&&m.params||{},B=function cu(c,h){const a=new Map;let d;return c.forEach(m=>{if("*"===m){d=d||h.keys();for(let S of d)a.set(S,di.l3)}else Bc(m,a)}),a}(h,this._globalTimelineStyles);for(let[Y,ae]of B){const pe=fo(ae,S,d);this._pendingStyles.set(Y,pe),this._localTimelineStyles.has(Y)||this._backFill.set(Y,this._globalTimelineStyles.get(Y)??di.l3),this._updateStyle(Y,pe)}}applyStylesToKeyframe(){0!=this._pendingStyles.size&&(this._pendingStyles.forEach((h,a)=>{this._currentKeyframe.set(a,h)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((h,a)=>{this._currentKeyframe.has(a)||this._currentKeyframe.set(a,h)}))}snapshotCurrentStyles(){for(let[h,a]of this._localTimelineStyles)this._pendingStyles.set(h,a),this._updateStyle(h,a)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const h=[];for(let a in this._currentKeyframe)h.push(a);return h}mergeTimelineCollectedStyles(h){h._styleSummary.forEach((a,d)=>{const m=this._styleSummary.get(d);(!m||a.time>m.time)&&this._updateStyle(d,a.value)})}buildKeyframes(){this.applyStylesToKeyframe();const h=new Set,a=new Set,d=1===this._keyframes.size&&0===this.duration;let m=[];this._keyframes.forEach((Y,ae)=>{const pe=Bc(Y,new Map,this._backFill);pe.forEach((Ce,rt)=>{Ce===di.k1?h.add(rt):Ce===di.l3&&a.add(rt)}),d||pe.set("offset",ae/this.duration),m.push(pe)});const S=h.size?Xd(h.values()):[],B=a.size?Xd(a.values()):[];if(d){const Y=m[0],ae=new Map(Y);Y.set("offset",0),ae.set("offset",1),m=[Y,ae]}return Zp(this.element,m,S,B,this.duration,this.startTime,this.easing,!1)}}class cm extends Jp{constructor(h,a,d,m,S,B,Y=!1){super(h,a,B.delay),this.keyframes=d,this.preStyleProps=m,this.postStyleProps=S,this._stretchStartingKeyframe=Y,this.timings={duration:B.duration,delay:B.delay,easing:B.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let h=this.keyframes,{delay:a,duration:d,easing:m}=this.timings;if(this._stretchStartingKeyframe&&a){const S=[],B=d+a,Y=a/B,ae=Bc(h[0]);ae.set("offset",0),S.push(ae);const pe=Bc(h[0]);pe.set("offset",Xp(Y)),S.push(pe);const Ce=h.length-1;for(let rt=1;rt<=Ce;rt++){let ut=Bc(h[rt]);const dt=ut.get("offset");ut.set("offset",Xp((a+dt*d)/B)),S.push(ut)}d=B,a=0,m="",h=S}return Zp(this.element,h,this.preStyleProps,this.postStyleProps,d,a,m,!0)}}function Xp(c,h=3){const a=Math.pow(10,h-1);return Math.round(c*a)/a}class Kf{}const po=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]);class Hh extends Kf{normalizePropertyName(h,a){return Uh(h)}normalizeStyleValue(h,a,d,m){let S="";const B=d.toString().trim();if(po.has(a)&&0!==d&&"0"!==d)if("number"==typeof d)S="px";else{const Y=d.match(/^[+-]?[\d\.]+([a-z]*)$/);Y&&0==Y[1].length&&m.push(function cy(c,h){return new T.vHH(3005,!1)}())}return B+S}}function ku(c,h,a,d,m,S,B,Y,ae,pe,Ce,rt,ut){return{type:0,element:c,triggerName:h,isRemovalTransition:m,fromState:a,fromStyles:S,toState:d,toStyles:B,timelines:Y,queriedElements:ae,preStyleProps:pe,postStyleProps:Ce,totalTime:rt,errors:ut}}const Yf={};class eh{constructor(h,a,d){this._triggerName=h,this.ast=a,this._stateStyles=d}match(h,a,d,m){return function dm(c,h,a,d,m){return c.some(S=>S(h,a,d,m))}(this.ast.matchers,h,a,d,m)}buildStyles(h,a,d){let m=this._stateStyles.get("*");return void 0!==h&&(m=this._stateStyles.get(h?.toString())||m),m?m.buildStyles(a,d):new Map}build(h,a,d,m,S,B,Y,ae,pe,Ce){const rt=[],ut=this.ast.options&&this.ast.options.params||Yf,Nt=this.buildStyles(d,Y&&Y.params||Yf,rt),$t=ae&&ae.params||Yf,Ht=this.buildStyles(m,$t,rt),Nn=new Set,xn=new Map,vr=new Map,Pn="void"===m,Ir={params:nh($t,ut),delay:this.ast.options?.delay},pr=Ce?[]:Wf(h,a,this.ast.animation,S,B,Nt,Ht,Ir,pe,rt);let gr=0;if(pr.forEach(Gi=>{gr=Math.max(Gi.duration+Gi.delay,gr)}),rt.length)return ku(a,this._triggerName,d,m,Pn,Nt,Ht,[],[],xn,vr,gr,rt);pr.forEach(Gi=>{const gi=Gi.element,io=za(xn,gi,new Set);Gi.preStyleProps.forEach(cs=>io.add(cs));const Hs=za(vr,gi,new Set);Gi.postStyleProps.forEach(cs=>Hs.add(cs)),gi!==a&&Nn.add(gi)});const br=Xd(Nn.values());return ku(a,this._triggerName,d,m,Pn,Nt,Ht,pr,br,xn,vr,gr)}}function nh(c,h){const a=hc(h);for(const d in c)c.hasOwnProperty(d)&&null!=c[d]&&(a[d]=c[d]);return a}class by{constructor(h,a,d){this.styles=h,this.defaultParams=a,this.normalizer=d}buildStyles(h,a){const d=new Map,m=hc(this.defaultParams);return Object.keys(h).forEach(S=>{const B=h[S];null!==B&&(m[S]=B)}),this.styles.styles.forEach(S=>{"string"!=typeof S&&S.forEach((B,Y)=>{B&&(B=fo(B,m,a));const ae=this.normalizer.normalizePropertyName(Y,a);B=this.normalizer.normalizeStyleValue(Y,ae,B,a),d.set(Y,B)})}),d}}class eg{constructor(h,a,d){this.name=h,this.ast=a,this._normalizer=d,this.transitionFactories=[],this.states=new Map,a.states.forEach(m=>{this.states.set(m.name,new by(m.style,m.options&&m.options.params||{},d))}),tg(this.states,"true","1"),tg(this.states,"false","0"),a.transitions.forEach(m=>{this.transitionFactories.push(new eh(h,m,this.states))}),this.fallbackTransition=function hm(c,h,a){return new eh(c,{type:1,animation:{type:2,steps:[],options:null},matchers:[(B,Y)=>!0],options:null,queryCount:0,depCount:0},h)}(h,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(h,a,d,m){return this.transitionFactories.find(B=>B.match(h,a,d,m))||null}matchStyles(h,a,d){return this.fallbackTransition.buildStyles(h,a,d)}}function tg(c,h,a){c.has(h)?c.has(a)||c.set(a,c.get(h)):c.has(a)&&c.set(h,c.get(a))}const ng=new Id;class h_{constructor(h,a,d){this.bodyNode=h,this._driver=a,this._normalizer=d,this._animations=new Map,this._playersById=new Map,this.players=[]}register(h,a){const d=[],S=uu(this._driver,a,d,[]);if(d.length)throw function kf(c){return new T.vHH(3503,!1)}();this._animations.set(h,S)}_buildPlayer(h,a,d){const m=h.element,S=Up(this._normalizer,h.keyframes,a,d);return this._driver.animate(m,S,h.duration,h.delay,h.easing,[],!0)}create(h,a,d={}){const m=[],S=this._animations.get(h);let B;const Y=new Map;if(S?(B=Wf(this._driver,a,S,Lc,Bh,new Map,new Map,d,ng,m),B.forEach(Ce=>{const rt=za(Y,Ce.element,new Map);Ce.postStyleProps.forEach(ut=>rt.set(ut,null))})):(m.push(function No(){return new T.vHH(3300,!1)}()),B=[]),m.length)throw function r_(c){return new T.vHH(3504,!1)}();Y.forEach((Ce,rt)=>{Ce.forEach((ut,dt)=>{Ce.set(dt,this._driver.computeStyle(rt,dt,di.l3))})});const pe=au(B.map(Ce=>{const rt=Y.get(Ce.element);return this._buildPlayer(Ce,new Map,rt)}));return this._playersById.set(h,pe),pe.onDestroy(()=>this.destroy(h)),this.players.push(pe),pe}destroy(h){const a=this._getPlayer(h);a.destroy(),this._playersById.delete(h);const d=this.players.indexOf(a);d>=0&&this.players.splice(d,1)}_getPlayer(h){const a=this._playersById.get(h);if(!a)throw function qd(c){return new T.vHH(3301,!1)}();return a}listen(h,a,d,m){const S=cc(a,"","","");return Yd(this._getPlayer(h),d,S,m),()=>{}}command(h,a,d,m){if("register"==d)return void this.register(h,m[0]);if("create"==d)return void this.create(h,a,m[0]||{});const S=this._getPlayer(h);switch(d){case"play":S.play();break;case"pause":S.pause();break;case"reset":S.reset();break;case"restart":S.restart();break;case"finish":S.finish();break;case"init":S.init();break;case"setPosition":S.setPosition(parseFloat(m[0]));break;case"destroy":this.destroy(h)}}}const rh="ng-animate-queued",_c="ng-animate-disabled",fm=[],Zf={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},Gh={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},Wa="__ng_removed";class rg{get params(){return this.options.params}constructor(h,a=""){this.namespaceId=a;const d=h&&h.hasOwnProperty("value");if(this.value=function bv(c){return c??null}(d?h.value:h),d){const S=hc(h);delete S.value,this.options=S}else this.options={};this.options.params||(this.options.params={})}absorbOptions(h){const a=h.params;if(a){const d=this.options.params;Object.keys(a).forEach(m=>{null==d[m]&&(d[m]=a[m])})}}}const $h="void",pm=new rg($h);class Dy{constructor(h,a,d){this.id=h,this.hostElement=a,this._engine=d,this.players=[],this._triggers=new Map,this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+h,du(a,this._hostClassName)}listen(h,a,d,m){if(!this._triggers.has(a))throw function py(c,h){return new T.vHH(3302,!1)}();if(null==d||0==d.length)throw function Zg(c){return new T.vHH(3303,!1)}();if(!function wv(c){return"start"==c||"done"==c}(d))throw function kh(c,h){return new T.vHH(3400,!1)}();const S=za(this._elementListeners,h,[]),B={name:a,phase:d,callback:m};S.push(B);const Y=za(this._engine.statesByElement,h,new Map);return Y.has(a)||(du(h,md),du(h,md+"-"+a),Y.set(a,pm)),()=>{this._engine.afterFlush(()=>{const ae=S.indexOf(B);ae>=0&&S.splice(ae,1),this._triggers.has(a)||Y.delete(a)})}}register(h,a){return!this._triggers.has(h)&&(this._triggers.set(h,a),!0)}_getTrigger(h){const a=this._triggers.get(h);if(!a)throw function gy(c){return new T.vHH(3401,!1)}();return a}trigger(h,a,d,m=!0){const S=this._getTrigger(a),B=new Qf(this.id,a,h);let Y=this._engine.statesByElement.get(h);Y||(du(h,md),du(h,md+"-"+a),this._engine.statesByElement.set(h,Y=new Map));let ae=Y.get(a);const pe=new rg(d,this.id);if(!(d&&d.hasOwnProperty("value"))&&ae&&pe.absorbOptions(ae.options),Y.set(a,pe),ae||(ae=pm),pe.value!==$h&&ae.value===pe.value){if(!function m_(c,h){const a=Object.keys(c),d=Object.keys(h);if(a.length!=d.length)return!1;for(let m=0;m<a.length;m++){const S=a[m];if(!h.hasOwnProperty(S)||c[S]!==h[S])return!1}return!0}(ae.params,pe.params)){const $t=[],Ht=S.matchStyles(ae.value,ae.params,$t),Nn=S.matchStyles(pe.value,pe.params,$t);$t.length?this._engine.reportError($t):this._engine.afterFlush(()=>{pc(h,Ht),fc(h,Nn)})}return}const ut=za(this._engine.playersByElement,h,[]);ut.forEach($t=>{$t.namespaceId==this.id&&$t.triggerName==a&&$t.queued&&$t.destroy()});let dt=S.matchTransition(ae.value,pe.value,h,pe.params),Nt=!1;if(!dt){if(!m)return;dt=S.fallbackTransition,Nt=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:h,triggerName:a,transition:dt,fromState:ae,toState:pe,player:B,isFallbackTransition:Nt}),Nt||(du(h,rh),B.onStart(()=>{jc(h,rh)})),B.onDone(()=>{let $t=this.players.indexOf(B);$t>=0&&this.players.splice($t,1);const Ht=this._engine.playersByElement.get(h);if(Ht){let Nn=Ht.indexOf(B);Nn>=0&&Ht.splice(Nn,1)}}),this.players.push(B),ut.push(B),B}deregister(h){this._triggers.delete(h),this._engine.statesByElement.forEach(a=>a.delete(h)),this._elementListeners.forEach((a,d)=>{this._elementListeners.set(d,a.filter(m=>m.name!=h))})}clearElementCache(h){this._engine.statesByElement.delete(h),this._elementListeners.delete(h);const a=this._engine.playersByElement.get(h);a&&(a.forEach(d=>d.destroy()),this._engine.playersByElement.delete(h))}_signalRemovalForInnerTriggers(h,a){const d=this._engine.driver.query(h,_d,!0);d.forEach(m=>{if(m[Wa])return;const S=this._engine.fetchNamespacesByElement(m);S.size?S.forEach(B=>B.triggerLeaveAnimation(m,a,!1,!0)):this.clearElementCache(m)}),this._engine.afterFlushAnimationsDone(()=>d.forEach(m=>this.clearElementCache(m)))}triggerLeaveAnimation(h,a,d,m){const S=this._engine.statesByElement.get(h),B=new Map;if(S){const Y=[];if(S.forEach((ae,pe)=>{if(B.set(pe,ae.value),this._triggers.has(pe)){const Ce=this.trigger(h,pe,$h,m);Ce&&Y.push(Ce)}}),Y.length)return this._engine.markElementAsRemoved(this.id,h,!0,a,B),d&&au(Y).onDone(()=>this._engine.processLeaveNode(h)),!0}return!1}prepareLeaveAnimationListeners(h){const a=this._elementListeners.get(h),d=this._engine.statesByElement.get(h);if(a&&d){const m=new Set;a.forEach(S=>{const B=S.name;if(m.has(B))return;m.add(B);const ae=this._triggers.get(B).fallbackTransition,pe=d.get(B)||pm,Ce=new rg($h),rt=new Qf(this.id,B,h);this._engine.totalQueuedPlayers++,this._queue.push({element:h,triggerName:B,transition:ae,fromState:pe,toState:Ce,player:rt,isFallbackTransition:!0})})}}removeNode(h,a){const d=this._engine;if(h.childElementCount&&this._signalRemovalForInnerTriggers(h,a),this.triggerLeaveAnimation(h,a,!0))return;let m=!1;if(d.totalAnimations){const S=d.players.length?d.playersByQueriedElement.get(h):[];if(S&&S.length)m=!0;else{let B=h;for(;B=B.parentNode;)if(d.statesByElement.get(B)){m=!0;break}}}if(this.prepareLeaveAnimationListeners(h),m)d.markElementAsRemoved(this.id,h,!1,a);else{const S=h[Wa];(!S||S===Zf)&&(d.afterFlush(()=>this.clearElementCache(h)),d.destroyInnerAnimations(h),d._onRemovalComplete(h,a))}}insertNode(h,a){du(h,this._hostClassName)}drainQueuedTransitions(h){const a=[];return this._queue.forEach(d=>{const m=d.player;if(m.destroyed)return;const S=d.element,B=this._elementListeners.get(S);B&&B.forEach(Y=>{if(Y.name==d.triggerName){const ae=cc(S,d.triggerName,d.fromState.value,d.toState.value);ae._data=h,Yd(d.player,Y.phase,ae,Y.callback)}}),m.markedForDestroy?this._engine.afterFlush(()=>{m.destroy()}):a.push(d)}),this._queue=[],a.sort((d,m)=>{const S=d.transition.ast.depCount,B=m.transition.ast.depCount;return 0==S||0==B?S-B:this._engine.driver.containsElement(d.element,m.element)?1:-1})}destroy(h){this.players.forEach(a=>a.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,h)}}class gm{_onRemovalComplete(h,a){this.onRemovalComplete(h,a)}constructor(h,a,d){this.bodyNode=h,this.driver=a,this._normalizer=d,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(m,S)=>{}}get queuedPlayers(){const h=[];return this._namespaceList.forEach(a=>{a.players.forEach(d=>{d.queued&&h.push(d)})}),h}createNamespace(h,a){const d=new Dy(h,a,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,a)?this._balanceNamespaceList(d,a):(this.newHostElements.set(a,d),this.collectEnterElement(a)),this._namespaceLookup[h]=d}_balanceNamespaceList(h,a){const d=this._namespaceList,m=this.namespacesByHostElement;if(d.length-1>=0){let B=!1,Y=this.driver.getParentElement(a);for(;Y;){const ae=m.get(Y);if(ae){const pe=d.indexOf(ae);d.splice(pe+1,0,h),B=!0;break}Y=this.driver.getParentElement(Y)}B||d.unshift(h)}else d.push(h);return m.set(a,h),h}register(h,a){let d=this._namespaceLookup[h];return d||(d=this.createNamespace(h,a)),d}registerTrigger(h,a,d){let m=this._namespaceLookup[h];m&&m.register(a,d)&&this.totalAnimations++}destroy(h,a){h&&(this.afterFlush(()=>{}),this.afterFlushAnimationsDone(()=>{const d=this._fetchNamespace(h);this.namespacesByHostElement.delete(d.hostElement);const m=this._namespaceList.indexOf(d);m>=0&&this._namespaceList.splice(m,1),d.destroy(a),delete this._namespaceLookup[h]}))}_fetchNamespace(h){return this._namespaceLookup[h]}fetchNamespacesByElement(h){const a=new Set,d=this.statesByElement.get(h);if(d)for(let m of d.values())if(m.namespaceId){const S=this._fetchNamespace(m.namespaceId);S&&a.add(S)}return a}trigger(h,a,d,m){if(zh(a)){const S=this._fetchNamespace(h);if(S)return S.trigger(a,d,m),!0}return!1}insertNode(h,a,d,m){if(!zh(a))return;const S=a[Wa];if(S&&S.setForRemoval){S.setForRemoval=!1,S.setForMove=!0;const B=this.collectedLeaveElements.indexOf(a);B>=0&&this.collectedLeaveElements.splice(B,1)}if(h){const B=this._fetchNamespace(h);B&&B.insertNode(a,d)}m&&this.collectEnterElement(a)}collectEnterElement(h){this.collectedEnterElements.push(h)}markElementAsDisabled(h,a){a?this.disabledNodes.has(h)||(this.disabledNodes.add(h),du(h,_c)):this.disabledNodes.has(h)&&(this.disabledNodes.delete(h),jc(h,_c))}removeNode(h,a,d){if(zh(a)){const m=h?this._fetchNamespace(h):null;m?m.removeNode(a,d):this.markElementAsRemoved(h,a,!1,d);const S=this.namespacesByHostElement.get(a);S&&S.id!==h&&S.removeNode(a,d)}else this._onRemovalComplete(a,d)}markElementAsRemoved(h,a,d,m,S){this.collectedLeaveElements.push(a),a[Wa]={namespaceId:h,setForRemoval:m,hasAnimation:d,removedBeforeQueried:!1,previousTriggersValues:S}}listen(h,a,d,m,S){return zh(a)?this._fetchNamespace(h).listen(a,d,m,S):()=>{}}_buildInstruction(h,a,d,m,S){return h.transition.build(this.driver,h.element,h.fromState.value,h.toState.value,d,m,h.fromState.options,h.toState.options,a,S)}destroyInnerAnimations(h){let a=this.driver.query(h,_d,!0);a.forEach(d=>this.destroyActiveAnimationsForElement(d)),0!=this.playersByQueriedElement.size&&(a=this.driver.query(h,Vc,!0),a.forEach(d=>this.finishActiveQueriedAnimationOnElement(d)))}destroyActiveAnimationsForElement(h){const a=this.playersByElement.get(h);a&&a.forEach(d=>{d.queued?d.markedForDestroy=!0:d.destroy()})}finishActiveQueriedAnimationOnElement(h){const a=this.playersByQueriedElement.get(h);a&&a.forEach(d=>d.finish())}whenRenderingDone(){return new Promise(h=>{if(this.players.length)return au(this.players).onDone(()=>h());h()})}processLeaveNode(h){const a=h[Wa];if(a&&a.setForRemoval){if(h[Wa]=Zf,a.namespaceId){this.destroyInnerAnimations(h);const d=this._fetchNamespace(a.namespaceId);d&&d.clearElementCache(h)}this._onRemovalComplete(h,a.setForRemoval)}h.classList?.contains(_c)&&this.markElementAsDisabled(h,!1),this.driver.query(h,".ng-animate-disabled",!0).forEach(d=>{this.markElementAsDisabled(d,!1)})}flush(h=-1){let a=[];if(this.newHostElements.size&&(this.newHostElements.forEach((d,m)=>this._balanceNamespaceList(d,m)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let d=0;d<this.collectedEnterElements.length;d++)du(this.collectedEnterElements[d],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const d=[];try{a=this._flushAnimations(d,h)}finally{for(let m=0;m<d.length;m++)d[m]()}}else for(let d=0;d<this.collectedLeaveElements.length;d++)this.processLeaveNode(this.collectedLeaveElements[d]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(d=>d()),this._flushFns=[],this._whenQuietFns.length){const d=this._whenQuietFns;this._whenQuietFns=[],a.length?au(a).onDone(()=>{d.forEach(m=>m())}):d.forEach(m=>m())}}reportError(h){throw function Fh(c){return new T.vHH(3402,!1)}()}_flushAnimations(h,a){const d=new Id,m=[],S=new Map,B=[],Y=new Map,ae=new Map,pe=new Map,Ce=new Set;this.disabledNodes.forEach(un=>{Ce.add(un);const Tn=this.driver.query(un,".ng-animate-queued",!0);for(let Fn=0;Fn<Tn.length;Fn++)Ce.add(Tn[Fn])});const rt=this.bodyNode,ut=Array.from(this.statesByElement.keys()),dt=Jf(ut,this.collectedEnterElements),Nt=new Map;let $t=0;dt.forEach((un,Tn)=>{const Fn=Lc+$t++;Nt.set(Tn,Fn),un.forEach(Dr=>du(Dr,Fn))});const Ht=[],Nn=new Set,xn=new Set;for(let un=0;un<this.collectedLeaveElements.length;un++){const Tn=this.collectedLeaveElements[un],Fn=Tn[Wa];Fn&&Fn.setForRemoval&&(Ht.push(Tn),Nn.add(Tn),Fn.hasAnimation?this.driver.query(Tn,".ng-star-inserted",!0).forEach(Dr=>Nn.add(Dr)):xn.add(Tn))}const vr=new Map,Pn=Jf(ut,Array.from(Nn));Pn.forEach((un,Tn)=>{const Fn=Bh+$t++;vr.set(Tn,Fn),un.forEach(Dr=>du(Dr,Fn))}),h.push(()=>{dt.forEach((un,Tn)=>{const Fn=Nt.get(Tn);un.forEach(Dr=>jc(Dr,Fn))}),Pn.forEach((un,Tn)=>{const Fn=vr.get(Tn);un.forEach(Dr=>jc(Dr,Fn))}),Ht.forEach(un=>{this.processLeaveNode(un)})});const Ir=[],pr=[];for(let un=this._namespaceList.length-1;un>=0;un--)this._namespaceList[un].drainQueuedTransitions(a).forEach(Fn=>{const Dr=Fn.player,xs=Fn.element;if(Ir.push(Dr),this.collectedEnterElements.length){const Zs=xs[Wa];if(Zs&&Zs.setForMove){if(Zs.previousTriggersValues&&Zs.previousTriggersValues.has(Fn.triggerName)){const Yo=Zs.previousTriggersValues.get(Fn.triggerName),Zo=this.statesByElement.get(Fn.element);if(Zo&&Zo.has(Fn.triggerName)){const oh=Zo.get(Fn.triggerName);oh.value=Yo,Zo.set(Fn.triggerName,oh)}}return void Dr.destroy()}}const ml=!rt||!this.driver.containsElement(rt,xs),Ys=vr.get(xs),pa=Nt.get(xs),Ii=this._buildInstruction(Fn,d,pa,Ys,ml);if(Ii.errors&&Ii.errors.length)return void pr.push(Ii);if(ml)return Dr.onStart(()=>pc(xs,Ii.fromStyles)),Dr.onDestroy(()=>fc(xs,Ii.toStyles)),void m.push(Dr);if(Fn.isFallbackTransition)return Dr.onStart(()=>pc(xs,Ii.fromStyles)),Dr.onDestroy(()=>fc(xs,Ii.toStyles)),void m.push(Dr);const _l=[];Ii.timelines.forEach(Zs=>{Zs.stretchStartingKeyframe=!0,this.disabledNodes.has(Zs.element)||_l.push(Zs)}),Ii.timelines=_l,d.append(xs,Ii.timelines),B.push({instruction:Ii,player:Dr,element:xs}),Ii.queriedElements.forEach(Zs=>za(Y,Zs,[]).push(Dr)),Ii.preStyleProps.forEach((Zs,Yo)=>{if(Zs.size){let Zo=ae.get(Yo);Zo||ae.set(Yo,Zo=new Set),Zs.forEach((oh,Td)=>Zo.add(Td))}}),Ii.postStyleProps.forEach((Zs,Yo)=>{let Zo=pe.get(Yo);Zo||pe.set(Yo,Zo=new Set),Zs.forEach((oh,Td)=>Zo.add(Td))})});if(pr.length){const un=[];pr.forEach(Tn=>{un.push(function uc(c,h){return new T.vHH(3505,!1)}())}),Ir.forEach(Tn=>Tn.destroy()),this.reportError(un)}const gr=new Map,br=new Map;B.forEach(un=>{const Tn=un.element;d.has(Tn)&&(br.set(Tn,Tn),this._beforeAnimationBuild(un.player.namespaceId,un.instruction,gr))}),m.forEach(un=>{const Tn=un.element;this._getPreviousPlayers(Tn,!1,un.namespaceId,un.triggerName,null).forEach(Dr=>{za(gr,Tn,[]).push(Dr),Dr.destroy()})});const Gi=Ht.filter(un=>Xf(un,ae,pe)),gi=new Map;sg(gi,this.driver,xn,pe,di.l3).forEach(un=>{Xf(un,ae,pe)&&Gi.push(un)});const Hs=new Map;dt.forEach((un,Tn)=>{sg(Hs,this.driver,new Set(un),ae,di.k1)}),Gi.forEach(un=>{const Tn=gi.get(un),Fn=Hs.get(un);gi.set(un,new Map([...Tn?.entries()??[],...Fn?.entries()??[]]))});const cs=[],hu=[],Ko={};B.forEach(un=>{const{element:Tn,player:Fn,instruction:Dr}=un;if(d.has(Tn)){if(Ce.has(Tn))return Fn.onDestroy(()=>fc(Tn,Dr.toStyles)),Fn.disabled=!0,Fn.overrideTotalTime(Dr.totalTime),void m.push(Fn);let xs=Ko;if(br.size>1){let Ys=Tn;const pa=[];for(;Ys=Ys.parentNode;){const Ii=br.get(Ys);if(Ii){xs=Ii;break}pa.push(Ys)}pa.forEach(Ii=>br.set(Ii,xs))}const ml=this._buildAnimation(Fn.namespaceId,Dr,gr,S,Hs,gi);if(Fn.setRealPlayer(ml),xs===Ko)cs.push(Fn);else{const Ys=this.playersByElement.get(xs);Ys&&Ys.length&&(Fn.parentPlayer=au(Ys)),m.push(Fn)}}else pc(Tn,Dr.fromStyles),Fn.onDestroy(()=>fc(Tn,Dr.toStyles)),hu.push(Fn),Ce.has(Tn)&&m.push(Fn)}),hu.forEach(un=>{const Tn=S.get(un.element);if(Tn&&Tn.length){const Fn=au(Tn);un.setRealPlayer(Fn)}}),m.forEach(un=>{un.parentPlayer?un.syncPlayerEvents(un.parentPlayer):un.destroy()});for(let un=0;un<Ht.length;un++){const Tn=Ht[un],Fn=Tn[Wa];if(jc(Tn,Bh),Fn&&Fn.hasAnimation)continue;let Dr=[];if(Y.size){let ml=Y.get(Tn);ml&&ml.length&&Dr.push(...ml);let Ys=this.driver.query(Tn,Vc,!0);for(let pa=0;pa<Ys.length;pa++){let Ii=Y.get(Ys[pa]);Ii&&Ii.length&&Dr.push(...Ii)}}const xs=Dr.filter(ml=>!ml.destroyed);xs.length?og(this,Tn,xs):this.processLeaveNode(Tn)}return Ht.length=0,cs.forEach(un=>{this.players.push(un),un.onDone(()=>{un.destroy();const Tn=this.players.indexOf(un);this.players.splice(Tn,1)}),un.play()}),cs}afterFlush(h){this._flushFns.push(h)}afterFlushAnimationsDone(h){this._whenQuietFns.push(h)}_getPreviousPlayers(h,a,d,m,S){let B=[];if(a){const Y=this.playersByQueriedElement.get(h);Y&&(B=Y)}else{const Y=this.playersByElement.get(h);if(Y){const ae=!S||S==$h;Y.forEach(pe=>{pe.queued||!ae&&pe.triggerName!=m||B.push(pe)})}}return(d||m)&&(B=B.filter(Y=>!(d&&d!=Y.namespaceId||m&&m!=Y.triggerName))),B}_beforeAnimationBuild(h,a,d){const S=a.element,B=a.isRemovalTransition?void 0:h,Y=a.isRemovalTransition?void 0:a.triggerName;for(const ae of a.timelines){const pe=ae.element,Ce=pe!==S,rt=za(d,pe,[]);this._getPreviousPlayers(pe,Ce,B,Y,a.toState).forEach(dt=>{const Nt=dt.getRealPlayer();Nt.beforeDestroy&&Nt.beforeDestroy(),dt.destroy(),rt.push(dt)})}pc(S,a.fromStyles)}_buildAnimation(h,a,d,m,S,B){const Y=a.triggerName,ae=a.element,pe=[],Ce=new Set,rt=new Set,ut=a.timelines.map(Nt=>{const $t=Nt.element;Ce.add($t);const Ht=$t[Wa];if(Ht&&Ht.removedBeforeQueried)return new di.ZN(Nt.duration,Nt.delay);const Nn=$t!==ae,xn=function g_(c){const h=[];return ag(c,h),h}((d.get($t)||fm).map(gr=>gr.getRealPlayer())).filter(gr=>!!gr.element&&gr.element===$t),vr=S.get($t),Pn=B.get($t),Ir=Up(this._normalizer,Nt.keyframes,vr,Pn),pr=this._buildPlayer(Nt,Ir,xn);if(Nt.subTimeline&&m&&rt.add($t),Nn){const gr=new Qf(h,Y,$t);gr.setRealPlayer(pr),pe.push(gr)}return pr});pe.forEach(Nt=>{za(this.playersByQueriedElement,Nt.element,[]).push(Nt),Nt.onDone(()=>function ig(c,h,a){let d=c.get(h);if(d){if(d.length){const m=d.indexOf(a);d.splice(m,1)}0==d.length&&c.delete(h)}return d}(this.playersByQueriedElement,Nt.element,Nt))}),Ce.forEach(Nt=>du(Nt,Qd));const dt=au(ut);return dt.onDestroy(()=>{Ce.forEach(Nt=>jc(Nt,Qd)),fc(ae,a.toStyles)}),rt.forEach(Nt=>{za(m,Nt,[]).push(dt)}),dt}_buildPlayer(h,a,d){return a.length>0?this.driver.animate(h.element,a,h.duration,h.delay,h.easing,d):new di.ZN(h.duration,h.delay)}}class Qf{constructor(h,a,d){this.namespaceId=h,this.triggerName=a,this.element=d,this._player=new di.ZN,this._containsRealPlayer=!1,this._queuedCallbacks=new Map,this.destroyed=!1,this.parentPlayer=null,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(h){this._containsRealPlayer||(this._player=h,this._queuedCallbacks.forEach((a,d)=>{a.forEach(m=>Yd(h,d,void 0,m))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(h.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(h){this.totalTime=h}syncPlayerEvents(h){const a=this._player;a.triggerCallback&&h.onStart(()=>a.triggerCallback("start")),h.onDone(()=>this.finish()),h.onDestroy(()=>this.destroy())}_queueEvent(h,a){za(this._queuedCallbacks,h,[]).push(a)}onDone(h){this.queued&&this._queueEvent("done",h),this._player.onDone(h)}onStart(h){this.queued&&this._queueEvent("start",h),this._player.onStart(h)}onDestroy(h){this.queued&&this._queueEvent("destroy",h),this._player.onDestroy(h)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(h){this.queued||this._player.setPosition(h)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(h){const a=this._player;a.triggerCallback&&a.triggerCallback(h)}}function zh(c){return c&&1===c.nodeType}function mm(c,h){const a=c.style.display;return c.style.display=h??"none",a}function sg(c,h,a,d,m){const S=[];a.forEach(ae=>S.push(mm(ae)));const B=[];d.forEach((ae,pe)=>{const Ce=new Map;ae.forEach(rt=>{const ut=h.computeStyle(pe,rt,m);Ce.set(rt,ut),(!ut||0==ut.length)&&(pe[Wa]=Gh,B.push(pe))}),c.set(pe,Ce)});let Y=0;return a.forEach(ae=>mm(ae,S[Y++])),B}function Jf(c,h){const a=new Map;if(c.forEach(Y=>a.set(Y,[])),0==h.length)return a;const m=new Set(h),S=new Map;function B(Y){if(!Y)return 1;let ae=S.get(Y);if(ae)return ae;const pe=Y.parentNode;return ae=a.has(pe)?pe:m.has(pe)?1:B(pe),S.set(Y,ae),ae}return h.forEach(Y=>{const ae=B(Y);1!==ae&&a.get(ae).push(Y)}),a}function du(c,h){c.classList?.add(h)}function jc(c,h){c.classList?.remove(h)}function og(c,h,a){au(a).onDone(()=>c.processLeaveNode(h))}function ag(c,h){for(let a=0;a<c.length;a++){const d=c[a];d instanceof di.ZE?ag(d.players,h):h.push(d)}}function Xf(c,h,a){const d=a.get(c);if(!d)return!1;let m=h.get(c);return m?d.forEach(S=>m.add(S)):h.set(c,d),a.delete(c),!0}class lr{constructor(h,a,d){this.bodyNode=h,this._driver=a,this._normalizer=d,this._triggerCache={},this.onRemovalComplete=(m,S)=>{},this._transitionEngine=new gm(h,a,d),this._timelineEngine=new h_(h,a,d),this._transitionEngine.onRemovalComplete=(m,S)=>this.onRemovalComplete(m,S)}registerTrigger(h,a,d,m,S){const B=h+"-"+m;let Y=this._triggerCache[B];if(!Y){const ae=[],Ce=uu(this._driver,S,ae,[]);if(ae.length)throw function Yg(c,h){return new T.vHH(3404,!1)}();Y=function d_(c,h,a){return new eg(c,h,a)}(m,Ce,this._normalizer),this._triggerCache[B]=Y}this._transitionEngine.registerTrigger(a,m,Y)}register(h,a){this._transitionEngine.register(h,a)}destroy(h,a){this._transitionEngine.destroy(h,a)}onInsert(h,a,d,m){this._transitionEngine.insertNode(h,a,d,m)}onRemove(h,a,d){this._transitionEngine.removeNode(h,a,d)}disableAnimations(h,a){this._transitionEngine.markElementAsDisabled(h,a)}process(h,a,d,m){if("@"==d.charAt(0)){const[S,B]=i_(d);this._timelineEngine.command(S,a,B,m)}else this._transitionEngine.trigger(h,a,d,m)}listen(h,a,d,m,S){if("@"==d.charAt(0)){const[B,Y]=i_(d);return this._timelineEngine.listen(B,a,Y,S)}return this._transitionEngine.listen(h,a,d,m,S)}flush(h=-1){this._transitionEngine.flush(h)}get players(){return[...this._transitionEngine.players,...this._timelineEngine.players]}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}afterFlushAnimationsDone(h){this._transitionEngine.afterFlushAnimationsDone(h)}}let ug=(()=>{class c{static#e=this.initialStylesByElement=new WeakMap;constructor(a,d,m){this._element=a,this._startStyles=d,this._endStyles=m,this._state=0;let S=c.initialStylesByElement.get(a);S||c.initialStylesByElement.set(a,S=new Map),this._initialStyles=S}start(){this._state<1&&(this._startStyles&&fc(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(fc(this._element,this._initialStyles),this._endStyles&&(fc(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(c.initialStylesByElement.delete(this._element),this._startStyles&&(pc(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(pc(this._element,this._endStyles),this._endStyles=null),fc(this._element,this._initialStyles),this._state=3)}}return c})();function yc(c){let h=null;return c.forEach((a,d)=>{(function ih(c){return"display"===c||"position"===c})(d)&&(h=h||new Map,h.set(d,a))}),h}class _m{constructor(h,a,d,m){this.element=h,this.keyframes=a,this.options=d,this._specialStyles=m,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this._originalOnDoneFns=[],this._originalOnStartFns=[],this.time=0,this.parentPlayer=null,this.currentSnapshot=new Map,this._duration=d.duration,this._delay=d.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(h=>h()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const h=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,h,this.options),this._finalKeyframe=h.length?h[h.length-1]:new Map,this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(h){const a=[];return h.forEach(d=>{a.push(Object.fromEntries(d))}),a}_triggerWebAnimation(h,a,d){return h.animate(this._convertKeyframesToObject(a),d)}onStart(h){this._originalOnStartFns.push(h),this._onStartFns.push(h)}onDone(h){this._originalOnDoneFns.push(h),this._onDoneFns.push(h)}onDestroy(h){this._onDestroyFns.push(h)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(h=>h()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(h=>h()),this._onDestroyFns=[])}setPosition(h){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=h*this.time}getPosition(){return+(this.domPlayer.currentTime??0)/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const h=new Map;this.hasStarted()&&this._finalKeyframe.forEach((d,m)=>{"offset"!==m&&h.set(m,this._finished?d:rm(this.element,m))}),this.currentSnapshot=h}triggerCallback(h){const a="start"===h?this._onStartFns:this._onDoneFns;a.forEach(d=>d()),a.length=0}}class Wh{validateStyleProperty(h){return!0}validateAnimatableStyleProperty(h){return!0}matchesElement(h,a){return!1}containsElement(h,a){return Xg(h,a)}getParentElement(h){return Ff(h)}query(h,a,d){return o_(h,a,d)}computeStyle(h,a,d){return window.getComputedStyle(h)[a]}animate(h,a,d,m,S,B=[]){const ae={duration:d,delay:m,fill:0==m?"both":"forwards"};S&&(ae.easing=S);const pe=new Map,Ce=B.filter(dt=>dt instanceof _m);(function jf(c,h){return 0===c||0===h})(d,m)&&Ce.forEach(dt=>{dt.currentSnapshot.forEach((Nt,$t)=>pe.set($t,Nt))});let rt=function em(c){return c.length?c[0]instanceof Map?c:c.map(h=>yd(h)):[]}(a).map(dt=>Bc(dt));rt=function Hf(c,h,a){if(a.size&&h.length){let d=h[0],m=[];if(a.forEach((S,B)=>{d.has(B)||m.push(B),d.set(B,S)}),m.length)for(let S=1;S<h.length;S++){let B=h[S];m.forEach(Y=>B.set(Y,rm(c,Y)))}}return h}(h,rt,pe);const ut=function lg(c,h){let a=null,d=null;return Array.isArray(h)&&h.length?(a=yc(h[0]),h.length>1&&(d=yc(h[h.length-1]))):h instanceof Map&&(a=yc(h)),a||d?new ug(c,a,d):null}(h,rt);return new _m(h,rt,ae,ut)}}let qh=(()=>{class c extends di._j{constructor(a,d){super(),this._nextAnimationId=0,this._renderer=a.createRenderer(d.body,{id:"0",encapsulation:T.ifc.None,styles:[],data:{animation:[]}})}build(a){const d=this._nextAnimationId.toString();this._nextAnimationId++;const m=Array.isArray(a)?(0,di.vP)(a):a;return tp(this._renderer,null,d,"register",[m]),new ep(d,this._renderer)}static#e=this.\u0275fac=function(d){return new(d||c)(T.LFG(T.FYo),T.LFG(cn.K0))};static#t=this.\u0275prov=T.Yz7({token:c,factory:c.\u0275fac})}return c})();class ep extends di.LC{constructor(h,a){super(),this._id=h,this._renderer=a}create(h,a){return new Fl(this._id,h,a||{},this._renderer)}}class Fl{constructor(h,a,d,m){this.id=h,this.element=a,this._renderer=m,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",d)}_listen(h,a){return this._renderer.listen(this.element,`@@${this.id}:${h}`,a)}_command(h,...a){return tp(this._renderer,this.element,this.id,h,a)}onDone(h){this._listen("done",h)}onStart(h){this._listen("start",h)}onDestroy(h){this._listen("destroy",h)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(h){this._command("setPosition",h)}getPosition(){return this._renderer.engine.players[+this.id]?.getPosition()??0}}function tp(c,h,a,d,m){return c.setProperty(h,`@@${a}:${d}`,m)}const Yh="@.disabled";let ym=(()=>{class c{constructor(a,d,m){this.delegate=a,this.engine=d,this._zone=m,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,d.onRemovalComplete=(S,B)=>{const Y=B?.parentNode(S);Y&&B.removeChild(Y,S)}}createRenderer(a,d){const S=this.delegate.createRenderer(a,d);if(!(a&&d&&d.data&&d.data.animation)){let Ce=this._rendererCache.get(S);return Ce||(Ce=new vm("",S,this.engine,()=>this._rendererCache.delete(S)),this._rendererCache.set(S,Ce)),Ce}const B=d.id,Y=d.id+"-"+this._currentId;this._currentId++,this.engine.register(Y,a);const ae=Ce=>{Array.isArray(Ce)?Ce.forEach(ae):this.engine.registerTrigger(B,Y,a,Ce.name,Ce)};return d.data.animation.forEach(ae),new np(this,Y,S,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){queueMicrotask(()=>{this._microtaskId++})}scheduleListenerCallback(a,d,m){a>=0&&a<this._microtaskId?this._zone.run(()=>d(m)):(0==this._animationCallbacksBuffer.length&&queueMicrotask(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(S=>{const[B,Y]=S;B(Y)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([d,m]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}static#e=this.\u0275fac=function(d){return new(d||c)(T.LFG(T.FYo),T.LFG(lr),T.LFG(T.R0b))};static#t=this.\u0275prov=T.Yz7({token:c,factory:c.\u0275fac})}return c})();class vm{constructor(h,a,d,m){this.namespaceId=h,this.delegate=a,this.engine=d,this._onDestroy=m}get data(){return this.delegate.data}destroyNode(h){this.delegate.destroyNode?.(h)}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.engine.afterFlushAnimationsDone(()=>{queueMicrotask(()=>{this.delegate.destroy()})}),this._onDestroy?.()}createElement(h,a){return this.delegate.createElement(h,a)}createComment(h){return this.delegate.createComment(h)}createText(h){return this.delegate.createText(h)}appendChild(h,a){this.delegate.appendChild(h,a),this.engine.onInsert(this.namespaceId,a,h,!1)}insertBefore(h,a,d,m=!0){this.delegate.insertBefore(h,a,d),this.engine.onInsert(this.namespaceId,a,h,m)}removeChild(h,a,d){this.engine.onRemove(this.namespaceId,a,this.delegate)}selectRootElement(h,a){return this.delegate.selectRootElement(h,a)}parentNode(h){return this.delegate.parentNode(h)}nextSibling(h){return this.delegate.nextSibling(h)}setAttribute(h,a,d,m){this.delegate.setAttribute(h,a,d,m)}removeAttribute(h,a,d){this.delegate.removeAttribute(h,a,d)}addClass(h,a){this.delegate.addClass(h,a)}removeClass(h,a){this.delegate.removeClass(h,a)}setStyle(h,a,d,m){this.delegate.setStyle(h,a,d,m)}removeStyle(h,a,d){this.delegate.removeStyle(h,a,d)}setProperty(h,a,d){"@"==a.charAt(0)&&a==Yh?this.disableAnimations(h,!!d):this.delegate.setProperty(h,a,d)}setValue(h,a){this.delegate.setValue(h,a)}listen(h,a,d){return this.delegate.listen(h,a,d)}disableAnimations(h,a){this.engine.disableAnimations(h,a)}}class np extends vm{constructor(h,a,d,m,S){super(a,d,m,S),this.factory=h,this.namespaceId=a}setProperty(h,a,d){"@"==a.charAt(0)?"."==a.charAt(1)&&a==Yh?this.disableAnimations(h,d=void 0===d||!!d):this.engine.process(this.namespaceId,h,a.slice(1),d):this.delegate.setProperty(h,a,d)}listen(h,a,d){if("@"==a.charAt(0)){const m=function Cy(c){switch(c){case"body":return document.body;case"document":return document;case"window":return window;default:return c}}(h);let S=a.slice(1),B="";return"@"!=S.charAt(0)&&([S,B]=function Im(c){const h=c.indexOf(".");return[c.substring(0,h),c.slice(h+1)]}(S)),this.engine.listen(this.namespaceId,m,S,B,Y=>{this.factory.scheduleListenerCallback(Y._data||-1,d,Y)})}return this.delegate.listen(h,a,d)}}const dg=[{provide:di._j,useClass:qh},{provide:Kf,useFactory:function cg(){return new Hh}},{provide:lr,useClass:(()=>{class c extends lr{constructor(a,d,m,S){super(a.body,d,m)}ngOnDestroy(){this.flush()}static#e=this.\u0275fac=function(d){return new(d||c)(T.LFG(cn.K0),T.LFG(gd),T.LFG(Kf),T.LFG(T.z2F))};static#t=this.\u0275prov=T.Yz7({token:c,factory:c.\u0275fac})}return c})()},{provide:T.FYo,useFactory:function Sy(c,h,a){return new ym(c,h,a)},deps:[E.se,lr,T.R0b]}],hg=[{provide:gd,useFactory:()=>new Wh},{provide:T.QbO,useValue:"BrowserAnimations"},...dg],fg=[{provide:gd,useClass:Vh},{provide:T.QbO,useValue:"NoopAnimations"},...dg];let Em=(()=>{class c{static withConfig(a){return{ngModule:c,providers:a.disableAnimations?fg:hg}}static#e=this.\u0275fac=function(d){return new(d||c)};static#t=this.\u0275mod=T.oAB({type:c});static#n=this.\u0275inj=T.cJS({providers:hg,imports:[E.b2]})}return c})();const Ll={apiKey:"AIzaSyDhMeOKg3NlfID1yZj0pWK3C0XIT-dM9gU",authDomain:"clinica-7cd94.firebaseapp.com",projectId:"clinica-7cd94",storageBucket:"clinica-7cd94.appspot.com",messagingSenderId:"112194966494",appId:"1:112194966494:web:8a8472354ee23bfb57034f"};let Tm=(()=>{class c{static#e=this.\u0275fac=function(d){return new(d||c)};static#t=this.\u0275mod=T.oAB({type:c,bootstrap:[Et]});static#n=this.\u0275inj=T.cJS({imports:[E.b2,st,mt.hO.initializeApp(Ll),hd,_e.u5,Em]})}return c})();E.q6().bootstrapModule(Tm).catch(c=>console.error(c))},5619:(Yt,Je,$)=>{$.d(Je,{X:()=>_e});var E=$(8645);class _e extends E.x{constructor(Oe){super(),this._value=Oe}get value(){return this.getValue()}_subscribe(Oe){const Ne=super._subscribe(Oe);return!Ne.closed&&Oe.next(this._value),Ne}getValue(){const{hasError:Oe,thrownError:Ne,_value:Te}=this;if(Oe)throw Ne;return this._throwIfClosed(),Te}next(Oe){super.next(this._value=Oe)}}},5592:(Yt,Je,$)=>{$.d(Je,{y:()=>T});var E=$(305),_e=$(7394),le=$(4850),Oe=$(8407),Ne=$(2653),Te=$(4674),ke=$(1441);let T=(()=>{class Ve{constructor(st){st&&(this._subscribe=st)}lift(st){const Et=new Ve;return Et.source=this,Et.operator=st,Et}subscribe(st,Et,mt){const Ct=function Ie(Ve){return Ve&&Ve instanceof E.Lv||function ye(Ve){return Ve&&(0,Te.m)(Ve.next)&&(0,Te.m)(Ve.error)&&(0,Te.m)(Ve.complete)}(Ve)&&(0,_e.Nn)(Ve)}(st)?st:new E.Hp(st,Et,mt);return(0,ke.x)(()=>{const{operator:bt,source:jt}=this;Ct.add(bt?bt.call(Ct,jt):jt?this._subscribe(Ct):this._trySubscribe(Ct))}),Ct}_trySubscribe(st){try{return this._subscribe(st)}catch(Et){st.error(Et)}}forEach(st,Et){return new(Et=qe(Et))((mt,Ct)=>{const bt=new E.Hp({next:jt=>{try{st(jt)}catch(Re){Ct(Re),bt.unsubscribe()}},error:Ct,complete:mt});this.subscribe(bt)})}_subscribe(st){var Et;return null===(Et=this.source)||void 0===Et?void 0:Et.subscribe(st)}[le.L](){return this}pipe(...st){return(0,Oe.U)(st)(this)}toPromise(st){return new(st=qe(st))((Et,mt)=>{let Ct;this.subscribe(bt=>Ct=bt,bt=>mt(bt),()=>Et(Ct))})}}return Ve.create=ht=>new Ve(ht),Ve})();function qe(Ve){var ht;return null!==(ht=Ve??Ne.config.Promise)&&void 0!==ht?ht:Promise}},8645:(Yt,Je,$)=>{$.d(Je,{x:()=>ke});var E=$(5592),_e=$(7394);const Oe=(0,$(2306).d)(qe=>function(){qe(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var Ne=$(9039),Te=$(1441);let ke=(()=>{class qe extends E.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(Ie){const Ve=new T(this,this);return Ve.operator=Ie,Ve}_throwIfClosed(){if(this.closed)throw new Oe}next(Ie){(0,Te.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const Ve of this.currentObservers)Ve.next(Ie)}})}error(Ie){(0,Te.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=Ie;const{observers:Ve}=this;for(;Ve.length;)Ve.shift().error(Ie)}})}complete(){(0,Te.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:Ie}=this;for(;Ie.length;)Ie.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var Ie;return(null===(Ie=this.observers)||void 0===Ie?void 0:Ie.length)>0}_trySubscribe(Ie){return this._throwIfClosed(),super._trySubscribe(Ie)}_subscribe(Ie){return this._throwIfClosed(),this._checkFinalizedStatuses(Ie),this._innerSubscribe(Ie)}_innerSubscribe(Ie){const{hasError:Ve,isStopped:ht,observers:st}=this;return Ve||ht?_e.Lc:(this.currentObservers=null,st.push(Ie),new _e.w0(()=>{this.currentObservers=null,(0,Ne.P)(st,Ie)}))}_checkFinalizedStatuses(Ie){const{hasError:Ve,thrownError:ht,isStopped:st}=this;Ve?Ie.error(ht):st&&Ie.complete()}asObservable(){const Ie=new E.y;return Ie.source=this,Ie}}return qe.create=(ye,Ie)=>new T(ye,Ie),qe})();class T extends ke{constructor(ye,Ie){super(),this.destination=ye,this.source=Ie}next(ye){var Ie,Ve;null===(Ve=null===(Ie=this.destination)||void 0===Ie?void 0:Ie.next)||void 0===Ve||Ve.call(Ie,ye)}error(ye){var Ie,Ve;null===(Ve=null===(Ie=this.destination)||void 0===Ie?void 0:Ie.error)||void 0===Ve||Ve.call(Ie,ye)}complete(){var ye,Ie;null===(Ie=null===(ye=this.destination)||void 0===ye?void 0:ye.complete)||void 0===Ie||Ie.call(ye)}_subscribe(ye){var Ie,Ve;return null!==(Ve=null===(Ie=this.source)||void 0===Ie?void 0:Ie.subscribe(ye))&&void 0!==Ve?Ve:_e.Lc}}},305:(Yt,Je,$)=>{$.d(Je,{Hp:()=>mt,Lv:()=>Ve});var E=$(4674),_e=$(7394),le=$(2653),Oe=$(3894),Ne=$(2420);const Te=qe("C",void 0,void 0);function qe(me,He,Pe){return{kind:me,value:He,error:Pe}}var ye=$(7599),Ie=$(1441);class Ve extends _e.w0{constructor(He){super(),this.isStopped=!1,He?(this.destination=He,(0,_e.Nn)(He)&&He.add(this)):this.destination=Re}static create(He,Pe,$e){return new mt(He,Pe,$e)}next(He){this.isStopped?jt(function T(me){return qe("N",me,void 0)}(He),this):this._next(He)}error(He){this.isStopped?jt(function ke(me){return qe("E",void 0,me)}(He),this):(this.isStopped=!0,this._error(He))}complete(){this.isStopped?jt(Te,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(He){this.destination.next(He)}_error(He){try{this.destination.error(He)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const ht=Function.prototype.bind;function st(me,He){return ht.call(me,He)}class Et{constructor(He){this.partialObserver=He}next(He){const{partialObserver:Pe}=this;if(Pe.next)try{Pe.next(He)}catch($e){Ct($e)}}error(He){const{partialObserver:Pe}=this;if(Pe.error)try{Pe.error(He)}catch($e){Ct($e)}else Ct(He)}complete(){const{partialObserver:He}=this;if(He.complete)try{He.complete()}catch(Pe){Ct(Pe)}}}class mt extends Ve{constructor(He,Pe,$e){let ot;if(super(),(0,E.m)(He)||!He)ot={next:He??void 0,error:Pe??void 0,complete:$e??void 0};else{let ft;this&&le.config.useDeprecatedNextContext?(ft=Object.create(He),ft.unsubscribe=()=>this.unsubscribe(),ot={next:He.next&&st(He.next,ft),error:He.error&&st(He.error,ft),complete:He.complete&&st(He.complete,ft)}):ot=He}this.destination=new Et(ot)}}function Ct(me){le.config.useDeprecatedSynchronousErrorHandling?(0,Ie.O)(me):(0,Oe.h)(me)}function jt(me,He){const{onStoppedNotification:Pe}=le.config;Pe&&ye.z.setTimeout(()=>Pe(me,He))}const Re={closed:!0,next:Ne.Z,error:function bt(me){throw me},complete:Ne.Z}},7394:(Yt,Je,$)=>{$.d(Je,{Lc:()=>Te,w0:()=>Ne,Nn:()=>ke});var E=$(4674);const le=(0,$(2306).d)(qe=>function(Ie){qe(this),this.message=Ie?`${Ie.length} errors occurred during unsubscription:\n${Ie.map((Ve,ht)=>`${ht+1}) ${Ve.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=Ie});var Oe=$(9039);class Ne{constructor(ye){this.initialTeardown=ye,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let ye;if(!this.closed){this.closed=!0;const{_parentage:Ie}=this;if(Ie)if(this._parentage=null,Array.isArray(Ie))for(const st of Ie)st.remove(this);else Ie.remove(this);const{initialTeardown:Ve}=this;if((0,E.m)(Ve))try{Ve()}catch(st){ye=st instanceof le?st.errors:[st]}const{_finalizers:ht}=this;if(ht){this._finalizers=null;for(const st of ht)try{T(st)}catch(Et){ye=ye??[],Et instanceof le?ye=[...ye,...Et.errors]:ye.push(Et)}}if(ye)throw new le(ye)}}add(ye){var Ie;if(ye&&ye!==this)if(this.closed)T(ye);else{if(ye instanceof Ne){if(ye.closed||ye._hasParent(this))return;ye._addParent(this)}(this._finalizers=null!==(Ie=this._finalizers)&&void 0!==Ie?Ie:[]).push(ye)}}_hasParent(ye){const{_parentage:Ie}=this;return Ie===ye||Array.isArray(Ie)&&Ie.includes(ye)}_addParent(ye){const{_parentage:Ie}=this;this._parentage=Array.isArray(Ie)?(Ie.push(ye),Ie):Ie?[Ie,ye]:ye}_removeParent(ye){const{_parentage:Ie}=this;Ie===ye?this._parentage=null:Array.isArray(Ie)&&(0,Oe.P)(Ie,ye)}remove(ye){const{_finalizers:Ie}=this;Ie&&(0,Oe.P)(Ie,ye),ye instanceof Ne&&ye._removeParent(this)}}Ne.EMPTY=(()=>{const qe=new Ne;return qe.closed=!0,qe})();const Te=Ne.EMPTY;function ke(qe){return qe instanceof Ne||qe&&"closed"in qe&&(0,E.m)(qe.remove)&&(0,E.m)(qe.add)&&(0,E.m)(qe.unsubscribe)}function T(qe){(0,E.m)(qe)?qe():qe.unsubscribe()}},2653:(Yt,Je,$)=>{$.d(Je,{config:()=>E});const E={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},5211:(Yt,Je,$)=>{$.d(Je,{z:()=>Ne});var E=$(7537),le=$(9940),Oe=$(2459);function Ne(...Te){return function _e(){return(0,E.J)(1)}()((0,Oe.D)(Te,(0,le.yG)(Te)))}},6232:(Yt,Je,$)=>{$.d(Je,{E:()=>_e});const _e=new($(5592).y)(Ne=>Ne.complete())},2459:(Yt,Je,$)=>{$.d(Je,{D:()=>He});var E=$(4829),_e=$(3093),le=$(5137),Te=$(5592),T=$(4971),qe=$(4674),ye=$(7103);function Ve(Pe,$e){if(!Pe)throw new Error("Iterable cannot be null");return new Te.y(ot=>{(0,ye.f)(ot,$e,()=>{const ft=Pe[Symbol.asyncIterator]();(0,ye.f)(ot,$e,()=>{ft.next().then(de=>{de.done?ot.complete():ot.next(de.value)})},0,!0)})})}var ht=$(8382),st=$(4026),Et=$(4266),mt=$(3664),Ct=$(5726),bt=$(9853),jt=$(541);function He(Pe,$e){return $e?function me(Pe,$e){if(null!=Pe){if((0,ht.c)(Pe))return function Oe(Pe,$e){return(0,E.Xf)(Pe).pipe((0,le.R)($e),(0,_e.Q)($e))}(Pe,$e);if((0,Et.z)(Pe))return function ke(Pe,$e){return new Te.y(ot=>{let ft=0;return $e.schedule(function(){ft===Pe.length?ot.complete():(ot.next(Pe[ft++]),ot.closed||this.schedule())})})}(Pe,$e);if((0,st.t)(Pe))return function Ne(Pe,$e){return(0,E.Xf)(Pe).pipe((0,le.R)($e),(0,_e.Q)($e))}(Pe,$e);if((0,Ct.D)(Pe))return Ve(Pe,$e);if((0,mt.T)(Pe))return function Ie(Pe,$e){return new Te.y(ot=>{let ft;return(0,ye.f)(ot,$e,()=>{ft=Pe[T.h](),(0,ye.f)(ot,$e,()=>{let de,Ot;try{({value:de,done:Ot}=ft.next())}catch(wt){return void ot.error(wt)}Ot?ot.complete():ot.next(de)},0,!0)}),()=>(0,qe.m)(ft?.return)&&ft.return()})}(Pe,$e);if((0,jt.L)(Pe))return function Re(Pe,$e){return Ve((0,jt.Q)(Pe),$e)}(Pe,$e)}throw(0,bt.z)(Pe)}(Pe,$e):(0,E.Xf)(Pe)}},4829:(Yt,Je,$)=>{$.d(Je,{Xf:()=>ht});var E=$(7582),_e=$(4266),le=$(4026),Oe=$(5592),Ne=$(8382),Te=$(5726),ke=$(9853),T=$(3664),qe=$(541),ye=$(4674),Ie=$(3894),Ve=$(4850);function ht(me){if(me instanceof Oe.y)return me;if(null!=me){if((0,Ne.c)(me))return function st(me){return new Oe.y(He=>{const Pe=me[Ve.L]();if((0,ye.m)(Pe.subscribe))return Pe.subscribe(He);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(me);if((0,_e.z)(me))return function Et(me){return new Oe.y(He=>{for(let Pe=0;Pe<me.length&&!He.closed;Pe++)He.next(me[Pe]);He.complete()})}(me);if((0,le.t)(me))return function mt(me){return new Oe.y(He=>{me.then(Pe=>{He.closed||(He.next(Pe),He.complete())},Pe=>He.error(Pe)).then(null,Ie.h)})}(me);if((0,Te.D)(me))return bt(me);if((0,T.T)(me))return function Ct(me){return new Oe.y(He=>{for(const Pe of me)if(He.next(Pe),He.closed)return;He.complete()})}(me);if((0,qe.L)(me))return function jt(me){return bt((0,qe.Q)(me))}(me)}throw(0,ke.z)(me)}function bt(me){return new Oe.y(He=>{(function Re(me,He){var Pe,$e,ot,ft;return(0,E.mG)(this,void 0,void 0,function*(){try{for(Pe=(0,E.KL)(me);!($e=yield Pe.next()).done;)if(He.next($e.value),He.closed)return}catch(de){ot={error:de}}finally{try{$e&&!$e.done&&(ft=Pe.return)&&(yield ft.call(Pe))}finally{if(ot)throw ot.error}}He.complete()})})(me,He).catch(Pe=>He.error(Pe))})}},3019:(Yt,Je,$)=>{$.d(Je,{T:()=>Te});var E=$(7537),_e=$(4829),le=$(6232),Oe=$(9940),Ne=$(2459);function Te(...ke){const T=(0,Oe.yG)(ke),qe=(0,Oe._6)(ke,1/0),ye=ke;return ye.length?1===ye.length?(0,_e.Xf)(ye[0]):(0,E.J)(qe)((0,Ne.D)(ye,T)):le.E}},2096:(Yt,Je,$)=>{$.d(Je,{of:()=>le});var E=$(9940),_e=$(2459);function le(...Oe){const Ne=(0,E.yG)(Oe);return(0,_e.D)(Oe,Ne)}},8251:(Yt,Je,$)=>{$.d(Je,{x:()=>_e});var E=$(305);function _e(Oe,Ne,Te,ke,T){return new le(Oe,Ne,Te,ke,T)}class le extends E.Lv{constructor(Ne,Te,ke,T,qe,ye){super(Ne),this.onFinalize=qe,this.shouldUnsubscribe=ye,this._next=Te?function(Ie){try{Te(Ie)}catch(Ve){Ne.error(Ve)}}:super._next,this._error=T?function(Ie){try{T(Ie)}catch(Ve){Ne.error(Ve)}finally{this.unsubscribe()}}:super._error,this._complete=ke?function(){try{ke()}catch(Ie){Ne.error(Ie)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var Ne;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:Te}=this;super.unsubscribe(),!Te&&(null===(Ne=this.onFinalize)||void 0===Ne||Ne.call(this))}}}},3572:(Yt,Je,$)=>{$.d(Je,{d:()=>le});var E=$(9360),_e=$(8251);function le(Oe){return(0,E.e)((Ne,Te)=>{let ke=!1;Ne.subscribe((0,_e.x)(Te,T=>{ke=!0,Te.next(T)},()=>{ke||Te.next(Oe),Te.complete()}))})}},3997:(Yt,Je,$)=>{$.d(Je,{x:()=>Oe});var E=$(2737),_e=$(9360),le=$(8251);function Oe(Te,ke=E.y){return Te=Te??Ne,(0,_e.e)((T,qe)=>{let ye,Ie=!0;T.subscribe((0,le.x)(qe,Ve=>{const ht=ke(Ve);(Ie||!Te(ye,ht))&&(Ie=!1,ye=ht,qe.next(Ve))}))})}function Ne(Te,ke){return Te===ke}},2181:(Yt,Je,$)=>{$.d(Je,{h:()=>le});var E=$(9360),_e=$(8251);function le(Oe,Ne){return(0,E.e)((Te,ke)=>{let T=0;Te.subscribe((0,_e.x)(ke,qe=>Oe.call(Ne,qe,T++)&&ke.next(qe)))})}},1374:(Yt,Je,$)=>{$.d(Je,{P:()=>ke});var E=$(6973),_e=$(2181),le=$(8180),Oe=$(3572),Ne=$(3026),Te=$(2737);function ke(T,qe){const ye=arguments.length>=2;return Ie=>Ie.pipe(T?(0,_e.h)((Ve,ht)=>T(Ve,ht,Ie)):Te.y,(0,le.q)(1),ye?(0,Oe.d)(qe):(0,Ne.T)(()=>new E.K))}},7398:(Yt,Je,$)=>{$.d(Je,{U:()=>le});var E=$(9360),_e=$(8251);function le(Oe,Ne){return(0,E.e)((Te,ke)=>{let T=0;Te.subscribe((0,_e.x)(ke,qe=>{ke.next(Oe.call(Ne,qe,T++))}))})}},975:(Yt,Je,$)=>{$.d(Je,{h:()=>_e});var E=$(7398);function _e(le){return(0,E.U)(()=>le)}},7537:(Yt,Je,$)=>{$.d(Je,{J:()=>le});var E=$(1631),_e=$(2737);function le(Oe=1/0){return(0,E.z)(_e.y,Oe)}},1631:(Yt,Je,$)=>{$.d(Je,{z:()=>T});var E=$(7398),_e=$(4829),le=$(9360),Oe=$(7103),Ne=$(8251),ke=$(4674);function T(qe,ye,Ie=1/0){return(0,ke.m)(ye)?T((Ve,ht)=>(0,E.U)((st,Et)=>ye(Ve,st,ht,Et))((0,_e.Xf)(qe(Ve,ht))),Ie):("number"==typeof ye&&(Ie=ye),(0,le.e)((Ve,ht)=>function Te(qe,ye,Ie,Ve,ht,st,Et,mt){const Ct=[];let bt=0,jt=0,Re=!1;const me=()=>{Re&&!Ct.length&&!bt&&ye.complete()},He=$e=>bt<Ve?Pe($e):Ct.push($e),Pe=$e=>{st&&ye.next($e),bt++;let ot=!1;(0,_e.Xf)(Ie($e,jt++)).subscribe((0,Ne.x)(ye,ft=>{ht?.(ft),st?He(ft):ye.next(ft)},()=>{ot=!0},void 0,()=>{if(ot)try{for(bt--;Ct.length&&bt<Ve;){const ft=Ct.shift();Et?(0,Oe.f)(ye,Et,()=>Pe(ft)):Pe(ft)}me()}catch(ft){ye.error(ft)}}))};return qe.subscribe((0,Ne.x)(ye,He,()=>{Re=!0,me()})),()=>{mt?.()}}(Ve,ht,qe,Ie)))}},3093:(Yt,Je,$)=>{$.d(Je,{Q:()=>Oe});var E=$(7103),_e=$(9360),le=$(8251);function Oe(Ne,Te=0){return(0,_e.e)((ke,T)=>{ke.subscribe((0,le.x)(T,qe=>(0,E.f)(T,Ne,()=>T.next(qe),Te),()=>(0,E.f)(T,Ne,()=>T.complete(),Te),qe=>(0,E.f)(T,Ne,()=>T.error(qe),Te)))})}},6699:(Yt,Je,$)=>{$.d(Je,{R:()=>Oe});var E=$(9360),_e=$(8251);function Oe(Ne,Te){return(0,E.e)(function le(Ne,Te,ke,T,qe){return(ye,Ie)=>{let Ve=ke,ht=Te,st=0;ye.subscribe((0,_e.x)(Ie,Et=>{const mt=st++;ht=Ve?Ne(ht,Et,mt):(Ve=!0,Et),T&&Ie.next(ht)},qe&&(()=>{Ve&&Ie.next(ht),Ie.complete()})))}}(Ne,Te,arguments.length>=2,!0))}},3020:(Yt,Je,$)=>{$.d(Je,{B:()=>Ne});var E=$(4829),_e=$(8645),le=$(305),Oe=$(9360);function Ne(ke={}){const{connector:T=(()=>new _e.x),resetOnError:qe=!0,resetOnComplete:ye=!0,resetOnRefCountZero:Ie=!0}=ke;return Ve=>{let ht,st,Et,mt=0,Ct=!1,bt=!1;const jt=()=>{st?.unsubscribe(),st=void 0},Re=()=>{jt(),ht=Et=void 0,Ct=bt=!1},me=()=>{const He=ht;Re(),He?.unsubscribe()};return(0,Oe.e)((He,Pe)=>{mt++,!bt&&!Ct&&jt();const $e=Et=Et??T();Pe.add(()=>{mt--,0===mt&&!bt&&!Ct&&(st=Te(me,Ie))}),$e.subscribe(Pe),!ht&&mt>0&&(ht=new le.Hp({next:ot=>$e.next(ot),error:ot=>{bt=!0,jt(),st=Te(Re,qe,ot),$e.error(ot)},complete:()=>{Ct=!0,jt(),st=Te(Re,ye),$e.complete()}}),(0,E.Xf)(He).subscribe(ht))})(Ve)}}function Te(ke,T,...qe){if(!0===T)return void ke();if(!1===T)return;const ye=new le.Hp({next:()=>{ye.unsubscribe(),ke()}});return(0,E.Xf)(T(...qe)).subscribe(ye)}},7921:(Yt,Je,$)=>{$.d(Je,{O:()=>Oe});var E=$(5211),_e=$(9940),le=$(9360);function Oe(...Ne){const Te=(0,_e.yG)(Ne);return(0,le.e)((ke,T)=>{(Te?(0,E.z)(Ne,ke,Te):(0,E.z)(Ne,ke)).subscribe(T)})}},5137:(Yt,Je,$)=>{$.d(Je,{R:()=>_e});var E=$(9360);function _e(le,Oe=0){return(0,E.e)((Ne,Te)=>{Te.add(le.schedule(()=>Ne.subscribe(Te),Oe))})}},4664:(Yt,Je,$)=>{$.d(Je,{w:()=>Oe});var E=$(4829),_e=$(9360),le=$(8251);function Oe(Ne,Te){return(0,_e.e)((ke,T)=>{let qe=null,ye=0,Ie=!1;const Ve=()=>Ie&&!qe&&T.complete();ke.subscribe((0,le.x)(T,ht=>{qe?.unsubscribe();let st=0;const Et=ye++;(0,E.Xf)(Ne(ht,Et)).subscribe(qe=(0,le.x)(T,mt=>T.next(Te?Te(ht,mt,Et,st++):mt),()=>{qe=null,Ve()}))},()=>{Ie=!0,Ve()}))})}},8180:(Yt,Je,$)=>{$.d(Je,{q:()=>Oe});var E=$(6232),_e=$(9360),le=$(8251);function Oe(Ne){return Ne<=0?()=>E.E:(0,_e.e)((Te,ke)=>{let T=0;Te.subscribe((0,le.x)(ke,qe=>{++T<=Ne&&(ke.next(qe),Ne<=T&&ke.complete())}))})}},9773:(Yt,Je,$)=>{$.d(Je,{R:()=>Ne});var E=$(9360),_e=$(8251),le=$(4829),Oe=$(2420);function Ne(Te){return(0,E.e)((ke,T)=>{(0,le.Xf)(Te).subscribe((0,_e.x)(T,()=>T.complete(),Oe.Z)),!T.closed&&ke.subscribe(T)})}},9397:(Yt,Je,$)=>{$.d(Je,{b:()=>Ne});var E=$(4674),_e=$(9360),le=$(8251),Oe=$(2737);function Ne(Te,ke,T){const qe=(0,E.m)(Te)||ke||T?{next:Te,error:ke,complete:T}:Te;return qe?(0,_e.e)((ye,Ie)=>{var Ve;null===(Ve=qe.subscribe)||void 0===Ve||Ve.call(qe);let ht=!0;ye.subscribe((0,le.x)(Ie,st=>{var Et;null===(Et=qe.next)||void 0===Et||Et.call(qe,st),Ie.next(st)},()=>{var st;ht=!1,null===(st=qe.complete)||void 0===st||st.call(qe),Ie.complete()},st=>{var Et;ht=!1,null===(Et=qe.error)||void 0===Et||Et.call(qe,st),Ie.error(st)},()=>{var st,Et;ht&&(null===(st=qe.unsubscribe)||void 0===st||st.call(qe)),null===(Et=qe.finalize)||void 0===Et||Et.call(qe)}))}):Oe.y}},3026:(Yt,Je,$)=>{$.d(Je,{T:()=>Oe});var E=$(6973),_e=$(9360),le=$(8251);function Oe(Te=Ne){return(0,_e.e)((ke,T)=>{let qe=!1;ke.subscribe((0,le.x)(T,ye=>{qe=!0,T.next(ye)},()=>qe?T.complete():T.error(Te())))})}function Ne(){return new E.K}},1954:(Yt,Je,$)=>{$.d(Je,{o:()=>Ne});var E=$(7394);class _e extends E.w0{constructor(ke,T){super()}schedule(ke,T=0){return this}}const le={setInterval(Te,ke,...T){const{delegate:qe}=le;return qe?.setInterval?qe.setInterval(Te,ke,...T):setInterval(Te,ke,...T)},clearInterval(Te){const{delegate:ke}=le;return(ke?.clearInterval||clearInterval)(Te)},delegate:void 0};var Oe=$(9039);class Ne extends _e{constructor(ke,T){super(ke,T),this.scheduler=ke,this.work=T,this.pending=!1}schedule(ke,T=0){var qe;if(this.closed)return this;this.state=ke;const ye=this.id,Ie=this.scheduler;return null!=ye&&(this.id=this.recycleAsyncId(Ie,ye,T)),this.pending=!0,this.delay=T,this.id=null!==(qe=this.id)&&void 0!==qe?qe:this.requestAsyncId(Ie,this.id,T),this}requestAsyncId(ke,T,qe=0){return le.setInterval(ke.flush.bind(ke,this),qe)}recycleAsyncId(ke,T,qe=0){if(null!=qe&&this.delay===qe&&!1===this.pending)return T;null!=T&&le.clearInterval(T)}execute(ke,T){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const qe=this._execute(ke,T);if(qe)return qe;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(ke,T){let ye,qe=!1;try{this.work(ke)}catch(Ie){qe=!0,ye=Ie||new Error("Scheduled action threw falsy error")}if(qe)return this.unsubscribe(),ye}unsubscribe(){if(!this.closed){const{id:ke,scheduler:T}=this,{actions:qe}=T;this.work=this.state=this.scheduler=null,this.pending=!1,(0,Oe.P)(qe,this),null!=ke&&(this.id=this.recycleAsyncId(T,ke,null)),this.delay=null,super.unsubscribe()}}}},2631:(Yt,Je,$)=>{$.d(Je,{v:()=>le});var E=$(4552);class _e{constructor(Ne,Te=_e.now){this.schedulerActionCtor=Ne,this.now=Te}schedule(Ne,Te=0,ke){return new this.schedulerActionCtor(this,Ne).schedule(ke,Te)}}_e.now=E.l.now;class le extends _e{constructor(Ne,Te=_e.now){super(Ne,Te),this.actions=[],this._active=!1}flush(Ne){const{actions:Te}=this;if(this._active)return void Te.push(Ne);let ke;this._active=!0;do{if(ke=Ne.execute(Ne.state,Ne.delay))break}while(Ne=Te.shift());if(this._active=!1,ke){for(;Ne=Te.shift();)Ne.unsubscribe();throw ke}}}},6321:(Yt,Je,$)=>{$.d(Je,{P:()=>Oe,z:()=>le});var E=$(1954);const le=new($(2631).v)(E.o),Oe=le},4552:(Yt,Je,$)=>{$.d(Je,{l:()=>E});const E={now:()=>(E.delegate||Date).now(),delegate:void 0}},7599:(Yt,Je,$)=>{$.d(Je,{z:()=>E});const E={setTimeout(_e,le,...Oe){const{delegate:Ne}=E;return Ne?.setTimeout?Ne.setTimeout(_e,le,...Oe):setTimeout(_e,le,...Oe)},clearTimeout(_e){const{delegate:le}=E;return(le?.clearTimeout||clearTimeout)(_e)},delegate:void 0}},4971:(Yt,Je,$)=>{$.d(Je,{h:()=>_e});const _e=function E(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},4850:(Yt,Je,$)=>{$.d(Je,{L:()=>E});const E="function"==typeof Symbol&&Symbol.observable||"@@observable"},6973:(Yt,Je,$)=>{$.d(Je,{K:()=>_e});const _e=(0,$(2306).d)(le=>function(){le(this),this.name="EmptyError",this.message="no elements in sequence"})},9940:(Yt,Je,$)=>{$.d(Je,{_6:()=>Te,jO:()=>Oe,yG:()=>Ne});var E=$(4674),_e=$(671);function le(ke){return ke[ke.length-1]}function Oe(ke){return(0,E.m)(le(ke))?ke.pop():void 0}function Ne(ke){return(0,_e.K)(le(ke))?ke.pop():void 0}function Te(ke,T){return"number"==typeof le(ke)?ke.pop():T}},7453:(Yt,Je,$)=>{$.d(Je,{D:()=>Ne});const{isArray:E}=Array,{getPrototypeOf:_e,prototype:le,keys:Oe}=Object;function Ne(ke){if(1===ke.length){const T=ke[0];if(E(T))return{args:T,keys:null};if(function Te(ke){return ke&&"object"==typeof ke&&_e(ke)===le}(T)){const qe=Oe(T);return{args:qe.map(ye=>T[ye]),keys:qe}}}return{args:ke,keys:null}}},9039:(Yt,Je,$)=>{function E(_e,le){if(_e){const Oe=_e.indexOf(le);0<=Oe&&_e.splice(Oe,1)}}$.d(Je,{P:()=>E})},2306:(Yt,Je,$)=>{function E(_e){const Oe=_e(Ne=>{Error.call(Ne),Ne.stack=(new Error).stack});return Oe.prototype=Object.create(Error.prototype),Oe.prototype.constructor=Oe,Oe}$.d(Je,{d:()=>E})},2714:(Yt,Je,$)=>{function E(_e,le){return _e.reduce((Oe,Ne,Te)=>(Oe[Ne]=le[Te],Oe),{})}$.d(Je,{n:()=>E})},1441:(Yt,Je,$)=>{$.d(Je,{O:()=>Oe,x:()=>le});var E=$(2653);let _e=null;function le(Ne){if(E.config.useDeprecatedSynchronousErrorHandling){const Te=!_e;if(Te&&(_e={errorThrown:!1,error:null}),Ne(),Te){const{errorThrown:ke,error:T}=_e;if(_e=null,ke)throw T}}else Ne()}function Oe(Ne){E.config.useDeprecatedSynchronousErrorHandling&&_e&&(_e.errorThrown=!0,_e.error=Ne)}},7103:(Yt,Je,$)=>{function E(_e,le,Oe,Ne=0,Te=!1){const ke=le.schedule(function(){Oe(),Te?_e.add(this.schedule(null,Ne)):this.unsubscribe()},Ne);if(_e.add(ke),!Te)return ke}$.d(Je,{f:()=>E})},2737:(Yt,Je,$)=>{function E(_e){return _e}$.d(Je,{y:()=>E})},4266:(Yt,Je,$)=>{$.d(Je,{z:()=>E});const E=_e=>_e&&"number"==typeof _e.length&&"function"!=typeof _e},5726:(Yt,Je,$)=>{$.d(Je,{D:()=>_e});var E=$(4674);function _e(le){return Symbol.asyncIterator&&(0,E.m)(le?.[Symbol.asyncIterator])}},4674:(Yt,Je,$)=>{function E(_e){return"function"==typeof _e}$.d(Je,{m:()=>E})},8382:(Yt,Je,$)=>{$.d(Je,{c:()=>le});var E=$(4850),_e=$(4674);function le(Oe){return(0,_e.m)(Oe[E.L])}},3664:(Yt,Je,$)=>{$.d(Je,{T:()=>le});var E=$(4971),_e=$(4674);function le(Oe){return(0,_e.m)(Oe?.[E.h])}},4026:(Yt,Je,$)=>{$.d(Je,{t:()=>_e});var E=$(4674);function _e(le){return(0,E.m)(le?.then)}},541:(Yt,Je,$)=>{$.d(Je,{L:()=>Oe,Q:()=>le});var E=$(7582),_e=$(4674);function le(Ne){return(0,E.FC)(this,arguments,function*(){const ke=Ne.getReader();try{for(;;){const{value:T,done:qe}=yield(0,E.qq)(ke.read());if(qe)return yield(0,E.qq)(void 0);yield yield(0,E.qq)(T)}}finally{ke.releaseLock()}})}function Oe(Ne){return(0,_e.m)(Ne?.getReader)}},671:(Yt,Je,$)=>{$.d(Je,{K:()=>_e});var E=$(4674);function _e(le){return le&&(0,E.m)(le.schedule)}},9360:(Yt,Je,$)=>{$.d(Je,{A:()=>_e,e:()=>le});var E=$(4674);function _e(Oe){return(0,E.m)(Oe?.lift)}function le(Oe){return Ne=>{if(_e(Ne))return Ne.lift(function(Te){try{return Oe(Te,this)}catch(ke){this.error(ke)}});throw new TypeError("Unable to lift unknown Observable type")}}},7400:(Yt,Je,$)=>{$.d(Je,{Z:()=>Oe});var E=$(7398);const{isArray:_e}=Array;function Oe(Ne){return(0,E.U)(Te=>function le(Ne,Te){return _e(Te)?Ne(...Te):Ne(Te)}(Ne,Te))}},2420:(Yt,Je,$)=>{function E(){}$.d(Je,{Z:()=>E})},8407:(Yt,Je,$)=>{$.d(Je,{U:()=>le,z:()=>_e});var E=$(2737);function _e(...Oe){return le(Oe)}function le(Oe){return 0===Oe.length?E.y:1===Oe.length?Oe[0]:function(Te){return Oe.reduce((ke,T)=>T(ke),Te)}}},3894:(Yt,Je,$)=>{$.d(Je,{h:()=>le});var E=$(2653),_e=$(7599);function le(Oe){_e.z.setTimeout(()=>{const{onUnhandledError:Ne}=E.config;if(!Ne)throw Oe;Ne(Oe)})}},9853:(Yt,Je,$)=>{function E(_e){return new TypeError(`You provided ${null!==_e&&"object"==typeof _e?"an invalid object":`'${_e}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}$.d(Je,{z:()=>E})},6825:(Yt,Je,$)=>{$.d(Je,{F4:()=>ye,LC:()=>_e,SB:()=>qe,X$:()=>Oe,ZE:()=>bt,ZN:()=>Ct,_j:()=>E,eR:()=>Ie,jt:()=>Ne,k1:()=>jt,l3:()=>le,oB:()=>T,vP:()=>ke});class E{}class _e{}const le="*";function Oe(Re,me){return{type:7,name:Re,definitions:me,options:{}}}function Ne(Re,me=null){return{type:4,styles:me,timings:Re}}function ke(Re,me=null){return{type:2,steps:Re,options:me}}function T(Re){return{type:6,styles:Re,offset:null}}function qe(Re,me,He){return{type:0,name:Re,styles:me,options:He}}function ye(Re){return{type:5,steps:Re}}function Ie(Re,me,He=null){return{type:1,expr:Re,animation:me,options:He}}class Ct{constructor(me=0,He=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._originalOnDoneFns=[],this._originalOnStartFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=me+He}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(me=>me()),this._onDoneFns=[])}onStart(me){this._originalOnStartFns.push(me),this._onStartFns.push(me)}onDone(me){this._originalOnDoneFns.push(me),this._onDoneFns.push(me)}onDestroy(me){this._onDestroyFns.push(me)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){queueMicrotask(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(me=>me()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(me=>me()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(me){this._position=this.totalTime?me*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(me){const He="start"==me?this._onStartFns:this._onDoneFns;He.forEach(Pe=>Pe()),He.length=0}}class bt{constructor(me){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=me;let He=0,Pe=0,$e=0;const ot=this.players.length;0==ot?queueMicrotask(()=>this._onFinish()):this.players.forEach(ft=>{ft.onDone(()=>{++He==ot&&this._onFinish()}),ft.onDestroy(()=>{++Pe==ot&&this._onDestroy()}),ft.onStart(()=>{++$e==ot&&this._onStart()})}),this.totalTime=this.players.reduce((ft,de)=>Math.max(ft,de.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(me=>me()),this._onDoneFns=[])}init(){this.players.forEach(me=>me.init())}onStart(me){this._onStartFns.push(me)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(me=>me()),this._onStartFns=[])}onDone(me){this._onDoneFns.push(me)}onDestroy(me){this._onDestroyFns.push(me)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(me=>me.play())}pause(){this.players.forEach(me=>me.pause())}restart(){this.players.forEach(me=>me.restart())}finish(){this._onFinish(),this.players.forEach(me=>me.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(me=>me.destroy()),this._onDestroyFns.forEach(me=>me()),this._onDestroyFns=[])}reset(){this.players.forEach(me=>me.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(me){const He=me*this.totalTime;this.players.forEach(Pe=>{const $e=Pe.totalTime?Math.min(1,He/Pe.totalTime):1;Pe.setPosition($e)})}getPosition(){const me=this.players.reduce((He,Pe)=>null===He||Pe.totalTime>He.totalTime?Pe:He,null);return null!=me?me.getPosition():0}beforeDestroy(){this.players.forEach(me=>{me.beforeDestroy&&me.beforeDestroy()})}triggerCallback(me){const He="start"==me?this._onStartFns:this._onDoneFns;He.forEach(Pe=>Pe()),He.length=0}}const jt="!"},6814:(Yt,Je,$)=>{$.d(Je,{Do:()=>mt,EM:()=>Mo,HT:()=>Oe,JF:()=>no,K0:()=>Te,Mn:()=>Pr,Mx:()=>Bi,O5:()=>yo,PM:()=>ao,S$:()=>ht,Tn:()=>ft,UT:()=>mr,V_:()=>T,Ye:()=>Ct,ax:()=>so,b0:()=>Et,bD:()=>tr,ez:()=>ri,mk:()=>Qo,p6:()=>ir,q:()=>le,sg:()=>so,tP:()=>ui,w_:()=>Ne,x:()=>ot});var E=$(5879);let _e=null;function le(){return _e}function Oe(O){_e||(_e=O)}class Ne{}const Te=new E.OlP("DocumentToken");let ke=(()=>{class O{historyGo(H){throw new Error("Not implemented")}static#e=this.\u0275fac=function(Z){return new(Z||O)};static#t=this.\u0275prov=E.Yz7({token:O,factory:function(){return(0,E.f3M)(qe)},providedIn:"platform"})}return O})();const T=new E.OlP("Location Initialized");let qe=(()=>{class O extends ke{constructor(){super(),this._doc=(0,E.f3M)(Te),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return le().getBaseHref(this._doc)}onPopState(H){const Z=le().getGlobalEventTarget(this._doc,"window");return Z.addEventListener("popstate",H,!1),()=>Z.removeEventListener("popstate",H)}onHashChange(H){const Z=le().getGlobalEventTarget(this._doc,"window");return Z.addEventListener("hashchange",H,!1),()=>Z.removeEventListener("hashchange",H)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(H){this._location.pathname=H}pushState(H,Z,ve){this._history.pushState(H,Z,ve)}replaceState(H,Z,ve){this._history.replaceState(H,Z,ve)}forward(){this._history.forward()}back(){this._history.back()}historyGo(H=0){this._history.go(H)}getState(){return this._history.state}static#e=this.\u0275fac=function(Z){return new(Z||O)};static#t=this.\u0275prov=E.Yz7({token:O,factory:function(){return new O},providedIn:"platform"})}return O})();function ye(O,J){if(0==O.length)return J;if(0==J.length)return O;let H=0;return O.endsWith("/")&&H++,J.startsWith("/")&&H++,2==H?O+J.substring(1):1==H?O+J:O+"/"+J}function Ie(O){const J=O.match(/#|\?|$/),H=J&&J.index||O.length;return O.slice(0,H-("/"===O[H-1]?1:0))+O.slice(H)}function Ve(O){return O&&"?"!==O[0]?"?"+O:O}let ht=(()=>{class O{historyGo(H){throw new Error("Not implemented")}static#e=this.\u0275fac=function(Z){return new(Z||O)};static#t=this.\u0275prov=E.Yz7({token:O,factory:function(){return(0,E.f3M)(Et)},providedIn:"root"})}return O})();const st=new E.OlP("appBaseHref");let Et=(()=>{class O extends ht{constructor(H,Z){super(),this._platformLocation=H,this._removeListenerFns=[],this._baseHref=Z??this._platformLocation.getBaseHrefFromDOM()??(0,E.f3M)(Te).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(H){this._removeListenerFns.push(this._platformLocation.onPopState(H),this._platformLocation.onHashChange(H))}getBaseHref(){return this._baseHref}prepareExternalUrl(H){return ye(this._baseHref,H)}path(H=!1){const Z=this._platformLocation.pathname+Ve(this._platformLocation.search),ve=this._platformLocation.hash;return ve&&H?`${Z}${ve}`:Z}pushState(H,Z,ve,et){const ct=this.prepareExternalUrl(ve+Ve(et));this._platformLocation.pushState(H,Z,ct)}replaceState(H,Z,ve,et){const ct=this.prepareExternalUrl(ve+Ve(et));this._platformLocation.replaceState(H,Z,ct)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(H=0){this._platformLocation.historyGo?.(H)}static#e=this.\u0275fac=function(Z){return new(Z||O)(E.LFG(ke),E.LFG(st,8))};static#t=this.\u0275prov=E.Yz7({token:O,factory:O.\u0275fac,providedIn:"root"})}return O})(),mt=(()=>{class O extends ht{constructor(H,Z){super(),this._platformLocation=H,this._baseHref="",this._removeListenerFns=[],null!=Z&&(this._baseHref=Z)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(H){this._removeListenerFns.push(this._platformLocation.onPopState(H),this._platformLocation.onHashChange(H))}getBaseHref(){return this._baseHref}path(H=!1){let Z=this._platformLocation.hash;return null==Z&&(Z="#"),Z.length>0?Z.substring(1):Z}prepareExternalUrl(H){const Z=ye(this._baseHref,H);return Z.length>0?"#"+Z:Z}pushState(H,Z,ve,et){let ct=this.prepareExternalUrl(ve+Ve(et));0==ct.length&&(ct=this._platformLocation.pathname),this._platformLocation.pushState(H,Z,ct)}replaceState(H,Z,ve,et){let ct=this.prepareExternalUrl(ve+Ve(et));0==ct.length&&(ct=this._platformLocation.pathname),this._platformLocation.replaceState(H,Z,ct)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(H=0){this._platformLocation.historyGo?.(H)}static#e=this.\u0275fac=function(Z){return new(Z||O)(E.LFG(ke),E.LFG(st,8))};static#t=this.\u0275prov=E.Yz7({token:O,factory:O.\u0275fac})}return O})(),Ct=(()=>{class O{constructor(H){this._subject=new E.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=H;const Z=this._locationStrategy.getBaseHref();this._basePath=function me(O){if(new RegExp("^(https?:)?//").test(O)){const[,H]=O.split(/\/\/[^\/]+/);return H}return O}(Ie(Re(Z))),this._locationStrategy.onPopState(ve=>{this._subject.emit({url:this.path(!0),pop:!0,state:ve.state,type:ve.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(H=!1){return this.normalize(this._locationStrategy.path(H))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(H,Z=""){return this.path()==this.normalize(H+Ve(Z))}normalize(H){return O.stripTrailingSlash(function jt(O,J){if(!O||!J.startsWith(O))return J;const H=J.substring(O.length);return""===H||["/",";","?","#"].includes(H[0])?H:J}(this._basePath,Re(H)))}prepareExternalUrl(H){return H&&"/"!==H[0]&&(H="/"+H),this._locationStrategy.prepareExternalUrl(H)}go(H,Z="",ve=null){this._locationStrategy.pushState(ve,"",H,Z),this._notifyUrlChangeListeners(this.prepareExternalUrl(H+Ve(Z)),ve)}replaceState(H,Z="",ve=null){this._locationStrategy.replaceState(ve,"",H,Z),this._notifyUrlChangeListeners(this.prepareExternalUrl(H+Ve(Z)),ve)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(H=0){this._locationStrategy.historyGo?.(H)}onUrlChange(H){return this._urlChangeListeners.push(H),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(Z=>{this._notifyUrlChangeListeners(Z.url,Z.state)})),()=>{const Z=this._urlChangeListeners.indexOf(H);this._urlChangeListeners.splice(Z,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(H="",Z){this._urlChangeListeners.forEach(ve=>ve(H,Z))}subscribe(H,Z,ve){return this._subject.subscribe({next:H,error:Z,complete:ve})}static#e=this.normalizeQueryParams=Ve;static#t=this.joinWithSlash=ye;static#n=this.stripTrailingSlash=Ie;static#r=this.\u0275fac=function(Z){return new(Z||O)(E.LFG(ht))};static#i=this.\u0275prov=E.Yz7({token:O,factory:function(){return function bt(){return new Ct((0,E.LFG)(ht))}()},providedIn:"root"})}return O})();function Re(O){return O.replace(/\/index.html$/,"")}var ot=function(O){return O[O.Format=0]="Format",O[O.Standalone=1]="Standalone",O}(ot||{}),ft=function(O){return O[O.Narrow=0]="Narrow",O[O.Abbreviated=1]="Abbreviated",O[O.Wide=2]="Wide",O[O.Short=3]="Short",O}(ft||{}),de=function(O){return O[O.Short=0]="Short",O[O.Medium=1]="Medium",O[O.Long=2]="Long",O[O.Full=3]="Full",O}(de||{}),Ot=function(O){return O[O.Decimal=0]="Decimal",O[O.Group=1]="Group",O[O.List=2]="List",O[O.PercentSign=3]="PercentSign",O[O.PlusSign=4]="PlusSign",O[O.MinusSign=5]="MinusSign",O[O.Exponential=6]="Exponential",O[O.SuperscriptingExponent=7]="SuperscriptingExponent",O[O.PerMille=8]="PerMille",O[O.Infinity=9]="Infinity",O[O.NaN=10]="NaN",O[O.TimeSeparator=11]="TimeSeparator",O[O.CurrencyDecimal=12]="CurrencyDecimal",O[O.CurrencyGroup=13]="CurrencyGroup",O}(Ot||{});function Pr(O,J,H){const Z=(0,E.cg1)(O),et=Ee([Z[E.wAp.DaysFormat],Z[E.wAp.DaysStandalone]],J);return Ee(et,H)}function mr(O,J,H){const Z=(0,E.cg1)(O),et=Ee([Z[E.wAp.MonthsFormat],Z[E.wAp.MonthsStandalone]],J);return Ee(et,H)}function Se(O,J){return Ee((0,E.cg1)(O)[E.wAp.DateFormat],J)}function Ke(O,J){return Ee((0,E.cg1)(O)[E.wAp.TimeFormat],J)}function Fe(O,J){return Ee((0,E.cg1)(O)[E.wAp.DateTimeFormat],J)}function Ue(O,J){const H=(0,E.cg1)(O),Z=H[E.wAp.NumberSymbols][J];if(typeof Z>"u"){if(J===Ot.CurrencyDecimal)return H[E.wAp.NumberSymbols][Ot.Decimal];if(J===Ot.CurrencyGroup)return H[E.wAp.NumberSymbols][Ot.Group]}return Z}function Zt(O){if(!O[E.wAp.ExtraData])throw new Error(`Missing extra locale data for the locale "${O[E.wAp.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function Ee(O,J){for(let H=J;H>-1;H--)if(typeof O[H]<"u")return O[H];throw new Error("Locale data API: locale data undefined")}function xe(O){const[J,H]=O.split(":");return{hours:+J,minutes:+H}}const Lt=/^(\d{4,})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,Un={},$n=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;var Mt=function(O){return O[O.Short=0]="Short",O[O.ShortGMT=1]="ShortGMT",O[O.Long=2]="Long",O[O.Extended=3]="Extended",O}(Mt||{}),an=function(O){return O[O.FullYear=0]="FullYear",O[O.Month=1]="Month",O[O.Date=2]="Date",O[O.Hours=3]="Hours",O[O.Minutes=4]="Minutes",O[O.Seconds=5]="Seconds",O[O.FractionalSeconds=6]="FractionalSeconds",O[O.Day=7]="Day",O}(an||{}),mn=function(O){return O[O.DayPeriods=0]="DayPeriods",O[O.Days=1]="Days",O[O.Months=2]="Months",O[O.Eras=3]="Eras",O}(mn||{});function ir(O,J,H,Z){let ve=function ie(O){if(re(O))return O;if("number"==typeof O&&!isNaN(O))return new Date(O);if("string"==typeof O){if(O=O.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(O)){const[ve,et=1,ct=1]=O.split("-").map(dn=>+dn);return cn(ve,et-1,ct)}const H=parseFloat(O);if(!isNaN(O-H))return new Date(H);let Z;if(Z=O.match(Lt))return function se(O){const J=new Date(0);let H=0,Z=0;const ve=O[8]?J.setUTCFullYear:J.setFullYear,et=O[8]?J.setUTCHours:J.setHours;O[9]&&(H=Number(O[9]+O[10]),Z=Number(O[9]+O[11])),ve.call(J,Number(O[1]),Number(O[2])-1,Number(O[3]));const ct=Number(O[4]||0)-H,dn=Number(O[5]||0)-Z,nr=Number(O[6]||0),_r=Math.floor(1e3*parseFloat("0."+(O[7]||0)));return et.call(J,ct,dn,nr,_r),J}(Z)}const J=new Date(O);if(!re(J))throw new Error(`Unable to convert "${O}" into a date`);return J}(O);J=Hr(H,J)||J;let dn,ct=[];for(;J;){if(dn=$n.exec(J),!dn){ct.push(J);break}{ct=ct.concat(dn.slice(1));const Jn=ct.pop();if(!Jn)break;J=Jn}}let nr=ve.getTimezoneOffset();Z&&(nr=Li(Z,nr),ve=function we(O,J,H){const Z=H?-1:1,ve=O.getTimezoneOffset();return function Vi(O,J){return(O=new Date(O.getTime())).setMinutes(O.getMinutes()+J),O}(O,Z*(Li(J,ve)-ve))}(ve,Z,!0));let _r="";return ct.forEach(Jn=>{const bn=function Oi(O){if(Fi[O])return Fi[O];let J;switch(O){case"G":case"GG":case"GGG":J=wn(mn.Eras,ft.Abbreviated);break;case"GGGG":J=wn(mn.Eras,ft.Wide);break;case"GGGGG":J=wn(mn.Eras,ft.Narrow);break;case"y":J=en(an.FullYear,1,0,!1,!0);break;case"yy":J=en(an.FullYear,2,0,!0,!0);break;case"yyy":J=en(an.FullYear,3,0,!1,!0);break;case"yyyy":J=en(an.FullYear,4,0,!1,!0);break;case"Y":J=hs(1);break;case"YY":J=hs(2,!0);break;case"YYY":J=hs(3);break;case"YYYY":J=hs(4);break;case"M":case"L":J=en(an.Month,1,1);break;case"MM":case"LL":J=en(an.Month,2,1);break;case"MMM":J=wn(mn.Months,ft.Abbreviated);break;case"MMMM":J=wn(mn.Months,ft.Wide);break;case"MMMMM":J=wn(mn.Months,ft.Narrow);break;case"LLL":J=wn(mn.Months,ft.Abbreviated,ot.Standalone);break;case"LLLL":J=wn(mn.Months,ft.Wide,ot.Standalone);break;case"LLLLL":J=wn(mn.Months,ft.Narrow,ot.Standalone);break;case"w":J=Ti(1);break;case"ww":J=Ti(2);break;case"W":J=Ti(1,!0);break;case"d":J=en(an.Date,1);break;case"dd":J=en(an.Date,2);break;case"c":case"cc":J=en(an.Day,1);break;case"ccc":J=wn(mn.Days,ft.Abbreviated,ot.Standalone);break;case"cccc":J=wn(mn.Days,ft.Wide,ot.Standalone);break;case"ccccc":J=wn(mn.Days,ft.Narrow,ot.Standalone);break;case"cccccc":J=wn(mn.Days,ft.Short,ot.Standalone);break;case"E":case"EE":case"EEE":J=wn(mn.Days,ft.Abbreviated);break;case"EEEE":J=wn(mn.Days,ft.Wide);break;case"EEEEE":J=wn(mn.Days,ft.Narrow);break;case"EEEEEE":J=wn(mn.Days,ft.Short);break;case"a":case"aa":case"aaa":J=wn(mn.DayPeriods,ft.Abbreviated);break;case"aaaa":J=wn(mn.DayPeriods,ft.Wide);break;case"aaaaa":J=wn(mn.DayPeriods,ft.Narrow);break;case"b":case"bb":case"bbb":J=wn(mn.DayPeriods,ft.Abbreviated,ot.Standalone,!0);break;case"bbbb":J=wn(mn.DayPeriods,ft.Wide,ot.Standalone,!0);break;case"bbbbb":J=wn(mn.DayPeriods,ft.Narrow,ot.Standalone,!0);break;case"B":case"BB":case"BBB":J=wn(mn.DayPeriods,ft.Abbreviated,ot.Format,!0);break;case"BBBB":J=wn(mn.DayPeriods,ft.Wide,ot.Format,!0);break;case"BBBBB":J=wn(mn.DayPeriods,ft.Narrow,ot.Format,!0);break;case"h":J=en(an.Hours,1,-12);break;case"hh":J=en(an.Hours,2,-12);break;case"H":J=en(an.Hours,1);break;case"HH":J=en(an.Hours,2);break;case"m":J=en(an.Minutes,1);break;case"mm":J=en(an.Minutes,2);break;case"s":J=en(an.Seconds,1);break;case"ss":J=en(an.Seconds,2);break;case"S":J=en(an.FractionalSeconds,1);break;case"SS":J=en(an.FractionalSeconds,2);break;case"SSS":J=en(an.FractionalSeconds,3);break;case"Z":case"ZZ":case"ZZZ":J=ki(Mt.Short);break;case"ZZZZZ":J=ki(Mt.Extended);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":J=ki(Mt.ShortGMT);break;case"OOOO":case"ZZZZ":case"zzzz":J=ki(Mt.Long);break;default:return null}return Fi[O]=J,J}(Jn);_r+=bn?bn(ve,H,nr):"''"===Jn?"'":Jn.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),_r}function cn(O,J,H){const Z=new Date(0);return Z.setFullYear(O,J,H),Z.setHours(0,0,0),Z}function Hr(O,J){const H=function Qn(O){return(0,E.cg1)(O)[E.wAp.LocaleId]}(O);if(Un[H]=Un[H]||{},Un[H][J])return Un[H][J];let Z="";switch(J){case"shortDate":Z=Se(O,de.Short);break;case"mediumDate":Z=Se(O,de.Medium);break;case"longDate":Z=Se(O,de.Long);break;case"fullDate":Z=Se(O,de.Full);break;case"shortTime":Z=Ke(O,de.Short);break;case"mediumTime":Z=Ke(O,de.Medium);break;case"longTime":Z=Ke(O,de.Long);break;case"fullTime":Z=Ke(O,de.Full);break;case"short":const ve=Hr(O,"shortTime"),et=Hr(O,"shortDate");Z=jn(Fe(O,de.Short),[ve,et]);break;case"medium":const ct=Hr(O,"mediumTime"),dn=Hr(O,"mediumDate");Z=jn(Fe(O,de.Medium),[ct,dn]);break;case"long":const nr=Hr(O,"longTime"),_r=Hr(O,"longDate");Z=jn(Fe(O,de.Long),[nr,_r]);break;case"full":const Jn=Hr(O,"fullTime"),bn=Hr(O,"fullDate");Z=jn(Fe(O,de.Full),[Jn,bn])}return Z&&(Un[H][J]=Z),Z}function jn(O,J){return J&&(O=O.replace(/\{([^}]+)}/g,function(H,Z){return null!=J&&Z in J?J[Z]:H})),O}function Gr(O,J,H="-",Z,ve){let et="";(O<0||ve&&O<=0)&&(ve?O=1-O:(O=-O,et=H));let ct=String(O);for(;ct.length<J;)ct="0"+ct;return Z&&(ct=ct.slice(ct.length-J)),et+ct}function en(O,J,H=0,Z=!1,ve=!1){return function(et,ct){let dn=function $i(O,J){switch(O){case an.FullYear:return J.getFullYear();case an.Month:return J.getMonth();case an.Date:return J.getDate();case an.Hours:return J.getHours();case an.Minutes:return J.getMinutes();case an.Seconds:return J.getSeconds();case an.FractionalSeconds:return J.getMilliseconds();case an.Day:return J.getDay();default:throw new Error(`Unknown DateType value "${O}".`)}}(O,et);if((H>0||dn>-H)&&(dn+=H),O===an.Hours)0===dn&&-12===H&&(dn=12);else if(O===an.FractionalSeconds)return function Kr(O,J){return Gr(O,3).substring(0,J)}(dn,J);const nr=Ue(ct,Ot.MinusSign);return Gr(dn,J,nr,Z,ve)}}function wn(O,J,H=ot.Format,Z=!1){return function(ve,et){return function Dn(O,J,H,Z,ve,et){switch(H){case mn.Months:return mr(J,ve,Z)[O.getMonth()];case mn.Days:return Pr(J,ve,Z)[O.getDay()];case mn.DayPeriods:const ct=O.getHours(),dn=O.getMinutes();if(et){const _r=function Ln(O){const J=(0,E.cg1)(O);return Zt(J),(J[E.wAp.ExtraData][2]||[]).map(Z=>"string"==typeof Z?xe(Z):[xe(Z[0]),xe(Z[1])])}(J),Jn=function An(O,J,H){const Z=(0,E.cg1)(O);Zt(Z);const et=Ee([Z[E.wAp.ExtraData][0],Z[E.wAp.ExtraData][1]],J)||[];return Ee(et,H)||[]}(J,ve,Z),bn=_r.findIndex(ii=>{if(Array.isArray(ii)){const[xr,Ai]=ii,bo=ct>=xr.hours&&dn>=xr.minutes,oa=ct<Ai.hours||ct===Ai.hours&&dn<Ai.minutes;if(xr.hours<Ai.hours){if(bo&&oa)return!0}else if(bo||oa)return!0}else if(ii.hours===ct&&ii.minutes===dn)return!0;return!1});if(-1!==bn)return Jn[bn]}return function On(O,J,H){const Z=(0,E.cg1)(O),et=Ee([Z[E.wAp.DayPeriodsFormat],Z[E.wAp.DayPeriodsStandalone]],J);return Ee(et,H)}(J,ve,Z)[ct<12?0:1];case mn.Eras:return function tn(O,J){return Ee((0,E.cg1)(O)[E.wAp.Eras],J)}(J,Z)[O.getFullYear()<=0?0:1];default:throw new Error(`unexpected translation type ${H}`)}}(ve,et,O,J,H,Z)}}function ki(O){return function(J,H,Z){const ve=-1*Z,et=Ue(H,Ot.MinusSign),ct=ve>0?Math.floor(ve/60):Math.ceil(ve/60);switch(O){case Mt.Short:return(ve>=0?"+":"")+Gr(ct,2,et)+Gr(Math.abs(ve%60),2,et);case Mt.ShortGMT:return"GMT"+(ve>=0?"+":"")+Gr(ct,1,et);case Mt.Long:return"GMT"+(ve>=0?"+":"")+Gr(ct,2,et)+":"+Gr(Math.abs(ve%60),2,et);case Mt.Extended:return 0===Z?"Z":(ve>=0?"+":"")+Gr(ct,2,et)+":"+Gr(Math.abs(ve%60),2,et);default:throw new Error(`Unknown zone width "${O}"`)}}}const Oa=0,Xi=4;function ur(O){return cn(O.getFullYear(),O.getMonth(),O.getDate()+(Xi-O.getDay()))}function Ti(O,J=!1){return function(H,Z){let ve;if(J){const et=new Date(H.getFullYear(),H.getMonth(),1).getDay()-1,ct=H.getDate();ve=1+Math.floor((ct+et)/7)}else{const et=ur(H),ct=function _o(O){const J=cn(O,Oa,1).getDay();return cn(O,0,1+(J<=Xi?Xi:Xi+7)-J)}(et.getFullYear()),dn=et.getTime()-ct.getTime();ve=1+Math.round(dn/6048e5)}return Gr(ve,O,Ue(Z,Ot.MinusSign))}}function hs(O,J=!1){return function(H,Z){return Gr(ur(H).getFullYear(),O,Ue(Z,Ot.MinusSign),J)}}const Fi={};function Li(O,J){O=O.replace(/:/g,"");const H=Date.parse("Jan 01, 1970 00:00:00 "+O)/6e4;return isNaN(H)?J:H}function re(O){return O instanceof Date&&!isNaN(O.valueOf())}function Bi(O,J){J=encodeURIComponent(J);for(const H of O.split(";")){const Z=H.indexOf("="),[ve,et]=-1==Z?[H,""]:[H.slice(0,Z),H.slice(Z+1)];if(ve.trim()===J)return decodeURIComponent(et)}return null}const ws=/\s+/,Ka=[];let Qo=(()=>{class O{constructor(H,Z,ve,et){this._iterableDiffers=H,this._keyValueDiffers=Z,this._ngEl=ve,this._renderer=et,this.initialClasses=Ka,this.stateMap=new Map}set klass(H){this.initialClasses=null!=H?H.trim().split(ws):Ka}set ngClass(H){this.rawClass="string"==typeof H?H.trim().split(ws):H}ngDoCheck(){for(const Z of this.initialClasses)this._updateState(Z,!0);const H=this.rawClass;if(Array.isArray(H)||H instanceof Set)for(const Z of H)this._updateState(Z,!0);else if(null!=H)for(const Z of Object.keys(H))this._updateState(Z,!!H[Z]);this._applyStateDiff()}_updateState(H,Z){const ve=this.stateMap.get(H);void 0!==ve?(ve.enabled!==Z&&(ve.changed=!0,ve.enabled=Z),ve.touched=!0):this.stateMap.set(H,{enabled:Z,changed:!0,touched:!0})}_applyStateDiff(){for(const H of this.stateMap){const Z=H[0],ve=H[1];ve.changed?(this._toggleClass(Z,ve.enabled),ve.changed=!1):ve.touched||(ve.enabled&&this._toggleClass(Z,!1),this.stateMap.delete(Z)),ve.touched=!1}}_toggleClass(H,Z){(H=H.trim()).length>0&&H.split(ws).forEach(ve=>{Z?this._renderer.addClass(this._ngEl.nativeElement,ve):this._renderer.removeClass(this._ngEl.nativeElement,ve)})}static#e=this.\u0275fac=function(Z){return new(Z||O)(E.Y36(E.ZZ4),E.Y36(E.aQg),E.Y36(E.SBq),E.Y36(E.Qsj))};static#t=this.\u0275dir=E.lG2({type:O,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"},standalone:!0})}return O})();class Za{constructor(J,H,Z,ve){this.$implicit=J,this.ngForOf=H,this.index=Z,this.count=ve}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let so=(()=>{class O{set ngForOf(H){this._ngForOf=H,this._ngForOfDirty=!0}set ngForTrackBy(H){this._trackByFn=H}get ngForTrackBy(){return this._trackByFn}constructor(H,Z,ve){this._viewContainer=H,this._template=Z,this._differs=ve,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(H){H&&(this._template=H)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const H=this._ngForOf;!this._differ&&H&&(this._differ=this._differs.find(H).create(this.ngForTrackBy))}if(this._differ){const H=this._differ.diff(this._ngForOf);H&&this._applyChanges(H)}}_applyChanges(H){const Z=this._viewContainer;H.forEachOperation((ve,et,ct)=>{if(null==ve.previousIndex)Z.createEmbeddedView(this._template,new Za(ve.item,this._ngForOf,-1,-1),null===ct?void 0:ct);else if(null==ct)Z.remove(null===et?void 0:et);else if(null!==et){const dn=Z.get(et);Z.move(dn,ct),$s(dn,ve)}});for(let ve=0,et=Z.length;ve<et;ve++){const dn=Z.get(ve).context;dn.index=ve,dn.count=et,dn.ngForOf=this._ngForOf}H.forEachIdentityChange(ve=>{$s(Z.get(ve.currentIndex),ve)})}static ngTemplateContextGuard(H,Z){return!0}static#e=this.\u0275fac=function(Z){return new(Z||O)(E.Y36(E.s_b),E.Y36(E.Rgc),E.Y36(E.ZZ4))};static#t=this.\u0275dir=E.lG2({type:O,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0})}return O})();function $s(O,J){O.context.$implicit=J.item}let yo=(()=>{class O{constructor(H,Z){this._viewContainer=H,this._context=new eo,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=Z}set ngIf(H){this._context.$implicit=this._context.ngIf=H,this._updateView()}set ngIfThen(H){Xo("ngIfThen",H),this._thenTemplateRef=H,this._thenViewRef=null,this._updateView()}set ngIfElse(H){Xo("ngIfElse",H),this._elseTemplateRef=H,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(H,Z){return!0}static#e=this.\u0275fac=function(Z){return new(Z||O)(E.Y36(E.s_b),E.Y36(E.Rgc))};static#t=this.\u0275dir=E.lG2({type:O,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0})}return O})();class eo{constructor(){this.$implicit=null,this.ngIf=null}}function Xo(O,J){if(J&&!J.createEmbeddedView)throw new Error(`${O} must be a TemplateRef, but received '${(0,E.AaK)(J)}'.`)}let ui=(()=>{class O{constructor(H){this._viewContainerRef=H,this._viewRef=null,this.ngTemplateOutletContext=null,this.ngTemplateOutlet=null,this.ngTemplateOutletInjector=null}ngOnChanges(H){if(H.ngTemplateOutlet||H.ngTemplateOutletInjector){const Z=this._viewContainerRef;if(this._viewRef&&Z.remove(Z.indexOf(this._viewRef)),this.ngTemplateOutlet){const{ngTemplateOutlet:ve,ngTemplateOutletContext:et,ngTemplateOutletInjector:ct}=this;this._viewRef=Z.createEmbeddedView(ve,et,ct?{injector:ct}:void 0)}else this._viewRef=null}else this._viewRef&&H.ngTemplateOutletContext&&this.ngTemplateOutletContext&&(this._viewRef.context=this.ngTemplateOutletContext)}static#e=this.\u0275fac=function(Z){return new(Z||O)(E.Y36(E.s_b))};static#t=this.\u0275dir=E.lG2({type:O,selectors:[["","ngTemplateOutlet",""]],inputs:{ngTemplateOutletContext:"ngTemplateOutletContext",ngTemplateOutlet:"ngTemplateOutlet",ngTemplateOutletInjector:"ngTemplateOutletInjector"},standalone:!0,features:[E.TTD]})}return O})(),ri=(()=>{class O{static#e=this.\u0275fac=function(Z){return new(Z||O)};static#t=this.\u0275mod=E.oAB({type:O});static#n=this.\u0275inj=E.cJS({})}return O})();const tr="browser",to="server";function ao(O){return O===to}let Mo=(()=>{class O{static#e=this.\u0275prov=(0,E.Yz7)({token:O,providedIn:"root",factory:()=>new wi((0,E.LFG)(Te),window)})}return O})();class wi{constructor(J,H){this.document=J,this.window=H,this.offset=()=>[0,0]}setOffset(J){this.offset=Array.isArray(J)?()=>J:J}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(J){this.supportsScrolling()&&this.window.scrollTo(J[0],J[1])}scrollToAnchor(J){if(!this.supportsScrolling())return;const H=function Zi(O,J){const H=O.getElementById(J)||O.getElementsByName(J)[0];if(H)return H;if("function"==typeof O.createTreeWalker&&O.body&&"function"==typeof O.body.attachShadow){const Z=O.createTreeWalker(O.body,NodeFilter.SHOW_ELEMENT);let ve=Z.currentNode;for(;ve;){const et=ve.shadowRoot;if(et){const ct=et.getElementById(J)||et.querySelector(`[name="${J}"]`);if(ct)return ct}ve=Z.nextNode()}}return null}(this.document,J);H&&(this.scrollToElement(H),H.focus())}setHistoryScrollRestoration(J){this.supportsScrolling()&&(this.window.history.scrollRestoration=J)}scrollToElement(J){const H=J.getBoundingClientRect(),Z=H.left+this.window.pageXOffset,ve=H.top+this.window.pageYOffset,et=this.offset();this.window.scrollTo(Z-et[0],ve-et[1])}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}class no{}},5879:(Yt,Je,$)=>{$.d(Je,{$8M:()=>Qc,$WT:()=>es,$Z:()=>ih,AFp:()=>Qg,ALo:()=>tT,AaK:()=>Ve,AsE:()=>tv,BQk:()=>L_,CHM:()=>Cd,CRH:()=>_T,DdM:()=>WE,EJc:()=>MD,EpF:()=>W0,F$t:()=>Kv,F4k:()=>Wv,FYo:()=>Gf,FiY:()=>Ha,Gf:()=>gT,GfV:()=>$f,Gpc:()=>Et,HDt:()=>UT,Hsn:()=>Yv,Ikx:()=>cI,JOm:()=>Ra,KtG:()=>Yn,LFG:()=>zt,LMc:()=>WC,LSH:()=>Lp,Lbi:()=>Jg,Lck:()=>Tw,MAs:()=>jv,MGl:()=>V_,MMx:()=>VE,NdJ:()=>Hy,Ojb:()=>Xg,OlP:()=>en,Oqu:()=>ev,P3R:()=>zg,PXZ:()=>lC,Q6J:()=>M_,QGY:()=>jy,QbO:()=>my,Qsj:()=>vd,R0b:()=>po,RDi:()=>xp,Rgc:()=>hv,SBq:()=>gc,SDv:()=>OE,Sil:()=>FD,Suo:()=>mT,TTD:()=>bn,TgZ:()=>x_,Tol:()=>Sg,Udp:()=>qa,VKq:()=>qE,VuI:()=>$C,W1O:()=>ET,WLB:()=>KE,X6Q:()=>mC,XFs:()=>Mt,Xpm:()=>Qa,Xq5:()=>Py,Xts:()=>Mf,Y36:()=>yc,YKP:()=>FE,YNc:()=>G0,Yjl:()=>ks,Yz7:()=>Zt,Z0I:()=>Ee,ZZ4:()=>$I,_Bn:()=>kE,_UZ:()=>Vy,_c5:()=>OC,_uU:()=>h0,aQg:()=>zI,c2e:()=>BT,cJS:()=>An,cg1:()=>dI,dDg:()=>iC,dqk:()=>jn,eFA:()=>ZT,eJc:()=>SI,ekj:()=>H_,eoX:()=>WT,evT:()=>ng,f3M:()=>Xt,g9A:()=>Lf,gHi:()=>Kp,h0i:()=>Um,hGG:()=>MC,hij:()=>z_,iGM:()=>pT,ifc:()=>sn,ip1:()=>VT,jDz:()=>BE,kEZ:()=>YE,kL8:()=>oE,ktI:()=>Ed,lG2:()=>Ma,lnq:()=>nv,lqb:()=>uc,lri:()=>$T,n5z:()=>Cl,oAB:()=>zs,oxw:()=>Q0,q4F:()=>qp,qFp:()=>qC,qLn:()=>mc,qOj:()=>ds,qZA:()=>k_,rWj:()=>zT,rg0:()=>et,s9C:()=>Zv,sBO:()=>_C,s_b:()=>T0,soG:()=>w0,tb:()=>VI,tp0:()=>bu,uIk:()=>Oy,vHH:()=>me,vpe:()=>cu,wAp:()=>q_,xi3:()=>nT,xp6:()=>lg,ynx:()=>F_,z2F:()=>Q_,zSh:()=>Zg,zW0:()=>Rv,zs3:()=>xu});var E=$(8645),_e=$(7394),le=$(5592),Oe=$(3019),Ne=$(5619),Te=$(2096),ke=$(3020),T=$(4664),qe=$(3997);function ye(t){for(let r in t)if(t[r]===ye)return r;throw Error("Could not find renamed property on target object.")}function Ie(t,r){for(const s in r)r.hasOwnProperty(s)&&!t.hasOwnProperty(s)&&(t[s]=r[s])}function Ve(t){if("string"==typeof t)return t;if(Array.isArray(t))return"["+t.map(Ve).join(", ")+"]";if(null==t)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;const r=t.toString();if(null==r)return""+r;const s=r.indexOf("\n");return-1===s?r:r.substring(0,s)}function ht(t,r){return null==t||""===t?null===r?"":r:null==r||""===r?t:t+" "+r}const st=ye({__forward_ref__:ye});function Et(t){return t.__forward_ref__=Et,t.toString=function(){return Ve(this())},t}function mt(t){return Ct(t)?t():t}function Ct(t){return"function"==typeof t&&t.hasOwnProperty(st)&&t.__forward_ref__===Et}function bt(t){return t&&!!t.\u0275providers}const Re="https://g.co/ng/security#xss";class me extends Error{constructor(r,s){super(function He(t,r){return`NG0${Math.abs(t)}${r?": "+r:""}`}(r,s)),this.code=r}}function Pe(t){return"string"==typeof t?t:null==t?"":String(t)}function Ot(t,r){throw new me(-201,!1)}function St(t,r,s,l){throw new Error(`ASSERTION ERROR: ${t}`+(null==l?"":` [Expected=> ${s} ${l} ${r} <=Actual]`))}function Zt(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function An(t){return{providers:t.providers||[],imports:t.imports||[]}}function Gn(t){return xe(t,pt)||xe(t,Un)}function Ee(t){return null!==Gn(t)}function xe(t,r){return t.hasOwnProperty(r)?t[r]:null}function lt(t){return t&&(t.hasOwnProperty(Lt)||t.hasOwnProperty($n))?t[Lt]:null}const pt=ye({\u0275prov:ye}),Lt=ye({\u0275inj:ye}),Un=ye({ngInjectableDef:ye}),$n=ye({ngInjectorDef:ye});var Mt=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}(Mt||{});let an;function mn(){return an}function ir(t){const r=an;return an=t,r}function cn(t,r,s){const l=Gn(t);return l&&"root"==l.providedIn?void 0===l.value?l.value=l.factory():l.value:s&Mt.Optional?null:void 0!==r?r:void Ot(Ve(t))}const jn=globalThis;class en{constructor(r,s){this._desc=r,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof s?this.__NG_ELEMENT_ID__=s:void 0!==s&&(this.\u0275prov=Zt({token:this,providedIn:s.providedIn||"root",factory:s.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}const Oi={},Li="__NG_DI_FLAG__",Vi="ngTempTokenPath",ie=/\n/gm,re="__source";let ue;function _t(t){const r=ue;return ue=t,r}function Pt(t,r=Mt.Default){if(void 0===ue)throw new me(-203,!1);return null===ue?cn(t,void 0,r):ue.get(t,r&Mt.Optional?null:void 0,r)}function zt(t,r=Mt.Default){return(mn()||Pt)(mt(t),r)}function Xt(t,r=Mt.Default){return zt(t,hn(r))}function hn(t){return typeof t>"u"||"number"==typeof t?t:0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function Vr(t){const r=[];for(let s=0;s<t.length;s++){const l=mt(t[s]);if(Array.isArray(l)){if(0===l.length)throw new me(900,!1);let f,_=Mt.Default;for(let b=0;b<l.length;b++){const N=l[b],F=Gs(N);"number"==typeof F?-1===F?f=N.token:_|=F:f=N}r.push(zt(f,_))}else r.push(zt(l))}return r}function oi(t,r){return t[Li]=r,t.prototype[Li]=r,t}function Gs(t){return t[Li]}function Ge(t){return{toString:t}.toString()}var vt=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}(vt||{}),sn=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}(sn||{});const In={},qt=[],Xn=ye({\u0275cmp:ye}),ai=ye({\u0275dir:ye}),Or=ye({\u0275pipe:ye}),Xs=ye({\u0275mod:ye}),Bi=ye({\u0275fac:ye}),ws=ye({__NG_ELEMENT_ID__:ye}),Ka=ye({__NG_ENV_ID__:ye});function Qo(t,r,s){let l=t.length;for(;;){const f=t.indexOf(r,s);if(-1===f)return f;if(0===f||t.charCodeAt(f-1)<=32){const _=r.length;if(f+_===l||t.charCodeAt(f+_)<=32)return f}s=f+1}}function Ya(t,r,s){let l=0;for(;l<s.length;){const f=s[l];if("number"==typeof f){if(0!==f)break;l++;const _=s[l++],b=s[l++],N=s[l++];t.setAttribute(r,b,N,_)}else{const _=f,b=s[++l];Za(_)?t.setProperty(r,_,b):t.setAttribute(r,_,b),l++}}return l}function Mn(t){return 3===t||4===t||6===t}function Za(t){return 64===t.charCodeAt(0)}function so(t,r){if(null!==r&&0!==r.length)if(null===t||0===t.length)t=r.slice();else{let s=-1;for(let l=0;l<r.length;l++){const f=r[l];"number"==typeof f?s=f:0===s||$s(t,s,f,null,-1===s||2===s?r[++l]:null)}}return t}function $s(t,r,s,l,f){let _=0,b=t.length;if(-1===r)b=-1;else for(;_<t.length;){const N=t[_++];if("number"==typeof N){if(N===r){b=-1;break}if(N>r){b=_-1;break}}}for(;_<t.length;){const N=t[_];if("number"==typeof N)break;if(N===s){if(null===l)return void(null!==f&&(t[_+1]=f));if(l===t[_+1])return void(t[_+2]=f)}_++,null!==l&&_++,null!==f&&_++}-1!==b&&(t.splice(b,0,r),_=b+1),t.splice(_++,0,s),null!==l&&t.splice(_++,0,l),null!==f&&t.splice(_++,0,f)}const Jo="ng-template";function yo(t,r,s){let l=0,f=!0;for(;l<t.length;){let _=t[l++];if("string"==typeof _&&f){const b=t[l++];if(s&&"class"===_&&-1!==Qo(b.toLowerCase(),r,0))return!0}else{if(1===_){for(;l<t.length&&"string"==typeof(_=t[l++]);)if(_.toLowerCase()===r)return!0;return!1}"number"==typeof _&&(f=!1)}}return!1}function eo(t){return 4===t.type&&t.value!==Jo}function Xo(t,r,s){return r===(4!==t.type||s?t.value:Jo)}function ea(t,r,s){let l=4;const f=t.attrs||[],_=function Ds(t){for(let r=0;r<t.length;r++)if(Mn(t[r]))return r;return t.length}(f);let b=!1;for(let N=0;N<r.length;N++){const F=r[N];if("number"!=typeof F){if(!b)if(4&l){if(l=2|1&l,""!==F&&!Xo(t,F,s)||""===F&&1===r.length){if(dr(l))return!1;b=!0}}else{const z=8&l?F:r[++N];if(8&l&&null!==t.attrs){if(!yo(t.attrs,z,s)){if(dr(l))return!1;b=!0}continue}const ge=Er(8&l?"class":F,f,eo(t),s);if(-1===ge){if(dr(l))return!1;b=!0;continue}if(""!==z){let Be;Be=ge>_?"":f[ge+1].toLowerCase();const Ye=8&l?Be:null;if(Ye&&-1!==Qo(Ye,z,0)||2&l&&z!==Be){if(dr(l))return!1;b=!0}}}}else{if(!b&&!dr(l)&&!dr(F))return!1;if(b&&dr(F))continue;b=!1,l=F|1&l}}return dr(l)||b}function dr(t){return 0==(1&t)}function Er(t,r,s,l){if(null===r)return-1;let f=0;if(l||!s){let _=!1;for(;f<r.length;){const b=r[f];if(b===t)return f;if(3===b||6===b)_=!0;else{if(1===b||2===b){let N=r[++f];for(;"string"==typeof N;)N=r[++f];continue}if(4===b)break;if(0===b){f+=4;continue}}f+=_?1:2}return-1}return function zi(t,r){let s=t.indexOf(4);if(s>-1)for(s++;s<t.length;){const l=t[s];if("number"==typeof l)return-1;if(l===r)return s;s++}return-1}(r,t)}function li(t,r,s=!1){for(let l=0;l<r.length;l++)if(ea(t,r[l],s))return!0;return!1}function oo(t,r){e:for(let s=0;s<r.length;s++){const l=r[s];if(t.length===l.length){for(let f=0;f<t.length;f++)if(t[f]!==l[f])continue e;return!0}}return!1}function ui(t,r){return t?":not("+r.trim()+")":r}function fu(t){let r=t[0],s=1,l=2,f="",_=!1;for(;s<t.length;){let b=t[s];if("string"==typeof b)if(2&l){const N=t[++s];f+="["+b+(N.length>0?'="'+N+'"':"")+"]"}else 8&l?f+="."+b:4&l&&(f+=" "+b);else""!==f&&!dr(b)&&(r+=ui(_,f),f=""),l=b,_=_||!dr(l);s++}return""!==f&&(r+=ui(_,f)),r}function Qa(t){return Ge(()=>{const r=ts(t),s={...r,decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===vt.OnPush,directiveDefs:null,pipeDefs:null,dependencies:r.standalone&&t.dependencies||null,getStandaloneInjector:null,signals:t.signals??!1,data:t.data||{},encapsulation:t.encapsulation||sn.Emulated,styles:t.styles||qt,_:null,schemas:t.schemas||null,tView:null,id:""};qi(s);const l=t.dependencies;return s.directiveDefs=_i(l,!1),s.pipeDefs=_i(l,!0),s.id=function As(t){let r=0;const s=[t.selectors,t.ngContentSelectors,t.hostVars,t.hostAttrs,t.consts,t.vars,t.decls,t.encapsulation,t.standalone,t.signals,t.exportAs,JSON.stringify(t.inputs),JSON.stringify(t.outputs),Object.getOwnPropertyNames(t.type.prototype),!!t.contentQueries,!!t.viewQuery].join("|");for(const f of s)r=Math.imul(31,r)+f.charCodeAt(0)<<0;return r+=2147483648,"c"+r}(s),s})}function Oo(t){return Kn(t)||bi(t)}function Xa(t){return null!==t}function zs(t){return Ge(()=>({type:t.type,bootstrap:t.bootstrap||qt,declarations:t.declarations||qt,imports:t.imports||qt,exports:t.exports||qt,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function vo(t,r){if(null==t)return In;const s={};for(const l in t)if(t.hasOwnProperty(l)){let f=t[l],_=f;Array.isArray(f)&&(_=f[1],f=f[0]),s[f]=l,r&&(r[f]=_)}return s}function Ma(t){return Ge(()=>{const r=ts(t);return qi(r),r})}function ks(t){return{type:t.type,name:t.name,factory:null,pure:!1!==t.pure,standalone:!0===t.standalone,onDestroy:t.type.prototype.ngOnDestroy||null}}function Kn(t){return t[Xn]||null}function bi(t){return t[ai]||null}function hi(t){return t[Or]||null}function es(t){const r=Kn(t)||bi(t)||hi(t);return null!==r&&r.standalone}function Cr(t,r){const s=t[Xs]||null;if(!s&&!0===r)throw new Error(`Type ${Ve(t)} does not have '\u0275mod' property.`);return s}function ts(t){const r={};return{type:t.type,providersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:r,inputTransforms:null,inputConfig:t.inputs||In,exportAs:t.exportAs||null,standalone:!0===t.standalone,signals:!0===t.signals,selectors:t.selectors||qt,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:vo(t.inputs,r),outputs:vo(t.outputs)}}function qi(t){t.features?.forEach(r=>r(t))}function _i(t,r){if(!t)return null;const s=r?hi:Oo;return()=>("function"==typeof t?t():t).map(l=>s(l)).filter(Xa)}const Mr=0,xt=1,Cn=2,er=3,ni=4,Ki=5,Xr=6,ri=7,tr=8,to=9,Ar=10,En=11,yi=12,ao=13,Yi=14,fi=15,sr=16,Mo=17,wi=18,Zi=19,fs=20,no=21,ps=22,gs=23,el=24,Vn=25,ms=1,Ss=2,Fs=7,Ws=9,ei=11;function kr(t){return Array.isArray(t)&&"object"==typeof t[ms]}function Qi(t){return Array.isArray(t)&&!0===t[ms]}function Rs(t){return 0!=(4&t.flags)}function qs(t){return t.componentOffset>-1}function Br(t){return 1==(1&t.flags)}function Ls(t){return!!t.template}function Il(t){return 0!=(512&t[Cn])}function Ji(t,r){return t.hasOwnProperty(Bi)?t[Bi]:null}let Ci=null,Vs=!1;function ys(t){const r=Ci;return Ci=t,r}const va={version:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{}};function Bo(t){if(!lo(t)||t.dirty){if(!t.producerMustRecompute(t)&&!nl(t))return void(t.dirty=!1);t.producerRecomputeValue(t),t.dirty=!1}}function ju(t){t.dirty=!0,function tl(t){if(void 0===t.liveConsumerNode)return;const r=Vs;Vs=!0;try{for(const s of t.liveConsumerNode)s.dirty||ju(s)}finally{Vs=r}}(t),t.consumerMarkedDirty?.(t)}function Uo(t){return t&&(t.nextProducerIndex=0),ys(t)}function Ul(t,r){if(ys(r),t&&void 0!==t.producerNode&&void 0!==t.producerIndexOfThis&&void 0!==t.producerLastReadVersion){if(lo(t))for(let s=t.nextProducerIndex;s<t.producerNode.length;s++)El(t.producerNode[s],t.producerIndexOfThis[s]);for(;t.producerNode.length>t.nextProducerIndex;)t.producerNode.pop(),t.producerLastReadVersion.pop(),t.producerIndexOfThis.pop()}}function nl(t){Tl(t);for(let r=0;r<t.producerNode.length;r++){const s=t.producerNode[r],l=t.producerLastReadVersion[r];if(l!==s.version||(Bo(s),l!==s.version))return!0}return!1}function jl(t){if(Tl(t),lo(t))for(let r=0;r<t.producerNode.length;r++)El(t.producerNode[r],t.producerIndexOfThis[r]);t.producerNode.length=t.producerLastReadVersion.length=t.producerIndexOfThis.length=0,t.liveConsumerNode&&(t.liveConsumerNode.length=t.liveConsumerIndexOfThis.length=0)}function El(t,r){if(function bc(t){t.liveConsumerNode??=[],t.liveConsumerIndexOfThis??=[]}(t),Tl(t),1===t.liveConsumerNode.length)for(let l=0;l<t.producerNode.length;l++)El(t.producerNode[l],t.producerIndexOfThis[l]);const s=t.liveConsumerNode.length-1;if(t.liveConsumerNode[r]=t.liveConsumerNode[s],t.liveConsumerIndexOfThis[r]=t.liveConsumerIndexOfThis[s],t.liveConsumerNode.length--,t.liveConsumerIndexOfThis.length--,r<t.liveConsumerNode.length){const l=t.liveConsumerIndexOfThis[r],f=t.liveConsumerNode[r];Tl(f),f.producerIndexOfThis[l]=r}}function lo(t){return t.consumerIsAlwaysLive||(t?.liveConsumerNode?.length??0)>0}function Tl(t){t.producerNode??=[],t.producerIndexOfThis??=[],t.producerLastReadVersion??=[]}let uo=null;function et(t){const r=ys(null);try{return t()}finally{ys(r)}}const dn=()=>{},nr=(()=>({...va,consumerIsAlwaysLive:!0,consumerAllowSignalWrites:!1,consumerMarkedDirty:t=>{t.schedule(t.ref)},hasRun:!1,cleanupFn:dn}))();class Jn{constructor(r,s,l){this.previousValue=r,this.currentValue=s,this.firstChange=l}isFirstChange(){return this.firstChange}}function bn(){return ii}function ii(t){return t.type.prototype.ngOnChanges&&(t.setInput=Ai),xr}function xr(){const t=oa(this),r=t?.current;if(r){const s=t.previous;if(s===In)t.previous=r;else for(let l in r)s[l]=r[l];t.current=null,this.ngOnChanges(r)}}function Ai(t,r,s,l){const f=this.declaredInputs[s],_=oa(t)||function aa(t,r){return t[bo]=r}(t,{previous:In,current:null}),b=_.current||(_.current={}),N=_.previous,F=N[f];b[f]=new Jn(F&&F.currentValue,r,N===In),t[l]=r}bn.ngInherit=!0;const bo="__ngSimpleChanges__";function oa(t){return t[bo]||null}const Mi=function(t,r,s){};function ti(t){for(;Array.isArray(t);)t=t[Mr];return t}function mu(t,r){return ti(r[t])}function Ns(t,r){return ti(r[t.index])}function la(t,r){return t.data[r]}function Ps(t,r){return t[r]}function Yr(t,r){const s=r[t];return kr(s)?s:s[Mr]}function il(t,r){return null==r?null:t[r]}function Tt(t){t[Mo]=0}function Si(t){1024&t[Cn]||(t[Cn]|=1024,sl(t,1))}function Do(t){1024&t[Cn]&&(t[Cn]&=-1025,sl(t,-1))}function sl(t,r){let s=t[er];if(null===s)return;s[Ki]+=r;let l=s;for(s=s[er];null!==s&&(1===r&&1===l[Ki]||-1===r&&0===l[Ki]);)s[Ki]+=r,l=s,s=s[er]}function on(t,r){if(256==(256&t[Cn]))throw new me(911,!1);null===t[no]&&(t[no]=[]),t[no].push(r)}const Wn={lFrame:he(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function ph(){return Wn.bindingsEnabled}function $l(){return null!==Wn.skipHydrationRootTNode}function Dt(){return Wn.lFrame.lView}function Tr(){return Wn.lFrame.tView}function Cd(t){return Wn.lFrame.contextLView=t,t[tr]}function Yn(t){return Wn.lFrame.contextLView=null,t}function ji(){let t=Yc();for(;null!==t&&64===t.type;)t=t.parent;return t}function Yc(){return Wn.lFrame.currentTNode}function Ur(){const t=Wn.lFrame,r=t.currentTNode;return t.isParent?r:r.parent}function ln(t,r){const s=Wn.lFrame;s.currentTNode=t,s.isParent=r}function Co(){return Wn.lFrame.isParent}function or(){Wn.lFrame.isParent=!1}function Ri(){const t=Wn.lFrame;let r=t.bindingRootIndex;return-1===r&&(r=t.bindingRootIndex=t.tView.bindingStartIndex),r}function Ea(){return Wn.lFrame.bindingIndex}function zl(){return Wn.lFrame.bindingIndex++}function ho(t){const r=Wn.lFrame,s=r.bindingIndex;return r.bindingIndex=r.bindingIndex+t,s}function Hu(t){Wn.lFrame.inI18n=t}function Wl(t,r){const s=Wn.lFrame;s.bindingIndex=s.bindingRootIndex=t,Ao(r)}function Ao(t){Wn.lFrame.currentDirectiveIndex=t}function R(){return Wn.lFrame.currentQueryIndex}function k(t){Wn.lFrame.currentQueryIndex=t}function A(t){const r=t[xt];return 2===r.type?r.declTNode:1===r.type?t[Xr]:null}function L(t,r,s){if(s&Mt.SkipSelf){let f=r,_=t;for(;!(f=f.parent,null!==f||s&Mt.Host||(f=A(_),null===f||(_=_[Yi],10&f.type))););if(null===f)return!1;r=f,t=_}const l=Wn.lFrame=te();return l.currentTNode=r,l.lView=t,!0}function V(t){const r=te(),s=t[xt];Wn.lFrame=r,r.currentTNode=s.firstChild,r.lView=t,r.tView=s,r.contextLView=t,r.bindingIndex=s.bindingStartIndex,r.inI18n=!1}function te(){const t=Wn.lFrame,r=null===t?null:t.child;return null===r?he(t):r}function he(t){const r={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return null!==t&&(t.child=r),r}function Qe(){const t=Wn.lFrame;return Wn.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}const Ze=Qe;function Gt(){const t=Qe();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function kn(){return Wn.lFrame.selectedIndex}function Hi(t){Wn.lFrame.selectedIndex=t}function pi(){const t=Wn.lFrame;return la(t.tView,t.selectedIndex)}let Is=!0;function _u(){return Is}function Ni(t){Is=t}function Dl(t,r){for(let s=r.directiveStart,l=r.directiveEnd;s<l;s++){const _=t.data[s].type.prototype,{ngAfterContentInit:b,ngAfterContentChecked:N,ngAfterViewInit:F,ngAfterViewChecked:z,ngOnDestroy:ne}=_;b&&(t.contentHooks??=[]).push(-s,b),N&&((t.contentHooks??=[]).push(s,N),(t.contentCheckHooks??=[]).push(s,N)),F&&(t.viewHooks??=[]).push(-s,F),z&&((t.viewHooks??=[]).push(s,z),(t.viewCheckHooks??=[]).push(s,z)),null!=ne&&(t.destroyHooks??=[]).push(s,ne)}}function ql(t,r,s){Go(t,r,3,s)}function ba(t,r,s,l){(3&t[Cn])===s&&Go(t,r,s,l)}function yu(t,r){let s=t[Cn];(3&s)===r&&(s&=8191,s+=1,t[Cn]=s)}function Go(t,r,s,l){const _=l??-1,b=r.length-1;let N=0;for(let F=void 0!==l?65535&t[Mo]:0;F<b;F++)if("number"==typeof r[F+1]){if(N=r[F],null!=l&&N>=l)break}else r[F]<0&&(t[Mo]+=65536),(N<_||-1==_)&&(_h(t,s,r,F),t[Mo]=(4294901760&t[Mo])+F+2),F++}function Kl(t,r){Mi(4,t,r);const s=ys(null);try{r.call(t)}finally{ys(s),Mi(5,t,r)}}function _h(t,r,s,l){const f=s[l]<0,_=s[l+1],N=t[f?-s[l]:s[l]];f?t[Cn]>>13<t[Mo]>>16&&(3&t[Cn])===r&&(t[Cn]+=8192,Kl(N,_)):Kl(N,_)}const vu=-1;class Iu{constructor(r,s,l){this.factory=r,this.resolving=!1,this.canSeeViewProviders=s,this.injectImpl=l}}function Yl(t){return t!==vu}function al(t){return 32767&t}function Os(t,r){let s=function cf(t){return t>>16}(t),l=r;for(;s>0;)l=l[Yi],s--;return l}let Wu=!0;function Rd(t){const r=Wu;return Wu=t,r}const ss=255,qu=5;let Ku=0;const $o={};function ll(t,r){const s=Zr(t,r);if(-1!==s)return s;const l=r[xt];l.firstCreatePass&&(t.injectorIndex=r.length,os(l.data,t),os(r,null),os(l.blueprint,null));const f=Zl(t,r),_=t.injectorIndex;if(Yl(f)){const b=al(f),N=Os(f,r),F=N[xt].data;for(let z=0;z<8;z++)r[_+z]=N[b+z]|F[b+z]}return r[_+8]=f,_}function os(t,r){t.push(0,0,0,0,0,0,0,0,r)}function Zr(t,r){return-1===t.injectorIndex||t.parent&&t.parent.injectorIndex===t.injectorIndex||null===r[t.injectorIndex+8]?-1:t.injectorIndex}function Zl(t,r){if(t.parent&&-1!==t.parent.injectorIndex)return t.parent.injectorIndex;let s=0,l=null,f=r;for(;null!==f;){if(l=Sl(f),null===l)return vu;if(s++,f=f[Yi],-1!==l.injectorIndex)return l.injectorIndex|s<<16}return vu}function Yu(t,r,s){!function ci(t,r,s){let l;"string"==typeof s?l=s.charCodeAt(0)||0:s.hasOwnProperty(ws)&&(l=s[ws]),null==l&&(l=s[ws]=Ku++);const f=l&ss;r.data[t+(f>>qu)]|=1<<f}(t,r,s)}function Zu(t,r,s){if(s&Mt.Optional||void 0!==t)return t;Ot()}function _p(t,r,s,l){if(s&Mt.Optional&&void 0===l&&(l=null),!(s&(Mt.Self|Mt.Host))){const f=t[to],_=ir(void 0);try{return f?f.get(r,l,s&Mt.Optional):cn(r,l,s&Mt.Optional)}finally{ir(_)}}return Zu(l,0,s)}function Bs(t,r,s,l=Mt.Default,f){if(null!==t){if(2048&r[Cn]&&!(l&Mt.Self)){const b=function Al(t,r,s,l,f){let _=t,b=r;for(;null!==_&&null!==b&&2048&b[Cn]&&!(512&b[Cn]);){const N=Qu(_,b,s,l|Mt.Self,$o);if(N!==$o)return N;let F=_.parent;if(!F){const z=b[fs];if(z){const ne=z.get(s,$o,l);if(ne!==$o)return ne}F=Sl(b),b=b[Yi]}_=F}return f}(t,r,s,l,$o);if(b!==$o)return b}const _=Qu(t,r,s,l,$o);if(_!==$o)return _}return _p(r,s,l,f)}function Qu(t,r,s,l,f){const _=function da(t){if("string"==typeof t)return t.charCodeAt(0)||0;const r=t.hasOwnProperty(ws)?t[ws]:void 0;return"number"==typeof r?r>=0?r&ss:Ju:r}(s);if("function"==typeof _){if(!L(r,t,l))return l&Mt.Host?Zu(f,0,l):_p(r,s,l,f);try{let b;if(b=_(l),null!=b||l&Mt.Optional)return b;Ot()}finally{Ze()}}else if("number"==typeof _){let b=null,N=Zr(t,r),F=vu,z=l&Mt.Host?r[fi][Xr]:null;for((-1===N||l&Mt.SkipSelf)&&(F=-1===N?Zl(t,r):r[N+8],F!==vu&&ul(l,!1)?(b=r[xt],N=al(F),r=Os(F,r)):N=-1);-1!==N;){const ne=r[xt];if(Jl(_,N,ne.data)){const ge=Ql(N,r,s,b,l,z);if(ge!==$o)return ge}F=r[N+8],F!==vu&&ul(l,r[xt].data[N+8]===z)&&Jl(_,N,r)?(b=ne,N=al(F),r=Os(F,r)):N=-1}}return f}function Ql(t,r,s,l,f,_){const b=r[xt],N=b.data[t+8],ne=si(N,b,s,null==l?qs(N)&&Wu:l!=b&&0!=(3&N.type),f&Mt.Host&&_===N);return null!==ne?Rr(r,b,ne,N):$o}function si(t,r,s,l,f){const _=t.providerIndexes,b=r.data,N=1048575&_,F=t.directiveStart,ne=_>>20,Be=f?N+ne:t.directiveEnd;for(let Ye=l?N:N+ne;Ye<Be;Ye++){const yt=b[Ye];if(Ye<F&&s===yt||Ye>=F&&yt.type===s)return Ye}if(f){const Ye=b[F];if(Ye&&Ls(Ye)&&Ye.type===s)return F}return null}function Rr(t,r,s,l){let f=t[s];const _=r.data;if(function Ac(t){return t instanceof Iu}(f)){const b=f;b.resolving&&function ot(t,r){const s=r?`. Dependency path: ${r.join(" > ")} > ${t}`:"";throw new me(-200,`Circular dependency in DI detected for ${t}${s}`)}(function $e(t){return"function"==typeof t?t.name||t.toString():"object"==typeof t&&null!=t&&"function"==typeof t.type?t.type.name||t.type.toString():Pe(t)}(_[s]));const N=Rd(b.canSeeViewProviders);b.resolving=!0;const z=b.injectImpl?ir(b.injectImpl):null;L(t,l,Mt.Default);try{f=t[s]=b.factory(void 0,_,t,l),r.firstCreatePass&&s>=l.directiveStart&&function Ho(t,r,s){const{ngOnChanges:l,ngOnInit:f,ngDoCheck:_}=r.type.prototype;if(l){const b=ii(r);(s.preOrderHooks??=[]).push(t,b),(s.preOrderCheckHooks??=[]).push(t,b)}f&&(s.preOrderHooks??=[]).push(0-t,f),_&&((s.preOrderHooks??=[]).push(t,_),(s.preOrderCheckHooks??=[]).push(t,_))}(s,_[s],r)}finally{null!==z&&ir(z),Rd(N),b.resolving=!1,Ze()}}return f}function Jl(t,r,s){return!!(s[r+(t>>qu)]&1<<t)}function ul(t,r){return!(t&Mt.Self||t&Mt.Host&&r)}class Pi{constructor(r,s){this._tNode=r,this._lView=s}get(r,s,l){return Bs(this._tNode,this._lView,r,hn(l),s)}}function Ju(){return new Pi(ji(),Dt())}function Cl(t){return Ge(()=>{const r=t.prototype.constructor,s=r[Bi]||ha(r),l=Object.prototype;let f=Object.getPrototypeOf(t.prototype).constructor;for(;f&&f!==l;){const _=f[Bi]||ha(f);if(_&&_!==s)return _;f=Object.getPrototypeOf(f)}return _=>new _})}function ha(t){return Ct(t)?()=>{const r=ha(mt(t));return r&&r()}:Ji(t)}function Sl(t){const r=t[xt],s=r.type;return 2===s?r.declTNode:1===s?t[Xr]:null}function Qc(t){return function ca(t,r){if("class"===r)return t.classes;if("style"===r)return t.styles;const s=t.attrs;if(s){const l=s.length;let f=0;for(;f<l;){const _=s[f];if(Mn(_))break;if(0===_)f+=2;else if("number"==typeof _)for(f++;f<l&&"string"==typeof s[f];)f++;else{if(_===r)return s[f+1];f+=2}}}return null}(ji(),t)}const fa="__parameters__";function dl(t,r,s){return Ge(()=>{const l=function cl(t){return function(...s){if(t){const l=t(...s);for(const f in l)this[f]=l[f]}}}(r);function f(..._){if(this instanceof f)return l.apply(this,_),this;const b=new f(..._);return N.annotation=b,N;function N(F,z,ne){const ge=F.hasOwnProperty(fa)?F[fa]:Object.defineProperty(F,fa,{value:[]})[fa];for(;ge.length<=ne;)ge.push(null);return(ge[ne]=ge[ne]||[]).push(b),F}}return s&&(f.prototype=Object.create(s.prototype)),f.prototype.ngMetadataName=t,f.annotationCls=f,f})}function tu(t,r){t.forEach(s=>Array.isArray(s)?tu(s,r):r(s))}function tc(t,r,s){r>=t.length?t.push(s):t.splice(r,0,s)}function yr(t,r){return r>=t.length-1?t.pop():t.splice(r,1)[0]}function qr(t,r){const s=[];for(let l=0;l<t;l++)s.push(r);return s}function Ms(t,r,s){let l=ru(t,r);return l>=0?t[1|l]=s:(l=~l,function nu(t,r,s,l){let f=t.length;if(f==r)t.push(s,l);else if(1===f)t.push(l,t[0]),t[0]=s;else{for(f--,t.push(t[f-1],t[f]);f>r;)t[f]=t[f-2],f--;t[r]=s,t[r+1]=l}}(t,l,r,s)),l}function Od(t,r){const s=ru(t,r);if(s>=0)return t[1|s]}function ru(t,r){return function Rc(t,r,s){let l=0,f=t.length>>s;for(;f!==l;){const _=l+(f-l>>1),b=t[_<<s];if(r===b)return _<<s;b>r?f=_:l=_+1}return~(f<<s)}(t,r,1)}const Ha=oi(dl("Optional"),8),bu=oi(dl("SkipSelf"),4);function Sa(t){return 128==(128&t.flags)}var Ra=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}(Ra||{});const Au=/^>|^->|<!--|-->|--!>|<!-$/g,mf=/(<|>)/g,sd="\u200b$1\u200b";const Na=new Map;let xi=0;const Pl="__ngContext__";function Wo(t,r){kr(r)?(t[Pl]=r[Zi],function _f(t){Na.set(t[Zi],t)}(r)):t[Pl]=r}let Hd;function pl(t,r){return Hd(t,r)}function ld(t){const r=t[er];return Qi(r)?r[er]:r}function D(t){return v(t[yi])}function g(t){return v(t[ni])}function v(t){for(;null!==t&&!Qi(t);)t=t[ni];return t}function C(t,r,s,l,f){if(null!=l){let _,b=!1;Qi(l)?_=l:kr(l)&&(b=!0,l=l[Mr]);const N=ti(l);0===t&&null!==s?null==f?ud(r,s,N):Pu(r,s,N,f||null,!0):1===t&&null!==s?Pu(r,s,N,f||null,!0):2===t?function Pp(t,r,s){const l=kc(t,r);l&&function Gd(t,r,s,l){t.removeChild(r,s,l)}(t,l,r,s)}(r,N,b):3===t&&r.destroyNode(N),null!=_&&function $d(t,r,s,l,f){const _=s[Fs];_!==ti(s)&&C(r,t,l,_,f);for(let N=ei;N<s.length;N++){const F=s[N];Op(F[xt],F,t,r,l,_)}}(r,t,_,s,f)}}function G(t,r){return t.createText(r)}function De(t,r){return t.createComment(function Og(t){return t.replace(Au,r=>r.replace(mf,sd))}(r))}function We(t,r,s){return t.createElement(r,s)}function Ru(t,r){const s=t[Ws],l=s.indexOf(r);Do(r),s.splice(l,1)}function su(t,r){if(t.length<=ei)return;const s=ei+r,l=t[s];if(l){const f=l[sr];null!==f&&f!==t&&Ru(f,l),r>0&&(t[s-1][ni]=l[ni]);const _=yr(t,ei+r);!function gt(t,r){Op(t,r,r[En],2,null,null),r[Mr]=null,r[Xr]=null}(l[xt],l);const b=_[wi];null!==b&&b.detachView(_[xt]),l[er]=null,l[ni]=null,l[Cn]&=-129}return l}function ou(t,r){if(!(256&r[Cn])){const s=r[En];r[gs]&&jl(r[gs]),r[el]&&jl(r[el]),s.destroyNode&&Op(t,r,s,3,null,null),function yn(t){let r=t[yi];if(!r)return Nu(t[xt],t);for(;r;){let s=null;if(kr(r))s=r[yi];else{const l=r[ei];l&&(s=l)}if(!s){for(;r&&!r[ni]&&r!==t;)kr(r)&&Nu(r[xt],r),r=r[er];null===r&&(r=t),kr(r)&&Nu(r[xt],r),s=r&&r[ni]}r=s}}(r)}}function Nu(t,r){if(!(256&r[Cn])){r[Cn]&=-129,r[Cn]|=256,function Ef(t,r){let s;if(null!=t&&null!=(s=t.destroyHooks))for(let l=0;l<s.length;l+=2){const f=r[s[l]];if(!(f instanceof Iu)){const _=s[l+1];if(Array.isArray(_))for(let b=0;b<_.length;b+=2){const N=f[_[b]],F=_[b+1];Mi(4,N,F);try{F.call(N)}finally{Mi(5,N,F)}}else{Mi(4,f,_);try{_.call(f)}finally{Mi(5,f,_)}}}}}(t,r),function If(t,r){const s=t.cleanup,l=r[ri];if(null!==s)for(let _=0;_<s.length-1;_+=2)if("string"==typeof s[_]){const b=s[_+3];b>=0?l[b]():l[-b].unsubscribe(),_+=2}else s[_].call(l[s[_+1]]);null!==l&&(r[ri]=null);const f=r[no];if(null!==f){r[no]=null;for(let _=0;_<f.length;_++)(0,f[_])()}}(t,r),1===r[xt].type&&r[En].destroy();const s=r[sr];if(null!==s&&Qi(r[er])){s!==r[er]&&Ru(s,r);const l=r[wi];null!==l&&l.detachView(t)}!function bp(t){Na.delete(t[Zi])}(r)}}function us(t,r,s){return xc(t,r.parent,s)}function xc(t,r,s){let l=r;for(;null!==l&&40&l.type;)l=(r=l).parent;if(null===l)return s[Mr];{const{componentOffset:f}=l;if(f>-1){const{encapsulation:_}=t.data[l.directiveStart+f];if(_===sn.None||_===sn.Emulated)return null}return Ns(l,s)}}function Pu(t,r,s,l,f){t.insertBefore(r,s,l,f)}function ud(t,r,s){t.appendChild(r,s)}function gl(t,r,s,l,f){null!==l?Pu(t,r,s,l,f):ud(t,r,s)}function kc(t,r){return t.parentNode(r)}function Sp(t,r,s){return xg(t,r,s)}function Rp(t,r,s){return 40&t.type?Ns(t,s):null}let Np,Ml,cd,Af,xg=Rp;function Tf(t,r){xg=t,Np=r}function bf(t,r,s,l){const f=us(t,l,r),_=r[En],N=Sp(l.parent||r[Xr],l,r);if(null!=f)if(Array.isArray(s))for(let F=0;F<s.length;F++)gl(_,f,s[F],N,!1);else gl(_,f,s,N,!1);void 0!==Np&&Np(_,l,r,s,f)}function wh(t,r){if(null!==r){const s=r.type;if(3&s)return Ns(r,t);if(4&s)return wf(-1,t[r.index]);if(8&s){const l=r.child;if(null!==l)return wh(t,l);{const f=t[r.index];return Qi(f)?wf(-1,f):ti(f)}}if(32&s)return pl(r,t)()||ti(t[r.index]);{const l=kg(t,r);return null!==l?Array.isArray(l)?l[0]:wh(ld(t[fi]),l):wh(t,r.next)}}return null}function kg(t,r){return null!==r?t[fi][Xr].projection[r.projection]:null}function wf(t,r){const s=ei+t+1;if(s<r.length){const l=r[s],f=l[xt].firstChild;if(null!==f)return wh(l,f)}return r[Fs]}function Fg(t,r,s,l,f,_,b){for(;null!=s;){const N=l[s.index],F=s.type;if(b&&0===r&&(N&&Wo(ti(N),l),s.flags|=2),32!=(32&s.flags))if(8&F)Fg(t,r,s.child,l,f,_,!1),C(r,t,f,N,_);else if(32&F){const z=pl(s,l);let ne;for(;ne=z();)C(r,t,f,ne,_);C(r,t,f,N,_)}else 16&F?Lg(t,r,l,s,f,_):C(r,t,f,N,_);s=b?s.projectionNext:s.next}}function Op(t,r,s,l,f,_){Fg(s,l,t.firstChild,r,f,_,!1)}function Lg(t,r,s,l,f,_){const b=s[fi],F=b[Xr].projection[l.projection];if(Array.isArray(F))for(let z=0;z<F.length;z++)C(r,t,f,F[z],_);else{let z=F;const ne=b[er];Sa(l)&&(z.flags|=128),Fg(t,r,z,ne,f,_,!0)}}function ey(t,r,s){""===s?t.removeAttribute(r,"class"):t.setAttribute(r,"class",s)}function Hm(t,r,s){const{mergedAttrs:l,classes:f,styles:_}=s;null!==l&&Ya(t,r,l),null!==f&&ey(t,r,f),null!==_&&function Vg(t,r,s){t.setAttribute(r,"style",s)}(t,r,_)}function Dh(t){return function Mp(){if(void 0===Ml&&(Ml=null,jn.trustedTypes))try{Ml=jn.trustedTypes.createPolicy("angular",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch{}return Ml}()?.createHTML(t)||t}function xp(t){cd=t}function Ah(){if(void 0!==cd)return cd;if(typeof document<"u")return document;throw new me(210,!1)}function ny(t){return function Sh(){if(void 0===Af&&(Af=null,jn.trustedTypes))try{Af=jn.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch{}return Af}()?.createScriptURL(t)||t}class zm{constructor(r){this.changingThisBreaksApplicationSecurity=r}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${Re})`}}function dd(t){return t instanceof zm?t.changingThisBreaksApplicationSecurity:t}function Rh(t,r){const s=function _v(t){return t instanceof zm&&t.getTypeName()||null}(t);if(null!=s&&s!==r){if("ResourceURL"===s&&"URL"===r)return!0;throw new Error(`Required a safe ${r}, got a ${s} (see ${Re})`)}return s===r}class ry{constructor(r){this.inertDocumentHelper=r}getInertBodyElement(r){r="<body><remove></remove>"+r;try{const s=(new window.DOMParser).parseFromString(Dh(r),"text/html").body;return null===s?this.inertDocumentHelper.getInertBodyElement(r):(s.removeChild(s.firstChild),s)}catch{return null}}}class yv{constructor(r){this.defaultDoc=r,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert")}getInertBodyElement(r){const s=this.inertDocument.createElement("template");return s.innerHTML=Dh(r),s}}const Fp=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function Hg(t){return(t=String(t)).match(Fp)?t:"unsafe:"+t}function lc(t){const r={};for(const s of t.split(","))r[s]=!0;return r}function Ph(...t){const r={};for(const s of t)for(const l in s)s.hasOwnProperty(l)&&(r[l]=!0);return r}const Zm=lc("area,br,col,hr,img,wbr"),Rf=lc("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),iy=lc("rp,rt"),Nf=Ph(Zm,Ph(Rf,lc("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),Ph(iy,lc("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),Ph(iy,Rf)),Wd=lc("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),Jm=Ph(Wd,lc("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),lc("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext"));var xl=function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t}(xl||{});function Lp(t){const r=xh();return r?r.sanitize(xl.URL,t)||"":Rh(t,"URL")?dd(t):Hg(Pe(t))}function Fc(t){const r=xh();if(r)return ny(r.sanitize(xl.RESOURCE_URL,t)||"");if(Rh(t,"ResourceURL"))return ny(dd(t));throw new me(904,!1)}function zg(t,r,s){return function dy(t,r){return"src"===r&&("embed"===t||"frame"===t||"iframe"===t||"media"===t||"script"===t)||"href"===r&&("base"===t||"link"===t)?Fc:Lp}(r,s)(t)}function xh(){const t=Dt();return t&&t[Ar].sanitizer}const Mf=new en("ENVIRONMENT_INITIALIZER"),Wg=new en("INJECTOR",-1),n_=new en("INJECTOR_DEF_TYPES");class Vp{get(r,s=Oi){if(s===Oi){const l=new Error(`NullInjectorError: No provider for ${Ve(r)}!`);throw l.name="NullInjectorError",l}return s}}function xf(...t){return{\u0275providers:qg(0,t),\u0275fromNgModule:!0}}function qg(t,...r){const s=[],l=new Set;let f;const _=b=>{s.push(b)};return tu(r,b=>{const N=b;Bp(N,_,[],l)&&(f||=[],f.push(N))}),void 0!==f&&Kg(f,_),s}function Kg(t,r){for(let s=0;s<t.length;s++){const{ngModule:l,providers:f}=t[s];Yg(f,_=>{r(_,l)})}}function Bp(t,r,s,l){if(!(t=mt(t)))return!1;let f=null,_=lt(t);const b=!_&&Kn(t);if(_||b){if(b&&!b.standalone)return!1;f=t}else{const F=t.ngModule;if(_=lt(F),!_)return!1;f=F}const N=l.has(f);if(b){if(N)return!1;if(l.add(f),b.dependencies){const F="function"==typeof b.dependencies?b.dependencies():b.dependencies;for(const z of F)Bp(z,r,s,l)}}else{if(!_)return!1;{if(null!=_.imports&&!N){let z;l.add(f);try{tu(_.imports,ne=>{Bp(ne,r,s,l)&&(z||=[],z.push(ne))})}finally{}void 0!==z&&Kg(z,r)}if(!N){const z=Ji(f)||(()=>new f);r({provide:f,useFactory:z,deps:qt},f),r({provide:n_,useValue:f,multi:!0},f),r({provide:Mf,useValue:()=>zt(f),multi:!0},f)}const F=_.providers;if(null!=F&&!N){const z=t;Yg(F,ne=>{r(ne,z)})}}}return f!==t&&void 0!==t.providers}function Yg(t,r){for(let s of t)bt(s)&&(s=s.\u0275providers),Array.isArray(s)?Yg(s,r):r(s)}const fy=ye({provide:String,useValue:ye});function kf(t){return null!==t&&"object"==typeof t&&fy in t}function qd(t){return"function"==typeof t}const Zg=new en("Set Injector scope."),kh={},gy={};let Fh;function Lh(){return void 0===Fh&&(Fh=new Vp),Fh}class uc{}class Kd extends uc{get destroyed(){return this._destroyed}constructor(r,s,l,f){super(),this.parent=s,this.source=l,this.scopes=f,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Ff(r,b=>this.processProvider(b)),this.records.set(Wg,cc(void 0,this)),f.has("environment")&&this.records.set(uc,cc(void 0,this));const _=this.records.get(Zg);null!=_&&"string"==typeof _.value&&this.scopes.add(_.value),this.injectorDefTypes=new Set(this.get(n_.multi,qt,Mt.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const s of this._ngOnDestroyHooks)s.ngOnDestroy();const r=this._onDestroyHooks;this._onDestroyHooks=[];for(const s of r)s()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear()}}onDestroy(r){return this.assertNotDestroyed(),this._onDestroyHooks.push(r),()=>this.removeOnDestroy(r)}runInContext(r){this.assertNotDestroyed();const s=_t(this),l=ir(void 0);try{return r()}finally{_t(s),ir(l)}}get(r,s=Oi,l=Mt.Default){if(this.assertNotDestroyed(),r.hasOwnProperty(Ka))return r[Ka](this);l=hn(l);const _=_t(this),b=ir(void 0);try{if(!(l&Mt.SkipSelf)){let F=this.records.get(r);if(void 0===F){const z=function s_(t){return"function"==typeof t||"object"==typeof t&&t instanceof en}(r)&&Gn(r);F=z&&this.injectableDefInScope(z)?cc(au(r),kh):null,this.records.set(r,F)}if(null!=F)return this.hydrate(r,F)}return(l&Mt.Self?Lh():this.parent).get(r,s=l&Mt.Optional&&s===Oi?null:s)}catch(N){if("NullInjectorError"===N.name){if((N[Vi]=N[Vi]||[]).unshift(Ve(r)),_)throw N;return function Js(t,r,s,l){const f=t[Vi];throw r[re]&&f.unshift(r[re]),t.message=function it(t,r,s,l=null){t=t&&"\n"===t.charAt(0)&&"\u0275"==t.charAt(1)?t.slice(2):t;let f=Ve(r);if(Array.isArray(r))f=r.map(Ve).join(" -> ");else if("object"==typeof r){let _=[];for(let b in r)if(r.hasOwnProperty(b)){let N=r[b];_.push(b+":"+("string"==typeof N?JSON.stringify(N):Ve(N)))}f=`{${_.join(", ")}}`}return`${s}${l?"("+l+")":""}[${f}]: ${t.replace(ie,"\n  ")}`}("\n"+t.message,f,s,l),t.ngTokenPath=f,t[Vi]=null,t}(N,r,"R3InjectorError",this.source)}throw N}finally{ir(b),_t(_)}}resolveInjectorInitializers(){const r=_t(this),s=ir(void 0);try{const f=this.get(Mf.multi,qt,Mt.Self);for(const _ of f)_()}finally{_t(r),ir(s)}}toString(){const r=[],s=this.records;for(const l of s.keys())r.push(Ve(l));return`R3Injector[${r.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new me(205,!1)}processProvider(r){let s=qd(r=mt(r))?r:mt(r&&r.provide);const l=function Yd(t){return kf(t)?cc(void 0,t.useValue):cc(Zd(t),kh)}(r);if(qd(r)||!0!==r.multi)this.records.get(s);else{let f=this.records.get(s);f||(f=cc(void 0,kh,!0),f.factory=()=>Vr(f.multi),this.records.set(s,f)),s=r,f.multi.push(r)}this.records.set(s,l)}hydrate(r,s){return s.value===kh&&(s.value=gy,s.value=s.factory()),"object"==typeof s.value&&s.value&&function i_(t){return null!==t&&"object"==typeof t&&"function"==typeof t.ngOnDestroy}(s.value)&&this._ngOnDestroyHooks.add(s.value),s.value}injectableDefInScope(r){if(!r.providedIn)return!1;const s=mt(r.providedIn);return"string"==typeof s?"any"===s||this.scopes.has(s):this.injectorDefTypes.has(s)}removeOnDestroy(r){const s=this._onDestroyHooks.indexOf(r);-1!==s&&this._onDestroyHooks.splice(s,1)}}function au(t){const r=Gn(t),s=null!==r?r.factory:Ji(t);if(null!==s)return s;if(t instanceof en)throw new me(204,!1);if(t instanceof Function)return function Up(t){const r=t.length;if(r>0)throw qr(r,"?"),new me(204,!1);const s=function ze(t){return t&&(t[pt]||t[Un])||null}(t);return null!==s?()=>s.factory(t):()=>new t}(t);throw new me(204,!1)}function Zd(t,r,s){let l;if(qd(t)){const f=mt(t);return Ji(f)||au(f)}if(kf(t))l=()=>mt(t.useValue);else if(function r_(t){return!(!t||!t.useFactory)}(t))l=()=>t.useFactory(...Vr(t.deps||[]));else if(function No(t){return!(!t||!t.useExisting)}(t))l=()=>zt(mt(t.useExisting));else{const f=mt(t&&(t.useClass||t.provide));if(!function za(t){return!!t.deps}(t))return Ji(f)||au(f);l=()=>new f(...Vr(t.deps))}return l}function cc(t,r,s=!1){return{factory:t,value:r,multi:s?[]:void 0}}function Ff(t,r){for(const s of t)Array.isArray(s)?Ff(s,r):s&&bt(s)?Ff(s.\u0275providers,r):r(s)}const Qg=new en("AppId",{providedIn:"root",factory:()=>pd}),pd="ng",Lf=new en("Platform Initializer"),Jg=new en("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),my=new en("AnimationModuleType"),Xg=new en("CSP nonce",{providedIn:"root",factory:()=>Ah().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});let Bf=(t,r,s)=>null;function pc(t,r,s=!1){return Bf(t,r,s)}class kl{}class rm{}class Tv{resolveComponentFactory(r){throw function Ev(t){const r=Error(`No component factory found for ${Ve(t)}.`);return r.ngComponent=t,r}(r)}}let im=(()=>{class t{static#e=this.NULL=new Tv}return t})();function Wp(){return Ou(ji(),Dt())}function Ou(t,r){return new gc(Ns(t,r))}let gc=(()=>{class t{constructor(s){this.nativeElement=s}static#e=this.__NG_ELEMENT_ID__=Wp}return t})();function sm(t){return t instanceof gc?t.nativeElement:t}class Gf{}let vd=(()=>{class t{constructor(){this.destroyNode=null}static#e=this.__NG_ELEMENT_ID__=()=>function jh(){const t=Dt(),s=Yr(ji().index,t);return(kr(s)?s:t)[En]}()}return t})(),om=(()=>{class t{static#e=this.\u0275prov=Zt({token:t,providedIn:"root",factory:()=>null})}return t})();class $f{constructor(r){this.full=r,this.major=r.split(".")[0],this.minor=r.split(".")[1],this.patch=r.split(".").slice(2).join(".")}}const qp=new $f("16.2.11"),uu={};function Kp(t){if(!mn()&&!function Le(){return ue}())throw new me(-203,!1)}function Qp(t,r=null,s=null,l){const f=u_(t,r,s,l);return f.resolveInjectorInitializers(),f}function u_(t,r=null,s=null,l,f=new Set){const _=[s||qt,xf(t)];return l=l||("object"==typeof t?void 0:Ve(t)),new Kd(_,r||Lh(),l||null,f)}let xu=(()=>{class t{static#e=this.THROW_IF_NOT_FOUND=Oi;static#t=this.NULL=new Vp;static create(s,l){if(Array.isArray(s))return Qp({name:""},l,s,"");{const f=s.name??"";return Qp({name:f},s.parent,s.providers,f)}}static#n=this.\u0275prov=Zt({token:t,providedIn:"any",factory:()=>zt(Wg)});static#r=this.__NG_ELEMENT_ID__=-1}return t})();function Wf(t){return t.ngOriginalError}class mc{constructor(){this._console=console}handleError(r){const s=this._findOriginalError(r);this._console.error("ERROR",r),s&&this._console.error("ORIGINAL ERROR",s)}_findOriginalError(r){let s=r&&Wf(r);for(;s&&Wf(s);)s=Wf(s);return s||null}}let Ed=(()=>{class t{static#e=this.__NG_ELEMENT_ID__=Jp;static#t=this.__NG_ENV_ID__=s=>s}return t})();class qf extends Ed{constructor(r){super(),this._lView=r}onDestroy(r){return on(this._lView,r),()=>function vn(t,r){if(null===t[no])return;const s=t[no].indexOf(r);-1!==s&&t[no].splice(s,1)}(this._lView,r)}}function Jp(){return new qf(Dt())}function Xp(t){return r=>{setTimeout(t,void 0,r)}}const cu=class cm extends E.x{constructor(r=!1){super(),this.__isAsync=r}emit(r){super.next(r)}subscribe(r,s,l){let f=r,_=s||(()=>null),b=l;if(r&&"object"==typeof r){const F=r;f=F.next?.bind(F),_=F.error?.bind(F),b=F.complete?.bind(F)}this.__isAsync&&(_=Xp(_),f&&(f=Xp(f)),b&&(b=Xp(b)));const N=super.subscribe({next:f,error:_,complete:b});return r instanceof _e.w0&&r.add(N),N}};function c_(...t){}class po{constructor({enableLongStackTrace:r=!1,shouldCoalesceEventChangeDetection:s=!1,shouldCoalesceRunChangeDetection:l=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new cu(!1),this.onMicrotaskEmpty=new cu(!1),this.onStable=new cu(!1),this.onError=new cu(!1),typeof Zone>"u")throw new me(908,!1);Zone.assertZonePatched();const f=this;f._nesting=0,f._outer=f._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(f._inner=f._inner.fork(new Zone.TaskTrackingZoneSpec)),r&&Zone.longStackTraceZoneSpec&&(f._inner=f._inner.fork(Zone.longStackTraceZoneSpec)),f.shouldCoalesceEventChangeDetection=!l&&s,f.shouldCoalesceRunChangeDetection=l,f.lastRequestAnimationFrameId=-1,f.nativeRequestAnimationFrame=function Kf(){const t="function"==typeof jn.requestAnimationFrame;let r=jn[t?"requestAnimationFrame":"setTimeout"],s=jn[t?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&r&&s){const l=r[Zone.__symbol__("OriginalDelegate")];l&&(r=l);const f=s[Zone.__symbol__("OriginalDelegate")];f&&(s=f)}return{nativeRequestAnimationFrame:r,nativeCancelAnimationFrame:s}}().nativeRequestAnimationFrame,function eh(t){const r=()=>{!function Yf(t){t.isCheckStableRunning||-1!==t.lastRequestAnimationFrameId||(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(jn,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,th(t),t.isCheckStableRunning=!0,ku(t),t.isCheckStableRunning=!1},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),th(t))}(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(s,l,f,_,b,N)=>{if(function hm(t){return!(!Array.isArray(t)||1!==t.length)&&!0===t[0].data?.__ignore_ng_zone__}(N))return s.invokeTask(f,_,b,N);try{return dm(t),s.invokeTask(f,_,b,N)}finally{(t.shouldCoalesceEventChangeDetection&&"eventTask"===_.type||t.shouldCoalesceRunChangeDetection)&&r(),nh(t)}},onInvoke:(s,l,f,_,b,N,F)=>{try{return dm(t),s.invoke(f,_,b,N,F)}finally{t.shouldCoalesceRunChangeDetection&&r(),nh(t)}},onHasTask:(s,l,f,_)=>{s.hasTask(f,_),l===f&&("microTask"==_.change?(t._hasPendingMicrotasks=_.microTask,th(t),ku(t)):"macroTask"==_.change&&(t.hasPendingMacrotasks=_.macroTask))},onHandleError:(s,l,f,_)=>(s.handleError(f,_),t.runOutsideAngular(()=>t.onError.emit(_)),!1)})}(f)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!po.isInAngularZone())throw new me(909,!1)}static assertNotInAngularZone(){if(po.isInAngularZone())throw new me(909,!1)}run(r,s,l){return this._inner.run(r,s,l)}runTask(r,s,l,f){const _=this._inner,b=_.scheduleEventTask("NgZoneEvent: "+f,r,Hh,c_,c_);try{return _.runTask(b,s,l)}finally{_.cancelTask(b)}}runGuarded(r,s,l){return this._inner.runGuarded(r,s,l)}runOutsideAngular(r){return this._outer.run(r)}}const Hh={};function ku(t){if(0==t._nesting&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function th(t){t.hasPendingMicrotasks=!!(t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&-1!==t.lastRequestAnimationFrameId)}function dm(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function nh(t){t._nesting--,ku(t)}class by{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new cu,this.onMicrotaskEmpty=new cu,this.onStable=new cu,this.onError=new cu}run(r,s,l){return r.apply(s,l)}runGuarded(r,s,l){return r.apply(s,l)}runOutsideAngular(r){return r()}runTask(r,s,l,f){return r.apply(s,l)}}const d_=new en("",{providedIn:"root",factory:eg});function eg(){const t=Xt(po);let r=!0;const s=new le.y(f=>{r=t.isStable&&!t.hasPendingMacrotasks&&!t.hasPendingMicrotasks,t.runOutsideAngular(()=>{f.next(r),f.complete()})}),l=new le.y(f=>{let _;t.runOutsideAngular(()=>{_=t.onStable.subscribe(()=>{po.assertNotInAngularZone(),queueMicrotask(()=>{!r&&!t.hasPendingMacrotasks&&!t.hasPendingMicrotasks&&(r=!0,f.next(!0))})})});const b=t.onUnstable.subscribe(()=>{po.assertInAngularZone(),r&&(r=!1,t.runOutsideAngular(()=>{f.next(!1)}))});return()=>{_.unsubscribe(),b.unsubscribe()}});return(0,Oe.T)(s,l.pipe((0,ke.B)()))}function ng(t){return t.ownerDocument}function Fu(t){return t instanceof Function?t():t}let Zf=(()=>{class t{constructor(){this.renderDepth=0,this.handler=null}begin(){this.handler?.validateBegin(),this.renderDepth++}end(){this.renderDepth--,0===this.renderDepth&&this.handler?.execute()}ngOnDestroy(){this.handler?.destroy(),this.handler=null}static#e=this.\u0275prov=Zt({token:t,providedIn:"root",factory:()=>new t})}return t})();function Gh(t){for(;t;){t[Cn]|=64;const r=ld(t);if(Il(t)&&!r)return t;t=r}return null}const $h=new en("",{providedIn:"root",factory:()=>!1});let jc=null;function og(t,r){return t[r]??Xf()}function g_(t,r){const s=Xf();s.producerNode?.length&&(t[r]=jc,s.lView=t,jc=m_())}const ag={...va,consumerIsAlwaysLive:!0,consumerMarkedDirty:t=>{Gh(t.lView)},lView:null};function m_(){return Object.create(ag)}function Xf(){return jc??=m_(),jc}const lr={};function lg(t){ug(Tr(),Dt(),kn()+t,!1)}function ug(t,r,s,l){if(!l)if(3==(3&r[Cn])){const _=t.preOrderCheckHooks;null!==_&&ql(r,_,s)}else{const _=t.preOrderHooks;null!==_&&ba(r,_,0,s)}Hi(s)}function yc(t,r=Mt.Default){const s=Dt();return null===s?zt(t,r):Bs(ji(),s,mt(t),r)}function ih(){throw new Error("invalid")}function Wh(t,r,s,l,f,_,b,N,F,z,ne){const ge=r.blueprint.slice();return ge[Mr]=f,ge[Cn]=140|l,(null!==z||t&&2048&t[Cn])&&(ge[Cn]|=2048),Tt(ge),ge[er]=ge[Yi]=t,ge[tr]=s,ge[Ar]=b||t&&t[Ar],ge[En]=N||t&&t[En],ge[to]=F||t&&t[to]||null,ge[Xr]=_,ge[Zi]=function Eh(){return xi++}(),ge[ps]=ne,ge[fs]=z,ge[fi]=2==r.type?t[fi]:ge,ge}function qh(t,r,s,l,f){let _=t.data[r];if(null===_)_=ep(t,r,s,l,f),function pp(){return Wn.lFrame.inI18n}()&&(_.flags|=32);else if(64&_.type){_.type=s,_.value=l,_.attrs=f;const b=Ur();_.injectorIndex=null===b?-1:b.injectorIndex}return ln(_,!0),_}function ep(t,r,s,l,f){const _=Yc(),b=Co(),F=t.data[r]=function fg(t,r,s,l,f,_){let b=r?r.injectorIndex:-1,N=0;return $l()&&(N|=128),{type:s,index:l,insertBeforeIndex:null,injectorIndex:b,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:N,providerIndexes:0,value:f,attrs:_,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:r,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,b?_:_&&_.parent,s,r,l,f);return null===t.firstChild&&(t.firstChild=F),null!==_&&(b?null==_.child&&null!==F.parent&&(_.child=F):null===_.next&&(_.next=F,F.prev=_)),F}function Fl(t,r,s,l){if(0===s)return-1;const f=r.length;for(let _=0;_<s;_++)r.push(l),t.blueprint.push(l),t.data.push(null);return f}function tp(t,r,s,l,f){const _=og(r,gs),b=kn(),N=2&l;try{Hi(-1),N&&r.length>Vn&&ug(t,r,Vn,!1),Mi(N?2:0,f);const z=N?_:null,ne=Uo(z);try{null!==z&&(z.dirty=!1),s(l,f)}finally{Ul(z,ne)}}finally{N&&null===r[gs]&&g_(r,gs),Hi(b),Mi(N?3:1,f)}}function Kh(t,r,s){if(Rs(r)){const l=ys(null);try{const _=r.directiveEnd;for(let b=r.directiveStart;b<_;b++){const N=t.data[b];N.contentQueries&&N.contentQueries(1,s[b],b)}}finally{ys(l)}}}function Yh(t,r,s){ph()&&(function B(t,r,s,l){const f=s.directiveStart,_=s.directiveEnd;qs(s)&&function $t(t,r,s){const l=Ns(r,t),f=vm(s);let b=16;s.signals?b=4096:s.onPush&&(b=64);const N=gr(t,Wh(t,f,null,b,l,r,null,t[Ar].rendererFactory.createRenderer(l,s),null,null,null));t[r.index]=N}(r,s,t.data[f+s.componentOffset]),t.firstCreatePass||ll(s,r),Wo(l,r);const b=s.initialInputs;for(let N=f;N<_;N++){const F=t.data[N],z=Rr(r,t,N,s);Wo(z,r),null!==b&&xn(0,N-f,z,F,0,b),Ls(F)&&(Yr(s.index,r)[tr]=Rr(r,t,N,s))}}(t,r,s,Ns(s,r)),64==(64&s.flags)&&Y(t,r,s))}function ym(t,r,s=Ns){const l=r.localNames;if(null!==l){let f=r.index+1;for(let _=0;_<l.length;_+=2){const b=l[_+1],N=-1===b?s(r,t):t[b];t[f++]=N}}}function vm(t){const r=t.tView;return null===r||r.incompleteFirstPass?t.tView=np(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts,t.id):r}function np(t,r,s,l,f,_,b,N,F,z,ne){const ge=Vn+l,Be=ge+f,Ye=function Cy(t,r){const s=[];for(let l=0;l<r;l++)s.push(l<t?null:lr);return s}(ge,Be),yt="function"==typeof z?z():z;return Ye[xt]={type:t,blueprint:Ye,template:s,queries:null,viewQuery:N,declTNode:r,data:Ye.slice().fill(null,ge),bindingStartIndex:ge,expandoStartIndex:Be,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof _?_():_,pipeRegistry:"function"==typeof b?b():b,firstChild:null,schemas:F,consts:yt,incompleteFirstPass:!1,ssrId:ne}}let cg=t=>null;function Em(t,r,s,l){for(let f in t)if(t.hasOwnProperty(f)){s=null===s?{}:s;const _=t[f];null===l?Ry(s,r,f,_):l.hasOwnProperty(f)&&Ry(s,r,l[f],_)}return s}function Ry(t,r,s,l){t.hasOwnProperty(s)?t[s].push(r,l):t[s]=[r,l]}function Ll(t,r,s,l,f,_,b,N){const F=Ns(r,s);let ne,z=r.inputs;!N&&null!=z&&(ne=z[l])?(hu(t,s,ne,l,f),qs(r)&&function Tm(t,r){const s=Yr(r,t);16&s[Cn]||(s[Cn]|=64)}(s,r.index)):3&r.type&&(l=function __(t){return"class"===t?"className":"for"===t?"htmlFor":"formaction"===t?"formAction":"innerHtml"===t?"innerHTML":"readonly"===t?"readOnly":"tabindex"===t?"tabIndex":t}(l),f=null!=b?b(f,r.value||"",l):f,_.setProperty(F,l,f))}function a(t,r,s,l){if(ph()){const f=null===l?null:{"":-1},_=function pe(t,r){const s=t.directiveRegistry;let l=null,f=null;if(s)for(let _=0;_<s.length;_++){const b=s[_];if(li(r,b.selectors,!1))if(l||(l=[]),Ls(b))if(null!==b.findHostDirectiveDefs){const N=[];f=f||new Map,b.findHostDirectiveDefs(b,N,f),l.unshift(...N,b),Ce(t,r,N.length)}else l.unshift(b),Ce(t,r,0);else f=f||new Map,b.findHostDirectiveDefs?.(b,l,f),l.push(b)}return null===l?null:[l,f]}(t,s);let b,N;null===_?b=N=null:[b,N]=_,null!==b&&d(t,r,s,b,f,N),f&&function rt(t,r,s){if(r){const l=t.localNames=[];for(let f=0;f<r.length;f+=2){const _=s[r[f+1]];if(null==_)throw new me(-301,!1);l.push(r[f],_)}}}(s,l,f)}s.mergedAttrs=so(s.mergedAttrs,s.attrs)}function d(t,r,s,l,f,_){for(let z=0;z<l.length;z++)Yu(ll(s,r),t,l[z].type);!function dt(t,r,s){t.flags|=1,t.directiveStart=r,t.directiveEnd=r+s,t.providerIndexes=r}(s,t.data.length,l.length);for(let z=0;z<l.length;z++){const ne=l[z];ne.providersResolver&&ne.providersResolver(ne)}let b=!1,N=!1,F=Fl(t,r,l.length,null);for(let z=0;z<l.length;z++){const ne=l[z];s.mergedAttrs=so(s.mergedAttrs,ne.hostAttrs),Nt(t,s,r,F,ne),ut(F,ne,f),null!==ne.contentQueries&&(s.flags|=4),(null!==ne.hostBindings||null!==ne.hostAttrs||0!==ne.hostVars)&&(s.flags|=64);const ge=ne.type.prototype;!b&&(ge.ngOnChanges||ge.ngOnInit||ge.ngDoCheck)&&((t.preOrderHooks??=[]).push(s.index),b=!0),!N&&(ge.ngOnChanges||ge.ngDoCheck)&&((t.preOrderCheckHooks??=[]).push(s.index),N=!0),F++}!function Dv(t,r,s){const f=r.directiveEnd,_=t.data,b=r.attrs,N=[];let F=null,z=null;for(let ne=r.directiveStart;ne<f;ne++){const ge=_[ne],Be=s?s.get(ge):null,yt=Be?Be.outputs:null;F=Em(ge.inputs,ne,F,Be?Be.inputs:null),z=Em(ge.outputs,ne,z,yt);const kt=null===F||null===b||eo(r)?null:Pn(F,ne,b);N.push(kt)}null!==F&&(F.hasOwnProperty("class")&&(r.flags|=8),F.hasOwnProperty("style")&&(r.flags|=16)),r.initialInputs=N,r.inputs=F,r.outputs=z}(t,s,_)}function Y(t,r,s){const l=s.directiveStart,f=s.directiveEnd,_=s.index,b=function gh(){return Wn.lFrame.currentDirectiveIndex}();try{Hi(_);for(let N=l;N<f;N++){const F=t.data[N],z=r[N];Ao(N),(null!==F.hostBindings||0!==F.hostVars||null!==F.hostAttrs)&&ae(F,z)}}finally{Hi(-1),Ao(b)}}function ae(t,r){null!==t.hostBindings&&t.hostBindings(1,r)}function Ce(t,r,s){r.componentOffset=s,(t.components??=[]).push(r.index)}function ut(t,r,s){if(s){if(r.exportAs)for(let l=0;l<r.exportAs.length;l++)s[r.exportAs[l]]=t;Ls(r)&&(s[""]=t)}}function Nt(t,r,s,l,f){t.data[l]=f;const _=f.factory||(f.factory=Ji(f.type)),b=new Iu(_,Ls(f),yc);t.blueprint[l]=b,s[l]=b,function m(t,r,s,l,f){const _=f.hostBindings;if(_){let b=t.hostBindingOpCodes;null===b&&(b=t.hostBindingOpCodes=[]);const N=~r.index;(function S(t){let r=t.length;for(;r>0;){const s=t[--r];if("number"==typeof s&&s<0)return s}return 0})(b)!=N&&b.push(N),b.push(s,l,_)}}(t,r,l,Fl(t,s,f.hostVars,lr),f)}function Ht(t,r,s,l,f,_){const b=Ns(t,r);!function Nn(t,r,s,l,f,_,b){if(null==_)t.removeAttribute(r,f,s);else{const N=null==b?Pe(_):b(_,l||"",f);t.setAttribute(r,f,N,s)}}(r[En],b,_,t.value,s,l,f)}function xn(t,r,s,l,f,_){const b=_[r];if(null!==b)for(let N=0;N<b.length;)vr(l,s,b[N++],b[N++],b[N++])}function vr(t,r,s,l,f){const _=ys(null);try{const b=t.inputTransforms;null!==b&&b.hasOwnProperty(l)&&(f=b[l].call(r,f)),null!==t.setInput?t.setInput(r,f,s,l):r[l]=f}finally{ys(_)}}function Pn(t,r,s){let l=null,f=0;for(;f<s.length;){const _=s[f];if(0!==_)if(5!==_){if("number"==typeof _)break;if(t.hasOwnProperty(_)){null===l&&(l=[]);const b=t[_];for(let N=0;N<b.length;N+=2)if(b[N]===r){l.push(_,b[N+1],s[f+1]);break}}f+=2}else f+=2;else f+=4}return l}function Ir(t,r,s,l){return[t,!0,!1,r,null,0,l,s,null,null,null]}function pr(t,r){const s=t.contentQueries;if(null!==s)for(let l=0;l<s.length;l+=2){const _=s[l+1];if(-1!==_){const b=t.data[_];k(s[l]),b.contentQueries(2,r[_],_)}}}function gr(t,r){return t[yi]?t[ao][ni]=r:t[yi]=r,t[ao]=r,r}function br(t,r,s){k(0);const l=ys(null);try{r(t,s)}finally{ys(l)}}function gi(t){return t[ri]||(t[ri]=[])}function io(t){return t.cleanup||(t.cleanup=[])}function cs(t,r){const s=t[to],l=s?s.get(mc,null):null;l&&l.handleError(r)}function hu(t,r,s,l,f){for(let _=0;_<s.length;){const b=s[_++],N=s[_++];vr(t.data[b],r[b],l,N,f)}}function Ko(t,r,s){const l=mu(r,t);!function X(t,r,s){t.setValue(r,s)}(t[En],l,s)}function un(t,r){const s=Yr(r,t),l=s[xt];!function Tn(t,r){for(let s=r.length;s<t.blueprint.length;s++)r.push(t.blueprint[s])}(l,s);const f=s[Mr];null!==f&&null===s[ps]&&(s[ps]=pc(f,s[to])),Fn(l,s,s[tr])}function Fn(t,r,s){V(r);try{const l=t.viewQuery;null!==l&&br(1,l,s);const f=t.template;null!==f&&tp(t,r,f,1,s),t.firstCreatePass&&(t.firstCreatePass=!1),t.staticContentQueries&&pr(t,r),t.staticViewQueries&&br(2,t.viewQuery,s);const _=t.components;null!==_&&function Dr(t,r){for(let s=0;s<r.length;s++)un(t,r[s])}(r,_)}catch(l){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),l}finally{r[Cn]&=-5,Gt()}}let xs=(()=>{class t{constructor(){this.all=new Set,this.queue=new Map}create(s,l,f){const _=typeof Zone>"u"?null:Zone.current,b=function ct(t,r,s){const l=Object.create(nr);s&&(l.consumerAllowSignalWrites=!0),l.fn=t,l.schedule=r;const f=b=>{l.cleanupFn=b};return l.ref={notify:()=>ju(l),run:()=>{if(l.dirty=!1,l.hasRun&&!nl(l))return;l.hasRun=!0;const b=Uo(l);try{l.cleanupFn(),l.cleanupFn=dn,l.fn(f)}finally{Ul(l,b)}},cleanup:()=>l.cleanupFn()},l.ref}(s,z=>{this.all.has(z)&&this.queue.set(z,_)},f);let N;this.all.add(b),b.notify();const F=()=>{b.cleanup(),N?.(),this.all.delete(b),this.queue.delete(b)};return N=l?.onDestroy(F),{destroy:F}}flush(){if(0!==this.queue.size)for(const[s,l]of this.queue)this.queue.delete(s),l?l.run(()=>s.run()):s.run()}get isQueueEmpty(){return 0===this.queue.size}static#e=this.\u0275prov=Zt({token:t,providedIn:"root",factory:()=>new t})}return t})();function Ys(t,r,s){let l=s?t.styles:null,f=s?t.classes:null,_=0;if(null!==r)for(let b=0;b<r.length;b++){const N=r[b];"number"==typeof N?_=N:1==_?f=ht(f,N):2==_&&(l=ht(l,N+": "+r[++b]+";"))}s?t.styles=l:t.stylesWithoutHost=l,s?t.classes=f:t.classesWithoutHost=f}function pa(t,r,s,l,f=!1){for(;null!==s;){const _=r[s.index];null!==_&&l.push(ti(_)),Qi(_)&&Ii(_,l);const b=s.type;if(8&b)pa(t,r,s.child,l);else if(32&b){const N=pl(s,r);let F;for(;F=N();)l.push(F)}else if(16&b){const N=kg(r,s);if(Array.isArray(N))l.push(...N);else{const F=ld(r[fi]);pa(F[xt],F,N,l,!0)}}s=f?s.projectionNext:s.next}return l}function Ii(t,r){for(let s=ei;s<t.length;s++){const l=t[s],f=l[xt].firstChild;null!==f&&pa(l[xt],l,f,r)}t[Fs]!==t[Mr]&&r.push(t[Fs])}function _l(t,r,s,l=!0){const f=r[Ar],_=f.rendererFactory,b=f.afterRenderEventManager;_.begin?.(),b?.begin();try{Yo(t,r,t.template,s)}catch(F){throw l&&cs(r,F),F}finally{_.end?.(),f.effectManager?.flush(),b?.end()}}function Yo(t,r,s,l){const f=r[Cn];if(256!=(256&f)){r[Ar].effectManager?.flush(),V(r);try{Tt(r),function ua(t){return Wn.lFrame.bindingIndex=t}(t.bindingStartIndex),null!==s&&tp(t,r,s,2,l);const b=3==(3&f);if(b){const z=t.preOrderCheckHooks;null!==z&&ql(r,z,null)}else{const z=t.preOrderHooks;null!==z&&ba(r,z,0,null),yu(r,0)}if(function oh(t){for(let r=D(t);null!==r;r=g(r)){if(!r[Ss])continue;const s=r[Ws];for(let l=0;l<s.length;l++){Si(s[l])}}}(r),Zo(r,2),null!==t.contentQueries&&pr(t,r),b){const z=t.contentCheckHooks;null!==z&&ql(r,z)}else{const z=t.contentHooks;null!==z&&ba(r,z,1),yu(r,1)}!function _m(t,r){const s=t.hostBindingOpCodes;if(null===s)return;const l=og(r,el);try{for(let f=0;f<s.length;f++){const _=s[f];if(_<0)Hi(~_);else{const b=_,N=s[++f],F=s[++f];Wl(N,b),l.dirty=!1;const z=Uo(l);try{F(2,r[b])}finally{Ul(l,z)}}}}finally{null===r[el]&&g_(r,el),Hi(-1)}}(t,r);const N=t.components;null!==N&&Lr(r,N,0);const F=t.viewQuery;if(null!==F&&br(2,F,l),b){const z=t.viewCheckHooks;null!==z&&ql(r,z)}else{const z=t.viewHooks;null!==z&&ba(r,z,2),yu(r,2)}!0===t.firstUpdatePass&&(t.firstUpdatePass=!1),r[Cn]&=-73,Do(r)}finally{Gt()}}}function Zo(t,r){for(let s=D(t);null!==s;s=g(s))for(let l=ei;l<s.length;l++)rp(s[l],r)}function Td(t,r,s){rp(Yr(r,t),s)}function rp(t,r){if(!function Va(t){return 128==(128&t[Cn])}(t))return;const s=t[xt],l=t[Cn];if(80&l&&0===r||1024&l||2===r)Yo(s,t,s.template,t[tr]);else if(t[Ki]>0){Zo(t,1);const f=s.components;null!==f&&Lr(t,f,1)}}function Lr(t,r,s){for(let l=0;l<r.length;l++)Td(t,r[l],s)}class Zh{get rootNodes(){const r=this._lView,s=r[xt];return pa(s,r,s.firstChild,[])}constructor(r,s){this._lView=r,this._cdRefInjectingView=s,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[tr]}set context(r){this._lView[tr]=r}get destroyed(){return 256==(256&this._lView[Cn])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const r=this._lView[er];if(Qi(r)){const s=r[8],l=s?s.indexOf(this):-1;l>-1&&(su(r,l),yr(s,l))}this._attachedToViewContainer=!1}ou(this._lView[xt],this._lView)}onDestroy(r){on(this._lView,r)}markForCheck(){Gh(this._cdRefInjectingView||this._lView)}detach(){this._lView[Cn]&=-129}reattach(){this._lView[Cn]|=128}detectChanges(){_l(this._lView[xt],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new me(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function _n(t,r){Op(t,r,r[En],2,null,null)}(this._lView[xt],this._lView)}attachToAppRef(r){if(this._attachedToViewContainer)throw new me(902,!1);this._appRef=r}}class y_ extends Zh{constructor(r){super(r),this._view=r}detectChanges(){const r=this._view;_l(r[xt],r,r[tr],!1)}checkNoChanges(){}get context(){return null}}class ah extends im{constructor(r){super(),this.ngModule=r}resolveComponentFactory(r){const s=Kn(r);return new go(s,this.ngModule)}}function pg(t){const r=[];for(let s in t)t.hasOwnProperty(s)&&r.push({propName:t[s],templateName:s});return r}class Ts{constructor(r,s){this.injector=r,this.parentInjector=s}get(r,s,l){l=hn(l);const f=this.injector.get(r,uu,l);return f!==uu||s===uu?f:this.parentInjector.get(r,s,l)}}class go extends rm{get inputs(){const r=this.componentDef,s=r.inputTransforms,l=pg(r.inputs);if(null!==s)for(const f of l)s.hasOwnProperty(f.propName)&&(f.transform=s[f.propName]);return l}get outputs(){return pg(this.componentDef.outputs)}constructor(r,s){super(),this.componentDef=r,this.ngModule=s,this.componentType=r.type,this.selector=function Wi(t){return t.map(fu).join(",")}(r.selectors),this.ngContentSelectors=r.ngContentSelectors?r.ngContentSelectors:[],this.isBoundToModule=!!s}create(r,s,l,f){let _=(f=f||this.ngModule)instanceof uc?f:f?.injector;_&&null!==this.componentDef.getStandaloneInjector&&(_=this.componentDef.getStandaloneInjector(_)||_);const b=_?new Ts(r,_):r,N=b.get(Gf,null);if(null===N)throw new me(407,!1);const ge={rendererFactory:N,sanitizer:b.get(om,null),effectManager:b.get(xs,null),afterRenderEventManager:b.get(Zf,null)},Be=N.createRenderer(null,this.componentDef),Ye=this.componentDef.selectors[0][0]||"div",yt=l?function Im(t,r,s,l){const _=l.get($h,!1)||s===sn.ShadowDom,b=t.selectRootElement(r,_);return function Ay(t){cg(t)}(b),b}(Be,l,this.componentDef.encapsulation,b):We(Be,Ye,function ga(t){const r=t.toLowerCase();return"svg"===r?"svg":"math"===r?"math":null}(Ye)),Bn=this.componentDef.signals?4608:this.componentDef.onPush?576:528;let Rt=null;null!==yt&&(Rt=pc(yt,b,!0));const wr=np(0,null,null,1,0,null,null,null,null,null,null),Jr=Wh(null,wr,null,Bn,null,null,ge,Be,b,null,Rt);let bs,Tc;V(Jr);try{const fp=this.componentDef;let J_,qI=null;fp.findHostDirectiveDefs?(J_=[],qI=new Map,fp.findHostDirectiveDefs(fp,J_,qI),J_.push(fp)):J_=[fp];const KC=function v_(t,r){const s=t[xt],l=Vn;return t[l]=r,qh(s,l,2,"#host",null)}(Jr,yt),YC=function sp(t,r,s,l,f,_,b){const N=f[xt];!function gg(t,r,s,l){for(const f of t)r.mergedAttrs=so(r.mergedAttrs,f.hostAttrs);null!==r.mergedAttrs&&(Ys(r,r.mergedAttrs,!0),null!==s&&Hm(l,s,r))}(l,t,r,b);let F=null;null!==r&&(F=pc(r,f[to]));const z=_.rendererFactory.createRenderer(r,s);let ne=16;s.signals?ne=4096:s.onPush&&(ne=64);const ge=Wh(f,vm(s),null,ne,f[t.index],t,_,z,null,null,F);return N.firstCreatePass&&Ce(N,t,l.length-1),gr(f,ge),f[t.index]=ge}(KC,yt,fp,J_,Jr,ge,Be);Tc=la(wr,Vn),yt&&function I_(t,r,s,l){if(l)Ya(t,s,["ng-version",qp.full]);else{const{attrs:f,classes:_}=function ta(t){const r=[],s=[];let l=1,f=2;for(;l<t.length;){let _=t[l];if("string"==typeof _)2===f?""!==_&&r.push(_,t[++l]):8===f&&s.push(_);else{if(!dr(f))break;f=_}l++}return{attrs:r,classes:s}}(r.selectors[0]);f&&Ya(t,s,f),_&&_.length>0&&ey(t,s,_.join(" "))}}(Be,fp,yt,l),void 0!==s&&function _g(t,r,s){const l=t.projection=[];for(let f=0;f<r.length;f++){const _=s[f];l.push(null!=_?Array.from(_):null)}}(Tc,this.ngContentSelectors,s),bs=function mg(t,r,s,l,f,_){const b=ji(),N=f[xt],F=Ns(b,f);d(N,f,b,s,null,l);for(let ne=0;ne<s.length;ne++)Wo(Rr(f,N,b.directiveStart+ne,b),f);Y(N,f,b),F&&Wo(F,f);const z=Rr(f,N,b.directiveStart+b.componentOffset,b);if(t[tr]=f[tr]=z,null!==_)for(const ne of _)ne(z,r);return Kh(N,b,t),z}(YC,fp,J_,qI,Jr,[E_]),Fn(wr,Jr,null)}finally{Gt()}return new ip(this.componentType,bs,Ou(Tc,Jr),Jr,Tc)}}class ip extends kl{constructor(r,s,l,f,_){super(),this.location=l,this._rootLView=f,this._tNode=_,this.previousInputValues=null,this.instance=s,this.hostView=this.changeDetectorRef=new y_(f),this.componentType=r}setInput(r,s){const l=this._tNode.inputs;let f;if(null!==l&&(f=l[r])){if(this.previousInputValues??=new Map,this.previousInputValues.has(r)&&Object.is(this.previousInputValues.get(r),s))return;const _=this._rootLView;hu(_[xt],_,f,r,s),this.previousInputValues.set(r,s),Gh(Yr(this._tNode.index,_))}}get injector(){return new Pi(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(r){this.hostView.onDestroy(r)}}function E_(){const t=ji();Dl(Dt()[xt],t)}function ds(t){let r=function Cv(t){return Object.getPrototypeOf(t.prototype).constructor}(t.type),s=!0;const l=[t];for(;r;){let f;if(Ls(t))f=r.\u0275cmp||r.\u0275dir;else{if(r.\u0275cmp)throw new me(903,!1);f=r.\u0275dir}if(f){if(s){l.push(f);const b=t;b.inputs=Ny(t.inputs),b.inputTransforms=Ny(t.inputTransforms),b.declaredInputs=Ny(t.declaredInputs),b.outputs=Ny(t.outputs);const N=f.hostBindings;N&&O0(t,N);const F=f.viewQuery,z=f.contentQueries;if(F&&mo(t,F),z&&Av(t,z),Ie(t.inputs,f.inputs),Ie(t.declaredInputs,f.declaredInputs),Ie(t.outputs,f.outputs),null!==f.inputTransforms&&(null===b.inputTransforms&&(b.inputTransforms={}),Ie(b.inputTransforms,f.inputTransforms)),Ls(f)&&f.data.animation){const ne=t.data;ne.animation=(ne.animation||[]).concat(f.data.animation)}}const _=f.features;if(_)for(let b=0;b<_.length;b++){const N=_[b];N&&N.ngInherit&&N(t),N===ds&&(s=!1)}}r=Object.getPrototypeOf(r)}!function KI(t){let r=0,s=null;for(let l=t.length-1;l>=0;l--){const f=t[l];f.hostVars=r+=f.hostVars,f.hostAttrs=so(f.hostAttrs,s=so(s,f.hostAttrs))}}(l)}function Ny(t){return t===In?{}:t===qt?[]:t}function mo(t,r){const s=t.viewQuery;t.viewQuery=s?(l,f)=>{r(l,f),s(l,f)}:r}function Av(t,r){const s=t.contentQueries;t.contentQueries=s?(l,f,_)=>{r(l,f,_),s(l,f,_)}:r}function O0(t,r){const s=t.hostBindings;t.hostBindings=s?(l,f)=>{r(l,f),s(l,f)}:r}function Rv(t){return r=>{r.findHostDirectiveDefs=Nv,r.hostDirectives=(Array.isArray(t)?t:t()).map(s=>"function"==typeof s?{directive:mt(s),inputs:In,outputs:In}:{directive:mt(s.directive),inputs:Pv(s.inputs),outputs:Pv(s.outputs)})}}function Nv(t,r,s){if(null!==t.hostDirectives)for(const l of t.hostDirectives){const f=bi(l.directive);YI(f.declaredInputs,l.inputs),Nv(f,r,s),s.set(f,l),r.push(f)}}function Pv(t){if(void 0===t||0===t.length)return In;const r={};for(let s=0;s<t.length;s+=2)r[t[s]]=t[s+1];return r}function YI(t,r){for(const s in r)r.hasOwnProperty(s)&&(t[r[s]]=t[s])}function Py(t){const r=t.inputConfig,s={};for(const l in r)if(r.hasOwnProperty(l)){const f=r[l];Array.isArray(f)&&f[2]&&(s[l]=f[2])}t.inputTransforms=s}function b_(t){return!!Mv(t)&&(Array.isArray(t)||!(t instanceof Map)&&Symbol.iterator in t)}function Mv(t){return null!==t&&("function"==typeof t||"object"==typeof t)}function Lu(t,r,s){return t[r]=s}function yl(t,r,s){return!Object.is(t[r],s)&&(t[r]=s,!0)}function Qh(t,r,s,l){const f=yl(t,r,s);return yl(t,r+1,l)||f}function wm(t,r,s,l,f){const _=Qh(t,r,s,l);return yl(t,r+2,f)||_}function Oy(t,r,s,l){const f=Dt();return yl(f,zl(),r)&&(Tr(),Ht(pi(),f,t,r,s,l)),Oy}function uh(t,r,s,l){return yl(t,zl(),s)?r+Pe(s)+l:lr}function G0(t,r,s,l,f,_,b,N){const F=Dt(),z=Tr(),ne=t+Vn,ge=z.firstCreatePass?function H0(t,r,s,l,f,_,b,N,F){const z=r.consts,ne=qh(r,t,4,b||null,il(z,N));a(r,s,ne,il(z,F)),Dl(r,ne);const ge=ne.tView=np(2,ne,l,f,_,r.directiveRegistry,r.pipeRegistry,null,r.schemas,z,null);return null!==r.queries&&(r.queries.template(r,ne),ge.queries=r.queries.embeddedTView(ne)),ne}(ne,z,F,r,s,l,f,_,b):z.data[ne];ln(ge,!1);const Be=$0(z,F,ge,t);_u()&&bf(z,F,Be,ge),Wo(Be,F),gr(F,F[ne]=Ir(Be,F,Be,ge)),Br(ge)&&Yh(z,F,ge),null!=b&&ym(F,ge,N)}let $0=function tf(t,r,s,l){return Ni(!0),r[En].createComment("")};function jv(t){return Ps(function Ad(){return Wn.lFrame.contextLView}(),Vn+t)}function M_(t,r,s){const l=Dt();return yl(l,zl(),r)&&Ll(Tr(),pi(),l,t,r,l[En],s,!1),M_}function Ly(t,r,s,l,f){const b=f?"class":"style";hu(t,s,r.inputs[b],b,l)}function x_(t,r,s,l){const f=Dt(),_=Tr(),b=Vn+t,N=f[En],F=_.firstCreatePass?function rf(t,r,s,l,f,_){const b=r.consts,F=qh(r,t,2,l,il(b,f));return a(r,s,F,il(b,_)),null!==F.attrs&&Ys(F,F.attrs,!1),null!==F.mergedAttrs&&Ys(F,F.mergedAttrs,!0),null!==r.queries&&r.queries.elementStart(r,F),F}(b,_,f,r,s,l):_.data[b],z=Hv(_,f,F,N,r,t);f[b]=z;const ne=Br(F);return ln(F,!0),Hm(N,z,F),32!=(32&F.flags)&&_u()&&bf(_,f,z,F),0===function It(){return Wn.lFrame.elementDepthCount}()&&Wo(z,f),function Ks(){Wn.lFrame.elementDepthCount++}(),ne&&(Yh(_,f,F),Kh(_,F,f)),null!==l&&ym(f,F),x_}function k_(){let t=ji();Co()?or():(t=t.parent,ln(t,!1));const r=t;(function ol(t){return Wn.skipHydrationRootTNode===t})(r)&&function Kc(){Wn.skipHydrationRootTNode=null}(),function Ba(){Wn.lFrame.elementDepthCount--}();const s=Tr();return s.firstCreatePass&&(Dl(s,t),Rs(t)&&s.queries.elementEnd(t)),null!=r.classesWithoutHost&&function zu(t){return 0!=(8&t.flags)}(r)&&Ly(s,r,Dt(),r.classesWithoutHost,!0),null!=r.stylesWithoutHost&&function gp(t){return 0!=(16&t.flags)}(r)&&Ly(s,r,Dt(),r.stylesWithoutHost,!1),k_}function Vy(t,r,s,l){return x_(t,r,s,l),k_(),Vy}let Hv=(t,r,s,l,f,_)=>(Ni(!0),We(l,f,function mh(){return Wn.lFrame.currentNamespace}()));function F_(t,r,s){const l=Dt(),f=Tr(),_=t+Vn,b=f.firstCreatePass?function $v(t,r,s,l,f){const _=r.consts,b=il(_,l),N=qh(r,t,8,"ng-container",b);return null!==b&&Ys(N,b,!0),a(r,s,N,il(_,f)),null!==r.queries&&r.queries.elementStart(r,N),N}(_,f,l,r,s):f.data[_];ln(b,!0);const N=zv(f,l,b,t);return l[_]=N,_u()&&bf(f,l,N,b),Wo(N,l),Br(b)&&(Yh(f,l,b),Kh(f,b,l)),null!=s&&ym(l,b),F_}function L_(){let t=ji();const r=Tr();return Co()?or():(t=t.parent,ln(t,!1)),r.firstCreatePass&&(Dl(r,t),Rs(t)&&r.queries.elementEnd(t)),L_}let zv=(t,r,s,l)=>(Ni(!0),De(r[En],""));function W0(){return Dt()}function jy(t){return!!t&&"function"==typeof t.then}function Wv(t){return!!t&&"function"==typeof t.subscribe}function Hy(t,r,s,l){const f=Dt(),_=Tr(),b=ji();return function K0(t,r,s,l,f,_,b){const N=Br(l),z=t.firstCreatePass&&io(t),ne=r[tr],ge=gi(r);let Be=!0;if(3&l.type||b){const kt=Ns(l,r),fn=b?b(kt):kt,Bn=ge.length,Rt=b?Jr=>b(ti(Jr[l.index])):l.index;let wr=null;if(!b&&N&&(wr=function q0(t,r,s,l){const f=t.cleanup;if(null!=f)for(let _=0;_<f.length-1;_+=2){const b=f[_];if(b===s&&f[_+1]===l){const N=r[ri],F=f[_+2];return N.length>F?N[F]:null}"string"==typeof b&&(_+=2)}return null}(t,r,f,l.index)),null!==wr)(wr.__ngLastListenerFn__||wr).__ngNextListenerFn__=_,wr.__ngLastListenerFn__=_,Be=!1;else{_=Z0(l,r,ne,_,!1);const Jr=s.listen(fn,f,_);ge.push(_,Jr),z&&z.push(f,Rt,Bn,Bn+1)}}else _=Z0(l,r,ne,_,!1);const Ye=l.outputs;let yt;if(Be&&null!==Ye&&(yt=Ye[f])){const kt=yt.length;if(kt)for(let fn=0;fn<kt;fn+=2){const bs=r[yt[fn]][yt[fn+1]].subscribe(_),Tc=ge.length;ge.push(_,bs),z&&z.push(f,l.index,Tc,-(Tc+1))}}}(_,f,f[En],b,t,r,l),Hy}function Y0(t,r,s,l){try{return Mi(6,r,s),!1!==s(l)}catch(f){return cs(t,f),!1}finally{Mi(7,r,s)}}function Z0(t,r,s,l,f){return function _(b){if(b===Function)return l;Gh(t.componentOffset>-1?Yr(t.index,r):r);let F=Y0(r,s,l,b),z=_.__ngNextListenerFn__;for(;z;)F=Y0(r,s,z,b)&&F,z=z.__ngNextListenerFn__;return f&&!1===F&&b.preventDefault(),F}}function Q0(t=1){return function Zn(t){return(Wn.lFrame.contextLView=function zr(t,r){for(;t>0;)r=r[Yi],t--;return r}(t,Wn.lFrame.contextLView))[tr]}(t)}function J0(t,r){let s=null;const l=function $r(t){const r=t.attrs;if(null!=r){const s=r.indexOf(5);if(!(1&s))return r[s+1]}return null}(t);for(let f=0;f<r.length;f++){const _=r[f];if("*"!==_){if(null===l?li(t,_,!0):oo(l,_))return f}else s=f}return s}function Kv(t){const r=Dt()[fi][Xr];if(!r.projection){const l=r.projection=qr(t?t.length:1,null),f=l.slice();let _=r.child;for(;null!==_;){const b=t?J0(_,t):0;null!==b&&(f[b]?f[b].projectionNext=_:l[b]=_,f[b]=_),_=_.next}}}function Yv(t,r=0,s){const l=Dt(),f=Tr(),_=qh(f,Vn+t,16,null,s||null);null===_.projection&&(_.projection=r),or(),(!l[ps]||$l())&&32!=(32&_.flags)&&function gv(t,r,s){Lg(r[En],0,r,s,us(t,s,r),Sp(s.parent||r[Xr],s,r))}(f,l,_)}function Zv(t,r,s){return V_(t,"",r,"",s),Zv}function V_(t,r,s,l,f){const _=Dt(),b=uh(_,r,s,l);return b!==lr&&Ll(Tr(),pi(),_,t,b,_[En],f,!1),V_}function B_(t,r){return t<<17|r<<2}function up(t){return t>>17&32767}function $y(t){return 2|t}function Cg(t){return(131068&t)>>2}function s0(t,r){return-131069&t|r<<2}function o0(t){return 1|t}function km(t,r,s,l,f){const _=t[s+1],b=null===r;let N=l?up(_):Cg(_),F=!1;for(;0!==N&&(!1===F||b);){const ne=t[N+1];tI(t[N],r)&&(F=!0,t[N+1]=l?o0(ne):$y(ne)),N=l?up(ne):Cg(ne)}F&&(t[s+1]=l?$y(_):o0(_))}function tI(t,r){return null===t||null==r||(Array.isArray(t)?t[1]:t)===r||!(!Array.isArray(t)||"string"!=typeof r)&&ru(t,r)>=0}const ma={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function U_(t){return t.substring(ma.key,ma.keyEnd)}function Ag(t,r){const s=ma.textEnd;return s===r?-1:(r=ma.keyEnd=function j_(t,r,s){for(;r<s&&t.charCodeAt(r)>32;)r++;return r}(t,ma.key=r,s),cp(t,r,s))}function cp(t,r,s){for(;r<s&&t.charCodeAt(r)<=32;)r++;return r}function qa(t,r,s){return $c(t,r,s,!1),qa}function H_(t,r){return $c(t,r,null,!0),H_}function Sg(t){!function Vu(t,r,s,l){const f=Tr(),_=ho(2);f.firstUpdatePass&&af(f,null,_,l);const b=Dt();if(s!==lr&&yl(b,_,s)){const N=f.data[kn()];if($_(N,l)&&!dp(f,_)){let F=l?N.classesWithoutHost:N.stylesWithoutHost;null!==F&&(s=ht(F,s||"")),Ly(f,N,b,s,l)}else!function Qy(t,r,s,l,f,_,b,N){f===lr&&(f=qt);let F=0,z=0,ne=0<f.length?f[0]:null,ge=0<_.length?_[0]:null;for(;null!==ne||null!==ge;){const Be=F<f.length?f[F+1]:void 0,Ye=z<_.length?_[z+1]:void 0;let kt,yt=null;ne===ge?(F+=2,z+=2,Be!==Ye&&(yt=ge,kt=Ye)):null===ge||null!==ne&&ne<ge?(F+=2,yt=ne):(z+=2,yt=ge,kt=Ye),null!==yt&&Jy(t,r,s,l,yt,kt,b,N),ne=F<f.length?f[F]:null,ge=z<_.length?_[z]:null}}(f,N,b,b[En],b[_+1],b[_+1]=function sI(t,r,s){if(null==s||""===s)return qt;const l=[],f=dd(s);if(Array.isArray(f))for(let _=0;_<f.length;_++)t(l,f[_],!0);else if("object"==typeof f)for(const _ in f)f.hasOwnProperty(_)&&t(l,_,f[_]);else"string"==typeof f&&r(l,f);return l}(t,r,s),l,_)}}(oI,Qs,t,!0)}function Qs(t,r){for(let s=function l0(t){return function c0(t){ma.key=0,ma.keyEnd=0,ma.value=0,ma.valueEnd=0,ma.textEnd=t.length}(t),Ag(t,cp(t,0,ma.textEnd))}(r);s>=0;s=Ag(r,s))Ms(t,U_(r),!0)}function $c(t,r,s,l){const f=Dt(),_=Tr(),b=ho(2);_.firstUpdatePass&&af(_,t,b,l),r!==lr&&yl(f,b,r)&&Jy(_,_.data[kn()],f,f[En],t,f[b+1]=function aI(t,r){return null==t||""===t||("string"==typeof r?t+=r:"object"==typeof t&&(t=Ve(dd(t)))),t}(r,s),l,b)}function dp(t,r){return r>=t.expandoStartIndex}function af(t,r,s,l){const f=t.data;if(null===f[s+1]){const _=f[kn()],b=dp(t,s);$_(_,l)&&null===r&&!b&&(r=!1),r=function Ky(t,r,s,l){const f=function Gu(t){const r=Wn.lFrame.currentDirectiveIndex;return-1===r?null:t[r]}(t);let _=l?r.residualClasses:r.residualStyles;if(null===f)0===(l?r.classBindings:r.styleBindings)&&(s=G_(s=Yy(null,t,r,s,l),r.attrs,l),_=null);else{const b=r.directiveStylingLast;if(-1===b||t[b]!==f)if(s=Yy(f,t,r,s,l),null===_){let F=function hp(t,r,s){const l=s?r.classBindings:r.styleBindings;if(0!==Cg(l))return t[up(l)]}(t,r,l);void 0!==F&&Array.isArray(F)&&(F=Yy(null,t,r,F[1],l),F=G_(F,r.attrs,l),function rI(t,r,s,l){t[up(s?r.classBindings:r.styleBindings)]=l}(t,r,l,F))}else _=function iI(t,r,s){let l;const f=r.directiveEnd;for(let _=1+r.directiveStylingLast;_<f;_++)l=G_(l,t[_].hostAttrs,s);return G_(l,r.attrs,s)}(t,r,l)}return void 0!==_&&(l?r.residualClasses=_:r.residualStyles=_),s}(f,_,r,l),function tE(t,r,s,l,f,_){let b=_?r.classBindings:r.styleBindings,N=up(b),F=Cg(b);t[l]=s;let ne,z=!1;if(Array.isArray(s)?(ne=s[1],(null===ne||ru(s,ne)>0)&&(z=!0)):ne=s,f)if(0!==F){const Be=up(t[N+1]);t[l+1]=B_(Be,N),0!==Be&&(t[Be+1]=s0(t[Be+1],l)),t[N+1]=function r0(t,r){return 131071&t|r<<17}(t[N+1],l)}else t[l+1]=B_(N,0),0!==N&&(t[N+1]=s0(t[N+1],l)),N=l;else t[l+1]=B_(F,0),0===N?N=l:t[F+1]=s0(t[F+1],l),F=l;z&&(t[l+1]=$y(t[l+1])),km(t,ne,l,!0),km(t,ne,l,!1),function zy(t,r,s,l,f){const _=f?t.residualClasses:t.residualStyles;null!=_&&"string"==typeof r&&ru(_,r)>=0&&(s[l+1]=o0(s[l+1]))}(r,ne,t,l,_),b=B_(N,F),_?r.classBindings=b:r.styleBindings=b}(f,_,r,s,b,l)}}function Yy(t,r,s,l,f){let _=null;const b=s.directiveEnd;let N=s.directiveStylingLast;for(-1===N?N=s.directiveStart:N++;N<b&&(_=r[N],l=G_(l,_.hostAttrs,f),_!==t);)N++;return null!==t&&(s.directiveStylingLast=N),l}function G_(t,r,s){const l=s?1:2;let f=-1;if(null!==r)for(let _=0;_<r.length;_++){const b=r[_];"number"==typeof b?f=b:f===l&&(Array.isArray(t)||(t=void 0===t?[]:["",t]),Ms(t,b,!!s||r[++_]))}return void 0===t?null:t}function oI(t,r,s){const l=String(r);""!==l&&!l.includes(" ")&&Ms(t,l,s)}function Jy(t,r,s,l,f,_,b,N){if(!(3&r.type))return;const F=t.data,z=F[N+1],ne=function eE(t){return 1==(1&t)}(z)?Lm(F,r,s,f,Cg(z),b):void 0;Vm(ne)||(Vm(_)||function XI(t){return 2==(2&t)}(z)&&(_=Lm(F,null,s,f,N,b)),function Df(t,r,s,l,f){if(r)f?t.addClass(s,l):t.removeClass(s,l);else{let _=-1===l.indexOf("-")?void 0:Ra.DashCase;null==f?t.removeStyle(s,l,_):("string"==typeof f&&f.endsWith("!important")&&(f=f.slice(0,-10),_|=Ra.Important),t.setStyle(s,l,f,_))}}(l,b,mu(kn(),s),f,_))}function Lm(t,r,s,l,f,_){const b=null===r;let N;for(;f>0;){const F=t[f],z=Array.isArray(F),ne=z?F[1]:F,ge=null===ne;let Be=s[f+1];Be===lr&&(Be=ge?qt:void 0);let Ye=ge?Od(Be,l):ne===l?Be:void 0;if(z&&!Vm(Ye)&&(Ye=Od(F,l)),Vm(Ye)&&(N=Ye,b))return N;const yt=t[f+1];f=b?up(yt):Cg(yt)}if(null!==r){let F=_?r.residualClasses:r.residualStyles;null!=F&&(N=Od(F,l))}return N}function Vm(t){return void 0!==t}function $_(t,r){return 0!=(t.flags&(r?8:16))}function h0(t,r=""){const s=Dt(),l=Tr(),f=t+Vn,_=l.firstCreatePass?qh(l,f,1,r,null):l.data[f],b=Xy(l,s,_,r,t);s[f]=b,_u()&&bf(l,s,b,_),ln(_,!1)}let Xy=(t,r,s,l,f)=>(Ni(!0),G(r[En],l));function ev(t){return z_("",t,""),ev}function z_(t,r,s){const l=Dt(),f=uh(l,t,r,s);return f!==lr&&Ko(l,kn(),f),z_}function tv(t,r,s,l,f){const _=Dt(),b=function wd(t,r,s,l,f,_){const N=Qh(t,Ea(),s,f);return ho(2),N?r+Pe(s)+l+Pe(f)+_:lr}(_,t,r,s,l,f);return b!==lr&&Ko(_,kn(),b),tv}function nv(t,r,s,l,f,_,b){const N=Dt(),F=function ap(t,r,s,l,f,_,b,N){const z=wm(t,Ea(),s,f,b);return ho(3),z?r+Pe(s)+l+Pe(f)+_+Pe(b)+N:lr}(N,t,r,s,l,f,_,b);return F!==lr&&Ko(N,kn(),F),nv}function cI(t,r,s){const l=Dt();return yl(l,zl(),r)&&Ll(Tr(),pi(),l,t,r,l[En],s,!0),cI}const Bm=void 0;var bb=["en",[["a","p"],["AM","PM"],Bm],[["AM","PM"],Bm,Bm],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Bm,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Bm,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Bm,"{1} 'at' {0}",Bm],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function Tb(t){const s=Math.floor(Math.abs(t)),l=t.toString().replace(/^[^.]*\.?/,"").length;return 1===s&&0===l?1:5}];let W_={};function dI(t){const r=function wb(t){return t.toLowerCase().replace(/_/g,"-")}(t);let s=aE(r);if(s)return s;const l=r.split("-")[0];if(s=aE(l),s)return s;if("en"===l)return bb;throw new me(701,!1)}function oE(t){return dI(t)[q_.PluralCase]}function aE(t){return t in W_||(W_[t]=jn.ng&&jn.ng.common&&jn.ng.common.locales&&jn.ng.common.locales[t]),W_[t]}var q_=function(t){return t[t.LocaleId=0]="LocaleId",t[t.DayPeriodsFormat=1]="DayPeriodsFormat",t[t.DayPeriodsStandalone=2]="DayPeriodsStandalone",t[t.DaysFormat=3]="DaysFormat",t[t.DaysStandalone=4]="DaysStandalone",t[t.MonthsFormat=5]="MonthsFormat",t[t.MonthsStandalone=6]="MonthsStandalone",t[t.Eras=7]="Eras",t[t.FirstDayOfWeek=8]="FirstDayOfWeek",t[t.WeekendRange=9]="WeekendRange",t[t.DateFormat=10]="DateFormat",t[t.TimeFormat=11]="TimeFormat",t[t.DateTimeFormat=12]="DateTimeFormat",t[t.NumberSymbols=13]="NumberSymbols",t[t.NumberFormats=14]="NumberFormats",t[t.CurrencyCode=15]="CurrencyCode",t[t.CurrencySymbol=16]="CurrencySymbol",t[t.CurrencyName=17]="CurrencyName",t[t.Currencies=18]="Currencies",t[t.Directionality=19]="Directionality",t[t.PluralCase=20]="PluralCase",t[t.ExtraData=21]="ExtraData",t}(q_||{});const K_="en-US",m0={marker:"element"},_0={marker:"ICU"};var Ic=function(t){return t[t.SHIFT=2]="SHIFT",t[t.APPEND_EAGERLY=1]="APPEND_EAGERLY",t[t.COMMENT=2]="COMMENT",t}(Ic||{});let lE=K_;function uE(t){(function Ft(t,r){null==t&&St(r,t,null,"!=")})(t,"Expected localeId to be defined"),"string"==typeof t&&(lE=t.toLowerCase().replace(/_/g,"-"))}function cE(t,r,s){const l=r.insertBeforeIndex,f=Array.isArray(l)?l[0]:l;return null===f?Rp(t,0,s):ti(s[f])}function dE(t,r,s,l,f){const _=r.insertBeforeIndex;if(Array.isArray(_)){let b=l,N=null;if(3&r.type||(N=b,b=f),null!==b&&-1===r.componentOffset)for(let F=1;F<_.length;F++)Pu(t,b,s[_[F]],N,!1)}}function hE(t,r){if(t.push(r),t.length>1)for(let s=t.length-2;s>=0;s--){const l=t[s];fE(l)||Rb(l,r)&&null===Nb(l)&&Pb(l,r.index)}}function fE(t){return!(64&t.type)}function Rb(t,r){return fE(r)||t.index>r.index}function Nb(t){const r=t.insertBeforeIndex;return Array.isArray(r)?r[0]:r}function Pb(t,r){const s=t.insertBeforeIndex;Array.isArray(s)?s[0]=r:(Tf(cE,dE),t.insertBeforeIndex=r)}function xb(t,r,s){const l=ep(t,s,64,null,null);return hE(r,l),l}function jb(){const t=[];let s,l,r=-1;function _(N,F){r=0;const z=function y0(t,r){const s=r[t.currentCaseLViewIndex];return null===s?s:s<0?~s:s}(N,F);l=null!==z?N.remove[z]:qt}function b(){if(r<l.length){const N=l[r++];return N>0?s[N]:(t.push(r,l),_(s[xt].data[~N],s),b())}return 0===t.length?null:(l=t.pop(),r=t.pop(),b())}return function f(N,F){for(s=F;t.length;)t.pop();return _(N.value,F),b}}const v0=/\ufffd(\d+):?\d*\ufffd/gi,Gb=/\ufffd(\d+)\ufffd/,TE=/^\s*(\ufffd\d+:?\d*\ufffd)\s*,\s*(select|plural)\s*,/,lv="\ufffd",$b=/\ufffd\/?\*(\d+:\d+)\ufffd/gi,zb=/\ufffd(\/?[#*]\d+):?\d*\ufffd/gi,Wb=/\uE500/g;function bE(t,r,s,l,f,_,b){const N=Fl(t,l,1,null);let F=N<<Ic.SHIFT,z=Ur();r===z&&(z=null),null===z&&(F|=Ic.APPEND_EAGERLY),b&&(F|=Ic.COMMENT,function vf(t){void 0===Hd&&(Hd=t())}(jb)),f.push(F,null===_?"":_);const ne=ep(t,N,b?32:1,null===_?"":_,null);hE(s,ne);const ge=ne.index;return ln(ne,!1),null!==z&&r!==z&&function Mb(t,r){let s=t.insertBeforeIndex;null===s?(Tf(cE,dE),s=t.insertBeforeIndex=[null,r]):(function mr(t,r,s){t!=r&&St(s,t,r,"==")}(Array.isArray(s),!0,"Expecting array here"),s.push(r))}(z,ge),ne}function Yb(t,r,s,l,f,_,b){const N=b.match(v0),F=bE(t,r,s,_,l,N?null:b,!1);N&&uv(f,b,F.index,null,0,null)}function uv(t,r,s,l,f,_){const b=t.length,N=b+1;t.push(null,null);const F=b+2,z=r.split(v0);let ne=0;for(let ge=0;ge<z.length;ge++){const Be=z[ge];if(1&ge){const Ye=f+parseInt(Be,10);t.push(-1-Ye),ne|=wE(Ye)}else""!==Be&&t.push(Be)}return t.push(s<<2|(l?1:0)),l&&t.push(l,_),t[b]=ne,t[N]=t.length-F,ne}function wE(t){return 1<<Math.min(t,31)}function DE(t){let r,_,s="",l=0,f=!1;for(;null!==(r=$b.exec(t));)f?r[0]===`${lv}/*${_}${lv}`&&(l=r.index,f=!1):(s+=t.substring(l,r.index+r[0].length),_=r[1],f=!0);return s+=t.slice(l),s}function CE(t,r,s,l,f,_){let b=0;const N={type:f.type,currentCaseLViewIndex:Fl(t,r,1,null),anchorIdx:_,cases:[],create:[],remove:[],update:[]};(function rw(t,r,s){t.push(wE(r.mainBinding),2,-1-r.mainBinding,s<<2|2)})(s,f,_),function Ob(t,r,s){const l=t.data[r];null===l?t.data[r]=s:l.value=s}(t,_,N);const F=f.values;for(let z=0;z<F.length;z++){const ne=F[z],ge=[];for(let Be=0;Be<ne.length;Be++){const Ye=ne[Be];if("string"!=typeof Ye){const yt=ge.push(Ye)-1;ne[Be]=`\x3c!--\ufffd${yt}\ufffd--\x3e`}}b=tw(t,N,r,s,l,f.cases[z],ne.join(""),ge)|b}b&&function iw(t,r,s){t.push(r,1,s<<2|3)}(s,b,_)}function ew(t){const r=[],s=[];let l=1,f=0;const _=hI(t=t.replace(TE,function(b,N,F){return l="select"===F?0:1,f=parseInt(N.slice(1),10),""}));for(let b=0;b<_.length;){let N=_[b++].trim();1===l&&(N=N.replace(/\s*(?:=)?(\w+)\s*/,"$1")),N.length&&r.push(N);const F=hI(_[b++]);r.length>s.length&&s.push(F)}return{type:l,mainBinding:f,cases:r,values:s}}function hI(t){if(!t)return[];let r=0;const s=[],l=[],f=/[{}]/g;let _;for(f.lastIndex=0;_=f.exec(t);){const N=_.index;if("}"==_[0]){if(s.pop(),0==s.length){const F=t.substring(r,N);TE.test(F)?l.push(ew(F)):l.push(F),r=N+1}}else{if(0==s.length){const F=t.substring(r,N);l.push(F),r=N+1}s.push("{")}}const b=t.substring(r);return l.push(b),l}function tw(t,r,s,l,f,_,b,N){const F=[],z=[],ne=[];r.cases.push(_),r.create.push(F),r.remove.push(z),r.update.push(ne);const Be=function Km(t){const r=new yv(t);return function Ym(){try{return!!(new window.DOMParser).parseFromString(Dh(""),"text/html")}catch{return!1}}()?new ry(r):r}(Ah()).getInertBodyElement(b),Ye=function di(t){return"content"in t&&function ly(t){return t.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===t.nodeName}(t)?t.content:null}(Be)||Be;return Ye?AE(t,r,s,l,F,z,ne,Ye,f,N,0):0}function AE(t,r,s,l,f,_,b,N,F,z,ne){let ge=0,Be=N.firstChild;for(;Be;){const Ye=Fl(t,s,1,null);switch(Be.nodeType){case Node.ELEMENT_NODE:const yt=Be,kt=yt.tagName.toLowerCase();if(Nf.hasOwnProperty(kt)){fI(f,m0,kt,F,Ye),t.data[Ye]=kt;const wr=yt.attributes;for(let Jr=0;Jr<wr.length;Jr++){const bs=wr.item(Jr),Tc=bs.name.toLowerCase();bs.value.match(v0)?Jm.hasOwnProperty(Tc)&&uv(b,bs.value,Ye,bs.name,0,Wd[Tc]?Hg:null):sw(f,Ye,bs)}ge=AE(t,r,s,l,f,_,b,Be,Ye,z,ne+1)|ge,SE(_,Ye,ne)}break;case Node.TEXT_NODE:const fn=Be.textContent||"",Bn=fn.match(v0);fI(f,null,Bn?"":fn,F,Ye),SE(_,Ye,ne),Bn&&(ge=uv(b,fn,Ye,null,0,null)|ge);break;case Node.COMMENT_NODE:const Rt=Gb.exec(Be.textContent||"");if(Rt){const Jr=z[parseInt(Rt[1],10)];fI(f,_0,"",F,Ye),CE(t,s,l,F,Jr,Ye),nw(_,Ye,ne)}}Be=Be.nextSibling}return ge}function SE(t,r,s){0===s&&t.push(r)}function nw(t,r,s){0===s&&(t.push(~r),t.push(r))}function fI(t,r,s,l,f){null!==r&&t.push(r),t.push(s,f,function kb(t,r,s){return t|r<<17|s<<1}(0,l,f))}function sw(t,r,s){t.push(r<<1|1,s.name,s.value)}function NE(t,r,s=-1){const l=Tr(),f=Dt(),_=Vn+t,b=il(l.consts,r),N=Ur();l.firstCreatePass&&function Kb(t,r,s,l,f,_){const b=Ur(),N=[],F=[],z=[[]];f=function Xb(t,r){if(function Jb(t){return-1===t}(r))return DE(t);{const s=t.indexOf(`:${r}${lv}`)+2+r.toString().length,l=t.search(new RegExp(`${lv}\\/\\*\\d+:${r}${lv}`));return DE(t.substring(s,l))}}(f,_);const ne=function qb(t){return t.replace(Wb," ")}(f).split(zb);for(let ge=0;ge<ne.length;ge++){let Be=ne[ge];if(1&ge){const Ye=47===Be.charCodeAt(0),kt=(Be.charCodeAt(Ye?1:0),Vn+Number.parseInt(Be.substring(Ye?2:1)));if(Ye)z.shift(),ln(Ur(),!1);else{const fn=xb(t,z[0],kt);z.unshift([]),ln(fn,!0)}}else{const Ye=hI(Be);for(let yt=0;yt<Ye.length;yt++){let kt=Ye[yt];if(1&yt){const fn=kt;if("object"!=typeof fn)throw new Error(`Unable to parse ICU expression in "${f}" message.`);CE(t,s,F,r,fn,bE(t,b,z[0],s,N,"",!0).index)}else""!==kt&&Yb(t,b,z[0],N,F,s,kt)}}}t.data[l]={create:N,update:F}}(l,null===N?0:N.index,f,_,b,s),2===l.type?f[fi][Cn]|=32:f[Cn]|=32;const F=l.data[_],ne=xc(l,N===f[Xr]?null:N,f);(function Vb(t,r,s,l){const f=t[En];for(let _=0;_<r.length;_++){const b=r[_++],N=r[_],z=(b&Ic.APPEND_EAGERLY)===Ic.APPEND_EAGERLY,ne=b>>>Ic.SHIFT;let ge=t[ne];null===ge&&(ge=t[ne]=(b&Ic.COMMENT)===Ic.COMMENT?f.createComment(N):G(f,N)),z&&null!==s&&Pu(f,s,ge,l,!1)}})(f,F.create,ne,N&&8&N.type?f[N.index]:null),Hu(!0)}function OE(t,r,s){NE(t,r,s),function PE(){Hu(!1)}()}function pI(t,r,s,l,f){if(t=mt(t),Array.isArray(t))for(let _=0;_<t.length;_++)pI(t[_],r,s,l,f);else{const _=Tr(),b=Dt(),N=ji();let F=qd(t)?t:mt(t.provide);const z=Zd(t),ne=1048575&N.providerIndexes,ge=N.directiveStart,Be=N.providerIndexes>>20;if(qd(t)||!t.multi){const Ye=new Iu(z,f,yc),yt=mI(F,r,f?ne:ne+Be,ge);-1===yt?(Yu(ll(N,b),_,F),gI(_,t,r.length),r.push(F),N.directiveStart++,N.directiveEnd++,f&&(N.providerIndexes+=1048576),s.push(Ye),b.push(Ye)):(s[yt]=Ye,b[yt]=Ye)}else{const Ye=mI(F,r,ne+Be,ge),yt=mI(F,r,ne,ne+Be),fn=yt>=0&&s[yt];if(f&&!fn||!f&&!(Ye>=0&&s[Ye])){Yu(ll(N,b),_,F);const Bn=function Ew(t,r,s,l,f){const _=new Iu(t,s,yc);return _.multi=[],_.index=r,_.componentProviders=0,xE(_,f,l&&!s),_}(f?Iw:vw,s.length,f,l,z);!f&&fn&&(s[yt].providerFactory=Bn),gI(_,t,r.length,0),r.push(F),N.directiveStart++,N.directiveEnd++,f&&(N.providerIndexes+=1048576),s.push(Bn),b.push(Bn)}else gI(_,t,Ye>-1?Ye:yt,xE(s[f?yt:Ye],z,!f&&l));!f&&l&&fn&&s[yt].componentProviders++}}}function gI(t,r,s,l){const f=qd(r),_=function py(t){return!!t.useClass}(r);if(f||_){const F=(_?mt(r.useClass):r).prototype.ngOnDestroy;if(F){const z=t.destroyHooks||(t.destroyHooks=[]);if(!f&&r.multi){const ne=z.indexOf(s);-1===ne?z.push(s,[l,F]):z[ne+1].push(l,F)}else z.push(s,F)}}}function xE(t,r,s){return s&&t.componentProviders++,t.multi.push(r)-1}function mI(t,r,s,l){for(let f=s;f<l;f++)if(r[f]===t)return f;return-1}function vw(t,r,s,l){return _I(this.multi,[])}function Iw(t,r,s,l){const f=this.multi;let _;if(this.providerFactory){const b=this.providerFactory.componentProviders,N=Rr(s,s[xt],this.providerFactory.index,l);_=N.slice(0,b),_I(f,_);for(let F=b;F<N.length;F++)_.push(N[F])}else _=[],_I(f,_);return _}function _I(t,r){for(let s=0;s<t.length;s++)r.push((0,t[s])());return r}function kE(t,r=[]){return s=>{s.providersResolver=(l,f)=>function yw(t,r,s){const l=Tr();if(l.firstCreatePass){const f=Ls(t);pI(s,l.data,l.blueprint,f,!0),pI(r,l.data,l.blueprint,f,!1)}}(l,f?f(t):t,r)}}class Um{}class FE{}function Tw(t,r){return new yI(t,r??null,[])}class yI extends Um{constructor(r,s,l){super(),this._parent=s,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new ah(this);const f=Cr(r);this._bootstrapComponents=Fu(f.bootstrap),this._r3Injector=u_(r,s,[{provide:Um,useValue:this},{provide:im,useValue:this.componentFactoryResolver},...l],Ve(r),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(r)}get injector(){return this._r3Injector}destroy(){const r=this._r3Injector;!r.destroyed&&r.destroy(),this.destroyCbs.forEach(s=>s()),this.destroyCbs=null}onDestroy(r){this.destroyCbs.push(r)}}class vI extends FE{constructor(r){super(),this.moduleType=r}create(r){return new yI(this.moduleType,r,[])}}class LE extends Um{constructor(r){super(),this.componentFactoryResolver=new ah(this),this.instance=null;const s=new Kd([...r.providers,{provide:Um,useValue:this},{provide:im,useValue:this.componentFactoryResolver}],r.parent||Lh(),r.debugName,new Set(["environment"]));this.injector=s,r.runEnvironmentInitializers&&s.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(r){this.injector.onDestroy(r)}}function VE(t,r,s=null){return new LE({providers:t,parent:r,debugName:s,runEnvironmentInitializers:!0}).injector}let ww=(()=>{class t{constructor(s){this._injector=s,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(s){if(!s.standalone)return null;if(!this.cachedInjectors.has(s)){const l=qg(0,s.type),f=l.length>0?VE([l],this._injector,`Standalone[${s.type.name}]`):null;this.cachedInjectors.set(s,f)}return this.cachedInjectors.get(s)}ngOnDestroy(){try{for(const s of this.cachedInjectors.values())null!==s&&s.destroy()}finally{this.cachedInjectors.clear()}}static#e=this.\u0275prov=Zt({token:t,providedIn:"environment",factory:()=>new t(zt(uc))})}return t})();function BE(t){t.getStandaloneInjector=r=>r.get(ww).getOrCreateStandaloneInjector(t)}function WE(t,r,s){const l=Ri()+t,f=Dt();return f[l]===lr?Lu(f,l,s?r.call(s):r()):function bm(t,r){return t[r]}(f,l)}function qE(t,r,s,l){return function ZE(t,r,s,l,f,_){const b=r+s;return yl(t,b,f)?Lu(t,b+1,_?l.call(_,f):l(f)):cv(t,b+1)}(Dt(),Ri(),t,r,s,l)}function KE(t,r,s,l,f){return QE(Dt(),Ri(),t,r,s,l,f)}function YE(t,r,s,l,f,_){return function JE(t,r,s,l,f,_,b,N){const F=r+s;return wm(t,F,f,_,b)?Lu(t,F+3,N?l.call(N,f,_,b):l(f,_,b)):cv(t,F+3)}(Dt(),Ri(),t,r,s,l,f,_)}function cv(t,r){const s=t[r];return s===lr?void 0:s}function QE(t,r,s,l,f,_,b){const N=r+s;return Qh(t,N,f,_)?Lu(t,N+2,b?l.call(b,f,_):l(f,_)):cv(t,N+2)}function tT(t,r){const s=Tr();let l;const f=t+Vn;s.firstCreatePass?(l=function Bw(t,r){if(r)for(let s=r.length-1;s>=0;s--){const l=r[s];if(t===l.name)return l}}(r,s.pipeRegistry),s.data[f]=l,l.onDestroy&&(s.destroyHooks??=[]).push(f,l.onDestroy)):l=s.data[f];const _=l.factory||(l.factory=Ji(l.type)),N=ir(yc);try{const F=Rd(!1),z=_();return Rd(F),function nf(t,r,s,l){s>=t.data.length&&(t.data[s]=null,t.blueprint[s]=null),r[s]=l}(s,Dt(),f,z),z}finally{ir(N)}}function nT(t,r,s,l){const f=t+Vn,_=Dt(),b=Ps(_,f);return function dv(t,r){return t[xt].data[r].pure}(_,f)?QE(_,Ri(),r,b.transform,s,l,b):b.transform(s,l)}function $w(){return this._results[Symbol.iterator]()}class EI{static#e=Symbol.iterator;get changes(){return this._changes||(this._changes=new cu)}constructor(r=!1){this._emitDistinctChangesOnly=r,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const s=EI.prototype;s[Symbol.iterator]||(s[Symbol.iterator]=$w)}get(r){return this._results[r]}map(r){return this._results.map(r)}filter(r){return this._results.filter(r)}find(r){return this._results.find(r)}reduce(r,s){return this._results.reduce(r,s)}forEach(r){this._results.forEach(r)}some(r){return this._results.some(r)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(r,s){const l=this;l.dirty=!1;const f=function Us(t){return t.flat(Number.POSITIVE_INFINITY)}(r);(this._changesDetected=!function Pd(t,r,s){if(t.length!==r.length)return!1;for(let l=0;l<t.length;l++){let f=t[l],_=r[l];if(s&&(f=s(f),_=s(_)),_!==f)return!1}return!0}(l._results,f,s))&&(l._results=f,l.length=f.length,l.last=f[this.length-1],l.first=f[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}function Ww(t,r,s,l=!0){const f=r[xt];if(function ls(t,r,s,l){const f=ei+l,_=s.length;l>0&&(s[f-1][ni]=r),l<_-ei?(r[ni]=s[f],tc(s,ei+l,r)):(s.push(r),r[ni]=null),r[er]=s;const b=r[sr];null!==b&&s!==b&&function Ol(t,r){const s=t[Ws];r[fi]!==r[er][er][fi]&&(t[Ss]=!0),null===s?t[Ws]=[r]:s.push(r)}(b,r);const N=r[wi];null!==N&&N.insertView(t),r[Cn]|=128}(f,r,t,s),l){const _=wf(s,t),b=r[En],N=kc(b,t[Fs]);null!==N&&function rn(t,r,s,l,f,_){l[Mr]=f,l[Xr]=r,Op(t,l,s,1,f,_)}(f,t[Xr],b,r,N,_)}}let hv=(()=>{class t{static#e=this.__NG_ELEMENT_ID__=Yw}return t})();const qw=hv,Kw=class extends qw{constructor(r,s,l){super(),this._declarationLView=r,this._declarationTContainer=s,this.elementRef=l}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(r,s){return this.createEmbeddedViewImpl(r,s)}createEmbeddedViewImpl(r,s,l){const f=function zw(t,r,s,l){const f=r.tView,N=Wh(t,f,s,4096&t[Cn]?4096:16,null,r,null,null,null,l?.injector??null,l?.hydrationInfo??null);N[sr]=t[r.index];const z=t[wi];return null!==z&&(N[wi]=z.createEmbeddedView(f)),Fn(f,N,s),N}(this._declarationLView,this._declarationTContainer,r,{injector:s,hydrationInfo:l});return new Zh(f)}};function Yw(){return I0(ji(),Dt())}function I0(t,r){return 4&t.type?new Kw(r,t,Ou(t,r)):null}let T0=(()=>{class t{static#e=this.__NG_ELEMENT_ID__=tD}return t})();function tD(){return uT(ji(),Dt())}const nD=T0,aT=class extends nD{constructor(r,s,l){super(),this._lContainer=r,this._hostTNode=s,this._hostLView=l}get element(){return Ou(this._hostTNode,this._hostLView)}get injector(){return new Pi(this._hostTNode,this._hostLView)}get parentInjector(){const r=Zl(this._hostTNode,this._hostLView);if(Yl(r)){const s=Os(r,this._hostLView),l=al(r);return new Pi(s[xt].data[l+8],s)}return new Pi(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(r){const s=lT(this._lContainer);return null!==s&&s[r]||null}get length(){return this._lContainer.length-ei}createEmbeddedView(r,s,l){let f,_;"number"==typeof l?f=l:null!=l&&(f=l.index,_=l.injector);const N=r.createEmbeddedViewImpl(s||{},_,null);return this.insertImpl(N,f,false),N}createComponent(r,s,l,f,_){const b=r&&!function ec(t){return"function"==typeof t}(r);let N;if(b)N=s;else{const kt=s||{};N=kt.index,l=kt.injector,f=kt.projectableNodes,_=kt.environmentInjector||kt.ngModuleRef}const F=b?r:new go(Kn(r)),z=l||this.parentInjector;if(!_&&null==F.ngModule){const fn=(b?z:this.parentInjector).get(uc,null);fn&&(_=fn)}Kn(F.componentType??{});const Ye=F.create(z,f,null,_);return this.insertImpl(Ye.hostView,N,false),Ye}insert(r,s){return this.insertImpl(r,s,!1)}insertImpl(r,s,l){const f=r._lView;if(function Gl(t){return Qi(t[er])}(f)){const F=this.indexOf(r);if(-1!==F)this.detach(F);else{const z=f[er],ne=new aT(z,z[Xr],z[er]);ne.detach(ne.indexOf(r))}}const b=this._adjustIndex(s),N=this._lContainer;return Ww(N,f,b,!l),r.attachToViewContainerRef(),tc(TI(N),b,r),r}move(r,s){return this.insert(r,s)}indexOf(r){const s=lT(this._lContainer);return null!==s?s.indexOf(r):-1}remove(r){const s=this._adjustIndex(r,-1),l=su(this._lContainer,s);l&&(yr(TI(this._lContainer),s),ou(l[xt],l))}detach(r){const s=this._adjustIndex(r,-1),l=su(this._lContainer,s);return l&&null!=yr(TI(this._lContainer),s)?new Zh(l):null}_adjustIndex(r,s=0){return r??this.length+s}};function lT(t){return t[8]}function TI(t){return t[8]||(t[8]=[])}function uT(t,r){let s;const l=r[t.index];return Qi(l)?s=l:(s=Ir(l,r,null,t),r[t.index]=s,gr(r,s)),cT(s,r,t,l),new aT(s,t,r)}let cT=function dT(t,r,s,l){if(t[Fs])return;let f;f=8&s.type?ti(l):function rD(t,r){const s=t[En],l=s.createComment(""),f=Ns(r,t);return Pu(s,kc(s,f),l,function Mg(t,r){return t.nextSibling(r)}(s,f),!1),l}(r,s),t[Fs]=f};class bI{constructor(r){this.queryList=r,this.matches=null}clone(){return new bI(this.queryList)}setDirty(){this.queryList.setDirty()}}class wI{constructor(r=[]){this.queries=r}createEmbeddedView(r){const s=r.queries;if(null!==s){const l=null!==r.contentQueries?r.contentQueries[0]:s.length,f=[];for(let _=0;_<l;_++){const b=s.getByIndex(_);f.push(this.queries[b.indexInDeclarationView].clone())}return new wI(f)}return null}insertView(r){this.dirtyQueriesWithMatches(r)}detachView(r){this.dirtyQueriesWithMatches(r)}dirtyQueriesWithMatches(r){for(let s=0;s<this.queries.length;s++)null!==IT(r,s).matches&&this.queries[s].setDirty()}}class hT{constructor(r,s,l=null){this.predicate=r,this.flags=s,this.read=l}}class DI{constructor(r=[]){this.queries=r}elementStart(r,s){for(let l=0;l<this.queries.length;l++)this.queries[l].elementStart(r,s)}elementEnd(r){for(let s=0;s<this.queries.length;s++)this.queries[s].elementEnd(r)}embeddedTView(r){let s=null;for(let l=0;l<this.length;l++){const f=null!==s?s.length:0,_=this.getByIndex(l).embeddedTView(r,f);_&&(_.indexInDeclarationView=l,null!==s?s.push(_):s=[_])}return null!==s?new DI(s):null}template(r,s){for(let l=0;l<this.queries.length;l++)this.queries[l].template(r,s)}getByIndex(r){return this.queries[r]}get length(){return this.queries.length}track(r){this.queries.push(r)}}class CI{constructor(r,s=-1){this.metadata=r,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=s}elementStart(r,s){this.isApplyingToNode(s)&&this.matchTNode(r,s)}elementEnd(r){this._declarationNodeIndex===r.index&&(this._appliesToNextNode=!1)}template(r,s){this.elementStart(r,s)}embeddedTView(r,s){return this.isApplyingToNode(r)?(this.crossesNgTemplate=!0,this.addMatch(-r.index,s),new CI(this.metadata)):null}isApplyingToNode(r){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const s=this._declarationNodeIndex;let l=r.parent;for(;null!==l&&8&l.type&&l.index!==s;)l=l.parent;return s===(null!==l?l.index:-1)}return this._appliesToNextNode}matchTNode(r,s){const l=this.metadata.predicate;if(Array.isArray(l))for(let f=0;f<l.length;f++){const _=l[f];this.matchTNodeWithReadOption(r,s,oD(s,_)),this.matchTNodeWithReadOption(r,s,si(s,r,_,!1,!1))}else l===hv?4&s.type&&this.matchTNodeWithReadOption(r,s,-1):this.matchTNodeWithReadOption(r,s,si(s,r,l,!1,!1))}matchTNodeWithReadOption(r,s,l){if(null!==l){const f=this.metadata.read;if(null!==f)if(f===gc||f===T0||f===hv&&4&s.type)this.addMatch(s.index,-2);else{const _=si(s,r,f,!1,!1);null!==_&&this.addMatch(s.index,_)}else this.addMatch(s.index,l)}}addMatch(r,s){null===this.matches?this.matches=[r,s]:this.matches.push(r,s)}}function oD(t,r){const s=t.localNames;if(null!==s)for(let l=0;l<s.length;l+=2)if(s[l]===r)return s[l+1];return null}function lD(t,r,s,l){return-1===s?function aD(t,r){return 11&t.type?Ou(t,r):4&t.type?I0(t,r):null}(r,t):-2===s?function uD(t,r,s){return s===gc?Ou(r,t):s===hv?I0(r,t):s===T0?uT(r,t):void 0}(t,r,l):Rr(t,t[xt],s,r)}function fT(t,r,s,l){const f=r[wi].queries[l];if(null===f.matches){const _=t.data,b=s.matches,N=[];for(let F=0;F<b.length;F+=2){const z=b[F];N.push(z<0?null:lD(r,_[z],b[F+1],s.metadata.read))}f.matches=N}return f.matches}function AI(t,r,s,l){const f=t.queries.getByIndex(s),_=f.matches;if(null!==_){const b=fT(t,r,f,s);for(let N=0;N<_.length;N+=2){const F=_[N];if(F>0)l.push(b[N/2]);else{const z=_[N+1],ne=r[-F];for(let ge=ei;ge<ne.length;ge++){const Be=ne[ge];Be[sr]===Be[er]&&AI(Be[xt],Be,z,l)}if(null!==ne[Ws]){const ge=ne[Ws];for(let Be=0;Be<ge.length;Be++){const Ye=ge[Be];AI(Ye[xt],Ye,z,l)}}}}}return l}function pT(t){const r=Dt(),s=Tr(),l=R();k(l+1);const f=IT(s,l);if(t.dirty&&function wl(t){return 4==(4&t[Cn])}(r)===(2==(2&f.metadata.flags))){if(null===f.matches)t.reset([]);else{const _=f.crossesNgTemplate?AI(s,r,l,[]):fT(s,r,f,l);t.reset(_,sm),t.notifyOnChanges()}return!0}return!1}function gT(t,r,s){const l=Tr();l.firstCreatePass&&(vT(l,new hT(t,r,s),-1),2==(2&r)&&(l.staticViewQueries=!0)),yT(l,Dt(),r)}function mT(t,r,s,l){const f=Tr();if(f.firstCreatePass){const _=ji();vT(f,new hT(r,s,l),_.index),function dD(t,r){const s=t.contentQueries||(t.contentQueries=[]);r!==(s.length?s[s.length-1]:-1)&&s.push(t.queries.length-1,r)}(f,t),2==(2&s)&&(f.staticContentQueries=!0)}yT(f,Dt(),s)}function _T(){return function cD(t,r){return t[wi].queries[r].queryList}(Dt(),R())}function yT(t,r,s){const l=new EI(4==(4&s));(function hg(t,r,s,l){const f=gi(r);f.push(s),t.firstCreatePass&&io(t).push(l,f.length-1)})(t,r,l,l.destroy),null===r[wi]&&(r[wi]=new wI),r[wi].queries.push(new bI(l))}function vT(t,r,s){null===t.queries&&(t.queries=new DI),t.queries.track(new CI(r,s))}function IT(t,r){return t.queries.getByIndex(r)}function ET(t,r){return I0(t,r)}function SI(t){return!!Cr(t)}const VT=new en("Application Initializer");let MI=(()=>{class t{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((s,l)=>{this.resolve=s,this.reject=l}),this.appInits=Xt(VT,{optional:!0})??[]}runInitializers(){if(this.initialized)return;const s=[];for(const f of this.appInits){const _=f();if(jy(_))s.push(_);else if(Wv(_)){const b=new Promise((N,F)=>{_.subscribe({complete:N,error:F})});s.push(b)}}const l=()=>{this.done=!0,this.resolve()};Promise.all(s).then(()=>{l()}).catch(f=>{this.reject(f)}),0===s.length&&l(),this.initialized=!0}static#e=this.\u0275fac=function(l){return new(l||t)};static#t=this.\u0275prov=Zt({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),BT=(()=>{class t{log(s){console.log(s)}warn(s){console.warn(s)}static#e=this.\u0275fac=function(l){return new(l||t)};static#t=this.\u0275prov=Zt({token:t,factory:t.\u0275fac,providedIn:"platform"})}return t})();const w0=new en("LocaleId",{providedIn:"root",factory:()=>Xt(w0,Mt.Optional|Mt.SkipSelf)||function OD(){return typeof $localize<"u"&&$localize.locale||K_}()}),MD=new en("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});let UT=(()=>{class t{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new Ne.X(!1)}add(){this.hasPendingTasks.next(!0);const s=this.taskId++;return this.pendingTasks.add(s),s}remove(s){this.pendingTasks.delete(s),0===this.pendingTasks.size&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks.next(!1)}static#e=this.\u0275fac=function(l){return new(l||t)};static#t=this.\u0275prov=Zt({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();class kD{constructor(r,s){this.ngModuleFactory=r,this.componentFactories=s}}let FD=(()=>{class t{compileModuleSync(s){return new vI(s)}compileModuleAsync(s){return Promise.resolve(this.compileModuleSync(s))}compileModuleAndAllComponentsSync(s){const l=this.compileModuleSync(s),_=Fu(Cr(s).declarations).reduce((b,N)=>{const F=Kn(N);return F&&b.push(new go(F)),b},[]);return new kD(l,_)}compileModuleAndAllComponentsAsync(s){return Promise.resolve(this.compileModuleAndAllComponentsSync(s))}clearCache(){}clearCacheFor(s){}getModuleId(s){}static#e=this.\u0275fac=function(l){return new(l||t)};static#t=this.\u0275prov=Zt({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();const $T=new en(""),zT=new en("");let FI,iC=(()=>{class t{constructor(s,l,f){this._ngZone=s,this.registry=l,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,FI||(function sC(t){FI=t}(f),f.addToWindow(l)),this._watchAngularEvents(),s.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{po.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;0!==this._callbacks.length;){let s=this._callbacks.pop();clearTimeout(s.timeoutId),s.doneCb(this._didWork)}this._didWork=!1});else{let s=this.getPendingTasks();this._callbacks=this._callbacks.filter(l=>!l.updateCb||!l.updateCb(s)||(clearTimeout(l.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(s=>({source:s.source,creationLocation:s.creationLocation,data:s.data})):[]}addCallback(s,l,f){let _=-1;l&&l>0&&(_=setTimeout(()=>{this._callbacks=this._callbacks.filter(b=>b.timeoutId!==_),s(this._didWork,this.getPendingTasks())},l)),this._callbacks.push({doneCb:s,timeoutId:_,updateCb:f})}whenStable(s,l,f){if(f&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(s,l,f),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(s){this.registry.registerApplication(s,this)}unregisterApplication(s){this.registry.unregisterApplication(s)}findProviders(s,l,f){return[]}static#e=this.\u0275fac=function(l){return new(l||t)(zt(po),zt(WT),zt(zT))};static#t=this.\u0275prov=Zt({token:t,factory:t.\u0275fac})}return t})(),WT=(()=>{class t{constructor(){this._applications=new Map}registerApplication(s,l){this._applications.set(s,l)}unregisterApplication(s){this._applications.delete(s)}unregisterAllApplications(){this._applications.clear()}getTestability(s){return this._applications.get(s)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(s,l=!0){return FI?.findTestabilityInTree(this,s,l)??null}static#e=this.\u0275fac=function(l){return new(l||t)};static#t=this.\u0275prov=Zt({token:t,factory:t.\u0275fac,providedIn:"platform"})}return t})(),Rg=null;const qT=new en("AllowMultipleToken"),LI=new en("PlatformDestroyListeners"),VI=new en("appBootstrapListener");class lC{constructor(r,s){this.name=r,this.token=s}}function ZT(t,r,s=[]){const l=`Platform: ${r}`,f=new en(l);return(_=[])=>{let b=BI();if(!b||b.injector.get(qT,!1)){const N=[...s,..._,{provide:f,useValue:!0}];t?t(N):function uC(t){if(Rg&&!Rg.get(qT,!1))throw new me(400,!1);(function KT(){!function Cc(t){uo=t}(()=>{throw new me(600,!1)})})(),Rg=t;const r=t.get(JT);(function YT(t){t.get(Lf,null)?.forEach(s=>s())})(t)}(function QT(t=[],r){return xu.create({name:r,providers:[{provide:Zg,useValue:"platform"},{provide:LI,useValue:new Set([()=>Rg=null])},...t]})}(N,l))}return function dC(t){const r=BI();if(!r)throw new me(401,!1);return r}()}}function BI(){return Rg?.get(JT)??null}let JT=(()=>{class t{constructor(s){this._injector=s,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(s,l){const f=function hC(t="zone.js",r){return"noop"===t?new by:"zone.js"===t?new po(r):t}(l?.ngZone,function XT(t){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:t?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:t?.runCoalescing??!1}}({eventCoalescing:l?.ngZoneEventCoalescing,runCoalescing:l?.ngZoneRunCoalescing}));return f.run(()=>{const _=function bw(t,r,s){return new yI(t,r,s)}(s.moduleType,this.injector,function ib(t){return[{provide:po,useFactory:t},{provide:Mf,multi:!0,useFactory:()=>{const r=Xt(pC,{optional:!0});return()=>r.initialize()}},{provide:rb,useFactory:fC},{provide:d_,useFactory:eg}]}(()=>f)),b=_.injector.get(mc,null);return f.runOutsideAngular(()=>{const N=f.onError.subscribe({next:F=>{b.handleError(F)}});_.onDestroy(()=>{C0(this._modules,_),N.unsubscribe()})}),function eb(t,r,s){try{const l=s();return jy(l)?l.catch(f=>{throw r.runOutsideAngular(()=>t.handleError(f)),f}):l}catch(l){throw r.runOutsideAngular(()=>t.handleError(l)),l}}(b,f,()=>{const N=_.injector.get(MI);return N.runInitializers(),N.donePromise.then(()=>(uE(_.injector.get(w0,K_)||K_),this._moduleDoBootstrap(_),_))})})}bootstrapModule(s,l=[]){const f=tb({},l);return function oC(t,r,s){const l=new vI(s);return Promise.resolve(l)}(0,0,s).then(_=>this.bootstrapModuleFactory(_,f))}_moduleDoBootstrap(s){const l=s.injector.get(Q_);if(s._bootstrapComponents.length>0)s._bootstrapComponents.forEach(f=>l.bootstrap(f));else{if(!s.instance.ngDoBootstrap)throw new me(-403,!1);s.instance.ngDoBootstrap(l)}this._modules.push(s)}onDestroy(s){this._destroyListeners.push(s)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new me(404,!1);this._modules.slice().forEach(l=>l.destroy()),this._destroyListeners.forEach(l=>l());const s=this._injector.get(LI,null);s&&(s.forEach(l=>l()),s.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}static#e=this.\u0275fac=function(l){return new(l||t)(zt(xu))};static#t=this.\u0275prov=Zt({token:t,factory:t.\u0275fac,providedIn:"platform"})}return t})();function tb(t,r){return Array.isArray(r)?r.reduce(tb,t):{...t,...r}}let Q_=(()=>{class t{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=Xt(rb),this.zoneIsStable=Xt(d_),this.componentTypes=[],this.components=[],this.isStable=Xt(UT).hasPendingTasks.pipe((0,T.w)(s=>s?(0,Te.of)(!1):this.zoneIsStable),(0,qe.x)(),(0,ke.B)()),this._injector=Xt(uc)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(s,l){const f=s instanceof rm;if(!this._injector.get(MI).done)throw!f&&es(s),new me(405,!1);let b;b=f?s:this._injector.get(im).resolveComponentFactory(s),this.componentTypes.push(b.componentType);const N=function aC(t){return t.isBoundToModule}(b)?void 0:this._injector.get(Um),z=b.create(xu.NULL,[],l||b.selector,N),ne=z.location.nativeElement,ge=z.injector.get($T,null);return ge?.registerApplication(ne),z.onDestroy(()=>{this.detachView(z.hostView),C0(this.components,z),ge?.unregisterApplication(ne)}),this._loadComponent(z),z}tick(){if(this._runningTick)throw new me(101,!1);try{this._runningTick=!0;for(let s of this._views)s.detectChanges()}catch(s){this.internalErrorHandler(s)}finally{this._runningTick=!1}}attachView(s){const l=s;this._views.push(l),l.attachToAppRef(this)}detachView(s){const l=s;C0(this._views,l),l.detachFromAppRef()}_loadComponent(s){this.attachView(s.hostView),this.tick(),this.components.push(s);const l=this._injector.get(VI,[]);l.push(...this._bootstrapListeners),l.forEach(f=>f(s))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(s=>s()),this._views.slice().forEach(s=>s.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(s){return this._destroyListeners.push(s),()=>C0(this._destroyListeners,s)}destroy(){if(this._destroyed)throw new me(406,!1);const s=this._injector;s.destroy&&!s.destroyed&&s.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static#e=this.\u0275fac=function(l){return new(l||t)};static#t=this.\u0275prov=Zt({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function C0(t,r){const s=t.indexOf(r);s>-1&&t.splice(s,1)}const rb=new en("",{providedIn:"root",factory:()=>Xt(mc).handleError.bind(void 0)});function fC(){const t=Xt(po),r=Xt(mc);return s=>t.runOutsideAngular(()=>r.handleError(s))}let pC=(()=>{class t{constructor(){this.zone=Xt(po),this.applicationRef=Xt(Q_)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static#e=this.\u0275fac=function(l){return new(l||t)};static#t=this.\u0275prov=Zt({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function mC(){return!1}let _C=(()=>{class t{static#e=this.__NG_ELEMENT_ID__=yC}return t})();function yC(t){return function vC(t,r,s){if(qs(t)&&!s){const l=Yr(t.index,r);return new Zh(l,l)}return 47&t.type?new Zh(r[fi],r):null}(ji(),Dt(),16==(16&t))}class lb{constructor(){}supports(r){return b_(r)}create(r){return new DC(r)}}const wC=(t,r)=>r;class DC{constructor(r){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=r||wC}forEachItem(r){let s;for(s=this._itHead;null!==s;s=s._next)r(s)}forEachOperation(r){let s=this._itHead,l=this._removalsHead,f=0,_=null;for(;s||l;){const b=!l||s&&s.currentIndex<cb(l,f,_)?s:l,N=cb(b,f,_),F=b.currentIndex;if(b===l)f--,l=l._nextRemoved;else if(s=s._next,null==b.previousIndex)f++;else{_||(_=[]);const z=N-f,ne=F-f;if(z!=ne){for(let Be=0;Be<z;Be++){const Ye=Be<_.length?_[Be]:_[Be]=0,yt=Ye+Be;ne<=yt&&yt<z&&(_[Be]=Ye+1)}_[b.previousIndex]=ne-z}}N!==F&&r(b,N,F)}}forEachPreviousItem(r){let s;for(s=this._previousItHead;null!==s;s=s._nextPrevious)r(s)}forEachAddedItem(r){let s;for(s=this._additionsHead;null!==s;s=s._nextAdded)r(s)}forEachMovedItem(r){let s;for(s=this._movesHead;null!==s;s=s._nextMoved)r(s)}forEachRemovedItem(r){let s;for(s=this._removalsHead;null!==s;s=s._nextRemoved)r(s)}forEachIdentityChange(r){let s;for(s=this._identityChangesHead;null!==s;s=s._nextIdentityChange)r(s)}diff(r){if(null==r&&(r=[]),!b_(r))throw new me(900,!1);return this.check(r)?this:null}onDestroy(){}check(r){this._reset();let f,_,b,s=this._itHead,l=!1;if(Array.isArray(r)){this.length=r.length;for(let N=0;N<this.length;N++)_=r[N],b=this._trackByFn(N,_),null!==s&&Object.is(s.trackById,b)?(l&&(s=this._verifyReinsertion(s,_,b,N)),Object.is(s.item,_)||this._addIdentityChange(s,_)):(s=this._mismatch(s,_,b,N),l=!0),s=s._next}else f=0,function lh(t,r){if(Array.isArray(t))for(let s=0;s<t.length;s++)r(t[s]);else{const s=t[Symbol.iterator]();let l;for(;!(l=s.next()).done;)r(l.value)}}(r,N=>{b=this._trackByFn(f,N),null!==s&&Object.is(s.trackById,b)?(l&&(s=this._verifyReinsertion(s,N,b,f)),Object.is(s.item,N)||this._addIdentityChange(s,N)):(s=this._mismatch(s,N,b,f),l=!0),s=s._next,f++}),this.length=f;return this._truncate(s),this.collection=r,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let r;for(r=this._previousItHead=this._itHead;null!==r;r=r._next)r._nextPrevious=r._next;for(r=this._additionsHead;null!==r;r=r._nextAdded)r.previousIndex=r.currentIndex;for(this._additionsHead=this._additionsTail=null,r=this._movesHead;null!==r;r=r._nextMoved)r.previousIndex=r.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(r,s,l,f){let _;return null===r?_=this._itTail:(_=r._prev,this._remove(r)),null!==(r=null===this._unlinkedRecords?null:this._unlinkedRecords.get(l,null))?(Object.is(r.item,s)||this._addIdentityChange(r,s),this._reinsertAfter(r,_,f)):null!==(r=null===this._linkedRecords?null:this._linkedRecords.get(l,f))?(Object.is(r.item,s)||this._addIdentityChange(r,s),this._moveAfter(r,_,f)):r=this._addAfter(new CC(s,l),_,f),r}_verifyReinsertion(r,s,l,f){let _=null===this._unlinkedRecords?null:this._unlinkedRecords.get(l,null);return null!==_?r=this._reinsertAfter(_,r._prev,f):r.currentIndex!=f&&(r.currentIndex=f,this._addToMoves(r,f)),r}_truncate(r){for(;null!==r;){const s=r._next;this._addToRemovals(this._unlink(r)),r=s}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(r,s,l){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(r);const f=r._prevRemoved,_=r._nextRemoved;return null===f?this._removalsHead=_:f._nextRemoved=_,null===_?this._removalsTail=f:_._prevRemoved=f,this._insertAfter(r,s,l),this._addToMoves(r,l),r}_moveAfter(r,s,l){return this._unlink(r),this._insertAfter(r,s,l),this._addToMoves(r,l),r}_addAfter(r,s,l){return this._insertAfter(r,s,l),this._additionsTail=null===this._additionsTail?this._additionsHead=r:this._additionsTail._nextAdded=r,r}_insertAfter(r,s,l){const f=null===s?this._itHead:s._next;return r._next=f,r._prev=s,null===f?this._itTail=r:f._prev=r,null===s?this._itHead=r:s._next=r,null===this._linkedRecords&&(this._linkedRecords=new ub),this._linkedRecords.put(r),r.currentIndex=l,r}_remove(r){return this._addToRemovals(this._unlink(r))}_unlink(r){null!==this._linkedRecords&&this._linkedRecords.remove(r);const s=r._prev,l=r._next;return null===s?this._itHead=l:s._next=l,null===l?this._itTail=s:l._prev=s,r}_addToMoves(r,s){return r.previousIndex===s||(this._movesTail=null===this._movesTail?this._movesHead=r:this._movesTail._nextMoved=r),r}_addToRemovals(r){return null===this._unlinkedRecords&&(this._unlinkedRecords=new ub),this._unlinkedRecords.put(r),r.currentIndex=null,r._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=r,r._prevRemoved=null):(r._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=r),r}_addIdentityChange(r,s){return r.item=s,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=r:this._identityChangesTail._nextIdentityChange=r,r}}class CC{constructor(r,s){this.item=r,this.trackById=s,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class AC{constructor(){this._head=null,this._tail=null}add(r){null===this._head?(this._head=this._tail=r,r._nextDup=null,r._prevDup=null):(this._tail._nextDup=r,r._prevDup=this._tail,r._nextDup=null,this._tail=r)}get(r,s){let l;for(l=this._head;null!==l;l=l._nextDup)if((null===s||s<=l.currentIndex)&&Object.is(l.trackById,r))return l;return null}remove(r){const s=r._prevDup,l=r._nextDup;return null===s?this._head=l:s._nextDup=l,null===l?this._tail=s:l._prevDup=s,null===this._head}}class ub{constructor(){this.map=new Map}put(r){const s=r.trackById;let l=this.map.get(s);l||(l=new AC,this.map.set(s,l)),l.add(r)}get(r,s){const f=this.map.get(r);return f?f.get(r,s):null}remove(r){const s=r.trackById;return this.map.get(s).remove(r)&&this.map.delete(s),r}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function cb(t,r,s){const l=t.previousIndex;if(null===l)return l;let f=0;return s&&l<s.length&&(f=s[l]),l+r+f}class db{constructor(){}supports(r){return r instanceof Map||Mv(r)}create(){return new SC}}class SC{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(r){let s;for(s=this._mapHead;null!==s;s=s._next)r(s)}forEachPreviousItem(r){let s;for(s=this._previousMapHead;null!==s;s=s._nextPrevious)r(s)}forEachChangedItem(r){let s;for(s=this._changesHead;null!==s;s=s._nextChanged)r(s)}forEachAddedItem(r){let s;for(s=this._additionsHead;null!==s;s=s._nextAdded)r(s)}forEachRemovedItem(r){let s;for(s=this._removalsHead;null!==s;s=s._nextRemoved)r(s)}diff(r){if(r){if(!(r instanceof Map||Mv(r)))throw new me(900,!1)}else r=new Map;return this.check(r)?this:null}onDestroy(){}check(r){this._reset();let s=this._mapHead;if(this._appendAfter=null,this._forEach(r,(l,f)=>{if(s&&s.key===f)this._maybeAddToChanges(s,l),this._appendAfter=s,s=s._next;else{const _=this._getOrCreateRecordForKey(f,l);s=this._insertBeforeOrAppend(s,_)}}),s){s._prev&&(s._prev._next=null),this._removalsHead=s;for(let l=s;null!==l;l=l._nextRemoved)l===this._mapHead&&(this._mapHead=null),this._records.delete(l.key),l._nextRemoved=l._next,l.previousValue=l.currentValue,l.currentValue=null,l._prev=null,l._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(r,s){if(r){const l=r._prev;return s._next=r,s._prev=l,r._prev=s,l&&(l._next=s),r===this._mapHead&&(this._mapHead=s),this._appendAfter=r,r}return this._appendAfter?(this._appendAfter._next=s,s._prev=this._appendAfter):this._mapHead=s,this._appendAfter=s,null}_getOrCreateRecordForKey(r,s){if(this._records.has(r)){const f=this._records.get(r);this._maybeAddToChanges(f,s);const _=f._prev,b=f._next;return _&&(_._next=b),b&&(b._prev=_),f._next=null,f._prev=null,f}const l=new RC(r);return this._records.set(r,l),l.currentValue=s,this._addToAdditions(l),l}_reset(){if(this.isDirty){let r;for(this._previousMapHead=this._mapHead,r=this._previousMapHead;null!==r;r=r._next)r._nextPrevious=r._next;for(r=this._changesHead;null!==r;r=r._nextChanged)r.previousValue=r.currentValue;for(r=this._additionsHead;null!=r;r=r._nextAdded)r.previousValue=r.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(r,s){Object.is(s,r.currentValue)||(r.previousValue=r.currentValue,r.currentValue=s,this._addToChanges(r))}_addToAdditions(r){null===this._additionsHead?this._additionsHead=this._additionsTail=r:(this._additionsTail._nextAdded=r,this._additionsTail=r)}_addToChanges(r){null===this._changesHead?this._changesHead=this._changesTail=r:(this._changesTail._nextChanged=r,this._changesTail=r)}_forEach(r,s){r instanceof Map?r.forEach(s):Object.keys(r).forEach(l=>s(r[l],l))}}class RC{constructor(r){this.key=r,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function hb(){return new $I([new lb])}let $I=(()=>{class t{static#e=this.\u0275prov=Zt({token:t,providedIn:"root",factory:hb});constructor(s){this.factories=s}static create(s,l){if(null!=l){const f=l.factories.slice();s=s.concat(f)}return new t(s)}static extend(s){return{provide:t,useFactory:l=>t.create(s,l||hb()),deps:[[t,new bu,new Ha]]}}find(s){const l=this.factories.find(f=>f.supports(s));if(null!=l)return l;throw new me(901,!1)}}return t})();function fb(){return new zI([new db])}let zI=(()=>{class t{static#e=this.\u0275prov=Zt({token:t,providedIn:"root",factory:fb});constructor(s){this.factories=s}static create(s,l){if(l){const f=l.factories.slice();s=s.concat(f)}return new t(s)}static extend(s){return{provide:t,useFactory:l=>t.create(s,l||fb()),deps:[[t,new bu,new Ha]]}}find(s){const l=this.factories.find(f=>f.supports(s));if(l)return l;throw new me(901,!1)}}return t})();const OC=ZT(null,"core",[]);let MC=(()=>{class t{constructor(s){}static#e=this.\u0275fac=function(l){return new(l||t)(zt(Q_))};static#t=this.\u0275mod=zs({type:t});static#n=this.\u0275inj=An({})}return t})();function $C(t){return"boolean"==typeof t?t:null!=t&&"false"!==t}function WC(t,r){const s=Kn(t),l=r.elementInjector||Lh();return new go(s).create(l,r.projectableNodes,r.hostElement,r.environmentInjector)}function qC(t){const r=Kn(t);if(!r)return null;const s=new go(r);return{get selector(){return s.selector},get type(){return s.componentType},get inputs(){return s.inputs},get outputs(){return s.outputs},get ngContentSelectors(){return s.ngContentSelectors},get isStandalone(){return r.standalone},get isSignal(){return r.signals}}}},7213:(Yt,Je,$)=>{$.d(Je,{zQ:()=>Pr,rT:()=>Ot,f7:()=>Qn,L6:()=>ft,_Q:()=>de,lh:()=>wt,Qv:()=>ot,nw:()=>On}),$(2872);var _e=$(6814),le=$(5879),Oe=$(8326),Ne=$(7217),Te=$(8645),ke=$(2096),T=$(5592),qe=$(2459),ye=$(3019),Ie=$(3093),Ve=$(4664),ht=$(7398),st=$(4552);class Et extends Te.x{constructor(Bt=1/0,be=1/0,Se=st.l){super(),this._bufferSize=Bt,this._windowTime=be,this._timestampProvider=Se,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=be===1/0,this._bufferSize=Math.max(1,Bt),this._windowTime=Math.max(1,be)}next(Bt){const{isStopped:be,_buffer:Se,_infiniteTimeWindow:Ke,_timestampProvider:Fe,_windowTime:Ue}=this;be||(Se.push(Bt),!Ke&&Se.push(Fe.now()+Ue)),this._trimBuffer(),super.next(Bt)}_subscribe(Bt){this._throwIfClosed(),this._trimBuffer();const be=this._innerSubscribe(Bt),{_infiniteTimeWindow:Se,_buffer:Ke}=this,Fe=Ke.slice();for(let Ue=0;Ue<Fe.length&&!Bt.closed;Ue+=Se?1:2)Bt.next(Fe[Ue]);return this._checkFinalizedStatuses(Bt),be}_trimBuffer(){const{_bufferSize:Bt,_timestampProvider:be,_buffer:Se,_infiniteTimeWindow:Ke}=this,Fe=(Ke?1:2)*Bt;if(Bt<1/0&&Fe<Se.length&&Se.splice(0,Se.length-Fe),!Ke){const Ue=be.now();let Xe=0;for(let Ft=1;Ft<Se.length&&Se[Ft]<=Ue;Ft+=2)Xe=Ft;Xe&&Se.splice(0,Xe+1)}}}var mt=$(3020);function Ct(tn,Bt,be){let Se,Ke=!1;return tn&&"object"==typeof tn?({bufferSize:Se=1/0,windowTime:Bt=1/0,refCount:Ke=!1,scheduler:be}=tn):Se=tn??1/0,(0,mt.B)({connector:()=>new Et(Se,Bt,be),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:Ke})}var bt=$(1374),jt=$(4674);function Re(tn,Bt){return(0,jt.m)(Bt)?(0,Ve.w)(()=>tn,Bt):(0,Ve.w)(()=>tn)}var me=$(5137),He=$(2181);$(7142);const ot=new le.OlP("angularfire2.auth.use-emulator"),ft=new le.OlP("angularfire2.auth.settings"),de=new le.OlP("angularfire2.auth.tenant-id"),Ot=new le.OlP("angularfire2.auth.langugage-code"),wt=new le.OlP("angularfire2.auth.use-device-language"),Qn=new le.OlP("angularfire.auth.persistence"),On=(tn,Bt,be,Se,Ke,Fe,Ue,Xe)=>(0,Ne.cc)(`${tn.name}.auth`,"AngularFireAuth",tn.name,()=>{const Ft=Bt.runOutsideAngular(()=>tn.auth());if(be&&Ft.useEmulator(...be),Se&&(Ft.tenantId=Se),Ft.languageCode=Ke,Fe&&Ft.useDeviceLanguage(),Ue)for(const[St,cr]of Object.entries(Ue))Ft.settings[St]=cr;return Xe&&Ft.setPersistence(Xe),Ft},[be,Se,Ke,Fe,Ue,Xe]);let Pr=(()=>{class tn{authState;idToken;user;idTokenResult;credential;constructor(be,Se,Ke,Fe,Ue,Xe,Ft,St,cr,Ut,qn,Zt){const Ln=new Te.x,An=(0,ke.of)(void 0).pipe((0,Ie.Q)(Ue.outsideAngular),(0,Ve.w)(()=>Fe.runOutsideAngular(()=>Promise.resolve().then($.bind($,2872)))),(0,ht.U)(()=>(0,Ne.on)(be,Fe,Se)),(0,ht.U)(Gn=>On(Gn,Fe,Xe,St,cr,Ut,Ft,qn)),Ct({bufferSize:1,refCount:!1}));if((0,_e.PM)(Ke))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=(0,ke.of)(null);else{An.pipe((0,bt.P)()).subscribe();const Gn=An.pipe((0,Ve.w)(ze=>ze.getRedirectResult().then(lt=>lt,()=>null)),Oe.iC,Ct({bufferSize:1,refCount:!1})),Ee=An.pipe((0,Ve.w)(ze=>new T.y(lt=>({unsubscribe:Fe.runOutsideAngular(()=>ze.onAuthStateChanged(pt=>lt.next(pt),pt=>lt.error(pt),()=>lt.complete()))})))),xe=An.pipe((0,Ve.w)(ze=>new T.y(lt=>({unsubscribe:Fe.runOutsideAngular(()=>ze.onIdTokenChanged(pt=>lt.next(pt),pt=>lt.error(pt),()=>lt.complete()))}))));this.authState=Gn.pipe(Re(Ee),(0,me.R)(Ue.outsideAngular),(0,Ie.Q)(Ue.insideAngular)),this.user=Gn.pipe(Re(xe),(0,me.R)(Ue.outsideAngular),(0,Ie.Q)(Ue.insideAngular)),this.idToken=this.user.pipe((0,Ve.w)(ze=>ze?(0,qe.D)(ze.getIdToken()):(0,ke.of)(null))),this.idTokenResult=this.user.pipe((0,Ve.w)(ze=>ze?(0,qe.D)(ze.getIdTokenResult()):(0,ke.of)(null))),this.credential=(0,ye.T)(Gn,Ln,this.authState.pipe((0,He.h)(ze=>!ze))).pipe((0,ht.U)(ze=>ze?.user?ze:null),(0,me.R)(Ue.outsideAngular),(0,Ie.Q)(Ue.insideAngular))}return(0,Ne.pX)(this,An,Fe,{spy:{apply:(Gn,Ee,xe)=>{(Gn.startsWith("signIn")||Gn.startsWith("createUser"))&&xe.then(ze=>Ln.next(ze))}}})}static \u0275fac=function(Se){return new(Se||tn)(le.LFG(Ne.Dh),le.LFG(Ne.xv,8),le.LFG(le.Lbi),le.LFG(le.R0b),le.LFG(Oe.HU),le.LFG(ot,8),le.LFG(ft,8),le.LFG(de,8),le.LFG(Ot,8),le.LFG(wt,8),le.LFG(Qn,8),le.LFG(Oe.Rf,8))};static \u0275prov=le.Yz7({token:tn,factory:tn.\u0275fac,providedIn:"any"})}return tn})()},9027:(Yt,Je,$)=>{$.d(Je,{ST:()=>p0});var E=$(6814),_e=$(5879),le=$(8326),Oe=$(7217),Ne=$(7213),Te=$(6321),ke=$(5592),T=$(2459),qe=$(2096),ye=$(7921),Ie=$(9360),Ve=$(8251);function ht(){return(0,Ie.e)((i,e)=>{let n,o=!1;i.subscribe((0,Ve.x)(e,u=>{const p=n;n=u,o&&e.next([p,u]),o=!0}))})}var de,st=$(7398),Et=$(6699),mt=$(3997),Ct=$(2181),jt=($(2872),$(3106)),Re=$(5861),me=$(534),He=$(4537),Pe=$(7879),$e=$(9058),ot=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},ft={},Ot=Ot||{},wt=ot||self;function Qn(i){var e=typeof i;return"array"==(e="object"!=e?e:i?Array.isArray(i)?"array":e:"null")||"object"==e&&"number"==typeof i.length}function On(i){var e=typeof i;return"object"==e&&null!=i||"function"==e}var mr="closure_uid_"+(1e9*Math.random()>>>0),tn=0;function Bt(i,e,n){return i.call.apply(i.bind,arguments)}function be(i,e,n){if(!i)throw Error();if(2<arguments.length){var o=Array.prototype.slice.call(arguments,2);return function(){var u=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(u,o),i.apply(e,u)}}return function(){return i.apply(e,arguments)}}function Se(i,e,n){return(Se=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Bt:be).apply(null,arguments)}function Ke(i,e){var n=Array.prototype.slice.call(arguments,1);return function(){var o=n.slice();return o.push.apply(o,arguments),i.apply(this,o)}}function Fe(i,e){function n(){}n.prototype=e.prototype,i.$=e.prototype,i.prototype=new n,i.prototype.constructor=i,i.ac=function(o,u,p){for(var I=Array(arguments.length-2),M=2;M<arguments.length;M++)I[M-2]=arguments[M];return e.prototype[u].apply(o,I)}}function Ue(){this.s=this.s,this.o=this.o}Ue.prototype.s=!1,Ue.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),0)&&function Pr(i){Object.prototype.hasOwnProperty.call(i,mr)&&i[mr]||(i[mr]=++tn)}(this)},Ue.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const Ft=Array.prototype.indexOf?function(i,e){return Array.prototype.indexOf.call(i,e,void 0)}:function(i,e){if("string"==typeof i)return"string"!=typeof e||1!=e.length?-1:i.indexOf(e,0);for(let n=0;n<i.length;n++)if(n in i&&i[n]===e)return n;return-1};function St(i){const e=i.length;if(0<e){const n=Array(e);for(let o=0;o<e;o++)n[o]=i[o];return n}return[]}function cr(i,e){for(let n=1;n<arguments.length;n++){const o=arguments[n];if(Qn(o)){const u=i.length||0,p=o.length||0;i.length=u+p;for(let I=0;I<p;I++)i[u+I]=o[I]}else i.push(o)}}function Ut(i,e){this.type=i,this.g=this.target=e,this.defaultPrevented=!1}Ut.prototype.h=function(){this.defaultPrevented=!0};var qn=function(){if(!wt.addEventListener||!Object.defineProperty)return!1;var i=!1,e=Object.defineProperty({},"passive",{get:function(){i=!0}});try{wt.addEventListener("test",()=>{},e),wt.removeEventListener("test",()=>{},e)}catch{}return i}();function Zt(i){return/^[\s\xa0]*$/.test(i)}function Ln(){var i=wt.navigator;return i&&(i=i.userAgent)?i:""}function An(i){return-1!=Ln().indexOf(i)}function Gn(i){return Gn[" "](i),i}Gn[" "]=function(){};var Mt,i,xe=An("Opera"),ze=An("Trident")||An("MSIE"),lt=An("Edge"),pt=lt||ze,Lt=An("Gecko")&&!(-1!=Ln().toLowerCase().indexOf("webkit")&&!An("Edge"))&&!(An("Trident")||An("MSIE"))&&!An("Edge"),Un=-1!=Ln().toLowerCase().indexOf("webkit")&&!An("Edge");function $n(){var i=wt.document;return i?i.documentMode:void 0}e:{var an="",mn=(i=Ln(),Lt?/rv:([^\);]+)(\)|;)/.exec(i):lt?/Edge\/([\d\.]+)/.exec(i):ze?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(i):Un?/WebKit\/(\S+)/.exec(i):xe?/(?:Version)[ \/]?(\S+)/.exec(i):void 0);if(mn&&(an=mn?mn[1]:""),ze){var ir=$n();if(null!=ir&&ir>parseFloat(an)){Mt=String(ir);break e}}Mt=an}var jn=wt.document&&ze&&($n()||parseInt(Mt,10))||void 0;function Gr(i,e){if(Ut.call(this,i?i.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,i){var n=this.type=i.type,o=i.changedTouches&&i.changedTouches.length?i.changedTouches[0]:null;if(this.target=i.target||i.srcElement,this.g=e,e=i.relatedTarget){if(Lt){e:{try{Gn(e.nodeName);var u=!0;break e}catch{}u=!1}u||(e=null)}}else"mouseover"==n?e=i.fromElement:"mouseout"==n&&(e=i.toElement);this.relatedTarget=e,o?(this.clientX=void 0!==o.clientX?o.clientX:o.pageX,this.clientY=void 0!==o.clientY?o.clientY:o.pageY,this.screenX=o.screenX||0,this.screenY=o.screenY||0):(this.clientX=void 0!==i.clientX?i.clientX:i.pageX,this.clientY=void 0!==i.clientY?i.clientY:i.pageY,this.screenX=i.screenX||0,this.screenY=i.screenY||0),this.button=i.button,this.key=i.key||"",this.ctrlKey=i.ctrlKey,this.altKey=i.altKey,this.shiftKey=i.shiftKey,this.metaKey=i.metaKey,this.pointerId=i.pointerId||0,this.pointerType="string"==typeof i.pointerType?i.pointerType:Kr[i.pointerType]||"",this.state=i.state,this.i=i,i.defaultPrevented&&Gr.$.h.call(this)}}Fe(Gr,Ut);var Kr={2:"touch",3:"pen",4:"mouse"};Gr.prototype.h=function(){Gr.$.h.call(this);var i=this.i;i.preventDefault?i.preventDefault():i.returnValue=!1};var en="closure_listenable_"+(1e6*Math.random()|0),$i=0;function wn(i,e,n,o,u){this.listener=i,this.proxy=null,this.src=e,this.type=n,this.capture=!!o,this.la=u,this.key=++$i,this.fa=this.ia=!1}function Dn(i){i.fa=!0,i.listener=null,i.proxy=null,i.src=null,i.la=null}function ki(i,e,n){for(const o in i)e.call(n,i[o],o,i)}function Xi(i){const e={};for(const n in i)e[n]=i[n];return e}const _o="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ur(i,e){let n,o;for(let u=1;u<arguments.length;u++){for(n in o=arguments[u],o)i[n]=o[n];for(let p=0;p<_o.length;p++)n=_o[p],Object.prototype.hasOwnProperty.call(o,n)&&(i[n]=o[n])}}function Ti(i){this.src=i,this.g={},this.h=0}function hs(i,e){var n=e.type;if(n in i.g){var p,o=i.g[n],u=Ft(o,e);(p=0<=u)&&Array.prototype.splice.call(o,u,1),p&&(Dn(e),0==i.g[n].length&&(delete i.g[n],i.h--))}}function Fi(i,e,n,o){for(var u=0;u<i.length;++u){var p=i[u];if(!p.fa&&p.listener==e&&p.capture==!!n&&p.la==o)return u}return-1}Ti.prototype.add=function(i,e,n,o,u){var p=i.toString();(i=this.g[p])||(i=this.g[p]=[],this.h++);var I=Fi(i,e,o,u);return-1<I?(e=i[I],n||(e.ia=!1)):((e=new wn(e,this.src,p,!!o,u)).ia=n,i.push(e)),e};var Oi="closure_lm_"+(1e6*Math.random()|0),Li={};function Vi(i,e,n,o,u){if(o&&o.once)return se(i,e,n,o,u);if(Array.isArray(e)){for(var p=0;p<e.length;p++)Vi(i,e[p],n,o,u);return null}return n=gn(n),i&&i[en]?i.O(e,n,On(o)?!!o.capture:!!o,u):we(i,e,n,!1,o,u)}function we(i,e,n,o,u,p){if(!e)throw Error("Invalid event type");var I=On(u)?!!u.capture:!!u,M=Pt(i);if(M||(i[Oi]=M=new Ti(i)),(n=M.add(e,n,o,I,p)).proxy)return n;if(o=function ie(){const e=_t;return function i(n){return e.call(i.src,i.listener,n)}}(),n.proxy=o,o.src=i,o.listener=n,i.addEventListener)qn||(u=I),void 0===u&&(u=!1),i.addEventListener(e.toString(),o,u);else if(i.attachEvent)i.attachEvent(Le(e.toString()),o);else{if(!i.addListener||!i.removeListener)throw Error("addEventListener and attachEvent are unavailable.");i.addListener(o)}return n}function se(i,e,n,o,u){if(Array.isArray(e)){for(var p=0;p<e.length;p++)se(i,e[p],n,o,u);return null}return n=gn(n),i&&i[en]?i.P(e,n,On(o)?!!o.capture:!!o,u):we(i,e,n,!0,o,u)}function re(i,e,n,o,u){if(Array.isArray(e))for(var p=0;p<e.length;p++)re(i,e[p],n,o,u);else o=On(o)?!!o.capture:!!o,n=gn(n),i&&i[en]?(i=i.i,(e=String(e).toString())in i.g&&-1<(n=Fi(p=i.g[e],n,o,u))&&(Dn(p[n]),Array.prototype.splice.call(p,n,1),0==p.length&&(delete i.g[e],i.h--))):i&&(i=Pt(i))&&(e=i.g[e.toString()],i=-1,e&&(i=Fi(e,n,o,u)),(n=-1<i?e[i]:null)&&ue(n))}function ue(i){if("number"!=typeof i&&i&&!i.fa){var e=i.src;if(e&&e[en])hs(e.i,i);else{var n=i.type,o=i.proxy;e.removeEventListener?e.removeEventListener(n,o,i.capture):e.detachEvent?e.detachEvent(Le(n),o):e.addListener&&e.removeListener&&e.removeListener(o),(n=Pt(e))?(hs(n,i),0==n.h&&(n.src=null,e[Oi]=null)):Dn(i)}}}function Le(i){return i in Li?Li[i]:Li[i]="on"+i}function _t(i,e){if(i.fa)i=!0;else{e=new Gr(e,this);var n=i.listener,o=i.la||i.src;i.ia&&ue(i),i=n.call(o,e)}return i}function Pt(i){return(i=i[Oi])instanceof Ti?i:null}var zt="__closure_events_fn_"+(1e9*Math.random()>>>0);function gn(i){return"function"==typeof i?i:(i[zt]||(i[zt]=function(e){return i.handleEvent(e)}),i[zt])}function Xt(){Ue.call(this),this.i=new Ti(this),this.S=this,this.J=null}function hn(i,e){var n,o=i.J;if(o)for(n=[];o;o=o.J)n.push(o);if(i=i.S,o=e.type||e,"string"==typeof e)e=new Ut(e,i);else if(e instanceof Ut)e.target=e.target||i;else{var u=e;ur(e=new Ut(o,i),u)}if(u=!0,n)for(var p=n.length-1;0<=p;p--){var I=e.g=n[p];u=Vr(I,o,!0,e)&&u}if(u=Vr(I=e.g=i,o,!0,e)&&u,u=Vr(I,o,!1,e)&&u,n)for(p=0;p<n.length;p++)u=Vr(I=e.g=n[p],o,!1,e)&&u}function Vr(i,e,n,o){if(!(e=i.i.g[String(e)]))return!0;e=e.concat();for(var u=!0,p=0;p<e.length;++p){var I=e[p];if(I&&!I.fa&&I.capture==n){var M=I.listener,U=I.la||I.src;I.ia&&hs(i.i,I),u=!1!==M.call(U,o)&&u}}return u&&!o.defaultPrevented}Fe(Xt,Ue),Xt.prototype[en]=!0,Xt.prototype.removeEventListener=function(i,e,n,o){re(this,i,e,n,o)},Xt.prototype.N=function(){if(Xt.$.N.call(this),this.i){var e,i=this.i;for(e in i.g){for(var n=i.g[e],o=0;o<n.length;o++)Dn(n[o]);delete i.g[e],i.h--}}this.J=null},Xt.prototype.O=function(i,e,n,o){return this.i.add(String(i),e,!1,n,o)},Xt.prototype.P=function(i,e,n,o){return this.i.add(String(i),e,!0,n,o)};var oi=wt.JSON.stringify;function Js(){var i=ai;let e=null;return i.g&&(e=i.g,i.g=i.g.next,i.g||(i.h=null),e.next=null),e}var Ge=new class Gs{constructor(e,n){this.i=e,this.j=n,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}(()=>new vt,i=>i.reset());class vt{constructor(){this.next=this.g=this.h=null}set(e,n){this.h=e,this.g=n,this.next=null}reset(){this.next=this.g=this.h=null}}function sn(i){var e=1;i=i.split(":");const n=[];for(;0<e&&i.length;)n.push(i.shift()),e--;return i.length&&n.push(i.join(":")),n}function In(i){wt.setTimeout(()=>{throw i},0)}let qt,Xn=!1,ai=new class it{constructor(){this.h=this.g=null}add(e,n){const o=Ge.get();o.set(e,n),this.h?this.h.next=o:this.g=o,this.h=o}},Or=()=>{const i=wt.Promise.resolve(void 0);qt=()=>{i.then(Xs)}};var Xs=()=>{for(var i;i=Js();){try{i.h.call(i.g)}catch(n){In(n)}var e=Ge;e.j(i),100>e.h&&(e.h++,i.next=e.g,e.g=i)}Xn=!1};function Bi(i,e){Xt.call(this),this.h=i||1,this.g=e||wt,this.j=Se(this.qb,this),this.l=Date.now()}function ws(i){i.ga=!1,i.T&&(i.g.clearTimeout(i.T),i.T=null)}function Ka(i,e,n){if("function"==typeof i)n&&(i=Se(i,n));else{if(!i||"function"!=typeof i.handleEvent)throw Error("Invalid listener argument");i=Se(i.handleEvent,i)}return 2147483647<Number(e)?-1:wt.setTimeout(i,e||0)}function Qo(i){i.g=Ka(()=>{i.g=null,i.i&&(i.i=!1,Qo(i))},i.j);const e=i.h;i.h=null,i.m.apply(null,e)}Fe(Bi,Xt),(de=Bi.prototype).ga=!1,de.T=null,de.qb=function(){if(this.ga){var i=Date.now()-this.l;0<i&&i<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-i):(this.T&&(this.g.clearTimeout(this.T),this.T=null),hn(this,"tick"),this.ga&&(ws(this),this.start()))}},de.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},de.N=function(){Bi.$.N.call(this),ws(this),delete this.g};class Ya extends Ue{constructor(e,n){super(),this.m=e,this.j=n,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:Qo(this)}N(){super.N(),this.g&&(wt.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Mn(i){Ue.call(this),this.h=i,this.g={}}Fe(Mn,Ue);var Za=[];function so(i,e,n,o){Array.isArray(n)||(n&&(Za[0]=n.toString()),n=Za);for(var u=0;u<n.length;u++){var p=Vi(e,n[u],o||i.handleEvent,!1,i.h||i);if(!p)break;i.g[p.key]=p}}function $s(i){ki(i.g,function(e,n){this.g.hasOwnProperty(n)&&ue(e)},i),i.g={}}function Jo(){this.g=!0}function Xo(i,e,n,o){i.info(function(){return"XMLHTTP TEXT ("+e+"): "+function dr(i,e){if(!i.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n)for(i=0;i<n.length;i++)if(Array.isArray(n[i])){var o=n[i];if(!(2>o.length)){var u=o[1];if(Array.isArray(u)&&!(1>u.length)){var p=u[0];if("noop"!=p&&"stop"!=p&&"close"!=p)for(var I=1;I<u.length;I++)u[I]=""}}}return oi(n)}catch{return e}}(i,n)+(o?" "+o:"")})}Mn.prototype.N=function(){Mn.$.N.call(this),$s(this)},Mn.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Jo.prototype.Ea=function(){this.g=!1},Jo.prototype.info=function(){};var Er={},li=null;function $r(){return li=li||new Xt}function Ds(i){Ut.call(this,Er.Ta,i)}function zi(i){const e=$r();hn(e,new Ds(e))}function oo(i,e){Ut.call(this,Er.STAT_EVENT,i),this.stat=e}function ui(i){const e=$r();hn(e,new oo(e,i))}function fu(i,e){Ut.call(this,Er.Ua,i),this.size=e}function Wi(i,e){if("function"!=typeof i)throw Error("Fn must not be null and must be a function");return wt.setTimeout(function(){i()},e)}Er.Ta="serverreachability",Fe(Ds,Ut),Er.STAT_EVENT="statevent",Fe(oo,Ut),Er.Ua="timingevent",Fe(fu,Ut);var ta={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},Qa={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function Ja(){}function Xa(){}Ja.prototype.h=null;var Ma,zs={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function na(){Ut.call(this,"d")}function vo(){Ut.call(this,"c")}function ks(){}function Kn(i,e,n,o){this.l=i,this.j=e,this.m=n,this.W=o||1,this.U=new Mn(this),this.P=hi,this.V=new Bi(i=pt?125:void 0),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new bi}function bi(){this.i=null,this.g="",this.h=!1}Fe(na,Ut),Fe(vo,Ut),Fe(ks,Ja),ks.prototype.g=function(){return new XMLHttpRequest},ks.prototype.i=function(){return{}},Ma=new ks;var hi=45e3,es={},Cr={};function ts(i,e,n){i.L=1,i.v=Mo(yi(e)),i.s=n,i.S=!0,qi(i,null)}function qi(i,e){i.G=Date.now(),Mr(i),i.A=yi(i.v);var n=i.A,o=i.W;Array.isArray(o)||(o=[String(o)]),_a(n.i,"t",o),i.C=0,n=i.l.J,i.h=new bi,i.g=Hl(i.l,n?e:null,!i.s),0<i.O&&(i.M=new Ya(Se(i.Pa,i,i.g),i.O)),so(i.U,i.g,"readystatechange",i.nb),e=i.I?Xi(i.I):{},i.s?(i.u||(i.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",i.g.ha(i.A,i.u,i.s,e)):(i.u="GET",i.g.ha(i.A,i.u,null,e)),zi(),function yo(i,e,n,o,u,p){i.info(function(){if(i.g)if(p)for(var I="",M=p.split("&"),U=0;U<M.length;U++){var W=M[U].split("=");if(1<W.length){var ee=W[0];W=W[1];var fe=ee.split("_");I=2<=fe.length&&"type"==fe[1]?I+(ee+"=")+W+"&":I+(ee+"=redacted&")}}else I=null;else I=p;return"XMLHTTP REQ ("+o+") [attempt "+u+"]: "+e+"\n"+n+"\n"+I})}(i.j,i.u,i.A,i.m,i.W,i.s)}function _i(i){return!!i.g&&"GET"==i.u&&2!=i.L&&i.l.Ha}function Cs(i,e,n){let u,o=!0;for(;!i.J&&i.C<n.length;){if(u=As(i,n),u==Cr){4==e&&(i.o=4,ui(14),o=!1),Xo(i.j,i.m,null,"[Incomplete Response]");break}if(u==es){i.o=4,ui(15),Xo(i.j,i.m,n,"[Invalid Chunk]"),o=!1;break}Xo(i.j,i.m,u,null),Ki(i,u)}_i(i)&&u!=Cr&&u!=es&&(i.h.g="",i.C=0),4!=e||0!=n.length||i.h.h||(i.o=1,ui(16),o=!1),i.i=i.i&&o,o?0<n.length&&!i.ba&&(i.ba=!0,(e=i.l).g==i&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),Fa(e),e.M=!0,ui(11))):(Xo(i.j,i.m,n,"[Invalid Chunked Response]"),ni(i),er(i))}function As(i,e){var n=i.C,o=e.indexOf("\n",n);return-1==o?Cr:(n=Number(e.substring(n,o)),isNaN(n)?es:(o+=1)+n>e.length?Cr:(e=e.slice(o,o+n),i.C=o+n,e))}function Mr(i){i.Y=Date.now()+i.P,xt(i,i.P)}function xt(i,e){if(null!=i.B)throw Error("WatchDog timer not null");i.B=Wi(Se(i.lb,i),e)}function Cn(i){i.B&&(wt.clearTimeout(i.B),i.B=null)}function er(i){0==i.l.H||i.J||Tl(i.l,i)}function ni(i){Cn(i);var e=i.M;e&&"function"==typeof e.sa&&e.sa(),i.M=null,ws(i.V),$s(i.U),i.g&&(e=i.g,i.g=null,e.abort(),e.sa())}function Ki(i,e){try{var n=i.l;if(0!=n.H&&(n.g==i||qs(n.i,i)))if(!i.K&&qs(n.i,i)&&3==n.H){try{var o=n.Ja.g.parse(e)}catch{o=null}if(Array.isArray(o)&&3==o.length){var u=o;if(0==u[0]){e:if(!n.u){if(n.g){if(!(n.g.G+3e3<i.G))break e;lo(n),pu(n)}jl(n),ui(18)}}else n.Fa=u[1],0<n.Fa-n.V&&37500>u[2]&&n.G&&0==n.A&&!n.v&&(n.v=Wi(Se(n.ib,n),6e3));if(1>=Rs(n.i)&&n.oa){try{n.oa()}catch{}n.oa=void 0}}else jo(n,11)}else if((i.K||n.g==i)&&lo(n),!Zt(e))for(u=n.Ja.g.parse(e),e=0;e<u.length;e++){let W=u[e];if(n.V=W[0],W=W[1],2==n.H)if("c"==W[0]){n.K=W[1],n.pa=W[2];const ee=W[3];null!=ee&&(n.ra=ee,n.l.info("VER="+n.ra));const fe=W[4];null!=fe&&(n.Ga=fe,n.l.info("SVER="+n.Ga));const Me=W[5];null!=Me&&"number"==typeof Me&&0<Me&&(n.L=o=1.5*Me,n.l.info("backChannelRequestTimeoutMs_="+o)),o=n;const tt=i.g;if(tt){const Vt=tt.g?tt.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Vt){var p=o.i;p.g||-1==Vt.indexOf("spdy")&&-1==Vt.indexOf("quic")&&-1==Vt.indexOf("h2")||(p.j=p.l,p.g=new Set,p.h&&(Br(p,p.h),p.h=null))}if(o.F){const Kt=tt.g?tt.g.getResponseHeader("X-HTTP-Session-Id"):null;Kt&&(o.Da=Kt,sr(o.I,o.F,Kt))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-i.G,n.l.info("Handshake RTT: "+n.S+"ms"));var I=i;if((o=n).wa=wc(o,o.J?o.pa:null,o.Y),I.K){Ls(o.i,I);var M=I,U=o.L;U&&M.setTimeout(U),M.B&&(Cn(M),Mr(M)),o.g=I}else nl(o);0<n.j.length&&tl(n)}else"stop"!=W[0]&&"close"!=W[0]||jo(n,7);else 3==n.H&&("stop"==W[0]||"close"==W[0]?"stop"==W[0]?jo(n,7):va(n):"noop"!=W[0]&&n.h&&n.h.Aa(W),n.A=0)}zi()}catch{}}function tr(i,e){if(i.forEach&&"function"==typeof i.forEach)i.forEach(e,void 0);else if(Qn(i)||"string"==typeof i)Array.prototype.forEach.call(i,e,void 0);else for(var n=function ri(i){if(i.ta&&"function"==typeof i.ta)return i.ta();if(!i.Z||"function"!=typeof i.Z){if(typeof Map<"u"&&i instanceof Map)return Array.from(i.keys());if(!(typeof Set<"u"&&i instanceof Set)){if(Qn(i)||"string"==typeof i){var e=[];i=i.length;for(var n=0;n<i;n++)e.push(n);return e}e=[],n=0;for(const o in i)e[n++]=o;return e}}}(i),o=function Xr(i){if(i.Z&&"function"==typeof i.Z)return i.Z();if(typeof Map<"u"&&i instanceof Map||typeof Set<"u"&&i instanceof Set)return Array.from(i.values());if("string"==typeof i)return i.split("");if(Qn(i)){for(var e=[],n=i.length,o=0;o<n;o++)e.push(i[o]);return e}for(o in e=[],n=0,i)e[n++]=i[o];return e}(i),u=o.length,p=0;p<u;p++)e.call(void 0,o[p],n&&n[p],i)}(de=Kn.prototype).setTimeout=function(i){this.P=i},de.nb=function(i){i=i.target;const e=this.M;e&&3==Ji(i)?e.l():this.Pa(i)},de.Pa=function(i){try{if(i==this.g)e:{const ee=Ji(this.g);var e=this.g.Ia();if(this.g.da(),!(3>ee)&&(3!=ee||pt||this.g&&(this.h.h||this.g.ja()||ns(this.g)))){this.J||4!=ee||7==e||zi(),Cn(this);var n=this.g.da();this.ca=n;t:if(_i(this)){var o=ns(this.g);i="";var u=o.length,p=4==Ji(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){ni(this),er(this);var I="";break t}this.h.i=new wt.TextDecoder}for(e=0;e<u;e++)this.h.h=!0,i+=this.h.i.decode(o[e],{stream:p&&e==u-1});o.splice(0,u),this.h.g+=i,this.C=0,I=this.h.g}else I=this.g.ja();if(this.i=200==n,function eo(i,e,n,o,u,p,I){i.info(function(){return"XMLHTTP RESP ("+o+") [ attempt "+u+"]: "+e+"\n"+n+"\n"+p+" "+I})}(this.j,this.u,this.A,this.m,this.W,ee,n),this.i){if(this.aa&&!this.K){t:{if(this.g){var M,U=this.g;if((M=U.g?U.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Zt(M)){var W=M;break t}}W=null}if(!(n=W)){this.i=!1,this.o=3,ui(12),ni(this),er(this);break e}Xo(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Ki(this,n)}this.S?(Cs(this,ee,I),pt&&this.i&&3==ee&&(so(this.U,this.V,"tick",this.mb),this.V.start())):(Xo(this.j,this.m,I,null),Ki(this,I)),4==ee&&ni(this),this.i&&!this.J&&(4==ee?Tl(this.l,this):(this.i=!1,Mr(this)))}else(function Vo(i){const e={};i=(i.g&&2<=Ji(i)&&i.g.getAllResponseHeaders()||"").split("\r\n");for(let o=0;o<i.length;o++){if(Zt(i[o]))continue;var n=sn(i[o]);const u=n[0];if("string"!=typeof(n=n[1]))continue;n=n.trim();const p=e[u]||[];e[u]=p,p.push(n)}!function Oa(i,e){for(const n in i)e.call(void 0,i[n],n,i)}(e,function(o){return o.join(", ")})})(this.g),400==n&&0<I.indexOf("Unknown SID")?(this.o=3,ui(12)):(this.o=0,ui(13)),ni(this),er(this)}}}catch{}},de.mb=function(){if(this.g){var i=Ji(this.g),e=this.g.ja();this.C<e.length&&(Cn(this),Cs(this,i,e),this.i&&4!=i&&Mr(this))}},de.cancel=function(){this.J=!0,ni(this)},de.lb=function(){this.B=null;const i=Date.now();0<=i-this.Y?(function ea(i,e){i.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.L&&(zi(),ui(17)),ni(this),this.o=2,er(this)):xt(this,this.Y-i)};var to=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function En(i){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,i instanceof En){this.h=i.h,ao(this,i.j),this.s=i.s,this.g=i.g,Yi(this,i.m),this.l=i.l;var e=i.i,n=new Di;n.i=e.i,e.g&&(n.g=new Map(e.g),n.h=e.h),fi(this,n),this.o=i.o}else i&&(e=String(i).match(to))?(this.h=!1,ao(this,e[1]||"",!0),this.s=wi(e[2]||""),this.g=wi(e[3]||"",!0),Yi(this,e[4]),this.l=wi(e[5]||"",!0),fi(this,e[6]||"",!0),this.o=wi(e[7]||"")):(this.h=!1,this.i=new Di(null,this.h))}function yi(i){return new En(i)}function ao(i,e,n){i.j=n?wi(e,!0):e,i.j&&(i.j=i.j.replace(/:$/,""))}function Yi(i,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);i.m=e}else i.m=null}function fi(i,e,n){e instanceof Di?(i.i=e,function ya(i,e){e&&!i.j&&(ms(i),i.i=null,i.g.forEach(function(n,o){var u=o.toLowerCase();o!=u&&(Ss(this,o),_a(this,u,n))},i)),i.j=e}(i.i,i.h)):(n||(e=Zi(e,el)),i.i=new Di(e,i.h))}function sr(i,e,n){i.i.set(e,n)}function Mo(i){return sr(i,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),i}function wi(i,e){return i?e?decodeURI(i.replace(/%25/g,"%2525")):decodeURIComponent(i):""}function Zi(i,e,n){return"string"==typeof i?(i=encodeURI(i).replace(e,fs),n&&(i=i.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),i):null}function fs(i){return"%"+((i=i.charCodeAt(0))>>4&15).toString(16)+(15&i).toString(16)}En.prototype.toString=function(){var i=[],e=this.j;e&&i.push(Zi(e,no,!0),":");var n=this.g;return(n||"file"==e)&&(i.push("//"),(e=this.s)&&i.push(Zi(e,no,!0),"@"),i.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&i.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&i.push("/"),i.push(Zi(n,"/"==n.charAt(0)?gs:ps,!0))),(n=this.i.toString())&&i.push("?",n),(n=this.o)&&i.push("#",Zi(n,Vn)),i.join("")};var no=/[#\/\?@]/g,ps=/[#\?:]/g,gs=/[#\?]/g,el=/[#\?@]/g,Vn=/#/g;function Di(i,e){this.h=this.g=null,this.i=i||null,this.j=!!e}function ms(i){i.g||(i.g=new Map,i.h=0,i.i&&function Ar(i,e){if(i){i=i.split("&");for(var n=0;n<i.length;n++){var o=i[n].indexOf("="),u=null;if(0<=o){var p=i[n].substring(0,o);u=i[n].substring(o+1)}else p=i[n];e(p,u?decodeURIComponent(u.replace(/\+/g," ")):"")}}}(i.i,function(e,n){i.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}function Ss(i,e){ms(i),e=Ws(i,e),i.g.has(e)&&(i.i=null,i.h-=i.g.get(e).length,i.g.delete(e))}function Fs(i,e){return ms(i),e=Ws(i,e),i.g.has(e)}function _a(i,e,n){Ss(i,e),0<n.length&&(i.i=null,i.g.set(Ws(i,e),St(n)),i.h+=n.length)}function Ws(i,e){return e=String(e),i.j&&(e=e.toLowerCase()),e}function vl(i){this.l=i||kr,i=wt.PerformanceNavigationTiming?0<(i=wt.performance.getEntriesByType("navigation")).length&&("hq"==i[0].nextHopProtocol||"h2"==i[0].nextHopProtocol):!!(wt.g&&wt.g.Ka&&wt.g.Ka()&&wt.g.Ka().dc),this.j=i?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(de=Di.prototype).add=function(i,e){ms(this),this.i=null,i=Ws(this,i);var n=this.g.get(i);return n||this.g.set(i,n=[]),n.push(e),this.h+=1,this},de.forEach=function(i,e){ms(this),this.g.forEach(function(n,o){n.forEach(function(u){i.call(e,u,o,this)},this)},this)},de.ta=function(){ms(this);const i=Array.from(this.g.values()),e=Array.from(this.g.keys()),n=[];for(let o=0;o<e.length;o++){const u=i[o];for(let p=0;p<u.length;p++)n.push(e[o])}return n},de.Z=function(i){ms(this);let e=[];if("string"==typeof i)Fs(this,i)&&(e=e.concat(this.g.get(Ws(this,i))));else{i=Array.from(this.g.values());for(let n=0;n<i.length;n++)e=e.concat(i[n])}return e},de.set=function(i,e){return ms(this),this.i=null,Fs(this,i=Ws(this,i))&&(this.h-=this.g.get(i).length),this.g.set(i,[e]),this.h+=1,this},de.get=function(i,e){return i&&0<(i=this.Z(i)).length?String(i[0]):e},de.toString=function(){if(this.i)return this.i;if(!this.g)return"";const i=[],e=Array.from(this.g.keys());for(var n=0;n<e.length;n++){var o=e[n];const p=encodeURIComponent(String(o)),I=this.Z(o);for(o=0;o<I.length;o++){var u=p;""!==I[o]&&(u+="="+encodeURIComponent(String(I[o]))),i.push(u)}}return this.i=i.join("&")};var kr=10;function Qi(i){return!!i.h||!!i.g&&i.g.size>=i.j}function Rs(i){return i.h?1:i.g?i.g.size:0}function qs(i,e){return i.h?i.h==e:!!i.g&&i.g.has(e)}function Br(i,e){i.g?i.g.add(e):i.h=e}function Ls(i,e){i.h&&i.h==e?i.h=null:i.g&&i.g.has(e)&&i.g.delete(e)}function Il(i){if(null!=i.h)return i.i.concat(i.h.F);if(null!=i.g&&0!==i.g.size){let e=i.i;for(const n of i.g.values())e=e.concat(n.F);return e}return St(i.i)}vl.prototype.cancel=function(){if(this.i=Il(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const i of this.g.values())i.cancel();this.g.clear()}};var Io=class{stringify(i){return wt.JSON.stringify(i,void 0)}parse(i){return wt.JSON.parse(i,void 0)}};function ra(){this.g=new Io}function Uu(i,e,n){const o=n||"";try{tr(i,function(u,p){let I=u;On(u)&&(I=oi(u)),e.push(o+p+"="+encodeURIComponent(I))})}catch(u){throw e.push(o+"type="+encodeURIComponent("_badmap")),u}}function xo(i,e,n,o,u){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,u(o)}catch{}}function ko(i){this.l=i.ec||null,this.j=i.ob||!1}function xa(i,e){Xt.call(this),this.F=i,this.u=e,this.m=void 0,this.readyState=Fo,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Fe(ko,Ja),ko.prototype.g=function(){return new xa(this.l,this.j)},ko.prototype.i=function(i){return function(){return i}}({}),Fe(xa,Xt);var Fo=0;function Sr(i){i.j.read().then(i.Xa.bind(i)).catch(i.ka.bind(i))}function sa(i){i.readyState=4,i.l=null,i.j=null,i.A=null,ka(i)}function ka(i){i.onreadystatechange&&i.onreadystatechange.call(i)}(de=xa.prototype).open=function(i,e){if(this.readyState!=Fo)throw this.abort(),Error("Error reopening a connection");this.C=i,this.B=e,this.readyState=1,ka(this)},de.send=function(i){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};i&&(e.body=i),(this.F||wt).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))},de.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,sa(this)),this.readyState=Fo},de.$a=function(i){if(this.g&&(this.l=i,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=i.headers,this.readyState=2,ka(this)),this.g&&(this.readyState=3,ka(this),this.g)))if("arraybuffer"===this.responseType)i.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof wt.ReadableStream<"u"&&"body"in i){if(this.j=i.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Sr(this)}else i.text().then(this.Za.bind(this),this.ka.bind(this))},de.Xa=function(i){if(this.g){if(this.u&&i.value)this.response.push(i.value);else if(!this.u){var e=i.value?i.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!i.done}))&&(this.response=this.responseText+=e)}i.done?sa(this):ka(this),3==this.readyState&&Sr(this)}},de.Za=function(i){this.g&&(this.response=this.responseText=i,sa(this))},de.Ya=function(i){this.g&&(this.response=i,sa(this))},de.ka=function(){this.g&&sa(this)},de.setRequestHeader=function(i,e){this.v.append(i,e)},de.getResponseHeader=function(i){return this.h&&this.h.get(i.toLowerCase())||""},de.getAllResponseHeaders=function(){if(!this.h)return"";const i=[],e=this.h.entries();for(var n=e.next();!n.done;)i.push((n=n.value)[0]+": "+n[1]),n=e.next();return i.join("\r\n")},Object.defineProperty(xa.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(i){this.m=i?"include":"same-origin"}});var q=wt.JSON.parse;function K(i){Xt.call(this),this.headers=new Map,this.u=i||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=j,this.L=this.M=!1}Fe(K,Xt);var j="",oe=/^https?$/i,Ae=["POST","PUT"];function Sn(i,e){i.h=!1,i.g&&(i.l=!0,i.g.abort(),i.l=!1),i.j=e,i.m=5,Ui(i),Eo(i)}function Ui(i){i.F||(i.F=!0,hn(i,"complete"),hn(i,"error"))}function _s(i){if(i.h&&typeof Ot<"u"&&(!i.C[1]||4!=Ji(i)||2!=i.da()))if(i.v&&4==Ji(i))Ka(i.La,0,i);else if(hn(i,"readystatechange"),4==Ji(i)){i.h=!1;try{const I=i.da();e:switch(I){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var n;if(!(n=e)){var o;if(o=0===I){var u=String(i.I).match(to)[1]||null;!u&&wt.self&&wt.self.location&&(u=wt.self.location.protocol.slice(0,-1)),o=!oe.test(u?u.toLowerCase():"")}n=o}if(n)hn(i,"complete"),hn(i,"success");else{i.m=6;try{var p=2<Ji(i)?i.g.statusText:""}catch{p=""}i.j=p+" ["+i.da()+"]",Ui(i)}}finally{Eo(i)}}}function Eo(i,e){if(i.g){Lo(i);const n=i.g,o=i.C[0]?()=>{}:null;i.g=null,i.C=null,e||hn(i,"ready");try{n.onreadystatechange=o}catch{}}}function Lo(i){i.g&&i.L&&(i.g.ontimeout=null),i.A&&(wt.clearTimeout(i.A),i.A=null)}function Ji(i){return i.g?i.g.readyState:0}function ns(i){try{if(!i.g)return null;if("response"in i.g)return i.g.response;switch(i.K){case j:case"text":return i.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in i.g)return i.g.mozResponseArrayBuffer}return null}catch{return null}}function Bl(i){let e="";return ki(i,function(n,o){e+=o,e+=":",e+=n,e+="\r\n"}),e}function Ci(i,e,n){e:{for(o in n){var o=!1;break e}o=!0}o||(n=Bl(n),"string"==typeof i?null!=n&&encodeURIComponent(String(n)):sr(i,e,n))}function Vs(i,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[i]||e}function ys(i){this.Ga=0,this.j=[],this.l=new Jo,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=Vs("failFast",!1,i),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=Vs("baseRetryDelayMs",5e3,i),this.hb=Vs("retryDelaySeedMs",1e4,i),this.eb=Vs("forwardChannelMaxRetries",2,i),this.xa=Vs("forwardChannelRequestTimeoutMs",2e4,i),this.va=i&&i.xmlHttpFactory||void 0,this.Ha=i&&i.useFetchStreams||!1,this.L=void 0,this.J=i&&i.supportsCrossDomainXhr||!1,this.K="",this.i=new vl(i&&i.concurrentRequestLimit),this.Ja=new ra,this.P=i&&i.fastHandshake||!1,this.O=i&&i.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=i&&i.bc||!1,i&&i.Ea&&this.l.Ea(),i&&i.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&i&&i.detectBufferingProxy||!1,this.qa=void 0,i&&i.longPollingTimeout&&0<i.longPollingTimeout&&(this.qa=i.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}function va(i){if(Bo(i),3==i.H){var e=i.W++,n=yi(i.I);if(sr(n,"SID",i.K),sr(n,"RID",e),sr(n,"TYPE","terminate"),Uo(i,n),(e=new Kn(i,i.l,e)).L=2,e.v=Mo(yi(n)),n=!1,wt.navigator&&wt.navigator.sendBeacon)try{n=wt.navigator.sendBeacon(e.v.toString(),"")}catch{}!n&&wt.Image&&((new Image).src=e.v,n=!0),n||(e.g=Hl(e.l,null),e.g.ha(e.v)),e.G=Date.now(),Mr(e)}hh(i)}function pu(i){i.g&&(Fa(i),i.g.cancel(),i.g=null)}function Bo(i){pu(i),i.u&&(wt.clearTimeout(i.u),i.u=null),lo(i),i.i.cancel(),i.m&&("number"==typeof i.m&&wt.clearTimeout(i.m),i.m=null)}function tl(i){if(!Qi(i.i)&&!i.m){i.m=!0;var e=i.Na;qt||Or(),Xn||(qt(),Xn=!0),ai.add(e,i),i.C=0}}function ju(i,e){var n;n=e?e.m:i.W++;const o=yi(i.I);sr(o,"SID",i.K),sr(o,"RID",n),sr(o,"AID",i.V),Uo(i,o),i.o&&i.s&&Ci(o,i.o,i.s),n=new Kn(i,i.l,n,i.C+1),null===i.o&&(n.I=i.s),e&&(i.j=e.F.concat(i.j)),e=Ul(i,n,1e3),n.setTimeout(Math.round(.5*i.xa)+Math.round(.5*i.xa*Math.random())),Br(i.i,n),ts(n,o,e)}function Uo(i,e){i.na&&ki(i.na,function(n,o){sr(e,o,n)}),i.h&&tr({},function(n,o){sr(e,o,n)})}function Ul(i,e,n){n=Math.min(i.j.length,n);var o=i.h?Se(i.h.Va,i.h,i):null;e:{var u=i.j;let p=-1;for(;;){const I=["count="+n];-1==p?0<n?(p=u[0].g,I.push("ofs="+p)):p=0:I.push("ofs="+p);let M=!0;for(let U=0;U<n;U++){let W=u[U].g;const ee=u[U].map;if(W-=p,0>W)p=Math.max(0,u[U].g-100),M=!1;else try{Uu(ee,I,"req"+W+"_")}catch{o&&o(ee)}}if(M){o=I.join("&");break e}}}return i=i.j.splice(0,n),e.F=i,o}function nl(i){if(!i.g&&!i.u){i.ba=1;var e=i.Ma;qt||Or(),Xn||(qt(),Xn=!0),ai.add(e,i),i.A=0}}function jl(i){return!(i.g||i.u||3<=i.A||(i.ba++,i.u=Wi(Se(i.Ma,i),bc(i,i.A)),i.A++,0))}function Fa(i){null!=i.B&&(wt.clearTimeout(i.B),i.B=null)}function El(i){i.g=new Kn(i,i.l,"rpc",i.ba),null===i.o&&(i.g.I=i.s),i.g.O=0;var e=yi(i.wa);sr(e,"RID","rpc"),sr(e,"SID",i.K),sr(e,"AID",i.V),sr(e,"CI",i.G?"0":"1"),!i.G&&i.qa&&sr(e,"TO",i.qa),sr(e,"TYPE","xmlhttp"),Uo(i,e),i.o&&i.s&&Ci(e,i.o,i.s),i.L&&i.g.setTimeout(i.L);var n=i.g;i=i.pa,n.L=1,n.v=Mo(yi(e)),n.s=null,n.S=!0,qi(n,i)}function lo(i){null!=i.v&&(wt.clearTimeout(i.v),i.v=null)}function Tl(i,e){var n=null;if(i.g==e){lo(i),Fa(i),i.g=null;var o=2}else{if(!qs(i.i,e))return;n=e.F,Ls(i.i,e),o=1}if(0!=i.H)if(e.i)if(1==o){n=e.s?e.s.length:0,e=Date.now()-e.G;var u=i.C;hn(o=$r(),new fu(o,n)),tl(i)}else nl(i);else if(3==(u=e.o)||0==u&&0<e.ca||!(1==o&&function To(i,e){return!(Rs(i.i)>=i.i.j-(i.m?1:0)||(i.m?(i.j=e.F.concat(i.j),0):1==i.H||2==i.H||i.C>=(i.cb?0:i.eb)||(i.m=Wi(Se(i.Na,i,e),bc(i,i.C)),i.C++,0)))}(i,e)||2==o&&jl(i)))switch(n&&0<n.length&&(e=i.i,e.i=e.i.concat(n)),u){case 1:jo(i,5);break;case 4:jo(i,10);break;case 3:jo(i,6);break;default:jo(i,2)}}function bc(i,e){let n=i.ab+Math.floor(Math.random()*i.hb);return i.isActive()||(n*=2),n*e}function jo(i,e){if(i.l.info("Error code "+e),2==e){var n=null;i.h&&(n=null);var o=Se(i.pb,i);n||(n=new En("//www.google.com/images/cleardot.gif"),wt.location&&"http"==wt.location.protocol||ao(n,"https"),Mo(n)),function ia(i,e){const n=new Jo;if(wt.Image){const o=new Image;o.onload=Ke(xo,n,o,"TestLoadImage: loaded",!0,e),o.onerror=Ke(xo,n,o,"TestLoadImage: error",!1,e),o.onabort=Ke(xo,n,o,"TestLoadImage: abort",!1,e),o.ontimeout=Ke(xo,n,o,"TestLoadImage: timeout",!1,e),wt.setTimeout(function(){o.ontimeout&&o.ontimeout()},1e4),o.src=i}else e(!1)}(n.toString(),o)}else ui(2);i.H=0,i.h&&i.h.za(e),hh(i),Bo(i)}function hh(i){if(i.H=0,i.ma=[],i.h){const e=Il(i.i);(0!=e.length||0!=i.j.length)&&(cr(i.ma,e),cr(i.ma,i.j),i.i.i.length=0,St(i.j),i.j.length=0),i.h.ya()}}function wc(i,e,n){var o=n instanceof En?yi(n):new En(n);if(""!=o.g)e&&(o.g=e+"."+o.g),Yi(o,o.m);else{var u=wt.location;o=u.protocol,e=e?e+"."+u.hostname:u.hostname,u=+u.port;var p=new En(null);o&&ao(p,o),e&&(p.g=e),u&&Yi(p,u),n&&(p.l=n),o=p}return e=i.Da,(n=i.F)&&e&&sr(o,n,e),sr(o,"VER",i.ra),Uo(i,o),o}function Hl(i,e,n){if(e&&!i.J)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new K(n&&i.Ha&&!i.va?new ko({ob:!0}):i.va)).Oa(i.J),e}function Dc(){}function rl(){if(ze&&!(10<=Number(jn)))throw Error("Environmental error: no available transport.")}function uo(i,e){Xt.call(this),this.g=new ys(e),this.l=i,this.h=e&&e.messageUrlParams||null,i=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(i?i["X-Client-Protocol"]="webchannel":i={"X-Client-Protocol":"webchannel"}),this.g.s=i,i=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(i?i["X-WebChannel-Content-Type"]=e.messageContentType:i={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(i?i["X-WebChannel-Client-Profile"]=e.Ca:i={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=i,(i=e&&e.cc)&&!Zt(i)&&(this.g.o=i),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Zt(e)&&(this.g.F=e,null!==(i=this.h)&&e in i&&e in(i=this.h)&&delete i[e]),this.j=new co(this)}function La(i){na.call(this),i.__headers__&&(this.headers=i.__headers__,this.statusCode=i.__status__,delete i.__headers__,delete i.__status__);var e=i.__sm__;if(e){e:{for(const n in e){i=n;break e}i=void 0}(this.i=i)&&(i=this.i,e=null!==e&&i in e?e[i]:void 0),this.data=e}else this.data=i}function Cc(){vo.call(this),this.status=1}function co(i){this.g=i}function rs(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function gu(i,e,n){n||(n=0);var o=Array(16);if("string"==typeof e)for(var u=0;16>u;++u)o[u]=e.charCodeAt(n++)|e.charCodeAt(n++)<<8|e.charCodeAt(n++)<<16|e.charCodeAt(n++)<<24;else for(u=0;16>u;++u)o[u]=e[n++]|e[n++]<<8|e[n++]<<16|e[n++]<<24;var p=i.g[3],I=(e=i.g[0])+(p^(n=i.g[1])&((u=i.g[2])^p))+o[0]+3614090360&4294967295;I=(n=(u=(p=(e=(n=(u=(p=(e=(n=(u=(p=(e=(n=(u=(p=(e=(n=(u=(p=(e=(n=(u=(p=(e=(n=(u=(p=(e=(n=(u=(p=(e=(n=(u=(p=(e=(n=(u=(p=(e=(n=(u=(p=(e=(n=(u=(p=(e=(n=(u=(p=(e=(n=(u=(p=(e=(n=(u=(p=(e=n+(I<<7&4294967295|I>>>25))+((I=p+(u^e&(n^u))+o[1]+3905402710&4294967295)<<12&4294967295|I>>>20))+((I=u+(n^p&(e^n))+o[2]+606105819&4294967295)<<17&4294967295|I>>>15))+((I=n+(e^u&(p^e))+o[3]+3250441966&4294967295)<<22&4294967295|I>>>10))+((I=e+(p^n&(u^p))+o[4]+4118548399&4294967295)<<7&4294967295|I>>>25))+((I=p+(u^e&(n^u))+o[5]+1200080426&4294967295)<<12&4294967295|I>>>20))+((I=u+(n^p&(e^n))+o[6]+2821735955&4294967295)<<17&4294967295|I>>>15))+((I=n+(e^u&(p^e))+o[7]+4249261313&4294967295)<<22&4294967295|I>>>10))+((I=e+(p^n&(u^p))+o[8]+1770035416&4294967295)<<7&4294967295|I>>>25))+((I=p+(u^e&(n^u))+o[9]+2336552879&4294967295)<<12&4294967295|I>>>20))+((I=u+(n^p&(e^n))+o[10]+4294925233&4294967295)<<17&4294967295|I>>>15))+((I=n+(e^u&(p^e))+o[11]+2304563134&4294967295)<<22&4294967295|I>>>10))+((I=e+(p^n&(u^p))+o[12]+1804603682&4294967295)<<7&4294967295|I>>>25))+((I=p+(u^e&(n^u))+o[13]+4254626195&4294967295)<<12&4294967295|I>>>20))+((I=u+(n^p&(e^n))+o[14]+2792965006&4294967295)<<17&4294967295|I>>>15))+((I=n+(e^u&(p^e))+o[15]+1236535329&4294967295)<<22&4294967295|I>>>10))+((I=e+(u^p&(n^u))+o[1]+4129170786&4294967295)<<5&4294967295|I>>>27))+((I=p+(n^u&(e^n))+o[6]+3225465664&4294967295)<<9&4294967295|I>>>23))+((I=u+(e^n&(p^e))+o[11]+643717713&4294967295)<<14&4294967295|I>>>18))+((I=n+(p^e&(u^p))+o[0]+3921069994&4294967295)<<20&4294967295|I>>>12))+((I=e+(u^p&(n^u))+o[5]+3593408605&4294967295)<<5&4294967295|I>>>27))+((I=p+(n^u&(e^n))+o[10]+38016083&4294967295)<<9&4294967295|I>>>23))+((I=u+(e^n&(p^e))+o[15]+3634488961&4294967295)<<14&4294967295|I>>>18))+((I=n+(p^e&(u^p))+o[4]+3889429448&4294967295)<<20&4294967295|I>>>12))+((I=e+(u^p&(n^u))+o[9]+568446438&4294967295)<<5&4294967295|I>>>27))+((I=p+(n^u&(e^n))+o[14]+3275163606&4294967295)<<9&4294967295|I>>>23))+((I=u+(e^n&(p^e))+o[3]+4107603335&4294967295)<<14&4294967295|I>>>18))+((I=n+(p^e&(u^p))+o[8]+1163531501&4294967295)<<20&4294967295|I>>>12))+((I=e+(u^p&(n^u))+o[13]+2850285829&4294967295)<<5&4294967295|I>>>27))+((I=p+(n^u&(e^n))+o[2]+4243563512&4294967295)<<9&4294967295|I>>>23))+((I=u+(e^n&(p^e))+o[7]+1735328473&4294967295)<<14&4294967295|I>>>18))+((I=n+(p^e&(u^p))+o[12]+2368359562&4294967295)<<20&4294967295|I>>>12))+((I=e+(n^u^p)+o[5]+4294588738&4294967295)<<4&4294967295|I>>>28))+((I=p+(e^n^u)+o[8]+2272392833&4294967295)<<11&4294967295|I>>>21))+((I=u+(p^e^n)+o[11]+1839030562&4294967295)<<16&4294967295|I>>>16))+((I=n+(u^p^e)+o[14]+4259657740&4294967295)<<23&4294967295|I>>>9))+((I=e+(n^u^p)+o[1]+2763975236&4294967295)<<4&4294967295|I>>>28))+((I=p+(e^n^u)+o[4]+1272893353&4294967295)<<11&4294967295|I>>>21))+((I=u+(p^e^n)+o[7]+4139469664&4294967295)<<16&4294967295|I>>>16))+((I=n+(u^p^e)+o[10]+3200236656&4294967295)<<23&4294967295|I>>>9))+((I=e+(n^u^p)+o[13]+681279174&4294967295)<<4&4294967295|I>>>28))+((I=p+(e^n^u)+o[0]+3936430074&4294967295)<<11&4294967295|I>>>21))+((I=u+(p^e^n)+o[3]+3572445317&4294967295)<<16&4294967295|I>>>16))+((I=n+(u^p^e)+o[6]+76029189&4294967295)<<23&4294967295|I>>>9))+((I=e+(n^u^p)+o[9]+3654602809&4294967295)<<4&4294967295|I>>>28))+((I=p+(e^n^u)+o[12]+3873151461&4294967295)<<11&4294967295|I>>>21))+((I=u+(p^e^n)+o[15]+530742520&4294967295)<<16&4294967295|I>>>16))+((I=n+(u^p^e)+o[2]+3299628645&4294967295)<<23&4294967295|I>>>9))+((I=e+(u^(n|~p))+o[0]+4096336452&4294967295)<<6&4294967295|I>>>26))+((I=p+(n^(e|~u))+o[7]+1126891415&4294967295)<<10&4294967295|I>>>22))+((I=u+(e^(p|~n))+o[14]+2878612391&4294967295)<<15&4294967295|I>>>17))+((I=n+(p^(u|~e))+o[5]+4237533241&4294967295)<<21&4294967295|I>>>11))+((I=e+(u^(n|~p))+o[12]+1700485571&4294967295)<<6&4294967295|I>>>26))+((I=p+(n^(e|~u))+o[3]+2399980690&4294967295)<<10&4294967295|I>>>22))+((I=u+(e^(p|~n))+o[10]+4293915773&4294967295)<<15&4294967295|I>>>17))+((I=n+(p^(u|~e))+o[1]+2240044497&4294967295)<<21&4294967295|I>>>11))+((I=e+(u^(n|~p))+o[8]+1873313359&4294967295)<<6&4294967295|I>>>26))+((I=p+(n^(e|~u))+o[15]+4264355552&4294967295)<<10&4294967295|I>>>22))+((I=u+(e^(p|~n))+o[6]+2734768916&4294967295)<<15&4294967295|I>>>17))+((I=n+(p^(u|~e))+o[13]+1309151649&4294967295)<<21&4294967295|I>>>11))+((p=(e=n+((I=e+(u^(n|~p))+o[4]+4149444226&4294967295)<<6&4294967295|I>>>26))+((I=p+(n^(e|~u))+o[11]+3174756917&4294967295)<<10&4294967295|I>>>22))^((u=p+((I=u+(e^(p|~n))+o[2]+718787259&4294967295)<<15&4294967295|I>>>17))|~e))+o[9]+3951481745&4294967295,i.g[0]=i.g[0]+e&4294967295,i.g[1]=i.g[1]+(u+(I<<21&4294967295|I>>>11))&4294967295,i.g[2]=i.g[2]+u&4294967295,i.g[3]=i.g[3]+p&4294967295}function O(i,e){this.h=e;for(var n=[],o=!0,u=i.length-1;0<=u;u--){var p=0|i[u];o&&p==e||(n[u]=p,o=!1)}this.g=n}(de=K.prototype).Oa=function(i){this.M=i},de.ha=function(i,e,n,o){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+i);e=e?e.toUpperCase():"GET",this.I=i,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():Ma.g(),this.C=function Oo(i){return i.h||(i.h=i.i())}(this.u?this.u:Ma),this.g.onreadystatechange=Se(this.La,this);try{this.G=!0,this.g.open(e,String(i),!0),this.G=!1}catch(p){return void Sn(this,p)}if(i=n||"",n=new Map(this.headers),o)if(Object.getPrototypeOf(o)===Object.prototype)for(var u in o)n.set(u,o[u]);else{if("function"!=typeof o.keys||"function"!=typeof o.get)throw Error("Unknown input type for opt_headers: "+String(o));for(const p of o.keys())n.set(p,o.get(p))}o=Array.from(n.keys()).find(p=>"content-type"==p.toLowerCase()),u=wt.FormData&&i instanceof wt.FormData,!(0<=Ft(Ae,e))||o||u||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[p,I]of n)this.g.setRequestHeader(p,I);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{Lo(this),0<this.B&&((this.L=function nn(i){return ze&&"number"==typeof i.timeout&&void 0!==i.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Se(this.ua,this)):this.A=Ka(this.ua,this.B,this)),this.v=!0,this.g.send(i),this.v=!1}catch(p){Sn(this,p)}},de.ua=function(){typeof Ot<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,hn(this,"timeout"),this.abort(8))},de.abort=function(i){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=i||7,hn(this,"complete"),hn(this,"abort"),Eo(this))},de.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Eo(this,!0)),K.$.N.call(this)},de.La=function(){this.s||(this.G||this.v||this.l?_s(this):this.kb())},de.kb=function(){_s(this)},de.isActive=function(){return!!this.g},de.da=function(){try{return 2<Ji(this)?this.g.status:-1}catch{return-1}},de.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}},de.Wa=function(i){if(this.g){var e=this.g.responseText;return i&&0==e.indexOf(i)&&(e=e.substring(i.length)),q(e)}},de.Ia=function(){return this.m},de.Sa=function(){return"string"==typeof this.j?this.j:String(this.j)},(de=ys.prototype).ra=8,de.H=1,de.Na=function(i){if(this.m)if(this.m=null,1==this.H){if(!i){this.W=Math.floor(1e5*Math.random()),i=this.W++;const u=new Kn(this,this.l,i);let p=this.s;if(this.U&&(p?(p=Xi(p),ur(p,this.U)):p=this.U),null!==this.o||this.O||(u.I=p,p=null),this.P)e:{for(var e=0,n=0;n<this.j.length;n++){var o=this.j[n];if(void 0===(o="__data__"in o.map&&"string"==typeof(o=o.map.__data__)?o.length:void 0))break;if(4096<(e+=o)){e=n;break e}if(4096===e||n===this.j.length-1){e=n+1;break e}}e=1e3}else e=1e3;e=Ul(this,u,e),sr(n=yi(this.I),"RID",i),sr(n,"CVER",22),this.F&&sr(n,"X-HTTP-Session-Id",this.F),Uo(this,n),p&&(this.O?e="headers="+encodeURIComponent(String(Bl(p)))+"&"+e:this.o&&Ci(n,this.o,p)),Br(this.i,u),this.bb&&sr(n,"TYPE","init"),this.P?(sr(n,"$req",e),sr(n,"SID","null"),u.aa=!0,ts(u,n,null)):ts(u,n,e),this.H=2}}else 3==this.H&&(i?ju(this,i):0==this.j.length||Qi(this.i)||ju(this))},de.Ma=function(){if(this.u=null,El(this),this.ca&&!(this.M||null==this.g||0>=this.S)){var i=2*this.S;this.l.info("BP detection timer enabled: "+i),this.B=Wi(Se(this.jb,this),i)}},de.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,ui(10),pu(this),El(this))},de.ib=function(){null!=this.v&&(this.v=null,pu(this),jl(this),ui(19))},de.pb=function(i){i?(this.l.info("Successfully pinged google.com"),ui(2)):(this.l.info("Failed to ping google.com"),ui(1))},de.isActive=function(){return!!this.h&&this.h.isActive(this)},(de=Dc.prototype).Ba=function(){},de.Aa=function(){},de.za=function(){},de.ya=function(){},de.isActive=function(){return!0},de.Va=function(){},rl.prototype.g=function(i,e){return new uo(i,e)},Fe(uo,Xt),uo.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var i=this.g,e=this.l,n=this.h||void 0;ui(0),i.Y=e,i.na=n||{},i.G=i.aa,i.I=wc(i,null,i.Y),tl(i)},uo.prototype.close=function(){va(this.g)},uo.prototype.u=function(i){var e=this.g;if("string"==typeof i){var n={};n.__data__=i,i=n}else this.v&&((n={}).__data__=oi(i),i=n);e.j.push(new class{constructor(i,e){this.g=i,this.map=e}}(e.fb++,i)),3==e.H&&tl(e)},uo.prototype.N=function(){this.g.h=null,delete this.j,va(this.g),delete this.g,uo.$.N.call(this)},Fe(La,na),Fe(Cc,vo),Fe(co,Dc),co.prototype.Ba=function(){hn(this.g,"a")},co.prototype.Aa=function(i){hn(this.g,new La(i))},co.prototype.za=function(i){hn(this.g,new Cc)},co.prototype.ya=function(){hn(this.g,"b")},Fe(rs,function lf(){this.blockSize=-1}),rs.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},rs.prototype.j=function(i,e){void 0===e&&(e=i.length);for(var n=e-this.blockSize,o=this.m,u=this.h,p=0;p<e;){if(0==u)for(;p<=n;)gu(this,i,p),p+=this.blockSize;if("string"==typeof i){for(;p<e;)if(o[u++]=i.charCodeAt(p++),u==this.blockSize){gu(this,o),u=0;break}}else for(;p<e;)if(o[u++]=i[p++],u==this.blockSize){gu(this,o),u=0;break}}this.h=u,this.i+=e},rs.prototype.l=function(){var i=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);i[0]=128;for(var e=1;e<i.length-8;++e)i[e]=0;var n=8*this.i;for(e=i.length-8;e<i.length;++e)i[e]=255&n,n/=256;for(this.j(i),i=Array(16),e=n=0;4>e;++e)for(var o=0;32>o;o+=8)i[n++]=this.g[e]>>>o&255;return i};var J={};function H(i){return-128<=i&&128>i?function Ee(i,e){var n=J;return Object.prototype.hasOwnProperty.call(n,i)?n[i]:n[i]=e(i)}(i,function(e){return new O([0|e],0>e?-1:0)}):new O([0|i],0>i?-1:0)}function Z(i){if(isNaN(i)||!isFinite(i))return ct;if(0>i)return bn(Z(-i));for(var e=[],n=1,o=0;i>=n;o++)e[o]=i/n|0,n*=et;return new O(e,0)}var et=4294967296,ct=H(0),dn=H(1),nr=H(16777216);function _r(i){if(0!=i.h)return!1;for(var e=0;e<i.g.length;e++)if(0!=i.g[e])return!1;return!0}function Jn(i){return-1==i.h}function bn(i){for(var e=i.g.length,n=[],o=0;o<e;o++)n[o]=~i.g[o];return new O(n,~i.h).add(dn)}function ii(i,e){return i.add(bn(e))}function xr(i,e){for(;(65535&i[e])!=i[e];)i[e+1]+=i[e]>>>16,i[e]&=65535,e++}function Ai(i,e){this.g=i,this.h=e}function bo(i,e){if(_r(e))throw Error("division by zero");if(_r(i))return new Ai(ct,ct);if(Jn(i))return e=bo(bn(i),e),new Ai(bn(e.g),bn(e.h));if(Jn(e))return e=bo(i,bn(e)),new Ai(bn(e.g),e.h);if(30<i.g.length){if(Jn(i)||Jn(e))throw Error("slowDivide_ only works with positive integers.");for(var n=dn,o=e;0>=o.X(i);)n=oa(n),o=oa(o);var u=aa(n,1),p=aa(o,1);for(o=aa(o,2),n=aa(n,2);!_r(o);){var I=p.add(o);0>=I.X(i)&&(u=u.add(n),p=I),o=aa(o,1),n=aa(n,1)}return e=ii(i,u.R(e)),new Ai(u,e)}for(u=ct;0<=i.X(e);){for(n=Math.max(1,Math.floor(i.ea()/e.ea())),o=48>=(o=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,o-48),I=(p=Z(n)).R(e);Jn(I)||0<I.X(i);)I=(p=Z(n-=o)).R(e);_r(p)&&(p=dn),u=u.add(p),i=ii(i,I)}return new Ai(u,i)}function oa(i){for(var e=i.g.length+1,n=[],o=0;o<e;o++)n[o]=i.D(o)<<1|i.D(o-1)>>>31;return new O(n,i.h)}function aa(i,e){var n=e>>5;e%=32;for(var o=i.g.length-n,u=[],p=0;p<o;p++)u[p]=0<e?i.D(p+n)>>>e|i.D(p+n+1)<<32-e:i.D(p+n);return new O(u,i.h)}(de=O.prototype).ea=function(){if(Jn(this))return-bn(this).ea();for(var i=0,e=1,n=0;n<this.g.length;n++){var o=this.D(n);i+=(0<=o?o:et+o)*e,e*=et}return i},de.toString=function(i){if(2>(i=i||10)||36<i)throw Error("radix out of range: "+i);if(_r(this))return"0";if(Jn(this))return"-"+bn(this).toString(i);for(var e=Z(Math.pow(i,6)),n=this,o="";;){var u=bo(n,e).g,p=((0<(n=ii(n,u.R(e))).g.length?n.g[0]:n.h)>>>0).toString(i);if(_r(n=u))return p+o;for(;6>p.length;)p="0"+p;o=p+o}},de.D=function(i){return 0>i?0:i<this.g.length?this.g[i]:this.h},de.X=function(i){return Jn(i=ii(this,i))?-1:_r(i)?0:1},de.abs=function(){return Jn(this)?bn(this):this},de.add=function(i){for(var e=Math.max(this.g.length,i.g.length),n=[],o=0,u=0;u<=e;u++){var p=o+(65535&this.D(u))+(65535&i.D(u)),I=(p>>>16)+(this.D(u)>>>16)+(i.D(u)>>>16);o=I>>>16,n[u]=(I&=65535)<<16|(p&=65535)}return new O(n,-2147483648&n[n.length-1]?-1:0)},de.R=function(i){if(_r(this)||_r(i))return ct;if(Jn(this))return Jn(i)?bn(this).R(bn(i)):bn(bn(this).R(i));if(Jn(i))return bn(this.R(bn(i)));if(0>this.X(nr)&&0>i.X(nr))return Z(this.ea()*i.ea());for(var e=this.g.length+i.g.length,n=[],o=0;o<2*e;o++)n[o]=0;for(o=0;o<this.g.length;o++)for(var u=0;u<i.g.length;u++){var p=this.D(o)>>>16,I=65535&this.D(o),M=i.D(u)>>>16,U=65535&i.D(u);n[2*o+2*u]+=I*U,xr(n,2*o+2*u),n[2*o+2*u+1]+=p*U,xr(n,2*o+2*u+1),n[2*o+2*u+1]+=I*M,xr(n,2*o+2*u+1),n[2*o+2*u+2]+=p*M,xr(n,2*o+2*u+2)}for(o=0;o<e;o++)n[o]=n[2*o+1]<<16|n[2*o];for(o=e;o<2*e;o++)n[o]=0;return new O(n,0)},de.gb=function(i){return bo(this,i).h},de.and=function(i){for(var e=Math.max(this.g.length,i.g.length),n=[],o=0;o<e;o++)n[o]=this.D(o)&i.D(o);return new O(n,this.h&i.h)},de.or=function(i){for(var e=Math.max(this.g.length,i.g.length),n=[],o=0;o<e;o++)n[o]=this.D(o)|i.D(o);return new O(n,this.h|i.h)},de.xor=function(i){for(var e=Math.max(this.g.length,i.g.length),n=[],o=0;o<e;o++)n[o]=this.D(o)^i.D(o);return new O(n,this.h^i.h)},rl.prototype.createWebChannel=rl.prototype.g,uo.prototype.send=uo.prototype.u,uo.prototype.open=uo.prototype.m,uo.prototype.close=uo.prototype.close,ta.NO_ERROR=0,ta.TIMEOUT=8,ta.HTTP_ERROR=6,Qa.COMPLETE="complete",Xa.EventType=zs,zs.OPEN="a",zs.CLOSE="b",zs.ERROR="c",zs.MESSAGE="d",Xt.prototype.listen=Xt.prototype.O,K.prototype.listenOnce=K.prototype.P,K.prototype.getLastError=K.prototype.Sa,K.prototype.getLastErrorCode=K.prototype.Ia,K.prototype.getStatus=K.prototype.da,K.prototype.getResponseJson=K.prototype.Wa,K.prototype.getResponseText=K.prototype.ja,K.prototype.send=K.prototype.ha,K.prototype.setWithCredentials=K.prototype.Oa,rs.prototype.digest=rs.prototype.l,rs.prototype.reset=rs.prototype.reset,rs.prototype.update=rs.prototype.j,O.prototype.add=O.prototype.add,O.prototype.multiply=O.prototype.R,O.prototype.modulo=O.prototype.gb,O.prototype.compare=O.prototype.X,O.prototype.toNumber=O.prototype.ea,O.prototype.toString=O.prototype.toString,O.prototype.getBits=O.prototype.D,O.fromNumber=Z,O.fromString=function ve(i,e){if(0==i.length)throw Error("number format error: empty string");if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if("-"==i.charAt(0))return bn(ve(i.substring(1),e));if(0<=i.indexOf("-"))throw Error('number format error: interior "-" character');for(var n=Z(Math.pow(e,8)),o=ct,u=0;u<i.length;u+=8){var p=Math.min(8,i.length-u),I=parseInt(i.substring(u,u+p),e);8>p?(p=Z(Math.pow(e,p)),o=o.R(p).add(Z(I))):o=(o=o.R(n)).add(Z(I))}return o};var vs=ft.createWebChannelTransport=function(){return new rl},Ia=ft.getStatEventTarget=function(){return $r()},Mi=ft.ErrorCode=ta,bl=ft.EventType=Qa,fh=ft.Event=Er,ti=ft.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},mu=(ft.FetchXmlHttpFactory=ko,ft.WebChannel=Xa),Ns=ft.XhrIo=K,wo=ft.Md5=rs,la=ft.Integer=O;const Ps="@firebase/firestore";class Yr{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Yr.UNAUTHENTICATED=new Yr(null),Yr.GOOGLE_CREDENTIALS=new Yr("google-credentials-uid"),Yr.FIRST_PARTY=new Yr("first-party-uid"),Yr.MOCK_USER=new Yr("mock-user");let wl="10.5.1";const Va=new Pe.Yd("@firebase/firestore");function Gl(){return Va.logLevel}function Tt(i,...e){if(Va.logLevel<=Pe.in.DEBUG){const n=e.map(sl);Va.debug(`Firestore (${wl}): ${i}`,...n)}}function Si(i,...e){if(Va.logLevel<=Pe.in.ERROR){const n=e.map(sl);Va.error(`Firestore (${wl}): ${i}`,...n)}}function Do(i,...e){if(Va.logLevel<=Pe.in.WARN){const n=e.map(sl);Va.warn(`Firestore (${wl}): ${i}`,...n)}}function sl(i){if("string"==typeof i)return i;try{return JSON.stringify(i)}catch{return i}}function on(i="Unexpected state"){const e=`FIRESTORE (${wl}) INTERNAL ASSERTION FAILED: `+i;throw Si(e),new Error(e)}function vn(i,e){i||on()}function Wt(i,e){return i}const nt={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class It extends $e.ZR{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Ks{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}class Ba{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class ph{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Yr.UNAUTHENTICATED))}shutdown(){}}class $l{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class ol{constructor(e){this.t=e,this.currentUser=Yr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){var o=this;let u=this.i;const p=W=>this.i!==u?(u=this.i,n(W)):Promise.resolve();let I=new Ks;this.o=()=>{this.i++,this.currentUser=this.u(),I.resolve(),I=new Ks,e.enqueueRetryable(()=>p(this.currentUser))};const M=()=>{const W=I;e.enqueueRetryable((0,Re.Z)(function*(){yield W.promise,yield p(o.currentUser)}))},U=W=>{Tt("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=W,this.auth.addAuthTokenListener(this.o),M()};this.t.onInit(W=>U(W)),setTimeout(()=>{if(!this.auth){const W=this.t.getImmediate({optional:!0});W?U(W):(Tt("FirebaseAuthCredentialsProvider","Auth not yet detected"),I.resolve(),I=new Ks)}},0),M()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(o=>this.i!==e?(Tt("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):o?(vn("string"==typeof o.accessToken),new Ba(o.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return vn(null===e||"string"==typeof e),new Yr(e)}}class Wc{constructor(e,n,o){this.l=e,this.h=n,this.P=o,this.type="FirstParty",this.user=Yr.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class hr{constructor(e,n,o){this.l=e,this.h=n,this.P=o}getToken(){return Promise.resolve(new Wc(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(Yr.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class qc{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Kc{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){const o=p=>{null!=p.error&&Tt("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${p.error.message}`);const I=p.token!==this.R;return this.R=p.token,Tt("FirebaseAppCheckTokenProvider",`Received ${I?"new":"existing"} token.`),I?n(p.token):Promise.resolve()};this.o=p=>{e.enqueueRetryable(()=>o(p))};const u=p=>{Tt("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=p,this.appCheck.addTokenListener(this.o)};this.A.onInit(p=>u(p)),setTimeout(()=>{if(!this.appCheck){const p=this.A.getImmediate({optional:!0});p?u(p):Tt("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(vn("string"==typeof n.token),this.R=n.token,new qc(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function Tr(i){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(i);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(n);else for(let o=0;o<i;o++)n[o]=Math.floor(256*Math.random());return n}class Cd{static newId(){const n=62*Math.floor(256/62);let o="";for(;o.length<20;){const u=Tr(40);for(let p=0;p<u.length;++p)o.length<20&&u[p]<n&&(o+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(u[p]%62))}return o}}function Yn(i,e){return i<e?-1:i>e?1:0}function ji(i,e,n){return i.length===e.length&&i.every((o,u)=>n(o,e[u]))}function Yc(i){return i+"\0"}class Ur{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new It(nt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new It(nt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new It(nt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new It(nt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Ur.fromMillis(Date.now())}static fromDate(e){return Ur.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),o=Math.floor(1e6*(e-1e3*n));return new Ur(n,o)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Yn(this.nanoseconds,e.nanoseconds):Yn(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class ln{constructor(e){this.timestamp=e}static fromTimestamp(e){return new ln(e)}static min(){return new ln(new Ur(0,0))}static max(){return new ln(new Ur(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class Co{constructor(e,n,o){void 0===n?n=0:n>e.length&&on(),void 0===o?o=e.length-n:o>e.length-n&&on(),this.segments=e,this.offset=n,this.len=o}get length(){return this.len}isEqual(e){return 0===Co.comparator(this,e)}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Co?e.forEach(o=>{n.push(o)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,o=this.limit();n<o;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const o=Math.min(e.length,n.length);for(let u=0;u<o;u++){const p=e.get(u),I=n.get(u);if(p<I)return-1;if(p>I)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class or extends Co{construct(e,n,o){return new or(e,n,o)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const n=[];for(const o of e){if(o.indexOf("//")>=0)throw new It(nt.INVALID_ARGUMENT,`Invalid segment (${o}). Paths must not contain // in them.`);n.push(...o.split("/").filter(u=>u.length>0))}return new or(n)}static emptyPath(){return new or([])}}const Ad=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class vi extends Co{construct(e,n,o){return new vi(e,n,o)}static isValidIdentifier(e){return Ad.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),vi.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new vi(["__name__"])}static fromServerFormat(e){const n=[];let o="",u=0;const p=()=>{if(0===o.length)throw new It(nt.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(o),o=""};let I=!1;for(;u<e.length;){const M=e[u];if("\\"===M){if(u+1===e.length)throw new It(nt.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const U=e[u+1];if("\\"!==U&&"."!==U&&"`"!==U)throw new It(nt.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);o+=U,u+=2}else"`"===M?(I=!I,u++):"."!==M||I?(o+=M,u++):(p(),u++)}if(p(),I)throw new It(nt.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new vi(n)}static emptyPath(){return new vi([])}}class Qt{constructor(e){this.path=e}static fromPath(e){return new Qt(or.fromString(e))}static fromName(e){return new Qt(or.fromString(e).popFirst(5))}static empty(){return new Qt(or.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===or.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,n){return or.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Qt(new or(e.slice()))}}class Ri{constructor(e,n,o,u){this.indexId=e,this.collectionGroup=n,this.fields=o,this.indexState=u}}function Ea(i){return i.fields.find(e=>2===e.kind)}function ua(i){return i.fields.filter(e=>2!==e.kind)}Ri.UNKNOWN_ID=-1;class ho{constructor(e,n){this.fieldPath=e,this.kind=n}}class Hu{constructor(e,n){this.sequenceNumber=e,this.offset=n}static empty(){return new Hu(0,Ao.min())}}function Wl(i,e){const n=i.toTimestamp().seconds,o=i.toTimestamp().nanoseconds+1,u=ln.fromTimestamp(1e9===o?new Ur(n+1,0):new Ur(n,o));return new Ao(u,Qt.empty(),e)}function gh(i){return new Ao(i.readTime,i.key,-1)}class Ao{constructor(e,n,o){this.readTime=e,this.documentKey=n,this.largestBatchId=o}static min(){return new Ao(ln.min(),Qt.empty(),-1)}static max(){return new Ao(ln.max(),Qt.empty(),-1)}}function Gu(i,e){let n=i.readTime.compareTo(e.readTime);return 0!==n?n:(n=Qt.comparator(i.documentKey,e.documentKey),0!==n?n:Yn(i.largestBatchId,e.largestBatchId))}const R="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class k{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function A(i){return L.apply(this,arguments)}function L(){return L=(0,Re.Z)(function*(i){if(i.code!==nt.FAILED_PRECONDITION||i.message!==R)throw i;Tt("LocalStore","Unexpectedly lost primary lease")}),L.apply(this,arguments)}class V{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&on(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new V((o,u)=>{this.nextCallback=p=>{this.wrapSuccess(e,p).next(o,u)},this.catchCallback=p=>{this.wrapFailure(n,p).next(o,u)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof V?n:V.resolve(n)}catch(n){return V.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):V.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):V.reject(n)}static resolve(e){return new V((n,o)=>{n(e)})}static reject(e){return new V((n,o)=>{o(e)})}static waitFor(e){return new V((n,o)=>{let u=0,p=0,I=!1;e.forEach(M=>{++u,M.next(()=>{++p,I&&p===u&&n()},U=>o(U))}),I=!0,p===u&&n()})}static or(e){let n=V.resolve(!1);for(const o of e)n=n.next(u=>u?V.resolve(u):o());return n}static forEach(e,n){const o=[];return e.forEach((u,p)=>{o.push(n.call(this,u,p))}),this.waitFor(o)}static mapArray(e,n){return new V((o,u)=>{const p=e.length,I=new Array(p);let M=0;for(let U=0;U<p;U++){const W=U;n(e[W]).next(ee=>{I[W]=ee,++M,M===p&&o(I)},ee=>u(ee))}})}static doWhile(e,n){return new V((o,u)=>{const p=()=>{!0===e()?n().next(()=>{p()},u):o()};p()})}}class te{constructor(e,n){this.action=e,this.transaction=n,this.aborted=!1,this.V=new Ks,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{n.error?this.V.reject(new Ze(e,n.error)):this.V.resolve()},this.transaction.onerror=o=>{const u=Hi(o.target.error);this.V.reject(new Ze(e,u))}}static open(e,n,o,u){try{return new te(n,e.transaction(u,o))}catch(p){throw new Ze(n,p)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(Tt("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const n=this.transaction.objectStore(e);return new Zn(n)}}class he{constructor(e,n,o){this.name=e,this.version=n,this.p=o,12.2===he.S((0,$e.z$)())&&Si("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Tt("SimpleDb","Removing database:",e),zr(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!(0,$e.hl)())return!1;if(he.C())return!0;const e=(0,$e.z$)(),n=he.S(e),o=0<n&&n<10,u=he.v(e),p=0<u&&u<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||o||p)}static C(){var e;return typeof process<"u"&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.F)}static M(e,n){return e.store(n)}static S(e){const n=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),o=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(o)}static v(e){const n=e.match(/Android ([\d.]+)/i),o=n?n[1].split(".").slice(0,2).join("."):"-1";return Number(o)}O(e){var n=this;return(0,Re.Z)(function*(){return n.db||(Tt("SimpleDb","Opening database:",n.name),n.db=yield new Promise((o,u)=>{const p=indexedDB.open(n.name,n.version);p.onsuccess=I=>{o(I.target.result)},p.onblocked=()=>{u(new Ze(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},p.onerror=I=>{const M=I.target.error;u("VersionError"===M.name?new It(nt.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===M.name?new It(nt.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+M):new Ze(e,M))},p.onupgradeneeded=I=>{Tt("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',I.oldVersion),n.p.N(I.target.result,p.transaction,I.oldVersion,n.version).next(()=>{Tt("SimpleDb","Database upgrade to version "+n.version+" complete")})}})),n.B&&(n.db.onversionchange=o=>n.B(o)),n.db})()}L(e){this.B=e,this.db&&(this.db.onversionchange=n=>e(n))}runTransaction(e,n,o,u){var p=this;return(0,Re.Z)(function*(){const I="readonly"===n;let M=0;for(;;){++M;try{p.db=yield p.O(e);const U=te.open(p.db,e,I?"readonly":"readwrite",o),W=u(U).next(ee=>(U.g(),ee)).catch(ee=>(U.abort(ee),V.reject(ee))).toPromise();return W.catch(()=>{}),yield U.m,W}catch(U){const W=U,ee="FirebaseError"!==W.name&&M<3;if(Tt("SimpleDb","Transaction failed with error:",W.message,"Retrying:",ee),p.close(),!ee)return Promise.reject(W)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class Qe{constructor(e){this.k=e,this.q=!1,this.K=null}get isDone(){return this.q}get $(){return this.K}set cursor(e){this.k=e}done(){this.q=!0}U(e){this.K=e}delete(){return zr(this.k.delete())}}class Ze extends It{constructor(e,n){super(nt.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${n}`),this.name="IndexedDbTransactionError"}}function Gt(i){return"IndexedDbTransactionError"===i.name}class Zn{constructor(e){this.store=e}put(e,n){let o;return void 0!==n?(Tt("SimpleDb","PUT",this.store.name,e,n),o=this.store.put(n,e)):(Tt("SimpleDb","PUT",this.store.name,"<auto-key>",e),o=this.store.put(e)),zr(o)}add(e){return Tt("SimpleDb","ADD",this.store.name,e,e),zr(this.store.add(e))}get(e){return zr(this.store.get(e)).next(n=>(void 0===n&&(n=null),Tt("SimpleDb","GET",this.store.name,e,n),n))}delete(e){return Tt("SimpleDb","DELETE",this.store.name,e),zr(this.store.delete(e))}count(){return Tt("SimpleDb","COUNT",this.store.name),zr(this.store.count())}W(e,n){const o=this.options(e,n);if(o.index||"function"!=typeof this.store.getAll){const u=this.cursor(o),p=[];return this.G(u,(I,M)=>{p.push(M)}).next(()=>p)}{const u=this.store.getAll(o.range);return new V((p,I)=>{u.onerror=M=>{I(M.target.error)},u.onsuccess=M=>{p(M.target.result)}})}}j(e,n){const o=this.store.getAll(e,null===n?void 0:n);return new V((u,p)=>{o.onerror=I=>{p(I.target.error)},o.onsuccess=I=>{u(I.target.result)}})}H(e,n){Tt("SimpleDb","DELETE ALL",this.store.name);const o=this.options(e,n);o.J=!1;const u=this.cursor(o);return this.G(u,(p,I,M)=>M.delete())}Y(e,n){let o;n?o=e:(o={},n=e);const u=this.cursor(o);return this.G(u,n)}Z(e){const n=this.cursor({});return new V((o,u)=>{n.onerror=p=>{const I=Hi(p.target.error);u(I)},n.onsuccess=p=>{const I=p.target.result;I?e(I.primaryKey,I.value).next(M=>{M?I.continue():o()}):o()}})}G(e,n){const o=[];return new V((u,p)=>{e.onerror=I=>{p(I.target.error)},e.onsuccess=I=>{const M=I.target.result;if(!M)return void u();const U=new Qe(M),W=n(M.primaryKey,M.value,U);if(W instanceof V){const ee=W.catch(fe=>(U.done(),V.reject(fe)));o.push(ee)}U.isDone?u():null===U.$?M.continue():M.continue(U.$)}}).next(()=>V.waitFor(o))}options(e,n){let o;return void 0!==e&&("string"==typeof e?o=e:n=e),{index:o,range:n}}cursor(e){let n="next";if(e.reverse&&(n="prev"),e.index){const o=this.store.index(e.index);return e.J?o.openKeyCursor(e.range,n):o.openCursor(e.range,n)}return this.store.openCursor(e.range,n)}}function zr(i){return new V((e,n)=>{i.onsuccess=o=>{e(o.target.result)},i.onerror=o=>{const u=Hi(o.target.error);n(u)}})}let kn=!1;function Hi(i){const e=he.S((0,$e.z$)());if(e>=12.2&&e<13){const n="An internal error was encountered in the Indexed Database server";if(i.message.indexOf(n)>=0){const o=new It("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return kn||(kn=!0,setTimeout(()=>{throw o},0)),o}}return i}class pi{constructor(e,n){this.asyncQueue=e,this.X=n,this.task=null}start(){this.ee(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}ee(e){var n=this;Tt("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,Re.Z)(function*(){n.task=null;try{Tt("IndexBackiller",`Documents written: ${yield n.X.te()}`)}catch(o){Gt(o)?Tt("IndexBackiller","Ignoring IndexedDB error during index backfill: ",o):yield A(o)}yield n.ee(6e4)}))}}class $u{constructor(e,n){this.localStore=e,this.persistence=n}te(e=50){var n=this;return(0,Re.Z)(function*(){return n.persistence.runTransaction("Backfill Indexes","readwrite-primary",o=>n.ne(o,e))})()}ne(e,n){const o=new Set;let u=n,p=!0;return V.doWhile(()=>!0===p&&u>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(I=>{if(null!==I&&!o.has(I))return Tt("IndexBackiller",`Processing collection: ${I}`),this.re(e,I,u).next(M=>{u-=M,o.add(I)});p=!1})).next(()=>n-u)}re(e,n,o){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,n).next(u=>this.localStore.localDocuments.getNextDocuments(e,n,u,o).next(p=>{const I=p.changes;return this.localStore.indexManager.updateIndexEntries(e,I).next(()=>this.ie(u,p)).next(M=>(Tt("IndexBackiller",`Updating offset: ${M}`),this.localStore.indexManager.updateCollectionGroup(e,n,M))).next(()=>I.size)}))}ie(e,n){let o=e;return n.changes.forEach((u,p)=>{const I=gh(p);Gu(I,o)>0&&(o=I)}),new Ao(o.readTime,o.documentKey,Math.max(n.batchId,e.largestBatchId))}}let is=(()=>{class i{constructor(n,o){this.previousValue=n,o&&(o.sequenceNumberHandler=u=>this.se(u),this.oe=u=>o.writeSequenceNumber(u))}se(n){return this.previousValue=Math.max(n,this.previousValue),this.previousValue}next(){const n=++this.previousValue;return this.oe&&this.oe(n),n}}return i._e=-1,i})();function Ua(i){return null==i}function Ta(i){return 0===i&&1/i==-1/0}function mh(i){return"number"==typeof i&&Number.isInteger(i)&&!Ta(i)&&i<=Number.MAX_SAFE_INTEGER&&i>=Number.MIN_SAFE_INTEGER}function Is(i){let e="";for(let n=0;n<i.length;n++)e.length>0&&(e=Ni(e)),e=_u(i.get(n),e);return Ni(e)}function _u(i,e){let n=e;const o=i.length;for(let u=0;u<o;u++){const p=i.charAt(u);switch(p){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=p}}return n}function Ni(i){return i+"\x01\x01"}function Ho(i){const e=i.length;if(vn(e>=2),2===e)return vn("\x01"===i.charAt(0)&&"\x01"===i.charAt(1)),or.emptyPath();const n=e-2,o=[];let u="";for(let p=0;p<e;){const I=i.indexOf("\x01",p);switch((I<0||I>n)&&on(),i.charAt(I+1)){case"\x01":const M=i.substring(p,I);let U;0===u.length?U=M:(u+=M,U=u,u=""),o.push(U);break;case"\x10":u+=i.substring(p,I),u+="\0";break;case"\x11":u+=i.substring(p,I+1);break;default:on()}p=I+2}return new or(o)}const Dl=["userId","batchId"];function ql(i,e){return[i,Is(e)]}function ba(i,e,n){return[i,Is(e),n]}const yu={},Go=["prefixPath","collectionGroup","readTime","documentId"],Kl=["prefixPath","collectionGroup","documentId"],_h=["collectionGroup","readTime","prefixPath","documentId"],vu=["canonicalId","targetId"],Iu=["targetId","path"],Ac=["path","targetId"],uf=["collectionId","parent"],Sd=["indexId","uid"],Ng=["uid","sequenceNumber"],zu=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],gp=["indexId","uid","orderedDocumentKey"],Zc=["userId","collectionPath","documentId"],mp=["userId","collectionPath","largestBatchId"],Yl=["userId","collectionGroup","largestBatchId"],al=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],cf=[...al,"documentOverlays"],Os=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Wu=Os,Rd=[...Wu,"indexConfiguration","indexState","indexEntries"];class Eu extends k{constructor(e,n){super(),this.ae=e,this.currentSequenceNumber=n}}function ss(i,e){const n=Wt(i);return he.M(n.ae,e)}function qu(i){let e=0;for(const n in i)Object.prototype.hasOwnProperty.call(i,n)&&e++;return e}function Ku(i,e){for(const n in i)Object.prototype.hasOwnProperty.call(i,n)&&e(n,i[n])}function $o(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}class ci{constructor(e,n){this.comparator=e,this.root=n||os.EMPTY}insert(e,n){return new ci(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,os.BLACK,null,null))}remove(e){return new ci(this.comparator,this.root.remove(e,this.comparator).copy(null,null,os.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const o=this.comparator(e,n.key);if(0===o)return n.value;o<0?n=n.left:o>0&&(n=n.right)}return null}indexOf(e){let n=0,o=this.root;for(;!o.isEmpty();){const u=this.comparator(e,o.key);if(0===u)return n+o.left.size;u<0?o=o.left:(n+=o.left.size+1,o=o.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,o)=>(e(n,o),!1))}toString(){const e=[];return this.inorderTraversal((n,o)=>(e.push(`${n}:${o}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new ll(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new ll(this.root,e,this.comparator,!1)}getReverseIterator(){return new ll(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new ll(this.root,e,this.comparator,!0)}}class ll{constructor(e,n,o,u){this.isReverse=u,this.nodeStack=[];let p=1;for(;!e.isEmpty();)if(p=n?o(e.key,n):1,n&&u&&(p*=-1),p<0)e=this.isReverse?e.left:e.right;else{if(0===p){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class os{constructor(e,n,o,u,p){this.key=e,this.value=n,this.color=o??os.RED,this.left=u??os.EMPTY,this.right=p??os.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,o,u,p){return new os(e??this.key,n??this.value,o??this.color,u??this.left,p??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,o){let u=this;const p=o(e,u.key);return u=p<0?u.copy(null,null,null,u.left.insert(e,n,o),null):0===p?u.copy(null,n,null,null,null):u.copy(null,null,null,null,u.right.insert(e,n,o)),u.fixUp()}removeMin(){if(this.left.isEmpty())return os.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let o,u=this;if(n(e,u.key)<0)u.left.isEmpty()||u.left.isRed()||u.left.left.isRed()||(u=u.moveRedLeft()),u=u.copy(null,null,null,u.left.remove(e,n),null);else{if(u.left.isRed()&&(u=u.rotateRight()),u.right.isEmpty()||u.right.isRed()||u.right.left.isRed()||(u=u.moveRedRight()),0===n(e,u.key)){if(u.right.isEmpty())return os.EMPTY;o=u.right.min(),u=u.copy(o.key,o.value,null,null,u.right.removeMin())}u=u.copy(null,null,null,null,u.right.remove(e,n))}return u.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,os.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,os.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw on();const e=this.left.check();if(e!==this.right.check())throw on();return e+(this.isRed()?0:1)}}os.EMPTY=null,os.RED=!0,os.BLACK=!1,os.EMPTY=new class{constructor(){this.size=0}get key(){throw on()}get value(){throw on()}get color(){throw on()}get left(){throw on()}get right(){throw on()}copy(e,n,o,u,p){return this}insert(e,n,o){return new os(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Zr{constructor(e){this.comparator=e,this.data=new ci(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,o)=>(e(n),!1))}forEachInRange(e,n){const o=this.data.getIteratorFrom(e[0]);for(;o.hasNext();){const u=o.getNext();if(this.comparator(u.key,e[1])>=0)return;n(u.key)}}forEachWhile(e,n){let o;for(o=void 0!==n?this.data.getIteratorFrom(n):this.data.getIterator();o.hasNext();)if(!e(o.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Zl(this.data.getIterator())}getIteratorFrom(e){return new Zl(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(o=>{n=n.add(o)}),n}isEqual(e){if(!(e instanceof Zr)||this.size!==e.size)return!1;const n=this.data.getIterator(),o=e.data.getIterator();for(;n.hasNext();){const u=n.getNext().key,p=o.getNext().key;if(0!==this.comparator(u,p))return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Zr(this.comparator);return n.data=e,n}}class Zl{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Yu(i){return i.hasNext()?i.getNext():void 0}class ca{constructor(e){this.fields=e,e.sort(vi.comparator)}static empty(){return new ca([])}unionWith(e){let n=new Zr(vi.comparator);for(const o of this.fields)n=n.add(o);for(const o of e)n=n.add(o);return new ca(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return ji(this.fields,e.fields,(n,o)=>n.isEqual(o))}}class Zu extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Bs{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(u){try{return atob(u)}catch(p){throw typeof DOMException<"u"&&p instanceof DOMException?new Zu("Invalid base64 string: "+p):p}}(e);return new Bs(n)}static fromUint8Array(e){const n=function(u){let p="";for(let I=0;I<u.length;++I)p+=String.fromCharCode(u[I]);return p}(e);return new Bs(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(n){const o=new Uint8Array(n.length);for(let u=0;u<n.length;u++)o[u]=n.charCodeAt(u);return o}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Yn(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Bs.EMPTY_BYTE_STRING=new Bs("");const Qu=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ql(i){if(vn(!!i),"string"==typeof i){let e=0;const n=Qu.exec(i);if(vn(!!n),n[1]){let u=n[1];u=(u+"000000000").substr(0,9),e=Number(u)}const o=new Date(i);return{seconds:Math.floor(o.getTime()/1e3),nanos:e}}return{seconds:si(i.seconds),nanos:si(i.nanos)}}function si(i){return"number"==typeof i?i:"string"==typeof i?Number(i):0}function Rr(i){return"string"==typeof i?Bs.fromBase64String(i):Bs.fromUint8Array(i)}function da(i){var e,n;return"server_timestamp"===(null===(n=((null===(e=i?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function Jl(i){const e=i.mapValue.fields.__previous_value__;return da(e)?Jl(e):e}function ul(i){const e=Ql(i.mapValue.fields.__local_write_time__.timestampValue);return new Ur(e.seconds,e.nanos)}class Sc{constructor(e,n,o,u,p,I,M,U,W){this.databaseId=e,this.appId=n,this.persistenceKey=o,this.host=u,this.ssl=p,this.forceLongPolling=I,this.autoDetectLongPolling=M,this.longPollingOptions=U,this.useFetchStreams=W}}class wa{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new wa("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof wa&&e.projectId===this.projectId&&e.database===this.database}}const Pi={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Ju={nullValue:"NULL_VALUE"};function Cl(i){return"nullValue"in i?0:"booleanValue"in i?1:"integerValue"in i||"doubleValue"in i?2:"timestampValue"in i?3:"stringValue"in i?5:"bytesValue"in i?6:"referenceValue"in i?7:"geoPointValue"in i?8:"arrayValue"in i?9:"mapValue"in i?da(i)?4:Jc(i)?9007199254740991:10:on()}function ha(i,e){if(i===e)return!0;const n=Cl(i);if(n!==Cl(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return i.booleanValue===e.booleanValue;case 4:return ul(i).isEqual(ul(e));case 3:return function(u,p){if("string"==typeof u.timestampValue&&"string"==typeof p.timestampValue&&u.timestampValue.length===p.timestampValue.length)return u.timestampValue===p.timestampValue;const I=Ql(u.timestampValue),M=Ql(p.timestampValue);return I.seconds===M.seconds&&I.nanos===M.nanos}(i,e);case 5:return i.stringValue===e.stringValue;case 6:return p=e,Rr(i.bytesValue).isEqual(Rr(p.bytesValue));case 7:return i.referenceValue===e.referenceValue;case 8:return function(u,p){return si(u.geoPointValue.latitude)===si(p.geoPointValue.latitude)&&si(u.geoPointValue.longitude)===si(p.geoPointValue.longitude)}(i,e);case 2:return function(u,p){if("integerValue"in u&&"integerValue"in p)return si(u.integerValue)===si(p.integerValue);if("doubleValue"in u&&"doubleValue"in p){const I=si(u.doubleValue),M=si(p.doubleValue);return I===M?Ta(I)===Ta(M):isNaN(I)&&isNaN(M)}return!1}(i,e);case 9:return ji(i.arrayValue.values||[],e.arrayValue.values||[],ha);case 10:return function(u,p){const I=u.mapValue.fields||{},M=p.mapValue.fields||{};if(qu(I)!==qu(M))return!1;for(const U in I)if(I.hasOwnProperty(U)&&(void 0===M[U]||!ha(I[U],M[U])))return!1;return!0}(i,e);default:return on()}var p}function Al(i,e){return void 0!==(i.values||[]).find(n=>ha(n,e))}function Sl(i,e){if(i===e)return 0;const n=Cl(i),o=Cl(e);if(n!==o)return Yn(n,o);switch(n){case 0:case 9007199254740991:return 0;case 1:return Yn(i.booleanValue,e.booleanValue);case 2:return function(p,I){const M=si(p.integerValue||p.doubleValue),U=si(I.integerValue||I.doubleValue);return M<U?-1:M>U?1:M===U?0:isNaN(M)?isNaN(U)?0:-1:1}(i,e);case 3:return Qc(i.timestampValue,e.timestampValue);case 4:return Qc(ul(i),ul(e));case 5:return Yn(i.stringValue,e.stringValue);case 6:return function(p,I){const M=Rr(p),U=Rr(I);return M.compareTo(U)}(i.bytesValue,e.bytesValue);case 7:return function(p,I){const M=p.split("/"),U=I.split("/");for(let W=0;W<M.length&&W<U.length;W++){const ee=Yn(M[W],U[W]);if(0!==ee)return ee}return Yn(M.length,U.length)}(i.referenceValue,e.referenceValue);case 8:return function(p,I){const M=Yn(si(p.latitude),si(I.latitude));return 0!==M?M:Yn(si(p.longitude),si(I.longitude))}(i.geoPointValue,e.geoPointValue);case 9:return function(p,I){const M=p.values||[],U=I.values||[];for(let W=0;W<M.length&&W<U.length;++W){const ee=Sl(M[W],U[W]);if(ee)return ee}return Yn(M.length,U.length)}(i.arrayValue,e.arrayValue);case 10:return function(p,I){if(p===Pi.mapValue&&I===Pi.mapValue)return 0;if(p===Pi.mapValue)return 1;if(I===Pi.mapValue)return-1;const M=p.fields||{},U=Object.keys(M),W=I.fields||{},ee=Object.keys(W);U.sort(),ee.sort();for(let fe=0;fe<U.length&&fe<ee.length;++fe){const Me=Yn(U[fe],ee[fe]);if(0!==Me)return Me;const tt=Sl(M[U[fe]],W[ee[fe]]);if(0!==tt)return tt}return Yn(U.length,ee.length)}(i.mapValue,e.mapValue);default:throw on()}}function Qc(i,e){if("string"==typeof i&&"string"==typeof e&&i.length===e.length)return Yn(i,e);const n=Ql(i),o=Ql(e),u=Yn(n.seconds,o.seconds);return 0!==u?u:Yn(n.nanos,o.nanos)}function ja(i){return fa(i)}function fa(i){return"nullValue"in i?"null":"booleanValue"in i?""+i.booleanValue:"integerValue"in i?""+i.integerValue:"doubleValue"in i?""+i.doubleValue:"timestampValue"in i?function(n){const o=Ql(n);return`time(${o.seconds},${o.nanos})`}(i.timestampValue):"stringValue"in i?i.stringValue:"bytesValue"in i?Rr(i.bytesValue).toBase64():"referenceValue"in i?Qt.fromName(i.referenceValue).toString():"geoPointValue"in i?function(n){return`geo(${n.latitude},${n.longitude})`}(i.geoPointValue):"arrayValue"in i?function(n){let o="[",u=!0;for(const p of n.values||[])u?u=!1:o+=",",o+=fa(p);return o+"]"}(i.arrayValue):"mapValue"in i?function(n){const o=Object.keys(n.fields||{}).sort();let u="{",p=!0;for(const I of o)p?p=!1:u+=",",u+=`${I}:${fa(n.fields[I])}`;return u+"}"}(i.mapValue):on()}function Xl(i,e){return{referenceValue:`projects/${i.projectId}/databases/${i.database}/documents/${e.path.canonicalString()}`}}function cl(i){return!!i&&"integerValue"in i}function dl(i){return!!i&&"arrayValue"in i}function Tu(i){return!!i&&"nullValue"in i}function eu(i){return!!i&&"doubleValue"in i&&isNaN(Number(i.doubleValue))}function Nd(i){return!!i&&"mapValue"in i}function Xu(i){if(i.geoPointValue)return{geoPointValue:Object.assign({},i.geoPointValue)};if(i.timestampValue&&"object"==typeof i.timestampValue)return{timestampValue:Object.assign({},i.timestampValue)};if(i.mapValue){const e={mapValue:{fields:{}}};return Ku(i.mapValue.fields,(n,o)=>e.mapValue.fields[n]=Xu(o)),e}if(i.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(i.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Xu(i.arrayValue.values[n]);return e}return Object.assign({},i)}function Jc(i){return"__max__"===(((i.mapValue||{}).fields||{}).__type__||{}).stringValue}function yp(i){return"nullValue"in i?Ju:"booleanValue"in i?{booleanValue:!1}:"integerValue"in i||"doubleValue"in i?{doubleValue:NaN}:"timestampValue"in i?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in i?{stringValue:""}:"bytesValue"in i?{bytesValue:""}:"referenceValue"in i?Xl(wa.empty(),Qt.empty()):"geoPointValue"in i?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in i?{arrayValue:{}}:"mapValue"in i?{mapValue:{}}:on()}function vp(i){return"nullValue"in i?{booleanValue:!1}:"booleanValue"in i?{doubleValue:NaN}:"integerValue"in i||"doubleValue"in i?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in i?{stringValue:""}:"stringValue"in i?{bytesValue:""}:"bytesValue"in i?Xl(wa.empty(),Qt.empty()):"referenceValue"in i?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in i?{arrayValue:{}}:"arrayValue"in i?{mapValue:{}}:"mapValue"in i?Pi:on()}function df(i,e){const n=Sl(i.value,e.value);return 0!==n?n:i.inclusive&&!e.inclusive?-1:!i.inclusive&&e.inclusive?1:0}function Wr(i,e){const n=Sl(i.value,e.value);return 0!==n?n:i.inclusive&&!e.inclusive?1:!i.inclusive&&e.inclusive?-1:0}class Es{constructor(e){this.value=e}static empty(){return new Es({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let o=0;o<e.length-1;++o)if(n=(n.mapValue.fields||{})[e.get(o)],!Nd(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Xu(n)}setAll(e){let n=vi.emptyPath(),o={},u=[];e.forEach((I,M)=>{if(!n.isImmediateParentOf(M)){const U=this.getFieldsMap(n);this.applyChanges(U,o,u),o={},u=[],n=M.popLast()}I?o[M.lastSegment()]=Xu(I):u.push(M.lastSegment())});const p=this.getFieldsMap(n);this.applyChanges(p,o,u)}delete(e){const n=this.field(e.popLast());Nd(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return ha(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let o=0;o<e.length;++o){let u=n.mapValue.fields[e.get(o)];Nd(u)&&u.mapValue.fields||(u={mapValue:{fields:{}}},n.mapValue.fields[e.get(o)]=u),n=u}return n.mapValue.fields}applyChanges(e,n,o){Ku(n,(u,p)=>e[u]=p);for(const u of o)delete e[u]}clone(){return new Es(Xu(this.value))}}function Xc(i){const e=[];return Ku(i.fields,(n,o)=>{const u=new vi([n]);if(Nd(o)){const p=Xc(o.mapValue).fields;if(0===p.length)e.push(u);else for(const I of p)e.push(u.child(I))}else e.push(u)}),new ca(e)}class ar{constructor(e,n,o,u,p,I,M){this.key=e,this.documentType=n,this.version=o,this.readTime=u,this.createTime=p,this.data=I,this.documentState=M}static newInvalidDocument(e){return new ar(e,0,ln.min(),ln.min(),ln.min(),Es.empty(),0)}static newFoundDocument(e,n,o,u){return new ar(e,1,n,ln.min(),o,u,0)}static newNoDocument(e,n){return new ar(e,2,n,ln.min(),ln.min(),Es.empty(),0)}static newUnknownDocument(e,n){return new ar(e,3,n,ln.min(),ln.min(),Es.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(ln.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Es.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Es.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ln.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof ar&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new ar(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class hl{constructor(e,n){this.position=e,this.inclusive=n}}function ec(i,e,n){let o=0;for(let u=0;u<i.position.length;u++){const p=e[u],I=i.position[u];if(o=p.field.isKeyField()?Qt.comparator(Qt.fromName(I.referenceValue),n.key):Sl(I,n.data.field(p.field)),"desc"===p.dir&&(o*=-1),0!==o)break}return o}function Pd(i,e){if(null===i)return null===e;if(null===e||i.inclusive!==e.inclusive||i.position.length!==e.position.length)return!1;for(let n=0;n<i.position.length;n++)if(!ha(i.position[n],e.position[n]))return!1;return!0}class Us{constructor(e,n="asc"){this.field=e,this.dir=n}}function tu(i,e){return i.dir===e.dir&&i.field.isEqual(e.field)}class tc{}class yr extends tc{constructor(e,n,o){super(),this.field=e,this.op=n,this.value=o}static create(e,n,o){return e.isKeyField()?"in"===n||"not-in"===n?this.createKeyFieldInFilter(e,n,o):new Rc(e,n,o):"array-contains"===n?new Md(e,o):"in"===n?new iu(e,o):"not-in"===n?new xd(e,o):"array-contains-any"===n?new sc(e,o):new yr(e,n,o)}static createKeyFieldInFilter(e,n,o){return"in"===n?new Ep(e,o):new Pg(e,o)}matches(e){const n=e.data.field(this.field);return"!="===this.op?null!==n&&this.matchesComparison(Sl(n,this.value)):null!==n&&Cl(this.value)===Cl(n)&&this.matchesComparison(Sl(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return on()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class qr extends tc{constructor(e,n){super(),this.filters=e,this.op=n,this.ue=null}static create(e,n){return new qr(e,n)}matches(e){return nc(this)?void 0===this.filters.find(n=>!n.matches(e)):void 0!==this.filters.find(n=>n.matches(e))}getFlattenedFilters(){return null!==this.ue||(this.ue=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ue}getFilters(){return Object.assign([],this.filters)}}function nc(i){return"and"===i.op}function rc(i){return"or"===i.op}function nu(i){return yh(i)&&nc(i)}function yh(i){for(const e of i.filters)if(e instanceof qr)return!1;return!0}function Ms(i){if(i instanceof yr)return i.field.canonicalString()+i.op.toString()+ja(i.value);if(nu(i))return i.filters.map(e=>Ms(e)).join(",");{const e=i.filters.map(n=>Ms(n)).join(",");return`${i.op}(${e})`}}function Od(i,e){return i instanceof yr?(o=i,(u=e)instanceof yr&&o.op===u.op&&o.field.isEqual(u.field)&&ha(o.value,u.value)):i instanceof qr?function(o,u){return u instanceof qr&&o.op===u.op&&o.filters.length===u.filters.length&&o.filters.reduce((p,I,M)=>p&&Od(I,u.filters[M]),!0)}(i,e):void on();var o,u}function ru(i,e){const n=i.filters.concat(e);return qr.create(n,i.op)}function Ip(i){return i instanceof yr?`${(n=i).field.canonicalString()} ${n.op} ${ja(n.value)}`:i instanceof qr?function(n){return n.op.toString()+" {"+n.getFilters().map(Ip).join(" ,")+"}"}(i):"Filter";var n}class Rc extends yr{constructor(e,n,o){super(e,n,o),this.key=Qt.fromName(o.referenceValue)}matches(e){const n=Qt.comparator(e.key,this.key);return this.matchesComparison(n)}}class Ep extends yr{constructor(e,n){super(e,"in",n),this.keys=ic(0,n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class Pg extends yr{constructor(e,n){super(e,"not-in",n),this.keys=ic(0,n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function ic(i,e){var n;return((null===(n=e.arrayValue)||void 0===n?void 0:n.values)||[]).map(o=>Qt.fromName(o.referenceValue))}class Md extends yr{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return dl(n)&&Al(n.arrayValue,this.value)}}class iu extends yr{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return null!==n&&Al(this.value.arrayValue,n)}}class xd extends yr{constructor(e,n){super(e,"not-in",n)}matches(e){if(Al(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return null!==n&&!Al(this.value.arrayValue,n)}}class sc extends yr{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!dl(n)||!n.arrayValue.values)&&n.arrayValue.values.some(o=>Al(this.value.arrayValue,o))}}class Nc{constructor(e,n=null,o=[],u=[],p=null,I=null,M=null){this.path=e,this.collectionGroup=n,this.orderBy=o,this.filters=u,this.limit=p,this.startAt=I,this.endAt=M,this.ce=null}}function ed(i,e=null,n=[],o=[],u=null,p=null,I=null){return new Nc(i,e,n,o,u,p,I)}function Ha(i){const e=Wt(i);if(null===e.ce){let n=e.path.canonicalString();null!==e.collectionGroup&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(o=>Ms(o)).join(","),n+="|ob:",n+=e.orderBy.map(o=>{return(p=o).field.canonicalString()+p.dir;var p}).join(","),Ua(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(o=>ja(o)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(o=>ja(o)).join(",")),e.ce=n}return e.ce}function oc(i,e){if(i.limit!==e.limit||i.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<i.orderBy.length;n++)if(!tu(i.orderBy[n],e.orderBy[n]))return!1;if(i.filters.length!==e.filters.length)return!1;for(let n=0;n<i.filters.length;n++)if(!Od(i.filters[n],e.filters[n]))return!1;return i.collectionGroup===e.collectionGroup&&!!i.path.isEqual(e.path)&&!!Pd(i.startAt,e.startAt)&&Pd(i.endAt,e.endAt)}function bu(i){return Qt.isDocumentKey(i.path)&&null===i.collectionGroup&&0===i.filters.length}function wu(i,e){return i.filters.filter(n=>n instanceof yr&&n.field.isEqual(e))}function kd(i,e,n){let o=Ju,u=!0;for(const p of wu(i,e)){let I=Ju,M=!0;switch(p.op){case"<":case"<=":I=yp(p.value);break;case"==":case"in":case">=":I=p.value;break;case">":I=p.value,M=!1;break;case"!=":case"not-in":I=Ju}df({value:o,inclusive:u},{value:I,inclusive:M})<0&&(o=I,u=M)}if(null!==n)for(let p=0;p<i.orderBy.length;++p)if(i.orderBy[p].field.isEqual(e)){const I=n.position[p];df({value:o,inclusive:u},{value:I,inclusive:n.inclusive})<0&&(o=I,u=n.inclusive);break}return{value:o,inclusive:u}}function vh(i,e,n){let o=Pi,u=!0;for(const p of wu(i,e)){let I=Pi,M=!0;switch(p.op){case">=":case">":I=vp(p.value),M=!1;break;case"==":case"in":case"<=":I=p.value;break;case"<":I=p.value,M=!1;break;case"!=":case"not-in":I=Pi}Wr({value:o,inclusive:u},{value:I,inclusive:M})>0&&(o=I,u=M)}if(null!==n)for(let p=0;p<i.orderBy.length;++p)if(i.orderBy[p].field.isEqual(e)){const I=n.position[p];Wr({value:o,inclusive:u},{value:I,inclusive:n.inclusive})>0&&(o=I,u=n.inclusive);break}return{value:o,inclusive:u}}class js{constructor(e,n=null,o=[],u=[],p=null,I="F",M=null,U=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=o,this.filters=u,this.limit=p,this.limitType=I,this.startAt=M,this.endAt=U,this.le=null,this.he=null,this.Pe=null}}function Ih(i,e,n,o,u,p,I,M){return new js(i,e,n,o,u,p,I,M)}function Pc(i){return new js(i)}function Fd(i){return 0===i.filters.length&&null===i.limit&&null==i.startAt&&null==i.endAt&&(0===i.explicitOrderBy.length||1===i.explicitOrderBy.length&&i.explicitOrderBy[0].field.isKeyField())}function P(i){return null!==i.collectionGroup}function y(i){const e=Wt(i);if(null===e.le){e.le=[];const n=new Set;for(const p of e.explicitOrderBy)e.le.push(p),n.add(p.field.canonicalString());const o=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(I){let M=new Zr(vi.comparator);return I.filters.forEach(U=>{U.getFlattenedFilters().forEach(W=>{W.isInequality()&&(M=M.add(W.field))})}),M})(e).forEach(p=>{n.has(p.canonicalString())||p.isKeyField()||e.le.push(new Us(p,o))}),n.has(vi.keyField().canonicalString())||e.le.push(new Us(vi.keyField(),o))}return e.le}function w(i){const e=Wt(i);return e.he||(e.he=function x(i,e){if("F"===i.limitType)return ed(i.path,i.collectionGroup,e,i.filters,i.limit,i.startAt,i.endAt);{e=e.map(u=>new Us(u.field,"desc"===u.dir?"asc":"desc"));const n=i.endAt?new hl(i.endAt.position,i.endAt.inclusive):null,o=i.startAt?new hl(i.startAt.position,i.startAt.inclusive):null;return ed(i.path,i.collectionGroup,e,i.filters,i.limit,n,o)}}(e,y(i))),e.he}function Q(i,e){const n=i.filters.concat([e]);return new js(i.path,i.collectionGroup,i.explicitOrderBy.slice(),n,i.limit,i.limitType,i.startAt,i.endAt)}function ce(i,e,n){return new js(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),e,n,i.startAt,i.endAt)}function je(i,e){return oc(w(i),w(e))&&i.limitType===e.limitType}function at(i){return`${Ha(w(i))}|lt:${i.limitType}`}function At(i){return`Query(target=${function(n){let o=n.path.canonicalString();return null!==n.collectionGroup&&(o+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(o+=`, filters: [${n.filters.map(u=>Ip(u)).join(", ")}]`),Ua(n.limit)||(o+=", limit: "+n.limit),n.orderBy.length>0&&(o+=`, orderBy: [${n.orderBy.map(u=>{return`${(I=u).field.canonicalString()} (${I.dir})`;var I}).join(", ")}]`),n.startAt&&(o+=", startAt: ",o+=n.startAt.inclusive?"b:":"a:",o+=n.startAt.position.map(u=>ja(u)).join(",")),n.endAt&&(o+=", endAt: ",o+=n.endAt.inclusive?"a:":"b:",o+=n.endAt.position.map(u=>ja(u)).join(",")),`Target(${o})`}(w(i))}; limitType=${i.limitType})`}function pn(i,e){return e.isFoundDocument()&&function(o,u){const p=u.key.path;return null!==o.collectionGroup?u.key.hasCollectionId(o.collectionGroup)&&o.path.isPrefixOf(p):Qt.isDocumentKey(o.path)?o.path.isEqual(p):o.path.isImmediateParentOf(p)}(i,e)&&function(o,u){for(const p of y(o))if(!p.field.isKeyField()&&null===u.data.field(p.field))return!1;return!0}(i,e)&&function(o,u){for(const p of o.filters)if(!p.matches(u))return!1;return!0}(i,e)&&(u=e,!((o=i).startAt&&!function(I,M,U){const W=ec(I,M,U);return I.inclusive?W<=0:W<0}(o.startAt,y(o),u)||o.endAt&&!function(I,M,U){const W=ec(I,M,U);return I.inclusive?W>=0:W>0}(o.endAt,y(o),u)));var o,u}function Rn(i){return i.collectionGroup||(i.path.length%2==1?i.path.lastSegment():i.path.get(i.path.length-2))}function Fr(i){return(e,n)=>{let o=!1;for(const u of y(i)){const p=Ca(u,e,n);if(0!==p)return p;o=o||u.field.isKeyField()}return 0}}function Ca(i,e,n){const o=i.field.isKeyField()?Qt.comparator(e.key,n.key):function(p,I,M){const U=I.data.field(p),W=M.data.field(p);return null!==U&&null!==W?Sl(U,W):on()}(i.field,e,n);switch(i.dir){case"asc":return o;case"desc":return-1*o;default:return on()}}class ro{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),o=this.inner[n];if(void 0!==o)for(const[u,p]of o)if(this.equalsFn(u,e))return p}has(e){return void 0!==this.get(e)}set(e,n){const o=this.mapKeyFn(e),u=this.inner[o];if(void 0===u)return this.inner[o]=[[e,n]],void this.innerSize++;for(let p=0;p<u.length;p++)if(this.equalsFn(u[p][0],e))return void(u[p]=[e,n]);u.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),o=this.inner[n];if(void 0===o)return!1;for(let u=0;u<o.length;u++)if(this.equalsFn(o[u][0],e))return 1===o.length?delete this.inner[n]:o.splice(u,1),this.innerSize--,!0;return!1}forEach(e){Ku(this.inner,(n,o)=>{for(const[u,p]of o)e(u,p)})}isEmpty(){return $o(this.inner)}size(){return this.innerSize}}const td=new ci(Qt.comparator);function So(){return td}const nd=new ci(Qt.comparator);function Du(...i){let e=nd;for(const n of i)e=e.insert(n.key,n);return e}function Ro(i){let e=nd;return i.forEach((n,o)=>e=e.insert(n,o.overlayedDocument)),e}function Nr(){return Rl()}function rd(){return Rl()}function Rl(){return new ro(i=>i.toString(),(i,e)=>i.isEqual(e))}const Cu=new ci(Qt.comparator),hf=new Zr(Qt.comparator);function fr(...i){let e=hf;for(const n of i)e=e.add(n);return e}const Oc=new Zr(Yn);function ff(){return Oc}function Ld(i,e){if(i.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ta(e)?"-0":e}}function Vd(i){return{integerValue:""+i}}function id(i,e){return mh(e)?Vd(e):Ld(i,e)}class Nl{constructor(){this._=void 0}}function Tp(i,e,n){return i instanceof zo?function(u,p){const I={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:u.seconds,nanos:u.nanoseconds}}}};return p&&da(p)&&(p=Jl(p)),p&&(I.fields.__previous_value__=p),{mapValue:I}}(n,e):i instanceof Aa?Mc(i,e):i instanceof Sa?ac(i,e):function(u,p){const I=gf(u,p),M=Au(I)+Au(u.Ie);return cl(I)&&cl(u.Ie)?Vd(M):Ld(u.serializer,M)}(i,e)}function pf(i,e,n){return i instanceof Aa?Mc(i,e):i instanceof Sa?ac(i,e):n}function gf(i,e){return i instanceof Ra?cl(o=e)||(p=o)&&"doubleValue"in p?e:{integerValue:0}:null;var o,p}class zo extends Nl{}class Aa extends Nl{constructor(e){super(),this.elements=e}}function Mc(i,e){const n=mf(e);for(const o of i.elements)n.some(u=>ha(u,o))||n.push(o);return{arrayValue:{values:n}}}class Sa extends Nl{constructor(e){super(),this.elements=e}}function ac(i,e){let n=mf(e);for(const o of i.elements)n=n.filter(u=>!ha(u,o));return{arrayValue:{values:n}}}class Ra extends Nl{constructor(e,n){super(),this.serializer=e,this.Ie=n}}function Au(i){return si(i.integerValue||i.doubleValue)}function mf(i){return dl(i)&&i.arrayValue.values?i.arrayValue.values.slice():[]}class sd{constructor(e,n){this.field=e,this.transform=n}}class Na{constructor(e,n){this.version=e,this.transformResults=n}}class xi{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new xi}static exists(e){return new xi(void 0,e)}static updateTime(e){return new xi(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Eh(i,e){return void 0!==i.updateTime?e.isFoundDocument()&&e.version.isEqual(i.updateTime):void 0===i.exists||i.exists===e.isFoundDocument()}class _f{}function Th(i,e){if(!i.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return i.isNoDocument()?new Su(i.key,xi.none()):new Ga(i.key,i.data,xi.none());{const n=i.data,o=Es.empty();let u=new Zr(vi.comparator);for(let p of e.fields)if(!u.has(p)){let I=n.field(p);null===I&&p.length>1&&(p=p.popLast(),I=n.field(p)),null===I?o.delete(p):o.set(p,I),u=u.add(p)}return new Pl(i.key,o,new ca(u.toArray()),xi.none())}}function bp(i,e,n){i instanceof Ga?function(u,p,I){const M=u.value.clone(),U=Bd(u.fieldTransforms,p,I.transformResults);M.setAll(U),p.convertToFoundDocument(I.version,M).setHasCommittedMutations()}(i,e,n):i instanceof Pl?function(u,p,I){if(!Eh(u.precondition,p))return void p.convertToUnknownDocument(I.version);const M=Bd(u.fieldTransforms,p,I.transformResults),U=p.data;U.setAll(Wo(u)),U.setAll(M),p.convertToFoundDocument(I.version,U).setHasCommittedMutations()}(i,e,n):e.convertToNoDocument(n.version).setHasCommittedMutations()}function bh(i,e,n,o){return i instanceof Ga?function(p,I,M,U){if(!Eh(p.precondition,I))return M;const W=p.value.clone(),ee=wp(p.fieldTransforms,U,I);return W.setAll(ee),I.convertToFoundDocument(I.version,W).setHasLocalMutations(),null}(i,e,n,o):i instanceof Pl?function(p,I,M,U){if(!Eh(p.precondition,I))return M;const W=wp(p.fieldTransforms,U,I),ee=I.data;return ee.setAll(Wo(p)),ee.setAll(W),I.convertToFoundDocument(I.version,ee).setHasLocalMutations(),null===M?null:M.unionWith(p.fieldMask.fields).unionWith(p.fieldTransforms.map(fe=>fe.field))}(i,e,n,o):(M=n,Eh(i.precondition,I=e)?(I.convertToNoDocument(I.version).setHasLocalMutations(),null):M);var I,M}function Pa(i,e){let n=null;for(const o of i.fieldTransforms){const u=e.data.field(o.field),p=gf(o.transform,u||null);null!=p&&(null===n&&(n=Es.empty()),n.set(o.field,p))}return n||null}function yf(i,e){return i.type===e.type&&!!i.key.isEqual(e.key)&&!!i.precondition.isEqual(e.precondition)&&(u=e.fieldTransforms,!!(void 0===(o=i.fieldTransforms)&&void 0===u||o&&u&&ji(o,u,(p,I)=>function Og(i,e){return i.field.isEqual(e.field)&&(u=e.transform,(o=i.transform)instanceof Aa&&u instanceof Aa||o instanceof Sa&&u instanceof Sa?ji(o.elements,u.elements,ha):o instanceof Ra&&u instanceof Ra?ha(o.Ie,u.Ie):o instanceof zo&&u instanceof zo);var o,u}(p,I))))&&(0===i.type?i.value.isEqual(e.value):1!==i.type||i.data.isEqual(e.data)&&i.fieldMask.isEqual(e.fieldMask));var o,u}class Ga extends _f{constructor(e,n,o,u=[]){super(),this.key=e,this.value=n,this.precondition=o,this.fieldTransforms=u,this.type=0}getFieldMask(){return null}}class Pl extends _f{constructor(e,n,o,u,p=[]){super(),this.key=e,this.data=n,this.fieldMask=o,this.precondition=u,this.fieldTransforms=p,this.type=1}getFieldMask(){return this.fieldMask}}function Wo(i){const e=new Map;return i.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const o=i.data.field(n);e.set(n,o)}}),e}function Bd(i,e,n){const o=new Map;vn(i.length===n.length);for(let u=0;u<n.length;u++){const p=i[u],I=p.transform,M=e.data.field(p.field);o.set(p.field,pf(I,M,n[u]))}return o}function wp(i,e,n){const o=new Map;for(const u of i){const p=u.transform,I=n.data.field(u.field);o.set(u.field,Tp(p,I,e))}return o}class Su extends _f{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class qo extends _f{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class Ud{constructor(e,n,o,u){this.batchId=e,this.localWriteTime=n,this.baseMutations=o,this.mutations=u}applyToRemoteDocument(e,n){const o=n.mutationResults;for(let u=0;u<this.mutations.length;u++){const p=this.mutations[u];p.key.isEqual(e.key)&&bp(p,e,o[u])}}applyToLocalView(e,n){for(const o of this.baseMutations)o.key.isEqual(e.key)&&(n=bh(o,e,n,this.localWriteTime));for(const o of this.mutations)o.key.isEqual(e.key)&&(n=bh(o,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const o=rd();return this.mutations.forEach(u=>{const p=e.get(u.key),I=p.overlayedDocument;let M=this.applyToLocalView(I,p.mutatedFields);M=n.has(u.key)?null:M;const U=Th(I,M);null!==U&&o.set(u.key,U),I.isValidDocument()||I.convertToNoDocument(ln.min())}),o}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),fr())}isEqual(e){return this.batchId===e.batchId&&ji(this.mutations,e.mutations,(n,o)=>yf(n,o))&&ji(this.baseMutations,e.baseMutations,(n,o)=>yf(n,o))}}class od{constructor(e,n,o,u){this.batch=e,this.commitVersion=n,this.mutationResults=o,this.docVersions=u}static from(e,n,o){vn(e.mutations.length===o.length);let u=Cu;const p=e.mutations;for(let I=0;I<p.length;I++)u=u.insert(p[I].key,o[I].version);return new od(e,n,o,u)}}class jd{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class ad{constructor(e,n){this.count=e,this.unchangedNames=n}}var as,Qr;function Hd(i){switch(i){default:return on();case nt.CANCELLED:case nt.UNKNOWN:case nt.DEADLINE_EXCEEDED:case nt.RESOURCE_EXHAUSTED:case nt.INTERNAL:case nt.UNAVAILABLE:case nt.UNAUTHENTICATED:return!1;case nt.INVALID_ARGUMENT:case nt.NOT_FOUND:case nt.ALREADY_EXISTS:case nt.PERMISSION_DENIED:case nt.FAILED_PRECONDITION:case nt.ABORTED:case nt.OUT_OF_RANGE:case nt.UNIMPLEMENTED:case nt.DATA_LOSS:return!0}}function pl(i){if(void 0===i)return Si("GRPC error has no .code"),nt.UNKNOWN;switch(i){case as.OK:return nt.OK;case as.CANCELLED:return nt.CANCELLED;case as.UNKNOWN:return nt.UNKNOWN;case as.DEADLINE_EXCEEDED:return nt.DEADLINE_EXCEEDED;case as.RESOURCE_EXHAUSTED:return nt.RESOURCE_EXHAUSTED;case as.INTERNAL:return nt.INTERNAL;case as.UNAVAILABLE:return nt.UNAVAILABLE;case as.UNAUTHENTICATED:return nt.UNAUTHENTICATED;case as.INVALID_ARGUMENT:return nt.INVALID_ARGUMENT;case as.NOT_FOUND:return nt.NOT_FOUND;case as.ALREADY_EXISTS:return nt.ALREADY_EXISTS;case as.PERMISSION_DENIED:return nt.PERMISSION_DENIED;case as.FAILED_PRECONDITION:return nt.FAILED_PRECONDITION;case as.ABORTED:return nt.ABORTED;case as.OUT_OF_RANGE:return nt.OUT_OF_RANGE;case as.UNIMPLEMENTED:return nt.UNIMPLEMENTED;case as.DATA_LOSS:return nt.DATA_LOSS;default:return on()}}(Qr=as||(as={}))[Qr.OK=0]="OK",Qr[Qr.CANCELLED=1]="CANCELLED",Qr[Qr.UNKNOWN=2]="UNKNOWN",Qr[Qr.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Qr[Qr.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Qr[Qr.NOT_FOUND=5]="NOT_FOUND",Qr[Qr.ALREADY_EXISTS=6]="ALREADY_EXISTS",Qr[Qr.PERMISSION_DENIED=7]="PERMISSION_DENIED",Qr[Qr.UNAUTHENTICATED=16]="UNAUTHENTICATED",Qr[Qr.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Qr[Qr.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Qr[Qr.ABORTED=10]="ABORTED",Qr[Qr.OUT_OF_RANGE=11]="OUT_OF_RANGE",Qr[Qr.UNIMPLEMENTED=12]="UNIMPLEMENTED",Qr[Qr.INTERNAL=13]="INTERNAL",Qr[Qr.UNAVAILABLE=14]="UNAVAILABLE",Qr[Qr.DATA_LOSS=15]="DATA_LOSS";function ld(){return new TextEncoder}const Dp=new la([4294967295,4294967295],0);function Cp(i){const e=ld().encode(i),n=new wo;return n.update(e),new Uint8Array(n.digest())}function D(i){const e=new DataView(i.buffer),n=e.getUint32(0,!0),o=e.getUint32(4,!0),u=e.getUint32(8,!0),p=e.getUint32(12,!0);return[new la([n,o],0),new la([u,p],0)]}class g{constructor(e,n,o){if(this.bitmap=e,this.padding=n,this.hashCount=o,n<0||n>=8)throw new v(`Invalid padding: ${n}`);if(o<0)throw new v(`Invalid hash count: ${o}`);if(e.length>0&&0===this.hashCount)throw new v(`Invalid hash count: ${o}`);if(0===e.length&&0!==n)throw new v(`Invalid padding when bitmap length is 0: ${n}`);this.Te=8*e.length-n,this.Ee=la.fromNumber(this.Te)}de(e,n,o){let u=e.add(n.multiply(la.fromNumber(o)));return 1===u.compare(Dp)&&(u=new la([u.getBits(0),u.getBits(1)],0)),u.modulo(this.Ee).toNumber()}Ae(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.Te)return!1;const n=Cp(e),[o,u]=D(n);for(let p=0;p<this.hashCount;p++){const I=this.de(o,u,p);if(!this.Ae(I))return!1}return!0}static create(e,n,o){const u=e%8==0?0:8-e%8,p=new Uint8Array(Math.ceil(e/8)),I=new g(p,u,n);return o.forEach(M=>I.insert(M)),I}insert(e){if(0===this.Te)return;const n=Cp(e),[o,u]=D(n);for(let p=0;p<this.hashCount;p++){const I=this.de(o,u,p);this.Re(I)}}Re(e){const n=Math.floor(e/8);this.bitmap[n]|=1<<e%8}}class v extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class C{constructor(e,n,o,u,p){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=o,this.documentUpdates=u,this.resolvedLimboDocuments=p}static createSynthesizedRemoteEventForCurrentChange(e,n,o){const u=new Map;return u.set(e,G.createSynthesizedTargetChangeForCurrentChange(e,n,o)),new C(ln.min(),u,new ci(Yn),So(),fr())}}class G{constructor(e,n,o,u,p){this.resumeToken=e,this.current=n,this.addedDocuments=o,this.modifiedDocuments=u,this.removedDocuments=p}static createSynthesizedTargetChangeForCurrentChange(e,n,o){return new G(o,n,fr(),fr(),fr())}}class X{constructor(e,n,o,u){this.Ve=e,this.removedTargetIds=n,this.key=o,this.me=u}}class De{constructor(e,n){this.targetId=e,this.fe=n}}class We{constructor(e,n,o=Bs.EMPTY_BYTE_STRING,u=null){this.state=e,this.targetIds=n,this.resumeToken=o,this.cause=u}}class gt{constructor(){this.ge=0,this.pe=yn(),this.ye=Bs.EMPTY_BYTE_STRING,this.we=!1,this.Se=!0}get current(){return this.we}get resumeToken(){return this.ye}get be(){return 0!==this.ge}get De(){return this.Se}Ce(e){e.approximateByteSize()>0&&(this.Se=!0,this.ye=e)}ve(){let e=fr(),n=fr(),o=fr();return this.pe.forEach((u,p)=>{switch(p){case 0:e=e.add(u);break;case 2:n=n.add(u);break;case 1:o=o.add(u);break;default:on()}}),new G(this.ye,this.we,e,n,o)}Fe(){this.Se=!1,this.pe=yn()}Me(e,n){this.Se=!0,this.pe=this.pe.insert(e,n)}xe(e){this.Se=!0,this.pe=this.pe.remove(e)}Oe(){this.ge+=1}Ne(){this.ge-=1}Be(){this.Se=!0,this.we=!0}}class rn{constructor(e){this.Le=e,this.ke=new Map,this.qe=So(),this.Qe=_n(),this.Ke=new ci(Yn)}$e(e){for(const n of e.Ve)e.me&&e.me.isFoundDocument()?this.Ue(n,e.me):this.We(n,e.key,e.me);for(const n of e.removedTargetIds)this.We(n,e.key,e.me)}Ge(e){this.forEachTarget(e,n=>{const o=this.ze(n);switch(e.state){case 0:this.je(n)&&o.Ce(e.resumeToken);break;case 1:o.Ne(),o.be||o.Fe(),o.Ce(e.resumeToken);break;case 2:o.Ne(),o.be||this.removeTarget(n);break;case 3:this.je(n)&&(o.Be(),o.Ce(e.resumeToken));break;case 4:this.je(n)&&(this.He(n),o.Ce(e.resumeToken));break;default:on()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ke.forEach((o,u)=>{this.je(u)&&n(u)})}Je(e){const n=e.targetId,o=e.fe.count,u=this.Ye(n);if(u){const p=u.target;if(bu(p))if(0===o){const I=new Qt(p.path);this.We(n,I,ar.newNoDocument(I,ln.min()))}else vn(1===o);else{const I=this.Ze(n);if(I!==o){const M=this.Xe(e),U=M?this.et(M,e,I):1;0!==U&&(this.He(n),this.Ke=this.Ke.insert(n,2===U?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch"))}}}}Xe(e){const n=e.fe.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:o="",padding:u=0},hashCount:p=0}=n;let I,M;try{I=Rr(o).toUint8Array()}catch(U){if(U instanceof Zu)return Do("Decoding the base64 bloom filter in existence filter failed ("+U.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw U}try{M=new g(I,u,p)}catch(U){return Do(U instanceof v?"BloomFilter error: ":"Applying bloom filter failed: ",U),null}return 0===M.Te?null:M}et(e,n,o){return n.fe.count===o-this.rt(e,n.targetId)?0:2}rt(e,n){const o=this.Le.getRemoteKeysForTarget(n);let u=0;return o.forEach(p=>{const I=this.Le.nt(),M=`projects/${I.projectId}/databases/${I.database}/documents/${p.path.canonicalString()}`;e.mightContain(M)||(this.We(n,p,null),u++)}),u}it(e){const n=new Map;this.ke.forEach((p,I)=>{const M=this.Ye(I);if(M){if(p.current&&bu(M.target)){const U=new Qt(M.target.path);null!==this.qe.get(U)||this.st(I,U)||this.We(I,U,ar.newNoDocument(U,e))}p.De&&(n.set(I,p.ve()),p.Fe())}});let o=fr();this.Qe.forEach((p,I)=>{let M=!0;I.forEachWhile(U=>{const W=this.Ye(U);return!W||"TargetPurposeLimboResolution"===W.purpose||(M=!1,!1)}),M&&(o=o.add(p))}),this.qe.forEach((p,I)=>I.setReadTime(e));const u=new C(e,n,this.Ke,this.qe,o);return this.qe=So(),this.Qe=_n(),this.Ke=new ci(Yn),u}Ue(e,n){if(!this.je(e))return;const o=this.st(e,n.key)?2:0;this.ze(e).Me(n.key,o),this.qe=this.qe.insert(n.key,n),this.Qe=this.Qe.insert(n.key,this.ot(n.key).add(e))}We(e,n,o){if(!this.je(e))return;const u=this.ze(e);this.st(e,n)?u.Me(n,1):u.xe(n),this.Qe=this.Qe.insert(n,this.ot(n).delete(e)),o&&(this.qe=this.qe.insert(n,o))}removeTarget(e){this.ke.delete(e)}Ze(e){const n=this.ze(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Oe(e){this.ze(e).Oe()}ze(e){let n=this.ke.get(e);return n||(n=new gt,this.ke.set(e,n)),n}ot(e){let n=this.Qe.get(e);return n||(n=new Zr(Yn),this.Qe=this.Qe.insert(e,n)),n}je(e){const n=null!==this.Ye(e);return n||Tt("WatchChangeAggregator","Detected inactive target",e),n}Ye(e){const n=this.ke.get(e);return n&&n.be?null:this.Le._t(e)}He(e){this.ke.set(e,new gt),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.We(e,n,null)})}st(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function _n(){return new ci(Qt.comparator)}function yn(){return new ci(Qt.comparator)}const ls={asc:"ASCENDING",desc:"DESCENDING"},Ol={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Ru={and:"AND",or:"OR"};class su{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function ou(i,e){return i.useProto3Json||Ua(e)?e:{value:e}}function Nu(i,e){return i.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function If(i,e){return i.useProto3Json?e.toBase64():e.toUint8Array()}function Ef(i,e){return Nu(i,e.toTimestamp())}function us(i){return vn(!!i),ln.fromTimestamp(function(n){const o=Ql(n);return new Ur(o.seconds,o.nanos)}(i))}function xc(i,e){return(o=i,new or(["projects",o.projectId,"databases",o.database])).child("documents").child(e).canonicalString();var o}function Pu(i){const e=or.fromString(i);return vn(Hm(e)),e}function ud(i,e){return xc(i.databaseId,e.path)}function gl(i,e){const n=Pu(e);if(n.get(1)!==i.databaseId.projectId)throw new It(nt.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+i.databaseId.projectId);if(n.get(3)!==i.databaseId.database)throw new It(nt.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+i.databaseId.database);return new Qt(Mg(n))}function Gd(i,e){return xc(i.databaseId,e)}function Ap(i){const e=Pu(i);return 4===e.length?or.emptyPath():Mg(e)}function kc(i){return new or(["projects",i.databaseId.projectId,"databases",i.databaseId.database]).canonicalString()}function Mg(i){return vn(i.length>4&&"documents"===i.get(4)),i.popFirst(5)}function Sp(i,e,n){return{name:ud(i,e),fields:n.value.mapValue.fields}}function Rp(i,e,n){const o=gl(i,e.name),u=us(e.updateTime),p=e.createTime?us(e.createTime):ln.min(),I=new Es({mapValue:{fields:e.fields}}),M=ar.newFoundDocument(o,u,p,I);return n&&M.setHasCommittedMutations(),n?M.setHasCommittedMutations():M}function Tf(i,e){let n;if(e instanceof Ga)n={update:Sp(i,e.key,e.value)};else if(e instanceof Su)n={delete:ud(i,e.key)};else if(e instanceof Pl)n={update:Sp(i,e.key,e.data),updateMask:ey(e.fieldMask)};else{if(!(e instanceof qo))return on();n={verify:ud(i,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(o=>function(p,I){const M=I.transform;if(M instanceof zo)return{fieldPath:I.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(M instanceof Aa)return{fieldPath:I.field.canonicalString(),appendMissingElements:{values:M.elements}};if(M instanceof Sa)return{fieldPath:I.field.canonicalString(),removeAllFromArray:{values:M.elements}};if(M instanceof Ra)return{fieldPath:I.field.canonicalString(),increment:M.Ie};throw on()}(0,o))),e.precondition.isNone||(n.currentDocument=void 0!==(p=e.precondition).updateTime?{updateTime:Ef(i,p.updateTime)}:void 0!==p.exists?{exists:p.exists}:on()),n;var p}function bf(i,e){const n=e.currentDocument?void 0!==(p=e.currentDocument).updateTime?xi.updateTime(us(p.updateTime)):void 0!==p.exists?xi.exists(p.exists):xi.none():xi.none(),o=e.updateTransforms?e.updateTransforms.map(u=>function(I,M){let U=null;"setToServerValue"in M?(vn("REQUEST_TIME"===M.setToServerValue),U=new zo):"appendMissingElements"in M?U=new Aa(M.appendMissingElements.values||[]):"removeAllFromArray"in M?U=new Sa(M.removeAllFromArray.values||[]):"increment"in M?U=new Ra(I,M.increment):on();const W=vi.fromServerFormat(M.fieldPath);return new sd(W,U)}(i,u)):[];var p;if(e.update){const u=gl(i,e.update.name),p=new Es({mapValue:{fields:e.update.fields}});if(e.updateMask){const I=new ca((e.updateMask.fieldPaths||[]).map(ee=>vi.fromServerFormat(ee)));return new Pl(u,p,I,n,o)}return new Ga(u,p,n,o)}if(e.delete){const u=gl(i,e.delete);return new Su(u,n)}if(e.verify){const u=gl(i,e.verify);return new qo(u,n)}return on()}function kg(i,e){return{documents:[Gd(i,e.path)]}}function wf(i,e){const n={structuredQuery:{}},o=e.path;null!==e.collectionGroup?(n.parent=Gd(i,o),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=Gd(i,o.popLast()),n.structuredQuery.from=[{collectionId:o.lastSegment()}]);const u=function(U){if(0!==U.length)return Vg(qr.create(U,"and"))}(e.filters);u&&(n.structuredQuery.where=u);const p=function(U){if(0!==U.length)return U.map(W=>{return{field:$d((fe=W).field),direction:Op(fe.dir)};var fe})}(e.orderBy);p&&(n.structuredQuery.orderBy=p);const I=ou(i,e.limit);return null!==I&&(n.structuredQuery.limit=I),e.startAt&&(n.structuredQuery.startAt={before:(U=e.startAt).inclusive,values:U.position}),e.endAt&&(n.structuredQuery.endAt=function(U){return{before:!U.inclusive,values:U.position}}(e.endAt)),n;var U}function Pp(i){let e=Ap(i.parent);const n=i.structuredQuery,o=n.from?n.from.length:0;let u=null;if(o>0){vn(1===o);const ee=n.from[0];ee.allDescendants?u=ee.collectionId:e=e.child(ee.collectionId)}let p=[];n.where&&(p=function(fe){const Me=Fg(fe);return Me instanceof qr&&nu(Me)?Me.getFilters():[Me]}(n.where));let I=[];n.orderBy&&(I=n.orderBy.map(Me=>{return new Us(Df((Vt=Me).field),function(Jt){switch(Jt){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(Vt.direction));var Vt}));let M=null;n.limit&&(M=function(fe){let Me;return Me="object"==typeof fe?fe.value:fe,Ua(Me)?null:Me}(n.limit));let U=null;var fe;n.startAt&&(U=new hl((fe=n.startAt).values||[],!!fe.before));let W=null;return n.endAt&&(W=function(fe){return new hl(fe.values||[],!fe.before)}(n.endAt)),Ih(e,u,I,p,M,"F",U,W)}function Fg(i){return void 0!==i.unaryFilter?function(n){switch(n.unaryFilter.op){case"IS_NAN":const o=Df(n.unaryFilter.field);return yr.create(o,"==",{doubleValue:NaN});case"IS_NULL":const u=Df(n.unaryFilter.field);return yr.create(u,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const p=Df(n.unaryFilter.field);return yr.create(p,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const I=Df(n.unaryFilter.field);return yr.create(I,"!=",{nullValue:"NULL_VALUE"});default:return on()}}(i):void 0!==i.fieldFilter?yr.create(Df((n=i).fieldFilter.field),function(u){switch(u){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return on()}}(n.fieldFilter.op),n.fieldFilter.value):void 0!==i.compositeFilter?function(n){return qr.create(n.compositeFilter.filters.map(o=>Fg(o)),function(u){switch(u){case"AND":return"and";case"OR":return"or";default:return on()}}(n.compositeFilter.op))}(i):on();var n}function Op(i){return ls[i]}function gv(i){return Ol[i]}function Lg(i){return Ru[i]}function $d(i){return{fieldPath:i.canonicalString()}}function Df(i){return vi.fromServerFormat(i.fieldPath)}function Vg(i){return i instanceof yr?function(n){if("=="===n.op){if(eu(n.value))return{unaryFilter:{field:$d(n.field),op:"IS_NAN"}};if(Tu(n.value))return{unaryFilter:{field:$d(n.field),op:"IS_NULL"}}}else if("!="===n.op){if(eu(n.value))return{unaryFilter:{field:$d(n.field),op:"IS_NOT_NAN"}};if(Tu(n.value))return{unaryFilter:{field:$d(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:$d(n.field),op:gv(n.op),value:n.value}}}(i):i instanceof qr?function(n){const o=n.getFilters().map(u=>Vg(u));return 1===o.length?o[0]:{compositeFilter:{op:Lg(n.op),filters:o}}}(i):on()}function ey(i){const e=[];return i.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function Hm(i){return i.length>=4&&"projects"===i.get(0)&&"databases"===i.get(2)}class Ml{constructor(e,n,o,u,p=ln.min(),I=ln.min(),M=Bs.EMPTY_BYTE_STRING,U=null){this.target=e,this.targetId=n,this.purpose=o,this.sequenceNumber=u,this.snapshotVersion=p,this.lastLimboFreeSnapshotVersion=I,this.resumeToken=M,this.expectedCount=U}withSequenceNumber(e){return new Ml(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Ml(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Ml(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Ml(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class Mp{constructor(e){this.ut=e}}function ty(i,e){const n=e.key,o={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:Bg(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())o.document={name:ud(p=i.ut,(I=e).key),fields:I.data.value.mapValue.fields,updateTime:Nu(p,I.version.toTimestamp()),createTime:Nu(p,I.createTime.toTimestamp())};else if(e.isNoDocument())o.noDocument={path:n.path.toArray(),readTime:Cf(e.version)};else{if(!e.isUnknownDocument())return on();o.unknownDocument={path:n.path.toArray(),version:Cf(e.version)}}var p,I;return o}function Bg(i){const e=i.toTimestamp();return[e.seconds,e.nanoseconds]}function Cf(i){const e=i.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Ch(i){const e=new Ur(i.seconds,i.nanoseconds);return ln.fromTimestamp(e)}function cd(i,e){const n=(e.baseMutations||[]).map(p=>bf(i.ut,p));for(let p=0;p<e.mutations.length-1;++p)p+1<e.mutations.length&&void 0!==e.mutations[p+1].transform&&(e.mutations[p].updateTransforms=e.mutations[p+1].transform.fieldTransforms,e.mutations.splice(p+1,1),++p);const o=e.mutations.map(p=>bf(i.ut,p)),u=Ur.fromMillis(e.localWriteTimeMs);return new Ud(e.batchId,u,n,o)}function xp(i){const e=Ch(i.readTime),n=void 0!==i.lastLimboFreeSnapshotVersion?Ch(i.lastLimboFreeSnapshotVersion):ln.min();let o;return o=void 0!==i.query.documents?(vn(1===(p=i.query).documents.length),w(Pc(Ap(p.documents[0])))):function(p){return w(Pp(p))}(i.query),new Ml(o,i.targetId,"TargetPurposeListen",i.lastListenSequenceNumber,e,n,Bs.fromBase64String(i.resumeToken));var p}function Ah(i,e){const n=Cf(e.snapshotVersion),o=Cf(e.lastLimboFreeSnapshotVersion);let u;u=bu(e.target)?kg(i.ut,e.target):wf(i.ut,e.target);const p=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Ha(e.target),readTime:n,resumeToken:p,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:o,query:u}}function Af(i){const e=Pp({parent:i.parent,structuredQuery:i.structuredQuery});return"LAST"===i.limitType?ce(e,e.limit,"L"):e}function Sh(i,e){return new jd(e.largestBatchId,bf(i.ut,e.overlayMutation))}function Gm(i,e){const n=e.path.lastSegment();return[i,Is(e.path.popLast()),n]}function $m(i,e,n,o){return{indexId:i,uid:e.uid||"",sequenceNumber:n,readTime:Cf(o.readTime),documentKey:Is(o.documentKey.path),largestBatchId:o.largestBatchId}}class ny{getBundleMetadata(e,n){return zm(e).get(n).next(o=>{if(o)return{id:(p=o).bundleId,createTime:Ch(p.createTime),version:p.version};var p})}saveBundleMetadata(e,n){return zm(e).put({bundleId:(u=n).id,createTime:Cf(us(u.createTime)),version:u.version});var u}getNamedQuery(e,n){return Wm(e).get(n).next(o=>{if(o)return{name:(p=o).name,query:Af(p.bundledQuery),readTime:Ch(p.readTime)};var p})}saveNamedQuery(e,n){return Wm(e).put({name:(u=n).name,readTime:Cf(us(u.readTime)),bundledQuery:u.bundledQuery});var u}}function zm(i){return ss(i,"bundles")}function Wm(i){return ss(i,"namedQueries")}class Ug{constructor(e,n){this.serializer=e,this.userId=n}static ct(e,n){return new Ug(e,n.uid||"")}getOverlay(e,n){return kp(e).get(Gm(this.userId,n)).next(o=>o?Sh(this.serializer,o):null)}getOverlays(e,n){const o=Nr();return V.forEach(n,u=>this.getOverlay(e,u).next(p=>{null!==p&&o.set(u,p)})).next(()=>o)}saveOverlays(e,n,o){const u=[];return o.forEach((p,I)=>{const M=new jd(n,I);u.push(this.lt(e,M))}),V.waitFor(u)}removeOverlaysForBatchId(e,n,o){const u=new Set;n.forEach(I=>u.add(Is(I.getCollectionPath())));const p=[];return u.forEach(I=>{const M=IDBKeyRange.bound([this.userId,I,o],[this.userId,I,o+1],!1,!0);p.push(kp(e).H("collectionPathOverlayIndex",M))}),V.waitFor(p)}getOverlaysForCollection(e,n,o){const u=Nr(),p=Is(n),I=IDBKeyRange.bound([this.userId,p,o],[this.userId,p,Number.POSITIVE_INFINITY],!0);return kp(e).W("collectionPathOverlayIndex",I).next(M=>{for(const U of M){const W=Sh(this.serializer,U);u.set(W.getKey(),W)}return u})}getOverlaysForCollectionGroup(e,n,o,u){const p=Nr();let I;const M=IDBKeyRange.bound([this.userId,n,o],[this.userId,n,Number.POSITIVE_INFINITY],!0);return kp(e).Y({index:"collectionGroupOverlayIndex",range:M},(U,W,ee)=>{const fe=Sh(this.serializer,W);p.size()<u||fe.largestBatchId===I?(p.set(fe.getKey(),fe),I=fe.largestBatchId):ee.done()}).next(()=>p)}lt(e,n){return kp(e).put(function(u,p,I){const[M,U,W]=Gm(p,I.mutation.key);return{userId:p,collectionPath:U,documentId:W,collectionGroup:I.mutation.key.getCollectionGroup(),largestBatchId:I.largestBatchId,overlayMutation:Tf(u.ut,I.mutation)}}(this.serializer,this.userId,n))}}function kp(i){return ss(i,"documentOverlays")}class zd{constructor(){}ht(e,n){this.Pt(e,n),n.It()}Pt(e,n){if("nullValue"in e)this.Tt(n,5);else if("booleanValue"in e)this.Tt(n,10),n.Et(e.booleanValue?1:0);else if("integerValue"in e)this.Tt(n,15),n.Et(si(e.integerValue));else if("doubleValue"in e){const o=si(e.doubleValue);isNaN(o)?this.Tt(n,13):(this.Tt(n,15),Ta(o)?n.Et(0):n.Et(o))}else if("timestampValue"in e){const o=e.timestampValue;this.Tt(n,20),"string"==typeof o?n.dt(o):(n.dt(`${o.seconds||""}`),n.Et(o.nanos||0))}else if("stringValue"in e)this.At(e.stringValue,n),this.Rt(n);else if("bytesValue"in e)this.Tt(n,30),n.Vt(Rr(e.bytesValue)),this.Rt(n);else if("referenceValue"in e)this.ft(e.referenceValue,n);else if("geoPointValue"in e){const o=e.geoPointValue;this.Tt(n,45),n.Et(o.latitude||0),n.Et(o.longitude||0)}else"mapValue"in e?Jc(e)?this.Tt(n,Number.MAX_SAFE_INTEGER):(this.gt(e.mapValue,n),this.Rt(n)):"arrayValue"in e?(this.yt(e.arrayValue,n),this.Rt(n)):on()}At(e,n){this.Tt(n,25),this.wt(e,n)}wt(e,n){n.dt(e)}gt(e,n){const o=e.fields||{};this.Tt(n,55);for(const u of Object.keys(o))this.At(u,n),this.Pt(o[u],n)}yt(e,n){const o=e.values||[];this.Tt(n,50);for(const u of o)this.Pt(u,n)}ft(e,n){this.Tt(n,37),Qt.fromName(e).path.forEach(o=>{this.Tt(n,60),this.wt(o,n)})}Tt(e,n){e.Et(n)}Rt(e){e.Et(2)}}function mv(i){if(0===i)return 8;let e=0;return!(i>>4)&&(e+=4,i<<=4),!(i>>6)&&(e+=2,i<<=2),!(i>>7)&&(e+=1),e}function dd(i){const e=64-function(o){let u=0;for(let p=0;p<8;++p){const I=mv(255&o[p]);if(u+=I,8!==I)break}return u}(i);return Math.ceil(e/8)}zd.St=new zd;class Rh{constructor(){this.buffer=new Uint8Array(1024),this.position=0}bt(e){const n=e[Symbol.iterator]();let o=n.next();for(;!o.done;)this.Dt(o.value),o=n.next();this.Ct()}vt(e){const n=e[Symbol.iterator]();let o=n.next();for(;!o.done;)this.Ft(o.value),o=n.next();this.Mt()}xt(e){for(const n of e){const o=n.charCodeAt(0);if(o<128)this.Dt(o);else if(o<2048)this.Dt(960|o>>>6),this.Dt(128|63&o);else if(n<"\ud800"||"\udbff"<n)this.Dt(480|o>>>12),this.Dt(128|63&o>>>6),this.Dt(128|63&o);else{const u=n.codePointAt(0);this.Dt(240|u>>>18),this.Dt(128|63&u>>>12),this.Dt(128|63&u>>>6),this.Dt(128|63&u)}}this.Ct()}Ot(e){for(const n of e){const o=n.charCodeAt(0);if(o<128)this.Ft(o);else if(o<2048)this.Ft(960|o>>>6),this.Ft(128|63&o);else if(n<"\ud800"||"\udbff"<n)this.Ft(480|o>>>12),this.Ft(128|63&o>>>6),this.Ft(128|63&o);else{const u=n.codePointAt(0);this.Ft(240|u>>>18),this.Ft(128|63&u>>>12),this.Ft(128|63&u>>>6),this.Ft(128|63&u)}}this.Mt()}Nt(e){const n=this.Bt(e),o=dd(n);this.Lt(1+o),this.buffer[this.position++]=255&o;for(let u=n.length-o;u<n.length;++u)this.buffer[this.position++]=255&n[u]}kt(e){const n=this.Bt(e),o=dd(n);this.Lt(1+o),this.buffer[this.position++]=~(255&o);for(let u=n.length-o;u<n.length;++u)this.buffer[this.position++]=~(255&n[u])}qt(){this.Qt(255),this.Qt(255)}Kt(){this.$t(255),this.$t(255)}reset(){this.position=0}seed(e){this.Lt(e.length),this.buffer.set(e,this.position),this.position+=e.length}Ut(){return this.buffer.slice(0,this.position)}Bt(e){const n=function(p){const I=new DataView(new ArrayBuffer(8));return I.setFloat64(0,p,!1),new Uint8Array(I.buffer)}(e),o=0!=(128&n[0]);n[0]^=o?255:128;for(let u=1;u<n.length;++u)n[u]^=o?255:0;return n}Dt(e){const n=255&e;0===n?(this.Qt(0),this.Qt(255)):255===n?(this.Qt(255),this.Qt(0)):this.Qt(n)}Ft(e){const n=255&e;0===n?(this.$t(0),this.$t(255)):255===n?(this.$t(255),this.$t(0)):this.$t(e)}Ct(){this.Qt(0),this.Qt(1)}Mt(){this.$t(0),this.$t(1)}Qt(e){this.Lt(1),this.buffer[this.position++]=e}$t(e){this.Lt(1),this.buffer[this.position++]=~e}Lt(e){const n=e+this.position;if(n<=this.buffer.length)return;let o=2*this.buffer.length;o<n&&(o=n);const u=new Uint8Array(o);u.set(this.buffer),this.buffer=u}}class _v{constructor(e){this.Wt=e}Vt(e){this.Wt.bt(e)}dt(e){this.Wt.xt(e)}Et(e){this.Wt.Nt(e)}It(){this.Wt.qt()}}class N0{constructor(e){this.Wt=e}Vt(e){this.Wt.vt(e)}dt(e){this.Wt.Ot(e)}Et(e){this.Wt.kt(e)}It(){this.Wt.Kt()}}class jg{constructor(){this.Wt=new Rh,this.Gt=new _v(this.Wt),this.zt=new N0(this.Wt)}seed(e){this.Wt.seed(e)}jt(e){return 0===e?this.Gt:this.zt}Ut(){return this.Wt.Ut()}reset(){this.Wt.reset()}}class Sf{constructor(e,n,o,u){this.indexId=e,this.documentKey=n,this.arrayValue=o,this.directionalValue=u}Ht(){const e=this.directionalValue.length,n=0===e||255===this.directionalValue[e-1]?e+1:e,o=new Uint8Array(n);return o.set(this.directionalValue,0),n!==e?o.set([0],this.directionalValue.length):++o[o.length-1],new Sf(this.indexId,this.documentKey,this.arrayValue,o)}}function Nh(i,e){let n=i.indexId-e.indexId;return 0!==n?n:(n=qm(i.arrayValue,e.arrayValue),0!==n?n:(n=qm(i.directionalValue,e.directionalValue),0!==n?n:Qt.comparator(i.documentKey,e.documentKey)))}function qm(i,e){for(let n=0;n<i.length&&n<e.length;++n){const o=i[n]-e[n];if(0!==o)return o}return i.length-e.length}class Km{constructor(e){this.Jt=new Zr((n,o)=>vi.comparator(n.field,o.field)),this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Yt=e.orderBy,this.Zt=[];for(const n of e.filters){const o=n;o.isInequality()?this.Jt=this.Jt.add(o):this.Zt.push(o)}}get Xt(){return this.Jt.size>1}en(e){if(vn(e.collectionGroup===this.collectionId),this.Xt)return!1;const n=Ea(e);if(void 0!==n&&!this.tn(n))return!1;const o=ua(e);let u=new Set,p=0,I=0;for(;p<o.length&&this.tn(o[p]);++p)u=u.add(o[p].fieldPath.canonicalString());if(p===o.length)return!0;if(this.Jt.size>0){const M=this.Jt.getIterator().getNext();if(!u.has(M.field.canonicalString())){const U=o[p];if(!this.nn(M,U)||!this.rn(this.Yt[I++],U))return!1}++p}for(;p<o.length;++p)if(I>=this.Yt.length||!this.rn(this.Yt[I++],o[p]))return!1;return!0}sn(){if(this.Xt)return null;let e=new Zr(vi.comparator);const n=[];for(const o of this.Zt)if(!o.field.isKeyField())if("array-contains"===o.op||"array-contains-any"===o.op)n.push(new ho(o.field,2));else{if(e.has(o.field))continue;e=e.add(o.field),n.push(new ho(o.field,0))}for(const o of this.Yt)o.field.isKeyField()||e.has(o.field)||(e=e.add(o.field),n.push(new ho(o.field,"asc"===o.dir?0:1)));return new Ri(Ri.UNKNOWN_ID,this.collectionId,n,Hu.empty())}tn(e){for(const n of this.Zt)if(this.nn(n,e))return!0;return!1}nn(e,n){return!(void 0===e||!e.field.isEqual(n.fieldPath))&&2===n.kind==("array-contains"===e.op||"array-contains-any"===e.op)}rn(e,n){return!!e.field.isEqual(n.fieldPath)&&(0===n.kind&&"asc"===e.dir||1===n.kind&&"desc"===e.dir)}}function ry(i){var e,n;if(vn(i instanceof yr||i instanceof qr),i instanceof yr){if(i instanceof iu){const u=(null===(n=null===(e=i.value.arrayValue)||void 0===e?void 0:e.values)||void 0===n?void 0:n.map(p=>yr.create(i.field,"==",p)))||[];return qr.create(u,"or")}return i}const o=i.filters.map(u=>ry(u));return qr.create(o,i.op)}function yv(i){if(0===i.getFilters().length)return[];const e=lc(ry(i));return vn(Hg(e)),Ym(e)||Fp(e)?[e]:e.getFilters()}function Ym(i){return i instanceof yr}function Fp(i){return i instanceof qr&&nu(i)}function Hg(i){return Ym(i)||Fp(i)||function(n){if(n instanceof qr&&rc(n)){for(const o of n.getFilters())if(!Ym(o)&&!Fp(o))return!1;return!0}return!1}(i)}function lc(i){if(vn(i instanceof yr||i instanceof qr),i instanceof yr)return i;if(1===i.filters.length)return lc(i.filters[0]);const e=i.filters.map(o=>lc(o));let n=qr.create(e,i.op);return n=Rf(n),Hg(n)?n:(vn(n instanceof qr),vn(nc(n)),vn(n.filters.length>1),n.filters.reduce((o,u)=>Ph(o,u)))}function Ph(i,e){let n;return vn(i instanceof yr||i instanceof qr),vn(e instanceof yr||e instanceof qr),n=i instanceof yr?e instanceof yr?qr.create([i,e],"and"):Zm(i,e):e instanceof yr?Zm(e,i):function(u,p){if(vn(u.filters.length>0&&p.filters.length>0),nc(u)&&nc(p))return ru(u,p.getFilters());const I=rc(u)?u:p,M=rc(u)?p:u,U=I.filters.map(W=>Ph(W,M));return qr.create(U,"or")}(i,e),Rf(n)}function Zm(i,e){if(nc(e))return ru(e,i.getFilters());{const n=e.filters.map(o=>Ph(i,o));return qr.create(n,"or")}}function Rf(i){if(vn(i instanceof yr||i instanceof qr),i instanceof yr)return i;const e=i.getFilters();if(1===e.length)return Rf(e[0]);if(yh(i))return i;const n=e.map(u=>Rf(u)),o=[];return n.forEach(u=>{u instanceof yr?o.push(u):u instanceof qr&&(u.op===i.op?o.push(...u.filters):o.push(u))}),1===o.length?o[0]:qr.create(o,i.op)}class iy{constructor(){this.on=new sy}addToCollectionParentIndex(e,n){return this.on.add(n),V.resolve()}getCollectionParents(e,n){return V.resolve(this.on.getEntries(n))}addFieldIndex(e,n){return V.resolve()}deleteFieldIndex(e,n){return V.resolve()}deleteAllFieldIndexes(e){return V.resolve()}createTargetIndexes(e,n){return V.resolve()}getDocumentsMatchingTarget(e,n){return V.resolve(null)}getIndexType(e,n){return V.resolve(0)}getFieldIndexes(e,n){return V.resolve([])}getNextCollectionGroupToUpdate(e){return V.resolve(null)}getMinOffset(e,n){return V.resolve(Ao.min())}getMinOffsetFromCollectionGroup(e,n){return V.resolve(Ao.min())}updateCollectionGroup(e,n,o){return V.resolve()}updateIndexEntries(e,n){return V.resolve()}}class sy{constructor(){this.index={}}add(e){const n=e.lastSegment(),o=e.popLast(),u=this.index[n]||new Zr(or.comparator),p=!u.has(o);return this.index[n]=u.add(o),p}has(e){const n=e.lastSegment(),o=e.popLast(),u=this.index[n];return u&&u.has(o)}getEntries(e){return(this.index[e]||new Zr(or.comparator)).toArray()}}const Qm=new Uint8Array(0);class P0{constructor(e,n){this.user=e,this.databaseId=n,this._n=new sy,this.an=new ro(o=>Ha(o),(o,u)=>oc(o,u)),this.uid=e.uid||""}addToCollectionParentIndex(e,n){if(!this._n.has(n)){const o=n.lastSegment(),u=n.popLast();e.addOnCommittedListener(()=>{this._n.add(n)});const p={collectionId:o,parent:Is(u)};return Nf(e).put(p)}return V.resolve()}getCollectionParents(e,n){const o=[],u=IDBKeyRange.bound([n,""],[Yc(n),""],!1,!0);return Nf(e).W(u).next(p=>{for(const I of p){if(I.collectionId!==n)break;o.push(Ho(I.parent))}return o})}addFieldIndex(e,n){const o=Gg(e),u={indexId:(M=n).indexId,collectionGroup:M.collectionGroup,fields:M.fields.map(U=>[U.fieldPath.canonicalString(),U.kind])};var M;delete u.indexId;const p=o.add(u);if(n.indexState){const I=Pf(e);return p.next(M=>{I.put($m(M,this.user,n.indexState.sequenceNumber,n.indexState.offset))})}return p.next()}deleteFieldIndex(e,n){const o=Gg(e),u=Pf(e),p=Wd(e);return o.delete(n.indexId).next(()=>u.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0))).next(()=>p.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){const n=Gg(e),o=Wd(e),u=Pf(e);return n.H().next(()=>o.H()).next(()=>u.H())}createTargetIndexes(e,n){return V.forEach(this.un(n),o=>this.getIndexType(e,o).next(u=>{if(0===u||1===u){const p=new Km(o).sn();if(null!=p)return this.addFieldIndex(e,p)}}))}getDocumentsMatchingTarget(e,n){const o=Wd(e);let u=!0;const p=new Map;return V.forEach(this.un(n),I=>this.cn(e,I).next(M=>{u&&(u=!!M),p.set(I,M)})).next(()=>{if(u){let I=fr();const M=[];return V.forEach(p,(U,W)=>{var Hn;Tt("IndexedDbIndexManager",`Using index ${Hn=U,`id=${Hn.indexId}|cg=${Hn.collectionGroup}|f=${Hn.fields.map(jr=>`${jr.fieldPath}:${jr.kind}`).join(",")}`} to execute ${Ha(n)}`);const ee=function(Hn,jr){const mi=Ea(jr);if(void 0===mi)return null;for(const Ei of wu(Hn,mi.fieldPath))switch(Ei.op){case"array-contains-any":return Ei.value.arrayValue.values||[];case"array-contains":return[Ei.value]}return null}(W,U),fe=function(Hn,jr){const mi=new Map;for(const Ei of ua(jr))for(const Po of wu(Hn,Ei.fieldPath))switch(Po.op){case"==":case"in":mi.set(Ei.fieldPath.canonicalString(),Po.value);break;case"not-in":case"!=":return mi.set(Ei.fieldPath.canonicalString(),Po.value),Array.from(mi.values())}return null}(W,U),Me=function(Hn,jr){const mi=[];let Ei=!0;for(const Po of ua(jr)){const zc=0===Po.kind?kd(Hn,Po.fieldPath,Hn.startAt):vh(Hn,Po.fieldPath,Hn.startAt);mi.push(zc.value),Ei&&(Ei=zc.inclusive)}return new hl(mi,Ei)}(W,U),tt=function(Hn,jr){const mi=[];let Ei=!0;for(const Po of ua(jr)){const zc=0===Po.kind?vh(Hn,Po.fieldPath,Hn.endAt):kd(Hn,Po.fieldPath,Hn.endAt);mi.push(zc.value),Ei&&(Ei=zc.inclusive)}return new hl(mi,Ei)}(W,U),Vt=this.ln(U,W,Me),Kt=this.ln(U,W,tt),Jt=this.hn(U,W,fe),zn=this.Pn(U.indexId,ee,Vt,Me.inclusive,Kt,tt.inclusive,Jt);return V.forEach(zn,rr=>o.j(rr,n.limit).next(Hn=>{Hn.forEach(jr=>{const mi=Qt.fromSegments(jr.documentKey);I.has(mi)||(I=I.add(mi),M.push(mi))})}))}).next(()=>M)}return V.resolve(null)})}un(e){let n=this.an.get(e);return n||(n=0===e.filters.length?[e]:yv(qr.create(e.filters,"and")).map(o=>ed(e.path,e.collectionGroup,e.orderBy,o.getFilters(),e.limit,e.startAt,e.endAt)),this.an.set(e,n),n)}Pn(e,n,o,u,p,I,M){const U=(null!=n?n.length:1)*Math.max(o.length,p.length),W=U/(null!=n?n.length:1),ee=[];for(let fe=0;fe<U;++fe){const Me=n?this.In(n[fe/W]):Qm,tt=this.Tn(e,Me,o[fe%W],u),Vt=this.En(e,Me,p[fe%W],I),Kt=M.map(Jt=>this.Tn(e,Me,Jt,!0));ee.push(...this.createRange(tt,Vt,Kt))}return ee}Tn(e,n,o,u){const p=new Sf(e,Qt.empty(),n,o);return u?p:p.Ht()}En(e,n,o,u){const p=new Sf(e,Qt.empty(),n,o);return u?p.Ht():p}cn(e,n){const o=new Km(n),u=null!=n.collectionGroup?n.collectionGroup:n.path.lastSegment();return this.getFieldIndexes(e,u).next(p=>{let I=null;for(const M of p)o.en(M)&&(!I||M.fields.length>I.fields.length)&&(I=M);return I})}getIndexType(e,n){let o=2;const u=this.un(n);return V.forEach(u,p=>this.cn(e,p).next(I=>{I?0!==o&&I.fields.length<function(U){let W=new Zr(vi.comparator),ee=!1;for(const fe of U.filters)for(const Me of fe.getFlattenedFilters())Me.field.isKeyField()||("array-contains"===Me.op||"array-contains-any"===Me.op?ee=!0:W=W.add(Me.field));for(const fe of U.orderBy)fe.field.isKeyField()||(W=W.add(fe.field));return W.size+(ee?1:0)}(p)&&(o=1):o=0})).next(()=>null!==n.limit&&u.length>1&&2===o?1:o)}dn(e,n){const o=new jg;for(const u of ua(e)){const p=n.data.field(u.fieldPath);if(null==p)return null;const I=o.jt(u.kind);zd.St.ht(p,I)}return o.Ut()}In(e){const n=new jg;return zd.St.ht(e,n.jt(0)),n.Ut()}An(e,n){const o=new jg;return zd.St.ht(Xl(this.databaseId,n),o.jt(function(p){const I=ua(p);return 0===I.length?0:I[I.length-1].kind}(e))),o.Ut()}hn(e,n,o){if(null===o)return[];let u=[];u.push(new jg);let p=0;for(const I of ua(e)){const M=o[p++];for(const U of u)if(this.Rn(n,I.fieldPath)&&dl(M))u=this.Vn(u,I,M);else{const W=U.jt(I.kind);zd.St.ht(M,W)}}return this.mn(u)}ln(e,n,o){return this.hn(e,n,o.position)}mn(e){const n=[];for(let o=0;o<e.length;++o)n[o]=e[o].Ut();return n}Vn(e,n,o){const u=[...e],p=[];for(const I of o.arrayValue.values||[])for(const M of u){const U=new jg;U.seed(M.Ut()),zd.St.ht(I,U.jt(n.kind)),p.push(U)}return p}Rn(e,n){return!!e.filters.find(o=>o instanceof yr&&o.field.isEqual(n)&&("in"===o.op||"not-in"===o.op))}getFieldIndexes(e,n){const o=Gg(e),u=Pf(e);return(n?o.W("collectionGroupIndex",IDBKeyRange.bound(n,n)):o.W()).next(p=>{const I=[];return V.forEach(p,M=>u.get([M.indexId,this.uid]).next(U=>{I.push(function(ee,fe){const Me=fe?new Hu(fe.sequenceNumber,new Ao(Ch(fe.readTime),new Qt(Ho(fe.documentKey)),fe.largestBatchId)):Hu.empty(),tt=ee.fields.map(([Vt,Kt])=>new ho(vi.fromServerFormat(Vt),Kt));return new Ri(ee.indexId,ee.collectionGroup,tt,Me)}(M,U))})).next(()=>I)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(n=>0===n.length?null:(n.sort((o,u)=>{const p=o.indexState.sequenceNumber-u.indexState.sequenceNumber;return 0!==p?p:Yn(o.collectionGroup,u.collectionGroup)}),n[0].collectionGroup))}updateCollectionGroup(e,n,o){const u=Gg(e),p=Pf(e);return this.fn(e).next(I=>u.W("collectionGroupIndex",IDBKeyRange.bound(n,n)).next(M=>V.forEach(M,U=>p.put($m(U.indexId,this.user,I,o)))))}updateIndexEntries(e,n){const o=new Map;return V.forEach(n,(u,p)=>{const I=o.get(u.collectionGroup);return(I?V.resolve(I):this.getFieldIndexes(e,u.collectionGroup)).next(M=>(o.set(u.collectionGroup,M),V.forEach(M,U=>this.gn(e,u,U).next(W=>{const ee=this.pn(p,U);return W.isEqual(ee)?V.resolve():this.yn(e,p,U,W,ee)}))))})}wn(e,n,o,u){return Wd(e).put({indexId:u.indexId,uid:this.uid,arrayValue:u.arrayValue,directionalValue:u.directionalValue,orderedDocumentKey:this.An(o,n.key),documentKey:n.key.path.toArray()})}Sn(e,n,o,u){return Wd(e).delete([u.indexId,this.uid,u.arrayValue,u.directionalValue,this.An(o,n.key),n.key.path.toArray()])}gn(e,n,o){const u=Wd(e);let p=new Zr(Nh);return u.Y({index:"documentKeyIndex",range:IDBKeyRange.only([o.indexId,this.uid,this.An(o,n)])},(I,M)=>{p=p.add(new Sf(o.indexId,n,M.arrayValue,M.directionalValue))}).next(()=>p)}pn(e,n){let o=new Zr(Nh);const u=this.dn(n,e);if(null==u)return o;const p=Ea(n);if(null!=p){const I=e.data.field(p.fieldPath);if(dl(I))for(const M of I.arrayValue.values||[])o=o.add(new Sf(n.indexId,e.key,this.In(M),u))}else o=o.add(new Sf(n.indexId,e.key,Qm,u));return o}yn(e,n,o,u,p){Tt("IndexedDbIndexManager","Updating index entries for document '%s'",n.key);const I=[];return function(U,W,ee,fe,Me){const tt=U.getIterator(),Vt=W.getIterator();let Kt=Yu(tt),Jt=Yu(Vt);for(;Kt||Jt;){let zn=!1,rr=!1;if(Kt&&Jt){const Hn=ee(Kt,Jt);Hn<0?rr=!0:Hn>0&&(zn=!0)}else null!=Kt?rr=!0:zn=!0;zn?(fe(Jt),Jt=Yu(Vt)):rr?(Me(Kt),Kt=Yu(tt)):(Kt=Yu(tt),Jt=Yu(Vt))}}(u,p,Nh,M=>{I.push(this.wn(e,n,o,M))},M=>{I.push(this.Sn(e,n,o,M))}),V.waitFor(I)}fn(e){let n=1;return Pf(e).Y({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(o,u,p)=>{p.done(),n=u.sequenceNumber+1}).next(()=>n)}createRange(e,n,o){o=o.sort((I,M)=>Nh(I,M)).filter((I,M,U)=>!M||0!==Nh(I,U[M-1]));const u=[];u.push(e);for(const I of o){const M=Nh(I,e),U=Nh(I,n);if(0===M)u[0]=e.Ht();else if(M>0&&U<0)u.push(I),u.push(I.Ht());else if(U>0)break}u.push(n);const p=[];for(let I=0;I<u.length;I+=2){if(this.bn(u[I],u[I+1]))return[];p.push(IDBKeyRange.bound([u[I].indexId,this.uid,u[I].arrayValue,u[I].directionalValue,Qm,[]],[u[I+1].indexId,this.uid,u[I+1].arrayValue,u[I+1].directionalValue,Qm,[]]))}return p}bn(e,n){return Nh(e,n)>0}getMinOffsetFromCollectionGroup(e,n){return this.getFieldIndexes(e,n).next(Jm)}getMinOffset(e,n){return V.mapArray(this.un(n),o=>this.cn(e,o).next(u=>u||on())).next(Jm)}}function Nf(i){return ss(i,"collectionParents")}function Wd(i){return ss(i,"indexEntries")}function Gg(i){return ss(i,"indexConfiguration")}function Pf(i){return ss(i,"indexState")}function Jm(i){vn(0!==i.length);let e=i[0].indexState.offset,n=e.largestBatchId;for(let o=1;o<i.length;o++){const u=i[o].indexState.offset;Gu(u,e)<0&&(e=u),n<u.largestBatchId&&(n=u.largestBatchId)}return new Ao(e.readTime,e.documentKey,n)}const oy={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class $a{constructor(e,n,o){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=o}static withCacheSize(e){return new $a(e,$a.DEFAULT_COLLECTION_PERCENTILE,$a.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function ay(i,e,n){const o=i.store("mutations"),u=i.store("documentMutations"),p=[],I=IDBKeyRange.only(n.batchId);let M=0;const U=o.Y({range:I},(ee,fe,Me)=>(M++,Me.delete()));p.push(U.next(()=>{vn(1===M)}));const W=[];for(const ee of n.mutations){const fe=ba(e,ee.key.path,n.batchId);p.push(u.delete(fe)),W.push(ee.key)}return V.waitFor(p).next(()=>W)}function $g(i){if(!i)return 0;let e;if(i.document)e=i.document;else if(i.unknownDocument)e=i.unknownDocument;else{if(!i.noDocument)throw on();e=i.noDocument}return JSON.stringify(e).length}$a.DEFAULT_COLLECTION_PERCENTILE=10,$a.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,$a.DEFAULT=new $a(41943040,$a.DEFAULT_COLLECTION_PERCENTILE,$a.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),$a.DISABLED=new $a(-1,0,0);class Oh{constructor(e,n,o,u){this.userId=e,this.serializer=n,this.indexManager=o,this.referenceDelegate=u,this.Dn={}}static ct(e,n,o,u){vn(""!==e.uid);const p=e.isAuthenticated()?e.uid:"";return new Oh(p,n,o,u)}checkEmpty(e){let n=!0;const o=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return hd(e).Y({index:"userMutationsIndex",range:o},(u,p,I)=>{n=!1,I.done()}).next(()=>n)}addMutationBatch(e,n,o,u){const p=di(e),I=hd(e);return I.add({}).next(M=>{vn("number"==typeof M);const U=new Ud(M,n,o,u),W=function(tt,Vt,Kt){const Jt=Kt.baseMutations.map(rr=>Tf(tt.ut,rr)),zn=Kt.mutations.map(rr=>Tf(tt.ut,rr));return{userId:Vt,batchId:Kt.batchId,localWriteTimeMs:Kt.localWriteTime.toMillis(),baseMutations:Jt,mutations:zn}}(this.serializer,this.userId,U),ee=[];let fe=new Zr((Me,tt)=>Yn(Me.canonicalString(),tt.canonicalString()));for(const Me of u){const tt=ba(this.userId,Me.key.path,M);fe=fe.add(Me.key.path.popLast()),ee.push(I.put(W)),ee.push(p.put(tt,yu))}return fe.forEach(Me=>{ee.push(this.indexManager.addToCollectionParentIndex(e,Me))}),e.addOnCommittedListener(()=>{this.Dn[M]=U.keys()}),V.waitFor(ee).next(()=>U)})}lookupMutationBatch(e,n){return hd(e).get(n).next(o=>o?(vn(o.userId===this.userId),cd(this.serializer,o)):null)}Cn(e,n){return this.Dn[n]?V.resolve(this.Dn[n]):this.lookupMutationBatch(e,n).next(o=>{if(o){const u=o.keys();return this.Dn[n]=u,u}return null})}getNextMutationBatchAfterBatchId(e,n){const o=n+1,u=IDBKeyRange.lowerBound([this.userId,o]);let p=null;return hd(e).Y({index:"userMutationsIndex",range:u},(I,M,U)=>{M.userId===this.userId&&(vn(M.batchId>=o),p=cd(this.serializer,M)),U.done()}).next(()=>p)}getHighestUnacknowledgedBatchId(e){const n=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let o=-1;return hd(e).Y({index:"userMutationsIndex",range:n,reverse:!0},(u,p,I)=>{o=p.batchId,I.done()}).next(()=>o)}getAllMutationBatches(e){const n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return hd(e).W("userMutationsIndex",n).next(o=>o.map(u=>cd(this.serializer,u)))}getAllMutationBatchesAffectingDocumentKey(e,n){const o=ql(this.userId,n.path),u=IDBKeyRange.lowerBound(o),p=[];return di(e).Y({range:u},(I,M,U)=>{const[W,ee,fe]=I,Me=Ho(ee);if(W===this.userId&&n.path.isEqual(Me))return hd(e).get(fe).next(tt=>{if(!tt)throw on();vn(tt.userId===this.userId),p.push(cd(this.serializer,tt))});U.done()}).next(()=>p)}getAllMutationBatchesAffectingDocumentKeys(e,n){let o=new Zr(Yn);const u=[];return n.forEach(p=>{const I=ql(this.userId,p.path),M=IDBKeyRange.lowerBound(I),U=di(e).Y({range:M},(W,ee,fe)=>{const[Me,tt,Vt]=W,Kt=Ho(tt);Me===this.userId&&p.path.isEqual(Kt)?o=o.add(Vt):fe.done()});u.push(U)}),V.waitFor(u).next(()=>this.vn(e,o))}getAllMutationBatchesAffectingQuery(e,n){const o=n.path,u=o.length+1,p=ql(this.userId,o),I=IDBKeyRange.lowerBound(p);let M=new Zr(Yn);return di(e).Y({range:I},(U,W,ee)=>{const[fe,Me,tt]=U,Vt=Ho(Me);fe===this.userId&&o.isPrefixOf(Vt)?Vt.length===u&&(M=M.add(tt)):ee.done()}).next(()=>this.vn(e,M))}vn(e,n){const o=[],u=[];return n.forEach(p=>{u.push(hd(e).get(p).next(I=>{if(null===I)throw on();vn(I.userId===this.userId),o.push(cd(this.serializer,I))}))}),V.waitFor(u).next(()=>o)}removeMutationBatch(e,n){return ay(e.ae,this.userId,n).next(o=>(e.addOnCommittedListener(()=>{this.Fn(n.batchId)}),V.forEach(o,u=>this.referenceDelegate.markPotentiallyOrphaned(e,u))))}Fn(e){delete this.Dn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(n=>{if(!n)return V.resolve();const o=IDBKeyRange.lowerBound([this.userId]),u=[];return di(e).Y({range:o},(p,I,M)=>{if(p[0]===this.userId){const U=Ho(p[1]);u.push(U)}else M.done()}).next(()=>{vn(0===u.length)})})}containsKey(e,n){return Of(e,this.userId,n)}Mn(e){return ly(e).get(this.userId).next(n=>n||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function Of(i,e,n){const o=ql(e,n.path),u=o[1],p=IDBKeyRange.lowerBound(o);let I=!1;return di(i).Y({range:p,J:!0},(M,U,W)=>{const[ee,fe,Me]=M;ee===e&&fe===u&&(I=!0),W.done()}).next(()=>I)}function hd(i){return ss(i,"mutations")}function di(i){return ss(i,"documentMutations")}function ly(i){return ss(i,"mutationQueues")}class xl{constructor(e){this.xn=e}next(){return this.xn+=2,this.xn}static On(){return new xl(0)}static Nn(){return new xl(-1)}}class uy{constructor(e,n){this.referenceDelegate=e,this.serializer=n}allocateTargetId(e){return this.Bn(e).next(n=>{const o=new xl(n.highestTargetId);return n.highestTargetId=o.next(),this.Ln(e,n).next(()=>n.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Bn(e).next(n=>ln.fromTimestamp(new Ur(n.lastRemoteSnapshotVersion.seconds,n.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Bn(e).next(n=>n.highestListenSequenceNumber)}setTargetsMetadata(e,n,o){return this.Bn(e).next(u=>(u.highestListenSequenceNumber=n,o&&(u.lastRemoteSnapshotVersion=o.toTimestamp()),n>u.highestListenSequenceNumber&&(u.highestListenSequenceNumber=n),this.Ln(e,u)))}addTargetData(e,n){return this.kn(e,n).next(()=>this.Bn(e).next(o=>(o.targetCount+=1,this.qn(n,o),this.Ln(e,o))))}updateTargetData(e,n){return this.kn(e,n)}removeTargetData(e,n){return this.removeMatchingKeysForTargetId(e,n.targetId).next(()=>Mh(e).delete(n.targetId)).next(()=>this.Bn(e)).next(o=>(vn(o.targetCount>0),o.targetCount-=1,this.Ln(e,o)))}removeTargets(e,n,o){let u=0;const p=[];return Mh(e).Y((I,M)=>{const U=xp(M);U.sequenceNumber<=n&&null===o.get(U.targetId)&&(u++,p.push(this.removeTargetData(e,U)))}).next(()=>V.waitFor(p)).next(()=>u)}forEachTarget(e,n){return Mh(e).Y((o,u)=>{const p=xp(u);n(p)})}Bn(e){return Lp(e).get("targetGlobalKey").next(n=>(vn(null!==n),n))}Ln(e,n){return Lp(e).put("targetGlobalKey",n)}kn(e,n){return Mh(e).put(Ah(this.serializer,n))}qn(e,n){let o=!1;return e.targetId>n.highestTargetId&&(n.highestTargetId=e.targetId,o=!0),e.sequenceNumber>n.highestListenSequenceNumber&&(n.highestListenSequenceNumber=e.sequenceNumber,o=!0),o}getTargetCount(e){return this.Bn(e).next(n=>n.targetCount)}getTargetData(e,n){const o=Ha(n),u=IDBKeyRange.bound([o,Number.NEGATIVE_INFINITY],[o,Number.POSITIVE_INFINITY]);let p=null;return Mh(e).Y({range:u,index:"queryTargetsIndex"},(I,M,U)=>{const W=xp(M);oc(n,W.target)&&(p=W,U.done())}).next(()=>p)}addMatchingKeys(e,n,o){const u=[],p=Fc(e);return n.forEach(I=>{const M=Is(I.path);u.push(p.put({targetId:o,path:M})),u.push(this.referenceDelegate.addReference(e,o,I))}),V.waitFor(u)}removeMatchingKeys(e,n,o){const u=Fc(e);return V.forEach(n,p=>{const I=Is(p.path);return V.waitFor([u.delete([o,I]),this.referenceDelegate.removeReference(e,o,p)])})}removeMatchingKeysForTargetId(e,n){const o=Fc(e),u=IDBKeyRange.bound([n],[n+1],!1,!0);return o.delete(u)}getMatchingKeysForTargetId(e,n){const o=IDBKeyRange.bound([n],[n+1],!1,!0),u=Fc(e);let p=fr();return u.Y({range:o,J:!0},(I,M,U)=>{const W=Ho(I[1]),ee=new Qt(W);p=p.add(ee)}).next(()=>p)}containsKey(e,n){const o=Is(n.path),u=IDBKeyRange.bound([o],[Yc(o)],!1,!0);let p=0;return Fc(e).Y({index:"documentTargetsIndex",J:!0,range:u},([I,M],U,W)=>{0!==I&&(p++,W.done())}).next(()=>p>0)}_t(e,n){return Mh(e).get(n).next(o=>o?xp(o):null)}}function Mh(i){return ss(i,"targets")}function Lp(i){return ss(i,"targetGlobal")}function Fc(i){return ss(i,"targetDocuments")}function Xm([i,e],[n,o]){const u=Yn(i,n);return 0===u?Yn(e,o):u}class cy{constructor(e){this.Qn=e,this.buffer=new Zr(Xm),this.Kn=0}$n(){return++this.Kn}Un(e){const n=[e,this.$n()];if(this.buffer.size<this.Qn)this.buffer=this.buffer.add(n);else{const o=this.buffer.last();Xm(n,o)<0&&(this.buffer=this.buffer.delete(o).add(n))}}get maxValue(){return this.buffer.last()[0]}}class e_{constructor(e,n,o){this.garbageCollector=e,this.asyncQueue=n,this.localStore=o,this.Wn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Gn(6e4)}stop(){this.Wn&&(this.Wn.cancel(),this.Wn=null)}get started(){return null!==this.Wn}Gn(e){var n=this;Tt("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Wn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,Re.Z)(function*(){n.Wn=null;try{yield n.localStore.collectGarbage(n.garbageCollector)}catch(o){Gt(o)?Tt("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",o):yield A(o)}yield n.Gn(3e5)}))}}class dy{constructor(e,n){this.zn=e,this.params=n}calculateTargetCount(e,n){return this.zn.jn(e).next(o=>Math.floor(n/100*o))}nthSequenceNumber(e,n){if(0===n)return V.resolve(is._e);const o=new cy(n);return this.zn.forEachTarget(e,u=>o.Un(u.sequenceNumber)).next(()=>this.zn.Hn(e,u=>o.Un(u))).next(()=>o.maxValue)}removeTargets(e,n,o){return this.zn.removeTargets(e,n,o)}removeOrphanedDocuments(e,n){return this.zn.removeOrphanedDocuments(e,n)}collect(e,n){return-1===this.params.cacheSizeCollectionThreshold?(Tt("LruGarbageCollector","Garbage collection skipped; disabled"),V.resolve(oy)):this.getCacheSize(e).next(o=>o<this.params.cacheSizeCollectionThreshold?(Tt("LruGarbageCollector",`Garbage collection skipped; Cache size ${o} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),oy):this.Jn(e,n))}getCacheSize(e){return this.zn.getCacheSize(e)}Jn(e,n){let o,u,p,I,M,U,W;const ee=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(fe=>(fe>this.params.maximumSequenceNumbersToCollect?(Tt("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${fe}`),u=this.params.maximumSequenceNumbersToCollect):u=fe,I=Date.now(),this.nthSequenceNumber(e,u))).next(fe=>(o=fe,M=Date.now(),this.removeTargets(e,o,n))).next(fe=>(p=fe,U=Date.now(),this.removeOrphanedDocuments(e,o))).next(fe=>(W=Date.now(),Gl()<=Pe.in.DEBUG&&Tt("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${I-ee}ms\n\tDetermined least recently used ${u} in `+(M-I)+`ms\n\tRemoved ${p} targets in `+(U-M)+`ms\n\tRemoved ${fe} documents in `+(W-U)+`ms\nTotal Duration: ${W-ee}ms`),V.resolve({didRun:!0,sequenceNumbersCollected:u,targetsRemoved:p,documentsRemoved:fe})))}}class vv{constructor(e,n){this.db=e,this.garbageCollector=function zg(i,e){return new dy(i,e)}(this,n)}jn(e){const n=this.Yn(e);return this.db.getTargetCache().getTargetCount(e).next(o=>n.next(u=>o+u))}Yn(e){let n=0;return this.Hn(e,o=>{n++}).next(()=>n)}forEachTarget(e,n){return this.db.getTargetCache().forEachTarget(e,n)}Hn(e,n){return this.Zn(e,(o,u)=>n(u))}addReference(e,n,o){return t_(e,o)}removeReference(e,n,o){return t_(e,o)}removeTargets(e,n,o){return this.db.getTargetCache().removeTargets(e,n,o)}markPotentiallyOrphaned(e,n){return t_(e,n)}Xn(e,n){return function(u,p){let I=!1;return ly(u).Z(M=>Of(u,M,p).next(U=>(U&&(I=!0),V.resolve(!U)))).next(()=>I)}(e,n)}removeOrphanedDocuments(e,n){const o=this.db.getRemoteDocumentCache().newChangeBuffer(),u=[];let p=0;return this.Zn(e,(I,M)=>{if(M<=n){const U=this.Xn(e,I).next(W=>{if(!W)return p++,o.getEntry(e,I).next(()=>(o.removeEntry(I,ln.min()),Fc(e).delete([0,Is(I.path)])))});u.push(U)}}).next(()=>V.waitFor(u)).next(()=>o.apply(e)).next(()=>p)}removeTarget(e,n){const o=n.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,o)}updateLimboDocument(e,n){return t_(e,n)}Zn(e,n){const o=Fc(e);let u,p=is._e;return o.Y({index:"documentTargetsIndex"},([I,M],{path:U,sequenceNumber:W})=>{0===I?(p!==is._e&&n(new Qt(Ho(u)),p),p=W,u=U):p=is._e}).next(()=>{p!==is._e&&n(new Qt(Ho(u)),p)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function t_(i,e){return Fc(i).put((u=i.currentSequenceNumber,{targetId:0,path:Is(e.path),sequenceNumber:u}));var u}class xh{constructor(){this.changes=new ro(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,ar.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const o=this.changes.get(n);return void 0!==o?V.resolve(o):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class Mf{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,n,o){return fd(e).put(o)}removeEntry(e,n,o){return fd(e).delete(function(p,I){const M=p.path.toArray();return[M.slice(0,M.length-2),M[M.length-2],Bg(I),M[M.length-1]]}(n,o))}updateMetadata(e,n){return this.getMetadata(e).next(o=>(o.byteSize+=n,this.er(e,o)))}getEntry(e,n){let o=ar.newInvalidDocument(n);return fd(e).Y({index:"documentKeyIndex",range:IDBKeyRange.only(xf(n))},(u,p)=>{o=this.tr(n,p)}).next(()=>o)}nr(e,n){let o={size:0,document:ar.newInvalidDocument(n)};return fd(e).Y({index:"documentKeyIndex",range:IDBKeyRange.only(xf(n))},(u,p)=>{o={document:this.tr(n,p),size:$g(p)}}).next(()=>o)}getEntries(e,n){let o=So();return this.rr(e,n,(u,p)=>{const I=this.tr(u,p);o=o.insert(u,I)}).next(()=>o)}ir(e,n){let o=So(),u=new ci(Qt.comparator);return this.rr(e,n,(p,I)=>{const M=this.tr(p,I);o=o.insert(p,M),u=u.insert(p,$g(I))}).next(()=>({documents:o,sr:u}))}rr(e,n,o){if(n.isEmpty())return V.resolve();let u=new Zr(Kg);n.forEach(U=>u=u.add(U));const p=IDBKeyRange.bound(xf(u.first()),xf(u.last())),I=u.getIterator();let M=I.getNext();return fd(e).Y({index:"documentKeyIndex",range:p},(U,W,ee)=>{const fe=Qt.fromSegments([...W.prefixPath,W.collectionGroup,W.documentId]);for(;M&&Kg(M,fe)<0;)o(M,null),M=I.getNext();M&&M.isEqual(fe)&&(o(M,W),M=I.hasNext()?I.getNext():null),M?ee.U(xf(M)):ee.done()}).next(()=>{for(;M;)o(M,null),M=I.hasNext()?I.getNext():null})}getDocumentsMatchingQuery(e,n,o,u,p){const I=n.path,M=[I.popLast().toArray(),I.lastSegment(),Bg(o.readTime),o.documentKey.path.isEmpty()?"":o.documentKey.path.lastSegment()],U=[I.popLast().toArray(),I.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return fd(e).W(IDBKeyRange.bound(M,U,!0)).next(W=>{p?.incrementDocumentReadCount(W.length);let ee=So();for(const fe of W){const Me=this.tr(Qt.fromSegments(fe.prefixPath.concat(fe.collectionGroup,fe.documentId)),fe);Me.isFoundDocument()&&(pn(n,Me)||u.has(Me.key))&&(ee=ee.insert(Me.key,Me))}return ee})}getAllFromCollectionGroup(e,n,o,u){let p=So();const I=qg(n,o),M=qg(n,Ao.max());return fd(e).Y({index:"collectionGroupIndex",range:IDBKeyRange.bound(I,M,!0)},(U,W,ee)=>{const fe=this.tr(Qt.fromSegments(W.prefixPath.concat(W.collectionGroup,W.documentId)),W);p=p.insert(fe.key,fe),p.size===u&&ee.done()}).next(()=>p)}newChangeBuffer(e){return new n_(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(n=>n.byteSize)}getMetadata(e){return Vp(e).get("remoteDocumentGlobalKey").next(n=>(vn(!!n),n))}er(e,n){return Vp(e).put("remoteDocumentGlobalKey",n)}tr(e,n){if(n){const o=function Dh(i,e){let n;if(e.document)n=Rp(i.ut,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const o=Qt.fromSegments(e.noDocument.path),u=Ch(e.noDocument.readTime);n=ar.newNoDocument(o,u),e.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!e.unknownDocument)return on();{const o=Qt.fromSegments(e.unknownDocument.path),u=Ch(e.unknownDocument.version);n=ar.newUnknownDocument(o,u)}}return e.readTime&&n.setReadTime(function(u){const p=new Ur(u[0],u[1]);return ln.fromTimestamp(p)}(e.readTime)),n}(this.serializer,n);if(!o.isNoDocument()||!o.version.isEqual(ln.min()))return o}return ar.newInvalidDocument(e)}}function Wg(i){return new Mf(i)}class n_ extends xh{constructor(e,n){super(),this._r=e,this.trackRemovals=n,this.ar=new ro(o=>o.toString(),(o,u)=>o.isEqual(u))}applyChanges(e){const n=[];let o=0,u=new Zr((p,I)=>Yn(p.canonicalString(),I.canonicalString()));return this.changes.forEach((p,I)=>{const M=this.ar.get(p);if(n.push(this._r.removeEntry(e,p,M.readTime)),I.isValidDocument()){const U=ty(this._r.serializer,I);u=u.add(p.path.popLast());const W=$g(U);o+=W-M.size,n.push(this._r.addEntry(e,p,U))}else if(o-=M.size,this.trackRemovals){const U=ty(this._r.serializer,I.convertToNoDocument(ln.min()));n.push(this._r.addEntry(e,p,U))}}),u.forEach(p=>{n.push(this._r.indexManager.addToCollectionParentIndex(e,p))}),n.push(this._r.updateMetadata(e,o)),V.waitFor(n)}getFromCache(e,n){return this._r.nr(e,n).next(o=>(this.ar.set(n,{size:o.size,readTime:o.document.readTime}),o.document))}getAllFromCache(e,n){return this._r.ir(e,n).next(({documents:o,sr:u})=>(u.forEach((p,I)=>{this.ar.set(p,{size:I,readTime:o.get(p).readTime})}),o))}}function Vp(i){return ss(i,"remoteDocumentGlobal")}function fd(i){return ss(i,"remoteDocumentsV14")}function xf(i){const e=i.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function qg(i,e){const n=e.documentKey.path.toArray();return[i,Bg(e.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function Kg(i,e){const n=i.path.toArray(),o=e.path.toArray();let u=0;for(let p=0;p<n.length-2&&p<o.length-2;++p)if(u=Yn(n[p],o[p]),u)return u;return u=Yn(n.length,o.length),u||(u=Yn(n[n.length-2],o[o.length-2]),u||Yn(n[n.length-1],o[o.length-1]))}class Bp{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}class hy{constructor(e,n,o,u){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=o,this.indexManager=u}getDocument(e,n){let o=null;return this.documentOverlayCache.getOverlay(e,n).next(u=>(o=u,this.remoteDocumentCache.getEntry(e,n))).next(u=>(null!==o&&bh(o.mutation,u,ca.empty(),Ur.now()),u))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(o=>this.getLocalViewOfDocuments(e,o,fr()).next(()=>o))}getLocalViewOfDocuments(e,n,o=fr()){const u=Nr();return this.populateOverlays(e,u,n).next(()=>this.computeViews(e,n,u,o).next(p=>{let I=Du();return p.forEach((M,U)=>{I=I.insert(M,U.overlayedDocument)}),I}))}getOverlayedDocuments(e,n){const o=Nr();return this.populateOverlays(e,o,n).next(()=>this.computeViews(e,n,o,fr()))}populateOverlays(e,n,o){const u=[];return o.forEach(p=>{n.has(p)||u.push(p)}),this.documentOverlayCache.getOverlays(e,u).next(p=>{p.forEach((I,M)=>{n.set(I,M)})})}computeViews(e,n,o,u){let p=So();const I=Rl(),M=Rl();return n.forEach((U,W)=>{const ee=o.get(W.key);u.has(W.key)&&(void 0===ee||ee.mutation instanceof Pl)?p=p.insert(W.key,W):void 0!==ee?(I.set(W.key,ee.mutation.getFieldMask()),bh(ee.mutation,W,ee.mutation.getFieldMask(),Ur.now())):I.set(W.key,ca.empty())}),this.recalculateAndSaveOverlays(e,p).next(U=>(U.forEach((W,ee)=>I.set(W,ee)),n.forEach((W,ee)=>{var fe;return M.set(W,new Bp(ee,null!==(fe=I.get(W))&&void 0!==fe?fe:null))}),M))}recalculateAndSaveOverlays(e,n){const o=Rl();let u=new ci((I,M)=>I-M),p=fr();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(I=>{for(const M of I)M.keys().forEach(U=>{const W=n.get(U);if(null===W)return;let ee=o.get(U)||ca.empty();ee=M.applyToLocalView(W,ee),o.set(U,ee);const fe=(u.get(M.batchId)||fr()).add(U);u=u.insert(M.batchId,fe)})}).next(()=>{const I=[],M=u.getReverseIterator();for(;M.hasNext();){const U=M.getNext(),W=U.key,ee=U.value,fe=rd();ee.forEach(Me=>{if(!p.has(Me)){const tt=Th(n.get(Me),o.get(Me));null!==tt&&fe.set(Me,tt),p=p.add(Me)}}),I.push(this.documentOverlayCache.saveOverlays(e,W,fe))}return V.waitFor(I)}).next(()=>o)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(o=>this.recalculateAndSaveOverlays(e,o))}getDocumentsMatchingQuery(e,n,o,u){return Qt.isDocumentKey((I=n).path)&&null===I.collectionGroup&&0===I.filters.length?this.getDocumentsMatchingDocumentQuery(e,n.path):P(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,o,u):this.getDocumentsMatchingCollectionQuery(e,n,o,u);var I}getNextDocuments(e,n,o,u){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,o,u).next(p=>{const I=u-p.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,o.largestBatchId,u-p.size):V.resolve(Nr());let M=-1,U=p;return I.next(W=>V.forEach(W,(ee,fe)=>(M<fe.largestBatchId&&(M=fe.largestBatchId),p.get(ee)?V.resolve():this.remoteDocumentCache.getEntry(e,ee).next(Me=>{U=U.insert(ee,Me)}))).next(()=>this.populateOverlays(e,W,p)).next(()=>this.computeViews(e,U,W,fr())).next(ee=>({batchId:M,changes:Ro(ee)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Qt(n)).next(o=>{let u=Du();return o.isFoundDocument()&&(u=u.insert(o.key,o)),u})}getDocumentsMatchingCollectionGroupQuery(e,n,o,u){const p=n.collectionGroup;let I=Du();return this.indexManager.getCollectionParents(e,p).next(M=>V.forEach(M,U=>{const W=(fe=n,Me=U.child(p),new js(Me,null,fe.explicitOrderBy.slice(),fe.filters.slice(),fe.limit,fe.limitType,fe.startAt,fe.endAt));var fe,Me;return this.getDocumentsMatchingCollectionQuery(e,W,o,u).next(ee=>{ee.forEach((fe,Me)=>{I=I.insert(fe,Me)})})}).next(()=>I))}getDocumentsMatchingCollectionQuery(e,n,o,u){let p;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,o.largestBatchId).next(I=>(p=I,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,o,p,u))).next(I=>{p.forEach((U,W)=>{const ee=W.getKey();null===I.get(ee)&&(I=I.insert(ee,ar.newInvalidDocument(ee)))});let M=Du();return I.forEach((U,W)=>{const ee=p.get(U);void 0!==ee&&bh(ee.mutation,W,ca.empty(),Ur.now()),pn(n,W)&&(M=M.insert(U,W))}),M})}}class Yg{constructor(e){this.serializer=e,this.ur=new Map,this.cr=new Map}getBundleMetadata(e,n){return V.resolve(this.ur.get(n))}saveBundleMetadata(e,n){return this.ur.set(n.id,{id:(u=n).id,version:u.version,createTime:us(u.createTime)}),V.resolve();var u}getNamedQuery(e,n){return V.resolve(this.cr.get(n))}saveNamedQuery(e,n){return this.cr.set(n.name,{name:(u=n).name,query:Af(u.bundledQuery),readTime:us(u.readTime)}),V.resolve();var u}}class fy{constructor(){this.overlays=new ci(Qt.comparator),this.lr=new Map}getOverlay(e,n){return V.resolve(this.overlays.get(n))}getOverlays(e,n){const o=Nr();return V.forEach(n,u=>this.getOverlay(e,u).next(p=>{null!==p&&o.set(u,p)})).next(()=>o)}saveOverlays(e,n,o){return o.forEach((u,p)=>{this.lt(e,n,p)}),V.resolve()}removeOverlaysForBatchId(e,n,o){const u=this.lr.get(o);return void 0!==u&&(u.forEach(p=>this.overlays=this.overlays.remove(p)),this.lr.delete(o)),V.resolve()}getOverlaysForCollection(e,n,o){const u=Nr(),p=n.length+1,I=new Qt(n.child("")),M=this.overlays.getIteratorFrom(I);for(;M.hasNext();){const U=M.getNext().value,W=U.getKey();if(!n.isPrefixOf(W.path))break;W.path.length===p&&U.largestBatchId>o&&u.set(U.getKey(),U)}return V.resolve(u)}getOverlaysForCollectionGroup(e,n,o,u){let p=new ci((W,ee)=>W-ee);const I=this.overlays.getIterator();for(;I.hasNext();){const W=I.getNext().value;if(W.getKey().getCollectionGroup()===n&&W.largestBatchId>o){let ee=p.get(W.largestBatchId);null===ee&&(ee=Nr(),p=p.insert(W.largestBatchId,ee)),ee.set(W.getKey(),W)}}const M=Nr(),U=p.getIterator();for(;U.hasNext()&&(U.getNext().value.forEach((W,ee)=>M.set(W,ee)),!(M.size()>=u)););return V.resolve(M)}lt(e,n,o){const u=this.overlays.get(o.key);if(null!==u){const I=this.lr.get(u.largestBatchId).delete(o.key);this.lr.set(u.largestBatchId,I)}this.overlays=this.overlays.insert(o.key,new jd(n,o));let p=this.lr.get(n);void 0===p&&(p=fr(),this.lr.set(n,p)),this.lr.set(n,p.add(o.key))}}class kf{constructor(){this.hr=new Zr(No.Pr),this.Ir=new Zr(No.Tr)}isEmpty(){return this.hr.isEmpty()}addReference(e,n){const o=new No(e,n);this.hr=this.hr.add(o),this.Ir=this.Ir.add(o)}Er(e,n){e.forEach(o=>this.addReference(o,n))}removeReference(e,n){this.dr(new No(e,n))}Ar(e,n){e.forEach(o=>this.removeReference(o,n))}Rr(e){const n=new Qt(new or([])),o=new No(n,e),u=new No(n,e+1),p=[];return this.Ir.forEachInRange([o,u],I=>{this.dr(I),p.push(I.key)}),p}Vr(){this.hr.forEach(e=>this.dr(e))}dr(e){this.hr=this.hr.delete(e),this.Ir=this.Ir.delete(e)}mr(e){const n=new Qt(new or([])),o=new No(n,e),u=new No(n,e+1);let p=fr();return this.Ir.forEachInRange([o,u],I=>{p=p.add(I.key)}),p}containsKey(e){const n=new No(e,0),o=this.hr.firstAfterOrEqual(n);return null!==o&&e.isEqual(o.key)}}class No{constructor(e,n){this.key=e,this.gr=n}static Pr(e,n){return Qt.comparator(e.key,n.key)||Yn(e.gr,n.gr)}static Tr(e,n){return Yn(e.gr,n.gr)||Qt.comparator(e.key,n.key)}}class r_{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.pr=1,this.yr=new Zr(No.Pr)}checkEmpty(e){return V.resolve(0===this.mutationQueue.length)}addMutationBatch(e,n,o,u){const p=this.pr;this.pr++;const I=new Ud(p,n,o,u);this.mutationQueue.push(I);for(const M of u)this.yr=this.yr.add(new No(M.key,p)),this.indexManager.addToCollectionParentIndex(e,M.key.path.popLast());return V.resolve(I)}lookupMutationBatch(e,n){return V.resolve(this.wr(n))}getNextMutationBatchAfterBatchId(e,n){const u=this.Sr(n+1),p=u<0?0:u;return V.resolve(this.mutationQueue.length>p?this.mutationQueue[p]:null)}getHighestUnacknowledgedBatchId(){return V.resolve(0===this.mutationQueue.length?-1:this.pr-1)}getAllMutationBatches(e){return V.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const o=new No(n,0),u=new No(n,Number.POSITIVE_INFINITY),p=[];return this.yr.forEachInRange([o,u],I=>{const M=this.wr(I.gr);p.push(M)}),V.resolve(p)}getAllMutationBatchesAffectingDocumentKeys(e,n){let o=new Zr(Yn);return n.forEach(u=>{const p=new No(u,0),I=new No(u,Number.POSITIVE_INFINITY);this.yr.forEachInRange([p,I],M=>{o=o.add(M.gr)})}),V.resolve(this.br(o))}getAllMutationBatchesAffectingQuery(e,n){const o=n.path,u=o.length+1;let p=o;Qt.isDocumentKey(p)||(p=p.child(""));const I=new No(new Qt(p),0);let M=new Zr(Yn);return this.yr.forEachWhile(U=>{const W=U.key.path;return!!o.isPrefixOf(W)&&(W.length===u&&(M=M.add(U.gr)),!0)},I),V.resolve(this.br(M))}br(e){const n=[];return e.forEach(o=>{const u=this.wr(o);null!==u&&n.push(u)}),n}removeMutationBatch(e,n){vn(0===this.Dr(n.batchId,"removed")),this.mutationQueue.shift();let o=this.yr;return V.forEach(n.mutations,u=>{const p=new No(u.key,n.batchId);return o=o.delete(p),this.referenceDelegate.markPotentiallyOrphaned(e,u.key)}).next(()=>{this.yr=o})}Fn(e){}containsKey(e,n){const o=new No(n,0),u=this.yr.firstAfterOrEqual(o);return V.resolve(n.isEqual(u&&u.key))}performConsistencyCheck(e){return V.resolve()}Dr(e,n){return this.Sr(e)}Sr(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}wr(e){const n=this.Sr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}class qd{constructor(e){this.Cr=e,this.docs=new ci(Qt.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const o=n.key,u=this.docs.get(o),p=u?u.size:0,I=this.Cr(n);return this.docs=this.docs.insert(o,{document:n.mutableCopy(),size:I}),this.size+=I-p,this.indexManager.addToCollectionParentIndex(e,o.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const o=this.docs.get(n);return V.resolve(o?o.document.mutableCopy():ar.newInvalidDocument(n))}getEntries(e,n){let o=So();return n.forEach(u=>{const p=this.docs.get(u);o=o.insert(u,p?p.document.mutableCopy():ar.newInvalidDocument(u))}),V.resolve(o)}getDocumentsMatchingQuery(e,n,o,u){let p=So();const I=n.path,M=new Qt(I.child("")),U=this.docs.getIteratorFrom(M);for(;U.hasNext();){const{key:W,value:{document:ee}}=U.getNext();if(!I.isPrefixOf(W.path))break;W.path.length>I.length+1||Gu(gh(ee),o)<=0||(u.has(ee.key)||pn(n,ee))&&(p=p.insert(ee.key,ee.mutableCopy()))}return V.resolve(p)}getAllFromCollectionGroup(e,n,o,u){on()}vr(e,n){return V.forEach(this.docs,o=>n(o))}newChangeBuffer(e){return new py(this)}getSize(e){return V.resolve(this.size)}}class py extends xh{constructor(e){super(),this._r=e}applyChanges(e){const n=[];return this.changes.forEach((o,u)=>{u.isValidDocument()?n.push(this._r.addEntry(e,u)):this._r.removeEntry(o)}),V.waitFor(n)}getFromCache(e,n){return this._r.getEntry(e,n)}getAllFromCache(e,n){return this._r.getEntries(e,n)}}class Zg{constructor(e){this.persistence=e,this.Fr=new ro(n=>Ha(n),oc),this.lastRemoteSnapshotVersion=ln.min(),this.highestTargetId=0,this.Mr=0,this.Or=new kf,this.targetCount=0,this.Nr=xl.On()}forEachTarget(e,n){return this.Fr.forEach((o,u)=>n(u)),V.resolve()}getLastRemoteSnapshotVersion(e){return V.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return V.resolve(this.Mr)}allocateTargetId(e){return this.highestTargetId=this.Nr.next(),V.resolve(this.highestTargetId)}setTargetsMetadata(e,n,o){return o&&(this.lastRemoteSnapshotVersion=o),n>this.Mr&&(this.Mr=n),V.resolve()}kn(e){this.Fr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.Nr=new xl(n),this.highestTargetId=n),e.sequenceNumber>this.Mr&&(this.Mr=e.sequenceNumber)}addTargetData(e,n){return this.kn(n),this.targetCount+=1,V.resolve()}updateTargetData(e,n){return this.kn(n),V.resolve()}removeTargetData(e,n){return this.Fr.delete(n.target),this.Or.Rr(n.targetId),this.targetCount-=1,V.resolve()}removeTargets(e,n,o){let u=0;const p=[];return this.Fr.forEach((I,M)=>{M.sequenceNumber<=n&&null===o.get(M.targetId)&&(this.Fr.delete(I),p.push(this.removeMatchingKeysForTargetId(e,M.targetId)),u++)}),V.waitFor(p).next(()=>u)}getTargetCount(e){return V.resolve(this.targetCount)}getTargetData(e,n){const o=this.Fr.get(n)||null;return V.resolve(o)}addMatchingKeys(e,n,o){return this.Or.Er(n,o),V.resolve()}removeMatchingKeys(e,n,o){this.Or.Ar(n,o);const u=this.persistence.referenceDelegate,p=[];return u&&n.forEach(I=>{p.push(u.markPotentiallyOrphaned(e,I))}),V.waitFor(p)}removeMatchingKeysForTargetId(e,n){return this.Or.Rr(n),V.resolve()}getMatchingKeysForTargetId(e,n){const o=this.Or.mr(n);return V.resolve(o)}containsKey(e,n){return V.resolve(this.Or.containsKey(n))}}class kh{constructor(e,n){this.Br={},this.overlays={},this.Lr=new is(0),this.kr=!1,this.kr=!0,this.referenceDelegate=e(this),this.qr=new Zg(this),this.indexManager=new iy,this.remoteDocumentCache=new qd(o=>this.referenceDelegate.Qr(o)),this.serializer=new Mp(n),this.Kr=new Yg(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.kr=!1,Promise.resolve()}get started(){return this.kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new fy,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let o=this.Br[e.toKey()];return o||(o=new r_(n,this.referenceDelegate),this.Br[e.toKey()]=o),o}getTargetCache(){return this.qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Kr}runTransaction(e,n,o){Tt("MemoryPersistence","Starting transaction:",e);const u=new gy(this.Lr.next());return this.referenceDelegate.$r(),o(u).next(p=>this.referenceDelegate.Ur(u).next(()=>p)).toPromise().then(p=>(u.raiseOnCommittedEvent(),p))}Wr(e,n){return V.or(Object.values(this.Br).map(o=>()=>o.containsKey(e,n)))}}class gy extends k{constructor(e){super(),this.currentSequenceNumber=e}}class Fh{constructor(e){this.persistence=e,this.Gr=new kf,this.zr=null}static jr(e){return new Fh(e)}get Hr(){if(this.zr)return this.zr;throw on()}addReference(e,n,o){return this.Gr.addReference(o,n),this.Hr.delete(o.toString()),V.resolve()}removeReference(e,n,o){return this.Gr.removeReference(o,n),this.Hr.add(o.toString()),V.resolve()}markPotentiallyOrphaned(e,n){return this.Hr.add(n.toString()),V.resolve()}removeTarget(e,n){this.Gr.Rr(n.targetId).forEach(u=>this.Hr.add(u.toString()));const o=this.persistence.getTargetCache();return o.getMatchingKeysForTargetId(e,n.targetId).next(u=>{u.forEach(p=>this.Hr.add(p.toString()))}).next(()=>o.removeTargetData(e,n))}$r(){this.zr=new Set}Ur(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return V.forEach(this.Hr,o=>{const u=Qt.fromPath(o);return this.Jr(e,u).next(p=>{p||n.removeEntry(u,ln.min())})}).next(()=>(this.zr=null,n.apply(e)))}updateLimboDocument(e,n){return this.Jr(e,n).next(o=>{o?this.Hr.delete(n.toString()):this.Hr.add(n.toString())})}Qr(e){return 0}Jr(e,n){return V.or([()=>V.resolve(this.Gr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Wr(e,n)])}}class uc{constructor(e){this.serializer=e}N(e,n,o,u){const p=new te("createOrUpgrade",n);var U;o<1&&u>=1&&(e.createObjectStore("owner"),(U=e).createObjectStore("mutationQueues",{keyPath:"userId"}),U.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Dl,{unique:!0}),U.createObjectStore("documentMutations"),Kd(e),function(U){U.createObjectStore("remoteDocuments")}(e));let I=V.resolve();return o<3&&u>=3&&(0!==o&&(function(U){U.deleteObjectStore("targetDocuments"),U.deleteObjectStore("targets"),U.deleteObjectStore("targetGlobal")}(e),Kd(e)),I=I.next(()=>function(U){const W=U.store("targetGlobal"),ee={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:ln.min().toTimestamp(),targetCount:0};return W.put("targetGlobalKey",ee)}(p))),o<4&&u>=4&&(0!==o&&(I=I.next(()=>function(U,W){return W.store("mutations").W().next(ee=>{U.deleteObjectStore("mutations"),U.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Dl,{unique:!0});const fe=W.store("mutations"),Me=ee.map(tt=>fe.put(tt));return V.waitFor(Me)})}(e,p))),I=I.next(()=>{!function(U){U.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),o<5&&u>=5&&(I=I.next(()=>this.Zr(p))),o<6&&u>=6&&(I=I.next(()=>(function(U){U.createObjectStore("remoteDocumentGlobal")}(e),this.Xr(p)))),o<7&&u>=7&&(I=I.next(()=>this.ei(p))),o<8&&u>=8&&(I=I.next(()=>this.ti(e,p))),o<9&&u>=9&&(I=I.next(()=>{!function(U){U.objectStoreNames.contains("remoteDocumentChanges")&&U.deleteObjectStore("remoteDocumentChanges")}(e)})),o<10&&u>=10&&(I=I.next(()=>this.ni(p))),o<11&&u>=11&&(I=I.next(()=>{(function(U){U.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(U){U.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),o<12&&u>=12&&(I=I.next(()=>{!function(U){const W=U.createObjectStore("documentOverlays",{keyPath:Zc});W.createIndex("collectionPathOverlayIndex",mp,{unique:!1}),W.createIndex("collectionGroupOverlayIndex",Yl,{unique:!1})}(e)})),o<13&&u>=13&&(I=I.next(()=>function(U){const W=U.createObjectStore("remoteDocumentsV14",{keyPath:Go});W.createIndex("documentKeyIndex",Kl),W.createIndex("collectionGroupIndex",_h)}(e)).next(()=>this.ri(e,p)).next(()=>e.deleteObjectStore("remoteDocuments"))),o<14&&u>=14&&(I=I.next(()=>this.ii(e,p))),o<15&&u>=15&&(I=I.next(()=>function(U){U.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),U.createObjectStore("indexState",{keyPath:Sd}).createIndex("sequenceNumberIndex",Ng,{unique:!1}),U.createObjectStore("indexEntries",{keyPath:zu}).createIndex("documentKeyIndex",gp,{unique:!1})}(e))),I}Xr(e){let n=0;return e.store("remoteDocuments").Y((o,u)=>{n+=$g(u)}).next(()=>{const o={byteSize:n};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",o)})}Zr(e){const n=e.store("mutationQueues"),o=e.store("mutations");return n.W().next(u=>V.forEach(u,p=>{const I=IDBKeyRange.bound([p.userId,-1],[p.userId,p.lastAcknowledgedBatchId]);return o.W("userMutationsIndex",I).next(M=>V.forEach(M,U=>{vn(U.userId===p.userId);const W=cd(this.serializer,U);return ay(e,p.userId,W).next(()=>{})}))}))}ei(e){const n=e.store("targetDocuments"),o=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(u=>{const p=[];return o.Y((I,M)=>{const U=new or(I),W=[0,Is(U)];p.push(n.get(W).next(ee=>ee?V.resolve():n.put({targetId:0,path:Is(U),sequenceNumber:u.highestListenSequenceNumber})))}).next(()=>V.waitFor(p))})}ti(e,n){e.createObjectStore("collectionParents",{keyPath:uf});const o=n.store("collectionParents"),u=new sy,p=I=>{if(u.add(I)){const M=I.lastSegment(),U=I.popLast();return o.put({collectionId:M,parent:Is(U)})}};return n.store("remoteDocuments").Y({J:!0},(I,M)=>{const U=new or(I);return p(U.popLast())}).next(()=>n.store("documentMutations").Y({J:!0},([I,M,U],W)=>{const ee=Ho(M);return p(ee.popLast())}))}ni(e){const n=e.store("targets");return n.Y((o,u)=>{const p=xp(u),I=Ah(this.serializer,p);return n.put(I)})}ri(e,n){const o=n.store("remoteDocuments"),u=[];return o.Y((p,I)=>{const M=n.store("remoteDocumentsV14"),U=(fe=I,fe.document?new Qt(or.fromString(fe.document.name).popFirst(5)):fe.noDocument?Qt.fromSegments(fe.noDocument.path):fe.unknownDocument?Qt.fromSegments(fe.unknownDocument.path):on()).path.toArray(),W={prefixPath:U.slice(0,U.length-2),collectionGroup:U[U.length-2],documentId:U[U.length-1],readTime:I.readTime||[0,0],unknownDocument:I.unknownDocument,noDocument:I.noDocument,document:I.document,hasCommittedMutations:!!I.hasCommittedMutations};var fe;u.push(M.put(W))}).next(()=>V.waitFor(u))}ii(e,n){const o=n.store("mutations"),u=Wg(this.serializer),p=new kh(Fh.jr,this.serializer.ut);return o.W().next(I=>{const M=new Map;return I.forEach(U=>{var W;let ee=null!==(W=M.get(U.userId))&&void 0!==W?W:fr();cd(this.serializer,U).keys().forEach(fe=>ee=ee.add(fe)),M.set(U.userId,ee)}),V.forEach(M,(U,W)=>{const ee=new Yr(W),fe=Ug.ct(this.serializer,ee),Me=p.getIndexManager(ee),tt=Oh.ct(ee,this.serializer,Me,p.referenceDelegate);return new hy(u,tt,fe,Me).recalculateAndSaveOverlaysForDocumentKeys(new Eu(n,is._e),U).next()})})}}function Kd(i){i.createObjectStore("targetDocuments",{keyPath:Iu}).createIndex("documentTargetsIndex",Ac,{unique:!0}),i.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",vu,{unique:!0}),i.createObjectStore("targetGlobal")}const au="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class Up{constructor(e,n,o,u,p,I,M,U,W,ee,fe=15){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=o,this.si=p,this.window=I,this.document=M,this.oi=W,this._i=ee,this.ai=fe,this.Lr=null,this.kr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ui=null,this.inForeground=!1,this.ci=null,this.li=null,this.hi=Number.NEGATIVE_INFINITY,this.Pi=Me=>Promise.resolve(),!Up.D())throw new It(nt.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new vv(this,u),this.Ii=n+"main",this.serializer=new Mp(U),this.Ti=new he(this.Ii,this.ai,new uc(this.serializer)),this.qr=new uy(this.referenceDelegate,this.serializer),this.remoteDocumentCache=Wg(this.serializer),this.Kr=new ny,this.window&&this.window.localStorage?this.Ei=this.window.localStorage:(this.Ei=null,!1===ee&&Si("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.di().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new It(nt.FAILED_PRECONDITION,au);return this.Ai(),this.Ri(),this.Vi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.qr.getHighestSequenceNumber(e))}).then(e=>{this.Lr=new is(e,this.oi)}).then(()=>{this.kr=!0}).catch(e=>(this.Ti&&this.Ti.close(),Promise.reject(e)))}mi(e){var n=this;return this.Pi=function(){var o=(0,Re.Z)(function*(u){if(n.started)return e(u)});return function(u){return o.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ti.L(function(){var n=(0,Re.Z)(function*(o){null===o.newVersion&&(yield e())});return function(o){return n.apply(this,arguments)}}())}setNetworkEnabled(e){var n=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.si.enqueueAndForget((0,Re.Z)(function*(){n.started&&(yield n.di())})))}di(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Zd(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.fi(e).next(n=>{n||(this.isPrimary=!1,this.si.enqueueRetryable(()=>this.Pi(!1)))})}).next(()=>this.gi(e)).next(n=>this.isPrimary&&!n?this.pi(e).next(()=>!1):!!n&&this.yi(e).next(()=>!0))).catch(e=>{if(Gt(e))return Tt("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Tt("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.si.enqueueRetryable(()=>this.Pi(e)),this.isPrimary=e})}fi(e){return Yd(e).get("owner").next(n=>V.resolve(this.wi(n)))}Si(e){return Zd(e).delete(this.clientId)}bi(){var e=this;return(0,Re.Z)(function*(){if(e.isPrimary&&!e.Di(e.hi,18e5)){e.hi=Date.now();const n=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",o=>{const u=ss(o,"clientMetadata");return u.W().next(p=>{const I=e.Ci(p,18e5),M=p.filter(U=>-1===I.indexOf(U));return V.forEach(M,U=>u.delete(U.clientId)).next(()=>M)})}).catch(()=>[]);if(e.Ei)for(const o of n)e.Ei.removeItem(e.vi(o.clientId))}})()}Vi(){this.li=this.si.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.di().then(()=>this.bi()).then(()=>this.Vi()))}wi(e){return!!e&&e.ownerId===this.clientId}gi(e){return this._i?V.resolve(!0):Yd(e).get("owner").next(n=>{if(null!==n&&this.Di(n.leaseTimestampMs,5e3)&&!this.Fi(n.ownerId)){if(this.wi(n)&&this.networkEnabled)return!0;if(!this.wi(n)){if(!n.allowTabSynchronization)throw new It(nt.FAILED_PRECONDITION,au);return!1}}return!(!this.networkEnabled||!this.inForeground)||Zd(e).W().next(o=>void 0===this.Ci(o,5e3).find(u=>!(this.clientId===u.clientId||!(!this.networkEnabled&&u.networkEnabled||!this.inForeground&&u.inForeground&&this.networkEnabled===u.networkEnabled))))}).next(n=>(this.isPrimary!==n&&Tt("IndexedDbPersistence",`Client ${n?"is":"is not"} eligible for a primary lease.`),n))}shutdown(){var e=this;return(0,Re.Z)(function*(){e.kr=!1,e.Mi(),e.li&&(e.li.cancel(),e.li=null),e.xi(),e.Oi(),yield e.Ti.runTransaction("shutdown","readwrite",["owner","clientMetadata"],n=>{const o=new Eu(n,is._e);return e.pi(o).next(()=>e.Si(o))}),e.Ti.close(),e.Ni()})()}Ci(e,n){return e.filter(o=>this.Di(o.updateTimeMs,n)&&!this.Fi(o.clientId))}Bi(){return this.runTransaction("getActiveClients","readonly",e=>Zd(e).W().next(n=>this.Ci(n,18e5).map(o=>o.clientId)))}get started(){return this.kr}getMutationQueue(e,n){return Oh.ct(e,this.serializer,n,this.referenceDelegate)}getTargetCache(){return this.qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new P0(e,this.serializer.ut.databaseId)}getDocumentOverlayCache(e){return Ug.ct(this.serializer,e)}getBundleCache(){return this.Kr}runTransaction(e,n,o){Tt("IndexedDbPersistence","Starting transaction:",e);const u="readonly"===n?"readonly":"readwrite",p=15===(U=this.ai)?Rd:14===U?Wu:13===U?Os:12===U?cf:11===U?al:void on();var U;let I;return this.Ti.runTransaction(e,u,p,M=>(I=new Eu(M,this.Lr?this.Lr.next():is._e),"readwrite-primary"===n?this.fi(I).next(U=>!!U||this.gi(I)).next(U=>{if(!U)throw Si(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.si.enqueueRetryable(()=>this.Pi(!1)),new It(nt.FAILED_PRECONDITION,R);return o(I)}).next(U=>this.yi(I).next(()=>U)):this.Li(I).next(()=>o(I)))).then(M=>(I.raiseOnCommittedEvent(),M))}Li(e){return Yd(e).get("owner").next(n=>{if(null!==n&&this.Di(n.leaseTimestampMs,5e3)&&!this.Fi(n.ownerId)&&!this.wi(n)&&!(this._i||this.allowTabSynchronization&&n.allowTabSynchronization))throw new It(nt.FAILED_PRECONDITION,au)})}yi(e){const n={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Yd(e).put("owner",n)}static D(){return he.D()}pi(e){const n=Yd(e);return n.get("owner").next(o=>this.wi(o)?(Tt("IndexedDbPersistence","Releasing primary lease."),n.delete("owner")):V.resolve())}Di(e,n){const o=Date.now();return!(e<o-n||e>o&&(Si(`Detected an update time that is in the future: ${e} > ${o}`),1))}Ai(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ci=()=>{this.si.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.di()))},this.document.addEventListener("visibilitychange",this.ci),this.inForeground="visible"===this.document.visibilityState)}xi(){this.ci&&(this.document.removeEventListener("visibilitychange",this.ci),this.ci=null)}Ri(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ui=()=>{this.Mi();const n=/(?:Version|Mobile)\/1[456]/;(0,$e.G6)()&&(navigator.appVersion.match(n)||navigator.userAgent.match(n))&&this.si.enterRestrictedMode(!0),this.si.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ui))}Oi(){this.ui&&(this.window.removeEventListener("pagehide",this.ui),this.ui=null)}Fi(e){var n;try{const o=null!==(null===(n=this.Ei)||void 0===n?void 0:n.getItem(this.vi(e)));return Tt("IndexedDbPersistence",`Client '${e}' ${o?"is":"is not"} zombied in LocalStorage`),o}catch(o){return Si("IndexedDbPersistence","Failed to get zombied client id.",o),!1}}Mi(){if(this.Ei)try{this.Ei.setItem(this.vi(this.clientId),String(Date.now()))}catch(e){Si("Failed to set zombie client id.",e)}}Ni(){if(this.Ei)try{this.Ei.removeItem(this.vi(this.clientId))}catch{}}vi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Yd(i){return ss(i,"owner")}function Zd(i){return ss(i,"clientMetadata")}function cc(i,e){let n=i.projectId;return i.isDefaultDatabase||(n+="."+i.database),"firestore/"+e+"/"+n+"/"}class za{constructor(e,n,o,u){this.targetId=e,this.fromCache=n,this.ki=o,this.qi=u}static Qi(e,n){let o=fr(),u=fr();for(const p of n.docChanges)switch(p.type){case 0:o=o.add(p.doc.key);break;case 1:u=u.add(p.doc.key)}return new za(e,n.fromCache,o,u)}}class i_{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class s_{constructor(){this.Ki=!1,this.$i=!1,this.Ui=100,this.Wi=8}initialize(e,n){this.Gi=e,this.indexManager=n,this.Ki=!0}getDocumentsMatchingQuery(e,n,o,u){const p={result:null};return this.zi(e,n).next(I=>{p.result=I}).next(()=>{if(!p.result)return this.ji(e,n,u,o).next(I=>{p.result=I})}).next(()=>{if(p.result)return;const I=new i_;return this.Hi(e,n,I).next(M=>{if(p.result=M,this.$i)return this.Ji(e,n,I,M.size)})}).next(()=>p.result)}Ji(e,n,o,u){return o.documentReadCount<this.Ui?(Gl()<=Pe.in.DEBUG&&Tt("QueryEngine","SDK will not create cache indexes for query:",At(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Ui,"documents"),V.resolve()):(Gl()<=Pe.in.DEBUG&&Tt("QueryEngine","Query:",At(n),"scans",o.documentReadCount,"local documents and returns",u,"documents as results."),o.documentReadCount>this.Wi*u?(Gl()<=Pe.in.DEBUG&&Tt("QueryEngine","The SDK decides to create cache indexes for query:",At(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,w(n))):V.resolve())}zi(e,n){if(Fd(n))return V.resolve(null);let o=w(n);return this.indexManager.getIndexType(e,o).next(u=>0===u?null:(null!==n.limit&&1===u&&(n=ce(n,null,"F"),o=w(n)),this.indexManager.getDocumentsMatchingTarget(e,o).next(p=>{const I=fr(...p);return this.Gi.getDocuments(e,I).next(M=>this.indexManager.getMinOffset(e,o).next(U=>{const W=this.Yi(n,M);return this.Zi(n,W,I,U.readTime)?this.zi(e,ce(n,null,"F")):this.Xi(e,W,n,U)}))})))}ji(e,n,o,u){return Fd(n)||u.isEqual(ln.min())?V.resolve(null):this.Gi.getDocuments(e,o).next(p=>{const I=this.Yi(n,p);return this.Zi(n,I,o,u)?V.resolve(null):(Gl()<=Pe.in.DEBUG&&Tt("QueryEngine","Re-using previous result from %s to execute query: %s",u.toString(),At(n)),this.Xi(e,I,n,Wl(u,-1)).next(M=>M))})}Yi(e,n){let o=new Zr(Fr(e));return n.forEach((u,p)=>{pn(e,p)&&(o=o.add(p))}),o}Zi(e,n,o,u){if(null===e.limit)return!1;if(o.size!==n.size)return!0;const p="F"===e.limitType?n.last():n.first();return!!p&&(p.hasPendingWrites||p.version.compareTo(u)>0)}Hi(e,n,o){return Gl()<=Pe.in.DEBUG&&Tt("QueryEngine","Using full collection scan to execute query:",At(n)),this.Gi.getDocumentsMatchingQuery(e,n,Ao.min(),o)}Xi(e,n,o,u){return this.Gi.getDocumentsMatchingQuery(e,o,u).next(p=>(n.forEach(I=>{p=p.insert(I.key,I)}),p))}}class Ff{constructor(e,n,o,u){this.persistence=e,this.es=n,this.serializer=u,this.ts=new ci(Yn),this.ns=new ro(p=>Ha(p),oc),this.rs=new Map,this.ss=e.getRemoteDocumentCache(),this.qr=e.getTargetCache(),this.Kr=e.getBundleCache(),this.os(o)}os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new hy(this.ss,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ss.setIndexManager(this.indexManager),this.es.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.ts))}}function Qg(i,e,n,o){return new Ff(i,e,n,o)}function pd(i,e){return Lf.apply(this,arguments)}function Lf(){return Lf=(0,Re.Z)(function*(i,e){const n=Wt(i);return yield n.persistence.runTransaction("Handle user change","readonly",o=>{let u;return n.mutationQueue.getAllMutationBatches(o).next(p=>(u=p,n.os(e),n.mutationQueue.getAllMutationBatches(o))).next(p=>{const I=[],M=[];let U=fr();for(const W of u){I.push(W.batchId);for(const ee of W.mutations)U=U.add(ee.key)}for(const W of p){M.push(W.batchId);for(const ee of W.mutations)U=U.add(ee.key)}return n.localDocuments.getDocuments(o,U).next(W=>({_s:W,removedBatchIds:I,addedBatchIds:M}))})})}),Lf.apply(this,arguments)}function Iv(i){const e=Wt(i);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.qr.getLastRemoteSnapshotVersion(n))}function Xg(i,e,n){let o=fr(),u=fr();return n.forEach(p=>o=o.add(p)),e.getEntries(i,o).next(p=>{let I=So();return n.forEach((M,U)=>{const W=p.get(M);U.isFoundDocument()!==W.isFoundDocument()&&(u=u.add(M)),U.isNoDocument()&&U.version.isEqual(ln.min())?(e.removeEntry(M,U.readTime),I=I.insert(M,U)):!W.isValidDocument()||U.version.compareTo(W.version)>0||0===U.version.compareTo(W.version)&&W.hasPendingWrites?(e.addEntry(U),I=I.insert(M,U)):Tt("LocalStore","Ignoring outdated watch update for ",M,". Current version:",W.version," Watch version:",U.version)}),{us:I,cs:u}})}function o_(i,e){const n=Wt(i);return n.persistence.runTransaction("Get next mutation batch","readonly",o=>(void 0===e&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(o,e)))}function jp(i,e){const n=Wt(i);return n.persistence.runTransaction("Allocate target","readwrite",o=>{let u;return n.qr.getTargetData(o,e).next(p=>p?(u=p,V.resolve(u)):n.qr.allocateTargetId(o).next(I=>(u=new Ml(e,I,"TargetPurposeListen",o.currentSequenceNumber),n.qr.addTargetData(o,u).next(()=>u))))}).then(o=>{const u=n.ts.get(o.targetId);return(null===u||o.snapshotVersion.compareTo(u.snapshotVersion)>0)&&(n.ts=n.ts.insert(o.targetId,o),n.ns.set(e,o.targetId)),o})}function Vh(i,e,n){return gd.apply(this,arguments)}function gd(){return gd=(0,Re.Z)(function*(i,e,n){const o=Wt(i),u=o.ts.get(e),p=n?"readwrite":"readwrite-primary";try{n||(yield o.persistence.runTransaction("Release target",p,I=>o.persistence.referenceDelegate.removeTarget(I,u)))}catch(I){if(!Gt(I))throw I;Tt("LocalStore",`Failed to update sequence numbers for target ${e}: ${I}`)}o.ts=o.ts.remove(e),o.ns.delete(u.target)}),gd.apply(this,arguments)}function Hp(i,e,n){const o=Wt(i);let u=ln.min(),p=fr();return o.persistence.runTransaction("Execute query","readwrite",I=>function(U,W,ee){const fe=Wt(U),Me=fe.ns.get(ee);return void 0!==Me?V.resolve(fe.ts.get(Me)):fe.qr.getTargetData(W,ee)}(o,I,w(e)).next(M=>{if(M)return u=M.lastLimboFreeSnapshotVersion,o.qr.getMatchingKeysForTargetId(I,M.targetId).next(U=>{p=U})}).next(()=>o.es.getDocumentsMatchingQuery(I,e,n?u:ln.min(),n?p:fr())).next(M=>(Lc(o,Rn(e),M),{documents:M,ls:p})))}function Vf(i,e){const n=Wt(i),o=Wt(n.qr),u=n.ts.get(e);return u?Promise.resolve(u.target):n.persistence.runTransaction("Get target data","readonly",p=>o._t(p,e).next(I=>I?I.target:null))}function Gp(i,e){const n=Wt(i),o=n.rs.get(e)||ln.min();return n.persistence.runTransaction("Get new document changes","readonly",u=>n.ss.getAllFromCollectionGroup(u,e,Wl(o,-1),Number.MAX_SAFE_INTEGER)).then(u=>(Lc(n,e,u),u))}function Lc(i,e,n){let o=i.rs.get(e)||ln.min();n.forEach((u,p)=>{p.readTime.compareTo(o)>0&&(o=p.readTime)}),i.rs.set(e,o)}function md(){return md=(0,Re.Z)(function*(i,e,n,o){const u=Wt(i);let p=fr(),I=So();for(const W of n){const ee=e.hs(W.metadata.name);W.document&&(p=p.add(ee));const fe=e.Ps(W);fe.setReadTime(e.Is(W.metadata.readTime)),I=I.insert(ee,fe)}const M=u.ss.newChangeBuffer({trackRemovals:!0}),U=yield jp(u,(ee=o,w(Pc(or.fromString(`__bundle__/docs/${ee}`)))));var ee;return u.persistence.runTransaction("Apply bundle documents","readwrite",W=>Xg(W,M,I).next(ee=>(M.apply(W),ee)).next(ee=>u.qr.removeMatchingKeysForTargetId(W,U.targetId).next(()=>u.qr.addMatchingKeys(W,p,U.targetId)).next(()=>u.localDocuments.getLocalViewOfDocuments(W,ee.us,ee.cs)).next(()=>ee.us)))}),md.apply(this,arguments)}function _d(i,e){return Qd.apply(this,arguments)}function Qd(){return Qd=(0,Re.Z)(function*(i,e,n=fr()){const o=yield jp(i,w(Af(e.bundledQuery))),u=Wt(i);return u.persistence.runTransaction("Save named query","readwrite",p=>{const I=us(e.readTime);if(o.snapshotVersion.compareTo(I)>=0)return u.Kr.saveNamedQuery(p,e);const M=o.withResumeToken(Bs.EMPTY_BYTE_STRING,I);return u.ts=u.ts.insert(M.targetId,M),u.qr.updateTargetData(p,M).next(()=>u.qr.removeMatchingKeysForTargetId(p,o.targetId)).next(()=>u.qr.addMatchingKeys(p,n,o.targetId)).next(()=>u.Kr.saveNamedQuery(p,e))})}),Qd.apply(this,arguments)}function Vc(i,e){return`firestore_clients_${i}_${e}`}function lu(i,e,n){let o=`firestore_mutations_${i}_${n}`;return e.isAuthenticated()&&(o+=`_${e.uid}`),o}function Jd(i,e){return`firestore_targets_${i}_${e}`}class dc{constructor(e,n,o,u){this.user=e,this.batchId=n,this.state=o,this.error=u}static Ts(e,n,o){const u=JSON.parse(o);let p,I="object"==typeof u&&-1!==["pending","acknowledged","rejected"].indexOf(u.state)&&(void 0===u.error||"object"==typeof u.error);return I&&u.error&&(I="string"==typeof u.error.message&&"string"==typeof u.error.code,I&&(p=new It(u.error.code,u.error.message))),I?new dc(e,n,u.state,p):(Si("SharedClientState",`Failed to parse mutation state for ID '${n}': ${o}`),null)}Es(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class $p{constructor(e,n,o){this.targetId=e,this.state=n,this.error=o}static Ts(e,n){const o=JSON.parse(n);let u,p="object"==typeof o&&-1!==["not-current","current","rejected"].indexOf(o.state)&&(void 0===o.error||"object"==typeof o.error);return p&&o.error&&(p="string"==typeof o.error.message&&"string"==typeof o.error.code,p&&(u=new It(o.error.code,o.error.message))),p?new $p(e,o.state,u):(Si("SharedClientState",`Failed to parse target state for ID '${e}': ${n}`),null)}Es(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class hc{constructor(e,n){this.clientId=e,this.activeTargetIds=n}static Ts(e,n){const o=JSON.parse(n);let u="object"==typeof o&&o.activeTargetIds instanceof Array,p=ff();for(let I=0;u&&I<o.activeTargetIds.length;++I)u=mh(o.activeTargetIds[I]),p=p.add(o.activeTargetIds[I]);return u?new hc(e,p):(Si("SharedClientState",`Failed to parse client data for instance '${e}': ${n}`),null)}}class yd{constructor(e,n){this.clientId=e,this.onlineState=n}static Ts(e){const n=JSON.parse(e);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new yd(n.clientId,n.onlineState):(Si("SharedClientState",`Failed to parse online state: ${e}`),null)}}class em{constructor(){this.activeTargetIds=ff()}ds(e){this.activeTargetIds=this.activeTargetIds.add(e)}As(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Es(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Bf{constructor(e,n,o,u,p){this.window=e,this.si=n,this.persistenceKey=o,this.Rs=u,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Vs=this.fs.bind(this),this.gs=new ci(Yn),this.started=!1,this.ps=[];const I=o.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=p,this.ys=Vc(this.persistenceKey,this.Rs),this.ws=`firestore_sequence_number_${this.persistenceKey}`,this.gs=this.gs.insert(this.Rs,new em),this.Ss=new RegExp(`^firestore_clients_${I}_([^_]*)$`),this.bs=new RegExp(`^firestore_mutations_${I}_(\\d+)(?:_(.*))?$`),this.Ds=new RegExp(`^firestore_targets_${I}_(\\d+)$`),this.Cs=`firestore_online_state_${this.persistenceKey}`,this.vs=function(U){return`firestore_bundle_loaded_v2_${U}`}(this.persistenceKey),this.window.addEventListener("storage",this.Vs)}static D(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,Re.Z)(function*(){const n=yield e.syncEngine.Bi();for(const u of n){if(u===e.Rs)continue;const p=e.getItem(Vc(e.persistenceKey,u));if(p){const I=hc.Ts(u,p);I&&(e.gs=e.gs.insert(I.clientId,I))}}e.Fs();const o=e.storage.getItem(e.Cs);if(o){const u=e.Ms(o);u&&e.xs(u)}for(const u of e.ps)e.fs(u);e.ps=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.ws,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Os(this.gs)}isActiveQueryTarget(e){let n=!1;return this.gs.forEach((o,u)=>{u.activeTargetIds.has(e)&&(n=!0)}),n}addPendingMutation(e){this.Ns(e,"pending")}updateMutationState(e,n,o){this.Ns(e,n,o),this.Bs(e)}addLocalQueryTarget(e){let n="not-current";if(this.isActiveQueryTarget(e)){const o=this.storage.getItem(Jd(this.persistenceKey,e));if(o){const u=$p.Ts(e,o);u&&(n=u.state)}}return this.Ls.ds(e),this.Fs(),n}removeLocalQueryTarget(e){this.Ls.As(e),this.Fs()}isLocalQueryTarget(e){return this.Ls.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Jd(this.persistenceKey,e))}updateQueryState(e,n,o){this.ks(e,n,o)}handleUserChange(e,n,o){n.forEach(u=>{this.Bs(u)}),this.currentUser=e,o.forEach(u=>{this.addPendingMutation(u)})}setOnlineState(e){this.qs(e)}notifyBundleLoaded(e){this.Qs(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.Vs),this.removeItem(this.ys),this.started=!1)}getItem(e){const n=this.storage.getItem(e);return Tt("SharedClientState","READ",e,n),n}setItem(e,n){Tt("SharedClientState","SET",e,n),this.storage.setItem(e,n)}removeItem(e){Tt("SharedClientState","REMOVE",e),this.storage.removeItem(e)}fs(e){var n=this;const o=e;if(o.storageArea===this.storage){if(Tt("SharedClientState","EVENT",o.key,o.newValue),o.key===this.ys)return void Si("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.si.enqueueRetryable((0,Re.Z)(function*(){if(n.started){if(null!==o.key)if(n.Ss.test(o.key)){if(null==o.newValue){const u=n.Ks(o.key);return n.$s(u,null)}{const u=n.Us(o.key,o.newValue);if(u)return n.$s(u.clientId,u)}}else if(n.bs.test(o.key)){if(null!==o.newValue){const u=n.Ws(o.key,o.newValue);if(u)return n.Gs(u)}}else if(n.Ds.test(o.key)){if(null!==o.newValue){const u=n.zs(o.key,o.newValue);if(u)return n.js(u)}}else if(o.key===n.Cs){if(null!==o.newValue){const u=n.Ms(o.newValue);if(u)return n.xs(u)}}else if(o.key===n.ws){const u=function(I){let M=is._e;if(null!=I)try{const U=JSON.parse(I);vn("number"==typeof U),M=U}catch(U){Si("SharedClientState","Failed to read sequence number from WebStorage",U)}return M}(o.newValue);u!==is._e&&n.sequenceNumberHandler(u)}else if(o.key===n.vs){const u=n.Hs(o.newValue);yield Promise.all(u.map(p=>n.syncEngine.Js(p)))}}else n.ps.push(o)}))}}get Ls(){return this.gs.get(this.Rs)}Fs(){this.setItem(this.ys,this.Ls.Es())}Ns(e,n,o){const u=new dc(this.currentUser,e,n,o),p=lu(this.persistenceKey,this.currentUser,e);this.setItem(p,u.Es())}Bs(e){const n=lu(this.persistenceKey,this.currentUser,e);this.removeItem(n)}qs(e){this.storage.setItem(this.Cs,JSON.stringify({clientId:this.Rs,onlineState:e}))}ks(e,n,o){const u=Jd(this.persistenceKey,e),p=new $p(e,n,o);this.setItem(u,p.Es())}Qs(e){const n=JSON.stringify(Array.from(e));this.setItem(this.vs,n)}Ks(e){const n=this.Ss.exec(e);return n?n[1]:null}Us(e,n){const o=this.Ks(e);return hc.Ts(o,n)}Ws(e,n){const o=this.bs.exec(e),u=Number(o[1]);return dc.Ts(new Yr(void 0!==o[2]?o[2]:null),u,n)}zs(e,n){const o=this.Ds.exec(e),u=Number(o[1]);return $p.Ts(u,n)}Ms(e){return yd.Ts(e)}Hs(e){return JSON.parse(e)}Gs(e){var n=this;return(0,Re.Z)(function*(){if(e.user.uid===n.currentUser.uid)return n.syncEngine.Ys(e.batchId,e.state,e.error);Tt("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}js(e){return this.syncEngine.Zs(e.targetId,e.state,e.error)}$s(e,n){const o=n?this.gs.insert(e,n):this.gs.remove(e),u=this.Os(this.gs),p=this.Os(o),I=[],M=[];return p.forEach(U=>{u.has(U)||I.push(U)}),u.forEach(U=>{p.has(U)||M.push(U)}),this.syncEngine.Xs(I,M).then(()=>{this.gs=o})}xs(e){this.gs.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Os(e){let n=ff();return e.forEach((o,u)=>{n=n.unionWith(u.activeTargetIds)}),n}}class Bc{constructor(){this.eo=new em,this.no={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,o){}addLocalQueryTarget(e){return this.eo.ds(e),this.no[e]||"not-current"}updateQueryState(e,n,o){this.no[e]=n}removeLocalQueryTarget(e){this.eo.As(e)}isLocalQueryTarget(e){return this.eo.activeTargetIds.has(e)}clearQueryState(e){delete this.no[e]}getAllActiveQueryTargets(){return this.eo.activeTargetIds}isActiveQueryTarget(e){return this.eo.activeTargetIds.has(e)}start(){return this.eo=new em,Promise.resolve()}handleUserChange(e,n,o){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class fc{ro(e){}shutdown(){}}class pc{constructor(){this.io=()=>this.so(),this.oo=()=>this._o(),this.ao=[],this.uo()}ro(e){this.ao.push(e)}shutdown(){window.removeEventListener("online",this.io),window.removeEventListener("offline",this.oo)}uo(){window.addEventListener("online",this.io),window.addEventListener("offline",this.oo)}so(){Tt("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ao)e(0)}_o(){Tt("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ao)e(1)}static D(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let Uc=null;function tm(){return null===Uc?Uc=268435456+Math.round(2147483648*Math.random()):Uc++,"0x"+Uc.toString(16)}const nm={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class _y{constructor(e){this.co=e.co,this.lo=e.lo}ho(e){this.Po=e}Io(e){this.To=e}onMessage(e){this.Eo=e}close(){this.lo()}send(e){this.co(e)}Ao(){this.Po()}Ro(e){this.To(e)}Vo(e){this.Eo(e)}}const fo="WebChannelConnection";class Xd extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const o=n.ssl?"https":"http",u=encodeURIComponent(this.databaseId.projectId),p=encodeURIComponent(this.databaseId.database);this.mo=o+"://"+n.host,this.fo=`projects/${u}/databases/${p}`,this.po="(default)"===this.databaseId.database?`project_id=${u}`:`project_id=${u}&database_id=${p}`}get yo(){return!1}wo(n,o,u,p,I){const M=tm(),U=this.So(n,o);Tt("RestConnection",`Sending RPC '${n}' ${M}:`,U,u);const W={"google-cloud-resource-prefix":this.fo,"x-goog-request-params":this.po};return this.bo(W,p,I),this.Do(n,U,W,u).then(ee=>(Tt("RestConnection",`Received RPC '${n}' ${M}: `,ee),ee),ee=>{throw Do("RestConnection",`RPC '${n}' ${M} failed with error: `,ee,"url: ",U,"request:",u),ee})}Co(n,o,u,p,I,M){return this.wo(n,o,u,p,I)}bo(n,o,u){n["X-Goog-Api-Client"]="gl-js/ fire/"+wl,n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),o&&o.headers.forEach((p,I)=>n[I]=p),u&&u.headers.forEach((p,I)=>n[I]=p)}So(n,o){return`${this.mo}/v1/${o}:${nm[n]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Do(e,n,o,u){const p=tm();return new Promise((I,M)=>{const U=new Ns;U.setWithCredentials(!0),U.listenOnce(bl.COMPLETE,()=>{try{switch(U.getLastErrorCode()){case Mi.NO_ERROR:const ee=U.getResponseJson();Tt(fo,`XHR for RPC '${e}' ${p} received:`,JSON.stringify(ee)),I(ee);break;case Mi.TIMEOUT:Tt(fo,`RPC '${e}' ${p} timed out`),M(new It(nt.DEADLINE_EXCEEDED,"Request time out"));break;case Mi.HTTP_ERROR:const fe=U.getStatus();if(Tt(fo,`RPC '${e}' ${p} failed with status:`,fe,"response text:",U.getResponseText()),fe>0){let Me=U.getResponseJson();Array.isArray(Me)&&(Me=Me[0]);const tt=Me?.error;if(tt&&tt.status&&tt.message){const Vt=function(Jt){const zn=Jt.toLowerCase().replace(/_/g,"-");return Object.values(nt).indexOf(zn)>=0?zn:nt.UNKNOWN}(tt.status);M(new It(Vt,tt.message))}else M(new It(nt.UNKNOWN,"Server responded with status "+U.getStatus()))}else M(new It(nt.UNAVAILABLE,"Connection failed."));break;default:on()}}finally{Tt(fo,`RPC '${e}' ${p} completed.`)}});const W=JSON.stringify(u);Tt(fo,`RPC '${e}' ${p} sending request:`,u),U.send(n,"POST",W,o,15)})}vo(e,n,o){const u=tm(),p=[this.mo,"/","google.firestore.v1.Firestore","/",e,"/channel"],I=vs(),M=Ia(),U={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},W=this.longPollingOptions.timeoutSeconds;void 0!==W&&(U.longPollingTimeout=Math.round(1e3*W)),this.useFetchStreams&&(U.useFetchStreams=!0),this.bo(U.initMessageHeaders,n,o),U.encodeInitMessageHeaders=!0;const ee=p.join("");Tt(fo,`Creating RPC '${e}' stream ${u}: ${ee}`,U);const fe=I.createWebChannel(ee,U);let Me=!1,tt=!1;const Vt=new _y({co:Jt=>{tt?Tt(fo,`Not sending because RPC '${e}' stream ${u} is closed:`,Jt):(Me||(Tt(fo,`Opening RPC '${e}' stream ${u} transport.`),fe.open(),Me=!0),Tt(fo,`RPC '${e}' stream ${u} sending:`,Jt),fe.send(Jt))},lo:()=>fe.close()}),Kt=(Jt,zn,rr)=>{Jt.listen(zn,Hn=>{try{rr(Hn)}catch(jr){setTimeout(()=>{throw jr},0)}})};return Kt(fe,mu.EventType.OPEN,()=>{tt||Tt(fo,`RPC '${e}' stream ${u} transport opened.`)}),Kt(fe,mu.EventType.CLOSE,()=>{tt||(tt=!0,Tt(fo,`RPC '${e}' stream ${u} transport closed`),Vt.Ro())}),Kt(fe,mu.EventType.ERROR,Jt=>{tt||(tt=!0,Do(fo,`RPC '${e}' stream ${u} transport errored:`,Jt),Vt.Ro(new It(nt.UNAVAILABLE,"The operation could not be completed")))}),Kt(fe,mu.EventType.MESSAGE,Jt=>{var zn;if(!tt){const rr=Jt.data[0];vn(!!rr);const jr=rr.error||(null===(zn=rr[0])||void 0===zn?void 0:zn.error);if(jr){Tt(fo,`RPC '${e}' stream ${u} received error:`,jr);const mi=jr.status;let Ei=function(g0){const iv=as[g0];if(void 0!==iv)return pl(iv)}(mi),Po=jr.message;void 0===Ei&&(Ei=nt.INTERNAL,Po="Unknown error status: "+mi+" with message "+jr.message),tt=!0,Vt.Ro(new It(Ei,Po)),fe.close()}else Tt(fo,`RPC '${e}' stream ${u} received:`,rr),Vt.Vo(rr)}}),Kt(M,fh.STAT_EVENT,Jt=>{Jt.stat===ti.PROXY?Tt(fo,`RPC '${e}' stream ${u} detected buffering proxy`):Jt.stat===ti.NOPROXY&&Tt(fo,`RPC '${e}' stream ${u} detected no buffering proxy`)}),setTimeout(()=>{Vt.Ao()},0),Vt}}function zp(){return typeof window<"u"?window:null}function Uh(){return typeof document<"u"?document:null}function Uf(i){return new su(i,!0)}class jf{constructor(e,n,o=1e3,u=1.5,p=6e4){this.si=e,this.timerId=n,this.Fo=o,this.Mo=u,this.xo=p,this.Oo=0,this.No=null,this.Bo=Date.now(),this.reset()}reset(){this.Oo=0}Lo(){this.Oo=this.xo}ko(e){this.cancel();const n=Math.floor(this.Oo+this.qo()),o=Math.max(0,Date.now()-this.Bo),u=Math.max(0,n-o);u>0&&Tt("ExponentialBackoff",`Backing off for ${u} ms (base delay: ${this.Oo} ms, delay with jitter: ${n} ms, last attempt: ${o} ms ago)`),this.No=this.si.enqueueAfterDelay(this.timerId,u,()=>(this.Bo=Date.now(),e())),this.Oo*=this.Mo,this.Oo<this.Fo&&(this.Oo=this.Fo),this.Oo>this.xo&&(this.Oo=this.xo)}Qo(){null!==this.No&&(this.No.skipDelay(),this.No=null)}cancel(){null!==this.No&&(this.No.cancel(),this.No=null)}qo(){return(Math.random()-.5)*this.Oo}}class Hf{constructor(e,n,o,u,p,I,M,U){this.si=e,this.Ko=o,this.$o=u,this.connection=p,this.authCredentialsProvider=I,this.appCheckCredentialsProvider=M,this.listener=U,this.state=0,this.Uo=0,this.Wo=null,this.Go=null,this.stream=null,this.zo=new jf(e,n)}jo(){return 1===this.state||5===this.state||this.Ho()}Ho(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Jo()}stop(){var e=this;return(0,Re.Z)(function*(){e.jo()&&(yield e.close(0))})()}Yo(){this.state=0,this.zo.reset()}Zo(){this.Ho()&&null===this.Wo&&(this.Wo=this.si.enqueueAfterDelay(this.Ko,6e4,()=>this.Xo()))}e_(e){this.t_(),this.stream.send(e)}Xo(){var e=this;return(0,Re.Z)(function*(){if(e.Ho())return e.close(0)})()}t_(){this.Wo&&(this.Wo.cancel(),this.Wo=null)}n_(){this.Go&&(this.Go.cancel(),this.Go=null)}close(e,n){var o=this;return(0,Re.Z)(function*(){o.t_(),o.n_(),o.zo.cancel(),o.Uo++,4!==e?o.zo.reset():n&&n.code===nt.RESOURCE_EXHAUSTED?(Si(n.toString()),Si("Using maximum backoff delay to prevent overloading the backend."),o.zo.Lo()):n&&n.code===nt.UNAUTHENTICATED&&3!==o.state&&(o.authCredentialsProvider.invalidateToken(),o.appCheckCredentialsProvider.invalidateToken()),null!==o.stream&&(o.r_(),o.stream.close(),o.stream=null),o.state=e,yield o.listener.Io(n)})()}r_(){}auth(){this.state=1;const e=this.i_(this.Uo),n=this.Uo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([o,u])=>{this.Uo===n&&this.s_(o,u)},o=>{e(()=>{const u=new It(nt.UNKNOWN,"Fetching auth token failed: "+o.message);return this.o_(u)})})}s_(e,n){const o=this.i_(this.Uo);this.stream=this.__(e,n),this.stream.ho(()=>{o(()=>(this.state=2,this.Go=this.si.enqueueAfterDelay(this.$o,1e4,()=>(this.Ho()&&(this.state=3),Promise.resolve())),this.listener.ho()))}),this.stream.Io(u=>{o(()=>this.o_(u))}),this.stream.onMessage(u=>{o(()=>this.onMessage(u))})}Jo(){var e=this;this.state=5,this.zo.ko((0,Re.Z)(function*(){e.state=0,e.start()}))}o_(e){return Tt("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}i_(e){return n=>{this.si.enqueueAndForget(()=>this.Uo===e?n():(Tt("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class kl extends Hf{constructor(e,n,o,u,p,I){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,o,u,I),this.serializer=p}__(e,n){return this.connection.vo("Listen",e,n)}onMessage(e){this.zo.reset();const n=function Np(i,e){let n;if("targetChange"in e){const o="NO_CHANGE"===(W=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===W?1:"REMOVE"===W?2:"CURRENT"===W?3:"RESET"===W?4:on(),u=e.targetChange.targetIds||[],p=function(W,ee){return W.useProto3Json?(vn(void 0===ee||"string"==typeof ee),Bs.fromBase64String(ee||"")):(vn(void 0===ee||ee instanceof Uint8Array),Bs.fromUint8Array(ee||new Uint8Array))}(i,e.targetChange.resumeToken),I=e.targetChange.cause,M=I&&function(W){const ee=void 0===W.code?nt.UNKNOWN:pl(W.code);return new It(ee,W.message||"")}(I);n=new We(o,u,p,M||null)}else if("documentChange"in e){const o=e.documentChange,u=gl(i,o.document.name),p=us(o.document.updateTime),I=o.document.createTime?us(o.document.createTime):ln.min(),M=new Es({mapValue:{fields:o.document.fields}}),U=ar.newFoundDocument(u,p,I,M);n=new X(o.targetIds||[],o.removedTargetIds||[],U.key,U)}else if("documentDelete"in e){const o=e.documentDelete,u=gl(i,o.document),p=o.readTime?us(o.readTime):ln.min(),I=ar.newNoDocument(u,p);n=new X([],o.removedTargetIds||[],I.key,I)}else if("documentRemove"in e){const o=e.documentRemove,u=gl(i,o.document);n=new X([],o.removedTargetIds||[],u,null)}else{if(!("filter"in e))return on();{const o=e.filter,{count:u=0,unchangedNames:p}=o,I=new ad(u,p);n=new De(o.targetId,I)}}var W;return n}(this.serializer,e),o=function(p){if(!("targetChange"in p))return ln.min();const I=p.targetChange;return I.targetIds&&I.targetIds.length?ln.min():I.readTime?us(I.readTime):ln.min()}(e);return this.listener.a_(n,o)}u_(e){const n={};n.database=kc(this.serializer),n.addTarget=function(p,I){let M;const U=I.target;if(M=bu(U)?{documents:kg(p,U)}:{query:wf(p,U)},M.targetId=I.targetId,I.resumeToken.approximateByteSize()>0){M.resumeToken=If(p,I.resumeToken);const W=ou(p,I.expectedCount);null!==W&&(M.expectedCount=W)}else if(I.snapshotVersion.compareTo(ln.min())>0){M.readTime=Nu(p,I.snapshotVersion.toTimestamp());const W=ou(p,I.expectedCount);null!==W&&(M.expectedCount=W)}return M}(this.serializer,e);const o=function X_(i,e){const n=function(u){switch(u){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return on()}}(e.purpose);return null==n?null:{"goog-listen-tags":n}}(0,e);o&&(n.labels=o),this.e_(n)}c_(e){const n={};n.database=kc(this.serializer),n.removeTarget=e,this.e_(n)}}class rm extends Hf{constructor(e,n,o,u,p,I){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,o,u,I),this.serializer=p,this.l_=!1}get h_(){return this.l_}start(){this.l_=!1,this.lastStreamToken=void 0,super.start()}r_(){this.l_&&this.P_([])}__(e,n){return this.connection.vo("Write",e,n)}onMessage(e){if(vn(!!e.streamToken),this.lastStreamToken=e.streamToken,this.l_){this.zo.reset();const n=function wh(i,e){return i&&i.length>0?(vn(void 0!==e),i.map(n=>function(u,p){let I=us(u.updateTime?u.updateTime:p);return I.isEqual(ln.min())&&(I=us(p)),new Na(I,u.transformResults||[])}(n,e))):[]}(e.writeResults,e.commitTime),o=us(e.commitTime);return this.listener.I_(o,n)}return vn(!e.writeResults||0===e.writeResults.length),this.l_=!0,this.listener.T_()}E_(){const e={};e.database=kc(this.serializer),this.e_(e)}P_(e){const n={streamToken:this.lastStreamToken,writes:e.map(o=>Tf(this.serializer,o))};this.e_(n)}}class Ev extends class{}{constructor(e,n,o,u){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=o,this.serializer=u,this.d_=!1}A_(){if(this.d_)throw new It(nt.FAILED_PRECONDITION,"The client has already been terminated.")}wo(e,n,o){return this.A_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([u,p])=>this.connection.wo(e,n,o,u,p)).catch(u=>{throw"FirebaseError"===u.name?(u.code===nt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new It(nt.UNKNOWN,u.toString())})}Co(e,n,o,u){return this.A_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([p,I])=>this.connection.Co(e,n,o,p,I,u)).catch(p=>{throw"FirebaseError"===p.name?(p.code===nt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),p):new It(nt.UNKNOWN,p.toString())})}terminate(){this.d_=!0}}class Tv{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.V_=0,this.m_=null,this.f_=!0}g_(){0===this.V_&&(this.p_("Unknown"),this.m_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.m_=null,this.y_("Backend didn't respond within 10 seconds."),this.p_("Offline"),Promise.resolve())))}w_(e){"Online"===this.state?this.p_("Unknown"):(this.V_++,this.V_>=1&&(this.S_(),this.y_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.p_("Offline")))}set(e){this.S_(),this.V_=0,"Online"===e&&(this.f_=!1),this.p_(e)}p_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}y_(e){const n=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.f_?(Si(n),this.f_=!1):Tt("OnlineStateTracker",n)}S_(){null!==this.m_&&(this.m_.cancel(),this.m_=null)}}class im{constructor(e,n,o,u,p){var I=this;this.localStore=e,this.datastore=n,this.asyncQueue=o,this.remoteSyncer={},this.b_=[],this.D_=new Map,this.C_=new Set,this.v_=[],this.F_=p,this.F_.ro(M=>{o.enqueueAndForget((0,Re.Z)(function*(){var U;uu(I)&&(Tt("RemoteStore","Restarting streams for network reachability change."),yield(U=(0,Re.Z)(function*(ee){const fe=Wt(ee);fe.C_.add(4),yield gc(fe),fe.M_.set("Unknown"),fe.C_.delete(4),yield Wp(fe)}),function W(ee){return U.apply(this,arguments)})(I))}))}),this.M_=new Tv(o,u)}}function Wp(i){return Ou.apply(this,arguments)}function Ou(){return Ou=(0,Re.Z)(function*(i){if(uu(i))for(const e of i.v_)yield e(!0)}),Ou.apply(this,arguments)}function gc(i){return sm.apply(this,arguments)}function sm(){return sm=(0,Re.Z)(function*(i){for(const e of i.v_)yield e(!1)}),sm.apply(this,arguments)}function Gf(i,e){const n=Wt(i);n.D_.has(e.targetId)||(n.D_.set(e.targetId,e),qp(n)?$f(n):Hh(n).Ho()&&jh(n,e))}function vd(i,e){const n=Wt(i),o=Hh(n);n.D_.delete(e),o.Ho()&&om(n,e),0===n.D_.size&&(o.Ho()?o.Zo():uu(n)&&n.M_.set("Unknown"))}function jh(i,e){if(i.x_.Oe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ln.min())>0){const n=i.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Hh(i).u_(e)}function om(i,e){i.x_.Oe(e),Hh(i).c_(e)}function $f(i){i.x_=new rn({getRemoteKeysForTarget:e=>i.remoteSyncer.getRemoteKeysForTarget(e),_t:e=>i.D_.get(e)||null,nt:()=>i.datastore.serializer.databaseId}),Hh(i).start(),i.M_.g_()}function qp(i){return uu(i)&&!Hh(i).jo()&&i.D_.size>0}function uu(i){return 0===Wt(i).C_.size}function a_(i){i.x_=void 0}function Kp(i){return Yp.apply(this,arguments)}function Yp(){return Yp=(0,Re.Z)(function*(i){i.D_.forEach((e,n)=>{jh(i,e)})}),Yp.apply(this,arguments)}function Iy(i,e){return am.apply(this,arguments)}function am(){return am=(0,Re.Z)(function*(i,e){a_(i),qp(i)?(i.M_.w_(e),$f(i)):i.M_.set("Unknown")}),am.apply(this,arguments)}function l_(i,e,n){return lm.apply(this,arguments)}function lm(){return lm=(0,Re.Z)(function*(i,e,n){if(i.M_.set("Online"),e instanceof We&&2===e.state&&e.cause)try{yield(o=(0,Re.Z)(function*(p,I){const M=I.cause;for(const U of I.targetIds)p.D_.has(U)&&(yield p.remoteSyncer.rejectListen(U,M),p.D_.delete(U),p.x_.removeTarget(U))}),function u(p,I){return o.apply(this,arguments)})(i,e)}catch(o){Tt("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),o),yield Mu(i,o)}else if(e instanceof X?i.x_.$e(e):e instanceof De?i.x_.Je(e):i.x_.Ge(e),!n.isEqual(ln.min()))try{const o=yield Iv(i.localStore);n.compareTo(o)>=0&&(yield function(p,I){const M=p.x_.it(I);return M.targetChanges.forEach((U,W)=>{if(U.resumeToken.approximateByteSize()>0){const ee=p.D_.get(W);ee&&p.D_.set(W,ee.withResumeToken(U.resumeToken,I))}}),M.targetMismatches.forEach((U,W)=>{const ee=p.D_.get(U);if(!ee)return;p.D_.set(U,ee.withResumeToken(Bs.EMPTY_BYTE_STRING,ee.snapshotVersion)),om(p,U);const fe=new Ml(ee.target,U,W,ee.sequenceNumber);jh(p,fe)}),p.remoteSyncer.applyRemoteEvent(M)}(i,n))}catch(o){Tt("RemoteStore","Failed to raise snapshot:",o),yield Mu(i,o)}var o}),lm.apply(this,arguments)}function Mu(i,e,n){return zf.apply(this,arguments)}function zf(){return zf=(0,Re.Z)(function*(i,e,n){if(!Gt(e))throw e;i.C_.add(1),yield gc(i),i.M_.set("Offline"),n||(n=()=>Iv(i.localStore)),i.asyncQueue.enqueueRetryable((0,Re.Z)(function*(){Tt("RemoteStore","Retrying IndexedDB access"),yield n(),i.C_.delete(1),yield Wp(i)}))}),zf.apply(this,arguments)}function Zp(i,e){return e().catch(n=>Mu(i,n,e))}function Id(i){return Qp.apply(this,arguments)}function Qp(){return Qp=(0,Re.Z)(function*(i){const e=Wt(i),n=ku(e);let o=e.b_.length>0?e.b_[e.b_.length-1].batchId:-1;for(;u_(e);)try{const u=yield o_(e.localStore,o);if(null===u){0===e.b_.length&&n.Zo();break}o=u.batchId,xu(e,u)}catch(u){yield Mu(e,u)}um(e)&&Ey(e)}),Qp.apply(this,arguments)}function u_(i){return uu(i)&&i.b_.length<10}function xu(i,e){i.b_.push(e);const n=ku(i);n.Ho()&&n.h_&&n.P_(e.mutations)}function um(i){return uu(i)&&!ku(i).jo()&&i.b_.length>0}function Ey(i){ku(i).start()}function Wf(i){return mc.apply(this,arguments)}function mc(){return mc=(0,Re.Z)(function*(i){ku(i).E_()}),mc.apply(this,arguments)}function Ed(i){return qf.apply(this,arguments)}function qf(){return qf=(0,Re.Z)(function*(i){const e=ku(i);for(const n of i.b_)e.P_(n.mutations)}),qf.apply(this,arguments)}function Jp(i,e,n){return cm.apply(this,arguments)}function cm(){return cm=(0,Re.Z)(function*(i,e,n){const o=i.b_.shift(),u=od.from(o,e,n);yield Zp(i,()=>i.remoteSyncer.applySuccessfulWrite(u)),yield Id(i)}),cm.apply(this,arguments)}function Xp(i,e){return cu.apply(this,arguments)}function cu(){return cu=(0,Re.Z)(function*(i,e){var n;e&&ku(i).h_&&(yield(n=(0,Re.Z)(function*(u,p){if(Hd(M=p.code)&&M!==nt.ABORTED){const I=u.b_.shift();ku(u).Yo(),yield Zp(u,()=>u.remoteSyncer.rejectFailedWrite(I.batchId,p)),yield Id(u)}var M}),function o(u,p){return n.apply(this,arguments)})(i,e)),um(i)&&Ey(i)}),cu.apply(this,arguments)}function c_(i,e){return Kf.apply(this,arguments)}function Kf(){return Kf=(0,Re.Z)(function*(i,e){const n=Wt(i);n.asyncQueue.verifyOperationInProgress(),Tt("RemoteStore","RemoteStore received new credentials");const o=uu(n);n.C_.add(3),yield gc(n),o&&n.M_.set("Unknown"),yield n.remoteSyncer.handleCredentialChange(e),n.C_.delete(3),yield Wp(n)}),Kf.apply(this,arguments)}function Ty(i,e){return po.apply(this,arguments)}function po(){return po=(0,Re.Z)(function*(i,e){const n=Wt(i);e?(n.C_.delete(2),yield Wp(n)):e||(n.C_.add(2),yield gc(n),n.M_.set("Unknown"))}),po.apply(this,arguments)}function Hh(i){return i.O_||(i.O_=function(n,o,u){const p=Wt(n);return p.A_(),new kl(o,p.connection,p.authCredentials,p.appCheckCredentials,p.serializer,u)}(i.datastore,i.asyncQueue,{ho:Kp.bind(null,i),Io:Iy.bind(null,i),a_:l_.bind(null,i)}),i.v_.push(function(){var e=(0,Re.Z)(function*(n){n?(i.O_.Yo(),qp(i)?$f(i):i.M_.set("Unknown")):(yield i.O_.stop(),a_(i))});return function(n){return e.apply(this,arguments)}}())),i.O_}function ku(i){return i.N_||(i.N_=function(n,o,u){const p=Wt(n);return p.A_(),new rm(o,p.connection,p.authCredentials,p.appCheckCredentials,p.serializer,u)}(i.datastore,i.asyncQueue,{ho:Wf.bind(null,i),Io:Xp.bind(null,i),T_:Ed.bind(null,i),I_:Jp.bind(null,i)}),i.v_.push(function(){var e=(0,Re.Z)(function*(n){n?(i.N_.Yo(),yield Id(i)):(yield i.N_.stop(),i.b_.length>0&&(Tt("RemoteStore",`Stopping write stream with ${i.b_.length} pending writes`),i.b_=[]))});return function(n){return e.apply(this,arguments)}}())),i.N_}class Yf{constructor(e,n,o,u,p){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=o,this.op=u,this.removalCallback=p,this.deferred=new Ks,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(I=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,o,u,p){const I=Date.now()+o,M=new Yf(e,n,I,u,p);return M.start(o),M}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new It(nt.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function eh(i,e){if(Si("AsyncQueue",`${e}: ${i}`),Gt(i))return new It(nt.UNAVAILABLE,`${e}: ${i}`);throw i}class th{constructor(e){this.comparator=e?(n,o)=>e(n,o)||Qt.comparator(n.key,o.key):(n,o)=>Qt.comparator(n.key,o.key),this.keyedMap=Du(),this.sortedSet=new ci(this.comparator)}static emptySet(e){return new th(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,o)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof th)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),o=e.sortedSet.getIterator();for(;n.hasNext();){const u=n.getNext().key,p=o.getNext().key;if(!u.isEqual(p))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,n){const o=new th;return o.comparator=this.comparator,o.keyedMap=e,o.sortedSet=n,o}}class dm{constructor(){this.B_=new ci(Qt.comparator)}track(e){const n=e.doc.key,o=this.B_.get(n);o?0!==e.type&&3===o.type?this.B_=this.B_.insert(n,e):3===e.type&&1!==o.type?this.B_=this.B_.insert(n,{type:o.type,doc:e.doc}):2===e.type&&2===o.type?this.B_=this.B_.insert(n,{type:2,doc:e.doc}):2===e.type&&0===o.type?this.B_=this.B_.insert(n,{type:0,doc:e.doc}):1===e.type&&0===o.type?this.B_=this.B_.remove(n):1===e.type&&2===o.type?this.B_=this.B_.insert(n,{type:1,doc:o.doc}):0===e.type&&1===o.type?this.B_=this.B_.insert(n,{type:2,doc:e.doc}):on():this.B_=this.B_.insert(n,e)}L_(){const e=[];return this.B_.inorderTraversal((n,o)=>{e.push(o)}),e}}class nh{constructor(e,n,o,u,p,I,M,U,W){this.query=e,this.docs=n,this.oldDocs=o,this.docChanges=u,this.mutatedKeys=p,this.fromCache=I,this.syncStateChanged=M,this.excludesMetadataChanges=U,this.hasCachedResults=W}static fromInitialDocuments(e,n,o,u,p){const I=[];return n.forEach(M=>{I.push({type:0,doc:M})}),new nh(e,n,th.emptySet(n),I,o,u,!0,!1,p)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&je(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,o=e.docChanges;if(n.length!==o.length)return!1;for(let u=0;u<n.length;u++)if(n[u].type!==o[u].type||!n[u].doc.isEqual(o[u].doc))return!1;return!0}}class by{constructor(){this.k_=void 0,this.listeners=[]}}class d_{constructor(){this.queries=new ro(e=>at(e),je),this.onlineState="Unknown",this.q_=new Set}}function eg(i,e){return hm.apply(this,arguments)}function hm(){return hm=(0,Re.Z)(function*(i,e){const n=Wt(i),o=e.query;let u=!1,p=n.queries.get(o);if(p||(u=!0,p=new by),u)try{p.k_=yield n.onListen(o)}catch(I){const M=eh(I,`Initialization of query '${At(e.query)}' failed`);return void e.onError(M)}n.queries.set(o,p),p.listeners.push(e),e.Q_(n.onlineState),p.k_&&e.K_(p.k_)&&Fu(n)}),hm.apply(this,arguments)}function tg(i,e){return ng.apply(this,arguments)}function ng(){return ng=(0,Re.Z)(function*(i,e){const n=Wt(i),o=e.query;let u=!1;const p=n.queries.get(o);if(p){const I=p.listeners.indexOf(e);I>=0&&(p.listeners.splice(I,1),u=0===p.listeners.length)}if(u)return n.queries.delete(o),n.onUnlisten(o)}),ng.apply(this,arguments)}function h_(i,e){const n=Wt(i);let o=!1;for(const u of e){const I=n.queries.get(u.query);if(I){for(const M of I.listeners)M.K_(u)&&(o=!0);I.k_=u}}o&&Fu(n)}function rh(i,e,n){const o=Wt(i),u=o.queries.get(e);if(u)for(const p of u.listeners)p.onError(n);o.queries.delete(e)}function Fu(i){i.q_.forEach(e=>{e.next()})}class _c{constructor(e,n,o){this.query=e,this.U_=n,this.W_=!1,this.G_=null,this.onlineState="Unknown",this.options=o||{}}K_(e){if(!this.options.includeMetadataChanges){const o=[];for(const u of e.docChanges)3!==u.type&&o.push(u);e=new nh(e.query,e.docs,e.oldDocs,o,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.W_?this.z_(e)&&(this.U_.next(e),n=!0):this.j_(e,this.onlineState)&&(this.H_(e),n=!0),this.G_=e,n}onError(e){this.U_.error(e)}Q_(e){this.onlineState=e;let n=!1;return this.G_&&!this.W_&&this.j_(this.G_,e)&&(this.H_(this.G_),n=!0),n}j_(e,n){return!e.fromCache||(!this.options.J_||!("Offline"!==n))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===n)}z_(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.G_&&this.G_.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}H_(e){e=nh.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.W_=!0,this.U_.next(e)}}class wy{constructor(e,n){this.Y_=e,this.byteLength=n}Z_(){return"metadata"in this.Y_}}class f_{constructor(e){this.serializer=e}hs(e){return gl(this.serializer,e)}Ps(e){return e.metadata.exists?Rp(this.serializer,e.document,!1):ar.newNoDocument(this.hs(e.metadata.name),this.Is(e.metadata.readTime))}Is(e){return us(e)}}class p_{constructor(e,n,o){this.X_=e,this.localStore=n,this.serializer=o,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=fm(e)}ea(e){this.progress.bytesLoaded+=e.byteLength;let n=this.progress.documentsLoaded;if(e.Y_.namedQuery)this.queries.push(e.Y_.namedQuery);else if(e.Y_.documentMetadata){this.documents.push({metadata:e.Y_.documentMetadata}),e.Y_.documentMetadata.exists||++n;const o=or.fromString(e.Y_.documentMetadata.name);this.collectionGroups.add(o.get(o.length-2))}else e.Y_.document&&(this.documents[this.documents.length-1].document=e.Y_.document,++n);return n!==this.progress.documentsLoaded?(this.progress.documentsLoaded=n,Object.assign({},this.progress)):null}ta(e){const n=new Map,o=new f_(this.serializer);for(const u of e)if(u.metadata.queries){const p=o.hs(u.metadata.name);for(const I of u.metadata.queries){const M=(n.get(I)||fr()).add(p);n.set(I,M)}}return n}complete(){var e=this;return(0,Re.Z)(function*(){const n=yield function Bh(i,e,n,o){return md.apply(this,arguments)}(e.localStore,new f_(e.serializer),e.documents,e.X_.id),o=e.ta(e.documents);for(const u of e.queries)yield _d(e.localStore,u,o.get(u.name));return e.progress.taskState="Success",{progress:e.progress,na:e.collectionGroups,ra:n}})()}}function fm(i){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:i.totalDocuments,totalBytes:i.totalBytes}}class Zf{constructor(e){this.key=e}}class Gh{constructor(e){this.key=e}}class Wa{constructor(e,n){this.query=e,this.ia=n,this.sa=null,this.hasCachedResults=!1,this.current=!1,this.oa=fr(),this.mutatedKeys=fr(),this._a=Fr(e),this.aa=new th(this._a)}get ua(){return this.ia}ca(e,n){const o=n?n.la:new dm,u=n?n.aa:this.aa;let p=n?n.mutatedKeys:this.mutatedKeys,I=u,M=!1;const U="F"===this.query.limitType&&u.size===this.query.limit?u.last():null,W="L"===this.query.limitType&&u.size===this.query.limit?u.first():null;if(e.inorderTraversal((ee,fe)=>{const Me=u.get(ee),tt=pn(this.query,fe)?fe:null,Vt=!!Me&&this.mutatedKeys.has(Me.key),Kt=!!tt&&(tt.hasLocalMutations||this.mutatedKeys.has(tt.key)&&tt.hasCommittedMutations);let Jt=!1;Me&&tt?Me.data.isEqual(tt.data)?Vt!==Kt&&(o.track({type:3,doc:tt}),Jt=!0):this.ha(Me,tt)||(o.track({type:2,doc:tt}),Jt=!0,(U&&this._a(tt,U)>0||W&&this._a(tt,W)<0)&&(M=!0)):!Me&&tt?(o.track({type:0,doc:tt}),Jt=!0):Me&&!tt&&(o.track({type:1,doc:Me}),Jt=!0,(U||W)&&(M=!0)),Jt&&(tt?(I=I.add(tt),p=Kt?p.add(ee):p.delete(ee)):(I=I.delete(ee),p=p.delete(ee)))}),null!==this.query.limit)for(;I.size>this.query.limit;){const ee="F"===this.query.limitType?I.last():I.first();I=I.delete(ee.key),p=p.delete(ee.key),o.track({type:1,doc:ee})}return{aa:I,la:o,Zi:M,mutatedKeys:p}}ha(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,o){const u=this.aa;this.aa=e.aa,this.mutatedKeys=e.mutatedKeys;const p=e.la.L_();p.sort((W,ee)=>function(Me,tt){const Vt=Kt=>{switch(Kt){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return on()}};return Vt(Me)-Vt(tt)}(W.type,ee.type)||this._a(W.doc,ee.doc)),this.Pa(o);const I=n?this.Ia():[],M=0===this.oa.size&&this.current?1:0,U=M!==this.sa;return this.sa=M,0!==p.length||U?{snapshot:new nh(this.query,e.aa,u,p,e.mutatedKeys,0===M,U,!1,!!o&&o.resumeToken.approximateByteSize()>0),Ta:I}:{Ta:I}}Q_(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({aa:this.aa,la:new dm,mutatedKeys:this.mutatedKeys,Zi:!1},!1)):{Ta:[]}}Ea(e){return!this.ia.has(e)&&!!this.aa.has(e)&&!this.aa.get(e).hasLocalMutations}Pa(e){e&&(e.addedDocuments.forEach(n=>this.ia=this.ia.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.ia=this.ia.delete(n)),this.current=e.current)}Ia(){if(!this.current)return[];const e=this.oa;this.oa=fr(),this.aa.forEach(o=>{this.Ea(o.key)&&(this.oa=this.oa.add(o.key))});const n=[];return e.forEach(o=>{this.oa.has(o)||n.push(new Gh(o))}),this.oa.forEach(o=>{e.has(o)||n.push(new Zf(o))}),n}da(e){this.ia=e.ls,this.oa=fr();const n=this.ca(e.documents);return this.applyChanges(n,!0)}Aa(){return nh.fromInitialDocuments(this.query,this.aa,this.mutatedKeys,0===this.sa,this.hasCachedResults)}}class rg{constructor(e,n,o){this.query=e,this.targetId=n,this.view=o}}class $h{constructor(e){this.key=e,this.Ra=!1}}class pm{constructor(e,n,o,u,p,I){this.localStore=e,this.remoteStore=n,this.eventManager=o,this.sharedClientState=u,this.currentUser=p,this.maxConcurrentLimboResolutions=I,this.Va={},this.ma=new ro(M=>at(M),je),this.fa=new Map,this.ga=new Set,this.pa=new ci(Qt.comparator),this.ya=new Map,this.wa=new kf,this.Sa={},this.ba=new Map,this.Da=xl.Nn(),this.onlineState="Unknown",this.Ca=void 0}get isPrimaryClient(){return!0===this.Ca}}function Dy(i,e){return gm.apply(this,arguments)}function gm(){return gm=(0,Re.Z)(function*(i,e){const n=c(i);let o,u;const p=n.ma.get(e);if(p)o=p.targetId,n.sharedClientState.addLocalQueryTarget(o),u=p.view.Aa();else{const I=yield jp(n.localStore,w(e)),M=n.sharedClientState.addLocalQueryTarget(I.targetId);o=I.targetId,u=yield Qf(n,e,o,"current"===M,I.resumeToken),n.isPrimaryClient&&Gf(n.remoteStore,I)}return u}),gm.apply(this,arguments)}function Qf(i,e,n,o,u){return ig.apply(this,arguments)}function ig(){return ig=(0,Re.Z)(function*(i,e,n,o,u){i.va=(fe,Me,tt)=>{return(Vt=(0,Re.Z)(function*(Jt,zn,rr,Hn){let jr=zn.view.ca(rr);jr.Zi&&(jr=yield Hp(Jt.localStore,zn.query,!1).then(({documents:Po})=>zn.view.ca(Po,jr)));const mi=Hn&&Hn.targetChanges.get(zn.targetId),Ei=zn.view.applyChanges(jr,Jt.isPrimaryClient,mi);return Wh(Jt,zn.targetId,Ei.Ta),Ei.snapshot}),function Kt(Jt,zn,rr,Hn){return Vt.apply(this,arguments)})(i,fe,Me,tt);var Vt};const p=yield Hp(i.localStore,e,!0),I=new Wa(e,p.ls),M=I.ca(p.documents),U=G.createSynthesizedTargetChangeForCurrentChange(n,o&&"Offline"!==i.onlineState,u),W=I.applyChanges(M,i.isPrimaryClient,U);Wh(i,n,W.Ta);const ee=new rg(e,n,I);return i.ma.set(e,ee),i.fa.has(n)?i.fa.get(n).push(e):i.fa.set(n,[e]),W.snapshot}),ig.apply(this,arguments)}function bv(i,e){return zh.apply(this,arguments)}function zh(){return zh=(0,Re.Z)(function*(i,e){const n=Wt(i),o=n.ma.get(e),u=n.fa.get(o.targetId);if(u.length>1)return n.fa.set(o.targetId,u.filter(p=>!je(p,e))),void n.ma.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(o.targetId),n.sharedClientState.isActiveQueryTarget(o.targetId)||(yield Vh(n.localStore,o.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(o.targetId),vd(n.remoteStore,o.targetId),ih(n,o.targetId)}).catch(A))):(ih(n,o.targetId),yield Vh(n.localStore,o.targetId,!0))}),zh.apply(this,arguments)}function mm(){return mm=(0,Re.Z)(function*(i,e,n){const o=h(i);try{const u=yield function(I,M){const U=Wt(I),W=Ur.now(),ee=M.reduce((tt,Vt)=>tt.add(Vt.key),fr());let fe,Me;return U.persistence.runTransaction("Locally write mutations","readwrite",tt=>{let Vt=So(),Kt=fr();return U.ss.getEntries(tt,ee).next(Jt=>{Vt=Jt,Vt.forEach((zn,rr)=>{rr.isValidDocument()||(Kt=Kt.add(zn))})}).next(()=>U.localDocuments.getOverlayedDocuments(tt,Vt)).next(Jt=>{fe=Jt;const zn=[];for(const rr of M){const Hn=Pa(rr,fe.get(rr.key).overlayedDocument);null!=Hn&&zn.push(new Pl(rr.key,Hn,Xc(Hn.value.mapValue),xi.exists(!0)))}return U.mutationQueue.addMutationBatch(tt,W,zn,M)}).next(Jt=>{Me=Jt;const zn=Jt.applyToLocalDocumentSet(fe,Kt);return U.documentOverlayCache.saveOverlays(tt,Jt.batchId,zn)})}).then(()=>({batchId:Me.batchId,changes:Ro(fe)}))}(o.localStore,e);o.sharedClientState.addPendingMutation(u.batchId),function(I,M,U){let W=I.Sa[I.currentUser.toKey()];W||(W=new ci(Yn)),W=W.insert(M,U),I.Sa[I.currentUser.toKey()]=W}(o,u.batchId,n),yield Fl(o,u.changes),yield Id(o.remoteStore)}catch(u){const p=eh(u,"Failed to persist write");n.reject(p)}}),mm.apply(this,arguments)}function sg(i,e){return Jf.apply(this,arguments)}function Jf(){return Jf=(0,Re.Z)(function*(i,e){const n=Wt(i);try{const o=yield function my(i,e){const n=Wt(i),o=e.snapshotVersion;let u=n.ts;return n.persistence.runTransaction("Apply remote event","readwrite-primary",p=>{const I=n.ss.newChangeBuffer({trackRemovals:!0});u=n.ts;const M=[];e.targetChanges.forEach((ee,fe)=>{const Me=u.get(fe);if(!Me)return;M.push(n.qr.removeMatchingKeys(p,ee.removedDocuments,fe).next(()=>n.qr.addMatchingKeys(p,ee.addedDocuments,fe)));let tt=Me.withSequenceNumber(p.currentSequenceNumber);var Kt,Jt,zn;null!==e.targetMismatches.get(fe)?tt=tt.withResumeToken(Bs.EMPTY_BYTE_STRING,ln.min()).withLastLimboFreeSnapshotVersion(ln.min()):ee.resumeToken.approximateByteSize()>0&&(tt=tt.withResumeToken(ee.resumeToken,o)),u=u.insert(fe,tt),Jt=tt,zn=ee,(0===(Kt=Me).resumeToken.approximateByteSize()||Jt.snapshotVersion.toMicroseconds()-Kt.snapshotVersion.toMicroseconds()>=3e8||zn.addedDocuments.size+zn.modifiedDocuments.size+zn.removedDocuments.size>0)&&M.push(n.qr.updateTargetData(p,tt))});let U=So(),W=fr();if(e.documentUpdates.forEach(ee=>{e.resolvedLimboDocuments.has(ee)&&M.push(n.persistence.referenceDelegate.updateLimboDocument(p,ee))}),M.push(Xg(p,I,e.documentUpdates).next(ee=>{U=ee.us,W=ee.cs})),!o.isEqual(ln.min())){const ee=n.qr.getLastRemoteSnapshotVersion(p).next(fe=>n.qr.setTargetsMetadata(p,p.currentSequenceNumber,o));M.push(ee)}return V.waitFor(M).next(()=>I.apply(p)).next(()=>n.localDocuments.getLocalViewOfDocuments(p,U,W)).next(()=>U)}).then(p=>(n.ts=u,p))}(n.localStore,e);e.targetChanges.forEach((u,p)=>{const I=n.ya.get(p);I&&(vn(u.addedDocuments.size+u.modifiedDocuments.size+u.removedDocuments.size<=1),u.addedDocuments.size>0?I.Ra=!0:u.modifiedDocuments.size>0?vn(I.Ra):u.removedDocuments.size>0&&(vn(I.Ra),I.Ra=!1))}),yield Fl(n,o,e)}catch(o){yield A(o)}}),Jf.apply(this,arguments)}function du(i,e,n){const o=Wt(i);if(o.isPrimaryClient&&0===n||!o.isPrimaryClient&&1===n){const u=[];o.ma.forEach((p,I)=>{const M=I.view.Q_(e);M.snapshot&&u.push(M.snapshot)}),function(I,M){const U=Wt(I);U.onlineState=M;let W=!1;U.queries.forEach((ee,fe)=>{for(const Me of fe.listeners)Me.Q_(M)&&(W=!0)}),W&&Fu(U)}(o.eventManager,e),u.length&&o.Va.a_(u),o.onlineState=e,o.isPrimaryClient&&o.sharedClientState.setOnlineState(e)}}function jc(i,e,n){return og.apply(this,arguments)}function og(){return og=(0,Re.Z)(function*(i,e,n){const o=Wt(i);o.sharedClientState.updateQueryState(e,"rejected",n);const u=o.ya.get(e),p=u&&u.key;if(p){let I=new ci(Qt.comparator);I=I.insert(p,ar.newNoDocument(p,ln.min()));const M=fr().add(p),U=new C(ln.min(),new Map,new ci(Yn),I,M);yield sg(o,U),o.pa=o.pa.remove(p),o.ya.delete(e),ep(o)}else yield Vh(o.localStore,e,!1).then(()=>ih(o,e,n)).catch(A)}),og.apply(this,arguments)}function g_(i,e){return ag.apply(this,arguments)}function ag(){return ag=(0,Re.Z)(function*(i,e){const n=Wt(i),o=e.batch.batchId;try{const u=yield function Jg(i,e){const n=Wt(i);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",o=>{const u=e.batch.keys(),p=n.ss.newChangeBuffer({trackRemovals:!0});return function(M,U,W,ee){const fe=W.batch,Me=fe.keys();let tt=V.resolve();return Me.forEach(Vt=>{tt=tt.next(()=>ee.getEntry(U,Vt)).next(Kt=>{const Jt=W.docVersions.get(Vt);vn(null!==Jt),Kt.version.compareTo(Jt)<0&&(fe.applyToRemoteDocument(Kt,W),Kt.isValidDocument()&&(Kt.setReadTime(W.commitVersion),ee.addEntry(Kt)))})}),tt.next(()=>M.mutationQueue.removeMutationBatch(U,fe))}(n,o,e,p).next(()=>p.apply(o)).next(()=>n.mutationQueue.performConsistencyCheck(o)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(o,u,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(o,function(M){let U=fr();for(let W=0;W<M.mutationResults.length;++W)M.mutationResults[W].transformResults.length>0&&(U=U.add(M.batch.mutations[W].key));return U}(e))).next(()=>n.localDocuments.getDocuments(o,u))})}(n.localStore,e);yc(n,o,null),ug(n,o),n.sharedClientState.updateMutationState(o,"acknowledged"),yield Fl(n,u)}catch(u){yield A(u)}}),ag.apply(this,arguments)}function m_(i,e,n){return Xf.apply(this,arguments)}function Xf(){return Xf=(0,Re.Z)(function*(i,e,n){const o=Wt(i);try{const u=yield function(I,M){const U=Wt(I);return U.persistence.runTransaction("Reject batch","readwrite-primary",W=>{let ee;return U.mutationQueue.lookupMutationBatch(W,M).next(fe=>(vn(null!==fe),ee=fe.keys(),U.mutationQueue.removeMutationBatch(W,fe))).next(()=>U.mutationQueue.performConsistencyCheck(W)).next(()=>U.documentOverlayCache.removeOverlaysForBatchId(W,ee,M)).next(()=>U.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(W,ee)).next(()=>U.localDocuments.getDocuments(W,ee))})}(o.localStore,e);yc(o,e,n),ug(o,e),o.sharedClientState.updateMutationState(e,"rejected",n),yield Fl(o,u)}catch(u){yield A(u)}}),Xf.apply(this,arguments)}function lg(){return lg=(0,Re.Z)(function*(i,e){const n=Wt(i);uu(n.remoteStore)||Tt("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const o=yield function(I){const M=Wt(I);return M.persistence.runTransaction("Get highest unacknowledged batch id","readonly",U=>M.mutationQueue.getHighestUnacknowledgedBatchId(U))}(n.localStore);if(-1===o)return void e.resolve();const u=n.ba.get(o)||[];u.push(e),n.ba.set(o,u)}catch(o){const u=eh(o,"Initialization of waitForPendingWrites() operation failed");e.reject(u)}}),lg.apply(this,arguments)}function ug(i,e){(i.ba.get(e)||[]).forEach(n=>{n.resolve()}),i.ba.delete(e)}function yc(i,e,n){const o=Wt(i);let u=o.Sa[o.currentUser.toKey()];if(u){const p=u.get(e);p&&(n?p.reject(n):p.resolve(),u=u.remove(e)),o.Sa[o.currentUser.toKey()]=u}}function ih(i,e,n=null){i.sharedClientState.removeLocalQueryTarget(e);for(const o of i.fa.get(e))i.ma.delete(o),n&&i.Va.Fa(o,n);i.fa.delete(e),i.isPrimaryClient&&i.wa.Rr(e).forEach(o=>{i.wa.containsKey(o)||_m(i,o)})}function _m(i,e){i.ga.delete(e.path.canonicalString());const n=i.pa.get(e);null!==n&&(vd(i.remoteStore,n),i.pa=i.pa.remove(e),i.ya.delete(n),ep(i))}function Wh(i,e,n){for(const o of n)o instanceof Zf?(i.wa.addReference(o.key,e),qh(i,o)):o instanceof Gh?(Tt("SyncEngine","Document no longer in limbo: "+o.key),i.wa.removeReference(o.key,e),i.wa.containsKey(o.key)||_m(i,o.key)):on()}function qh(i,e){const n=e.key,o=n.path.canonicalString();i.pa.get(n)||i.ga.has(o)||(Tt("SyncEngine","New document in limbo: "+n),i.ga.add(o),ep(i))}function ep(i){for(;i.ga.size>0&&i.pa.size<i.maxConcurrentLimboResolutions;){const e=i.ga.values().next().value;i.ga.delete(e);const n=new Qt(or.fromString(e)),o=i.Da.next();i.ya.set(o,new $h(n)),i.pa=i.pa.insert(n,o),Gf(i.remoteStore,new Ml(w(Pc(n.path)),o,"TargetPurposeLimboResolution",is._e))}}function Fl(i,e,n){return tp.apply(this,arguments)}function tp(){return tp=(0,Re.Z)(function*(i,e,n){const o=Wt(i),u=[],p=[],I=[];var M;o.ma.isEmpty()||(o.ma.forEach((M,U)=>{I.push(o.va(U,e,n).then(W=>{if((W||n)&&o.isPrimaryClient&&o.sharedClientState.updateQueryState(U.targetId,W?.fromCache?"not-current":"current"),W){u.push(W);const ee=za.Qi(U.targetId,W);p.push(ee)}}))}),yield Promise.all(I),o.Va.a_(u),yield(M=(0,Re.Z)(function*(W,ee){const fe=Wt(W);try{yield fe.persistence.runTransaction("notifyLocalViewChanges","readwrite",Me=>V.forEach(ee,tt=>V.forEach(tt.ki,Vt=>fe.persistence.referenceDelegate.addReference(Me,tt.targetId,Vt)).next(()=>V.forEach(tt.qi,Vt=>fe.persistence.referenceDelegate.removeReference(Me,tt.targetId,Vt)))))}catch(Me){if(!Gt(Me))throw Me;Tt("LocalStore","Failed to update sequence numbers: "+Me)}for(const Me of ee){const tt=Me.targetId;if(!Me.fromCache){const Vt=fe.ts.get(tt),Jt=Vt.withLastLimboFreeSnapshotVersion(Vt.snapshotVersion);fe.ts=fe.ts.insert(tt,Jt)}}}),function U(W,ee){return M.apply(this,arguments)})(o.localStore,p))}),tp.apply(this,arguments)}function Kh(i,e){return Yh.apply(this,arguments)}function Yh(){return Yh=(0,Re.Z)(function*(i,e){const n=Wt(i);if(!n.currentUser.isEqual(e)){Tt("SyncEngine","User change. New user:",e.toKey());const o=yield pd(n.localStore,e);n.currentUser=e,(p=n).ba.forEach(M=>{M.forEach(U=>{U.reject(new It(nt.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),p.ba.clear(),n.sharedClientState.handleUserChange(e,o.removedBatchIds,o.addedBatchIds),yield Fl(n,o._s)}var p}),Yh.apply(this,arguments)}function ym(i,e){const n=Wt(i),o=n.ya.get(e);if(o&&o.Ra)return fr().add(o.key);{let u=fr();const p=n.fa.get(e);if(!p)return u;for(const I of p){const M=n.ma.get(I);u=u.unionWith(M.view.ua)}return u}}function vm(i,e){return np.apply(this,arguments)}function np(){return np=(0,Re.Z)(function*(i,e){const n=Wt(i),o=yield Hp(n.localStore,e.query,!0),u=e.view.da(o);return n.isPrimaryClient&&Wh(n,e.targetId,u.Ta),u}),np.apply(this,arguments)}function Cy(i,e){return Im.apply(this,arguments)}function Im(){return Im=(0,Re.Z)(function*(i,e){const n=Wt(i);return Gp(n.localStore,e).then(o=>Fl(n,o))}),Im.apply(this,arguments)}function Ay(i,e,n,o){return cg.apply(this,arguments)}function cg(){return cg=(0,Re.Z)(function*(i,e,n,o){const u=Wt(i),p=yield function(M,U){const W=Wt(M),ee=Wt(W.mutationQueue);return W.persistence.runTransaction("Lookup mutation documents","readonly",fe=>ee.Cn(fe,U).next(Me=>Me?W.localDocuments.getDocuments(fe,Me):V.resolve(null)))}(u.localStore,e);var U;null!==p?("pending"===n?yield Id(u.remoteStore):"acknowledged"===n||"rejected"===n?(yc(u,e,o||null),ug(u,e),U=e,Wt(Wt(u.localStore).mutationQueue).Fn(U)):on(),yield Fl(u,p)):Tt("SyncEngine","Cannot apply mutation batch with id: "+e)}),cg.apply(this,arguments)}function dg(){return dg=(0,Re.Z)(function*(i,e){const n=Wt(i);if(c(n),h(n),!0===e&&!0!==n.Ca){const o=n.sharedClientState.getAllActiveQueryTargets(),u=yield hg(n,o.toArray());n.Ca=!0,yield Ty(n.remoteStore,!0);for(const p of u)Gf(n.remoteStore,p)}else if(!1===e&&!1!==n.Ca){const o=[];let u=Promise.resolve();n.fa.forEach((p,I)=>{n.sharedClientState.isLocalQueryTarget(I)?o.push(I):u=u.then(()=>(ih(n,I),Vh(n.localStore,I,!0))),vd(n.remoteStore,I)}),yield u,yield hg(n,o),function(I){const M=Wt(I);M.ya.forEach((U,W)=>{vd(M.remoteStore,W)}),M.wa.Vr(),M.ya=new Map,M.pa=new ci(Qt.comparator)}(n),n.Ca=!1,yield Ty(n.remoteStore,!1)}}),dg.apply(this,arguments)}function hg(i,e,n){return fg.apply(this,arguments)}function fg(){return fg=(0,Re.Z)(function*(i,e,n){const o=Wt(i),u=[],p=[];for(const I of e){let M;const U=o.fa.get(I);if(U&&0!==U.length){M=yield jp(o.localStore,w(U[0]));for(const W of U){const ee=o.ma.get(W),fe=yield vm(o,ee);fe.snapshot&&p.push(fe.snapshot)}}else{const W=yield Vf(o.localStore,I);M=yield jp(o.localStore,W),yield Qf(o,Em(W),I,!1,M.resumeToken)}u.push(M)}return o.Va.a_(p),u}),fg.apply(this,arguments)}function Em(i){return Ih(i.path,i.collectionGroup,i.orderBy,i.filters,i.limit,"F",i.startAt,i.endAt)}function Ry(i){return n=Wt(i).localStore,Wt(Wt(n).persistence).Bi();var n}function Dv(i,e,n,o){return __.apply(this,arguments)}function __(){return __=(0,Re.Z)(function*(i,e,n,o){const u=Wt(i);if(u.Ca)return void Tt("SyncEngine","Ignoring unexpected query state notification.");const p=u.fa.get(e);if(p&&p.length>0)switch(n){case"current":case"not-current":{const I=yield Gp(u.localStore,Rn(p[0])),M=C.createSynthesizedRemoteEventForCurrentChange(e,"current"===n,Bs.EMPTY_BYTE_STRING);yield Fl(u,I,M);break}case"rejected":yield Vh(u.localStore,e,!0),ih(u,e,o);break;default:on()}}),__.apply(this,arguments)}function Ll(i,e,n){return Tm.apply(this,arguments)}function Tm(){return Tm=(0,Re.Z)(function*(i,e,n){const o=c(i);if(o.Ca){for(const u of e){if(o.fa.has(u)){Tt("SyncEngine","Adding an already active target "+u);continue}const p=yield Vf(o.localStore,u),I=yield jp(o.localStore,p);yield Qf(o,Em(p),I.targetId,!1,I.resumeToken),Gf(o.remoteStore,I)}for(const u of n)o.fa.has(u)&&(yield Vh(o.localStore,u,!1).then(()=>{vd(o.remoteStore,u),ih(o,u)}).catch(A))}}),Tm.apply(this,arguments)}function c(i){const e=Wt(i);return e.remoteStore.remoteSyncer.applyRemoteEvent=sg.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=ym.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=jc.bind(null,e),e.Va.a_=h_.bind(null,e.eventManager),e.Va.Fa=rh.bind(null,e.eventManager),e}function h(i){const e=Wt(i);return e.remoteStore.remoteSyncer.applySuccessfulWrite=g_.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=m_.bind(null,e),e}class d{constructor(){this.synchronizeTabs=!1}initialize(e){var n=this;return(0,Re.Z)(function*(){n.serializer=Uf(e.databaseInfo.databaseId),n.sharedClientState=n.createSharedClientState(e),n.persistence=n.createPersistence(e),yield n.persistence.start(),n.localStore=n.createLocalStore(e),n.gcScheduler=n.createGarbageCollectionScheduler(e,n.localStore),n.indexBackfillerScheduler=n.createIndexBackfillerScheduler(e,n.localStore)})()}createGarbageCollectionScheduler(e,n){return null}createIndexBackfillerScheduler(e,n){return null}createLocalStore(e){return Qg(this.persistence,new s_,e.initialUser,this.serializer)}createPersistence(e){return new kh(Fh.jr,this.serializer)}createSharedClientState(e){return new Bc}terminate(){var e=this;return(0,Re.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class S extends d{constructor(e,n,o){super(),this.xa=e,this.cacheSizeBytes=n,this.forceOwnership=o,this.synchronizeTabs=!1}initialize(e){var n=()=>super.initialize,o=this;return(0,Re.Z)(function*(){yield n().call(o,e),yield o.xa.initialize(o,e),yield h(o.xa.syncEngine),yield Id(o.xa.remoteStore),yield o.persistence.mi(()=>(o.gcScheduler&&!o.gcScheduler.started&&o.gcScheduler.start(),o.indexBackfillerScheduler&&!o.indexBackfillerScheduler.started&&o.indexBackfillerScheduler.start(),Promise.resolve()))})()}createLocalStore(e){return Qg(this.persistence,new s_,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,n){return new e_(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,n)}createIndexBackfillerScheduler(e,n){const o=new $u(n,this.persistence);return new pi(e.asyncQueue,o)}createPersistence(e){const n=cc(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),o=void 0!==this.cacheSizeBytes?$a.withCacheSize(this.cacheSizeBytes):$a.DEFAULT;return new Up(this.synchronizeTabs,n,e.clientId,o,e.asyncQueue,zp(),Uh(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new Bc}}class B extends S{constructor(e,n){super(e,n,!1),this.xa=e,this.cacheSizeBytes=n,this.synchronizeTabs=!0}initialize(e){var n=()=>super.initialize,o=this;return(0,Re.Z)(function*(){yield n().call(o,e);const u=o.xa.syncEngine;o.sharedClientState instanceof Bf&&(o.sharedClientState.syncEngine={Ys:Ay.bind(null,u),Zs:Dv.bind(null,u),Xs:Ll.bind(null,u),Bi:Ry.bind(null,u),Js:Cy.bind(null,u)},yield o.sharedClientState.start()),yield o.persistence.mi(function(){var p=(0,Re.Z)(function*(I){yield function Sy(i,e){return dg.apply(this,arguments)}(o.xa.syncEngine,I),o.gcScheduler&&(I&&!o.gcScheduler.started?o.gcScheduler.start():I||o.gcScheduler.stop()),o.indexBackfillerScheduler&&(I&&!o.indexBackfillerScheduler.started?o.indexBackfillerScheduler.start():I||o.indexBackfillerScheduler.stop())});return function(I){return p.apply(this,arguments)}}())})()}createSharedClientState(e){const n=zp();if(!Bf.D(n))throw new It(nt.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const o=cc(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Bf(n,e.asyncQueue,o,e.clientId,e.initialUser)}}class Y{initialize(e,n){var o=this;return(0,Re.Z)(function*(){o.localStore||(o.localStore=e.localStore,o.sharedClientState=e.sharedClientState,o.datastore=o.createDatastore(n),o.remoteStore=o.createRemoteStore(n),o.eventManager=o.createEventManager(n),o.syncEngine=o.createSyncEngine(n,!e.synchronizeTabs),o.sharedClientState.onlineStateHandler=u=>du(o.syncEngine,u,1),o.remoteStore.remoteSyncer.handleCredentialChange=Kh.bind(null,o.syncEngine),yield Ty(o.remoteStore,o.syncEngine.isPrimaryClient))})()}createEventManager(e){return new d_}createDatastore(e){const n=Uf(e.databaseInfo.databaseId),o=new Xd(e.databaseInfo);return new Ev(e.authCredentials,e.appCheckCredentials,o,n)}createRemoteStore(e){return o=this.localStore,u=this.datastore,p=e.asyncQueue,I=n=>du(this.syncEngine,n,0),M=pc.D()?new pc:new fc,new im(o,u,p,I,M);var o,u,p,I,M}createSyncEngine(e,n){return function(u,p,I,M,U,W,ee){const fe=new pm(u,p,I,M,U,W);return ee&&(fe.Ca=!0),fe}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}terminate(){return(e=(0,Re.Z)(function*(o){const u=Wt(o);Tt("RemoteStore","RemoteStore shutting down."),u.C_.add(5),yield gc(u),u.F_.shutdown(),u.M_.set("Unknown")}),function n(o){return e.apply(this,arguments)})(this.remoteStore);var e}}function ae(i,e=10240){let n=0;return{read:()=>(0,Re.Z)(function*(){if(n<i.byteLength){const o={value:i.slice(n,n+e),done:!1};return n+=e,o}return{done:!0}})(),cancel:()=>(0,Re.Z)(function*(){})(),releaseLock(){},closed:Promise.resolve()}}class pe{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Oa(this.observer.next,e)}error(e){this.observer.error?this.Oa(this.observer.error,e):Si("Uncaught Error in snapshot listener:",e.toString())}Na(){this.muted=!0}Oa(e,n){this.muted||setTimeout(()=>{this.muted||e(n)},0)}}class Ce{constructor(e,n){this.Ba=e,this.serializer=n,this.metadata=new Ks,this.buffer=new Uint8Array,this.La=new TextDecoder("utf-8"),this.ka().then(o=>{o&&o.Z_()?this.metadata.resolve(o.Y_.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(o?.Y_)}`))},o=>this.metadata.reject(o))}close(){return this.Ba.cancel()}getMetadata(){var e=this;return(0,Re.Z)(function*(){return e.metadata.promise})()}Ma(){var e=this;return(0,Re.Z)(function*(){return yield e.getMetadata(),e.ka()})()}ka(){var e=this;return(0,Re.Z)(function*(){const n=yield e.qa();if(null===n)return null;const o=e.La.decode(n),u=Number(o);isNaN(u)&&e.Qa(`length string (${o}) is not valid number`);const p=yield e.Ka(u);return new wy(JSON.parse(p),n.length+u)})()}$a(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}qa(){var e=this;return(0,Re.Z)(function*(){for(;e.$a()<0&&!(yield e.Ua()););if(0===e.buffer.length)return null;const n=e.$a();n<0&&e.Qa("Reached the end of bundle when a length string is expected.");const o=e.buffer.slice(0,n);return e.buffer=e.buffer.slice(n),o})()}Ka(e){var n=this;return(0,Re.Z)(function*(){for(;n.buffer.length<e;)(yield n.Ua())&&n.Qa("Reached the end of bundle when more is expected.");const o=n.La.decode(n.buffer.slice(0,e));return n.buffer=n.buffer.slice(e),o})()}Qa(e){throw this.Ba.cancel(),new Error(`Invalid bundle format: ${e}`)}Ua(){var e=this;return(0,Re.Z)(function*(){const n=yield e.Ba.read();if(!n.done){const o=new Uint8Array(e.buffer.length+n.value.length);o.set(e.buffer),o.set(n.value,e.buffer.length),e.buffer=o}return n.done})()}}class rt{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var n=this;return(0,Re.Z)(function*(){if(n.ensureCommitNotCalled(),n.mutations.length>0)throw new It(nt.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const o=yield(u=(0,Re.Z)(function*(I,M){const U=Wt(I),W=kc(U.serializer)+"/documents",ee={documents:M.map(Vt=>ud(U.serializer,Vt))},fe=yield U.Co("BatchGetDocuments",W,ee,M.length),Me=new Map;fe.forEach(Vt=>{const Kt=function xg(i,e){return"found"in e?function(o,u){vn(!!u.found);const p=gl(o,u.found.name),I=us(u.found.updateTime),M=u.found.createTime?us(u.found.createTime):ln.min(),U=new Es({mapValue:{fields:u.found.fields}});return ar.newFoundDocument(p,I,M,U)}(i,e):"missing"in e?function(o,u){vn(!!u.missing),vn(!!u.readTime);const p=gl(o,u.missing),I=us(u.readTime);return ar.newNoDocument(p,I)}(i,e):on()}(U.serializer,Vt);Me.set(Kt.key.toString(),Kt)});const tt=[];return M.forEach(Vt=>{const Kt=Me.get(Vt.toString());vn(!!Kt),tt.push(Kt)}),tt}),function p(I,M){return u.apply(this,arguments)})(n.datastore,e);var u;return o.forEach(u=>n.recordVersion(u)),o})()}set(e,n){this.write(n.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,n){try{this.write(n.toMutation(e,this.preconditionForUpdate(e)))}catch(o){this.lastWriteError=o}this.writtenDocs.add(e.toString())}delete(e){this.write(new Su(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,Re.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const n=e.readVersions;var o;e.mutations.forEach(o=>{n.delete(o.key.toString())}),n.forEach((o,u)=>{const p=Qt.fromPath(u);e.mutations.push(new qo(p,e.precondition(p)))}),yield(o=(0,Re.Z)(function*(p,I){const M=Wt(p),U=kc(M.serializer)+"/documents",W={writes:I.map(ee=>Tf(M.serializer,ee))};yield M.wo("Commit",U,W)}),function u(p,I){return o.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let n;if(e.isFoundDocument())n=e.version;else{if(!e.isNoDocument())throw on();n=ln.min()}const o=this.readVersions.get(e.key.toString());if(o){if(!n.isEqual(o))throw new It(nt.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),n)}precondition(e){const n=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&n?n.isEqual(ln.min())?xi.exists(!1):xi.updateTime(n):xi.none()}preconditionForUpdate(e){const n=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&n){if(n.isEqual(ln.min()))throw new It(nt.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return xi.updateTime(n)}return xi.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class ut{constructor(e,n,o,u,p){this.asyncQueue=e,this.datastore=n,this.options=o,this.updateFunction=u,this.deferred=p,this.Wa=o.maxAttempts,this.zo=new jf(this.asyncQueue,"transaction_retry")}run(){this.Wa-=1,this.Ga()}Ga(){var e=this;this.zo.ko((0,Re.Z)(function*(){const n=new rt(e.datastore),o=e.za(n);o&&o.then(u=>{e.asyncQueue.enqueueAndForget(()=>n.commit().then(()=>{e.deferred.resolve(u)}).catch(p=>{e.ja(p)}))}).catch(u=>{e.ja(u)})}))}za(e){try{const n=this.updateFunction(e);return!Ua(n)&&n.catch&&n.then?n:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(n){return this.deferred.reject(n),null}}ja(e){this.Wa>0&&this.Ha(e)?(this.Wa-=1,this.asyncQueue.enqueueAndForget(()=>(this.Ga(),Promise.resolve()))):this.deferred.reject(e)}Ha(e){if("FirebaseError"===e.name){const n=e.code;return"aborted"===n||"failed-precondition"===n||"already-exists"===n||!Hd(n)}return!1}}class dt{constructor(e,n,o,u){var p=this;this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=o,this.databaseInfo=u,this.user=Yr.UNAUTHENTICATED,this.clientId=Cd.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(o,function(){var I=(0,Re.Z)(function*(M){Tt("FirestoreClient","Received user=",M.uid),yield p.authCredentialListener(M),p.user=M});return function(M){return I.apply(this,arguments)}}()),this.appCheckCredentials.start(o,I=>(Tt("FirestoreClient","Received new app check token=",I),this.appCheckCredentialListener(I,this.user)))}getConfiguration(){var e=this;return(0,Re.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new It(nt.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const n=new Ks;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,Re.Z)(function*(){try{e._onlineComponents&&(yield e._onlineComponents.terminate()),e._offlineComponents&&(yield e._offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),n.resolve()}catch(o){const u=eh(o,"Failed to shutdown persistence");n.reject(u)}})),n.promise}}function Nt(i,e){return $t.apply(this,arguments)}function $t(){return $t=(0,Re.Z)(function*(i,e){i.asyncQueue.verifyOperationInProgress(),Tt("FirestoreClient","Initializing OfflineComponentProvider");const n=yield i.getConfiguration();yield e.initialize(n);let o=n.initialUser;i.setCredentialChangeListener(function(){var u=(0,Re.Z)(function*(p){o.isEqual(p)||(yield pd(e.localStore,p),o=p)});return function(p){return u.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>i.terminate()),i._offlineComponents=e}),$t.apply(this,arguments)}function Ht(i,e){return Nn.apply(this,arguments)}function Nn(){return Nn=(0,Re.Z)(function*(i,e){i.asyncQueue.verifyOperationInProgress();const n=yield vr(i);Tt("FirestoreClient","Initializing OnlineComponentProvider");const o=yield i.getConfiguration();yield e.initialize(n,o),i.setCredentialChangeListener(u=>c_(e.remoteStore,u)),i.setAppCheckTokenChangeListener((u,p)=>c_(e.remoteStore,p)),i._onlineComponents=e}),Nn.apply(this,arguments)}function xn(i){return"FirebaseError"===i.name?i.code===nt.FAILED_PRECONDITION||i.code===nt.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||22===i.code||20===i.code||11===i.code}function vr(i){return Pn.apply(this,arguments)}function Pn(){return Pn=(0,Re.Z)(function*(i){if(!i._offlineComponents)if(i._uninitializedComponentsProvider){Tt("FirestoreClient","Using user provided OfflineComponentProvider");try{yield Nt(i,i._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!xn(n))throw n;Do("Error using user provided cache. Falling back to memory cache: "+n),yield Nt(i,new d)}}else Tt("FirestoreClient","Using default OfflineComponentProvider"),yield Nt(i,new d);return i._offlineComponents}),Pn.apply(this,arguments)}function Ir(i){return pr.apply(this,arguments)}function pr(){return pr=(0,Re.Z)(function*(i){return i._onlineComponents||(i._uninitializedComponentsProvider?(Tt("FirestoreClient","Using user provided OnlineComponentProvider"),yield Ht(i,i._uninitializedComponentsProvider._online)):(Tt("FirestoreClient","Using default OnlineComponentProvider"),yield Ht(i,new Y))),i._onlineComponents}),pr.apply(this,arguments)}function gr(i){return vr(i).then(e=>e.persistence)}function br(i){return vr(i).then(e=>e.localStore)}function Gi(i){return Ir(i).then(e=>e.remoteStore)}function gi(i){return Ir(i).then(e=>e.syncEngine)}function Hs(i){return cs.apply(this,arguments)}function cs(){return cs=(0,Re.Z)(function*(i){const e=yield Ir(i),n=e.eventManager;return n.onListen=Dy.bind(null,e.syncEngine),n.onUnlisten=bv.bind(null,e.syncEngine),n}),cs.apply(this,arguments)}function Tn(i,e,n={}){const o=new Ks;return i.asyncQueue.enqueueAndForget((0,Re.Z)(function*(){return function(p,I,M,U,W){const ee=new pe({next:Me=>{I.enqueueAndForget(()=>tg(p,fe));const tt=Me.docs.has(M);!tt&&Me.fromCache?W.reject(new It(nt.UNAVAILABLE,"Failed to get document because the client is offline.")):tt&&Me.fromCache&&U&&"server"===U.source?W.reject(new It(nt.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):W.resolve(Me)},error:Me=>W.reject(Me)}),fe=new _c(Pc(M.path),ee,{includeMetadataChanges:!0,J_:!0});return eg(p,fe)}(yield Hs(i),i.asyncQueue,e,n,o)})),o.promise}function Dr(i,e,n={}){const o=new Ks;return i.asyncQueue.enqueueAndForget((0,Re.Z)(function*(){return function(p,I,M,U,W){const ee=new pe({next:Me=>{I.enqueueAndForget(()=>tg(p,fe)),Me.fromCache&&"server"===U.source?W.reject(new It(nt.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):W.resolve(Me)},error:Me=>W.reject(Me)}),fe=new _c(M,ee,{includeMetadataChanges:!0,J_:!0});return eg(p,fe)}(yield Hs(i),i.asyncQueue,e,n,o)})),o.promise}function sh(i){const e={};return void 0!==i.timeoutSeconds&&(e.timeoutSeconds=i.timeoutSeconds),e}const Zs=new Map;function Yo(i,e,n){if(!n)throw new It(nt.INVALID_ARGUMENT,`Function ${i}() cannot be called with an empty ${e}.`)}function Zo(i,e,n,o){if(!0===e&&!0===o)throw new It(nt.INVALID_ARGUMENT,`${i} and ${n} cannot be used together.`)}function oh(i){if(!Qt.isDocumentKey(i))throw new It(nt.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${i} has ${i.length}.`)}function Td(i){if(Qt.isDocumentKey(i))throw new It(nt.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${i} has ${i.length}.`)}function rp(i){if(void 0===i)return"undefined";if(null===i)return"null";if("string"==typeof i)return i.length>20&&(i=`${i.substring(0,20)}...`),JSON.stringify(i);if("number"==typeof i||"boolean"==typeof i)return""+i;if("object"==typeof i){if(i instanceof Array)return"an array";{const e=(o=i).constructor?o.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var o;return"function"==typeof i?"a function":on()}function Lr(i,e){if("_delegate"in i&&(i=i._delegate),!(i instanceof e)){if(e.name===i.constructor.name)throw new It(nt.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=rp(i);throw new It(nt.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return i}function Zh(i,e){if(e<=0)throw new It(nt.INVALID_ARGUMENT,`Function ${i}() requires a positive number, but it was: ${e}.`)}class y_{constructor(e){var n,o;if(void 0===e.host){if(void 0!==e.ssl)throw new It(nt.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(n=e.ssl)||void 0===n||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new It(nt.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Zo("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!(this.experimentalForceLongPolling||void 0!==e.experimentalAutoDetectLongPolling&&!e.experimentalAutoDetectLongPolling),this.experimentalLongPollingOptions=sh(null!==(o=e.experimentalLongPollingOptions)&&void 0!==o?o:{}),function(p){if(void 0!==p.timeoutSeconds){if(isNaN(p.timeoutSeconds))throw new It(nt.INVALID_ARGUMENT,`invalid long polling timeout: ${p.timeoutSeconds} (must not be NaN)`);if(p.timeoutSeconds<5)throw new It(nt.INVALID_ARGUMENT,`invalid long polling timeout: ${p.timeoutSeconds} (minimum allowed value is 5)`);if(p.timeoutSeconds>30)throw new It(nt.INVALID_ARGUMENT,`invalid long polling timeout: ${p.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.experimentalLongPollingOptions.timeoutSeconds===e.experimentalLongPollingOptions.timeoutSeconds&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class ah{constructor(e,n,o,u){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=o,this._app=u,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new y_({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new It(nt.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new It(nt.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new y_(e),void 0!==e.credentials&&(this._authCredentials=function(o){if(!o)return new ph;switch(o.type){case"firstParty":return new hr(o.sessionIndex||"0",o.iamToken||null,o.authTokenFactory||null);case"provider":return o.client;default:throw new It(nt.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const o=Zs.get(n);o&&(Tt("ComponentProvider","Removing Datastore"),Zs.delete(n),o.terminate())}(this),Promise.resolve()}}class ga{constructor(e,n,o){this.converter=n,this._query=o,this.type="query",this.firestore=e}withConverter(e){return new ga(this.firestore,e,this._query)}}class Ts{constructor(e,n,o){this.converter=n,this._key=o,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new go(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Ts(this.firestore,e,this._key)}}class go extends ga{constructor(e,n,o){super(e,n,Pc(o)),this._path=o,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Ts(this.firestore,null,new Qt(e))}withConverter(e){return new go(this.firestore,e,this._path)}}function ip(i,e,...n){if(i=(0,$e.m9)(i),Yo("collection","path",e),i instanceof ah){const o=or.fromString(e,...n);return Td(o),new go(i,null,o)}{if(!(i instanceof Ts||i instanceof go))throw new It(nt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const o=i._path.child(or.fromString(e,...n));return Td(o),new go(i.firestore,null,o)}}function sp(i,e,...n){if(i=(0,$e.m9)(i),1===arguments.length&&(e=Cd.newId()),Yo("doc","path",e),i instanceof ah){const o=or.fromString(e,...n);return oh(o),new Ts(i,null,new Qt(o))}{if(!(i instanceof Ts||i instanceof go))throw new It(nt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const o=i._path.child(or.fromString(e,...n));return oh(o),new Ts(i.firestore,i instanceof go?i.converter:null,new Qt(o))}}function gg(i,e){return i=(0,$e.m9)(i),e=(0,$e.m9)(e),(i instanceof Ts||i instanceof go)&&(e instanceof Ts||e instanceof go)&&i.firestore===e.firestore&&i.path===e.path&&i.converter===e.converter}function mg(i,e){return i=(0,$e.m9)(i),e=(0,$e.m9)(e),i instanceof ga&&e instanceof ga&&i.firestore===e.firestore&&je(i._query,e._query)&&i.converter===e.converter}class I_{constructor(){this.Ja=Promise.resolve(),this.Ya=[],this.Za=!1,this.Xa=[],this.eu=null,this.tu=!1,this.nu=!1,this.ru=[],this.zo=new jf(this,"async_queue_retry"),this.iu=()=>{const n=Uh();n&&Tt("AsyncQueue","Visibility state changed to "+n.visibilityState),this.zo.Qo()};const e=Uh();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.iu)}get isShuttingDown(){return this.Za}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.su(),this.ou(e)}enterRestrictedMode(e){if(!this.Za){this.Za=!0,this.nu=e||!1;const n=Uh();n&&"function"==typeof n.removeEventListener&&n.removeEventListener("visibilitychange",this.iu)}}enqueue(e){if(this.su(),this.Za)return new Promise(()=>{});const n=new Ks;return this.ou(()=>this.Za&&this.nu?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Ya.push(e),this._u()))}_u(){var e=this;return(0,Re.Z)(function*(){if(0!==e.Ya.length){try{yield e.Ya[0](),e.Ya.shift(),e.zo.reset()}catch(n){if(!Gt(n))throw n;Tt("AsyncQueue","Operation failed with retryable error: "+n)}e.Ya.length>0&&e.zo.ko(()=>e._u())}})()}ou(e){const n=this.Ja.then(()=>(this.tu=!0,e().catch(o=>{throw this.eu=o,this.tu=!1,Si("INTERNAL UNHANDLED ERROR: ",function(I){let M=I.message||"";return I.stack&&(M=I.stack.includes(I.message)?I.stack:I.message+"\n"+I.stack),M}(o)),o}).then(o=>(this.tu=!1,o))));return this.Ja=n,n}enqueueAfterDelay(e,n,o){this.su(),this.ru.indexOf(e)>-1&&(n=0);const u=Yf.createAndSchedule(this,e,n,o,p=>this.au(p));return this.Xa.push(u),u}su(){this.eu&&on()}verifyOperationInProgress(){}uu(){var e=this;return(0,Re.Z)(function*(){let n;do{n=e.Ja,yield n}while(n!==e.Ja)})()}cu(e){for(const n of this.Xa)if(n.timerId===e)return!0;return!1}lu(e){return this.uu().then(()=>{this.Xa.sort((n,o)=>n.targetTimeMs-o.targetTimeMs);for(const n of this.Xa)if(n.skipDelay(),"all"!==e&&n.timerId===e)break;return this.uu()})}hu(e){this.ru.push(e)}au(e){const n=this.Xa.indexOf(e);this.Xa.splice(n,1)}}function _g(i){return function(n,o){if("object"!=typeof n||null===n)return!1;const u=n;for(const p of["next","error","complete"])if(p in u&&"function"==typeof u[p])return!0;return!1}(i)}class E_{constructor(){this._progressObserver={},this._taskCompletionResolver=new Ks,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,n,o){this._progressObserver={next:e,error:n,complete:o}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,n){return this._taskCompletionResolver.promise.then(e,n)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class ds extends ah{constructor(e,n,o,u){super(e,n,o,u),this.type="firestore",this._queue=new I_,this._persistenceKey=u?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||Av(this),this._firestoreClient.terminate()}}function mo(i){return i._firestoreClient||Av(i),i._firestoreClient.verifyNotTerminated(),i._firestoreClient}function Av(i){var e,n,o;const u=i._freezeSettings(),p=(U=(null===(e=i._app)||void 0===e?void 0:e.options.appId)||"",new Sc(i._databaseId,U,i._persistenceKey,(ee=u).host,ee.ssl,ee.experimentalForceLongPolling,ee.experimentalAutoDetectLongPolling,sh(ee.experimentalLongPollingOptions),ee.useFetchStreams));var U,ee;i._firestoreClient=new dt(i._authCredentials,i._appCheckCredentials,i._queue,p),null!==(n=u.localCache)&&void 0!==n&&n._offlineComponentProvider&&null!==(o=u.localCache)&&void 0!==o&&o._onlineComponentProvider&&(i._firestoreClient._uninitializedComponentsProvider={_offlineKind:u.localCache.kind,_offline:u.localCache._offlineComponentProvider,_online:u.localCache._onlineComponentProvider})}function Sv(i,e,n){const o=new Ks;return i.asyncQueue.enqueue((0,Re.Z)(function*(){try{yield Nt(i,n),yield Ht(i,e),o.resolve()}catch(u){const p=u;if(!xn(p))throw p;Do("Error enabling indexeddb cache. Falling back to memory cache: "+p),o.reject(p)}})).then(()=>o.promise)}function Py(i){if(i._initialized||i._terminated)throw new It(nt.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class bd{constructor(e){this._byteString=e}static fromBase64String(e){try{return new bd(Bs.fromBase64String(e))}catch(n){throw new It(nt.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new bd(Bs.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class lh{constructor(...e){for(let n=0;n<e.length;++n)if(0===e[n].length)throw new It(nt.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new vi(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class op{constructor(e){this._methodName=e}}class Lu{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new It(nt.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new It(nt.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Yn(this._lat,e._lat)||Yn(this._long,e._long)}}const bm=/^__.*__$/;class yl{constructor(e,n,o){this.data=e,this.fieldMask=n,this.fieldTransforms=o}toMutation(e,n){return null!==this.fieldMask?new Pl(e,this.data,this.fieldMask,n,this.fieldTransforms):new Ga(e,this.data,n,this.fieldTransforms)}}class Qh{constructor(e,n,o){this.data=e,this.fieldMask=n,this.fieldTransforms=o}toMutation(e,n){return new Pl(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function wm(i){switch(i){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw on()}}class Vl{constructor(e,n,o,u,p,I){this.settings=e,this.databaseId=n,this.serializer=o,this.ignoreUndefinedProperties=u,void 0===p&&this.Pu(),this.fieldTransforms=p||[],this.fieldMask=I||[]}get path(){return this.settings.path}get Iu(){return this.settings.Iu}Tu(e){return new Vl(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Eu(e){var n;const o=null===(n=this.path)||void 0===n?void 0:n.child(e),u=this.Tu({path:o,du:!1});return u.Au(e),u}Ru(e){var n;const o=null===(n=this.path)||void 0===n?void 0:n.child(e),u=this.Tu({path:o,du:!1});return u.Pu(),u}Vu(e){return this.Tu({path:void 0,du:!0})}mu(e){return Tg(e,this.settings.methodName,this.settings.fu||!1,this.path,this.settings.gu)}contains(e){return void 0!==this.fieldMask.find(n=>e.isPrefixOf(n))||void 0!==this.fieldTransforms.find(n=>e.isPrefixOf(n.field))}Pu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Au(this.path.get(e))}Au(e){if(0===e.length)throw this.mu("Document fields must not be empty");if(wm(this.Iu)&&bm.test(e))throw this.mu('Document fields cannot begin and end with "__"')}}class Oy{constructor(e,n,o){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=o||Uf(e)}pu(e,n,o,u=!1){return new Vl({Iu:e,methodName:n,gu:o,path:vi.emptyPath(),du:!1,fu:u},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function vc(i){const e=i._freezeSettings(),n=Uf(i._databaseId);return new Oy(i._databaseId,!!e.ignoreUndefinedProperties,n)}function uh(i,e,n,o,u,p={}){const I=i.pu(p.merge||p.mergeFields?2:0,e,n,u);D_("Data must be an object, but it was:",I,o);const M=xy(o,I);let U,W;if(p.merge)U=new ca(I.fieldMask),W=I.fieldTransforms;else if(p.mergeFields){const ee=[];for(const fe of p.mergeFields){const Me=Eg(e,fe,n);if(!I.contains(Me))throw new It(nt.INVALID_ARGUMENT,`Field '${Me}' is specified in your field mask but missing from your input data.`);kv(ee,Me)||ee.push(Me)}U=new ca(ee),W=I.fieldTransforms.filter(fe=>U.covers(fe.field))}else U=null,W=I.fieldTransforms;return new yl(new Es(M),U,W)}class wd extends op{_toFieldTransform(e){if(2!==e.Iu)throw e.mu(1===e.Iu?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof wd}}function ap(i,e,n){return new Vl({Iu:3,gu:e.settings.gu,methodName:i._methodName,du:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class Jh extends op{_toFieldTransform(e){return new sd(e.path,new zo)}isEqual(e){return e instanceof Jh}}class yg extends op{constructor(e,n){super(e),this.yu=n}_toFieldTransform(e){const n=ap(this,e,!0),o=this.yu.map(p=>ef(p,n)),u=new Aa(o);return new sd(e.path,u)}isEqual(e){return this===e}}class vg extends op{constructor(e,n){super(e),this.yu=n}_toFieldTransform(e){const n=ap(this,e,!0),o=this.yu.map(p=>ef(p,n)),u=new Sa(o);return new sd(e.path,u)}isEqual(e){return this===e}}class Ig extends op{constructor(e,n){super(e),this.wu=n}_toFieldTransform(e){const n=new Ra(e.serializer,id(e.serializer,this.wu));return new sd(e.path,n)}isEqual(e){return this===e}}function Xh(i,e,n,o){const u=i.pu(1,e,n);D_("Data must be an object, but it was:",u,o);const p=[],I=Es.empty();Ku(o,(U,W)=>{const ee=Dm(e,U,n);W=(0,$e.m9)(W);const fe=u.Ru(ee);if(W instanceof wd)p.push(ee);else{const Me=ef(W,fe);null!=Me&&(p.push(ee),I.set(ee,Me))}});const M=new ca(p);return new Qh(I,M,u.fieldTransforms)}function w_(i,e,n,o,u,p){const I=i.pu(1,e,n),M=[Eg(e,o,n)],U=[u];if(p.length%2!=0)throw new It(nt.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let Me=0;Me<p.length;Me+=2)M.push(Eg(e,p[Me])),U.push(p[Me+1]);const W=[],ee=Es.empty();for(let Me=M.length-1;Me>=0;--Me)if(!kv(W,M[Me])){const tt=M[Me];let Vt=U[Me];Vt=(0,$e.m9)(Vt);const Kt=I.Ru(tt);if(Vt instanceof wd)W.push(tt);else{const Jt=ef(Vt,Kt);null!=Jt&&(W.push(tt),ee.set(tt,Jt))}}const fe=new ca(W);return new Qh(ee,fe,I.fieldTransforms)}function My(i,e,n,o=!1){return ef(n,i.pu(o?4:3,e))}function ef(i,e){if(ky(i=(0,$e.m9)(i)))return D_("Unsupported field value:",e,i),xy(i,e);if(i instanceof op)return function(o,u){if(!wm(u.Iu))throw u.mu(`${o._methodName}() can only be used with update() and set()`);if(!u.path)throw u.mu(`${o._methodName}() is not currently supported inside arrays`);const p=o._toFieldTransform(u);p&&u.fieldTransforms.push(p)}(i,e),null;if(void 0===i&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),i instanceof Array){if(e.settings.du&&4!==e.Iu)throw e.mu("Nested arrays are not supported");return function(o,u){const p=[];let I=0;for(const M of o){let U=ef(M,u.Vu(I));null==U&&(U={nullValue:"NULL_VALUE"}),p.push(U),I++}return{arrayValue:{values:p}}}(i,e)}return function(o,u){if(null===(o=(0,$e.m9)(o)))return{nullValue:"NULL_VALUE"};if("number"==typeof o)return id(u.serializer,o);if("boolean"==typeof o)return{booleanValue:o};if("string"==typeof o)return{stringValue:o};if(o instanceof Date){const p=Ur.fromDate(o);return{timestampValue:Nu(u.serializer,p)}}if(o instanceof Ur){const p=new Ur(o.seconds,1e3*Math.floor(o.nanoseconds/1e3));return{timestampValue:Nu(u.serializer,p)}}if(o instanceof Lu)return{geoPointValue:{latitude:o.latitude,longitude:o.longitude}};if(o instanceof bd)return{bytesValue:If(u.serializer,o._byteString)};if(o instanceof Ts){const p=u.databaseId,I=o.firestore._databaseId;if(!I.isEqual(p))throw u.mu(`Document reference is for database ${I.projectId}/${I.database} but should be for database ${p.projectId}/${p.database}`);return{referenceValue:xc(o.firestore._databaseId||u.databaseId,o._key.path)}}throw u.mu(`Unsupported field value: ${rp(o)}`)}(i,e)}function xy(i,e){const n={};return $o(i)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ku(i,(o,u)=>{const p=ef(u,e.Eu(o));null!=p&&(n[o]=p)}),{mapValue:{fields:n}}}function ky(i){return!("object"!=typeof i||null===i||i instanceof Array||i instanceof Date||i instanceof Ur||i instanceof Lu||i instanceof bd||i instanceof Ts||i instanceof op)}function D_(i,e,n){if(!ky(n)||"object"!=typeof(u=n)||null===u||Object.getPrototypeOf(u)!==Object.prototype&&null!==Object.getPrototypeOf(u)){const o=rp(n);throw e.mu("an object"===o?i+" a custom object":i+" "+o)}var u}function Eg(i,e,n){if((e=(0,$e.m9)(e))instanceof lh)return e._internalPath;if("string"==typeof e)return Dm(i,e);throw Tg("Field path arguments must be of type string or ",i,!1,void 0,n)}const xv=new RegExp("[~\\*/\\[\\]]");function Dm(i,e,n){if(e.search(xv)>=0)throw Tg(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,i,!1,void 0,n);try{return new lh(...e.split("."))._internalPath}catch{throw Tg(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,i,!1,void 0,n)}}function Tg(i,e,n,o,u){const p=o&&!o.isEmpty(),I=void 0!==u;let M=`Function ${e}() called with invalid data`;n&&(M+=" (via `toFirestore()`)"),M+=". ";let U="";return(p||I)&&(U+=" (found",p&&(U+=` in field ${o}`),I&&(U+=` in document ${u}`),U+=")"),new It(nt.INVALID_ARGUMENT,M+i+U)}function kv(i,e){return i.some(n=>n.isEqual(e))}class C_{constructor(e,n,o,u,p){this._firestore=e,this._userDataWriter=n,this._key=o,this._document=u,this._converter=p}get id(){return this._key.path.lastSegment()}get ref(){return new Ts(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new QI(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(A_("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n)}}}class QI extends C_{data(){return super.data()}}function A_(i,e){return"string"==typeof e?Dm(i,e):e instanceof lh?e._internalPath:e._delegate._internalPath}function Fv(i){if("L"===i.limitType&&0===i.explicitOrderBy.length)throw new It(nt.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Lv{}class Cm extends Lv{}function lp(i,e,...n){let o=[];e instanceof Lv&&o.push(e),o=o.concat(n),function(p){const I=p.filter(U=>U instanceof bg).length,M=p.filter(U=>U instanceof Am).length;if(I>1||I>0&&M>0)throw new It(nt.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(o);for(const u of o)i=u._apply(i);return i}class Am extends Cm{constructor(e,n,o){super(),this._field=e,this._op=n,this._value=o,this.type="where"}static _create(e,n,o){return new Am(e,n,o)}_apply(e){const n=this._parse(e);return B0(e._query,n),new ga(e.firestore,e.converter,Q(e._query,n))}_parse(e){const n=vc(e.firestore);return function(p,I,M,U,W,ee,fe){let Me;if(W.isKeyField()){if("array-contains"===ee||"array-contains-any"===ee)throw new It(nt.INVALID_ARGUMENT,`Invalid Query. You can't perform '${ee}' queries on documentId().`);if("in"===ee||"not-in"===ee){Mm(fe,ee);const tt=[];for(const Vt of fe)tt.push(Om(U,p,Vt));Me={arrayValue:{values:tt}}}else Me=Om(U,p,fe)}else"in"!==ee&&"not-in"!==ee&&"array-contains-any"!==ee||Mm(fe,ee),Me=My(M,"where",fe,"in"===ee||"not-in"===ee);return yr.create(W,ee,Me)}(e._query,0,n,e.firestore._databaseId,this._field,this._op,this._value)}}class bg extends Lv{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new bg(e,n)}_parse(e){const n=this._queryConstraints.map(o=>o._parse(e)).filter(o=>o.getFilters().length>0);return 1===n.length?n[0]:qr.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return 0===n.getFilters().length?e:(function(u,p){let I=u;const M=p.getFlattenedFilters();for(const U of M)B0(I,U),I=Q(I,U)}(e._query,n),new ga(e.firestore,e.converter,Q(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class Sm extends Cm{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new Sm(e,n)}_apply(e){const n=function(u,p,I){if(null!==u.startAt)throw new It(nt.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==u.endAt)throw new It(nt.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Us(p,I)}(e._query,this._field,this._direction);return new ga(e.firestore,e.converter,function(u,p){const I=u.explicitOrderBy.concat([p]);return new js(u.path,u.collectionGroup,I,u.filters.slice(),u.limit,u.limitType,u.startAt,u.endAt)}(e._query,n))}}class Rm extends Cm{constructor(e,n,o){super(),this.type=e,this._limit=n,this._limitType=o}static _create(e,n,o){return new Rm(e,n,o)}_apply(e){return new ga(e.firestore,e.converter,ce(e._query,this._limit,this._limitType))}}class N_ extends Cm{constructor(e,n,o){super(),this.type=e,this._docOrFields=n,this._inclusive=o}static _create(e,n,o){return new N_(e,n,o)}_apply(e){const n=O_(e,this.type,this._docOrFields,this._inclusive);return new ga(e.firestore,e.converter,(p=n,new js((u=e._query).path,u.collectionGroup,u.explicitOrderBy.slice(),u.filters.slice(),u.limit,u.limitType,p,u.endAt)));var u,p}}class P_ extends Cm{constructor(e,n,o){super(),this.type=e,this._docOrFields=n,this._inclusive=o}static _create(e,n,o){return new P_(e,n,o)}_apply(e){const n=O_(e,this.type,this._docOrFields,this._inclusive);return new ga(e.firestore,e.converter,(p=n,new js((u=e._query).path,u.collectionGroup,u.explicitOrderBy.slice(),u.filters.slice(),u.limit,u.limitType,u.startAt,p)));var u,p}}function O_(i,e,n,o){if(n[0]=(0,$e.m9)(n[0]),n[0]instanceof C_)return function(p,I,M,U,W){if(!U)throw new It(nt.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${M}().`);const ee=[];for(const fe of y(p))if(fe.field.isKeyField())ee.push(Xl(I,U.key));else{const Me=U.data.field(fe.field);if(da(Me))throw new It(nt.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+fe.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===Me){const tt=fe.field.canonicalString();throw new It(nt.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${tt}' (used as the orderBy) does not exist.`)}ee.push(Me)}return new hl(ee,W)}(i._query,i.firestore._databaseId,e,n[0]._document,o);{const u=vc(i.firestore);return function(I,M,U,W,ee,fe){const Me=I.explicitOrderBy;if(ee.length>Me.length)throw new It(nt.INVALID_ARGUMENT,`Too many arguments provided to ${W}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const tt=[];for(let Vt=0;Vt<ee.length;Vt++){const Kt=ee[Vt];if(Me[Vt].field.isKeyField()){if("string"!=typeof Kt)throw new It(nt.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${W}(), but got a ${typeof Kt}`);if(!P(I)&&-1!==Kt.indexOf("/"))throw new It(nt.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${W}() must be a plain document ID, but '${Kt}' contains a slash.`);const Jt=I.path.child(or.fromString(Kt));if(!Qt.isDocumentKey(Jt))throw new It(nt.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${W}() must result in a valid document path, but '${Jt}' is not because it contains an odd number of segments.`);const zn=new Qt(Jt);tt.push(Xl(M,zn))}else{const Jt=My(U,W,Kt);tt.push(Jt)}}return new hl(tt,fe)}(i._query,i.firestore._databaseId,u,e,n,o)}}function Om(i,e,n){if("string"==typeof(n=(0,$e.m9)(n))){if(""===n)throw new It(nt.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!P(e)&&-1!==n.indexOf("/"))throw new It(nt.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const o=e.path.child(or.fromString(n));if(!Qt.isDocumentKey(o))throw new It(nt.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${o}' is not because it has an odd number of segments (${o.length}).`);return Xl(i,new Qt(o))}if(n instanceof Ts)return Xl(i,n._key);throw new It(nt.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${rp(n)}.`)}function Mm(i,e){if(!Array.isArray(i)||0===i.length)throw new It(nt.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function B0(i,e){const n=function(u,p){for(const I of u)for(const M of I.getFlattenedFilters())if(p.indexOf(M.op)>=0)return M.op;return null}(i.filters,function(u){switch(u){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==n)throw new It(nt.INVALID_ARGUMENT,n===e.op?`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`:`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class Fy{convertValue(e,n="none"){switch(Cl(e)){case 0:return null;case 1:return e.booleanValue;case 2:return si(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Rr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 10:return this.convertObject(e.mapValue,n);default:throw on()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const o={};return Ku(e,(u,p)=>{o[u]=this.convertValue(p,n)}),o}convertGeoPoint(e){return new Lu(si(e.latitude),si(e.longitude))}convertArray(e,n){return(e.values||[]).map(o=>this.convertValue(o,n))}convertServerTimestamp(e,n){switch(n){case"previous":const o=Jl(e);return null==o?null:this.convertValue(o,n);case"estimate":return this.convertTimestamp(ul(e));default:return null}}convertTimestamp(e){const n=Ql(e);return new Ur(n.seconds,n.nanos)}convertDocumentKey(e,n){const o=or.fromString(e);vn(Hm(o));const u=new wa(o.get(1),o.get(3)),p=new Qt(o.popFirst(5));return u.isEqual(n)||Si(`Document ${p} contains a document reference within a different database (${u.projectId}/${u.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),p}}function wg(i,e,n){let o;return o=i?n&&(n.merge||n.mergeFields)?i.toFirestore(e,n):i.toFirestore(e):e,o}class U0 extends Fy{constructor(e){super(),this.firestore=e}convertBytes(e){return new bd(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Ts(this.firestore,null,n)}}class tf{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class ch extends C_{constructor(e,n,o,u,p,I){super(e,n,o,u,I),this._firestore=e,this._firestoreImpl=e,this.metadata=p}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new xm(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const o=this._document.data.field(A_("DocumentSnapshot.get",e));if(null!==o)return this._userDataWriter.convertValue(o,n.serverTimestamps)}}}class xm extends ch{data(e={}){return super.data(e)}}class nf{constructor(e,n,o,u){this._firestore=e,this._userDataWriter=n,this._snapshot=u,this.metadata=new tf(u.hasPendingWrites,u.fromCache),this.query=o}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,n){this._snapshot.docs.forEach(o=>{e.call(n,new xm(this._firestore,this._userDataWriter,o.key,o,new tf(this._snapshot.mutatedKeys.has(o.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new It(nt.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(u,p){if(u._snapshot.oldDocs.isEmpty()){let I=0;return u._snapshot.docChanges.map(M=>({type:"added",doc:new xm(u._firestore,u._userDataWriter,M.doc.key,M.doc,new tf(u._snapshot.mutatedKeys.has(M.doc.key),u._snapshot.fromCache),u.query.converter),oldIndex:-1,newIndex:I++}))}{let I=u._snapshot.oldDocs;return u._snapshot.docChanges.filter(M=>p||3!==M.type).map(M=>{const U=new xm(u._firestore,u._userDataWriter,M.doc.key,M.doc,new tf(u._snapshot.mutatedKeys.has(M.doc.key),u._snapshot.fromCache),u.query.converter);let W=-1,ee=-1;return 0!==M.type&&(W=I.indexOf(M.doc.key),I=I.delete(M.doc.key)),1!==M.type&&(I=I.add(M.doc),ee=I.indexOf(M.doc.key)),{type:jv(M.type),doc:U,oldIndex:W,newIndex:ee}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function jv(i){switch(i){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return on()}}function M_(i,e){return i instanceof ch&&e instanceof ch?i._firestore===e._firestore&&i._key.isEqual(e._key)&&(null===i._document?null===e._document:i._document.isEqual(e._document))&&i._converter===e._converter:i instanceof nf&&e instanceof nf&&i._firestore===e._firestore&&mg(i.query,e.query)&&i.metadata.isEqual(e.metadata)&&i._snapshot.isEqual(e._snapshot)}class rf extends Fy{constructor(e){super(),this.firestore=e}convertBytes(e){return new bd(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Ts(this.firestore,null,n)}}function Gv(i,e,n){i=Lr(i,Ts);const o=Lr(i.firestore,ds),u=wg(i.converter,e,n);return Dg(o,[uh(vc(o),"setDoc",i._key,u,null!==i.converter,n).toMutation(i._key,xi.none())])}function $v(i,e,n,...o){i=Lr(i,Ts);const u=Lr(i.firestore,ds),p=vc(u);let I;return I="string"==typeof(e=(0,$e.m9)(e))||e instanceof lh?w_(p,"updateDoc",i._key,e,n,o):Xh(p,"updateDoc",i._key,e),Dg(u,[I.toMutation(i._key,xi.exists(!0))])}function By(i,...e){var n,o,u;i=(0,$e.m9)(i);let p={includeMetadataChanges:!1},I=0;"object"!=typeof e[I]||_g(e[I])||(p=e[I],I++);const M={includeMetadataChanges:p.includeMetadataChanges};if(_g(e[I])){const fe=e[I];e[I]=null===(n=fe.next)||void 0===n?void 0:n.bind(fe),e[I+1]=null===(o=fe.error)||void 0===o?void 0:o.bind(fe),e[I+2]=null===(u=fe.complete)||void 0===u?void 0:u.bind(fe)}let U,W,ee;if(i instanceof Ts)W=Lr(i.firestore,ds),ee=Pc(i._key.path),U={next:fe=>{e[I]&&e[I](Uy(W,i,fe))},error:e[I+1],complete:e[I+2]};else{const fe=Lr(i,ga);W=Lr(fe.firestore,ds),ee=fe._query;const Me=new rf(W);U={next:tt=>{e[I]&&e[I](new nf(W,Me,fe,tt))},error:e[I+1],complete:e[I+2]},Fv(i._query)}return function(Me,tt,Vt,Kt){const Jt=new pe(Kt),zn=new _c(tt,Jt,Vt);return Me.asyncQueue.enqueueAndForget((0,Re.Z)(function*(){return eg(yield Hs(Me),zn)})),()=>{Jt.Na(),Me.asyncQueue.enqueueAndForget((0,Re.Z)(function*(){return tg(yield Hs(Me),zn)}))}}(mo(W),ee,M,U)}function Dg(i,e){return function(o,u){const p=new Ks;return o.asyncQueue.enqueueAndForget((0,Re.Z)(function*(){return function wv(i,e,n){return mm.apply(this,arguments)}(yield gi(o),u,p)})),p.promise}(mo(i),e)}function Uy(i,e,n){const o=n.docs.get(e._key),u=new rf(i);return new ch(i,u,e._key,o,new tf(n.hasPendingWrites,n.fromCache),e.converter)}const V_={maxAttempts:5};class Gy{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=vc(e)}set(e,n,o){this._verifyNotCommitted();const u=dh(e,this._firestore),p=wg(u.converter,n,o),I=uh(this._dataReader,"WriteBatch.set",u._key,p,null!==u.converter,o);return this._mutations.push(I.toMutation(u._key,xi.none())),this}update(e,n,o,...u){this._verifyNotCommitted();const p=dh(e,this._firestore);let I;return I="string"==typeof(n=(0,$e.m9)(n))||n instanceof lh?w_(this._dataReader,"WriteBatch.update",p._key,n,o,u):Xh(this._dataReader,"WriteBatch.update",p._key,n),this._mutations.push(I.toMutation(p._key,xi.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=dh(e,this._firestore);return this._mutations=this._mutations.concat(new Su(n._key,xi.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new It(nt.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function dh(i,e){if((i=(0,$e.m9)(i)).firestore!==e)throw new It(nt.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return i}class Qv extends class{constructor(n,o){this._firestore=n,this._transaction=o,this._dataReader=vc(n)}get(n){const o=dh(n,this._firestore),u=new U0(this._firestore);return this._transaction.lookup([o._key]).then(p=>{if(!p||1!==p.length)return on();const I=p[0];if(I.isFoundDocument())return new C_(this._firestore,u,I.key,I,o.converter);if(I.isNoDocument())return new C_(this._firestore,u,o._key,null,o.converter);throw on()})}set(n,o,u){const p=dh(n,this._firestore),I=wg(p.converter,o,u),M=uh(this._dataReader,"Transaction.set",p._key,I,null!==p.converter,u);return this._transaction.set(p._key,M),this}update(n,o,u,...p){const I=dh(n,this._firestore);let M;return M="string"==typeof(o=(0,$e.m9)(o))||o instanceof lh?w_(this._dataReader,"Transaction.update",I._key,o,u,p):Xh(this._dataReader,"Transaction.update",I._key,o),this._transaction.update(I._key,M),this}delete(n){const o=dh(n,this._firestore);return this._transaction.delete(o._key),this}}{constructor(e,n){super(e,n),this._firestore=e}get(e){const n=dh(e,this._firestore),o=new rf(this._firestore);return super.get(e).then(u=>new ch(this._firestore,o,n._key,u._document,new tf(!1,!1),n.converter))}}function U_(i,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new It("invalid-argument",`Invalid options passed to function ${i}(): You cannot specify both "merge" and "mergeFields".`);return e}function a0(){if(typeof Uint8Array>"u")throw new It("unimplemented","Uint8Arrays are not available in this environment.")}function l0(){if(!function _p(){return typeof atob<"u"}())throw new It("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(e,n=!0){wl=me.SDK_VERSION,(0,me._registerComponent)(new He.wA("firestore",(o,{instanceIdentifier:u,options:p})=>{const I=o.getProvider("app").getImmediate(),M=new ds(new ol(o.getProvider("auth-internal")),new Kc(o.getProvider("app-check-internal")),function(W,ee){if(!Object.prototype.hasOwnProperty.apply(W.options,["projectId"]))throw new It(nt.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new wa(W.options.projectId,ee)}(I,u),I);return p=Object.assign({useFetchStreams:n},p),M._setSettings(p),M},"PUBLIC").setMultipleInstances(!0)),(0,me.registerVersion)(Ps,"4.3.1",e),(0,me.registerVersion)(Ps,"4.3.1","esm2017")}();class Ag{constructor(e){this._delegate=e}static fromBase64String(e){return l0(),new Ag(bd.fromBase64String(e))}static fromUint8Array(e){return a0(),new Ag(bd.fromUint8Array(e))}toBase64(){return l0(),this._delegate.toBase64()}toUint8Array(){return a0(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function Wy(i){return function u0(i,e){if("object"!=typeof i||null===i)return!1;const n=i;for(const o of e)if(o in n&&"function"==typeof n[o])return!0;return!1}(i,["next","error","complete"])}class c0{enableIndexedDbPersistence(e,n){return function O0(i,e){Py(i=Lr(i,ds));const n=mo(i);if(n._uninitializedComponentsProvider)throw new It(nt.FAILED_PRECONDITION,"SDK cache is already specified.");Do("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const o=i._freezeSettings(),u=new Y;return Sv(n,u,new S(u,o.cacheSizeBytes,e?.forceOwnership))}(e._delegate,{forceOwnership:n})}enableMultiTabIndexedDbPersistence(e){return function M0(i){Py(i=Lr(i,ds));const e=mo(i);if(e._uninitializedComponentsProvider)throw new It(nt.FAILED_PRECONDITION,"SDK cache is already specified.");Do("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const n=i._freezeSettings(),o=new Y;return Sv(e,o,new B(o,n.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function x0(i){if(i._initialized&&!i._terminated)throw new It(nt.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Ks;return i._queue.enqueueAndForgetEvenWhileRestricted((0,Re.Z)(function*(){try{yield(n=(0,Re.Z)(function*(u){if(!he.D())return Promise.resolve();const p=u+"main";yield he.delete(p)}),function o(u){return n.apply(this,arguments)})(cc(i._databaseId,i._persistenceKey)),e.resolve()}catch(n){e.reject(n)}var n})),e.promise}(e._delegate)}}class cp{constructor(e,n,o){this._delegate=n,this._persistenceProvider=o,this.INTERNAL={delete:()=>this.terminate()},e instanceof wa||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const n=this._delegate._getSettings();!e.merge&&n.host!==e.host&&Do("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},n),e)).merge,this._delegate._setSettings(e)}useEmulator(e,n,o={}){!function pg(i,e,n,o={}){var u;const p=(i=Lr(i,ah))._getSettings(),I=`${e}:${n}`;if("firestore.googleapis.com"!==p.host&&p.host!==I&&Do("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),i._setSettings(Object.assign(Object.assign({},p),{host:I,ssl:!1})),o.mockUserToken){let M,U;if("string"==typeof o.mockUserToken)M=o.mockUserToken,U=Yr.MOCK_USER;else{M=(0,$e.Sg)(o.mockUserToken,null===(u=i._app)||void 0===u?void 0:u.options.projectId);const W=o.mockUserToken.sub||o.mockUserToken.user_id;if(!W)throw new It(nt.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");U=new Yr(W)}i._authCredentials=new $l(new Ba(M,U))}}(this._delegate,e,n,o)}enableNetwork(){return function Nv(i){return function hu(i){return i.asyncQueue.enqueue((0,Re.Z)(function*(){const e=yield gr(i),n=yield Gi(i);return e.setNetworkEnabled(!0),function(u){const p=Wt(u);return p.C_.delete(0),Wp(p)}(n)}))}(mo(i=Lr(i,ds)))}(this._delegate)}disableNetwork(){return function Pv(i){return function Ko(i){return i.asyncQueue.enqueue((0,Re.Z)(function*(){const e=yield gr(i),n=yield Gi(i);return e.setNetworkEnabled(!1),(o=(0,Re.Z)(function*(p){const I=Wt(p);I.C_.add(0),yield gc(I),I.M_.set("Offline")}),function u(p){return o.apply(this,arguments)})(n);var o}))}(mo(i=Lr(i,ds)))}(this._delegate)}enablePersistence(e){let n=!1,o=!1;return e&&(n=!!e.synchronizeTabs,o=!!e.experimentalForceOwningTab,Zo("synchronizeTabs",n,"experimentalForceOwningTab",o)),n?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,o)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function Rv(i){return function(n){const o=new Ks;return n.asyncQueue.enqueueAndForget((0,Re.Z)(function*(){return function lr(i,e){return lg.apply(this,arguments)}(yield gi(n),o)})),o.promise}(mo(i=Lr(i,ds)))}(this._delegate)}onSnapshotsInSync(e){return function zv(i,e){return function xs(i,e){const n=new pe(e);return i.asyncQueue.enqueueAndForget((0,Re.Z)(function*(){return u=yield Hs(i),p=n,Wt(u).q_.add(p),void p.next();var u,p})),()=>{n.Na(),i.asyncQueue.enqueueAndForget((0,Re.Z)(function*(){return u=yield Hs(i),p=n,void Wt(u).q_.delete(p);var u,p}))}}(mo(i=Lr(i,ds)),_g(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new It("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new dp(this,ip(this._delegate,e))}catch(n){throw qa(n,"collection()","Firestore.collection()")}}doc(e){try{return new Hc(this,sp(this._delegate,e))}catch(n){throw qa(n,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Qs(this,function v_(i,e){if(i=Lr(i,ah),Yo("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new It(nt.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new ga(i,null,(o=e,new js(or.emptyPath(),o)));var o}(this._delegate,e))}catch(n){throw qa(n,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function Jv(i,e,n){i=Lr(i,ds);const o=Object.assign(Object.assign({},V_),n);return function(p){if(p.maxAttempts<1)throw new It(nt.INVALID_ARGUMENT,"Max attempts must be at least 1")}(o),function(p,I,M){const U=new Ks;return p.asyncQueue.enqueueAndForget((0,Re.Z)(function*(){const W=yield function io(i){return Ir(i).then(e=>e.datastore)}(p);new ut(p.asyncQueue,W,M,I,U).run()})),U.promise}(mo(i),u=>e(new Qv(i,u)),o)}(this._delegate,n=>e(new qy(this,n)))}batch(){return mo(this._delegate),new d0(new Gy(this._delegate,e=>Dg(this._delegate,e)))}loadBundle(e){return function ZI(i,e){const n=mo(i=Lr(i,ds)),o=new E_;return function ml(i,e,n,o){const u=function(I,M){let U;return U="string"==typeof I?ld().encode(I):I,ee=function(ee,fe){if(ee instanceof Uint8Array)return ae(ee,void 0);if(ee instanceof ArrayBuffer)return ae(new Uint8Array(ee),void 0);if(ee instanceof ReadableStream)return ee.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(U),new Ce(ee,M);var ee}(n,Uf(e));i.asyncQueue.enqueueAndForget((0,Re.Z)(function*(){!function a(i,e,n){const o=Wt(i);var u;(u=(0,Re.Z)(function*(I,M,U){try{const W=yield M.getMetadata();if(yield function(Vt,Kt){const Jt=Wt(Vt),zn=us(Kt.createTime);return Jt.persistence.runTransaction("hasNewerBundle","readonly",rr=>Jt.Kr.getBundleMetadata(rr,Kt.id)).then(rr=>!!rr&&rr.createTime.compareTo(zn)>=0)}(I.localStore,W))return yield M.close(),U._completeWith({taskState:"Success",documentsLoaded:(Vt=W).totalDocuments,bytesLoaded:Vt.totalBytes,totalDocuments:Vt.totalDocuments,totalBytes:Vt.totalBytes}),Promise.resolve(new Set);U._updateProgress(fm(W));const ee=new p_(W,I.localStore,M.serializer);let fe=yield M.Ma();for(;fe;){const tt=yield ee.ea(fe);tt&&U._updateProgress(tt),fe=yield M.Ma()}const Me=yield ee.complete();return yield Fl(I,Me.ra,void 0),yield function(Vt,Kt){const Jt=Wt(Vt);return Jt.persistence.runTransaction("Save bundle","readwrite",zn=>Jt.Kr.saveBundleMetadata(zn,Kt))}(I.localStore,W),U._completeWith(Me.progress),Promise.resolve(Me.na)}catch(W){return Do("SyncEngine",`Loading bundle failed with ${W}`),U._failWith(W),Promise.resolve(new Set)}var Vt}),function p(I,M,U){return u.apply(this,arguments)})(o,e,n).then(u=>{o.sharedClientState.notifyBundleLoaded(u)})}(yield gi(i),u,o)}))}(n,i._databaseId,e,o),o}(this._delegate,e)}namedQuery(e){return function Ov(i,e){return function Ys(i,e){return i.asyncQueue.enqueue((0,Re.Z)(function*(){return function(o,u){const p=Wt(o);return p.persistence.runTransaction("Get named query","readonly",I=>p.Kr.getNamedQuery(I,u))}(yield br(i),e)}))}(mo(i=Lr(i,ds)),e).then(n=>n?new ga(i,null,n.query):null)}(this._delegate,e).then(n=>n?new Qs(this,n):null)}}class j_ extends Fy{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ag(new bd(e))}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return Hc.forKey(n,this.firestore,null)}}class qy{constructor(e,n){this._firestore=e,this._delegate=n,this._userDataWriter=new j_(e)}get(e){const n=af(e);return this._delegate.get(n).then(o=>new Fm(this._firestore,new ch(this._firestore._delegate,this._userDataWriter,o._key,o._document,o.metadata,n.converter)))}set(e,n,o){const u=af(e);return o?(U_("Transaction.set",o),this._delegate.set(u,n,o)):this._delegate.set(u,n),this}update(e,n,o,...u){const p=af(e);return 2===arguments.length?this._delegate.update(p,n):this._delegate.update(p,n,o,...u),this}delete(e){const n=af(e);return this._delegate.delete(n),this}}class d0{constructor(e){this._delegate=e}set(e,n,o){const u=af(e);return o?(U_("WriteBatch.set",o),this._delegate.set(u,n,o)):this._delegate.set(u,n),this}update(e,n,o,...u){const p=af(e);return 2===arguments.length?this._delegate.update(p,n):this._delegate.update(p,n,o,...u),this}delete(e){const n=af(e);return this._delegate.delete(n),this}commit(){return this._delegate.commit()}}class sf{constructor(e,n,o){this._firestore=e,this._userDataWriter=n,this._delegate=o}fromFirestore(e,n){const o=new xm(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Sg(this._firestore,o),n??{})}toFirestore(e,n){return n?this._delegate.toFirestore(e,n):this._delegate.toFirestore(e)}static getInstance(e,n){const o=sf.INSTANCES;let u=o.get(e);u||(u=new WeakMap,o.set(e,u));let p=u.get(n);return p||(p=new sf(e,new j_(e),n),u.set(n,p)),p}}sf.INSTANCES=new WeakMap;class Hc{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new j_(e)}static forPath(e,n,o){if(e.length%2!=0)throw new It("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new Hc(n,new Ts(n._delegate,o,new Qt(e)))}static forKey(e,n,o){return new Hc(n,new Ts(n._delegate,o,e))}get id(){return this._delegate.id}get parent(){return new dp(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new dp(this.firestore,ip(this._delegate,e))}catch(n){throw qa(n,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,$e.m9)(e))instanceof Ts&&gg(this._delegate,e)}set(e,n){n=U_("DocumentReference.set",n);try{return n?Gv(this._delegate,e,n):Gv(this._delegate,e)}catch(o){throw qa(o,"setDoc()","DocumentReference.set()")}}update(e,n,...o){try{return 1===arguments.length?$v(this._delegate,e):$v(this._delegate,e,n,...o)}catch(u){throw qa(u,"updateDoc()","DocumentReference.update()")}}delete(){return function F_(i){return Dg(Lr(i.firestore,ds),[new Su(i._key,xi.none())])}(this._delegate)}onSnapshot(...e){const n=H_(e),o=Gc(e,u=>new Fm(this.firestore,new ch(this.firestore._delegate,this._userDataWriter,u._key,u._document,u.metadata,this._delegate.converter)));return By(this._delegate,n,o)}get(e){let n;return n="cache"===e?.source?function x_(i){i=Lr(i,Ts);const e=Lr(i.firestore,ds),n=mo(e),o=new rf(e);return function un(i,e){const n=new Ks;return i.asyncQueue.enqueueAndForget((0,Re.Z)(function*(){return(o=(0,Re.Z)(function*(p,I,M){try{const U=yield function(ee,fe){const Me=Wt(ee);return Me.persistence.runTransaction("read document","readonly",tt=>Me.localDocuments.getDocument(tt,fe))}(p,I);U.isFoundDocument()?M.resolve(U):U.isNoDocument()?M.resolve(null):M.reject(new It(nt.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(U){const W=eh(U,`Failed to get document '${I} from cache`);M.reject(W)}}),function u(p,I,M){return o.apply(this,arguments)})(yield br(i),e,n);var o})),n.promise}(n,i._key).then(u=>new ch(e,o,i._key,u,new tf(null!==u&&u.hasLocalMutations,!0),i.converter))}(this._delegate):"server"===e?.source?function k_(i){i=Lr(i,Ts);const e=Lr(i.firestore,ds);return Tn(mo(e),i._key,{source:"server"}).then(n=>Uy(e,i,n))}(this._delegate):function Ly(i){i=Lr(i,Ts);const e=Lr(i.firestore,ds);return Tn(mo(e),i._key).then(n=>Uy(e,i,n))}(this._delegate),n.then(o=>new Fm(this.firestore,new ch(this.firestore._delegate,this._userDataWriter,o._key,o._document,o.metadata,this._delegate.converter)))}withConverter(e){return new Hc(this.firestore,this._delegate.withConverter(e?sf.getInstance(this.firestore,e):null))}}function qa(i,e,n){return i.message=i.message.replace(e,n),i}function H_(i){for(const e of i)if("object"==typeof e&&!Wy(e))return e;return{}}function Gc(i,e){var n,o;let u;return u=Wy(i[0])?i[0]:Wy(i[1])?i[1]:"function"==typeof i[0]?{next:i[0],error:i[1],complete:i[2]}:{next:i[1],error:i[2],complete:i[3]},{next:p=>{u.next&&u.next(e(p))},error:null===(n=u.error)||void 0===n?void 0:n.bind(u),complete:null===(o=u.complete)||void 0===o?void 0:o.bind(u)}}class Fm{constructor(e,n){this._firestore=e,this._delegate=n}get ref(){return new Hc(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,n){return this._delegate.get(e,n)}isEqual(e){return M_(this._delegate,e._delegate)}}class Sg extends Fm{data(e){const n=this._delegate.data(e);return function Wn(i,e){i||on()}(void 0!==n),n}}class Qs{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new j_(e)}where(e,n,o){try{return new Qs(this.firestore,lp(this._delegate,function k0(i,e,n){const o=e,u=A_("where",i);return Am._create(u,o,n)}(e,n,o)))}catch(u){throw qa(u,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,n){try{return new Qs(this.firestore,lp(this._delegate,function R_(i,e="asc"){const n=e,o=A_("orderBy",i);return Sm._create(o,n)}(e,n)))}catch(o){throw qa(o,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Qs(this.firestore,lp(this._delegate,function Nm(i){return Zh("limit",i),Rm._create("limit",i,"F")}(e)))}catch(n){throw qa(n,"limit()","Query.limit()")}}limitToLast(e){try{return new Qs(this.firestore,lp(this._delegate,function Bv(i){return Zh("limitToLast",i),Rm._create("limitToLast",i,"L")}(e)))}catch(n){throw qa(n,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new Qs(this.firestore,lp(this._delegate,function Pm(...i){return N_._create("startAt",i,!0)}(...e)))}catch(n){throw qa(n,"startAt()","Query.startAt()")}}startAfter(...e){try{return new Qs(this.firestore,lp(this._delegate,function F0(...i){return N_._create("startAfter",i,!1)}(...e)))}catch(n){throw qa(n,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new Qs(this.firestore,lp(this._delegate,function L0(...i){return P_._create("endBefore",i,!1)}(...e)))}catch(n){throw qa(n,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new Qs(this.firestore,lp(this._delegate,function V0(...i){return P_._create("endAt",i,!0)}(...e)))}catch(n){throw qa(n,"endAt()","Query.endAt()")}}isEqual(e){return mg(this._delegate,e._delegate)}get(e){let n;return n="cache"===e?.source?function Hv(i){i=Lr(i,ga);const e=Lr(i.firestore,ds),n=mo(e),o=new rf(e);return function Fn(i,e){const n=new Ks;return i.asyncQueue.enqueueAndForget((0,Re.Z)(function*(){return(o=(0,Re.Z)(function*(p,I,M){try{const U=yield Hp(p,I,!0),W=new Wa(I,U.ls),ee=W.ca(U.documents),fe=W.applyChanges(ee,!1);M.resolve(fe.snapshot)}catch(U){const W=eh(U,`Failed to execute query '${I} against cache`);M.reject(W)}}),function u(p,I,M){return o.apply(this,arguments)})(yield br(i),e,n);var o})),n.promise}(n,i._query).then(u=>new nf(e,o,i,u))}(this._delegate):"server"===e?.source?function z0(i){i=Lr(i,ga);const e=Lr(i.firestore,ds),n=mo(e),o=new rf(e);return Dr(n,i._query,{source:"server"}).then(u=>new nf(e,o,i,u))}(this._delegate):function Vy(i){i=Lr(i,ga);const e=Lr(i.firestore,ds),n=mo(e),o=new rf(e);return Fv(i._query),Dr(n,i._query).then(u=>new nf(e,o,i,u))}(this._delegate),n.then(o=>new Vu(this.firestore,new nf(this.firestore._delegate,this._userDataWriter,this._delegate,o._snapshot)))}onSnapshot(...e){const n=H_(e),o=Gc(e,u=>new Vu(this.firestore,new nf(this.firestore._delegate,this._userDataWriter,this._delegate,u._snapshot)));return By(this._delegate,n,o)}withConverter(e){return new Qs(this.firestore,this._delegate.withConverter(e?sf.getInstance(this.firestore,e):null))}}class $c{constructor(e,n){this._firestore=e,this._delegate=n}get type(){return this._delegate.type}get doc(){return new Sg(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class Vu{constructor(e,n){this._firestore=e,this._delegate=n}get query(){return new Qs(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new Sg(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(n=>new $c(this._firestore,n))}forEach(e,n){this._delegate.forEach(o=>{e.call(n,new Sg(this._firestore,o))})}isEqual(e){return M_(this._delegate,e._delegate)}}class dp extends Qs{constructor(e,n){super(e,n),this.firestore=e,this._delegate=n}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Hc(this.firestore,e):null}doc(e){try{return new Hc(this.firestore,void 0===e?sp(this._delegate):sp(this._delegate,e))}catch(n){throw qa(n,"doc()","CollectionReference.doc()")}}add(e){return function L_(i,e){const n=Lr(i.firestore,ds),o=sp(i),u=wg(i.converter,e);return Dg(n,[uh(vc(i.firestore),"addDoc",o._key,u,null!==i.converter,{}).toMutation(o._key,xi.exists(!1))]).then(()=>o)}(this._delegate,e).then(n=>new Hc(this.firestore,n))}isEqual(e){return gg(this._delegate,e._delegate)}withConverter(e){return new dp(this.firestore,this._delegate.withConverter(e?sf.getInstance(this.firestore,e):null))}}function af(i){return Lr(i,Ts)}class Ky{constructor(...e){this._delegate=new lh(...e)}static documentId(){return new Ky(vi.keyField().canonicalString())}isEqual(e){return(e=(0,$e.m9)(e))instanceof lh&&this._delegate._internalPath.isEqual(e._internalPath)}}class hp{constructor(e){this._delegate=e}static serverTimestamp(){const e=function e0(){return new Jh("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new hp(e)}static delete(){const e=function Xv(){return new wd("deleteField")}();return e._methodName="FieldValue.delete",new hp(e)}static arrayUnion(...e){const n=function t0(...i){return new yg("arrayUnion",i)}(...e);return n._methodName="FieldValue.arrayUnion",new hp(n)}static arrayRemove(...e){const n=function n0(...i){return new vg("arrayRemove",i)}(...e);return n._methodName="FieldValue.arrayRemove",new hp(n)}static increment(e){const n=function B_(i){return new Ig("increment",i)}(e);return n._methodName="FieldValue.increment",new hp(n)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const rI={Firestore:cp,GeoPoint:Lu,Timestamp:Ur,Blob:Ag,Transaction:qy,WriteBatch:d0,DocumentReference:Hc,DocumentSnapshot:Fm,Query:Qs,QueryDocumentSnapshot:Sg,QuerySnapshot:Vu,CollectionReference:dp,FieldPath:Ky,FieldValue:hp,setLogLevel:function nI(i){!function il(i){Va.setLogLevel(i)}(i)},CACHE_SIZE_UNLIMITED:-1};function Zy(i,e){return function sI(i,e=Te.z){return new ke.y(n=>{let o;return null!=e?e.schedule(()=>{o=i.onSnapshot({includeMetadataChanges:!0},n)}):o=i.onSnapshot({includeMetadataChanges:!0},n),()=>{o?.()}})}(i,e)}function Qy(i,e){return Zy(i,e).pipe((0,st.U)(n=>({payload:n,type:"query"})))}!function Yy(i){(function iI(i,e){i.INTERNAL.registerComponent(new He.wA("firestore-compat",n=>{const o=n.getProvider("app-compat").getImmediate(),u=n.getProvider("firestore").getImmediate();return e(o,u)},"PUBLIC").setServiceProps(Object.assign({},rI)))})(i,(e,n)=>new cp(e,n,new c0)),i.registerVersion("@firebase/firestore-compat","0.3.20")}(jt.Z),$(7142);class Jy{ref;afs;constructor(e,n){this.ref=e,this.afs=n}set(e,n){return this.ref.set(e,n)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,n){const o=this.ref.collection(e),{ref:u,query:p}=rv(o,n);return new f0(u,p,this.afs)}snapshotChanges(){return function oI(i,e){return Zy(i,e).pipe((0,ye.O)(void 0),ht(),(0,st.U)(n=>{const[o,u]=n;return u.exists?o?.exists?{payload:u,type:"modified"}:{payload:u,type:"added"}:{payload:u,type:"removed"}}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(le.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,st.U)(({payload:n})=>e.idField?{...n.data(),[e.idField]:n.id}:n.data()))}get(e){return(0,T.D)(this.ref.get(e)).pipe(le.iC)}}function Lm(i,e){return Qy(i,e).pipe((0,ye.O)(void 0),ht(),(0,st.U)(n=>{const[o,u]=n,p=u.payload.docChanges(),I=p.map(M=>({type:M.type,payload:M}));return o&&JSON.stringify(o.payload.metadata)!==JSON.stringify(u.payload.metadata)&&u.payload.docs.forEach((M,U)=>{const W=p.find(fe=>fe.doc.ref.isEqual(M.ref)),ee=o?.payload.docs.find(fe=>fe.ref.isEqual(M.ref));W&&JSON.stringify(W.doc.metadata)===JSON.stringify(M.metadata)||!W&&ee&&JSON.stringify(ee.metadata)===JSON.stringify(M.metadata)||I.push({type:"modified",payload:{oldIndex:U,newIndex:U,type:"modified",doc:M}})}),I}))}function Vm(i,e,n){return Lm(i,n).pipe((0,Et.R)((o,u)=>function aI(i,e,n){return e.forEach(o=>{n.indexOf(o.type)>-1&&(i=function h0(i,e){switch(e.type){case"added":if(!i[e.newIndex]||!i[e.newIndex].doc.ref.isEqual(e.doc.ref))return $_(i,e.newIndex,0,e);break;case"modified":if(null==i[e.oldIndex]||i[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const n=i.slice();return n.splice(e.oldIndex,1),n.splice(e.newIndex,0,e),n}return $_(i,e.newIndex,1,e)}break;case"removed":if(i[e.oldIndex]&&i[e.oldIndex].doc.ref.isEqual(e.doc.ref))return $_(i,e.oldIndex,1)}return i}(i,o))}),i}(o,u.map(p=>p.payload),e),[]),(0,mt.x)(),(0,st.U)(o=>o.map(u=>({type:u.type,payload:u}))))}function $_(i,e,n,...o){const u=i.slice();return u.splice(e,n,...o),u}function Xy(i){return(!i||0===i.length)&&(i=["added","removed","modified"]),i}class f0{ref;query;afs;constructor(e,n,o){this.ref=e,this.query=n,this.afs=o}stateChanges(e){let n=Lm(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(n=n.pipe((0,st.U)(o=>o.filter(u=>e.indexOf(u.type)>-1)))),n.pipe((0,ye.O)(void 0),ht(),(0,Ct.h)(([o,u])=>u.length>0||!o),(0,st.U)(([,o])=>o),le.iC)}auditTrail(e){return this.stateChanges(e).pipe((0,Et.R)((n,o)=>[...n,...o],[]))}snapshotChanges(e){const n=Xy(e);return Vm(this.query,n,this.afs.schedulers.outsideAngular).pipe(le.iC)}valueChanges(e={}){return Qy(this.query,this.afs.schedulers.outsideAngular).pipe((0,st.U)(n=>n.payload.docs.map(o=>e.idField?{...o.data(),[e.idField]:o.id}:o.data())),le.iC)}get(e){return(0,T.D)(this.query.get(e)).pipe(le.iC)}add(e){return this.ref.add(e)}doc(e){return new Jy(this.ref.doc(e),this.afs)}}class lI{query;afs;constructor(e,n){this.query=e,this.afs=n}stateChanges(e){return e&&0!==e.length?Lm(this.query,this.afs.schedulers.outsideAngular).pipe((0,st.U)(n=>n.filter(o=>e.indexOf(o.type)>-1)),(0,Ct.h)(n=>n.length>0),le.iC):Lm(this.query,this.afs.schedulers.outsideAngular).pipe(le.iC)}auditTrail(e){return this.stateChanges(e).pipe((0,Et.R)((n,o)=>[...n,...o],[]))}snapshotChanges(e){const n=Xy(e);return Vm(this.query,n,this.afs.schedulers.outsideAngular).pipe(le.iC)}valueChanges(e={}){return Qy(this.query,this.afs.schedulers.outsideAngular).pipe((0,st.U)(o=>o.payload.docs.map(u=>e.idField?{[e.idField]:u.id,...u.data()}:u.data())),le.iC)}get(e){return(0,T.D)(this.query.get(e)).pipe(le.iC)}}const ev=new _e.OlP("angularfire2.enableFirestorePersistence"),z_=new _e.OlP("angularfire2.firestore.persistenceSettings"),tv=new _e.OlP("angularfire2.firestore.settings"),nv=new _e.OlP("angularfire2.firestore.use-emulator");function rv(i,e=(n=>n)){return{query:e(i),ref:i}}let p0=(()=>{class i{schedulers;firestore;persistenceEnabled$;constructor(n,o,u,p,I,M,U,W,ee,fe,Me,tt,Vt,Kt,Jt,zn,rr){this.schedulers=U;const Hn=(0,Oe.on)(n,M,o),jr=ee;fe&&(0,Ne.nw)(Hn,M,Me,Vt,Kt,Jt,tt,zn),[this.firestore,this.persistenceEnabled$]=(0,Oe.cc)(`${Hn.name}.firestore`,"AngularFirestore",Hn.name,()=>{const mi=M.runOutsideAngular(()=>Hn.firestore());if(p&&mi.settings(p),jr&&mi.useEmulator(...jr),u&&!(0,E.PM)(I)){const Ei=()=>{try{return(0,T.D)(mi.enablePersistence(W||void 0).then(()=>!0,()=>!1))}catch(Po){return typeof console<"u"&&console.warn(Po),(0,qe.of)(!1)}};return[mi,M.runOutsideAngular(Ei)]}return[mi,(0,qe.of)(!1)]},[p,jr,u])}collection(n,o){let u;u="string"==typeof n?this.firestore.collection(n):n;const{ref:p,query:I}=rv(u,o),M=this.schedulers.ngZone.run(()=>p);return new f0(M,I,this)}collectionGroup(n,o){const u=o||(I=>I),p=this.firestore.collectionGroup(n);return new lI(u(p),this)}doc(n){let o;o="string"==typeof n?this.firestore.doc(n):n;const u=this.schedulers.ngZone.run(()=>o);return new Jy(u,this)}createId(){return this.firestore.collection("_").doc().id}static \u0275fac=function(o){return new(o||i)(_e.LFG(Oe.Dh),_e.LFG(Oe.xv,8),_e.LFG(ev,8),_e.LFG(tv,8),_e.LFG(_e.Lbi),_e.LFG(_e.R0b),_e.LFG(le.HU),_e.LFG(z_,8),_e.LFG(nv,8),_e.LFG(Ne.zQ,8),_e.LFG(Ne.Qv,8),_e.LFG(Ne.L6,8),_e.LFG(Ne._Q,8),_e.LFG(Ne.rT,8),_e.LFG(Ne.lh,8),_e.LFG(Ne.f7,8),_e.LFG(le.Rf,8))};static \u0275prov=_e.Yz7({token:i,factory:i.\u0275fac,providedIn:"any"})}return i})()},7217:(Yt,Je,$)=>{$.d(Je,{Dh:()=>T,GT:()=>Te,cc:()=>st,hO:()=>ht,on:()=>ye,pX:()=>Ne,xv:()=>qe});var E=$(5879),_e=$(8326),le=$(7142);const Oe=["ngOnDestroy"],Ne=(bt,jt,Re,me={})=>new Proxy(bt,{get:(He,Pe)=>Re.runOutsideAngular(()=>{if(bt[Pe])return me?.spy?.get&&me.spy.get(Pe,bt[Pe]),bt[Pe];if(Oe.indexOf(Pe)>-1)return()=>{};const $e=jt.toPromise().then(ot=>{const ft=ot?.[Pe];return"function"==typeof ft?ft.bind(ot):ft?.then?ft.then(de=>Re.run(()=>de)):Re.run(()=>ft)});return new Proxy(()=>{},{get:(ot,ft)=>$e[ft],apply:(ot,ft,de)=>$e.then(Ot=>{const wt=Ot?.(...de);return me?.spy?.apply&&me.spy.apply(Pe,de,wt),wt})})})}),Te=(bt,jt)=>{jt.forEach(Re=>{Object.getOwnPropertyNames(Re.prototype||Re).forEach(me=>{Object.defineProperty(bt.prototype,me,Object.getOwnPropertyDescriptor(Re.prototype||Re,me))})})};class ke{constructor(jt){return jt}}const T=new E.OlP("angularfire2.app.options"),qe=new E.OlP("angularfire2.app.name");function ye(bt,jt,Re){const He="object"==typeof Re&&Re||{};He.name=He.name||"string"==typeof Re&&Re||"[DEFAULT]";const $e=le.Z.apps.filter(ot=>ot&&ot.name===He.name)[0]||jt.runOutsideAngular(()=>le.Z.initializeApp(bt,He));try{if(JSON.stringify(bt)!==JSON.stringify($e.options)){const ot=!!module.hot;Ie("error",`${$e.name} Firebase App already initialized with different options${ot?", you may need to reload as Firebase is not HMR aware.":"."}`)}}catch{}return new ke($e)}const Ie=(bt,...jt)=>{(0,E.X6Q)()&&typeof console<"u"&&console[bt](...jt)},Ve={provide:ke,useFactory:ye,deps:[T,E.R0b,[new E.FiY,qe]]};let ht=(()=>{class bt{static initializeApp(Re,me){return{ngModule:bt,providers:[{provide:T,useValue:Re},{provide:qe,useValue:me}]}}constructor(Re){le.Z.registerVersion("angularfire",_e.q4.full,"core"),le.Z.registerVersion("angularfire",_e.q4.full,"app-compat"),le.Z.registerVersion("angular",E.q4F.full,Re.toString())}static \u0275fac=function(me){return new(me||bt)(E.LFG(E.Lbi))};static \u0275mod=E.oAB({type:bt});static \u0275inj=E.cJS({providers:[Ve]})}return bt})();function st(bt,jt,Re,me,He){const[,Pe,$e]=globalThis.\u0275AngularfireInstanceCache.find(ot=>ot[0]===bt)||[];if(Pe)return function Et(bt,jt){try{return bt.toString()===jt.toString()}catch{return bt===jt}}(He,$e)||(Ct("error",`${jt} was already initialized on the ${Re} Firebase App with different settings.${mt?" You may need to reload as Firebase is not HMR aware.":""}`),Ct("warn",{is:He,was:$e})),Pe;{const ot=me();return globalThis.\u0275AngularfireInstanceCache.push([bt,ot,He]),ot}}const mt=typeof module<"u"&&!!module.hot,Ct=(bt,...jt)=>{(0,E.X6Q)()&&typeof console<"u"&&console[bt](...jt)};globalThis.\u0275AngularfireInstanceCache||=[]},8326:(Yt,Je,$)=>{$.d(Je,{q4:()=>Et,iC:()=>Qn,HU:()=>$e,Rf:()=>jt});var E=$(5879),_e=$(534);(0,_e.registerVersion)("firebase","10.5.1","app");var Ne=$(1954),ke=$(2631);const qe=new class T extends ke.v{}(class Te extends Ne.o{constructor(Bt,be){super(Bt,be),this.scheduler=Bt,this.work=be}schedule(Bt,be=0){return be>0?super.schedule(Bt,be):(this.delay=be,this.state=Bt,this.scheduler.flush(this),this)}execute(Bt,be){return be>0||this.closed?super.execute(Bt,be):this._execute(Bt,be)}requestAsyncId(Bt,be,Se=0){return null!=Se&&Se>0||null==Se&&this.delay>0?super.requestAsyncId(Bt,be,Se):(Bt.flush(this),0)}});var Ie=$(6321),Ve=$(9397),ht=$(5137),st=$(3093);const Et=new E.GfV("ANGULARFIRE2_VERSION");class jt{constructor(){return((tn,Bt)=>{const be=(0,_e.getApps)(),Se=[];return be.forEach(Ke=>{Ke.container.getProvider(tn).instances.forEach(Ue=>{Se.includes(Ue)||Se.push(Ue)})}),Se})(Re)}}const Re="app-check";function me(){}class He{zone;delegate;constructor(Bt,be=qe){this.zone=Bt,this.delegate=be}now(){return this.delegate.now()}schedule(Bt,be,Se){const Ke=this.zone;return this.delegate.schedule(function(Ue){Ke.runGuarded(()=>{Bt.apply(this,[Ue])})},be,Se)}}class Pe{zone;task=null;constructor(Bt){this.zone=Bt}call(Bt,be){const Se=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",me,{},me,me)),be.pipe((0,Ve.b)({next:Se,complete:Se,error:Se})).subscribe(Bt).add(Se)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let $e=(()=>{class tn{ngZone;outsideAngular;insideAngular;constructor(be){this.ngZone=be,this.outsideAngular=be.runOutsideAngular(()=>new He(Zone.current)),this.insideAngular=be.run(()=>new He(Zone.current,Ie.z)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(Se){return new(Se||tn)(E.LFG(E.R0b))};static \u0275prov=E.Yz7({token:tn,factory:tn.\u0275fac,providedIn:"root"})}return tn})();function Qn(tn){return function On(tn){return function(be){return(be=be.lift(new Pe(tn.ngZone))).pipe((0,ht.R)(tn.outsideAngular),(0,st.Q)(tn.insideAngular))}}(function ot(){const tn=globalThis.\u0275AngularFireScheduler;if(!tn)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return tn}())(tn)}},95:(Yt,Je,$)=>{$.d(Je,{Wl:()=>Ct,Fj:()=>me,qu:()=>ko,NI:()=>Ds,u:()=>tr,sg:()=>xt,u5:()=>sa,Cf:()=>$e,JU:()=>Et,JJ:()=>an,JL:()=>mn,F:()=>Er,On:()=>na,YN:()=>ao,wV:()=>ks,_:()=>Cr,UX:()=>ka,EJ:()=>yi,kI:()=>de,_Y:()=>vo,Kr:()=>Zi});var E=$(5879),_e=$(6814),le=$(2459),Oe=$(5592),Ne=$(7453),Te=$(4829),ke=$(9940),T=$(8251),qe=$(7400),ye=$(2714),Ve=$(7398);let ht=(()=>{class q{constructor(j,oe){this._renderer=j,this._elementRef=oe,this.onChange=Ae=>{},this.onTouched=()=>{}}setProperty(j,oe){this._renderer.setProperty(this._elementRef.nativeElement,j,oe)}registerOnTouched(j){this.onTouched=j}registerOnChange(j){this.onChange=j}setDisabledState(j){this.setProperty("disabled",j)}static#e=this.\u0275fac=function(oe){return new(oe||q)(E.Y36(E.Qsj),E.Y36(E.SBq))};static#t=this.\u0275dir=E.lG2({type:q})}return q})(),st=(()=>{class q extends ht{static#e=this.\u0275fac=function(){let j;return function(Ae){return(j||(j=E.n5z(q)))(Ae||q)}}();static#t=this.\u0275dir=E.lG2({type:q,features:[E.qOj]})}return q})();const Et=new E.OlP("NgValueAccessor"),mt={provide:Et,useExisting:(0,E.Gpc)(()=>Ct),multi:!0};let Ct=(()=>{class q extends st{writeValue(j){this.setProperty("checked",j)}static#e=this.\u0275fac=function(){let j;return function(Ae){return(j||(j=E.n5z(q)))(Ae||q)}}();static#t=this.\u0275dir=E.lG2({type:q,selectors:[["input","type","checkbox","formControlName",""],["input","type","checkbox","formControl",""],["input","type","checkbox","ngModel",""]],hostBindings:function(oe,Ae){1&oe&&E.NdJ("change",function(Sn){return Ae.onChange(Sn.target.checked)})("blur",function(){return Ae.onTouched()})},features:[E._Bn([mt]),E.qOj]})}return q})();const bt={provide:Et,useExisting:(0,E.Gpc)(()=>me),multi:!0},Re=new E.OlP("CompositionEventMode");let me=(()=>{class q extends ht{constructor(j,oe,Ae){super(j,oe),this._compositionMode=Ae,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function jt(){const q=(0,_e.q)()?(0,_e.q)().getUserAgent():"";return/android (\d+)/.test(q.toLowerCase())}())}writeValue(j){this.setProperty("value",j??"")}_handleInput(j){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(j)}_compositionStart(){this._composing=!0}_compositionEnd(j){this._composing=!1,this._compositionMode&&this.onChange(j)}static#e=this.\u0275fac=function(oe){return new(oe||q)(E.Y36(E.Qsj),E.Y36(E.SBq),E.Y36(Re,8))};static#t=this.\u0275dir=E.lG2({type:q,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(oe,Ae){1&oe&&E.NdJ("input",function(Sn){return Ae._handleInput(Sn.target.value)})("blur",function(){return Ae.onTouched()})("compositionstart",function(){return Ae._compositionStart()})("compositionend",function(Sn){return Ae._compositionEnd(Sn.target.value)})},features:[E._Bn([bt]),E.qOj]})}return q})();function He(q){return null==q||("string"==typeof q||Array.isArray(q))&&0===q.length}function Pe(q){return null!=q&&"number"==typeof q.length}const $e=new E.OlP("NgValidators"),ot=new E.OlP("NgAsyncValidators"),ft=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class de{static min(K){return function Ot(q){return K=>{if(He(K.value)||He(q))return null;const j=parseFloat(K.value);return!isNaN(j)&&j<q?{min:{min:q,actual:K.value}}:null}}(K)}static max(K){return function wt(q){return K=>{if(He(K.value)||He(q))return null;const j=parseFloat(K.value);return!isNaN(j)&&j>q?{max:{max:q,actual:K.value}}:null}}(K)}static required(K){return function Qn(q){return He(q.value)?{required:!0}:null}(K)}static requiredTrue(K){return function On(q){return!0===q.value?null:{required:!0}}(K)}static email(K){return function Pr(q){return He(q.value)||ft.test(q.value)?null:{email:!0}}(K)}static minLength(K){return function mr(q){return K=>He(K.value)||!Pe(K.value)?null:K.value.length<q?{minlength:{requiredLength:q,actualLength:K.value.length}}:null}(K)}static maxLength(K){return function tn(q){return K=>Pe(K.value)&&K.value.length>q?{maxlength:{requiredLength:q,actualLength:K.value.length}}:null}(K)}static pattern(K){return function Bt(q){if(!q)return be;let K,j;return"string"==typeof q?(j="","^"!==q.charAt(0)&&(j+="^"),j+=q,"$"!==q.charAt(q.length-1)&&(j+="$"),K=new RegExp(j)):(j=q.toString(),K=q),oe=>{if(He(oe.value))return null;const Ae=oe.value;return K.test(Ae)?null:{pattern:{requiredPattern:j,actualValue:Ae}}}}(K)}static nullValidator(K){return null}static compose(K){return St(K)}static composeAsync(K){return Ut(K)}}function be(q){return null}function Se(q){return null!=q}function Ke(q){return(0,E.QGY)(q)?(0,le.D)(q):q}function Fe(q){let K={};return q.forEach(j=>{K=null!=j?{...K,...j}:K}),0===Object.keys(K).length?null:K}function Ue(q,K){return K.map(j=>j(q))}function Ft(q){return q.map(K=>function Xe(q){return!q.validate}(K)?K:j=>K.validate(j))}function St(q){if(!q)return null;const K=q.filter(Se);return 0==K.length?null:function(j){return Fe(Ue(j,K))}}function cr(q){return null!=q?St(Ft(q)):null}function Ut(q){if(!q)return null;const K=q.filter(Se);return 0==K.length?null:function(j){return function Ie(...q){const K=(0,ke.jO)(q),{args:j,keys:oe}=(0,Ne.D)(q),Ae=new Oe.y(nn=>{const{length:Sn}=j;if(!Sn)return void nn.complete();const Ui=new Array(Sn);let _s=Sn,Eo=Sn;for(let Lo=0;Lo<Sn;Lo++){let Ji=!1;(0,Te.Xf)(j[Lo]).subscribe((0,T.x)(nn,ns=>{Ji||(Ji=!0,Eo--),Ui[Lo]=ns},()=>_s--,void 0,()=>{(!_s||!Ji)&&(Eo||nn.next(oe?(0,ye.n)(oe,Ui):Ui),nn.complete())}))}});return K?Ae.pipe((0,qe.Z)(K)):Ae}(Ue(j,K).map(Ke)).pipe((0,Ve.U)(Fe))}}function qn(q){return null!=q?Ut(Ft(q)):null}function Zt(q,K){return null===q?[K]:Array.isArray(q)?[...q,K]:[q,K]}function Ln(q){return q._rawValidators}function An(q){return q._rawAsyncValidators}function Gn(q){return q?Array.isArray(q)?q:[q]:[]}function Ee(q,K){return Array.isArray(q)?q.includes(K):q===K}function xe(q,K){const j=Gn(K);return Gn(q).forEach(Ae=>{Ee(j,Ae)||j.push(Ae)}),j}function ze(q,K){return Gn(K).filter(j=>!Ee(q,j))}class lt{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(K){this._rawValidators=K||[],this._composedValidatorFn=cr(this._rawValidators)}_setAsyncValidators(K){this._rawAsyncValidators=K||[],this._composedAsyncValidatorFn=qn(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(K){this._onDestroyCallbacks.push(K)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(K=>K()),this._onDestroyCallbacks=[]}reset(K=void 0){this.control&&this.control.reset(K)}hasError(K,j){return!!this.control&&this.control.hasError(K,j)}getError(K,j){return this.control?this.control.getError(K,j):null}}class pt extends lt{get formDirective(){return null}get path(){return null}}class Lt extends lt{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class Un{constructor(K){this._cd=K}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let an=(()=>{class q extends Un{constructor(j){super(j)}static#e=this.\u0275fac=function(oe){return new(oe||q)(E.Y36(Lt,2))};static#t=this.\u0275dir=E.lG2({type:q,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(oe,Ae){2&oe&&E.ekj("ng-untouched",Ae.isUntouched)("ng-touched",Ae.isTouched)("ng-pristine",Ae.isPristine)("ng-dirty",Ae.isDirty)("ng-valid",Ae.isValid)("ng-invalid",Ae.isInvalid)("ng-pending",Ae.isPending)},features:[E.qOj]})}return q})(),mn=(()=>{class q extends Un{constructor(j){super(j)}static#e=this.\u0275fac=function(oe){return new(oe||q)(E.Y36(pt,10))};static#t=this.\u0275dir=E.lG2({type:q,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(oe,Ae){2&oe&&E.ekj("ng-untouched",Ae.isUntouched)("ng-touched",Ae.isTouched)("ng-pristine",Ae.isPristine)("ng-dirty",Ae.isDirty)("ng-valid",Ae.isValid)("ng-invalid",Ae.isInvalid)("ng-pending",Ae.isPending)("ng-submitted",Ae.isSubmitted)},features:[E.qOj]})}return q})();const Fi="VALID",Oi="INVALID",Li="PENDING",Vi="DISABLED";function we(q){return(ue(q)?q.validators:q)||null}function se(q,K){return(ue(K)?K.asyncValidators:q)||null}function ue(q){return null!=q&&!Array.isArray(q)&&"object"==typeof q}function Le(q,K,j){const oe=q.controls;if(!(K?Object.keys(oe):oe).length)throw new E.vHH(1e3,"");if(!oe[j])throw new E.vHH(1001,"")}function _t(q,K,j){q._forEachChild((oe,Ae)=>{if(void 0===j[Ae])throw new E.vHH(1002,"")})}class Pt{constructor(K,j){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(K),this._assignAsyncValidators(j)}get validator(){return this._composedValidatorFn}set validator(K){this._rawValidators=this._composedValidatorFn=K}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(K){this._rawAsyncValidators=this._composedAsyncValidatorFn=K}get parent(){return this._parent}get valid(){return this.status===Fi}get invalid(){return this.status===Oi}get pending(){return this.status==Li}get disabled(){return this.status===Vi}get enabled(){return this.status!==Vi}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(K){this._assignValidators(K)}setAsyncValidators(K){this._assignAsyncValidators(K)}addValidators(K){this.setValidators(xe(K,this._rawValidators))}addAsyncValidators(K){this.setAsyncValidators(xe(K,this._rawAsyncValidators))}removeValidators(K){this.setValidators(ze(K,this._rawValidators))}removeAsyncValidators(K){this.setAsyncValidators(ze(K,this._rawAsyncValidators))}hasValidator(K){return Ee(this._rawValidators,K)}hasAsyncValidator(K){return Ee(this._rawAsyncValidators,K)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(K={}){this.touched=!0,this._parent&&!K.onlySelf&&this._parent.markAsTouched(K)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(K=>K.markAllAsTouched())}markAsUntouched(K={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(j=>{j.markAsUntouched({onlySelf:!0})}),this._parent&&!K.onlySelf&&this._parent._updateTouched(K)}markAsDirty(K={}){this.pristine=!1,this._parent&&!K.onlySelf&&this._parent.markAsDirty(K)}markAsPristine(K={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(j=>{j.markAsPristine({onlySelf:!0})}),this._parent&&!K.onlySelf&&this._parent._updatePristine(K)}markAsPending(K={}){this.status=Li,!1!==K.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!K.onlySelf&&this._parent.markAsPending(K)}disable(K={}){const j=this._parentMarkedDirty(K.onlySelf);this.status=Vi,this.errors=null,this._forEachChild(oe=>{oe.disable({...K,onlySelf:!0})}),this._updateValue(),!1!==K.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...K,skipPristineCheck:j}),this._onDisabledChange.forEach(oe=>oe(!0))}enable(K={}){const j=this._parentMarkedDirty(K.onlySelf);this.status=Fi,this._forEachChild(oe=>{oe.enable({...K,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:K.emitEvent}),this._updateAncestors({...K,skipPristineCheck:j}),this._onDisabledChange.forEach(oe=>oe(!1))}_updateAncestors(K){this._parent&&!K.onlySelf&&(this._parent.updateValueAndValidity(K),K.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(K){this._parent=K}getRawValue(){return this.value}updateValueAndValidity(K={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Fi||this.status===Li)&&this._runAsyncValidator(K.emitEvent)),!1!==K.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!K.onlySelf&&this._parent.updateValueAndValidity(K)}_updateTreeValidity(K={emitEvent:!0}){this._forEachChild(j=>j._updateTreeValidity(K)),this.updateValueAndValidity({onlySelf:!0,emitEvent:K.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Vi:Fi}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(K){if(this.asyncValidator){this.status=Li,this._hasOwnPendingAsyncValidator=!0;const j=Ke(this.asyncValidator(this));this._asyncValidationSubscription=j.subscribe(oe=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(oe,{emitEvent:K})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(K,j={}){this.errors=K,this._updateControlsErrors(!1!==j.emitEvent)}get(K){let j=K;return null==j||(Array.isArray(j)||(j=j.split(".")),0===j.length)?null:j.reduce((oe,Ae)=>oe&&oe._find(Ae),this)}getError(K,j){const oe=j?this.get(j):this;return oe&&oe.errors?oe.errors[K]:null}hasError(K,j){return!!this.getError(K,j)}get root(){let K=this;for(;K._parent;)K=K._parent;return K}_updateControlsErrors(K){this.status=this._calculateStatus(),K&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(K)}_initObservables(){this.valueChanges=new E.vpe,this.statusChanges=new E.vpe}_calculateStatus(){return this._allControlsDisabled()?Vi:this.errors?Oi:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Li)?Li:this._anyControlsHaveStatus(Oi)?Oi:Fi}_anyControlsHaveStatus(K){return this._anyControls(j=>j.status===K)}_anyControlsDirty(){return this._anyControls(K=>K.dirty)}_anyControlsTouched(){return this._anyControls(K=>K.touched)}_updatePristine(K={}){this.pristine=!this._anyControlsDirty(),this._parent&&!K.onlySelf&&this._parent._updatePristine(K)}_updateTouched(K={}){this.touched=this._anyControlsTouched(),this._parent&&!K.onlySelf&&this._parent._updateTouched(K)}_registerOnCollectionChange(K){this._onCollectionChange=K}_setUpdateStrategy(K){ue(K)&&null!=K.updateOn&&(this._updateOn=K.updateOn)}_parentMarkedDirty(K){return!K&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(K){return null}_assignValidators(K){this._rawValidators=Array.isArray(K)?K.slice():K,this._composedValidatorFn=function ie(q){return Array.isArray(q)?cr(q):q||null}(this._rawValidators)}_assignAsyncValidators(K){this._rawAsyncValidators=Array.isArray(K)?K.slice():K,this._composedAsyncValidatorFn=function re(q){return Array.isArray(q)?qn(q):q||null}(this._rawAsyncValidators)}}class zt extends Pt{constructor(K,j,oe){super(we(j),se(oe,j)),this.controls=K,this._initObservables(),this._setUpdateStrategy(j),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(K,j){return this.controls[K]?this.controls[K]:(this.controls[K]=j,j.setParent(this),j._registerOnCollectionChange(this._onCollectionChange),j)}addControl(K,j,oe={}){this.registerControl(K,j),this.updateValueAndValidity({emitEvent:oe.emitEvent}),this._onCollectionChange()}removeControl(K,j={}){this.controls[K]&&this.controls[K]._registerOnCollectionChange(()=>{}),delete this.controls[K],this.updateValueAndValidity({emitEvent:j.emitEvent}),this._onCollectionChange()}setControl(K,j,oe={}){this.controls[K]&&this.controls[K]._registerOnCollectionChange(()=>{}),delete this.controls[K],j&&this.registerControl(K,j),this.updateValueAndValidity({emitEvent:oe.emitEvent}),this._onCollectionChange()}contains(K){return this.controls.hasOwnProperty(K)&&this.controls[K].enabled}setValue(K,j={}){_t(this,0,K),Object.keys(K).forEach(oe=>{Le(this,!0,oe),this.controls[oe].setValue(K[oe],{onlySelf:!0,emitEvent:j.emitEvent})}),this.updateValueAndValidity(j)}patchValue(K,j={}){null!=K&&(Object.keys(K).forEach(oe=>{const Ae=this.controls[oe];Ae&&Ae.patchValue(K[oe],{onlySelf:!0,emitEvent:j.emitEvent})}),this.updateValueAndValidity(j))}reset(K={},j={}){this._forEachChild((oe,Ae)=>{oe.reset(K?K[Ae]:null,{onlySelf:!0,emitEvent:j.emitEvent})}),this._updatePristine(j),this._updateTouched(j),this.updateValueAndValidity(j)}getRawValue(){return this._reduceChildren({},(K,j,oe)=>(K[oe]=j.getRawValue(),K))}_syncPendingControls(){let K=this._reduceChildren(!1,(j,oe)=>!!oe._syncPendingControls()||j);return K&&this.updateValueAndValidity({onlySelf:!0}),K}_forEachChild(K){Object.keys(this.controls).forEach(j=>{const oe=this.controls[j];oe&&K(oe,j)})}_setUpControls(){this._forEachChild(K=>{K.setParent(this),K._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(K){for(const[j,oe]of Object.entries(this.controls))if(this.contains(j)&&K(oe))return!0;return!1}_reduceValue(){return this._reduceChildren({},(j,oe,Ae)=>((oe.enabled||this.disabled)&&(j[Ae]=oe.value),j))}_reduceChildren(K,j){let oe=K;return this._forEachChild((Ae,nn)=>{oe=j(oe,Ae,nn)}),oe}_allControlsDisabled(){for(const K of Object.keys(this.controls))if(this.controls[K].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(K){return this.controls.hasOwnProperty(K)?this.controls[K]:null}}class hn extends zt{}const oi=new E.OlP("CallSetDisabledState",{providedIn:"root",factory:()=>Gs}),Gs="always";function Js(q,K){return[...K.path,q]}function it(q,K,j=Gs){In(q,K),K.valueAccessor.writeValue(q.value),(q.disabled||"always"===j)&&K.valueAccessor.setDisabledState?.(q.disabled),function Xn(q,K){K.valueAccessor.registerOnChange(j=>{q._pendingValue=j,q._pendingChange=!0,q._pendingDirty=!0,"change"===q.updateOn&&Or(q,K)})}(q,K),function Xs(q,K){const j=(oe,Ae)=>{K.valueAccessor.writeValue(oe),Ae&&K.viewToModelUpdate(oe)};q.registerOnChange(j),K._registerOnDestroy(()=>{q._unregisterOnChange(j)})}(q,K),function ai(q,K){K.valueAccessor.registerOnTouched(()=>{q._pendingTouched=!0,"blur"===q.updateOn&&q._pendingChange&&Or(q,K),"submit"!==q.updateOn&&q.markAsTouched()})}(q,K),function sn(q,K){if(K.valueAccessor.setDisabledState){const j=oe=>{K.valueAccessor.setDisabledState(oe)};q.registerOnDisabledChange(j),K._registerOnDestroy(()=>{q._unregisterOnDisabledChange(j)})}}(q,K)}function Ge(q,K,j=!0){const oe=()=>{};K.valueAccessor&&(K.valueAccessor.registerOnChange(oe),K.valueAccessor.registerOnTouched(oe)),qt(q,K),q&&(K._invokeOnDestroyCallbacks(),q._registerOnCollectionChange(()=>{}))}function vt(q,K){q.forEach(j=>{j.registerOnValidatorChange&&j.registerOnValidatorChange(K)})}function In(q,K){const j=Ln(q);null!==K.validator?q.setValidators(Zt(j,K.validator)):"function"==typeof j&&q.setValidators([j]);const oe=An(q);null!==K.asyncValidator?q.setAsyncValidators(Zt(oe,K.asyncValidator)):"function"==typeof oe&&q.setAsyncValidators([oe]);const Ae=()=>q.updateValueAndValidity();vt(K._rawValidators,Ae),vt(K._rawAsyncValidators,Ae)}function qt(q,K){let j=!1;if(null!==q){if(null!==K.validator){const Ae=Ln(q);if(Array.isArray(Ae)&&Ae.length>0){const nn=Ae.filter(Sn=>Sn!==K.validator);nn.length!==Ae.length&&(j=!0,q.setValidators(nn))}}if(null!==K.asyncValidator){const Ae=An(q);if(Array.isArray(Ae)&&Ae.length>0){const nn=Ae.filter(Sn=>Sn!==K.asyncValidator);nn.length!==Ae.length&&(j=!0,q.setAsyncValidators(nn))}}}const oe=()=>{};return vt(K._rawValidators,oe),vt(K._rawAsyncValidators,oe),j}function Or(q,K){q._pendingDirty&&q.markAsDirty(),q.setValue(q._pendingValue,{emitModelToViewChange:!1}),K.viewToModelUpdate(q._pendingValue),q._pendingChange=!1}function Bi(q,K){In(q,K)}function so(q,K){if(!q.hasOwnProperty("model"))return!1;const j=q.model;return!!j.isFirstChange()||!Object.is(K,j.currentValue)}function Jo(q,K){q._syncPendingControls(),K.forEach(j=>{const oe=j.control;"submit"===oe.updateOn&&oe._pendingChange&&(j.viewToModelUpdate(oe._pendingValue),oe._pendingChange=!1)})}function yo(q,K){if(!K)return null;let j,oe,Ae;return Array.isArray(K),K.forEach(nn=>{nn.constructor===me?j=nn:function $s(q){return Object.getPrototypeOf(q.constructor)===st}(nn)?oe=nn:Ae=nn}),Ae||oe||j||null}const ea={provide:pt,useExisting:(0,E.Gpc)(()=>Er)},dr=(()=>Promise.resolve())();let Er=(()=>{class q extends pt{constructor(j,oe,Ae){super(),this.callSetDisabledState=Ae,this.submitted=!1,this._directives=new Set,this.ngSubmit=new E.vpe,this.form=new zt({},cr(j),qn(oe))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(j){dr.then(()=>{const oe=this._findContainer(j.path);j.control=oe.registerControl(j.name,j.control),it(j.control,j,this.callSetDisabledState),j.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(j)})}getControl(j){return this.form.get(j.path)}removeControl(j){dr.then(()=>{const oe=this._findContainer(j.path);oe&&oe.removeControl(j.name),this._directives.delete(j)})}addFormGroup(j){dr.then(()=>{const oe=this._findContainer(j.path),Ae=new zt({});Bi(Ae,j),oe.registerControl(j.name,Ae),Ae.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(j){dr.then(()=>{const oe=this._findContainer(j.path);oe&&oe.removeControl(j.name)})}getFormGroup(j){return this.form.get(j.path)}updateModel(j,oe){dr.then(()=>{this.form.get(j.path).setValue(oe)})}setValue(j){this.control.setValue(j)}onSubmit(j){return this.submitted=!0,Jo(this.form,this._directives),this.ngSubmit.emit(j),"dialog"===j?.target?.method}onReset(){this.resetForm()}resetForm(j=void 0){this.form.reset(j),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(j){return j.pop(),j.length?this.form.get(j):this.form}static#e=this.\u0275fac=function(oe){return new(oe||q)(E.Y36($e,10),E.Y36(ot,10),E.Y36(oi,8))};static#t=this.\u0275dir=E.lG2({type:q,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(oe,Ae){1&oe&&E.NdJ("submit",function(Sn){return Ae.onSubmit(Sn)})("reset",function(){return Ae.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[E._Bn([ea]),E.qOj]})}return q})();function li(q,K){const j=q.indexOf(K);j>-1&&q.splice(j,1)}function $r(q){return"object"==typeof q&&null!==q&&2===Object.keys(q).length&&"value"in q&&"disabled"in q}const Ds=class extends Pt{constructor(K=null,j,oe){super(we(j),se(oe,j)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(K),this._setUpdateStrategy(j),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),ue(j)&&(j.nonNullable||j.initialValueIsDefault)&&(this.defaultValue=$r(K)?K.value:K)}setValue(K,j={}){this.value=this._pendingValue=K,this._onChange.length&&!1!==j.emitModelToViewChange&&this._onChange.forEach(oe=>oe(this.value,!1!==j.emitViewToModelChange)),this.updateValueAndValidity(j)}patchValue(K,j={}){this.setValue(K,j)}reset(K=this.defaultValue,j={}){this._applyFormState(K),this.markAsPristine(j),this.markAsUntouched(j),this.setValue(this.value,j),this._pendingChange=!1}_updateValue(){}_anyControls(K){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(K){this._onChange.push(K)}_unregisterOnChange(K){li(this._onChange,K)}registerOnDisabledChange(K){this._onDisabledChange.push(K)}_unregisterOnDisabledChange(K){li(this._onDisabledChange,K)}_forEachChild(K){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(K){$r(K)?(this.value=this._pendingValue=K.value,K.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=K}},Xa={provide:Lt,useExisting:(0,E.Gpc)(()=>na)},zs=(()=>Promise.resolve())();let na=(()=>{class q extends Lt{constructor(j,oe,Ae,nn,Sn,Ui){super(),this._changeDetectorRef=Sn,this.callSetDisabledState=Ui,this.control=new Ds,this._registered=!1,this.name="",this.update=new E.vpe,this._parent=j,this._setValidators(oe),this._setAsyncValidators(Ae),this.valueAccessor=yo(0,nn)}ngOnChanges(j){if(this._checkForErrors(),!this._registered||"name"in j){if(this._registered&&(this._checkName(),this.formDirective)){const oe=j.name.previousValue;this.formDirective.removeControl({name:oe,path:this._getPath(oe)})}this._setUpControl()}"isDisabled"in j&&this._updateDisabled(j),so(j,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(j){this.viewModel=j,this.update.emit(j)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){it(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(j){zs.then(()=>{this.control.setValue(j,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(j){const oe=j.isDisabled.currentValue,Ae=0!==oe&&(0,E.VuI)(oe);zs.then(()=>{Ae&&!this.control.disabled?this.control.disable():!Ae&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(j){return this._parent?Js(j,this._parent):[j]}static#e=this.\u0275fac=function(oe){return new(oe||q)(E.Y36(pt,9),E.Y36($e,10),E.Y36(ot,10),E.Y36(Et,10),E.Y36(E.sBO,8),E.Y36(oi,8))};static#t=this.\u0275dir=E.lG2({type:q,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[E._Bn([Xa]),E.qOj,E.TTD]})}return q})(),vo=(()=>{class q{static#e=this.\u0275fac=function(oe){return new(oe||q)};static#t=this.\u0275dir=E.lG2({type:q,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]})}return q})();const Ma={provide:Et,useExisting:(0,E.Gpc)(()=>ks),multi:!0};let ks=(()=>{class q extends st{writeValue(j){this.setProperty("value",j??"")}registerOnChange(j){this.onChange=oe=>{j(""==oe?null:parseFloat(oe))}}static#e=this.\u0275fac=function(){let j;return function(Ae){return(j||(j=E.n5z(q)))(Ae||q)}}();static#t=this.\u0275dir=E.lG2({type:q,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(oe,Ae){1&oe&&E.NdJ("input",function(Sn){return Ae.onChange(Sn.target.value)})("blur",function(){return Ae.onTouched()})},features:[E._Bn([Ma]),E.qOj]})}return q})();const Kn={provide:Et,useExisting:(0,E.Gpc)(()=>Cr),multi:!0};let hi=(()=>{class q{static#e=this.\u0275fac=function(oe){return new(oe||q)};static#t=this.\u0275mod=E.oAB({type:q});static#n=this.\u0275inj=E.cJS({})}return q})(),es=(()=>{class q{constructor(){this._accessors=[]}add(j,oe){this._accessors.push([j,oe])}remove(j){for(let oe=this._accessors.length-1;oe>=0;--oe)if(this._accessors[oe][1]===j)return void this._accessors.splice(oe,1)}select(j){this._accessors.forEach(oe=>{this._isSameGroup(oe,j)&&oe[1]!==j&&oe[1].fireUncheck(j.value)})}_isSameGroup(j,oe){return!!j[0].control&&j[0]._parent===oe._control._parent&&j[1].name===oe.name}static#e=this.\u0275fac=function(oe){return new(oe||q)};static#t=this.\u0275prov=E.Yz7({token:q,factory:q.\u0275fac,providedIn:hi})}return q})(),Cr=(()=>{class q extends st{constructor(j,oe,Ae,nn){super(j,oe),this._registry=Ae,this._injector=nn,this.setDisabledStateFired=!1,this.onChange=()=>{},this.callSetDisabledState=(0,E.f3M)(oi,{optional:!0})??Gs}ngOnInit(){this._control=this._injector.get(Lt),this._checkName(),this._registry.add(this._control,this)}ngOnDestroy(){this._registry.remove(this)}writeValue(j){this._state=j===this.value,this.setProperty("checked",this._state)}registerOnChange(j){this._fn=j,this.onChange=()=>{j(this.value),this._registry.select(this)}}setDisabledState(j){(this.setDisabledStateFired||j||"whenDisabledForLegacyCode"===this.callSetDisabledState)&&this.setProperty("disabled",j),this.setDisabledStateFired=!0}fireUncheck(j){this.writeValue(j)}_checkName(){!this.name&&this.formControlName&&(this.name=this.formControlName)}static#e=this.\u0275fac=function(oe){return new(oe||q)(E.Y36(E.Qsj),E.Y36(E.SBq),E.Y36(es),E.Y36(E.zs3))};static#t=this.\u0275dir=E.lG2({type:q,selectors:[["input","type","radio","formControlName",""],["input","type","radio","formControl",""],["input","type","radio","ngModel",""]],hostBindings:function(oe,Ae){1&oe&&E.NdJ("change",function(){return Ae.onChange()})("blur",function(){return Ae.onTouched()})},inputs:{name:"name",formControlName:"formControlName",value:"value"},features:[E._Bn([Kn]),E.qOj]})}return q})();const _i=new E.OlP("NgModelWithFormControlWarning"),Mr={provide:pt,useExisting:(0,E.Gpc)(()=>xt)};let xt=(()=>{class q extends pt{constructor(j,oe,Ae){super(),this.callSetDisabledState=Ae,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new E.vpe,this._setValidators(j),this._setAsyncValidators(oe)}ngOnChanges(j){this._checkFormPresent(),j.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(qt(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(j){const oe=this.form.get(j.path);return it(oe,j,this.callSetDisabledState),oe.updateValueAndValidity({emitEvent:!1}),this.directives.push(j),oe}getControl(j){return this.form.get(j.path)}removeControl(j){Ge(j.control||null,j,!1),function eo(q,K){const j=q.indexOf(K);j>-1&&q.splice(j,1)}(this.directives,j)}addFormGroup(j){this._setUpFormContainer(j)}removeFormGroup(j){this._cleanUpFormContainer(j)}getFormGroup(j){return this.form.get(j.path)}addFormArray(j){this._setUpFormContainer(j)}removeFormArray(j){this._cleanUpFormContainer(j)}getFormArray(j){return this.form.get(j.path)}updateModel(j,oe){this.form.get(j.path).setValue(oe)}onSubmit(j){return this.submitted=!0,Jo(this.form,this.directives),this.ngSubmit.emit(j),"dialog"===j?.target?.method}onReset(){this.resetForm()}resetForm(j=void 0){this.form.reset(j),this.submitted=!1}_updateDomValue(){this.directives.forEach(j=>{const oe=j.control,Ae=this.form.get(j.path);oe!==Ae&&(Ge(oe||null,j),(q=>q instanceof Ds)(Ae)&&(it(Ae,j,this.callSetDisabledState),j.control=Ae))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(j){const oe=this.form.get(j.path);Bi(oe,j),oe.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(j){if(this.form){const oe=this.form.get(j.path);oe&&function ws(q,K){return qt(q,K)}(oe,j)&&oe.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){In(this.form,this),this._oldForm&&qt(this._oldForm,this)}_checkFormPresent(){}static#e=this.\u0275fac=function(oe){return new(oe||q)(E.Y36($e,10),E.Y36(ot,10),E.Y36(oi,8))};static#t=this.\u0275dir=E.lG2({type:q,selectors:[["","formGroup",""]],hostBindings:function(oe,Ae){1&oe&&E.NdJ("submit",function(Sn){return Ae.onSubmit(Sn)})("reset",function(){return Ae.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[E._Bn([Mr]),E.qOj,E.TTD]})}return q})();const ri={provide:Lt,useExisting:(0,E.Gpc)(()=>tr)};let tr=(()=>{class q extends Lt{set isDisabled(j){}static#e=this._ngModelWarningSentOnce=!1;constructor(j,oe,Ae,nn,Sn){super(),this._ngModelWarningConfig=Sn,this._added=!1,this.name=null,this.update=new E.vpe,this._ngModelWarningSent=!1,this._parent=j,this._setValidators(oe),this._setAsyncValidators(Ae),this.valueAccessor=yo(0,nn)}ngOnChanges(j){this._added||this._setUpControl(),so(j,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(j){this.viewModel=j,this.update.emit(j)}get path(){return Js(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}static#t=this.\u0275fac=function(oe){return new(oe||q)(E.Y36(pt,13),E.Y36($e,10),E.Y36(ot,10),E.Y36(Et,10),E.Y36(_i,8))};static#n=this.\u0275dir=E.lG2({type:q,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[E._Bn([ri]),E.qOj,E.TTD]})}return q})();const to={provide:Et,useExisting:(0,E.Gpc)(()=>yi),multi:!0};function Ar(q,K){return null==q?`${K}`:(K&&"object"==typeof K&&(K="Object"),`${q}: ${K}`.slice(0,50))}let yi=(()=>{class q extends st{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(j){this._compareWith=j}writeValue(j){this.value=j;const Ae=Ar(this._getOptionId(j),j);this.setProperty("value",Ae)}registerOnChange(j){this.onChange=oe=>{this.value=this._getOptionValue(oe),j(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(j){for(const oe of this._optionMap.keys())if(this._compareWith(this._optionMap.get(oe),j))return oe;return null}_getOptionValue(j){const oe=function En(q){return q.split(":")[0]}(j);return this._optionMap.has(oe)?this._optionMap.get(oe):j}static#e=this.\u0275fac=function(){let j;return function(Ae){return(j||(j=E.n5z(q)))(Ae||q)}}();static#t=this.\u0275dir=E.lG2({type:q,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(oe,Ae){1&oe&&E.NdJ("change",function(Sn){return Ae.onChange(Sn.target.value)})("blur",function(){return Ae.onTouched()})},inputs:{compareWith:"compareWith"},features:[E._Bn([to]),E.qOj]})}return q})(),ao=(()=>{class q{constructor(j,oe,Ae){this._element=j,this._renderer=oe,this._select=Ae,this._select&&(this.id=this._select._registerOption())}set ngValue(j){null!=this._select&&(this._select._optionMap.set(this.id,j),this._setElementValue(Ar(this.id,j)),this._select.writeValue(this._select.value))}set value(j){this._setElementValue(j),this._select&&this._select.writeValue(this._select.value)}_setElementValue(j){this._renderer.setProperty(this._element.nativeElement,"value",j)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static#e=this.\u0275fac=function(oe){return new(oe||q)(E.Y36(E.SBq),E.Y36(E.Qsj),E.Y36(yi,9))};static#t=this.\u0275dir=E.lG2({type:q,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}})}return q})();const Yi={provide:Et,useExisting:(0,E.Gpc)(()=>wi),multi:!0};function fi(q,K){return null==q?`${K}`:("string"==typeof K&&(K=`'${K}'`),K&&"object"==typeof K&&(K="Object"),`${q}: ${K}`.slice(0,50))}let wi=(()=>{class q extends st{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(j){this._compareWith=j}writeValue(j){let oe;if(this.value=j,Array.isArray(j)){const Ae=j.map(nn=>this._getOptionId(nn));oe=(nn,Sn)=>{nn._setSelected(Ae.indexOf(Sn.toString())>-1)}}else oe=(Ae,nn)=>{Ae._setSelected(!1)};this._optionMap.forEach(oe)}registerOnChange(j){this.onChange=oe=>{const Ae=[],nn=oe.selectedOptions;if(void 0!==nn){const Sn=nn;for(let Ui=0;Ui<Sn.length;Ui++){const Eo=this._getOptionValue(Sn[Ui].value);Ae.push(Eo)}}else{const Sn=oe.options;for(let Ui=0;Ui<Sn.length;Ui++){const _s=Sn[Ui];if(_s.selected){const Eo=this._getOptionValue(_s.value);Ae.push(Eo)}}}this.value=Ae,j(Ae)}}_registerOption(j){const oe=(this._idCounter++).toString();return this._optionMap.set(oe,j),oe}_getOptionId(j){for(const oe of this._optionMap.keys())if(this._compareWith(this._optionMap.get(oe)._value,j))return oe;return null}_getOptionValue(j){const oe=function sr(q){return q.split(":")[0]}(j);return this._optionMap.has(oe)?this._optionMap.get(oe)._value:j}static#e=this.\u0275fac=function(){let j;return function(Ae){return(j||(j=E.n5z(q)))(Ae||q)}}();static#t=this.\u0275dir=E.lG2({type:q,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(oe,Ae){1&oe&&E.NdJ("change",function(Sn){return Ae.onChange(Sn.target)})("blur",function(){return Ae.onTouched()})},inputs:{compareWith:"compareWith"},features:[E._Bn([Yi]),E.qOj]})}return q})(),Zi=(()=>{class q{constructor(j,oe,Ae){this._element=j,this._renderer=oe,this._select=Ae,this._select&&(this.id=this._select._registerOption(this))}set ngValue(j){null!=this._select&&(this._value=j,this._setElementValue(fi(this.id,j)),this._select.writeValue(this._select.value))}set value(j){this._select?(this._value=j,this._setElementValue(fi(this.id,j)),this._select.writeValue(this._select.value)):this._setElementValue(j)}_setElementValue(j){this._renderer.setProperty(this._element.nativeElement,"value",j)}_setSelected(j){this._renderer.setProperty(this._element.nativeElement,"selected",j)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static#e=this.\u0275fac=function(oe){return new(oe||q)(E.Y36(E.SBq),E.Y36(E.Qsj),E.Y36(wi,9))};static#t=this.\u0275dir=E.lG2({type:q,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}})}return q})(),Io=(()=>{class q{static#e=this.\u0275fac=function(oe){return new(oe||q)};static#t=this.\u0275mod=E.oAB({type:q});static#n=this.\u0275inj=E.cJS({imports:[hi]})}return q})();class ra extends Pt{constructor(K,j,oe){super(we(j),se(oe,j)),this.controls=K,this._initObservables(),this._setUpdateStrategy(j),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(K){return this.controls[this._adjustIndex(K)]}push(K,j={}){this.controls.push(K),this._registerControl(K),this.updateValueAndValidity({emitEvent:j.emitEvent}),this._onCollectionChange()}insert(K,j,oe={}){this.controls.splice(K,0,j),this._registerControl(j),this.updateValueAndValidity({emitEvent:oe.emitEvent})}removeAt(K,j={}){let oe=this._adjustIndex(K);oe<0&&(oe=0),this.controls[oe]&&this.controls[oe]._registerOnCollectionChange(()=>{}),this.controls.splice(oe,1),this.updateValueAndValidity({emitEvent:j.emitEvent})}setControl(K,j,oe={}){let Ae=this._adjustIndex(K);Ae<0&&(Ae=0),this.controls[Ae]&&this.controls[Ae]._registerOnCollectionChange(()=>{}),this.controls.splice(Ae,1),j&&(this.controls.splice(Ae,0,j),this._registerControl(j)),this.updateValueAndValidity({emitEvent:oe.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(K,j={}){_t(this,0,K),K.forEach((oe,Ae)=>{Le(this,!1,Ae),this.at(Ae).setValue(oe,{onlySelf:!0,emitEvent:j.emitEvent})}),this.updateValueAndValidity(j)}patchValue(K,j={}){null!=K&&(K.forEach((oe,Ae)=>{this.at(Ae)&&this.at(Ae).patchValue(oe,{onlySelf:!0,emitEvent:j.emitEvent})}),this.updateValueAndValidity(j))}reset(K=[],j={}){this._forEachChild((oe,Ae)=>{oe.reset(K[Ae],{onlySelf:!0,emitEvent:j.emitEvent})}),this._updatePristine(j),this._updateTouched(j),this.updateValueAndValidity(j)}getRawValue(){return this.controls.map(K=>K.getRawValue())}clear(K={}){this.controls.length<1||(this._forEachChild(j=>j._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:K.emitEvent}))}_adjustIndex(K){return K<0?K+this.length:K}_syncPendingControls(){let K=this.controls.reduce((j,oe)=>!!oe._syncPendingControls()||j,!1);return K&&this.updateValueAndValidity({onlySelf:!0}),K}_forEachChild(K){this.controls.forEach((j,oe)=>{K(j,oe)})}_updateValue(){this.value=this.controls.filter(K=>K.enabled||this.disabled).map(K=>K.value)}_anyControls(K){return this.controls.some(j=>j.enabled&&K(j))}_setUpControls(){this._forEachChild(K=>this._registerControl(K))}_allControlsDisabled(){for(const K of this.controls)if(K.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(K){K.setParent(this),K._registerOnCollectionChange(this._onCollectionChange)}_find(K){return this.at(K)??null}}function xo(q){return!!q&&(void 0!==q.asyncValidators||void 0!==q.validators||void 0!==q.updateOn)}let ko=(()=>{class q{constructor(){this.useNonNullable=!1}get nonNullable(){const j=new q;return j.useNonNullable=!0,j}group(j,oe=null){const Ae=this._reduceControls(j);let nn={};return xo(oe)?nn=oe:null!==oe&&(nn.validators=oe.validator,nn.asyncValidators=oe.asyncValidator),new zt(Ae,nn)}record(j,oe=null){const Ae=this._reduceControls(j);return new hn(Ae,oe)}control(j,oe,Ae){let nn={};return this.useNonNullable?(xo(oe)?nn=oe:(nn.validators=oe,nn.asyncValidators=Ae),new Ds(j,{...nn,nonNullable:!0})):new Ds(j,oe,Ae)}array(j,oe,Ae){const nn=j.map(Sn=>this._createControl(Sn));return new ra(nn,oe,Ae)}_reduceControls(j){const oe={};return Object.keys(j).forEach(Ae=>{oe[Ae]=this._createControl(j[Ae])}),oe}_createControl(j){return j instanceof Ds||j instanceof Pt?j:Array.isArray(j)?this.control(j[0],j.length>1?j[1]:null,j.length>2?j[2]:null):this.control(j)}static#e=this.\u0275fac=function(oe){return new(oe||q)};static#t=this.\u0275prov=E.Yz7({token:q,factory:q.\u0275fac,providedIn:"root"})}return q})(),sa=(()=>{class q{static withConfig(j){return{ngModule:q,providers:[{provide:oi,useValue:j.callSetDisabledState??Gs}]}}static#e=this.\u0275fac=function(oe){return new(oe||q)};static#t=this.\u0275mod=E.oAB({type:q});static#n=this.\u0275inj=E.cJS({imports:[Io]})}return q})(),ka=(()=>{class q{static withConfig(j){return{ngModule:q,providers:[{provide:_i,useValue:j.warnOnNgModelWithFormControl??"always"},{provide:oi,useValue:j.callSetDisabledState??Gs}]}}static#e=this.\u0275fac=function(oe){return new(oe||q)};static#t=this.\u0275mod=E.oAB({type:q});static#n=this.\u0275inj=E.cJS({imports:[Io]})}return q})()},2614:()=>{const Yt=":";const Ln=function(Ee,...xe){if(Ln.translate){const lt=Ln.translate(Ee,xe);Ee=lt[0],xe=lt[1]}let ze=Gn(Ee[0],Ee.raw[0]);for(let lt=1;lt<Ee.length;lt++)ze+=xe[lt-1]+Gn(Ee[lt],Ee.raw[lt]);return ze},An=":";function Gn(Ee,xe){return xe.charAt(0)===An?Ee.substring(function Se(Ee,xe){for(let ze=1,lt=1;ze<Ee.length;ze++,lt++)if("\\"===xe[lt])lt++;else if(Ee[ze]===Yt)return ze;throw new Error(`Unterminated $localize metadata block in "${xe}".`)}(Ee,xe)+1):Ee}globalThis.$localize=Ln},6593:(Yt,Je,$)=>{$.d(Je,{Dx:()=>Lt,b2:()=>Ee,q6:()=>Zt,se:()=>ft});var E=$(5879),_e=$(6814);class le extends _e.w_{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class Oe extends le{static makeCurrent(){(0,_e.HT)(new Oe)}onAndCancel(se,re,ue){return se.addEventListener(re,ue),()=>{se.removeEventListener(re,ue)}}dispatchEvent(se,re){se.dispatchEvent(re)}remove(se){se.parentNode&&se.parentNode.removeChild(se)}createElement(se,re){return(re=re||this.getDefaultDocument()).createElement(se)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(se){return se.nodeType===Node.ELEMENT_NODE}isShadowRoot(se){return se instanceof DocumentFragment}getGlobalEventTarget(se,re){return"window"===re?window:"document"===re?se:"body"===re?se.body:null}getBaseHref(se){const re=function Te(){return Ne=Ne||document.querySelector("base"),Ne?Ne.getAttribute("href"):null}();return null==re?null:function T(ie){ke=ke||document.createElement("a"),ke.setAttribute("href",ie);const se=ke.pathname;return"/"===se.charAt(0)?se:`/${se}`}(re)}resetBaseElement(){Ne=null}getUserAgent(){return window.navigator.userAgent}getCookie(se){return(0,_e.Mx)(document.cookie,se)}}let ke,Ne=null,ye=(()=>{class ie{build(){return new XMLHttpRequest}static#e=this.\u0275fac=function(ue){return new(ue||ie)};static#t=this.\u0275prov=E.Yz7({token:ie,factory:ie.\u0275fac})}return ie})();const Ie=new E.OlP("EventManagerPlugins");let Ve=(()=>{class ie{constructor(re,ue){this._zone=ue,this._eventNameToPlugin=new Map,re.forEach(Le=>{Le.manager=this}),this._plugins=re.slice().reverse()}addEventListener(re,ue,Le){return this._findPluginFor(ue).addEventListener(re,ue,Le)}getZone(){return this._zone}_findPluginFor(re){let ue=this._eventNameToPlugin.get(re);if(ue)return ue;if(ue=this._plugins.find(_t=>_t.supports(re)),!ue)throw new E.vHH(5101,!1);return this._eventNameToPlugin.set(re,ue),ue}static#e=this.\u0275fac=function(ue){return new(ue||ie)(E.LFG(Ie),E.LFG(E.R0b))};static#t=this.\u0275prov=E.Yz7({token:ie,factory:ie.\u0275fac})}return ie})();class ht{constructor(se){this._doc=se}}const st="ng-app-id";let Et=(()=>{class ie{constructor(re,ue,Le,_t={}){this.doc=re,this.appId=ue,this.nonce=Le,this.platformId=_t,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=(0,_e.PM)(_t),this.resetHostNodes()}addStyles(re){for(const ue of re)1===this.changeUsageCount(ue,1)&&this.onStyleAdded(ue)}removeStyles(re){for(const ue of re)this.changeUsageCount(ue,-1)<=0&&this.onStyleRemoved(ue)}ngOnDestroy(){const re=this.styleNodesInDOM;re&&(re.forEach(ue=>ue.remove()),re.clear());for(const ue of this.getAllStyles())this.onStyleRemoved(ue);this.resetHostNodes()}addHost(re){this.hostNodes.add(re);for(const ue of this.getAllStyles())this.addStyleToHost(re,ue)}removeHost(re){this.hostNodes.delete(re)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(re){for(const ue of this.hostNodes)this.addStyleToHost(ue,re)}onStyleRemoved(re){const ue=this.styleRef;ue.get(re)?.elements?.forEach(Le=>Le.remove()),ue.delete(re)}collectServerRenderedStyles(){const re=this.doc.head?.querySelectorAll(`style[${st}="${this.appId}"]`);if(re?.length){const ue=new Map;return re.forEach(Le=>{null!=Le.textContent&&ue.set(Le.textContent,Le)}),ue}return null}changeUsageCount(re,ue){const Le=this.styleRef;if(Le.has(re)){const _t=Le.get(re);return _t.usage+=ue,_t.usage}return Le.set(re,{usage:ue,elements:[]}),ue}getStyleElement(re,ue){const Le=this.styleNodesInDOM,_t=Le?.get(ue);if(_t?.parentNode===re)return Le.delete(ue),_t.removeAttribute(st),_t;{const Pt=this.doc.createElement("style");return this.nonce&&Pt.setAttribute("nonce",this.nonce),Pt.textContent=ue,this.platformIsServer&&Pt.setAttribute(st,this.appId),Pt}}addStyleToHost(re,ue){const Le=this.getStyleElement(re,ue);re.appendChild(Le);const _t=this.styleRef,Pt=_t.get(ue)?.elements;Pt?Pt.push(Le):_t.set(ue,{elements:[Le],usage:1})}resetHostNodes(){const re=this.hostNodes;re.clear(),re.add(this.doc.head)}static#e=this.\u0275fac=function(ue){return new(ue||ie)(E.LFG(_e.K0),E.LFG(E.AFp),E.LFG(E.Ojb,8),E.LFG(E.Lbi))};static#t=this.\u0275prov=E.Yz7({token:ie,factory:ie.\u0275fac})}return ie})();const mt={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Ct=/%COMP%/g,He=new E.OlP("RemoveStylesOnCompDestroy",{providedIn:"root",factory:()=>!1});function ot(ie,se){return se.map(re=>re.replace(Ct,ie))}let ft=(()=>{class ie{constructor(re,ue,Le,_t,Pt,zt,gn,Xt=null){this.eventManager=re,this.sharedStylesHost=ue,this.appId=Le,this.removeStylesOnCompDestroy=_t,this.doc=Pt,this.platformId=zt,this.ngZone=gn,this.nonce=Xt,this.rendererByCompId=new Map,this.platformIsServer=(0,_e.PM)(zt),this.defaultRenderer=new de(re,Pt,gn,this.platformIsServer)}createRenderer(re,ue){if(!re||!ue)return this.defaultRenderer;this.platformIsServer&&ue.encapsulation===E.ifc.ShadowDom&&(ue={...ue,encapsulation:E.ifc.Emulated});const Le=this.getOrCreateRenderer(re,ue);return Le instanceof mr?Le.applyToHost(re):Le instanceof Pr&&Le.applyStyles(),Le}getOrCreateRenderer(re,ue){const Le=this.rendererByCompId;let _t=Le.get(ue.id);if(!_t){const Pt=this.doc,zt=this.ngZone,gn=this.eventManager,Xt=this.sharedStylesHost,hn=this.removeStylesOnCompDestroy,Vr=this.platformIsServer;switch(ue.encapsulation){case E.ifc.Emulated:_t=new mr(gn,Xt,ue,this.appId,hn,Pt,zt,Vr);break;case E.ifc.ShadowDom:return new On(gn,Xt,re,ue,Pt,zt,this.nonce,Vr);default:_t=new Pr(gn,Xt,ue,hn,Pt,zt,Vr)}Le.set(ue.id,_t)}return _t}ngOnDestroy(){this.rendererByCompId.clear()}static#e=this.\u0275fac=function(ue){return new(ue||ie)(E.LFG(Ve),E.LFG(Et),E.LFG(E.AFp),E.LFG(He),E.LFG(_e.K0),E.LFG(E.Lbi),E.LFG(E.R0b),E.LFG(E.Ojb))};static#t=this.\u0275prov=E.Yz7({token:ie,factory:ie.\u0275fac})}return ie})();class de{constructor(se,re,ue,Le){this.eventManager=se,this.doc=re,this.ngZone=ue,this.platformIsServer=Le,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(se,re){return re?this.doc.createElementNS(mt[re]||re,se):this.doc.createElement(se)}createComment(se){return this.doc.createComment(se)}createText(se){return this.doc.createTextNode(se)}appendChild(se,re){(Qn(se)?se.content:se).appendChild(re)}insertBefore(se,re,ue){se&&(Qn(se)?se.content:se).insertBefore(re,ue)}removeChild(se,re){se&&se.removeChild(re)}selectRootElement(se,re){let ue="string"==typeof se?this.doc.querySelector(se):se;if(!ue)throw new E.vHH(-5104,!1);return re||(ue.textContent=""),ue}parentNode(se){return se.parentNode}nextSibling(se){return se.nextSibling}setAttribute(se,re,ue,Le){if(Le){re=Le+":"+re;const _t=mt[Le];_t?se.setAttributeNS(_t,re,ue):se.setAttribute(re,ue)}else se.setAttribute(re,ue)}removeAttribute(se,re,ue){if(ue){const Le=mt[ue];Le?se.removeAttributeNS(Le,re):se.removeAttribute(`${ue}:${re}`)}else se.removeAttribute(re)}addClass(se,re){se.classList.add(re)}removeClass(se,re){se.classList.remove(re)}setStyle(se,re,ue,Le){Le&(E.JOm.DashCase|E.JOm.Important)?se.style.setProperty(re,ue,Le&E.JOm.Important?"important":""):se.style[re]=ue}removeStyle(se,re,ue){ue&E.JOm.DashCase?se.style.removeProperty(re):se.style[re]=""}setProperty(se,re,ue){se[re]=ue}setValue(se,re){se.nodeValue=re}listen(se,re,ue){if("string"==typeof se&&!(se=(0,_e.q)().getGlobalEventTarget(this.doc,se)))throw new Error(`Unsupported event target ${se} for event ${re}`);return this.eventManager.addEventListener(se,re,this.decoratePreventDefault(ue))}decoratePreventDefault(se){return re=>{if("__ngUnwrap__"===re)return se;!1===(this.platformIsServer?this.ngZone.runGuarded(()=>se(re)):se(re))&&re.preventDefault()}}}function Qn(ie){return"TEMPLATE"===ie.tagName&&void 0!==ie.content}class On extends de{constructor(se,re,ue,Le,_t,Pt,zt,gn){super(se,_t,Pt,gn),this.sharedStylesHost=re,this.hostEl=ue,this.shadowRoot=ue.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const Xt=ot(Le.id,Le.styles);for(const hn of Xt){const Vr=document.createElement("style");zt&&Vr.setAttribute("nonce",zt),Vr.textContent=hn,this.shadowRoot.appendChild(Vr)}}nodeOrShadowRoot(se){return se===this.hostEl?this.shadowRoot:se}appendChild(se,re){return super.appendChild(this.nodeOrShadowRoot(se),re)}insertBefore(se,re,ue){return super.insertBefore(this.nodeOrShadowRoot(se),re,ue)}removeChild(se,re){return super.removeChild(this.nodeOrShadowRoot(se),re)}parentNode(se){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(se)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class Pr extends de{constructor(se,re,ue,Le,_t,Pt,zt,gn){super(se,_t,Pt,zt),this.sharedStylesHost=re,this.removeStylesOnCompDestroy=Le,this.styles=gn?ot(gn,ue.styles):ue.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}}class mr extends Pr{constructor(se,re,ue,Le,_t,Pt,zt,gn){const Xt=Le+"-"+ue.id;super(se,re,ue,_t,Pt,zt,gn,Xt),this.contentAttr=function Pe(ie){return"_ngcontent-%COMP%".replace(Ct,ie)}(Xt),this.hostAttr=function $e(ie){return"_nghost-%COMP%".replace(Ct,ie)}(Xt)}applyToHost(se){this.applyStyles(),this.setAttribute(se,this.hostAttr,"")}createElement(se,re){const ue=super.createElement(se,re);return super.setAttribute(ue,this.contentAttr,""),ue}}let tn=(()=>{class ie extends ht{constructor(re){super(re)}supports(re){return!0}addEventListener(re,ue,Le){return re.addEventListener(ue,Le,!1),()=>this.removeEventListener(re,ue,Le)}removeEventListener(re,ue,Le){return re.removeEventListener(ue,Le)}static#e=this.\u0275fac=function(ue){return new(ue||ie)(E.LFG(_e.K0))};static#t=this.\u0275prov=E.Yz7({token:ie,factory:ie.\u0275fac})}return ie})();const Bt=["alt","control","meta","shift"],be={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Se={alt:ie=>ie.altKey,control:ie=>ie.ctrlKey,meta:ie=>ie.metaKey,shift:ie=>ie.shiftKey};let Ke=(()=>{class ie extends ht{constructor(re){super(re)}supports(re){return null!=ie.parseEventName(re)}addEventListener(re,ue,Le){const _t=ie.parseEventName(ue),Pt=ie.eventCallback(_t.fullKey,Le,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>(0,_e.q)().onAndCancel(re,_t.domEventName,Pt))}static parseEventName(re){const ue=re.toLowerCase().split("."),Le=ue.shift();if(0===ue.length||"keydown"!==Le&&"keyup"!==Le)return null;const _t=ie._normalizeKey(ue.pop());let Pt="",zt=ue.indexOf("code");if(zt>-1&&(ue.splice(zt,1),Pt="code."),Bt.forEach(Xt=>{const hn=ue.indexOf(Xt);hn>-1&&(ue.splice(hn,1),Pt+=Xt+".")}),Pt+=_t,0!=ue.length||0===_t.length)return null;const gn={};return gn.domEventName=Le,gn.fullKey=Pt,gn}static matchEventFullKeyCode(re,ue){let Le=be[re.key]||re.key,_t="";return ue.indexOf("code.")>-1&&(Le=re.code,_t="code."),!(null==Le||!Le)&&(Le=Le.toLowerCase()," "===Le?Le="space":"."===Le&&(Le="dot"),Bt.forEach(Pt=>{Pt!==Le&&(0,Se[Pt])(re)&&(_t+=Pt+".")}),_t+=Le,_t===ue)}static eventCallback(re,ue,Le){return _t=>{ie.matchEventFullKeyCode(_t,re)&&Le.runGuarded(()=>ue(_t))}}static _normalizeKey(re){return"esc"===re?"escape":re}static#e=this.\u0275fac=function(ue){return new(ue||ie)(E.LFG(_e.K0))};static#t=this.\u0275prov=E.Yz7({token:ie,factory:ie.\u0275fac})}return ie})();const Zt=(0,E.eFA)(E._c5,"browser",[{provide:E.Lbi,useValue:_e.bD},{provide:E.g9A,useValue:function St(){Oe.makeCurrent()},multi:!0},{provide:_e.K0,useFactory:function Ut(){return(0,E.RDi)(document),document},deps:[]}]),Ln=new E.OlP(""),An=[{provide:E.rWj,useClass:class qe{addToWindow(se){E.dqk.getAngularTestability=(ue,Le=!0)=>{const _t=se.findTestabilityInTree(ue,Le);if(null==_t)throw new E.vHH(5103,!1);return _t},E.dqk.getAllAngularTestabilities=()=>se.getAllTestabilities(),E.dqk.getAllAngularRootElements=()=>se.getAllRootElements(),E.dqk.frameworkStabilizers||(E.dqk.frameworkStabilizers=[]),E.dqk.frameworkStabilizers.push(ue=>{const Le=E.dqk.getAllAngularTestabilities();let _t=Le.length,Pt=!1;const zt=function(gn){Pt=Pt||gn,_t--,0==_t&&ue(Pt)};Le.forEach(gn=>{gn.whenStable(zt)})})}findTestabilityInTree(se,re,ue){return null==re?null:se.getTestability(re)??(ue?(0,_e.q)().isShadowRoot(re)?this.findTestabilityInTree(se,re.host,!0):this.findTestabilityInTree(se,re.parentElement,!0):null)}},deps:[]},{provide:E.lri,useClass:E.dDg,deps:[E.R0b,E.eoX,E.rWj]},{provide:E.dDg,useClass:E.dDg,deps:[E.R0b,E.eoX,E.rWj]}],Gn=[{provide:E.zSh,useValue:"root"},{provide:E.qLn,useFactory:function cr(){return new E.qLn},deps:[]},{provide:Ie,useClass:tn,multi:!0,deps:[_e.K0,E.R0b,E.Lbi]},{provide:Ie,useClass:Ke,multi:!0,deps:[_e.K0]},ft,Et,Ve,{provide:E.FYo,useExisting:ft},{provide:_e.JF,useClass:ye,deps:[]},[]];let Ee=(()=>{class ie{constructor(re){}static withServerTransition(re){return{ngModule:ie,providers:[{provide:E.AFp,useValue:re.appId}]}}static#e=this.\u0275fac=function(ue){return new(ue||ie)(E.LFG(Ln,12))};static#t=this.\u0275mod=E.oAB({type:ie});static#n=this.\u0275inj=E.cJS({providers:[...Gn,...An],imports:[_e.ez,E.hGG]})}return ie})(),Lt=(()=>{class ie{constructor(re){this._doc=re}getTitle(){return this._doc.title}setTitle(re){this._doc.title=re||""}static#e=this.\u0275fac=function(ue){return new(ue||ie)(E.LFG(_e.K0))};static#t=this.\u0275prov=E.Yz7({token:ie,factory:function(ue){let Le=null;return Le=ue?new ue:function pt(){return new Lt((0,E.LFG)(_e.K0))}(),Le},providedIn:"root"})}return ie})();typeof window<"u"&&window},1826:(Yt,Je,$)=>{$.d(Je,{F0:()=>Ps,rH:()=>Va,Bz:()=>Ad,lC:()=>En});var E=$(5879),_e=$(5592),le=$(4674),Ne=$(2459),Te=$(2096),ke=$(5619),T=$(7453),qe=$(2737),ye=$(7400),Ie=$(9940),Ve=$(2714),ht=$(8251),st=$(7103);function Et(...R){const k=(0,Ie.yG)(R),A=(0,Ie.jO)(R),{args:L,keys:V}=(0,T.D)(R);if(0===L.length)return(0,Ne.D)([],k);const te=new _e.y(function mt(R,k,A=qe.y){return L=>{Ct(k,()=>{const{length:V}=R,te=new Array(V);let he=V,Qe=V;for(let Ze=0;Ze<V;Ze++)Ct(k,()=>{const Gt=(0,Ne.D)(R[Ze],k);let Zn=!1;Gt.subscribe((0,ht.x)(L,zr=>{te[Ze]=zr,Zn||(Zn=!0,Qe--),Qe||L.next(A(te.slice()))},()=>{--he||L.complete()}))},L)},L)}}(L,k,V?he=>(0,Ve.n)(V,he):qe.y));return A?te.pipe((0,ye.Z)(A)):te}function Ct(R,k,A){R?(0,st.f)(A,R,k):k()}var bt=$(6973),jt=$(5211),Re=$(4829);function me(R){return new _e.y(k=>{(0,Re.Xf)(R()).subscribe(k)})}var He=$(8407);function Pe(R,k){const A=(0,le.m)(R)?R:()=>R,L=V=>V.error(A());return new _e.y(k?V=>k.schedule(L,0,V):L)}var $e=$(6232),ot=$(7394),ft=$(9360);function de(){return(0,ft.e)((R,k)=>{let A=null;R._refCount++;const L=(0,ht.x)(k,void 0,void 0,void 0,()=>{if(!R||R._refCount<=0||0<--R._refCount)return void(A=null);const V=R._connection,te=A;A=null,V&&(!te||V===te)&&V.unsubscribe(),k.unsubscribe()});R.subscribe(L),L.closed||(A=R.connect())})}class Ot extends _e.y{constructor(k,A){super(),this.source=k,this.subjectFactory=A,this._subject=null,this._refCount=0,this._connection=null,(0,ft.A)(k)&&(this.lift=k.lift)}_subscribe(k){return this.getSubject().subscribe(k)}getSubject(){const k=this._subject;return(!k||k.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:k}=this;this._subject=this._connection=null,k?.unsubscribe()}connect(){let k=this._connection;if(!k){k=this._connection=new ot.w0;const A=this.getSubject();k.add(this.source.subscribe((0,ht.x)(A,void 0,()=>{this._teardown(),A.complete()},L=>{this._teardown(),A.error(L)},()=>this._teardown()))),k.closed&&(this._connection=null,k=ot.w0.EMPTY)}return k}refCount(){return de()(this)}}var wt=$(8645),Qn=$(6814),On=$(7398),Pr=$(4664),mr=$(8180),tn=$(7921),Bt=$(2181),be=$(1631),Se=$(1374);function Ke(R,k){return(0,le.m)(k)?(0,be.z)(R,k,1):(0,be.z)(R,1)}var Fe=$(9397);function Ue(R){return(0,ft.e)((k,A)=>{let te,L=null,V=!1;L=k.subscribe((0,ht.x)(A,void 0,void 0,he=>{te=(0,Re.Xf)(R(he,Ue(R)(k))),L?(L.unsubscribe(),L=null,te.subscribe(A)):V=!0})),V&&(L.unsubscribe(),L=null,te.subscribe(A))})}var Xe=$(6699),Ft=$(3572);function St(R){return R<=0?()=>$e.E:(0,ft.e)((k,A)=>{let L=[];k.subscribe((0,ht.x)(A,V=>{L.push(V),R<L.length&&L.shift()},()=>{for(const V of L)A.next(V);A.complete()},void 0,()=>{L=null}))})}var cr=$(3026),qn=$(975);function Zt(R){return(0,ft.e)((k,A)=>{try{k.subscribe(A)}finally{A.add(R)}})}var Ln=$(9773),An=$(7537),Gn=$(6593);const Ee="primary",xe=Symbol("RouteTitle");class ze{constructor(k){this.params=k||{}}has(k){return Object.prototype.hasOwnProperty.call(this.params,k)}get(k){if(this.has(k)){const A=this.params[k];return Array.isArray(A)?A[0]:A}return null}getAll(k){if(this.has(k)){const A=this.params[k];return Array.isArray(A)?A:[A]}return[]}get keys(){return Object.keys(this.params)}}function lt(R){return new ze(R)}function pt(R,k,A){const L=A.path.split("/");if(L.length>R.length||"full"===A.pathMatch&&(k.hasChildren()||L.length<R.length))return null;const V={};for(let te=0;te<L.length;te++){const he=L[te],Qe=R[te];if(he.startsWith(":"))V[he.substring(1)]=Qe;else if(he!==Qe.path)return null}return{consumed:R.slice(0,L.length),posParams:V}}function Un(R,k){const A=R?Object.keys(R):void 0,L=k?Object.keys(k):void 0;if(!A||!L||A.length!=L.length)return!1;let V;for(let te=0;te<A.length;te++)if(V=A[te],!$n(R[V],k[V]))return!1;return!0}function $n(R,k){if(Array.isArray(R)&&Array.isArray(k)){if(R.length!==k.length)return!1;const A=[...R].sort(),L=[...k].sort();return A.every((V,te)=>L[te]===V)}return R===k}function Mt(R){return R.length>0?R[R.length-1]:null}function an(R){return function Oe(R){return!!R&&(R instanceof _e.y||(0,le.m)(R.lift)&&(0,le.m)(R.subscribe))}(R)?R:(0,E.QGY)(R)?(0,Ne.D)(Promise.resolve(R)):(0,Te.of)(R)}const mn={exact:function jn(R,k,A){if(!Xi(R.segments,k.segments)||!$i(R.segments,k.segments,A)||R.numberOfChildren!==k.numberOfChildren)return!1;for(const L in k.children)if(!R.children[L]||!jn(R.children[L],k.children[L],A))return!1;return!0},subset:Kr},ir={exact:function Hr(R,k){return Un(R,k)},subset:function Gr(R,k){return Object.keys(k).length<=Object.keys(R).length&&Object.keys(k).every(A=>$n(R[A],k[A]))},ignored:()=>!0};function cn(R,k,A){return mn[A.paths](R.root,k.root,A.matrixParams)&&ir[A.queryParams](R.queryParams,k.queryParams)&&!("exact"===A.fragment&&R.fragment!==k.fragment)}function Kr(R,k,A){return en(R,k,k.segments,A)}function en(R,k,A,L){if(R.segments.length>A.length){const V=R.segments.slice(0,A.length);return!(!Xi(V,A)||k.hasChildren()||!$i(V,A,L))}if(R.segments.length===A.length){if(!Xi(R.segments,A)||!$i(R.segments,A,L))return!1;for(const V in k.children)if(!R.children[V]||!Kr(R.children[V],k.children[V],L))return!1;return!0}{const V=A.slice(0,R.segments.length),te=A.slice(R.segments.length);return!!(Xi(R.segments,V)&&$i(R.segments,V,L)&&R.children[Ee])&&en(R.children[Ee],k,te,L)}}function $i(R,k,A){return k.every((L,V)=>ir[A](R[V].parameters,L.parameters))}class wn{constructor(k=new Dn([],{}),A={},L=null){this.root=k,this.queryParams=A,this.fragment=L}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=lt(this.queryParams)),this._queryParamMap}toString(){return hs.serialize(this)}}class Dn{constructor(k,A){this.segments=k,this.children=A,this.parent=null,Object.values(A).forEach(L=>L.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Fi(this)}}class ki{constructor(k,A){this.path=k,this.parameters=A}get parameterMap(){return this._parameterMap||(this._parameterMap=lt(this.parameters)),this._parameterMap}toString(){return ue(this)}}function Xi(R,k){return R.length===k.length&&R.every((A,L)=>A.path===k[L].path)}let ur=(()=>{class R{static#e=this.\u0275fac=function(L){return new(L||R)};static#t=this.\u0275prov=E.Yz7({token:R,factory:function(){return new Ti},providedIn:"root"})}return R})();class Ti{parse(k){const A=new Js(k);return new wn(A.parseRootSegment(),A.parseQueryParams(),A.parseFragment())}serialize(k){const A=`/${Oi(k.root,!0)}`,L=function _t(R){const k=Object.keys(R).map(A=>{const L=R[A];return Array.isArray(L)?L.map(V=>`${Vi(A)}=${Vi(V)}`).join("&"):`${Vi(A)}=${Vi(L)}`}).filter(A=>!!A);return k.length?`?${k.join("&")}`:""}(k.queryParams);return`${A}${L}${"string"==typeof k.fragment?`#${function we(R){return encodeURI(R)}(k.fragment)}`:""}`}}const hs=new Ti;function Fi(R){return R.segments.map(k=>ue(k)).join("/")}function Oi(R,k){if(!R.hasChildren())return Fi(R);if(k){const A=R.children[Ee]?Oi(R.children[Ee],!1):"",L=[];return Object.entries(R.children).forEach(([V,te])=>{V!==Ee&&L.push(`${V}:${Oi(te,!1)}`)}),L.length>0?`${A}(${L.join("//")})`:A}{const A=function _o(R,k){let A=[];return Object.entries(R.children).forEach(([L,V])=>{L===Ee&&(A=A.concat(k(V,L)))}),Object.entries(R.children).forEach(([L,V])=>{L!==Ee&&(A=A.concat(k(V,L)))}),A}(R,(L,V)=>V===Ee?[Oi(R.children[Ee],!1)]:[`${V}:${Oi(L,!1)}`]);return 1===Object.keys(R.children).length&&null!=R.children[Ee]?`${Fi(R)}/${A[0]}`:`${Fi(R)}/(${A.join("//")})`}}function Li(R){return encodeURIComponent(R).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Vi(R){return Li(R).replace(/%3B/gi,";")}function ie(R){return Li(R).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function se(R){return decodeURIComponent(R)}function re(R){return se(R.replace(/\+/g,"%20"))}function ue(R){return`${ie(R.path)}${function Le(R){return Object.keys(R).map(k=>`;${ie(k)}=${ie(R[k])}`).join("")}(R.parameters)}`}const Pt=/^[^\/()?;#]+/;function zt(R){const k=R.match(Pt);return k?k[0]:""}const gn=/^[^\/()?;=#]+/,hn=/^[^=?&#]+/,oi=/^[^&#]+/;class Js{constructor(k){this.url=k,this.remaining=k}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Dn([],{}):new Dn([],this.parseChildren())}parseQueryParams(){const k={};if(this.consumeOptional("?"))do{this.parseQueryParam(k)}while(this.consumeOptional("&"));return k}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const k=[];for(this.peekStartsWith("(")||k.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),k.push(this.parseSegment());let A={};this.peekStartsWith("/(")&&(this.capture("/"),A=this.parseParens(!0));let L={};return this.peekStartsWith("(")&&(L=this.parseParens(!1)),(k.length>0||Object.keys(A).length>0)&&(L[Ee]=new Dn(k,A)),L}parseSegment(){const k=zt(this.remaining);if(""===k&&this.peekStartsWith(";"))throw new E.vHH(4009,!1);return this.capture(k),new ki(se(k),this.parseMatrixParams())}parseMatrixParams(){const k={};for(;this.consumeOptional(";");)this.parseParam(k);return k}parseParam(k){const A=function Xt(R){const k=R.match(gn);return k?k[0]:""}(this.remaining);if(!A)return;this.capture(A);let L="";if(this.consumeOptional("=")){const V=zt(this.remaining);V&&(L=V,this.capture(L))}k[se(A)]=se(L)}parseQueryParam(k){const A=function Vr(R){const k=R.match(hn);return k?k[0]:""}(this.remaining);if(!A)return;this.capture(A);let L="";if(this.consumeOptional("=")){const he=function Gs(R){const k=R.match(oi);return k?k[0]:""}(this.remaining);he&&(L=he,this.capture(L))}const V=re(A),te=re(L);if(k.hasOwnProperty(V)){let he=k[V];Array.isArray(he)||(he=[he],k[V]=he),he.push(te)}else k[V]=te}parseParens(k){const A={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const L=zt(this.remaining),V=this.remaining[L.length];if("/"!==V&&")"!==V&&";"!==V)throw new E.vHH(4010,!1);let te;L.indexOf(":")>-1?(te=L.slice(0,L.indexOf(":")),this.capture(te),this.capture(":")):k&&(te=Ee);const he=this.parseChildren();A[te]=1===Object.keys(he).length?he[Ee]:new Dn([],he),this.consumeOptional("//")}return A}peekStartsWith(k){return this.remaining.startsWith(k)}consumeOptional(k){return!!this.peekStartsWith(k)&&(this.remaining=this.remaining.substring(k.length),!0)}capture(k){if(!this.consumeOptional(k))throw new E.vHH(4011,!1)}}function it(R){return R.segments.length>0?new Dn([],{[Ee]:R}):R}function Ge(R){const k={};for(const L of Object.keys(R.children)){const te=Ge(R.children[L]);if(L===Ee&&0===te.segments.length&&te.hasChildren())for(const[he,Qe]of Object.entries(te.children))k[he]=Qe;else(te.segments.length>0||te.hasChildren())&&(k[L]=te)}return function vt(R){if(1===R.numberOfChildren&&R.children[Ee]){const k=R.children[Ee];return new Dn(R.segments.concat(k.segments),k.children)}return R}(new Dn(R.segments,k))}function sn(R){return R instanceof wn}function qt(R){let k;const V=it(function A(te){const he={};for(const Ze of te.children){const Gt=A(Ze);he[Ze.outlet]=Gt}const Qe=new Dn(te.url,he);return te===R&&(k=Qe),Qe}(R.root));return k??V}function Xn(R,k,A,L){let V=R;for(;V.parent;)V=V.parent;if(0===k.length)return Xs(V,V,V,A,L);const te=function Ka(R){if("string"==typeof R[0]&&1===R.length&&"/"===R[0])return new ws(!0,0,R);let k=0,A=!1;const L=R.reduce((V,te,he)=>{if("object"==typeof te&&null!=te){if(te.outlets){const Qe={};return Object.entries(te.outlets).forEach(([Ze,Gt])=>{Qe[Ze]="string"==typeof Gt?Gt.split("/"):Gt}),[...V,{outlets:Qe}]}if(te.segmentPath)return[...V,te.segmentPath]}return"string"!=typeof te?[...V,te]:0===he?(te.split("/").forEach((Qe,Ze)=>{0==Ze&&"."===Qe||(0==Ze&&""===Qe?A=!0:".."===Qe?k++:""!=Qe&&V.push(Qe))}),V):[...V,te]},[]);return new ws(A,k,L)}(k);if(te.toRoot())return Xs(V,V,new Dn([],{}),A,L);const he=function Ya(R,k,A){if(R.isAbsolute)return new Qo(k,!0,0);if(!A)return new Qo(k,!1,NaN);if(null===A.parent)return new Qo(A,!0,0);const L=ai(R.commands[0])?0:1;return function Mn(R,k,A){let L=R,V=k,te=A;for(;te>V;){if(te-=V,L=L.parent,!L)throw new E.vHH(4005,!1);V=L.segments.length}return new Qo(L,!1,V-te)}(A,A.segments.length-1+L,R.numberOfDoubleDots)}(te,V,R),Qe=he.processChildren?$s(he.segmentGroup,he.index,te.commands):so(he.segmentGroup,he.index,te.commands);return Xs(V,he.segmentGroup,Qe,A,L)}function ai(R){return"object"==typeof R&&null!=R&&!R.outlets&&!R.segmentPath}function Or(R){return"object"==typeof R&&null!=R&&R.outlets}function Xs(R,k,A,L,V){let he,te={};L&&Object.entries(L).forEach(([Ze,Gt])=>{te[Ze]=Array.isArray(Gt)?Gt.map(Zn=>`${Zn}`):`${Gt}`}),he=R===k?A:Bi(R,k,A);const Qe=it(Ge(he));return new wn(Qe,te,V)}function Bi(R,k,A){const L={};return Object.entries(R.children).forEach(([V,te])=>{L[V]=te===k?A:Bi(te,k,A)}),new Dn(R.segments,L)}class ws{constructor(k,A,L){if(this.isAbsolute=k,this.numberOfDoubleDots=A,this.commands=L,k&&L.length>0&&ai(L[0]))throw new E.vHH(4003,!1);const V=L.find(Or);if(V&&V!==Mt(L))throw new E.vHH(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Qo{constructor(k,A,L){this.segmentGroup=k,this.processChildren=A,this.index=L}}function so(R,k,A){if(R||(R=new Dn([],{})),0===R.segments.length&&R.hasChildren())return $s(R,k,A);const L=function Jo(R,k,A){let L=0,V=k;const te={match:!1,pathIndex:0,commandIndex:0};for(;V<R.segments.length;){if(L>=A.length)return te;const he=R.segments[V],Qe=A[L];if(Or(Qe))break;const Ze=`${Qe}`,Gt=L<A.length-1?A[L+1]:null;if(V>0&&void 0===Ze)break;if(Ze&&Gt&&"object"==typeof Gt&&void 0===Gt.outlets){if(!ea(Ze,Gt,he))return te;L+=2}else{if(!ea(Ze,{},he))return te;L++}V++}return{match:!0,pathIndex:V,commandIndex:L}}(R,k,A),V=A.slice(L.commandIndex);if(L.match&&L.pathIndex<R.segments.length){const te=new Dn(R.segments.slice(0,L.pathIndex),{});return te.children[Ee]=new Dn(R.segments.slice(L.pathIndex),R.children),$s(te,0,V)}return L.match&&0===V.length?new Dn(R.segments,{}):L.match&&!R.hasChildren()?yo(R,k,A):L.match?$s(R,0,V):yo(R,k,A)}function $s(R,k,A){if(0===A.length)return new Dn(R.segments,{});{const L=function Za(R){return Or(R[0])?R[0].outlets:{[Ee]:R}}(A),V={};if(Object.keys(L).some(te=>te!==Ee)&&R.children[Ee]&&1===R.numberOfChildren&&0===R.children[Ee].segments.length){const te=$s(R.children[Ee],k,A);return new Dn(R.segments,te.children)}return Object.entries(L).forEach(([te,he])=>{"string"==typeof he&&(he=[he]),null!==he&&(V[te]=so(R.children[te],k,he))}),Object.entries(R.children).forEach(([te,he])=>{void 0===L[te]&&(V[te]=he)}),new Dn(R.segments,V)}}function yo(R,k,A){const L=R.segments.slice(0,k);let V=0;for(;V<A.length;){const te=A[V];if(Or(te)){const Ze=eo(te.outlets);return new Dn(L,Ze)}if(0===V&&ai(A[0])){L.push(new ki(R.segments[k].path,Xo(A[0]))),V++;continue}const he=Or(te)?te.outlets[Ee]:`${te}`,Qe=V<A.length-1?A[V+1]:null;he&&Qe&&ai(Qe)?(L.push(new ki(he,Xo(Qe))),V+=2):(L.push(new ki(he,{})),V++)}return new Dn(L,{})}function eo(R){const k={};return Object.entries(R).forEach(([A,L])=>{"string"==typeof L&&(L=[L]),null!==L&&(k[A]=yo(new Dn([],{}),0,L))}),k}function Xo(R){const k={};return Object.entries(R).forEach(([A,L])=>k[A]=`${L}`),k}function ea(R,k,A){return R==A.path&&Un(k,A.parameters)}const dr="imperative";class Er{constructor(k,A){this.id=k,this.url=A}}class li extends Er{constructor(k,A,L="imperative",V=null){super(k,A),this.type=0,this.navigationTrigger=L,this.restoredState=V}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class $r extends Er{constructor(k,A,L){super(k,A),this.urlAfterRedirects=L,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Ds extends Er{constructor(k,A,L,V){super(k,A),this.reason=L,this.code=V,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class zi extends Er{constructor(k,A,L,V){super(k,A),this.reason=L,this.code=V,this.type=16}}class oo extends Er{constructor(k,A,L,V){super(k,A),this.error=L,this.target=V,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class ui extends Er{constructor(k,A,L,V){super(k,A),this.urlAfterRedirects=L,this.state=V,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class fu extends Er{constructor(k,A,L,V){super(k,A),this.urlAfterRedirects=L,this.state=V,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Wi extends Er{constructor(k,A,L,V,te){super(k,A),this.urlAfterRedirects=L,this.state=V,this.shouldActivate=te,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class ta extends Er{constructor(k,A,L,V){super(k,A),this.urlAfterRedirects=L,this.state=V,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Qa extends Er{constructor(k,A,L,V){super(k,A),this.urlAfterRedirects=L,this.state=V,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Ja{constructor(k){this.route=k,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Oo{constructor(k){this.route=k,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Xa{constructor(k){this.snapshot=k,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class zs{constructor(k){this.snapshot=k,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class na{constructor(k){this.snapshot=k,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class vo{constructor(k){this.snapshot=k,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Ma{constructor(k,A,L){this.routerEvent=k,this.position=A,this.anchor=L,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class ks{}class Kn{constructor(k){this.url=k}}class hi{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new es,this.attachRef=null}}let es=(()=>{class R{constructor(){this.contexts=new Map}onChildOutletCreated(A,L){const V=this.getOrCreateContext(A);V.outlet=L,this.contexts.set(A,V)}onChildOutletDestroyed(A){const L=this.getContext(A);L&&(L.outlet=null,L.attachRef=null)}onOutletDeactivated(){const A=this.contexts;return this.contexts=new Map,A}onOutletReAttached(A){this.contexts=A}getOrCreateContext(A){let L=this.getContext(A);return L||(L=new hi,this.contexts.set(A,L)),L}getContext(A){return this.contexts.get(A)||null}static#e=this.\u0275fac=function(L){return new(L||R)};static#t=this.\u0275prov=E.Yz7({token:R,factory:R.\u0275fac,providedIn:"root"})}return R})();class Cr{constructor(k){this._root=k}get root(){return this._root.value}parent(k){const A=this.pathFromRoot(k);return A.length>1?A[A.length-2]:null}children(k){const A=ts(k,this._root);return A?A.children.map(L=>L.value):[]}firstChild(k){const A=ts(k,this._root);return A&&A.children.length>0?A.children[0].value:null}siblings(k){const A=qi(k,this._root);return A.length<2?[]:A[A.length-2].children.map(V=>V.value).filter(V=>V!==k)}pathFromRoot(k){return qi(k,this._root).map(A=>A.value)}}function ts(R,k){if(R===k.value)return k;for(const A of k.children){const L=ts(R,A);if(L)return L}return null}function qi(R,k){if(R===k.value)return[k];for(const A of k.children){const L=qi(R,A);if(L.length)return L.unshift(k),L}return[]}class _i{constructor(k,A){this.value=k,this.children=A}toString(){return`TreeNode(${this.value})`}}function Cs(R){const k={};return R&&R.children.forEach(A=>k[A.value.outlet]=A),k}class As extends Cr{constructor(k,A){super(k),this.snapshot=A,ri(this,k)}toString(){return this.snapshot.toString()}}function Mr(R,k){const A=function xt(R,k){const he=new Ki([],{},{},"",{},Ee,k,null,{});return new Xr("",new _i(he,[]))}(0,k),L=new ke.X([new ki("",{})]),V=new ke.X({}),te=new ke.X({}),he=new ke.X({}),Qe=new ke.X(""),Ze=new Cn(L,V,he,Qe,te,Ee,k,A.root);return Ze.snapshot=A.root,new As(new _i(Ze,[]),A)}class Cn{constructor(k,A,L,V,te,he,Qe,Ze){this.urlSubject=k,this.paramsSubject=A,this.queryParamsSubject=L,this.fragmentSubject=V,this.dataSubject=te,this.outlet=he,this.component=Qe,this._futureSnapshot=Ze,this.title=this.dataSubject?.pipe((0,On.U)(Gt=>Gt[xe]))??(0,Te.of)(void 0),this.url=k,this.params=A,this.queryParams=L,this.fragment=V,this.data=te}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,On.U)(k=>lt(k)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,On.U)(k=>lt(k)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function er(R,k="emptyOnly"){const A=R.pathFromRoot;let L=0;if("always"!==k)for(L=A.length-1;L>=1;){const V=A[L],te=A[L-1];if(V.routeConfig&&""===V.routeConfig.path)L--;else{if(te.component)break;L--}}return function ni(R){return R.reduce((k,A)=>({params:{...k.params,...A.params},data:{...k.data,...A.data},resolve:{...A.data,...k.resolve,...A.routeConfig?.data,...A._resolvedData}}),{params:{},data:{},resolve:{}})}(A.slice(L))}class Ki{get title(){return this.data?.[xe]}constructor(k,A,L,V,te,he,Qe,Ze,Gt){this.url=k,this.params=A,this.queryParams=L,this.fragment=V,this.data=te,this.outlet=he,this.component=Qe,this.routeConfig=Ze,this._resolve=Gt}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=lt(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=lt(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(L=>L.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class Xr extends Cr{constructor(k,A){super(A),this.url=k,ri(this,A)}toString(){return tr(this._root)}}function ri(R,k){k.value._routerState=R,k.children.forEach(A=>ri(R,A))}function tr(R){const k=R.children.length>0?` { ${R.children.map(tr).join(", ")} } `:"";return`${R.value}${k}`}function to(R){if(R.snapshot){const k=R.snapshot,A=R._futureSnapshot;R.snapshot=A,Un(k.queryParams,A.queryParams)||R.queryParamsSubject.next(A.queryParams),k.fragment!==A.fragment&&R.fragmentSubject.next(A.fragment),Un(k.params,A.params)||R.paramsSubject.next(A.params),function Lt(R,k){if(R.length!==k.length)return!1;for(let A=0;A<R.length;++A)if(!Un(R[A],k[A]))return!1;return!0}(k.url,A.url)||R.urlSubject.next(A.url),Un(k.data,A.data)||R.dataSubject.next(A.data)}else R.snapshot=R._futureSnapshot,R.dataSubject.next(R._futureSnapshot.data)}function Ar(R,k){const A=Un(R.params,k.params)&&function Oa(R,k){return Xi(R,k)&&R.every((A,L)=>Un(A.parameters,k[L].parameters))}(R.url,k.url);return A&&!(!R.parent!=!k.parent)&&(!R.parent||Ar(R.parent,k.parent))}let En=(()=>{class R{constructor(){this.activated=null,this._activatedRoute=null,this.name=Ee,this.activateEvents=new E.vpe,this.deactivateEvents=new E.vpe,this.attachEvents=new E.vpe,this.detachEvents=new E.vpe,this.parentContexts=(0,E.f3M)(es),this.location=(0,E.f3M)(E.s_b),this.changeDetector=(0,E.f3M)(E.sBO),this.environmentInjector=(0,E.f3M)(E.lqb),this.inputBinder=(0,E.f3M)(ao,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(A){if(A.name){const{firstChange:L,previousValue:V}=A.name;if(L)return;this.isTrackedInParentContexts(V)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(V)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(A){return this.parentContexts.getContext(A)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const A=this.parentContexts.getContext(this.name);A?.route&&(A.attachRef?this.attach(A.attachRef,A.route):this.activateWith(A.route,A.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new E.vHH(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new E.vHH(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new E.vHH(4012,!1);this.location.detach();const A=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(A.instance),A}attach(A,L){this.activated=A,this._activatedRoute=L,this.location.insert(A.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(A.instance)}deactivate(){if(this.activated){const A=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(A)}}activateWith(A,L){if(this.isActivated)throw new E.vHH(4013,!1);this._activatedRoute=A;const V=this.location,he=A.snapshot.component,Qe=this.parentContexts.getOrCreateContext(this.name).children,Ze=new yi(A,Qe,V.injector);this.activated=V.createComponent(he,{index:V.length,injector:Ze,environmentInjector:L??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static#e=this.\u0275fac=function(L){return new(L||R)};static#t=this.\u0275dir=E.lG2({type:R,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[E.TTD]})}return R})();class yi{constructor(k,A,L){this.route=k,this.childContexts=A,this.parent=L}get(k,A){return k===Cn?this.route:k===es?this.childContexts:this.parent.get(k,A)}}const ao=new E.OlP("");let Yi=(()=>{class R{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(A){this.unsubscribeFromRouteData(A),this.subscribeToRouteData(A)}unsubscribeFromRouteData(A){this.outletDataSubscriptions.get(A)?.unsubscribe(),this.outletDataSubscriptions.delete(A)}subscribeToRouteData(A){const{activatedRoute:L}=A,V=Et([L.queryParams,L.params,L.data]).pipe((0,Pr.w)(([te,he,Qe],Ze)=>(Qe={...te,...he,...Qe},0===Ze?(0,Te.of)(Qe):Promise.resolve(Qe)))).subscribe(te=>{if(!A.isActivated||!A.activatedComponentRef||A.activatedRoute!==L||null===L.component)return void this.unsubscribeFromRouteData(A);const he=(0,E.qFp)(L.component);if(he)for(const{templateName:Qe}of he.inputs)A.activatedComponentRef.setInput(Qe,te[Qe]);else this.unsubscribeFromRouteData(A)});this.outletDataSubscriptions.set(A,V)}static#e=this.\u0275fac=function(L){return new(L||R)};static#t=this.\u0275prov=E.Yz7({token:R,factory:R.\u0275fac})}return R})();function sr(R,k,A){if(A&&R.shouldReuseRoute(k.value,A.value.snapshot)){const L=A.value;L._futureSnapshot=k.value;const V=function Mo(R,k,A){return k.children.map(L=>{for(const V of A.children)if(R.shouldReuseRoute(L.value,V.value.snapshot))return sr(R,L,V);return sr(R,L)})}(R,k,A);return new _i(L,V)}{if(R.shouldAttach(k.value)){const te=R.retrieve(k.value);if(null!==te){const he=te.route;return he.value._futureSnapshot=k.value,he.children=k.children.map(Qe=>sr(R,Qe)),he}}const L=function wi(R){return new Cn(new ke.X(R.url),new ke.X(R.params),new ke.X(R.queryParams),new ke.X(R.fragment),new ke.X(R.data),R.outlet,R.component,R)}(k.value),V=k.children.map(te=>sr(R,te));return new _i(L,V)}}const Zi="ngNavigationCancelingError";function fs(R,k){const{redirectTo:A,navigationBehaviorOptions:L}=sn(k)?{redirectTo:k,navigationBehaviorOptions:void 0}:k,V=no(!1,0,k);return V.url=A,V.navigationBehaviorOptions=L,V}function no(R,k,A){const L=new Error("NavigationCancelingError: "+(R||""));return L[Zi]=!0,L.cancellationCode=k,A&&(L.url=A),L}function gs(R){return R&&R[Zi]}let el=(()=>{class R{static#e=this.\u0275fac=function(L){return new(L||R)};static#t=this.\u0275cmp=E.Xpm({type:R,selectors:[["ng-component"]],standalone:!0,features:[E.jDz],decls:1,vars:0,template:function(L,V){1&L&&E._UZ(0,"router-outlet")},dependencies:[En],encapsulation:2})}return R})();function vl(R){const k=R.children&&R.children.map(vl),A=k?{...R,children:k}:{...R};return!A.component&&!A.loadComponent&&(k||A.loadChildren)&&A.outlet&&A.outlet!==Ee&&(A.component=el),A}function kr(R){return R.outlet||Ee}function Rs(R){if(!R)return null;if(R.routeConfig?._injector)return R.routeConfig._injector;for(let k=R.parent;k;k=k.parent){const A=k.routeConfig;if(A?._loadedInjector)return A._loadedInjector;if(A?._injector)return A._injector}return null}class Ls{constructor(k,A,L,V,te){this.routeReuseStrategy=k,this.futureState=A,this.currState=L,this.forwardEvent=V,this.inputBindingEnabled=te}activate(k){const A=this.futureState._root,L=this.currState?this.currState._root:null;this.deactivateChildRoutes(A,L,k),to(this.futureState.root),this.activateChildRoutes(A,L,k)}deactivateChildRoutes(k,A,L){const V=Cs(A);k.children.forEach(te=>{const he=te.value.outlet;this.deactivateRoutes(te,V[he],L),delete V[he]}),Object.values(V).forEach(te=>{this.deactivateRouteAndItsChildren(te,L)})}deactivateRoutes(k,A,L){const V=k.value,te=A?A.value:null;if(V===te)if(V.component){const he=L.getContext(V.outlet);he&&this.deactivateChildRoutes(k,A,he.children)}else this.deactivateChildRoutes(k,A,L);else te&&this.deactivateRouteAndItsChildren(A,L)}deactivateRouteAndItsChildren(k,A){k.value.component&&this.routeReuseStrategy.shouldDetach(k.value.snapshot)?this.detachAndStoreRouteSubtree(k,A):this.deactivateRouteAndOutlet(k,A)}detachAndStoreRouteSubtree(k,A){const L=A.getContext(k.value.outlet),V=L&&k.value.component?L.children:A,te=Cs(k);for(const he of Object.keys(te))this.deactivateRouteAndItsChildren(te[he],V);if(L&&L.outlet){const he=L.outlet.detach(),Qe=L.children.onOutletDeactivated();this.routeReuseStrategy.store(k.value.snapshot,{componentRef:he,route:k,contexts:Qe})}}deactivateRouteAndOutlet(k,A){const L=A.getContext(k.value.outlet),V=L&&k.value.component?L.children:A,te=Cs(k);for(const he of Object.keys(te))this.deactivateRouteAndItsChildren(te[he],V);L&&(L.outlet&&(L.outlet.deactivate(),L.children.onOutletDeactivated()),L.attachRef=null,L.route=null)}activateChildRoutes(k,A,L){const V=Cs(A);k.children.forEach(te=>{this.activateRoutes(te,V[te.value.outlet],L),this.forwardEvent(new vo(te.value.snapshot))}),k.children.length&&this.forwardEvent(new zs(k.value.snapshot))}activateRoutes(k,A,L){const V=k.value,te=A?A.value:null;if(to(V),V===te)if(V.component){const he=L.getOrCreateContext(V.outlet);this.activateChildRoutes(k,A,he.children)}else this.activateChildRoutes(k,A,L);else if(V.component){const he=L.getOrCreateContext(V.outlet);if(this.routeReuseStrategy.shouldAttach(V.snapshot)){const Qe=this.routeReuseStrategy.retrieve(V.snapshot);this.routeReuseStrategy.store(V.snapshot,null),he.children.onOutletReAttached(Qe.contexts),he.attachRef=Qe.componentRef,he.route=Qe.route.value,he.outlet&&he.outlet.attach(Qe.componentRef,Qe.route.value),to(Qe.route.value),this.activateChildRoutes(k,null,he.children)}else{const Qe=Rs(V.snapshot);he.attachRef=null,he.route=V,he.injector=Qe,he.outlet&&he.outlet.activateWith(V,he.injector),this.activateChildRoutes(k,null,he.children)}}else this.activateChildRoutes(k,null,L)}}class Il{constructor(k){this.path=k,this.route=this.path[this.path.length-1]}}class Io{constructor(k,A){this.component=k,this.route=A}}function ra(R,k,A){const L=R._root;return xo(L,k?k._root:null,A,[L.value])}function ia(R,k){const A=Symbol(),L=k.get(R,A);return L===A?"function"!=typeof R||(0,E.Z0I)(R)?k.get(R):R:L}function xo(R,k,A,L,V={canDeactivateChecks:[],canActivateChecks:[]}){const te=Cs(k);return R.children.forEach(he=>{(function ko(R,k,A,L,V={canDeactivateChecks:[],canActivateChecks:[]}){const te=R.value,he=k?k.value:null,Qe=A?A.getContext(R.value.outlet):null;if(he&&te.routeConfig===he.routeConfig){const Ze=function xa(R,k,A){if("function"==typeof A)return A(R,k);switch(A){case"pathParamsChange":return!Xi(R.url,k.url);case"pathParamsOrQueryParamsChange":return!Xi(R.url,k.url)||!Un(R.queryParams,k.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Ar(R,k)||!Un(R.queryParams,k.queryParams);default:return!Ar(R,k)}}(he,te,te.routeConfig.runGuardsAndResolvers);Ze?V.canActivateChecks.push(new Il(L)):(te.data=he.data,te._resolvedData=he._resolvedData),xo(R,k,te.component?Qe?Qe.children:null:A,L,V),Ze&&Qe&&Qe.outlet&&Qe.outlet.isActivated&&V.canDeactivateChecks.push(new Io(Qe.outlet.component,he))}else he&&Fo(k,Qe,V),V.canActivateChecks.push(new Il(L)),xo(R,null,te.component?Qe?Qe.children:null:A,L,V)})(he,te[he.value.outlet],A,L.concat([he.value]),V),delete te[he.value.outlet]}),Object.entries(te).forEach(([he,Qe])=>Fo(Qe,A.getContext(he),V)),V}function Fo(R,k,A){const L=Cs(R),V=R.value;Object.entries(L).forEach(([te,he])=>{Fo(he,V.component?k?k.children.getContext(te):null:k,A)}),A.canDeactivateChecks.push(new Io(V.component&&k&&k.outlet&&k.outlet.isActivated?k.outlet.component:null,V))}function Sr(R){return"function"==typeof R}function Sn(R){return R instanceof bt.K||"EmptyError"===R?.name}const Ui=Symbol("INITIAL_VALUE");function _s(){return(0,Pr.w)(R=>Et(R.map(k=>k.pipe((0,mr.q)(1),(0,tn.O)(Ui)))).pipe((0,On.U)(k=>{for(const A of k)if(!0!==A){if(A===Ui)return Ui;if(!1===A||A instanceof wn)return A}return!0}),(0,Bt.h)(k=>k!==Ui),(0,mr.q)(1)))}function va(R){return(0,He.z)((0,Fe.b)(k=>{if(sn(k))throw fs(0,k)}),(0,On.U)(k=>!0===k))}class Bo{constructor(k){this.segmentGroup=k||null}}class tl{constructor(k){this.urlTree=k}}function To(R){return Pe(new Bo(R))}function ju(R){return Pe(new tl(R))}class nl{constructor(k,A){this.urlSerializer=k,this.urlTree=A}noMatchError(k){return new E.vHH(4002,!1)}lineralizeSegments(k,A){let L=[],V=A.root;for(;;){if(L=L.concat(V.segments),0===V.numberOfChildren)return(0,Te.of)(L);if(V.numberOfChildren>1||!V.children[Ee])return Pe(new E.vHH(4e3,!1));V=V.children[Ee]}}applyRedirectCommands(k,A,L){return this.applyRedirectCreateUrlTree(A,this.urlSerializer.parse(A),k,L)}applyRedirectCreateUrlTree(k,A,L,V){const te=this.createSegmentGroup(k,A.root,L,V);return new wn(te,this.createQueryParams(A.queryParams,this.urlTree.queryParams),A.fragment)}createQueryParams(k,A){const L={};return Object.entries(k).forEach(([V,te])=>{if("string"==typeof te&&te.startsWith(":")){const Qe=te.substring(1);L[V]=A[Qe]}else L[V]=te}),L}createSegmentGroup(k,A,L,V){const te=this.createSegments(k,A.segments,L,V);let he={};return Object.entries(A.children).forEach(([Qe,Ze])=>{he[Qe]=this.createSegmentGroup(k,Ze,L,V)}),new Dn(te,he)}createSegments(k,A,L,V){return A.map(te=>te.path.startsWith(":")?this.findPosParam(k,te,V):this.findOrReturn(te,L))}findPosParam(k,A,L){const V=L[A.path.substring(1)];if(!V)throw new E.vHH(4001,!1);return V}findOrReturn(k,A){let L=0;for(const V of A){if(V.path===k.path)return A.splice(L),V;L++}return k}}const jl={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function Fa(R,k,A,L,V){const te=El(R,k,A);return te.matched?(L=function Vn(R,k){return R.providers&&!R._injector&&(R._injector=(0,E.MMx)(R.providers,k,`Route: ${R.path}`)),R._injector??k}(k,L),function pu(R,k,A,L){const V=k.canMatch;if(!V||0===V.length)return(0,Te.of)(!0);const te=V.map(he=>{const Qe=ia(he,R);return an(function oe(R){return R&&Sr(R.canMatch)}(Qe)?Qe.canMatch(k,A):R.runInContext(()=>Qe(k,A)))});return(0,Te.of)(te).pipe(_s(),va())}(L,k,A).pipe((0,On.U)(he=>!0===he?te:{...jl}))):(0,Te.of)(te)}function El(R,k,A){if(""===k.path)return"full"===k.pathMatch&&(R.hasChildren()||A.length>0)?{...jl}:{matched:!0,consumedSegments:[],remainingSegments:A,parameters:{},positionalParamSegments:{}};const V=(k.matcher||pt)(A,R,k);if(!V)return{...jl};const te={};Object.entries(V.posParams??{}).forEach(([Qe,Ze])=>{te[Qe]=Ze.path});const he=V.consumed.length>0?{...te,...V.consumed[V.consumed.length-1].parameters}:te;return{matched:!0,consumedSegments:V.consumed,remainingSegments:A.slice(V.consumed.length),parameters:he,positionalParamSegments:V.posParams??{}}}function lo(R,k,A,L){return A.length>0&&function jo(R,k,A){return A.some(L=>wc(R,k,L)&&kr(L)!==Ee)}(R,A,L)?{segmentGroup:new Dn(k,bc(L,new Dn(A,R.children))),slicedSegments:[]}:0===A.length&&function hh(R,k,A){return A.some(L=>wc(R,k,L))}(R,A,L)?{segmentGroup:new Dn(R.segments,Tl(R,0,A,L,R.children)),slicedSegments:A}:{segmentGroup:new Dn(R.segments,R.children),slicedSegments:A}}function Tl(R,k,A,L,V){const te={};for(const he of L)if(wc(R,A,he)&&!V[kr(he)]){const Qe=new Dn([],{});te[kr(he)]=Qe}return{...V,...te}}function bc(R,k){const A={};A[Ee]=k;for(const L of R)if(""===L.path&&kr(L)!==Ee){const V=new Dn([],{});A[kr(L)]=V}return A}function wc(R,k,A){return(!(R.hasChildren()||k.length>0)||"full"!==A.pathMatch)&&""===A.path}class uo{constructor(k,A,L,V,te,he,Qe){this.injector=k,this.configLoader=A,this.rootComponentType=L,this.config=V,this.urlTree=te,this.paramsInheritanceStrategy=he,this.urlSerializer=Qe,this.allowRedirects=!0,this.applyRedirects=new nl(this.urlSerializer,this.urlTree)}noMatchError(k){return new E.vHH(4002,!1)}recognize(){const k=lo(this.urlTree.root,[],[],this.config).segmentGroup;return this.processSegmentGroup(this.injector,this.config,k,Ee).pipe(Ue(A=>{if(A instanceof tl)return this.allowRedirects=!1,this.urlTree=A.urlTree,this.match(A.urlTree);throw A instanceof Bo?this.noMatchError(A):A}),(0,On.U)(A=>{const L=new Ki([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},Ee,this.rootComponentType,null,{}),V=new _i(L,A),te=new Xr("",V),he=function In(R,k,A=null,L=null){return Xn(qt(R),k,A,L)}(L,[],this.urlTree.queryParams,this.urlTree.fragment);return he.queryParams=this.urlTree.queryParams,te.url=this.urlSerializer.serialize(he),this.inheritParamsAndData(te._root),{state:te,tree:he}}))}match(k){return this.processSegmentGroup(this.injector,this.config,k.root,Ee).pipe(Ue(L=>{throw L instanceof Bo?this.noMatchError(L):L}))}inheritParamsAndData(k){const A=k.value,L=er(A,this.paramsInheritanceStrategy);A.params=Object.freeze(L.params),A.data=Object.freeze(L.data),k.children.forEach(V=>this.inheritParamsAndData(V))}processSegmentGroup(k,A,L,V){return 0===L.segments.length&&L.hasChildren()?this.processChildren(k,A,L):this.processSegment(k,A,L,L.segments,V,!0)}processChildren(k,A,L){const V=[];for(const te of Object.keys(L.children))"primary"===te?V.unshift(te):V.push(te);return(0,Ne.D)(V).pipe(Ke(te=>{const he=L.children[te],Qe=function Qi(R,k){const A=R.filter(L=>kr(L)===k);return A.push(...R.filter(L=>kr(L)!==k)),A}(A,te);return this.processSegmentGroup(k,Qe,he,te)}),(0,Xe.R)((te,he)=>(te.push(...he),te)),(0,Ft.d)(null),function Ut(R,k){const A=arguments.length>=2;return L=>L.pipe(R?(0,Bt.h)((V,te)=>R(V,te,L)):qe.y,St(1),A?(0,Ft.d)(k):(0,cr.T)(()=>new bt.K))}(),(0,be.z)(te=>{if(null===te)return To(L);const he=co(te);return function La(R){R.sort((k,A)=>k.value.outlet===Ee?-1:A.value.outlet===Ee?1:k.value.outlet.localeCompare(A.value.outlet))}(he),(0,Te.of)(he)}))}processSegment(k,A,L,V,te,he){return(0,Ne.D)(A).pipe(Ke(Qe=>this.processSegmentAgainstRoute(Qe._injector??k,A,Qe,L,V,te,he).pipe(Ue(Ze=>{if(Ze instanceof Bo)return(0,Te.of)(null);throw Ze}))),(0,Se.P)(Qe=>!!Qe),Ue(Qe=>{if(Sn(Qe))return function Dc(R,k,A){return 0===k.length&&!R.children[A]}(L,V,te)?(0,Te.of)([]):To(L);throw Qe}))}processSegmentAgainstRoute(k,A,L,V,te,he,Qe){return function Hl(R,k,A,L){return!!(kr(R)===L||L!==Ee&&wc(k,A,R))&&("**"===R.path||El(k,R,A).matched)}(L,V,te,he)?void 0===L.redirectTo?this.matchSegmentAgainstRoute(k,V,L,te,he,Qe):Qe&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(k,V,A,L,te,he):To(V):To(V)}expandSegmentAgainstRouteUsingRedirect(k,A,L,V,te,he){return"**"===V.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(k,L,V,he):this.expandRegularSegmentAgainstRouteUsingRedirect(k,A,L,V,te,he)}expandWildCardWithParamsAgainstRouteUsingRedirect(k,A,L,V){const te=this.applyRedirects.applyRedirectCommands([],L.redirectTo,{});return L.redirectTo.startsWith("/")?ju(te):this.applyRedirects.lineralizeSegments(L,te).pipe((0,be.z)(he=>{const Qe=new Dn(he,{});return this.processSegment(k,A,Qe,he,V,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(k,A,L,V,te,he){const{matched:Qe,consumedSegments:Ze,remainingSegments:Gt,positionalParamSegments:Zn}=El(A,V,te);if(!Qe)return To(A);const zr=this.applyRedirects.applyRedirectCommands(Ze,V.redirectTo,Zn);return V.redirectTo.startsWith("/")?ju(zr):this.applyRedirects.lineralizeSegments(V,zr).pipe((0,be.z)(kn=>this.processSegment(k,L,A,kn.concat(Gt),he,!1)))}matchSegmentAgainstRoute(k,A,L,V,te,he){let Qe;if("**"===L.path){const Ze=V.length>0?Mt(V).parameters:{},Gt=new Ki(V,Ze,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,rs(L),kr(L),L.component??L._loadedComponent??null,L,gu(L));Qe=(0,Te.of)({snapshot:Gt,consumedSegments:[],remainingSegments:[]}),A.children={}}else Qe=Fa(A,L,V,k).pipe((0,On.U)(({matched:Ze,consumedSegments:Gt,remainingSegments:Zn,parameters:zr})=>Ze?{snapshot:new Ki(Gt,zr,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,rs(L),kr(L),L.component??L._loadedComponent??null,L,gu(L)),consumedSegments:Gt,remainingSegments:Zn}:null));return Qe.pipe((0,Pr.w)(Ze=>null===Ze?To(A):this.getChildConfig(k=L._injector??k,L,V).pipe((0,Pr.w)(({routes:Gt})=>{const Zn=L._loadedInjector??k,{snapshot:zr,consumedSegments:kn,remainingSegments:Hi}=Ze,{segmentGroup:pi,slicedSegments:$u}=lo(A,kn,Hi,Gt);if(0===$u.length&&pi.hasChildren())return this.processChildren(Zn,Gt,pi).pipe((0,On.U)(Ua=>null===Ua?null:[new _i(zr,Ua)]));if(0===Gt.length&&0===$u.length)return(0,Te.of)([new _i(zr,[])]);const is=kr(L)===te;return this.processSegment(Zn,Gt,pi,$u,is?Ee:te,!0).pipe((0,On.U)(Ua=>[new _i(zr,Ua)]))}))))}getChildConfig(k,A,L){return A.children?(0,Te.of)({routes:A.children,injector:k}):A.loadChildren?void 0!==A._loadedRoutes?(0,Te.of)({routes:A._loadedRoutes,injector:A._loadedInjector}):function ys(R,k,A,L){const V=k.canLoad;if(void 0===V||0===V.length)return(0,Te.of)(!0);const te=V.map(he=>{const Qe=ia(he,R);return an(function ka(R){return R&&Sr(R.canLoad)}(Qe)?Qe.canLoad(k,A):R.runInContext(()=>Qe(k,A)))});return(0,Te.of)(te).pipe(_s(),va())}(k,A,L).pipe((0,be.z)(V=>V?this.configLoader.loadChildren(k,A).pipe((0,Fe.b)(te=>{A._loadedRoutes=te.routes,A._loadedInjector=te.injector})):function Ul(R){return Pe(no(!1,3))}())):(0,Te.of)({routes:[],injector:k})}}function Cc(R){const k=R.value.routeConfig;return k&&""===k.path}function co(R){const k=[],A=new Set;for(const L of R){if(!Cc(L)){k.push(L);continue}const V=k.find(te=>L.value.routeConfig===te.value.routeConfig);void 0!==V?(V.children.push(...L.children),A.add(V)):k.push(L)}for(const L of A){const V=co(L.children);k.push(new _i(L.value,V))}return k.filter(L=>!A.has(L))}function rs(R){return R.data||{}}function gu(R){return R.resolve||{}}function ct(R){return"string"==typeof R.title||null===R.title}function dn(R){return(0,Pr.w)(k=>{const A=R(k);return A?(0,Ne.D)(A).pipe((0,On.U)(()=>k)):(0,Te.of)(k)})}const nr=new E.OlP("ROUTES");let _r=(()=>{class R{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=(0,E.f3M)(E.Sil)}loadComponent(A){if(this.componentLoaders.get(A))return this.componentLoaders.get(A);if(A._loadedComponent)return(0,Te.of)(A._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(A);const L=an(A.loadComponent()).pipe((0,On.U)(ii),(0,Fe.b)(te=>{this.onLoadEndListener&&this.onLoadEndListener(A),A._loadedComponent=te}),Zt(()=>{this.componentLoaders.delete(A)})),V=new Ot(L,()=>new wt.x).pipe(de());return this.componentLoaders.set(A,V),V}loadChildren(A,L){if(this.childrenLoaders.get(L))return this.childrenLoaders.get(L);if(L._loadedRoutes)return(0,Te.of)({routes:L._loadedRoutes,injector:L._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(L);const te=function Jn(R,k,A,L){return an(R.loadChildren()).pipe((0,On.U)(ii),(0,be.z)(V=>V instanceof E.YKP||Array.isArray(V)?(0,Te.of)(V):(0,Ne.D)(k.compileModuleAsync(V))),(0,On.U)(V=>{L&&L(R);let te,he,Qe=!1;return Array.isArray(V)?(he=V,!0):(te=V.create(A).injector,he=te.get(nr,[],{optional:!0,self:!0}).flat()),{routes:he.map(vl),injector:te}}))}(L,this.compiler,A,this.onLoadEndListener).pipe(Zt(()=>{this.childrenLoaders.delete(L)})),he=new Ot(te,()=>new wt.x).pipe(de());return this.childrenLoaders.set(L,he),he}static#e=this.\u0275fac=function(L){return new(L||R)};static#t=this.\u0275prov=E.Yz7({token:R,factory:R.\u0275fac,providedIn:"root"})}return R})();function ii(R){return function bn(R){return R&&"object"==typeof R&&"default"in R}(R)?R.default:R}let xr=(()=>{class R{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new wt.x,this.transitionAbortSubject=new wt.x,this.configLoader=(0,E.f3M)(_r),this.environmentInjector=(0,E.f3M)(E.lqb),this.urlSerializer=(0,E.f3M)(ur),this.rootContexts=(0,E.f3M)(es),this.inputBindingEnabled=null!==(0,E.f3M)(ao,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>(0,Te.of)(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=V=>this.events.next(new Oo(V)),this.configLoader.onLoadStartListener=V=>this.events.next(new Ja(V))}complete(){this.transitions?.complete()}handleNavigationRequest(A){const L=++this.navigationId;this.transitions?.next({...this.transitions.value,...A,id:L})}setupNavigations(A,L,V){return this.transitions=new ke.X({id:0,currentUrlTree:L,currentRawUrl:L,currentBrowserUrl:L,extractedUrl:A.urlHandlingStrategy.extract(L),urlAfterRedirects:A.urlHandlingStrategy.extract(L),rawUrl:L,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:dr,restoredState:null,currentSnapshot:V.snapshot,targetSnapshot:null,currentRouterState:V,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe((0,Bt.h)(te=>0!==te.id),(0,On.U)(te=>({...te,extractedUrl:A.urlHandlingStrategy.extract(te.rawUrl)})),(0,Pr.w)(te=>{this.currentTransition=te;let he=!1,Qe=!1;return(0,Te.of)(te).pipe((0,Fe.b)(Ze=>{this.currentNavigation={id:Ze.id,initialUrl:Ze.rawUrl,extractedUrl:Ze.extractedUrl,trigger:Ze.source,extras:Ze.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),(0,Pr.w)(Ze=>{const Gt=Ze.currentBrowserUrl.toString(),Zn=!A.navigated||Ze.extractedUrl.toString()!==Gt||Gt!==Ze.currentUrlTree.toString();if(!Zn&&"reload"!==(Ze.extras.onSameUrlNavigation??A.onSameUrlNavigation)){const kn="";return this.events.next(new zi(Ze.id,this.urlSerializer.serialize(Ze.rawUrl),kn,0)),Ze.resolve(null),$e.E}if(A.urlHandlingStrategy.shouldProcessUrl(Ze.rawUrl))return(0,Te.of)(Ze).pipe((0,Pr.w)(kn=>{const Hi=this.transitions?.getValue();return this.events.next(new li(kn.id,this.urlSerializer.serialize(kn.extractedUrl),kn.source,kn.restoredState)),Hi!==this.transitions?.getValue()?$e.E:Promise.resolve(kn)}),function O(R,k,A,L,V,te){return(0,be.z)(he=>function rl(R,k,A,L,V,te,he="emptyOnly"){return new uo(R,k,A,L,V,he,te).recognize()}(R,k,A,L,he.extractedUrl,V,te).pipe((0,On.U)(({state:Qe,tree:Ze})=>({...he,targetSnapshot:Qe,urlAfterRedirects:Ze}))))}(this.environmentInjector,this.configLoader,this.rootComponentType,A.config,this.urlSerializer,A.paramsInheritanceStrategy),(0,Fe.b)(kn=>{te.targetSnapshot=kn.targetSnapshot,te.urlAfterRedirects=kn.urlAfterRedirects,this.currentNavigation={...this.currentNavigation,finalUrl:kn.urlAfterRedirects};const Hi=new ui(kn.id,this.urlSerializer.serialize(kn.extractedUrl),this.urlSerializer.serialize(kn.urlAfterRedirects),kn.targetSnapshot);this.events.next(Hi)}));if(Zn&&A.urlHandlingStrategy.shouldProcessUrl(Ze.currentRawUrl)){const{id:kn,extractedUrl:Hi,source:pi,restoredState:$u,extras:is}=Ze,Ua=new li(kn,this.urlSerializer.serialize(Hi),pi,$u);this.events.next(Ua);const Ta=Mr(0,this.rootComponentType).snapshot;return this.currentTransition=te={...Ze,targetSnapshot:Ta,urlAfterRedirects:Hi,extras:{...is,skipLocationChange:!1,replaceUrl:!1}},(0,Te.of)(te)}{const kn="";return this.events.next(new zi(Ze.id,this.urlSerializer.serialize(Ze.extractedUrl),kn,1)),Ze.resolve(null),$e.E}}),(0,Fe.b)(Ze=>{const Gt=new fu(Ze.id,this.urlSerializer.serialize(Ze.extractedUrl),this.urlSerializer.serialize(Ze.urlAfterRedirects),Ze.targetSnapshot);this.events.next(Gt)}),(0,On.U)(Ze=>(this.currentTransition=te={...Ze,guards:ra(Ze.targetSnapshot,Ze.currentSnapshot,this.rootContexts)},te)),function Eo(R,k){return(0,be.z)(A=>{const{targetSnapshot:L,currentSnapshot:V,guards:{canActivateChecks:te,canDeactivateChecks:he}}=A;return 0===he.length&&0===te.length?(0,Te.of)({...A,guardsResult:!0}):function Lo(R,k,A,L){return(0,Ne.D)(R).pipe((0,be.z)(V=>function Vs(R,k,A,L,V){const te=k&&k.routeConfig?k.routeConfig.canDeactivate:null;if(!te||0===te.length)return(0,Te.of)(!0);const he=te.map(Qe=>{const Ze=Rs(k)??V,Gt=ia(Qe,Ze);return an(function j(R){return R&&Sr(R.canDeactivate)}(Gt)?Gt.canDeactivate(R,k,A,L):Ze.runInContext(()=>Gt(R,k,A,L))).pipe((0,Se.P)())});return(0,Te.of)(he).pipe(_s())}(V.component,V.route,A,k,L)),(0,Se.P)(V=>!0!==V,!0))}(he,L,V,R).pipe((0,be.z)(Qe=>Qe&&function sa(R){return"boolean"==typeof R}(Qe)?function Ji(R,k,A,L){return(0,Ne.D)(k).pipe(Ke(V=>(0,jt.z)(function Vo(R,k){return null!==R&&k&&k(new Xa(R)),(0,Te.of)(!0)}(V.route.parent,L),function ns(R,k){return null!==R&&k&&k(new na(R)),(0,Te.of)(!0)}(V.route,L),function Ci(R,k,A){const L=k[k.length-1],te=k.slice(0,k.length-1).reverse().map(he=>function Uu(R){const k=R.routeConfig?R.routeConfig.canActivateChild:null;return k&&0!==k.length?{node:R,guards:k}:null}(he)).filter(he=>null!==he).map(he=>me(()=>{const Qe=he.guards.map(Ze=>{const Gt=Rs(he.node)??A,Zn=ia(Ze,Gt);return an(function K(R){return R&&Sr(R.canActivateChild)}(Zn)?Zn.canActivateChild(L,R):Gt.runInContext(()=>Zn(L,R))).pipe((0,Se.P)())});return(0,Te.of)(Qe).pipe(_s())}));return(0,Te.of)(te).pipe(_s())}(R,V.path,A),function Bl(R,k,A){const L=k.routeConfig?k.routeConfig.canActivate:null;if(!L||0===L.length)return(0,Te.of)(!0);const V=L.map(te=>me(()=>{const he=Rs(k)??A,Qe=ia(te,he);return an(function q(R){return R&&Sr(R.canActivate)}(Qe)?Qe.canActivate(k,R):he.runInContext(()=>Qe(k,R))).pipe((0,Se.P)())}));return(0,Te.of)(V).pipe(_s())}(R,V.route,A))),(0,Se.P)(V=>!0!==V,!0))}(L,te,R,k):(0,Te.of)(Qe)),(0,On.U)(Qe=>({...A,guardsResult:Qe})))})}(this.environmentInjector,Ze=>this.events.next(Ze)),(0,Fe.b)(Ze=>{if(te.guardsResult=Ze.guardsResult,sn(Ze.guardsResult))throw fs(0,Ze.guardsResult);const Gt=new Wi(Ze.id,this.urlSerializer.serialize(Ze.extractedUrl),this.urlSerializer.serialize(Ze.urlAfterRedirects),Ze.targetSnapshot,!!Ze.guardsResult);this.events.next(Gt)}),(0,Bt.h)(Ze=>!!Ze.guardsResult||(this.cancelNavigationTransition(Ze,"",3),!1)),dn(Ze=>{if(Ze.guards.canActivateChecks.length)return(0,Te.of)(Ze).pipe((0,Fe.b)(Gt=>{const Zn=new ta(Gt.id,this.urlSerializer.serialize(Gt.extractedUrl),this.urlSerializer.serialize(Gt.urlAfterRedirects),Gt.targetSnapshot);this.events.next(Zn)}),(0,Pr.w)(Gt=>{let Zn=!1;return(0,Te.of)(Gt).pipe(function J(R,k){return(0,be.z)(A=>{const{targetSnapshot:L,guards:{canActivateChecks:V}}=A;if(!V.length)return(0,Te.of)(A);let te=0;return(0,Ne.D)(V).pipe(Ke(he=>function H(R,k,A,L){const V=R.routeConfig,te=R._resolve;return void 0!==V?.title&&!ct(V)&&(te[xe]=V.title),function Z(R,k,A,L){const V=function ve(R){return[...Object.keys(R),...Object.getOwnPropertySymbols(R)]}(R);if(0===V.length)return(0,Te.of)({});const te={};return(0,Ne.D)(V).pipe((0,be.z)(he=>function et(R,k,A,L){const V=Rs(k)??L,te=ia(R,V);return an(te.resolve?te.resolve(k,A):V.runInContext(()=>te(k,A)))}(R[he],k,A,L).pipe((0,Se.P)(),(0,Fe.b)(Qe=>{te[he]=Qe}))),St(1),(0,qn.h)(te),Ue(he=>Sn(he)?$e.E:Pe(he)))}(te,R,k,L).pipe((0,On.U)(he=>(R._resolvedData=he,R.data=er(R,A).resolve,V&&ct(V)&&(R.data[xe]=V.title),null)))}(he.route,L,R,k)),(0,Fe.b)(()=>te++),St(1),(0,be.z)(he=>te===V.length?(0,Te.of)(A):$e.E))})}(A.paramsInheritanceStrategy,this.environmentInjector),(0,Fe.b)({next:()=>Zn=!0,complete:()=>{Zn||this.cancelNavigationTransition(Gt,"",2)}}))}),(0,Fe.b)(Gt=>{const Zn=new Qa(Gt.id,this.urlSerializer.serialize(Gt.extractedUrl),this.urlSerializer.serialize(Gt.urlAfterRedirects),Gt.targetSnapshot);this.events.next(Zn)}))}),dn(Ze=>{const Gt=Zn=>{const zr=[];Zn.routeConfig?.loadComponent&&!Zn.routeConfig._loadedComponent&&zr.push(this.configLoader.loadComponent(Zn.routeConfig).pipe((0,Fe.b)(kn=>{Zn.component=kn}),(0,On.U)(()=>{})));for(const kn of Zn.children)zr.push(...Gt(kn));return zr};return Et(Gt(Ze.targetSnapshot.root)).pipe((0,Ft.d)(),(0,mr.q)(1))}),dn(()=>this.afterPreactivation()),(0,On.U)(Ze=>{const Gt=function fi(R,k,A){const L=sr(R,k._root,A?A._root:void 0);return new As(L,k)}(A.routeReuseStrategy,Ze.targetSnapshot,Ze.currentRouterState);return this.currentTransition=te={...Ze,targetRouterState:Gt},te}),(0,Fe.b)(()=>{this.events.next(new ks)}),((R,k,A,L)=>(0,On.U)(V=>(new Ls(k,V.targetRouterState,V.currentRouterState,A,L).activate(R),V)))(this.rootContexts,A.routeReuseStrategy,Ze=>this.events.next(Ze),this.inputBindingEnabled),(0,mr.q)(1),(0,Fe.b)({next:Ze=>{he=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new $r(Ze.id,this.urlSerializer.serialize(Ze.extractedUrl),this.urlSerializer.serialize(Ze.urlAfterRedirects))),A.titleStrategy?.updateTitle(Ze.targetRouterState.snapshot),Ze.resolve(!0)},complete:()=>{he=!0}}),(0,Ln.R)(this.transitionAbortSubject.pipe((0,Fe.b)(Ze=>{throw Ze}))),Zt(()=>{he||Qe||this.cancelNavigationTransition(te,"",1),this.currentNavigation?.id===te.id&&(this.currentNavigation=null)}),Ue(Ze=>{if(Qe=!0,gs(Ze))this.events.next(new Ds(te.id,this.urlSerializer.serialize(te.extractedUrl),Ze.message,Ze.cancellationCode)),function ps(R){return gs(R)&&sn(R.url)}(Ze)?this.events.next(new Kn(Ze.url)):te.resolve(!1);else{this.events.next(new oo(te.id,this.urlSerializer.serialize(te.extractedUrl),Ze,te.targetSnapshot??void 0));try{te.resolve(A.errorHandler(Ze))}catch(Gt){te.reject(Gt)}}return $e.E}))}))}cancelNavigationTransition(A,L,V){const te=new Ds(A.id,this.urlSerializer.serialize(A.extractedUrl),L,V);this.events.next(te),A.resolve(!1)}static#e=this.\u0275fac=function(L){return new(L||R)};static#t=this.\u0275prov=E.Yz7({token:R,factory:R.\u0275fac,providedIn:"root"})}return R})();function Ai(R){return R!==dr}let bo=(()=>{class R{buildTitle(A){let L,V=A.root;for(;void 0!==V;)L=this.getResolvedTitleForRoute(V)??L,V=V.children.find(te=>te.outlet===Ee);return L}getResolvedTitleForRoute(A){return A.data[xe]}static#e=this.\u0275fac=function(L){return new(L||R)};static#t=this.\u0275prov=E.Yz7({token:R,factory:function(){return(0,E.f3M)(oa)},providedIn:"root"})}return R})(),oa=(()=>{class R extends bo{constructor(A){super(),this.title=A}updateTitle(A){const L=this.buildTitle(A);void 0!==L&&this.title.setTitle(L)}static#e=this.\u0275fac=function(L){return new(L||R)(E.LFG(Gn.Dx))};static#t=this.\u0275prov=E.Yz7({token:R,factory:R.\u0275fac,providedIn:"root"})}return R})(),aa=(()=>{class R{static#e=this.\u0275fac=function(L){return new(L||R)};static#t=this.\u0275prov=E.Yz7({token:R,factory:function(){return(0,E.f3M)(Ia)},providedIn:"root"})}return R})();class vs{shouldDetach(k){return!1}store(k,A){}shouldAttach(k){return!1}retrieve(k){return null}shouldReuseRoute(k,A){return k.routeConfig===A.routeConfig}}let Ia=(()=>{class R extends vs{static#e=this.\u0275fac=function(){let A;return function(V){return(A||(A=E.n5z(R)))(V||R)}}();static#t=this.\u0275prov=E.Yz7({token:R,factory:R.\u0275fac,providedIn:"root"})}return R})();const Mi=new E.OlP("",{providedIn:"root",factory:()=>({})});let bl=(()=>{class R{static#e=this.\u0275fac=function(L){return new(L||R)};static#t=this.\u0275prov=E.Yz7({token:R,factory:function(){return(0,E.f3M)(fh)},providedIn:"root"})}return R})(),fh=(()=>{class R{shouldProcessUrl(A){return!0}extract(A){return A}merge(A,L){return A}static#e=this.\u0275fac=function(L){return new(L||R)};static#t=this.\u0275prov=E.Yz7({token:R,factory:R.\u0275fac,providedIn:"root"})}return R})();var ti=function(R){return R[R.COMPLETE=0]="COMPLETE",R[R.FAILED=1]="FAILED",R[R.REDIRECTING=2]="REDIRECTING",R}(ti||{});function Dd(R,k){R.events.pipe((0,Bt.h)(A=>A instanceof $r||A instanceof Ds||A instanceof oo||A instanceof zi),(0,On.U)(A=>A instanceof $r||A instanceof zi?ti.COMPLETE:A instanceof Ds&&(0===A.code||1===A.code)?ti.REDIRECTING:ti.FAILED),(0,Bt.h)(A=>A!==ti.REDIRECTING),(0,mr.q)(1)).subscribe(()=>{k()})}function mu(R){throw R}function Ns(R,k,A){return k.parse("/")}const wo={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},la={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Ps=(()=>{class R{get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){return"computed"!==this.canceledNavigationResolution?this.currentPageId:this.location.getState()?.\u0275routerPageId??this.currentPageId}get events(){return this._events}constructor(){this.disposed=!1,this.currentPageId=0,this.console=(0,E.f3M)(E.c2e),this.isNgZoneEnabled=!1,this._events=new wt.x,this.options=(0,E.f3M)(Mi,{optional:!0})||{},this.pendingTasks=(0,E.f3M)(E.HDt),this.errorHandler=this.options.errorHandler||mu,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||Ns,this.navigated=!1,this.lastSuccessfulId=-1,this.urlHandlingStrategy=(0,E.f3M)(bl),this.routeReuseStrategy=(0,E.f3M)(aa),this.titleStrategy=(0,E.f3M)(bo),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=(0,E.f3M)(nr,{optional:!0})?.flat()??[],this.navigationTransitions=(0,E.f3M)(xr),this.urlSerializer=(0,E.f3M)(ur),this.location=(0,E.f3M)(Qn.Ye),this.componentInputBindingEnabled=!!(0,E.f3M)(ao,{optional:!0}),this.eventsSubscription=new ot.w0,this.isNgZoneEnabled=(0,E.f3M)(E.R0b)instanceof E.R0b&&E.R0b.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new wn,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=Mr(0,null),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe(A=>{this.lastSuccessfulId=A.id,this.currentPageId=this.browserPageId},A=>{this.console.warn(`Unhandled Navigation Error: ${A}`)}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){const A=this.navigationTransitions.events.subscribe(L=>{try{const{currentTransition:V}=this.navigationTransitions;if(null===V)return void(wl(L)&&this._events.next(L));if(L instanceof li)Ai(V.source)&&(this.browserUrlTree=V.extractedUrl);else if(L instanceof zi)this.rawUrlTree=V.rawUrl;else if(L instanceof ui){if("eager"===this.urlUpdateStrategy){if(!V.extras.skipLocationChange){const te=this.urlHandlingStrategy.merge(V.urlAfterRedirects,V.rawUrl);this.setBrowserUrl(te,V)}this.browserUrlTree=V.urlAfterRedirects}}else if(L instanceof ks)this.currentUrlTree=V.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(V.urlAfterRedirects,V.rawUrl),this.routerState=V.targetRouterState,"deferred"===this.urlUpdateStrategy&&(V.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,V),this.browserUrlTree=V.urlAfterRedirects);else if(L instanceof Ds)0!==L.code&&1!==L.code&&(this.navigated=!0),(3===L.code||2===L.code)&&this.restoreHistory(V);else if(L instanceof Kn){const te=this.urlHandlingStrategy.merge(L.url,V.currentRawUrl),he={skipLocationChange:V.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||Ai(V.source)};this.scheduleNavigation(te,dr,null,he,{resolve:V.resolve,reject:V.reject,promise:V.promise})}L instanceof oo&&this.restoreHistory(V,!0),L instanceof $r&&(this.navigated=!0),wl(L)&&this._events.next(L)}catch(V){this.navigationTransitions.transitionAbortSubject.next(V)}});this.eventsSubscription.add(A)}resetRootComponentType(A){this.routerState.root.component=A,this.navigationTransitions.rootComponentType=A}initialNavigation(){if(this.setUpLocationChangeListener(),!this.navigationTransitions.hasRequestedNavigation){const A=this.location.getState();this.navigateToSyncWithBrowser(this.location.path(!0),dr,A)}}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(A=>{const L="popstate"===A.type?"popstate":"hashchange";"popstate"===L&&setTimeout(()=>{this.navigateToSyncWithBrowser(A.url,L,A.state)},0)}))}navigateToSyncWithBrowser(A,L,V){const te={replaceUrl:!0},he=V?.navigationId?V:null;if(V){const Ze={...V};delete Ze.navigationId,delete Ze.\u0275routerPageId,0!==Object.keys(Ze).length&&(te.state=Ze)}const Qe=this.parseUrl(A);this.scheduleNavigation(Qe,L,he,te)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(A){this.config=A.map(vl),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(A,L={}){const{relativeTo:V,queryParams:te,fragment:he,queryParamsHandling:Qe,preserveFragment:Ze}=L,Gt=Ze?this.currentUrlTree.fragment:he;let zr,Zn=null;switch(Qe){case"merge":Zn={...this.currentUrlTree.queryParams,...te};break;case"preserve":Zn=this.currentUrlTree.queryParams;break;default:Zn=te||null}null!==Zn&&(Zn=this.removeEmptyProps(Zn));try{zr=qt(V?V.snapshot:this.routerState.snapshot.root)}catch{("string"!=typeof A[0]||!A[0].startsWith("/"))&&(A=[]),zr=this.currentUrlTree.root}return Xn(zr,A,Zn,Gt??null)}navigateByUrl(A,L={skipLocationChange:!1}){const V=sn(A)?A:this.parseUrl(A),te=this.urlHandlingStrategy.merge(V,this.rawUrlTree);return this.scheduleNavigation(te,dr,null,L)}navigate(A,L={skipLocationChange:!1}){return function Yr(R){for(let k=0;k<R.length;k++)if(null==R[k])throw new E.vHH(4008,!1)}(A),this.navigateByUrl(this.createUrlTree(A,L),L)}serializeUrl(A){return this.urlSerializer.serialize(A)}parseUrl(A){let L;try{L=this.urlSerializer.parse(A)}catch(V){L=this.malformedUriErrorHandler(V,this.urlSerializer,A)}return L}isActive(A,L){let V;if(V=!0===L?{...wo}:!1===L?{...la}:L,sn(A))return cn(this.currentUrlTree,A,V);const te=this.parseUrl(A);return cn(this.currentUrlTree,te,V)}removeEmptyProps(A){return Object.keys(A).reduce((L,V)=>{const te=A[V];return null!=te&&(L[V]=te),L},{})}scheduleNavigation(A,L,V,te,he){if(this.disposed)return Promise.resolve(!1);let Qe,Ze,Gt;he?(Qe=he.resolve,Ze=he.reject,Gt=he.promise):Gt=new Promise((zr,kn)=>{Qe=zr,Ze=kn});const Zn=this.pendingTasks.add();return Dd(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(Zn))}),this.navigationTransitions.handleNavigationRequest({source:L,restoredState:V,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,currentBrowserUrl:this.browserUrlTree,rawUrl:A,extras:te,resolve:Qe,reject:Ze,promise:Gt,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),Gt.catch(zr=>Promise.reject(zr))}setBrowserUrl(A,L){const V=this.urlSerializer.serialize(A);if(this.location.isCurrentPathEqualTo(V)||L.extras.replaceUrl){const he={...L.extras.state,...this.generateNgRouterState(L.id,this.browserPageId)};this.location.replaceState(V,"",he)}else{const te={...L.extras.state,...this.generateNgRouterState(L.id,this.browserPageId+1)};this.location.go(V,"",te)}}restoreHistory(A,L=!1){if("computed"===this.canceledNavigationResolution){const te=this.currentPageId-this.browserPageId;0!==te?this.location.historyGo(te):this.currentUrlTree===this.getCurrentNavigation()?.finalUrl&&0===te&&(this.resetState(A),this.browserUrlTree=A.currentUrlTree,this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(L&&this.resetState(A),this.resetUrlToCurrentUrlTree())}resetState(A){this.routerState=A.currentRouterState,this.currentUrlTree=A.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,A.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(A,L){return"computed"===this.canceledNavigationResolution?{navigationId:A,\u0275routerPageId:L}:{navigationId:A}}static#e=this.\u0275fac=function(L){return new(L||R)};static#t=this.\u0275prov=E.Yz7({token:R,factory:R.\u0275fac,providedIn:"root"})}return R})();function wl(R){return!(R instanceof ks||R instanceof Kn)}let Va=(()=>{class R{constructor(A,L,V,te,he,Qe){this.router=A,this.route=L,this.tabIndexAttribute=V,this.renderer=te,this.el=he,this.locationStrategy=Qe,this.href=null,this.commands=null,this.onChanges=new wt.x,this.preserveFragment=!1,this.skipLocationChange=!1,this.replaceUrl=!1;const Ze=he.nativeElement.tagName?.toLowerCase();this.isAnchorElement="a"===Ze||"area"===Ze,this.isAnchorElement?this.subscription=A.events.subscribe(Gt=>{Gt instanceof $r&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(A){null!=this.tabIndexAttribute||this.isAnchorElement||this.applyAttributeValue("tabindex",A)}ngOnChanges(A){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(A){null!=A?(this.commands=Array.isArray(A)?A:[A],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(A,L,V,te,he){return!!(null===this.urlTree||this.isAnchorElement&&(0!==A||L||V||te||he||"string"==typeof this.target&&"_self"!=this.target))||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!this.isAnchorElement)}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){this.href=null!==this.urlTree&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null;const A=null===this.href?null:(0,E.P3R)(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",A)}applyAttributeValue(A,L){const V=this.renderer,te=this.el.nativeElement;null!==L?V.setAttribute(te,A,L):V.removeAttribute(te,A)}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static#e=this.\u0275fac=function(L){return new(L||R)(E.Y36(Ps),E.Y36(Cn),E.$8M("tabindex"),E.Y36(E.Qsj),E.Y36(E.SBq),E.Y36(Qn.S$))};static#t=this.\u0275dir=E.lG2({type:R,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(L,V){1&L&&E.NdJ("click",function(he){return V.onClick(he.button,he.ctrlKey,he.shiftKey,he.altKey,he.metaKey)}),2&L&&E.uIk("target",V.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:["preserveFragment","preserveFragment",E.VuI],skipLocationChange:["skipLocationChange","skipLocationChange",E.VuI],replaceUrl:["replaceUrl","replaceUrl",E.VuI],routerLink:"routerLink"},standalone:!0,features:[E.Xq5,E.TTD]})}return R})();class Tt{}let sl=(()=>{class R{constructor(A,L,V,te,he){this.router=A,this.injector=V,this.preloadingStrategy=te,this.loader=he}setUpPreloading(){this.subscription=this.router.events.pipe((0,Bt.h)(A=>A instanceof $r),Ke(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(A,L){const V=[];for(const te of L){te.providers&&!te._injector&&(te._injector=(0,E.MMx)(te.providers,A,`Route: ${te.path}`));const he=te._injector??A,Qe=te._loadedInjector??he;(te.loadChildren&&!te._loadedRoutes&&void 0===te.canLoad||te.loadComponent&&!te._loadedComponent)&&V.push(this.preloadConfig(he,te)),(te.children||te._loadedRoutes)&&V.push(this.processRoutes(Qe,te.children??te._loadedRoutes))}return(0,Ne.D)(V).pipe((0,An.J)())}preloadConfig(A,L){return this.preloadingStrategy.preload(L,()=>{let V;V=L.loadChildren&&void 0===L.canLoad?this.loader.loadChildren(A,L):(0,Te.of)(null);const te=V.pipe((0,be.z)(he=>null===he?(0,Te.of)(void 0):(L._loadedRoutes=he.routes,L._loadedInjector=he.injector,this.processRoutes(he.injector??A,he.routes))));if(L.loadComponent&&!L._loadedComponent){const he=this.loader.loadComponent(L);return(0,Ne.D)([te,he]).pipe((0,An.J)())}return te})}static#e=this.\u0275fac=function(L){return new(L||R)(E.LFG(Ps),E.LFG(E.Sil),E.LFG(E.lqb),E.LFG(Tt),E.LFG(_r))};static#t=this.\u0275prov=E.Yz7({token:R,factory:R.\u0275fac,providedIn:"root"})}return R})();const on=new E.OlP("");let vn=(()=>{class R{constructor(A,L,V,te,he={}){this.urlSerializer=A,this.transitions=L,this.viewportScroller=V,this.zone=te,this.options=he,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},he.scrollPositionRestoration=he.scrollPositionRestoration||"disabled",he.anchorScrolling=he.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(A=>{A instanceof li?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=A.navigationTrigger,this.restoredId=A.restoredState?A.restoredState.navigationId:0):A instanceof $r?(this.lastId=A.id,this.scheduleScrollEvent(A,this.urlSerializer.parse(A.urlAfterRedirects).fragment)):A instanceof zi&&0===A.code&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(A,this.urlSerializer.parse(A.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(A=>{A instanceof Ma&&(A.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(A.position):A.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(A.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(A,L){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new Ma(A,"popstate"===this.lastSource?this.store[this.restoredId]:null,L))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static#e=this.\u0275fac=function(L){E.$Z()};static#t=this.\u0275prov=E.Yz7({token:R,factory:R.\u0275fac})}return R})();function nt(R,k){return{\u0275kind:R,\u0275providers:k}}function $l(){const R=(0,E.f3M)(E.zs3);return k=>{const A=R.get(E.z2F);if(k!==A.components[0])return;const L=R.get(Ps),V=R.get(ol);1===R.get(Wc)&&L.initialNavigation(),R.get(Dt,null,E.XFs.Optional)?.setUpPreloading(),R.get(on,null,E.XFs.Optional)?.init(),L.resetRootComponentType(A.componentTypes[0]),V.closed||(V.next(),V.complete(),V.unsubscribe())}}const ol=new E.OlP("",{factory:()=>new wt.x}),Wc=new E.OlP("",{providedIn:"root",factory:()=>1}),Dt=new E.OlP("");function Tr(R){return nt(0,[{provide:Dt,useExisting:sl},{provide:Tt,useExisting:R}])}const ln=new E.OlP("ROUTER_FORROOT_GUARD"),Co=[Qn.Ye,{provide:ur,useClass:Ti},Ps,es,{provide:Cn,useFactory:function Wt(R){return R.routerState.root},deps:[Ps]},_r,[]];function or(){return new E.PXZ("Router",Ps)}let Ad=(()=>{class R{constructor(A){}static forRoot(A,L){return{ngModule:R,providers:[Co,[],{provide:nr,multi:!0,useValue:A},{provide:ln,useFactory:Ea,deps:[[Ps,new E.FiY,new E.tp0]]},{provide:Mi,useValue:L||{}},L?.useHash?{provide:Qn.S$,useClass:Qn.Do}:{provide:Qn.S$,useClass:Qn.b0},{provide:on,useFactory:()=>{const R=(0,E.f3M)(Qn.EM),k=(0,E.f3M)(E.R0b),A=(0,E.f3M)(Mi),L=(0,E.f3M)(xr),V=(0,E.f3M)(ur);return A.scrollOffset&&R.setOffset(A.scrollOffset),new vn(V,L,R,k,A)}},L?.preloadingStrategy?Tr(L.preloadingStrategy).\u0275providers:[],{provide:E.PXZ,multi:!0,useFactory:or},L?.initialNavigation?ua(L):[],L?.bindToComponentInputs?nt(8,[Yi,{provide:ao,useExisting:Yi}]).\u0275providers:[],[{provide:zl,useFactory:$l},{provide:E.tb,multi:!0,useExisting:zl}]]}}static forChild(A){return{ngModule:R,providers:[{provide:nr,multi:!0,useValue:A}]}}static#e=this.\u0275fac=function(L){return new(L||R)(E.LFG(ln,8))};static#t=this.\u0275mod=E.oAB({type:R});static#n=this.\u0275inj=E.cJS({})}return R})();function Ea(R){return"guarded"}function ua(R){return["disabled"===R.initialNavigation?nt(3,[{provide:E.ip1,multi:!0,useFactory:()=>{const k=(0,E.f3M)(Ps);return()=>{k.setUpLocationChangeListener()}}},{provide:Wc,useValue:2}]).\u0275providers:[],"enabledBlocking"===R.initialNavigation?nt(2,[{provide:Wc,useValue:0},{provide:E.ip1,multi:!0,deps:[E.zs3],useFactory:k=>{const A=k.get(Qn.V_,Promise.resolve());return()=>A.then(()=>new Promise(L=>{const V=k.get(Ps),te=k.get(ol);Dd(V,()=>{L(!0)}),k.get(xr).afterPreactivation=()=>(L(!0),te.closed?(0,Te.of)(void 0):te),V.initialNavigation()}))}}]).\u0275providers:[]]}const zl=new E.OlP("")},3106:(Yt,Je,$)=>{$.d(Je,{Z:()=>Et});var E=$(9058),_e=$(4537),le=$(534),Oe=$(7879);class Ne{constructor(Ct,bt){this._delegate=Ct,this.firebase=bt,(0,le._addComponent)(Ct,new _e.wA("app-compat",()=>this,"PUBLIC")),this.container=Ct.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Ct){this._delegate.automaticDataCollectionEnabled=Ct}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(Ct=>{this._delegate.checkDestroyed(),Ct()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,le.deleteApp)(this._delegate)))}_getService(Ct,bt=le._DEFAULT_ENTRY_NAME){var jt;this._delegate.checkDestroyed();const Re=this._delegate.container.getProvider(Ct);return!Re.isInitialized()&&"EXPLICIT"===(null===(jt=Re.getComponent())||void 0===jt?void 0:jt.instantiationMode)&&Re.initialize(),Re.getImmediate({identifier:bt})}_removeServiceInstance(Ct,bt=le._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(Ct).clearInstance(bt)}_addComponent(Ct){(0,le._addComponent)(this._delegate,Ct)}_addOrOverwriteComponent(Ct){(0,le._addOrOverwriteComponent)(this._delegate,Ct)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const ke=new E.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),ye=function qe(){const mt=function T(mt){const Ct={},bt={__esModule:!0,initializeApp:function me(ot,ft={}){const de=le.initializeApp(ot,ft);if((0,E.r3)(Ct,de.name))return Ct[de.name];const Ot=new mt(de,bt);return Ct[de.name]=Ot,Ot},app:Re,registerVersion:le.registerVersion,setLogLevel:le.setLogLevel,onLog:le.onLog,apps:null,SDK_VERSION:le.SDK_VERSION,INTERNAL:{registerComponent:function Pe(ot){const ft=ot.name,de=ft.replace("-compat","");if(le._registerComponent(ot)&&"PUBLIC"===ot.type){const Ot=(wt=Re())=>{if("function"!=typeof wt[de])throw ke.create("invalid-app-argument",{appName:ft});return wt[de]()};void 0!==ot.serviceProps&&(0,E.ZB)(Ot,ot.serviceProps),bt[de]=Ot,mt.prototype[de]=function(...wt){return this._getService.bind(this,ft).apply(this,ot.multipleInstances?wt:[])}}return"PUBLIC"===ot.type?bt[de]:null},removeApp:function jt(ot){delete Ct[ot]},useAsService:function $e(ot,ft){return"serverAuth"===ft?null:ft},modularAPIs:le}};function Re(ot){if(!(0,E.r3)(Ct,ot=ot||le._DEFAULT_ENTRY_NAME))throw ke.create("no-app",{appName:ot});return Ct[ot]}return bt.default=bt,Object.defineProperty(bt,"apps",{get:function He(){return Object.keys(Ct).map(ot=>Ct[ot])}}),Re.App=mt,bt}(Ne);return mt.INTERNAL=Object.assign(Object.assign({},mt.INTERNAL),{createFirebaseNamespace:qe,extendNamespace:function Ct(bt){(0,E.ZB)(mt,bt)},createSubscribe:E.ne,ErrorFactory:E.LL,deepExtend:E.ZB}),mt}(),Ie=new Oe.Yd("@firebase/app-compat");if((0,E.jU)()&&void 0!==self.firebase){Ie.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const mt=self.firebase.SDK_VERSION;mt&&mt.indexOf("LITE")>=0&&Ie.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Et=ye;!function st(mt){(0,le.registerVersion)("@firebase/app-compat","0.2.21",mt)}()},534:(Yt,Je,$)=>{$.r(Je),$.d(Je,{FirebaseError:()=>Oe.ZR,SDK_VERSION:()=>ki,_DEFAULT_ENTRY_NAME:()=>Mt,_addComponent:()=>cn,_addOrOverwriteComponent:()=>Hr,_apps:()=>mn,_clearComponents:()=>en,_components:()=>ir,_getProvider:()=>Gr,_registerComponent:()=>jn,_removeServiceInstance:()=>Kr,deleteApp:()=>ur,getApp:()=>Xi,getApps:()=>_o,initializeApp:()=>Oa,onLog:()=>Fi,registerVersion:()=>hs,setLogLevel:()=>Oi});var E=$(5861),_e=$(4537),le=$(7879),Oe=$(9058);const Ne=(it,Ge)=>Ge.some(vt=>it instanceof vt);let Te,ke;const ye=new WeakMap,Ie=new WeakMap,Ve=new WeakMap,ht=new WeakMap,st=new WeakMap;let Ct={get(it,Ge,vt){if(it instanceof IDBTransaction){if("done"===Ge)return Ie.get(it);if("objectStoreNames"===Ge)return it.objectStoreNames||Ve.get(it);if("store"===Ge)return vt.objectStoreNames[1]?void 0:vt.objectStore(vt.objectStoreNames[0])}return me(it[Ge])},set:(it,Ge,vt)=>(it[Ge]=vt,!0),has:(it,Ge)=>it instanceof IDBTransaction&&("done"===Ge||"store"===Ge)||Ge in it};function Re(it){return"function"==typeof it?function jt(it){return it!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function qe(){return ke||(ke=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(it)?function(...Ge){return it.apply(He(this),Ge),me(ye.get(this))}:function(...Ge){return me(it.apply(He(this),Ge))}:function(Ge,...vt){const sn=it.call(He(this),Ge,...vt);return Ve.set(sn,Ge.sort?Ge.sort():[Ge]),me(sn)}}(it):(it instanceof IDBTransaction&&function mt(it){if(Ie.has(it))return;const Ge=new Promise((vt,sn)=>{const In=()=>{it.removeEventListener("complete",qt),it.removeEventListener("error",Xn),it.removeEventListener("abort",Xn)},qt=()=>{vt(),In()},Xn=()=>{sn(it.error||new DOMException("AbortError","AbortError")),In()};it.addEventListener("complete",qt),it.addEventListener("error",Xn),it.addEventListener("abort",Xn)});Ie.set(it,Ge)}(it),Ne(it,function T(){return Te||(Te=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(it,Ct):it)}function me(it){if(it instanceof IDBRequest)return function Et(it){const Ge=new Promise((vt,sn)=>{const In=()=>{it.removeEventListener("success",qt),it.removeEventListener("error",Xn)},qt=()=>{vt(me(it.result)),In()},Xn=()=>{sn(it.error),In()};it.addEventListener("success",qt),it.addEventListener("error",Xn)});return Ge.then(vt=>{vt instanceof IDBCursor&&ye.set(vt,it)}).catch(()=>{}),st.set(Ge,it),Ge}(it);if(ht.has(it))return ht.get(it);const Ge=Re(it);return Ge!==it&&(ht.set(it,Ge),st.set(Ge,it)),Ge}const He=it=>st.get(it),ot=["get","getKey","getAll","getAllKeys","count"],ft=["put","add","delete","clear"],de=new Map;function Ot(it,Ge){if(!(it instanceof IDBDatabase)||Ge in it||"string"!=typeof Ge)return;if(de.get(Ge))return de.get(Ge);const vt=Ge.replace(/FromIndex$/,""),sn=Ge!==vt,In=ft.includes(vt);if(!(vt in(sn?IDBIndex:IDBObjectStore).prototype)||!In&&!ot.includes(vt))return;const qt=function(){var Xn=(0,E.Z)(function*(ai,...Or){const Xs=this.transaction(ai,In?"readwrite":"readonly");let Bi=Xs.store;return sn&&(Bi=Bi.index(Or.shift())),(yield Promise.all([Bi[vt](...Or),In&&Xs.done]))[0]});return function(Or){return Xn.apply(this,arguments)}}();return de.set(Ge,qt),qt}!function bt(it){Ct=it(Ct)}(it=>({...it,get:(Ge,vt,sn)=>Ot(Ge,vt)||it.get(Ge,vt,sn),has:(Ge,vt)=>!!Ot(Ge,vt)||it.has(Ge,vt)}));class wt{constructor(Ge){this.container=Ge}getPlatformInfoString(){return this.container.getProviders().map(vt=>{if(function Qn(it){const Ge=it.getComponent();return"VERSION"===Ge?.type}(vt)){const sn=vt.getImmediate();return`${sn.library}/${sn.version}`}return null}).filter(vt=>vt).join(" ")}}const On="@firebase/app",mr=new le.Yd("@firebase/app"),Mt="[DEFAULT]",an={[On]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},mn=new Map,ir=new Map;function cn(it,Ge){try{it.container.addComponent(Ge)}catch(vt){mr.debug(`Component ${Ge.name} failed to register with FirebaseApp ${it.name}`,vt)}}function Hr(it,Ge){it.container.addOrOverwriteComponent(Ge)}function jn(it){const Ge=it.name;if(ir.has(Ge))return mr.debug(`There were multiple attempts to register component ${Ge}.`),!1;ir.set(Ge,it);for(const vt of mn.values())cn(vt,it);return!0}function Gr(it,Ge){const vt=it.container.getProvider("heartbeat").getImmediate({optional:!0});return vt&&vt.triggerHeartbeat(),it.container.getProvider(Ge)}function Kr(it,Ge,vt=Mt){Gr(it,Ge).clearInstance(vt)}function en(){ir.clear()}const wn=new Oe.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class Dn{constructor(Ge,vt,sn){this._isDeleted=!1,this._options=Object.assign({},Ge),this._config=Object.assign({},vt),this._name=vt.name,this._automaticDataCollectionEnabled=vt.automaticDataCollectionEnabled,this._container=sn,this.container.addComponent(new _e.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Ge){this.checkDestroyed(),this._automaticDataCollectionEnabled=Ge}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(Ge){this._isDeleted=Ge}checkDestroyed(){if(this.isDeleted)throw wn.create("app-deleted",{appName:this._name})}}const ki="10.5.1";function Oa(it,Ge={}){let vt=it;"object"!=typeof Ge&&(Ge={name:Ge});const sn=Object.assign({name:Mt,automaticDataCollectionEnabled:!1},Ge),In=sn.name;if("string"!=typeof In||!In)throw wn.create("bad-app-name",{appName:String(In)});if(vt||(vt=(0,Oe.aH)()),!vt)throw wn.create("no-options");const qt=mn.get(In);if(qt){if((0,Oe.vZ)(vt,qt.options)&&(0,Oe.vZ)(sn,qt.config))return qt;throw wn.create("duplicate-app",{appName:In})}const Xn=new _e.H0(In);for(const Or of ir.values())Xn.addComponent(Or);const ai=new Dn(vt,sn,Xn);return mn.set(In,ai),ai}function Xi(it=Mt){const Ge=mn.get(it);if(!Ge&&it===Mt&&(0,Oe.aH)())return Oa();if(!Ge)throw wn.create("no-app",{appName:it});return Ge}function _o(){return Array.from(mn.values())}function ur(it){return Ti.apply(this,arguments)}function Ti(){return(Ti=(0,E.Z)(function*(it){const Ge=it.name;mn.has(Ge)&&(mn.delete(Ge),yield Promise.all(it.container.getProviders().map(vt=>vt.delete())),it.isDeleted=!0)})).apply(this,arguments)}function hs(it,Ge,vt){var sn;let In=null!==(sn=an[it])&&void 0!==sn?sn:it;vt&&(In+=`-${vt}`);const qt=In.match(/\s|\//),Xn=Ge.match(/\s|\//);if(qt||Xn){const ai=[`Unable to register library "${In}" with version "${Ge}":`];return qt&&ai.push(`library name "${In}" contains illegal characters (whitespace or "/")`),qt&&Xn&&ai.push("and"),Xn&&ai.push(`version name "${Ge}" contains illegal characters (whitespace or "/")`),void mr.warn(ai.join(" "))}jn(new _e.wA(`${In}-version`,()=>({library:In,version:Ge}),"VERSION"))}function Fi(it,Ge){if(null!==it&&"function"!=typeof it)throw wn.create("invalid-log-argument");(0,le.Am)(it,Ge)}function Oi(it){(0,le.Ub)(it)}const Li="firebase-heartbeat-database",Vi=1,we="firebase-heartbeat-store";let ie=null;function se(){return ie||(ie=function Pe(it,Ge,{blocked:vt,upgrade:sn,blocking:In,terminated:qt}={}){const Xn=indexedDB.open(it,Ge),ai=me(Xn);return sn&&Xn.addEventListener("upgradeneeded",Or=>{sn(me(Xn.result),Or.oldVersion,Or.newVersion,me(Xn.transaction),Or)}),vt&&Xn.addEventListener("blocked",Or=>vt(Or.oldVersion,Or.newVersion,Or)),ai.then(Or=>{qt&&Or.addEventListener("close",()=>qt()),In&&Or.addEventListener("versionchange",Xs=>In(Xs.oldVersion,Xs.newVersion,Xs))}).catch(()=>{}),ai}(Li,Vi,{upgrade:(it,Ge)=>{0===Ge&&it.createObjectStore(we)}}).catch(it=>{throw wn.create("idb-open",{originalErrorMessage:it.message})})),ie}function ue(){return(ue=(0,E.Z)(function*(it){try{return yield(yield se()).transaction(we).objectStore(we).get(Pt(it))}catch(Ge){if(Ge instanceof Oe.ZR)mr.warn(Ge.message);else{const vt=wn.create("idb-get",{originalErrorMessage:Ge?.message});mr.warn(vt.message)}}})).apply(this,arguments)}function Le(it,Ge){return _t.apply(this,arguments)}function _t(){return(_t=(0,E.Z)(function*(it,Ge){try{const sn=(yield se()).transaction(we,"readwrite");yield sn.objectStore(we).put(Ge,Pt(it)),yield sn.done}catch(vt){if(vt instanceof Oe.ZR)mr.warn(vt.message);else{const sn=wn.create("idb-set",{originalErrorMessage:vt?.message});mr.warn(sn.message)}}})).apply(this,arguments)}function Pt(it){return`${it.name}!${it.options.appId}`}class Xt{constructor(Ge){this.container=Ge,this._heartbeatsCache=null;const vt=this.container.getProvider("app").getImmediate();this._storage=new oi(vt),this._heartbeatsCachePromise=this._storage.read().then(sn=>(this._heartbeatsCache=sn,sn))}triggerHeartbeat(){var Ge=this;return(0,E.Z)(function*(){const sn=Ge.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),In=hn();if(null===Ge._heartbeatsCache&&(Ge._heartbeatsCache=yield Ge._heartbeatsCachePromise),Ge._heartbeatsCache.lastSentHeartbeatDate!==In&&!Ge._heartbeatsCache.heartbeats.some(qt=>qt.date===In))return Ge._heartbeatsCache.heartbeats.push({date:In,agent:sn}),Ge._heartbeatsCache.heartbeats=Ge._heartbeatsCache.heartbeats.filter(qt=>{const Xn=new Date(qt.date).valueOf();return Date.now()-Xn<=2592e6}),Ge._storage.overwrite(Ge._heartbeatsCache)})()}getHeartbeatsHeader(){var Ge=this;return(0,E.Z)(function*(){if(null===Ge._heartbeatsCache&&(yield Ge._heartbeatsCachePromise),null===Ge._heartbeatsCache||0===Ge._heartbeatsCache.heartbeats.length)return"";const vt=hn(),{heartbeatsToSend:sn,unsentEntries:In}=function Vr(it,Ge=1024){const vt=[];let sn=it.slice();for(const In of it){const qt=vt.find(Xn=>Xn.agent===In.agent);if(qt){if(qt.dates.push(In.date),Gs(vt)>Ge){qt.dates.pop();break}}else if(vt.push({agent:In.agent,dates:[In.date]}),Gs(vt)>Ge){vt.pop();break}sn=sn.slice(1)}return{heartbeatsToSend:vt,unsentEntries:sn}}(Ge._heartbeatsCache.heartbeats),qt=(0,Oe.L)(JSON.stringify({version:2,heartbeats:sn}));return Ge._heartbeatsCache.lastSentHeartbeatDate=vt,In.length>0?(Ge._heartbeatsCache.heartbeats=In,yield Ge._storage.overwrite(Ge._heartbeatsCache)):(Ge._heartbeatsCache.heartbeats=[],Ge._storage.overwrite(Ge._heartbeatsCache)),qt})()}}function hn(){return(new Date).toISOString().substring(0,10)}class oi{constructor(Ge){this.app=Ge,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,E.Z)(function*(){return!!(0,Oe.hl)()&&(0,Oe.eu)().then(()=>!0).catch(()=>!1)})()}read(){var Ge=this;return(0,E.Z)(function*(){return(yield Ge._canUseIndexedDBPromise)&&(yield function re(it){return ue.apply(this,arguments)}(Ge.app))||{heartbeats:[]}})()}overwrite(Ge){var vt=this;return(0,E.Z)(function*(){var sn;if(yield vt._canUseIndexedDBPromise){const qt=yield vt.read();return Le(vt.app,{lastSentHeartbeatDate:null!==(sn=Ge.lastSentHeartbeatDate)&&void 0!==sn?sn:qt.lastSentHeartbeatDate,heartbeats:Ge.heartbeats})}})()}add(Ge){var vt=this;return(0,E.Z)(function*(){var sn;if(yield vt._canUseIndexedDBPromise){const qt=yield vt.read();return Le(vt.app,{lastSentHeartbeatDate:null!==(sn=Ge.lastSentHeartbeatDate)&&void 0!==sn?sn:qt.lastSentHeartbeatDate,heartbeats:[...qt.heartbeats,...Ge.heartbeats]})}})()}}function Gs(it){return(0,Oe.L)(JSON.stringify({version:2,heartbeats:it})).length}!function Js(it){jn(new _e.wA("platform-logger",Ge=>new wt(Ge),"PRIVATE")),jn(new _e.wA("heartbeat",Ge=>new Xt(Ge),"PRIVATE")),hs(On,"0.9.21",it),hs(On,"0.9.21","esm2017"),hs("fire-js","")}("")},4537:(Yt,Je,$)=>{$.d(Je,{H0:()=>T,wA:()=>le});var E=$(5861),_e=$(9058);class le{constructor(ye,Ie,Ve){this.name=ye,this.instanceFactory=Ie,this.type=Ve,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(ye){return this.instantiationMode=ye,this}setMultipleInstances(ye){return this.multipleInstances=ye,this}setServiceProps(ye){return this.serviceProps=ye,this}setInstanceCreatedCallback(ye){return this.onInstanceCreated=ye,this}}const Oe="[DEFAULT]";class Ne{constructor(ye,Ie){this.name=ye,this.container=Ie,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(ye){const Ie=this.normalizeInstanceIdentifier(ye);if(!this.instancesDeferred.has(Ie)){const Ve=new _e.BH;if(this.instancesDeferred.set(Ie,Ve),this.isInitialized(Ie)||this.shouldAutoInitialize())try{const ht=this.getOrInitializeService({instanceIdentifier:Ie});ht&&Ve.resolve(ht)}catch{}}return this.instancesDeferred.get(Ie).promise}getImmediate(ye){var Ie;const Ve=this.normalizeInstanceIdentifier(ye?.identifier),ht=null!==(Ie=ye?.optional)&&void 0!==Ie&&Ie;if(!this.isInitialized(Ve)&&!this.shouldAutoInitialize()){if(ht)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:Ve})}catch(st){if(ht)return null;throw st}}getComponent(){return this.component}setComponent(ye){if(ye.name!==this.name)throw Error(`Mismatching Component ${ye.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=ye,this.shouldAutoInitialize()){if(function ke(qe){return"EAGER"===qe.instantiationMode}(ye))try{this.getOrInitializeService({instanceIdentifier:Oe})}catch{}for(const[Ie,Ve]of this.instancesDeferred.entries()){const ht=this.normalizeInstanceIdentifier(Ie);try{const st=this.getOrInitializeService({instanceIdentifier:ht});Ve.resolve(st)}catch{}}}}clearInstance(ye=Oe){this.instancesDeferred.delete(ye),this.instancesOptions.delete(ye),this.instances.delete(ye)}delete(){var ye=this;return(0,E.Z)(function*(){const Ie=Array.from(ye.instances.values());yield Promise.all([...Ie.filter(Ve=>"INTERNAL"in Ve).map(Ve=>Ve.INTERNAL.delete()),...Ie.filter(Ve=>"_delete"in Ve).map(Ve=>Ve._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(ye=Oe){return this.instances.has(ye)}getOptions(ye=Oe){return this.instancesOptions.get(ye)||{}}initialize(ye={}){const{options:Ie={}}=ye,Ve=this.normalizeInstanceIdentifier(ye.instanceIdentifier);if(this.isInitialized(Ve))throw Error(`${this.name}(${Ve}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const ht=this.getOrInitializeService({instanceIdentifier:Ve,options:Ie});for(const[st,Et]of this.instancesDeferred.entries())Ve===this.normalizeInstanceIdentifier(st)&&Et.resolve(ht);return ht}onInit(ye,Ie){var Ve;const ht=this.normalizeInstanceIdentifier(Ie),st=null!==(Ve=this.onInitCallbacks.get(ht))&&void 0!==Ve?Ve:new Set;st.add(ye),this.onInitCallbacks.set(ht,st);const Et=this.instances.get(ht);return Et&&ye(Et,ht),()=>{st.delete(ye)}}invokeOnInitCallbacks(ye,Ie){const Ve=this.onInitCallbacks.get(Ie);if(Ve)for(const ht of Ve)try{ht(ye,Ie)}catch{}}getOrInitializeService({instanceIdentifier:ye,options:Ie={}}){let Ve=this.instances.get(ye);if(!Ve&&this.component&&(Ve=this.component.instanceFactory(this.container,{instanceIdentifier:(qe=ye,qe===Oe?void 0:qe),options:Ie}),this.instances.set(ye,Ve),this.instancesOptions.set(ye,Ie),this.invokeOnInitCallbacks(Ve,ye),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,ye,Ve)}catch{}var qe;return Ve||null}normalizeInstanceIdentifier(ye=Oe){return this.component?this.component.multipleInstances?ye:Oe:ye}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class T{constructor(ye){this.name=ye,this.providers=new Map}addComponent(ye){const Ie=this.getProvider(ye.name);if(Ie.isComponentSet())throw new Error(`Component ${ye.name} has already been registered with ${this.name}`);Ie.setComponent(ye)}addOrOverwriteComponent(ye){this.getProvider(ye.name).isComponentSet()&&this.providers.delete(ye.name),this.addComponent(ye)}getProvider(ye){if(this.providers.has(ye))return this.providers.get(ye);const Ie=new Ne(ye,this);return this.providers.set(ye,Ie),Ie}getProviders(){return Array.from(this.providers.values())}}},7879:(Yt,Je,$)=>{$.d(Je,{Am:()=>qe,Ub:()=>T,Yd:()=>ke,in:()=>_e});const E=[];var _e=function(ye){return ye[ye.DEBUG=0]="DEBUG",ye[ye.VERBOSE=1]="VERBOSE",ye[ye.INFO=2]="INFO",ye[ye.WARN=3]="WARN",ye[ye.ERROR=4]="ERROR",ye[ye.SILENT=5]="SILENT",ye}(_e||{});const le={debug:_e.DEBUG,verbose:_e.VERBOSE,info:_e.INFO,warn:_e.WARN,error:_e.ERROR,silent:_e.SILENT},Oe=_e.INFO,Ne={[_e.DEBUG]:"log",[_e.VERBOSE]:"log",[_e.INFO]:"info",[_e.WARN]:"warn",[_e.ERROR]:"error"},Te=(ye,Ie,...Ve)=>{if(Ie<ye.logLevel)return;const ht=(new Date).toISOString(),st=Ne[Ie];if(!st)throw new Error(`Attempted to log a message with an invalid logType (value: ${Ie})`);console[st](`[${ht}]  ${ye.name}:`,...Ve)};class ke{constructor(Ie){this.name=Ie,this._logLevel=Oe,this._logHandler=Te,this._userLogHandler=null,E.push(this)}get logLevel(){return this._logLevel}set logLevel(Ie){if(!(Ie in _e))throw new TypeError(`Invalid value "${Ie}" assigned to \`logLevel\``);this._logLevel=Ie}setLogLevel(Ie){this._logLevel="string"==typeof Ie?le[Ie]:Ie}get logHandler(){return this._logHandler}set logHandler(Ie){if("function"!=typeof Ie)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=Ie}get userLogHandler(){return this._userLogHandler}set userLogHandler(Ie){this._userLogHandler=Ie}debug(...Ie){this._userLogHandler&&this._userLogHandler(this,_e.DEBUG,...Ie),this._logHandler(this,_e.DEBUG,...Ie)}log(...Ie){this._userLogHandler&&this._userLogHandler(this,_e.VERBOSE,...Ie),this._logHandler(this,_e.VERBOSE,...Ie)}info(...Ie){this._userLogHandler&&this._userLogHandler(this,_e.INFO,...Ie),this._logHandler(this,_e.INFO,...Ie)}warn(...Ie){this._userLogHandler&&this._userLogHandler(this,_e.WARN,...Ie),this._logHandler(this,_e.WARN,...Ie)}error(...Ie){this._userLogHandler&&this._userLogHandler(this,_e.ERROR,...Ie),this._logHandler(this,_e.ERROR,...Ie)}}function T(ye){E.forEach(Ie=>{Ie.setLogLevel(ye)})}function qe(ye,Ie){for(const Ve of E){let ht=null;Ie&&Ie.level&&(ht=le[Ie.level]),Ve.userLogHandler=null===ye?null:(st,Et,...mt)=>{const Ct=mt.map(bt=>{if(null==bt)return null;if("string"==typeof bt)return bt;if("number"==typeof bt||"boolean"==typeof bt)return bt.toString();if(bt instanceof Error)return bt.message;try{return JSON.stringify(bt)}catch{return null}}).filter(bt=>bt).join(" ");Et>=(ht??st.logLevel)&&ye({level:_e[Et].toLowerCase(),message:Ct,args:mt,type:st.name})}}}},7142:(Yt,Je,$)=>{$.d(Je,{Z:()=>E.Z});var E=$(3106);E.Z.registerVersion("firebase","10.5.1","app-compat")},2872:(Yt,Je,$)=>{$.r(Je);var E=$(5861),_e=$(3106),le=$(9058),Oe=$(534),Ne=$(7879),Te=$(7582),ke=$(4537);const qe={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"};const Et=function ht(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend.","unsupported-password-policy-schema-version":"The password policy received from the backend uses a schema version that is not supported by this version of the Firebase SDK.","password-does-not-meet-requirements":"The password does not meet the requirements."}},mt=function st(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},Ct=new le.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),jt=new Ne.Yd("@firebase/auth");function me(D,...g){jt.logLevel<=Ne.in.ERROR&&jt.error(`Auth (${Oe.SDK_VERSION}): ${D}`,...g)}function He(D,...g){throw ft(D,...g)}function Pe(D,...g){return ft(D,...g)}function $e(D,g,v){const C=Object.assign(Object.assign({},mt()),{[g]:v});return new le.LL("auth","Firebase",C).create(g,{appName:D.name})}function ot(D,g,v){if(!(g instanceof v))throw v.name!==g.constructor.name&&He(D,"argument-error"),$e(D,"argument-error",`Type of ${g.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function ft(D,...g){if("string"!=typeof D){const v=g[0],C=[...g.slice(1)];return C[0]&&(C[0].appName=D.name),D._errorFactory.create(v,...C)}return Ct.create(D,...g)}function de(D,g,...v){if(!D)throw ft(g,...v)}function Ot(D){const g="INTERNAL ASSERTION FAILED: "+D;throw me(g),new Error(g)}function wt(D,g){D||Ot(g)}function Qn(){var D;return typeof self<"u"&&(null===(D=self.location)||void 0===D?void 0:D.href)||""}function On(){return"http:"===Pr()||"https:"===Pr()}function Pr(){var D;return typeof self<"u"&&(null===(D=self.location)||void 0===D?void 0:D.protocol)||null}class Bt{constructor(g,v){this.shortDelay=g,this.longDelay=v,wt(v>g,"Short delay should be less than long delay!"),this.isMobile=(0,le.uI)()||(0,le.b$)()}get(){return function mr(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(On()||(0,le.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function be(D,g){wt(D.emulator,"Emulator should always be set here");const{url:v}=D.emulator;return g?`${v}${g.startsWith("/")?g.slice(1):g}`:v}class Se{static initialize(g,v,C){this.fetchImpl=g,v&&(this.headersImpl=v),C&&(this.responseImpl=C)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:typeof globalThis<"u"&&globalThis.fetch?globalThis.fetch:typeof fetch<"u"?fetch:void Ot("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:typeof globalThis<"u"&&globalThis.Headers?globalThis.Headers:typeof Headers<"u"?Headers:void Ot("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:typeof globalThis<"u"&&globalThis.Response?globalThis.Response:typeof Response<"u"?Response:void Ot("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Ke={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},Fe=new Bt(3e4,6e4);function Ue(D,g){return D.tenantId&&!g.tenantId?Object.assign(Object.assign({},g),{tenantId:D.tenantId}):g}function Xe(D,g,v,C){return Ft.apply(this,arguments)}function Ft(){return(Ft=(0,E.Z)(function*(D,g,v,C,G={}){return St(D,G,(0,E.Z)(function*(){let X={},De={};C&&("GET"===g?De=C:X={body:JSON.stringify(C)});const We=(0,le.xO)(Object.assign({key:D.config.apiKey},De)).slice(1),gt=yield D._getAdditionalHeaders();return gt["Content-Type"]="application/json",D.languageCode&&(gt["X-Firebase-Locale"]=D.languageCode),Se.fetch()(Zt(D,D.config.apiHost,v,We),Object.assign({method:g,headers:gt,referrerPolicy:"no-referrer"},X))}))})).apply(this,arguments)}function St(D,g,v){return cr.apply(this,arguments)}function cr(){return(cr=(0,E.Z)(function*(D,g,v){D._canInitEmulator=!1;const C=Object.assign(Object.assign({},Ke),g);try{const G=new An(D),X=yield Promise.race([v(),G.promise]);G.clearNetworkTimeout();const De=yield X.json();if("needConfirmation"in De)throw Gn(D,"account-exists-with-different-credential",De);if(X.ok&&!("errorMessage"in De))return De;{const We=X.ok?De.errorMessage:De.error.message,[gt,rn]=We.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===gt)throw Gn(D,"credential-already-in-use",De);if("EMAIL_EXISTS"===gt)throw Gn(D,"email-already-in-use",De);if("USER_DISABLED"===gt)throw Gn(D,"user-disabled",De);const _n=C[gt]||gt.toLowerCase().replace(/[_\s]+/g,"-");if(rn)throw $e(D,_n,rn);He(D,_n)}}catch(G){if(G instanceof le.ZR)throw G;He(D,"network-request-failed",{message:String(G)})}})).apply(this,arguments)}function Ut(D,g,v,C){return qn.apply(this,arguments)}function qn(){return(qn=(0,E.Z)(function*(D,g,v,C,G={}){const X=yield Xe(D,g,v,C,G);return"mfaPendingCredential"in X&&He(D,"multi-factor-auth-required",{_serverResponse:X}),X})).apply(this,arguments)}function Zt(D,g,v,C){const G=`${g}${v}?${C}`;return D.config.emulator?be(D.config,G):`${D.config.apiScheme}://${G}`}function Ln(D){switch(D){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class An{constructor(g){this.auth=g,this.timer=null,this.promise=new Promise((v,C)=>{this.timer=setTimeout(()=>C(Pe(this.auth,"network-request-failed")),Fe.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Gn(D,g,v){const C={appName:D.name};v.email&&(C.email=v.email),v.phoneNumber&&(C.phoneNumber=v.phoneNumber);const G=Pe(D,g,C);return G.customData._tokenResponse=v,G}function Ee(D){return void 0!==D&&void 0!==D.getResponse}function xe(D){return void 0!==D&&void 0!==D.enterprise}class ze{constructor(g){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===g.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=g.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=g.recaptchaEnforcementState}getProviderEnforcementState(g){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const v of this.recaptchaEnforcementState)if(v.provider&&v.provider===g)return Ln(v.enforcementState);return null}isProviderEnabled(g){return"ENFORCE"===this.getProviderEnforcementState(g)||"AUDIT"===this.getProviderEnforcementState(g)}}function pt(){return(pt=(0,E.Z)(function*(D){return(yield Xe(D,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function Lt(D,g){return Un.apply(this,arguments)}function Un(){return(Un=(0,E.Z)(function*(D,g){return Xe(D,"GET","/v2/recaptchaConfig",Ue(D,g))})).apply(this,arguments)}function Mt(){return(Mt=(0,E.Z)(function*(D,g){return Xe(D,"POST","/v1/accounts:delete",g)})).apply(this,arguments)}function mn(){return(mn=(0,E.Z)(function*(D,g){return Xe(D,"POST","/v1/accounts:update",g)})).apply(this,arguments)}function cn(){return(cn=(0,E.Z)(function*(D,g){return Xe(D,"POST","/v1/accounts:lookup",g)})).apply(this,arguments)}function Hr(D){if(D)try{const g=new Date(Number(D));if(!isNaN(g.getTime()))return g.toUTCString()}catch{}}function Kr(){return(Kr=(0,E.Z)(function*(D,g=!1){const v=(0,le.m9)(D),C=yield v.getIdToken(g),G=$i(C);de(G&&G.exp&&G.auth_time&&G.iat,v.auth,"internal-error");const X="object"==typeof G.firebase?G.firebase:void 0,De=X?.sign_in_provider;return{claims:G,token:C,authTime:Hr(en(G.auth_time)),issuedAtTime:Hr(en(G.iat)),expirationTime:Hr(en(G.exp)),signInProvider:De||null,signInSecondFactor:X?.sign_in_second_factor||null}})).apply(this,arguments)}function en(D){return 1e3*Number(D)}function $i(D){const[g,v,C]=D.split(".");if(void 0===g||void 0===v||void 0===C)return me("JWT malformed, contained fewer than 3 sections"),null;try{const G=(0,le.tV)(v);return G?JSON.parse(G):(me("Failed to decode base64 JWT payload"),null)}catch(G){return me("Caught error parsing JWT payload as JSON",G?.toString()),null}}function Dn(D,g){return ki.apply(this,arguments)}function ki(){return(ki=(0,E.Z)(function*(D,g,v=!1){if(v)return g;try{return yield g}catch(C){throw C instanceof le.ZR&&function Oa({code:D}){return"auth/user-disabled"===D||"auth/user-token-expired"===D}(C)&&D.auth.currentUser===D&&(yield D.auth.signOut()),C}})).apply(this,arguments)}class Xi{constructor(g){this.user=g,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(g){var v;if(g){const C=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),C}{this.errorBackoff=3e4;const G=(null!==(v=this.user.stsTokenManager.expirationTime)&&void 0!==v?v:0)-Date.now()-3e5;return Math.max(0,G)}}schedule(g=!1){var v=this;if(!this.isRunning)return;const C=this.getInterval(g);this.timerId=setTimeout((0,E.Z)(function*(){yield v.iteration()}),C)}iteration(){var g=this;return(0,E.Z)(function*(){try{yield g.user.getIdToken(!0)}catch(v){return void("auth/network-request-failed"===v?.code&&g.schedule(!0))}g.schedule()})()}}class _o{constructor(g,v){this.createdAt=g,this.lastLoginAt=v,this._initializeTime()}_initializeTime(){this.lastSignInTime=Hr(this.lastLoginAt),this.creationTime=Hr(this.createdAt)}_copy(g){this.createdAt=g.createdAt,this.lastLoginAt=g.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function ur(D){return Ti.apply(this,arguments)}function Ti(){return Ti=(0,E.Z)(function*(D){var g;const v=D.auth,C=yield D.getIdToken(),G=yield Dn(D,function ir(D,g){return cn.apply(this,arguments)}(v,{idToken:C}));de(G?.users.length,v,"internal-error");const X=G.users[0];D._notifyReloadListener(X);const De=null!==(g=X.providerUserInfo)&&void 0!==g&&g.length?function Li(D){return D.map(g=>{var{providerId:v}=g,C=(0,Te._T)(g,["providerId"]);return{providerId:v,uid:C.rawId||"",displayName:C.displayName||null,email:C.email||null,phoneNumber:C.phoneNumber||null,photoURL:C.photoUrl||null}})}(X.providerUserInfo):[],We=function Oi(D,g){return[...D.filter(C=>!g.some(G=>G.providerId===C.providerId)),...g]}(D.providerData,De),_n=!!D.isAnonymous&&!(D.email&&X.passwordHash||We?.length),yn={uid:X.localId,displayName:X.displayName||null,photoURL:X.photoUrl||null,email:X.email||null,emailVerified:X.emailVerified||!1,phoneNumber:X.phoneNumber||null,tenantId:X.tenantId||null,providerData:We,metadata:new _o(X.createdAt,X.lastLoginAt),isAnonymous:_n};Object.assign(D,yn)}),Ti.apply(this,arguments)}function Fi(){return(Fi=(0,E.Z)(function*(D){const g=(0,le.m9)(D);yield ur(g),yield g.auth._persistUserIfCurrent(g),g.auth._notifyListenersIfCurrent(g)})).apply(this,arguments)}function we(){return(we=(0,E.Z)(function*(D,g){const v=yield St(D,{},(0,E.Z)(function*(){const C=(0,le.xO)({grant_type:"refresh_token",refresh_token:g}).slice(1),{tokenApiHost:G,apiKey:X}=D.config,De=Zt(D,G,"/v1/token",`key=${X}`),We=yield D._getAdditionalHeaders();return We["Content-Type"]="application/x-www-form-urlencoded",Se.fetch()(De,{method:"POST",headers:We,body:C})}));return{accessToken:v.access_token,expiresIn:v.expires_in,refreshToken:v.refresh_token}})).apply(this,arguments)}class ie{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(g){de(g.idToken,"internal-error"),de(typeof g.idToken<"u","internal-error"),de(typeof g.refreshToken<"u","internal-error");const v="expiresIn"in g&&typeof g.expiresIn<"u"?Number(g.expiresIn):function wn(D){const g=$i(D);return de(g,"internal-error"),de(typeof g.exp<"u","internal-error"),de(typeof g.iat<"u","internal-error"),Number(g.exp)-Number(g.iat)}(g.idToken);this.updateTokensAndExpiration(g.idToken,g.refreshToken,v)}getToken(g,v=!1){var C=this;return(0,E.Z)(function*(){return de(!C.accessToken||C.refreshToken,g,"user-token-expired"),v||!C.accessToken||C.isExpired?C.refreshToken?(yield C.refresh(g,C.refreshToken),C.accessToken):null:C.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(g,v){var C=this;return(0,E.Z)(function*(){const{accessToken:G,refreshToken:X,expiresIn:De}=yield function Vi(D,g){return we.apply(this,arguments)}(g,v);C.updateTokensAndExpiration(G,X,Number(De))})()}updateTokensAndExpiration(g,v,C){this.refreshToken=v||null,this.accessToken=g||null,this.expirationTime=Date.now()+1e3*C}static fromJSON(g,v){const{refreshToken:C,accessToken:G,expirationTime:X}=v,De=new ie;return C&&(de("string"==typeof C,"internal-error",{appName:g}),De.refreshToken=C),G&&(de("string"==typeof G,"internal-error",{appName:g}),De.accessToken=G),X&&(de("number"==typeof X,"internal-error",{appName:g}),De.expirationTime=X),De}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(g){this.accessToken=g.accessToken,this.refreshToken=g.refreshToken,this.expirationTime=g.expirationTime}_clone(){return Object.assign(new ie,this.toJSON())}_performRefresh(){return Ot("not implemented")}}function se(D,g){de("string"==typeof D||typeof D>"u","internal-error",{appName:g})}class re{constructor(g){var{uid:v,auth:C,stsTokenManager:G}=g,X=(0,Te._T)(g,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Xi(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=v,this.auth=C,this.stsTokenManager=G,this.accessToken=G.accessToken,this.displayName=X.displayName||null,this.email=X.email||null,this.emailVerified=X.emailVerified||!1,this.phoneNumber=X.phoneNumber||null,this.photoURL=X.photoURL||null,this.isAnonymous=X.isAnonymous||!1,this.tenantId=X.tenantId||null,this.providerData=X.providerData?[...X.providerData]:[],this.metadata=new _o(X.createdAt||void 0,X.lastLoginAt||void 0)}getIdToken(g){var v=this;return(0,E.Z)(function*(){const C=yield Dn(v,v.stsTokenManager.getToken(v.auth,g));return de(C,v.auth,"internal-error"),v.accessToken!==C&&(v.accessToken=C,yield v.auth._persistUserIfCurrent(v),v.auth._notifyListenersIfCurrent(v)),C})()}getIdTokenResult(g){return function Gr(D){return Kr.apply(this,arguments)}(this,g)}reload(){return function hs(D){return Fi.apply(this,arguments)}(this)}_assign(g){this!==g&&(de(this.uid===g.uid,this.auth,"internal-error"),this.displayName=g.displayName,this.photoURL=g.photoURL,this.email=g.email,this.emailVerified=g.emailVerified,this.phoneNumber=g.phoneNumber,this.isAnonymous=g.isAnonymous,this.tenantId=g.tenantId,this.providerData=g.providerData.map(v=>Object.assign({},v)),this.metadata._copy(g.metadata),this.stsTokenManager._assign(g.stsTokenManager))}_clone(g){const v=new re(Object.assign(Object.assign({},this),{auth:g,stsTokenManager:this.stsTokenManager._clone()}));return v.metadata._copy(this.metadata),v}_onReload(g){de(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=g,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(g){this.reloadListener?this.reloadListener(g):this.reloadUserInfo=g}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(g,v=!1){var C=this;return(0,E.Z)(function*(){let G=!1;g.idToken&&g.idToken!==C.stsTokenManager.accessToken&&(C.stsTokenManager.updateFromServerResponse(g),G=!0),v&&(yield ur(C)),yield C.auth._persistUserIfCurrent(C),G&&C.auth._notifyListenersIfCurrent(C)})()}delete(){var g=this;return(0,E.Z)(function*(){const v=yield g.getIdToken();return yield Dn(g,function $n(D,g){return Mt.apply(this,arguments)}(g.auth,{idToken:v})),g.stsTokenManager.clearRefreshToken(),g.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(g=>Object.assign({},g)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(g,v){var C,G,X,De,We,gt,rn,_n;const yn=null!==(C=v.displayName)&&void 0!==C?C:void 0,ls=null!==(G=v.email)&&void 0!==G?G:void 0,Ol=null!==(X=v.phoneNumber)&&void 0!==X?X:void 0,Ru=null!==(De=v.photoURL)&&void 0!==De?De:void 0,su=null!==(We=v.tenantId)&&void 0!==We?We:void 0,ou=null!==(gt=v._redirectEventId)&&void 0!==gt?gt:void 0,Nu=null!==(rn=v.createdAt)&&void 0!==rn?rn:void 0,If=null!==(_n=v.lastLoginAt)&&void 0!==_n?_n:void 0,{uid:Ef,emailVerified:us,isAnonymous:xc,providerData:Pu,stsTokenManager:ud}=v;de(Ef&&ud,g,"internal-error");const gl=ie.fromJSON(this.name,ud);de("string"==typeof Ef,g,"internal-error"),se(yn,g.name),se(ls,g.name),de("boolean"==typeof us,g,"internal-error"),de("boolean"==typeof xc,g,"internal-error"),se(Ol,g.name),se(Ru,g.name),se(su,g.name),se(ou,g.name),se(Nu,g.name),se(If,g.name);const Gd=new re({uid:Ef,auth:g,email:ls,emailVerified:us,displayName:yn,isAnonymous:xc,photoURL:Ru,phoneNumber:Ol,tenantId:su,stsTokenManager:gl,createdAt:Nu,lastLoginAt:If});return Pu&&Array.isArray(Pu)&&(Gd.providerData=Pu.map(Ap=>Object.assign({},Ap))),ou&&(Gd._redirectEventId=ou),Gd}static _fromIdTokenResponse(g,v,C=!1){return(0,E.Z)(function*(){const G=new ie;G.updateFromServerResponse(v);const X=new re({uid:v.localId,auth:g,stsTokenManager:G,isAnonymous:C});return yield ur(X),X})()}}const ue=new Map;function Le(D){wt(D instanceof Function,"Expected a class definition");let g=ue.get(D);return g?(wt(g instanceof D,"Instance stored in cache mismatched with class"),g):(g=new D,ue.set(D,g),g)}const Pt=(()=>{class D{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,E.Z)(function*(){return!0})()}_set(v,C){var G=this;return(0,E.Z)(function*(){G.storage[v]=C})()}_get(v){var C=this;return(0,E.Z)(function*(){const G=C.storage[v];return void 0===G?null:G})()}_remove(v){var C=this;return(0,E.Z)(function*(){delete C.storage[v]})()}_addListener(v,C){}_removeListener(v,C){}}return D.type="NONE",D})();function zt(D,g,v){return`firebase:${D}:${g}:${v}`}class gn{constructor(g,v,C){this.persistence=g,this.auth=v,this.userKey=C;const{config:G,name:X}=this.auth;this.fullUserKey=zt(this.userKey,G.apiKey,X),this.fullPersistenceKey=zt("persistence",G.apiKey,X),this.boundEventHandler=v._onStorageEvent.bind(v),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(g){return this.persistence._set(this.fullUserKey,g.toJSON())}getCurrentUser(){var g=this;return(0,E.Z)(function*(){const v=yield g.persistence._get(g.fullUserKey);return v?re._fromJSON(g.auth,v):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(g){var v=this;return(0,E.Z)(function*(){if(v.persistence===g)return;const C=yield v.getCurrentUser();return yield v.removeCurrentUser(),v.persistence=g,C?v.setCurrentUser(C):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(g,v,C="authUser"){return(0,E.Z)(function*(){if(!v.length)return new gn(Le(Pt),g,C);const G=(yield Promise.all(v.map(function(){var rn=(0,E.Z)(function*(_n){if(yield _n._isAvailable())return _n});return function(_n){return rn.apply(this,arguments)}}()))).filter(rn=>rn);let X=G[0]||Le(Pt);const De=zt(C,g.config.apiKey,g.name);let We=null;for(const rn of v)try{const _n=yield rn._get(De);if(_n){const yn=re._fromJSON(g,_n);rn!==X&&(We=yn),X=rn;break}}catch{}const gt=G.filter(rn=>rn._shouldAllowMigration);return X._shouldAllowMigration&&gt.length?(X=gt[0],We&&(yield X._set(De,We.toJSON())),yield Promise.all(v.map(function(){var rn=(0,E.Z)(function*(_n){if(_n!==X)try{yield _n._remove(De)}catch{}});return function(_n){return rn.apply(this,arguments)}}())),new gn(X,g,C)):new gn(X,g,C)})()}}function Xt(D){const g=D.toLowerCase();if(g.includes("opera/")||g.includes("opr/")||g.includes("opios/"))return"Opera";if(Gs(g))return"IEMobile";if(g.includes("msie")||g.includes("trident/"))return"IE";if(g.includes("edge/"))return"Edge";if(hn(g))return"Firefox";if(g.includes("silk/"))return"Silk";if(it(g))return"Blackberry";if(Ge(g))return"Webos";if(Vr(g))return"Safari";if((g.includes("chrome/")||oi(g))&&!g.includes("edge/"))return"Chrome";if(Js(g))return"Android";{const C=D.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===C?.length)return C[1]}return"Other"}function hn(D=(0,le.z$)()){return/firefox\//i.test(D)}function Vr(D=(0,le.z$)()){const g=D.toLowerCase();return g.includes("safari/")&&!g.includes("chrome/")&&!g.includes("crios/")&&!g.includes("android")}function oi(D=(0,le.z$)()){return/crios\//i.test(D)}function Gs(D=(0,le.z$)()){return/iemobile/i.test(D)}function Js(D=(0,le.z$)()){return/android/i.test(D)}function it(D=(0,le.z$)()){return/blackberry/i.test(D)}function Ge(D=(0,le.z$)()){return/webos/i.test(D)}function vt(D=(0,le.z$)()){return/iphone|ipad|ipod/i.test(D)||/macintosh/i.test(D)&&/mobile/i.test(D)}function Xn(D=(0,le.z$)()){return vt(D)||Js(D)||Ge(D)||it(D)||/windows phone/i.test(D)||Gs(D)}function Or(D,g=[]){let v;switch(D){case"Browser":v=Xt((0,le.z$)());break;case"Worker":v=`${Xt((0,le.z$)())}-${D}`;break;default:v=D}const C=g.length?g.join(","):"FirebaseCore-web";return`${v}/JsCore/${Oe.SDK_VERSION}/${C}`}class Xs{constructor(g){this.auth=g,this.queue=[]}pushCallback(g,v){const C=X=>new Promise((De,We)=>{try{De(g(X))}catch(gt){We(gt)}});C.onAbort=v,this.queue.push(C);const G=this.queue.length-1;return()=>{this.queue[G]=()=>Promise.resolve()}}runMiddleware(g){var v=this;return(0,E.Z)(function*(){if(v.auth.currentUser===g)return;const C=[];try{for(const G of v.queue)yield G(g),G.onAbort&&C.push(G.onAbort)}catch(G){C.reverse();for(const X of C)try{X()}catch{}throw v.auth._errorFactory.create("login-blocked",{originalMessage:G?.message})}})()}}function ws(){return(ws=(0,E.Z)(function*(D,g={}){return Xe(D,"GET","/v2/passwordPolicy",Ue(D,g))})).apply(this,arguments)}class Qo{constructor(g){var v,C,G,X;const De=g.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(v=De.minPasswordLength)&&void 0!==v?v:6,De.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=De.maxPasswordLength),void 0!==De.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=De.containsLowercaseCharacter),void 0!==De.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=De.containsUppercaseCharacter),void 0!==De.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=De.containsNumericCharacter),void 0!==De.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=De.containsNonAlphanumericCharacter),this.enforcementState=g.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(G=null===(C=g.allowedNonAlphanumericCharacters)||void 0===C?void 0:C.join(""))&&void 0!==G?G:"",this.forceUpgradeOnSignin=null!==(X=g.forceUpgradeOnSignin)&&void 0!==X&&X,this.schemaVersion=g.schemaVersion}validatePassword(g){var v,C,G,X,De,We;const gt={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(g,gt),this.validatePasswordCharacterOptions(g,gt),gt.isValid&&(gt.isValid=null===(v=gt.meetsMinPasswordLength)||void 0===v||v),gt.isValid&&(gt.isValid=null===(C=gt.meetsMaxPasswordLength)||void 0===C||C),gt.isValid&&(gt.isValid=null===(G=gt.containsLowercaseLetter)||void 0===G||G),gt.isValid&&(gt.isValid=null===(X=gt.containsUppercaseLetter)||void 0===X||X),gt.isValid&&(gt.isValid=null===(De=gt.containsNumericCharacter)||void 0===De||De),gt.isValid&&(gt.isValid=null===(We=gt.containsNonAlphanumericCharacter)||void 0===We||We),gt}validatePasswordLengthOptions(g,v){const C=this.customStrengthOptions.minPasswordLength,G=this.customStrengthOptions.maxPasswordLength;C&&(v.meetsMinPasswordLength=g.length>=C),G&&(v.meetsMaxPasswordLength=g.length<=G)}validatePasswordCharacterOptions(g,v){let C;this.updatePasswordCharacterOptionsStatuses(v,!1,!1,!1,!1);for(let G=0;G<g.length;G++)C=g.charAt(G),this.updatePasswordCharacterOptionsStatuses(v,C>="a"&&C<="z",C>="A"&&C<="Z",C>="0"&&C<="9",this.allowedNonAlphanumericCharacters.includes(C))}updatePasswordCharacterOptionsStatuses(g,v,C,G,X){this.customStrengthOptions.containsLowercaseLetter&&(g.containsLowercaseLetter||(g.containsLowercaseLetter=v)),this.customStrengthOptions.containsUppercaseLetter&&(g.containsUppercaseLetter||(g.containsUppercaseLetter=C)),this.customStrengthOptions.containsNumericCharacter&&(g.containsNumericCharacter||(g.containsNumericCharacter=G)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(g.containsNonAlphanumericCharacter||(g.containsNonAlphanumericCharacter=X))}}class Ya{constructor(g,v,C,G){this.app=g,this.heartbeatServiceProvider=v,this.appCheckServiceProvider=C,this.config=G,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Za(this),this.idTokenSubscription=new Za(this),this.beforeStateQueue=new Xs(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Ct,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=g.name,this.clientVersion=G.sdkClientVersion}_initializeWithPersistence(g,v){var C=this;return v&&(this._popupRedirectResolver=Le(v)),this._initializationPromise=this.queue((0,E.Z)(function*(){var G,X;if(!C._deleted&&(C.persistenceManager=yield gn.create(C,g),!C._deleted)){if(null!==(G=C._popupRedirectResolver)&&void 0!==G&&G._shouldInitProactively)try{yield C._popupRedirectResolver._initialize(C)}catch{}yield C.initializeCurrentUser(v),C.lastNotifiedUid=(null===(X=C.currentUser)||void 0===X?void 0:X.uid)||null,!C._deleted&&(C._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var g=this;return(0,E.Z)(function*(){if(g._deleted)return;const v=yield g.assertedPersistence.getCurrentUser();if(g.currentUser||v){if(g.currentUser&&v&&g.currentUser.uid===v.uid)return g._currentUser._assign(v),void(yield g.currentUser.getIdToken());yield g._updateCurrentUser(v,!0)}})()}initializeCurrentUser(g){var v=this;return(0,E.Z)(function*(){var C;const G=yield v.assertedPersistence.getCurrentUser();let X=G,De=!1;if(g&&v.config.authDomain){yield v.getOrInitRedirectPersistenceManager();const We=null===(C=v.redirectUser)||void 0===C?void 0:C._redirectEventId,gt=X?._redirectEventId,rn=yield v.tryRedirectSignIn(g);(!We||We===gt)&&rn?.user&&(X=rn.user,De=!0)}if(!X)return v.directlySetCurrentUser(null);if(!X._redirectEventId){if(De)try{yield v.beforeStateQueue.runMiddleware(X)}catch(We){X=G,v._popupRedirectResolver._overrideRedirectResult(v,()=>Promise.reject(We))}return X?v.reloadAndSetCurrentUserOrClear(X):v.directlySetCurrentUser(null)}return de(v._popupRedirectResolver,v,"argument-error"),yield v.getOrInitRedirectPersistenceManager(),v.redirectUser&&v.redirectUser._redirectEventId===X._redirectEventId?v.directlySetCurrentUser(X):v.reloadAndSetCurrentUserOrClear(X)})()}tryRedirectSignIn(g){var v=this;return(0,E.Z)(function*(){let C=null;try{C=yield v._popupRedirectResolver._completeRedirectFn(v,g,!0)}catch{yield v._setRedirectUser(null)}return C})()}reloadAndSetCurrentUserOrClear(g){var v=this;return(0,E.Z)(function*(){try{yield ur(g)}catch(C){if("auth/network-request-failed"!==C?.code)return v.directlySetCurrentUser(null)}return v.directlySetCurrentUser(g)})()}useDeviceLanguage(){this.languageCode=function tn(){if(typeof navigator>"u")return null;const D=navigator;return D.languages&&D.languages[0]||D.language||null}()}_delete(){var g=this;return(0,E.Z)(function*(){g._deleted=!0})()}updateCurrentUser(g){var v=this;return(0,E.Z)(function*(){const C=g?(0,le.m9)(g):null;return C&&de(C.auth.config.apiKey===v.config.apiKey,v,"invalid-user-token"),v._updateCurrentUser(C&&C._clone(v))})()}_updateCurrentUser(g,v=!1){var C=this;return(0,E.Z)(function*(){if(!C._deleted)return g&&de(C.tenantId===g.tenantId,C,"tenant-id-mismatch"),v||(yield C.beforeStateQueue.runMiddleware(g)),C.queue((0,E.Z)(function*(){yield C.directlySetCurrentUser(g),C.notifyAuthListeners()}))})()}signOut(){var g=this;return(0,E.Z)(function*(){return yield g.beforeStateQueue.runMiddleware(null),(g.redirectPersistenceManager||g._popupRedirectResolver)&&(yield g._setRedirectUser(null)),g._updateCurrentUser(null,!0)})()}setPersistence(g){var v=this;return this.queue((0,E.Z)(function*(){yield v.assertedPersistence.setPersistence(Le(g))}))}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(g){var v=this;return(0,E.Z)(function*(){v._getPasswordPolicyInternal()||(yield v._updatePasswordPolicy());const C=v._getPasswordPolicyInternal();return C.schemaVersion!==v.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(v._errorFactory.create("unsupported-password-policy-schema-version",{})):C.validatePassword(g)})()}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){var g=this;return(0,E.Z)(function*(){const v=yield function Bi(D){return ws.apply(this,arguments)}(g),C=new Qo(v);null===g.tenantId?g._projectPasswordPolicy=C:g._tenantPasswordPolicies[g.tenantId]=C})()}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(g){this._errorFactory=new le.LL("auth","Firebase",g())}onAuthStateChanged(g,v,C){return this.registerStateListener(this.authStateSubscription,g,v,C)}beforeAuthStateChanged(g,v){return this.beforeStateQueue.pushCallback(g,v)}onIdTokenChanged(g,v,C){return this.registerStateListener(this.idTokenSubscription,g,v,C)}authStateReady(){return new Promise((g,v)=>{if(this.currentUser)g();else{const C=this.onAuthStateChanged(()=>{C(),g()},v)}})}toJSON(){var g;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(g=this._currentUser)||void 0===g?void 0:g.toJSON()}}_setRedirectUser(g,v){var C=this;return(0,E.Z)(function*(){const G=yield C.getOrInitRedirectPersistenceManager(v);return null===g?G.removeCurrentUser():G.setCurrentUser(g)})()}getOrInitRedirectPersistenceManager(g){var v=this;return(0,E.Z)(function*(){if(!v.redirectPersistenceManager){const C=g&&Le(g)||v._popupRedirectResolver;de(C,v,"argument-error"),v.redirectPersistenceManager=yield gn.create(v,[Le(C._redirectPersistence)],"redirectUser"),v.redirectUser=yield v.redirectPersistenceManager.getCurrentUser()}return v.redirectPersistenceManager})()}_redirectUserForId(g){var v=this;return(0,E.Z)(function*(){var C,G;return v._isInitialized&&(yield v.queue((0,E.Z)(function*(){}))),(null===(C=v._currentUser)||void 0===C?void 0:C._redirectEventId)===g?v._currentUser:(null===(G=v.redirectUser)||void 0===G?void 0:G._redirectEventId)===g?v.redirectUser:null})()}_persistUserIfCurrent(g){var v=this;return(0,E.Z)(function*(){if(g===v.currentUser)return v.queue((0,E.Z)(function*(){return v.directlySetCurrentUser(g)}))})()}_notifyListenersIfCurrent(g){g===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var g,v;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const C=null!==(v=null===(g=this.currentUser)||void 0===g?void 0:g.uid)&&void 0!==v?v:null;this.lastNotifiedUid!==C&&(this.lastNotifiedUid=C,this.authStateSubscription.next(this.currentUser))}registerStateListener(g,v,C,G){if(this._deleted)return()=>{};const X="function"==typeof v?v:v.next.bind(v);let De=!1;const We=this._isInitialized?Promise.resolve():this._initializationPromise;if(de(We,this,"internal-error"),We.then(()=>{De||X(this.currentUser)}),"function"==typeof v){const gt=g.addObserver(v,C,G);return()=>{De=!0,gt()}}{const gt=g.addObserver(v);return()=>{De=!0,gt()}}}directlySetCurrentUser(g){var v=this;return(0,E.Z)(function*(){v.currentUser&&v.currentUser!==g&&v._currentUser._stopProactiveRefresh(),g&&v.isProactiveRefreshEnabled&&g._startProactiveRefresh(),v.currentUser=g,g?yield v.assertedPersistence.setCurrentUser(g):yield v.assertedPersistence.removeCurrentUser()})()}queue(g){return this.operations=this.operations.then(g,g),this.operations}get assertedPersistence(){return de(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(g){!g||this.frameworks.includes(g)||(this.frameworks.push(g),this.frameworks.sort(),this.clientVersion=Or(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var g=this;return(0,E.Z)(function*(){var v;const C={"X-Client-Version":g.clientVersion};g.app.options.appId&&(C["X-Firebase-gmpid"]=g.app.options.appId);const G=yield null===(v=g.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===v?void 0:v.getHeartbeatsHeader();G&&(C["X-Firebase-Client"]=G);const X=yield g._getAppCheckToken();return X&&(C["X-Firebase-AppCheck"]=X),C})()}_getAppCheckToken(){var g=this;return(0,E.Z)(function*(){var v;const C=yield null===(v=g.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===v?void 0:v.getToken();return C?.error&&function Re(D,...g){jt.logLevel<=Ne.in.WARN&&jt.warn(`Auth (${Oe.SDK_VERSION}): ${D}`,...g)}(`Error while retrieving App Check token: ${C.error}`),C?.token})()}}function Mn(D){return(0,le.m9)(D)}class Za{constructor(g){this.auth=g,this.observer=null,this.addObserver=(0,le.ne)(v=>this.observer=v)}get next(){return de(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function $s(D){return new Promise((g,v)=>{const C=document.createElement("script");C.setAttribute("src",D),C.onload=g,C.onerror=G=>{const X=Pe("internal-error");X.customData=G,v(X)},C.type="text/javascript",C.charset="UTF-8",function so(){var D,g;return null!==(g=null===(D=document.getElementsByTagName("head"))||void 0===D?void 0:D[0])&&void 0!==g?g:document}().appendChild(C)})}function Jo(D){return`__${D}${Math.floor(1e6*Math.random())}`}class ea{constructor(g){this.type="recaptcha-enterprise",this.auth=Mn(g)}verify(g="verify",v=!1){var C=this;return(0,E.Z)(function*(){function X(){return X=(0,E.Z)(function*(We){if(!v){if(null==We.tenantId&&null!=We._agentRecaptchaConfig)return We._agentRecaptchaConfig.siteKey;if(null!=We.tenantId&&void 0!==We._tenantRecaptchaConfigs[We.tenantId])return We._tenantRecaptchaConfigs[We.tenantId].siteKey}return new Promise(function(){var gt=(0,E.Z)(function*(rn,_n){Lt(We,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(yn=>{if(void 0!==yn.recaptchaKey){const ls=new ze(yn);return null==We.tenantId?We._agentRecaptchaConfig=ls:We._tenantRecaptchaConfigs[We.tenantId]=ls,rn(ls.siteKey)}_n(new Error("recaptcha Enterprise site key undefined"))}).catch(yn=>{_n(yn)})});return function(rn,_n){return gt.apply(this,arguments)}}())}),X.apply(this,arguments)}function De(We,gt,rn){const _n=window.grecaptcha;xe(_n)?_n.enterprise.ready(()=>{_n.enterprise.execute(We,{action:g}).then(yn=>{gt(yn)}).catch(()=>{gt("NO_RECAPTCHA")})}):rn(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((We,gt)=>{(function G(We){return X.apply(this,arguments)})(C.auth).then(rn=>{if(!v&&xe(window.grecaptcha))De(rn,We,gt);else{if(typeof window>"u")return void gt(new Error("RecaptchaVerifier is only supported in browser"));$s("https://www.google.com/recaptcha/enterprise.js?render="+rn).then(()=>{De(rn,We,gt)}).catch(_n=>{gt(_n)})}}).catch(rn=>{gt(rn)})})})()}}function dr(D,g,v){return Er.apply(this,arguments)}function Er(){return(Er=(0,E.Z)(function*(D,g,v,C=!1){const G=new ea(D);let X;try{X=yield G.verify(v)}catch{X=yield G.verify(v,!0)}const De=Object.assign({},g);return Object.assign(De,C?{captchaResp:X}:{captchaResponse:X}),Object.assign(De,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(De,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),De})).apply(this,arguments)}function li(D,g,v,C){return $r.apply(this,arguments)}function $r(){return $r=(0,E.Z)(function*(D,g,v,C){var G;if(null!==(G=D._getRecaptchaConfig())&&void 0!==G&&G.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const X=yield dr(D,g,v,"getOobCode"===v);return C(D,X)}return C(D,g).catch(function(){var X=(0,E.Z)(function*(De){if("auth/missing-recaptcha-token"===De.code){console.log(`${v} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const We=yield dr(D,g,v,"getOobCode"===v);return C(D,We)}return Promise.reject(De)});return function(De){return X.apply(this,arguments)}}())}),$r.apply(this,arguments)}function Wi(D){const g=D.indexOf(":");return g<0?"":D.substr(0,g+1)}function Qa(D){if(!D)return null;const g=Number(D);return isNaN(g)?null:g}class Oo{constructor(g,v){this.providerId=g,this.signInMethod=v}toJSON(){return Ot("not implemented")}_getIdTokenResponse(g){return Ot("not implemented")}_linkToIdToken(g,v){return Ot("not implemented")}_getReauthenticationResolver(g){return Ot("not implemented")}}function Xa(D,g){return zs.apply(this,arguments)}function zs(){return(zs=(0,E.Z)(function*(D,g){return Xe(D,"POST","/v1/accounts:resetPassword",Ue(D,g))})).apply(this,arguments)}function na(D,g){return vo.apply(this,arguments)}function vo(){return(vo=(0,E.Z)(function*(D,g){return Xe(D,"POST","/v1/accounts:update",g)})).apply(this,arguments)}function ks(){return(ks=(0,E.Z)(function*(D,g){return Xe(D,"POST","/v1/accounts:update",Ue(D,g))})).apply(this,arguments)}function Kn(D,g){return bi.apply(this,arguments)}function bi(){return(bi=(0,E.Z)(function*(D,g){return Ut(D,"POST","/v1/accounts:signInWithPassword",Ue(D,g))})).apply(this,arguments)}function hi(D,g){return es.apply(this,arguments)}function es(){return(es=(0,E.Z)(function*(D,g){return Xe(D,"POST","/v1/accounts:sendOobCode",Ue(D,g))})).apply(this,arguments)}function ts(){return(ts=(0,E.Z)(function*(D,g){return hi(D,g)})).apply(this,arguments)}function qi(D,g){return _i.apply(this,arguments)}function _i(){return(_i=(0,E.Z)(function*(D,g){return hi(D,g)})).apply(this,arguments)}function Cs(D,g){return As.apply(this,arguments)}function As(){return(As=(0,E.Z)(function*(D,g){return hi(D,g)})).apply(this,arguments)}function xt(){return(xt=(0,E.Z)(function*(D,g){return hi(D,g)})).apply(this,arguments)}function er(){return(er=(0,E.Z)(function*(D,g){return Ut(D,"POST","/v1/accounts:signInWithEmailLink",Ue(D,g))})).apply(this,arguments)}function Ki(){return(Ki=(0,E.Z)(function*(D,g){return Ut(D,"POST","/v1/accounts:signInWithEmailLink",Ue(D,g))})).apply(this,arguments)}class Xr extends Oo{constructor(g,v,C,G=null){super("password",C),this._email=g,this._password=v,this._tenantId=G}static _fromEmailAndPassword(g,v){return new Xr(g,v,"password")}static _fromEmailAndCode(g,v,C=null){return new Xr(g,v,"emailLink",C)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(g){const v="string"==typeof g?JSON.parse(g):g;if(v?.email&&v?.password){if("password"===v.signInMethod)return this._fromEmailAndPassword(v.email,v.password);if("emailLink"===v.signInMethod)return this._fromEmailAndCode(v.email,v.password,v.tenantId)}return null}_getIdTokenResponse(g){var v=this;return(0,E.Z)(function*(){switch(v.signInMethod){case"password":return li(g,{returnSecureToken:!0,email:v._email,password:v._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",Kn);case"emailLink":return function Cn(D,g){return er.apply(this,arguments)}(g,{email:v._email,oobCode:v._password});default:He(g,"internal-error")}})()}_linkToIdToken(g,v){var C=this;return(0,E.Z)(function*(){switch(C.signInMethod){case"password":return na(g,{idToken:v,returnSecureToken:!0,email:C._email,password:C._password});case"emailLink":return function ni(D,g){return Ki.apply(this,arguments)}(g,{idToken:v,email:C._email,oobCode:C._password});default:He(g,"internal-error")}})()}_getReauthenticationResolver(g){return this._getIdTokenResponse(g)}}function ri(D,g){return tr.apply(this,arguments)}function tr(){return(tr=(0,E.Z)(function*(D,g){return Ut(D,"POST","/v1/accounts:signInWithIdp",Ue(D,g))})).apply(this,arguments)}class Ar extends Oo{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(g){const v=new Ar(g.providerId,g.signInMethod);return g.idToken||g.accessToken?(g.idToken&&(v.idToken=g.idToken),g.accessToken&&(v.accessToken=g.accessToken),g.nonce&&!g.pendingToken&&(v.nonce=g.nonce),g.pendingToken&&(v.pendingToken=g.pendingToken)):g.oauthToken&&g.oauthTokenSecret?(v.accessToken=g.oauthToken,v.secret=g.oauthTokenSecret):He("argument-error"),v}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(g){const v="string"==typeof g?JSON.parse(g):g,{providerId:C,signInMethod:G}=v,X=(0,Te._T)(v,["providerId","signInMethod"]);if(!C||!G)return null;const De=new Ar(C,G);return De.idToken=X.idToken||void 0,De.accessToken=X.accessToken||void 0,De.secret=X.secret,De.nonce=X.nonce,De.pendingToken=X.pendingToken||null,De}_getIdTokenResponse(g){return ri(g,this.buildRequest())}_linkToIdToken(g,v){const C=this.buildRequest();return C.idToken=v,ri(g,C)}_getReauthenticationResolver(g){const v=this.buildRequest();return v.autoCreate=!1,ri(g,v)}buildRequest(){const g={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)g.pendingToken=this.pendingToken;else{const v={};this.idToken&&(v.id_token=this.idToken),this.accessToken&&(v.access_token=this.accessToken),this.secret&&(v.oauth_token_secret=this.secret),v.providerId=this.providerId,this.nonce&&!this.pendingToken&&(v.nonce=this.nonce),g.postBody=(0,le.xO)(v)}return g}}function yi(){return(yi=(0,E.Z)(function*(D,g){return Xe(D,"POST","/v1/accounts:sendVerificationCode",Ue(D,g))})).apply(this,arguments)}function Yi(){return(Yi=(0,E.Z)(function*(D,g){return Ut(D,"POST","/v1/accounts:signInWithPhoneNumber",Ue(D,g))})).apply(this,arguments)}function sr(){return(sr=(0,E.Z)(function*(D,g){const v=yield Ut(D,"POST","/v1/accounts:signInWithPhoneNumber",Ue(D,g));if(v.temporaryProof)throw Gn(D,"account-exists-with-different-credential",v);return v})).apply(this,arguments)}const Mo={USER_NOT_FOUND:"user-not-found"};function Zi(){return(Zi=(0,E.Z)(function*(D,g){return Ut(D,"POST","/v1/accounts:signInWithPhoneNumber",Ue(D,Object.assign(Object.assign({},g),{operation:"REAUTH"})),Mo)})).apply(this,arguments)}class fs extends Oo{constructor(g){super("phone","phone"),this.params=g}static _fromVerification(g,v){return new fs({verificationId:g,verificationCode:v})}static _fromTokenResponse(g,v){return new fs({phoneNumber:g,temporaryProof:v})}_getIdTokenResponse(g){return function ao(D,g){return Yi.apply(this,arguments)}(g,this._makeVerificationRequest())}_linkToIdToken(g,v){return function fi(D,g){return sr.apply(this,arguments)}(g,Object.assign({idToken:v},this._makeVerificationRequest()))}_getReauthenticationResolver(g){return function wi(D,g){return Zi.apply(this,arguments)}(g,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:g,phoneNumber:v,verificationId:C,verificationCode:G}=this.params;return g&&v?{temporaryProof:g,phoneNumber:v}:{sessionInfo:C,code:G}}toJSON(){const g={providerId:this.providerId};return this.params.phoneNumber&&(g.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(g.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(g.verificationCode=this.params.verificationCode),this.params.verificationId&&(g.verificationId=this.params.verificationId),g}static fromJSON(g){"string"==typeof g&&(g=JSON.parse(g));const{verificationId:v,verificationCode:C,phoneNumber:G,temporaryProof:X}=g;return C||v||G||X?new fs({verificationId:v,verificationCode:C,phoneNumber:G,temporaryProof:X}):null}}class gs{constructor(g){var v,C,G,X,De,We;const gt=(0,le.zd)((0,le.pd)(g)),rn=null!==(v=gt.apiKey)&&void 0!==v?v:null,_n=null!==(C=gt.oobCode)&&void 0!==C?C:null,yn=function no(D){switch(D){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(G=gt.mode)&&void 0!==G?G:null);de(rn&&_n&&yn,"argument-error"),this.apiKey=rn,this.operation=yn,this.code=_n,this.continueUrl=null!==(X=gt.continueUrl)&&void 0!==X?X:null,this.languageCode=null!==(De=gt.languageCode)&&void 0!==De?De:null,this.tenantId=null!==(We=gt.tenantId)&&void 0!==We?We:null}static parseLink(g){const v=function ps(D){const g=(0,le.zd)((0,le.pd)(D)).link,v=g?(0,le.zd)((0,le.pd)(g)).deep_link_id:null,C=(0,le.zd)((0,le.pd)(D)).deep_link_id;return(C?(0,le.zd)((0,le.pd)(C)).link:null)||C||v||g||D}(g);try{return new gs(v)}catch{return null}}}let Vn=(()=>{class D{constructor(){this.providerId=D.PROVIDER_ID}static credential(v,C){return Xr._fromEmailAndPassword(v,C)}static credentialWithLink(v,C){const G=gs.parseLink(C);return de(G,"argument-error"),Xr._fromEmailAndCode(v,G.code,G.tenantId)}}return D.PROVIDER_ID="password",D.EMAIL_PASSWORD_SIGN_IN_METHOD="password",D.EMAIL_LINK_SIGN_IN_METHOD="emailLink",D})();class Di{constructor(g){this.providerId=g,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(g){this.defaultLanguageCode=g}setCustomParameters(g){return this.customParameters=g,this}getCustomParameters(){return this.customParameters}}class ms extends Di{constructor(){super(...arguments),this.scopes=[]}addScope(g){return this.scopes.includes(g)||this.scopes.push(g),this}getScopes(){return[...this.scopes]}}class Ss extends ms{static credentialFromJSON(g){const v="string"==typeof g?JSON.parse(g):g;return de("providerId"in v&&"signInMethod"in v,"argument-error"),Ar._fromParams(v)}credential(g){return this._credential(Object.assign(Object.assign({},g),{nonce:g.rawNonce}))}_credential(g){return de(g.idToken||g.accessToken,"argument-error"),Ar._fromParams(Object.assign(Object.assign({},g),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(g){return Ss.oauthCredentialFromTaggedObject(g)}static credentialFromError(g){return Ss.oauthCredentialFromTaggedObject(g.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{oauthIdToken:v,oauthAccessToken:C,oauthTokenSecret:G,pendingToken:X,nonce:De,providerId:We}=g;if(!C&&!G&&!v&&!X||!We)return null;try{return new Ss(We)._credential({idToken:v,accessToken:C,nonce:De,pendingToken:X})}catch{return null}}}let Fs=(()=>{class D extends ms{constructor(){super("facebook.com")}static credential(v){return Ar._fromParams({providerId:D.PROVIDER_ID,signInMethod:D.FACEBOOK_SIGN_IN_METHOD,accessToken:v})}static credentialFromResult(v){return D.credentialFromTaggedObject(v)}static credentialFromError(v){return D.credentialFromTaggedObject(v.customData||{})}static credentialFromTaggedObject({_tokenResponse:v}){if(!v||!("oauthAccessToken"in v)||!v.oauthAccessToken)return null;try{return D.credential(v.oauthAccessToken)}catch{return null}}}return D.FACEBOOK_SIGN_IN_METHOD="facebook.com",D.PROVIDER_ID="facebook.com",D})(),_a=(()=>{class D extends ms{constructor(){super("google.com"),this.addScope("profile")}static credential(v,C){return Ar._fromParams({providerId:D.PROVIDER_ID,signInMethod:D.GOOGLE_SIGN_IN_METHOD,idToken:v,accessToken:C})}static credentialFromResult(v){return D.credentialFromTaggedObject(v)}static credentialFromError(v){return D.credentialFromTaggedObject(v.customData||{})}static credentialFromTaggedObject({_tokenResponse:v}){if(!v)return null;const{oauthIdToken:C,oauthAccessToken:G}=v;if(!C&&!G)return null;try{return D.credential(C,G)}catch{return null}}}return D.GOOGLE_SIGN_IN_METHOD="google.com",D.PROVIDER_ID="google.com",D})(),Ws=(()=>{class D extends ms{constructor(){super("github.com")}static credential(v){return Ar._fromParams({providerId:D.PROVIDER_ID,signInMethod:D.GITHUB_SIGN_IN_METHOD,accessToken:v})}static credentialFromResult(v){return D.credentialFromTaggedObject(v)}static credentialFromError(v){return D.credentialFromTaggedObject(v.customData||{})}static credentialFromTaggedObject({_tokenResponse:v}){if(!v||!("oauthAccessToken"in v)||!v.oauthAccessToken)return null;try{return D.credential(v.oauthAccessToken)}catch{return null}}}return D.GITHUB_SIGN_IN_METHOD="github.com",D.PROVIDER_ID="github.com",D})();class ei extends Oo{constructor(g,v){super(g,g),this.pendingToken=v}_getIdTokenResponse(g){return ri(g,this.buildRequest())}_linkToIdToken(g,v){const C=this.buildRequest();return C.idToken=v,ri(g,C)}_getReauthenticationResolver(g){const v=this.buildRequest();return v.autoCreate=!1,ri(g,v)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(g){const v="string"==typeof g?JSON.parse(g):g,{providerId:C,signInMethod:G,pendingToken:X}=v;return C&&G&&X&&C===G?new ei(C,X):null}static _create(g,v){return new ei(g,v)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class kr extends Di{constructor(g){de(g.startsWith("saml."),"argument-error"),super(g)}static credentialFromResult(g){return kr.samlCredentialFromTaggedObject(g)}static credentialFromError(g){return kr.samlCredentialFromTaggedObject(g.customData||{})}static credentialFromJSON(g){const v=ei.fromJSON(g);return de(v,"argument-error"),v}static samlCredentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{pendingToken:v,providerId:C}=g;if(!v||!C)return null;try{return ei._create(C,v)}catch{return null}}}let Qi=(()=>{class D extends ms{constructor(){super("twitter.com")}static credential(v,C){return Ar._fromParams({providerId:D.PROVIDER_ID,signInMethod:D.TWITTER_SIGN_IN_METHOD,oauthToken:v,oauthTokenSecret:C})}static credentialFromResult(v){return D.credentialFromTaggedObject(v)}static credentialFromError(v){return D.credentialFromTaggedObject(v.customData||{})}static credentialFromTaggedObject({_tokenResponse:v}){if(!v)return null;const{oauthAccessToken:C,oauthTokenSecret:G}=v;if(!C||!G)return null;try{return D.credential(C,G)}catch{return null}}}return D.TWITTER_SIGN_IN_METHOD="twitter.com",D.PROVIDER_ID="twitter.com",D})();function Rs(D,g){return qs.apply(this,arguments)}function qs(){return(qs=(0,E.Z)(function*(D,g){return Ut(D,"POST","/v1/accounts:signUp",Ue(D,g))})).apply(this,arguments)}class Br{constructor(g){this.user=g.user,this.providerId=g.providerId,this._tokenResponse=g._tokenResponse,this.operationType=g.operationType}static _fromIdTokenResponse(g,v,C,G=!1){return(0,E.Z)(function*(){const X=yield re._fromIdTokenResponse(g,C,G),De=Ls(C);return new Br({user:X,providerId:De,_tokenResponse:C,operationType:v})})()}static _forOperation(g,v,C){return(0,E.Z)(function*(){yield g._updateTokensIfNecessary(C,!0);const G=Ls(C);return new Br({user:g,providerId:G,_tokenResponse:C,operationType:v})})()}}function Ls(D){return D.providerId?D.providerId:"phoneNumber"in D?"phone":null}function Io(){return(Io=(0,E.Z)(function*(D){var g;const v=Mn(D);if(yield v._initializationPromise,null!==(g=v.currentUser)&&void 0!==g&&g.isAnonymous)return new Br({user:v.currentUser,providerId:null,operationType:"signIn"});const C=yield Rs(v,{returnSecureToken:!0}),G=yield Br._fromIdTokenResponse(v,"signIn",C,!0);return yield v._updateCurrentUser(G.user),G})).apply(this,arguments)}class ra extends le.ZR{constructor(g,v,C,G){var X;super(v.code,v.message),this.operationType=C,this.user=G,Object.setPrototypeOf(this,ra.prototype),this.customData={appName:g.name,tenantId:null!==(X=g.tenantId)&&void 0!==X?X:void 0,_serverResponse:v.customData._serverResponse,operationType:C}}static _fromErrorAndOperation(g,v,C,G){return new ra(g,v,C,G)}}function Uu(D,g,v,C){return("reauthenticate"===g?v._getReauthenticationResolver(D):v._getIdTokenResponse(D)).catch(X=>{throw"auth/multi-factor-auth-required"===X.code?ra._fromErrorAndOperation(D,X,g,C):X})}function ia(D){return new Set(D.map(({providerId:g})=>g).filter(g=>!!g))}function ko(){return ko=(0,E.Z)(function*(D,g){const v=(0,le.m9)(D);yield Sr(!0,v,g);const{providerUserInfo:C}=yield function an(D,g){return mn.apply(this,arguments)}(v.auth,{idToken:yield v.getIdToken(),deleteProvider:[g]}),G=ia(C||[]);return v.providerData=v.providerData.filter(X=>G.has(X.providerId)),G.has("phone")||(v.phoneNumber=null),yield v.auth._persistUserIfCurrent(v),v}),ko.apply(this,arguments)}function xa(D,g){return Fo.apply(this,arguments)}function Fo(){return(Fo=(0,E.Z)(function*(D,g,v=!1){const C=yield Dn(D,g._linkToIdToken(D.auth,yield D.getIdToken()),v);return Br._forOperation(D,"link",C)})).apply(this,arguments)}function Sr(D,g,v){return sa.apply(this,arguments)}function sa(){return(sa=(0,E.Z)(function*(D,g,v){yield ur(g);const G=!1===D?"provider-already-linked":"no-such-provider";de(ia(g.providerData).has(v)===D,g.auth,G)})).apply(this,arguments)}function ka(D,g){return q.apply(this,arguments)}function q(){return(q=(0,E.Z)(function*(D,g,v=!1){const{auth:C}=D,G="reauthenticate";try{const X=yield Dn(D,Uu(C,G,g,D),v);de(X.idToken,C,"internal-error");const De=$i(X.idToken);de(De,C,"internal-error");const{sub:We}=De;return de(D.uid===We,C,"user-mismatch"),Br._forOperation(D,G,X)}catch(X){throw"auth/user-not-found"===X?.code&&He(C,"user-mismatch"),X}})).apply(this,arguments)}function K(D,g){return j.apply(this,arguments)}function j(){return(j=(0,E.Z)(function*(D,g,v=!1){const C="signIn",G=yield Uu(D,C,g),X=yield Br._fromIdTokenResponse(D,C,G);return v||(yield D._updateCurrentUser(X.user)),X})).apply(this,arguments)}function oe(D,g){return Ae.apply(this,arguments)}function Ae(){return(Ae=(0,E.Z)(function*(D,g){return K(Mn(D),g)})).apply(this,arguments)}function nn(D,g){return Sn.apply(this,arguments)}function Sn(){return(Sn=(0,E.Z)(function*(D,g){const v=(0,le.m9)(D);return yield Sr(!1,v,g.providerId),xa(v,g)})).apply(this,arguments)}function Ui(D,g){return _s.apply(this,arguments)}function _s(){return(_s=(0,E.Z)(function*(D,g){return ka((0,le.m9)(D),g)})).apply(this,arguments)}function Lo(){return(Lo=(0,E.Z)(function*(D,g){return Ut(D,"POST","/v1/accounts:signInWithCustomToken",Ue(D,g))})).apply(this,arguments)}function ns(){return ns=(0,E.Z)(function*(D,g){const v=Mn(D),C=yield function Eo(D,g){return Lo.apply(this,arguments)}(v,{token:g,returnSecureToken:!0}),G=yield Br._fromIdTokenResponse(v,"signIn",C);return yield v._updateCurrentUser(G.user),G}),ns.apply(this,arguments)}class Vo{constructor(g,v){this.factorId=g,this.uid=v.mfaEnrollmentId,this.enrollmentTime=new Date(v.enrolledAt).toUTCString(),this.displayName=v.displayName}static _fromServerResponse(g,v){return"phoneInfo"in v?Bl._fromServerResponse(g,v):"totpInfo"in v?Ci._fromServerResponse(g,v):He(g,"internal-error")}}class Bl extends Vo{constructor(g){super("phone",g),this.phoneNumber=g.phoneInfo}static _fromServerResponse(g,v){return new Bl(v)}}class Ci extends Vo{constructor(g){super("totp",g)}static _fromServerResponse(g,v){return new Ci(v)}}function Vs(D,g,v){var C;de((null===(C=v.url)||void 0===C?void 0:C.length)>0,D,"invalid-continue-uri"),de(typeof v.dynamicLinkDomain>"u"||v.dynamicLinkDomain.length>0,D,"invalid-dynamic-link-domain"),g.continueUrl=v.url,g.dynamicLinkDomain=v.dynamicLinkDomain,g.canHandleCodeInApp=v.handleCodeInApp,v.iOS&&(de(v.iOS.bundleId.length>0,D,"missing-ios-bundle-id"),g.iOSBundleId=v.iOS.bundleId),v.android&&(de(v.android.packageName.length>0,D,"missing-android-pkg-name"),g.androidInstallApp=v.android.installApp,g.androidMinimumVersionCode=v.android.minimumVersion,g.androidPackageName=v.android.packageName)}function ys(D){return va.apply(this,arguments)}function va(){return(va=(0,E.Z)(function*(D){const g=Mn(D);g._getPasswordPolicyInternal()&&(yield g._updatePasswordPolicy())})).apply(this,arguments)}function Bo(){return(Bo=(0,E.Z)(function*(D,g,v){const C=Mn(D),G={requestType:"PASSWORD_RESET",email:g,clientType:"CLIENT_TYPE_WEB"};v&&Vs(C,G,v),yield li(C,G,"getOobCode",qi)})).apply(this,arguments)}function To(){return To=(0,E.Z)(function*(D,g,v){yield Xa((0,le.m9)(D),{oobCode:g,newPassword:v}).catch(function(){var C=(0,E.Z)(function*(G){throw"auth/password-does-not-meet-requirements"===G.code&&ys(D),G});return function(G){return C.apply(this,arguments)}}())}),To.apply(this,arguments)}function Uo(){return Uo=(0,E.Z)(function*(D,g){yield function Ma(D,g){return ks.apply(this,arguments)}((0,le.m9)(D),{oobCode:g})}),Uo.apply(this,arguments)}function Ul(D,g){return nl.apply(this,arguments)}function nl(){return(nl=(0,E.Z)(function*(D,g){const v=(0,le.m9)(D),C=yield Xa(v,{oobCode:g}),G=C.requestType;switch(de(G,v,"internal-error"),G){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":de(C.newEmail,v,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":de(C.mfaInfo,v,"internal-error");default:de(C.email,v,"internal-error")}let X=null;return C.mfaInfo&&(X=Vo._fromServerResponse(Mn(v),C.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===C.requestType?C.newEmail:C.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===C.requestType?C.email:C.newEmail)||null,multiFactorInfo:X},operation:G}})).apply(this,arguments)}function Fa(){return(Fa=(0,E.Z)(function*(D,g){const{data:v}=yield Ul((0,le.m9)(D),g);return v.email})).apply(this,arguments)}function lo(){return(lo=(0,E.Z)(function*(D,g,v){const C=Mn(D),De=yield li(C,{returnSecureToken:!0,email:g,password:v,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Rs).catch(gt=>{throw"auth/password-does-not-meet-requirements"===gt.code&&ys(D),gt}),We=yield Br._fromIdTokenResponse(C,"signIn",De);return yield C._updateCurrentUser(We.user),We})).apply(this,arguments)}function jo(){return(jo=(0,E.Z)(function*(D,g,v){const C=Mn(D),G={requestType:"EMAIL_SIGNIN",email:g,clientType:"CLIENT_TYPE_WEB"};(function X(De,We){de(We.handleCodeInApp,C,"argument-error"),We&&Vs(C,De,We)})(G,v),yield li(C,G,"getOobCode",Cs)})).apply(this,arguments)}function Hl(){return(Hl=(0,E.Z)(function*(D,g,v){const C=(0,le.m9)(D),G=Vn.credentialWithLink(g,v||Qn());return de(G._tenantId===(C.tenantId||null),C,"tenant-id-mismatch"),oe(C,G)})).apply(this,arguments)}function rl(){return(rl=(0,E.Z)(function*(D,g){return Xe(D,"POST","/v1/accounts:createAuthUri",Ue(D,g))})).apply(this,arguments)}function La(){return La=(0,E.Z)(function*(D,g){const C={identifier:g,continueUri:On()?Qn():"http://localhost"},{signinMethods:G}=yield function Dc(D,g){return rl.apply(this,arguments)}((0,le.m9)(D),C);return G||[]}),La.apply(this,arguments)}function co(){return co=(0,E.Z)(function*(D,g){const v=(0,le.m9)(D),G={requestType:"VERIFY_EMAIL",idToken:yield D.getIdToken()};g&&Vs(v.auth,G,g);const{email:X}=yield function Cr(D,g){return ts.apply(this,arguments)}(v.auth,G);X!==D.email&&(yield D.reload())}),co.apply(this,arguments)}function rs(){return rs=(0,E.Z)(function*(D,g,v){const C=(0,le.m9)(D),X={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield D.getIdToken(),newEmail:g};v&&Vs(C.auth,X,v);const{email:De}=yield function Mr(D,g){return xt.apply(this,arguments)}(C.auth,X);De!==D.email&&(yield D.reload())}),rs.apply(this,arguments)}function O(){return(O=(0,E.Z)(function*(D,g){return Xe(D,"POST","/v1/accounts:update",g)})).apply(this,arguments)}function H(){return H=(0,E.Z)(function*(D,{displayName:g,photoURL:v}){if(void 0===g&&void 0===v)return;const C=(0,le.m9)(D),X={idToken:yield C.getIdToken(),displayName:g,photoUrl:v,returnSecureToken:!0},De=yield Dn(C,function gu(D,g){return O.apply(this,arguments)}(C.auth,X));C.displayName=De.displayName||null,C.photoURL=De.photoUrl||null;const We=C.providerData.find(({providerId:gt})=>"password"===gt);We&&(We.displayName=C.displayName,We.photoURL=C.photoURL),yield C._updateTokensIfNecessary(De)}),H.apply(this,arguments)}function et(D,g,v){return ct.apply(this,arguments)}function ct(){return(ct=(0,E.Z)(function*(D,g,v){const{auth:C}=D,X={idToken:yield D.getIdToken(),returnSecureToken:!0};g&&(X.email=g),v&&(X.password=v);const De=yield Dn(D,na(C,X));yield D._updateTokensIfNecessary(De,!0)})).apply(this,arguments)}class nr{constructor(g,v,C={}){this.isNewUser=g,this.providerId=v,this.profile=C}}class _r extends nr{constructor(g,v,C,G){super(g,v,C),this.username=G}}class Jn extends nr{constructor(g,v){super(g,"facebook.com",v)}}class bn extends _r{constructor(g,v){super(g,"github.com",v,"string"==typeof v?.login?v?.login:null)}}class ii extends nr{constructor(g,v){super(g,"google.com",v)}}class xr extends _r{constructor(g,v,C){super(g,"twitter.com",v,C)}}function Ai(D){const{user:g,_tokenResponse:v}=D;return g.isAnonymous&&!v?{providerId:null,isNewUser:!1,profile:null}:function dn(D){var g,v;if(!D)return null;const{providerId:C}=D,G=D.rawUserInfo?JSON.parse(D.rawUserInfo):{},X=D.isNewUser||"identitytoolkit#SignupNewUserResponse"===D.kind;if(!C&&D?.idToken){const De=null===(v=null===(g=$i(D.idToken))||void 0===g?void 0:g.firebase)||void 0===v?void 0:v.sign_in_provider;if(De)return new nr(X,"anonymous"!==De&&"custom"!==De?De:null)}if(!C)return null;switch(C){case"facebook.com":return new Jn(X,G);case"github.com":return new bn(X,G);case"google.com":return new ii(X,G);case"twitter.com":return new xr(X,G,D.screenName||null);case"custom":case"anonymous":return new nr(X,null);default:return new nr(X,C,G)}}(v)}class wo{constructor(g,v,C){this.type=g,this.credential=v,this.user=C}static _fromIdtoken(g,v){return new wo("enroll",g,v)}static _fromMfaPendingCredential(g){return new wo("signin",g)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(g){var v,C;if(g?.multiFactorSession){if(null!==(v=g.multiFactorSession)&&void 0!==v&&v.pendingCredential)return wo._fromMfaPendingCredential(g.multiFactorSession.pendingCredential);if(null!==(C=g.multiFactorSession)&&void 0!==C&&C.idToken)return wo._fromIdtoken(g.multiFactorSession.idToken)}return null}}class la{constructor(g,v,C){this.session=g,this.hints=v,this.signInResolver=C}static _fromError(g,v){const C=Mn(g),G=v.customData._serverResponse,X=(G.mfaInfo||[]).map(We=>Vo._fromServerResponse(C,We));de(G.mfaPendingCredential,C,"internal-error");const De=wo._fromMfaPendingCredential(G.mfaPendingCredential);return new la(De,X,function(){var We=(0,E.Z)(function*(gt){const rn=yield gt._process(C,De);delete G.mfaInfo,delete G.mfaPendingCredential;const _n=Object.assign(Object.assign({},G),{idToken:rn.idToken,refreshToken:rn.refreshToken});switch(v.operationType){case"signIn":const yn=yield Br._fromIdTokenResponse(C,v.operationType,_n);return yield C._updateCurrentUser(yn.user),yn;case"reauthenticate":return de(v.user,C,"internal-error"),Br._forOperation(v.user,v.operationType,_n);default:He(C,"internal-error")}});return function(gt){return We.apply(this,arguments)}}())}resolveSignIn(g){var v=this;return(0,E.Z)(function*(){return v.signInResolver(g)})()}}class Tt{constructor(g){this.user=g,this.enrolledFactors=[],g._onReload(v=>{v.mfaInfo&&(this.enrolledFactors=v.mfaInfo.map(C=>Vo._fromServerResponse(g.auth,C)))})}static _fromUser(g){return new Tt(g)}getSession(){var g=this;return(0,E.Z)(function*(){return wo._fromIdtoken(yield g.user.getIdToken(),g.user)})()}enroll(g,v){var C=this;return(0,E.Z)(function*(){const G=g,X=yield C.getSession(),De=yield Dn(C.user,G._process(C.user.auth,X,v));return yield C.user._updateTokensIfNecessary(De),C.user.reload()})()}unenroll(g){var v=this;return(0,E.Z)(function*(){const C="string"==typeof g?g:g.uid,G=yield v.user.getIdToken();try{const X=yield Dn(v.user,function il(D,g){return Xe(D,"POST","/v2/accounts/mfaEnrollment:withdraw",Ue(D,g))}(v.user.auth,{idToken:G,mfaEnrollmentId:C}));v.enrolledFactors=v.enrolledFactors.filter(({uid:De})=>De!==C),yield v.user._updateTokensIfNecessary(X),yield v.user.reload()}catch(X){throw X}})()}}const Si=new WeakMap,sl="__sak";class on{constructor(g,v){this.storageRetriever=g,this.type=v}_isAvailable(){try{return this.storage?(this.storage.setItem(sl,"1"),this.storage.removeItem(sl),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(g,v){return this.storage.setItem(g,JSON.stringify(v)),Promise.resolve()}_get(g){const v=this.storage.getItem(g);return Promise.resolve(v?JSON.parse(v):null)}_remove(g){return this.storage.removeItem(g),Promise.resolve()}get storage(){return this.storageRetriever()}}const It=(()=>{class D extends on{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(v,C)=>this.onStorageEvent(v,C),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function vn(){const D=(0,le.z$)();return Vr(D)||vt(D)}()&&function ai(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=Xn(),this._shouldAllowMigration=!0}forAllChangedKeys(v){for(const C of Object.keys(this.listeners)){const G=this.storage.getItem(C),X=this.localCache[C];G!==X&&v(C,X,G)}}onStorageEvent(v,C=!1){if(!v.key)return void this.forAllChangedKeys((We,gt,rn)=>{this.notifyListeners(We,rn)});const G=v.key;if(C?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const We=this.storage.getItem(G);if(v.newValue!==We)null!==v.newValue?this.storage.setItem(G,v.newValue):this.storage.removeItem(G);else if(this.localCache[G]===v.newValue&&!C)return}const X=()=>{const We=this.storage.getItem(G);!C&&this.localCache[G]===We||this.notifyListeners(G,We)},De=this.storage.getItem(G);!function qt(){return(0,le.w1)()&&10===document.documentMode}()||De===v.newValue||v.newValue===v.oldValue?X():setTimeout(X,10)}notifyListeners(v,C){this.localCache[v]=C;const G=this.listeners[v];if(G)for(const X of Array.from(G))X(C&&JSON.parse(C))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((v,C,G)=>{this.onStorageEvent(new StorageEvent("storage",{key:v,oldValue:C,newValue:G}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(v,C){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[v]||(this.listeners[v]=new Set,this.localCache[v]=this.storage.getItem(v)),this.listeners[v].add(C)}_removeListener(v,C){this.listeners[v]&&(this.listeners[v].delete(C),0===this.listeners[v].size&&delete this.listeners[v]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(v,C){var G=()=>super._set,X=this;return(0,E.Z)(function*(){yield G().call(X,v,C),X.localCache[v]=JSON.stringify(C)})()}_get(v){var C=()=>super._get,G=this;return(0,E.Z)(function*(){const X=yield C().call(G,v);return G.localCache[v]=JSON.stringify(X),X})()}_remove(v){var C=()=>super._remove,G=this;return(0,E.Z)(function*(){yield C().call(G,v),delete G.localCache[v]})()}}return D.type="LOCAL",D})(),Ba=(()=>{class D extends on{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(v,C){}_removeListener(v,C){}}return D.type="SESSION",D})();let $l=(()=>{class D{constructor(v){this.eventTarget=v,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(v){const C=this.receivers.find(X=>X.isListeningto(v));if(C)return C;const G=new D(v);return this.receivers.push(G),G}isListeningto(v){return this.eventTarget===v}handleEvent(v){var C=this;return(0,E.Z)(function*(){const G=v,{eventId:X,eventType:De,data:We}=G.data,gt=C.handlersMap[De];if(!gt?.size)return;G.ports[0].postMessage({status:"ack",eventId:X,eventType:De});const rn=Array.from(gt).map(function(){var yn=(0,E.Z)(function*(ls){return ls(G.origin,We)});return function(ls){return yn.apply(this,arguments)}}()),_n=yield function ph(D){return Promise.all(D.map(function(){var g=(0,E.Z)(function*(v){try{return{fulfilled:!0,value:yield v}}catch(C){return{fulfilled:!1,reason:C}}});return function(v){return g.apply(this,arguments)}}()))}(rn);G.ports[0].postMessage({status:"done",eventId:X,eventType:De,response:_n})})()}_subscribe(v,C){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[v]||(this.handlersMap[v]=new Set),this.handlersMap[v].add(C)}_unsubscribe(v,C){this.handlersMap[v]&&C&&this.handlersMap[v].delete(C),(!C||0===this.handlersMap[v].size)&&delete this.handlersMap[v],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return D.receivers=[],D})();function ol(D="",g=10){let v="";for(let C=0;C<g;C++)v+=Math.floor(10*Math.random());return D+v}class Wc{constructor(g){this.target=g,this.handlers=new Set}removeMessageHandler(g){g.messageChannel&&(g.messageChannel.port1.removeEventListener("message",g.onMessage),g.messageChannel.port1.close()),this.handlers.delete(g)}_send(g,v,C=50){var G=this;return(0,E.Z)(function*(){const X=typeof MessageChannel<"u"?new MessageChannel:null;if(!X)throw new Error("connection_unavailable");let De,We;return new Promise((gt,rn)=>{const _n=ol("",20);X.port1.start();const yn=setTimeout(()=>{rn(new Error("unsupported_event"))},C);We={messageChannel:X,onMessage(ls){const Ol=ls;if(Ol.data.eventId===_n)switch(Ol.data.status){case"ack":clearTimeout(yn),De=setTimeout(()=>{rn(new Error("timeout"))},3e3);break;case"done":clearTimeout(De),gt(Ol.data.response);break;default:clearTimeout(yn),clearTimeout(De),rn(new Error("invalid_response"))}}},G.handlers.add(We),X.port1.addEventListener("message",We.onMessage),G.target.postMessage({eventType:g,eventId:_n,data:v},[X.port2])}).finally(()=>{We&&G.removeMessageHandler(We)})})()}}function hr(){return window}function Kc(){return typeof hr().WorkerGlobalScope<"u"&&"function"==typeof hr().importScripts}function Tr(){return(Tr=(0,E.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const ji="firebaseLocalStorageDb",Ur="firebaseLocalStorage",ln="fbase_key";class Co{constructor(g){this.request=g}toPromise(){return new Promise((g,v)=>{this.request.addEventListener("success",()=>{g(this.request.result)}),this.request.addEventListener("error",()=>{v(this.request.error)})})}}function or(D,g){return D.transaction([Ur],g?"readwrite":"readonly").objectStore(Ur)}function vi(){const D=indexedDB.open(ji,1);return new Promise((g,v)=>{D.addEventListener("error",()=>{v(D.error)}),D.addEventListener("upgradeneeded",()=>{const C=D.result;try{C.createObjectStore(Ur,{keyPath:ln})}catch(G){v(G)}}),D.addEventListener("success",(0,E.Z)(function*(){const C=D.result;C.objectStoreNames.contains(Ur)?g(C):(C.close(),yield function Ad(){const D=indexedDB.deleteDatabase(ji);return new Co(D).toPromise()}(),g(yield vi()))}))})}function Qt(D,g,v){return Ri.apply(this,arguments)}function Ri(){return(Ri=(0,E.Z)(function*(D,g,v){const C=or(D,!0).put({[ln]:g,value:v});return new Co(C).toPromise()})).apply(this,arguments)}function ua(){return(ua=(0,E.Z)(function*(D,g){const v=or(D,!1).get(g),C=yield new Co(v).toPromise();return void 0===C?null:C.value})).apply(this,arguments)}function zl(D,g){const v=or(D,!0).delete(g);return new Co(v).toPromise()}const Wl=(()=>{class D{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var v=this;return(0,E.Z)(function*(){return v.db||(v.db=yield vi()),v.db})()}_withRetries(v){var C=this;return(0,E.Z)(function*(){let G=0;for(;;)try{const X=yield C._openDb();return yield v(X)}catch(X){if(G++>3)throw X;C.db&&(C.db.close(),C.db=void 0)}})()}initializeServiceWorkerMessaging(){var v=this;return(0,E.Z)(function*(){return Kc()?v.initializeReceiver():v.initializeSender()})()}initializeReceiver(){var v=this;return(0,E.Z)(function*(){v.receiver=$l._getInstance(function Yn(){return Kc()?self:null}()),v.receiver._subscribe("keyChanged",function(){var C=(0,E.Z)(function*(G,X){return{keyProcessed:(yield v._poll()).includes(X.key)}});return function(G,X){return C.apply(this,arguments)}}()),v.receiver._subscribe("ping",function(){var C=(0,E.Z)(function*(G,X){return["keyChanged"]});return function(G,X){return C.apply(this,arguments)}}())})()}initializeSender(){var v=this;return(0,E.Z)(function*(){var C,G;if(v.activeServiceWorker=yield function Dt(){return Tr.apply(this,arguments)}(),!v.activeServiceWorker)return;v.sender=new Wc(v.activeServiceWorker);const X=yield v.sender._send("ping",{},800);X&&null!==(C=X[0])&&void 0!==C&&C.fulfilled&&null!==(G=X[0])&&void 0!==G&&G.value.includes("keyChanged")&&(v.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(v){var C=this;return(0,E.Z)(function*(){if(C.sender&&C.activeServiceWorker&&function Cd(){var D;return(null===(D=navigator?.serviceWorker)||void 0===D?void 0:D.controller)||null}()===C.activeServiceWorker)try{yield C.sender._send("keyChanged",{key:v},C.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,E.Z)(function*(){try{if(!indexedDB)return!1;const v=yield vi();return yield Qt(v,sl,"1"),yield zl(v,sl),!0}catch{}return!1})()}_withPendingWrite(v){var C=this;return(0,E.Z)(function*(){C.pendingWrites++;try{yield v()}finally{C.pendingWrites--}})()}_set(v,C){var G=this;return(0,E.Z)(function*(){return G._withPendingWrite((0,E.Z)(function*(){return yield G._withRetries(X=>Qt(X,v,C)),G.localCache[v]=C,G.notifyServiceWorker(v)}))})()}_get(v){var C=this;return(0,E.Z)(function*(){const G=yield C._withRetries(X=>function Ea(D,g){return ua.apply(this,arguments)}(X,v));return C.localCache[v]=G,G})()}_remove(v){var C=this;return(0,E.Z)(function*(){return C._withPendingWrite((0,E.Z)(function*(){return yield C._withRetries(G=>zl(G,v)),delete C.localCache[v],C.notifyServiceWorker(v)}))})()}_poll(){var v=this;return(0,E.Z)(function*(){const C=yield v._withRetries(De=>{const We=or(De,!1).getAll();return new Co(We).toPromise()});if(!C)return[];if(0!==v.pendingWrites)return[];const G=[],X=new Set;for(const{fbase_key:De,value:We}of C)X.add(De),JSON.stringify(v.localCache[De])!==JSON.stringify(We)&&(v.notifyListeners(De,We),G.push(De));for(const De of Object.keys(v.localCache))v.localCache[De]&&!X.has(De)&&(v.notifyListeners(De,null),G.push(De));return G})()}notifyListeners(v,C){this.localCache[v]=C;const G=this.listeners[v];if(G)for(const X of Array.from(G))X(C)}startPolling(){var v=this;this.stopPolling(),this.pollTimer=setInterval((0,E.Z)(function*(){return v._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(v,C){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[v]||(this.listeners[v]=new Set,this._get(v)),this.listeners[v].add(C)}_removeListener(v,C){this.listeners[v]&&(this.listeners[v].delete(C),0===this.listeners[v].size&&delete this.listeners[v]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return D.type="LOCAL",D})(),A=1e12;class L{constructor(g){this.auth=g,this.counter=A,this._widgets=new Map}render(g,v){const C=this.counter;return this._widgets.set(C,new V(g,this.auth.name,v||{})),this.counter++,C}reset(g){var v;const C=g||A;null===(v=this._widgets.get(C))||void 0===v||v.delete(),this._widgets.delete(C)}getResponse(g){var v;return(null===(v=this._widgets.get(g||A))||void 0===v?void 0:v.getResponse())||""}execute(g){var v=this;return(0,E.Z)(function*(){var C;return null===(C=v._widgets.get(g||A))||void 0===C||C.execute(),""})()}}class V{constructor(g,v,C){this.params=C,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const G="string"==typeof g?document.getElementById(g):g;de(G,"argument-error",{appName:v}),this.container=G,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function te(D){const g=[],v="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let C=0;C<D;C++)g.push(v.charAt(Math.floor(62*Math.random())));return g.join("")}(50);const{callback:g,"expired-callback":v}=this.params;if(g)try{g(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,v)try{v()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const he=Jo("rcb"),Qe=new Bt(3e4,6e4);class Gt{constructor(){var g;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(g=hr().grecaptcha)||void 0===g||!g.render)}load(g,v=""){return de(function Zn(D){return D.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(D)}(v),g,"argument-error"),this.shouldResolveImmediately(v)&&Ee(hr().grecaptcha)?Promise.resolve(hr().grecaptcha):new Promise((C,G)=>{const X=hr().setTimeout(()=>{G(Pe(g,"network-request-failed"))},Qe.get());hr()[he]=()=>{hr().clearTimeout(X),delete hr()[he];const We=hr().grecaptcha;if(!We||!Ee(We))return void G(Pe(g,"internal-error"));const gt=We.render;We.render=(rn,_n)=>{const yn=gt(rn,_n);return this.counter++,yn},this.hostLanguage=v,C(We)},$s(`https://www.google.com/recaptcha/api.js??${(0,le.xO)({onload:he,render:"explicit",hl:v})}`).catch(()=>{clearTimeout(X),G(Pe(g,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(g){var v;return!(null===(v=hr().grecaptcha)||void 0===v||!v.render)&&(g===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class zr{load(g){return(0,E.Z)(function*(){return new L(g)})()}clearedOneInstance(){}}const kn="recaptcha",Hi={theme:"light",type:"image"};class pi{constructor(g,v,C=Object.assign({},Hi)){this.parameters=C,this.type=kn,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Mn(g),this.isInvisible="invisible"===this.parameters.size,de(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const G="string"==typeof v?document.getElementById(v):v;de(G,this.auth,"argument-error"),this.container=G,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new zr:new Gt,this.validateStartingState()}verify(){var g=this;return(0,E.Z)(function*(){g.assertNotDestroyed();const v=yield g.render(),C=g.getAssertedRecaptcha();return C.getResponse(v)||new Promise(X=>{const De=We=>{We&&(g.tokenChangeListeners.delete(De),X(We))};g.tokenChangeListeners.add(De),g.isInvisible&&C.execute(v)})})()}render(){try{this.assertNotDestroyed()}catch(g){return Promise.reject(g)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(g=>{throw this.renderPromise=null,g})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(g=>{this.container.removeChild(g)})}validateStartingState(){de(!this.parameters.sitekey,this.auth,"argument-error"),de(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),de(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(g){return v=>{if(this.tokenChangeListeners.forEach(C=>C(v)),"function"==typeof g)g(v);else if("string"==typeof g){const C=hr()[g];"function"==typeof C&&C(v)}}}assertNotDestroyed(){de(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var g=this;return(0,E.Z)(function*(){if(yield g.init(),!g.widgetId){let v=g.container;if(!g.isInvisible){const C=document.createElement("div");v.appendChild(C),v=C}g.widgetId=g.getAssertedRecaptcha().render(v,g.parameters)}return g.widgetId})()}init(){var g=this;return(0,E.Z)(function*(){de(On()&&!Kc(),g.auth,"internal-error"),yield function $u(){let D=null;return new Promise(g=>{"complete"!==document.readyState?(D=()=>g(),window.addEventListener("load",D)):g()}).catch(g=>{throw D&&window.removeEventListener("load",D),g})}(),g.recaptcha=yield g._recaptchaLoader.load(g.auth,g.auth.languageCode||void 0);const v=yield function lt(D){return pt.apply(this,arguments)}(g.auth);de(v,g.auth,"internal-error"),g.parameters.sitekey=v})()}getAssertedRecaptcha(){return de(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class is{constructor(g,v){this.verificationId=g,this.onConfirmation=v}confirm(g){const v=fs._fromVerification(this.verificationId,g);return this.onConfirmation(v)}}function Ta(){return(Ta=(0,E.Z)(function*(D,g,v){const C=Mn(D),G=yield Ho(C,g,(0,le.m9)(v));return new is(G,X=>oe(C,X))})).apply(this,arguments)}function Is(){return(Is=(0,E.Z)(function*(D,g,v){const C=(0,le.m9)(D);yield Sr(!1,C,"phone");const G=yield Ho(C.auth,g,(0,le.m9)(v));return new is(G,X=>nn(C,X))})).apply(this,arguments)}function Ni(){return(Ni=(0,E.Z)(function*(D,g,v){const C=(0,le.m9)(D),G=yield Ho(C.auth,g,(0,le.m9)(v));return new is(G,X=>Ui(C,X))})).apply(this,arguments)}function Ho(D,g,v){return Dl.apply(this,arguments)}function Dl(){return Dl=(0,E.Z)(function*(D,g,v){var C;const G=yield v.verify();try{let X;if(de("string"==typeof G,D,"argument-error"),de(v.type===kn,D,"argument-error"),X="string"==typeof g?{phoneNumber:g}:g,"session"in X){const De=X.session;if("phoneNumber"in X)return de("enroll"===De.type,D,"internal-error"),(yield function Yr(D,g){return Xe(D,"POST","/v2/accounts/mfaEnrollment:start",Ue(D,g))}(D,{idToken:De.credential,phoneEnrollmentInfo:{phoneNumber:X.phoneNumber,recaptchaToken:G}})).phoneSessionInfo.sessionInfo;{de("signin"===De.type,D,"internal-error");const We=(null===(C=X.multiFactorHint)||void 0===C?void 0:C.uid)||X.multiFactorUid;return de(We,D,"missing-multi-factor-info"),(yield function gh(D,g){return Xe(D,"POST","/v2/accounts/mfaSignIn:start",Ue(D,g))}(D,{mfaPendingCredential:De.credential,mfaEnrollmentId:We,phoneSignInInfo:{recaptchaToken:G}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:De}=yield function En(D,g){return yi.apply(this,arguments)}(D,{phoneNumber:X.phoneNumber,recaptchaToken:G});return De}}finally{v._reset()}}),Dl.apply(this,arguments)}function ba(){return(ba=(0,E.Z)(function*(D,g){yield xa((0,le.m9)(D),g)})).apply(this,arguments)}let yu=(()=>{class D{constructor(v){this.providerId=D.PROVIDER_ID,this.auth=Mn(v)}verifyPhoneNumber(v,C){return Ho(this.auth,v,(0,le.m9)(C))}static credential(v,C){return fs._fromVerification(v,C)}static credentialFromResult(v){return D.credentialFromTaggedObject(v)}static credentialFromError(v){return D.credentialFromTaggedObject(v.customData||{})}static credentialFromTaggedObject({_tokenResponse:v}){if(!v)return null;const{phoneNumber:C,temporaryProof:G}=v;return C&&G?fs._fromTokenResponse(C,G):null}}return D.PROVIDER_ID="phone",D.PHONE_SIGN_IN_METHOD="phone",D})();function Go(D,g){return g?Le(g):(de(D._popupRedirectResolver,D,"argument-error"),D._popupRedirectResolver)}class Kl extends Oo{constructor(g){super("custom","custom"),this.params=g}_getIdTokenResponse(g){return ri(g,this._buildIdpRequest())}_linkToIdToken(g,v){return ri(g,this._buildIdpRequest(v))}_getReauthenticationResolver(g){return ri(g,this._buildIdpRequest())}_buildIdpRequest(g){const v={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return g&&(v.idToken=g),v}}function _h(D){return K(D.auth,new Kl(D),D.bypassAuthState)}function vu(D){const{auth:g,user:v}=D;return de(v,g,"internal-error"),ka(v,new Kl(D),D.bypassAuthState)}function Iu(D){return Ac.apply(this,arguments)}function Ac(){return(Ac=(0,E.Z)(function*(D){const{auth:g,user:v}=D;return de(v,g,"internal-error"),xa(v,new Kl(D),D.bypassAuthState)})).apply(this,arguments)}class uf{constructor(g,v,C,G,X=!1){this.auth=g,this.resolver=C,this.user=G,this.bypassAuthState=X,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(v)?v:[v]}execute(){var g=this;return new Promise(function(){var v=(0,E.Z)(function*(C,G){g.pendingPromise={resolve:C,reject:G};try{g.eventManager=yield g.resolver._initialize(g.auth),yield g.onExecution(),g.eventManager.registerConsumer(g)}catch(X){g.reject(X)}});return function(C,G){return v.apply(this,arguments)}}())}onAuthEvent(g){var v=this;return(0,E.Z)(function*(){const{urlResponse:C,sessionId:G,postBody:X,tenantId:De,error:We,type:gt}=g;if(We)return void v.reject(We);const rn={auth:v.auth,requestUri:C,sessionId:G,tenantId:De||void 0,postBody:X||void 0,user:v.user,bypassAuthState:v.bypassAuthState};try{v.resolve(yield v.getIdpTask(gt)(rn))}catch(_n){v.reject(_n)}})()}onError(g){this.reject(g)}getIdpTask(g){switch(g){case"signInViaPopup":case"signInViaRedirect":return _h;case"linkViaPopup":case"linkViaRedirect":return Iu;case"reauthViaPopup":case"reauthViaRedirect":return vu;default:He(this.auth,"internal-error")}}resolve(g){wt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(g),this.unregisterAndCleanUp()}reject(g){wt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(g),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Sd=new Bt(2e3,1e4);function zu(){return(zu=(0,E.Z)(function*(D,g,v){const C=Mn(D);ot(D,g,Di);const G=Go(C,v);return new al(C,"signInViaPopup",g,G).executeNotNull()})).apply(this,arguments)}function Zc(){return(Zc=(0,E.Z)(function*(D,g,v){const C=(0,le.m9)(D);ot(C.auth,g,Di);const G=Go(C.auth,v);return new al(C.auth,"reauthViaPopup",g,G,C).executeNotNull()})).apply(this,arguments)}function Yl(){return(Yl=(0,E.Z)(function*(D,g,v){const C=(0,le.m9)(D);ot(C.auth,g,Di);const G=Go(C.auth,v);return new al(C.auth,"linkViaPopup",g,G,C).executeNotNull()})).apply(this,arguments)}let al=(()=>{class D extends uf{constructor(v,C,G,X,De){super(v,C,X,De),this.provider=G,this.authWindow=null,this.pollId=null,D.currentPopupAction&&D.currentPopupAction.cancel(),D.currentPopupAction=this}executeNotNull(){var v=this;return(0,E.Z)(function*(){const C=yield v.execute();return de(C,v.auth,"internal-error"),C})()}onExecution(){var v=this;return(0,E.Z)(function*(){wt(1===v.filter.length,"Popup operations only handle one event");const C=ol();v.authWindow=yield v.resolver._openPopup(v.auth,v.provider,v.filter[0],C),v.authWindow.associatedEvent=C,v.resolver._originValidation(v.auth).catch(G=>{v.reject(G)}),v.resolver._isIframeWebStorageSupported(v.auth,G=>{G||v.reject(Pe(v.auth,"web-storage-unsupported"))}),v.pollUserCancellation()})()}get eventId(){var v;return(null===(v=this.authWindow)||void 0===v?void 0:v.associatedEvent)||null}cancel(){this.reject(Pe(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,D.currentPopupAction=null}pollUserCancellation(){const v=()=>{var C,G;this.pollId=null!==(G=null===(C=this.authWindow)||void 0===C?void 0:C.window)&&void 0!==G&&G.closed?window.setTimeout(()=>{this.pollId=null,this.reject(Pe(this.auth,"popup-closed-by-user"))},8e3):window.setTimeout(v,Sd.get())};v()}}return D.currentPopupAction=null,D})();const cf="pendingRedirect",Os=new Map;class Wu extends uf{constructor(g,v,C=!1){super(g,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],v,void 0,C),this.eventId=null}execute(){var g=()=>super.execute,v=this;return(0,E.Z)(function*(){let C=Os.get(v.auth._key());if(!C){try{const X=(yield function Rd(D,g){return Eu.apply(this,arguments)}(v.resolver,v.auth))?yield g().call(v):null;C=()=>Promise.resolve(X)}catch(G){C=()=>Promise.reject(G)}Os.set(v.auth._key(),C)}return v.bypassAuthState||Os.set(v.auth._key(),()=>Promise.resolve(null)),C()})()}onAuthEvent(g){var v=()=>super.onAuthEvent,C=this;return(0,E.Z)(function*(){if("signInViaRedirect"===g.type)return v().call(C,g);if("unknown"!==g.type){if(g.eventId){const G=yield C.auth._redirectUserForId(g.eventId);if(G)return C.user=G,v().call(C,g);C.resolve(null)}}else C.resolve(null)})()}onExecution(){return(0,E.Z)(function*(){})()}cleanUp(){}}function Eu(){return(Eu=(0,E.Z)(function*(D,g){const v=ll(g),C=ci(D);if(!(yield C._isAvailable()))return!1;const G="true"===(yield C._get(v));return yield C._remove(v),G})).apply(this,arguments)}function ss(D,g){return qu.apply(this,arguments)}function qu(){return(qu=(0,E.Z)(function*(D,g){return ci(D)._set(ll(g),"true")})).apply(this,arguments)}function $o(D,g){Os.set(D._key(),g)}function ci(D){return Le(D._redirectPersistence)}function ll(D){return zt(cf,D.config.apiKey,D.name)}function os(D,g,v){return function Zr(D,g,v){return Zl.apply(this,arguments)}(D,g,v)}function Zl(){return(Zl=(0,E.Z)(function*(D,g,v){const C=Mn(D);ot(D,g,Di),yield C._initializationPromise;const G=Go(C,v);return yield ss(G,C),G._openRedirect(C,g,"signInViaRedirect")})).apply(this,arguments)}function Yu(D,g,v){return function ca(D,g,v){return Zu.apply(this,arguments)}(D,g,v)}function Zu(){return(Zu=(0,E.Z)(function*(D,g,v){const C=(0,le.m9)(D);ot(C.auth,g,Di),yield C.auth._initializationPromise;const G=Go(C.auth,v);yield ss(G,C.auth);const X=yield Jl(C);return G._openRedirect(C.auth,g,"reauthViaRedirect",X)})).apply(this,arguments)}function _p(D,g,v){return function Bs(D,g,v){return Qu.apply(this,arguments)}(D,g,v)}function Qu(){return(Qu=(0,E.Z)(function*(D,g,v){const C=(0,le.m9)(D);ot(C.auth,g,Di),yield C.auth._initializationPromise;const G=Go(C.auth,v);yield Sr(!1,C,g.providerId),yield ss(G,C.auth);const X=yield Jl(C);return G._openRedirect(C.auth,g,"linkViaRedirect",X)})).apply(this,arguments)}function si(){return(si=(0,E.Z)(function*(D,g){return yield Mn(D)._initializationPromise,Rr(D,g,!1)})).apply(this,arguments)}function Rr(D,g){return da.apply(this,arguments)}function da(){return(da=(0,E.Z)(function*(D,g,v=!1){const C=Mn(D),G=Go(C,g),De=yield new Wu(C,G,v).execute();return De&&!v&&(delete De.user._redirectEventId,yield C._persistUserIfCurrent(De.user),yield C._setRedirectUser(null,g)),De})).apply(this,arguments)}function Jl(D){return ul.apply(this,arguments)}function ul(){return(ul=(0,E.Z)(function*(D){const g=ol(`${D.uid}:::`);return D._redirectEventId=g,yield D.auth._setRedirectUser(D),yield D.auth._persistUserIfCurrent(D),g})).apply(this,arguments)}class wa{constructor(g){this.auth=g,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(g){this.consumers.add(g),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,g)&&(this.sendToConsumer(this.queuedRedirectEvent,g),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(g){this.consumers.delete(g)}onEvent(g){if(this.hasEventBeenHandled(g))return!1;let v=!1;return this.consumers.forEach(C=>{this.isEventForConsumer(g,C)&&(v=!0,this.sendToConsumer(g,C),this.saveEventToCache(g))}),this.hasHandledPotentialRedirect||!function Cl(D){switch(D.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Ju(D);default:return!1}}(g)||(this.hasHandledPotentialRedirect=!0,v||(this.queuedRedirectEvent=g,v=!0)),v}sendToConsumer(g,v){var C;if(g.error&&!Ju(g)){const G=(null===(C=g.error.code)||void 0===C?void 0:C.split("auth/")[1])||"internal-error";v.onError(Pe(this.auth,G))}else v.onAuthEvent(g)}isEventForConsumer(g,v){const C=null===v.eventId||!!g.eventId&&g.eventId===v.eventId;return v.filter.includes(g.type)&&C}hasEventBeenHandled(g){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Pi(g))}saveEventToCache(g){this.cachedEventUids.add(Pi(g)),this.lastProcessedEventTime=Date.now()}}function Pi(D){return[D.type,D.eventId,D.sessionId,D.tenantId].filter(g=>g).join("-")}function Ju({type:D,error:g}){return"unknown"===D&&"auth/no-auth-event"===g?.code}function ha(D){return Al.apply(this,arguments)}function Al(){return(Al=(0,E.Z)(function*(D,g={}){return Xe(D,"GET","/v1/projects",g)})).apply(this,arguments)}const Sl=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Qc=/^https?/;function fa(){return(fa=(0,E.Z)(function*(D){if(D.config.emulator)return;const{authorizedDomains:g}=yield ha(D);for(const v of g)try{if(Da(v))return}catch{}He(D,"unauthorized-domain")})).apply(this,arguments)}function Da(D){const g=Qn(),{protocol:v,hostname:C}=new URL(g);if(D.startsWith("chrome-extension://")){const De=new URL(D);return""===De.hostname&&""===C?"chrome-extension:"===v&&D.replace("chrome-extension://","")===g.replace("chrome-extension://",""):"chrome-extension:"===v&&De.hostname===C}if(!Qc.test(v))return!1;if(Sl.test(D))return C===D;const G=D.replace(/\./g,"\\.");return new RegExp("^(.+\\."+G+"|"+G+")$","i").test(C)}const Xl=new Bt(3e4,6e4);function cl(){const D=hr().___jsl;if(D?.H)for(const g of Object.keys(D.H))if(D.H[g].r=D.H[g].r||[],D.H[g].L=D.H[g].L||[],D.H[g].r=[...D.H[g].L],D.CP)for(let v=0;v<D.CP.length;v++)D.CP[v]=null}let Tu=null;const Nd=new Bt(5e3,15e3),Xu="__/auth/iframe",Jc="emulator/auth/iframe",yp={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},vp=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function df(D){const g=D.config;de(g.authDomain,D,"auth-domain-config-required");const v=g.emulator?be(g,Jc):`https://${D.config.authDomain}/${Xu}`,C={apiKey:g.apiKey,appName:D.name,v:Oe.SDK_VERSION},G=vp.get(D.config.apiHost);G&&(C.eid=G);const X=D._getFrameworks();return X.length&&(C.fw=X.join(",")),`${v}?${(0,le.xO)(C).slice(1)}`}function Es(){return Es=(0,E.Z)(function*(D){const g=yield function eu(D){return Tu=Tu||function dl(D){return new Promise((g,v)=>{var C,G,X;function De(){cl(),gapi.load("gapi.iframes",{callback:()=>{g(gapi.iframes.getContext())},ontimeout:()=>{cl(),v(Pe(D,"network-request-failed"))},timeout:Xl.get()})}if(null!==(G=null===(C=hr().gapi)||void 0===C?void 0:C.iframes)&&void 0!==G&&G.Iframe)g(gapi.iframes.getContext());else{if(null===(X=hr().gapi)||void 0===X||!X.load){const We=Jo("iframefcb");return hr()[We]=()=>{gapi.load?De():v(Pe(D,"network-request-failed"))},$s(`https://apis.google.com/js/api.js?onload=${We}`).catch(gt=>v(gt))}De()}}).catch(g=>{throw Tu=null,g})}(D),Tu}(D),v=hr().gapi;return de(v,D,"internal-error"),g.open({where:document.body,url:df(D),messageHandlersFilter:v.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:yp,dontclear:!0},C=>new Promise(function(){var G=(0,E.Z)(function*(X,De){yield C.restyle({setHideOnLeave:!1});const We=Pe(D,"network-request-failed"),gt=hr().setTimeout(()=>{De(We)},Nd.get());function rn(){hr().clearTimeout(gt),X(C)}C.ping(rn).then(rn,()=>{De(We)})});return function(X,De){return G.apply(this,arguments)}}()))}),Es.apply(this,arguments)}const Xc={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Us{constructor(g){this.window=g,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}const yr="__/auth/handler",qr="emulator/auth/handler",nc=encodeURIComponent("fac");function rc(D,g,v,C,G,X){return nu.apply(this,arguments)}function nu(){return(nu=(0,E.Z)(function*(D,g,v,C,G,X){de(D.config.authDomain,D,"auth-domain-config-required"),de(D.config.apiKey,D,"invalid-api-key");const De={apiKey:D.config.apiKey,appName:D.name,authType:v,redirectUrl:C,v:Oe.SDK_VERSION,eventId:G};if(g instanceof Di){g.setDefaultLanguage(D.languageCode),De.providerId=g.providerId||"",(0,le.xb)(g.getCustomParameters())||(De.customParameters=JSON.stringify(g.getCustomParameters()));for(const[_n,yn]of Object.entries(X||{}))De[_n]=yn}if(g instanceof ms){const _n=g.getScopes().filter(yn=>""!==yn);_n.length>0&&(De.scopes=_n.join(","))}D.tenantId&&(De.tid=D.tenantId);const We=De;for(const _n of Object.keys(We))void 0===We[_n]&&delete We[_n];const gt=yield D._getAppCheckToken(),rn=gt?`#${nc}=${encodeURIComponent(gt)}`:"";return`${function yh({config:D}){return D.emulator?be(D,qr):`https://${D.authDomain}/${yr}`}(D)}?${(0,le.xO)(We).slice(1)}${rn}`})).apply(this,arguments)}const Ms="webStorageSupport",ru=class Od{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Ba,this._completeRedirectFn=Rr,this._overrideRedirectResult=$o}_openPopup(g,v,C,G){var X=this;return(0,E.Z)(function*(){var De;wt(null===(De=X.eventManagers[g._key()])||void 0===De?void 0:De.manager,"_initialize() not called before _openPopup()");const We=yield rc(g,v,C,Qn(),G);return function tu(D,g,v,C=500,G=600){const X=Math.max((window.screen.availHeight-G)/2,0).toString(),De=Math.max((window.screen.availWidth-C)/2,0).toString();let We="";const gt=Object.assign(Object.assign({},Xc),{width:C.toString(),height:G.toString(),top:X,left:De}),rn=(0,le.z$)().toLowerCase();v&&(We=oi(rn)?"_blank":v),hn(rn)&&(g=g||"http://localhost",gt.scrollbars="yes");const _n=Object.entries(gt).reduce((ls,[Ol,Ru])=>`${ls}${Ol}=${Ru},`,"");if(function In(D=(0,le.z$)()){var g;return vt(D)&&!(null===(g=window.navigator)||void 0===g||!g.standalone)}(rn)&&"_self"!==We)return function tc(D,g){const v=document.createElement("a");v.href=D,v.target=g;const C=document.createEvent("MouseEvent");C.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),v.dispatchEvent(C)}(g||"",We),new Us(null);const yn=window.open(g||"",We,_n);de(yn,D,"popup-blocked");try{yn.focus()}catch{}return new Us(yn)}(g,We,ol())})()}_openRedirect(g,v,C,G){var X=this;return(0,E.Z)(function*(){return yield X._originValidation(g),function qc(D){hr().location.href=D}(yield rc(g,v,C,Qn(),G)),new Promise(()=>{})})()}_initialize(g){const v=g._key();if(this.eventManagers[v]){const{manager:G,promise:X}=this.eventManagers[v];return G?Promise.resolve(G):(wt(X,"If manager is not set, promise should be"),X)}const C=this.initAndGetManager(g);return this.eventManagers[v]={promise:C},C.catch(()=>{delete this.eventManagers[v]}),C}initAndGetManager(g){var v=this;return(0,E.Z)(function*(){const C=yield function Wr(D){return Es.apply(this,arguments)}(g),G=new wa(g);return C.register("authEvent",X=>(de(X?.authEvent,g,"invalid-auth-event"),{status:G.onEvent(X.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),v.eventManagers[g._key()]={manager:G},v.iframes[g._key()]=C,G})()}_isIframeWebStorageSupported(g,v){this.iframes[g._key()].send(Ms,{type:Ms},G=>{var X;const De=null===(X=G?.[0])||void 0===X?void 0:X[Ms];void 0!==De&&v(!!De),He(g,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(g){const v=g._key();return this.originValidationPromises[v]||(this.originValidationPromises[v]=function ja(D){return fa.apply(this,arguments)}(g)),this.originValidationPromises[v]}get _shouldInitProactively(){return Xn()||Vr()||vt()}};class Ip{constructor(g){this.factorId=g}_process(g,v,C){switch(v.type){case"enroll":return this._finalizeEnroll(g,v.credential,C);case"signin":return this._finalizeSignIn(g,v.credential);default:return Ot("unexpected MultiFactorSessionType")}}}class Rc extends Ip{constructor(g){super("phone"),this.credential=g}static _fromCredential(g){return new Rc(g)}_finalizeEnroll(g,v,C){return function wl(D,g){return Xe(D,"POST","/v2/accounts/mfaEnrollment:finalize",Ue(D,g))}(g,{idToken:v,displayName:C,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(g,v){return function Ao(D,g){return Xe(D,"POST","/v2/accounts/mfaSignIn:finalize",Ue(D,g))}(g,{mfaPendingCredential:v,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let Ep=(()=>{class D{constructor(){}static assertion(v){return Rc._fromCredential(v)}}return D.FACTOR_ID="phone",D})();var xd="@firebase/auth";class Nc{constructor(g){this.auth=g,this.internalListeners=new Map}getUid(){var g;return this.assertAuthConfigured(),(null===(g=this.auth.currentUser)||void 0===g?void 0:g.uid)||null}getToken(g){var v=this;return(0,E.Z)(function*(){return v.assertAuthConfigured(),yield v.auth._initializationPromise,v.auth.currentUser?{accessToken:yield v.auth.currentUser.getIdToken(g)}:null})()}addAuthTokenListener(g){if(this.assertAuthConfigured(),this.internalListeners.has(g))return;const v=this.auth.onIdTokenChanged(C=>{g(C?.stsTokenManager.accessToken||null)});this.internalListeners.set(g,v),this.updateProactiveRefresh()}removeAuthTokenListener(g){this.assertAuthConfigured();const v=this.internalListeners.get(g);v&&(this.internalListeners.delete(g),v(),this.updateProactiveRefresh())}assertAuthConfigured(){de(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function js(){return window}(0,le.Pz)("authIdTokenMaxAge"),function Ha(D){(0,Oe._registerComponent)(new ke.wA("auth",(g,{options:v})=>{const C=g.getProvider("app").getImmediate(),G=g.getProvider("heartbeat"),X=g.getProvider("app-check-internal"),{apiKey:De,authDomain:We}=C.options;de(De&&!De.includes(":"),"invalid-api-key",{appName:C.name});const gt={apiKey:De,authDomain:We,clientPlatform:D,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Or(D)},rn=new Ya(C,G,X,gt);return function ui(D,g){const v=g?.persistence||[],C=(Array.isArray(v)?v:[v]).map(Le);g?.errorMap&&D._updateErrorMap(g.errorMap),D._initializeWithPersistence(C,g?.popupRedirectResolver)}(rn,v),rn},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((g,v,C)=>{g.getProvider("auth-internal").initialize()})),(0,Oe._registerComponent)(new ke.wA("auth-internal",g=>{const v=Mn(g.getProvider("auth").getImmediate());return new Nc(v)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,Oe.registerVersion)(xd,"1.3.1",function ed(D){switch(D){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(D)),(0,Oe.registerVersion)(xd,"1.3.1","esm2017")}("Browser");function Fd(){return Fd=(0,E.Z)(function*(D,g,v){var C;const{BuildInfo:G}=js();wt(g.sessionId,"AuthEvent did not contain a session ID");const X=yield function je(D){return at.apply(this,arguments)}(g.sessionId),De={};return vt()?De.ibi=G.packageName:Js()?De.apn=G.packageName:He(D,"operation-not-supported-in-this-environment"),G.displayName&&(De.appDisplayName=G.displayName),De.sessionId=X,rc(D,v,g.type,void 0,null!==(C=g.eventId)&&void 0!==C?C:void 0,De)}),Fd.apply(this,arguments)}function y(){return(y=(0,E.Z)(function*(D){const{BuildInfo:g}=js(),v={};vt()?v.iosBundleId=g.packageName:Js()?v.androidPackageName=g.packageName:He(D,"operation-not-supported-in-this-environment"),yield ha(D,v)})).apply(this,arguments)}function Q(){return(Q=(0,E.Z)(function*(D,g,v){const{cordova:C}=js();let G=()=>{};try{yield new Promise((X,De)=>{let We=null;function gt(){var yn;X();const ls=null===(yn=C.plugins.browsertab)||void 0===yn?void 0:yn.close;"function"==typeof ls&&ls(),"function"==typeof v?.close&&v.close()}function rn(){We||(We=window.setTimeout(()=>{De(Pe(D,"redirect-cancelled-by-user"))},2e3))}function _n(){"visible"===document?.visibilityState&&rn()}g.addPassiveListener(gt),document.addEventListener("resume",rn,!1),Js()&&document.addEventListener("visibilitychange",_n,!1),G=()=>{g.removePassiveListener(gt),document.removeEventListener("resume",rn,!1),document.removeEventListener("visibilitychange",_n,!1),We&&window.clearTimeout(We)}})}finally{G()}})).apply(this,arguments)}function at(){return(at=(0,E.Z)(function*(D){const g=function At(D){if(wt(/[0-9a-zA-Z]+/.test(D),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(D);const g=new ArrayBuffer(D.length),v=new Uint8Array(g);for(let C=0;C<D.length;C++)v[C]=D.charCodeAt(C);return v}(D),v=yield crypto.subtle.digest("SHA-256",g);return Array.from(new Uint8Array(v)).map(G=>G.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}class Rn extends wa{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(g=>{this.resolveInialized=g})}addPassiveListener(g){this.passiveListeners.add(g)}removePassiveListener(g){this.passiveListeners.delete(g)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(g){return this.resolveInialized(),this.passiveListeners.forEach(v=>v(g)),super.onEvent(g)}initialized(){var g=this;return(0,E.Z)(function*(){yield g.initPromise})()}}function ro(D){return td.apply(this,arguments)}function td(){return(td=(0,E.Z)(function*(D){const g=yield Du()._get(Ro(D));return g&&(yield Du()._remove(Ro(D))),g})).apply(this,arguments)}function nd(){const D=[];for(let v=0;v<20;v++){const C=Math.floor(62*Math.random());D.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(C))}return D.join("")}function Du(){return Le(It)}function Ro(D){return zt("authEvent",D.config.apiKey,D.name)}function Rl(D){if(!D?.includes("?"))return{};const[g,...v]=D.split("?");return(0,le.zd)(v.join("?"))}const fr=class hf{constructor(){this._redirectPersistence=Ba,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=Rr,this._overrideRedirectResult=$o}_initialize(g){var v=this;return(0,E.Z)(function*(){const C=g._key();let G=v.eventManagers.get(C);return G||(G=new Rn(g),v.eventManagers.set(C,G),v.attachCallbackListeners(g,G)),G})()}_openPopup(g){He(g,"operation-not-supported-in-this-environment")}_openRedirect(g,v,C,G){var X=this;return(0,E.Z)(function*(){!function ce(D){var g,v,C,G,X,De,We,gt,rn,_n;const yn=js();de("function"==typeof(null===(g=yn?.universalLinks)||void 0===g?void 0:g.subscribe),D,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),de(typeof(null===(v=yn?.BuildInfo)||void 0===v?void 0:v.packageName)<"u",D,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),de("function"==typeof(null===(X=null===(G=null===(C=yn?.cordova)||void 0===C?void 0:C.plugins)||void 0===G?void 0:G.browsertab)||void 0===X?void 0:X.openUrl),D,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),de("function"==typeof(null===(gt=null===(We=null===(De=yn?.cordova)||void 0===De?void 0:De.plugins)||void 0===We?void 0:We.browsertab)||void 0===gt?void 0:gt.isAvailable),D,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),de("function"==typeof(null===(_n=null===(rn=yn?.cordova)||void 0===rn?void 0:rn.InAppBrowser)||void 0===_n?void 0:_n.open),D,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(g);const De=yield X._initialize(g);yield De.initialized(),De.resetRedirect(),function Ku(){Os.clear()}(),yield X._originValidation(g);const We=function Fr(D,g,v=null){return{type:g,eventId:v,urlResponse:null,sessionId:nd(),postBody:null,tenantId:D.tenantId,error:Pe(D,"no-auth-event")}}(g,C,G);yield function Ca(D,g){return Du()._set(Ro(D),g)}(g,We);const gt=yield function Pc(D,g,v){return Fd.apply(this,arguments)}(g,We,v),rn=yield function w(D){const{cordova:g}=js();return new Promise(v=>{g.plugins.browsertab.isAvailable(C=>{let G=null;C?g.plugins.browsertab.openUrl(D):G=g.InAppBrowser.open(D,function sn(D=(0,le.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(D)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(D)}()?"_blank":"_system","location=yes"),v(G)})})}(gt);return function x(D,g,v){return Q.apply(this,arguments)}(g,De,rn)})()}_isIframeWebStorageSupported(g,v){throw new Error("Method not implemented.")}_originValidation(g){const v=g._key();return this.originValidationPromises[v]||(this.originValidationPromises[v]=function P(D){return y.apply(this,arguments)}(g)),this.originValidationPromises[v]}attachCallbackListeners(g,v){const{universalLinks:C,handleOpenURL:G,BuildInfo:X}=js(),De=setTimeout((0,E.Z)(function*(){yield ro(g),v.onEvent(Oc())}),500),We=function(){var _n=(0,E.Z)(function*(yn){clearTimeout(De);const ls=yield ro(g);let Ol=null;ls&&yn?.url&&(Ol=function So(D,g){var v,C;const G=function rd(D){const g=Rl(D),v=g.link?decodeURIComponent(g.link):void 0,C=Rl(v).link,G=g.deep_link_id?decodeURIComponent(g.deep_link_id):void 0;return Rl(G).link||G||C||v||D}(g);if(G.includes("/__/auth/callback")){const X=Rl(G),De=X.firebaseError?function Nr(D){try{return JSON.parse(D)}catch{return null}}(decodeURIComponent(X.firebaseError)):null,We=null===(C=null===(v=De?.code)||void 0===v?void 0:v.split("auth/"))||void 0===C?void 0:C[1],gt=We?Pe(We):null;return gt?{type:D.type,eventId:D.eventId,tenantId:D.tenantId,error:gt,urlResponse:null,sessionId:null,postBody:null}:{type:D.type,eventId:D.eventId,tenantId:D.tenantId,sessionId:D.sessionId,urlResponse:G,postBody:null}}return null}(ls,yn.url)),v.onEvent(Ol||Oc())});return function(ls){return _n.apply(this,arguments)}}();typeof C<"u"&&"function"==typeof C.subscribe&&C.subscribe(null,We);const gt=G,rn=`${X.packageName.toLowerCase()}://`;js().handleOpenURL=function(){var _n=(0,E.Z)(function*(yn){if(yn.toLowerCase().startsWith(rn)&&We({url:yn}),"function"==typeof gt)try{gt(yn)}catch(ls){console.error(ls)}});return function(yn){return _n.apply(this,arguments)}}()}};function Oc(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:Pe("no-auth-event")}}function Nl(){var D;return(null===(D=self?.location)||void 0===D?void 0:D.protocol)||null}function pf(D=(0,le.z$)()){return!("file:"!==Nl()&&"ionic:"!==Nl()&&"capacitor:"!==Nl()||!D.toLowerCase().match(/iphone|ipad|ipod|android/))}function Sa(){try{const D=self.localStorage,g=ol();if(D)return D.setItem(g,"1"),D.removeItem(g),!function Mc(D=(0,le.z$)()){return function zo(){return(0,le.w1)()&&11===document?.documentMode}()||function Aa(D=(0,le.z$)()){return/Edge\/\d+/.test(D)}(D)}()||(0,le.hl)()}catch{return ac()&&(0,le.hl)()}return!1}function ac(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function Ra(){return(function Tp(){return"http:"===Nl()||"https:"===Nl()}()||(0,le.ru)()||pf())&&!function gf(){return(0,le.b$)()||(0,le.UG)()}()&&Sa()&&!ac()}function Au(){return pf()&&typeof document<"u"}function sd(){return(sd=(0,E.Z)(function*(){return!!Au()&&new Promise(D=>{const g=setTimeout(()=>{D(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(g),D(!0)})})})).apply(this,arguments)}const Na={LOCAL:"local",NONE:"none",SESSION:"session"},xi=de,Eh="persistence";function Th(D){return bp.apply(this,arguments)}function bp(){return(bp=(0,E.Z)(function*(D){yield D._initializationPromise;const g=Pa(),v=zt(Eh,D.config.apiKey,D.name);g&&g.setItem(v,D._getPersistence())})).apply(this,arguments)}function Pa(){var D;try{return(null===(D=function Og(){return typeof window<"u"?window:null}())||void 0===D?void 0:D.sessionStorage)||null}catch{return null}}const yf=de;class Ga{constructor(){this.browserResolver=Le(ru),this.cordovaResolver=Le(fr),this.underlyingResolver=null,this._redirectPersistence=Ba,this._completeRedirectFn=Rr,this._overrideRedirectResult=$o}_initialize(g){var v=this;return(0,E.Z)(function*(){return yield v.selectUnderlyingResolver(),v.assertedUnderlyingResolver._initialize(g)})()}_openPopup(g,v,C,G){var X=this;return(0,E.Z)(function*(){return yield X.selectUnderlyingResolver(),X.assertedUnderlyingResolver._openPopup(g,v,C,G)})()}_openRedirect(g,v,C,G){var X=this;return(0,E.Z)(function*(){return yield X.selectUnderlyingResolver(),X.assertedUnderlyingResolver._openRedirect(g,v,C,G)})()}_isIframeWebStorageSupported(g,v){this.assertedUnderlyingResolver._isIframeWebStorageSupported(g,v)}_originValidation(g){return this.assertedUnderlyingResolver._originValidation(g)}get _shouldInitProactively(){return Au()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return yf(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var g=this;return(0,E.Z)(function*(){if(g.underlyingResolver)return;const v=yield function mf(){return sd.apply(this,arguments)}();g.underlyingResolver=v?g.cordovaResolver:g.browserResolver})()}}function Pl(D){return D.unwrap()}function Bd(D){return Su(D)}function Su(D){const{_tokenResponse:g}=D instanceof le.ZR?D.customData:D;if(!g)return null;if(!(D instanceof le.ZR)&&"temporaryProof"in g&&"phoneNumber"in g)return yu.credentialFromResult(D);const v=g.providerId;if(!v||v===qe.PASSWORD)return null;let C;switch(v){case qe.GOOGLE:C=_a;break;case qe.FACEBOOK:C=Fs;break;case qe.GITHUB:C=Ws;break;case qe.TWITTER:C=Qi;break;default:const{oauthIdToken:G,oauthAccessToken:X,oauthTokenSecret:De,pendingToken:We,nonce:gt}=g;return X||De||G||We?We?v.startsWith("saml.")?ei._create(v,We):Ar._fromParams({providerId:v,signInMethod:v,pendingToken:We,idToken:G,accessToken:X}):new Ss(v).credential({idToken:G,accessToken:X,rawNonce:gt}):null}return D instanceof le.ZR?C.credentialFromError(D):C.credentialFromResult(D)}function qo(D,g){return g.catch(v=>{throw v instanceof le.ZR&&function wp(D,g){var v;const C=null===(v=g.customData)||void 0===v?void 0:v._tokenResponse;if("auth/multi-factor-auth-required"===g?.code)g.resolver=new jd(D,function Ps(D,g){var v;const C=(0,le.m9)(D),G=g;return de(g.customData.operationType,C,"argument-error"),de(null===(v=G.customData._serverResponse)||void 0===v?void 0:v.mfaPendingCredential,C,"argument-error"),la._fromError(C,G)}(D,g));else if(C){const G=Su(g),X=g;G&&(X.credential=G,X.tenantId=C.tenantId||void 0,X.email=C.email||void 0,X.phoneNumber=C.phoneNumber||void 0)}}(D,v),v}).then(v=>{const G=v.user;return{operationType:v.operationType,credential:Bd(v),additionalUserInfo:Ai(v),user:fl.getOrCreate(G)}})}function Ud(D,g){return od.apply(this,arguments)}function od(){return(od=(0,E.Z)(function*(D,g){const v=yield g;return{verificationId:v.verificationId,confirm:C=>qo(D,v.confirm(C))}})).apply(this,arguments)}class jd{constructor(g,v){this.resolver=v,this.auth=function Wo(D){return D.wrapped()}(g)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(g){return qo(Pl(this.auth),this.resolver.resolveSignIn(g))}}class fl{constructor(g){this._delegate=g,this.multiFactor=function Do(D){const g=(0,le.m9)(D);return Si.has(g)||Si.set(g,Tt._fromUser(g)),Si.get(g)}(g)}static getOrCreate(g){return fl.USER_MAP.has(g)||fl.USER_MAP.set(g,new fl(g)),fl.USER_MAP.get(g)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(g){return this._delegate.getIdTokenResult(g)}getIdToken(g){return this._delegate.getIdToken(g)}linkAndRetrieveDataWithCredential(g){return this.linkWithCredential(g)}linkWithCredential(g){var v=this;return(0,E.Z)(function*(){return qo(v.auth,nn(v._delegate,g))})()}linkWithPhoneNumber(g,v){var C=this;return(0,E.Z)(function*(){return Ud(C.auth,function mh(D,g,v){return Is.apply(this,arguments)}(C._delegate,g,v))})()}linkWithPopup(g){var v=this;return(0,E.Z)(function*(){return qo(v.auth,function mp(D,g,v){return Yl.apply(this,arguments)}(v._delegate,g,Ga))})()}linkWithRedirect(g){var v=this;return(0,E.Z)(function*(){return yield Th(Mn(v.auth)),_p(v._delegate,g,Ga)})()}reauthenticateAndRetrieveDataWithCredential(g){return this.reauthenticateWithCredential(g)}reauthenticateWithCredential(g){var v=this;return(0,E.Z)(function*(){return qo(v.auth,Ui(v._delegate,g))})()}reauthenticateWithPhoneNumber(g,v){return Ud(this.auth,function _u(D,g,v){return Ni.apply(this,arguments)}(this._delegate,g,v))}reauthenticateWithPopup(g){return qo(this.auth,function gp(D,g,v){return Zc.apply(this,arguments)}(this._delegate,g,Ga))}reauthenticateWithRedirect(g){var v=this;return(0,E.Z)(function*(){return yield Th(Mn(v.auth)),Yu(v._delegate,g,Ga)})()}sendEmailVerification(g){return function Cc(D,g){return co.apply(this,arguments)}(this._delegate,g)}unlink(g){var v=this;return(0,E.Z)(function*(){return yield function xo(D,g){return ko.apply(this,arguments)}(v._delegate,g),v})()}updateEmail(g){return function Z(D,g){return et((0,le.m9)(D),g,null)}(this._delegate,g)}updatePassword(g){return function ve(D,g){return et((0,le.m9)(D),null,g)}(this._delegate,g)}updatePhoneNumber(g){return function ql(D,g){return ba.apply(this,arguments)}(this._delegate,g)}updateProfile(g){return function J(D,g){return H.apply(this,arguments)}(this._delegate,g)}verifyBeforeUpdateEmail(g,v){return function lf(D,g,v){return rs.apply(this,arguments)}(this._delegate,g,v)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}fl.USER_MAP=new WeakMap;const ad=de;let as=(()=>{class D{constructor(v,C){if(this.app=v,C.isInitialized())return this._delegate=C.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:G}=v.options;ad(G,"invalid-api-key",{appName:v.name}),ad(G,"invalid-api-key",{appName:v.name});const X=typeof window<"u"?Ga:void 0;this._delegate=C.initialize({options:{persistence:Hd(G,v.name),popupRedirectResolver:X}}),this._delegate._updateErrorMap(Et),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?fl.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(v){this._delegate.languageCode=v}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(v){this._delegate.tenantId=v}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(v,C){!function fu(D,g,v){const C=Mn(D);de(C._canInitEmulator,C,"emulator-config-failed"),de(/^https?:\/\//.test(g),C,"invalid-emulator-scheme");const G=!!v?.disableWarnings,X=Wi(g),{host:De,port:We}=function ta(D){const g=Wi(D),v=/(\/\/)?([^?#/]+)/.exec(D.substr(g.length));if(!v)return{host:"",port:null};const C=v[2].split("@").pop()||"",G=/^(\[[^\]]+\])(:|$)/.exec(C);if(G){const X=G[1];return{host:X,port:Qa(C.substr(X.length+1))}}{const[X,De]=C.split(":");return{host:X,port:Qa(De)}}}(g);C.config.emulator={url:`${X}//${De}${null===We?"":`:${We}`}/`},C.settings.appVerificationDisabledForTesting=!0,C.emulatorConfig=Object.freeze({host:De,port:We,protocol:X.replace(":",""),options:Object.freeze({disableWarnings:G})}),G||function Ja(){function D(){const g=document.createElement("p"),v=g.style;g.innerText="Running in emulator mode. Do not use with production credentials.",v.position="fixed",v.width="100%",v.backgroundColor="#ffffff",v.border=".1em solid #000000",v.color="#b50000",v.bottom="0px",v.left="0px",v.margin="0px",v.zIndex="10000",v.textAlign="center",g.classList.add("firebase-emulator-warning"),document.body.appendChild(g)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",D):D())}()}(this._delegate,v,C)}applyActionCode(v){return function ju(D,g){return Uo.apply(this,arguments)}(this._delegate,v)}checkActionCode(v){return Ul(this._delegate,v)}confirmPasswordReset(v,C){return function tl(D,g,v){return To.apply(this,arguments)}(this._delegate,v,C)}createUserWithEmailAndPassword(v,C){var G=this;return(0,E.Z)(function*(){return qo(G._delegate,function El(D,g,v){return lo.apply(this,arguments)}(G._delegate,v,C))})()}fetchProvidersForEmail(v){return this.fetchSignInMethodsForEmail(v)}fetchSignInMethodsForEmail(v){return function uo(D,g){return La.apply(this,arguments)}(this._delegate,v)}isSignInWithEmailLink(v){return function hh(D,g){const v=gs.parseLink(g);return"EMAIL_SIGNIN"===v?.operation}(0,v)}getRedirectResult(){var v=this;return(0,E.Z)(function*(){ad(Ra(),v._delegate,"operation-not-supported-in-this-environment");const C=yield function Ql(D,g){return si.apply(this,arguments)}(v._delegate,Ga);return C?qo(v._delegate,Promise.resolve(C)):{credential:null,user:null}})()}addFrameworkForLogging(v){!function ff(D,g){Mn(D)._logFramework(g)}(this._delegate,v)}onAuthStateChanged(v,C,G){const{next:X,error:De,complete:We}=Qr(v,C,G);return this._delegate.onAuthStateChanged(X,De,We)}onIdTokenChanged(v,C,G){const{next:X,error:De,complete:We}=Qr(v,C,G);return this._delegate.onIdTokenChanged(X,De,We)}sendSignInLinkToEmail(v,C){return function bc(D,g,v){return jo.apply(this,arguments)}(this._delegate,v,C)}sendPasswordResetEmail(v,C){return function pu(D,g,v){return Bo.apply(this,arguments)}(this._delegate,v,C||void 0)}setPersistence(v){var C=this;return(0,E.Z)(function*(){let G;switch(function _f(D,g){xi(Object.values(Na).includes(g),D,"invalid-persistence-type"),(0,le.b$)()?xi(g!==Na.SESSION,D,"unsupported-persistence-type"):(0,le.UG)()?xi(g===Na.NONE,D,"unsupported-persistence-type"):ac()?xi(g===Na.NONE||g===Na.LOCAL&&(0,le.hl)(),D,"unsupported-persistence-type"):xi(g===Na.NONE||Sa(),D,"unsupported-persistence-type")}(C._delegate,v),v){case Na.SESSION:G=Ba;break;case Na.LOCAL:G=(yield Le(Wl)._isAvailable())?Wl:It;break;case Na.NONE:G=Pt;break;default:return He("argument-error",{appName:C._delegate.name})}return C._delegate.setPersistence(G)})()}signInAndRetrieveDataWithCredential(v){return this.signInWithCredential(v)}signInAnonymously(){return qo(this._delegate,function Il(D){return Io.apply(this,arguments)}(this._delegate))}signInWithCredential(v){return qo(this._delegate,oe(this._delegate,v))}signInWithCustomToken(v){return qo(this._delegate,function Ji(D,g){return ns.apply(this,arguments)}(this._delegate,v))}signInWithEmailAndPassword(v,C){return qo(this._delegate,function Tl(D,g,v){return oe((0,le.m9)(D),Vn.credential(g,v)).catch(function(){var C=(0,E.Z)(function*(G){throw"auth/password-does-not-meet-requirements"===G.code&&ys(D),G});return function(G){return C.apply(this,arguments)}}())}(this._delegate,v,C))}signInWithEmailLink(v,C){return qo(this._delegate,function wc(D,g,v){return Hl.apply(this,arguments)}(this._delegate,v,C))}signInWithPhoneNumber(v,C){return Ud(this._delegate,function Ua(D,g,v){return Ta.apply(this,arguments)}(this._delegate,v,C))}signInWithPopup(v){var C=this;return(0,E.Z)(function*(){return ad(Ra(),C._delegate,"operation-not-supported-in-this-environment"),qo(C._delegate,function Ng(D,g,v){return zu.apply(this,arguments)}(C._delegate,v,Ga))})()}signInWithRedirect(v){var C=this;return(0,E.Z)(function*(){return ad(Ra(),C._delegate,"operation-not-supported-in-this-environment"),yield Th(C._delegate),os(C._delegate,v,Ga)})()}updateCurrentUser(v){return this._delegate.updateCurrentUser(v)}verifyPasswordResetCode(v){return function jl(D,g){return Fa.apply(this,arguments)}(this._delegate,v)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return D.Persistence=Na,D})();function Qr(D,g,v){let C=D;"function"!=typeof D&&({next:C,error:g,complete:v}=D);const G=C;return{next:De=>G(De&&fl.getOrCreate(De)),error:g,complete:v}}function Hd(D,g){const v=function bh(D,g){const v=Pa();if(!v)return[];const C=zt(Eh,D,g);switch(v.getItem(C)){case Na.NONE:return[Pt];case Na.LOCAL:return[Wl,Ba];case Na.SESSION:return[Ba];default:return[]}}(D,g);if(typeof self<"u"&&!v.includes(Wl)&&v.push(Wl),typeof window<"u")for(const C of[It,Ba])v.includes(C)||v.push(C);return v.includes(Pt)||v.push(Pt),v}class pl{constructor(){this.providerId="phone",this._delegate=new yu(Pl(_e.Z.auth()))}static credential(g,v){return yu.credential(g,v)}verifyPhoneNumber(g,v){return this._delegate.verifyPhoneNumber(g,v)}unwrap(){return this._delegate}}pl.PHONE_SIGN_IN_METHOD=yu.PHONE_SIGN_IN_METHOD,pl.PROVIDER_ID=yu.PROVIDER_ID;const vf=de;class ld{constructor(g,v,C=_e.Z.app()){var G;vf(null===(G=C.options)||void 0===G?void 0:G.apiKey,"invalid-api-key",{appName:C.name}),this._delegate=new pi(C.auth(),g,v),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function Cp(D){D.INTERNAL.registerComponent(new ke.wA("auth-compat",g=>{const v=g.getProvider("app-compat").getImmediate(),C=g.getProvider("auth");return new as(v,C)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:Vn,FacebookAuthProvider:Fs,GithubAuthProvider:Ws,GoogleAuthProvider:_a,OAuthProvider:Ss,SAMLAuthProvider:kr,PhoneAuthProvider:pl,PhoneMultiFactorGenerator:Ep,RecaptchaVerifier:ld,TwitterAuthProvider:Qi,Auth:as,AuthCredential:Oo,Error:le.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),D.registerVersion("@firebase/auth-compat","0.4.7")}(_e.Z)},5861:(Yt,Je,$)=>{function E(le,Oe,Ne,Te,ke,T,qe){try{var ye=le[T](qe),Ie=ye.value}catch(Ve){return void Ne(Ve)}ye.done?Oe(Ie):Promise.resolve(Ie).then(Te,ke)}function _e(le){return function(){var Oe=this,Ne=arguments;return new Promise(function(Te,ke){var T=le.apply(Oe,Ne);function qe(Ie){E(T,Te,ke,qe,ye,"next",Ie)}function ye(Ie){E(T,Te,ke,qe,ye,"throw",Ie)}qe(void 0)})}}$.d(Je,{Z:()=>_e})},7582:(Yt,Je,$)=>{function Oe(be,Se){var Ke={};for(var Fe in be)Object.prototype.hasOwnProperty.call(be,Fe)&&Se.indexOf(Fe)<0&&(Ke[Fe]=be[Fe]);if(null!=be&&"function"==typeof Object.getOwnPropertySymbols){var Ue=0;for(Fe=Object.getOwnPropertySymbols(be);Ue<Fe.length;Ue++)Se.indexOf(Fe[Ue])<0&&Object.prototype.propertyIsEnumerable.call(be,Fe[Ue])&&(Ke[Fe[Ue]]=be[Fe[Ue]])}return Ke}function Ve(be,Se,Ke,Fe){return new(Ke||(Ke=Promise))(function(Xe,Ft){function St(qn){try{Ut(Fe.next(qn))}catch(Zt){Ft(Zt)}}function cr(qn){try{Ut(Fe.throw(qn))}catch(Zt){Ft(Zt)}}function Ut(qn){qn.done?Xe(qn.value):function Ue(Xe){return Xe instanceof Ke?Xe:new Ke(function(Ft){Ft(Xe)})}(qn.value).then(St,cr)}Ut((Fe=Fe.apply(be,Se||[])).next())})}function me(be){return this instanceof me?(this.v=be,this):new me(be)}function He(be,Se,Ke){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Ue,Fe=Ke.apply(be,Se||[]),Xe=[];return Ue={},Ft("next"),Ft("throw"),Ft("return"),Ue[Symbol.asyncIterator]=function(){return this},Ue;function Ft(Ln){Fe[Ln]&&(Ue[Ln]=function(An){return new Promise(function(Gn,Ee){Xe.push([Ln,An,Gn,Ee])>1||St(Ln,An)})})}function St(Ln,An){try{!function cr(Ln){Ln.value instanceof me?Promise.resolve(Ln.value.v).then(Ut,qn):Zt(Xe[0][2],Ln)}(Fe[Ln](An))}catch(Gn){Zt(Xe[0][3],Gn)}}function Ut(Ln){St("next",Ln)}function qn(Ln){St("throw",Ln)}function Zt(Ln,An){Ln(An),Xe.shift(),Xe.length&&St(Xe[0][0],Xe[0][1])}}function $e(be){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Ke,Se=be[Symbol.asyncIterator];return Se?Se.call(be):(be=function mt(be){var Se="function"==typeof Symbol&&Symbol.iterator,Ke=Se&&be[Se],Fe=0;if(Ke)return Ke.call(be);if(be&&"number"==typeof be.length)return{next:function(){return be&&Fe>=be.length&&(be=void 0),{value:be&&be[Fe++],done:!be}}};throw new TypeError(Se?"Object is not iterable.":"Symbol.iterator is not defined.")}(be),Ke={},Fe("next"),Fe("throw"),Fe("return"),Ke[Symbol.asyncIterator]=function(){return this},Ke);function Fe(Xe){Ke[Xe]=be[Xe]&&function(Ft){return new Promise(function(St,cr){!function Ue(Xe,Ft,St,cr){Promise.resolve(cr).then(function(Ut){Xe({value:Ut,done:St})},Ft)}(St,cr,(Ft=be[Xe](Ft)).done,Ft.value)})}}}$.d(Je,{FC:()=>He,KL:()=>$e,_T:()=>Oe,mG:()=>Ve,qq:()=>me}),"function"==typeof SuppressedError&&SuppressedError}},Yt=>{var Je=E=>Yt(Yt.s=E);Je(2614),Je(6051)}]);