"use strict";(self.webpackChunkclinica=self.webpackChunkclinica||[]).push([[179],{9058:(qt,Ze,H)=>{H.d(Ze,{BH:()=>Ne,G6:()=>Ft,L:()=>$e,LL:()=>Ye,Pz:()=>qe,Sg:()=>ze,UG:()=>ce,ZB:()=>Pe,ZR:()=>Le,aH:()=>Me,b$:()=>Hn,eu:()=>be,hl:()=>ve,jU:()=>Zt,m9:()=>Oi,ne:()=>$n,pd:()=>sn,r3:()=>_e,ru:()=>Tt,tV:()=>pe,uI:()=>ut,vZ:()=>pt,w1:()=>Ir,xO:()=>kn,xb:()=>Ue,z$:()=>ot,zd:()=>Ot});const Ce=function(Te){const se=[];let ne=0;for(let re=0;re<Te.length;re++){let oe=Te.charCodeAt(re);oe<128?se[ne++]=oe:oe<2048?(se[ne++]=oe>>6|192,se[ne++]=63&oe|128):55296==(64512&oe)&&re+1<Te.length&&56320==(64512&Te.charCodeAt(re+1))?(oe=65536+((1023&oe)<<10)+(1023&Te.charCodeAt(++re)),se[ne++]=oe>>18|240,se[ne++]=oe>>12&63|128,se[ne++]=oe>>6&63|128,se[ne++]=63&oe|128):(se[ne++]=oe>>12|224,se[ne++]=oe>>6&63|128,se[ne++]=63&oe|128)}return se},Ee={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(Te,se){if(!Array.isArray(Te))throw Error("encodeByteArray takes an array as a parameter");this.init_();const ne=se?this.byteToCharMapWebSafe_:this.byteToCharMap_,re=[];for(let oe=0;oe<Te.length;oe+=3){const Re=Te[oe],lt=oe+1<Te.length,Rt=lt?Te[oe+1]:0,Kt=oe+2<Te.length,gn=Kt?Te[oe+2]:0;let wr=(15&Rt)<<2|gn>>6,Kr=63&gn;Kt||(Kr=64,lt||(wr=64)),re.push(ne[Re>>2],ne[(3&Re)<<4|Rt>>4],ne[wr],ne[Kr])}return re.join("")},encodeString(Te,se){return this.HAS_NATIVE_SUPPORT&&!se?btoa(Te):this.encodeByteArray(Ce(Te),se)},decodeString(Te,se){return this.HAS_NATIVE_SUPPORT&&!se?atob(Te):function(Te){const se=[];let ne=0,re=0;for(;ne<Te.length;){const oe=Te[ne++];if(oe<128)se[re++]=String.fromCharCode(oe);else if(oe>191&&oe<224){const Re=Te[ne++];se[re++]=String.fromCharCode((31&oe)<<6|63&Re)}else if(oe>239&&oe<365){const Kt=((7&oe)<<18|(63&Te[ne++])<<12|(63&Te[ne++])<<6|63&Te[ne++])-65536;se[re++]=String.fromCharCode(55296+(Kt>>10)),se[re++]=String.fromCharCode(56320+(1023&Kt))}else{const Re=Te[ne++],lt=Te[ne++];se[re++]=String.fromCharCode((15&oe)<<12|(63&Re)<<6|63&lt)}}return se.join("")}(this.decodeStringToByteArray(Te,se))},decodeStringToByteArray(Te,se){this.init_();const ne=se?this.charToByteMapWebSafe_:this.charToByteMap_,re=[];for(let oe=0;oe<Te.length;){const Re=ne[Te.charAt(oe++)],Rt=oe<Te.length?ne[Te.charAt(oe)]:0;++oe;const gn=oe<Te.length?ne[Te.charAt(oe)]:64;++oe;const un=oe<Te.length?ne[Te.charAt(oe)]:64;if(++oe,null==Re||null==Rt||null==gn||null==un)throw new Oe;re.push(Re<<2|Rt>>4),64!==gn&&(re.push(Rt<<4&240|gn>>2),64!==un&&re.push(gn<<6&192|un))}return re},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let Te=0;Te<this.ENCODED_VALS.length;Te++)this.byteToCharMap_[Te]=this.ENCODED_VALS.charAt(Te),this.charToByteMap_[this.byteToCharMap_[Te]]=Te,this.byteToCharMapWebSafe_[Te]=this.ENCODED_VALS_WEBSAFE.charAt(Te),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[Te]]=Te,Te>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(Te)]=Te,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(Te)]=Te)}}};class Oe extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const $e=function(Te){return function(Te){const se=Ce(Te);return Ee.encodeByteArray(se,!0)}(Te).replace(/\./g,"")},pe=function(Te){try{return Ee.decodeString(Te,!0)}catch(se){console.error("base64Decode failed: ",se)}return null};function Pe(Te,se){if(!(se instanceof Object))return se;switch(se.constructor){case Date:return new Date(se.getTime());case Object:void 0===Te&&(Te={});break;case Array:Te=[];break;default:return se}for(const ne in se)!se.hasOwnProperty(ne)||!dt(ne)||(Te[ne]=Pe(Te[ne],se[ne]));return Te}function dt(Te){return"__proto__"!==Te}const It=()=>{try{return function it(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const Te=process.env.__FIREBASE_DEFAULTS__;return Te?JSON.parse(Te):void 0})()||(()=>{if(typeof document>"u")return;let Te;try{Te=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const se=Te&&pe(Te[1]);return se&&JSON.parse(se)})()}catch(Te){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${Te}`)}},Me=()=>{var Te;return null===(Te=It())||void 0===Te?void 0:Te.config},qe=Te=>{var se;return null===(se=It())||void 0===se?void 0:se[`_${Te}`]};class Ne{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((se,ne)=>{this.resolve=se,this.reject=ne})}wrapCallback(se){return(ne,re)=>{ne?this.reject(ne):this.resolve(re),"function"==typeof se&&(this.promise.catch(()=>{}),1===se.length?se(ne):se(ne,re))}}}function ze(Te,se){if(Te.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const re=se||"demo-project",oe=Te.iat||0,Re=Te.sub||Te.user_id;if(!Re)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const lt=Object.assign({iss:`https://securetoken.google.com/${re}`,aud:re,iat:oe,exp:oe+3600,auth_time:oe,sub:Re,user_id:Re,firebase:{sign_in_provider:"custom",identities:{}}},Te);return[$e(JSON.stringify({alg:"none",type:"JWT"})),$e(JSON.stringify(lt)),""].join(".")}function ot(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function ut(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ot())}function ce(){var Te;const se=null===(Te=It())||void 0===Te?void 0:Te.forceEnvironment;if("node"===se)return!0;if("browser"===se)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function Zt(){return"object"==typeof self&&self.self===self}function Tt(){const Te="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof Te&&void 0!==Te.id}function Hn(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function Ir(){const Te=ot();return Te.indexOf("MSIE ")>=0||Te.indexOf("Trident/")>=0}function Ft(){return!ce()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function ve(){try{return"object"==typeof indexedDB}catch{return!1}}function be(){return new Promise((Te,se)=>{try{let ne=!0;const re="validate-browser-context-for-indexeddb-analytics-module",oe=self.indexedDB.open(re);oe.onsuccess=()=>{oe.result.close(),ne||self.indexedDB.deleteDatabase(re),Te(!0)},oe.onupgradeneeded=()=>{ne=!1},oe.onerror=()=>{var Re;se((null===(Re=oe.error)||void 0===Re?void 0:Re.message)||"")}}catch(ne){se(ne)}})}class Le extends Error{constructor(se,ne,re){super(ne),this.code=se,this.customData=re,this.name="FirebaseError",Object.setPrototypeOf(this,Le.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ye.prototype.create)}}class Ye{constructor(se,ne,re){this.service=se,this.serviceName=ne,this.errors=re}create(se,...ne){const re=ne[0]||{},oe=`${this.service}/${se}`,Re=this.errors[se],lt=Re?function Pt(Te,se){return Te.replace(Ct,(ne,re)=>{const oe=se[re];return null!=oe?String(oe):`<${re}?>`})}(Re,re):"Error";return new Le(oe,`${this.serviceName}: ${lt} (${oe}).`,re)}}const Ct=/\{\$([^}]+)}/g;function _e(Te,se){return Object.prototype.hasOwnProperty.call(Te,se)}function Ue(Te){for(const se in Te)if(Object.prototype.hasOwnProperty.call(Te,se))return!1;return!0}function pt(Te,se){if(Te===se)return!0;const ne=Object.keys(Te),re=Object.keys(se);for(const oe of ne){if(!re.includes(oe))return!1;const Re=Te[oe],lt=se[oe];if(Mt(Re)&&Mt(lt)){if(!pt(Re,lt))return!1}else if(Re!==lt)return!1}for(const oe of re)if(!ne.includes(oe))return!1;return!0}function Mt(Te){return null!==Te&&"object"==typeof Te}function kn(Te){const se=[];for(const[ne,re]of Object.entries(Te))Array.isArray(re)?re.forEach(oe=>{se.push(encodeURIComponent(ne)+"="+encodeURIComponent(oe))}):se.push(encodeURIComponent(ne)+"="+encodeURIComponent(re));return se.length?"&"+se.join("&"):""}function Ot(Te){const se={};return Te.replace(/^\?/,"").split("&").forEach(re=>{if(re){const[oe,Re]=re.split("=");se[decodeURIComponent(oe)]=decodeURIComponent(Re)}}),se}function sn(Te){const se=Te.indexOf("?");if(!se)return"";const ne=Te.indexOf("#",se);return Te.substring(se,ne>0?ne:void 0)}function $n(Te,se){const ne=new Fr(Te,se);return ne.subscribe.bind(ne)}class Fr{constructor(se,ne){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=ne,this.task.then(()=>{se(this)}).catch(re=>{this.error(re)})}next(se){this.forEachObserver(ne=>{ne.next(se)})}error(se){this.forEachObserver(ne=>{ne.error(se)}),this.close(se)}complete(){this.forEachObserver(se=>{se.complete()}),this.close()}subscribe(se,ne,re){let oe;if(void 0===se&&void 0===ne&&void 0===re)throw new Error("Missing Observer.");oe=function Mn(Te,se){if("object"!=typeof Te||null===Te)return!1;for(const ne of se)if(ne in Te&&"function"==typeof Te[ne])return!0;return!1}(se,["next","error","complete"])?se:{next:se,error:ne,complete:re},void 0===oe.next&&(oe.next=Sr),void 0===oe.error&&(oe.error=Sr),void 0===oe.complete&&(oe.complete=Sr);const Re=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?oe.error(this.finalError):oe.complete()}catch{}}),this.observers.push(oe),Re}unsubscribeOne(se){void 0===this.observers||void 0===this.observers[se]||(delete this.observers[se],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(se){if(!this.finalized)for(let ne=0;ne<this.observers.length;ne++)this.sendOne(ne,se)}sendOne(se,ne){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[se])try{ne(this.observers[se])}catch(re){typeof console<"u"&&console.error&&console.error(re)}})}close(se){this.finalized||(this.finalized=!0,void 0!==se&&(this.finalError=se),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Sr(){}function Oi(Te){return Te&&Te._delegate?Te._delegate:Te}},4108:(qt,Ze,H)=>{H.d(Ze,{e:()=>od});var y=H(5861),fe=H(7398),ae=H(9058),Ce=H(534),De=H(7879),Ee=H(7582),Oe=H(4537);const ft=function it(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},yt=new ae.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),nn=new De.Yd("@firebase/auth");function Me(N,...m){nn.logLevel<=De.in.ERROR&&nn.error(`Auth (${Ce.SDK_VERSION}): ${N}`,...m)}function qe(N,...m){throw ut(N,...m)}function Ne(N,...m){return ut(N,...m)}function ut(N,...m){if("string"!=typeof N){const T=m[0],M=[...m.slice(1)];return M[0]&&(M[0].appName=N.name),N._errorFactory.create(T,...M)}return yt.create(N,...m)}function ce(N,m,...T){if(!N)throw ut(m,...T)}function Zt(N){const m="INTERNAL ASSERTION FAILED: "+N;throw Me(m),new Error(m)}function Tt(N,m){N||Zt(m)}function Ir(){var N;return typeof self<"u"&&(null===(N=self.location)||void 0===N?void 0:N.protocol)||null}class Ft{constructor(m,T){this.shortDelay=m,this.longDelay=T,Tt(T>m,"Short delay should be less than long delay!"),this.isMobile=(0,ae.uI)()||(0,ae.b$)()}get(){return function or(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(function bn(){return"http:"===Ir()||"https:"===Ir()}()||(0,ae.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}class be{static initialize(m,T,M){this.fetchImpl=m,T&&(this.headersImpl=T),M&&(this.responseImpl=M)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:typeof globalThis<"u"&&globalThis.fetch?globalThis.fetch:typeof fetch<"u"?fetch:void Zt("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:typeof globalThis<"u"&&globalThis.Headers?globalThis.Headers:typeof Headers<"u"?Headers:void Zt("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:typeof globalThis<"u"&&globalThis.Response?globalThis.Response:typeof Response<"u"?Response:void Zt("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const He={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},xe=new Ft(3e4,6e4);function Le(N,m){return N.tenantId&&!m.tenantId?Object.assign(Object.assign({},m),{tenantId:N.tenantId}):m}function Ye(N,m,T,M){return Pt.apply(this,arguments)}function Pt(){return(Pt=(0,y.Z)(function*(N,m,T,M,Z={}){return Ct(N,Z,(0,y.Z)(function*(){let ue={},Be={};M&&("GET"===m?Be=M:ue={body:JSON.stringify(M)});const st=(0,ae.xO)(Object.assign({key:N.config.apiKey},Be)).slice(1),Dt=yield N._getAdditionalHeaders();return Dt["Content-Type"]="application/json",N.languageCode&&(Dt["X-Firebase-Locale"]=N.languageCode),be.fetch()(on(N,N.config.apiHost,T,st),Object.assign({method:m,headers:Dt,referrerPolicy:"no-referrer"},ue))}))})).apply(this,arguments)}function Ct(N,m,T){return ar.apply(this,arguments)}function ar(){return(ar=(0,y.Z)(function*(N,m,T){N._canInitEmulator=!1;const M=Object.assign(Object.assign({},He),m);try{const Z=new Cn(N),ue=yield Promise.race([T(),Z.promise]);Z.clearNetworkTimeout();const Be=yield ue.json();if("needConfirmation"in Be)throw Pn(N,"account-exists-with-different-credential",Be);if(ue.ok&&!("errorMessage"in Be))return Be;{const st=ue.ok?Be.errorMessage:Be.error.message,[Dt,ln]=st.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===Dt)throw Pn(N,"credential-already-in-use",Be);if("EMAIL_EXISTS"===Dt)throw Pn(N,"email-already-in-use",Be);if("USER_DISABLED"===Dt)throw Pn(N,"user-disabled",Be);const En=M[Dt]||Dt.toLowerCase().replace(/[_\s]+/g,"-");if(ln)throw function ze(N,m,T){const M=Object.assign(Object.assign({},ft()),{[m]:T});return new ae.LL("auth","Firebase",M).create(m,{appName:N.name})}(N,En,ln);qe(N,En)}}catch(Z){if(Z instanceof ae.ZR)throw Z;qe(N,"network-request-failed",{message:String(Z)})}})).apply(this,arguments)}function on(N,m,T,M){const Z=`${m}${T}?${M}`;return N.config.emulator?function ve(N,m){Tt(N.emulator,"Emulator should always be set here");const{url:T}=N.emulator;return m?`${T}${m.startsWith("/")?m.slice(1):m}`:T}(N.config,Z):`${N.config.apiScheme}://${Z}`}class Cn{constructor(m){this.auth=m,this.timer=null,this.promise=new Promise((T,M)=>{this.timer=setTimeout(()=>M(Ne(this.auth,"network-request-failed")),xe.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Pn(N,m,T){const M={appName:N.name};T.email&&(M.email=T.email),T.phoneNumber&&(M.phoneNumber=T.phoneNumber);const Z=Ne(N,m,M);return Z.customData._tokenResponse=T,Z}function Ot(){return(Ot=(0,y.Z)(function*(N,m){return Ye(N,"POST","/v1/accounts:delete",m)})).apply(this,arguments)}function Fr(){return(Fr=(0,y.Z)(function*(N,m){return Ye(N,"POST","/v1/accounts:lookup",m)})).apply(this,arguments)}function qr(N){if(N)try{const m=new Date(Number(N));if(!isNaN(m.getTime()))return m.toUTCString()}catch{}}function xr(){return(xr=(0,y.Z)(function*(N,m=!1){const T=(0,ae.m9)(N),M=yield T.getIdToken(m),Z=Gi(M);ce(Z&&Z.exp&&Z.auth_time&&Z.iat,T.auth,"internal-error");const ue="object"==typeof Z.firebase?Z.firebase:void 0,Be=ue?.sign_in_provider;return{claims:Z,token:M,authTime:qr(Bt(Z.auth_time)),issuedAtTime:qr(Bt(Z.iat)),expirationTime:qr(Bt(Z.exp)),signInProvider:Be||null,signInSecondFactor:ue?.sign_in_second_factor||null}})).apply(this,arguments)}function Bt(N){return 1e3*Number(N)}function Gi(N){const[m,T,M]=N.split(".");if(void 0===m||void 0===T||void 0===M)return Me("JWT malformed, contained fewer than 3 sections"),null;try{const Z=(0,ae.tV)(T);return Z?JSON.parse(Z):(Me("Failed to decode base64 JWT payload"),null)}catch(Z){return Me("Caught error parsing JWT payload as JSON",Z?.toString()),null}}function mn(N,m){return Ni.apply(this,arguments)}function Ni(){return(Ni=(0,y.Z)(function*(N,m,T=!1){if(T)return m;try{return yield m}catch(M){throw M instanceof ae.ZR&&function Fa({code:N}){return"auth/user-disabled"===N||"auth/user-token-expired"===N}(M)&&N.auth.currentUser===N&&(yield N.auth.signOut()),M}})).apply(this,arguments)}class ur{constructor(m){this.user=m,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(m){var T;if(m){const M=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),M}{this.errorBackoff=3e4;const Z=(null!==(T=this.user.stsTokenManager.expirationTime)&&void 0!==T?T:0)-Date.now()-3e5;return Math.max(0,Z)}}schedule(m=!1){var T=this;if(!this.isRunning)return;const M=this.getInterval(m);this.timerId=setTimeout((0,y.Z)(function*(){yield T.iteration()}),M)}iteration(){var m=this;return(0,y.Z)(function*(){try{yield m.user.getIdToken(!0)}catch(T){return void("auth/network-request-failed"===T?.code&&m.schedule(!0))}m.schedule()})()}}class bs{constructor(m,T){this.createdAt=m,this.lastLoginAt=T,this._initializeTime()}_initializeTime(){this.lastSignInTime=qr(this.lastLoginAt),this.creationTime=qr(this.createdAt)}_copy(m){this.createdAt=m.createdAt,this.lastLoginAt=m.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function Xr(N){return Hi.apply(this,arguments)}function Hi(){return Hi=(0,y.Z)(function*(N){var m;const T=N.auth,M=yield N.getIdToken(),Z=yield mn(N,function $n(N,m){return Fr.apply(this,arguments)}(T,{idToken:M}));ce(Z?.users.length,T,"internal-error");const ue=Z.users[0];N._notifyReloadListener(ue);const Be=null!==(m=ue.providerUserInfo)&&void 0!==m&&m.length?function yi(N){return N.map(m=>{var{providerId:T}=m,M=(0,Ee._T)(m,["providerId"]);return{providerId:T,uid:M.rawId||"",displayName:M.displayName||null,email:M.email||null,phoneNumber:M.phoneNumber||null,photoURL:M.photoUrl||null}})}(ue.providerUserInfo):[],st=function vi(N,m){return[...N.filter(M=>!m.some(Z=>Z.providerId===M.providerId)),...m]}(N.providerData,Be),En=!!N.isAnonymous&&!(N.email&&ue.passwordHash||st?.length),Ar={uid:ue.localId,displayName:ue.displayName||null,photoURL:ue.photoUrl||null,email:ue.email||null,emailVerified:ue.emailVerified||!1,phoneNumber:ue.phoneNumber||null,tenantId:ue.tenantId||null,providerData:st,metadata:new bs(ue.createdAt,ue.lastLoginAt),isAnonymous:En};Object.assign(N,Ar)}),Hi.apply(this,arguments)}function di(){return(di=(0,y.Z)(function*(N){const m=(0,ae.m9)(N);yield Xr(m),yield m.auth._persistUserIfCurrent(m),m.auth._notifyListenersIfCurrent(m)})).apply(this,arguments)}function Te(){return(Te=(0,y.Z)(function*(N,m){const T=yield Ct(N,{},(0,y.Z)(function*(){const M=(0,ae.xO)({grant_type:"refresh_token",refresh_token:m}).slice(1),{tokenApiHost:Z,apiKey:ue}=N.config,Be=on(N,Z,"/v1/token",`key=${ue}`),st=yield N._getAdditionalHeaders();return st["Content-Type"]="application/x-www-form-urlencoded",be.fetch()(Be,{method:"POST",headers:st,body:M})}));return{accessToken:T.access_token,expiresIn:T.expires_in,refreshToken:T.refresh_token}})).apply(this,arguments)}class se{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(m){ce(m.idToken,"internal-error"),ce(typeof m.idToken<"u","internal-error"),ce(typeof m.refreshToken<"u","internal-error");const T="expiresIn"in m&&typeof m.expiresIn<"u"?Number(m.expiresIn):function Sn(N){const m=Gi(N);return ce(m,"internal-error"),ce(typeof m.exp<"u","internal-error"),ce(typeof m.iat<"u","internal-error"),Number(m.exp)-Number(m.iat)}(m.idToken);this.updateTokensAndExpiration(m.idToken,m.refreshToken,T)}getToken(m,T=!1){var M=this;return(0,y.Z)(function*(){return ce(!M.accessToken||M.refreshToken,m,"user-token-expired"),T||!M.accessToken||M.isExpired?M.refreshToken?(yield M.refresh(m,M.refreshToken),M.accessToken):null:M.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(m,T){var M=this;return(0,y.Z)(function*(){const{accessToken:Z,refreshToken:ue,expiresIn:Be}=yield function Oi(N,m){return Te.apply(this,arguments)}(m,T);M.updateTokensAndExpiration(Z,ue,Number(Be))})()}updateTokensAndExpiration(m,T,M){this.refreshToken=T||null,this.accessToken=m||null,this.expirationTime=Date.now()+1e3*M}static fromJSON(m,T){const{refreshToken:M,accessToken:Z,expirationTime:ue}=T,Be=new se;return M&&(ce("string"==typeof M,"internal-error",{appName:m}),Be.refreshToken=M),Z&&(ce("string"==typeof Z,"internal-error",{appName:m}),Be.accessToken=Z),ue&&(ce("number"==typeof ue,"internal-error",{appName:m}),Be.expirationTime=ue),Be}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(m){this.accessToken=m.accessToken,this.refreshToken=m.refreshToken,this.expirationTime=m.expirationTime}_clone(){return Object.assign(new se,this.toJSON())}_performRefresh(){return Zt("not implemented")}}function ne(N,m){ce("string"==typeof N||typeof N>"u","internal-error",{appName:m})}class re{constructor(m){var{uid:T,auth:M,stsTokenManager:Z}=m,ue=(0,Ee._T)(m,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new ur(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=T,this.auth=M,this.stsTokenManager=Z,this.accessToken=Z.accessToken,this.displayName=ue.displayName||null,this.email=ue.email||null,this.emailVerified=ue.emailVerified||!1,this.phoneNumber=ue.phoneNumber||null,this.photoURL=ue.photoURL||null,this.isAnonymous=ue.isAnonymous||!1,this.tenantId=ue.tenantId||null,this.providerData=ue.providerData?[...ue.providerData]:[],this.metadata=new bs(ue.createdAt||void 0,ue.lastLoginAt||void 0)}getIdToken(m){var T=this;return(0,y.Z)(function*(){const M=yield mn(T,T.stsTokenManager.getToken(T.auth,m));return ce(M,T.auth,"internal-error"),T.accessToken!==M&&(T.accessToken=M,yield T.auth._persistUserIfCurrent(T),T.auth._notifyListenersIfCurrent(T)),M})()}getIdTokenResult(m){return function Sr(N){return xr.apply(this,arguments)}(this,m)}reload(){return function ws(N){return di.apply(this,arguments)}(this)}_assign(m){this!==m&&(ce(this.uid===m.uid,this.auth,"internal-error"),this.displayName=m.displayName,this.photoURL=m.photoURL,this.email=m.email,this.emailVerified=m.emailVerified,this.phoneNumber=m.phoneNumber,this.isAnonymous=m.isAnonymous,this.tenantId=m.tenantId,this.providerData=m.providerData.map(T=>Object.assign({},T)),this.metadata._copy(m.metadata),this.stsTokenManager._assign(m.stsTokenManager))}_clone(m){const T=new re(Object.assign(Object.assign({},this),{auth:m,stsTokenManager:this.stsTokenManager._clone()}));return T.metadata._copy(this.metadata),T}_onReload(m){ce(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=m,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(m){this.reloadListener?this.reloadListener(m):this.reloadUserInfo=m}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(m,T=!1){var M=this;return(0,y.Z)(function*(){let Z=!1;m.idToken&&m.idToken!==M.stsTokenManager.accessToken&&(M.stsTokenManager.updateFromServerResponse(m),Z=!0),T&&(yield Xr(M)),yield M.auth._persistUserIfCurrent(M),Z&&M.auth._notifyListenersIfCurrent(M)})()}delete(){var m=this;return(0,y.Z)(function*(){const T=yield m.getIdToken();return yield mn(m,function kn(N,m){return Ot.apply(this,arguments)}(m.auth,{idToken:T})),m.stsTokenManager.clearRefreshToken(),m.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(m=>Object.assign({},m)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(m,T){var M,Z,ue,Be,st,Dt,ln,En;const Ar=null!==(M=T.displayName)&&void 0!==M?M:void 0,la=null!==(Z=T.email)&&void 0!==Z?Z:void 0,Ws=null!==(ue=T.phoneNumber)&&void 0!==ue?ue:void 0,Mc=null!==(Be=T.photoURL)&&void 0!==Be?Be:void 0,yo=null!==(st=T.tenantId)&&void 0!==st?st:void 0,Qo=null!==(Dt=T._redirectEventId)&&void 0!==Dt?Dt:void 0,zr=null!==(ln=T.createdAt)&&void 0!==ln?ln:void 0,sc=null!==(En=T.lastLoginAt)&&void 0!==En?En:void 0,{uid:Io,emailVerified:Nl,isAnonymous:Fu,providerData:il,stsTokenManager:ad}=T;ce(Io&&ad,m,"internal-error");const sr=se.fromJSON(this.name,ad);ce("string"==typeof Io,m,"internal-error"),ne(Ar,m.name),ne(la,m.name),ce("boolean"==typeof Nl,m,"internal-error"),ce("boolean"==typeof Fu,m,"internal-error"),ne(Ws,m.name),ne(Mc,m.name),ne(yo,m.name),ne(Qo,m.name),ne(zr,m.name),ne(sc,m.name);const oc=new re({uid:Io,auth:m,email:la,emailVerified:Nl,displayName:Ar,isAnonymous:Fu,photoURL:Mc,phoneNumber:Ws,tenantId:yo,stsTokenManager:sr,createdAt:zr,lastLoginAt:sc});return il&&Array.isArray(il)&&(oc.providerData=il.map(sl=>Object.assign({},sl))),Qo&&(oc._redirectEventId=Qo),oc}static _fromIdTokenResponse(m,T,M=!1){return(0,y.Z)(function*(){const Z=new se;Z.updateFromServerResponse(T);const ue=new re({uid:T.localId,auth:m,stsTokenManager:Z,isAnonymous:M});return yield Xr(ue),ue})()}}const oe=new Map;function Re(N){Tt(N instanceof Function,"Expected a class definition");let m=oe.get(N);return m?(Tt(m instanceof N,"Instance stored in cache mismatched with class"),m):(m=new N,oe.set(N,m),m)}const Rt=(()=>{class N{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,y.Z)(function*(){return!0})()}_set(T,M){var Z=this;return(0,y.Z)(function*(){Z.storage[T]=M})()}_get(T){var M=this;return(0,y.Z)(function*(){const Z=M.storage[T];return void 0===Z?null:Z})()}_remove(T){var M=this;return(0,y.Z)(function*(){delete M.storage[T]})()}_addListener(T,M){}_removeListener(T,M){}}return N.type="NONE",N})();function Kt(N,m,T){return`firebase:${N}:${m}:${T}`}class gn{constructor(m,T,M){this.persistence=m,this.auth=T,this.userKey=M;const{config:Z,name:ue}=this.auth;this.fullUserKey=Kt(this.userKey,Z.apiKey,ue),this.fullPersistenceKey=Kt("persistence",Z.apiKey,ue),this.boundEventHandler=T._onStorageEvent.bind(T),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(m){return this.persistence._set(this.fullUserKey,m.toJSON())}getCurrentUser(){var m=this;return(0,y.Z)(function*(){const T=yield m.persistence._get(m.fullUserKey);return T?re._fromJSON(m.auth,T):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(m){var T=this;return(0,y.Z)(function*(){if(T.persistence===m)return;const M=yield T.getCurrentUser();return yield T.removeCurrentUser(),T.persistence=m,M?T.setCurrentUser(M):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(m,T,M="authUser"){return(0,y.Z)(function*(){if(!T.length)return new gn(Re(Rt),m,M);const Z=(yield Promise.all(T.map(function(){var ln=(0,y.Z)(function*(En){if(yield En._isAvailable())return En});return function(En){return ln.apply(this,arguments)}}()))).filter(ln=>ln);let ue=Z[0]||Re(Rt);const Be=Kt(M,m.config.apiKey,m.name);let st=null;for(const ln of T)try{const En=yield ln._get(Be);if(En){const Ar=re._fromJSON(m,En);ln!==ue&&(st=Ar),ue=ln;break}}catch{}const Dt=Z.filter(ln=>ln._shouldAllowMigration);return ue._shouldAllowMigration&&Dt.length?(ue=Dt[0],st&&(yield ue._set(Be,st.toJSON())),yield Promise.all(T.map(function(){var ln=(0,y.Z)(function*(En){if(En!==ue)try{yield En._remove(Be)}catch{}});return function(En){return ln.apply(this,arguments)}}())),new gn(ue,m,M)):new gn(ue,m,M)})()}}function Qt(N){const m=N.toLowerCase();if(m.includes("opera/")||m.includes("opr/")||m.includes("opios/"))return"Opera";if(function js(N=(0,ae.z$)()){return/iemobile/i.test(N)}(m))return"IEMobile";if(m.includes("msie")||m.includes("trident/"))return"IE";if(m.includes("edge/"))return"Edge";if(function un(N=(0,ae.z$)()){return/firefox\//i.test(N)}(m))return"Firefox";if(m.includes("silk/"))return"Silk";if(function rt(N=(0,ae.z$)()){return/blackberry/i.test(N)}(m))return"Blackberry";if(function je(N=(0,ae.z$)()){return/webos/i.test(N)}(m))return"Webos";if(function wr(N=(0,ae.z$)()){const m=N.toLowerCase();return m.includes("safari/")&&!m.includes("chrome/")&&!m.includes("crios/")&&!m.includes("android")}(m))return"Safari";if((m.includes("chrome/")||function Kr(N=(0,ae.z$)()){return/crios\//i.test(N)}(m))&&!m.includes("edge/"))return"Chrome";if(function Ms(N=(0,ae.z$)()){return/android/i.test(N)}(m))return"Android";{const M=N.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===M?.length)return M[1]}return"Other"}function Dr(N,m=[]){let T;switch(N){case"Browser":T=Qt((0,ae.z$)());break;case"Worker":T=`${Qt((0,ae.z$)())}-${N}`;break;default:T=N}const M=m.length?m.join(","):"FirebaseCore-web";return`${T}/JsCore/${Ce.SDK_VERSION}/${M}`}class qs{constructor(m){this.auth=m,this.queue=[]}pushCallback(m,T){const M=ue=>new Promise((Be,st)=>{try{Be(m(ue))}catch(Dt){st(Dt)}});M.onAbort=T,this.queue.push(M);const Z=this.queue.length-1;return()=>{this.queue[Z]=()=>Promise.resolve()}}runMiddleware(m){var T=this;return(0,y.Z)(function*(){if(T.auth.currentUser===m)return;const M=[];try{for(const Z of T.queue)yield Z(m),Z.onAbort&&M.push(Z.onAbort)}catch(Z){M.reverse();for(const ue of M)try{ue()}catch{}throw T.auth._errorFactory.create("login-blocked",{originalMessage:Z?.message})}})()}}function hs(){return(hs=(0,y.Z)(function*(N,m={}){return Ye(N,"GET","/v2/passwordPolicy",Le(N,m))})).apply(this,arguments)}class Lo{constructor(m){var T,M,Z,ue;const Be=m.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(T=Be.minPasswordLength)&&void 0!==T?T:6,Be.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=Be.maxPasswordLength),void 0!==Be.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=Be.containsLowercaseCharacter),void 0!==Be.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=Be.containsUppercaseCharacter),void 0!==Be.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=Be.containsNumericCharacter),void 0!==Be.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=Be.containsNonAlphanumericCharacter),this.enforcementState=m.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(Z=null===(M=m.allowedNonAlphanumericCharacters)||void 0===M?void 0:M.join(""))&&void 0!==Z?Z:"",this.forceUpgradeOnSignin=null!==(ue=m.forceUpgradeOnSignin)&&void 0!==ue&&ue,this.schemaVersion=m.schemaVersion}validatePassword(m){var T,M,Z,ue,Be,st;const Dt={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(m,Dt),this.validatePasswordCharacterOptions(m,Dt),Dt.isValid&&(Dt.isValid=null===(T=Dt.meetsMinPasswordLength)||void 0===T||T),Dt.isValid&&(Dt.isValid=null===(M=Dt.meetsMaxPasswordLength)||void 0===M||M),Dt.isValid&&(Dt.isValid=null===(Z=Dt.containsLowercaseLetter)||void 0===Z||Z),Dt.isValid&&(Dt.isValid=null===(ue=Dt.containsUppercaseLetter)||void 0===ue||ue),Dt.isValid&&(Dt.isValid=null===(Be=Dt.containsNumericCharacter)||void 0===Be||Be),Dt.isValid&&(Dt.isValid=null===(st=Dt.containsNonAlphanumericCharacter)||void 0===st||st),Dt}validatePasswordLengthOptions(m,T){const M=this.customStrengthOptions.minPasswordLength,Z=this.customStrengthOptions.maxPasswordLength;M&&(T.meetsMinPasswordLength=m.length>=M),Z&&(T.meetsMaxPasswordLength=m.length<=Z)}validatePasswordCharacterOptions(m,T){let M;this.updatePasswordCharacterOptionsStatuses(T,!1,!1,!1,!1);for(let Z=0;Z<m.length;Z++)M=m.charAt(Z),this.updatePasswordCharacterOptionsStatuses(T,M>="a"&&M<="z",M>="A"&&M<="Z",M>="0"&&M<="9",this.allowedNonAlphanumericCharacters.includes(M))}updatePasswordCharacterOptionsStatuses(m,T,M,Z,ue){this.customStrengthOptions.containsLowercaseLetter&&(m.containsLowercaseLetter||(m.containsLowercaseLetter=T)),this.customStrengthOptions.containsUppercaseLetter&&(m.containsUppercaseLetter||(m.containsUppercaseLetter=M)),this.customStrengthOptions.containsNumericCharacter&&(m.containsNumericCharacter||(m.containsNumericCharacter=Z)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(m.containsNonAlphanumericCharacter||(m.containsNonAlphanumericCharacter=ue))}}class ma{constructor(m,T,M,Z){this.app=m,this.heartbeatServiceProvider=T,this.appCheckServiceProvider=M,this.config=Z,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new La(this),this.idTokenSubscription=new La(this),this.beforeStateQueue=new qs(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=yt,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=m.name,this.clientVersion=Z.sdkClientVersion}_initializeWithPersistence(m,T){var M=this;return T&&(this._popupRedirectResolver=Re(T)),this._initializationPromise=this.queue((0,y.Z)(function*(){var Z,ue;if(!M._deleted&&(M.persistenceManager=yield gn.create(M,m),!M._deleted)){if(null!==(Z=M._popupRedirectResolver)&&void 0!==Z&&Z._shouldInitProactively)try{yield M._popupRedirectResolver._initialize(M)}catch{}yield M.initializeCurrentUser(T),M.lastNotifiedUid=(null===(ue=M.currentUser)||void 0===ue?void 0:ue.uid)||null,!M._deleted&&(M._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var m=this;return(0,y.Z)(function*(){if(m._deleted)return;const T=yield m.assertedPersistence.getCurrentUser();if(m.currentUser||T){if(m.currentUser&&T&&m.currentUser.uid===T.uid)return m._currentUser._assign(T),void(yield m.currentUser.getIdToken());yield m._updateCurrentUser(T,!0)}})()}initializeCurrentUser(m){var T=this;return(0,y.Z)(function*(){var M;const Z=yield T.assertedPersistence.getCurrentUser();let ue=Z,Be=!1;if(m&&T.config.authDomain){yield T.getOrInitRedirectPersistenceManager();const st=null===(M=T.redirectUser)||void 0===M?void 0:M._redirectEventId,Dt=ue?._redirectEventId,ln=yield T.tryRedirectSignIn(m);(!st||st===Dt)&&ln?.user&&(ue=ln.user,Be=!0)}if(!ue)return T.directlySetCurrentUser(null);if(!ue._redirectEventId){if(Be)try{yield T.beforeStateQueue.runMiddleware(ue)}catch(st){ue=Z,T._popupRedirectResolver._overrideRedirectResult(T,()=>Promise.reject(st))}return ue?T.reloadAndSetCurrentUserOrClear(ue):T.directlySetCurrentUser(null)}return ce(T._popupRedirectResolver,T,"argument-error"),yield T.getOrInitRedirectPersistenceManager(),T.redirectUser&&T.redirectUser._redirectEventId===ue._redirectEventId?T.directlySetCurrentUser(ue):T.reloadAndSetCurrentUserOrClear(ue)})()}tryRedirectSignIn(m){var T=this;return(0,y.Z)(function*(){let M=null;try{M=yield T._popupRedirectResolver._completeRedirectFn(T,m,!0)}catch{yield T._setRedirectUser(null)}return M})()}reloadAndSetCurrentUserOrClear(m){var T=this;return(0,y.Z)(function*(){try{yield Xr(m)}catch(M){if("auth/network-request-failed"!==M?.code)return T.directlySetCurrentUser(null)}return T.directlySetCurrentUser(m)})()}useDeviceLanguage(){this.languageCode=function Yt(){if(typeof navigator>"u")return null;const N=navigator;return N.languages&&N.languages[0]||N.language||null}()}_delete(){var m=this;return(0,y.Z)(function*(){m._deleted=!0})()}updateCurrentUser(m){var T=this;return(0,y.Z)(function*(){const M=m?(0,ae.m9)(m):null;return M&&ce(M.auth.config.apiKey===T.config.apiKey,T,"invalid-user-token"),T._updateCurrentUser(M&&M._clone(T))})()}_updateCurrentUser(m,T=!1){var M=this;return(0,y.Z)(function*(){if(!M._deleted)return m&&ce(M.tenantId===m.tenantId,M,"tenant-id-mismatch"),T||(yield M.beforeStateQueue.runMiddleware(m)),M.queue((0,y.Z)(function*(){yield M.directlySetCurrentUser(m),M.notifyAuthListeners()}))})()}signOut(){var m=this;return(0,y.Z)(function*(){return yield m.beforeStateQueue.runMiddleware(null),(m.redirectPersistenceManager||m._popupRedirectResolver)&&(yield m._setRedirectUser(null)),m._updateCurrentUser(null,!0)})()}setPersistence(m){var T=this;return this.queue((0,y.Z)(function*(){yield T.assertedPersistence.setPersistence(Re(m))}))}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(m){var T=this;return(0,y.Z)(function*(){T._getPasswordPolicyInternal()||(yield T._updatePasswordPolicy());const M=T._getPasswordPolicyInternal();return M.schemaVersion!==T.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(T._errorFactory.create("unsupported-password-policy-schema-version",{})):M.validatePassword(m)})()}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){var m=this;return(0,y.Z)(function*(){const T=yield function Pi(N){return hs.apply(this,arguments)}(m),M=new Lo(T);null===m.tenantId?m._projectPasswordPolicy=M:m._tenantPasswordPolicies[m.tenantId]=M})()}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(m){this._errorFactory=new ae.LL("auth","Firebase",m())}onAuthStateChanged(m,T,M){return this.registerStateListener(this.authStateSubscription,m,T,M)}beforeAuthStateChanged(m,T){return this.beforeStateQueue.pushCallback(m,T)}onIdTokenChanged(m,T,M){return this.registerStateListener(this.idTokenSubscription,m,T,M)}authStateReady(){return new Promise((m,T)=>{if(this.currentUser)m();else{const M=this.onAuthStateChanged(()=>{M(),m()},T)}})}toJSON(){var m;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(m=this._currentUser)||void 0===m?void 0:m.toJSON()}}_setRedirectUser(m,T){var M=this;return(0,y.Z)(function*(){const Z=yield M.getOrInitRedirectPersistenceManager(T);return null===m?Z.removeCurrentUser():Z.setCurrentUser(m)})()}getOrInitRedirectPersistenceManager(m){var T=this;return(0,y.Z)(function*(){if(!T.redirectPersistenceManager){const M=m&&Re(m)||T._popupRedirectResolver;ce(M,T,"argument-error"),T.redirectPersistenceManager=yield gn.create(T,[Re(M._redirectPersistence)],"redirectUser"),T.redirectUser=yield T.redirectPersistenceManager.getCurrentUser()}return T.redirectPersistenceManager})()}_redirectUserForId(m){var T=this;return(0,y.Z)(function*(){var M,Z;return T._isInitialized&&(yield T.queue((0,y.Z)(function*(){}))),(null===(M=T._currentUser)||void 0===M?void 0:M._redirectEventId)===m?T._currentUser:(null===(Z=T.redirectUser)||void 0===Z?void 0:Z._redirectEventId)===m?T.redirectUser:null})()}_persistUserIfCurrent(m){var T=this;return(0,y.Z)(function*(){if(m===T.currentUser)return T.queue((0,y.Z)(function*(){return T.directlySetCurrentUser(m)}))})()}_notifyListenersIfCurrent(m){m===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var m,T;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const M=null!==(T=null===(m=this.currentUser)||void 0===m?void 0:m.uid)&&void 0!==T?T:null;this.lastNotifiedUid!==M&&(this.lastNotifiedUid=M,this.authStateSubscription.next(this.currentUser))}registerStateListener(m,T,M,Z){if(this._deleted)return()=>{};const ue="function"==typeof T?T:T.next.bind(T);let Be=!1;const st=this._isInitialized?Promise.resolve():this._initializationPromise;if(ce(st,this,"internal-error"),st.then(()=>{Be||ue(this.currentUser)}),"function"==typeof T){const Dt=m.addObserver(T,M,Z);return()=>{Be=!0,Dt()}}{const Dt=m.addObserver(T);return()=>{Be=!0,Dt()}}}directlySetCurrentUser(m){var T=this;return(0,y.Z)(function*(){T.currentUser&&T.currentUser!==m&&T._currentUser._stopProactiveRefresh(),m&&T.isProactiveRefreshEnabled&&m._startProactiveRefresh(),T.currentUser=m,m?yield T.assertedPersistence.setCurrentUser(m):yield T.assertedPersistence.removeCurrentUser()})()}queue(m){return this.operations=this.operations.then(m,m),this.operations}get assertedPersistence(){return ce(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(m){!m||this.frameworks.includes(m)||(this.frameworks.push(m),this.frameworks.sort(),this.clientVersion=Dr(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var m=this;return(0,y.Z)(function*(){var T;const M={"X-Client-Version":m.clientVersion};m.app.options.appId&&(M["X-Firebase-gmpid"]=m.app.options.appId);const Z=yield null===(T=m.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===T?void 0:T.getHeartbeatsHeader();Z&&(M["X-Firebase-Client"]=Z);const ue=yield m._getAppCheckToken();return ue&&(M["X-Firebase-AppCheck"]=ue),M})()}_getAppCheckToken(){var m=this;return(0,y.Z)(function*(){var T;const M=yield null===(T=m.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===T?void 0:T.getToken();return M?.error&&function Ve(N,...m){nn.logLevel<=De.in.WARN&&nn.warn(`Auth (${Ce.SDK_VERSION}): ${N}`,...m)}(`Error while retrieving App Check token: ${M.error}`),M?.token})()}}class La{constructor(m){this.auth=m,this.observer=null,this.addObserver=(0,ae.ne)(T=>this.observer=T)}get next(){return ce(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function ri(){return(ri=(0,y.Z)(function*(N,m){return Ye(N,"POST","/v1/accounts:sendOobCode",Le(N,m))})).apply(this,arguments)}function ks(){return(ks=(0,y.Z)(function*(N,m){return function nr(N,m){return ri.apply(this,arguments)}(N,m)})).apply(this,arguments)}function Js(){return Js=(0,y.Z)(function*(N,m){const T=(0,ae.m9)(N),Z={requestType:"VERIFY_EMAIL",idToken:yield N.getIdToken()};m&&function Rs(N,m,T){var M;ce((null===(M=T.url)||void 0===M?void 0:M.length)>0,N,"invalid-continue-uri"),ce(typeof T.dynamicLinkDomain>"u"||T.dynamicLinkDomain.length>0,N,"invalid-dynamic-link-domain"),m.continueUrl=T.url,m.dynamicLinkDomain=T.dynamicLinkDomain,m.canHandleCodeInApp=T.handleCodeInApp,T.iOS&&(ce(T.iOS.bundleId.length>0,N,"missing-ios-bundle-id"),m.iOSBundleId=T.iOS.bundleId),T.android&&(ce(T.android.packageName.length>0,N,"missing-android-pkg-name"),m.androidInstallApp=T.android.installApp,m.androidMinimumVersionCode=T.android.minimumVersion,m.androidPackageName=T.android.packageName)}(T.auth,Z,m);const{email:ue}=yield function Er(N,m){return ks.apply(this,arguments)}(T.auth,Z);ue!==N.email&&(yield N.reload())}),Js.apply(this,arguments)}(function $i(N){return`__${N}${Math.floor(1e6*Math.random())}`})("rcb"),new Ft(3e4,6e4),new Ft(2e3,1e4),new Ft(3e4,6e4),new Ft(5e3,15e3),encodeURIComponent("fac");var Sl="@firebase/auth";class nl{constructor(m){this.auth=m,this.internalListeners=new Map}getUid(){var m;return this.assertAuthConfigured(),(null===(m=this.auth.currentUser)||void 0===m?void 0:m.uid)||null}getToken(m){var T=this;return(0,y.Z)(function*(){return T.assertAuthConfigured(),yield T.auth._initializationPromise,T.auth.currentUser?{accessToken:yield T.auth.currentUser.getIdToken(m)}:null})()}addAuthTokenListener(m){if(this.assertAuthConfigured(),this.internalListeners.has(m))return;const T=this.auth.onIdTokenChanged(M=>{m(M?.stsTokenManager.accessToken||null)});this.internalListeners.set(m,T),this.updateProactiveRefresh()}removeAuthTokenListener(m){this.assertAuthConfigured();const T=this.internalListeners.get(m);T&&(this.internalListeners.delete(m),T(),this.updateProactiveRefresh())}assertAuthConfigured(){ce(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}(0,ae.Pz)("authIdTokenMaxAge"),function Wa(N){(0,Ce._registerComponent)(new Oe.wA("auth",(m,{options:T})=>{const M=m.getProvider("app").getImmediate(),Z=m.getProvider("heartbeat"),ue=m.getProvider("app-check-internal"),{apiKey:Be,authDomain:st}=M.options;ce(Be&&!Be.includes(":"),"invalid-api-key",{appName:M.name});const Dt={apiKey:Be,authDomain:st,clientPlatform:N,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Dr(N)},ln=new ma(M,Z,ue,Dt);return function hi(N,m){const T=m?.persistence||[],M=(Array.isArray(T)?T:[T]).map(Re);m?.errorMap&&N._updateErrorMap(m.errorMap),N._initializeWithPersistence(M,m?.popupRedirectResolver)}(ln,T),ln},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((m,T,M)=>{m.getProvider("auth-internal").initialize()})),(0,Ce._registerComponent)(new Oe.wA("auth-internal",m=>{const T=function Dn(N){return(0,ae.m9)(N)}(m.getProvider("auth").getImmediate());return new nl(T)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,Ce.registerVersion)(Sl,"1.3.1",function Rl(N){switch(N){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(N)),(0,Ce.registerVersion)(Sl,"1.3.1","esm2017")}("Browser");var Os=H(5879),Nd=H(7213),rl=H(9027);let od=(()=>{class N{constructor(T,M){this.afauth=T,this.firestore=M}sendVerificationEmail(){var T=this;return(0,y.Z)(function*(){const M=yield T.afauth.currentUser;if(!M)throw new Error("El usuario actual es nulo.");try{yield function qc(N,m){return Js.apply(this,arguments)}(M)}catch(Z){console.error("Error al enviar el correo de verificaci\xf3n:",Z)}})()}register(T,M){var Z=this;return(0,y.Z)(function*(){try{const ue=yield Z.afauth.createUserWithEmailAndPassword(T,M);return ue&&ue.user?(yield Z.sendVerificationEmail(),ue):(console.log("No se pudo obtener el usuario despu\xe9s del registro."),null)}catch(ue){return console.log("Error en register: ",ue),null}})()}login(T,M){var Z=this;return(0,y.Z)(function*(){try{const ue=yield Z.afauth.signInWithEmailAndPassword(T,M);return ue.user?ue:null}catch(ue){return console.log("error en login: ",ue),null}})()}getUserLogged(){return this.afauth.authState}getAuthState(){return this.afauth.authState}logout(){this.afauth.signOut()}getUserEmail(){return this.afauth.authState.pipe((0,fe.U)(T=>T?T.email:null))}getUserEmailByUID(T){return this.firestore.collection("users").doc(T).valueChanges().pipe((0,fe.U)(M=>M?M.email:null))}static#e=this.\u0275fac=function(M){return new(M||N)(Os.LFG(Nd.zQ),Os.LFG(rl.ST))};static#t=this.\u0275prov=Os.Yz7({token:N,factory:N.\u0275fac,providedIn:"root"})}return N})()},6751:(qt,Ze,H)=>{H.d(Ze,{T:()=>ae});var y=H(5879),fe=H(9027);let ae=(()=>{class Ce{constructor(Ee){this.firestore=Ee,this.usuarios=[],this.obtenerTodos("usuarios").subscribe(Oe=>{this.usuarios=Oe.map(I=>{let $e=I.payload.doc.data();return $e.id=I.payload.doc.id,$e})})}crear(Ee,Oe){return this.firestore.collection(Ee).add(Oe)}obtenerPorId(Ee,Oe){return this.firestore.collection(Ee).doc(Oe).snapshotChanges()}obtenerTodos(Ee){return this.firestore.collection(Ee).snapshotChanges()}actualizar(Ee,Oe,I){return this.firestore.collection(Ee).doc(I).set(Oe)}eliminar(Ee,Oe){return this.firestore.collection(Ee).doc(Oe).delete()}createWithCustomId(Ee,Oe,I){this.firestore.collection(Ee).doc(Oe).set(I)}static#e=this.\u0275fac=function(Oe){return new(Oe||Ce)(y.LFG(fe.ST))};static#t=this.\u0275prov=y.Yz7({token:Ce,factory:Ce.\u0275fac,providedIn:"root"})}return Ce})()},8832:(qt,Ze,H)=>{var y=H(6593),fe=H(95),ae=H(1826),Ce=H(6751),De=H(4664),Ee=H(2096),Oe=H(4108),I=H(5879);const me=[{path:"",redirectTo:"bienvenida",pathMatch:"full"},{path:"bienvenida",loadChildren:()=>H.e(119).then(H.bind(H,6119)).then(d=>d.BienvenidaModule)},{path:"registro",loadChildren:()=>Promise.all([H.e(700),H.e(228)]).then(H.bind(H,8228)).then(d=>d.RegistroModule)},{path:"login",loadChildren:()=>H.e(330).then(H.bind(H,7330)).then(d=>d.LoginModule)},{path:"verificacion",loadChildren:()=>H.e(187).then(H.bind(H,9187)).then(d=>d.VerificacionEmailModule)},{path:"seccion-usuarios",loadChildren:()=>Promise.all([H.e(700),H.e(228),H.e(176)]).then(H.bind(H,7176)).then(d=>d.SeccionUsuariosModule),canActivate:[(d,D)=>{const c=(0,I.f3M)(Oe.e),p=(0,I.f3M)(Ce.T);return(0,I.f3M)(ae.F0),c.getUserEmail().pipe((0,De.w)(j=>{if(j){console.log(j);const Y=j,Ie=p.usuarios.find(Fe=>Fe.email==Y);if(Ie&&("administrador"==Ie.perfil||"Administrador"==Ie.perfil))return console.log("Administrador True"),(0,Ee.of)(!0)}return(0,Ee.of)(!1)}))}]},{path:"home",loadChildren:()=>Promise.all([H.e(182),H.e(310)]).then(H.bind(H,1310)).then(d=>d.HomeModule)},{path:"solicitar-turno",loadChildren:()=>H.e(182).then(H.bind(H,3182)).then(d=>d.SolicitarTurnoModule)},{path:"mi-perfil",loadChildren:()=>Promise.all([H.e(700),H.e(227)]).then(H.bind(H,4227)).then(d=>d.MiPerfilModule)},{path:"mis-turnos",loadChildren:()=>H.e(276).then(H.bind(H,5276)).then(d=>d.MisTurnosModule)},{path:"**",component:(()=>{class d{static#e=this.\u0275fac=function(p){return new(p||d)};static#t=this.\u0275cmp=I.Xpm({type:d,selectors:[["app-not-found"]],decls:10,vars:0,consts:[[1,"container"],[1,"text-center","text-dark"],["src","../../../assets/img/not-found.png","alt",""]],template:function(p,w){1&p&&(I.TgZ(0,"body")(1,"div",0),I._UZ(2,"br")(3,"br"),I.TgZ(4,"h1",1),I._uU(5,"P\xe1gina no encontrada"),I.qZA(),I.TgZ(6,"div"),I._UZ(7,"br")(8,"br")(9,"img",2),I.qZA()()())},styles:["body[_ngcontent-%COMP%]{background-color:#49708a;width:100vw;height:100vh;text-align:center}"]})}return d})()}];let Pe=(()=>{class d{static#e=this.\u0275fac=function(p){return new(p||d)};static#t=this.\u0275mod=I.oAB({type:d});static#n=this.\u0275inj=I.cJS({imports:[ae.Bz.forRoot(me),ae.Bz]})}return d})(),dt=(()=>{class d{constructor(){this.title="clinica"}static#e=this.\u0275fac=function(p){return new(p||d)};static#t=this.\u0275cmp=I.Xpm({type:d,selectors:[["app-root"]],decls:1,vars:0,template:function(p,w){1&p&&I._UZ(0,"router-outlet")},dependencies:[ae.lC]})}return d})();var it=H(7217),_t=H(5592),ft=H(6232),yt=H(8645),It=H(4829),nn=H(1631),Ve=H(4266),Me=H(4674),qe=H(7400);const Ne=["addListener","removeListener"],ze=["addEventListener","removeEventListener"],ot=["on","off"];function ut(d,D,c,p){if((0,Me.m)(c)&&(p=c,c=void 0),p)return ut(d,D,c).pipe((0,qe.Z)(p));const[w,j]=function Hn(d){return(0,Me.m)(d.addEventListener)&&(0,Me.m)(d.removeEventListener)}(d)?ze.map(Y=>Ie=>d[Y](D,Ie,c)):function Zt(d){return(0,Me.m)(d.addListener)&&(0,Me.m)(d.removeListener)}(d)?Ne.map(ce(d,D)):function Tt(d){return(0,Me.m)(d.on)&&(0,Me.m)(d.off)}(d)?ot.map(ce(d,D)):[];if(!w&&(0,Ve.z)(d))return(0,nn.z)(Y=>ut(Y,D,c))((0,It.Xf)(d));if(!w)throw new TypeError("Invalid event target");return new _t.y(Y=>{const Ie=(...Fe)=>Y.next(1<Fe.length?Fe:Fe[0]);return w(Ie),()=>j(Ie)})}function ce(d,D){return c=>p=>d[c](D,p)}var bn=H(6321),Ir=H(671);const{isArray:Ft}=Array;function ve(d){return 1===d.length&&Ft(d[0])?d[0]:d}var be=H(8251);H(3019);var Ye=H(9940);function Pt(...d){const D=(0,Ye.jO)(d),c=ve(d);return c.length?new _t.y(p=>{let w=c.map(()=>[]),j=c.map(()=>!1);p.add(()=>{w=j=null});for(let Y=0;!p.closed&&Y<c.length;Y++)(0,It.Xf)(c[Y]).subscribe((0,be.x)(p,Ie=>{if(w[Y].push(Ie),w.every(Fe=>Fe.length)){const Fe=w.map(nt=>nt.shift());p.next(D?D(...Fe):Fe),w.some((nt,tt)=>!nt.length&&j[tt])&&p.complete()}},()=>{j[Y]=!0,!w[Y].length&&p.complete()}));return()=>{w=j=null}}):ft.E}var Ct=H(5211),wt=H(9773),Tn=H(2181),on=H(8180),Qn=H(9397),Cn=H(7398),Pn=H(9360),_e=H(2737),Se=H(2420);function Ue(...d){const D=(0,Ye.jO)(d);return(0,Pn.e)((c,p)=>{const w=d.length,j=new Array(w);let Y=d.map(()=>!1),Ie=!1;for(let Fe=0;Fe<w;Fe++)(0,It.Xf)(d[Fe]).subscribe((0,be.x)(p,nt=>{j[Fe]=nt,!Ie&&!Y[Fe]&&(Y[Fe]=!0,(Ie=Y.every(_e.y))&&(Y=null))},Se.Z));c.subscribe((0,be.x)(p,Fe=>{if(Ie){const nt=[Fe,...j];p.next(D?D(...nt):nt)}}))})}H(975),H(7921),H(3997);var At=H(6814);Math,Math,Math;const ru=["*"],os=["dialog"];function L(d){return"string"==typeof d}function de(d){return null!=d}function hr(d){return(d||document.body).getBoundingClientRect()}const Zi={animation:!0,transitionTimerDelayMs:5},Sa=()=>{},{transitionTimerDelayMs:Ra}=Zi,Ic=new Map,Nr=(d,D,c,p)=>{let w=p.context||{};const j=Ic.get(D);if(j)switch(p.runningTransition){case"continue":return ft.E;case"stop":d.run(()=>j.transition$.complete()),w=Object.assign(j.context,w),Ic.delete(D)}const Y=c(D,p.animation,w)||Sa;if(!p.animation||"none"===window.getComputedStyle(D).transitionProperty)return d.run(()=>Y()),(0,Ee.of)(void 0).pipe(function An(d){return D=>new _t.y(c=>D.subscribe({next:Y=>d.run(()=>c.next(Y)),error:Y=>d.run(()=>c.error(Y)),complete:()=>d.run(()=>c.complete())}))}(d));const Ie=new yt.x,Fe=new yt.x,nt=Ie.pipe(function ar(...d){return D=>(0,Ct.z)(D,(0,Ee.of)(...d))}(!0));Ic.set(D,{transition$:Ie,complete:()=>{Fe.next(),Fe.complete()},context:w});const tt=function Wu(d){const{transitionDelay:D,transitionDuration:c}=window.getComputedStyle(d);return 1e3*(parseFloat(D)+parseFloat(c))}(D);return d.runOutsideAngular(()=>{const Ht=ut(D,"transitionend").pipe((0,wt.R)(nt),(0,Tn.h)(({target:Vt})=>Vt===D));(function He(...d){return 1===(d=ve(d)).length?(0,It.Xf)(d[0]):new _t.y(function xe(d){return D=>{let c=[];for(let p=0;c&&!D.closed&&p<d.length;p++)c.push((0,It.Xf)(d[p]).subscribe((0,be.x)(D,w=>{if(c){for(let j=0;j<c.length;j++)j!==p&&c[j].unsubscribe();c=null}D.next(w)})))}}(d))})(function Yt(d=0,D,c=bn.P){let p=-1;return null!=D&&((0,Ir.K)(D)?c=D:p=D),new _t.y(w=>{let j=function or(d){return d instanceof Date&&!isNaN(d)}(d)?+d-c.now():d;j<0&&(j=0);let Y=0;return c.schedule(function(){w.closed||(w.next(Y++),0<=p?this.schedule(void 0,p):w.complete())},j)})}(tt+Ra).pipe((0,wt.R)(nt)),Ht,Fe).pipe((0,wt.R)(nt)).subscribe(()=>{Ic.delete(D),d.run(()=>{Y(),Ie.next(),Ie.complete()})})}),Ie.asObservable()};let oa=(()=>{class d{constructor(){this.animation=Zi.animation}static#e=this.\u0275fac=function(p){return new(p||d)};static#t=this.\u0275prov=I.Yz7({token:d,factory:d.\u0275fac,providedIn:"root"})}return d})(),Jc=(()=>{class d{static#e=this.\u0275fac=function(p){return new(p||d)};static#t=this.\u0275mod=I.oAB({type:d});static#n=this.\u0275inj=I.cJS({})}return d})(),Ru=(()=>{class d{static#e=this.\u0275fac=function(p){return new(p||d)};static#t=this.\u0275mod=I.oAB({type:d});static#n=this.\u0275inj=I.cJS({})}return d})(),as=(()=>{class d{static#e=this.\u0275fac=function(p){return new(p||d)};static#t=this.\u0275mod=I.oAB({type:d});static#n=this.\u0275inj=I.cJS({})}return d})(),Zu=(()=>{class d{static#e=this.\u0275fac=function(p){return new(p||d)};static#t=this.\u0275mod=I.oAB({type:d});static#n=this.\u0275inj=I.cJS({})}return d})();var _i=function(d){return d[d.Tab=9]="Tab",d[d.Enter=13]="Enter",d[d.Escape=27]="Escape",d[d.Space=32]="Space",d[d.PageUp=33]="PageUp",d[d.PageDown=34]="PageDown",d[d.End=35]="End",d[d.Home=36]="Home",d[d.ArrowLeft=37]="ArrowLeft",d[d.ArrowUp=38]="ArrowUp",d[d.ArrowRight=39]="ArrowRight",d[d.ArrowDown=40]="ArrowDown",d}(_i||{});typeof navigator<"u"&&navigator.userAgent&&(/iPad|iPhone|iPod/.test(navigator.userAgent)||/Macintosh/.test(navigator.userAgent)&&navigator.maxTouchPoints&&navigator.maxTouchPoints>2||/Android/.test(navigator.userAgent));const rc=["a[href]","button:not([disabled])",'input:not([disabled]):not([type="hidden"])',"select:not([disabled])","textarea:not([disabled])","[contenteditable]",'[tabindex]:not([tabindex="-1"])'].join(", ");function Sc(d){const D=Array.from(d.querySelectorAll(rc)).filter(c=>-1!==c.tabIndex);return[D[0],D[D.length-1]]}new Date(1882,10,12),new Date(2174,10,25);let ol=(()=>{class d{static#e=this.\u0275fac=function(p){return new(p||d)};static#t=this.\u0275mod=I.oAB({type:d});static#n=this.\u0275inj=I.cJS({})}return d})(),Ts=(()=>{class d{static#e=this.\u0275fac=function(p){return new(p||d)};static#t=this.\u0275mod=I.oAB({type:d});static#n=this.\u0275inj=I.cJS({})}return d})();class pr{constructor(D,c,p){this.nodes=D,this.viewRef=c,this.componentRef=p}}let Pl=(()=>{class d{constructor(c,p){this._el=c,this._zone=p}ngOnInit(){this._zone.onStable.asObservable().pipe((0,on.q)(1)).subscribe(()=>{Nr(this._zone,this._el.nativeElement,(c,p)=>{p&&hr(c),c.classList.add("show")},{animation:this.animation,runningTransition:"continue"})})}hide(){return Nr(this._zone,this._el.nativeElement,({classList:c})=>c.remove("show"),{animation:this.animation,runningTransition:"stop"})}static#e=this.\u0275fac=function(p){return new(p||d)(I.Y36(I.SBq),I.Y36(I.R0b))};static#t=this.\u0275cmp=I.Xpm({type:d,selectors:[["ngb-modal-backdrop"]],hostAttrs:[2,"z-index","1055"],hostVars:6,hostBindings:function(p,w){2&p&&(I.Tol("modal-backdrop"+(w.backdropClass?" "+w.backdropClass:"")),I.ekj("show",!w.animation)("fade",w.animation))},inputs:{animation:"animation",backdropClass:"backdropClass"},standalone:!0,features:[I.jDz],decls:0,vars:0,template:function(p,w){},encapsulation:2})}return d})();class ld{update(D){}close(D){}dismiss(D){}}const Ml=["animation","ariaLabelledBy","ariaDescribedBy","backdrop","centered","fullscreen","keyboard","scrollable","size","windowClass","modalDialogClass"],Wf=["animation","backdropClass"];class Qh{_applyWindowOptions(D,c){Ml.forEach(p=>{de(c[p])&&(D[p]=c[p])})}_applyBackdropOptions(D,c){Wf.forEach(p=>{de(c[p])&&(D[p]=c[p])})}update(D){this._applyWindowOptions(this._windowCmptRef.instance,D),this._backdropCmptRef&&this._backdropCmptRef.instance&&this._applyBackdropOptions(this._backdropCmptRef.instance,D)}get componentInstance(){if(this._contentRef&&this._contentRef.componentRef)return this._contentRef.componentRef.instance}get closed(){return this._closed.asObservable().pipe((0,wt.R)(this._hidden))}get dismissed(){return this._dismissed.asObservable().pipe((0,wt.R)(this._hidden))}get hidden(){return this._hidden.asObservable()}get shown(){return this._windowCmptRef.instance.shown.asObservable()}constructor(D,c,p,w){this._windowCmptRef=D,this._contentRef=c,this._backdropCmptRef=p,this._beforeDismiss=w,this._closed=new yt.x,this._dismissed=new yt.x,this._hidden=new yt.x,D.instance.dismissEvent.subscribe(j=>{this.dismiss(j)}),this.result=new Promise((j,Y)=>{this._resolve=j,this._reject=Y}),this.result.then(null,()=>{})}close(D){this._windowCmptRef&&(this._closed.next(D),this._resolve(D),this._removeModalElements())}_dismiss(D){this._dismissed.next(D),this._reject(D),this._removeModalElements()}dismiss(D){if(this._windowCmptRef)if(this._beforeDismiss){const c=this._beforeDismiss();!function Je(d){return d&&d.then}(c)?!1!==c&&this._dismiss(D):c.then(p=>{!1!==p&&this._dismiss(D)},()=>{})}else this._dismiss(D)}_removeModalElements(){const D=this._windowCmptRef.instance.hide(),c=this._backdropCmptRef?this._backdropCmptRef.instance.hide():(0,Ee.of)(void 0);D.subscribe(()=>{const{nativeElement:p}=this._windowCmptRef.location;p.parentNode.removeChild(p),this._windowCmptRef.destroy(),this._contentRef&&this._contentRef.viewRef&&this._contentRef.viewRef.destroy(),this._windowCmptRef=null,this._contentRef=null}),c.subscribe(()=>{if(this._backdropCmptRef){const{nativeElement:p}=this._backdropCmptRef.location;p.parentNode.removeChild(p),this._backdropCmptRef.destroy(),this._backdropCmptRef=null}}),Pt(D,c).subscribe(()=>{this._hidden.next(),this._hidden.complete()})}}var b=function(d){return d[d.BACKDROP_CLICK=0]="BACKDROP_CLICK",d[d.ESC=1]="ESC",d}(b||{});let f=(()=>{class d{constructor(c,p,w){this._document=c,this._elRef=p,this._zone=w,this._closed$=new yt.x,this._elWithFocus=null,this.backdrop=!0,this.keyboard=!0,this.dismissEvent=new I.vpe,this.shown=new yt.x,this.hidden=new yt.x}get fullscreenClass(){return!0===this.fullscreen?" modal-fullscreen":L(this.fullscreen)?` modal-fullscreen-${this.fullscreen}-down`:""}dismiss(c){this.dismissEvent.emit(c)}ngOnInit(){this._elWithFocus=this._document.activeElement,this._zone.onStable.asObservable().pipe((0,on.q)(1)).subscribe(()=>{this._show()})}ngOnDestroy(){this._disableEventHandling()}hide(){const{nativeElement:c}=this._elRef,p={animation:this.animation,runningTransition:"stop"},Y=Pt(Nr(this._zone,c,()=>c.classList.remove("show"),p),Nr(this._zone,this._dialogEl.nativeElement,()=>{},p));return Y.subscribe(()=>{this.hidden.next(),this.hidden.complete()}),this._disableEventHandling(),this._restoreFocus(),Y}_show(){const c={animation:this.animation,runningTransition:"continue"};Pt(Nr(this._zone,this._elRef.nativeElement,(j,Y)=>{Y&&hr(j),j.classList.add("show")},c),Nr(this._zone,this._dialogEl.nativeElement,()=>{},c)).subscribe(()=>{this.shown.next(),this.shown.complete()}),this._enableEventHandling(),this._setFocus()}_enableEventHandling(){const{nativeElement:c}=this._elRef;this._zone.runOutsideAngular(()=>{ut(c,"keydown").pipe((0,wt.R)(this._closed$),(0,Tn.h)(w=>w.which===_i.Escape)).subscribe(w=>{this.keyboard?requestAnimationFrame(()=>{w.defaultPrevented||this._zone.run(()=>this.dismiss(b.ESC))}):"static"===this.backdrop&&this._bumpBackdrop()});let p=!1;ut(this._dialogEl.nativeElement,"mousedown").pipe((0,wt.R)(this._closed$),(0,Qn.b)(()=>p=!1),(0,De.w)(()=>ut(c,"mouseup").pipe((0,wt.R)(this._closed$),(0,on.q)(1))),(0,Tn.h)(({target:w})=>c===w)).subscribe(()=>{p=!0}),ut(c,"click").pipe((0,wt.R)(this._closed$)).subscribe(({target:w})=>{c===w&&("static"===this.backdrop?this._bumpBackdrop():!0===this.backdrop&&!p&&this._zone.run(()=>this.dismiss(b.BACKDROP_CLICK))),p=!1})})}_disableEventHandling(){this._closed$.next()}_setFocus(){const{nativeElement:c}=this._elRef;if(!c.contains(document.activeElement)){const p=c.querySelector("[ngbAutofocus]"),w=Sc(c)[0];(p||w||c).focus()}}_restoreFocus(){const c=this._document.body,p=this._elWithFocus;let w;w=p&&p.focus&&c.contains(p)?p:c,this._zone.runOutsideAngular(()=>{setTimeout(()=>w.focus()),this._elWithFocus=null})}_bumpBackdrop(){"static"===this.backdrop&&Nr(this._zone,this._elRef.nativeElement,({classList:c})=>(c.add("modal-static"),()=>c.remove("modal-static")),{animation:this.animation,runningTransition:"continue"})}static#e=this.\u0275fac=function(p){return new(p||d)(I.Y36(At.K0),I.Y36(I.SBq),I.Y36(I.R0b))};static#t=this.\u0275cmp=I.Xpm({type:d,selectors:[["ngb-modal-window"]],viewQuery:function(p,w){if(1&p&&I.Gf(os,7),2&p){let j;I.iGM(j=I.CRH())&&(w._dialogEl=j.first)}},hostAttrs:["role","dialog","tabindex","-1"],hostVars:7,hostBindings:function(p,w){2&p&&(I.uIk("aria-modal",!0)("aria-labelledby",w.ariaLabelledBy)("aria-describedby",w.ariaDescribedBy),I.Tol("modal d-block"+(w.windowClass?" "+w.windowClass:"")),I.ekj("fade",w.animation))},inputs:{animation:"animation",ariaLabelledBy:"ariaLabelledBy",ariaDescribedBy:"ariaDescribedBy",backdrop:"backdrop",centered:"centered",fullscreen:"fullscreen",keyboard:"keyboard",scrollable:"scrollable",size:"size",windowClass:"windowClass",modalDialogClass:"modalDialogClass"},outputs:{dismissEvent:"dismiss"},standalone:!0,features:[I.jDz],ngContentSelectors:ru,decls:4,vars:2,consts:[["role","document"],["dialog",""],[1,"modal-content"]],template:function(p,w){1&p&&(I.F$t(),I.TgZ(0,"div",0,1)(2,"div",2),I.Hsn(3),I.qZA()()),2&p&&I.Tol("modal-dialog"+(w.size?" modal-"+w.size:"")+(w.centered?" modal-dialog-centered":"")+w.fullscreenClass+(w.scrollable?" modal-dialog-scrollable":"")+(w.modalDialogClass?" "+w.modalDialogClass:""))},styles:["ngb-modal-window .component-host-scrollable{display:flex;flex-direction:column;overflow:hidden}\n"],encapsulation:2})}return d})(),_=(()=>{class d{constructor(c){this._document=c}hide(){const c=Math.abs(window.innerWidth-this._document.documentElement.clientWidth),p=this._document.body,w=p.style,{overflow:j,paddingRight:Y}=w;if(c>0){const Ie=parseFloat(window.getComputedStyle(p).paddingRight);w.paddingRight=`${Ie+c}px`}return w.overflow="hidden",()=>{c>0&&(w.paddingRight=Y),w.overflow=j}}static#e=this.\u0275fac=function(p){return new(p||d)(I.LFG(At.K0))};static#t=this.\u0275prov=I.Yz7({token:d,factory:d.\u0275fac,providedIn:"root"})}return d})(),C=(()=>{class d{constructor(c,p,w,j,Y,Ie,Fe){this._applicationRef=c,this._injector=p,this._environmentInjector=w,this._document=j,this._scrollBar=Y,this._rendererFactory=Ie,this._ngZone=Fe,this._activeWindowCmptHasChanged=new yt.x,this._ariaHiddenValues=new Map,this._scrollBarRestoreFn=null,this._modalRefs=[],this._windowCmpts=[],this._activeInstances=new I.vpe,this._activeWindowCmptHasChanged.subscribe(()=>{if(this._windowCmpts.length){const nt=this._windowCmpts[this._windowCmpts.length-1];((d,D,c,p=!1)=>{d.runOutsideAngular(()=>{const w=ut(D,"focusin").pipe((0,wt.R)(c),(0,Cn.U)(j=>j.target));ut(D,"keydown").pipe((0,wt.R)(c),(0,Tn.h)(j=>j.which===_i.Tab),Ue(w)).subscribe(([j,Y])=>{const[Ie,Fe]=Sc(D);(Y===Ie||Y===D)&&j.shiftKey&&(Fe.focus(),j.preventDefault()),Y===Fe&&!j.shiftKey&&(Ie.focus(),j.preventDefault())}),p&&ut(D,"click").pipe((0,wt.R)(c),Ue(w),(0,Cn.U)(j=>j[1])).subscribe(j=>j.focus())})})(this._ngZone,nt.location.nativeElement,this._activeWindowCmptHasChanged),this._revertAriaHidden(),this._setAriaHidden(nt.location.nativeElement)}})}_restoreScrollBar(){const c=this._scrollBarRestoreFn;c&&(this._scrollBarRestoreFn=null,c())}_hideScrollBar(){this._scrollBarRestoreFn||(this._scrollBarRestoreFn=this._scrollBar.hide())}open(c,p,w){const j=w.container instanceof HTMLElement?w.container:de(w.container)?this._document.querySelector(w.container):this._document.body,Y=this._rendererFactory.createRenderer(null,null);if(!j)throw new Error(`The specified modal container "${w.container||"body"}" was not found in the DOM.`);this._hideScrollBar();const Ie=new ld,Fe=(c=w.injector||c).get(I.lqb,null)||this._environmentInjector,nt=this._getContentRef(c,Fe,p,Ie,w);let tt=!1!==w.backdrop?this._attachBackdrop(j):void 0,Ht=this._attachWindowComponent(j,nt.nodes),Nt=new Qh(Ht,nt,tt,w.beforeDismiss);return this._registerModalRef(Nt),this._registerWindowCmpt(Ht),Nt.hidden.pipe((0,on.q)(1)).subscribe(()=>Promise.resolve(!0).then(()=>{this._modalRefs.length||(Y.removeClass(this._document.body,"modal-open"),this._restoreScrollBar(),this._revertAriaHidden())})),Ie.close=Vt=>{Nt.close(Vt)},Ie.dismiss=Vt=>{Nt.dismiss(Vt)},Ie.update=Vt=>{Nt.update(Vt)},Nt.update(w),1===this._modalRefs.length&&Y.addClass(this._document.body,"modal-open"),tt&&tt.instance&&tt.changeDetectorRef.detectChanges(),Ht.changeDetectorRef.detectChanges(),Nt}get activeInstances(){return this._activeInstances}dismissAll(c){this._modalRefs.forEach(p=>p.dismiss(c))}hasOpenModals(){return this._modalRefs.length>0}_attachBackdrop(c){let p=(0,I.LMc)(Pl,{environmentInjector:this._applicationRef.injector,elementInjector:this._injector});return this._applicationRef.attachView(p.hostView),c.appendChild(p.location.nativeElement),p}_attachWindowComponent(c,p){let w=(0,I.LMc)(f,{environmentInjector:this._applicationRef.injector,elementInjector:this._injector,projectableNodes:p});return this._applicationRef.attachView(w.hostView),c.appendChild(w.location.nativeElement),w}_getContentRef(c,p,w,j,Y){return w?w instanceof I.Rgc?this._createFromTemplateRef(w,j):L(w)?this._createFromString(w):this._createFromComponent(c,p,w,j,Y):new pr([])}_createFromTemplateRef(c,p){const j=c.createEmbeddedView({$implicit:p,close(Y){p.close(Y)},dismiss(Y){p.dismiss(Y)}});return this._applicationRef.attachView(j),new pr([j.rootNodes],j)}_createFromString(c){const p=this._document.createTextNode(`${c}`);return new pr([[p]])}_createFromComponent(c,p,w,j,Y){const Ie=I.zs3.create({providers:[{provide:ld,useValue:j}],parent:c}),Fe=(0,I.LMc)(w,{environmentInjector:p,elementInjector:Ie}),nt=Fe.location.nativeElement;return Y.scrollable&&nt.classList.add("component-host-scrollable"),this._applicationRef.attachView(Fe.hostView),new pr([[nt]],Fe.hostView,Fe)}_setAriaHidden(c){const p=c.parentElement;p&&c!==this._document.body&&(Array.from(p.children).forEach(w=>{w!==c&&"SCRIPT"!==w.nodeName&&(this._ariaHiddenValues.set(w,w.getAttribute("aria-hidden")),w.setAttribute("aria-hidden","true"))}),this._setAriaHidden(p))}_revertAriaHidden(){this._ariaHiddenValues.forEach((c,p)=>{c?p.setAttribute("aria-hidden",c):p.removeAttribute("aria-hidden")}),this._ariaHiddenValues.clear()}_registerModalRef(c){const p=()=>{const w=this._modalRefs.indexOf(c);w>-1&&(this._modalRefs.splice(w,1),this._activeInstances.emit(this._modalRefs))};this._modalRefs.push(c),this._activeInstances.emit(this._modalRefs),c.result.then(p,p)}_registerWindowCmpt(c){this._windowCmpts.push(c),this._activeWindowCmptHasChanged.next(),c.onDestroy(()=>{const p=this._windowCmpts.indexOf(c);p>-1&&(this._windowCmpts.splice(p,1),this._activeWindowCmptHasChanged.next())})}static#e=this.\u0275fac=function(p){return new(p||d)(I.LFG(I.z2F),I.LFG(I.zs3),I.LFG(I.lqb),I.LFG(At.K0),I.LFG(_),I.LFG(I.FYo),I.LFG(I.R0b))};static#t=this.\u0275prov=I.Yz7({token:d,factory:d.\u0275fac,providedIn:"root"})}return d})(),G=(()=>{class d{constructor(c){this._ngbConfig=c,this.backdrop=!0,this.fullscreen=!1,this.keyboard=!0}get animation(){return void 0===this._animation?this._ngbConfig.animation:this._animation}set animation(c){this._animation=c}static#e=this.\u0275fac=function(p){return new(p||d)(I.LFG(oa))};static#t=this.\u0275prov=I.Yz7({token:d,factory:d.\u0275fac,providedIn:"root"})}return d})(),X=(()=>{class d{constructor(c,p,w){this._injector=c,this._modalStack=p,this._config=w}open(c,p={}){const w={...this._config,animation:this._config.animation,...p};return this._modalStack.open(this._injector,c,w)}get activeInstances(){return this._modalStack.activeInstances}dismissAll(c){this._modalStack.dismissAll(c)}hasOpenModals(){return this._modalStack.hasOpenModals()}static#e=this.\u0275fac=function(p){return new(p||d)(I.LFG(I.zs3),I.LFG(C),I.LFG(G))};static#t=this.\u0275prov=I.Yz7({token:d,factory:d.\u0275fac,providedIn:"root"})}return d})(),ye=(()=>{class d{static#e=this.\u0275fac=function(p){return new(p||d)};static#t=this.\u0275mod=I.oAB({type:d});static#n=this.\u0275inj=I.cJS({providers:[X]})}return d})(),yu=(()=>{class d{static#e=this.\u0275fac=function(p){return new(p||d)};static#t=this.\u0275mod=I.oAB({type:d});static#n=this.\u0275inj=I.cJS({})}return d})(),fd=(()=>{class d{static#e=this.\u0275fac=function(p){return new(p||d)};static#t=this.\u0275mod=I.oAB({type:d});static#n=this.\u0275inj=I.cJS({})}return d})(),Vd=(()=>{class d{static#e=this.\u0275fac=function(p){return new(p||d)};static#t=this.\u0275mod=I.oAB({type:d});static#n=this.\u0275inj=I.cJS({})}return d})(),hl=(()=>{class d{static#e=this.\u0275fac=function(p){return new(p||d)};static#t=this.\u0275mod=I.oAB({type:d});static#n=this.\u0275inj=I.cJS({})}return d})(),Yf=(()=>{class d{static#e=this.\u0275fac=function(p){return new(p||d)};static#t=this.\u0275mod=I.oAB({type:d});static#n=this.\u0275inj=I.cJS({})}return d})(),Fl=(()=>{class d{static#e=this.\u0275fac=function(p){return new(p||d)};static#t=this.\u0275mod=I.oAB({type:d});static#n=this.\u0275inj=I.cJS({})}return d})(),Xp=(()=>{class d{static#e=this.\u0275fac=function(p){return new(p||d)};static#t=this.\u0275mod=I.oAB({type:d});static#n=this.\u0275inj=I.cJS({})}return d})(),pd=(()=>{class d{static#e=this.\u0275fac=function(p){return new(p||d)};static#t=this.\u0275mod=I.oAB({type:d});static#n=this.\u0275inj=I.cJS({})}return d})(),tg=(()=>{class d{static#e=this.\u0275fac=function(p){return new(p||d)};static#t=this.\u0275mod=I.oAB({type:d});static#n=this.\u0275inj=I.cJS({})}return d})();new I.OlP("live announcer delay",{providedIn:"root",factory:function gd(){return 100}});let df=(()=>{class d{static#e=this.\u0275fac=function(p){return new(p||d)};static#t=this.\u0275mod=I.oAB({type:d});static#n=this.\u0275inj=I.cJS({})}return d})(),rp=(()=>{class d{static#e=this.\u0275fac=function(p){return new(p||d)};static#t=this.\u0275mod=I.oAB({type:d});static#n=this.\u0275inj=I.cJS({})}return d})();const ff=[Jc,Ru,as,Zu,ol,Ts,ye,yu,rp,fd,Vd,hl,Yf,Fl,Xp,pd,tg,df];let Th=(()=>{class d{static#e=this.\u0275fac=function(p){return new(p||d)};static#t=this.\u0275mod=I.oAB({type:d});static#n=this.\u0275inj=I.cJS({imports:[ff,Jc,Ru,as,Zu,ol,Ts,ye,yu,rp,fd,Vd,hl,Yf,Fl,Xp,pd,tg,df]})}return d})();const bh={apiKey:"AIzaSyDhMeOKg3NlfID1yZj0pWK3C0XIT-dM9gU",authDomain:"clinica-7cd94.firebaseapp.com",projectId:"clinica-7cd94",storageBucket:"clinica-7cd94.appspot.com",messagingSenderId:"112194966494",appId:"1:112194966494:web:8a8472354ee23bfb57034f"};let Bl=(()=>{class d{static#e=this.\u0275fac=function(p){return new(p||d)};static#t=this.\u0275mod=I.oAB({type:d,bootstrap:[dt]});static#n=this.\u0275inj=I.cJS({imports:[y.b2,Pe,it.hO.initializeApp(bh),Th,fe.u5]})}return d})();y.q6().bootstrapModule(Bl).catch(d=>console.error(d))},5619:(qt,Ze,H)=>{H.d(Ze,{X:()=>fe});var y=H(8645);class fe extends y.x{constructor(Ce){super(),this._value=Ce}get value(){return this.getValue()}_subscribe(Ce){const De=super._subscribe(Ce);return!De.closed&&Ce.next(this._value),De}getValue(){const{hasError:Ce,thrownError:De,_value:Ee}=this;if(Ce)throw De;return this._throwIfClosed(),Ee}next(Ce){super.next(this._value=Ce)}}},5592:(qt,Ze,H)=>{H.d(Ze,{y:()=>I});var y=H(305),fe=H(7394),ae=H(4850),Ce=H(8407),De=H(2653),Ee=H(4674),Oe=H(1441);let I=(()=>{class Pe{constructor(it){it&&(this._subscribe=it)}lift(it){const _t=new Pe;return _t.source=this,_t.operator=it,_t}subscribe(it,_t,ft){const yt=function me(Pe){return Pe&&Pe instanceof y.Lv||function pe(Pe){return Pe&&(0,Ee.m)(Pe.next)&&(0,Ee.m)(Pe.error)&&(0,Ee.m)(Pe.complete)}(Pe)&&(0,fe.Nn)(Pe)}(it)?it:new y.Hp(it,_t,ft);return(0,Oe.x)(()=>{const{operator:It,source:nn}=this;yt.add(It?It.call(yt,nn):nn?this._subscribe(yt):this._trySubscribe(yt))}),yt}_trySubscribe(it){try{return this._subscribe(it)}catch(_t){it.error(_t)}}forEach(it,_t){return new(_t=$e(_t))((ft,yt)=>{const It=new y.Hp({next:nn=>{try{it(nn)}catch(Ve){yt(Ve),It.unsubscribe()}},error:yt,complete:ft});this.subscribe(It)})}_subscribe(it){var _t;return null===(_t=this.source)||void 0===_t?void 0:_t.subscribe(it)}[ae.L](){return this}pipe(...it){return(0,Ce.U)(it)(this)}toPromise(it){return new(it=$e(it))((_t,ft)=>{let yt;this.subscribe(It=>yt=It,It=>ft(It),()=>_t(yt))})}}return Pe.create=dt=>new Pe(dt),Pe})();function $e(Pe){var dt;return null!==(dt=Pe??De.config.Promise)&&void 0!==dt?dt:Promise}},8645:(qt,Ze,H)=>{H.d(Ze,{x:()=>Oe});var y=H(5592),fe=H(7394);const Ce=(0,H(2306).d)($e=>function(){$e(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var De=H(9039),Ee=H(1441);let Oe=(()=>{class $e extends y.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(me){const Pe=new I(this,this);return Pe.operator=me,Pe}_throwIfClosed(){if(this.closed)throw new Ce}next(me){(0,Ee.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const Pe of this.currentObservers)Pe.next(me)}})}error(me){(0,Ee.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=me;const{observers:Pe}=this;for(;Pe.length;)Pe.shift().error(me)}})}complete(){(0,Ee.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:me}=this;for(;me.length;)me.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var me;return(null===(me=this.observers)||void 0===me?void 0:me.length)>0}_trySubscribe(me){return this._throwIfClosed(),super._trySubscribe(me)}_subscribe(me){return this._throwIfClosed(),this._checkFinalizedStatuses(me),this._innerSubscribe(me)}_innerSubscribe(me){const{hasError:Pe,isStopped:dt,observers:it}=this;return Pe||dt?fe.Lc:(this.currentObservers=null,it.push(me),new fe.w0(()=>{this.currentObservers=null,(0,De.P)(it,me)}))}_checkFinalizedStatuses(me){const{hasError:Pe,thrownError:dt,isStopped:it}=this;Pe?me.error(dt):it&&me.complete()}asObservable(){const me=new y.y;return me.source=this,me}}return $e.create=(pe,me)=>new I(pe,me),$e})();class I extends Oe{constructor(pe,me){super(),this.destination=pe,this.source=me}next(pe){var me,Pe;null===(Pe=null===(me=this.destination)||void 0===me?void 0:me.next)||void 0===Pe||Pe.call(me,pe)}error(pe){var me,Pe;null===(Pe=null===(me=this.destination)||void 0===me?void 0:me.error)||void 0===Pe||Pe.call(me,pe)}complete(){var pe,me;null===(me=null===(pe=this.destination)||void 0===pe?void 0:pe.complete)||void 0===me||me.call(pe)}_subscribe(pe){var me,Pe;return null!==(Pe=null===(me=this.source)||void 0===me?void 0:me.subscribe(pe))&&void 0!==Pe?Pe:fe.Lc}}},305:(qt,Ze,H)=>{H.d(Ze,{Hp:()=>ft,Lv:()=>Pe});var y=H(4674),fe=H(7394),ae=H(2653),Ce=H(3894),De=H(2420);const Ee=$e("C",void 0,void 0);function $e(Me,qe,Ne){return{kind:Me,value:qe,error:Ne}}var pe=H(7599),me=H(1441);class Pe extends fe.w0{constructor(qe){super(),this.isStopped=!1,qe?(this.destination=qe,(0,fe.Nn)(qe)&&qe.add(this)):this.destination=Ve}static create(qe,Ne,ze){return new ft(qe,Ne,ze)}next(qe){this.isStopped?nn(function I(Me){return $e("N",Me,void 0)}(qe),this):this._next(qe)}error(qe){this.isStopped?nn(function Oe(Me){return $e("E",void 0,Me)}(qe),this):(this.isStopped=!0,this._error(qe))}complete(){this.isStopped?nn(Ee,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(qe){this.destination.next(qe)}_error(qe){try{this.destination.error(qe)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const dt=Function.prototype.bind;function it(Me,qe){return dt.call(Me,qe)}class _t{constructor(qe){this.partialObserver=qe}next(qe){const{partialObserver:Ne}=this;if(Ne.next)try{Ne.next(qe)}catch(ze){yt(ze)}}error(qe){const{partialObserver:Ne}=this;if(Ne.error)try{Ne.error(qe)}catch(ze){yt(ze)}else yt(qe)}complete(){const{partialObserver:qe}=this;if(qe.complete)try{qe.complete()}catch(Ne){yt(Ne)}}}class ft extends Pe{constructor(qe,Ne,ze){let ot;if(super(),(0,y.m)(qe)||!qe)ot={next:qe??void 0,error:Ne??void 0,complete:ze??void 0};else{let ut;this&&ae.config.useDeprecatedNextContext?(ut=Object.create(qe),ut.unsubscribe=()=>this.unsubscribe(),ot={next:qe.next&&it(qe.next,ut),error:qe.error&&it(qe.error,ut),complete:qe.complete&&it(qe.complete,ut)}):ot=qe}this.destination=new _t(ot)}}function yt(Me){ae.config.useDeprecatedSynchronousErrorHandling?(0,me.O)(Me):(0,Ce.h)(Me)}function nn(Me,qe){const{onStoppedNotification:Ne}=ae.config;Ne&&pe.z.setTimeout(()=>Ne(Me,qe))}const Ve={closed:!0,next:De.Z,error:function It(Me){throw Me},complete:De.Z}},7394:(qt,Ze,H)=>{H.d(Ze,{Lc:()=>Ee,w0:()=>De,Nn:()=>Oe});var y=H(4674);const ae=(0,H(2306).d)($e=>function(me){$e(this),this.message=me?`${me.length} errors occurred during unsubscription:\n${me.map((Pe,dt)=>`${dt+1}) ${Pe.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=me});var Ce=H(9039);class De{constructor(pe){this.initialTeardown=pe,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let pe;if(!this.closed){this.closed=!0;const{_parentage:me}=this;if(me)if(this._parentage=null,Array.isArray(me))for(const it of me)it.remove(this);else me.remove(this);const{initialTeardown:Pe}=this;if((0,y.m)(Pe))try{Pe()}catch(it){pe=it instanceof ae?it.errors:[it]}const{_finalizers:dt}=this;if(dt){this._finalizers=null;for(const it of dt)try{I(it)}catch(_t){pe=pe??[],_t instanceof ae?pe=[...pe,..._t.errors]:pe.push(_t)}}if(pe)throw new ae(pe)}}add(pe){var me;if(pe&&pe!==this)if(this.closed)I(pe);else{if(pe instanceof De){if(pe.closed||pe._hasParent(this))return;pe._addParent(this)}(this._finalizers=null!==(me=this._finalizers)&&void 0!==me?me:[]).push(pe)}}_hasParent(pe){const{_parentage:me}=this;return me===pe||Array.isArray(me)&&me.includes(pe)}_addParent(pe){const{_parentage:me}=this;this._parentage=Array.isArray(me)?(me.push(pe),me):me?[me,pe]:pe}_removeParent(pe){const{_parentage:me}=this;me===pe?this._parentage=null:Array.isArray(me)&&(0,Ce.P)(me,pe)}remove(pe){const{_finalizers:me}=this;me&&(0,Ce.P)(me,pe),pe instanceof De&&pe._removeParent(this)}}De.EMPTY=(()=>{const $e=new De;return $e.closed=!0,$e})();const Ee=De.EMPTY;function Oe($e){return $e instanceof De||$e&&"closed"in $e&&(0,y.m)($e.remove)&&(0,y.m)($e.add)&&(0,y.m)($e.unsubscribe)}function I($e){(0,y.m)($e)?$e():$e.unsubscribe()}},2653:(qt,Ze,H)=>{H.d(Ze,{config:()=>y});const y={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},5211:(qt,Ze,H)=>{H.d(Ze,{z:()=>De});var y=H(7537),ae=H(9940),Ce=H(2459);function De(...Ee){return function fe(){return(0,y.J)(1)}()((0,Ce.D)(Ee,(0,ae.yG)(Ee)))}},6232:(qt,Ze,H)=>{H.d(Ze,{E:()=>fe});const fe=new(H(5592).y)(De=>De.complete())},2459:(qt,Ze,H)=>{H.d(Ze,{D:()=>qe});var y=H(4829),fe=H(3093),ae=H(5137),Ee=H(5592),I=H(4971),$e=H(4674),pe=H(7103);function Pe(Ne,ze){if(!Ne)throw new Error("Iterable cannot be null");return new Ee.y(ot=>{(0,pe.f)(ot,ze,()=>{const ut=Ne[Symbol.asyncIterator]();(0,pe.f)(ot,ze,()=>{ut.next().then(ce=>{ce.done?ot.complete():ot.next(ce.value)})},0,!0)})})}var dt=H(8382),it=H(4026),_t=H(4266),ft=H(3664),yt=H(5726),It=H(9853),nn=H(541);function qe(Ne,ze){return ze?function Me(Ne,ze){if(null!=Ne){if((0,dt.c)(Ne))return function Ce(Ne,ze){return(0,y.Xf)(Ne).pipe((0,ae.R)(ze),(0,fe.Q)(ze))}(Ne,ze);if((0,_t.z)(Ne))return function Oe(Ne,ze){return new Ee.y(ot=>{let ut=0;return ze.schedule(function(){ut===Ne.length?ot.complete():(ot.next(Ne[ut++]),ot.closed||this.schedule())})})}(Ne,ze);if((0,it.t)(Ne))return function De(Ne,ze){return(0,y.Xf)(Ne).pipe((0,ae.R)(ze),(0,fe.Q)(ze))}(Ne,ze);if((0,yt.D)(Ne))return Pe(Ne,ze);if((0,ft.T)(Ne))return function me(Ne,ze){return new Ee.y(ot=>{let ut;return(0,pe.f)(ot,ze,()=>{ut=Ne[I.h](),(0,pe.f)(ot,ze,()=>{let ce,Zt;try{({value:ce,done:Zt}=ut.next())}catch(Tt){return void ot.error(Tt)}Zt?ot.complete():ot.next(ce)},0,!0)}),()=>(0,$e.m)(ut?.return)&&ut.return()})}(Ne,ze);if((0,nn.L)(Ne))return function Ve(Ne,ze){return Pe((0,nn.Q)(Ne),ze)}(Ne,ze)}throw(0,It.z)(Ne)}(Ne,ze):(0,y.Xf)(Ne)}},4829:(qt,Ze,H)=>{H.d(Ze,{Xf:()=>dt});var y=H(7582),fe=H(4266),ae=H(4026),Ce=H(5592),De=H(8382),Ee=H(5726),Oe=H(9853),I=H(3664),$e=H(541),pe=H(4674),me=H(3894),Pe=H(4850);function dt(Me){if(Me instanceof Ce.y)return Me;if(null!=Me){if((0,De.c)(Me))return function it(Me){return new Ce.y(qe=>{const Ne=Me[Pe.L]();if((0,pe.m)(Ne.subscribe))return Ne.subscribe(qe);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(Me);if((0,fe.z)(Me))return function _t(Me){return new Ce.y(qe=>{for(let Ne=0;Ne<Me.length&&!qe.closed;Ne++)qe.next(Me[Ne]);qe.complete()})}(Me);if((0,ae.t)(Me))return function ft(Me){return new Ce.y(qe=>{Me.then(Ne=>{qe.closed||(qe.next(Ne),qe.complete())},Ne=>qe.error(Ne)).then(null,me.h)})}(Me);if((0,Ee.D)(Me))return It(Me);if((0,I.T)(Me))return function yt(Me){return new Ce.y(qe=>{for(const Ne of Me)if(qe.next(Ne),qe.closed)return;qe.complete()})}(Me);if((0,$e.L)(Me))return function nn(Me){return It((0,$e.Q)(Me))}(Me)}throw(0,Oe.z)(Me)}function It(Me){return new Ce.y(qe=>{(function Ve(Me,qe){var Ne,ze,ot,ut;return(0,y.mG)(this,void 0,void 0,function*(){try{for(Ne=(0,y.KL)(Me);!(ze=yield Ne.next()).done;)if(qe.next(ze.value),qe.closed)return}catch(ce){ot={error:ce}}finally{try{ze&&!ze.done&&(ut=Ne.return)&&(yield ut.call(Ne))}finally{if(ot)throw ot.error}}qe.complete()})})(Me,qe).catch(Ne=>qe.error(Ne))})}},3019:(qt,Ze,H)=>{H.d(Ze,{T:()=>Ee});var y=H(7537),fe=H(4829),ae=H(6232),Ce=H(9940),De=H(2459);function Ee(...Oe){const I=(0,Ce.yG)(Oe),$e=(0,Ce._6)(Oe,1/0),pe=Oe;return pe.length?1===pe.length?(0,fe.Xf)(pe[0]):(0,y.J)($e)((0,De.D)(pe,I)):ae.E}},2096:(qt,Ze,H)=>{H.d(Ze,{of:()=>ae});var y=H(9940),fe=H(2459);function ae(...Ce){const De=(0,y.yG)(Ce);return(0,fe.D)(Ce,De)}},8251:(qt,Ze,H)=>{H.d(Ze,{x:()=>fe});var y=H(305);function fe(Ce,De,Ee,Oe,I){return new ae(Ce,De,Ee,Oe,I)}class ae extends y.Lv{constructor(De,Ee,Oe,I,$e,pe){super(De),this.onFinalize=$e,this.shouldUnsubscribe=pe,this._next=Ee?function(me){try{Ee(me)}catch(Pe){De.error(Pe)}}:super._next,this._error=I?function(me){try{I(me)}catch(Pe){De.error(Pe)}finally{this.unsubscribe()}}:super._error,this._complete=Oe?function(){try{Oe()}catch(me){De.error(me)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var De;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:Ee}=this;super.unsubscribe(),!Ee&&(null===(De=this.onFinalize)||void 0===De||De.call(this))}}}},3572:(qt,Ze,H)=>{H.d(Ze,{d:()=>ae});var y=H(9360),fe=H(8251);function ae(Ce){return(0,y.e)((De,Ee)=>{let Oe=!1;De.subscribe((0,fe.x)(Ee,I=>{Oe=!0,Ee.next(I)},()=>{Oe||Ee.next(Ce),Ee.complete()}))})}},3997:(qt,Ze,H)=>{H.d(Ze,{x:()=>Ce});var y=H(2737),fe=H(9360),ae=H(8251);function Ce(Ee,Oe=y.y){return Ee=Ee??De,(0,fe.e)((I,$e)=>{let pe,me=!0;I.subscribe((0,ae.x)($e,Pe=>{const dt=Oe(Pe);(me||!Ee(pe,dt))&&(me=!1,pe=dt,$e.next(Pe))}))})}function De(Ee,Oe){return Ee===Oe}},2181:(qt,Ze,H)=>{H.d(Ze,{h:()=>ae});var y=H(9360),fe=H(8251);function ae(Ce,De){return(0,y.e)((Ee,Oe)=>{let I=0;Ee.subscribe((0,fe.x)(Oe,$e=>Ce.call(De,$e,I++)&&Oe.next($e)))})}},1374:(qt,Ze,H)=>{H.d(Ze,{P:()=>Oe});var y=H(6973),fe=H(2181),ae=H(8180),Ce=H(3572),De=H(3026),Ee=H(2737);function Oe(I,$e){const pe=arguments.length>=2;return me=>me.pipe(I?(0,fe.h)((Pe,dt)=>I(Pe,dt,me)):Ee.y,(0,ae.q)(1),pe?(0,Ce.d)($e):(0,De.T)(()=>new y.K))}},7398:(qt,Ze,H)=>{H.d(Ze,{U:()=>ae});var y=H(9360),fe=H(8251);function ae(Ce,De){return(0,y.e)((Ee,Oe)=>{let I=0;Ee.subscribe((0,fe.x)(Oe,$e=>{Oe.next(Ce.call(De,$e,I++))}))})}},975:(qt,Ze,H)=>{H.d(Ze,{h:()=>fe});var y=H(7398);function fe(ae){return(0,y.U)(()=>ae)}},7537:(qt,Ze,H)=>{H.d(Ze,{J:()=>ae});var y=H(1631),fe=H(2737);function ae(Ce=1/0){return(0,y.z)(fe.y,Ce)}},1631:(qt,Ze,H)=>{H.d(Ze,{z:()=>I});var y=H(7398),fe=H(4829),ae=H(9360),Ce=H(7103),De=H(8251),Oe=H(4674);function I($e,pe,me=1/0){return(0,Oe.m)(pe)?I((Pe,dt)=>(0,y.U)((it,_t)=>pe(Pe,it,dt,_t))((0,fe.Xf)($e(Pe,dt))),me):("number"==typeof pe&&(me=pe),(0,ae.e)((Pe,dt)=>function Ee($e,pe,me,Pe,dt,it,_t,ft){const yt=[];let It=0,nn=0,Ve=!1;const Me=()=>{Ve&&!yt.length&&!It&&pe.complete()},qe=ze=>It<Pe?Ne(ze):yt.push(ze),Ne=ze=>{it&&pe.next(ze),It++;let ot=!1;(0,fe.Xf)(me(ze,nn++)).subscribe((0,De.x)(pe,ut=>{dt?.(ut),it?qe(ut):pe.next(ut)},()=>{ot=!0},void 0,()=>{if(ot)try{for(It--;yt.length&&It<Pe;){const ut=yt.shift();_t?(0,Ce.f)(pe,_t,()=>Ne(ut)):Ne(ut)}Me()}catch(ut){pe.error(ut)}}))};return $e.subscribe((0,De.x)(pe,qe,()=>{Ve=!0,Me()})),()=>{ft?.()}}(Pe,dt,$e,me)))}},3093:(qt,Ze,H)=>{H.d(Ze,{Q:()=>Ce});var y=H(7103),fe=H(9360),ae=H(8251);function Ce(De,Ee=0){return(0,fe.e)((Oe,I)=>{Oe.subscribe((0,ae.x)(I,$e=>(0,y.f)(I,De,()=>I.next($e),Ee),()=>(0,y.f)(I,De,()=>I.complete(),Ee),$e=>(0,y.f)(I,De,()=>I.error($e),Ee)))})}},6699:(qt,Ze,H)=>{H.d(Ze,{R:()=>Ce});var y=H(9360),fe=H(8251);function Ce(De,Ee){return(0,y.e)(function ae(De,Ee,Oe,I,$e){return(pe,me)=>{let Pe=Oe,dt=Ee,it=0;pe.subscribe((0,fe.x)(me,_t=>{const ft=it++;dt=Pe?De(dt,_t,ft):(Pe=!0,_t),I&&me.next(dt)},$e&&(()=>{Pe&&me.next(dt),me.complete()})))}}(De,Ee,arguments.length>=2,!0))}},3020:(qt,Ze,H)=>{H.d(Ze,{B:()=>De});var y=H(4829),fe=H(8645),ae=H(305),Ce=H(9360);function De(Oe={}){const{connector:I=(()=>new fe.x),resetOnError:$e=!0,resetOnComplete:pe=!0,resetOnRefCountZero:me=!0}=Oe;return Pe=>{let dt,it,_t,ft=0,yt=!1,It=!1;const nn=()=>{it?.unsubscribe(),it=void 0},Ve=()=>{nn(),dt=_t=void 0,yt=It=!1},Me=()=>{const qe=dt;Ve(),qe?.unsubscribe()};return(0,Ce.e)((qe,Ne)=>{ft++,!It&&!yt&&nn();const ze=_t=_t??I();Ne.add(()=>{ft--,0===ft&&!It&&!yt&&(it=Ee(Me,me))}),ze.subscribe(Ne),!dt&&ft>0&&(dt=new ae.Hp({next:ot=>ze.next(ot),error:ot=>{It=!0,nn(),it=Ee(Ve,$e,ot),ze.error(ot)},complete:()=>{yt=!0,nn(),it=Ee(Ve,pe),ze.complete()}}),(0,y.Xf)(qe).subscribe(dt))})(Pe)}}function Ee(Oe,I,...$e){if(!0===I)return void Oe();if(!1===I)return;const pe=new ae.Hp({next:()=>{pe.unsubscribe(),Oe()}});return(0,y.Xf)(I(...$e)).subscribe(pe)}},7921:(qt,Ze,H)=>{H.d(Ze,{O:()=>Ce});var y=H(5211),fe=H(9940),ae=H(9360);function Ce(...De){const Ee=(0,fe.yG)(De);return(0,ae.e)((Oe,I)=>{(Ee?(0,y.z)(De,Oe,Ee):(0,y.z)(De,Oe)).subscribe(I)})}},5137:(qt,Ze,H)=>{H.d(Ze,{R:()=>fe});var y=H(9360);function fe(ae,Ce=0){return(0,y.e)((De,Ee)=>{Ee.add(ae.schedule(()=>De.subscribe(Ee),Ce))})}},4664:(qt,Ze,H)=>{H.d(Ze,{w:()=>Ce});var y=H(4829),fe=H(9360),ae=H(8251);function Ce(De,Ee){return(0,fe.e)((Oe,I)=>{let $e=null,pe=0,me=!1;const Pe=()=>me&&!$e&&I.complete();Oe.subscribe((0,ae.x)(I,dt=>{$e?.unsubscribe();let it=0;const _t=pe++;(0,y.Xf)(De(dt,_t)).subscribe($e=(0,ae.x)(I,ft=>I.next(Ee?Ee(dt,ft,_t,it++):ft),()=>{$e=null,Pe()}))},()=>{me=!0,Pe()}))})}},8180:(qt,Ze,H)=>{H.d(Ze,{q:()=>Ce});var y=H(6232),fe=H(9360),ae=H(8251);function Ce(De){return De<=0?()=>y.E:(0,fe.e)((Ee,Oe)=>{let I=0;Ee.subscribe((0,ae.x)(Oe,$e=>{++I<=De&&(Oe.next($e),De<=I&&Oe.complete())}))})}},9773:(qt,Ze,H)=>{H.d(Ze,{R:()=>De});var y=H(9360),fe=H(8251),ae=H(4829),Ce=H(2420);function De(Ee){return(0,y.e)((Oe,I)=>{(0,ae.Xf)(Ee).subscribe((0,fe.x)(I,()=>I.complete(),Ce.Z)),!I.closed&&Oe.subscribe(I)})}},9397:(qt,Ze,H)=>{H.d(Ze,{b:()=>De});var y=H(4674),fe=H(9360),ae=H(8251),Ce=H(2737);function De(Ee,Oe,I){const $e=(0,y.m)(Ee)||Oe||I?{next:Ee,error:Oe,complete:I}:Ee;return $e?(0,fe.e)((pe,me)=>{var Pe;null===(Pe=$e.subscribe)||void 0===Pe||Pe.call($e);let dt=!0;pe.subscribe((0,ae.x)(me,it=>{var _t;null===(_t=$e.next)||void 0===_t||_t.call($e,it),me.next(it)},()=>{var it;dt=!1,null===(it=$e.complete)||void 0===it||it.call($e),me.complete()},it=>{var _t;dt=!1,null===(_t=$e.error)||void 0===_t||_t.call($e,it),me.error(it)},()=>{var it,_t;dt&&(null===(it=$e.unsubscribe)||void 0===it||it.call($e)),null===(_t=$e.finalize)||void 0===_t||_t.call($e)}))}):Ce.y}},3026:(qt,Ze,H)=>{H.d(Ze,{T:()=>Ce});var y=H(6973),fe=H(9360),ae=H(8251);function Ce(Ee=De){return(0,fe.e)((Oe,I)=>{let $e=!1;Oe.subscribe((0,ae.x)(I,pe=>{$e=!0,I.next(pe)},()=>$e?I.complete():I.error(Ee())))})}function De(){return new y.K}},1954:(qt,Ze,H)=>{H.d(Ze,{o:()=>De});var y=H(7394);class fe extends y.w0{constructor(Oe,I){super()}schedule(Oe,I=0){return this}}const ae={setInterval(Ee,Oe,...I){const{delegate:$e}=ae;return $e?.setInterval?$e.setInterval(Ee,Oe,...I):setInterval(Ee,Oe,...I)},clearInterval(Ee){const{delegate:Oe}=ae;return(Oe?.clearInterval||clearInterval)(Ee)},delegate:void 0};var Ce=H(9039);class De extends fe{constructor(Oe,I){super(Oe,I),this.scheduler=Oe,this.work=I,this.pending=!1}schedule(Oe,I=0){var $e;if(this.closed)return this;this.state=Oe;const pe=this.id,me=this.scheduler;return null!=pe&&(this.id=this.recycleAsyncId(me,pe,I)),this.pending=!0,this.delay=I,this.id=null!==($e=this.id)&&void 0!==$e?$e:this.requestAsyncId(me,this.id,I),this}requestAsyncId(Oe,I,$e=0){return ae.setInterval(Oe.flush.bind(Oe,this),$e)}recycleAsyncId(Oe,I,$e=0){if(null!=$e&&this.delay===$e&&!1===this.pending)return I;null!=I&&ae.clearInterval(I)}execute(Oe,I){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const $e=this._execute(Oe,I);if($e)return $e;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(Oe,I){let pe,$e=!1;try{this.work(Oe)}catch(me){$e=!0,pe=me||new Error("Scheduled action threw falsy error")}if($e)return this.unsubscribe(),pe}unsubscribe(){if(!this.closed){const{id:Oe,scheduler:I}=this,{actions:$e}=I;this.work=this.state=this.scheduler=null,this.pending=!1,(0,Ce.P)($e,this),null!=Oe&&(this.id=this.recycleAsyncId(I,Oe,null)),this.delay=null,super.unsubscribe()}}}},2631:(qt,Ze,H)=>{H.d(Ze,{v:()=>ae});var y=H(4552);class fe{constructor(De,Ee=fe.now){this.schedulerActionCtor=De,this.now=Ee}schedule(De,Ee=0,Oe){return new this.schedulerActionCtor(this,De).schedule(Oe,Ee)}}fe.now=y.l.now;class ae extends fe{constructor(De,Ee=fe.now){super(De,Ee),this.actions=[],this._active=!1}flush(De){const{actions:Ee}=this;if(this._active)return void Ee.push(De);let Oe;this._active=!0;do{if(Oe=De.execute(De.state,De.delay))break}while(De=Ee.shift());if(this._active=!1,Oe){for(;De=Ee.shift();)De.unsubscribe();throw Oe}}}},6321:(qt,Ze,H)=>{H.d(Ze,{P:()=>Ce,z:()=>ae});var y=H(1954);const ae=new(H(2631).v)(y.o),Ce=ae},4552:(qt,Ze,H)=>{H.d(Ze,{l:()=>y});const y={now:()=>(y.delegate||Date).now(),delegate:void 0}},7599:(qt,Ze,H)=>{H.d(Ze,{z:()=>y});const y={setTimeout(fe,ae,...Ce){const{delegate:De}=y;return De?.setTimeout?De.setTimeout(fe,ae,...Ce):setTimeout(fe,ae,...Ce)},clearTimeout(fe){const{delegate:ae}=y;return(ae?.clearTimeout||clearTimeout)(fe)},delegate:void 0}},4971:(qt,Ze,H)=>{H.d(Ze,{h:()=>fe});const fe=function y(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},4850:(qt,Ze,H)=>{H.d(Ze,{L:()=>y});const y="function"==typeof Symbol&&Symbol.observable||"@@observable"},6973:(qt,Ze,H)=>{H.d(Ze,{K:()=>fe});const fe=(0,H(2306).d)(ae=>function(){ae(this),this.name="EmptyError",this.message="no elements in sequence"})},9940:(qt,Ze,H)=>{H.d(Ze,{_6:()=>Ee,jO:()=>Ce,yG:()=>De});var y=H(4674),fe=H(671);function ae(Oe){return Oe[Oe.length-1]}function Ce(Oe){return(0,y.m)(ae(Oe))?Oe.pop():void 0}function De(Oe){return(0,fe.K)(ae(Oe))?Oe.pop():void 0}function Ee(Oe,I){return"number"==typeof ae(Oe)?Oe.pop():I}},7453:(qt,Ze,H)=>{H.d(Ze,{D:()=>De});const{isArray:y}=Array,{getPrototypeOf:fe,prototype:ae,keys:Ce}=Object;function De(Oe){if(1===Oe.length){const I=Oe[0];if(y(I))return{args:I,keys:null};if(function Ee(Oe){return Oe&&"object"==typeof Oe&&fe(Oe)===ae}(I)){const $e=Ce(I);return{args:$e.map(pe=>I[pe]),keys:$e}}}return{args:Oe,keys:null}}},9039:(qt,Ze,H)=>{function y(fe,ae){if(fe){const Ce=fe.indexOf(ae);0<=Ce&&fe.splice(Ce,1)}}H.d(Ze,{P:()=>y})},2306:(qt,Ze,H)=>{function y(fe){const Ce=fe(De=>{Error.call(De),De.stack=(new Error).stack});return Ce.prototype=Object.create(Error.prototype),Ce.prototype.constructor=Ce,Ce}H.d(Ze,{d:()=>y})},2714:(qt,Ze,H)=>{function y(fe,ae){return fe.reduce((Ce,De,Ee)=>(Ce[De]=ae[Ee],Ce),{})}H.d(Ze,{n:()=>y})},1441:(qt,Ze,H)=>{H.d(Ze,{O:()=>Ce,x:()=>ae});var y=H(2653);let fe=null;function ae(De){if(y.config.useDeprecatedSynchronousErrorHandling){const Ee=!fe;if(Ee&&(fe={errorThrown:!1,error:null}),De(),Ee){const{errorThrown:Oe,error:I}=fe;if(fe=null,Oe)throw I}}else De()}function Ce(De){y.config.useDeprecatedSynchronousErrorHandling&&fe&&(fe.errorThrown=!0,fe.error=De)}},7103:(qt,Ze,H)=>{function y(fe,ae,Ce,De=0,Ee=!1){const Oe=ae.schedule(function(){Ce(),Ee?fe.add(this.schedule(null,De)):this.unsubscribe()},De);if(fe.add(Oe),!Ee)return Oe}H.d(Ze,{f:()=>y})},2737:(qt,Ze,H)=>{function y(fe){return fe}H.d(Ze,{y:()=>y})},4266:(qt,Ze,H)=>{H.d(Ze,{z:()=>y});const y=fe=>fe&&"number"==typeof fe.length&&"function"!=typeof fe},5726:(qt,Ze,H)=>{H.d(Ze,{D:()=>fe});var y=H(4674);function fe(ae){return Symbol.asyncIterator&&(0,y.m)(ae?.[Symbol.asyncIterator])}},4674:(qt,Ze,H)=>{function y(fe){return"function"==typeof fe}H.d(Ze,{m:()=>y})},8382:(qt,Ze,H)=>{H.d(Ze,{c:()=>ae});var y=H(4850),fe=H(4674);function ae(Ce){return(0,fe.m)(Ce[y.L])}},3664:(qt,Ze,H)=>{H.d(Ze,{T:()=>ae});var y=H(4971),fe=H(4674);function ae(Ce){return(0,fe.m)(Ce?.[y.h])}},4026:(qt,Ze,H)=>{H.d(Ze,{t:()=>fe});var y=H(4674);function fe(ae){return(0,y.m)(ae?.then)}},541:(qt,Ze,H)=>{H.d(Ze,{L:()=>Ce,Q:()=>ae});var y=H(7582),fe=H(4674);function ae(De){return(0,y.FC)(this,arguments,function*(){const Oe=De.getReader();try{for(;;){const{value:I,done:$e}=yield(0,y.qq)(Oe.read());if($e)return yield(0,y.qq)(void 0);yield yield(0,y.qq)(I)}}finally{Oe.releaseLock()}})}function Ce(De){return(0,fe.m)(De?.getReader)}},671:(qt,Ze,H)=>{H.d(Ze,{K:()=>fe});var y=H(4674);function fe(ae){return ae&&(0,y.m)(ae.schedule)}},9360:(qt,Ze,H)=>{H.d(Ze,{A:()=>fe,e:()=>ae});var y=H(4674);function fe(Ce){return(0,y.m)(Ce?.lift)}function ae(Ce){return De=>{if(fe(De))return De.lift(function(Ee){try{return Ce(Ee,this)}catch(Oe){this.error(Oe)}});throw new TypeError("Unable to lift unknown Observable type")}}},7400:(qt,Ze,H)=>{H.d(Ze,{Z:()=>Ce});var y=H(7398);const{isArray:fe}=Array;function Ce(De){return(0,y.U)(Ee=>function ae(De,Ee){return fe(Ee)?De(...Ee):De(Ee)}(De,Ee))}},2420:(qt,Ze,H)=>{function y(){}H.d(Ze,{Z:()=>y})},8407:(qt,Ze,H)=>{H.d(Ze,{U:()=>ae,z:()=>fe});var y=H(2737);function fe(...Ce){return ae(Ce)}function ae(Ce){return 0===Ce.length?y.y:1===Ce.length?Ce[0]:function(Ee){return Ce.reduce((Oe,I)=>I(Oe),Ee)}}},3894:(qt,Ze,H)=>{H.d(Ze,{h:()=>ae});var y=H(2653),fe=H(7599);function ae(Ce){fe.z.setTimeout(()=>{const{onUnhandledError:De}=y.config;if(!De)throw Ce;De(Ce)})}},9853:(qt,Ze,H)=>{function y(fe){return new TypeError(`You provided ${null!==fe&&"object"==typeof fe?"an invalid object":`'${fe}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}H.d(Ze,{z:()=>y})},6814:(qt,Ze,H)=>{H.d(Ze,{Do:()=>ft,EM:()=>co,HT:()=>Ce,JF:()=>Hs,K0:()=>Ee,Mn:()=>Ir,Mx:()=>Pi,O5:()=>ea,PM:()=>uo,S$:()=>dt,Tn:()=>ut,UT:()=>or,V_:()=>I,Ye:()=>yt,ax:()=>Gs,b0:()=>_t,bD:()=>Wn,ez:()=>Zr,mk:()=>Lo,p6:()=>$n,q:()=>ae,sg:()=>Gs,tP:()=>hi,w_:()=>De,x:()=>ot});var y=H(5879);let fe=null;function ae(){return fe}function Ce(O){fe||(fe=O)}class De{}const Ee=new y.OlP("DocumentToken");let Oe=(()=>{class O{historyGo(U){throw new Error("Not implemented")}static#e=this.\u0275fac=function(K){return new(K||O)};static#t=this.\u0275prov=y.Yz7({token:O,factory:function(){return(0,y.f3M)($e)},providedIn:"platform"})}return O})();const I=new y.OlP("Location Initialized");let $e=(()=>{class O extends Oe{constructor(){super(),this._doc=(0,y.f3M)(Ee),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return ae().getBaseHref(this._doc)}onPopState(U){const K=ae().getGlobalEventTarget(this._doc,"window");return K.addEventListener("popstate",U,!1),()=>K.removeEventListener("popstate",U)}onHashChange(U){const K=ae().getGlobalEventTarget(this._doc,"window");return K.addEventListener("hashchange",U,!1),()=>K.removeEventListener("hashchange",U)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(U){this._location.pathname=U}pushState(U,K,ge){this._history.pushState(U,K,ge)}replaceState(U,K,ge){this._history.replaceState(U,K,ge)}forward(){this._history.forward()}back(){this._history.back()}historyGo(U=0){this._history.go(U)}getState(){return this._history.state}static#e=this.\u0275fac=function(K){return new(K||O)};static#t=this.\u0275prov=y.Yz7({token:O,factory:function(){return new O},providedIn:"platform"})}return O})();function pe(O,Q){if(0==O.length)return Q;if(0==Q.length)return O;let U=0;return O.endsWith("/")&&U++,Q.startsWith("/")&&U++,2==U?O+Q.substring(1):1==U?O+Q:O+"/"+Q}function me(O){const Q=O.match(/#|\?|$/),U=Q&&Q.index||O.length;return O.slice(0,U-("/"===O[U-1]?1:0))+O.slice(U)}function Pe(O){return O&&"?"!==O[0]?"?"+O:O}let dt=(()=>{class O{historyGo(U){throw new Error("Not implemented")}static#e=this.\u0275fac=function(K){return new(K||O)};static#t=this.\u0275prov=y.Yz7({token:O,factory:function(){return(0,y.f3M)(_t)},providedIn:"root"})}return O})();const it=new y.OlP("appBaseHref");let _t=(()=>{class O extends dt{constructor(U,K){super(),this._platformLocation=U,this._removeListenerFns=[],this._baseHref=K??this._platformLocation.getBaseHrefFromDOM()??(0,y.f3M)(Ee).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(U){this._removeListenerFns.push(this._platformLocation.onPopState(U),this._platformLocation.onHashChange(U))}getBaseHref(){return this._baseHref}prepareExternalUrl(U){return pe(this._baseHref,U)}path(U=!1){const K=this._platformLocation.pathname+Pe(this._platformLocation.search),ge=this._platformLocation.hash;return ge&&U?`${K}${ge}`:K}pushState(U,K,ge,Qe){const ct=this.prepareExternalUrl(ge+Pe(Qe));this._platformLocation.pushState(U,K,ct)}replaceState(U,K,ge,Qe){const ct=this.prepareExternalUrl(ge+Pe(Qe));this._platformLocation.replaceState(U,K,ct)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(U=0){this._platformLocation.historyGo?.(U)}static#e=this.\u0275fac=function(K){return new(K||O)(y.LFG(Oe),y.LFG(it,8))};static#t=this.\u0275prov=y.Yz7({token:O,factory:O.\u0275fac,providedIn:"root"})}return O})(),ft=(()=>{class O extends dt{constructor(U,K){super(),this._platformLocation=U,this._baseHref="",this._removeListenerFns=[],null!=K&&(this._baseHref=K)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(U){this._removeListenerFns.push(this._platformLocation.onPopState(U),this._platformLocation.onHashChange(U))}getBaseHref(){return this._baseHref}path(U=!1){let K=this._platformLocation.hash;return null==K&&(K="#"),K.length>0?K.substring(1):K}prepareExternalUrl(U){const K=pe(this._baseHref,U);return K.length>0?"#"+K:K}pushState(U,K,ge,Qe){let ct=this.prepareExternalUrl(ge+Pe(Qe));0==ct.length&&(ct=this._platformLocation.pathname),this._platformLocation.pushState(U,K,ct)}replaceState(U,K,ge,Qe){let ct=this.prepareExternalUrl(ge+Pe(Qe));0==ct.length&&(ct=this._platformLocation.pathname),this._platformLocation.replaceState(U,K,ct)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(U=0){this._platformLocation.historyGo?.(U)}static#e=this.\u0275fac=function(K){return new(K||O)(y.LFG(Oe),y.LFG(it,8))};static#t=this.\u0275prov=y.Yz7({token:O,factory:O.\u0275fac})}return O})(),yt=(()=>{class O{constructor(U){this._subject=new y.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=U;const K=this._locationStrategy.getBaseHref();this._basePath=function Me(O){if(new RegExp("^(https?:)?//").test(O)){const[,U]=O.split(/\/\/[^\/]+/);return U}return O}(me(Ve(K))),this._locationStrategy.onPopState(ge=>{this._subject.emit({url:this.path(!0),pop:!0,state:ge.state,type:ge.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(U=!1){return this.normalize(this._locationStrategy.path(U))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(U,K=""){return this.path()==this.normalize(U+Pe(K))}normalize(U){return O.stripTrailingSlash(function nn(O,Q){if(!O||!Q.startsWith(O))return Q;const U=Q.substring(O.length);return""===U||["/",";","?","#"].includes(U[0])?U:Q}(this._basePath,Ve(U)))}prepareExternalUrl(U){return U&&"/"!==U[0]&&(U="/"+U),this._locationStrategy.prepareExternalUrl(U)}go(U,K="",ge=null){this._locationStrategy.pushState(ge,"",U,K),this._notifyUrlChangeListeners(this.prepareExternalUrl(U+Pe(K)),ge)}replaceState(U,K="",ge=null){this._locationStrategy.replaceState(ge,"",U,K),this._notifyUrlChangeListeners(this.prepareExternalUrl(U+Pe(K)),ge)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(U=0){this._locationStrategy.historyGo?.(U)}onUrlChange(U){return this._urlChangeListeners.push(U),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(K=>{this._notifyUrlChangeListeners(K.url,K.state)})),()=>{const K=this._urlChangeListeners.indexOf(U);this._urlChangeListeners.splice(K,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(U="",K){this._urlChangeListeners.forEach(ge=>ge(U,K))}subscribe(U,K,ge){return this._subject.subscribe({next:U,error:K,complete:ge})}static#e=this.normalizeQueryParams=Pe;static#t=this.joinWithSlash=pe;static#n=this.stripTrailingSlash=me;static#r=this.\u0275fac=function(K){return new(K||O)(y.LFG(dt))};static#i=this.\u0275prov=y.Yz7({token:O,factory:function(){return function It(){return new yt((0,y.LFG)(dt))}()},providedIn:"root"})}return O})();function Ve(O){return O.replace(/\/index.html$/,"")}var ot=function(O){return O[O.Format=0]="Format",O[O.Standalone=1]="Standalone",O}(ot||{}),ut=function(O){return O[O.Narrow=0]="Narrow",O[O.Abbreviated=1]="Abbreviated",O[O.Wide=2]="Wide",O[O.Short=3]="Short",O}(ut||{}),ce=function(O){return O[O.Short=0]="Short",O[O.Medium=1]="Medium",O[O.Long=2]="Long",O[O.Full=3]="Full",O}(ce||{}),Zt=function(O){return O[O.Decimal=0]="Decimal",O[O.Group=1]="Group",O[O.List=2]="List",O[O.PercentSign=3]="PercentSign",O[O.PlusSign=4]="PlusSign",O[O.MinusSign=5]="MinusSign",O[O.Exponential=6]="Exponential",O[O.SuperscriptingExponent=7]="SuperscriptingExponent",O[O.PerMille=8]="PerMille",O[O.Infinity=9]="Infinity",O[O.NaN=10]="NaN",O[O.TimeSeparator=11]="TimeSeparator",O[O.CurrencyDecimal=12]="CurrencyDecimal",O[O.CurrencyGroup=13]="CurrencyGroup",O}(Zt||{});function Ir(O,Q,U){const K=(0,y.cg1)(O),Qe=_e([K[y.wAp.DaysFormat],K[y.wAp.DaysStandalone]],Q);return _e(Qe,U)}function or(O,Q,U){const K=(0,y.cg1)(O),Qe=_e([K[y.wAp.MonthsFormat],K[y.wAp.MonthsStandalone]],Q);return _e(Qe,U)}function be(O,Q){return _e((0,y.cg1)(O)[y.wAp.DateFormat],Q)}function He(O,Q){return _e((0,y.cg1)(O)[y.wAp.TimeFormat],Q)}function xe(O,Q){return _e((0,y.cg1)(O)[y.wAp.DateTimeFormat],Q)}function Le(O,Q){const U=(0,y.cg1)(O),K=U[y.wAp.NumberSymbols][Q];if(typeof K>"u"){if(Q===Zt.CurrencyDecimal)return U[y.wAp.NumberSymbols][Zt.Decimal];if(Q===Zt.CurrencyGroup)return U[y.wAp.NumberSymbols][Zt.Group]}return K}function on(O){if(!O[y.wAp.ExtraData])throw new Error(`Missing extra locale data for the locale "${O[y.wAp.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function _e(O,Q){for(let U=Q;U>-1;U--)if(typeof O[U]<"u")return O[U];throw new Error("Locale data API: locale data undefined")}function Se(O){const[Q,U]=O.split(":");return{hours:+Q,minutes:+U}}const Mt=/^(\d{4,})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,Nn={},kn=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;var Ot=function(O){return O[O.Short=0]="Short",O[O.ShortGMT=1]="ShortGMT",O[O.Long=2]="Long",O[O.Extended=3]="Extended",O}(Ot||{}),sn=function(O){return O[O.FullYear=0]="FullYear",O[O.Month=1]="Month",O[O.Date=2]="Date",O[O.Hours=3]="Hours",O[O.Minutes=4]="Minutes",O[O.Seconds=5]="Seconds",O[O.FractionalSeconds=6]="FractionalSeconds",O[O.Day=7]="Day",O}(sn||{}),At=function(O){return O[O.DayPeriods=0]="DayPeriods",O[O.Days=1]="Days",O[O.Months=2]="Months",O[O.Eras=3]="Eras",O}(At||{});function $n(O,Q,U,K){let ge=function se(O){if(re(O))return O;if("number"==typeof O&&!isNaN(O))return new Date(O);if("string"==typeof O){if(O=O.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(O)){const[ge,Qe=1,ct=1]=O.split("-").map(an=>+an);return Fr(ge,Qe-1,ct)}const U=parseFloat(O);if(!isNaN(O-U))return new Date(U);let K;if(K=O.match(Mt))return function ne(O){const Q=new Date(0);let U=0,K=0;const ge=O[8]?Q.setUTCFullYear:Q.setFullYear,Qe=O[8]?Q.setUTCHours:Q.setHours;O[9]&&(U=Number(O[9]+O[10]),K=Number(O[9]+O[11])),ge.call(Q,Number(O[1]),Number(O[2])-1,Number(O[3]));const ct=Number(O[4]||0)-U,an=Number(O[5]||0)-K,Yn=Number(O[6]||0),rr=Math.floor(1e3*parseFloat("0."+(O[7]||0)));return Qe.call(Q,ct,an,Yn,rr),Q}(K)}const Q=new Date(O);if(!re(Q))throw new Error(`Unable to convert "${O}" into a date`);return Q}(O);Q=qr(U,Q)||Q;let an,ct=[];for(;Q;){if(an=kn.exec(Q),!an){ct.push(Q);break}{ct=ct.concat(an.slice(1));const qn=ct.pop();if(!qn)break;Q=qn}}let Yn=ge.getTimezoneOffset();K&&(Yn=yi(K,Yn),ge=function Te(O,Q,U){const K=U?-1:1,ge=O.getTimezoneOffset();return function Oi(O,Q){return(O=new Date(O.getTime())).setMinutes(O.getMinutes()+Q),O}(O,K*(yi(Q,ge)-ge))}(ge,K,!0));let rr="";return ct.forEach(qn=>{const yn=function vi(O){if(di[O])return di[O];let Q;switch(O){case"G":case"GG":case"GGG":Q=Sn(At.Eras,ut.Abbreviated);break;case"GGGG":Q=Sn(At.Eras,ut.Wide);break;case"GGGGG":Q=Sn(At.Eras,ut.Narrow);break;case"y":Q=Bt(sn.FullYear,1,0,!1,!0);break;case"yy":Q=Bt(sn.FullYear,2,0,!0,!0);break;case"yyy":Q=Bt(sn.FullYear,3,0,!1,!0);break;case"yyyy":Q=Bt(sn.FullYear,4,0,!1,!0);break;case"Y":Q=ws(1);break;case"YY":Q=ws(2,!0);break;case"YYY":Q=ws(3);break;case"YYYY":Q=ws(4);break;case"M":case"L":Q=Bt(sn.Month,1,1);break;case"MM":case"LL":Q=Bt(sn.Month,2,1);break;case"MMM":Q=Sn(At.Months,ut.Abbreviated);break;case"MMMM":Q=Sn(At.Months,ut.Wide);break;case"MMMMM":Q=Sn(At.Months,ut.Narrow);break;case"LLL":Q=Sn(At.Months,ut.Abbreviated,ot.Standalone);break;case"LLLL":Q=Sn(At.Months,ut.Wide,ot.Standalone);break;case"LLLLL":Q=Sn(At.Months,ut.Narrow,ot.Standalone);break;case"w":Q=Hi(1);break;case"ww":Q=Hi(2);break;case"W":Q=Hi(1,!0);break;case"d":Q=Bt(sn.Date,1);break;case"dd":Q=Bt(sn.Date,2);break;case"c":case"cc":Q=Bt(sn.Day,1);break;case"ccc":Q=Sn(At.Days,ut.Abbreviated,ot.Standalone);break;case"cccc":Q=Sn(At.Days,ut.Wide,ot.Standalone);break;case"ccccc":Q=Sn(At.Days,ut.Narrow,ot.Standalone);break;case"cccccc":Q=Sn(At.Days,ut.Short,ot.Standalone);break;case"E":case"EE":case"EEE":Q=Sn(At.Days,ut.Abbreviated);break;case"EEEE":Q=Sn(At.Days,ut.Wide);break;case"EEEEE":Q=Sn(At.Days,ut.Narrow);break;case"EEEEEE":Q=Sn(At.Days,ut.Short);break;case"a":case"aa":case"aaa":Q=Sn(At.DayPeriods,ut.Abbreviated);break;case"aaaa":Q=Sn(At.DayPeriods,ut.Wide);break;case"aaaaa":Q=Sn(At.DayPeriods,ut.Narrow);break;case"b":case"bb":case"bbb":Q=Sn(At.DayPeriods,ut.Abbreviated,ot.Standalone,!0);break;case"bbbb":Q=Sn(At.DayPeriods,ut.Wide,ot.Standalone,!0);break;case"bbbbb":Q=Sn(At.DayPeriods,ut.Narrow,ot.Standalone,!0);break;case"B":case"BB":case"BBB":Q=Sn(At.DayPeriods,ut.Abbreviated,ot.Format,!0);break;case"BBBB":Q=Sn(At.DayPeriods,ut.Wide,ot.Format,!0);break;case"BBBBB":Q=Sn(At.DayPeriods,ut.Narrow,ot.Format,!0);break;case"h":Q=Bt(sn.Hours,1,-12);break;case"hh":Q=Bt(sn.Hours,2,-12);break;case"H":Q=Bt(sn.Hours,1);break;case"HH":Q=Bt(sn.Hours,2);break;case"m":Q=Bt(sn.Minutes,1);break;case"mm":Q=Bt(sn.Minutes,2);break;case"s":Q=Bt(sn.Seconds,1);break;case"ss":Q=Bt(sn.Seconds,2);break;case"S":Q=Bt(sn.FractionalSeconds,1);break;case"SS":Q=Bt(sn.FractionalSeconds,2);break;case"SSS":Q=Bt(sn.FractionalSeconds,3);break;case"Z":case"ZZ":case"ZZZ":Q=Ni(Ot.Short);break;case"ZZZZZ":Q=Ni(Ot.Extended);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":Q=Ni(Ot.ShortGMT);break;case"OOOO":case"ZZZZ":case"zzzz":Q=Ni(Ot.Long);break;default:return null}return di[O]=Q,Q}(qn);rr+=yn?yn(ge,U,Yn):"''"===qn?"'":qn.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),rr}function Fr(O,Q,U){const K=new Date(0);return K.setFullYear(O,Q,U),K.setHours(0,0,0),K}function qr(O,Q){const U=function Hn(O){return(0,y.cg1)(O)[y.wAp.LocaleId]}(O);if(Nn[U]=Nn[U]||{},Nn[U][Q])return Nn[U][Q];let K="";switch(Q){case"shortDate":K=be(O,ce.Short);break;case"mediumDate":K=be(O,ce.Medium);break;case"longDate":K=be(O,ce.Long);break;case"fullDate":K=be(O,ce.Full);break;case"shortTime":K=He(O,ce.Short);break;case"mediumTime":K=He(O,ce.Medium);break;case"longTime":K=He(O,ce.Long);break;case"fullTime":K=He(O,ce.Full);break;case"short":const ge=qr(O,"shortTime"),Qe=qr(O,"shortDate");K=Mn(xe(O,ce.Short),[ge,Qe]);break;case"medium":const ct=qr(O,"mediumTime"),an=qr(O,"mediumDate");K=Mn(xe(O,ce.Medium),[ct,an]);break;case"long":const Yn=qr(O,"longTime"),rr=qr(O,"longDate");K=Mn(xe(O,ce.Long),[Yn,rr]);break;case"full":const qn=qr(O,"fullTime"),yn=qr(O,"fullDate");K=Mn(xe(O,ce.Full),[qn,yn])}return K&&(Nn[U][Q]=K),K}function Mn(O,Q){return Q&&(O=O.replace(/\{([^}]+)}/g,function(U,K){return null!=Q&&K in Q?Q[K]:U})),O}function Sr(O,Q,U="-",K,ge){let Qe="";(O<0||ge&&O<=0)&&(ge?O=1-O:(O=-O,Qe=U));let ct=String(O);for(;ct.length<Q;)ct="0"+ct;return K&&(ct=ct.slice(ct.length-Q)),Qe+ct}function Bt(O,Q,U=0,K=!1,ge=!1){return function(Qe,ct){let an=function Gi(O,Q){switch(O){case sn.FullYear:return Q.getFullYear();case sn.Month:return Q.getMonth();case sn.Date:return Q.getDate();case sn.Hours:return Q.getHours();case sn.Minutes:return Q.getMinutes();case sn.Seconds:return Q.getSeconds();case sn.FractionalSeconds:return Q.getMilliseconds();case sn.Day:return Q.getDay();default:throw new Error(`Unknown DateType value "${O}".`)}}(O,Qe);if((U>0||an>-U)&&(an+=U),O===sn.Hours)0===an&&-12===U&&(an=12);else if(O===sn.FractionalSeconds)return function xr(O,Q){return Sr(O,3).substring(0,Q)}(an,Q);const Yn=Le(ct,Zt.MinusSign);return Sr(an,Q,Yn,K,ge)}}function Sn(O,Q,U=ot.Format,K=!1){return function(ge,Qe){return function mn(O,Q,U,K,ge,Qe){switch(U){case At.Months:return or(Q,ge,K)[O.getMonth()];case At.Days:return Ir(Q,ge,K)[O.getDay()];case At.DayPeriods:const ct=O.getHours(),an=O.getMinutes();if(Qe){const rr=function Qn(O){const Q=(0,y.cg1)(O);return on(Q),(Q[y.wAp.ExtraData][2]||[]).map(K=>"string"==typeof K?Se(K):[Se(K[0]),Se(K[1])])}(Q),qn=function Cn(O,Q,U){const K=(0,y.cg1)(O);on(K);const Qe=_e([K[y.wAp.ExtraData][0],K[y.wAp.ExtraData][1]],Q)||[];return _e(Qe,U)||[]}(Q,ge,K),yn=rr.findIndex(Jr=>{if(Array.isArray(Jr)){const[Tr,gi]=Jr,go=ct>=Tr.hours&&an>=Tr.minutes,$o=ct<gi.hours||ct===gi.hours&&an<gi.minutes;if(Tr.hours<gi.hours){if(go&&$o)return!0}else if(go||$o)return!0}else if(Jr.hours===ct&&Jr.minutes===an)return!0;return!1});if(-1!==yn)return qn[yn]}return function bn(O,Q,U){const K=(0,y.cg1)(O),Qe=_e([K[y.wAp.DayPeriodsFormat],K[y.wAp.DayPeriodsStandalone]],Q);return _e(Qe,U)}(Q,ge,K)[ct<12?0:1];case At.Eras:return function Yt(O,Q){return _e((0,y.cg1)(O)[y.wAp.Eras],Q)}(Q,K)[O.getFullYear()<=0?0:1];default:throw new Error(`unexpected translation type ${U}`)}}(ge,Qe,O,Q,U,K)}}function Ni(O){return function(Q,U,K){const ge=-1*K,Qe=Le(U,Zt.MinusSign),ct=ge>0?Math.floor(ge/60):Math.ceil(ge/60);switch(O){case Ot.Short:return(ge>=0?"+":"")+Sr(ct,2,Qe)+Sr(Math.abs(ge%60),2,Qe);case Ot.ShortGMT:return"GMT"+(ge>=0?"+":"")+Sr(ct,1,Qe);case Ot.Long:return"GMT"+(ge>=0?"+":"")+Sr(ct,2,Qe)+":"+Sr(Math.abs(ge%60),2,Qe);case Ot.Extended:return 0===K?"Z":(ge>=0?"+":"")+Sr(ct,2,Qe)+":"+Sr(Math.abs(ge%60),2,Qe);default:throw new Error(`Unknown zone width "${O}"`)}}}const Fa=0,ur=4;function Xr(O){return Fr(O.getFullYear(),O.getMonth(),O.getDate()+(ur-O.getDay()))}function Hi(O,Q=!1){return function(U,K){let ge;if(Q){const Qe=new Date(U.getFullYear(),U.getMonth(),1).getDay()-1,ct=U.getDate();ge=1+Math.floor((ct+Qe)/7)}else{const Qe=Xr(U),ct=function bs(O){const Q=Fr(O,Fa,1).getDay();return Fr(O,0,1+(Q<=ur?ur:ur+7)-Q)}(Qe.getFullYear()),an=Qe.getTime()-ct.getTime();ge=1+Math.round(an/6048e5)}return Sr(ge,O,Le(K,Zt.MinusSign))}}function ws(O,Q=!1){return function(U,K){return Sr(Xr(U).getFullYear(),O,Le(K,Zt.MinusSign),Q)}}const di={};function yi(O,Q){O=O.replace(/:/g,"");const U=Date.parse("Jan 01, 1970 00:00:00 "+O)/6e4;return isNaN(U)?Q:U}function re(O){return O instanceof Date&&!isNaN(O.valueOf())}function Pi(O,Q){Q=encodeURIComponent(Q);for(const U of O.split(";")){const K=U.indexOf("="),[ge,Qe]=-1==K?[U,""]:[U.slice(0,K),U.slice(K+1)];if(ge.trim()===Q)return decodeURIComponent(Qe)}return null}const hs=/\s+/,Ja=[];let Lo=(()=>{class O{constructor(U,K,ge,Qe){this._iterableDiffers=U,this._keyValueDiffers=K,this._ngEl=ge,this._renderer=Qe,this.initialClasses=Ja,this.stateMap=new Map}set klass(U){this.initialClasses=null!=U?U.trim().split(hs):Ja}set ngClass(U){this.rawClass="string"==typeof U?U.trim().split(hs):U}ngDoCheck(){for(const K of this.initialClasses)this._updateState(K,!0);const U=this.rawClass;if(Array.isArray(U)||U instanceof Set)for(const K of U)this._updateState(K,!0);else if(null!=U)for(const K of Object.keys(U))this._updateState(K,!!U[K]);this._applyStateDiff()}_updateState(U,K){const ge=this.stateMap.get(U);void 0!==ge?(ge.enabled!==K&&(ge.changed=!0,ge.enabled=K),ge.touched=!0):this.stateMap.set(U,{enabled:K,changed:!0,touched:!0})}_applyStateDiff(){for(const U of this.stateMap){const K=U[0],ge=U[1];ge.changed?(this._toggleClass(K,ge.enabled),ge.changed=!1):ge.touched||(ge.enabled&&this._toggleClass(K,!1),this.stateMap.delete(K)),ge.touched=!1}}_toggleClass(U,K){(U=U.trim()).length>0&&U.split(hs).forEach(ge=>{K?this._renderer.addClass(this._ngEl.nativeElement,ge):this._renderer.removeClass(this._ngEl.nativeElement,ge)})}static#e=this.\u0275fac=function(K){return new(K||O)(y.Y36(y.ZZ4),y.Y36(y.aQg),y.Y36(y.SBq),y.Y36(y.Qsj))};static#t=this.\u0275dir=y.lG2({type:O,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"},standalone:!0})}return O})();class La{constructor(Q,U,K,ge){this.$implicit=Q,this.ngForOf=U,this.index=K,this.count=ge}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Gs=(()=>{class O{set ngForOf(U){this._ngForOf=U,this._ngForOfDirty=!0}set ngForTrackBy(U){this._trackByFn=U}get ngForTrackBy(){return this._trackByFn}constructor(U,K,ge){this._viewContainer=U,this._template=K,this._differs=ge,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(U){U&&(this._template=U)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const U=this._ngForOf;!this._differ&&U&&(this._differ=this._differs.find(U).create(this.ngForTrackBy))}if(this._differ){const U=this._differ.diff(this._ngForOf);U&&this._applyChanges(U)}}_applyChanges(U){const K=this._viewContainer;U.forEachOperation((ge,Qe,ct)=>{if(null==ge.previousIndex)K.createEmbeddedView(this._template,new La(ge.item,this._ngForOf,-1,-1),null===ct?void 0:ct);else if(null==ct)K.remove(null===Qe?void 0:Qe);else if(null!==Qe){const an=K.get(Qe);K.move(an,ct),es(an,ge)}});for(let ge=0,Qe=K.length;ge<Qe;ge++){const an=K.get(ge).context;an.index=ge,an.count=Qe,an.ngForOf=this._ngForOf}U.forEachIdentityChange(ge=>{es(K.get(ge.currentIndex),ge)})}static ngTemplateContextGuard(U,K){return!0}static#e=this.\u0275fac=function(K){return new(K||O)(y.Y36(y.s_b),y.Y36(y.Rgc),y.Y36(y.ZZ4))};static#t=this.\u0275dir=y.lG2({type:O,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0})}return O})();function es(O,Q){O.context.$implicit=Q.item}let ea=(()=>{class O{constructor(U,K){this._viewContainer=U,this._context=new Xa,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=K}set ngIf(U){this._context.$implicit=this._context.ngIf=U,this._updateView()}set ngIfThen(U){Ii("ngIfThen",U),this._thenTemplateRef=U,this._thenViewRef=null,this._updateView()}set ngIfElse(U){Ii("ngIfElse",U),this._elseTemplateRef=U,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(U,K){return!0}static#e=this.\u0275fac=function(K){return new(K||O)(y.Y36(y.s_b),y.Y36(y.Rgc))};static#t=this.\u0275dir=y.lG2({type:O,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0})}return O})();class Xa{constructor(){this.$implicit=null,this.ngIf=null}}function Ii(O,Q){if(Q&&!Q.createEmbeddedView)throw new Error(`${O} must be a TemplateRef, but received '${(0,y.AaK)(Q)}'.`)}let hi=(()=>{class O{constructor(U){this._viewContainerRef=U,this._viewRef=null,this.ngTemplateOutletContext=null,this.ngTemplateOutlet=null,this.ngTemplateOutletInjector=null}ngOnChanges(U){if(U.ngTemplateOutlet||U.ngTemplateOutletInjector){const K=this._viewContainerRef;if(this._viewRef&&K.remove(K.indexOf(this._viewRef)),this.ngTemplateOutlet){const{ngTemplateOutlet:ge,ngTemplateOutletContext:Qe,ngTemplateOutletInjector:ct}=this;this._viewRef=K.createEmbeddedView(ge,Qe,ct?{injector:ct}:void 0)}else this._viewRef=null}else this._viewRef&&U.ngTemplateOutletContext&&this.ngTemplateOutletContext&&(this._viewRef.context=this.ngTemplateOutletContext)}static#e=this.\u0275fac=function(K){return new(K||O)(y.Y36(y.s_b))};static#t=this.\u0275dir=y.lG2({type:O,selectors:[["","ngTemplateOutlet",""]],inputs:{ngTemplateOutletContext:"ngTemplateOutletContext",ngTemplateOutlet:"ngTemplateOutlet",ngTemplateOutletInjector:"ngTemplateOutletInjector"},standalone:!0,features:[y.TTD]})}return O})(),Zr=(()=>{class O{static#e=this.\u0275fac=function(K){return new(K||O)};static#t=this.\u0275mod=y.oAB({type:O});static#n=this.\u0275inj=y.cJS({})}return O})();const Wn="browser",fs="server";function uo(O){return O===fs}let co=(()=>{class O{static#e=this.\u0275prov=(0,y.Yz7)({token:O,providedIn:"root",factory:()=>new Mi((0,y.LFG)(Ee),window)})}return O})();class Mi{constructor(Q,U){this.document=Q,this.window=U,this.offset=()=>[0,0]}setOffset(Q){this.offset=Array.isArray(Q)?()=>Q:Q}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(Q){this.supportsScrolling()&&this.window.scrollTo(Q[0],Q[1])}scrollToAnchor(Q){if(!this.supportsScrolling())return;const U=function qi(O,Q){const U=O.getElementById(Q)||O.getElementsByName(Q)[0];if(U)return U;if("function"==typeof O.createTreeWalker&&O.body&&"function"==typeof O.body.attachShadow){const K=O.createTreeWalker(O.body,NodeFilter.SHOW_ELEMENT);let ge=K.currentNode;for(;ge;){const Qe=ge.shadowRoot;if(Qe){const ct=Qe.getElementById(Q)||Qe.querySelector(`[name="${Q}"]`);if(ct)return ct}ge=K.nextNode()}}return null}(this.document,Q);U&&(this.scrollToElement(U),U.focus())}setHistoryScrollRestoration(Q){this.supportsScrolling()&&(this.window.history.scrollRestoration=Q)}scrollToElement(Q){const U=Q.getBoundingClientRect(),K=U.left+this.window.pageXOffset,ge=U.top+this.window.pageYOffset,Qe=this.offset();this.window.scrollTo(K-Qe[0],ge-Qe[1])}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}class Hs{}},5879:(qt,Ze,H)=>{H.d(Ze,{$8M:()=>el,$WT:()=>ri,$Z:()=>Oh,AFp:()=>sp,ALo:()=>eT,AaK:()=>Pe,AsE:()=>Z_,BQk:()=>sm,CHM:()=>Cd,CRH:()=>mT,EJc:()=>MD,EpF:()=>H0,F$t:()=>my,F4k:()=>py,FYo:()=>pp,FiY:()=>Wa,Gf:()=>pT,GfV:()=>_g,Gpc:()=>_t,HDt:()=>BT,HOy:()=>pm,Hsn:()=>_y,Ikx:()=>aI,JOm:()=>qa,KtG:()=>jn,LFG:()=>Kt,LMc:()=>WC,LSH:()=>j,Lbi:()=>ap,Lck:()=>Ew,MAs:()=>cy,MGl:()=>om,MMx:()=>VE,NdJ:()=>L_,Ojb:()=>ug,OlP:()=>Bt,Oqu:()=>Y_,P3R:()=>Ht,PXZ:()=>uC,Q6J:()=>tm,QGY:()=>F_,Qsj:()=>gp,R0b:()=>Fo,RDi:()=>rf,Rgc:()=>ov,SBq:()=>$l,SDv:()=>PE,Sil:()=>FD,Suo:()=>gT,TTD:()=>yn,TgZ:()=>nm,Tol:()=>Bf,Udp:()=>ka,VKq:()=>WE,VuI:()=>$C,W1O:()=>IT,WLB:()=>qE,X6Q:()=>mC,XFs:()=>Ot,Xpm:()=>ya,Xq5:()=>C_,Xts:()=>tr,Y36:()=>qd,YKP:()=>FE,YNc:()=>U0,Yjl:()=>Ds,Yz7:()=>on,Z0I:()=>_e,ZZ4:()=>jI,_Bn:()=>kE,_UZ:()=>M_,_c5:()=>PC,_uU:()=>My,aQg:()=>GI,c2e:()=>VT,cJS:()=>Cn,cg1:()=>uI,dDg:()=>iC,dqk:()=>Mn,eFA:()=>YT,eJc:()=>DI,ekj:()=>lm,eoX:()=>zT,evT:()=>bg,f3M:()=>Qt,g9A:()=>gf,gHi:()=>yg,h0i:()=>zp,hGG:()=>MC,hij:()=>fm,iGM:()=>fT,ifc:()=>en,ip1:()=>LT,jDz:()=>BE,kEZ:()=>KE,kL8:()=>oE,ktI:()=>vp,lG2:()=>Ia,lnq:()=>Q_,lqb:()=>Bu,lri:()=>HT,n5z:()=>lu,oAB:()=>xs,oxw:()=>K0,q4F:()=>vg,qFp:()=>qC,qLn:()=>Wl,qOj:()=>Xi,qZA:()=>rm,rWj:()=>$T,rg0:()=>Qe,s9C:()=>vy,sBO:()=>_C,s_b:()=>Hy,soG:()=>zy,tb:()=>kI,tp0:()=>ic,uIk:()=>A_,vHH:()=>Me,vpe:()=>Bc,wAp:()=>mm,xi3:()=>tT,xp6:()=>Ng,ynx:()=>im,z2F:()=>Im,zSh:()=>Ma,zW0:()=>Qv,zs3:()=>gl});var y=H(8645),fe=H(7394),ae=H(5592),Ce=H(3019),De=H(5619),Ee=H(2096),Oe=H(3020),I=H(4664),$e=H(3997);function pe(t){for(let r in t)if(t[r]===pe)return r;throw Error("Could not find renamed property on target object.")}function me(t,r){for(const s in r)r.hasOwnProperty(s)&&!t.hasOwnProperty(s)&&(t[s]=r[s])}function Pe(t){if("string"==typeof t)return t;if(Array.isArray(t))return"["+t.map(Pe).join(", ")+"]";if(null==t)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;const r=t.toString();if(null==r)return""+r;const s=r.indexOf("\n");return-1===s?r:r.substring(0,s)}function dt(t,r){return null==t||""===t?null===r?"":r:null==r||""===r?t:t+" "+r}const it=pe({__forward_ref__:pe});function _t(t){return t.__forward_ref__=_t,t.toString=function(){return Pe(this())},t}function ft(t){return yt(t)?t():t}function yt(t){return"function"==typeof t&&t.hasOwnProperty(it)&&t.__forward_ref__===_t}function It(t){return t&&!!t.\u0275providers}const Ve="https://g.co/ng/security#xss";class Me extends Error{constructor(r,s){super(function qe(t,r){return`NG0${Math.abs(t)}${r?": "+r:""}`}(r,s)),this.code=r}}function Ne(t){return"string"==typeof t?t:null==t?"":String(t)}function Zt(t,r){throw new Me(-201,!1)}function Ct(t,r,s,a){throw new Error(`ASSERTION ERROR: ${t}`+(null==a?"":` [Expected=> ${s} ${a} ${r} <=Actual]`))}function on(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function Cn(t){return{providers:t.providers||[],imports:t.imports||[]}}function Pn(t){return Se(t,pt)||Se(t,Nn)}function _e(t){return null!==Pn(t)}function Se(t,r){return t.hasOwnProperty(r)?t[r]:null}function at(t){return t&&(t.hasOwnProperty(Mt)||t.hasOwnProperty(kn))?t[Mt]:null}const pt=pe({\u0275prov:pe}),Mt=pe({\u0275inj:pe}),Nn=pe({ngInjectableDef:pe}),kn=pe({ngInjectorDef:pe});var Ot=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}(Ot||{});let sn;function At(){return sn}function $n(t){const r=sn;return sn=t,r}function Fr(t,r,s){const a=Pn(t);return a&&"root"==a.providedIn?void 0===a.value?a.value=a.factory():a.value:s&Ot.Optional?null:void 0!==r?r:void Zt(Pe(t))}const Mn=globalThis;class Bt{constructor(r,s){this._desc=r,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof s?this.__NG_ELEMENT_ID__=s:void 0!==s&&(this.\u0275prov=on({token:this,providedIn:s.providedIn||"root",factory:s.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}const vi={},yi="__NG_DI_FLAG__",Oi="ngTempTokenPath",se=/\n/gm,re="__source";let oe;function lt(t){const r=oe;return oe=t,r}function Rt(t,r=Ot.Default){if(void 0===oe)throw new Me(-203,!1);return null===oe?Fr(t,void 0,r):oe.get(t,r&Ot.Optional?null:void 0,r)}function Kt(t,r=Ot.Default){return(At()||Rt)(ft(t),r)}function Qt(t,r=Ot.Default){return Kt(t,un(r))}function un(t){return typeof t>"u"||"number"==typeof t?t:0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function wr(t){const r=[];for(let s=0;s<t.length;s++){const a=ft(t[s]);if(Array.isArray(a)){if(0===a.length)throw new Me(900,!1);let l,g=Ot.Default;for(let E=0;E<a.length;E++){const R=a[E],F=js(R);"number"==typeof F?-1===F?l=R.token:g|=F:l=R}r.push(Kt(l,g))}else r.push(Kt(a))}return r}function Kr(t,r){return t[yi]=r,t.prototype[yi]=r,t}function js(t){return t[yi]}function je(t){return{toString:t}.toString()}var mt=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}(mt||{}),en=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}(en||{});const _n={},jt=[],Vn=pe({\u0275cmp:pe}),Yr=pe({\u0275dir:pe}),Dr=pe({\u0275pipe:pe}),qs=pe({\u0275mod:pe}),Pi=pe({\u0275fac:pe}),hs=pe({__NG_ELEMENT_ID__:pe}),Ja=pe({__NG_ENV_ID__:pe});function Lo(t,r,s){let a=t.length;for(;;){const l=t.indexOf(r,s);if(-1===l)return l;if(0===l||t.charCodeAt(l-1)<=32){const g=r.length;if(l+g===a||t.charCodeAt(l+g)<=32)return l}s=l+1}}function ma(t,r,s){let a=0;for(;a<s.length;){const l=s[a];if("number"==typeof l){if(0!==l)break;a++;const g=s[a++],E=s[a++],R=s[a++];t.setAttribute(r,E,R,g)}else{const g=l,E=s[++a];La(g)?t.setProperty(r,g,E):t.setAttribute(r,g,E),a++}}return a}function Dn(t){return 3===t||4===t||6===t}function La(t){return 64===t.charCodeAt(0)}function Gs(t,r){if(null!==r&&0!==r.length)if(null===t||0===t.length)t=r.slice();else{let s=-1;for(let a=0;a<r.length;a++){const l=r[a];"number"==typeof l?s=l:0===s||es(t,s,l,null,-1===s||2===s?r[++a]:null)}}return t}function es(t,r,s,a,l){let g=0,E=t.length;if(-1===r)E=-1;else for(;g<t.length;){const R=t[g++];if("number"==typeof R){if(R===r){E=-1;break}if(R>r){E=g-1;break}}}for(;g<t.length;){const R=t[g];if("number"==typeof R)break;if(R===s){if(null===a)return void(null!==l&&(t[g+1]=l));if(a===t[g+1])return void(t[g+2]=l)}g++,null!==a&&g++,null!==l&&g++}-1!==E&&(t.splice(E,0,r),g=E+1),t.splice(g++,0,s),null!==a&&t.splice(g++,0,a),null!==l&&t.splice(g++,0,l)}const $i="ng-template";function ea(t,r,s){let a=0,l=!0;for(;a<t.length;){let g=t[a++];if("string"==typeof g&&l){const E=t[a++];if(s&&"class"===g&&-1!==Lo(E.toLowerCase(),r,0))return!0}else{if(1===g){for(;a<t.length&&"string"==typeof(g=t[a++]);)if(g.toLowerCase()===r)return!0;return!1}"number"==typeof g&&(l=!1)}}return!1}function Xa(t){return 4===t.type&&t.value!==$i}function Ii(t,r,s){return r===(4!==t.type||s?t.value:$i)}function zi(t,r,s){let a=4;const l=t.attrs||[],g=function Vi(t){for(let r=0;r<t.length;r++)if(Dn(t[r]))return r;return t.length}(l);let E=!1;for(let R=0;R<r.length;R++){const F=r[R];if("number"!=typeof F){if(!E)if(4&a){if(a=2|1&a,""!==F&&!Ii(t,F,s)||""===F&&1===r.length){if(cr(a))return!1;E=!0}}else{const $=8&a?F:r[++R];if(8&a&&null!==t.attrs){if(!ea(t.attrs,$,s)){if(cr(a))return!1;E=!0}continue}const he=er(8&a?"class":F,l,Xa(t),s);if(-1===he){if(cr(a))return!1;E=!0;continue}if(""!==$){let ke;ke=he>g?"":l[he+1].toLowerCase();const We=8&a?ke:null;if(We&&-1!==Lo(We,$,0)||2&a&&$!==ke){if(cr(a))return!1;E=!0}}}}else{if(!E&&!cr(a)&&!cr(F))return!1;if(E&&cr(F))continue;E=!1,a=F|1&a}}return cr(a)||E}function cr(t){return 0==(1&t)}function er(t,r,s,a){if(null===r)return-1;let l=0;if(a||!s){let g=!1;for(;l<r.length;){const E=r[l];if(E===t)return l;if(3===E||6===E)g=!0;else{if(1===E||2===E){let R=r[++l];for(;"string"==typeof R;)R=r[++l];continue}if(4===E)break;if(0===E){l+=4;continue}}l+=g?1:2}return-1}return function Bi(t,r){let s=t.indexOf(4);if(s>-1)for(s++;s<t.length;){const a=t[s];if("number"==typeof a)return-1;if(a===r)return s;s++}return-1}(r,t)}function ts(t,r,s=!1){for(let a=0;a<r.length;a++)if(zi(t,r[a],s))return!0;return!1}function _a(t,r){e:for(let s=0;s<r.length;s++){const a=r[s];if(t.length===a.length){for(let l=0;l<t.length;l++)if(t[l]!==a[l])continue e;return!0}}return!1}function hi(t,r){return t?":not("+r.trim()+")":r}function va(t){let r=t[0],s=1,a=2,l="",g=!1;for(;s<t.length;){let E=t[s];if("string"==typeof E)if(2&a){const R=t[++s];l+="["+E+(R.length>0?'="'+R+'"':"")+"]"}else 8&a?l+="."+E:4&a&&(l+=" "+E);else""!==l&&!cr(E)&&(r+=hi(g,l),l=""),a=E,g=g||!cr(a);s++}return""!==l&&(r+=hi(g,l)),r}function ya(t){return je(()=>{const r=ks(t),s={...r,decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===mt.OnPush,directiveDefs:null,pipeDefs:null,dependencies:r.standalone&&t.dependencies||null,getStandaloneInjector:null,signals:t.signals??!1,data:t.data||{},encapsulation:t.encapsulation||en.Emulated,styles:t.styles||jt,_:null,schemas:t.schemas||null,tView:null,id:""};Cs(s);const a=t.dependencies;return s.directiveDefs=Gr(a,!1),s.pipeDefs=Gr(a,!0),s.id=function As(t){let r=0;const s=[t.selectors,t.ngContentSelectors,t.hostVars,t.hostAttrs,t.consts,t.vars,t.decls,t.encapsulation,t.standalone,t.signals,t.exportAs,JSON.stringify(t.inputs),JSON.stringify(t.outputs),Object.getOwnPropertyNames(t.type.prototype),!!t.contentQueries,!!t.viewQuery].join("|");for(const l of s)r=Math.imul(31,r)+l.charCodeAt(0)<<0;return r+=2147483648,"c"+r}(s),s})}function Vo(t){return Bn(t)||fi(t)}function Ba(t){return null!==t}function xs(t){return je(()=>({type:t.type,bootstrap:t.bootstrap||jt,declarations:t.declarations||jt,imports:t.imports||jt,exports:t.exports||jt,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function ao(t,r){if(null==t)return _n;const s={};for(const a in t)if(t.hasOwnProperty(a)){let l=t[a],g=l;Array.isArray(l)&&(g=l[1],l=l[0]),s[l]=a,r&&(r[l]=g)}return s}function Ia(t){return je(()=>{const r=ks(t);return Cs(r),r})}function Ds(t){return{type:t.type,name:t.name,factory:null,pure:!1!==t.pure,standalone:!0===t.standalone,onDestroy:t.type.prototype.ngOnDestroy||null}}function Bn(t){return t[Vn]||null}function fi(t){return t[Yr]||null}function nr(t){return t[Dr]||null}function ri(t){const r=Bn(t)||fi(t)||nr(t);return null!==r&&r.standalone}function Er(t,r){const s=t[qs]||null;if(!s&&!0===r)throw new Error(`Type ${Pe(t)} does not have '\u0275mod' property.`);return s}function ks(t){const r={};return{type:t.type,providersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:r,inputTransforms:null,inputConfig:t.inputs||_n,exportAs:t.exportAs||null,standalone:!0===t.standalone,signals:!0===t.signals,selectors:t.selectors||jt,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:ao(t.inputs,r),outputs:ao(t.outputs)}}function Cs(t){t.features?.forEach(r=>r(t))}function Gr(t,r){if(!t)return null;const s=r?nr:Vo;return()=>("function"==typeof t?t():t).map(a=>s(a)).filter(Ba)}const Cr=0,Lt=1,fn=2,zn=3,ci=4,ns=5,vr=6,Zr=7,Wn=8,fs=9,Qr=10,vn=11,ei=12,uo=13,ps=14,ii=15,Un=16,co=17,Mi=18,qi=19,gs=20,Hs=21,ms=22,pi=23,ta=24,Ln=25,rs=1,_s=2,vs=7,Ys=9,Hr=11;function lr(t){return Array.isArray(t)&&"object"==typeof t[rs]}function Ui(t){return Array.isArray(t)&&!0===t[rs]}function Fs(t){return 0!=(4&t.flags)}function Ls(t){return t.componentOffset>-1}function Lr(t){return 1==(1&t.flags)}function Ss(t){return!!t.template}function nu(t){return 0!=(512&t[fn])}function ji(t,r){return t.hasOwnProperty(Pi)?t[Pi]:null}let bi=null,Rs=!1;function Ki(t){const r=bi;return bi=t,r}const ia={version:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{}};function So(t){if(!Zs(t)||t.dirty){if(!t.producerMustRecompute(t)&&!ja(t))return void(t.dirty=!1);t.producerRecomputeValue(t),t.dirty=!1}}function vc(t){t.dirty=!0,function Ua(t){if(void 0===t.liveConsumerNode)return;const r=Rs;Rs=!0;try{for(const s of t.liveConsumerNode)s.dirty||vc(s)}finally{Rs=r}}(t),t.consumerMarkedDirty?.(t)}function Ro(t){return t&&(t.nextProducerIndex=0),Ki(t)}function bu(t,r){if(Ki(r),t&&void 0!==t.producerNode&&void 0!==t.producerIndexOfThis&&void 0!==t.producerLastReadVersion){if(Zs(t))for(let s=t.nextProducerIndex;s<t.producerNode.length;s++)ru(t.producerNode[s],t.producerIndexOfThis[s]);for(;t.producerNode.length>t.nextProducerIndex;)t.producerNode.pop(),t.producerLastReadVersion.pop(),t.producerIndexOfThis.pop()}}function ja(t){iu(t);for(let r=0;r<t.producerNode.length;r++){const s=t.producerNode[r],a=t.producerLastReadVersion[r];if(a!==s.version||(So(s),a!==s.version))return!0}return!1}function wu(t){if(iu(t),Zs(t))for(let r=0;r<t.producerNode.length;r++)ru(t.producerNode[r],t.producerIndexOfThis[r]);t.producerNode.length=t.producerLastReadVersion.length=t.producerIndexOfThis.length=0,t.liveConsumerNode&&(t.liveConsumerNode.length=t.liveConsumerIndexOfThis.length=0)}function ru(t,r){if(function zc(t){t.liveConsumerNode??=[],t.liveConsumerIndexOfThis??=[]}(t),iu(t),1===t.liveConsumerNode.length)for(let a=0;a<t.producerNode.length;a++)ru(t.producerNode[a],t.producerIndexOfThis[a]);const s=t.liveConsumerNode.length-1;if(t.liveConsumerNode[r]=t.liveConsumerNode[s],t.liveConsumerIndexOfThis[r]=t.liveConsumerIndexOfThis[s],t.liveConsumerNode.length--,t.liveConsumerIndexOfThis.length--,r<t.liveConsumerNode.length){const a=t.liveConsumerIndexOfThis[r],l=t.liveConsumerNode[r];iu(l),l.producerIndexOfThis[a]=r}}function Zs(t){return t.consumerIsAlwaysLive||(t?.liveConsumerNode?.length??0)>0}function iu(t){t.producerNode??=[],t.producerIndexOfThis??=[],t.producerLastReadVersion??=[]}let Qs=null;function Qe(t){const r=Ki(null);try{return t()}finally{Ki(r)}}const an=()=>{},Yn=(()=>({...ia,consumerIsAlwaysLive:!0,consumerAllowSignalWrites:!1,consumerMarkedDirty:t=>{t.schedule(t.ref)},hasRun:!1,cleanupFn:an}))();class qn{constructor(r,s,a){this.previousValue=r,this.currentValue=s,this.firstChange=a}isFirstChange(){return this.firstChange}}function yn(){return Jr}function Jr(t){return t.type.prototype.ngOnChanges&&(t.setInput=gi),Tr}function Tr(){const t=$o(this),r=t?.current;if(r){const s=t.previous;if(s===_n)t.previous=r;else for(let a in r)s[a]=r[a];t.current=null,this.ngOnChanges(r)}}function gi(t,r,s,a){const l=this.declaredInputs[s],g=$o(t)||function No(t,r){return t[go]=r}(t,{previous:_n,current:null}),E=g.current||(g.current={}),R=g.previous,F=R[l];E[l]=new qn(F&&F.currentValue,r,R===_n),t[a]=r}yn.ngInherit=!0;const go="__ngSimpleChanges__";function $o(t){return t[go]||null}const wi=function(t,r,s){};function $r(t){for(;Array.isArray(t);)t=t[Cr];return t}function $u(t,r){return $r(r[t])}function ys(t,r){return $r(r[t.index])}function zo(t,r){return t.data[r]}function Is(t,r){return t[r]}function Vr(t,r){const s=r[t];return lr(s)?s:s[Cr]}function $a(t,r){return null==r?null:t[r]}function Et(t){t[co]=0}function mi(t){1024&t[fn]||(t[fn]|=1024,sa(t,1))}function _o(t){1024&t[fn]&&(t[fn]&=-1025,sa(t,-1))}function sa(t,r){let s=t[zn];if(null===s)return;s[ns]+=r;let a=s;for(s=s[zn];null!==s&&(1===r&&1===a[ns]||-1===r&&0===a[ns]);)s[ns]+=r,a=s,s=s[zn]}function tn(t,r){if(256==(256&t[fn]))throw new Me(911,!1);null===t[Hs]&&(t[Hs]=[]),t[Hs].push(r)}const Fn={lFrame:de(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function Dd(){return Fn.bindingsEnabled}function Cu(){return null!==Fn.skipHydrationRootTNode}function bt(){return Fn.lFrame.lView}function dr(){return Fn.lFrame.tView}function Cd(t){return Fn.lFrame.contextLView=t,t[Wn]}function jn(t){return Fn.lFrame.contextLView=null,t}function ki(){let t=bl();for(;null!==t&&64===t.type;)t=t.parent;return t}function bl(){return Fn.lFrame.currentTNode}function Rr(){const t=Fn.lFrame,r=t.currentTNode;return t.isParent?r:r.parent}function rn(t,r){const s=Fn.lFrame;s.currentTNode=t,s.isParent=r}function Xs(){return Fn.lFrame.isParent}function Xn(){Fn.lFrame.isParent=!1}function Di(){const t=Fn.lFrame;let r=t.bindingRootIndex;return-1===r&&(r=t.bindingRootIndex=t.tView.bindingStartIndex),r}function Aa(){return Fn.lFrame.bindingIndex}function Au(){return Fn.lFrame.bindingIndex++}function eo(t){const r=Fn.lFrame,s=r.bindingIndex;return r.bindingIndex=r.bindingIndex+t,s}function Kc(t){Fn.lFrame.inI18n=t}function zu(t,r){const s=Fn.lFrame;s.bindingIndex=s.bindingRootIndex=t,to(r)}function to(t){Fn.lFrame.currentDirectiveIndex=t}function S(){return Fn.lFrame.currentQueryIndex}function x(t){Fn.lFrame.currentQueryIndex=t}function A(t){const r=t[Lt];return 2===r.type?r.declTNode:1===r.type?t[vr]:null}function L(t,r,s){if(s&Ot.SkipSelf){let l=r,g=t;for(;!(l=l.parent,null!==l||s&Ot.Host||(l=A(g),null===l||(g=g[ps],10&l.type))););if(null===l)return!1;r=l,t=g}const a=Fn.lFrame=J();return a.currentTNode=r,a.lView=t,!0}function k(t){const r=J(),s=t[Lt];Fn.lFrame=r,r.currentTNode=s.firstChild,r.lView=t,r.tView=s,r.contextLView=t,r.bindingIndex=s.bindingStartIndex,r.inI18n=!1}function J(){const t=Fn.lFrame,r=null===t?null:t.child;return null===r?de(t):r}function de(t){const r={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return null!==t&&(t.child=r),r}function Je(){const t=Fn.lFrame;return Fn.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}const Ke=Je;function Ut(){const t=Je();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function An(){return Fn.lFrame.selectedIndex}function Bs(t){Fn.lFrame.selectedIndex=t}function ti(){const t=Fn.lFrame;return zo(t.tView,t.selectedIndex)}let Nr=!0;function Sd(){return Nr}function Wo(t){Nr=t}function oa(t,r){for(let s=r.directiveStart,a=r.directiveEnd;s<a;s++){const g=t.data[s].type.prototype,{ngAfterContentInit:E,ngAfterContentChecked:R,ngAfterViewInit:F,ngAfterViewChecked:$,ngOnDestroy:te}=g;E&&(t.contentHooks??=[]).push(-s,E),R&&((t.contentHooks??=[]).push(s,R),(t.contentCheckHooks??=[]).push(s,R)),F&&(t.viewHooks??=[]).push(-s,F),$&&((t.viewHooks??=[]).push(s,$),(t.viewCheckHooks??=[]).push(s,$)),null!=te&&(t.destroyHooks??=[]).push(s,te)}}function qu(t,r,s){vo(t,r,3,s)}function uu(t,r,s,a){(3&t[fn])===s&&vo(t,r,s,a)}function Su(t,r){let s=t[fn];(3&s)===r&&(s&=8191,s+=1,t[fn]=s)}function vo(t,r,s,a){const g=a??-1,E=r.length-1;let R=0;for(let F=void 0!==a?65535&t[co]:0;F<E;F++)if("number"==typeof r[F+1]){if(R=r[F],null!=a&&R>=a)break}else r[F]<0&&(t[co]+=65536),(R<g||-1==g)&&(Xl(t,s,r,F),t[co]=(4294901760&t[co])+F+2),F++}function Ku(t,r){wi(4,t,r);const s=Ki(null);try{r.call(t)}finally{Ki(s),wi(5,t,r)}}function Xl(t,r,s,a){const l=s[a]<0,g=s[a+1],R=t[l?-s[a]:s[a]];l?t[fn]>>13<t[co]>>16&&(3&t[fn])===r&&(t[fn]+=8192,Ku(R,g)):Ku(R,g)}const Ec=-1;class Tc{constructor(r,s,a){this.factory=r,this.resolving=!1,this.canSeeViewProviders=s,this.injectImpl=a}}function Yu(t){return t!==Ec}function no(t){return 32767&t}function qo(t,r){let s=function td(t){return t>>16}(t),a=r;for(;s>0;)a=a[ps],s--;return a}let Jc=!0;function nd(t){const r=Jc;return Jc=t,r}const Qi=255,Ru=5;let Nu=0;const Po={};function aa(t,r){const s=oi(t,r);if(-1!==s)return s;const a=r[Lt];a.firstCreatePass&&(t.injectorIndex=r.length,zs(a.data,t),zs(r,null),zs(a.blueprint,null));const l=Ou(t,r),g=t.injectorIndex;if(Yu(l)){const E=no(l),R=qo(l,r),F=R[Lt].data;for(let $=0;$<8;$++)r[g+$]=R[E+$]|F[E+$]}return r[g+8]=l,g}function zs(t,r){t.push(0,0,0,0,0,0,0,0,r)}function oi(t,r){return-1===t.injectorIndex||t.parent&&t.parent.injectorIndex===t.injectorIndex||null===r[t.injectorIndex+8]?-1:t.injectorIndex}function Ou(t,r){if(t.parent&&-1!==t.parent.injectorIndex)return t.parent.injectorIndex;let s=0,a=null,l=r;for(;null!==l;){if(a=hu(l),null===a)return Ec;if(s++,l=l[ps],-1!==a.injectorIndex)return a.injectorIndex|s<<16}return Ec}function wc(t,r,s){!function Br(t,r,s){let a;"string"==typeof s?a=s.charCodeAt(0)||0:s.hasOwnProperty(hs)&&(a=s[hs]),null==a&&(a=s[hs]=Nu++);const l=a&Qi;r.data[t+(l>>Ru)]|=1<<l}(t,r,s)}function Dc(t,r,s){if(s&Ot.Optional||void 0!==t)return t;Zt()}function ah(t,r,s,a){if(s&Ot.Optional&&void 0===a&&(a=null),!(s&(Ot.Self|Ot.Host))){const l=t[fs],g=$n(void 0);try{return l?l.get(r,a,s&Ot.Optional):Fr(r,a,s&Ot.Optional)}finally{$n(g)}}return Dc(a,0,s)}function as(t,r,s,a=Ot.Default,l){if(null!==t){if(2048&r[fn]&&!(a&Ot.Self)){const E=function du(t,r,s,a,l){let g=t,E=r;for(;null!==g&&null!==E&&2048&E[fn]&&!(512&E[fn]);){const R=Zu(g,E,s,a|Ot.Self,Po);if(R!==Po)return R;let F=g.parent;if(!F){const $=E[gs];if($){const te=$.get(s,Po,a);if(te!==Po)return te}F=hu(E),E=E[ps]}g=F}return l}(t,r,s,a,Po);if(E!==Po)return E}const g=Zu(t,r,s,a,Po);if(g!==Po)return g}return ah(r,s,a,l)}function Zu(t,r,s,a,l){const g=function Pu(t){if("string"==typeof t)return t.charCodeAt(0)||0;const r=t.hasOwnProperty(hs)?t[hs]:void 0;return"number"==typeof r?r>=0?r&Qi:Cc:r}(s);if("function"==typeof g){if(!L(r,t,a))return a&Ot.Host?Dc(l,0,a):ah(r,s,a,l);try{let E;if(E=g(a),null!=E||a&Ot.Optional)return E;Zt()}finally{Ke()}}else if("number"==typeof g){let E=null,R=oi(t,r),F=Ec,$=a&Ot.Host?r[ii][vr]:null;for((-1===R||a&Ot.SkipSelf)&&(F=-1===R?Ou(t,r):r[R+8],F!==Ec&&Yo(a,!1)?(E=r[Lt],R=no(F),r=qo(F,r)):R=-1);-1!==R;){const te=r[Lt];if(Qu(g,R,te.data)){const he=Ci(R,r,s,E,a,$);if(he!==Po)return he}F=r[R+8],F!==Ec&&Yo(a,r[Lt].data[R+8]===$)&&Qu(g,R,r)?(E=te,R=no(F),r=qo(F,r)):R=-1}}return l}function Ci(t,r,s,a,l,g){const E=r[Lt],R=E.data[t+8],te=Or(R,E,s,null==a?Ls(R)&&Jc:a!=E&&0!=(3&R.type),l&Ot.Host&&g===R);return null!==te?Es(r,E,te,R):Po}function Or(t,r,s,a,l){const g=t.providerIndexes,E=r.data,R=1048575&g,F=t.directiveStart,te=g>>20,ke=l?R+te:t.directiveEnd;for(let We=a?R:R+te;We<ke;We++){const gt=E[We];if(We<F&&s===gt||We>=F&&gt.type===s)return We}if(l){const We=E[F];if(We&&Ss(We)&&We.type===s)return F}return null}function Es(t,r,s,a){let l=t[s];const g=r.data;if(function bc(t){return t instanceof Tc}(l)){const E=l;E.resolving&&function ot(t,r){const s=r?`. Dependency path: ${r.join(" > ")} > ${t}`:"";throw new Me(-200,`Circular dependency in DI detected for ${t}${s}`)}(function ze(t){return"function"==typeof t?t.name||t.toString():"object"==typeof t&&null!=t&&"function"==typeof t.type?t.type.name||t.type.toString():Ne(t)}(g[s]));const R=nd(E.canSeeViewProviders);E.resolving=!0;const $=E.injectImpl?$n(E.injectImpl):null;L(t,a,Ot.Default);try{l=t[s]=E.factory(void 0,g,t,a),r.firstCreatePass&&s>=a.directiveStart&&function $s(t,r,s){const{ngOnChanges:a,ngOnInit:l,ngDoCheck:g}=r.type.prototype;if(a){const E=Jr(r);(s.preOrderHooks??=[]).push(t,E),(s.preOrderCheckHooks??=[]).push(t,E)}l&&(s.preOrderHooks??=[]).push(0-t,l),g&&((s.preOrderHooks??=[]).push(t,g),(s.preOrderCheckHooks??=[]).push(t,g))}(s,g[s],r)}finally{null!==$&&$n($),nd(R),E.resolving=!1,Ke()}}return l}function Qu(t,r,s){return!!(s[r+(t>>Ru)]&1<<t)}function Yo(t,r){return!(t&Ot.Self||t&Ot.Host&&r)}class Fi{constructor(r,s){this._tNode=r,this._lView=s}get(r,s,a){return as(this._tNode,this._lView,r,un(a),s)}}function Cc(){return new Fi(ki(),bt())}function lu(t){return je(()=>{const r=t.prototype.constructor,s=r[Pi]||Zo(r),a=Object.prototype;let l=Object.getPrototypeOf(t.prototype).constructor;for(;l&&l!==a;){const g=l[Pi]||Zo(l);if(g&&g!==s)return g;l=Object.getPrototypeOf(l)}return g=>new g})}function Zo(t){return yt(t)?()=>{const r=Zo(ft(t));return r&&r()}:ji(t)}function hu(t){const r=t[Lt],s=r.type;return 2===s?r.declTNode:1===s?t[vr]:null}function el(t){return function Ko(t,r){if("class"===r)return t.classes;if("style"===r)return t.styles;const s=t.attrs;if(s){const a=s.length;let l=0;for(;l<a;){const g=s[l];if(Dn(g))break;if(0===g)l+=2;else if("number"==typeof g)for(l++;l<a&&"string"==typeof s[l];)l++;else{if(g===r)return s[l+1];l+=2}}}return null}(ki(),t)}const ua="__parameters__";function ro(t,r,s){return je(()=>{const a=function Xu(t){return function(...s){if(t){const a=t(...s);for(const l in a)this[l]=a[l]}}}(r);function l(...g){if(this instanceof l)return a.apply(this,g),this;const E=new l(...g);return R.annotation=E,R;function R(F,$,te){const he=F.hasOwnProperty(ua)?F[ua]:Object.defineProperty(F,ua,{value:[]})[ua];for(;he.length<=te;)he.push(null);return(he[te]=he[te]||[]).push(E),F}}return s&&(l.prototype=Object.create(s.prototype)),l.prototype.ngMetadataName=t,l.annotationCls=l,l})}function nc(t,r){t.forEach(s=>Array.isArray(s)?nc(s,r):r(s))}function rd(t,r,s){r>=t.length?t.push(s):t.splice(r,0,s)}function fr(t,r){return r>=t.length-1?t.pop():t.splice(r,1)[0]}function Pr(t,r){const s=[];for(let a=0;a<t;a++)s.push(r);return s}function Ns(t,r,s){let a=ku(t,r);return a>=0?t[1|a]=s:(a=~a,function xu(t,r,s,a){let l=t.length;if(l==r)t.push(s,a);else if(1===l)t.push(a,t[0]),t[0]=s;else{for(l--,t.push(t[l-1],t[l]);l>r;)t[l]=t[l-2],l--;t[r]=s,t[r+1]=a}}(t,a,r,s)),a}function id(t,r){const s=ku(t,r);if(s>=0)return t[1|s]}function ku(t,r){return function tl(t,r,s){let a=0,l=t.length>>s;for(;l!==a;){const g=a+(l-a>>1),E=t[g<<s];if(r===E)return g<<s;E>r?l=g:a=g+1}return~(l<<s)}(t,r,1)}const Wa=Kr(ro("Optional"),8),ic=Kr(ro("SkipSelf"),4);function da(t){return 128==(128&t.flags)}var qa=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}(qa||{});const Yh=/^>|^->|<!--|-->|--!>|<!-$/g,$f=/(<|>)/g,Ol="\u200b$1\u200b";const ha=new Map;let Ai=0;const vu="__ngContext__";function xo(t,r){lr(r)?(t[vu]=r[qi],function hh(t){ha.set(t[qi],t)}(r)):t[vu]=r}let gh;function Pl(t,r){return gh(t,r)}function Ml(t){const r=t[zn];return Ui(r)?r[zn]:r}function b(t){return _(t[ei])}function f(t){return _(t[ci])}function _(t){for(;null!==t&&!Ui(t);)t=t[ci];return t}function C(t,r,s,a,l){if(null!=a){let g,E=!1;Ui(a)?g=a:lr(a)&&(E=!0,a=a[Cr]);const R=$r(a);0===t&&null!==s?null==l?ll(r,s,R):yu(r,s,R,l||null,!0):1===t&&null!==s?yu(r,s,R,l||null,!0):2===t?function nf(t,r,s){const a=dl(t,r);a&&function xl(t,r,s,a){t.removeChild(r,s,a)}(t,a,r,s)}(r,R,E):3===t&&r.destroyNode(R),null!=g&&function hl(t,r,s,a,l){const g=s[vs];g!==$r(s)&&C(r,t,a,g,l);for(let R=Hr;R<s.length;R++){const F=s[R];Vd(F[Lt],F,t,r,a,g)}}(r,t,g,s,l)}}function G(t,r){return t.createText(r)}function ye(t,r){return t.createComment(function zf(t){return t.replace(Yh,r=>r.replace($f,Ol))}(r))}function Ge(t,r,s){return t.createElement(r,s)}function Fc(t,r){const s=t[Ys],a=s.indexOf(r);_o(r),s.splice(a,1)}function dd(t,r){if(t.length<=Hr)return;const s=Hr+r,a=t[s];if(a){const l=a[Un];null!==l&&l!==t&&Fc(l,a),r>0&&(t[s-1][ci]=a[ci]);const g=fr(t,Hr+r);!function ht(t,r){Vd(t,r,r[vn],2,null,null),r[Cr]=null,r[vr]=null}(a[Lt],a);const E=g[Mi];null!==E&&E.detachView(g[Lt]),a[zn]=null,a[ci]=null,a[fn]&=-129}return a}function cl(t,r){if(!(256&r[fn])){const s=r[vn];r[pi]&&wu(r[pi]),r[ta]&&wu(r[ta]),s.destroyNode&&Vd(t,r,s,3,null,null),function hn(t){let r=t[ei];if(!r)return uc(t[Lt],t);for(;r;){let s=null;if(lr(r))s=r[ei];else{const a=r[Hr];a&&(s=a)}if(!s){for(;r&&!r[ci]&&r!==t;)lr(r)&&uc(r[Lt],r),r=r[zn];null===r&&(r=t),lr(r)&&uc(r[Lt],r),s=r&&r[ci]}r=s}}(r)}}function uc(t,r){if(!(256&r[fn])){r[fn]&=-129,r[fn]|=256,function hd(t,r){let s;if(null!=t&&null!=(s=t.destroyHooks))for(let a=0;a<s.length;a+=2){const l=r[s[a]];if(!(l instanceof Tc)){const g=s[a+1];if(Array.isArray(g))for(let E=0;E<g.length;E+=2){const R=l[g[E]],F=g[E+1];wi(4,R,F);try{F.call(R)}finally{wi(5,R,F)}}else{wi(4,l,g);try{g.call(l)}finally{wi(5,l,g)}}}}}(t,r),function mh(t,r){const s=t.cleanup,a=r[Zr];if(null!==s)for(let g=0;g<s.length-1;g+=2)if("string"==typeof s[g]){const E=s[g+3];E>=0?a[E]():a[-E].unsubscribe(),g+=2}else s[g].call(a[s[g+1]]);null!==a&&(r[Zr]=null);const l=r[Hs];if(null!==l){r[Hs]=null;for(let g=0;g<l.length;g++)(0,l[g])()}}(t,r),1===r[Lt].type&&r[vn].destroy();const s=r[Un];if(null!==s&&Ui(r[zn])){s!==r[zn]&&Fc(s,r);const a=r[Mi];null!==a&&a.detachView(t)}!function Zh(t){ha.delete(t[qi])}(r)}}function ls(t,r,s){return Fd(t,r.parent,s)}function Fd(t,r,s){let a=r;for(;null!==a&&40&a.type;)a=(r=a).parent;if(null===a)return s[Cr];{const{componentOffset:l}=a;if(l>-1){const{encapsulation:g}=t.data[a.directiveStart+l];if(g===en.None||g===en.Emulated)return null}return ys(a,s)}}function yu(t,r,s,a,l){t.insertBefore(r,s,a,l)}function ll(t,r,s){t.appendChild(r,s)}function Ya(t,r,s,a,l){null!==a?yu(t,r,s,a,l):ll(t,r,s)}function dl(t,r){return t.parentNode(r)}function Xh(t,r,s){return Tm(t,r,s)}function ef(t,r,s){return 40&t.type?ys(t,s):null}let qp,Lu,kl,Eh,Tm=ef;function fd(t,r){Tm=t,qp=r}function Ld(t,r,s,a){const l=ls(t,a,r),g=r[vn],R=Xh(a.parent||r[vr],a,r);if(null!=l)if(Array.isArray(s))for(let F=0;F<s.length;F++)Ya(g,l,s[F],R,!1);else Ya(g,l,s,R,!1);void 0!==qp&&qp(g,a,r,s,l)}function _h(t,r){if(null!==r){const s=r.type;if(3&s)return ys(r,t);if(4&s)return tf(-1,t[r.index]);if(8&s){const a=r.child;if(null!==a)return _h(t,a);{const l=t[r.index];return Ui(l)?tf(-1,l):$r(l)}}if(32&s)return Pl(r,t)()||$r(t[r.index]);{const a=Kp(t,r);return null!==a?Array.isArray(a)?a[0]:_h(Ml(t[ii]),a):_h(t,r.next)}}return null}function Kp(t,r){return null!==r?t[ii][vr].projection[r.projection]:null}function tf(t,r){const s=Hr+t+1;if(s<r.length){const a=r[s],l=a[Lt].firstChild;if(null!==l)return _h(a,l)}return r[vs]}function Kf(t,r,s,a,l,g,E){for(;null!=s;){const R=a[s.index],F=s.type;if(E&&0===r&&(R&&xo($r(R),a),s.flags|=2),32!=(32&s.flags))if(8&F)Kf(t,r,s.child,a,l,g,!1),C(r,t,l,R,g);else if(32&F){const $=Pl(s,a);let te;for(;te=$();)C(r,t,l,te,g);C(r,t,l,R,g)}else 16&F?wm(t,r,a,s,l,g):C(r,t,l,R,g);s=E?s.projectionNext:s.next}}function Vd(t,r,s,a,l,g){Kf(s,a,t.firstChild,r,l,g,!1)}function wm(t,r,s,a,l,g){const E=s[ii],F=E[vr].projection[a.projection];if(Array.isArray(F))for(let $=0;$<F.length;$++)C(r,t,l,F[$],g);else{let $=F;const te=E[zn];da(a)&&($.flags|=128),Kf(t,r,$,te,l,g,!0)}}function Yf(t,r,s){""===s?t.removeAttribute(r,"class"):t.setAttribute(r,"class",s)}function Zf(t,r,s){const{mergedAttrs:a,classes:l,styles:g}=s;null!==a&&ma(t,r,a),null!==l&&Yf(t,r,l),null!==g&&function Dm(t,r,s){t.setAttribute(r,"style",s)}(t,r,g)}function yh(t){return function Qf(){if(void 0===Lu&&(Lu=null,Mn.trustedTypes))try{Lu=Mn.trustedTypes.createPolicy("angular",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch{}return Lu}()?.createHTML(t)||t}function rf(t){kl=t}function Fl(){if(void 0!==kl)return kl;if(typeof document<"u")return document;throw new Me(210,!1)}function Qp(t){return function sf(){if(void 0===Eh&&(Eh=null,Mn.trustedTypes))try{Eh=Mn.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch{}return Eh}()?.createScriptURL(t)||t}class Jp{constructor(r){this.changingThisBreaksApplicationSecurity=r}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${Ve})`}}function Ll(t){return t instanceof Jp?t.changingThisBreaksApplicationSecurity:t}function cf(t,r){const s=function lv(t){return t instanceof Jp&&t.getTypeName()||null}(t);if(null!=s&&s!==r){if("ResourceURL"===s&&"URL"===r)return!0;throw new Error(`Required a safe ${r}, got a ${s} (see ${Ve})`)}return s===r}class Sm{constructor(r){this.inertDocumentHelper=r}getInertBodyElement(r){r="<body><remove></remove>"+r;try{const s=(new window.DOMParser).parseFromString(yh(r),"text/html").body;return null===s?this.inertDocumentHelper.getInertBodyElement(r):(s.removeChild(s.firstChild),s)}catch{return null}}}class tg{constructor(r){this.defaultDoc=r,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert")}getInertBodyElement(r){const s=this.inertDocument.createElement("template");return s.innerHTML=yh(r),s}}const rg=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function ep(t){return(t=String(t)).match(rg)?t:"unsafe:"+t}function Lc(t){const r={};for(const s of t.split(","))r[s]=!0;return r}function gd(...t){const r={};for(const s of t)for(const a in s)s.hasOwnProperty(a)&&(r[a]=!0);return r}const ig=Lc("area,br,col,hr,img,wbr"),lf=Lc("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),Rm=Lc("rp,rt"),tp=gd(ig,gd(lf,Lc("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),gd(Rm,Lc("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),gd(Rm,lf)),Vl=Lc("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),sg=gd(Vl,Lc("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),Lc("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext"));var c=function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t}(c||{});function j(t){const r=Gn();return r?r.sanitize(c.URL,t)||"":cf(t,"URL")?Ll(t):ep(Ne(t))}function Y(t){const r=Gn();if(r)return Qp(r.sanitize(c.RESOURCE_URL,t)||"");if(cf(t,"ResourceURL"))return Qp(Ll(t));throw new Me(904,!1)}function Ht(t,r,s){return function tt(t,r){return"src"===r&&("embed"===t||"frame"===t||"iframe"===t||"media"===t||"script"===t)||"href"===r&&("base"===t||"link"===t)?Y:j}(r,s)(t)}function Gn(){const t=bt();return t&&t[Qr].sanitizer}const tr=new Bt("ENVIRONMENT_INITIALIZER"),wn=new Bt("INJECTOR",-1),kr=new Bt("INJECTOR_DEF_TYPES");class br{get(r,s=vi){if(s===vi){const a=new Error(`NullInjectorError: No provider for ${Pe(r)}!`);throw a.name="NullInjectorError",a}return s}}function gr(...t){return{\u0275providers:Wr(0,t),\u0275fromNgModule:!0}}function Wr(t,...r){const s=[],a=new Set;let l;const g=E=>{s.push(E)};return nc(r,E=>{const R=E;Li(R,g,[],a)&&(l||=[],l.push(R))}),void 0!==l&&ni(l,g),s}function ni(t,r){for(let s=0;s<t.length;s++){const{ngModule:a,providers:l}=t[s];io(l,g=>{r(g,a)})}}function Li(t,r,s,a){if(!(t=ft(t)))return!1;let l=null,g=at(t);const E=!g&&Bn(t);if(g||E){if(E&&!E.standalone)return!1;l=t}else{const F=t.ngModule;if(g=at(F),!g)return!1;l=F}const R=a.has(l);if(E){if(R)return!1;if(a.add(l),E.dependencies){const F="function"==typeof E.dependencies?E.dependencies():E.dependencies;for(const $ of F)Li($,r,s,a)}}else{if(!g)return!1;{if(null!=g.imports&&!R){let $;a.add(l);try{nc(g.imports,te=>{Li(te,r,s,a)&&($||=[],$.push(te))})}finally{}void 0!==$&&ni($,r)}if(!R){const $=ji(l)||(()=>new l);r({provide:l,useFactory:$,deps:jt},l),r({provide:kr,useValue:l,multi:!0},l),r({provide:tr,useValue:()=>Kt(l),multi:!0},l)}const F=g.providers;if(null!=F&&!R){const $=t;io(F,te=>{r(te,$)})}}}return l!==t&&void 0!==t.providers}function io(t,r){for(let s of t)It(s)&&(s=s.\u0275providers),Array.isArray(s)?io(s,r):r(s)}const To=pe({provide:String,useValue:pe});function so(t){return null!==t&&"object"==typeof t&&To in t}function Iu(t){return"function"==typeof t}const Ma=new Bt("Set Injector scope."),ga={},pf={};let Vu;function Vc(){return void 0===Vu&&(Vu=new br),Vu}class Bu{}class cc extends Bu{get destroyed(){return this._destroyed}constructor(r,s,a,l){super(),this.parent=s,this.source=a,this.scopes=l,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,wh(r,E=>this.processProvider(E)),this.records.set(wn,lc(void 0,this)),l.has("environment")&&this.records.set(Bu,lc(void 0,this));const g=this.records.get(Ma);null!=g&&"string"==typeof g.value&&this.scopes.add(g.value),this.injectorDefTypes=new Set(this.get(kr.multi,jt,Ot.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const s of this._ngOnDestroyHooks)s.ngOnDestroy();const r=this._onDestroyHooks;this._onDestroyHooks=[];for(const s of r)s()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear()}}onDestroy(r){return this.assertNotDestroyed(),this._onDestroyHooks.push(r),()=>this.removeOnDestroy(r)}runInContext(r){this.assertNotDestroyed();const s=lt(this),a=$n(void 0);try{return r()}finally{lt(s),$n(a)}}get(r,s=vi,a=Ot.Default){if(this.assertNotDestroyed(),r.hasOwnProperty(Ja))return r[Ja](this);a=un(a);const g=lt(this),E=$n(void 0);try{if(!(a&Ot.SkipSelf)){let F=this.records.get(r);if(void 0===F){const $=function og(t){return"function"==typeof t||"object"==typeof t&&t instanceof Bt}(r)&&Pn(r);F=$&&this.injectableDefInScope($)?lc(Ul(r),ga):null,this.records.set(r,F)}if(null!=F)return this.hydrate(r,F)}return(a&Ot.Self?Vc():this.parent).get(r,s=a&Ot.Optional&&s===vi?null:s)}catch(R){if("NullInjectorError"===R.name){if((R[Oi]=R[Oi]||[]).unshift(Pe(r)),g)throw R;return function Ms(t,r,s,a){const l=t[Oi];throw r[re]&&l.unshift(r[re]),t.message=function rt(t,r,s,a=null){t=t&&"\n"===t.charAt(0)&&"\u0275"==t.charAt(1)?t.slice(2):t;let l=Pe(r);if(Array.isArray(r))l=r.map(Pe).join(" -> ");else if("object"==typeof r){let g=[];for(let E in r)if(r.hasOwnProperty(E)){let R=r[E];g.push(E+":"+("string"==typeof R?JSON.stringify(R):Pe(R)))}l=`{${g.join(", ")}}`}return`${s}${a?"("+a+")":""}[${l}]: ${t.replace(se,"\n  ")}`}("\n"+t.message,l,s,a),t.ngTokenPath=l,t[Oi]=null,t}(R,r,"R3InjectorError",this.source)}throw R}finally{$n(E),lt(g)}}resolveInjectorInitializers(){const r=lt(this),s=$n(void 0);try{const l=this.get(tr.multi,jt,Ot.Self);for(const g of l)g()}finally{lt(r),$n(s)}}toString(){const r=[],s=this.records;for(const a of s.keys())r.push(Pe(a));return`R3Injector[${r.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Me(205,!1)}processProvider(r){let s=Iu(r=ft(r))?r:ft(r&&r.provide);const a=function Uu(t){return so(t)?lc(void 0,t.useValue):lc(fl(t),ga)}(r);if(Iu(r)||!0!==r.multi)this.records.get(s);else{let l=this.records.get(s);l||(l=lc(void 0,ga,!0),l.factory=()=>wr(l.multi),this.records.set(s,l)),s=r,l.multi.push(r)}this.records.set(s,a)}hydrate(r,s){return s.value===ga&&(s.value=pf,s.value=s.factory()),"object"==typeof s.value&&s.value&&function ip(t){return null!==t&&"object"==typeof t&&"function"==typeof t.ngOnDestroy}(s.value)&&this._ngOnDestroyHooks.add(s.value),s.value}injectableDefInScope(r){if(!r.providedIn)return!1;const s=ft(r.providedIn);return"string"==typeof s?"any"===s||this.scopes.has(s):this.injectorDefTypes.has(s)}removeOnDestroy(r){const s=this._onDestroyHooks.indexOf(r);-1!==s&&this._onDestroyHooks.splice(s,1)}}function Ul(t){const r=Pn(t),s=null!==r?r.factory:ji(t);if(null!==s)return s;if(t instanceof Bt)throw new Me(204,!1);if(t instanceof Function)return function jl(t){const r=t.length;if(r>0)throw Pr(r,"?"),new Me(204,!1);const s=function Ue(t){return t&&(t[pt]||t[Nn])||null}(t);return null!==s?()=>s.factory(t):()=>new t}(t);throw new Me(204,!1)}function fl(t,r,s){let a;if(Iu(t)){const l=ft(t);return ji(l)||Ul(l)}if(so(t))a=()=>ft(t.useValue);else if(function pa(t){return!(!t||!t.useFactory)}(t))a=()=>t.useFactory(...wr(t.deps||[]));else if(function Ri(t){return!(!t||!t.useExisting)}(t))a=()=>Kt(ft(t.useExisting));else{const l=ft(t&&(t.useClass||t.provide));if(!function pl(t){return!!t.deps}(t))return ji(l)||Ul(l);a=()=>new l(...wr(t.deps))}return a}function lc(t,r,s=!1){return{factory:t,value:r,multi:s?[]:void 0}}function wh(t,r){for(const s of t)Array.isArray(s)?wh(s,r):s&&It(s)?wh(s.\u0275providers,r):r(s)}const sp=new Bt("AppId",{providedIn:"root",factory:()=>op}),op="ng",gf=new Bt("Platform Initializer"),ap=new Bt("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),ug=new Bt("CSP nonce",{providedIn:"root",factory:()=>Fl().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});let dg=(t,r,s)=>null;function hg(t,r,s=!1){return dg(t,r,s)}class t0{}class fv{}class r0{resolveComponentFactory(r){throw function n0(t){const r=Error(`No component factory found for ${Pe(t)}.`);return r.ngComponent=t,r}(r)}}let mg=(()=>{class t{static#e=this.NULL=new r0}return t})();function fp(){return $d(ki(),bt())}function $d(t,r){return new $l(ys(t,r))}let $l=(()=>{class t{constructor(s){this.nativeElement=s}static#e=this.__NG_ELEMENT_ID__=fp}return t})();function Fm(t){return t instanceof $l?t.nativeElement:t}class pp{}let gp=(()=>{class t{constructor(){this.destroyNode=null}static#e=this.__NG_ELEMENT_ID__=()=>function Lm(){const t=bt(),s=Vr(ki().index,t);return(lr(s)?s:t)[vn]}()}return t})(),mv=(()=>{class t{static#e=this.\u0275prov=on({token:t,providedIn:"root",factory:()=>null})}return t})();class _g{constructor(r){this.full=r,this.major=r.split(".")[0],this.minor=r.split(".")[1],this.patch=r.split(".").slice(2).join(".")}}const vg=new _g("16.2.11"),zl={};function yg(t){if(!At()&&!function Re(){return oe}())throw new Me(-203,!1)}function Eg(t,r=null,s=null,a){const l=yv(t,r,s,a);return l.resolveInjectorInitializers(),l}function yv(t,r=null,s=null,a,l=new Set){const g=[s||jt,gr(t)];return a=a||("object"==typeof t?void 0:Pe(t)),new cc(g,r||Vc(),a||null,l)}let gl=(()=>{class t{static#e=this.THROW_IF_NOT_FOUND=vi;static#t=this.NULL=new br;static create(s,a){if(Array.isArray(s))return Eg({name:""},a,s,"");{const l=s.name??"";return Eg({name:l},s.parent,s.providers,l)}}static#n=this.\u0275prov=on({token:t,providedIn:"any",factory:()=>Kt(wn)});static#r=this.__NG_ELEMENT_ID__=-1}return t})();function Gm(t){return t.ngOriginalError}class Wl{constructor(){this._console=console}handleError(r){const s=this._findOriginalError(r);this._console.error("ERROR",r),s&&this._console.error("ORIGINAL ERROR",s)}_findOriginalError(r){let s=r&&Gm(r);for(;s&&Gm(s);)s=Gm(s);return s||null}}let vp=(()=>{class t{static#e=this.__NG_ELEMENT_ID__=u0;static#t=this.__NG_ENV_ID__=s=>s}return t})();class Hm extends vp{constructor(r){super(),this._lView=r}onDestroy(r){return tn(this._lView,r),()=>function pn(t,r){if(null===t[Hs])return;const s=t[Hs].indexOf(r);-1!==s&&t[Hs].splice(s,1)}(this._lView,r)}}function u0(){return new Hm(bt())}function zm(t){return r=>{setTimeout(t,void 0,r)}}const Bc=class $m extends y.x{constructor(r=!1){super(),this.__isAsync=r}emit(r){super.next(r)}subscribe(r,s,a){let l=r,g=s||(()=>null),E=a;if(r&&"object"==typeof r){const F=r;l=F.next?.bind(F),g=F.error?.bind(F),E=F.complete?.bind(F)}this.__isAsync&&(g=zm(g),l&&(l=zm(l)),E&&(E=zm(E)));const R=super.subscribe({next:l,error:g,complete:E});return r instanceof fe.w0&&r.add(R),R}};function Wm(...t){}class Fo{constructor({enableLongStackTrace:r=!1,shouldCoalesceEventChangeDetection:s=!1,shouldCoalesceRunChangeDetection:a=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Bc(!1),this.onMicrotaskEmpty=new Bc(!1),this.onStable=new Bc(!1),this.onError=new Bc(!1),typeof Zone>"u")throw new Me(908,!1);Zone.assertZonePatched();const l=this;l._nesting=0,l._outer=l._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(l._inner=l._inner.fork(new Zone.TaskTrackingZoneSpec)),r&&Zone.longStackTraceZoneSpec&&(l._inner=l._inner.fork(Zone.longStackTraceZoneSpec)),l.shouldCoalesceEventChangeDetection=!a&&s,l.shouldCoalesceRunChangeDetection=a,l.lastRequestAnimationFrameId=-1,l.nativeRequestAnimationFrame=function qm(){const t="function"==typeof Mn.requestAnimationFrame;let r=Mn[t?"requestAnimationFrame":"setTimeout"],s=Mn[t?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&r&&s){const a=r[Zone.__symbol__("OriginalDelegate")];a&&(r=a);const l=s[Zone.__symbol__("OriginalDelegate")];l&&(s=l)}return{nativeRequestAnimationFrame:r,nativeCancelAnimationFrame:s}}().nativeRequestAnimationFrame,function Ef(t){const r=()=>{!function Km(t){t.isCheckStableRunning||-1!==t.lastRequestAnimationFrameId||(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(Mn,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,zd(t),t.isCheckStableRunning=!0,ql(t),t.isCheckStableRunning=!1},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),zd(t))}(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(s,a,l,g,E,R)=>{if(function Zm(t){return!(!Array.isArray(t)||1!==t.length)&&!0===t[0].data?.__ignore_ng_zone__}(R))return s.invokeTask(l,g,E,R);try{return Ym(t),s.invokeTask(l,g,E,R)}finally{(t.shouldCoalesceEventChangeDetection&&"eventTask"===g.type||t.shouldCoalesceRunChangeDetection)&&r(),Nh(t)}},onInvoke:(s,a,l,g,E,R,F)=>{try{return Ym(t),s.invoke(l,g,E,R,F)}finally{t.shouldCoalesceRunChangeDetection&&r(),Nh(t)}},onHasTask:(s,a,l,g)=>{s.hasTask(l,g),a===l&&("microTask"==g.change?(t._hasPendingMicrotasks=g.microTask,zd(t),ql(t)):"macroTask"==g.change&&(t.hasPendingMacrotasks=g.macroTask))},onHandleError:(s,a,l,g)=>(s.handleError(l,g),t.runOutsideAngular(()=>t.onError.emit(g)),!1)})}(l)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Fo.isInAngularZone())throw new Me(909,!1)}static assertNotInAngularZone(){if(Fo.isInAngularZone())throw new Me(909,!1)}run(r,s,a){return this._inner.run(r,s,a)}runTask(r,s,a,l){const g=this._inner,E=g.scheduleEventTask("NgZoneEvent: "+l,r,If,Wm,Wm);try{return g.runTask(E,s,a)}finally{g.cancelTask(E)}}runGuarded(r,s,a){return this._inner.runGuarded(r,s,a)}runOutsideAngular(r){return this._outer.run(r)}}const If={};function ql(t){if(0==t._nesting&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function zd(t){t.hasPendingMicrotasks=!!(t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&-1!==t.lastRequestAnimationFrameId)}function Ym(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function Nh(t){t._nesting--,ql(t)}class c0{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Bc,this.onMicrotaskEmpty=new Bc,this.onStable=new Bc,this.onError=new Bc}run(r,s,a){return r.apply(s,a)}runGuarded(r,s,a){return r.apply(s,a)}runOutsideAngular(r){return r()}runTask(r,s,a,l){return r.apply(s,a)}}const Ev=new Bt("",{providedIn:"root",factory:Tg});function Tg(){const t=Qt(Fo);let r=!0;const s=new ae.y(l=>{r=t.isStable&&!t.hasPendingMacrotasks&&!t.hasPendingMicrotasks,t.runOutsideAngular(()=>{l.next(r),l.complete()})}),a=new ae.y(l=>{let g;t.runOutsideAngular(()=>{g=t.onStable.subscribe(()=>{Fo.assertNotInAngularZone(),queueMicrotask(()=>{!r&&!t.hasPendingMacrotasks&&!t.hasPendingMicrotasks&&(r=!0,l.next(!0))})})});const E=t.onUnstable.subscribe(()=>{Fo.assertInAngularZone(),r&&(r=!1,t.runOutsideAngular(()=>{l.next(!1)}))});return()=>{g.unsubscribe(),E.unsubscribe()}});return(0,Ce.T)(s,a.pipe((0,Oe.B)()))}function bg(t){return t.ownerDocument}function ml(t){return t instanceof Function?t():t}let wg=(()=>{class t{constructor(){this.renderDepth=0,this.handler=null}begin(){this.handler?.validateBegin(),this.renderDepth++}end(){this.renderDepth--,0===this.renderDepth&&this.handler?.execute()}ngOnDestroy(){this.handler?.destroy(),this.handler=null}static#e=this.\u0275prov=on({token:t,providedIn:"root",factory:()=>new t})}return t})();function bf(t){for(;t;){t[fn]|=64;const r=Ml(t);if(nu(t)&&!r)return t;t=r}return null}const Cv=new Bt("",{providedIn:"root",factory:()=>!1});let Ag=null;function Sg(t,r){return t[r]??Rg()}function Sv(t,r){const s=Rg();s.producerNode?.length&&(t[r]=Ag,s.lView=t,Ag=Rv())}const r_={...ia,consumerIsAlwaysLive:!0,consumerMarkedDirty:t=>{bf(t.lView)},lView:null};function Rv(){return Object.create(r_)}function Rg(){return Ag??=Rv(),Ag}const _r={};function Ng(t){Og(dr(),bt(),An()+t,!1)}function Og(t,r,s,a){if(!a)if(3==(3&r[fn])){const g=t.preOrderCheckHooks;null!==g&&qu(r,g,s)}else{const g=t.preOrderHooks;null!==g&&uu(r,g,0,s)}Bs(s)}function qd(t,r=Ot.Default){const s=bt();return null===s?Kt(t,r):as(ki(),s,ft(t),r)}function Oh(){throw new Error("invalid")}function wf(t,r,s,a,l,g,E,R,F,$,te){const he=r.blueprint.slice();return he[Cr]=l,he[fn]=140|a,(null!==$||t&&2048&t[fn])&&(he[fn]|=2048),Et(he),he[zn]=he[ps]=t,he[Wn]=s,he[Qr]=E||t&&t[Qr],he[vn]=R||t&&t[vn],he[fs]=F||t&&t[fs]||null,he[vr]=g,he[qi]=function Pd(){return Ai++}(),he[ms]=te,he[gs]=$,he[ii]=2==r.type?t[ii]:he,he}function Df(t,r,s,a,l){let g=t.data[r];if(null===g)g=Ip(t,r,s,a,l),function sh(){return Fn.lFrame.inI18n}()&&(g.flags|=32);else if(64&g.type){g.type=s,g.value=a,g.attrs=l;const E=Rr();g.injectorIndex=null===E?-1:E.injectorIndex}return rn(g,!0),g}function Ip(t,r,s,a,l){const g=bl(),E=Xs(),F=t.data[r]=function u_(t,r,s,a,l,g){let E=r?r.injectorIndex:-1,R=0;return Cu()&&(R|=128),{type:s,index:a,insertBeforeIndex:null,injectorIndex:E,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:R,providerIndexes:0,value:l,attrs:g,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:r,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,E?g:g&&g.parent,s,r,a,l);return null===t.firstChild&&(t.firstChild=F),null!==g&&(E?null==g.child&&null!==F.parent&&(g.child=F):null===g.next&&(g.next=F,F.prev=g)),F}function hc(t,r,s,a){if(0===s)return-1;const l=r.length;for(let g=0;g<s;g++)r.push(a),t.blueprint.push(a),t.data.push(null);return l}function Pg(t,r,s,a,l){const g=Sg(r,pi),E=An(),R=2&a;try{Bs(-1),R&&r.length>Ln&&Og(t,r,Ln,!1),wi(R?2:0,l);const $=R?g:null,te=Ro($);try{null!==$&&($.dirty=!1),s(a,l)}finally{bu($,te)}}finally{R&&null===r[pi]&&Sv(r,pi),Bs(E),wi(R?3:1,l)}}function i_(t,r,s){if(Fs(r)){const a=Ki(null);try{const g=r.directiveEnd;for(let E=r.directiveStart;E<g;E++){const R=t.data[E];R.contentQueries&&R.contentQueries(1,s[E],E)}}finally{Ki(a)}}}function Ep(t,r,s){Dd()&&(function kv(t,r,s,a){const l=s.directiveStart,g=s.directiveEnd;Ls(s)&&function m_(t,r,s){const a=ys(r,t),l=Ov(s);let E=16;s.signals?E=4096:s.onPush&&(E=64);const R=Dp(t,wf(t,l,null,E,a,r,null,t[Qr].rendererFactory.createRenderer(a,s),null,null,null));t[r.index]=R}(r,s,t.data[l+s.componentOffset]),t.firstCreatePass||aa(s,r),xo(a,r);const E=s.initialInputs;for(let R=l;R<g;R++){const F=t.data[R],$=Es(r,t,R,s);xo($,r),null!==E&&Lv(0,R-l,$,F,0,E),Ss(F)&&(Vr(s.index,r)[Wn]=Es(r,t,R,s))}}(t,r,s,ys(s,r)),64==(64&s.flags)&&Ph(t,r,s))}function s_(t,r,s=ys){const a=r.localNames;if(null!==a){let l=r.index+1;for(let g=0;g<a.length;g+=2){const E=a[g+1],R=-1===E?s(r,t):t[E];t[l++]=R}}}function Ov(t){const r=t.tView;return null===r||r.incompleteFirstPass?t.tView=Tp(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts,t.id):r}function Tp(t,r,s,a,l,g,E,R,F,$,te){const he=Ln+a,ke=he+l,We=function p0(t,r){const s=[];for(let a=0;a<r;a++)s.push(a<t?null:_r);return s}(he,ke),gt="function"==typeof $?$():$;return We[Lt]={type:t,blueprint:We,template:s,queries:null,viewQuery:R,declTNode:r,data:We.slice().fill(null,he),bindingStartIndex:he,expandoStartIndex:ke,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof g?g():g,pipeRegistry:"function"==typeof E?E():E,firstChild:null,schemas:F,consts:gt,incompleteFirstPass:!1,ssrId:te}}let Mg=t=>null;function c_(t,r,s,a){for(let l in t)if(t.hasOwnProperty(l)){s=null===s?{}:s;const g=t[l];null===a?Mv(s,r,l,g):a.hasOwnProperty(l)&&Mv(s,r,a[l],g)}return s}function Mv(t,r,s,a){t.hasOwnProperty(s)?t[s].push(r,a):t[s]=[r,a]}function fc(t,r,s,a,l,g,E,R){const F=ys(r,s);let te,$=r.inputs;!R&&null!=$&&(te=$[a])?(y_(t,s,te,a,l),Ls(r)&&function d_(t,r){const s=Vr(r,t);16&s[fn]||(s[fn]|=64)}(s,r.index)):3&r.type&&(a=function l_(t){return"class"===t?"className":"for"===t?"htmlFor":"formaction"===t?"formAction":"innerHtml"===t?"innerHTML":"readonly"===t?"readOnly":"tabindex"===t?"tabIndex":t}(a),l=null!=E?E(l,r.value||"",a):l,g.setProperty(F,a,l))}function f_(t,r,s,a){if(Dd()){const l=null===a?null:{"":-1},g=function xg(t,r){const s=t.directiveRegistry;let a=null,l=null;if(s)for(let g=0;g<s.length;g++){const E=s[g];if(ts(r,E.selectors,!1))if(a||(a=[]),Ss(E))if(null!==E.findHostDirectiveDefs){const R=[];l=l||new Map,E.findHostDirectiveDefs(E,R,l),a.unshift(...R,E),g_(t,r,R.length)}else a.unshift(E),g_(t,r,0);else l=l||new Map,E.findHostDirectiveDefs?.(E,a,l),a.push(E)}return null===a?null:[a,l]}(t,s);let E,R;null===g?E=R=null:[E,R]=g,null!==E&&Cf(t,r,s,E,l,R),l&&function y0(t,r,s){if(r){const a=t.localNames=[];for(let l=0;l<r.length;l+=2){const g=s[r[l+1]];if(null==g)throw new Me(-301,!1);a.push(r[l],g)}}}(s,a,l)}s.mergedAttrs=Gs(s.mergedAttrs,s.attrs)}function Cf(t,r,s,a,l,g){for(let $=0;$<a.length;$++)wc(aa(s,r),t,a[$].type);!function E0(t,r,s){t.flags|=1,t.directiveStart=r,t.directiveEnd=r+s,t.providerIndexes=r}(s,t.data.length,a.length);for(let $=0;$<a.length;$++){const te=a[$];te.providersResolver&&te.providersResolver(te)}let E=!1,R=!1,F=hc(t,r,a.length,null);for(let $=0;$<a.length;$++){const te=a[$];s.mergedAttrs=Gs(s.mergedAttrs,te.hostAttrs),kg(t,s,r,F,te),I0(F,te,l),null!==te.contentQueries&&(s.flags|=4),(null!==te.hostBindings||null!==te.hostAttrs||0!==te.hostVars)&&(s.flags|=64);const he=te.type.prototype;!E&&(he.ngOnChanges||he.ngOnInit||he.ngDoCheck)&&((t.preOrderHooks??=[]).push(s.index),E=!0),!R&&(he.ngOnChanges||he.ngDoCheck)&&((t.preOrderCheckHooks??=[]).push(s.index),R=!0),F++}!function _0(t,r,s){const l=r.directiveEnd,g=t.data,E=r.attrs,R=[];let F=null,$=null;for(let te=r.directiveStart;te<l;te++){const he=g[te],ke=s?s.get(he):null,gt=ke?ke.outputs:null;F=c_(he.inputs,te,F,ke?ke.inputs:null),$=c_(he.outputs,te,$,gt);const xt=null===F||null===E||Xa(r)?null:__(F,te,E);R.push(xt)}null!==F&&(F.hasOwnProperty("class")&&(r.flags|=8),F.hasOwnProperty("style")&&(r.flags|=16)),r.initialInputs=R,r.inputs=F,r.outputs=$}(t,s,g)}function Ph(t,r,s){const a=s.directiveStart,l=s.directiveEnd,g=s.index,E=function Jl(){return Fn.lFrame.currentDirectiveIndex}();try{Bs(g);for(let R=a;R<l;R++){const F=t.data[R],$=r[R];to(R),(null!==F.hostBindings||0!==F.hostVars||null!==F.hostAttrs)&&Fv(F,$)}}finally{Bs(-1),to(E)}}function Fv(t,r){null!==t.hostBindings&&t.hostBindings(1,r)}function g_(t,r,s){r.componentOffset=s,(t.components??=[]).push(r.index)}function I0(t,r,s){if(s){if(r.exportAs)for(let a=0;a<r.exportAs.length;a++)s[r.exportAs[a]]=t;Ss(r)&&(s[""]=t)}}function kg(t,r,s,a,l){t.data[a]=l;const g=l.factory||(l.factory=ji(l.type)),E=new Tc(g,Ss(l),qd);t.blueprint[a]=E,s[a]=E,function v0(t,r,s,a,l){const g=l.hostBindings;if(g){let E=t.hostBindingOpCodes;null===E&&(E=t.hostBindingOpCodes=[]);const R=~r.index;(function p_(t){let r=t.length;for(;r>0;){const s=t[--r];if("number"==typeof s&&s<0)return s}return 0})(E)!=R&&E.push(R),E.push(s,a,g)}}(t,r,a,hc(t,s,l.hostVars,_r),l)}function Uc(t,r,s,a,l,g){const E=ys(t,r);!function bp(t,r,s,a,l,g,E){if(null==g)t.removeAttribute(r,l,s);else{const R=null==E?Ne(g):E(g,a||"",l);t.setAttribute(r,l,R,s)}}(r[vn],E,g,t.value,s,a,l)}function Lv(t,r,s,a,l,g){const E=g[r];if(null!==E)for(let R=0;R<E.length;)Fg(a,s,E[R++],E[R++],E[R++])}function Fg(t,r,s,a,l){const g=Ki(null);try{const E=t.inputTransforms;null!==E&&E.hasOwnProperty(a)&&(l=E[a].call(r,l)),null!==t.setInput?t.setInput(r,l,s,a):r[a]=l}finally{Ki(g)}}function __(t,r,s){let a=null,l=0;for(;l<s.length;){const g=s[l];if(0!==g)if(5!==g){if("number"==typeof g)break;if(t.hasOwnProperty(g)){null===a&&(a=[]);const E=t[g];for(let R=0;R<E.length;R+=2)if(E[R]===r){a.push(g,E[R+1],s[l+1]);break}}l+=2}else l+=2;else l+=4}return a}function wp(t,r,s,a){return[t,!0,!1,r,null,0,a,s,null,null,null]}function Lg(t,r){const s=t.contentQueries;if(null!==s)for(let a=0;a<s.length;a+=2){const g=s[a+1];if(-1!==g){const E=t.data[g];x(s[a]),E.contentQueries(2,r[g],g)}}}function Dp(t,r){return t[ei]?t[uo][ci]=r:t[ei]=r,t[uo]=r,r}function Kd(t,r,s){x(0);const a=Ki(null);try{r(t,s)}finally{Ki(a)}}function Vg(t){return t[Zr]||(t[Zr]=[])}function v_(t){return t.cleanup||(t.cleanup=[])}function Bg(t,r){const s=t[fs],a=s?s.get(Wl,null):null;a&&a.handleError(r)}function y_(t,r,s,a,l){for(let g=0;g<s.length;){const E=s[g++],R=s[g++];Fg(t.data[E],r[E],a,R,l)}}function vd(t,r,s){const a=$u(r,t);!function X(t,r,s){t.setValue(r,s)}(t[vn],a,s)}function b0(t,r){const s=Vr(r,t),a=s[Lt];!function Vv(t,r){for(let s=r.length;s<t.blueprint.length;s++)r.push(t.blueprint[s])}(a,s);const l=s[Cr];null!==l&&null===s[ms]&&(s[ms]=hg(l,s[fs])),I_(a,s,s[Wn])}function I_(t,r,s){k(r);try{const a=t.viewQuery;null!==a&&Kd(1,a,s);const l=t.template;null!==l&&Pg(t,r,l,1,s),t.firstCreatePass&&(t.firstCreatePass=!1),t.staticContentQueries&&Lg(t,r),t.staticViewQueries&&Kd(2,t.viewQuery,s);const g=t.components;null!==g&&function Bv(t,r){for(let s=0;s<r.length;s++)b0(t,r[s])}(r,g)}catch(a){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),a}finally{r[fn]&=-5,Ut()}}let Uv=(()=>{class t{constructor(){this.all=new Set,this.queue=new Map}create(s,a,l){const g=typeof Zone>"u"?null:Zone.current,E=function ct(t,r,s){const a=Object.create(Yn);s&&(a.consumerAllowSignalWrites=!0),a.fn=t,a.schedule=r;const l=E=>{a.cleanupFn=E};return a.ref={notify:()=>vc(a),run:()=>{if(a.dirty=!1,a.hasRun&&!ja(a))return;a.hasRun=!0;const E=Ro(a);try{a.cleanupFn(),a.cleanupFn=an,a.fn(l)}finally{bu(a,E)}},cleanup:()=>a.cleanupFn()},a.ref}(s,$=>{this.all.has($)&&this.queue.set($,g)},l);let R;this.all.add(E),E.notify();const F=()=>{E.cleanup(),R?.(),this.all.delete(E),this.queue.delete(E)};return R=a?.onDestroy(F),{destroy:F}}flush(){if(0!==this.queue.size)for(const[s,a]of this.queue)this.queue.delete(s),a?a.run(()=>s.run()):s.run()}get isQueueEmpty(){return 0===this.queue.size}static#e=this.\u0275prov=on({token:t,providedIn:"root",factory:()=>new t})}return t})();function Ug(t,r,s){let a=s?t.styles:null,l=s?t.classes:null,g=0;if(null!==r)for(let E=0;E<r.length;E++){const R=r[E];"number"==typeof R?g=R:1==g?l=dt(l,R):2==g&&(a=dt(a,R+": "+r[++E]+";"))}s?t.styles=a:t.stylesWithoutHost=a,s?t.classes=l:t.classesWithoutHost=l}function Cp(t,r,s,a,l=!1){for(;null!==s;){const g=r[s.index];null!==g&&a.push($r(g)),Ui(g)&&jv(g,a);const E=s.type;if(8&E)Cp(t,r,s.child,a);else if(32&E){const R=Pl(s,r);let F;for(;F=R();)a.push(F)}else if(16&E){const R=Kp(r,s);if(Array.isArray(R))a.push(...R);else{const F=Ml(r[ii]);Cp(F[Lt],F,R,a,!0)}}s=l?s.projectionNext:s.next}return a}function jv(t,r){for(let s=Hr;s<t.length;s++){const a=t[s],l=a[Lt].firstChild;null!==l&&Cp(a[Lt],a,l,r)}t[vs]!==t[Cr]&&r.push(t[vs])}function jg(t,r,s,a=!0){const l=r[Qr],g=l.rendererFactory,E=l.afterRenderEventManager;g.begin?.(),E?.begin();try{Gg(t,r,t.template,s)}catch(F){throw a&&Bg(r,F),F}finally{g.end?.(),l.effectManager?.flush(),E?.end()}}function Gg(t,r,s,a){const l=r[fn];if(256!=(256&l)){r[Qr].effectManager?.flush(),k(r);try{Et(r),function Oo(t){return Fn.lFrame.bindingIndex=t}(t.bindingStartIndex),null!==s&&Pg(t,r,s,2,a);const E=3==(3&l);if(E){const $=t.preOrderCheckHooks;null!==$&&qu(r,$,null)}else{const $=t.preOrderHooks;null!==$&&uu(r,$,0,null),Su(r,0)}if(function Hv(t){for(let r=b(t);null!==r;r=f(r)){if(!r[_s])continue;const s=r[Ys];for(let a=0;a<s.length;a++){mi(s[a])}}}(r),E_(r,2),null!==t.contentQueries&&Lg(t,r),E){const $=t.contentCheckHooks;null!==$&&qu(r,$)}else{const $=t.contentHooks;null!==$&&uu(r,$,1),Su(r,1)}!function Nv(t,r){const s=t.hostBindingOpCodes;if(null===s)return;const a=Sg(r,ta);try{for(let l=0;l<s.length;l++){const g=s[l];if(g<0)Bs(~g);else{const E=g,R=s[++l],F=s[++l];zu(R,E),a.dirty=!1;const $=Ro(a);try{F(2,r[E])}finally{bu(a,$)}}}}finally{null===r[ta]&&Sv(r,ta),Bs(-1)}}(t,r);const R=t.components;null!==R&&Ur(r,R,0);const F=t.viewQuery;if(null!==F&&Kd(2,F,a),E){const $=t.viewCheckHooks;null!==$&&qu(r,$)}else{const $=t.viewHooks;null!==$&&uu(r,$,2),Su(r,2)}!0===t.firstUpdatePass&&(t.firstUpdatePass=!1),r[fn]&=-73,_o(r)}finally{Ut()}}}function E_(t,r){for(let s=b(t);null!==s;s=f(s))for(let a=Hr;a<s.length;a++)Ap(s[a],r)}function $v(t,r,s){Ap(Vr(r,t),s)}function Ap(t,r){if(!function Da(t){return 128==(128&t[fn])}(t))return;const s=t[Lt],a=t[fn];if(80&a&&0===r||1024&a||2===r)Gg(s,t,s.template,t[Wn]);else if(t[ns]>0){E_(t,1);const l=s.components;null!==l&&Ur(t,l,1)}}function Ur(t,r,s){for(let a=0;a<r.length;a++)$v(t,r[a],s)}class Af{get rootNodes(){const r=this._lView,s=r[Lt];return Cp(s,r,s.firstChild,[])}constructor(r,s){this._lView=r,this._cdRefInjectingView=s,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[Wn]}set context(r){this._lView[Wn]=r}get destroyed(){return 256==(256&this._lView[fn])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const r=this._lView[zn];if(Ui(r)){const s=r[8],a=s?s.indexOf(this):-1;a>-1&&(dd(r,a),fr(s,a))}this._attachedToViewContainer=!1}cl(this._lView[Lt],this._lView)}onDestroy(r){tn(this._lView,r)}markForCheck(){bf(this._cdRefInjectingView||this._lView)}detach(){this._lView[fn]&=-129}reattach(){this._lView[fn]|=128}detectChanges(){jg(this._lView[Lt],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new Me(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function dn(t,r){Vd(t,r,r[vn],2,null,null)}(this._lView[Lt],this._lView)}attachToAppRef(r){if(this._attachedToViewContainer)throw new Me(902,!1);this._appRef=r}}class zv extends Af{constructor(r){super(r),this._view=r}detectChanges(){const r=this._view;jg(r[Lt],r,r[Wn],!1)}checkNoChanges(){}get context(){return null}}class Sf extends mg{constructor(r){super(),this.ngModule=r}resolveComponentFactory(r){const s=Bn(r);return new ju(s,this.ngModule)}}function T_(t){const r=[];for(let s in t)t.hasOwnProperty(s)&&r.push({propName:t[s],templateName:s});return r}class Ps{constructor(r,s){this.injector=r,this.parentInjector=s}get(r,s,a){a=un(a);const l=this.injector.get(r,zl,a);return l!==zl||s===zl?l:this.parentInjector.get(r,s,a)}}class ju extends fv{get inputs(){const r=this.componentDef,s=r.inputTransforms,a=T_(r.inputs);if(null!==s)for(const l of a)s.hasOwnProperty(l.propName)&&(l.transform=s[l.propName]);return a}get outputs(){return T_(this.componentDef.outputs)}constructor(r,s){super(),this.componentDef=r,this.ngModule=s,this.componentType=r.type,this.selector=function Wi(t){return t.map(va).join(",")}(r.selectors),this.ngContentSelectors=r.ngContentSelectors?r.ngContentSelectors:[],this.isBoundToModule=!!s}create(r,s,a,l){let g=(l=l||this.ngModule)instanceof Bu?l:l?.injector;g&&null!==this.componentDef.getStandaloneInjector&&(g=this.componentDef.getStandaloneInjector(g)||g);const E=g?new Ps(r,g):r,R=E.get(pp,null);if(null===R)throw new Me(407,!1);const he={rendererFactory:R,sanitizer:E.get(mv,null),effectManager:E.get(Uv,null),afterRenderEventManager:E.get(wg,null)},ke=R.createRenderer(null,this.componentDef),We=this.componentDef.selectors[0][0]||"div",gt=a?function o_(t,r,s,a){const g=a.get(Cv,!1)||s===en.ShadowDom,E=t.selectRootElement(r,g);return function g0(t){Mg(t)}(E),E}(ke,a,this.componentDef.encapsulation,E):Ge(ke,We,function xa(t){const r=t.toLowerCase();return"svg"===r?"svg":"math"===r?"math":null}(We)),Rn=this.componentDef.signals?4608:this.componentDef.onPush?576:528;let St=null;null!==gt&&(St=hg(gt,E,!0));const mr=Tp(0,null,null,1,0,null,null,null,null,null,null),jr=wf(null,mr,null,Rn,null,null,he,ke,E,null,St);let ds,$c;k(jr);try{const jh=this.componentDef;let Em,$I=null;jh.findHostDirectiveDefs?(Em=[],$I=new Map,jh.findHostDirectiveDefs(jh,Em,$I),Em.push(jh)):Em=[jh];const KC=function C0(t,r){const s=t[Lt],a=Ln;return t[a]=r,Df(s,a,2,"#host",null)}(jr,gt),YC=function Hg(t,r,s,a,l,g,E){const R=l[Lt];!function qv(t,r,s,a){for(const l of t)r.mergedAttrs=Gs(r.mergedAttrs,l.hostAttrs);null!==r.mergedAttrs&&(Ug(r,r.mergedAttrs,!0),null!==s&&Zf(a,s,r))}(a,t,r,E);let F=null;null!==r&&(F=hg(r,l[fs]));const $=g.rendererFactory.createRenderer(r,s);let te=16;s.signals?te=4096:s.onPush&&(te=64);const he=wf(l,Ov(s),null,te,l[t.index],t,g,$,null,null,F);return R.firstCreatePass&&g_(R,t,a.length-1),Dp(l,he),l[t.index]=he}(KC,gt,jh,Em,jr,he,ke);$c=zo(mr,Ln),gt&&function A0(t,r,s,a){if(a)ma(t,s,["ng-version",vg.full]);else{const{attrs:l,classes:g}=function Va(t){const r=[],s=[];let a=1,l=2;for(;a<t.length;){let g=t[a];if("string"==typeof g)2===l?""!==g&&r.push(g,t[++a]):8===l&&s.push(g);else{if(!cr(l))break;l=g}a++}return{attrs:r,classes:s}}(r.selectors[0]);l&&ma(t,s,l),g&&g.length>0&&Yf(t,s,g.join(" "))}}(ke,jh,gt,a),void 0!==s&&function w_(t,r,s){const a=t.projection=[];for(let l=0;l<r.length;l++){const g=s[l];a.push(null!=g?Array.from(g):null)}}($c,this.ngContentSelectors,s),ds=function b_(t,r,s,a,l,g){const E=ki(),R=l[Lt],F=ys(E,l);Cf(R,l,E,s,null,a);for(let te=0;te<s.length;te++)xo(Es(l,R,E.directiveStart+te,E),l);Ph(R,l,E),F&&xo(F,l);const $=Es(l,R,E.directiveStart+E.componentOffset,E);if(t[Wn]=l[Wn]=$,null!==g)for(const te of g)te($,r);return i_(R,E,t),$}(YC,jh,Em,$I,jr,[S0]),I_(mr,jr,null)}finally{Ut()}return new Wv(this.componentType,ds,$d($c,jr),jr,$c)}}class Wv extends t0{constructor(r,s,a,l,g){super(),this.location=a,this._rootLView=l,this._tNode=g,this.previousInputValues=null,this.instance=s,this.hostView=this.changeDetectorRef=new zv(l),this.componentType=r}setInput(r,s){const a=this._tNode.inputs;let l;if(null!==a&&(l=a[r])){if(this.previousInputValues??=new Map,this.previousInputValues.has(r)&&Object.is(this.previousInputValues.get(r),s))return;const g=this._rootLView;y_(g[Lt],g,l,r,s),this.previousInputValues.set(r,s),bf(Vr(this._tNode.index,g))}}get injector(){return new Fi(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(r){this.hostView.onDestroy(r)}}function S0(){const t=ki();oa(bt()[Lt],t)}function Xi(t){let r=function Kv(t){return Object.getPrototypeOf(t.prototype).constructor}(t.type),s=!0;const a=[t];for(;r;){let l;if(Ss(t))l=r.\u0275cmp||r.\u0275dir;else{if(r.\u0275cmp)throw new Me(903,!1);l=r.\u0275dir}if(l){if(s){a.push(l);const E=t;E.inputs=D_(t.inputs),E.inputTransforms=D_(t.inputTransforms),E.declaredInputs=D_(t.declaredInputs),E.outputs=D_(t.outputs);const R=l.hostBindings;R&&R0(t,R);const F=l.viewQuery,$=l.contentQueries;if(F&&oo(t,F),$&&Yv(t,$),me(t.inputs,l.inputs),me(t.declaredInputs,l.declaredInputs),me(t.outputs,l.outputs),null!==l.inputTransforms&&(null===E.inputTransforms&&(E.inputTransforms={}),me(E.inputTransforms,l.inputTransforms)),Ss(l)&&l.data.animation){const te=t.data;te.animation=(te.animation||[]).concat(l.data.animation)}}const g=l.features;if(g)for(let E=0;E<g.length;E++){const R=g[E];R&&R.ngInherit&&R(t),R===Xi&&(s=!1)}}r=Object.getPrototypeOf(r)}!function KI(t){let r=0,s=null;for(let a=t.length-1;a>=0;a--){const l=t[a];l.hostVars=r+=l.hostVars,l.hostAttrs=Gs(l.hostAttrs,s=Gs(s,l.hostAttrs))}}(a)}function D_(t){return t===_n?{}:t===jt?[]:t}function oo(t,r){const s=t.viewQuery;t.viewQuery=s?(a,l)=>{r(a,l),s(a,l)}:r}function Yv(t,r){const s=t.contentQueries;t.contentQueries=s?(a,l,g)=>{r(a,l,g),s(a,l,g)}:r}function R0(t,r){const s=t.hostBindings;t.hostBindings=s?(a,l)=>{r(a,l),s(a,l)}:r}function Qv(t){return r=>{r.findHostDirectiveDefs=Jv,r.hostDirectives=(Array.isArray(t)?t:t()).map(s=>"function"==typeof s?{directive:ft(s),inputs:_n,outputs:_n}:{directive:ft(s.directive),inputs:Xv(s.inputs),outputs:Xv(s.outputs)})}}function Jv(t,r,s){if(null!==t.hostDirectives)for(const a of t.hostDirectives){const l=fi(a.directive);YI(l.declaredInputs,a.inputs),Jv(l,r,s),s.set(l,a),r.push(l)}}function Xv(t){if(void 0===t||0===t.length)return _n;const r={};for(let s=0;s<t.length;s+=2)r[t[s]]=t[s+1];return r}function YI(t,r){for(const s in r)r.hasOwnProperty(s)&&(t[r[s]]=t[s])}function C_(t){const r=t.inputConfig,s={};for(const a in r)if(r.hasOwnProperty(a)){const l=r[a];Array.isArray(l)&&l[2]&&(s[a]=l[2])}t.inputTransforms=s}function zg(t){return!!ty(t)&&(Array.isArray(t)||!(t instanceof Map)&&Symbol.iterator in t)}function ty(t){return null!==t&&("function"==typeof t||"object"==typeof t)}function pc(t,r,s){return t[r]=s}function Qa(t,r,s){return!Object.is(t[r],s)&&(t[r]=s,!0)}function Yd(t,r,s,a){const l=Qa(t,r,s);return Qa(t,r+1,a)||l}function Rp(t,r,s,a,l){const g=Yd(t,r,s,a);return Qa(t,r+2,l)||g}function A_(t,r,s,a){const l=bt();return Qa(l,Au(),r)&&(dr(),Uc(ti(),l,t,r,s,a)),A_}function Id(t,r,s,a){return Qa(t,Au(),s)?r+Ne(s)+a:_r}function Zd(t,r,s,a,l,g,E,R,F,$){const he=function Eu(t,r,s,a,l,g){const E=Yd(t,r,s,a);return Yd(t,r+2,l,g)||E}(t,Aa(),s,l,E,F);return eo(4),he?r+Ne(s)+a+Ne(l)+g+Ne(E)+R+Ne(F)+$:_r}function U0(t,r,s,a,l,g,E,R){const F=bt(),$=dr(),te=t+Ln,he=$.firstCreatePass?function B0(t,r,s,a,l,g,E,R,F){const $=r.consts,te=Df(r,t,4,E||null,$a($,R));f_(r,s,te,$a($,F)),oa(r,te);const he=te.tView=Tp(2,te,a,l,g,r.directiveRegistry,r.pipeRegistry,null,r.schemas,$,null);return null!==r.queries&&(r.queries.template(r,te),he.queries=r.queries.embeddedTView(te)),te}(te,$,F,r,s,a,l,g,E):$.data[te];rn(he,!1);const ke=j0($,F,he,t);Sd()&&Ld($,F,ke,he),xo(ke,F),Dp(F,F[te]=wp(ke,F,ke,he)),Lr(he)&&Ep($,F,he),null!=E&&s_(F,he,R)}let j0=function Xd(t,r,s,a){return Wo(!0),r[vn].createComment("")};function cy(t){return Is(function Ad(){return Fn.lFrame.contextLView}(),Ln+t)}function tm(t,r,s){const a=bt();return Qa(a,Au(),r)&&fc(dr(),ti(),a,t,r,a[vn],s,!1),tm}function P_(t,r,s,a,l){const E=l?"class":"style";y_(t,s,r.inputs[E],E,a)}function nm(t,r,s,a){const l=bt(),g=dr(),E=Ln+t,R=l[vn],F=g.firstCreatePass?function th(t,r,s,a,l,g){const E=r.consts,F=Df(r,t,2,a,$a(E,l));return f_(r,s,F,$a(E,g)),null!==F.attrs&&Ug(F,F.attrs,!1),null!==F.mergedAttrs&&Ug(F,F.mergedAttrs,!0),null!==r.queries&&r.queries.elementStart(r,F),F}(E,g,l,r,s,a):g.data[E],$=ly(g,l,F,R,r,t);l[E]=$;const te=Lr(F);return rn(F,!0),Zf(R,$,F),32!=(32&F.flags)&&Sd()&&Ld(g,l,$,F),0===function vt(){return Fn.lFrame.elementDepthCount}()&&xo($,l),function Vs(){Fn.lFrame.elementDepthCount++}(),te&&(Ep(g,l,F),i_(g,F,l)),null!==a&&s_(l,F),nm}function rm(){let t=ki();Xs()?Xn():(t=t.parent,rn(t,!1));const r=t;(function za(t){return Fn.skipHydrationRootTNode===t})(r)&&function Tl(){Fn.skipHydrationRootTNode=null}(),function Ca(){Fn.lFrame.elementDepthCount--}();const s=dr();return s.firstCreatePass&&(oa(s,t),Fs(t)&&s.queries.elementEnd(t)),null!=r.classesWithoutHost&&function Zc(t){return 0!=(8&t.flags)}(r)&&P_(s,r,bt(),r.classesWithoutHost,!0),null!=r.stylesWithoutHost&&function oh(t){return 0!=(16&t.flags)}(r)&&P_(s,r,bt(),r.stylesWithoutHost,!1),rm}function M_(t,r,s,a){return nm(t,r,s,a),rm(),M_}let ly=(t,r,s,a,l,g)=>(Wo(!0),Ge(a,l,function Ic(){return Fn.lFrame.currentNamespace}()));function im(t,r,s){const a=bt(),l=dr(),g=t+Ln,E=l.firstCreatePass?function hy(t,r,s,a,l){const g=r.consts,E=$a(g,a),R=Df(r,t,8,"ng-container",E);return null!==E&&Ug(R,E,!0),f_(r,s,R,$a(g,l)),null!==r.queries&&r.queries.elementStart(r,R),R}(g,l,a,r,s):l.data[g];rn(E,!0);const R=fy(l,a,E,t);return a[g]=R,Sd()&&Ld(l,a,R,E),xo(R,a),Lr(E)&&(Ep(l,a,E),i_(l,E,a)),null!=s&&s_(a,E),im}function sm(){let t=ki();const r=dr();return Xs()?Xn():(t=t.parent,rn(t,!1)),r.firstCreatePass&&(oa(r,t),Fs(t)&&r.queries.elementEnd(t)),sm}let fy=(t,r,s,a)=>(Wo(!0),ye(r[vn],""));function H0(){return bt()}function F_(t){return!!t&&"function"==typeof t.then}function py(t){return!!t&&"function"==typeof t.subscribe}function L_(t,r,s,a){const l=bt(),g=dr(),E=ki();return function z0(t,r,s,a,l,g,E){const R=Lr(a),$=t.firstCreatePass&&v_(t),te=r[Wn],he=Vg(r);let ke=!0;if(3&a.type||E){const xt=ys(a,r),cn=E?E(xt):xt,Rn=he.length,St=E?jr=>E($r(jr[a.index])):a.index;let mr=null;if(!E&&R&&(mr=function $0(t,r,s,a){const l=t.cleanup;if(null!=l)for(let g=0;g<l.length-1;g+=2){const E=l[g];if(E===s&&l[g+1]===a){const R=r[Zr],F=l[g+2];return R.length>F?R[F]:null}"string"==typeof E&&(g+=2)}return null}(t,r,l,a.index)),null!==mr)(mr.__ngLastListenerFn__||mr).__ngNextListenerFn__=g,mr.__ngLastListenerFn__=g,ke=!1;else{g=q0(a,r,te,g,!1);const jr=s.listen(cn,l,g);he.push(g,jr),$&&$.push(l,St,Rn,Rn+1)}}else g=q0(a,r,te,g,!1);const We=a.outputs;let gt;if(ke&&null!==We&&(gt=We[l])){const xt=gt.length;if(xt)for(let cn=0;cn<xt;cn+=2){const ds=r[gt[cn]][gt[cn+1]].subscribe(g),$c=he.length;he.push(g,ds),$&&$.push(l,a.index,$c,-($c+1))}}}(g,l,l[vn],E,t,r,a),L_}function W0(t,r,s,a){try{return wi(6,r,s),!1!==s(a)}catch(l){return Bg(t,l),!1}finally{wi(7,r,s)}}function q0(t,r,s,a,l){return function g(E){if(E===Function)return a;bf(t.componentOffset>-1?Vr(t.index,r):r);let F=W0(r,s,a,E),$=g.__ngNextListenerFn__;for(;$;)F=W0(r,s,$,E)&&F,$=$.__ngNextListenerFn__;return l&&!1===F&&E.preventDefault(),F}}function K0(t=1){return function Kn(t){return(Fn.lFrame.contextLView=function hr(t,r){for(;t>0;)r=r[ps],t--;return r}(t,Fn.lFrame.contextLView))[Wn]}(t)}function Y0(t,r){let s=null;const a=function Ei(t){const r=t.attrs;if(null!=r){const s=r.indexOf(5);if(!(1&s))return r[s+1]}return null}(t);for(let l=0;l<r.length;l++){const g=r[l];if("*"!==g){if(null===a?ts(t,g,!0):_a(a,g))return l}else s=l}return s}function my(t){const r=bt()[ii][vr];if(!r.projection){const a=r.projection=Pr(t?t.length:1,null),l=a.slice();let g=r.child;for(;null!==g;){const E=t?Y0(g,t):0;null!==E&&(l[E]?l[E].projectionNext=g:a[E]=g,l[E]=g),g=g.next}}}function _y(t,r=0,s){const a=bt(),l=dr(),g=Df(l,Ln+t,16,null,s||null);null===g.projection&&(g.projection=r),Xn(),(!a[ms]||Cu())&&32!=(32&g.flags)&&function cv(t,r,s){wm(r[vn],0,r,s,ls(t,s,r),Xh(s.parent||r[vr],s,r))}(l,a,g)}function vy(t,r,s){return om(t,"",r,"",s),vy}function om(t,r,s,a,l){const g=bt(),E=Id(g,r,s,a);return E!==_r&&fc(dr(),ti(),g,t,E,g[vn],l,!1),om}function am(t,r){return t<<17|r<<2}function Lh(t){return t>>17&32767}function B_(t){return 2|t}function Lf(t){return(131068&t)>>2}function Cy(t,r){return-131069&t|r<<2}function Ay(t){return 1|t}function Up(t,r,s,a,l){const g=t[s+1],E=null===r;let R=a?Lh(g):Lf(g),F=!1;for(;0!==R&&(!1===F||E);){const te=t[R+1];J0(t[R],r)&&(F=!0,t[R+1]=a?Ay(te):B_(te)),R=a?Lh(te):Lf(te)}F&&(t[s+1]=a?B_(g):Ay(g))}function J0(t,r){return null===t||null==r||(Array.isArray(t)?t[1]:t)===r||!(!Array.isArray(t)||"string"!=typeof r)&&ku(t,r)>=0}const Xo={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function um(t){return t.substring(Xo.key,Xo.keyEnd)}function Vf(t,r){const s=Xo.textEnd;return s===r?-1:(r=Xo.keyEnd=function cm(t,r,s){for(;r<s&&t.charCodeAt(r)>32;)r++;return r}(t,Xo.key=r,s),Vh(t,r,s))}function Vh(t,r,s){for(;r<s&&t.charCodeAt(r)<=32;)r++;return r}function ka(t,r,s){return yl(t,r,s,!1),ka}function lm(t,r){return yl(t,r,null,!0),lm}function Bf(t){!function gc(t,r,s,a){const l=dr(),g=eo(2);l.firstUpdatePass&&rh(l,null,g,a);const E=bt();if(s!==_r&&Qa(E,g,s)){const R=l.data[An()];if(hm(R,a)&&!Bh(l,g)){let F=a?R.classesWithoutHost:R.stylesWithoutHost;null!==F&&(s=dt(F,s||"")),P_(l,R,E,s,a)}else!function W_(t,r,s,a,l,g,E,R){l===_r&&(l=jt);let F=0,$=0,te=0<l.length?l[0]:null,he=0<g.length?g[0]:null;for(;null!==te||null!==he;){const ke=F<l.length?l[F+1]:void 0,We=$<g.length?g[$+1]:void 0;let xt,gt=null;te===he?(F+=2,$+=2,ke!==We&&(gt=he,xt=We)):null===he||null!==te&&te<he?(F+=2,gt=te):($+=2,gt=he,xt=We),null!==gt&&q_(t,r,s,a,gt,xt,E,R),te=F<l.length?l[F]:null,he=$<g.length?g[$]:null}}(l,R,E,E[vn],E[g+1],E[g+1]=function nI(t,r,s){if(null==s||""===s)return jt;const a=[],l=Ll(s);if(Array.isArray(l))for(let g=0;g<l.length;g++)t(a,l[g],!0);else if("object"==typeof l)for(const g in l)l.hasOwnProperty(g)&&t(a,g,l[g]);else"string"==typeof l&&r(a,l);return a}(t,r,s),a,g)}}(rI,Us,t,!0)}function Us(t,r){for(let s=function Ry(t){return function Oy(t){Xo.key=0,Xo.keyEnd=0,Xo.value=0,Xo.valueEnd=0,Xo.textEnd=t.length}(t),Vf(t,Vh(t,0,Xo.textEnd))}(r);s>=0;s=Vf(r,s))Ns(t,um(r),!0)}function yl(t,r,s,a){const l=bt(),g=dr(),E=eo(2);g.firstUpdatePass&&rh(g,t,E,a),r!==_r&&Qa(l,E,r)&&q_(g,g.data[An()],l,l[vn],t,l[E+1]=function iI(t,r){return null==t||""===t||("string"==typeof r?t+=r:"object"==typeof t&&(t=Pe(Ll(t)))),t}(r,s),a,E)}function Bh(t,r){return r>=t.expandoStartIndex}function rh(t,r,s,a){const l=t.data;if(null===l[s+1]){const g=l[An()],E=Bh(t,s);hm(g,a)&&null===r&&!E&&(r=!1),r=function H_(t,r,s,a){const l=function Yc(t){const r=Fn.lFrame.currentDirectiveIndex;return-1===r?null:t[r]}(t);let g=a?r.residualClasses:r.residualStyles;if(null===l)0===(a?r.classBindings:r.styleBindings)&&(s=dm(s=$_(null,t,r,s,a),r.attrs,a),g=null);else{const E=r.directiveStylingLast;if(-1===E||t[E]!==l)if(s=$_(l,t,r,s,a),null===g){let F=function Uh(t,r,s){const a=s?r.classBindings:r.styleBindings;if(0!==Lf(a))return t[Lh(a)]}(t,r,a);void 0!==F&&Array.isArray(F)&&(F=$_(null,t,r,F[1],a),F=dm(F,r.attrs,a),function eI(t,r,s,a){t[Lh(s?r.classBindings:r.styleBindings)]=a}(t,r,a,F))}else g=function tI(t,r,s){let a;const l=r.directiveEnd;for(let g=1+r.directiveStylingLast;g<l;g++)a=dm(a,t[g].hostAttrs,s);return dm(a,r.attrs,s)}(t,r,a)}return void 0!==g&&(a?r.residualClasses=g:r.residualStyles=g),s}(l,g,r,a),function tE(t,r,s,a,l,g){let E=g?r.classBindings:r.styleBindings,R=Lh(E),F=Lf(E);t[a]=s;let te,$=!1;if(Array.isArray(s)?(te=s[1],(null===te||ku(s,te)>0)&&($=!0)):te=s,l)if(0!==F){const ke=Lh(t[R+1]);t[a+1]=am(ke,R),0!==ke&&(t[ke+1]=Cy(t[ke+1],a)),t[R+1]=function Dy(t,r){return 131071&t|r<<17}(t[R+1],a)}else t[a+1]=am(R,0),0!==R&&(t[R+1]=Cy(t[R+1],a)),R=a;else t[a+1]=am(F,0),0===R?R=a:t[F+1]=Cy(t[F+1],a),F=a;$&&(t[a+1]=B_(t[a+1])),Up(t,te,a,!0),Up(t,te,a,!1),function U_(t,r,s,a,l){const g=l?t.residualClasses:t.residualStyles;null!=g&&"string"==typeof r&&ku(g,r)>=0&&(s[a+1]=Ay(s[a+1]))}(r,te,t,a,g),E=am(R,F),g?r.classBindings=E:r.styleBindings=E}(l,g,r,s,E,a)}}function $_(t,r,s,a,l){let g=null;const E=s.directiveEnd;let R=s.directiveStylingLast;for(-1===R?R=s.directiveStart:R++;R<E&&(g=r[R],a=dm(a,g.hostAttrs,l),g!==t);)R++;return null!==t&&(s.directiveStylingLast=R),a}function dm(t,r,s){const a=s?1:2;let l=-1;if(null!==r)for(let g=0;g<r.length;g++){const E=r[g];"number"==typeof E?l=E:l===a&&(Array.isArray(t)||(t=void 0===t?[]:["",t]),Ns(t,E,!!s||r[++g]))}return void 0===t?null:t}function rI(t,r,s){const a=String(r);""!==a&&!a.includes(" ")&&Ns(t,a,s)}function q_(t,r,s,a,l,g,E,R){if(!(3&r.type))return;const F=t.data,$=F[R+1],te=function eE(t){return 1==(1&t)}($)?Gp(F,r,s,l,Lf($),E):void 0;Hp(te)||(Hp(g)||function XI(t){return 2==(2&t)}($)&&(g=Gp(F,null,s,l,R,E)),function vh(t,r,s,a,l){if(r)l?t.addClass(s,a):t.removeClass(s,a);else{let g=-1===a.indexOf("-")?void 0:qa.DashCase;null==l?t.removeStyle(s,a,g):("string"==typeof l&&l.endsWith("!important")&&(l=l.slice(0,-10),g|=qa.Important),t.setStyle(s,a,l,g))}}(a,E,$u(An(),s),l,g))}function Gp(t,r,s,a,l,g){const E=null===r;let R;for(;l>0;){const F=t[l],$=Array.isArray(F),te=$?F[1]:F,he=null===te;let ke=s[l+1];ke===_r&&(ke=he?jt:void 0);let We=he?id(ke,a):te===a?ke:void 0;if($&&!Hp(We)&&(We=id(F,a)),Hp(We)&&(R=We,E))return R;const gt=t[l+1];l=E?Lh(gt):Lf(gt)}if(null!==r){let F=g?r.residualClasses:r.residualStyles;null!=F&&(R=id(F,a))}return R}function Hp(t){return void 0!==t}function hm(t,r){return 0!=(t.flags&(r?8:16))}function My(t,r=""){const s=bt(),a=dr(),l=t+Ln,g=a.firstCreatePass?Df(a,l,1,r,null):a.data[l],E=K_(a,s,g,r,t);s[l]=E,Sd()&&Ld(a,s,E,g),rn(g,!1)}let K_=(t,r,s,a,l)=>(Wo(!0),G(r[vn],a));function Y_(t){return fm("",t,""),Y_}function fm(t,r,s){const a=bt(),l=Id(a,t,r,s);return l!==_r&&vd(a,An(),l),fm}function Z_(t,r,s,a,l){const g=bt(),E=function Yl(t,r,s,a,l,g){const R=Yd(t,Aa(),s,l);return eo(2),R?r+Ne(s)+a+Ne(l)+g:_r}(g,t,r,s,a,l);return E!==_r&&vd(g,An(),E),Z_}function Q_(t,r,s,a,l,g,E){const R=bt(),F=function kh(t,r,s,a,l,g,E,R){const $=Rp(t,Aa(),s,l,E);return eo(3),$?r+Ne(s)+a+Ne(l)+g+Ne(E)+R:_r}(R,t,r,s,a,l,g,E);return F!==_r&&vd(R,An(),F),Q_}function pm(t,r,s,a,l,g,E,R,F){const $=bt(),te=Zd($,t,r,s,a,l,g,E,R,F);return te!==_r&&vd($,An(),te),pm}function aI(t,r,s){const a=bt();return Qa(a,Au(),r)&&fc(dr(),ti(),a,t,r,a[vn],s,!0),aI}const $p=void 0;var Tb=["en",[["a","p"],["AM","PM"],$p],[["AM","PM"],$p,$p],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],$p,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],$p,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",$p,"{1} 'at' {0}",$p],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function Eb(t){const s=Math.floor(Math.abs(t)),a=t.toString().replace(/^[^.]*\.?/,"").length;return 1===s&&0===a?1:5}];let gm={};function uI(t){const r=function bb(t){return t.toLowerCase().replace(/_/g,"-")}(t);let s=aE(r);if(s)return s;const a=r.split("-")[0];if(s=aE(a),s)return s;if("en"===a)return Tb;throw new Me(701,!1)}function oE(t){return uI(t)[mm.PluralCase]}function aE(t){return t in gm||(gm[t]=Mn.ng&&Mn.ng.common&&Mn.ng.common.locales&&Mn.ng.common.locales[t]),gm[t]}var mm=function(t){return t[t.LocaleId=0]="LocaleId",t[t.DayPeriodsFormat=1]="DayPeriodsFormat",t[t.DayPeriodsStandalone=2]="DayPeriodsStandalone",t[t.DaysFormat=3]="DaysFormat",t[t.DaysStandalone=4]="DaysStandalone",t[t.MonthsFormat=5]="MonthsFormat",t[t.MonthsStandalone=6]="MonthsStandalone",t[t.Eras=7]="Eras",t[t.FirstDayOfWeek=8]="FirstDayOfWeek",t[t.WeekendRange=9]="WeekendRange",t[t.DateFormat=10]="DateFormat",t[t.TimeFormat=11]="TimeFormat",t[t.DateTimeFormat=12]="DateTimeFormat",t[t.NumberSymbols=13]="NumberSymbols",t[t.NumberFormats=14]="NumberFormats",t[t.CurrencyCode=15]="CurrencyCode",t[t.CurrencySymbol=16]="CurrencySymbol",t[t.CurrencyName=17]="CurrencyName",t[t.Currencies=18]="Currencies",t[t.Directionality=19]="Directionality",t[t.PluralCase=20]="PluralCase",t[t.ExtraData=21]="ExtraData",t}(mm||{});const _m="en-US",Ly={marker:"element"},Vy={marker:"ICU"};var Gc=function(t){return t[t.SHIFT=2]="SHIFT",t[t.APPEND_EAGERLY=1]="APPEND_EAGERLY",t[t.COMMENT=2]="COMMENT",t}(Gc||{});let uE=_m;function cE(t){(function Pt(t,r){null==t&&Ct(r,t,null,"!=")})(t,"Expected localeId to be defined"),"string"==typeof t&&(uE=t.toLowerCase().replace(/_/g,"-"))}function lE(t,r,s){const a=r.insertBeforeIndex,l=Array.isArray(a)?a[0]:a;return null===l?ef(t,0,s):$r(s[l])}function dE(t,r,s,a,l){const g=r.insertBeforeIndex;if(Array.isArray(g)){let E=a,R=null;if(3&r.type||(R=E,E=l),null!==E&&-1===r.componentOffset)for(let F=1;F<g.length;F++)yu(t,E,s[g[F]],R,!1)}}function hE(t,r){if(t.push(r),t.length>1)for(let s=t.length-2;s>=0;s--){const a=t[s];fE(a)||Sb(a,r)&&null===Rb(a)&&Nb(a,r.index)}}function fE(t){return!(64&t.type)}function Sb(t,r){return fE(r)||t.index>r.index}function Rb(t){const r=t.insertBeforeIndex;return Array.isArray(r)?r[0]:r}function Nb(t,r){const s=t.insertBeforeIndex;Array.isArray(s)?s[0]=r:(fd(lE,dE),t.insertBeforeIndex=r)}function Mb(t,r,s){const a=Ip(t,s,64,null,null);return hE(r,a),a}function Ub(){const t=[];let s,a,r=-1;function g(R,F){r=0;const $=function By(t,r){const s=r[t.currentCaseLViewIndex];return null===s?s:s<0?~s:s}(R,F);a=null!==$?R.remove[$]:jt}function E(){if(r<a.length){const R=a[r++];return R>0?s[R]:(t.push(r,a),g(s[Lt].data[~R],s),E())}return 0===t.length?null:(a=t.pop(),r=t.pop(),E())}return function l(R,F){for(s=F;t.length;)t.pop();return g(R.value,F),E}}const Uy=/\ufffd(\d+):?\d*\ufffd/gi,Gb=/\ufffd(\d+)\ufffd/,TE=/^\s*(\ufffd\d+:?\d*\ufffd)\s*,\s*(select|plural)\s*,/,nv="\ufffd",Hb=/\ufffd\/?\*(\d+:\d+)\ufffd/gi,$b=/\ufffd(\/?[#*]\d+):?\d*\ufffd/gi,zb=/\uE500/g;function bE(t,r,s,a,l,g,E){const R=hc(t,a,1,null);let F=R<<Gc.SHIFT,$=Rr();r===$&&($=null),null===$&&(F|=Gc.APPEND_EAGERLY),E&&(F|=Gc.COMMENT,function ld(t){void 0===gh&&(gh=t())}(Ub)),l.push(F,null===g?"":g);const te=Ip(t,R,E?32:1,null===g?"":g,null);hE(s,te);const he=te.index;return rn(te,!1),null!==$&&r!==$&&function Pb(t,r){let s=t.insertBeforeIndex;null===s?(fd(lE,dE),s=t.insertBeforeIndex=[null,r]):(function or(t,r,s){t!=r&&Ct(s,t,r,"==")}(Array.isArray(s),!0,"Expecting array here"),s.push(r))}($,he),te}function Kb(t,r,s,a,l,g,E){const R=E.match(Uy),F=bE(t,r,s,g,a,R?null:E,!1);R&&rv(l,E,F.index,null,0,null)}function rv(t,r,s,a,l,g){const E=t.length,R=E+1;t.push(null,null);const F=E+2,$=r.split(Uy);let te=0;for(let he=0;he<$.length;he++){const ke=$[he];if(1&he){const We=l+parseInt(ke,10);t.push(-1-We),te|=wE(We)}else""!==ke&&t.push(ke)}return t.push(s<<2|(a?1:0)),a&&t.push(a,g),t[E]=te,t[R]=t.length-F,te}function wE(t){return 1<<Math.min(t,31)}function DE(t){let r,g,s="",a=0,l=!1;for(;null!==(r=Hb.exec(t));)l?r[0]===`${nv}/*${g}${nv}`&&(a=r.index,l=!1):(s+=t.substring(a,r.index+r[0].length),g=r[1],l=!0);return s+=t.slice(a),s}function CE(t,r,s,a,l,g){let E=0;const R={type:l.type,currentCaseLViewIndex:hc(t,r,1,null),anchorIdx:g,cases:[],create:[],remove:[],update:[]};(function nw(t,r,s){t.push(wE(r.mainBinding),2,-1-r.mainBinding,s<<2|2)})(s,l,g),function Ob(t,r,s){const a=t.data[r];null===a?t.data[r]=s:a.value=s}(t,g,R);const F=l.values;for(let $=0;$<F.length;$++){const te=F[$],he=[];for(let ke=0;ke<te.length;ke++){const We=te[ke];if("string"!=typeof We){const gt=he.push(We)-1;te[ke]=`\x3c!--\ufffd${gt}\ufffd--\x3e`}}E=ew(t,R,r,s,a,l.cases[$],te.join(""),he)|E}E&&function rw(t,r,s){t.push(r,1,s<<2|3)}(s,E,g)}function Xb(t){const r=[],s=[];let a=1,l=0;const g=cI(t=t.replace(TE,function(E,R,F){return a="select"===F?0:1,l=parseInt(R.slice(1),10),""}));for(let E=0;E<g.length;){let R=g[E++].trim();1===a&&(R=R.replace(/\s*(?:=)?(\w+)\s*/,"$1")),R.length&&r.push(R);const F=cI(g[E++]);r.length>s.length&&s.push(F)}return{type:a,mainBinding:l,cases:r,values:s}}function cI(t){if(!t)return[];let r=0;const s=[],a=[],l=/[{}]/g;let g;for(l.lastIndex=0;g=l.exec(t);){const R=g.index;if("}"==g[0]){if(s.pop(),0==s.length){const F=t.substring(r,R);TE.test(F)?a.push(Xb(F)):a.push(F),r=R+1}}else{if(0==s.length){const F=t.substring(r,R);a.push(F),r=R+1}s.push("{")}}const E=t.substring(r);return a.push(E),a}function ew(t,r,s,a,l,g,E,R){const F=[],$=[],te=[];r.cases.push(g),r.create.push(F),r.remove.push($),r.update.push(te);const ke=function eg(t){const r=new tg(t);return function ng(){try{return!!(new window.DOMParser).parseFromString(yh(""),"text/html")}catch{return!1}}()?new Sm(r):r}(Fl()).getInertBodyElement(E),We=function d(t){return"content"in t&&function D(t){return t.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===t.nodeName}(t)?t.content:null}(ke)||ke;return We?AE(t,r,s,a,F,$,te,We,l,R,0):0}function AE(t,r,s,a,l,g,E,R,F,$,te){let he=0,ke=R.firstChild;for(;ke;){const We=hc(t,s,1,null);switch(ke.nodeType){case Node.ELEMENT_NODE:const gt=ke,xt=gt.tagName.toLowerCase();if(tp.hasOwnProperty(xt)){lI(l,Ly,xt,F,We),t.data[We]=xt;const mr=gt.attributes;for(let jr=0;jr<mr.length;jr++){const ds=mr.item(jr),$c=ds.name.toLowerCase();ds.value.match(Uy)?sg.hasOwnProperty($c)&&rv(E,ds.value,We,ds.name,0,Vl[$c]?ep:null):iw(l,We,ds)}he=AE(t,r,s,a,l,g,E,ke,We,$,te+1)|he,SE(g,We,te)}break;case Node.TEXT_NODE:const cn=ke.textContent||"",Rn=cn.match(Uy);lI(l,null,Rn?"":cn,F,We),SE(g,We,te),Rn&&(he=rv(E,cn,We,null,0,null)|he);break;case Node.COMMENT_NODE:const St=Gb.exec(ke.textContent||"");if(St){const jr=$[parseInt(St[1],10)];lI(l,Vy,"",F,We),CE(t,s,a,F,jr,We),tw(g,We,te)}}ke=ke.nextSibling}return he}function SE(t,r,s){0===s&&t.push(r)}function tw(t,r,s){0===s&&(t.push(~r),t.push(r))}function lI(t,r,s,a,l){null!==r&&t.push(r),t.push(s,l,function xb(t,r,s){return t|r<<17|s<<1}(0,a,l))}function iw(t,r,s){t.push(r<<1|1,s.name,s.value)}function NE(t,r,s=-1){const a=dr(),l=bt(),g=Ln+t,E=$a(a.consts,r),R=Rr();a.firstCreatePass&&function qb(t,r,s,a,l,g){const E=Rr(),R=[],F=[],$=[[]];l=function Jb(t,r){if(function Qb(t){return-1===t}(r))return DE(t);{const s=t.indexOf(`:${r}${nv}`)+2+r.toString().length,a=t.search(new RegExp(`${nv}\\/\\*\\d+:${r}${nv}`));return DE(t.substring(s,a))}}(l,g);const te=function Wb(t){return t.replace(zb," ")}(l).split($b);for(let he=0;he<te.length;he++){let ke=te[he];if(1&he){const We=47===ke.charCodeAt(0),xt=(ke.charCodeAt(We?1:0),Ln+Number.parseInt(ke.substring(We?2:1)));if(We)$.shift(),rn(Rr(),!1);else{const cn=Mb(t,$[0],xt);$.unshift([]),rn(cn,!0)}}else{const We=cI(ke);for(let gt=0;gt<We.length;gt++){let xt=We[gt];if(1&gt){const cn=xt;if("object"!=typeof cn)throw new Error(`Unable to parse ICU expression in "${l}" message.`);CE(t,s,F,r,cn,bE(t,E,$[0],s,R,"",!0).index)}else""!==xt&&Kb(t,E,$[0],R,F,s,xt)}}}t.data[a]={create:R,update:F}}(a,null===R?0:R.index,l,g,E,s),2===a.type?l[ii][fn]|=32:l[fn]|=32;const F=a.data[g],te=Fd(a,R===l[vr]?null:R,l);(function Lb(t,r,s,a){const l=t[vn];for(let g=0;g<r.length;g++){const E=r[g++],R=r[g],$=(E&Gc.APPEND_EAGERLY)===Gc.APPEND_EAGERLY,te=E>>>Gc.SHIFT;let he=t[te];null===he&&(he=t[te]=(E&Gc.COMMENT)===Gc.COMMENT?l.createComment(R):G(l,R)),$&&null!==s&&yu(l,s,he,a,!1)}})(l,F.create,te,R&&8&R.type?l[R.index]:null),Kc(!0)}function PE(t,r,s){NE(t,r,s),function OE(){Kc(!1)}()}function dI(t,r,s,a,l){if(t=ft(t),Array.isArray(t))for(let g=0;g<t.length;g++)dI(t[g],r,s,a,l);else{const g=dr(),E=bt(),R=ki();let F=Iu(t)?t:ft(t.provide);const $=fl(t),te=1048575&R.providerIndexes,he=R.directiveStart,ke=R.providerIndexes>>20;if(Iu(t)||!t.multi){const We=new Tc($,l,qd),gt=fI(F,r,l?te:te+ke,he);-1===gt?(wc(aa(R,E),g,F),hI(g,t,r.length),r.push(F),R.directiveStart++,R.directiveEnd++,l&&(R.providerIndexes+=1048576),s.push(We),E.push(We)):(s[gt]=We,E[gt]=We)}else{const We=fI(F,r,te+ke,he),gt=fI(F,r,te,te+ke),cn=gt>=0&&s[gt];if(l&&!cn||!l&&!(We>=0&&s[We])){wc(aa(R,E),g,F);const Rn=function Iw(t,r,s,a,l){const g=new Tc(t,s,qd);return g.multi=[],g.index=r,g.componentProviders=0,xE(g,l,a&&!s),g}(l?yw:vw,s.length,l,a,$);!l&&cn&&(s[gt].providerFactory=Rn),hI(g,t,r.length,0),r.push(F),R.directiveStart++,R.directiveEnd++,l&&(R.providerIndexes+=1048576),s.push(Rn),E.push(Rn)}else hI(g,t,We>-1?We:gt,xE(s[l?gt:We],$,!l&&a));!l&&a&&cn&&s[gt].componentProviders++}}}function hI(t,r,s,a){const l=Iu(r),g=function md(t){return!!t.useClass}(r);if(l||g){const F=(g?ft(r.useClass):r).prototype.ngOnDestroy;if(F){const $=t.destroyHooks||(t.destroyHooks=[]);if(!l&&r.multi){const te=$.indexOf(s);-1===te?$.push(s,[a,F]):$[te+1].push(a,F)}else $.push(s,F)}}}function xE(t,r,s){return s&&t.componentProviders++,t.multi.push(r)-1}function fI(t,r,s,a){for(let l=s;l<a;l++)if(r[l]===t)return l;return-1}function vw(t,r,s,a){return pI(this.multi,[])}function yw(t,r,s,a){const l=this.multi;let g;if(this.providerFactory){const E=this.providerFactory.componentProviders,R=Es(s,s[Lt],this.providerFactory.index,a);g=R.slice(0,E),pI(l,g);for(let F=E;F<R.length;F++)g.push(R[F])}else g=[],pI(l,g);return g}function pI(t,r){for(let s=0;s<t.length;s++)r.push((0,t[s])());return r}function kE(t,r=[]){return s=>{s.providersResolver=(a,l)=>function _w(t,r,s){const a=dr();if(a.firstCreatePass){const l=Ss(t);dI(s,a.data,a.blueprint,l,!0),dI(r,a.data,a.blueprint,l,!1)}}(a,l?l(t):t,r)}}class zp{}class FE{}function Ew(t,r){return new gI(t,r??null,[])}class gI extends zp{constructor(r,s,a){super(),this._parent=s,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new Sf(this);const l=Er(r);this._bootstrapComponents=ml(l.bootstrap),this._r3Injector=yv(r,s,[{provide:zp,useValue:this},{provide:mg,useValue:this.componentFactoryResolver},...a],Pe(r),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(r)}get injector(){return this._r3Injector}destroy(){const r=this._r3Injector;!r.destroyed&&r.destroy(),this.destroyCbs.forEach(s=>s()),this.destroyCbs=null}onDestroy(r){this.destroyCbs.push(r)}}class mI extends FE{constructor(r){super(),this.moduleType=r}create(r){return new gI(this.moduleType,r,[])}}class LE extends zp{constructor(r){super(),this.componentFactoryResolver=new Sf(this),this.instance=null;const s=new cc([...r.providers,{provide:zp,useValue:this},{provide:mg,useValue:this.componentFactoryResolver}],r.parent||Vc(),r.debugName,new Set(["environment"]));this.injector=s,r.runEnvironmentInitializers&&s.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(r){this.injector.onDestroy(r)}}function VE(t,r,s=null){return new LE({providers:t,parent:r,debugName:s,runEnvironmentInitializers:!0}).injector}let bw=(()=>{class t{constructor(s){this._injector=s,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(s){if(!s.standalone)return null;if(!this.cachedInjectors.has(s)){const a=Wr(0,s.type),l=a.length>0?VE([a],this._injector,`Standalone[${s.type.name}]`):null;this.cachedInjectors.set(s,l)}return this.cachedInjectors.get(s)}ngOnDestroy(){try{for(const s of this.cachedInjectors.values())null!==s&&s.destroy()}finally{this.cachedInjectors.clear()}}static#e=this.\u0275prov=on({token:t,providedIn:"environment",factory:()=>new t(Kt(Bu))})}return t})();function BE(t){t.getStandaloneInjector=r=>r.get(bw).getOrCreateStandaloneInjector(t)}function WE(t,r,s,a){return function YE(t,r,s,a,l,g){const E=r+s;return Qa(t,E,l)?pc(t,E+1,g?a.call(g,l):a(l)):iv(t,E+1)}(bt(),Di(),t,r,s,a)}function qE(t,r,s,a,l){return ZE(bt(),Di(),t,r,s,a,l)}function KE(t,r,s,a,l,g){return function QE(t,r,s,a,l,g,E,R){const F=r+s;return Rp(t,F,l,g,E)?pc(t,F+3,R?a.call(R,l,g,E):a(l,g,E)):iv(t,F+3)}(bt(),Di(),t,r,s,a,l,g)}function iv(t,r){const s=t[r];return s===_r?void 0:s}function ZE(t,r,s,a,l,g,E){const R=r+s;return Yd(t,R,l,g)?pc(t,R+2,E?a.call(E,l,g):a(l,g)):iv(t,R+2)}function eT(t,r){const s=dr();let a;const l=t+Ln;s.firstCreatePass?(a=function Bw(t,r){if(r)for(let s=r.length-1;s>=0;s--){const a=r[s];if(t===a.name)return a}}(r,s.pipeRegistry),s.data[l]=a,a.onDestroy&&(s.destroyHooks??=[]).push(l,a.onDestroy)):a=s.data[l];const g=a.factory||(a.factory=ji(a.type)),R=$n(qd);try{const F=nd(!1),$=g();return nd(F),function eh(t,r,s,a){s>=t.data.length&&(t.data[s]=null,t.blueprint[s]=null),r[s]=a}(s,bt(),l,$),$}finally{$n(R)}}function tT(t,r,s,a){const l=t+Ln,g=bt(),E=Is(g,l);return function sv(t,r){return t[Lt].data[r].pure}(g,l)?ZE(g,Di(),r,E.transform,s,a,E):E.transform(s,a)}function $w(){return this._results[Symbol.iterator]()}class vI{static#e=Symbol.iterator;get changes(){return this._changes||(this._changes=new Bc)}constructor(r=!1){this._emitDistinctChangesOnly=r,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const s=vI.prototype;s[Symbol.iterator]||(s[Symbol.iterator]=$w)}get(r){return this._results[r]}map(r){return this._results.map(r)}filter(r){return this._results.filter(r)}find(r){return this._results.find(r)}reduce(r,s){return this._results.reduce(r,s)}forEach(r){this._results.forEach(r)}some(r){return this._results.some(r)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(r,s){const a=this;a.dirty=!1;const l=function cs(t){return t.flat(Number.POSITIVE_INFINITY)}(r);(this._changesDetected=!function Al(t,r,s){if(t.length!==r.length)return!1;for(let a=0;a<t.length;a++){let l=t[a],g=r[a];if(s&&(l=s(l),g=s(g)),g!==l)return!1}return!0}(a._results,l,s))&&(a._results=l,a.length=l.length,a.last=l[this.length-1],a.first=l[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}function Ww(t,r,s,a=!0){const l=r[Lt];if(function Si(t,r,s,a){const l=Hr+a,g=s.length;a>0&&(s[l-1][ci]=r),a<g-Hr?(r[ci]=s[l],rd(s,Hr+a,r)):(s.push(r),r[ci]=null),r[zn]=s;const E=r[Un];null!==E&&s!==E&&function ko(t,r){const s=t[Ys];r[ii]!==r[zn][zn][ii]&&(t[_s]=!0),null===s?t[Ys]=[r]:s.push(r)}(E,r);const R=r[Mi];null!==R&&R.insertView(t),r[fn]|=128}(l,r,t,s),a){const g=tf(s,t),E=r[vn],R=dl(E,t[vs]);null!==R&&function Jt(t,r,s,a,l,g){a[Cr]=l,a[vr]=r,Vd(t,a,s,1,l,g)}(l,t[vr],E,r,R,g)}}let ov=(()=>{class t{static#e=this.__NG_ELEMENT_ID__=Yw}return t})();const qw=ov,Kw=class extends qw{constructor(r,s,a){super(),this._declarationLView=r,this._declarationTContainer=s,this.elementRef=a}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(r,s){return this.createEmbeddedViewImpl(r,s)}createEmbeddedViewImpl(r,s,a){const l=function zw(t,r,s,a){const l=r.tView,R=wf(t,l,s,4096&t[fn]?4096:16,null,r,null,null,null,a?.injector??null,a?.hydrationInfo??null);R[Un]=t[r.index];const $=t[Mi];return null!==$&&(R[Mi]=$.createEmbeddedView(l)),I_(l,R,s),R}(this._declarationLView,this._declarationTContainer,r,{injector:s,hydrationInfo:a});return new Af(l)}};function Yw(){return jy(ki(),bt())}function jy(t,r){return 4&t.type?new Kw(r,t,$d(t,r)):null}let Hy=(()=>{class t{static#e=this.__NG_ELEMENT_ID__=tD}return t})();function tD(){return uT(ki(),bt())}const nD=Hy,oT=class extends nD{constructor(r,s,a){super(),this._lContainer=r,this._hostTNode=s,this._hostLView=a}get element(){return $d(this._hostTNode,this._hostLView)}get injector(){return new Fi(this._hostTNode,this._hostLView)}get parentInjector(){const r=Ou(this._hostTNode,this._hostLView);if(Yu(r)){const s=qo(r,this._hostLView),a=no(r);return new Fi(s[Lt].data[a+8],s)}return new Fi(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(r){const s=aT(this._lContainer);return null!==s&&s[r]||null}get length(){return this._lContainer.length-Hr}createEmbeddedView(r,s,a){let l,g;"number"==typeof a?l=a:null!=a&&(l=a.index,g=a.injector);const R=r.createEmbeddedViewImpl(s||{},g,null);return this.insertImpl(R,l,false),R}createComponent(r,s,a,l,g){const E=r&&!function tc(t){return"function"==typeof t}(r);let R;if(E)R=s;else{const xt=s||{};R=xt.index,a=xt.injector,l=xt.projectableNodes,g=xt.environmentInjector||xt.ngModuleRef}const F=E?r:new ju(Bn(r)),$=a||this.parentInjector;if(!g&&null==F.ngModule){const cn=(E?$:this.parentInjector).get(Bu,null);cn&&(g=cn)}Bn(F.componentType??{});const We=F.create($,l,null,g);return this.insertImpl(We.hostView,R,false),We}insert(r,s){return this.insertImpl(r,s,!1)}insertImpl(r,s,a){const l=r._lView;if(function Du(t){return Ui(t[zn])}(l)){const F=this.indexOf(r);if(-1!==F)this.detach(F);else{const $=l[zn],te=new oT($,$[vr],$[zn]);te.detach(te.indexOf(r))}}const E=this._adjustIndex(s),R=this._lContainer;return Ww(R,l,E,!a),r.attachToViewContainerRef(),rd(yI(R),E,r),r}move(r,s){return this.insert(r,s)}indexOf(r){const s=aT(this._lContainer);return null!==s?s.indexOf(r):-1}remove(r){const s=this._adjustIndex(r,-1),a=dd(this._lContainer,s);a&&(fr(yI(this._lContainer),s),cl(a[Lt],a))}detach(r){const s=this._adjustIndex(r,-1),a=dd(this._lContainer,s);return a&&null!=fr(yI(this._lContainer),s)?new Af(a):null}_adjustIndex(r,s=0){return r??this.length+s}};function aT(t){return t[8]}function yI(t){return t[8]||(t[8]=[])}function uT(t,r){let s;const a=r[t.index];return Ui(a)?s=a:(s=wp(a,r,null,t),r[t.index]=s,Dp(r,s)),cT(s,r,t,a),new oT(s,t,r)}let cT=function lT(t,r,s,a){if(t[vs])return;let l;l=8&s.type?$r(a):function rD(t,r){const s=t[vn],a=s.createComment(""),l=ys(r,t);return yu(s,dl(s,l),a,function qf(t,r){return t.nextSibling(r)}(s,l),!1),a}(r,s),t[vs]=l};class II{constructor(r){this.queryList=r,this.matches=null}clone(){return new II(this.queryList)}setDirty(){this.queryList.setDirty()}}class EI{constructor(r=[]){this.queries=r}createEmbeddedView(r){const s=r.queries;if(null!==s){const a=null!==r.contentQueries?r.contentQueries[0]:s.length,l=[];for(let g=0;g<a;g++){const E=s.getByIndex(g);l.push(this.queries[E.indexInDeclarationView].clone())}return new EI(l)}return null}insertView(r){this.dirtyQueriesWithMatches(r)}detachView(r){this.dirtyQueriesWithMatches(r)}dirtyQueriesWithMatches(r){for(let s=0;s<this.queries.length;s++)null!==yT(r,s).matches&&this.queries[s].setDirty()}}class dT{constructor(r,s,a=null){this.predicate=r,this.flags=s,this.read=a}}class TI{constructor(r=[]){this.queries=r}elementStart(r,s){for(let a=0;a<this.queries.length;a++)this.queries[a].elementStart(r,s)}elementEnd(r){for(let s=0;s<this.queries.length;s++)this.queries[s].elementEnd(r)}embeddedTView(r){let s=null;for(let a=0;a<this.length;a++){const l=null!==s?s.length:0,g=this.getByIndex(a).embeddedTView(r,l);g&&(g.indexInDeclarationView=a,null!==s?s.push(g):s=[g])}return null!==s?new TI(s):null}template(r,s){for(let a=0;a<this.queries.length;a++)this.queries[a].template(r,s)}getByIndex(r){return this.queries[r]}get length(){return this.queries.length}track(r){this.queries.push(r)}}class bI{constructor(r,s=-1){this.metadata=r,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=s}elementStart(r,s){this.isApplyingToNode(s)&&this.matchTNode(r,s)}elementEnd(r){this._declarationNodeIndex===r.index&&(this._appliesToNextNode=!1)}template(r,s){this.elementStart(r,s)}embeddedTView(r,s){return this.isApplyingToNode(r)?(this.crossesNgTemplate=!0,this.addMatch(-r.index,s),new bI(this.metadata)):null}isApplyingToNode(r){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const s=this._declarationNodeIndex;let a=r.parent;for(;null!==a&&8&a.type&&a.index!==s;)a=a.parent;return s===(null!==a?a.index:-1)}return this._appliesToNextNode}matchTNode(r,s){const a=this.metadata.predicate;if(Array.isArray(a))for(let l=0;l<a.length;l++){const g=a[l];this.matchTNodeWithReadOption(r,s,oD(s,g)),this.matchTNodeWithReadOption(r,s,Or(s,r,g,!1,!1))}else a===ov?4&s.type&&this.matchTNodeWithReadOption(r,s,-1):this.matchTNodeWithReadOption(r,s,Or(s,r,a,!1,!1))}matchTNodeWithReadOption(r,s,a){if(null!==a){const l=this.metadata.read;if(null!==l)if(l===$l||l===Hy||l===ov&&4&s.type)this.addMatch(s.index,-2);else{const g=Or(s,r,l,!1,!1);null!==g&&this.addMatch(s.index,g)}else this.addMatch(s.index,a)}}addMatch(r,s){null===this.matches?this.matches=[r,s]:this.matches.push(r,s)}}function oD(t,r){const s=t.localNames;if(null!==s)for(let a=0;a<s.length;a+=2)if(s[a]===r)return s[a+1];return null}function uD(t,r,s,a){return-1===s?function aD(t,r){return 11&t.type?$d(t,r):4&t.type?jy(t,r):null}(r,t):-2===s?function cD(t,r,s){return s===$l?$d(r,t):s===ov?jy(r,t):s===Hy?uT(r,t):void 0}(t,r,a):Es(t,t[Lt],s,r)}function hT(t,r,s,a){const l=r[Mi].queries[a];if(null===l.matches){const g=t.data,E=s.matches,R=[];for(let F=0;F<E.length;F+=2){const $=E[F];R.push($<0?null:uD(r,g[$],E[F+1],s.metadata.read))}l.matches=R}return l.matches}function wI(t,r,s,a){const l=t.queries.getByIndex(s),g=l.matches;if(null!==g){const E=hT(t,r,l,s);for(let R=0;R<g.length;R+=2){const F=g[R];if(F>0)a.push(E[R/2]);else{const $=g[R+1],te=r[-F];for(let he=Hr;he<te.length;he++){const ke=te[he];ke[Un]===ke[zn]&&wI(ke[Lt],ke,$,a)}if(null!==te[Ys]){const he=te[Ys];for(let ke=0;ke<he.length;ke++){const We=he[ke];wI(We[Lt],We,$,a)}}}}}return a}function fT(t){const r=bt(),s=dr(),a=S();x(a+1);const l=yT(s,a);if(t.dirty&&function au(t){return 4==(4&t[fn])}(r)===(2==(2&l.metadata.flags))){if(null===l.matches)t.reset([]);else{const g=l.crossesNgTemplate?wI(s,r,a,[]):hT(s,r,l,a);t.reset(g,Fm),t.notifyOnChanges()}return!0}return!1}function pT(t,r,s){const a=dr();a.firstCreatePass&&(vT(a,new dT(t,r,s),-1),2==(2&r)&&(a.staticViewQueries=!0)),_T(a,bt(),r)}function gT(t,r,s,a){const l=dr();if(l.firstCreatePass){const g=ki();vT(l,new dT(r,s,a),g.index),function dD(t,r){const s=t.contentQueries||(t.contentQueries=[]);r!==(s.length?s[s.length-1]:-1)&&s.push(t.queries.length-1,r)}(l,t),2==(2&s)&&(l.staticContentQueries=!0)}_T(l,bt(),s)}function mT(){return function lD(t,r){return t[Mi].queries[r].queryList}(bt(),S())}function _T(t,r,s){const a=new vI(4==(4&s));(function Pv(t,r,s,a){const l=Vg(r);l.push(s),t.firstCreatePass&&v_(t).push(a,l.length-1)})(t,r,a,a.destroy),null===r[Mi]&&(r[Mi]=new EI),r[Mi].queries.push(new II(a))}function vT(t,r,s){null===t.queries&&(t.queries=new TI),t.queries.track(new bI(r,s))}function yT(t,r){return t.queries.getByIndex(r)}function IT(t,r){return jy(t,r)}function DI(t){return!!Er(t)}const LT=new Bt("Application Initializer");let NI=(()=>{class t{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((s,a)=>{this.resolve=s,this.reject=a}),this.appInits=Qt(LT,{optional:!0})??[]}runInitializers(){if(this.initialized)return;const s=[];for(const l of this.appInits){const g=l();if(F_(g))s.push(g);else if(py(g)){const E=new Promise((R,F)=>{g.subscribe({complete:R,error:F})});s.push(E)}}const a=()=>{this.done=!0,this.resolve()};Promise.all(s).then(()=>{a()}).catch(l=>{this.reject(l)}),0===s.length&&a(),this.initialized=!0}static#e=this.\u0275fac=function(a){return new(a||t)};static#t=this.\u0275prov=on({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),VT=(()=>{class t{log(s){console.log(s)}warn(s){console.warn(s)}static#e=this.\u0275fac=function(a){return new(a||t)};static#t=this.\u0275prov=on({token:t,factory:t.\u0275fac,providedIn:"platform"})}return t})();const zy=new Bt("LocaleId",{providedIn:"root",factory:()=>Qt(zy,Ot.Optional|Ot.SkipSelf)||function PD(){return typeof $localize<"u"&&$localize.locale||_m}()}),MD=new Bt("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});let BT=(()=>{class t{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new De.X(!1)}add(){this.hasPendingTasks.next(!0);const s=this.taskId++;return this.pendingTasks.add(s),s}remove(s){this.pendingTasks.delete(s),0===this.pendingTasks.size&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks.next(!1)}static#e=this.\u0275fac=function(a){return new(a||t)};static#t=this.\u0275prov=on({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();class kD{constructor(r,s){this.ngModuleFactory=r,this.componentFactories=s}}let FD=(()=>{class t{compileModuleSync(s){return new mI(s)}compileModuleAsync(s){return Promise.resolve(this.compileModuleSync(s))}compileModuleAndAllComponentsSync(s){const a=this.compileModuleSync(s),g=ml(Er(s).declarations).reduce((E,R)=>{const F=Bn(R);return F&&E.push(new ju(F)),E},[]);return new kD(a,g)}compileModuleAndAllComponentsAsync(s){return Promise.resolve(this.compileModuleAndAllComponentsSync(s))}clearCache(){}clearCacheFor(s){}getModuleId(s){}static#e=this.\u0275fac=function(a){return new(a||t)};static#t=this.\u0275prov=on({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();const HT=new Bt(""),$T=new Bt("");let MI,iC=(()=>{class t{constructor(s,a,l){this._ngZone=s,this.registry=a,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,MI||(function sC(t){MI=t}(l),l.addToWindow(a)),this._watchAngularEvents(),s.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Fo.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;0!==this._callbacks.length;){let s=this._callbacks.pop();clearTimeout(s.timeoutId),s.doneCb(this._didWork)}this._didWork=!1});else{let s=this.getPendingTasks();this._callbacks=this._callbacks.filter(a=>!a.updateCb||!a.updateCb(s)||(clearTimeout(a.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(s=>({source:s.source,creationLocation:s.creationLocation,data:s.data})):[]}addCallback(s,a,l){let g=-1;a&&a>0&&(g=setTimeout(()=>{this._callbacks=this._callbacks.filter(E=>E.timeoutId!==g),s(this._didWork,this.getPendingTasks())},a)),this._callbacks.push({doneCb:s,timeoutId:g,updateCb:l})}whenStable(s,a,l){if(l&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(s,a,l),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(s){this.registry.registerApplication(s,this)}unregisterApplication(s){this.registry.unregisterApplication(s)}findProviders(s,a,l){return[]}static#e=this.\u0275fac=function(a){return new(a||t)(Kt(Fo),Kt(zT),Kt($T))};static#t=this.\u0275prov=on({token:t,factory:t.\u0275fac})}return t})(),zT=(()=>{class t{constructor(){this._applications=new Map}registerApplication(s,a){this._applications.set(s,a)}unregisterApplication(s){this._applications.delete(s)}unregisterAllApplications(){this._applications.clear()}getTestability(s){return this._applications.get(s)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(s,a=!0){return MI?.findTestabilityInTree(this,s,a)??null}static#e=this.\u0275fac=function(a){return new(a||t)};static#t=this.\u0275prov=on({token:t,factory:t.\u0275fac,providedIn:"platform"})}return t})(),Uf=null;const WT=new Bt("AllowMultipleToken"),xI=new Bt("PlatformDestroyListeners"),kI=new Bt("appBootstrapListener");class uC{constructor(r,s){this.name=r,this.token=s}}function YT(t,r,s=[]){const a=`Platform: ${r}`,l=new Bt(a);return(g=[])=>{let E=FI();if(!E||E.injector.get(WT,!1)){const R=[...s,...g,{provide:l,useValue:!0}];t?t(R):function cC(t){if(Uf&&!Uf.get(WT,!1))throw new Me(400,!1);(function qT(){!function qc(t){Qs=t}(()=>{throw new Me(600,!1)})})(),Uf=t;const r=t.get(QT);(function KT(t){t.get(gf,null)?.forEach(s=>s())})(t)}(function ZT(t=[],r){return gl.create({name:r,providers:[{provide:Ma,useValue:"platform"},{provide:xI,useValue:new Set([()=>Uf=null])},...t]})}(R,a))}return function dC(t){const r=FI();if(!r)throw new Me(401,!1);return r}()}}function FI(){return Uf?.get(QT)??null}let QT=(()=>{class t{constructor(s){this._injector=s,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(s,a){const l=function hC(t="zone.js",r){return"noop"===t?new c0:"zone.js"===t?new Fo(r):t}(a?.ngZone,function JT(t){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:t?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:t?.runCoalescing??!1}}({eventCoalescing:a?.ngZoneEventCoalescing,runCoalescing:a?.ngZoneRunCoalescing}));return l.run(()=>{const g=function Tw(t,r,s){return new gI(t,r,s)}(s.moduleType,this.injector,function rb(t){return[{provide:Fo,useFactory:t},{provide:tr,multi:!0,useFactory:()=>{const r=Qt(pC,{optional:!0});return()=>r.initialize()}},{provide:nb,useFactory:fC},{provide:Ev,useFactory:Tg}]}(()=>l)),E=g.injector.get(Wl,null);return l.runOutsideAngular(()=>{const R=l.onError.subscribe({next:F=>{E.handleError(F)}});g.onDestroy(()=>{qy(this._modules,g),R.unsubscribe()})}),function XT(t,r,s){try{const a=s();return F_(a)?a.catch(l=>{throw r.runOutsideAngular(()=>t.handleError(l)),l}):a}catch(a){throw r.runOutsideAngular(()=>t.handleError(a)),a}}(E,l,()=>{const R=g.injector.get(NI);return R.runInitializers(),R.donePromise.then(()=>(cE(g.injector.get(zy,_m)||_m),this._moduleDoBootstrap(g),g))})})}bootstrapModule(s,a=[]){const l=eb({},a);return function oC(t,r,s){const a=new mI(s);return Promise.resolve(a)}(0,0,s).then(g=>this.bootstrapModuleFactory(g,l))}_moduleDoBootstrap(s){const a=s.injector.get(Im);if(s._bootstrapComponents.length>0)s._bootstrapComponents.forEach(l=>a.bootstrap(l));else{if(!s.instance.ngDoBootstrap)throw new Me(-403,!1);s.instance.ngDoBootstrap(a)}this._modules.push(s)}onDestroy(s){this._destroyListeners.push(s)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Me(404,!1);this._modules.slice().forEach(a=>a.destroy()),this._destroyListeners.forEach(a=>a());const s=this._injector.get(xI,null);s&&(s.forEach(a=>a()),s.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}static#e=this.\u0275fac=function(a){return new(a||t)(Kt(gl))};static#t=this.\u0275prov=on({token:t,factory:t.\u0275fac,providedIn:"platform"})}return t})();function eb(t,r){return Array.isArray(r)?r.reduce(eb,t):{...t,...r}}let Im=(()=>{class t{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=Qt(nb),this.zoneIsStable=Qt(Ev),this.componentTypes=[],this.components=[],this.isStable=Qt(BT).hasPendingTasks.pipe((0,I.w)(s=>s?(0,Ee.of)(!1):this.zoneIsStable),(0,$e.x)(),(0,Oe.B)()),this._injector=Qt(Bu)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(s,a){const l=s instanceof fv;if(!this._injector.get(NI).done)throw!l&&ri(s),new Me(405,!1);let E;E=l?s:this._injector.get(mg).resolveComponentFactory(s),this.componentTypes.push(E.componentType);const R=function aC(t){return t.isBoundToModule}(E)?void 0:this._injector.get(zp),$=E.create(gl.NULL,[],a||E.selector,R),te=$.location.nativeElement,he=$.injector.get(HT,null);return he?.registerApplication(te),$.onDestroy(()=>{this.detachView($.hostView),qy(this.components,$),he?.unregisterApplication(te)}),this._loadComponent($),$}tick(){if(this._runningTick)throw new Me(101,!1);try{this._runningTick=!0;for(let s of this._views)s.detectChanges()}catch(s){this.internalErrorHandler(s)}finally{this._runningTick=!1}}attachView(s){const a=s;this._views.push(a),a.attachToAppRef(this)}detachView(s){const a=s;qy(this._views,a),a.detachFromAppRef()}_loadComponent(s){this.attachView(s.hostView),this.tick(),this.components.push(s);const a=this._injector.get(kI,[]);a.push(...this._bootstrapListeners),a.forEach(l=>l(s))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(s=>s()),this._views.slice().forEach(s=>s.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(s){return this._destroyListeners.push(s),()=>qy(this._destroyListeners,s)}destroy(){if(this._destroyed)throw new Me(406,!1);const s=this._injector;s.destroy&&!s.destroyed&&s.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static#e=this.\u0275fac=function(a){return new(a||t)};static#t=this.\u0275prov=on({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function qy(t,r){const s=t.indexOf(r);s>-1&&t.splice(s,1)}const nb=new Bt("",{providedIn:"root",factory:()=>Qt(Wl).handleError.bind(void 0)});function fC(){const t=Qt(Fo),r=Qt(Wl);return s=>t.runOutsideAngular(()=>r.handleError(s))}let pC=(()=>{class t{constructor(){this.zone=Qt(Fo),this.applicationRef=Qt(Im)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static#e=this.\u0275fac=function(a){return new(a||t)};static#t=this.\u0275prov=on({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function mC(){return!1}let _C=(()=>{class t{static#e=this.__NG_ELEMENT_ID__=vC}return t})();function vC(t){return function yC(t,r,s){if(Ls(t)&&!s){const a=Vr(t.index,r);return new Af(a,a)}return 47&t.type?new Af(r[ii],r):null}(ki(),bt(),16==(16&t))}class ab{constructor(){}supports(r){return zg(r)}create(r){return new DC(r)}}const wC=(t,r)=>r;class DC{constructor(r){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=r||wC}forEachItem(r){let s;for(s=this._itHead;null!==s;s=s._next)r(s)}forEachOperation(r){let s=this._itHead,a=this._removalsHead,l=0,g=null;for(;s||a;){const E=!a||s&&s.currentIndex<cb(a,l,g)?s:a,R=cb(E,l,g),F=E.currentIndex;if(E===a)l--,a=a._nextRemoved;else if(s=s._next,null==E.previousIndex)l++;else{g||(g=[]);const $=R-l,te=F-l;if($!=te){for(let ke=0;ke<$;ke++){const We=ke<g.length?g[ke]:g[ke]=0,gt=We+ke;te<=gt&&gt<$&&(g[ke]=We+1)}g[E.previousIndex]=te-$}}R!==F&&r(E,R,F)}}forEachPreviousItem(r){let s;for(s=this._previousItHead;null!==s;s=s._nextPrevious)r(s)}forEachAddedItem(r){let s;for(s=this._additionsHead;null!==s;s=s._nextAdded)r(s)}forEachMovedItem(r){let s;for(s=this._movesHead;null!==s;s=s._nextMoved)r(s)}forEachRemovedItem(r){let s;for(s=this._removalsHead;null!==s;s=s._nextRemoved)r(s)}forEachIdentityChange(r){let s;for(s=this._identityChangesHead;null!==s;s=s._nextIdentityChange)r(s)}diff(r){if(null==r&&(r=[]),!zg(r))throw new Me(900,!1);return this.check(r)?this:null}onDestroy(){}check(r){this._reset();let l,g,E,s=this._itHead,a=!1;if(Array.isArray(r)){this.length=r.length;for(let R=0;R<this.length;R++)g=r[R],E=this._trackByFn(R,g),null!==s&&Object.is(s.trackById,E)?(a&&(s=this._verifyReinsertion(s,g,E,R)),Object.is(s.item,g)||this._addIdentityChange(s,g)):(s=this._mismatch(s,g,E,R),a=!0),s=s._next}else l=0,function yd(t,r){if(Array.isArray(t))for(let s=0;s<t.length;s++)r(t[s]);else{const s=t[Symbol.iterator]();let a;for(;!(a=s.next()).done;)r(a.value)}}(r,R=>{E=this._trackByFn(l,R),null!==s&&Object.is(s.trackById,E)?(a&&(s=this._verifyReinsertion(s,R,E,l)),Object.is(s.item,R)||this._addIdentityChange(s,R)):(s=this._mismatch(s,R,E,l),a=!0),s=s._next,l++}),this.length=l;return this._truncate(s),this.collection=r,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let r;for(r=this._previousItHead=this._itHead;null!==r;r=r._next)r._nextPrevious=r._next;for(r=this._additionsHead;null!==r;r=r._nextAdded)r.previousIndex=r.currentIndex;for(this._additionsHead=this._additionsTail=null,r=this._movesHead;null!==r;r=r._nextMoved)r.previousIndex=r.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(r,s,a,l){let g;return null===r?g=this._itTail:(g=r._prev,this._remove(r)),null!==(r=null===this._unlinkedRecords?null:this._unlinkedRecords.get(a,null))?(Object.is(r.item,s)||this._addIdentityChange(r,s),this._reinsertAfter(r,g,l)):null!==(r=null===this._linkedRecords?null:this._linkedRecords.get(a,l))?(Object.is(r.item,s)||this._addIdentityChange(r,s),this._moveAfter(r,g,l)):r=this._addAfter(new CC(s,a),g,l),r}_verifyReinsertion(r,s,a,l){let g=null===this._unlinkedRecords?null:this._unlinkedRecords.get(a,null);return null!==g?r=this._reinsertAfter(g,r._prev,l):r.currentIndex!=l&&(r.currentIndex=l,this._addToMoves(r,l)),r}_truncate(r){for(;null!==r;){const s=r._next;this._addToRemovals(this._unlink(r)),r=s}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(r,s,a){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(r);const l=r._prevRemoved,g=r._nextRemoved;return null===l?this._removalsHead=g:l._nextRemoved=g,null===g?this._removalsTail=l:g._prevRemoved=l,this._insertAfter(r,s,a),this._addToMoves(r,a),r}_moveAfter(r,s,a){return this._unlink(r),this._insertAfter(r,s,a),this._addToMoves(r,a),r}_addAfter(r,s,a){return this._insertAfter(r,s,a),this._additionsTail=null===this._additionsTail?this._additionsHead=r:this._additionsTail._nextAdded=r,r}_insertAfter(r,s,a){const l=null===s?this._itHead:s._next;return r._next=l,r._prev=s,null===l?this._itTail=r:l._prev=r,null===s?this._itHead=r:s._next=r,null===this._linkedRecords&&(this._linkedRecords=new ub),this._linkedRecords.put(r),r.currentIndex=a,r}_remove(r){return this._addToRemovals(this._unlink(r))}_unlink(r){null!==this._linkedRecords&&this._linkedRecords.remove(r);const s=r._prev,a=r._next;return null===s?this._itHead=a:s._next=a,null===a?this._itTail=s:a._prev=s,r}_addToMoves(r,s){return r.previousIndex===s||(this._movesTail=null===this._movesTail?this._movesHead=r:this._movesTail._nextMoved=r),r}_addToRemovals(r){return null===this._unlinkedRecords&&(this._unlinkedRecords=new ub),this._unlinkedRecords.put(r),r.currentIndex=null,r._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=r,r._prevRemoved=null):(r._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=r),r}_addIdentityChange(r,s){return r.item=s,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=r:this._identityChangesTail._nextIdentityChange=r,r}}class CC{constructor(r,s){this.item=r,this.trackById=s,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class AC{constructor(){this._head=null,this._tail=null}add(r){null===this._head?(this._head=this._tail=r,r._nextDup=null,r._prevDup=null):(this._tail._nextDup=r,r._prevDup=this._tail,r._nextDup=null,this._tail=r)}get(r,s){let a;for(a=this._head;null!==a;a=a._nextDup)if((null===s||s<=a.currentIndex)&&Object.is(a.trackById,r))return a;return null}remove(r){const s=r._prevDup,a=r._nextDup;return null===s?this._head=a:s._nextDup=a,null===a?this._tail=s:a._prevDup=s,null===this._head}}class ub{constructor(){this.map=new Map}put(r){const s=r.trackById;let a=this.map.get(s);a||(a=new AC,this.map.set(s,a)),a.add(r)}get(r,s){const l=this.map.get(r);return l?l.get(r,s):null}remove(r){const s=r.trackById;return this.map.get(s).remove(r)&&this.map.delete(s),r}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function cb(t,r,s){const a=t.previousIndex;if(null===a)return a;let l=0;return s&&a<s.length&&(l=s[a]),a+r+l}class lb{constructor(){}supports(r){return r instanceof Map||ty(r)}create(){return new SC}}class SC{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(r){let s;for(s=this._mapHead;null!==s;s=s._next)r(s)}forEachPreviousItem(r){let s;for(s=this._previousMapHead;null!==s;s=s._nextPrevious)r(s)}forEachChangedItem(r){let s;for(s=this._changesHead;null!==s;s=s._nextChanged)r(s)}forEachAddedItem(r){let s;for(s=this._additionsHead;null!==s;s=s._nextAdded)r(s)}forEachRemovedItem(r){let s;for(s=this._removalsHead;null!==s;s=s._nextRemoved)r(s)}diff(r){if(r){if(!(r instanceof Map||ty(r)))throw new Me(900,!1)}else r=new Map;return this.check(r)?this:null}onDestroy(){}check(r){this._reset();let s=this._mapHead;if(this._appendAfter=null,this._forEach(r,(a,l)=>{if(s&&s.key===l)this._maybeAddToChanges(s,a),this._appendAfter=s,s=s._next;else{const g=this._getOrCreateRecordForKey(l,a);s=this._insertBeforeOrAppend(s,g)}}),s){s._prev&&(s._prev._next=null),this._removalsHead=s;for(let a=s;null!==a;a=a._nextRemoved)a===this._mapHead&&(this._mapHead=null),this._records.delete(a.key),a._nextRemoved=a._next,a.previousValue=a.currentValue,a.currentValue=null,a._prev=null,a._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(r,s){if(r){const a=r._prev;return s._next=r,s._prev=a,r._prev=s,a&&(a._next=s),r===this._mapHead&&(this._mapHead=s),this._appendAfter=r,r}return this._appendAfter?(this._appendAfter._next=s,s._prev=this._appendAfter):this._mapHead=s,this._appendAfter=s,null}_getOrCreateRecordForKey(r,s){if(this._records.has(r)){const l=this._records.get(r);this._maybeAddToChanges(l,s);const g=l._prev,E=l._next;return g&&(g._next=E),E&&(E._prev=g),l._next=null,l._prev=null,l}const a=new RC(r);return this._records.set(r,a),a.currentValue=s,this._addToAdditions(a),a}_reset(){if(this.isDirty){let r;for(this._previousMapHead=this._mapHead,r=this._previousMapHead;null!==r;r=r._next)r._nextPrevious=r._next;for(r=this._changesHead;null!==r;r=r._nextChanged)r.previousValue=r.currentValue;for(r=this._additionsHead;null!=r;r=r._nextAdded)r.previousValue=r.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(r,s){Object.is(s,r.currentValue)||(r.previousValue=r.currentValue,r.currentValue=s,this._addToChanges(r))}_addToAdditions(r){null===this._additionsHead?this._additionsHead=this._additionsTail=r:(this._additionsTail._nextAdded=r,this._additionsTail=r)}_addToChanges(r){null===this._changesHead?this._changesHead=this._changesTail=r:(this._changesTail._nextChanged=r,this._changesTail=r)}_forEach(r,s){r instanceof Map?r.forEach(s):Object.keys(r).forEach(a=>s(r[a],a))}}class RC{constructor(r){this.key=r,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function db(){return new jI([new ab])}let jI=(()=>{class t{static#e=this.\u0275prov=on({token:t,providedIn:"root",factory:db});constructor(s){this.factories=s}static create(s,a){if(null!=a){const l=a.factories.slice();s=s.concat(l)}return new t(s)}static extend(s){return{provide:t,useFactory:a=>t.create(s,a||db()),deps:[[t,new ic,new Wa]]}}find(s){const a=this.factories.find(l=>l.supports(s));if(null!=a)return a;throw new Me(901,!1)}}return t})();function hb(){return new GI([new lb])}let GI=(()=>{class t{static#e=this.\u0275prov=on({token:t,providedIn:"root",factory:hb});constructor(s){this.factories=s}static create(s,a){if(a){const l=a.factories.slice();s=s.concat(l)}return new t(s)}static extend(s){return{provide:t,useFactory:a=>t.create(s,a||hb()),deps:[[t,new ic,new Wa]]}}find(s){const a=this.factories.find(l=>l.supports(s));if(a)return a;throw new Me(901,!1)}}return t})();const PC=YT(null,"core",[]);let MC=(()=>{class t{constructor(s){}static#e=this.\u0275fac=function(a){return new(a||t)(Kt(Im))};static#t=this.\u0275mod=xs({type:t});static#n=this.\u0275inj=Cn({})}return t})();function $C(t){return"boolean"==typeof t?t:null!=t&&"false"!==t}function WC(t,r){const s=Bn(t),a=r.elementInjector||Vc();return new ju(s).create(a,r.projectableNodes,r.hostElement,r.environmentInjector)}function qC(t){const r=Bn(t);if(!r)return null;const s=new ju(r);return{get selector(){return s.selector},get type(){return s.componentType},get inputs(){return s.inputs},get outputs(){return s.outputs},get ngContentSelectors(){return s.ngContentSelectors},get isStandalone(){return r.standalone},get isSignal(){return r.signals}}}},7213:(qt,Ze,H)=>{H.d(Ze,{zQ:()=>Ir,rT:()=>Zt,f7:()=>Hn,L6:()=>ut,_Q:()=>ce,lh:()=>Tt,Qv:()=>ot,nw:()=>bn}),H(2872);var fe=H(6814),ae=H(5879),Ce=H(8326),De=H(7217),Ee=H(8645),Oe=H(2096),I=H(5592),$e=H(2459),pe=H(3019),me=H(3093),Pe=H(4664),dt=H(7398),it=H(4552);class _t extends Ee.x{constructor(Ft=1/0,ve=1/0,be=it.l){super(),this._bufferSize=Ft,this._windowTime=ve,this._timestampProvider=be,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=ve===1/0,this._bufferSize=Math.max(1,Ft),this._windowTime=Math.max(1,ve)}next(Ft){const{isStopped:ve,_buffer:be,_infiniteTimeWindow:He,_timestampProvider:xe,_windowTime:Le}=this;ve||(be.push(Ft),!He&&be.push(xe.now()+Le)),this._trimBuffer(),super.next(Ft)}_subscribe(Ft){this._throwIfClosed(),this._trimBuffer();const ve=this._innerSubscribe(Ft),{_infiniteTimeWindow:be,_buffer:He}=this,xe=He.slice();for(let Le=0;Le<xe.length&&!Ft.closed;Le+=be?1:2)Ft.next(xe[Le]);return this._checkFinalizedStatuses(Ft),ve}_trimBuffer(){const{_bufferSize:Ft,_timestampProvider:ve,_buffer:be,_infiniteTimeWindow:He}=this,xe=(He?1:2)*Ft;if(Ft<1/0&&xe<be.length&&be.splice(0,be.length-xe),!He){const Le=ve.now();let Ye=0;for(let Pt=1;Pt<be.length&&be[Pt]<=Le;Pt+=2)Ye=Pt;Ye&&be.splice(0,Ye+1)}}}var ft=H(3020);function yt(Yt,Ft,ve){let be,He=!1;return Yt&&"object"==typeof Yt?({bufferSize:be=1/0,windowTime:Ft=1/0,refCount:He=!1,scheduler:ve}=Yt):be=Yt??1/0,(0,ft.B)({connector:()=>new _t(be,Ft,ve),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:He})}var It=H(1374),nn=H(4674);function Ve(Yt,Ft){return(0,nn.m)(Ft)?(0,Pe.w)(()=>Yt,Ft):(0,Pe.w)(()=>Yt)}var Me=H(5137),qe=H(2181);H(7142);const ot=new ae.OlP("angularfire2.auth.use-emulator"),ut=new ae.OlP("angularfire2.auth.settings"),ce=new ae.OlP("angularfire2.auth.tenant-id"),Zt=new ae.OlP("angularfire2.auth.langugage-code"),Tt=new ae.OlP("angularfire2.auth.use-device-language"),Hn=new ae.OlP("angularfire.auth.persistence"),bn=(Yt,Ft,ve,be,He,xe,Le,Ye)=>(0,De.cc)(`${Yt.name}.auth`,"AngularFireAuth",Yt.name,()=>{const Pt=Ft.runOutsideAngular(()=>Yt.auth());if(ve&&Pt.useEmulator(...ve),be&&(Pt.tenantId=be),Pt.languageCode=He,xe&&Pt.useDeviceLanguage(),Le)for(const[Ct,ar]of Object.entries(Le))Pt.settings[Ct]=ar;return Ye&&Pt.setPersistence(Ye),Pt},[ve,be,He,xe,Le,Ye]);let Ir=(()=>{class Yt{authState;idToken;user;idTokenResult;credential;constructor(ve,be,He,xe,Le,Ye,Pt,Ct,ar,wt,Tn,on){const Qn=new Ee.x,Cn=(0,Oe.of)(void 0).pipe((0,me.Q)(Le.outsideAngular),(0,Pe.w)(()=>xe.runOutsideAngular(()=>Promise.resolve().then(H.bind(H,2872)))),(0,dt.U)(()=>(0,De.on)(ve,xe,be)),(0,dt.U)(Pn=>bn(Pn,xe,Ye,Ct,ar,wt,Pt,Tn)),yt({bufferSize:1,refCount:!1}));if((0,fe.PM)(He))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=(0,Oe.of)(null);else{Cn.pipe((0,It.P)()).subscribe();const Pn=Cn.pipe((0,Pe.w)(Ue=>Ue.getRedirectResult().then(at=>at,()=>null)),Ce.iC,yt({bufferSize:1,refCount:!1})),_e=Cn.pipe((0,Pe.w)(Ue=>new I.y(at=>({unsubscribe:xe.runOutsideAngular(()=>Ue.onAuthStateChanged(pt=>at.next(pt),pt=>at.error(pt),()=>at.complete()))})))),Se=Cn.pipe((0,Pe.w)(Ue=>new I.y(at=>({unsubscribe:xe.runOutsideAngular(()=>Ue.onIdTokenChanged(pt=>at.next(pt),pt=>at.error(pt),()=>at.complete()))}))));this.authState=Pn.pipe(Ve(_e),(0,Me.R)(Le.outsideAngular),(0,me.Q)(Le.insideAngular)),this.user=Pn.pipe(Ve(Se),(0,Me.R)(Le.outsideAngular),(0,me.Q)(Le.insideAngular)),this.idToken=this.user.pipe((0,Pe.w)(Ue=>Ue?(0,$e.D)(Ue.getIdToken()):(0,Oe.of)(null))),this.idTokenResult=this.user.pipe((0,Pe.w)(Ue=>Ue?(0,$e.D)(Ue.getIdTokenResult()):(0,Oe.of)(null))),this.credential=(0,pe.T)(Pn,Qn,this.authState.pipe((0,qe.h)(Ue=>!Ue))).pipe((0,dt.U)(Ue=>Ue?.user?Ue:null),(0,Me.R)(Le.outsideAngular),(0,me.Q)(Le.insideAngular))}return(0,De.pX)(this,Cn,xe,{spy:{apply:(Pn,_e,Se)=>{(Pn.startsWith("signIn")||Pn.startsWith("createUser"))&&Se.then(Ue=>Qn.next(Ue))}}})}static \u0275fac=function(be){return new(be||Yt)(ae.LFG(De.Dh),ae.LFG(De.xv,8),ae.LFG(ae.Lbi),ae.LFG(ae.R0b),ae.LFG(Ce.HU),ae.LFG(ot,8),ae.LFG(ut,8),ae.LFG(ce,8),ae.LFG(Zt,8),ae.LFG(Tt,8),ae.LFG(Hn,8),ae.LFG(Ce.Rf,8))};static \u0275prov=ae.Yz7({token:Yt,factory:Yt.\u0275fac,providedIn:"any"})}return Yt})()},9027:(qt,Ze,H)=>{H.d(Ze,{ST:()=>ky});var y=H(6814),fe=H(5879),ae=H(8326),Ce=H(7217),De=H(7213),Ee=H(6321),Oe=H(5592),I=H(2459),$e=H(2096),pe=H(7921),me=H(9360),Pe=H(8251);function dt(){return(0,me.e)((i,e)=>{let n,o=!1;i.subscribe((0,Pe.x)(e,u=>{const h=n;n=u,o&&e.next([h,u]),o=!0}))})}var ce,it=H(7398),_t=H(6699),ft=H(3997),yt=H(2181),nn=(H(2872),H(3106)),Ve=H(5861),Me=H(534),qe=H(4537),Ne=H(7879),ze=H(9058),ot=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},ut={},Zt=Zt||{},Tt=ot||self;function Hn(i){var e=typeof i;return"array"==(e="object"!=e?e:i?Array.isArray(i)?"array":e:"null")||"object"==e&&"number"==typeof i.length}function bn(i){var e=typeof i;return"object"==e&&null!=i||"function"==e}var or="closure_uid_"+(1e9*Math.random()>>>0),Yt=0;function Ft(i,e,n){return i.call.apply(i.bind,arguments)}function ve(i,e,n){if(!i)throw Error();if(2<arguments.length){var o=Array.prototype.slice.call(arguments,2);return function(){var u=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(u,o),i.apply(e,u)}}return function(){return i.apply(e,arguments)}}function be(i,e,n){return(be=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Ft:ve).apply(null,arguments)}function He(i,e){var n=Array.prototype.slice.call(arguments,1);return function(){var o=n.slice();return o.push.apply(o,arguments),i.apply(this,o)}}function xe(i,e){function n(){}n.prototype=e.prototype,i.$=e.prototype,i.prototype=new n,i.prototype.constructor=i,i.ac=function(o,u,h){for(var v=Array(arguments.length-2),P=2;P<arguments.length;P++)v[P-2]=arguments[P];return e.prototype[u].apply(o,v)}}function Le(){this.s=this.s,this.o=this.o}Le.prototype.s=!1,Le.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),0)&&function Ir(i){Object.prototype.hasOwnProperty.call(i,or)&&i[or]||(i[or]=++Yt)}(this)},Le.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const Pt=Array.prototype.indexOf?function(i,e){return Array.prototype.indexOf.call(i,e,void 0)}:function(i,e){if("string"==typeof i)return"string"!=typeof e||1!=e.length?-1:i.indexOf(e,0);for(let n=0;n<i.length;n++)if(n in i&&i[n]===e)return n;return-1};function Ct(i){const e=i.length;if(0<e){const n=Array(e);for(let o=0;o<e;o++)n[o]=i[o];return n}return[]}function ar(i,e){for(let n=1;n<arguments.length;n++){const o=arguments[n];if(Hn(o)){const u=i.length||0,h=o.length||0;i.length=u+h;for(let v=0;v<h;v++)i[u+v]=o[v]}else i.push(o)}}function wt(i,e){this.type=i,this.g=this.target=e,this.defaultPrevented=!1}wt.prototype.h=function(){this.defaultPrevented=!0};var Tn=function(){if(!Tt.addEventListener||!Object.defineProperty)return!1;var i=!1,e=Object.defineProperty({},"passive",{get:function(){i=!0}});try{Tt.addEventListener("test",()=>{},e),Tt.removeEventListener("test",()=>{},e)}catch{}return i}();function on(i){return/^[\s\xa0]*$/.test(i)}function Qn(){var i=Tt.navigator;return i&&(i=i.userAgent)?i:""}function Cn(i){return-1!=Qn().indexOf(i)}function Pn(i){return Pn[" "](i),i}Pn[" "]=function(){};var Ot,i,Se=Cn("Opera"),Ue=Cn("Trident")||Cn("MSIE"),at=Cn("Edge"),pt=at||Ue,Mt=Cn("Gecko")&&!(-1!=Qn().toLowerCase().indexOf("webkit")&&!Cn("Edge"))&&!(Cn("Trident")||Cn("MSIE"))&&!Cn("Edge"),Nn=-1!=Qn().toLowerCase().indexOf("webkit")&&!Cn("Edge");function kn(){var i=Tt.document;return i?i.documentMode:void 0}e:{var sn="",At=(i=Qn(),Mt?/rv:([^\);]+)(\)|;)/.exec(i):at?/Edge\/([\d\.]+)/.exec(i):Ue?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(i):Nn?/WebKit\/(\S+)/.exec(i):Se?/(?:Version)[ \/]?(\S+)/.exec(i):void 0);if(At&&(sn=At?At[1]:""),Ue){var $n=kn();if(null!=$n&&$n>parseFloat(sn)){Ot=String($n);break e}}Ot=sn}var Mn=Tt.document&&Ue&&(kn()||parseInt(Ot,10))||void 0;function Sr(i,e){if(wt.call(this,i?i.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,i){var n=this.type=i.type,o=i.changedTouches&&i.changedTouches.length?i.changedTouches[0]:null;if(this.target=i.target||i.srcElement,this.g=e,e=i.relatedTarget){if(Mt){e:{try{Pn(e.nodeName);var u=!0;break e}catch{}u=!1}u||(e=null)}}else"mouseover"==n?e=i.fromElement:"mouseout"==n&&(e=i.toElement);this.relatedTarget=e,o?(this.clientX=void 0!==o.clientX?o.clientX:o.pageX,this.clientY=void 0!==o.clientY?o.clientY:o.pageY,this.screenX=o.screenX||0,this.screenY=o.screenY||0):(this.clientX=void 0!==i.clientX?i.clientX:i.pageX,this.clientY=void 0!==i.clientY?i.clientY:i.pageY,this.screenX=i.screenX||0,this.screenY=i.screenY||0),this.button=i.button,this.key=i.key||"",this.ctrlKey=i.ctrlKey,this.altKey=i.altKey,this.shiftKey=i.shiftKey,this.metaKey=i.metaKey,this.pointerId=i.pointerId||0,this.pointerType="string"==typeof i.pointerType?i.pointerType:xr[i.pointerType]||"",this.state=i.state,this.i=i,i.defaultPrevented&&Sr.$.h.call(this)}}xe(Sr,wt);var xr={2:"touch",3:"pen",4:"mouse"};Sr.prototype.h=function(){Sr.$.h.call(this);var i=this.i;i.preventDefault?i.preventDefault():i.returnValue=!1};var Bt="closure_listenable_"+(1e6*Math.random()|0),Gi=0;function Sn(i,e,n,o,u){this.listener=i,this.proxy=null,this.src=e,this.type=n,this.capture=!!o,this.la=u,this.key=++Gi,this.fa=this.ia=!1}function mn(i){i.fa=!0,i.listener=null,i.proxy=null,i.src=null,i.la=null}function Ni(i,e,n){for(const o in i)e.call(n,i[o],o,i)}function ur(i){const e={};for(const n in i)e[n]=i[n];return e}const bs="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Xr(i,e){let n,o;for(let u=1;u<arguments.length;u++){for(n in o=arguments[u],o)i[n]=o[n];for(let h=0;h<bs.length;h++)n=bs[h],Object.prototype.hasOwnProperty.call(o,n)&&(i[n]=o[n])}}function Hi(i){this.src=i,this.g={},this.h=0}function ws(i,e){var n=e.type;if(n in i.g){var h,o=i.g[n],u=Pt(o,e);(h=0<=u)&&Array.prototype.splice.call(o,u,1),h&&(mn(e),0==i.g[n].length&&(delete i.g[n],i.h--))}}function di(i,e,n,o){for(var u=0;u<i.length;++u){var h=i[u];if(!h.fa&&h.listener==e&&h.capture==!!n&&h.la==o)return u}return-1}Hi.prototype.add=function(i,e,n,o,u){var h=i.toString();(i=this.g[h])||(i=this.g[h]=[],this.h++);var v=di(i,e,o,u);return-1<v?(e=i[v],n||(e.ia=!1)):((e=new Sn(e,this.src,h,!!o,u)).ia=n,i.push(e)),e};var vi="closure_lm_"+(1e6*Math.random()|0),yi={};function Oi(i,e,n,o,u){if(o&&o.once)return ne(i,e,n,o,u);if(Array.isArray(e)){for(var h=0;h<e.length;h++)Oi(i,e[h],n,o,u);return null}return n=gn(n),i&&i[Bt]?i.O(e,n,bn(o)?!!o.capture:!!o,u):Te(i,e,n,!1,o,u)}function Te(i,e,n,o,u,h){if(!e)throw Error("Invalid event type");var v=bn(u)?!!u.capture:!!u,P=Rt(i);if(P||(i[vi]=P=new Hi(i)),(n=P.add(e,n,o,v,h)).proxy)return n;if(o=function se(){const e=lt;return function i(n){return e.call(i.src,i.listener,n)}}(),n.proxy=o,o.src=i,o.listener=n,i.addEventListener)Tn||(u=v),void 0===u&&(u=!1),i.addEventListener(e.toString(),o,u);else if(i.attachEvent)i.attachEvent(Re(e.toString()),o);else{if(!i.addListener||!i.removeListener)throw Error("addEventListener and attachEvent are unavailable.");i.addListener(o)}return n}function ne(i,e,n,o,u){if(Array.isArray(e)){for(var h=0;h<e.length;h++)ne(i,e[h],n,o,u);return null}return n=gn(n),i&&i[Bt]?i.P(e,n,bn(o)?!!o.capture:!!o,u):Te(i,e,n,!0,o,u)}function re(i,e,n,o,u){if(Array.isArray(e))for(var h=0;h<e.length;h++)re(i,e[h],n,o,u);else o=bn(o)?!!o.capture:!!o,n=gn(n),i&&i[Bt]?(i=i.i,(e=String(e).toString())in i.g&&-1<(n=di(h=i.g[e],n,o,u))&&(mn(h[n]),Array.prototype.splice.call(h,n,1),0==h.length&&(delete i.g[e],i.h--))):i&&(i=Rt(i))&&(e=i.g[e.toString()],i=-1,e&&(i=di(e,n,o,u)),(n=-1<i?e[i]:null)&&oe(n))}function oe(i){if("number"!=typeof i&&i&&!i.fa){var e=i.src;if(e&&e[Bt])ws(e.i,i);else{var n=i.type,o=i.proxy;e.removeEventListener?e.removeEventListener(n,o,i.capture):e.detachEvent?e.detachEvent(Re(n),o):e.addListener&&e.removeListener&&e.removeListener(o),(n=Rt(e))?(ws(n,i),0==n.h&&(n.src=null,e[vi]=null)):mn(i)}}}function Re(i){return i in yi?yi[i]:yi[i]="on"+i}function lt(i,e){if(i.fa)i=!0;else{e=new Sr(e,this);var n=i.listener,o=i.la||i.src;i.ia&&oe(i),i=n.call(o,e)}return i}function Rt(i){return(i=i[vi])instanceof Hi?i:null}var Kt="__closure_events_fn_"+(1e9*Math.random()>>>0);function gn(i){return"function"==typeof i?i:(i[Kt]||(i[Kt]=function(e){return i.handleEvent(e)}),i[Kt])}function Qt(){Le.call(this),this.i=new Hi(this),this.S=this,this.J=null}function un(i,e){var n,o=i.J;if(o)for(n=[];o;o=o.J)n.push(o);if(i=i.S,o=e.type||e,"string"==typeof e)e=new wt(e,i);else if(e instanceof wt)e.target=e.target||i;else{var u=e;Xr(e=new wt(o,i),u)}if(u=!0,n)for(var h=n.length-1;0<=h;h--){var v=e.g=n[h];u=wr(v,o,!0,e)&&u}if(u=wr(v=e.g=i,o,!0,e)&&u,u=wr(v,o,!1,e)&&u,n)for(h=0;h<n.length;h++)u=wr(v=e.g=n[h],o,!1,e)&&u}function wr(i,e,n,o){if(!(e=i.i.g[String(e)]))return!0;e=e.concat();for(var u=!0,h=0;h<e.length;++h){var v=e[h];if(v&&!v.fa&&v.capture==n){var P=v.listener,V=v.la||v.src;v.ia&&ws(i.i,v),u=!1!==P.call(V,o)&&u}}return u&&!o.defaultPrevented}xe(Qt,Le),Qt.prototype[Bt]=!0,Qt.prototype.removeEventListener=function(i,e,n,o){re(this,i,e,n,o)},Qt.prototype.N=function(){if(Qt.$.N.call(this),this.i){var e,i=this.i;for(e in i.g){for(var n=i.g[e],o=0;o<n.length;o++)mn(n[o]);delete i.g[e],i.h--}}this.J=null},Qt.prototype.O=function(i,e,n,o){return this.i.add(String(i),e,!1,n,o)},Qt.prototype.P=function(i,e,n,o){return this.i.add(String(i),e,!0,n,o)};var Kr=Tt.JSON.stringify;function Ms(){var i=Yr;let e=null;return i.g&&(e=i.g,i.g=i.g.next,i.g||(i.h=null),e.next=null),e}var je=new class js{constructor(e,n){this.i=e,this.j=n,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}(()=>new mt,i=>i.reset());class mt{constructor(){this.next=this.g=this.h=null}set(e,n){this.h=e,this.g=n,this.next=null}reset(){this.next=this.g=this.h=null}}function en(i){var e=1;i=i.split(":");const n=[];for(;0<e&&i.length;)n.push(i.shift()),e--;return i.length&&n.push(i.join(":")),n}function _n(i){Tt.setTimeout(()=>{throw i},0)}let jt,Vn=!1,Yr=new class rt{constructor(){this.h=this.g=null}add(e,n){const o=je.get();o.set(e,n),this.h?this.h.next=o:this.g=o,this.h=o}},Dr=()=>{const i=Tt.Promise.resolve(void 0);jt=()=>{i.then(qs)}};var qs=()=>{for(var i;i=Ms();){try{i.h.call(i.g)}catch(n){_n(n)}var e=je;e.j(i),100>e.h&&(e.h++,i.next=e.g,e.g=i)}Vn=!1};function Pi(i,e){Qt.call(this),this.h=i||1,this.g=e||Tt,this.j=be(this.qb,this),this.l=Date.now()}function hs(i){i.ga=!1,i.T&&(i.g.clearTimeout(i.T),i.T=null)}function Ja(i,e,n){if("function"==typeof i)n&&(i=be(i,n));else{if(!i||"function"!=typeof i.handleEvent)throw Error("Invalid listener argument");i=be(i.handleEvent,i)}return 2147483647<Number(e)?-1:Tt.setTimeout(i,e||0)}function Lo(i){i.g=Ja(()=>{i.g=null,i.i&&(i.i=!1,Lo(i))},i.j);const e=i.h;i.h=null,i.m.apply(null,e)}xe(Pi,Qt),(ce=Pi.prototype).ga=!1,ce.T=null,ce.qb=function(){if(this.ga){var i=Date.now()-this.l;0<i&&i<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-i):(this.T&&(this.g.clearTimeout(this.T),this.T=null),un(this,"tick"),this.ga&&(hs(this),this.start()))}},ce.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},ce.N=function(){Pi.$.N.call(this),hs(this),delete this.g};class ma extends Le{constructor(e,n){super(),this.m=e,this.j=n,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:Lo(this)}N(){super.N(),this.g&&(Tt.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Dn(i){Le.call(this),this.h=i,this.g={}}xe(Dn,Le);var La=[];function Gs(i,e,n,o){Array.isArray(n)||(n&&(La[0]=n.toString()),n=La);for(var u=0;u<n.length;u++){var h=Oi(e,n[u],o||i.handleEvent,!1,i.h||i);if(!h)break;i.g[h.key]=h}}function es(i){Ni(i.g,function(e,n){this.g.hasOwnProperty(n)&&oe(e)},i),i.g={}}function $i(){this.g=!0}function Ii(i,e,n,o){i.info(function(){return"XMLHTTP TEXT ("+e+"): "+function cr(i,e){if(!i.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n)for(i=0;i<n.length;i++)if(Array.isArray(n[i])){var o=n[i];if(!(2>o.length)){var u=o[1];if(Array.isArray(u)&&!(1>u.length)){var h=u[0];if("noop"!=h&&"stop"!=h&&"close"!=h)for(var v=1;v<u.length;v++)u[v]=""}}}return Kr(n)}catch{return e}}(i,n)+(o?" "+o:"")})}Dn.prototype.N=function(){Dn.$.N.call(this),es(this)},Dn.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},$i.prototype.Ea=function(){this.g=!1},$i.prototype.info=function(){};var er={},ts=null;function Ei(){return ts=ts||new Qt}function Vi(i){wt.call(this,er.Ta,i)}function Bi(i){const e=Ei();un(e,new Vi(e))}function _a(i,e){wt.call(this,er.STAT_EVENT,i),this.stat=e}function hi(i){const e=Ei();un(e,new _a(e,i))}function va(i,e){wt.call(this,er.Ua,i),this.size=e}function Wi(i,e){if("function"!=typeof i)throw Error("Fn must not be null and must be a function");return Tt.setTimeout(function(){i()},e)}er.Ta="serverreachability",xe(Vi,wt),er.STAT_EVENT="statevent",xe(_a,wt),er.Ua="timingevent",xe(va,wt);var Va={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},ya={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function eu(){}function Ba(){}eu.prototype.h=null;var Ia,xs={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function Bo(){wt.call(this,"d")}function ao(){wt.call(this,"c")}function Ds(){}function Bn(i,e,n,o){this.l=i,this.j=e,this.m=n,this.W=o||1,this.U=new Dn(this),this.P=nr,this.V=new Pi(i=pt?125:void 0),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new fi}function fi(){this.i=null,this.g="",this.h=!1}xe(Bo,wt),xe(ao,wt),xe(Ds,eu),Ds.prototype.g=function(){return new XMLHttpRequest},Ds.prototype.i=function(){return{}},Ia=new Ds;var nr=45e3,ri={},Er={};function ks(i,e,n){i.L=1,i.v=co(ei(e)),i.s=n,i.S=!0,Cs(i,null)}function Cs(i,e){i.G=Date.now(),Cr(i),i.A=ei(i.v);var n=i.A,o=i.W;Array.isArray(o)||(o=[String(o)]),Ea(n.i,"t",o),i.C=0,n=i.l.J,i.h=new fi,i.g=su(i.l,n?e:null,!i.s),0<i.O&&(i.M=new ma(be(i.Pa,i,i.g),i.O)),Gs(i.U,i.g,"readystatechange",i.nb),e=i.I?ur(i.I):{},i.s?(i.u||(i.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",i.g.ha(i.A,i.u,i.s,e)):(i.u="GET",i.g.ha(i.A,i.u,null,e)),Bi(),function ea(i,e,n,o,u,h){i.info(function(){if(i.g)if(h)for(var v="",P=h.split("&"),V=0;V<P.length;V++){var z=P[V].split("=");if(1<z.length){var ee=z[0];z=z[1];var le=ee.split("_");v=2<=le.length&&"type"==le[1]?v+(ee+"=")+z+"&":v+(ee+"=redacted&")}}else v=null;else v=h;return"XMLHTTP REQ ("+o+") [attempt "+u+"]: "+e+"\n"+n+"\n"+v})}(i.j,i.u,i.A,i.m,i.W,i.s)}function Gr(i){return!!i.g&&"GET"==i.u&&2!=i.L&&i.l.Ha}function Ks(i,e,n){let u,o=!0;for(;!i.J&&i.C<n.length;){if(u=As(i,n),u==Er){4==e&&(i.o=4,hi(14),o=!1),Ii(i.j,i.m,null,"[Incomplete Response]");break}if(u==ri){i.o=4,hi(15),Ii(i.j,i.m,n,"[Invalid Chunk]"),o=!1;break}Ii(i.j,i.m,u,null),ns(i,u)}Gr(i)&&u!=Er&&u!=ri&&(i.h.g="",i.C=0),4!=e||0!=n.length||i.h.h||(i.o=1,hi(16),o=!1),i.i=i.i&&o,o?0<n.length&&!i.ba&&(i.ba=!0,(e=i.l).g==i&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),Ga(e),e.M=!0,hi(11))):(Ii(i.j,i.m,n,"[Invalid Chunked Response]"),ci(i),zn(i))}function As(i,e){var n=i.C,o=e.indexOf("\n",n);return-1==o?Er:(n=Number(e.substring(n,o)),isNaN(n)?ri:(o+=1)+n>e.length?Er:(e=e.slice(o,o+n),i.C=o+n,e))}function Cr(i){i.Y=Date.now()+i.P,Lt(i,i.P)}function Lt(i,e){if(null!=i.B)throw Error("WatchDog timer not null");i.B=Wi(be(i.lb,i),e)}function fn(i){i.B&&(Tt.clearTimeout(i.B),i.B=null)}function zn(i){0==i.l.H||i.J||iu(i.l,i)}function ci(i){fn(i);var e=i.M;e&&"function"==typeof e.sa&&e.sa(),i.M=null,hs(i.V),es(i.U),i.g&&(e=i.g,i.g=null,e.abort(),e.sa())}function ns(i,e){try{var n=i.l;if(0!=n.H&&(n.g==i||Ls(n.i,i)))if(!i.K&&Ls(n.i,i)&&3==n.H){try{var o=n.Ja.g.parse(e)}catch{o=null}if(Array.isArray(o)&&3==o.length){var u=o;if(0==u[0]){e:if(!n.u){if(n.g){if(!(n.g.G+3e3<i.G))break e;Zs(n),Gu(n)}wu(n),hi(18)}}else n.Fa=u[1],0<n.Fa-n.V&&37500>u[2]&&n.G&&0==n.A&&!n.v&&(n.v=Wi(be(n.ib,n),6e3));if(1>=Fs(n.i)&&n.oa){try{n.oa()}catch{}n.oa=void 0}}else Ho(n,11)}else if((i.K||n.g==i)&&Zs(n),!on(e))for(u=n.Ja.g.parse(e),e=0;e<u.length;e++){let z=u[e];if(n.V=z[0],z=z[1],2==n.H)if("c"==z[0]){n.K=z[1],n.pa=z[2];const ee=z[3];null!=ee&&(n.ra=ee,n.l.info("VER="+n.ra));const le=z[4];null!=le&&(n.Ga=le,n.l.info("SVER="+n.Ga));const Ae=z[5];null!=Ae&&"number"==typeof Ae&&0<Ae&&(n.L=o=1.5*Ae,n.l.info("backChannelRequestTimeoutMs_="+o)),o=n;const Xe=i.g;if(Xe){const kt=Xe.g?Xe.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(kt){var h=o.i;h.g||-1==kt.indexOf("spdy")&&-1==kt.indexOf("quic")&&-1==kt.indexOf("h2")||(h.j=h.l,h.g=new Set,h.h&&(Lr(h,h.h),h.h=null))}if(o.F){const zt=Xe.g?Xe.g.getResponseHeader("X-HTTP-Session-Id"):null;zt&&(o.Da=zt,Un(o.I,o.F,zt))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-i.G,n.l.info("Handshake RTT: "+n.S+"ms"));var v=i;if((o=n).wa=yc(o,o.J?o.pa:null,o.Y),v.K){Ss(o.i,v);var P=v,V=o.L;V&&P.setTimeout(V),P.B&&(fn(P),Cr(P)),o.g=v}else ja(o);0<n.j.length&&Ua(n)}else"stop"!=z[0]&&"close"!=z[0]||Ho(n,7);else 3==n.H&&("stop"==z[0]||"close"==z[0]?"stop"==z[0]?Ho(n,7):ia(n):"noop"!=z[0]&&n.h&&n.h.Aa(z),n.A=0)}Bi()}catch{}}function Wn(i,e){if(i.forEach&&"function"==typeof i.forEach)i.forEach(e,void 0);else if(Hn(i)||"string"==typeof i)Array.prototype.forEach.call(i,e,void 0);else for(var n=function Zr(i){if(i.ta&&"function"==typeof i.ta)return i.ta();if(!i.Z||"function"!=typeof i.Z){if(typeof Map<"u"&&i instanceof Map)return Array.from(i.keys());if(!(typeof Set<"u"&&i instanceof Set)){if(Hn(i)||"string"==typeof i){var e=[];i=i.length;for(var n=0;n<i;n++)e.push(n);return e}e=[],n=0;for(const o in i)e[n++]=o;return e}}}(i),o=function vr(i){if(i.Z&&"function"==typeof i.Z)return i.Z();if(typeof Map<"u"&&i instanceof Map||typeof Set<"u"&&i instanceof Set)return Array.from(i.values());if("string"==typeof i)return i.split("");if(Hn(i)){for(var e=[],n=i.length,o=0;o<n;o++)e.push(i[o]);return e}for(o in e=[],n=0,i)e[n++]=i[o];return e}(i),u=o.length,h=0;h<u;h++)e.call(void 0,o[h],n&&n[h],i)}(ce=Bn.prototype).setTimeout=function(i){this.P=i},ce.nb=function(i){i=i.target;const e=this.M;e&&3==ji(i)?e.l():this.Pa(i)},ce.Pa=function(i){try{if(i==this.g)e:{const ee=ji(this.g);var e=this.g.Ia();if(this.g.da(),!(3>ee)&&(3!=ee||pt||this.g&&(this.h.h||this.g.ja()||ss(this.g)))){this.J||4!=ee||7==e||Bi(),fn(this);var n=this.g.da();this.ca=n;t:if(Gr(this)){var o=ss(this.g);i="";var u=o.length,h=4==ji(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){ci(this),zn(this);var v="";break t}this.h.i=new Tt.TextDecoder}for(e=0;e<u;e++)this.h.h=!0,i+=this.h.i.decode(o[e],{stream:h&&e==u-1});o.splice(0,u),this.h.g+=i,this.C=0,v=this.h.g}else v=this.g.ja();if(this.i=200==n,function Xa(i,e,n,o,u,h,v){i.info(function(){return"XMLHTTP RESP ("+o+") [ attempt "+u+"]: "+e+"\n"+n+"\n"+h+" "+v})}(this.j,this.u,this.A,this.m,this.W,ee,n),this.i){if(this.aa&&!this.K){t:{if(this.g){var P,V=this.g;if((P=V.g?V.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!on(P)){var z=P;break t}}z=null}if(!(n=z)){this.i=!1,this.o=3,hi(12),ci(this),zn(this);break e}Ii(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,ns(this,n)}this.S?(Ks(this,ee,v),pt&&this.i&&3==ee&&(Gs(this.U,this.V,"tick",this.mb),this.V.start())):(Ii(this.j,this.m,v,null),ns(this,v)),4==ee&&ci(this),this.i&&!this.J&&(4==ee?iu(this.l,this):(this.i=!1,Cr(this)))}else(function Ao(i){const e={};i=(i.g&&2<=ji(i)&&i.g.getAllResponseHeaders()||"").split("\r\n");for(let o=0;o<i.length;o++){if(on(i[o]))continue;var n=en(i[o]);const u=n[0];if("string"!=typeof(n=n[1]))continue;n=n.trim();const h=e[u]||[];e[u]=h,h.push(n)}!function Fa(i,e){for(const n in i)e.call(void 0,i[n],n,i)}(e,function(o){return o.join(", ")})})(this.g),400==n&&0<v.indexOf("Unknown SID")?(this.o=3,hi(12)):(this.o=0,hi(13)),ci(this),zn(this)}}}catch{}},ce.mb=function(){if(this.g){var i=ji(this.g),e=this.g.ja();this.C<e.length&&(fn(this),Ks(this,i,e),this.i&&4!=i&&Cr(this))}},ce.cancel=function(){this.J=!0,ci(this)},ce.lb=function(){this.B=null;const i=Date.now();0<=i-this.Y?(function zi(i,e){i.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.L&&(Bi(),hi(17)),ci(this),this.o=2,zn(this)):Lt(this,this.Y-i)};var fs=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function vn(i){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,i instanceof vn){this.h=i.h,uo(this,i.j),this.s=i.s,this.g=i.g,ps(this,i.m),this.l=i.l;var e=i.i,n=new Ti;n.i=e.i,e.g&&(n.g=new Map(e.g),n.h=e.h),ii(this,n),this.o=i.o}else i&&(e=String(i).match(fs))?(this.h=!1,uo(this,e[1]||"",!0),this.s=Mi(e[2]||""),this.g=Mi(e[3]||"",!0),ps(this,e[4]),this.l=Mi(e[5]||"",!0),ii(this,e[6]||"",!0),this.o=Mi(e[7]||"")):(this.h=!1,this.i=new Ti(null,this.h))}function ei(i){return new vn(i)}function uo(i,e,n){i.j=n?Mi(e,!0):e,i.j&&(i.j=i.j.replace(/:$/,""))}function ps(i,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);i.m=e}else i.m=null}function ii(i,e,n){e instanceof Ti?(i.i=e,function na(i,e){e&&!i.j&&(rs(i),i.i=null,i.g.forEach(function(n,o){var u=o.toLowerCase();o!=u&&(_s(this,o),Ea(this,u,n))},i)),i.j=e}(i.i,i.h)):(n||(e=qi(e,ta)),i.i=new Ti(e,i.h))}function Un(i,e,n){i.i.set(e,n)}function co(i){return Un(i,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),i}function Mi(i,e){return i?e?decodeURI(i.replace(/%25/g,"%2525")):decodeURIComponent(i):""}function qi(i,e,n){return"string"==typeof i?(i=encodeURI(i).replace(e,gs),n&&(i=i.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),i):null}function gs(i){return"%"+((i=i.charCodeAt(0))>>4&15).toString(16)+(15&i).toString(16)}vn.prototype.toString=function(){var i=[],e=this.j;e&&i.push(qi(e,Hs,!0),":");var n=this.g;return(n||"file"==e)&&(i.push("//"),(e=this.s)&&i.push(qi(e,Hs,!0),"@"),i.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&i.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&i.push("/"),i.push(qi(n,"/"==n.charAt(0)?pi:ms,!0))),(n=this.i.toString())&&i.push("?",n),(n=this.o)&&i.push("#",qi(n,Ln)),i.join("")};var Hs=/[#\/\?@]/g,ms=/[#\?:]/g,pi=/[#\?]/g,ta=/[#\?@]/g,Ln=/#/g;function Ti(i,e){this.h=this.g=null,this.i=i||null,this.j=!!e}function rs(i){i.g||(i.g=new Map,i.h=0,i.i&&function Qr(i,e){if(i){i=i.split("&");for(var n=0;n<i.length;n++){var o=i[n].indexOf("="),u=null;if(0<=o){var h=i[n].substring(0,o);u=i[n].substring(o+1)}else h=i[n];e(h,u?decodeURIComponent(u.replace(/\+/g," ")):"")}}}(i.i,function(e,n){i.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}function _s(i,e){rs(i),e=Ys(i,e),i.g.has(e)&&(i.i=null,i.h-=i.g.get(e).length,i.g.delete(e))}function vs(i,e){return rs(i),e=Ys(i,e),i.g.has(e)}function Ea(i,e,n){_s(i,e),0<n.length&&(i.i=null,i.g.set(Ys(i,e),Ct(n)),i.h+=n.length)}function Ys(i,e){return e=String(e),i.j&&(e=e.toLowerCase()),e}function tu(i){this.l=i||lr,i=Tt.PerformanceNavigationTiming?0<(i=Tt.performance.getEntriesByType("navigation")).length&&("hq"==i[0].nextHopProtocol||"h2"==i[0].nextHopProtocol):!!(Tt.g&&Tt.g.Ka&&Tt.g.Ka()&&Tt.g.Ka().dc),this.j=i?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(ce=Ti.prototype).add=function(i,e){rs(this),this.i=null,i=Ys(this,i);var n=this.g.get(i);return n||this.g.set(i,n=[]),n.push(e),this.h+=1,this},ce.forEach=function(i,e){rs(this),this.g.forEach(function(n,o){n.forEach(function(u){i.call(e,u,o,this)},this)},this)},ce.ta=function(){rs(this);const i=Array.from(this.g.values()),e=Array.from(this.g.keys()),n=[];for(let o=0;o<e.length;o++){const u=i[o];for(let h=0;h<u.length;h++)n.push(e[o])}return n},ce.Z=function(i){rs(this);let e=[];if("string"==typeof i)vs(this,i)&&(e=e.concat(this.g.get(Ys(this,i))));else{i=Array.from(this.g.values());for(let n=0;n<i.length;n++)e=e.concat(i[n])}return e},ce.set=function(i,e){return rs(this),this.i=null,vs(this,i=Ys(this,i))&&(this.h-=this.g.get(i).length),this.g.set(i,[e]),this.h+=1,this},ce.get=function(i,e){return i&&0<(i=this.Z(i)).length?String(i[0]):e},ce.toString=function(){if(this.i)return this.i;if(!this.g)return"";const i=[],e=Array.from(this.g.keys());for(var n=0;n<e.length;n++){var o=e[n];const h=encodeURIComponent(String(o)),v=this.Z(o);for(o=0;o<v.length;o++){var u=h;""!==v[o]&&(u+="="+encodeURIComponent(String(v[o]))),i.push(u)}}return this.i=i.join("&")};var lr=10;function Ui(i){return!!i.h||!!i.g&&i.g.size>=i.j}function Fs(i){return i.h?1:i.g?i.g.size:0}function Ls(i,e){return i.h?i.h==e:!!i.g&&i.g.has(e)}function Lr(i,e){i.g?i.g.add(e):i.h=e}function Ss(i,e){i.h&&i.h==e?i.h=null:i.g&&i.g.has(e)&&i.g.delete(e)}function nu(i){if(null!=i.h)return i.i.concat(i.h.F);if(null!=i.g&&0!==i.g.size){let e=i.i;for(const n of i.g.values())e=e.concat(n.F);return e}return Ct(i.i)}tu.prototype.cancel=function(){if(this.i=nu(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const i of this.g.values())i.cancel();this.g.clear()}};var lo=class{stringify(i){return Tt.JSON.stringify(i,void 0)}parse(i){return Tt.JSON.parse(i,void 0)}};function Uo(){this.g=new lo}function _c(i,e,n){const o=n||"";try{Wn(i,function(u,h){let v=u;bn(u)&&(v=Kr(u)),e.push(o+h+"="+encodeURIComponent(v))})}catch(u){throw e.push(o+"type="+encodeURIComponent("_badmap")),u}}function wo(i,e,n,o,u){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,u(o)}catch{}}function Do(i){this.l=i.ec||null,this.j=i.ob||!1}function Ta(i,e){Qt.call(this),this.F=i,this.u=e,this.m=void 0,this.readyState=Co,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}xe(Do,eu),Do.prototype.g=function(){return new Ta(this.l,this.j)},Do.prototype.i=function(i){return function(){return i}}({}),xe(Ta,Qt);var Co=0;function yr(i){i.j.read().then(i.Xa.bind(i)).catch(i.ka.bind(i))}function Go(i){i.readyState=4,i.l=null,i.j=null,i.A=null,ra(i)}function ra(i){i.onreadystatechange&&i.onreadystatechange.call(i)}(ce=Ta.prototype).open=function(i,e){if(this.readyState!=Co)throw this.abort(),Error("Error reopening a connection");this.C=i,this.B=e,this.readyState=1,ra(this)},ce.send=function(i){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};i&&(e.body=i),(this.F||Tt).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))},ce.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Go(this)),this.readyState=Co},ce.$a=function(i){if(this.g&&(this.l=i,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=i.headers,this.readyState=2,ra(this)),this.g&&(this.readyState=3,ra(this),this.g)))if("arraybuffer"===this.responseType)i.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof Tt.ReadableStream<"u"&&"body"in i){if(this.j=i.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;yr(this)}else i.text().then(this.Za.bind(this),this.ka.bind(this))},ce.Xa=function(i){if(this.g){if(this.u&&i.value)this.response.push(i.value);else if(!this.u){var e=i.value?i.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!i.done}))&&(this.response=this.responseText+=e)}i.done?Go(this):ra(this),3==this.readyState&&yr(this)}},ce.Za=function(i){this.g&&(this.response=this.responseText=i,Go(this))},ce.Ya=function(i){this.g&&(this.response=i,Go(this))},ce.ka=function(){this.g&&Go(this)},ce.setRequestHeader=function(i,e){this.v.append(i,e)},ce.getResponseHeader=function(i){return this.h&&this.h.get(i.toLowerCase())||""},ce.getAllResponseHeaders=function(){if(!this.h)return"";const i=[],e=this.h.entries();for(var n=e.next();!n.done;)i.push((n=n.value)[0]+": "+n[1]),n=e.next();return i.join("\r\n")},Object.defineProperty(Ta.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(i){this.m=i?"include":"same-origin"}});var W=Tt.JSON.parse;function q(i){Qt.call(this),this.headers=new Map,this.u=i||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=B,this.L=this.M=!1}xe(q,Qt);var B="",ie=/^https?$/i,we=["POST","PUT"];function In(i,e){i.h=!1,i.g&&(i.l=!0,i.g.abort(),i.l=!1),i.j=e,i.m=5,xi(i),ho(i)}function xi(i){i.F||(i.F=!0,un(i,"complete"),un(i,"error"))}function is(i){if(i.h&&typeof Zt<"u"&&(!i.C[1]||4!=ji(i)||2!=i.da()))if(i.v&&4==ji(i))Ja(i.La,0,i);else if(un(i,"readystatechange"),4==ji(i)){i.h=!1;try{const v=i.da();e:switch(v){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var n;if(!(n=e)){var o;if(o=0===v){var u=String(i.I).match(fs)[1]||null;!u&&Tt.self&&Tt.self.location&&(u=Tt.self.location.protocol.slice(0,-1)),o=!ie.test(u?u.toLowerCase():"")}n=o}if(n)un(i,"complete"),un(i,"success");else{i.m=6;try{var h=2<ji(i)?i.g.statusText:""}catch{h=""}i.j=h+" ["+i.da()+"]",xi(i)}}finally{ho(i)}}}function ho(i,e){if(i.g){fo(i);const n=i.g,o=i.C[0]?()=>{}:null;i.g=null,i.C=null,e||un(i,"ready");try{n.onreadystatechange=o}catch{}}}function fo(i){i.g&&i.L&&(i.g.ontimeout=null),i.A&&(Tt.clearTimeout(i.A),i.A=null)}function ji(i){return i.g?i.g.readyState:0}function ss(i){try{if(!i.g)return null;if("response"in i.g)return i.g.response;switch(i.K){case B:case"text":return i.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in i.g)return i.g.mozResponseArrayBuffer}return null}catch{return null}}function Tu(i){let e="";return Ni(i,function(n,o){e+=o,e+=":",e+=n,e+="\r\n"}),e}function bi(i,e,n){e:{for(o in n){var o=!1;break e}o=!0}o||(n=Tu(n),"string"==typeof i?null!=n&&encodeURIComponent(String(n)):Un(i,e,n))}function Rs(i,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[i]||e}function Ki(i){this.Ga=0,this.j=[],this.l=new $i,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=Rs("failFast",!1,i),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=Rs("baseRetryDelayMs",5e3,i),this.hb=Rs("retryDelaySeedMs",1e4,i),this.eb=Rs("forwardChannelMaxRetries",2,i),this.xa=Rs("forwardChannelRequestTimeoutMs",2e4,i),this.va=i&&i.xmlHttpFactory||void 0,this.Ha=i&&i.useFetchStreams||!1,this.L=void 0,this.J=i&&i.supportsCrossDomainXhr||!1,this.K="",this.i=new tu(i&&i.concurrentRequestLimit),this.Ja=new Uo,this.P=i&&i.fastHandshake||!1,this.O=i&&i.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=i&&i.bc||!1,i&&i.Ea&&this.l.Ea(),i&&i.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&i&&i.detectBufferingProxy||!1,this.qa=void 0,i&&i.longPollingTimeout&&0<i.longPollingTimeout&&(this.qa=i.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}function ia(i){if(So(i),3==i.H){var e=i.W++,n=ei(i.I);if(Un(n,"SID",i.K),Un(n,"RID",e),Un(n,"TYPE","terminate"),Ro(i,n),(e=new Bn(i,i.l,e)).L=2,e.v=co(ei(n)),n=!1,Tt.navigator&&Tt.navigator.sendBeacon)try{n=Tt.navigator.sendBeacon(e.v.toString(),"")}catch{}!n&&Tt.Image&&((new Image).src=e.v,n=!0),n||(e.g=su(e.l,null),e.g.ha(e.v)),e.G=Date.now(),Cr(e)}bd(i)}function Gu(i){i.g&&(Ga(i),i.g.cancel(),i.g=null)}function So(i){Gu(i),i.u&&(Tt.clearTimeout(i.u),i.u=null),Zs(i),i.i.cancel(),i.m&&("number"==typeof i.m&&Tt.clearTimeout(i.m),i.m=null)}function Ua(i){if(!Ui(i.i)&&!i.m){i.m=!0;var e=i.Na;jt||Dr(),Vn||(jt(),Vn=!0),Yr.add(e,i),i.C=0}}function vc(i,e){var n;n=e?e.m:i.W++;const o=ei(i.I);Un(o,"SID",i.K),Un(o,"RID",n),Un(o,"AID",i.V),Ro(i,o),i.o&&i.s&&bi(o,i.o,i.s),n=new Bn(i,i.l,n,i.C+1),null===i.o&&(n.I=i.s),e&&(i.j=e.F.concat(i.j)),e=bu(i,n,1e3),n.setTimeout(Math.round(.5*i.xa)+Math.round(.5*i.xa*Math.random())),Lr(i.i,n),ks(n,o,e)}function Ro(i,e){i.na&&Ni(i.na,function(n,o){Un(e,o,n)}),i.h&&Wn({},function(n,o){Un(e,o,n)})}function bu(i,e,n){n=Math.min(i.j.length,n);var o=i.h?be(i.h.Va,i.h,i):null;e:{var u=i.j;let h=-1;for(;;){const v=["count="+n];-1==h?0<n?(h=u[0].g,v.push("ofs="+h)):h=0:v.push("ofs="+h);let P=!0;for(let V=0;V<n;V++){let z=u[V].g;const ee=u[V].map;if(z-=h,0>z)h=Math.max(0,u[V].g-100),P=!1;else try{_c(ee,v,"req"+z+"_")}catch{o&&o(ee)}}if(P){o=v.join("&");break e}}}return i=i.j.splice(0,n),e.F=i,o}function ja(i){if(!i.g&&!i.u){i.ba=1;var e=i.Ma;jt||Dr(),Vn||(jt(),Vn=!0),Yr.add(e,i),i.A=0}}function wu(i){return!(i.g||i.u||3<=i.A||(i.ba++,i.u=Wi(be(i.Ma,i),zc(i,i.A)),i.A++,0))}function Ga(i){null!=i.B&&(Tt.clearTimeout(i.B),i.B=null)}function ru(i){i.g=new Bn(i,i.l,"rpc",i.ba),null===i.o&&(i.g.I=i.s),i.g.O=0;var e=ei(i.wa);Un(e,"RID","rpc"),Un(e,"SID",i.K),Un(e,"AID",i.V),Un(e,"CI",i.G?"0":"1"),!i.G&&i.qa&&Un(e,"TO",i.qa),Un(e,"TYPE","xmlhttp"),Ro(i,e),i.o&&i.s&&bi(e,i.o,i.s),i.L&&i.g.setTimeout(i.L);var n=i.g;i=i.pa,n.L=1,n.v=co(ei(e)),n.s=null,n.S=!0,Cs(n,i)}function Zs(i){null!=i.v&&(Tt.clearTimeout(i.v),i.v=null)}function iu(i,e){var n=null;if(i.g==e){Zs(i),Ga(i),i.g=null;var o=2}else{if(!Ls(i.i,e))return;n=e.F,Ss(i.i,e),o=1}if(0!=i.H)if(e.i)if(1==o){n=e.s?e.s.length:0,e=Date.now()-e.G;var u=i.C;un(o=Ei(),new va(o,n)),Ua(i)}else ja(i);else if(3==(u=e.o)||0==u&&0<e.ca||!(1==o&&function po(i,e){return!(Fs(i.i)>=i.i.j-(i.m?1:0)||(i.m?(i.j=e.F.concat(i.j),0):1==i.H||2==i.H||i.C>=(i.cb?0:i.eb)||(i.m=Wi(be(i.Na,i,e),zc(i,i.C)),i.C++,0)))}(i,e)||2==o&&wu(i)))switch(n&&0<n.length&&(e=i.i,e.i=e.i.concat(n)),u){case 1:Ho(i,5);break;case 4:Ho(i,10);break;case 3:Ho(i,6);break;default:Ho(i,2)}}function zc(i,e){let n=i.ab+Math.floor(Math.random()*i.hb);return i.isActive()||(n*=2),n*e}function Ho(i,e){if(i.l.info("Error code "+e),2==e){var n=null;i.h&&(n=null);var o=be(i.pb,i);n||(n=new vn("//www.google.com/images/cleardot.gif"),Tt.location&&"http"==Tt.location.protocol||uo(n,"https"),co(n)),function jo(i,e){const n=new $i;if(Tt.Image){const o=new Image;o.onload=He(wo,n,o,"TestLoadImage: loaded",!0,e),o.onerror=He(wo,n,o,"TestLoadImage: error",!1,e),o.onabort=He(wo,n,o,"TestLoadImage: abort",!1,e),o.ontimeout=He(wo,n,o,"TestLoadImage: timeout",!1,e),Tt.setTimeout(function(){o.ontimeout&&o.ontimeout()},1e4),o.src=i}else e(!1)}(n.toString(),o)}else hi(2);i.H=0,i.h&&i.h.za(e),bd(i),So(i)}function bd(i){if(i.H=0,i.ma=[],i.h){const e=nu(i.i);(0!=e.length||0!=i.j.length)&&(ar(i.ma,e),ar(i.ma,i.j),i.i.i.length=0,Ct(i.j),i.j.length=0),i.h.ya()}}function yc(i,e,n){var o=n instanceof vn?ei(n):new vn(n);if(""!=o.g)e&&(o.g=e+"."+o.g),ps(o,o.m);else{var u=Tt.location;o=u.protocol,e=e?e+"."+u.hostname:u.hostname,u=+u.port;var h=new vn(null);o&&uo(h,o),e&&(h.g=e),u&&ps(h,u),n&&(h.l=n),o=h}return e=i.Da,(n=i.F)&&e&&Un(o,n,e),Un(o,"VER",i.ra),Ro(i,o),o}function su(i,e,n){if(e&&!i.J)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new q(n&&i.Ha&&!i.va?new Do({ob:!0}):i.va)).Oa(i.J),e}function Wc(){}function Ha(){if(Ue&&!(10<=Number(Mn)))throw Error("Environmental error: no available transport.")}function Qs(i,e){Qt.call(this),this.g=new Ki(e),this.l=i,this.h=e&&e.messageUrlParams||null,i=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(i?i["X-Client-Protocol"]="webchannel":i={"X-Client-Protocol":"webchannel"}),this.g.s=i,i=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(i?i["X-WebChannel-Content-Type"]=e.messageContentType:i={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(i?i["X-WebChannel-Client-Profile"]=e.Ca:i={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=i,(i=e&&e.cc)&&!on(i)&&(this.g.o=i),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!on(e)&&(this.g.F=e,null!==(i=this.h)&&e in i&&e in(i=this.h)&&delete i[e]),this.j=new Js(this)}function ba(i){Bo.call(this),i.__headers__&&(this.headers=i.__headers__,this.statusCode=i.__status__,delete i.__headers__,delete i.__status__);var e=i.__sm__;if(e){e:{for(const n in e){i=n;break e}i=void 0}(this.i=i)&&(i=this.i,e=null!==e&&i in e?e[i]:void 0),this.data=e}else this.data=i}function qc(){ao.call(this),this.status=1}function Js(i){this.g=i}function Yi(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function Hu(i,e,n){n||(n=0);var o=Array(16);if("string"==typeof e)for(var u=0;16>u;++u)o[u]=e.charCodeAt(n++)|e.charCodeAt(n++)<<8|e.charCodeAt(n++)<<16|e.charCodeAt(n++)<<24;else for(u=0;16>u;++u)o[u]=e[n++]|e[n++]<<8|e[n++]<<16|e[n++]<<24;var h=i.g[3],v=(e=i.g[0])+(h^(n=i.g[1])&((u=i.g[2])^h))+o[0]+3614090360&4294967295;v=(n=(u=(h=(e=(n=(u=(h=(e=(n=(u=(h=(e=(n=(u=(h=(e=(n=(u=(h=(e=(n=(u=(h=(e=(n=(u=(h=(e=(n=(u=(h=(e=(n=(u=(h=(e=(n=(u=(h=(e=(n=(u=(h=(e=(n=(u=(h=(e=(n=(u=(h=(e=(n=(u=(h=(e=(n=(u=(h=(e=n+(v<<7&4294967295|v>>>25))+((v=h+(u^e&(n^u))+o[1]+3905402710&4294967295)<<12&4294967295|v>>>20))+((v=u+(n^h&(e^n))+o[2]+606105819&4294967295)<<17&4294967295|v>>>15))+((v=n+(e^u&(h^e))+o[3]+3250441966&4294967295)<<22&4294967295|v>>>10))+((v=e+(h^n&(u^h))+o[4]+4118548399&4294967295)<<7&4294967295|v>>>25))+((v=h+(u^e&(n^u))+o[5]+1200080426&4294967295)<<12&4294967295|v>>>20))+((v=u+(n^h&(e^n))+o[6]+2821735955&4294967295)<<17&4294967295|v>>>15))+((v=n+(e^u&(h^e))+o[7]+4249261313&4294967295)<<22&4294967295|v>>>10))+((v=e+(h^n&(u^h))+o[8]+1770035416&4294967295)<<7&4294967295|v>>>25))+((v=h+(u^e&(n^u))+o[9]+2336552879&4294967295)<<12&4294967295|v>>>20))+((v=u+(n^h&(e^n))+o[10]+4294925233&4294967295)<<17&4294967295|v>>>15))+((v=n+(e^u&(h^e))+o[11]+2304563134&4294967295)<<22&4294967295|v>>>10))+((v=e+(h^n&(u^h))+o[12]+1804603682&4294967295)<<7&4294967295|v>>>25))+((v=h+(u^e&(n^u))+o[13]+4254626195&4294967295)<<12&4294967295|v>>>20))+((v=u+(n^h&(e^n))+o[14]+2792965006&4294967295)<<17&4294967295|v>>>15))+((v=n+(e^u&(h^e))+o[15]+1236535329&4294967295)<<22&4294967295|v>>>10))+((v=e+(u^h&(n^u))+o[1]+4129170786&4294967295)<<5&4294967295|v>>>27))+((v=h+(n^u&(e^n))+o[6]+3225465664&4294967295)<<9&4294967295|v>>>23))+((v=u+(e^n&(h^e))+o[11]+643717713&4294967295)<<14&4294967295|v>>>18))+((v=n+(h^e&(u^h))+o[0]+3921069994&4294967295)<<20&4294967295|v>>>12))+((v=e+(u^h&(n^u))+o[5]+3593408605&4294967295)<<5&4294967295|v>>>27))+((v=h+(n^u&(e^n))+o[10]+38016083&4294967295)<<9&4294967295|v>>>23))+((v=u+(e^n&(h^e))+o[15]+3634488961&4294967295)<<14&4294967295|v>>>18))+((v=n+(h^e&(u^h))+o[4]+3889429448&4294967295)<<20&4294967295|v>>>12))+((v=e+(u^h&(n^u))+o[9]+568446438&4294967295)<<5&4294967295|v>>>27))+((v=h+(n^u&(e^n))+o[14]+3275163606&4294967295)<<9&4294967295|v>>>23))+((v=u+(e^n&(h^e))+o[3]+4107603335&4294967295)<<14&4294967295|v>>>18))+((v=n+(h^e&(u^h))+o[8]+1163531501&4294967295)<<20&4294967295|v>>>12))+((v=e+(u^h&(n^u))+o[13]+2850285829&4294967295)<<5&4294967295|v>>>27))+((v=h+(n^u&(e^n))+o[2]+4243563512&4294967295)<<9&4294967295|v>>>23))+((v=u+(e^n&(h^e))+o[7]+1735328473&4294967295)<<14&4294967295|v>>>18))+((v=n+(h^e&(u^h))+o[12]+2368359562&4294967295)<<20&4294967295|v>>>12))+((v=e+(n^u^h)+o[5]+4294588738&4294967295)<<4&4294967295|v>>>28))+((v=h+(e^n^u)+o[8]+2272392833&4294967295)<<11&4294967295|v>>>21))+((v=u+(h^e^n)+o[11]+1839030562&4294967295)<<16&4294967295|v>>>16))+((v=n+(u^h^e)+o[14]+4259657740&4294967295)<<23&4294967295|v>>>9))+((v=e+(n^u^h)+o[1]+2763975236&4294967295)<<4&4294967295|v>>>28))+((v=h+(e^n^u)+o[4]+1272893353&4294967295)<<11&4294967295|v>>>21))+((v=u+(h^e^n)+o[7]+4139469664&4294967295)<<16&4294967295|v>>>16))+((v=n+(u^h^e)+o[10]+3200236656&4294967295)<<23&4294967295|v>>>9))+((v=e+(n^u^h)+o[13]+681279174&4294967295)<<4&4294967295|v>>>28))+((v=h+(e^n^u)+o[0]+3936430074&4294967295)<<11&4294967295|v>>>21))+((v=u+(h^e^n)+o[3]+3572445317&4294967295)<<16&4294967295|v>>>16))+((v=n+(u^h^e)+o[6]+76029189&4294967295)<<23&4294967295|v>>>9))+((v=e+(n^u^h)+o[9]+3654602809&4294967295)<<4&4294967295|v>>>28))+((v=h+(e^n^u)+o[12]+3873151461&4294967295)<<11&4294967295|v>>>21))+((v=u+(h^e^n)+o[15]+530742520&4294967295)<<16&4294967295|v>>>16))+((v=n+(u^h^e)+o[2]+3299628645&4294967295)<<23&4294967295|v>>>9))+((v=e+(u^(n|~h))+o[0]+4096336452&4294967295)<<6&4294967295|v>>>26))+((v=h+(n^(e|~u))+o[7]+1126891415&4294967295)<<10&4294967295|v>>>22))+((v=u+(e^(h|~n))+o[14]+2878612391&4294967295)<<15&4294967295|v>>>17))+((v=n+(h^(u|~e))+o[5]+4237533241&4294967295)<<21&4294967295|v>>>11))+((v=e+(u^(n|~h))+o[12]+1700485571&4294967295)<<6&4294967295|v>>>26))+((v=h+(n^(e|~u))+o[3]+2399980690&4294967295)<<10&4294967295|v>>>22))+((v=u+(e^(h|~n))+o[10]+4293915773&4294967295)<<15&4294967295|v>>>17))+((v=n+(h^(u|~e))+o[1]+2240044497&4294967295)<<21&4294967295|v>>>11))+((v=e+(u^(n|~h))+o[8]+1873313359&4294967295)<<6&4294967295|v>>>26))+((v=h+(n^(e|~u))+o[15]+4264355552&4294967295)<<10&4294967295|v>>>22))+((v=u+(e^(h|~n))+o[6]+2734768916&4294967295)<<15&4294967295|v>>>17))+((v=n+(h^(u|~e))+o[13]+1309151649&4294967295)<<21&4294967295|v>>>11))+((h=(e=n+((v=e+(u^(n|~h))+o[4]+4149444226&4294967295)<<6&4294967295|v>>>26))+((v=h+(n^(e|~u))+o[11]+3174756917&4294967295)<<10&4294967295|v>>>22))^((u=h+((v=u+(e^(h|~n))+o[2]+718787259&4294967295)<<15&4294967295|v>>>17))|~e))+o[9]+3951481745&4294967295,i.g[0]=i.g[0]+e&4294967295,i.g[1]=i.g[1]+(u+(v<<21&4294967295|v>>>11))&4294967295,i.g[2]=i.g[2]+u&4294967295,i.g[3]=i.g[3]+h&4294967295}function O(i,e){this.h=e;for(var n=[],o=!0,u=i.length-1;0<=u;u--){var h=0|i[u];o&&h==e||(n[u]=h,o=!1)}this.g=n}(ce=q.prototype).Oa=function(i){this.M=i},ce.ha=function(i,e,n,o){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+i);e=e?e.toUpperCase():"GET",this.I=i,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():Ia.g(),this.C=function Vo(i){return i.h||(i.h=i.i())}(this.u?this.u:Ia),this.g.onreadystatechange=be(this.La,this);try{this.G=!0,this.g.open(e,String(i),!0),this.G=!1}catch(h){return void In(this,h)}if(i=n||"",n=new Map(this.headers),o)if(Object.getPrototypeOf(o)===Object.prototype)for(var u in o)n.set(u,o[u]);else{if("function"!=typeof o.keys||"function"!=typeof o.get)throw Error("Unknown input type for opt_headers: "+String(o));for(const h of o.keys())n.set(h,o.get(h))}o=Array.from(n.keys()).find(h=>"content-type"==h.toLowerCase()),u=Tt.FormData&&i instanceof Tt.FormData,!(0<=Pt(we,e))||o||u||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[h,v]of n)this.g.setRequestHeader(h,v);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{fo(this),0<this.B&&((this.L=function Xt(i){return Ue&&"number"==typeof i.timeout&&void 0!==i.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=be(this.ua,this)):this.A=Ja(this.ua,this.B,this)),this.v=!0,this.g.send(i),this.v=!1}catch(h){In(this,h)}},ce.ua=function(){typeof Zt<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,un(this,"timeout"),this.abort(8))},ce.abort=function(i){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=i||7,un(this,"complete"),un(this,"abort"),ho(this))},ce.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),ho(this,!0)),q.$.N.call(this)},ce.La=function(){this.s||(this.G||this.v||this.l?is(this):this.kb())},ce.kb=function(){is(this)},ce.isActive=function(){return!!this.g},ce.da=function(){try{return 2<ji(this)?this.g.status:-1}catch{return-1}},ce.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}},ce.Wa=function(i){if(this.g){var e=this.g.responseText;return i&&0==e.indexOf(i)&&(e=e.substring(i.length)),W(e)}},ce.Ia=function(){return this.m},ce.Sa=function(){return"string"==typeof this.j?this.j:String(this.j)},(ce=Ki.prototype).ra=8,ce.H=1,ce.Na=function(i){if(this.m)if(this.m=null,1==this.H){if(!i){this.W=Math.floor(1e5*Math.random()),i=this.W++;const u=new Bn(this,this.l,i);let h=this.s;if(this.U&&(h?(h=ur(h),Xr(h,this.U)):h=this.U),null!==this.o||this.O||(u.I=h,h=null),this.P)e:{for(var e=0,n=0;n<this.j.length;n++){var o=this.j[n];if(void 0===(o="__data__"in o.map&&"string"==typeof(o=o.map.__data__)?o.length:void 0))break;if(4096<(e+=o)){e=n;break e}if(4096===e||n===this.j.length-1){e=n+1;break e}}e=1e3}else e=1e3;e=bu(this,u,e),Un(n=ei(this.I),"RID",i),Un(n,"CVER",22),this.F&&Un(n,"X-HTTP-Session-Id",this.F),Ro(this,n),h&&(this.O?e="headers="+encodeURIComponent(String(Tu(h)))+"&"+e:this.o&&bi(n,this.o,h)),Lr(this.i,u),this.bb&&Un(n,"TYPE","init"),this.P?(Un(n,"$req",e),Un(n,"SID","null"),u.aa=!0,ks(u,n,null)):ks(u,n,e),this.H=2}}else 3==this.H&&(i?vc(this,i):0==this.j.length||Ui(this.i)||vc(this))},ce.Ma=function(){if(this.u=null,ru(this),this.ca&&!(this.M||null==this.g||0>=this.S)){var i=2*this.S;this.l.info("BP detection timer enabled: "+i),this.B=Wi(be(this.jb,this),i)}},ce.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,hi(10),Gu(this),ru(this))},ce.ib=function(){null!=this.v&&(this.v=null,Gu(this),wu(this),hi(19))},ce.pb=function(i){i?(this.l.info("Successfully pinged google.com"),hi(2)):(this.l.info("Failed to ping google.com"),hi(1))},ce.isActive=function(){return!!this.h&&this.h.isActive(this)},(ce=Wc.prototype).Ba=function(){},ce.Aa=function(){},ce.za=function(){},ce.ya=function(){},ce.isActive=function(){return!0},ce.Va=function(){},Ha.prototype.g=function(i,e){return new Qs(i,e)},xe(Qs,Qt),Qs.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var i=this.g,e=this.l,n=this.h||void 0;hi(0),i.Y=e,i.na=n||{},i.G=i.aa,i.I=yc(i,null,i.Y),Ua(i)},Qs.prototype.close=function(){ia(this.g)},Qs.prototype.u=function(i){var e=this.g;if("string"==typeof i){var n={};n.__data__=i,i=n}else this.v&&((n={}).__data__=Kr(i),i=n);e.j.push(new class{constructor(i,e){this.g=i,this.map=e}}(e.fb++,i)),3==e.H&&Ua(e)},Qs.prototype.N=function(){this.g.h=null,delete this.j,ia(this.g),delete this.g,Qs.$.N.call(this)},xe(ba,Bo),xe(qc,ao),xe(Js,Wc),Js.prototype.Ba=function(){un(this.g,"a")},Js.prototype.Aa=function(i){un(this.g,new ba(i))},Js.prototype.za=function(i){un(this.g,new qc)},Js.prototype.ya=function(){un(this.g,"b")},xe(Yi,function ih(){this.blockSize=-1}),Yi.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},Yi.prototype.j=function(i,e){void 0===e&&(e=i.length);for(var n=e-this.blockSize,o=this.m,u=this.h,h=0;h<e;){if(0==u)for(;h<=n;)Hu(this,i,h),h+=this.blockSize;if("string"==typeof i){for(;h<e;)if(o[u++]=i.charCodeAt(h++),u==this.blockSize){Hu(this,o),u=0;break}}else for(;h<e;)if(o[u++]=i[h++],u==this.blockSize){Hu(this,o),u=0;break}}this.h=u,this.i+=e},Yi.prototype.l=function(){var i=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);i[0]=128;for(var e=1;e<i.length-8;++e)i[e]=0;var n=8*this.i;for(e=i.length-8;e<i.length;++e)i[e]=255&n,n/=256;for(this.j(i),i=Array(16),e=n=0;4>e;++e)for(var o=0;32>o;o+=8)i[n++]=this.g[e]>>>o&255;return i};var Q={};function U(i){return-128<=i&&128>i?function _e(i,e){var n=Q;return Object.prototype.hasOwnProperty.call(n,i)?n[i]:n[i]=e(i)}(i,function(e){return new O([0|e],0>e?-1:0)}):new O([0|i],0>i?-1:0)}function K(i){if(isNaN(i)||!isFinite(i))return ct;if(0>i)return yn(K(-i));for(var e=[],n=1,o=0;i>=n;o++)e[o]=i/n|0,n*=Qe;return new O(e,0)}var Qe=4294967296,ct=U(0),an=U(1),Yn=U(16777216);function rr(i){if(0!=i.h)return!1;for(var e=0;e<i.g.length;e++)if(0!=i.g[e])return!1;return!0}function qn(i){return-1==i.h}function yn(i){for(var e=i.g.length,n=[],o=0;o<e;o++)n[o]=~i.g[o];return new O(n,~i.h).add(an)}function Jr(i,e){return i.add(yn(e))}function Tr(i,e){for(;(65535&i[e])!=i[e];)i[e+1]+=i[e]>>>16,i[e]&=65535,e++}function gi(i,e){this.g=i,this.h=e}function go(i,e){if(rr(e))throw Error("division by zero");if(rr(i))return new gi(ct,ct);if(qn(i))return e=go(yn(i),e),new gi(yn(e.g),yn(e.h));if(qn(e))return e=go(i,yn(e)),new gi(yn(e.g),e.h);if(30<i.g.length){if(qn(i)||qn(e))throw Error("slowDivide_ only works with positive integers.");for(var n=an,o=e;0>=o.X(i);)n=$o(n),o=$o(o);var u=No(n,1),h=No(o,1);for(o=No(o,2),n=No(n,2);!rr(o);){var v=h.add(o);0>=v.X(i)&&(u=u.add(n),h=v),o=No(o,1),n=No(n,1)}return e=Jr(i,u.R(e)),new gi(u,e)}for(u=ct;0<=i.X(e);){for(n=Math.max(1,Math.floor(i.ea()/e.ea())),o=48>=(o=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,o-48),v=(h=K(n)).R(e);qn(v)||0<v.X(i);)v=(h=K(n-=o)).R(e);rr(h)&&(h=an),u=u.add(h),i=Jr(i,v)}return new gi(u,i)}function $o(i){for(var e=i.g.length+1,n=[],o=0;o<e;o++)n[o]=i.D(o)<<1|i.D(o-1)>>>31;return new O(n,i.h)}function No(i,e){var n=e>>5;e%=32;for(var o=i.g.length-n,u=[],h=0;h<o;h++)u[h]=0<e?i.D(h+n)>>>e|i.D(h+n+1)<<32-e:i.D(h+n);return new O(u,i.h)}(ce=O.prototype).ea=function(){if(qn(this))return-yn(this).ea();for(var i=0,e=1,n=0;n<this.g.length;n++){var o=this.D(n);i+=(0<=o?o:Qe+o)*e,e*=Qe}return i},ce.toString=function(i){if(2>(i=i||10)||36<i)throw Error("radix out of range: "+i);if(rr(this))return"0";if(qn(this))return"-"+yn(this).toString(i);for(var e=K(Math.pow(i,6)),n=this,o="";;){var u=go(n,e).g,h=((0<(n=Jr(n,u.R(e))).g.length?n.g[0]:n.h)>>>0).toString(i);if(rr(n=u))return h+o;for(;6>h.length;)h="0"+h;o=h+o}},ce.D=function(i){return 0>i?0:i<this.g.length?this.g[i]:this.h},ce.X=function(i){return qn(i=Jr(this,i))?-1:rr(i)?0:1},ce.abs=function(){return qn(this)?yn(this):this},ce.add=function(i){for(var e=Math.max(this.g.length,i.g.length),n=[],o=0,u=0;u<=e;u++){var h=o+(65535&this.D(u))+(65535&i.D(u)),v=(h>>>16)+(this.D(u)>>>16)+(i.D(u)>>>16);o=v>>>16,n[u]=(v&=65535)<<16|(h&=65535)}return new O(n,-2147483648&n[n.length-1]?-1:0)},ce.R=function(i){if(rr(this)||rr(i))return ct;if(qn(this))return qn(i)?yn(this).R(yn(i)):yn(yn(this).R(i));if(qn(i))return yn(this.R(yn(i)));if(0>this.X(Yn)&&0>i.X(Yn))return K(this.ea()*i.ea());for(var e=this.g.length+i.g.length,n=[],o=0;o<2*e;o++)n[o]=0;for(o=0;o<this.g.length;o++)for(var u=0;u<i.g.length;u++){var h=this.D(o)>>>16,v=65535&this.D(o),P=i.D(u)>>>16,V=65535&i.D(u);n[2*o+2*u]+=v*V,Tr(n,2*o+2*u),n[2*o+2*u+1]+=h*V,Tr(n,2*o+2*u+1),n[2*o+2*u+1]+=v*P,Tr(n,2*o+2*u+1),n[2*o+2*u+2]+=h*P,Tr(n,2*o+2*u+2)}for(o=0;o<e;o++)n[o]=n[2*o+1]<<16|n[2*o];for(o=e;o<2*e;o++)n[o]=0;return new O(n,0)},ce.gb=function(i){return go(this,i).h},ce.and=function(i){for(var e=Math.max(this.g.length,i.g.length),n=[],o=0;o<e;o++)n[o]=this.D(o)&i.D(o);return new O(n,this.h&i.h)},ce.or=function(i){for(var e=Math.max(this.g.length,i.g.length),n=[],o=0;o<e;o++)n[o]=this.D(o)|i.D(o);return new O(n,this.h|i.h)},ce.xor=function(i){for(var e=Math.max(this.g.length,i.g.length),n=[],o=0;o<e;o++)n[o]=this.D(o)^i.D(o);return new O(n,this.h^i.h)},Ha.prototype.createWebChannel=Ha.prototype.g,Qs.prototype.send=Qs.prototype.u,Qs.prototype.open=Qs.prototype.m,Qs.prototype.close=Qs.prototype.close,Va.NO_ERROR=0,Va.TIMEOUT=8,Va.HTTP_ERROR=6,ya.COMPLETE="complete",Ba.EventType=xs,xs.OPEN="a",xs.CLOSE="b",xs.ERROR="c",xs.MESSAGE="d",Qt.prototype.listen=Qt.prototype.O,q.prototype.listenOnce=q.prototype.P,q.prototype.getLastError=q.prototype.Sa,q.prototype.getLastErrorCode=q.prototype.Ia,q.prototype.getStatus=q.prototype.da,q.prototype.getResponseJson=q.prototype.Wa,q.prototype.getResponseText=q.prototype.ja,q.prototype.send=q.prototype.ha,q.prototype.setWithCredentials=q.prototype.Oa,Yi.prototype.digest=Yi.prototype.l,Yi.prototype.reset=Yi.prototype.reset,Yi.prototype.update=Yi.prototype.j,O.prototype.add=O.prototype.add,O.prototype.multiply=O.prototype.R,O.prototype.modulo=O.prototype.gb,O.prototype.compare=O.prototype.X,O.prototype.toNumber=O.prototype.ea,O.prototype.toString=O.prototype.toString,O.prototype.getBits=O.prototype.D,O.fromNumber=K,O.fromString=function ge(i,e){if(0==i.length)throw Error("number format error: empty string");if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if("-"==i.charAt(0))return yn(ge(i.substring(1),e));if(0<=i.indexOf("-"))throw Error('number format error: interior "-" character');for(var n=K(Math.pow(e,8)),o=ct,u=0;u<i.length;u+=8){var h=Math.min(8,i.length-u),v=parseInt(i.substring(u,u+h),e);8>h?(h=K(Math.pow(e,h)),o=o.R(h).add(K(v))):o=(o=o.R(n)).add(K(v))}return o};var os=ut.createWebChannelTransport=function(){return new Ha},wa=ut.getStatEventTarget=function(){return Ei()},wi=ut.ErrorCode=Va,ou=ut.EventType=ya,wd=ut.Event=er,$r=ut.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},$u=(ut.FetchXmlHttpFactory=Do,ut.WebChannel=Ba),ys=ut.XhrIo=q,mo=ut.Md5=Yi,zo=ut.Integer=O;const Is="@firebase/firestore";class Vr{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Vr.UNAUTHENTICATED=new Vr(null),Vr.GOOGLE_CREDENTIALS=new Vr("google-credentials-uid"),Vr.FIRST_PARTY=new Vr("first-party-uid"),Vr.MOCK_USER=new Vr("mock-user");let au="10.5.1";const Da=new Ne.Yd("@firebase/firestore");function Du(){return Da.logLevel}function Et(i,...e){if(Da.logLevel<=Ne.in.DEBUG){const n=e.map(sa);Da.debug(`Firestore (${au}): ${i}`,...n)}}function mi(i,...e){if(Da.logLevel<=Ne.in.ERROR){const n=e.map(sa);Da.error(`Firestore (${au}): ${i}`,...n)}}function _o(i,...e){if(Da.logLevel<=Ne.in.WARN){const n=e.map(sa);Da.warn(`Firestore (${au}): ${i}`,...n)}}function sa(i){if("string"==typeof i)return i;try{return JSON.stringify(i)}catch{return i}}function tn(i="Unexpected state"){const e=`FIRESTORE (${au}) INTERNAL ASSERTION FAILED: `+i;throw mi(e),new Error(e)}function pn(i,e){i||tn()}function Gt(i,e){return i}const et={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class vt extends ze.ZR{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Vs{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}class Ca{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Dd{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Vr.UNAUTHENTICATED))}shutdown(){}}class Cu{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class za{constructor(e){this.t=e,this.currentUser=Vr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){var o=this;let u=this.i;const h=z=>this.i!==u?(u=this.i,n(z)):Promise.resolve();let v=new Vs;this.o=()=>{this.i++,this.currentUser=this.u(),v.resolve(),v=new Vs,e.enqueueRetryable(()=>h(this.currentUser))};const P=()=>{const z=v;e.enqueueRetryable((0,Ve.Z)(function*(){yield z.promise,yield h(o.currentUser)}))},V=z=>{Et("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=z,this.auth.addAuthTokenListener(this.o),P()};this.t.onInit(z=>V(z)),setTimeout(()=>{if(!this.auth){const z=this.t.getImmediate({optional:!0});z?V(z):(Et("FirebaseAuthCredentialsProvider","Auth not yet detected"),v.resolve(),v=new Vs)}},0),P()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(o=>this.i!==e?(Et("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):o?(pn("string"==typeof o.accessToken),new Ca(o.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return pn(null===e||"string"==typeof e),new Vr(e)}}class El{constructor(e,n,o){this.l=e,this.h=n,this.P=o,this.type="FirstParty",this.user=Vr.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class ir{constructor(e,n,o){this.l=e,this.h=n,this.P=o}getToken(){return Promise.resolve(new El(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(Vr.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Ql{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Tl{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){const o=h=>{null!=h.error&&Et("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${h.error.message}`);const v=h.token!==this.R;return this.R=h.token,Et("FirebaseAppCheckTokenProvider",`Received ${v?"new":"existing"} token.`),v?n(h.token):Promise.resolve()};this.o=h=>{e.enqueueRetryable(()=>o(h))};const u=h=>{Et("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=h,this.appCheck.addTokenListener(this.o)};this.A.onInit(h=>u(h)),setTimeout(()=>{if(!this.appCheck){const h=this.A.getImmediate({optional:!0});h?u(h):Et("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(pn("string"==typeof n.token),this.R=n.token,new Ql(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function dr(i){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(i);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(n);else for(let o=0;o<i;o++)n[o]=Math.floor(256*Math.random());return n}class Cd{static newId(){const n=62*Math.floor(256/62);let o="";for(;o.length<20;){const u=dr(40);for(let h=0;h<u.length;++h)o.length<20&&u[h]<n&&(o+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(u[h]%62))}return o}}function jn(i,e){return i<e?-1:i>e?1:0}function ki(i,e,n){return i.length===e.length&&i.every((o,u)=>n(o,e[u]))}function bl(i){return i+"\0"}class Rr{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new vt(et.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new vt(et.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new vt(et.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new vt(et.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Rr.fromMillis(Date.now())}static fromDate(e){return Rr.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),o=Math.floor(1e6*(e-1e3*n));return new Rr(n,o)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?jn(this.nanoseconds,e.nanoseconds):jn(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class rn{constructor(e){this.timestamp=e}static fromTimestamp(e){return new rn(e)}static min(){return new rn(new Rr(0,0))}static max(){return new rn(new Rr(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class Xs{constructor(e,n,o){void 0===n?n=0:n>e.length&&tn(),void 0===o?o=e.length-n:o>e.length-n&&tn(),this.segments=e,this.offset=n,this.len=o}get length(){return this.len}isEqual(e){return 0===Xs.comparator(this,e)}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Xs?e.forEach(o=>{n.push(o)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,o=this.limit();n<o;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const o=Math.min(e.length,n.length);for(let u=0;u<o;u++){const h=e.get(u),v=n.get(u);if(h<v)return-1;if(h>v)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class Xn extends Xs{construct(e,n,o){return new Xn(e,n,o)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const n=[];for(const o of e){if(o.indexOf("//")>=0)throw new vt(et.INVALID_ARGUMENT,`Invalid segment (${o}). Paths must not contain // in them.`);n.push(...o.split("/").filter(u=>u.length>0))}return new Xn(n)}static emptyPath(){return new Xn([])}}const Ad=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class si extends Xs{construct(e,n,o){return new si(e,n,o)}static isValidIdentifier(e){return Ad.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),si.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new si(["__name__"])}static fromServerFormat(e){const n=[];let o="",u=0;const h=()=>{if(0===o.length)throw new vt(et.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(o),o=""};let v=!1;for(;u<e.length;){const P=e[u];if("\\"===P){if(u+1===e.length)throw new vt(et.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const V=e[u+1];if("\\"!==V&&"."!==V&&"`"!==V)throw new vt(et.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);o+=V,u+=2}else"`"===P?(v=!v,u++):"."!==P||v?(o+=P,u++):(h(),u++)}if(h(),v)throw new vt(et.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new si(n)}static emptyPath(){return new si([])}}class $t{constructor(e){this.path=e}static fromPath(e){return new $t(Xn.fromString(e))}static fromName(e){return new $t(Xn.fromString(e).popFirst(5))}static empty(){return new $t(Xn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Xn.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,n){return Xn.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new $t(new Xn(e.slice()))}}class Di{constructor(e,n,o,u){this.indexId=e,this.collectionGroup=n,this.fields=o,this.indexState=u}}function Aa(i){return i.fields.find(e=>2===e.kind)}function Oo(i){return i.fields.filter(e=>2!==e.kind)}Di.UNKNOWN_ID=-1;class eo{constructor(e,n){this.fieldPath=e,this.kind=n}}class Kc{constructor(e,n){this.sequenceNumber=e,this.offset=n}static empty(){return new Kc(0,to.min())}}function zu(i,e){const n=i.toTimestamp().seconds,o=i.toTimestamp().nanoseconds+1,u=rn.fromTimestamp(1e9===o?new Rr(n+1,0):new Rr(n,o));return new to(u,$t.empty(),e)}function Jl(i){return new to(i.readTime,i.key,-1)}class to{constructor(e,n,o){this.readTime=e,this.documentKey=n,this.largestBatchId=o}static min(){return new to(rn.min(),$t.empty(),-1)}static max(){return new to(rn.max(),$t.empty(),-1)}}function Yc(i,e){let n=i.readTime.compareTo(e.readTime);return 0!==n?n:(n=$t.comparator(i.documentKey,e.documentKey),0!==n?n:jn(i.largestBatchId,e.largestBatchId))}const S="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class x{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function A(i){return L.apply(this,arguments)}function L(){return L=(0,Ve.Z)(function*(i){if(i.code!==et.FAILED_PRECONDITION||i.message!==S)throw i;Et("LocalStore","Unexpectedly lost primary lease")}),L.apply(this,arguments)}class k{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&tn(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new k((o,u)=>{this.nextCallback=h=>{this.wrapSuccess(e,h).next(o,u)},this.catchCallback=h=>{this.wrapFailure(n,h).next(o,u)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof k?n:k.resolve(n)}catch(n){return k.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):k.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):k.reject(n)}static resolve(e){return new k((n,o)=>{n(e)})}static reject(e){return new k((n,o)=>{o(e)})}static waitFor(e){return new k((n,o)=>{let u=0,h=0,v=!1;e.forEach(P=>{++u,P.next(()=>{++h,v&&h===u&&n()},V=>o(V))}),v=!0,h===u&&n()})}static or(e){let n=k.resolve(!1);for(const o of e)n=n.next(u=>u?k.resolve(u):o());return n}static forEach(e,n){const o=[];return e.forEach((u,h)=>{o.push(n.call(this,u,h))}),this.waitFor(o)}static mapArray(e,n){return new k((o,u)=>{const h=e.length,v=new Array(h);let P=0;for(let V=0;V<h;V++){const z=V;n(e[z]).next(ee=>{v[z]=ee,++P,P===h&&o(v)},ee=>u(ee))}})}static doWhile(e,n){return new k((o,u)=>{const h=()=>{!0===e()?n().next(()=>{h()},u):o()};h()})}}class J{constructor(e,n){this.action=e,this.transaction=n,this.aborted=!1,this.V=new Vs,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{n.error?this.V.reject(new Ke(e,n.error)):this.V.resolve()},this.transaction.onerror=o=>{const u=Bs(o.target.error);this.V.reject(new Ke(e,u))}}static open(e,n,o,u){try{return new J(n,e.transaction(u,o))}catch(h){throw new Ke(n,h)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(Et("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const n=this.transaction.objectStore(e);return new Kn(n)}}class de{constructor(e,n,o){this.name=e,this.version=n,this.p=o,12.2===de.S((0,ze.z$)())&&mi("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Et("SimpleDb","Removing database:",e),hr(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!(0,ze.hl)())return!1;if(de.C())return!0;const e=(0,ze.z$)(),n=de.S(e),o=0<n&&n<10,u=de.v(e),h=0<u&&u<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||o||h)}static C(){var e;return typeof process<"u"&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.F)}static M(e,n){return e.store(n)}static S(e){const n=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),o=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(o)}static v(e){const n=e.match(/Android ([\d.]+)/i),o=n?n[1].split(".").slice(0,2).join("."):"-1";return Number(o)}O(e){var n=this;return(0,Ve.Z)(function*(){return n.db||(Et("SimpleDb","Opening database:",n.name),n.db=yield new Promise((o,u)=>{const h=indexedDB.open(n.name,n.version);h.onsuccess=v=>{o(v.target.result)},h.onblocked=()=>{u(new Ke(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},h.onerror=v=>{const P=v.target.error;u("VersionError"===P.name?new vt(et.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===P.name?new vt(et.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+P):new Ke(e,P))},h.onupgradeneeded=v=>{Et("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',v.oldVersion),n.p.N(v.target.result,h.transaction,v.oldVersion,n.version).next(()=>{Et("SimpleDb","Database upgrade to version "+n.version+" complete")})}})),n.B&&(n.db.onversionchange=o=>n.B(o)),n.db})()}L(e){this.B=e,this.db&&(this.db.onversionchange=n=>e(n))}runTransaction(e,n,o,u){var h=this;return(0,Ve.Z)(function*(){const v="readonly"===n;let P=0;for(;;){++P;try{h.db=yield h.O(e);const V=J.open(h.db,e,v?"readonly":"readwrite",o),z=u(V).next(ee=>(V.g(),ee)).catch(ee=>(V.abort(ee),k.reject(ee))).toPromise();return z.catch(()=>{}),yield V.m,z}catch(V){const z=V,ee="FirebaseError"!==z.name&&P<3;if(Et("SimpleDb","Transaction failed with error:",z.message,"Retrying:",ee),h.close(),!ee)return Promise.reject(z)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class Je{constructor(e){this.k=e,this.q=!1,this.K=null}get isDone(){return this.q}get $(){return this.K}set cursor(e){this.k=e}done(){this.q=!0}U(e){this.K=e}delete(){return hr(this.k.delete())}}class Ke extends vt{constructor(e,n){super(et.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${n}`),this.name="IndexedDbTransactionError"}}function Ut(i){return"IndexedDbTransactionError"===i.name}class Kn{constructor(e){this.store=e}put(e,n){let o;return void 0!==n?(Et("SimpleDb","PUT",this.store.name,e,n),o=this.store.put(n,e)):(Et("SimpleDb","PUT",this.store.name,"<auto-key>",e),o=this.store.put(e)),hr(o)}add(e){return Et("SimpleDb","ADD",this.store.name,e,e),hr(this.store.add(e))}get(e){return hr(this.store.get(e)).next(n=>(void 0===n&&(n=null),Et("SimpleDb","GET",this.store.name,e,n),n))}delete(e){return Et("SimpleDb","DELETE",this.store.name,e),hr(this.store.delete(e))}count(){return Et("SimpleDb","COUNT",this.store.name),hr(this.store.count())}W(e,n){const o=this.options(e,n);if(o.index||"function"!=typeof this.store.getAll){const u=this.cursor(o),h=[];return this.G(u,(v,P)=>{h.push(P)}).next(()=>h)}{const u=this.store.getAll(o.range);return new k((h,v)=>{u.onerror=P=>{v(P.target.error)},u.onsuccess=P=>{h(P.target.result)}})}}j(e,n){const o=this.store.getAll(e,null===n?void 0:n);return new k((u,h)=>{o.onerror=v=>{h(v.target.error)},o.onsuccess=v=>{u(v.target.result)}})}H(e,n){Et("SimpleDb","DELETE ALL",this.store.name);const o=this.options(e,n);o.J=!1;const u=this.cursor(o);return this.G(u,(h,v,P)=>P.delete())}Y(e,n){let o;n?o=e:(o={},n=e);const u=this.cursor(o);return this.G(u,n)}Z(e){const n=this.cursor({});return new k((o,u)=>{n.onerror=h=>{const v=Bs(h.target.error);u(v)},n.onsuccess=h=>{const v=h.target.result;v?e(v.primaryKey,v.value).next(P=>{P?v.continue():o()}):o()}})}G(e,n){const o=[];return new k((u,h)=>{e.onerror=v=>{h(v.target.error)},e.onsuccess=v=>{const P=v.target.result;if(!P)return void u();const V=new Je(P),z=n(P.primaryKey,P.value,V);if(z instanceof k){const ee=z.catch(le=>(V.done(),k.reject(le)));o.push(ee)}V.isDone?u():null===V.$?P.continue():P.continue(V.$)}}).next(()=>k.waitFor(o))}options(e,n){let o;return void 0!==e&&("string"==typeof e?o=e:n=e),{index:o,range:n}}cursor(e){let n="next";if(e.reverse&&(n="prev"),e.index){const o=this.store.index(e.index);return e.J?o.openKeyCursor(e.range,n):o.openCursor(e.range,n)}return this.store.openCursor(e.range,n)}}function hr(i){return new k((e,n)=>{i.onsuccess=o=>{e(o.target.result)},i.onerror=o=>{const u=Bs(o.target.error);n(u)}})}let An=!1;function Bs(i){const e=de.S((0,ze.z$)());if(e>=12.2&&e<13){const n="An internal error was encountered in the Indexed Database server";if(i.message.indexOf(n)>=0){const o=new vt("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return An||(An=!0,setTimeout(()=>{throw o},0)),o}}return i}class ti{constructor(e,n){this.asyncQueue=e,this.X=n,this.task=null}start(){this.ee(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}ee(e){var n=this;Et("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,Ve.Z)(function*(){n.task=null;try{Et("IndexBackiller",`Documents written: ${yield n.X.te()}`)}catch(o){Ut(o)?Et("IndexBackiller","Ignoring IndexedDB error during index backfill: ",o):yield A(o)}yield n.ee(6e4)}))}}class Wu{constructor(e,n){this.localStore=e,this.persistence=n}te(e=50){var n=this;return(0,Ve.Z)(function*(){return n.persistence.runTransaction("Backfill Indexes","readwrite-primary",o=>n.ne(o,e))})()}ne(e,n){const o=new Set;let u=n,h=!0;return k.doWhile(()=>!0===h&&u>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(v=>{if(null!==v&&!o.has(v))return Et("IndexBackiller",`Processing collection: ${v}`),this.re(e,v,u).next(P=>{u-=P,o.add(v)});h=!1})).next(()=>n-u)}re(e,n,o){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,n).next(u=>this.localStore.localDocuments.getNextDocuments(e,n,u,o).next(h=>{const v=h.changes;return this.localStore.indexManager.updateIndexEntries(e,v).next(()=>this.ie(u,h)).next(P=>(Et("IndexBackiller",`Updating offset: ${P}`),this.localStore.indexManager.updateCollectionGroup(e,n,P))).next(()=>v.size)}))}ie(e,n){let o=e;return n.changes.forEach((u,h)=>{const v=Jl(h);Yc(v,o)>0&&(o=v)}),new to(o.readTime,o.documentKey,Math.max(n.batchId,e.largestBatchId))}}let Zi=(()=>{class i{constructor(n,o){this.previousValue=n,o&&(o.sequenceNumberHandler=u=>this.se(u),this.oe=u=>o.writeSequenceNumber(u))}se(n){return this.previousValue=Math.max(n,this.previousValue),this.previousValue}next(){const n=++this.previousValue;return this.oe&&this.oe(n),n}}return i._e=-1,i})();function Sa(i){return null==i}function Ra(i){return 0===i&&1/i==-1/0}function Ic(i){return"number"==typeof i&&Number.isInteger(i)&&!Ra(i)&&i<=Number.MAX_SAFE_INTEGER&&i>=Number.MIN_SAFE_INTEGER}function Nr(i){let e="";for(let n=0;n<i.length;n++)e.length>0&&(e=Wo(e)),e=Sd(i.get(n),e);return Wo(e)}function Sd(i,e){let n=e;const o=i.length;for(let u=0;u<o;u++){const h=i.charAt(u);switch(h){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=h}}return n}function Wo(i){return i+"\x01\x01"}function $s(i){const e=i.length;if(pn(e>=2),2===e)return pn("\x01"===i.charAt(0)&&"\x01"===i.charAt(1)),Xn.emptyPath();const n=e-2,o=[];let u="";for(let h=0;h<e;){const v=i.indexOf("\x01",h);switch((v<0||v>n)&&tn(),i.charAt(v+1)){case"\x01":const P=i.substring(h,v);let V;0===u.length?V=P:(u+=P,V=u,u=""),o.push(V);break;case"\x10":u+=i.substring(h,v),u+="\0";break;case"\x11":u+=i.substring(h,v+1);break;default:tn()}h=v+2}return new Xn(o)}const oa=["userId","batchId"];function qu(i,e){return[i,Nr(e)]}function uu(i,e,n){return[i,Nr(e),n]}const Su={},vo=["prefixPath","collectionGroup","readTime","documentId"],Ku=["prefixPath","collectionGroup","documentId"],Xl=["collectionGroup","readTime","prefixPath","documentId"],Ec=["canonicalId","targetId"],Tc=["targetId","path"],bc=["path","targetId"],Gh=["collectionId","parent"],ed=["indexId","uid"],jf=["uid","sequenceNumber"],Zc=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],oh=["indexId","uid","orderedDocumentKey"],Qc=["userId","collectionPath","documentId"],Gf=["userId","collectionPath","largestBatchId"],Yu=["userId","collectionGroup","largestBatchId"],no=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],td=[...no,"documentOverlays"],qo=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Jc=qo,nd=[...Jc,"indexConfiguration","indexState","indexEntries"];class Xc extends x{constructor(e,n){super(),this.ae=e,this.currentSequenceNumber=n}}function Qi(i,e){const n=Gt(i);return de.M(n.ae,e)}function Ru(i){let e=0;for(const n in i)Object.prototype.hasOwnProperty.call(i,n)&&e++;return e}function Nu(i,e){for(const n in i)Object.prototype.hasOwnProperty.call(i,n)&&e(n,i[n])}function Po(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}class Br{constructor(e,n){this.comparator=e,this.root=n||zs.EMPTY}insert(e,n){return new Br(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,zs.BLACK,null,null))}remove(e){return new Br(this.comparator,this.root.remove(e,this.comparator).copy(null,null,zs.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const o=this.comparator(e,n.key);if(0===o)return n.value;o<0?n=n.left:o>0&&(n=n.right)}return null}indexOf(e){let n=0,o=this.root;for(;!o.isEmpty();){const u=this.comparator(e,o.key);if(0===u)return n+o.left.size;u<0?o=o.left:(n+=o.left.size+1,o=o.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,o)=>(e(n,o),!1))}toString(){const e=[];return this.inorderTraversal((n,o)=>(e.push(`${n}:${o}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new aa(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new aa(this.root,e,this.comparator,!1)}getReverseIterator(){return new aa(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new aa(this.root,e,this.comparator,!0)}}class aa{constructor(e,n,o,u){this.isReverse=u,this.nodeStack=[];let h=1;for(;!e.isEmpty();)if(h=n?o(e.key,n):1,n&&u&&(h*=-1),h<0)e=this.isReverse?e.left:e.right;else{if(0===h){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class zs{constructor(e,n,o,u,h){this.key=e,this.value=n,this.color=o??zs.RED,this.left=u??zs.EMPTY,this.right=h??zs.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,o,u,h){return new zs(e??this.key,n??this.value,o??this.color,u??this.left,h??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,o){let u=this;const h=o(e,u.key);return u=h<0?u.copy(null,null,null,u.left.insert(e,n,o),null):0===h?u.copy(null,n,null,null,null):u.copy(null,null,null,null,u.right.insert(e,n,o)),u.fixUp()}removeMin(){if(this.left.isEmpty())return zs.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let o,u=this;if(n(e,u.key)<0)u.left.isEmpty()||u.left.isRed()||u.left.left.isRed()||(u=u.moveRedLeft()),u=u.copy(null,null,null,u.left.remove(e,n),null);else{if(u.left.isRed()&&(u=u.rotateRight()),u.right.isEmpty()||u.right.isRed()||u.right.left.isRed()||(u=u.moveRedRight()),0===n(e,u.key)){if(u.right.isEmpty())return zs.EMPTY;o=u.right.min(),u=u.copy(o.key,o.value,null,null,u.right.removeMin())}u=u.copy(null,null,null,null,u.right.remove(e,n))}return u.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,zs.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,zs.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw tn();const e=this.left.check();if(e!==this.right.check())throw tn();return e+(this.isRed()?0:1)}}zs.EMPTY=null,zs.RED=!0,zs.BLACK=!1,zs.EMPTY=new class{constructor(){this.size=0}get key(){throw tn()}get value(){throw tn()}get color(){throw tn()}get left(){throw tn()}get right(){throw tn()}copy(e,n,o,u,h){return this}insert(e,n,o){return new zs(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class oi{constructor(e){this.comparator=e,this.data=new Br(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,o)=>(e(n),!1))}forEachInRange(e,n){const o=this.data.getIteratorFrom(e[0]);for(;o.hasNext();){const u=o.getNext();if(this.comparator(u.key,e[1])>=0)return;n(u.key)}}forEachWhile(e,n){let o;for(o=void 0!==n?this.data.getIteratorFrom(n):this.data.getIterator();o.hasNext();)if(!e(o.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Ou(this.data.getIterator())}getIteratorFrom(e){return new Ou(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(o=>{n=n.add(o)}),n}isEqual(e){if(!(e instanceof oi)||this.size!==e.size)return!1;const n=this.data.getIterator(),o=e.data.getIterator();for(;n.hasNext();){const u=n.getNext().key,h=o.getNext().key;if(0!==this.comparator(u,h))return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new oi(this.comparator);return n.data=e,n}}class Ou{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function wc(i){return i.hasNext()?i.getNext():void 0}class Ko{constructor(e){this.fields=e,e.sort(si.comparator)}static empty(){return new Ko([])}unionWith(e){let n=new oi(si.comparator);for(const o of this.fields)n=n.add(o);for(const o of e)n=n.add(o);return new Ko(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return ki(this.fields,e.fields,(n,o)=>n.isEqual(o))}}class Dc extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class as{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(u){try{return atob(u)}catch(h){throw typeof DOMException<"u"&&h instanceof DOMException?new Dc("Invalid base64 string: "+h):h}}(e);return new as(n)}static fromUint8Array(e){const n=function(u){let h="";for(let v=0;v<u.length;++v)h+=String.fromCharCode(u[v]);return h}(e);return new as(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(n){const o=new Uint8Array(n.length);for(let u=0;u<n.length;u++)o[u]=n.charCodeAt(u);return o}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return jn(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}as.EMPTY_BYTE_STRING=new as("");const Zu=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ci(i){if(pn(!!i),"string"==typeof i){let e=0;const n=Zu.exec(i);if(pn(!!n),n[1]){let u=n[1];u=(u+"000000000").substr(0,9),e=Number(u)}const o=new Date(i);return{seconds:Math.floor(o.getTime()/1e3),nanos:e}}return{seconds:Or(i.seconds),nanos:Or(i.nanos)}}function Or(i){return"number"==typeof i?i:"string"==typeof i?Number(i):0}function Es(i){return"string"==typeof i?as.fromBase64String(i):as.fromUint8Array(i)}function Pu(i){var e,n;return"server_timestamp"===(null===(n=((null===(e=i?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function Qu(i){const e=i.mapValue.fields.__previous_value__;return Pu(e)?Qu(e):e}function Yo(i){const e=Ci(i.mapValue.fields.__local_write_time__.timestampValue);return new Rr(e.seconds,e.nanos)}class Ju{constructor(e,n,o,u,h,v,P,V,z){this.databaseId=e,this.appId=n,this.persistenceKey=o,this.host=u,this.ssl=h,this.forceLongPolling=v,this.autoDetectLongPolling=P,this.longPollingOptions=V,this.useFetchStreams=z}}class cu{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new cu("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof cu&&e.projectId===this.projectId&&e.database===this.database}}const Fi={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Cc={nullValue:"NULL_VALUE"};function lu(i){return"nullValue"in i?0:"booleanValue"in i?1:"integerValue"in i||"doubleValue"in i?2:"timestampValue"in i?3:"stringValue"in i?5:"bytesValue"in i?6:"referenceValue"in i?7:"geoPointValue"in i?8:"arrayValue"in i?9:"mapValue"in i?Pu(i)?4:uh(i)?9007199254740991:10:tn()}function Zo(i,e){if(i===e)return!0;const n=lu(i);if(n!==lu(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return i.booleanValue===e.booleanValue;case 4:return Yo(i).isEqual(Yo(e));case 3:return function(u,h){if("string"==typeof u.timestampValue&&"string"==typeof h.timestampValue&&u.timestampValue.length===h.timestampValue.length)return u.timestampValue===h.timestampValue;const v=Ci(u.timestampValue),P=Ci(h.timestampValue);return v.seconds===P.seconds&&v.nanos===P.nanos}(i,e);case 5:return i.stringValue===e.stringValue;case 6:return h=e,Es(i.bytesValue).isEqual(Es(h.bytesValue));case 7:return i.referenceValue===e.referenceValue;case 8:return function(u,h){return Or(u.geoPointValue.latitude)===Or(h.geoPointValue.latitude)&&Or(u.geoPointValue.longitude)===Or(h.geoPointValue.longitude)}(i,e);case 2:return function(u,h){if("integerValue"in u&&"integerValue"in h)return Or(u.integerValue)===Or(h.integerValue);if("doubleValue"in u&&"doubleValue"in h){const v=Or(u.doubleValue),P=Or(h.doubleValue);return v===P?Ra(v)===Ra(P):isNaN(v)&&isNaN(P)}return!1}(i,e);case 9:return ki(i.arrayValue.values||[],e.arrayValue.values||[],Zo);case 10:return function(u,h){const v=u.mapValue.fields||{},P=h.mapValue.fields||{};if(Ru(v)!==Ru(P))return!1;for(const V in v)if(v.hasOwnProperty(V)&&(void 0===P[V]||!Zo(v[V],P[V])))return!1;return!0}(i,e);default:return tn()}var h}function du(i,e){return void 0!==(i.values||[]).find(n=>Zo(n,e))}function hu(i,e){if(i===e)return 0;const n=lu(i),o=lu(e);if(n!==o)return jn(n,o);switch(n){case 0:case 9007199254740991:return 0;case 1:return jn(i.booleanValue,e.booleanValue);case 2:return function(h,v){const P=Or(h.integerValue||h.doubleValue),V=Or(v.integerValue||v.doubleValue);return P<V?-1:P>V?1:P===V?0:isNaN(P)?isNaN(V)?0:-1:1}(i,e);case 3:return el(i.timestampValue,e.timestampValue);case 4:return el(Yo(i),Yo(e));case 5:return jn(i.stringValue,e.stringValue);case 6:return function(h,v){const P=Es(h),V=Es(v);return P.compareTo(V)}(i.bytesValue,e.bytesValue);case 7:return function(h,v){const P=h.split("/"),V=v.split("/");for(let z=0;z<P.length&&z<V.length;z++){const ee=jn(P[z],V[z]);if(0!==ee)return ee}return jn(P.length,V.length)}(i.referenceValue,e.referenceValue);case 8:return function(h,v){const P=jn(Or(h.latitude),Or(v.latitude));return 0!==P?P:jn(Or(h.longitude),Or(v.longitude))}(i.geoPointValue,e.geoPointValue);case 9:return function(h,v){const P=h.values||[],V=v.values||[];for(let z=0;z<P.length&&z<V.length;++z){const ee=hu(P[z],V[z]);if(ee)return ee}return jn(P.length,V.length)}(i.arrayValue,e.arrayValue);case 10:return function(h,v){if(h===Fi.mapValue&&v===Fi.mapValue)return 0;if(h===Fi.mapValue)return 1;if(v===Fi.mapValue)return-1;const P=h.fields||{},V=Object.keys(P),z=v.fields||{},ee=Object.keys(z);V.sort(),ee.sort();for(let le=0;le<V.length&&le<ee.length;++le){const Ae=jn(V[le],ee[le]);if(0!==Ae)return Ae;const Xe=hu(P[V[le]],z[ee[le]]);if(0!==Xe)return Xe}return jn(V.length,ee.length)}(i.mapValue,e.mapValue);default:throw tn()}}function el(i,e){if("string"==typeof i&&"string"==typeof e&&i.length===e.length)return jn(i,e);const n=Ci(i),o=Ci(e),u=jn(n.seconds,o.seconds);return 0!==u?u:jn(n.nanos,o.nanos)}function Mo(i){return ua(i)}function ua(i){return"nullValue"in i?"null":"booleanValue"in i?""+i.booleanValue:"integerValue"in i?""+i.integerValue:"doubleValue"in i?""+i.doubleValue:"timestampValue"in i?function(n){const o=Ci(n);return`time(${o.seconds},${o.nanos})`}(i.timestampValue):"stringValue"in i?i.stringValue:"bytesValue"in i?Es(i.bytesValue).toBase64():"referenceValue"in i?$t.fromName(i.referenceValue).toString():"geoPointValue"in i?function(n){return`geo(${n.latitude},${n.longitude})`}(i.geoPointValue):"arrayValue"in i?function(n){let o="[",u=!0;for(const h of n.values||[])u?u=!1:o+=",",o+=ua(h);return o+"]"}(i.arrayValue):"mapValue"in i?function(n){const o=Object.keys(n.fields||{}).sort();let u="{",h=!0;for(const v of o)h?h=!1:u+=",",u+=`${v}:${ua(n.fields[v])}`;return u+"}"}(i.mapValue):tn()}function Mu(i,e){return{referenceValue:`projects/${i.projectId}/databases/${i.database}/documents/${e.path.canonicalString()}`}}function Xu(i){return!!i&&"integerValue"in i}function ro(i){return!!i&&"arrayValue"in i}function ec(i){return!!i&&"nullValue"in i}function wl(i){return!!i&&"doubleValue"in i&&isNaN(Number(i.doubleValue))}function Ac(i){return!!i&&"mapValue"in i}function Dl(i){if(i.geoPointValue)return{geoPointValue:Object.assign({},i.geoPointValue)};if(i.timestampValue&&"object"==typeof i.timestampValue)return{timestampValue:Object.assign({},i.timestampValue)};if(i.mapValue){const e={mapValue:{fields:{}}};return Nu(i.mapValue.fields,(n,o)=>e.mapValue.fields[n]=Dl(o)),e}if(i.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(i.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Dl(i.arrayValue.values[n]);return e}return Object.assign({},i)}function uh(i){return"__max__"===(((i.mapValue||{}).fields||{}).__type__||{}).stringValue}function Hh(i){return"nullValue"in i?Cc:"booleanValue"in i?{booleanValue:!1}:"integerValue"in i||"doubleValue"in i?{doubleValue:NaN}:"timestampValue"in i?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in i?{stringValue:""}:"bytesValue"in i?{bytesValue:""}:"referenceValue"in i?Mu(cu.empty(),$t.empty()):"geoPointValue"in i?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in i?{arrayValue:{}}:"mapValue"in i?{mapValue:{}}:tn()}function _i(i){return"nullValue"in i?{booleanValue:!1}:"booleanValue"in i?{doubleValue:NaN}:"integerValue"in i||"doubleValue"in i?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in i?{stringValue:""}:"stringValue"in i?{bytesValue:""}:"bytesValue"in i?Mu(cu.empty(),$t.empty()):"referenceValue"in i?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in i?{arrayValue:{}}:"arrayValue"in i?{mapValue:{}}:"mapValue"in i?Fi:tn()}function ch(i,e){const n=hu(i.value,e.value);return 0!==n?n:i.inclusive&&!e.inclusive?-1:!i.inclusive&&e.inclusive?1:0}function fu(i,e){const n=hu(i.value,e.value);return 0!==n?n:i.inclusive&&!e.inclusive?1:!i.inclusive&&e.inclusive?-1:0}class us{constructor(e){this.value=e}static empty(){return new us({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let o=0;o<e.length-1;++o)if(n=(n.mapValue.fields||{})[e.get(o)],!Ac(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Dl(n)}setAll(e){let n=si.emptyPath(),o={},u=[];e.forEach((v,P)=>{if(!n.isImmediateParentOf(P)){const V=this.getFieldsMap(n);this.applyChanges(V,o,u),o={},u=[],n=P.popLast()}v?o[P.lastSegment()]=Dl(v):u.push(P.lastSegment())});const h=this.getFieldsMap(n);this.applyChanges(h,o,u)}delete(e){const n=this.field(e.popLast());Ac(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Zo(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let o=0;o<e.length;++o){let u=n.mapValue.fields[e.get(o)];Ac(u)&&u.mapValue.fields||(u={mapValue:{fields:{}}},n.mapValue.fields[e.get(o)]=u),n=u}return n.mapValue.fields}applyChanges(e,n,o){Nu(n,(u,h)=>e[u]=h);for(const u of o)delete e[u]}clone(){return new us(Dl(this.value))}}function Cl(i){const e=[];return Nu(i.fields,(n,o)=>{const u=new si([n]);if(Ac(o)){const h=Cl(o.mapValue).fields;if(0===h.length)e.push(u);else for(const v of h)e.push(u.child(v))}else e.push(u)}),new Ko(e)}class Jn{constructor(e,n,o,u,h,v,P){this.key=e,this.documentType=n,this.version=o,this.readTime=u,this.createTime=h,this.data=v,this.documentState=P}static newInvalidDocument(e){return new Jn(e,0,rn.min(),rn.min(),rn.min(),us.empty(),0)}static newFoundDocument(e,n,o,u){return new Jn(e,1,n,rn.min(),o,u,0)}static newNoDocument(e,n){return new Jn(e,2,n,rn.min(),rn.min(),us.empty(),0)}static newUnknownDocument(e,n){return new Jn(e,3,n,rn.min(),rn.min(),us.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(rn.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=us.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=us.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=rn.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Jn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Jn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class pu{constructor(e,n){this.position=e,this.inclusive=n}}function tc(i,e,n){let o=0;for(let u=0;u<i.position.length;u++){const h=e[u],v=i.position[u];if(o=h.field.isKeyField()?$t.comparator($t.fromName(v.referenceValue),n.key):hu(v,n.data.field(h.field)),"desc"===h.dir&&(o*=-1),0!==o)break}return o}function Al(i,e){if(null===i)return null===e;if(null===e||i.inclusive!==e.inclusive||i.position.length!==e.position.length)return!1;for(let n=0;n<i.position.length;n++)if(!Zo(i.position[n],e.position[n]))return!1;return!0}class cs{constructor(e,n="asc"){this.field=e,this.dir=n}}function nc(i,e){return i.dir===e.dir&&i.field.isEqual(e.field)}class rd{}class fr extends rd{constructor(e,n,o){super(),this.field=e,this.op=n,this.value=o}static create(e,n,o){return e.isKeyField()?"in"===n||"not-in"===n?this.createKeyFieldInFilter(e,n,o):new tl(e,n,o):"array-contains"===n?new sd(e,o):"in"===n?new gu(e,o):"not-in"===n?new Sl(e,o):"array-contains-any"===n?new Nc(e,o):new fr(e,n,o)}static createKeyFieldInFilter(e,n,o){return"in"===n?new zh(e,o):new Hf(e,o)}matches(e){const n=e.data.field(this.field);return"!="===this.op?null!==n&&this.matchesComparison(hu(n,this.value)):null!==n&&lu(this.value)===lu(n)&&this.matchesComparison(hu(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return tn()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Pr extends rd{constructor(e,n){super(),this.filters=e,this.op=n,this.ue=null}static create(e,n){return new Pr(e,n)}matches(e){return rc(this)?void 0===this.filters.find(n=>!n.matches(e)):void 0!==this.filters.find(n=>n.matches(e))}getFlattenedFilters(){return null!==this.ue||(this.ue=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ue}getFilters(){return Object.assign([],this.filters)}}function rc(i){return"and"===i.op}function Sc(i){return"or"===i.op}function xu(i){return lh(i)&&rc(i)}function lh(i){for(const e of i.filters)if(e instanceof Pr)return!1;return!0}function Ns(i){if(i instanceof fr)return i.field.canonicalString()+i.op.toString()+Mo(i.value);if(xu(i))return i.filters.map(e=>Ns(e)).join(",");{const e=i.filters.map(n=>Ns(n)).join(",");return`${i.op}(${e})`}}function id(i,e){return i instanceof fr?(o=i,(u=e)instanceof fr&&o.op===u.op&&o.field.isEqual(u.field)&&Zo(o.value,u.value)):i instanceof Pr?function(o,u){return u instanceof Pr&&o.op===u.op&&o.filters.length===u.filters.length&&o.filters.reduce((h,v,P)=>h&&id(v,u.filters[P]),!0)}(i,e):void tn();var o,u}function ku(i,e){const n=i.filters.concat(e);return Pr.create(n,i.op)}function $h(i){return i instanceof fr?`${(n=i).field.canonicalString()} ${n.op} ${Mo(n.value)}`:i instanceof Pr?function(n){return n.op.toString()+" {"+n.getFilters().map($h).join(" ,")+"}"}(i):"Filter";var n}class tl extends fr{constructor(e,n,o){super(e,n,o),this.key=$t.fromName(o.referenceValue)}matches(e){const n=$t.comparator(e.key,this.key);return this.matchesComparison(n)}}class zh extends fr{constructor(e,n){super(e,"in",n),this.keys=Rc(0,n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class Hf extends fr{constructor(e,n){super(e,"not-in",n),this.keys=Rc(0,n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function Rc(i,e){var n;return((null===(n=e.arrayValue)||void 0===n?void 0:n.values)||[]).map(o=>$t.fromName(o.referenceValue))}class sd extends fr{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return ro(n)&&du(n.arrayValue,this.value)}}class gu extends fr{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return null!==n&&du(this.value.arrayValue,n)}}class Sl extends fr{constructor(e,n){super(e,"not-in",n)}matches(e){if(du(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return null!==n&&!du(this.value.arrayValue,n)}}class Nc extends fr{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!ro(n)||!n.arrayValue.values)&&n.arrayValue.values.some(o=>du(this.value.arrayValue,o))}}class nl{constructor(e,n=null,o=[],u=[],h=null,v=null,P=null){this.path=e,this.collectionGroup=n,this.orderBy=o,this.filters=u,this.limit=h,this.startAt=v,this.endAt=P,this.ce=null}}function Rl(i,e=null,n=[],o=[],u=null,h=null,v=null){return new nl(i,e,n,o,u,h,v)}function Wa(i){const e=Gt(i);if(null===e.ce){let n=e.path.canonicalString();null!==e.collectionGroup&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(o=>Ns(o)).join(","),n+="|ob:",n+=e.orderBy.map(o=>{return(h=o).field.canonicalString()+h.dir;var h}).join(","),Sa(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(o=>Mo(o)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(o=>Mo(o)).join(",")),e.ce=n}return e.ce}function Oc(i,e){if(i.limit!==e.limit||i.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<i.orderBy.length;n++)if(!nc(i.orderBy[n],e.orderBy[n]))return!1;if(i.filters.length!==e.filters.length)return!1;for(let n=0;n<i.filters.length;n++)if(!id(i.filters[n],e.filters[n]))return!1;return i.collectionGroup===e.collectionGroup&&!!i.path.isEqual(e.path)&&!!Al(i.startAt,e.startAt)&&Al(i.endAt,e.endAt)}function ic(i){return $t.isDocumentKey(i.path)&&null===i.collectionGroup&&0===i.filters.length}function Pc(i,e){return i.filters.filter(n=>n instanceof fr&&n.field.isEqual(e))}function Rd(i,e,n){let o=Cc,u=!0;for(const h of Pc(i,e)){let v=Cc,P=!0;switch(h.op){case"<":case"<=":v=Hh(h.value);break;case"==":case"in":case">=":v=h.value;break;case">":v=h.value,P=!1;break;case"!=":case"not-in":v=Cc}ch({value:o,inclusive:u},{value:v,inclusive:P})<0&&(o=v,u=P)}if(null!==n)for(let h=0;h<i.orderBy.length;++h)if(i.orderBy[h].field.isEqual(e)){const v=n.position[h];ch({value:o,inclusive:u},{value:v,inclusive:n.inclusive})<0&&(o=v,u=n.inclusive);break}return{value:o,inclusive:u}}function dh(i,e,n){let o=Fi,u=!0;for(const h of Pc(i,e)){let v=Fi,P=!0;switch(h.op){case">=":case">":v=_i(h.value),P=!1;break;case"==":case"in":case"<=":v=h.value;break;case"<":v=h.value,P=!1;break;case"!=":case"not-in":v=Fi}fu({value:o,inclusive:u},{value:v,inclusive:P})>0&&(o=v,u=P)}if(null!==n)for(let h=0;h<i.orderBy.length;++h)if(i.orderBy[h].field.isEqual(e)){const v=n.position[h];fu({value:o,inclusive:u},{value:v,inclusive:n.inclusive})>0&&(o=v,u=n.inclusive);break}return{value:o,inclusive:u}}class Os{constructor(e,n=null,o=[],u=[],h=null,v="F",P=null,V=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=o,this.filters=u,this.limit=h,this.limitType=v,this.startAt=P,this.endAt=V,this.le=null,this.he=null,this.Pe=null}}function Nd(i,e,n,o,u,h,v,P){return new Os(i,e,n,o,u,h,v,P)}function rl(i){return new Os(i)}function od(i){return 0===i.filters.length&&null===i.limit&&null==i.startAt&&null==i.endAt&&(0===i.explicitOrderBy.length||1===i.explicitOrderBy.length&&i.explicitOrderBy[0].field.isKeyField())}function N(i){return null!==i.collectionGroup}function m(i){const e=Gt(i);if(null===e.le){e.le=[];const n=new Set;for(const h of e.explicitOrderBy)e.le.push(h),n.add(h.field.canonicalString());const o=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(v){let P=new oi(si.comparator);return v.filters.forEach(V=>{V.getFlattenedFilters().forEach(z=>{z.isInequality()&&(P=P.add(z.field))})}),P})(e).forEach(h=>{n.has(h.canonicalString())||h.isKeyField()||e.le.push(new cs(h,o))}),n.has(si.keyField().canonicalString())||e.le.push(new cs(si.keyField(),o))}return e.le}function T(i){const e=Gt(i);return e.he||(e.he=function M(i,e){if("F"===i.limitType)return Rl(i.path,i.collectionGroup,e,i.filters,i.limit,i.startAt,i.endAt);{e=e.map(u=>new cs(u.field,"desc"===u.dir?"asc":"desc"));const n=i.endAt?new pu(i.endAt.position,i.endAt.inclusive):null,o=i.startAt?new pu(i.startAt.position,i.startAt.inclusive):null;return Rl(i.path,i.collectionGroup,e,i.filters,i.limit,n,o)}}(e,m(i))),e.he}function Z(i,e){const n=i.filters.concat([e]);return new Os(i.path,i.collectionGroup,i.explicitOrderBy.slice(),n,i.limit,i.limitType,i.startAt,i.endAt)}function ue(i,e,n){return new Os(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),e,n,i.startAt,i.endAt)}function Be(i,e){return Oc(T(i),T(e))&&i.limitType===e.limitType}function st(i){return`${Wa(T(i))}|lt:${i.limitType}`}function Dt(i){return`Query(target=${function(n){let o=n.path.canonicalString();return null!==n.collectionGroup&&(o+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(o+=`, filters: [${n.filters.map(u=>$h(u)).join(", ")}]`),Sa(n.limit)||(o+=", limit: "+n.limit),n.orderBy.length>0&&(o+=`, orderBy: [${n.orderBy.map(u=>{return`${(v=u).field.canonicalString()} (${v.dir})`;var v}).join(", ")}]`),n.startAt&&(o+=", startAt: ",o+=n.startAt.inclusive?"b:":"a:",o+=n.startAt.position.map(u=>Mo(u)).join(",")),n.endAt&&(o+=", endAt: ",o+=n.endAt.inclusive?"a:":"b:",o+=n.endAt.position.map(u=>Mo(u)).join(",")),`Target(${o})`}(T(i))}; limitType=${i.limitType})`}function ln(i,e){return e.isFoundDocument()&&function(o,u){const h=u.key.path;return null!==o.collectionGroup?u.key.hasCollectionId(o.collectionGroup)&&o.path.isPrefixOf(h):$t.isDocumentKey(o.path)?o.path.isEqual(h):o.path.isImmediateParentOf(h)}(i,e)&&function(o,u){for(const h of m(o))if(!h.field.isKeyField()&&null===u.data.field(h.field))return!1;return!0}(i,e)&&function(o,u){for(const h of o.filters)if(!h.matches(u))return!1;return!0}(i,e)&&(u=e,!((o=i).startAt&&!function(v,P,V){const z=tc(v,P,V);return v.inclusive?z<=0:z<0}(o.startAt,m(o),u)||o.endAt&&!function(v,P,V){const z=tc(v,P,V);return v.inclusive?z>=0:z>0}(o.endAt,m(o),u)));var o,u}function En(i){return i.collectionGroup||(i.path.length%2==1?i.path.lastSegment():i.path.get(i.path.length-2))}function Ar(i){return(e,n)=>{let o=!1;for(const u of m(i)){const h=la(u,e,n);if(0!==h)return h;o=o||u.field.isKeyField()}return 0}}function la(i,e,n){const o=i.field.isKeyField()?$t.comparator(e.key,n.key):function(h,v,P){const V=v.data.field(h),z=P.data.field(h);return null!==V&&null!==z?hu(V,z):tn()}(i.field,e,n);switch(i.dir){case"asc":return o;case"desc":return-1*o;default:return tn()}}class Ws{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),o=this.inner[n];if(void 0!==o)for(const[u,h]of o)if(this.equalsFn(u,e))return h}has(e){return void 0!==this.get(e)}set(e,n){const o=this.mapKeyFn(e),u=this.inner[o];if(void 0===u)return this.inner[o]=[[e,n]],void this.innerSize++;for(let h=0;h<u.length;h++)if(this.equalsFn(u[h][0],e))return void(u[h]=[e,n]);u.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),o=this.inner[n];if(void 0===o)return!1;for(let u=0;u<o.length;u++)if(this.equalsFn(o[u][0],e))return 1===o.length?delete this.inner[n]:o.splice(u,1),this.innerSize--,!0;return!1}forEach(e){Nu(this.inner,(n,o)=>{for(const[u,h]of o)e(u,h)})}isEmpty(){return Po(this.inner)}size(){return this.innerSize}}const Mc=new Br($t.comparator);function yo(){return Mc}const Qo=new Br($t.comparator);function zr(...i){let e=Qo;for(const n of i)e=e.insert(n.key,n);return e}function sc(i){let e=Qo;return i.forEach((n,o)=>e=e.insert(n,o.overlayedDocument)),e}function Io(){return Fu()}function Nl(){return Fu()}function Fu(){return new Ws(i=>i.toString(),(i,e)=>i.isEqual(e))}const il=new Br($t.comparator),ad=new oi($t.comparator);function sr(...i){let e=ad;for(const n of i)e=e.add(n);return e}const oc=new oi(jn);function sl(){return oc}function Wh(i,e){if(i.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ra(e)?"-0":e}}function qh(i){return{integerValue:""+i}}function ud(i,e){return Ic(e)?qh(e):Wh(i,e)}class mu{constructor(){this._=void 0}}function Kh(i,e,n){return i instanceof Jo?function(u,h){const v={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:u.seconds,nanos:u.nanoseconds}}}};return h&&Pu(h)&&(h=Qu(h)),h&&(v.fields.__previous_value__=h),{mapValue:v}}(n,e):i instanceof _u?Od(i,e):i instanceof da?Na(i,e):function(u,h){const v=ac(u,h),P=Yh(v)+Yh(u.Ie);return Xu(v)&&Xu(u.Ie)?qh(P):Wh(u.serializer,P)}(i,e)}function xc(i,e,n){return i instanceof _u?Od(i,e):i instanceof da?Na(i,e):n}function ac(i,e){return i instanceof qa?Xu(o=e)||(h=o)&&"doubleValue"in h?e:{integerValue:0}:null;var o,h}class Jo extends mu{}class _u extends mu{constructor(e){super(),this.elements=e}}function Od(i,e){const n=$f(e);for(const o of i.elements)n.some(u=>Zo(u,o))||n.push(o);return{arrayValue:{values:n}}}class da extends mu{constructor(e){super(),this.elements=e}}function Na(i,e){let n=$f(e);for(const o of i.elements)n=n.filter(u=>!Zo(u,o));return{arrayValue:{values:n}}}class qa extends mu{constructor(e,n){super(),this.serializer=e,this.Ie=n}}function Yh(i){return Or(i.integerValue||i.doubleValue)}function $f(i){return ro(i)&&i.arrayValue.values?i.arrayValue.values.slice():[]}class Ol{constructor(e,n){this.field=e,this.transform=n}}class ha{constructor(e,n){this.version=e,this.transformResults=n}}class Ai{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Ai}static exists(e){return new Ai(void 0,e)}static updateTime(e){return new Ai(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Pd(i,e){return void 0!==i.updateTime?e.isFoundDocument()&&e.version.isEqual(i.updateTime):void 0===i.exists||i.exists===e.isFoundDocument()}class hh{}function Md(i,e){if(!i.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return i.isNoDocument()?new al(i.key,Ai.none()):new Oa(i.key,i.data,Ai.none());{const n=i.data,o=us.empty();let u=new oi(si.comparator);for(let h of e.fields)if(!u.has(h)){let v=n.field(h);null===v&&h.length>1&&(h=h.popLast(),v=n.field(h)),null===v?o.delete(h):o.set(h,v),u=u.add(h)}return new vu(i.key,o,new Ko(u.toArray()),Ai.none())}}function Zh(i,e,n){i instanceof Oa?function(u,h,v){const P=u.value.clone(),V=ol(u.fieldTransforms,h,v.transformResults);P.setAll(V),h.convertToFoundDocument(v.version,P).setHasCommittedMutations()}(i,e,n):i instanceof vu?function(u,h,v){if(!Pd(u.precondition,h))return void h.convertToUnknownDocument(v.version);const P=ol(u.fieldTransforms,h,v.transformResults),V=h.data;V.setAll(xo(u)),V.setAll(P),h.convertToFoundDocument(v.version,V).setHasCommittedMutations()}(i,e,n):e.convertToNoDocument(n.version).setHasCommittedMutations()}function xd(i,e,n,o){return i instanceof Oa?function(h,v,P,V){if(!Pd(h.precondition,v))return P;const z=h.value.clone(),ee=ph(h.fieldTransforms,V,v);return z.setAll(ee),v.convertToFoundDocument(v.version,z).setHasLocalMutations(),null}(i,e,n,o):i instanceof vu?function(h,v,P,V){if(!Pd(h.precondition,v))return P;const z=ph(h.fieldTransforms,V,v),ee=v.data;return ee.setAll(xo(h)),ee.setAll(z),v.convertToFoundDocument(v.version,ee).setHasLocalMutations(),null===P?null:P.unionWith(h.fieldMask.fields).unionWith(h.fieldTransforms.map(le=>le.field))}(i,e,n,o):(P=n,Pd(i.precondition,v=e)?(v.convertToNoDocument(v.version).setHasLocalMutations(),null):P);var v,P}function fa(i,e){let n=null;for(const o of i.fieldTransforms){const u=e.data.field(o.field),h=ac(o.transform,u||null);null!=h&&(null===n&&(n=us.empty()),n.set(o.field,h))}return n||null}function fh(i,e){return i.type===e.type&&!!i.key.isEqual(e.key)&&!!i.precondition.isEqual(e.precondition)&&(u=e.fieldTransforms,!!(void 0===(o=i.fieldTransforms)&&void 0===u||o&&u&&ki(o,u,(h,v)=>function zf(i,e){return i.field.isEqual(e.field)&&(u=e.transform,(o=i.transform)instanceof _u&&u instanceof _u||o instanceof da&&u instanceof da?ki(o.elements,u.elements,Zo):o instanceof qa&&u instanceof qa?Zo(o.Ie,u.Ie):o instanceof Jo&&u instanceof Jo);var o,u}(h,v))))&&(0===i.type?i.value.isEqual(e.value):1!==i.type||i.data.isEqual(e.data)&&i.fieldMask.isEqual(e.fieldMask));var o,u}class Oa extends hh{constructor(e,n,o,u=[]){super(),this.key=e,this.value=n,this.precondition=o,this.fieldTransforms=u,this.type=0}getFieldMask(){return null}}class vu extends hh{constructor(e,n,o,u,h=[]){super(),this.key=e,this.data=n,this.fieldMask=o,this.precondition=u,this.fieldTransforms=h,this.type=1}getFieldMask(){return this.fieldMask}}function xo(i){const e=new Map;return i.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const o=i.data.field(n);e.set(n,o)}}),e}function ol(i,e,n){const o=new Map;pn(i.length===n.length);for(let u=0;u<n.length;u++){const h=i[u],v=h.transform,P=e.data.field(h.field);o.set(h.field,xc(v,P,n[u]))}return o}function ph(i,e,n){const o=new Map;for(const u of i){const h=u.transform,v=n.data.field(u.field);o.set(u.field,Kh(h,v,e))}return o}class al extends hh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Eo extends hh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class ul{constructor(e,n,o,u){this.batchId=e,this.localWriteTime=n,this.baseMutations=o,this.mutations=u}applyToRemoteDocument(e,n){const o=n.mutationResults;for(let u=0;u<this.mutations.length;u++){const h=this.mutations[u];h.key.isEqual(e.key)&&Zh(h,e,o[u])}}applyToLocalView(e,n){for(const o of this.baseMutations)o.key.isEqual(e.key)&&(n=xd(o,e,n,this.localWriteTime));for(const o of this.mutations)o.key.isEqual(e.key)&&(n=xd(o,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const o=Nl();return this.mutations.forEach(u=>{const h=e.get(u.key),v=h.overlayedDocument;let P=this.applyToLocalView(v,h.mutatedFields);P=n.has(u.key)?null:P;const V=Md(v,P);null!==V&&o.set(u.key,V),v.isValidDocument()||v.convertToNoDocument(rn.min())}),o}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),sr())}isEqual(e){return this.batchId===e.batchId&&ki(this.mutations,e.mutations,(n,o)=>fh(n,o))&&ki(this.baseMutations,e.baseMutations,(n,o)=>fh(n,o))}}class kc{constructor(e,n,o,u){this.batch=e,this.commitVersion=n,this.mutationResults=o,this.docVersions=u}static from(e,n,o){pn(e.mutations.length===o.length);let u=il;const h=e.mutations;for(let v=0;v<h.length;v++)u=u.insert(h[v].key,o[v].version);return new kc(e,n,o,u)}}class kd{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class cd{constructor(e,n){this.count=e,this.unchangedNames=n}}var Ts,pr;function gh(i){switch(i){default:return tn();case et.CANCELLED:case et.UNKNOWN:case et.DEADLINE_EXCEEDED:case et.RESOURCE_EXHAUSTED:case et.INTERNAL:case et.UNAVAILABLE:case et.UNAUTHENTICATED:return!1;case et.INVALID_ARGUMENT:case et.NOT_FOUND:case et.ALREADY_EXISTS:case et.PERMISSION_DENIED:case et.FAILED_PRECONDITION:case et.ABORTED:case et.OUT_OF_RANGE:case et.UNIMPLEMENTED:case et.DATA_LOSS:return!0}}function Pl(i){if(void 0===i)return mi("GRPC error has no .code"),et.UNKNOWN;switch(i){case Ts.OK:return et.OK;case Ts.CANCELLED:return et.CANCELLED;case Ts.UNKNOWN:return et.UNKNOWN;case Ts.DEADLINE_EXCEEDED:return et.DEADLINE_EXCEEDED;case Ts.RESOURCE_EXHAUSTED:return et.RESOURCE_EXHAUSTED;case Ts.INTERNAL:return et.INTERNAL;case Ts.UNAVAILABLE:return et.UNAVAILABLE;case Ts.UNAUTHENTICATED:return et.UNAUTHENTICATED;case Ts.INVALID_ARGUMENT:return et.INVALID_ARGUMENT;case Ts.NOT_FOUND:return et.NOT_FOUND;case Ts.ALREADY_EXISTS:return et.ALREADY_EXISTS;case Ts.PERMISSION_DENIED:return et.PERMISSION_DENIED;case Ts.FAILED_PRECONDITION:return et.FAILED_PRECONDITION;case Ts.ABORTED:return et.ABORTED;case Ts.OUT_OF_RANGE:return et.OUT_OF_RANGE;case Ts.UNIMPLEMENTED:return et.UNIMPLEMENTED;case Ts.DATA_LOSS:return et.DATA_LOSS;default:return tn()}}(pr=Ts||(Ts={}))[pr.OK=0]="OK",pr[pr.CANCELLED=1]="CANCELLED",pr[pr.UNKNOWN=2]="UNKNOWN",pr[pr.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",pr[pr.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",pr[pr.NOT_FOUND=5]="NOT_FOUND",pr[pr.ALREADY_EXISTS=6]="ALREADY_EXISTS",pr[pr.PERMISSION_DENIED=7]="PERMISSION_DENIED",pr[pr.UNAUTHENTICATED=16]="UNAUTHENTICATED",pr[pr.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",pr[pr.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",pr[pr.ABORTED=10]="ABORTED",pr[pr.OUT_OF_RANGE=11]="OUT_OF_RANGE",pr[pr.UNIMPLEMENTED=12]="UNIMPLEMENTED",pr[pr.INTERNAL=13]="INTERNAL",pr[pr.UNAVAILABLE=14]="UNAVAILABLE",pr[pr.DATA_LOSS=15]="DATA_LOSS";function Ml(){return new TextEncoder}const Wf=new zo([4294967295,4294967295],0);function Qh(i){const e=Ml().encode(i),n=new mo;return n.update(e),new Uint8Array(n.digest())}function b(i){const e=new DataView(i.buffer),n=e.getUint32(0,!0),o=e.getUint32(4,!0),u=e.getUint32(8,!0),h=e.getUint32(12,!0);return[new zo([n,o],0),new zo([u,h],0)]}class f{constructor(e,n,o){if(this.bitmap=e,this.padding=n,this.hashCount=o,n<0||n>=8)throw new _(`Invalid padding: ${n}`);if(o<0)throw new _(`Invalid hash count: ${o}`);if(e.length>0&&0===this.hashCount)throw new _(`Invalid hash count: ${o}`);if(0===e.length&&0!==n)throw new _(`Invalid padding when bitmap length is 0: ${n}`);this.Te=8*e.length-n,this.Ee=zo.fromNumber(this.Te)}de(e,n,o){let u=e.add(n.multiply(zo.fromNumber(o)));return 1===u.compare(Wf)&&(u=new zo([u.getBits(0),u.getBits(1)],0)),u.modulo(this.Ee).toNumber()}Ae(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.Te)return!1;const n=Qh(e),[o,u]=b(n);for(let h=0;h<this.hashCount;h++){const v=this.de(o,u,h);if(!this.Ae(v))return!1}return!0}static create(e,n,o){const u=e%8==0?0:8-e%8,h=new Uint8Array(Math.ceil(e/8)),v=new f(h,u,n);return o.forEach(P=>v.insert(P)),v}insert(e){if(0===this.Te)return;const n=Qh(e),[o,u]=b(n);for(let h=0;h<this.hashCount;h++){const v=this.de(o,u,h);this.Re(v)}}Re(e){const n=Math.floor(e/8);this.bitmap[n]|=1<<e%8}}class _ extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class C{constructor(e,n,o,u,h){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=o,this.documentUpdates=u,this.resolvedLimboDocuments=h}static createSynthesizedRemoteEventForCurrentChange(e,n,o){const u=new Map;return u.set(e,G.createSynthesizedTargetChangeForCurrentChange(e,n,o)),new C(rn.min(),u,new Br(jn),yo(),sr())}}class G{constructor(e,n,o,u,h){this.resumeToken=e,this.current=n,this.addedDocuments=o,this.modifiedDocuments=u,this.removedDocuments=h}static createSynthesizedTargetChangeForCurrentChange(e,n,o){return new G(o,n,sr(),sr(),sr())}}class X{constructor(e,n,o,u){this.Ve=e,this.removedTargetIds=n,this.key=o,this.me=u}}class ye{constructor(e,n){this.targetId=e,this.fe=n}}class Ge{constructor(e,n,o=as.EMPTY_BYTE_STRING,u=null){this.state=e,this.targetIds=n,this.resumeToken=o,this.cause=u}}class ht{constructor(){this.ge=0,this.pe=hn(),this.ye=as.EMPTY_BYTE_STRING,this.we=!1,this.Se=!0}get current(){return this.we}get resumeToken(){return this.ye}get be(){return 0!==this.ge}get De(){return this.Se}Ce(e){e.approximateByteSize()>0&&(this.Se=!0,this.ye=e)}ve(){let e=sr(),n=sr(),o=sr();return this.pe.forEach((u,h)=>{switch(h){case 0:e=e.add(u);break;case 2:n=n.add(u);break;case 1:o=o.add(u);break;default:tn()}}),new G(this.ye,this.we,e,n,o)}Fe(){this.Se=!1,this.pe=hn()}Me(e,n){this.Se=!0,this.pe=this.pe.insert(e,n)}xe(e){this.Se=!0,this.pe=this.pe.remove(e)}Oe(){this.ge+=1}Ne(){this.ge-=1}Be(){this.Se=!0,this.we=!0}}class Jt{constructor(e){this.Le=e,this.ke=new Map,this.qe=yo(),this.Qe=dn(),this.Ke=new Br(jn)}$e(e){for(const n of e.Ve)e.me&&e.me.isFoundDocument()?this.Ue(n,e.me):this.We(n,e.key,e.me);for(const n of e.removedTargetIds)this.We(n,e.key,e.me)}Ge(e){this.forEachTarget(e,n=>{const o=this.ze(n);switch(e.state){case 0:this.je(n)&&o.Ce(e.resumeToken);break;case 1:o.Ne(),o.be||o.Fe(),o.Ce(e.resumeToken);break;case 2:o.Ne(),o.be||this.removeTarget(n);break;case 3:this.je(n)&&(o.Be(),o.Ce(e.resumeToken));break;case 4:this.je(n)&&(this.He(n),o.Ce(e.resumeToken));break;default:tn()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ke.forEach((o,u)=>{this.je(u)&&n(u)})}Je(e){const n=e.targetId,o=e.fe.count,u=this.Ye(n);if(u){const h=u.target;if(ic(h))if(0===o){const v=new $t(h.path);this.We(n,v,Jn.newNoDocument(v,rn.min()))}else pn(1===o);else{const v=this.Ze(n);if(v!==o){const P=this.Xe(e),V=P?this.et(P,e,v):1;0!==V&&(this.He(n),this.Ke=this.Ke.insert(n,2===V?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch"))}}}}Xe(e){const n=e.fe.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:o="",padding:u=0},hashCount:h=0}=n;let v,P;try{v=Es(o).toUint8Array()}catch(V){if(V instanceof Dc)return _o("Decoding the base64 bloom filter in existence filter failed ("+V.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw V}try{P=new f(v,u,h)}catch(V){return _o(V instanceof _?"BloomFilter error: ":"Applying bloom filter failed: ",V),null}return 0===P.Te?null:P}et(e,n,o){return n.fe.count===o-this.rt(e,n.targetId)?0:2}rt(e,n){const o=this.Le.getRemoteKeysForTarget(n);let u=0;return o.forEach(h=>{const v=this.Le.nt(),P=`projects/${v.projectId}/databases/${v.database}/documents/${h.path.canonicalString()}`;e.mightContain(P)||(this.We(n,h,null),u++)}),u}it(e){const n=new Map;this.ke.forEach((h,v)=>{const P=this.Ye(v);if(P){if(h.current&&ic(P.target)){const V=new $t(P.target.path);null!==this.qe.get(V)||this.st(v,V)||this.We(v,V,Jn.newNoDocument(V,e))}h.De&&(n.set(v,h.ve()),h.Fe())}});let o=sr();this.Qe.forEach((h,v)=>{let P=!0;v.forEachWhile(V=>{const z=this.Ye(V);return!z||"TargetPurposeLimboResolution"===z.purpose||(P=!1,!1)}),P&&(o=o.add(h))}),this.qe.forEach((h,v)=>v.setReadTime(e));const u=new C(e,n,this.Ke,this.qe,o);return this.qe=yo(),this.Qe=dn(),this.Ke=new Br(jn),u}Ue(e,n){if(!this.je(e))return;const o=this.st(e,n.key)?2:0;this.ze(e).Me(n.key,o),this.qe=this.qe.insert(n.key,n),this.Qe=this.Qe.insert(n.key,this.ot(n.key).add(e))}We(e,n,o){if(!this.je(e))return;const u=this.ze(e);this.st(e,n)?u.Me(n,1):u.xe(n),this.Qe=this.Qe.insert(n,this.ot(n).delete(e)),o&&(this.qe=this.qe.insert(n,o))}removeTarget(e){this.ke.delete(e)}Ze(e){const n=this.ze(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Oe(e){this.ze(e).Oe()}ze(e){let n=this.ke.get(e);return n||(n=new ht,this.ke.set(e,n)),n}ot(e){let n=this.Qe.get(e);return n||(n=new oi(jn),this.Qe=this.Qe.insert(e,n)),n}je(e){const n=null!==this.Ye(e);return n||Et("WatchChangeAggregator","Detected inactive target",e),n}Ye(e){const n=this.ke.get(e);return n&&n.be?null:this.Le._t(e)}He(e){this.ke.set(e,new ht),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.We(e,n,null)})}st(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function dn(){return new Br($t.comparator)}function hn(){return new Br($t.comparator)}const Si={asc:"ASCENDING",desc:"DESCENDING"},ko={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Fc={and:"AND",or:"OR"};class dd{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function cl(i,e){return i.useProto3Json||Sa(e)?e:{value:e}}function uc(i,e){return i.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function mh(i,e){return i.useProto3Json?e.toBase64():e.toUint8Array()}function hd(i,e){return uc(i,e.toTimestamp())}function ls(i){return pn(!!i),rn.fromTimestamp(function(n){const o=Ci(n);return new Rr(o.seconds,o.nanos)}(i))}function Fd(i,e){return(o=i,new Xn(["projects",o.projectId,"databases",o.database])).child("documents").child(e).canonicalString();var o}function yu(i){const e=Xn.fromString(i);return pn(Zf(e)),e}function ll(i,e){return Fd(i.databaseId,e.path)}function Ya(i,e){const n=yu(e);if(n.get(1)!==i.databaseId.projectId)throw new vt(et.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+i.databaseId.projectId);if(n.get(3)!==i.databaseId.database)throw new vt(et.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+i.databaseId.database);return new $t(qf(n))}function xl(i,e){return Fd(i.databaseId,e)}function Jh(i){const e=yu(i);return 4===e.length?Xn.emptyPath():qf(e)}function dl(i){return new Xn(["projects",i.databaseId.projectId,"databases",i.databaseId.database]).canonicalString()}function qf(i){return pn(i.length>4&&"documents"===i.get(4)),i.popFirst(5)}function Xh(i,e,n){return{name:ll(i,e),fields:n.value.mapValue.fields}}function ef(i,e,n){const o=Ya(i,e.name),u=ls(e.updateTime),h=e.createTime?ls(e.createTime):rn.min(),v=new us({mapValue:{fields:e.fields}}),P=Jn.newFoundDocument(o,u,h,v);return n&&P.setHasCommittedMutations(),n?P.setHasCommittedMutations():P}function fd(i,e){let n;if(e instanceof Oa)n={update:Xh(i,e.key,e.value)};else if(e instanceof al)n={delete:ll(i,e.key)};else if(e instanceof vu)n={update:Xh(i,e.key,e.data),updateMask:Yf(e.fieldMask)};else{if(!(e instanceof Eo))return tn();n={verify:ll(i,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(o=>function(h,v){const P=v.transform;if(P instanceof Jo)return{fieldPath:v.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(P instanceof _u)return{fieldPath:v.field.canonicalString(),appendMissingElements:{values:P.elements}};if(P instanceof da)return{fieldPath:v.field.canonicalString(),removeAllFromArray:{values:P.elements}};if(P instanceof qa)return{fieldPath:v.field.canonicalString(),increment:P.Ie};throw tn()}(0,o))),e.precondition.isNone||(n.currentDocument=void 0!==(h=e.precondition).updateTime?{updateTime:hd(i,h.updateTime)}:void 0!==h.exists?{exists:h.exists}:tn()),n;var h}function Ld(i,e){const n=e.currentDocument?void 0!==(h=e.currentDocument).updateTime?Ai.updateTime(ls(h.updateTime)):void 0!==h.exists?Ai.exists(h.exists):Ai.none():Ai.none(),o=e.updateTransforms?e.updateTransforms.map(u=>function(v,P){let V=null;"setToServerValue"in P?(pn("REQUEST_TIME"===P.setToServerValue),V=new Jo):"appendMissingElements"in P?V=new _u(P.appendMissingElements.values||[]):"removeAllFromArray"in P?V=new da(P.removeAllFromArray.values||[]):"increment"in P?V=new qa(v,P.increment):tn();const z=si.fromServerFormat(P.fieldPath);return new Ol(z,V)}(i,u)):[];var h;if(e.update){const u=Ya(i,e.update.name),h=new us({mapValue:{fields:e.update.fields}});if(e.updateMask){const v=new Ko((e.updateMask.fieldPaths||[]).map(ee=>si.fromServerFormat(ee)));return new vu(u,h,v,n,o)}return new Oa(u,h,n,o)}if(e.delete){const u=Ya(i,e.delete);return new al(u,n)}if(e.verify){const u=Ya(i,e.verify);return new Eo(u,n)}return tn()}function Kp(i,e){return{documents:[xl(i,e.path)]}}function tf(i,e){const n={structuredQuery:{}},o=e.path;null!==e.collectionGroup?(n.parent=xl(i,o),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=xl(i,o.popLast()),n.structuredQuery.from=[{collectionId:o.lastSegment()}]);const u=function(V){if(0!==V.length)return Dm(Pr.create(V,"and"))}(e.filters);u&&(n.structuredQuery.where=u);const h=function(V){if(0!==V.length)return V.map(z=>{return{field:hl((le=z).field),direction:Vd(le.dir)};var le})}(e.orderBy);h&&(n.structuredQuery.orderBy=h);const v=cl(i,e.limit);return null!==v&&(n.structuredQuery.limit=v),e.startAt&&(n.structuredQuery.startAt={before:(V=e.startAt).inclusive,values:V.position}),e.endAt&&(n.structuredQuery.endAt=function(V){return{before:!V.inclusive,values:V.position}}(e.endAt)),n;var V}function nf(i){let e=Jh(i.parent);const n=i.structuredQuery,o=n.from?n.from.length:0;let u=null;if(o>0){pn(1===o);const ee=n.from[0];ee.allDescendants?u=ee.collectionId:e=e.child(ee.collectionId)}let h=[];n.where&&(h=function(le){const Ae=Kf(le);return Ae instanceof Pr&&xu(Ae)?Ae.getFilters():[Ae]}(n.where));let v=[];n.orderBy&&(v=n.orderBy.map(Ae=>{return new cs(vh((kt=Ae).field),function(Wt){switch(Wt){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(kt.direction));var kt}));let P=null;n.limit&&(P=function(le){let Ae;return Ae="object"==typeof le?le.value:le,Sa(Ae)?null:Ae}(n.limit));let V=null;var le;n.startAt&&(V=new pu((le=n.startAt).values||[],!!le.before));let z=null;return n.endAt&&(z=function(le){return new pu(le.values||[],!le.before)}(n.endAt)),Nd(e,u,v,h,P,"F",V,z)}function Kf(i){return void 0!==i.unaryFilter?function(n){switch(n.unaryFilter.op){case"IS_NAN":const o=vh(n.unaryFilter.field);return fr.create(o,"==",{doubleValue:NaN});case"IS_NULL":const u=vh(n.unaryFilter.field);return fr.create(u,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const h=vh(n.unaryFilter.field);return fr.create(h,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const v=vh(n.unaryFilter.field);return fr.create(v,"!=",{nullValue:"NULL_VALUE"});default:return tn()}}(i):void 0!==i.fieldFilter?fr.create(vh((n=i).fieldFilter.field),function(u){switch(u){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return tn()}}(n.fieldFilter.op),n.fieldFilter.value):void 0!==i.compositeFilter?function(n){return Pr.create(n.compositeFilter.filters.map(o=>Kf(o)),function(u){switch(u){case"AND":return"and";case"OR":return"or";default:return tn()}}(n.compositeFilter.op))}(i):tn();var n}function Vd(i){return Si[i]}function cv(i){return ko[i]}function wm(i){return Fc[i]}function hl(i){return{fieldPath:i.canonicalString()}}function vh(i){return si.fromServerFormat(i.fieldPath)}function Dm(i){return i instanceof fr?function(n){if("=="===n.op){if(wl(n.value))return{unaryFilter:{field:hl(n.field),op:"IS_NAN"}};if(ec(n.value))return{unaryFilter:{field:hl(n.field),op:"IS_NULL"}}}else if("!="===n.op){if(wl(n.value))return{unaryFilter:{field:hl(n.field),op:"IS_NOT_NAN"}};if(ec(n.value))return{unaryFilter:{field:hl(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:hl(n.field),op:cv(n.op),value:n.value}}}(i):i instanceof Pr?function(n){const o=n.getFilters().map(u=>Dm(u));return 1===o.length?o[0]:{compositeFilter:{op:wm(n.op),filters:o}}}(i):tn()}function Yf(i){const e=[];return i.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function Zf(i){return i.length>=4&&"projects"===i.get(0)&&"databases"===i.get(2)}class Lu{constructor(e,n,o,u,h=rn.min(),v=rn.min(),P=as.EMPTY_BYTE_STRING,V=null){this.target=e,this.targetId=n,this.purpose=o,this.sequenceNumber=u,this.snapshotVersion=h,this.lastLimboFreeSnapshotVersion=v,this.resumeToken=P,this.expectedCount=V}withSequenceNumber(e){return new Lu(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Lu(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Lu(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Lu(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class Qf{constructor(e){this.ut=e}}function Cm(i,e){const n=e.key,o={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:Jf(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())o.document={name:ll(h=i.ut,(v=e).key),fields:v.data.value.mapValue.fields,updateTime:uc(h,v.version.toTimestamp()),createTime:uc(h,v.createTime.toTimestamp())};else if(e.isNoDocument())o.noDocument={path:n.path.toArray(),readTime:Ih(e.version)};else{if(!e.isUnknownDocument())return tn();o.unknownDocument={path:n.path.toArray(),version:Ih(e.version)}}var h,v;return o}function Jf(i){const e=i.toTimestamp();return[e.seconds,e.nanoseconds]}function Ih(i){const e=i.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Bd(i){const e=new Rr(i.seconds,i.nanoseconds);return rn.fromTimestamp(e)}function kl(i,e){const n=(e.baseMutations||[]).map(h=>Ld(i.ut,h));for(let h=0;h<e.mutations.length-1;++h)h+1<e.mutations.length&&void 0!==e.mutations[h+1].transform&&(e.mutations[h].updateTransforms=e.mutations[h+1].transform.fieldTransforms,e.mutations.splice(h+1,1),++h);const o=e.mutations.map(h=>Ld(i.ut,h)),u=Rr.fromMillis(e.localWriteTimeMs);return new ul(e.batchId,u,n,o)}function rf(i){const e=Bd(i.readTime),n=void 0!==i.lastLimboFreeSnapshotVersion?Bd(i.lastLimboFreeSnapshotVersion):rn.min();let o;return o=void 0!==i.query.documents?(pn(1===(h=i.query).documents.length),T(rl(Jh(h.documents[0])))):function(h){return T(nf(h))}(i.query),new Lu(o,i.targetId,"TargetPurposeListen",i.lastListenSequenceNumber,e,n,as.fromBase64String(i.resumeToken));var h}function Fl(i,e){const n=Ih(e.snapshotVersion),o=Ih(e.lastLimboFreeSnapshotVersion);let u;u=ic(e.target)?Kp(i.ut,e.target):tf(i.ut,e.target);const h=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Wa(e.target),readTime:n,resumeToken:h,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:o,query:u}}function Eh(i){const e=nf({parent:i.parent,structuredQuery:i.structuredQuery});return"LAST"===i.limitType?ue(e,e.limit,"L"):e}function sf(i,e){return new kd(e.largestBatchId,Ld(i.ut,e.overlayMutation))}function Yp(i,e){const n=e.path.lastSegment();return[i,Nr(e.path.popLast()),n]}function Zp(i,e,n,o){return{indexId:i,uid:e.uid||"",sequenceNumber:n,readTime:Ih(o.readTime),documentKey:Nr(o.documentKey.path),largestBatchId:o.largestBatchId}}class Qp{getBundleMetadata(e,n){return Jp(e).get(n).next(o=>{if(o)return{id:(h=o).bundleId,createTime:Bd(h.createTime),version:h.version};var h})}saveBundleMetadata(e,n){return Jp(e).put({bundleId:(u=n).id,createTime:Ih(ls(u.createTime)),version:u.version});var u}getNamedQuery(e,n){return Am(e).get(n).next(o=>{if(o)return{name:(h=o).name,query:Eh(h.bundledQuery),readTime:Bd(h.readTime)};var h})}saveNamedQuery(e,n){return Am(e).put({name:(u=n).name,readTime:Ih(ls(u.readTime)),bundledQuery:u.bundledQuery});var u}}function Jp(i){return Qi(i,"bundles")}function Am(i){return Qi(i,"namedQueries")}class af{constructor(e,n){this.serializer=e,this.userId=n}static ct(e,n){return new af(e,n.uid||"")}getOverlay(e,n){return uf(e).get(Yp(this.userId,n)).next(o=>o?sf(this.serializer,o):null)}getOverlays(e,n){const o=Io();return k.forEach(n,u=>this.getOverlay(e,u).next(h=>{null!==h&&o.set(u,h)})).next(()=>o)}saveOverlays(e,n,o){const u=[];return o.forEach((h,v)=>{const P=new kd(n,v);u.push(this.lt(e,P))}),k.waitFor(u)}removeOverlaysForBatchId(e,n,o){const u=new Set;n.forEach(v=>u.add(Nr(v.getCollectionPath())));const h=[];return u.forEach(v=>{const P=IDBKeyRange.bound([this.userId,v,o],[this.userId,v,o+1],!1,!0);h.push(uf(e).H("collectionPathOverlayIndex",P))}),k.waitFor(h)}getOverlaysForCollection(e,n,o){const u=Io(),h=Nr(n),v=IDBKeyRange.bound([this.userId,h,o],[this.userId,h,Number.POSITIVE_INFINITY],!0);return uf(e).W("collectionPathOverlayIndex",v).next(P=>{for(const V of P){const z=sf(this.serializer,V);u.set(z.getKey(),z)}return u})}getOverlaysForCollectionGroup(e,n,o,u){const h=Io();let v;const P=IDBKeyRange.bound([this.userId,n,o],[this.userId,n,Number.POSITIVE_INFINITY],!0);return uf(e).Y({index:"collectionGroupOverlayIndex",range:P},(V,z,ee)=>{const le=sf(this.serializer,z);h.size()<u||le.largestBatchId===v?(h.set(le.getKey(),le),v=le.largestBatchId):ee.done()}).next(()=>h)}lt(e,n){return uf(e).put(function(u,h,v){const[P,V,z]=Yp(h,v.mutation.key);return{userId:h,collectionPath:V,documentId:z,collectionGroup:v.mutation.key.getCollectionGroup(),largestBatchId:v.largestBatchId,overlayMutation:fd(u.ut,v.mutation)}}(this.serializer,this.userId,n))}}function uf(i){return Qi(i,"documentOverlays")}class Ud{constructor(){}ht(e,n){this.Pt(e,n),n.It()}Pt(e,n){if("nullValue"in e)this.Tt(n,5);else if("booleanValue"in e)this.Tt(n,10),n.Et(e.booleanValue?1:0);else if("integerValue"in e)this.Tt(n,15),n.Et(Or(e.integerValue));else if("doubleValue"in e){const o=Or(e.doubleValue);isNaN(o)?this.Tt(n,13):(this.Tt(n,15),Ra(o)?n.Et(0):n.Et(o))}else if("timestampValue"in e){const o=e.timestampValue;this.Tt(n,20),"string"==typeof o?n.dt(o):(n.dt(`${o.seconds||""}`),n.Et(o.nanos||0))}else if("stringValue"in e)this.At(e.stringValue,n),this.Rt(n);else if("bytesValue"in e)this.Tt(n,30),n.Vt(Es(e.bytesValue)),this.Rt(n);else if("referenceValue"in e)this.ft(e.referenceValue,n);else if("geoPointValue"in e){const o=e.geoPointValue;this.Tt(n,45),n.Et(o.latitude||0),n.Et(o.longitude||0)}else"mapValue"in e?uh(e)?this.Tt(n,Number.MAX_SAFE_INTEGER):(this.gt(e.mapValue,n),this.Rt(n)):"arrayValue"in e?(this.yt(e.arrayValue,n),this.Rt(n)):tn()}At(e,n){this.Tt(n,25),this.wt(e,n)}wt(e,n){n.dt(e)}gt(e,n){const o=e.fields||{};this.Tt(n,55);for(const u of Object.keys(o))this.At(u,n),this.Pt(o[u],n)}yt(e,n){const o=e.values||[];this.Tt(n,50);for(const u of o)this.Pt(u,n)}ft(e,n){this.Tt(n,37),$t.fromName(e).path.forEach(o=>{this.Tt(n,60),this.wt(o,n)})}Tt(e,n){e.Et(n)}Rt(e){e.Et(2)}}function Xp(i){if(0===i)return 8;let e=0;return!(i>>4)&&(e+=4,i<<=4),!(i>>6)&&(e+=2,i<<=2),!(i>>7)&&(e+=1),e}function Ll(i){const e=64-function(o){let u=0;for(let h=0;h<8;++h){const v=Xp(255&o[h]);if(u+=v,8!==v)break}return u}(i);return Math.ceil(e/8)}Ud.St=new Ud;class cf{constructor(){this.buffer=new Uint8Array(1024),this.position=0}bt(e){const n=e[Symbol.iterator]();let o=n.next();for(;!o.done;)this.Dt(o.value),o=n.next();this.Ct()}vt(e){const n=e[Symbol.iterator]();let o=n.next();for(;!o.done;)this.Ft(o.value),o=n.next();this.Mt()}xt(e){for(const n of e){const o=n.charCodeAt(0);if(o<128)this.Dt(o);else if(o<2048)this.Dt(960|o>>>6),this.Dt(128|63&o);else if(n<"\ud800"||"\udbff"<n)this.Dt(480|o>>>12),this.Dt(128|63&o>>>6),this.Dt(128|63&o);else{const u=n.codePointAt(0);this.Dt(240|u>>>18),this.Dt(128|63&u>>>12),this.Dt(128|63&u>>>6),this.Dt(128|63&u)}}this.Ct()}Ot(e){for(const n of e){const o=n.charCodeAt(0);if(o<128)this.Ft(o);else if(o<2048)this.Ft(960|o>>>6),this.Ft(128|63&o);else if(n<"\ud800"||"\udbff"<n)this.Ft(480|o>>>12),this.Ft(128|63&o>>>6),this.Ft(128|63&o);else{const u=n.codePointAt(0);this.Ft(240|u>>>18),this.Ft(128|63&u>>>12),this.Ft(128|63&u>>>6),this.Ft(128|63&u)}}this.Mt()}Nt(e){const n=this.Bt(e),o=Ll(n);this.Lt(1+o),this.buffer[this.position++]=255&o;for(let u=n.length-o;u<n.length;++u)this.buffer[this.position++]=255&n[u]}kt(e){const n=this.Bt(e),o=Ll(n);this.Lt(1+o),this.buffer[this.position++]=~(255&o);for(let u=n.length-o;u<n.length;++u)this.buffer[this.position++]=~(255&n[u])}qt(){this.Qt(255),this.Qt(255)}Kt(){this.$t(255),this.$t(255)}reset(){this.position=0}seed(e){this.Lt(e.length),this.buffer.set(e,this.position),this.position+=e.length}Ut(){return this.buffer.slice(0,this.position)}Bt(e){const n=function(h){const v=new DataView(new ArrayBuffer(8));return v.setFloat64(0,h,!1),new Uint8Array(v.buffer)}(e),o=0!=(128&n[0]);n[0]^=o?255:128;for(let u=1;u<n.length;++u)n[u]^=o?255:0;return n}Dt(e){const n=255&e;0===n?(this.Qt(0),this.Qt(255)):255===n?(this.Qt(255),this.Qt(0)):this.Qt(n)}Ft(e){const n=255&e;0===n?(this.$t(0),this.$t(255)):255===n?(this.$t(255),this.$t(0)):this.$t(e)}Ct(){this.Qt(0),this.Qt(1)}Mt(){this.$t(0),this.$t(1)}Qt(e){this.Lt(1),this.buffer[this.position++]=e}$t(e){this.Lt(1),this.buffer[this.position++]=~e}Lt(e){const n=e+this.position;if(n<=this.buffer.length)return;let o=2*this.buffer.length;o<n&&(o=n);const u=new Uint8Array(o);u.set(this.buffer),this.buffer=u}}class lv{constructor(e){this.Wt=e}Vt(e){this.Wt.bt(e)}dt(e){this.Wt.xt(e)}Et(e){this.Wt.Nt(e)}It(){this.Wt.qt()}}class Qy{constructor(e){this.Wt=e}Vt(e){this.Wt.vt(e)}dt(e){this.Wt.Ot(e)}Et(e){this.Wt.kt(e)}It(){this.Wt.Kt()}}class Xf{constructor(){this.Wt=new cf,this.Gt=new lv(this.Wt),this.zt=new Qy(this.Wt)}seed(e){this.Wt.seed(e)}jt(e){return 0===e?this.Gt:this.zt}Ut(){return this.Wt.Ut()}reset(){this.Wt.reset()}}class pd{constructor(e,n,o,u){this.indexId=e,this.documentKey=n,this.arrayValue=o,this.directionalValue=u}Ht(){const e=this.directionalValue.length,n=0===e||255===this.directionalValue[e-1]?e+1:e,o=new Uint8Array(n);return o.set(this.directionalValue,0),n!==e?o.set([0],this.directionalValue.length):++o[o.length-1],new pd(this.indexId,this.documentKey,this.arrayValue,o)}}function jd(i,e){let n=i.indexId-e.indexId;return 0!==n?n:(n=dv(i.arrayValue,e.arrayValue),0!==n?n:(n=dv(i.directionalValue,e.directionalValue),0!==n?n:$t.comparator(i.documentKey,e.documentKey)))}function dv(i,e){for(let n=0;n<i.length&&n<e.length;++n){const o=i[n]-e[n];if(0!==o)return o}return i.length-e.length}class eg{constructor(e){this.Jt=new oi((n,o)=>si.comparator(n.field,o.field)),this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Yt=e.orderBy,this.Zt=[];for(const n of e.filters){const o=n;o.isInequality()?this.Jt=this.Jt.add(o):this.Zt.push(o)}}get Xt(){return this.Jt.size>1}en(e){if(pn(e.collectionGroup===this.collectionId),this.Xt)return!1;const n=Aa(e);if(void 0!==n&&!this.tn(n))return!1;const o=Oo(e);let u=new Set,h=0,v=0;for(;h<o.length&&this.tn(o[h]);++h)u=u.add(o[h].fieldPath.canonicalString());if(h===o.length)return!0;if(this.Jt.size>0){const P=this.Jt.getIterator().getNext();if(!u.has(P.field.canonicalString())){const V=o[h];if(!this.nn(P,V)||!this.rn(this.Yt[v++],V))return!1}++h}for(;h<o.length;++h)if(v>=this.Yt.length||!this.rn(this.Yt[v++],o[h]))return!1;return!0}sn(){if(this.Xt)return null;let e=new oi(si.comparator);const n=[];for(const o of this.Zt)if(!o.field.isKeyField())if("array-contains"===o.op||"array-contains-any"===o.op)n.push(new eo(o.field,2));else{if(e.has(o.field))continue;e=e.add(o.field),n.push(new eo(o.field,0))}for(const o of this.Yt)o.field.isKeyField()||e.has(o.field)||(e=e.add(o.field),n.push(new eo(o.field,"asc"===o.dir?0:1)));return new Di(Di.UNKNOWN_ID,this.collectionId,n,Kc.empty())}tn(e){for(const n of this.Zt)if(this.nn(n,e))return!0;return!1}nn(e,n){return!(void 0===e||!e.field.isEqual(n.fieldPath))&&2===n.kind==("array-contains"===e.op||"array-contains-any"===e.op)}rn(e,n){return!!e.field.isEqual(n.fieldPath)&&(0===n.kind&&"asc"===e.dir||1===n.kind&&"desc"===e.dir)}}function Sm(i){var e,n;if(pn(i instanceof fr||i instanceof Pr),i instanceof fr){if(i instanceof gu){const u=(null===(n=null===(e=i.value.arrayValue)||void 0===e?void 0:e.values)||void 0===n?void 0:n.map(h=>fr.create(i.field,"==",h)))||[];return Pr.create(u,"or")}return i}const o=i.filters.map(u=>Sm(u));return Pr.create(o,i.op)}function tg(i){if(0===i.getFilters().length)return[];const e=Lc(Sm(i));return pn(ep(e)),ng(e)||rg(e)?[e]:e.getFilters()}function ng(i){return i instanceof fr}function rg(i){return i instanceof Pr&&xu(i)}function ep(i){return ng(i)||rg(i)||function(n){if(n instanceof Pr&&Sc(n)){for(const o of n.getFilters())if(!ng(o)&&!rg(o))return!1;return!0}return!1}(i)}function Lc(i){if(pn(i instanceof fr||i instanceof Pr),i instanceof fr)return i;if(1===i.filters.length)return Lc(i.filters[0]);const e=i.filters.map(o=>Lc(o));let n=Pr.create(e,i.op);return n=lf(n),ep(n)?n:(pn(n instanceof Pr),pn(rc(n)),pn(n.filters.length>1),n.filters.reduce((o,u)=>gd(o,u)))}function gd(i,e){let n;return pn(i instanceof fr||i instanceof Pr),pn(e instanceof fr||e instanceof Pr),n=i instanceof fr?e instanceof fr?Pr.create([i,e],"and"):ig(i,e):e instanceof fr?ig(e,i):function(u,h){if(pn(u.filters.length>0&&h.filters.length>0),rc(u)&&rc(h))return ku(u,h.getFilters());const v=Sc(u)?u:h,P=Sc(u)?h:u,V=v.filters.map(z=>gd(z,P));return Pr.create(V,"or")}(i,e),lf(n)}function ig(i,e){if(rc(e))return ku(e,i.getFilters());{const n=e.filters.map(o=>gd(i,o));return Pr.create(n,"or")}}function lf(i){if(pn(i instanceof fr||i instanceof Pr),i instanceof fr)return i;const e=i.getFilters();if(1===e.length)return lf(e[0]);if(lh(i))return i;const n=e.map(u=>lf(u)),o=[];return n.forEach(u=>{u instanceof fr?o.push(u):u instanceof Pr&&(u.op===i.op?o.push(...u.filters):o.push(u))}),1===o.length?o[0]:Pr.create(o,i.op)}class Rm{constructor(){this.on=new Nm}addToCollectionParentIndex(e,n){return this.on.add(n),k.resolve()}getCollectionParents(e,n){return k.resolve(this.on.getEntries(n))}addFieldIndex(e,n){return k.resolve()}deleteFieldIndex(e,n){return k.resolve()}deleteAllFieldIndexes(e){return k.resolve()}createTargetIndexes(e,n){return k.resolve()}getDocumentsMatchingTarget(e,n){return k.resolve(null)}getIndexType(e,n){return k.resolve(0)}getFieldIndexes(e,n){return k.resolve([])}getNextCollectionGroupToUpdate(e){return k.resolve(null)}getMinOffset(e,n){return k.resolve(to.min())}getMinOffsetFromCollectionGroup(e,n){return k.resolve(to.min())}updateCollectionGroup(e,n,o){return k.resolve()}updateIndexEntries(e,n){return k.resolve()}}class Nm{constructor(){this.index={}}add(e){const n=e.lastSegment(),o=e.popLast(),u=this.index[n]||new oi(Xn.comparator),h=!u.has(o);return this.index[n]=u.add(o),h}has(e){const n=e.lastSegment(),o=e.popLast(),u=this.index[n];return u&&u.has(o)}getEntries(e){return(this.index[e]||new oi(Xn.comparator)).toArray()}}const df=new Uint8Array(0);class Jy{constructor(e,n){this.user=e,this.databaseId=n,this._n=new Nm,this.an=new Ws(o=>Wa(o),(o,u)=>Oc(o,u)),this.uid=e.uid||""}addToCollectionParentIndex(e,n){if(!this._n.has(n)){const o=n.lastSegment(),u=n.popLast();e.addOnCommittedListener(()=>{this._n.add(n)});const h={collectionId:o,parent:Nr(u)};return tp(e).put(h)}return k.resolve()}getCollectionParents(e,n){const o=[],u=IDBKeyRange.bound([n,""],[bl(n),""],!1,!0);return tp(e).W(u).next(h=>{for(const v of h){if(v.collectionId!==n)break;o.push($s(v.parent))}return o})}addFieldIndex(e,n){const o=np(e),u={indexId:(P=n).indexId,collectionGroup:P.collectionGroup,fields:P.fields.map(V=>[V.fieldPath.canonicalString(),V.kind])};var P;delete u.indexId;const h=o.add(u);if(n.indexState){const v=hf(e);return h.next(P=>{v.put(Zp(P,this.user,n.indexState.sequenceNumber,n.indexState.offset))})}return h.next()}deleteFieldIndex(e,n){const o=np(e),u=hf(e),h=Vl(e);return o.delete(n.indexId).next(()=>u.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0))).next(()=>h.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){const n=np(e),o=Vl(e),u=hf(e);return n.H().next(()=>o.H()).next(()=>u.H())}createTargetIndexes(e,n){return k.forEach(this.un(n),o=>this.getIndexType(e,o).next(u=>{if(0===u||1===u){const h=new eg(o).sn();if(null!=h)return this.addFieldIndex(e,h)}}))}getDocumentsMatchingTarget(e,n){const o=Vl(e);let u=!0;const h=new Map;return k.forEach(this.un(n),v=>this.cn(e,v).next(P=>{u&&(u=!!P),h.set(v,P)})).next(()=>{if(u){let v=sr();const P=[];return k.forEach(h,(V,z)=>{var On;Et("IndexedDbIndexManager",`Using index ${On=V,`id=${On.indexId}|cg=${On.collectionGroup}|f=${On.fields.map(Mr=>`${Mr.fieldPath}:${Mr.kind}`).join(",")}`} to execute ${Wa(n)}`);const ee=function(On,Mr){const ui=Aa(Mr);if(void 0===ui)return null;for(const li of Pc(On,ui.fieldPath))switch(li.op){case"array-contains-any":return li.value.arrayValue.values||[];case"array-contains":return[li.value]}return null}(z,V),le=function(On,Mr){const ui=new Map;for(const li of Oo(Mr))for(const bo of Pc(On,li.fieldPath))switch(bo.op){case"==":case"in":ui.set(li.fieldPath.canonicalString(),bo.value);break;case"not-in":case"!=":return ui.set(li.fieldPath.canonicalString(),bo.value),Array.from(ui.values())}return null}(z,V),Ae=function(On,Mr){const ui=[];let li=!0;for(const bo of Oo(Mr)){const Il=0===bo.kind?Rd(On,bo.fieldPath,On.startAt):dh(On,bo.fieldPath,On.startAt);ui.push(Il.value),li&&(li=Il.inclusive)}return new pu(ui,li)}(z,V),Xe=function(On,Mr){const ui=[];let li=!0;for(const bo of Oo(Mr)){const Il=0===bo.kind?dh(On,bo.fieldPath,On.endAt):Rd(On,bo.fieldPath,On.endAt);ui.push(Il.value),li&&(li=Il.inclusive)}return new pu(ui,li)}(z,V),kt=this.ln(V,z,Ae),zt=this.ln(V,z,Xe),Wt=this.hn(V,z,le),xn=this.Pn(V.indexId,ee,kt,Ae.inclusive,zt,Xe.inclusive,Wt);return k.forEach(xn,Zn=>o.j(Zn,n.limit).next(On=>{On.forEach(Mr=>{const ui=$t.fromSegments(Mr.documentKey);v.has(ui)||(v=v.add(ui),P.push(ui))})}))}).next(()=>P)}return k.resolve(null)})}un(e){let n=this.an.get(e);return n||(n=0===e.filters.length?[e]:tg(Pr.create(e.filters,"and")).map(o=>Rl(e.path,e.collectionGroup,e.orderBy,o.getFilters(),e.limit,e.startAt,e.endAt)),this.an.set(e,n),n)}Pn(e,n,o,u,h,v,P){const V=(null!=n?n.length:1)*Math.max(o.length,h.length),z=V/(null!=n?n.length:1),ee=[];for(let le=0;le<V;++le){const Ae=n?this.In(n[le/z]):df,Xe=this.Tn(e,Ae,o[le%z],u),kt=this.En(e,Ae,h[le%z],v),zt=P.map(Wt=>this.Tn(e,Ae,Wt,!0));ee.push(...this.createRange(Xe,kt,zt))}return ee}Tn(e,n,o,u){const h=new pd(e,$t.empty(),n,o);return u?h:h.Ht()}En(e,n,o,u){const h=new pd(e,$t.empty(),n,o);return u?h.Ht():h}cn(e,n){const o=new eg(n),u=null!=n.collectionGroup?n.collectionGroup:n.path.lastSegment();return this.getFieldIndexes(e,u).next(h=>{let v=null;for(const P of h)o.en(P)&&(!v||P.fields.length>v.fields.length)&&(v=P);return v})}getIndexType(e,n){let o=2;const u=this.un(n);return k.forEach(u,h=>this.cn(e,h).next(v=>{v?0!==o&&v.fields.length<function(V){let z=new oi(si.comparator),ee=!1;for(const le of V.filters)for(const Ae of le.getFlattenedFilters())Ae.field.isKeyField()||("array-contains"===Ae.op||"array-contains-any"===Ae.op?ee=!0:z=z.add(Ae.field));for(const le of V.orderBy)le.field.isKeyField()||(z=z.add(le.field));return z.size+(ee?1:0)}(h)&&(o=1):o=0})).next(()=>null!==n.limit&&u.length>1&&2===o?1:o)}dn(e,n){const o=new Xf;for(const u of Oo(e)){const h=n.data.field(u.fieldPath);if(null==h)return null;const v=o.jt(u.kind);Ud.St.ht(h,v)}return o.Ut()}In(e){const n=new Xf;return Ud.St.ht(e,n.jt(0)),n.Ut()}An(e,n){const o=new Xf;return Ud.St.ht(Mu(this.databaseId,n),o.jt(function(h){const v=Oo(h);return 0===v.length?0:v[v.length-1].kind}(e))),o.Ut()}hn(e,n,o){if(null===o)return[];let u=[];u.push(new Xf);let h=0;for(const v of Oo(e)){const P=o[h++];for(const V of u)if(this.Rn(n,v.fieldPath)&&ro(P))u=this.Vn(u,v,P);else{const z=V.jt(v.kind);Ud.St.ht(P,z)}}return this.mn(u)}ln(e,n,o){return this.hn(e,n,o.position)}mn(e){const n=[];for(let o=0;o<e.length;++o)n[o]=e[o].Ut();return n}Vn(e,n,o){const u=[...e],h=[];for(const v of o.arrayValue.values||[])for(const P of u){const V=new Xf;V.seed(P.Ut()),Ud.St.ht(v,V.jt(n.kind)),h.push(V)}return h}Rn(e,n){return!!e.filters.find(o=>o instanceof fr&&o.field.isEqual(n)&&("in"===o.op||"not-in"===o.op))}getFieldIndexes(e,n){const o=np(e),u=hf(e);return(n?o.W("collectionGroupIndex",IDBKeyRange.bound(n,n)):o.W()).next(h=>{const v=[];return k.forEach(h,P=>u.get([P.indexId,this.uid]).next(V=>{v.push(function(ee,le){const Ae=le?new Kc(le.sequenceNumber,new to(Bd(le.readTime),new $t($s(le.documentKey)),le.largestBatchId)):Kc.empty(),Xe=ee.fields.map(([kt,zt])=>new eo(si.fromServerFormat(kt),zt));return new Di(ee.indexId,ee.collectionGroup,Xe,Ae)}(P,V))})).next(()=>v)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(n=>0===n.length?null:(n.sort((o,u)=>{const h=o.indexState.sequenceNumber-u.indexState.sequenceNumber;return 0!==h?h:jn(o.collectionGroup,u.collectionGroup)}),n[0].collectionGroup))}updateCollectionGroup(e,n,o){const u=np(e),h=hf(e);return this.fn(e).next(v=>u.W("collectionGroupIndex",IDBKeyRange.bound(n,n)).next(P=>k.forEach(P,V=>h.put(Zp(V.indexId,this.user,v,o)))))}updateIndexEntries(e,n){const o=new Map;return k.forEach(n,(u,h)=>{const v=o.get(u.collectionGroup);return(v?k.resolve(v):this.getFieldIndexes(e,u.collectionGroup)).next(P=>(o.set(u.collectionGroup,P),k.forEach(P,V=>this.gn(e,u,V).next(z=>{const ee=this.pn(h,V);return z.isEqual(ee)?k.resolve():this.yn(e,h,V,z,ee)}))))})}wn(e,n,o,u){return Vl(e).put({indexId:u.indexId,uid:this.uid,arrayValue:u.arrayValue,directionalValue:u.directionalValue,orderedDocumentKey:this.An(o,n.key),documentKey:n.key.path.toArray()})}Sn(e,n,o,u){return Vl(e).delete([u.indexId,this.uid,u.arrayValue,u.directionalValue,this.An(o,n.key),n.key.path.toArray()])}gn(e,n,o){const u=Vl(e);let h=new oi(jd);return u.Y({index:"documentKeyIndex",range:IDBKeyRange.only([o.indexId,this.uid,this.An(o,n)])},(v,P)=>{h=h.add(new pd(o.indexId,n,P.arrayValue,P.directionalValue))}).next(()=>h)}pn(e,n){let o=new oi(jd);const u=this.dn(n,e);if(null==u)return o;const h=Aa(n);if(null!=h){const v=e.data.field(h.fieldPath);if(ro(v))for(const P of v.arrayValue.values||[])o=o.add(new pd(n.indexId,e.key,this.In(P),u))}else o=o.add(new pd(n.indexId,e.key,df,u));return o}yn(e,n,o,u,h){Et("IndexedDbIndexManager","Updating index entries for document '%s'",n.key);const v=[];return function(V,z,ee,le,Ae){const Xe=V.getIterator(),kt=z.getIterator();let zt=wc(Xe),Wt=wc(kt);for(;zt||Wt;){let xn=!1,Zn=!1;if(zt&&Wt){const On=ee(zt,Wt);On<0?Zn=!0:On>0&&(xn=!0)}else null!=zt?Zn=!0:xn=!0;xn?(le(Wt),Wt=wc(kt)):Zn?(Ae(zt),zt=wc(Xe)):(zt=wc(Xe),Wt=wc(kt))}}(u,h,jd,P=>{v.push(this.wn(e,n,o,P))},P=>{v.push(this.Sn(e,n,o,P))}),k.waitFor(v)}fn(e){let n=1;return hf(e).Y({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(o,u,h)=>{h.done(),n=u.sequenceNumber+1}).next(()=>n)}createRange(e,n,o){o=o.sort((v,P)=>jd(v,P)).filter((v,P,V)=>!P||0!==jd(v,V[P-1]));const u=[];u.push(e);for(const v of o){const P=jd(v,e),V=jd(v,n);if(0===P)u[0]=e.Ht();else if(P>0&&V<0)u.push(v),u.push(v.Ht());else if(V>0)break}u.push(n);const h=[];for(let v=0;v<u.length;v+=2){if(this.bn(u[v],u[v+1]))return[];h.push(IDBKeyRange.bound([u[v].indexId,this.uid,u[v].arrayValue,u[v].directionalValue,df,[]],[u[v+1].indexId,this.uid,u[v+1].arrayValue,u[v+1].directionalValue,df,[]]))}return h}bn(e,n){return jd(e,n)>0}getMinOffsetFromCollectionGroup(e,n){return this.getFieldIndexes(e,n).next(sg)}getMinOffset(e,n){return k.mapArray(this.un(n),o=>this.cn(e,o).next(u=>u||tn())).next(sg)}}function tp(i){return Qi(i,"collectionParents")}function Vl(i){return Qi(i,"indexEntries")}function np(i){return Qi(i,"indexConfiguration")}function hf(i){return Qi(i,"indexState")}function sg(i){pn(0!==i.length);let e=i[0].indexState.offset,n=e.largestBatchId;for(let o=1;o<i.length;o++){const u=i[o].indexState.offset;Yc(u,e)<0&&(e=u),n<u.largestBatchId&&(n=u.largestBatchId)}return new to(e.readTime,e.documentKey,n)}const Om={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Pa{constructor(e,n,o){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=o}static withCacheSize(e){return new Pa(e,Pa.DEFAULT_COLLECTION_PERCENTILE,Pa.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function rp(i,e,n){const o=i.store("mutations"),u=i.store("documentMutations"),h=[],v=IDBKeyRange.only(n.batchId);let P=0;const V=o.Y({range:v},(ee,le,Ae)=>(P++,Ae.delete()));h.push(V.next(()=>{pn(1===P)}));const z=[];for(const ee of n.mutations){const le=uu(e,ee.key.path,n.batchId);h.push(u.delete(le)),z.push(ee.key)}return k.waitFor(h).next(()=>z)}function ff(i){if(!i)return 0;let e;if(i.document)e=i.document;else if(i.unknownDocument)e=i.unknownDocument;else{if(!i.noDocument)throw tn();e=i.noDocument}return JSON.stringify(e).length}Pa.DEFAULT_COLLECTION_PERCENTILE=10,Pa.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Pa.DEFAULT=new Pa(41943040,Pa.DEFAULT_COLLECTION_PERCENTILE,Pa.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Pa.DISABLED=new Pa(-1,0,0);class Th{constructor(e,n,o,u){this.userId=e,this.serializer=n,this.indexManager=o,this.referenceDelegate=u,this.Dn={}}static ct(e,n,o,u){pn(""!==e.uid);const h=e.isAuthenticated()?e.uid:"";return new Th(h,n,o,u)}checkEmpty(e){let n=!0;const o=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Bl(e).Y({index:"userMutationsIndex",range:o},(u,h,v)=>{n=!1,v.done()}).next(()=>n)}addMutationBatch(e,n,o,u){const h=d(e),v=Bl(e);return v.add({}).next(P=>{pn("number"==typeof P);const V=new ul(P,n,o,u),z=function(Xe,kt,zt){const Wt=zt.baseMutations.map(Zn=>fd(Xe.ut,Zn)),xn=zt.mutations.map(Zn=>fd(Xe.ut,Zn));return{userId:kt,batchId:zt.batchId,localWriteTimeMs:zt.localWriteTime.toMillis(),baseMutations:Wt,mutations:xn}}(this.serializer,this.userId,V),ee=[];let le=new oi((Ae,Xe)=>jn(Ae.canonicalString(),Xe.canonicalString()));for(const Ae of u){const Xe=uu(this.userId,Ae.key.path,P);le=le.add(Ae.key.path.popLast()),ee.push(v.put(z)),ee.push(h.put(Xe,Su))}return le.forEach(Ae=>{ee.push(this.indexManager.addToCollectionParentIndex(e,Ae))}),e.addOnCommittedListener(()=>{this.Dn[P]=V.keys()}),k.waitFor(ee).next(()=>V)})}lookupMutationBatch(e,n){return Bl(e).get(n).next(o=>o?(pn(o.userId===this.userId),kl(this.serializer,o)):null)}Cn(e,n){return this.Dn[n]?k.resolve(this.Dn[n]):this.lookupMutationBatch(e,n).next(o=>{if(o){const u=o.keys();return this.Dn[n]=u,u}return null})}getNextMutationBatchAfterBatchId(e,n){const o=n+1,u=IDBKeyRange.lowerBound([this.userId,o]);let h=null;return Bl(e).Y({index:"userMutationsIndex",range:u},(v,P,V)=>{P.userId===this.userId&&(pn(P.batchId>=o),h=kl(this.serializer,P)),V.done()}).next(()=>h)}getHighestUnacknowledgedBatchId(e){const n=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let o=-1;return Bl(e).Y({index:"userMutationsIndex",range:n,reverse:!0},(u,h,v)=>{o=h.batchId,v.done()}).next(()=>o)}getAllMutationBatches(e){const n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Bl(e).W("userMutationsIndex",n).next(o=>o.map(u=>kl(this.serializer,u)))}getAllMutationBatchesAffectingDocumentKey(e,n){const o=qu(this.userId,n.path),u=IDBKeyRange.lowerBound(o),h=[];return d(e).Y({range:u},(v,P,V)=>{const[z,ee,le]=v,Ae=$s(ee);if(z===this.userId&&n.path.isEqual(Ae))return Bl(e).get(le).next(Xe=>{if(!Xe)throw tn();pn(Xe.userId===this.userId),h.push(kl(this.serializer,Xe))});V.done()}).next(()=>h)}getAllMutationBatchesAffectingDocumentKeys(e,n){let o=new oi(jn);const u=[];return n.forEach(h=>{const v=qu(this.userId,h.path),P=IDBKeyRange.lowerBound(v),V=d(e).Y({range:P},(z,ee,le)=>{const[Ae,Xe,kt]=z,zt=$s(Xe);Ae===this.userId&&h.path.isEqual(zt)?o=o.add(kt):le.done()});u.push(V)}),k.waitFor(u).next(()=>this.vn(e,o))}getAllMutationBatchesAffectingQuery(e,n){const o=n.path,u=o.length+1,h=qu(this.userId,o),v=IDBKeyRange.lowerBound(h);let P=new oi(jn);return d(e).Y({range:v},(V,z,ee)=>{const[le,Ae,Xe]=V,kt=$s(Ae);le===this.userId&&o.isPrefixOf(kt)?kt.length===u&&(P=P.add(Xe)):ee.done()}).next(()=>this.vn(e,P))}vn(e,n){const o=[],u=[];return n.forEach(h=>{u.push(Bl(e).get(h).next(v=>{if(null===v)throw tn();pn(v.userId===this.userId),o.push(kl(this.serializer,v))}))}),k.waitFor(u).next(()=>o)}removeMutationBatch(e,n){return rp(e.ae,this.userId,n).next(o=>(e.addOnCommittedListener(()=>{this.Fn(n.batchId)}),k.forEach(o,u=>this.referenceDelegate.markPotentiallyOrphaned(e,u))))}Fn(e){delete this.Dn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(n=>{if(!n)return k.resolve();const o=IDBKeyRange.lowerBound([this.userId]),u=[];return d(e).Y({range:o},(h,v,P)=>{if(h[0]===this.userId){const V=$s(h[1]);u.push(V)}else P.done()}).next(()=>{pn(0===u.length)})})}containsKey(e,n){return bh(e,this.userId,n)}Mn(e){return D(e).get(this.userId).next(n=>n||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function bh(i,e,n){const o=qu(e,n.path),u=o[1],h=IDBKeyRange.lowerBound(o);let v=!1;return d(i).Y({range:h,J:!0},(P,V,z)=>{const[ee,le,Ae]=P;ee===e&&le===u&&(v=!0),z.done()}).next(()=>v)}function Bl(i){return Qi(i,"mutations")}function d(i){return Qi(i,"documentMutations")}function D(i){return Qi(i,"mutationQueues")}class c{constructor(e){this.xn=e}next(){return this.xn+=2,this.xn}static On(){return new c(0)}static Nn(){return new c(-1)}}class p{constructor(e,n){this.referenceDelegate=e,this.serializer=n}allocateTargetId(e){return this.Bn(e).next(n=>{const o=new c(n.highestTargetId);return n.highestTargetId=o.next(),this.Ln(e,n).next(()=>n.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Bn(e).next(n=>rn.fromTimestamp(new Rr(n.lastRemoteSnapshotVersion.seconds,n.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Bn(e).next(n=>n.highestListenSequenceNumber)}setTargetsMetadata(e,n,o){return this.Bn(e).next(u=>(u.highestListenSequenceNumber=n,o&&(u.lastRemoteSnapshotVersion=o.toTimestamp()),n>u.highestListenSequenceNumber&&(u.highestListenSequenceNumber=n),this.Ln(e,u)))}addTargetData(e,n){return this.kn(e,n).next(()=>this.Bn(e).next(o=>(o.targetCount+=1,this.qn(n,o),this.Ln(e,o))))}updateTargetData(e,n){return this.kn(e,n)}removeTargetData(e,n){return this.removeMatchingKeysForTargetId(e,n.targetId).next(()=>w(e).delete(n.targetId)).next(()=>this.Bn(e)).next(o=>(pn(o.targetCount>0),o.targetCount-=1,this.Ln(e,o)))}removeTargets(e,n,o){let u=0;const h=[];return w(e).Y((v,P)=>{const V=rf(P);V.sequenceNumber<=n&&null===o.get(V.targetId)&&(u++,h.push(this.removeTargetData(e,V)))}).next(()=>k.waitFor(h)).next(()=>u)}forEachTarget(e,n){return w(e).Y((o,u)=>{const h=rf(u);n(h)})}Bn(e){return j(e).get("targetGlobalKey").next(n=>(pn(null!==n),n))}Ln(e,n){return j(e).put("targetGlobalKey",n)}kn(e,n){return w(e).put(Fl(this.serializer,n))}qn(e,n){let o=!1;return e.targetId>n.highestTargetId&&(n.highestTargetId=e.targetId,o=!0),e.sequenceNumber>n.highestListenSequenceNumber&&(n.highestListenSequenceNumber=e.sequenceNumber,o=!0),o}getTargetCount(e){return this.Bn(e).next(n=>n.targetCount)}getTargetData(e,n){const o=Wa(n),u=IDBKeyRange.bound([o,Number.NEGATIVE_INFINITY],[o,Number.POSITIVE_INFINITY]);let h=null;return w(e).Y({range:u,index:"queryTargetsIndex"},(v,P,V)=>{const z=rf(P);Oc(n,z.target)&&(h=z,V.done())}).next(()=>h)}addMatchingKeys(e,n,o){const u=[],h=Y(e);return n.forEach(v=>{const P=Nr(v.path);u.push(h.put({targetId:o,path:P})),u.push(this.referenceDelegate.addReference(e,o,v))}),k.waitFor(u)}removeMatchingKeys(e,n,o){const u=Y(e);return k.forEach(n,h=>{const v=Nr(h.path);return k.waitFor([u.delete([o,v]),this.referenceDelegate.removeReference(e,o,h)])})}removeMatchingKeysForTargetId(e,n){const o=Y(e),u=IDBKeyRange.bound([n],[n+1],!1,!0);return o.delete(u)}getMatchingKeysForTargetId(e,n){const o=IDBKeyRange.bound([n],[n+1],!1,!0),u=Y(e);let h=sr();return u.Y({range:o,J:!0},(v,P,V)=>{const z=$s(v[1]),ee=new $t(z);h=h.add(ee)}).next(()=>h)}containsKey(e,n){const o=Nr(n.path),u=IDBKeyRange.bound([o],[bl(o)],!1,!0);let h=0;return Y(e).Y({index:"documentTargetsIndex",J:!0,range:u},([v,P],V,z)=>{0!==v&&(h++,z.done())}).next(()=>h>0)}_t(e,n){return w(e).get(n).next(o=>o?rf(o):null)}}function w(i){return Qi(i,"targets")}function j(i){return Qi(i,"targetGlobal")}function Y(i){return Qi(i,"targetDocuments")}function Ie([i,e],[n,o]){const u=jn(i,n);return 0===u?jn(e,o):u}class Fe{constructor(e){this.Qn=e,this.buffer=new oi(Ie),this.Kn=0}$n(){return++this.Kn}Un(e){const n=[e,this.$n()];if(this.buffer.size<this.Qn)this.buffer=this.buffer.add(n);else{const o=this.buffer.last();Ie(n,o)<0&&(this.buffer=this.buffer.delete(o).add(n))}}get maxValue(){return this.buffer.last()[0]}}class nt{constructor(e,n,o){this.garbageCollector=e,this.asyncQueue=n,this.localStore=o,this.Wn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Gn(6e4)}stop(){this.Wn&&(this.Wn.cancel(),this.Wn=null)}get started(){return null!==this.Wn}Gn(e){var n=this;Et("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Wn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,Ve.Z)(function*(){n.Wn=null;try{yield n.localStore.collectGarbage(n.garbageCollector)}catch(o){Ut(o)?Et("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",o):yield A(o)}yield n.Gn(3e5)}))}}class tt{constructor(e,n){this.zn=e,this.params=n}calculateTargetCount(e,n){return this.zn.jn(e).next(o=>Math.floor(n/100*o))}nthSequenceNumber(e,n){if(0===n)return k.resolve(Zi._e);const o=new Fe(n);return this.zn.forEachTarget(e,u=>o.Un(u.sequenceNumber)).next(()=>this.zn.Hn(e,u=>o.Un(u))).next(()=>o.maxValue)}removeTargets(e,n,o){return this.zn.removeTargets(e,n,o)}removeOrphanedDocuments(e,n){return this.zn.removeOrphanedDocuments(e,n)}collect(e,n){return-1===this.params.cacheSizeCollectionThreshold?(Et("LruGarbageCollector","Garbage collection skipped; disabled"),k.resolve(Om)):this.getCacheSize(e).next(o=>o<this.params.cacheSizeCollectionThreshold?(Et("LruGarbageCollector",`Garbage collection skipped; Cache size ${o} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Om):this.Jn(e,n))}getCacheSize(e){return this.zn.getCacheSize(e)}Jn(e,n){let o,u,h,v,P,V,z;const ee=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(le=>(le>this.params.maximumSequenceNumbersToCollect?(Et("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${le}`),u=this.params.maximumSequenceNumbersToCollect):u=le,v=Date.now(),this.nthSequenceNumber(e,u))).next(le=>(o=le,P=Date.now(),this.removeTargets(e,o,n))).next(le=>(h=le,V=Date.now(),this.removeOrphanedDocuments(e,o))).next(le=>(z=Date.now(),Du()<=Ne.in.DEBUG&&Et("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${v-ee}ms\n\tDetermined least recently used ${u} in `+(P-v)+`ms\n\tRemoved ${h} targets in `+(V-P)+`ms\n\tRemoved ${le} documents in `+(z-V)+`ms\nTotal Duration: ${z-ee}ms`),k.resolve({didRun:!0,sequenceNumbersCollected:u,targetsRemoved:h,documentsRemoved:le})))}}class Nt{constructor(e,n){this.db=e,this.garbageCollector=function Ht(i,e){return new tt(i,e)}(this,n)}jn(e){const n=this.Yn(e);return this.db.getTargetCache().getTargetCount(e).next(o=>n.next(u=>o+u))}Yn(e){let n=0;return this.Hn(e,o=>{n++}).next(()=>n)}forEachTarget(e,n){return this.db.getTargetCache().forEachTarget(e,n)}Hn(e,n){return this.Zn(e,(o,u)=>n(u))}addReference(e,n,o){return Vt(e,o)}removeReference(e,n,o){return Vt(e,o)}removeTargets(e,n,o){return this.db.getTargetCache().removeTargets(e,n,o)}markPotentiallyOrphaned(e,n){return Vt(e,n)}Xn(e,n){return function(u,h){let v=!1;return D(u).Z(P=>bh(u,P,h).next(V=>(V&&(v=!0),k.resolve(!V)))).next(()=>v)}(e,n)}removeOrphanedDocuments(e,n){const o=this.db.getRemoteDocumentCache().newChangeBuffer(),u=[];let h=0;return this.Zn(e,(v,P)=>{if(P<=n){const V=this.Xn(e,v).next(z=>{if(!z)return h++,o.getEntry(e,v).next(()=>(o.removeEntry(v,rn.min()),Y(e).delete([0,Nr(v.path)])))});u.push(V)}}).next(()=>k.waitFor(u)).next(()=>o.apply(e)).next(()=>h)}removeTarget(e,n){const o=n.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,o)}updateLimboDocument(e,n){return Vt(e,n)}Zn(e,n){const o=Y(e);let u,h=Zi._e;return o.Y({index:"documentTargetsIndex"},([v,P],{path:V,sequenceNumber:z})=>{0===v?(h!==Zi._e&&n(new $t($s(u)),h),h=z,u=V):h=Zi._e}).next(()=>{h!==Zi._e&&n(new $t($s(u)),h)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Vt(i,e){return Y(i).put((u=i.currentSequenceNumber,{targetId:0,path:Nr(e.path),sequenceNumber:u}));var u}class Gn{constructor(){this.changes=new Ws(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Jn.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const o=this.changes.get(n);return void 0!==o?k.resolve(o):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class tr{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,n,o){return ai(e).put(o)}removeEntry(e,n,o){return ai(e).delete(function(h,v){const P=h.path.toArray();return[P.slice(0,P.length-2),P[P.length-2],Jf(v),P[P.length-1]]}(n,o))}updateMetadata(e,n){return this.getMetadata(e).next(o=>(o.byteSize+=n,this.er(e,o)))}getEntry(e,n){let o=Jn.newInvalidDocument(n);return ai(e).Y({index:"documentKeyIndex",range:IDBKeyRange.only(gr(n))},(u,h)=>{o=this.tr(n,h)}).next(()=>o)}nr(e,n){let o={size:0,document:Jn.newInvalidDocument(n)};return ai(e).Y({index:"documentKeyIndex",range:IDBKeyRange.only(gr(n))},(u,h)=>{o={document:this.tr(n,h),size:ff(h)}}).next(()=>o)}getEntries(e,n){let o=yo();return this.rr(e,n,(u,h)=>{const v=this.tr(u,h);o=o.insert(u,v)}).next(()=>o)}ir(e,n){let o=yo(),u=new Br($t.comparator);return this.rr(e,n,(h,v)=>{const P=this.tr(h,v);o=o.insert(h,P),u=u.insert(h,ff(v))}).next(()=>({documents:o,sr:u}))}rr(e,n,o){if(n.isEmpty())return k.resolve();let u=new oi(ni);n.forEach(V=>u=u.add(V));const h=IDBKeyRange.bound(gr(u.first()),gr(u.last())),v=u.getIterator();let P=v.getNext();return ai(e).Y({index:"documentKeyIndex",range:h},(V,z,ee)=>{const le=$t.fromSegments([...z.prefixPath,z.collectionGroup,z.documentId]);for(;P&&ni(P,le)<0;)o(P,null),P=v.getNext();P&&P.isEqual(le)&&(o(P,z),P=v.hasNext()?v.getNext():null),P?ee.U(gr(P)):ee.done()}).next(()=>{for(;P;)o(P,null),P=v.hasNext()?v.getNext():null})}getDocumentsMatchingQuery(e,n,o,u,h){const v=n.path,P=[v.popLast().toArray(),v.lastSegment(),Jf(o.readTime),o.documentKey.path.isEmpty()?"":o.documentKey.path.lastSegment()],V=[v.popLast().toArray(),v.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return ai(e).W(IDBKeyRange.bound(P,V,!0)).next(z=>{h?.incrementDocumentReadCount(z.length);let ee=yo();for(const le of z){const Ae=this.tr($t.fromSegments(le.prefixPath.concat(le.collectionGroup,le.documentId)),le);Ae.isFoundDocument()&&(ln(n,Ae)||u.has(Ae.key))&&(ee=ee.insert(Ae.key,Ae))}return ee})}getAllFromCollectionGroup(e,n,o,u){let h=yo();const v=Wr(n,o),P=Wr(n,to.max());return ai(e).Y({index:"collectionGroupIndex",range:IDBKeyRange.bound(v,P,!0)},(V,z,ee)=>{const le=this.tr($t.fromSegments(z.prefixPath.concat(z.collectionGroup,z.documentId)),z);h=h.insert(le.key,le),h.size===u&&ee.done()}).next(()=>h)}newChangeBuffer(e){return new kr(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(n=>n.byteSize)}getMetadata(e){return br(e).get("remoteDocumentGlobalKey").next(n=>(pn(!!n),n))}er(e,n){return br(e).put("remoteDocumentGlobalKey",n)}tr(e,n){if(n){const o=function yh(i,e){let n;if(e.document)n=ef(i.ut,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const o=$t.fromSegments(e.noDocument.path),u=Bd(e.noDocument.readTime);n=Jn.newNoDocument(o,u),e.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!e.unknownDocument)return tn();{const o=$t.fromSegments(e.unknownDocument.path),u=Bd(e.unknownDocument.version);n=Jn.newUnknownDocument(o,u)}}return e.readTime&&n.setReadTime(function(u){const h=new Rr(u[0],u[1]);return rn.fromTimestamp(h)}(e.readTime)),n}(this.serializer,n);if(!o.isNoDocument()||!o.version.isEqual(rn.min()))return o}return Jn.newInvalidDocument(e)}}function wn(i){return new tr(i)}class kr extends Gn{constructor(e,n){super(),this._r=e,this.trackRemovals=n,this.ar=new Ws(o=>o.toString(),(o,u)=>o.isEqual(u))}applyChanges(e){const n=[];let o=0,u=new oi((h,v)=>jn(h.canonicalString(),v.canonicalString()));return this.changes.forEach((h,v)=>{const P=this.ar.get(h);if(n.push(this._r.removeEntry(e,h,P.readTime)),v.isValidDocument()){const V=Cm(this._r.serializer,v);u=u.add(h.path.popLast());const z=ff(V);o+=z-P.size,n.push(this._r.addEntry(e,h,V))}else if(o-=P.size,this.trackRemovals){const V=Cm(this._r.serializer,v.convertToNoDocument(rn.min()));n.push(this._r.addEntry(e,h,V))}}),u.forEach(h=>{n.push(this._r.indexManager.addToCollectionParentIndex(e,h))}),n.push(this._r.updateMetadata(e,o)),k.waitFor(n)}getFromCache(e,n){return this._r.nr(e,n).next(o=>(this.ar.set(n,{size:o.size,readTime:o.document.readTime}),o.document))}getAllFromCache(e,n){return this._r.ir(e,n).next(({documents:o,sr:u})=>(u.forEach((h,v)=>{this.ar.set(h,{size:v,readTime:o.get(h).readTime})}),o))}}function br(i){return Qi(i,"remoteDocumentGlobal")}function ai(i){return Qi(i,"remoteDocumentsV14")}function gr(i){const e=i.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function Wr(i,e){const n=e.documentKey.path.toArray();return[i,Jf(e.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function ni(i,e){const n=i.path.toArray(),o=e.path.toArray();let u=0;for(let h=0;h<n.length-2&&h<o.length-2;++h)if(u=jn(n[h],o[h]),u)return u;return u=jn(n.length,o.length),u||(u=jn(n[n.length-2],o[o.length-2]),u||jn(n[n.length-1],o[o.length-1]))}class Li{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}class Ji{constructor(e,n,o,u){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=o,this.indexManager=u}getDocument(e,n){let o=null;return this.documentOverlayCache.getOverlay(e,n).next(u=>(o=u,this.remoteDocumentCache.getEntry(e,n))).next(u=>(null!==o&&xd(o.mutation,u,Ko.empty(),Rr.now()),u))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(o=>this.getLocalViewOfDocuments(e,o,sr()).next(()=>o))}getLocalViewOfDocuments(e,n,o=sr()){const u=Io();return this.populateOverlays(e,u,n).next(()=>this.computeViews(e,n,u,o).next(h=>{let v=zr();return h.forEach((P,V)=>{v=v.insert(P,V.overlayedDocument)}),v}))}getOverlayedDocuments(e,n){const o=Io();return this.populateOverlays(e,o,n).next(()=>this.computeViews(e,n,o,sr()))}populateOverlays(e,n,o){const u=[];return o.forEach(h=>{n.has(h)||u.push(h)}),this.documentOverlayCache.getOverlays(e,u).next(h=>{h.forEach((v,P)=>{n.set(v,P)})})}computeViews(e,n,o,u){let h=yo();const v=Fu(),P=Fu();return n.forEach((V,z)=>{const ee=o.get(z.key);u.has(z.key)&&(void 0===ee||ee.mutation instanceof vu)?h=h.insert(z.key,z):void 0!==ee?(v.set(z.key,ee.mutation.getFieldMask()),xd(ee.mutation,z,ee.mutation.getFieldMask(),Rr.now())):v.set(z.key,Ko.empty())}),this.recalculateAndSaveOverlays(e,h).next(V=>(V.forEach((z,ee)=>v.set(z,ee)),n.forEach((z,ee)=>{var le;return P.set(z,new Li(ee,null!==(le=v.get(z))&&void 0!==le?le:null))}),P))}recalculateAndSaveOverlays(e,n){const o=Fu();let u=new Br((v,P)=>v-P),h=sr();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(v=>{for(const P of v)P.keys().forEach(V=>{const z=n.get(V);if(null===z)return;let ee=o.get(V)||Ko.empty();ee=P.applyToLocalView(z,ee),o.set(V,ee);const le=(u.get(P.batchId)||sr()).add(V);u=u.insert(P.batchId,le)})}).next(()=>{const v=[],P=u.getReverseIterator();for(;P.hasNext();){const V=P.getNext(),z=V.key,ee=V.value,le=Nl();ee.forEach(Ae=>{if(!h.has(Ae)){const Xe=Md(n.get(Ae),o.get(Ae));null!==Xe&&le.set(Ae,Xe),h=h.add(Ae)}}),v.push(this.documentOverlayCache.saveOverlays(e,z,le))}return k.waitFor(v)}).next(()=>o)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(o=>this.recalculateAndSaveOverlays(e,o))}getDocumentsMatchingQuery(e,n,o,u){return $t.isDocumentKey((v=n).path)&&null===v.collectionGroup&&0===v.filters.length?this.getDocumentsMatchingDocumentQuery(e,n.path):N(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,o,u):this.getDocumentsMatchingCollectionQuery(e,n,o,u);var v}getNextDocuments(e,n,o,u){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,o,u).next(h=>{const v=u-h.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,o.largestBatchId,u-h.size):k.resolve(Io());let P=-1,V=h;return v.next(z=>k.forEach(z,(ee,le)=>(P<le.largestBatchId&&(P=le.largestBatchId),h.get(ee)?k.resolve():this.remoteDocumentCache.getEntry(e,ee).next(Ae=>{V=V.insert(ee,Ae)}))).next(()=>this.populateOverlays(e,z,h)).next(()=>this.computeViews(e,V,z,sr())).next(ee=>({batchId:P,changes:sc(ee)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new $t(n)).next(o=>{let u=zr();return o.isFoundDocument()&&(u=u.insert(o.key,o)),u})}getDocumentsMatchingCollectionGroupQuery(e,n,o,u){const h=n.collectionGroup;let v=zr();return this.indexManager.getCollectionParents(e,h).next(P=>k.forEach(P,V=>{const z=(le=n,Ae=V.child(h),new Os(Ae,null,le.explicitOrderBy.slice(),le.filters.slice(),le.limit,le.limitType,le.startAt,le.endAt));var le,Ae;return this.getDocumentsMatchingCollectionQuery(e,z,o,u).next(ee=>{ee.forEach((le,Ae)=>{v=v.insert(le,Ae)})})}).next(()=>v))}getDocumentsMatchingCollectionQuery(e,n,o,u){let h;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,o.largestBatchId).next(v=>(h=v,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,o,h,u))).next(v=>{h.forEach((V,z)=>{const ee=z.getKey();null===v.get(ee)&&(v=v.insert(ee,Jn.newInvalidDocument(ee)))});let P=zr();return v.forEach((V,z)=>{const ee=h.get(V);void 0!==ee&&xd(ee.mutation,z,Ko.empty(),Rr.now()),ln(n,z)&&(P=P.insert(V,z))}),P})}}class io{constructor(e){this.serializer=e,this.ur=new Map,this.cr=new Map}getBundleMetadata(e,n){return k.resolve(this.ur.get(n))}saveBundleMetadata(e,n){return this.ur.set(n.id,{id:(u=n).id,version:u.version,createTime:ls(u.createTime)}),k.resolve();var u}getNamedQuery(e,n){return k.resolve(this.cr.get(n))}saveNamedQuery(e,n){return this.cr.set(n.name,{name:(u=n).name,query:Eh(u.bundledQuery),readTime:ls(u.readTime)}),k.resolve();var u}}class To{constructor(){this.overlays=new Br($t.comparator),this.lr=new Map}getOverlay(e,n){return k.resolve(this.overlays.get(n))}getOverlays(e,n){const o=Io();return k.forEach(n,u=>this.getOverlay(e,u).next(h=>{null!==h&&o.set(u,h)})).next(()=>o)}saveOverlays(e,n,o){return o.forEach((u,h)=>{this.lt(e,n,h)}),k.resolve()}removeOverlaysForBatchId(e,n,o){const u=this.lr.get(o);return void 0!==u&&(u.forEach(h=>this.overlays=this.overlays.remove(h)),this.lr.delete(o)),k.resolve()}getOverlaysForCollection(e,n,o){const u=Io(),h=n.length+1,v=new $t(n.child("")),P=this.overlays.getIteratorFrom(v);for(;P.hasNext();){const V=P.getNext().value,z=V.getKey();if(!n.isPrefixOf(z.path))break;z.path.length===h&&V.largestBatchId>o&&u.set(V.getKey(),V)}return k.resolve(u)}getOverlaysForCollectionGroup(e,n,o,u){let h=new Br((z,ee)=>z-ee);const v=this.overlays.getIterator();for(;v.hasNext();){const z=v.getNext().value;if(z.getKey().getCollectionGroup()===n&&z.largestBatchId>o){let ee=h.get(z.largestBatchId);null===ee&&(ee=Io(),h=h.insert(z.largestBatchId,ee)),ee.set(z.getKey(),z)}}const P=Io(),V=h.getIterator();for(;V.hasNext()&&(V.getNext().value.forEach((z,ee)=>P.set(z,ee)),!(P.size()>=u)););return k.resolve(P)}lt(e,n,o){const u=this.overlays.get(o.key);if(null!==u){const v=this.lr.get(u.largestBatchId).delete(o.key);this.lr.set(u.largestBatchId,v)}this.overlays=this.overlays.insert(o.key,new kd(n,o));let h=this.lr.get(n);void 0===h&&(h=sr(),this.lr.set(n,h)),this.lr.set(n,h.add(o.key))}}class so{constructor(){this.hr=new oi(Ri.Pr),this.Ir=new oi(Ri.Tr)}isEmpty(){return this.hr.isEmpty()}addReference(e,n){const o=new Ri(e,n);this.hr=this.hr.add(o),this.Ir=this.Ir.add(o)}Er(e,n){e.forEach(o=>this.addReference(o,n))}removeReference(e,n){this.dr(new Ri(e,n))}Ar(e,n){e.forEach(o=>this.removeReference(o,n))}Rr(e){const n=new $t(new Xn([])),o=new Ri(n,e),u=new Ri(n,e+1),h=[];return this.Ir.forEachInRange([o,u],v=>{this.dr(v),h.push(v.key)}),h}Vr(){this.hr.forEach(e=>this.dr(e))}dr(e){this.hr=this.hr.delete(e),this.Ir=this.Ir.delete(e)}mr(e){const n=new $t(new Xn([])),o=new Ri(n,e),u=new Ri(n,e+1);let h=sr();return this.Ir.forEachInRange([o,u],v=>{h=h.add(v.key)}),h}containsKey(e){const n=new Ri(e,0),o=this.hr.firstAfterOrEqual(n);return null!==o&&e.isEqual(o.key)}}class Ri{constructor(e,n){this.key=e,this.gr=n}static Pr(e,n){return $t.comparator(e.key,n.key)||jn(e.gr,n.gr)}static Tr(e,n){return jn(e.gr,n.gr)||$t.comparator(e.key,n.key)}}class pa{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.pr=1,this.yr=new oi(Ri.Pr)}checkEmpty(e){return k.resolve(0===this.mutationQueue.length)}addMutationBatch(e,n,o,u){const h=this.pr;this.pr++;const v=new ul(h,n,o,u);this.mutationQueue.push(v);for(const P of u)this.yr=this.yr.add(new Ri(P.key,h)),this.indexManager.addToCollectionParentIndex(e,P.key.path.popLast());return k.resolve(v)}lookupMutationBatch(e,n){return k.resolve(this.wr(n))}getNextMutationBatchAfterBatchId(e,n){const u=this.Sr(n+1),h=u<0?0:u;return k.resolve(this.mutationQueue.length>h?this.mutationQueue[h]:null)}getHighestUnacknowledgedBatchId(){return k.resolve(0===this.mutationQueue.length?-1:this.pr-1)}getAllMutationBatches(e){return k.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const o=new Ri(n,0),u=new Ri(n,Number.POSITIVE_INFINITY),h=[];return this.yr.forEachInRange([o,u],v=>{const P=this.wr(v.gr);h.push(P)}),k.resolve(h)}getAllMutationBatchesAffectingDocumentKeys(e,n){let o=new oi(jn);return n.forEach(u=>{const h=new Ri(u,0),v=new Ri(u,Number.POSITIVE_INFINITY);this.yr.forEachInRange([h,v],P=>{o=o.add(P.gr)})}),k.resolve(this.br(o))}getAllMutationBatchesAffectingQuery(e,n){const o=n.path,u=o.length+1;let h=o;$t.isDocumentKey(h)||(h=h.child(""));const v=new Ri(new $t(h),0);let P=new oi(jn);return this.yr.forEachWhile(V=>{const z=V.key.path;return!!o.isPrefixOf(z)&&(z.length===u&&(P=P.add(V.gr)),!0)},v),k.resolve(this.br(P))}br(e){const n=[];return e.forEach(o=>{const u=this.wr(o);null!==u&&n.push(u)}),n}removeMutationBatch(e,n){pn(0===this.Dr(n.batchId,"removed")),this.mutationQueue.shift();let o=this.yr;return k.forEach(n.mutations,u=>{const h=new Ri(u.key,n.batchId);return o=o.delete(h),this.referenceDelegate.markPotentiallyOrphaned(e,u.key)}).next(()=>{this.yr=o})}Fn(e){}containsKey(e,n){const o=new Ri(n,0),u=this.yr.firstAfterOrEqual(o);return k.resolve(n.isEqual(u&&u.key))}performConsistencyCheck(e){return k.resolve()}Dr(e,n){return this.Sr(e)}Sr(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}wr(e){const n=this.Sr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}class Iu{constructor(e){this.Cr=e,this.docs=new Br($t.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const o=n.key,u=this.docs.get(o),h=u?u.size:0,v=this.Cr(n);return this.docs=this.docs.insert(o,{document:n.mutableCopy(),size:v}),this.size+=v-h,this.indexManager.addToCollectionParentIndex(e,o.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const o=this.docs.get(n);return k.resolve(o?o.document.mutableCopy():Jn.newInvalidDocument(n))}getEntries(e,n){let o=yo();return n.forEach(u=>{const h=this.docs.get(u);o=o.insert(u,h?h.document.mutableCopy():Jn.newInvalidDocument(u))}),k.resolve(o)}getDocumentsMatchingQuery(e,n,o,u){let h=yo();const v=n.path,P=new $t(v.child("")),V=this.docs.getIteratorFrom(P);for(;V.hasNext();){const{key:z,value:{document:ee}}=V.getNext();if(!v.isPrefixOf(z.path))break;z.path.length>v.length+1||Yc(Jl(ee),o)<=0||(u.has(ee.key)||ln(n,ee))&&(h=h.insert(ee.key,ee.mutableCopy()))}return k.resolve(h)}getAllFromCollectionGroup(e,n,o,u){tn()}vr(e,n){return k.forEach(this.docs,o=>n(o))}newChangeBuffer(e){return new md(this)}getSize(e){return k.resolve(this.size)}}class md extends Gn{constructor(e){super(),this._r=e}applyChanges(e){const n=[];return this.changes.forEach((o,u)=>{u.isValidDocument()?n.push(this._r.addEntry(e,u)):this._r.removeEntry(o)}),k.waitFor(n)}getFromCache(e,n){return this._r.getEntry(e,n)}getAllFromCache(e,n){return this._r.getEntries(e,n)}}class Ma{constructor(e){this.persistence=e,this.Fr=new Ws(n=>Wa(n),Oc),this.lastRemoteSnapshotVersion=rn.min(),this.highestTargetId=0,this.Mr=0,this.Or=new so,this.targetCount=0,this.Nr=c.On()}forEachTarget(e,n){return this.Fr.forEach((o,u)=>n(u)),k.resolve()}getLastRemoteSnapshotVersion(e){return k.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return k.resolve(this.Mr)}allocateTargetId(e){return this.highestTargetId=this.Nr.next(),k.resolve(this.highestTargetId)}setTargetsMetadata(e,n,o){return o&&(this.lastRemoteSnapshotVersion=o),n>this.Mr&&(this.Mr=n),k.resolve()}kn(e){this.Fr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.Nr=new c(n),this.highestTargetId=n),e.sequenceNumber>this.Mr&&(this.Mr=e.sequenceNumber)}addTargetData(e,n){return this.kn(n),this.targetCount+=1,k.resolve()}updateTargetData(e,n){return this.kn(n),k.resolve()}removeTargetData(e,n){return this.Fr.delete(n.target),this.Or.Rr(n.targetId),this.targetCount-=1,k.resolve()}removeTargets(e,n,o){let u=0;const h=[];return this.Fr.forEach((v,P)=>{P.sequenceNumber<=n&&null===o.get(P.targetId)&&(this.Fr.delete(v),h.push(this.removeMatchingKeysForTargetId(e,P.targetId)),u++)}),k.waitFor(h).next(()=>u)}getTargetCount(e){return k.resolve(this.targetCount)}getTargetData(e,n){const o=this.Fr.get(n)||null;return k.resolve(o)}addMatchingKeys(e,n,o){return this.Or.Er(n,o),k.resolve()}removeMatchingKeys(e,n,o){this.Or.Ar(n,o);const u=this.persistence.referenceDelegate,h=[];return u&&n.forEach(v=>{h.push(u.markPotentiallyOrphaned(e,v))}),k.waitFor(h)}removeMatchingKeysForTargetId(e,n){return this.Or.Rr(n),k.resolve()}getMatchingKeysForTargetId(e,n){const o=this.Or.mr(n);return k.resolve(o)}containsKey(e,n){return k.resolve(this.Or.containsKey(n))}}class ga{constructor(e,n){this.Br={},this.overlays={},this.Lr=new Zi(0),this.kr=!1,this.kr=!0,this.referenceDelegate=e(this),this.qr=new Ma(this),this.indexManager=new Rm,this.remoteDocumentCache=new Iu(o=>this.referenceDelegate.Qr(o)),this.serializer=new Qf(n),this.Kr=new io(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.kr=!1,Promise.resolve()}get started(){return this.kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new To,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let o=this.Br[e.toKey()];return o||(o=new pa(n,this.referenceDelegate),this.Br[e.toKey()]=o),o}getTargetCache(){return this.qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Kr}runTransaction(e,n,o){Et("MemoryPersistence","Starting transaction:",e);const u=new pf(this.Lr.next());return this.referenceDelegate.$r(),o(u).next(h=>this.referenceDelegate.Ur(u).next(()=>h)).toPromise().then(h=>(u.raiseOnCommittedEvent(),h))}Wr(e,n){return k.or(Object.values(this.Br).map(o=>()=>o.containsKey(e,n)))}}class pf extends x{constructor(e){super(),this.currentSequenceNumber=e}}class Vu{constructor(e){this.persistence=e,this.Gr=new so,this.zr=null}static jr(e){return new Vu(e)}get Hr(){if(this.zr)return this.zr;throw tn()}addReference(e,n,o){return this.Gr.addReference(o,n),this.Hr.delete(o.toString()),k.resolve()}removeReference(e,n,o){return this.Gr.removeReference(o,n),this.Hr.add(o.toString()),k.resolve()}markPotentiallyOrphaned(e,n){return this.Hr.add(n.toString()),k.resolve()}removeTarget(e,n){this.Gr.Rr(n.targetId).forEach(u=>this.Hr.add(u.toString()));const o=this.persistence.getTargetCache();return o.getMatchingKeysForTargetId(e,n.targetId).next(u=>{u.forEach(h=>this.Hr.add(h.toString()))}).next(()=>o.removeTargetData(e,n))}$r(){this.zr=new Set}Ur(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return k.forEach(this.Hr,o=>{const u=$t.fromPath(o);return this.Jr(e,u).next(h=>{h||n.removeEntry(u,rn.min())})}).next(()=>(this.zr=null,n.apply(e)))}updateLimboDocument(e,n){return this.Jr(e,n).next(o=>{o?this.Hr.delete(n.toString()):this.Hr.add(n.toString())})}Qr(e){return 0}Jr(e,n){return k.or([()=>k.resolve(this.Gr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Wr(e,n)])}}class Bu{constructor(e){this.serializer=e}N(e,n,o,u){const h=new J("createOrUpgrade",n);var V;o<1&&u>=1&&(e.createObjectStore("owner"),(V=e).createObjectStore("mutationQueues",{keyPath:"userId"}),V.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",oa,{unique:!0}),V.createObjectStore("documentMutations"),cc(e),function(V){V.createObjectStore("remoteDocuments")}(e));let v=k.resolve();return o<3&&u>=3&&(0!==o&&(function(V){V.deleteObjectStore("targetDocuments"),V.deleteObjectStore("targets"),V.deleteObjectStore("targetGlobal")}(e),cc(e)),v=v.next(()=>function(V){const z=V.store("targetGlobal"),ee={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:rn.min().toTimestamp(),targetCount:0};return z.put("targetGlobalKey",ee)}(h))),o<4&&u>=4&&(0!==o&&(v=v.next(()=>function(V,z){return z.store("mutations").W().next(ee=>{V.deleteObjectStore("mutations"),V.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",oa,{unique:!0});const le=z.store("mutations"),Ae=ee.map(Xe=>le.put(Xe));return k.waitFor(Ae)})}(e,h))),v=v.next(()=>{!function(V){V.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),o<5&&u>=5&&(v=v.next(()=>this.Zr(h))),o<6&&u>=6&&(v=v.next(()=>(function(V){V.createObjectStore("remoteDocumentGlobal")}(e),this.Xr(h)))),o<7&&u>=7&&(v=v.next(()=>this.ei(h))),o<8&&u>=8&&(v=v.next(()=>this.ti(e,h))),o<9&&u>=9&&(v=v.next(()=>{!function(V){V.objectStoreNames.contains("remoteDocumentChanges")&&V.deleteObjectStore("remoteDocumentChanges")}(e)})),o<10&&u>=10&&(v=v.next(()=>this.ni(h))),o<11&&u>=11&&(v=v.next(()=>{(function(V){V.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(V){V.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),o<12&&u>=12&&(v=v.next(()=>{!function(V){const z=V.createObjectStore("documentOverlays",{keyPath:Qc});z.createIndex("collectionPathOverlayIndex",Gf,{unique:!1}),z.createIndex("collectionGroupOverlayIndex",Yu,{unique:!1})}(e)})),o<13&&u>=13&&(v=v.next(()=>function(V){const z=V.createObjectStore("remoteDocumentsV14",{keyPath:vo});z.createIndex("documentKeyIndex",Ku),z.createIndex("collectionGroupIndex",Xl)}(e)).next(()=>this.ri(e,h)).next(()=>e.deleteObjectStore("remoteDocuments"))),o<14&&u>=14&&(v=v.next(()=>this.ii(e,h))),o<15&&u>=15&&(v=v.next(()=>function(V){V.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),V.createObjectStore("indexState",{keyPath:ed}).createIndex("sequenceNumberIndex",jf,{unique:!1}),V.createObjectStore("indexEntries",{keyPath:Zc}).createIndex("documentKeyIndex",oh,{unique:!1})}(e))),v}Xr(e){let n=0;return e.store("remoteDocuments").Y((o,u)=>{n+=ff(u)}).next(()=>{const o={byteSize:n};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",o)})}Zr(e){const n=e.store("mutationQueues"),o=e.store("mutations");return n.W().next(u=>k.forEach(u,h=>{const v=IDBKeyRange.bound([h.userId,-1],[h.userId,h.lastAcknowledgedBatchId]);return o.W("userMutationsIndex",v).next(P=>k.forEach(P,V=>{pn(V.userId===h.userId);const z=kl(this.serializer,V);return rp(e,h.userId,z).next(()=>{})}))}))}ei(e){const n=e.store("targetDocuments"),o=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(u=>{const h=[];return o.Y((v,P)=>{const V=new Xn(v),z=[0,Nr(V)];h.push(n.get(z).next(ee=>ee?k.resolve():n.put({targetId:0,path:Nr(V),sequenceNumber:u.highestListenSequenceNumber})))}).next(()=>k.waitFor(h))})}ti(e,n){e.createObjectStore("collectionParents",{keyPath:Gh});const o=n.store("collectionParents"),u=new Nm,h=v=>{if(u.add(v)){const P=v.lastSegment(),V=v.popLast();return o.put({collectionId:P,parent:Nr(V)})}};return n.store("remoteDocuments").Y({J:!0},(v,P)=>{const V=new Xn(v);return h(V.popLast())}).next(()=>n.store("documentMutations").Y({J:!0},([v,P,V],z)=>{const ee=$s(P);return h(ee.popLast())}))}ni(e){const n=e.store("targets");return n.Y((o,u)=>{const h=rf(u),v=Fl(this.serializer,h);return n.put(v)})}ri(e,n){const o=n.store("remoteDocuments"),u=[];return o.Y((h,v)=>{const P=n.store("remoteDocumentsV14"),V=(le=v,le.document?new $t(Xn.fromString(le.document.name).popFirst(5)):le.noDocument?$t.fromSegments(le.noDocument.path):le.unknownDocument?$t.fromSegments(le.unknownDocument.path):tn()).path.toArray(),z={prefixPath:V.slice(0,V.length-2),collectionGroup:V[V.length-2],documentId:V[V.length-1],readTime:v.readTime||[0,0],unknownDocument:v.unknownDocument,noDocument:v.noDocument,document:v.document,hasCommittedMutations:!!v.hasCommittedMutations};var le;u.push(P.put(z))}).next(()=>k.waitFor(u))}ii(e,n){const o=n.store("mutations"),u=wn(this.serializer),h=new ga(Vu.jr,this.serializer.ut);return o.W().next(v=>{const P=new Map;return v.forEach(V=>{var z;let ee=null!==(z=P.get(V.userId))&&void 0!==z?z:sr();kl(this.serializer,V).keys().forEach(le=>ee=ee.add(le)),P.set(V.userId,ee)}),k.forEach(P,(V,z)=>{const ee=new Vr(z),le=af.ct(this.serializer,ee),Ae=h.getIndexManager(ee),Xe=Th.ct(ee,this.serializer,Ae,h.referenceDelegate);return new Ji(u,Xe,le,Ae).recalculateAndSaveOverlaysForDocumentKeys(new Xc(n,Zi._e),V).next()})})}}function cc(i){i.createObjectStore("targetDocuments",{keyPath:Tc}).createIndex("documentTargetsIndex",bc,{unique:!0}),i.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",Ec,{unique:!0}),i.createObjectStore("targetGlobal")}const Ul="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class jl{constructor(e,n,o,u,h,v,P,V,z,ee,le=15){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=o,this.si=h,this.window=v,this.document=P,this.oi=z,this._i=ee,this.ai=le,this.Lr=null,this.kr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ui=null,this.inForeground=!1,this.ci=null,this.li=null,this.hi=Number.NEGATIVE_INFINITY,this.Pi=Ae=>Promise.resolve(),!jl.D())throw new vt(et.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Nt(this,u),this.Ii=n+"main",this.serializer=new Qf(V),this.Ti=new de(this.Ii,this.ai,new Bu(this.serializer)),this.qr=new p(this.referenceDelegate,this.serializer),this.remoteDocumentCache=wn(this.serializer),this.Kr=new Qp,this.window&&this.window.localStorage?this.Ei=this.window.localStorage:(this.Ei=null,!1===ee&&mi("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.di().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new vt(et.FAILED_PRECONDITION,Ul);return this.Ai(),this.Ri(),this.Vi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.qr.getHighestSequenceNumber(e))}).then(e=>{this.Lr=new Zi(e,this.oi)}).then(()=>{this.kr=!0}).catch(e=>(this.Ti&&this.Ti.close(),Promise.reject(e)))}mi(e){var n=this;return this.Pi=function(){var o=(0,Ve.Z)(function*(u){if(n.started)return e(u)});return function(u){return o.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ti.L(function(){var n=(0,Ve.Z)(function*(o){null===o.newVersion&&(yield e())});return function(o){return n.apply(this,arguments)}}())}setNetworkEnabled(e){var n=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.si.enqueueAndForget((0,Ve.Z)(function*(){n.started&&(yield n.di())})))}di(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>fl(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.fi(e).next(n=>{n||(this.isPrimary=!1,this.si.enqueueRetryable(()=>this.Pi(!1)))})}).next(()=>this.gi(e)).next(n=>this.isPrimary&&!n?this.pi(e).next(()=>!1):!!n&&this.yi(e).next(()=>!0))).catch(e=>{if(Ut(e))return Et("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Et("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.si.enqueueRetryable(()=>this.Pi(e)),this.isPrimary=e})}fi(e){return Uu(e).get("owner").next(n=>k.resolve(this.wi(n)))}Si(e){return fl(e).delete(this.clientId)}bi(){var e=this;return(0,Ve.Z)(function*(){if(e.isPrimary&&!e.Di(e.hi,18e5)){e.hi=Date.now();const n=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",o=>{const u=Qi(o,"clientMetadata");return u.W().next(h=>{const v=e.Ci(h,18e5),P=h.filter(V=>-1===v.indexOf(V));return k.forEach(P,V=>u.delete(V.clientId)).next(()=>P)})}).catch(()=>[]);if(e.Ei)for(const o of n)e.Ei.removeItem(e.vi(o.clientId))}})()}Vi(){this.li=this.si.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.di().then(()=>this.bi()).then(()=>this.Vi()))}wi(e){return!!e&&e.ownerId===this.clientId}gi(e){return this._i?k.resolve(!0):Uu(e).get("owner").next(n=>{if(null!==n&&this.Di(n.leaseTimestampMs,5e3)&&!this.Fi(n.ownerId)){if(this.wi(n)&&this.networkEnabled)return!0;if(!this.wi(n)){if(!n.allowTabSynchronization)throw new vt(et.FAILED_PRECONDITION,Ul);return!1}}return!(!this.networkEnabled||!this.inForeground)||fl(e).W().next(o=>void 0===this.Ci(o,5e3).find(u=>!(this.clientId===u.clientId||!(!this.networkEnabled&&u.networkEnabled||!this.inForeground&&u.inForeground&&this.networkEnabled===u.networkEnabled))))}).next(n=>(this.isPrimary!==n&&Et("IndexedDbPersistence",`Client ${n?"is":"is not"} eligible for a primary lease.`),n))}shutdown(){var e=this;return(0,Ve.Z)(function*(){e.kr=!1,e.Mi(),e.li&&(e.li.cancel(),e.li=null),e.xi(),e.Oi(),yield e.Ti.runTransaction("shutdown","readwrite",["owner","clientMetadata"],n=>{const o=new Xc(n,Zi._e);return e.pi(o).next(()=>e.Si(o))}),e.Ti.close(),e.Ni()})()}Ci(e,n){return e.filter(o=>this.Di(o.updateTimeMs,n)&&!this.Fi(o.clientId))}Bi(){return this.runTransaction("getActiveClients","readonly",e=>fl(e).W().next(n=>this.Ci(n,18e5).map(o=>o.clientId)))}get started(){return this.kr}getMutationQueue(e,n){return Th.ct(e,this.serializer,n,this.referenceDelegate)}getTargetCache(){return this.qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new Jy(e,this.serializer.ut.databaseId)}getDocumentOverlayCache(e){return af.ct(this.serializer,e)}getBundleCache(){return this.Kr}runTransaction(e,n,o){Et("IndexedDbPersistence","Starting transaction:",e);const u="readonly"===n?"readonly":"readwrite",h=15===(V=this.ai)?nd:14===V?Jc:13===V?qo:12===V?td:11===V?no:void tn();var V;let v;return this.Ti.runTransaction(e,u,h,P=>(v=new Xc(P,this.Lr?this.Lr.next():Zi._e),"readwrite-primary"===n?this.fi(v).next(V=>!!V||this.gi(v)).next(V=>{if(!V)throw mi(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.si.enqueueRetryable(()=>this.Pi(!1)),new vt(et.FAILED_PRECONDITION,S);return o(v)}).next(V=>this.yi(v).next(()=>V)):this.Li(v).next(()=>o(v)))).then(P=>(v.raiseOnCommittedEvent(),P))}Li(e){return Uu(e).get("owner").next(n=>{if(null!==n&&this.Di(n.leaseTimestampMs,5e3)&&!this.Fi(n.ownerId)&&!this.wi(n)&&!(this._i||this.allowTabSynchronization&&n.allowTabSynchronization))throw new vt(et.FAILED_PRECONDITION,Ul)})}yi(e){const n={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Uu(e).put("owner",n)}static D(){return de.D()}pi(e){const n=Uu(e);return n.get("owner").next(o=>this.wi(o)?(Et("IndexedDbPersistence","Releasing primary lease."),n.delete("owner")):k.resolve())}Di(e,n){const o=Date.now();return!(e<o-n||e>o&&(mi(`Detected an update time that is in the future: ${e} > ${o}`),1))}Ai(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ci=()=>{this.si.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.di()))},this.document.addEventListener("visibilitychange",this.ci),this.inForeground="visible"===this.document.visibilityState)}xi(){this.ci&&(this.document.removeEventListener("visibilitychange",this.ci),this.ci=null)}Ri(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ui=()=>{this.Mi();const n=/(?:Version|Mobile)\/1[456]/;(0,ze.G6)()&&(navigator.appVersion.match(n)||navigator.userAgent.match(n))&&this.si.enterRestrictedMode(!0),this.si.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ui))}Oi(){this.ui&&(this.window.removeEventListener("pagehide",this.ui),this.ui=null)}Fi(e){var n;try{const o=null!==(null===(n=this.Ei)||void 0===n?void 0:n.getItem(this.vi(e)));return Et("IndexedDbPersistence",`Client '${e}' ${o?"is":"is not"} zombied in LocalStorage`),o}catch(o){return mi("IndexedDbPersistence","Failed to get zombied client id.",o),!1}}Mi(){if(this.Ei)try{this.Ei.setItem(this.vi(this.clientId),String(Date.now()))}catch(e){mi("Failed to set zombie client id.",e)}}Ni(){if(this.Ei)try{this.Ei.removeItem(this.vi(this.clientId))}catch{}}vi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Uu(i){return Qi(i,"owner")}function fl(i){return Qi(i,"clientMetadata")}function lc(i,e){let n=i.projectId;return i.isDefaultDatabase||(n+="."+i.database),"firestore/"+e+"/"+n+"/"}class pl{constructor(e,n,o,u){this.targetId=e,this.fromCache=n,this.ki=o,this.qi=u}static Qi(e,n){let o=sr(),u=sr();for(const h of n.docChanges)switch(h.type){case 0:o=o.add(h.doc.key);break;case 1:u=u.add(h.doc.key)}return new pl(e,n.fromCache,o,u)}}class ip{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class og{constructor(){this.Ki=!1,this.$i=!1,this.Ui=100,this.Wi=8}initialize(e,n){this.Gi=e,this.indexManager=n,this.Ki=!0}getDocumentsMatchingQuery(e,n,o,u){const h={result:null};return this.zi(e,n).next(v=>{h.result=v}).next(()=>{if(!h.result)return this.ji(e,n,u,o).next(v=>{h.result=v})}).next(()=>{if(h.result)return;const v=new ip;return this.Hi(e,n,v).next(P=>{if(h.result=P,this.$i)return this.Ji(e,n,v,P.size)})}).next(()=>h.result)}Ji(e,n,o,u){return o.documentReadCount<this.Ui?(Du()<=Ne.in.DEBUG&&Et("QueryEngine","SDK will not create cache indexes for query:",Dt(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Ui,"documents"),k.resolve()):(Du()<=Ne.in.DEBUG&&Et("QueryEngine","Query:",Dt(n),"scans",o.documentReadCount,"local documents and returns",u,"documents as results."),o.documentReadCount>this.Wi*u?(Du()<=Ne.in.DEBUG&&Et("QueryEngine","The SDK decides to create cache indexes for query:",Dt(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,T(n))):k.resolve())}zi(e,n){if(od(n))return k.resolve(null);let o=T(n);return this.indexManager.getIndexType(e,o).next(u=>0===u?null:(null!==n.limit&&1===u&&(n=ue(n,null,"F"),o=T(n)),this.indexManager.getDocumentsMatchingTarget(e,o).next(h=>{const v=sr(...h);return this.Gi.getDocuments(e,v).next(P=>this.indexManager.getMinOffset(e,o).next(V=>{const z=this.Yi(n,P);return this.Zi(n,z,v,V.readTime)?this.zi(e,ue(n,null,"F")):this.Xi(e,z,n,V)}))})))}ji(e,n,o,u){return od(n)||u.isEqual(rn.min())?k.resolve(null):this.Gi.getDocuments(e,o).next(h=>{const v=this.Yi(n,h);return this.Zi(n,v,o,u)?k.resolve(null):(Du()<=Ne.in.DEBUG&&Et("QueryEngine","Re-using previous result from %s to execute query: %s",u.toString(),Dt(n)),this.Xi(e,v,n,zu(u,-1)).next(P=>P))})}Yi(e,n){let o=new oi(Ar(e));return n.forEach((u,h)=>{ln(e,h)&&(o=o.add(h))}),o}Zi(e,n,o,u){if(null===e.limit)return!1;if(o.size!==n.size)return!0;const h="F"===e.limitType?n.last():n.first();return!!h&&(h.hasPendingWrites||h.version.compareTo(u)>0)}Hi(e,n,o){return Du()<=Ne.in.DEBUG&&Et("QueryEngine","Using full collection scan to execute query:",Dt(n)),this.Gi.getDocumentsMatchingQuery(e,n,to.min(),o)}Xi(e,n,o,u){return this.Gi.getDocumentsMatchingQuery(e,o,u).next(h=>(n.forEach(v=>{h=h.insert(v.key,v)}),h))}}class wh{constructor(e,n,o,u){this.persistence=e,this.es=n,this.serializer=u,this.ts=new Br(jn),this.ns=new Ws(h=>Wa(h),Oc),this.rs=new Map,this.ss=e.getRemoteDocumentCache(),this.qr=e.getTargetCache(),this.Kr=e.getBundleCache(),this.os(o)}os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Ji(this.ss,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ss.setIndexManager(this.indexManager),this.es.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.ts))}}function sp(i,e,n,o){return new wh(i,e,n,o)}function op(i,e){return gf.apply(this,arguments)}function gf(){return gf=(0,Ve.Z)(function*(i,e){const n=Gt(i);return yield n.persistence.runTransaction("Handle user change","readonly",o=>{let u;return n.mutationQueue.getAllMutationBatches(o).next(h=>(u=h,n.os(e),n.mutationQueue.getAllMutationBatches(o))).next(h=>{const v=[],P=[];let V=sr();for(const z of u){v.push(z.batchId);for(const ee of z.mutations)V=V.add(ee.key)}for(const z of h){P.push(z.batchId);for(const ee of z.mutations)V=V.add(ee.key)}return n.localDocuments.getDocuments(o,V).next(z=>({_s:z,removedBatchIds:v,addedBatchIds:P}))})})}),gf.apply(this,arguments)}function ag(i){const e=Gt(i);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.qr.getLastRemoteSnapshotVersion(n))}function ug(i,e,n){let o=sr(),u=sr();return n.forEach(h=>o=o.add(h)),e.getEntries(i,o).next(h=>{let v=yo();return n.forEach((P,V)=>{const z=h.get(P);V.isFoundDocument()!==z.isFoundDocument()&&(u=u.add(P)),V.isNoDocument()&&V.version.isEqual(rn.min())?(e.removeEntry(P,V.readTime),v=v.insert(P,V)):!z.isValidDocument()||V.version.compareTo(z.version)>0||0===V.version.compareTo(z.version)&&z.hasPendingWrites?(e.addEntry(V),v=v.insert(P,V)):Et("LocalStore","Ignoring outdated watch update for ",P,". Current version:",z.version," Watch version:",V.version)}),{us:v,cs:u}})}function Mm(i,e){const n=Gt(i);return n.persistence.runTransaction("Get next mutation batch","readonly",o=>(void 0===e&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(o,e)))}function dc(i,e){const n=Gt(i);return n.persistence.runTransaction("Allocate target","readwrite",o=>{let u;return n.qr.getTargetData(o,e).next(h=>h?(u=h,k.resolve(u)):n.qr.allocateTargetId(o).next(v=>(u=new Lu(e,v,"TargetPurposeListen",o.currentSequenceNumber),n.qr.addTargetData(o,u).next(()=>u))))}).then(o=>{const u=n.ts.get(o.targetId);return(null===u||o.snapshotVersion.compareTo(u.snapshotVersion)>0)&&(n.ts=n.ts.insert(o.targetId,o),n.ns.set(e,o.targetId)),o})}function Gl(i,e,n){return _d.apply(this,arguments)}function _d(){return _d=(0,Ve.Z)(function*(i,e,n){const o=Gt(i),u=o.ts.get(e),h=n?"readwrite":"readwrite-primary";try{n||(yield o.persistence.runTransaction("Release target",h,v=>o.persistence.referenceDelegate.removeTarget(v,u)))}catch(v){if(!Ut(v))throw v;Et("LocalStore",`Failed to update sequence numbers for target ${e}: ${v}`)}o.ts=o.ts.remove(e),o.ns.delete(u.target)}),_d.apply(this,arguments)}function Dh(i,e,n){const o=Gt(i);let u=rn.min(),h=sr();return o.persistence.runTransaction("Execute query","readwrite",v=>function(V,z,ee){const le=Gt(V),Ae=le.ns.get(ee);return void 0!==Ae?k.resolve(le.ts.get(Ae)):le.qr.getTargetData(z,ee)}(o,v,T(e)).next(P=>{if(P)return u=P.lastLimboFreeSnapshotVersion,o.qr.getMatchingKeysForTargetId(v,P.targetId).next(V=>{h=V})}).next(()=>o.es.getDocumentsMatchingQuery(v,e,n?u:rn.min(),n?h:sr())).next(P=>(Hl(o,En(e),P),{documents:P,ls:h})))}function Gd(i,e){const n=Gt(i),o=Gt(n.qr),u=n.ts.get(e);return u?Promise.resolve(u.target):n.persistence.runTransaction("Get target data","readonly",h=>o._t(h,e).next(v=>v?v.target:null))}function Ch(i,e){const n=Gt(i),o=n.rs.get(e)||rn.min();return n.persistence.runTransaction("Get new document changes","readonly",u=>n.ss.getAllFromCollectionGroup(u,e,zu(o,-1),Number.MAX_SAFE_INTEGER)).then(u=>(Hl(n,e,u),u))}function Hl(i,e,n){let o=i.rs.get(e)||rn.min();n.forEach((u,h)=>{h.readTime.compareTo(o)>0&&(o=h.readTime)}),i.rs.set(e,o)}function Hd(){return Hd=(0,Ve.Z)(function*(i,e,n,o){const u=Gt(i);let h=sr(),v=yo();for(const z of n){const ee=e.hs(z.metadata.name);z.document&&(h=h.add(ee));const le=e.Ps(z);le.setReadTime(e.Is(z.metadata.readTime)),v=v.insert(ee,le)}const P=u.ss.newChangeBuffer({trackRemovals:!0}),V=yield dc(u,(ee=o,T(rl(Xn.fromString(`__bundle__/docs/${ee}`)))));var ee;return u.persistence.runTransaction("Apply bundle documents","readwrite",z=>ug(z,P,v).next(ee=>(P.apply(z),ee)).next(ee=>u.qr.removeMatchingKeysForTargetId(z,V.targetId).next(()=>u.qr.addMatchingKeys(z,h,V.targetId)).next(()=>u.localDocuments.getLocalViewOfDocuments(z,ee.us,ee.cs)).next(()=>ee.us)))}),Hd.apply(this,arguments)}function up(i,e){return _f.apply(this,arguments)}function _f(){return _f=(0,Ve.Z)(function*(i,e,n=sr()){const o=yield dc(i,T(Eh(e.bundledQuery))),u=Gt(i);return u.persistence.runTransaction("Save named query","readwrite",h=>{const v=ls(e.readTime);if(o.snapshotVersion.compareTo(v)>=0)return u.Kr.saveNamedQuery(h,e);const P=o.withResumeToken(as.EMPTY_BYTE_STRING,v);return u.ts=u.ts.insert(P.targetId,P),u.qr.updateTargetData(h,P).next(()=>u.qr.removeMatchingKeysForTargetId(h,o.targetId)).next(()=>u.qr.addMatchingKeys(h,n,o.targetId)).next(()=>u.Kr.saveNamedQuery(h,e))})}),_f.apply(this,arguments)}function Ah(i,e){return`firestore_clients_${i}_${e}`}function cg(i,e,n){let o=`firestore_mutations_${i}_${n}`;return e.isAuthenticated()&&(o+=`_${e.uid}`),o}function cp(i,e){return`firestore_targets_${i}_${e}`}class Sh{constructor(e,n,o,u){this.user=e,this.batchId=n,this.state=o,this.error=u}static Ts(e,n,o){const u=JSON.parse(o);let h,v="object"==typeof u&&-1!==["pending","acknowledged","rejected"].indexOf(u.state)&&(void 0===u.error||"object"==typeof u.error);return v&&u.error&&(v="string"==typeof u.error.message&&"string"==typeof u.error.code,v&&(h=new vt(u.error.code,u.error.message))),v?new Sh(e,n,u.state,h):(mi("SharedClientState",`Failed to parse mutation state for ID '${n}': ${o}`),null)}Es(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class lg{constructor(e,n,o){this.targetId=e,this.state=n,this.error=o}static Ts(e,n){const o=JSON.parse(n);let u,h="object"==typeof o&&-1!==["not-current","current","rejected"].indexOf(o.state)&&(void 0===o.error||"object"==typeof o.error);return h&&o.error&&(h="string"==typeof o.error.message&&"string"==typeof o.error.code,h&&(u=new vt(o.error.code,o.error.message))),h?new lg(e,o.state,u):(mi("SharedClientState",`Failed to parse target state for ID '${e}': ${n}`),null)}Es(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class vf{constructor(e,n){this.clientId=e,this.activeTargetIds=n}static Ts(e,n){const o=JSON.parse(n);let u="object"==typeof o&&o.activeTargetIds instanceof Array,h=sl();for(let v=0;u&&v<o.activeTargetIds.length;++v)u=Ic(o.activeTargetIds[v]),h=h.add(o.activeTargetIds[v]);return u?new vf(e,h):(mi("SharedClientState",`Failed to parse client data for instance '${e}': ${n}`),null)}}class Rh{constructor(e,n){this.clientId=e,this.onlineState=n}static Ts(e){const n=JSON.parse(e);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new Rh(n.clientId,n.onlineState):(mi("SharedClientState",`Failed to parse online state: ${e}`),null)}}class xm{constructor(){this.activeTargetIds=sl()}ds(e){this.activeTargetIds=this.activeTargetIds.add(e)}As(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Es(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class dg{constructor(e,n,o,u,h){this.window=e,this.si=n,this.persistenceKey=o,this.Rs=u,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Vs=this.fs.bind(this),this.gs=new Br(jn),this.started=!1,this.ps=[];const v=o.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=h,this.ys=Ah(this.persistenceKey,this.Rs),this.ws=`firestore_sequence_number_${this.persistenceKey}`,this.gs=this.gs.insert(this.Rs,new xm),this.Ss=new RegExp(`^firestore_clients_${v}_([^_]*)$`),this.bs=new RegExp(`^firestore_mutations_${v}_(\\d+)(?:_(.*))?$`),this.Ds=new RegExp(`^firestore_targets_${v}_(\\d+)$`),this.Cs=`firestore_online_state_${this.persistenceKey}`,this.vs=function(V){return`firestore_bundle_loaded_v2_${V}`}(this.persistenceKey),this.window.addEventListener("storage",this.Vs)}static D(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,Ve.Z)(function*(){const n=yield e.syncEngine.Bi();for(const u of n){if(u===e.Rs)continue;const h=e.getItem(Ah(e.persistenceKey,u));if(h){const v=vf.Ts(u,h);v&&(e.gs=e.gs.insert(v.clientId,v))}}e.Fs();const o=e.storage.getItem(e.Cs);if(o){const u=e.Ms(o);u&&e.xs(u)}for(const u of e.ps)e.fs(u);e.ps=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.ws,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Os(this.gs)}isActiveQueryTarget(e){let n=!1;return this.gs.forEach((o,u)=>{u.activeTargetIds.has(e)&&(n=!0)}),n}addPendingMutation(e){this.Ns(e,"pending")}updateMutationState(e,n,o){this.Ns(e,n,o),this.Bs(e)}addLocalQueryTarget(e){let n="not-current";if(this.isActiveQueryTarget(e)){const o=this.storage.getItem(cp(this.persistenceKey,e));if(o){const u=lg.Ts(e,o);u&&(n=u.state)}}return this.Ls.ds(e),this.Fs(),n}removeLocalQueryTarget(e){this.Ls.As(e),this.Fs()}isLocalQueryTarget(e){return this.Ls.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(cp(this.persistenceKey,e))}updateQueryState(e,n,o){this.ks(e,n,o)}handleUserChange(e,n,o){n.forEach(u=>{this.Bs(u)}),this.currentUser=e,o.forEach(u=>{this.addPendingMutation(u)})}setOnlineState(e){this.qs(e)}notifyBundleLoaded(e){this.Qs(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.Vs),this.removeItem(this.ys),this.started=!1)}getItem(e){const n=this.storage.getItem(e);return Et("SharedClientState","READ",e,n),n}setItem(e,n){Et("SharedClientState","SET",e,n),this.storage.setItem(e,n)}removeItem(e){Et("SharedClientState","REMOVE",e),this.storage.removeItem(e)}fs(e){var n=this;const o=e;if(o.storageArea===this.storage){if(Et("SharedClientState","EVENT",o.key,o.newValue),o.key===this.ys)return void mi("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.si.enqueueRetryable((0,Ve.Z)(function*(){if(n.started){if(null!==o.key)if(n.Ss.test(o.key)){if(null==o.newValue){const u=n.Ks(o.key);return n.$s(u,null)}{const u=n.Us(o.key,o.newValue);if(u)return n.$s(u.clientId,u)}}else if(n.bs.test(o.key)){if(null!==o.newValue){const u=n.Ws(o.key,o.newValue);if(u)return n.Gs(u)}}else if(n.Ds.test(o.key)){if(null!==o.newValue){const u=n.zs(o.key,o.newValue);if(u)return n.js(u)}}else if(o.key===n.Cs){if(null!==o.newValue){const u=n.Ms(o.newValue);if(u)return n.xs(u)}}else if(o.key===n.ws){const u=function(v){let P=Zi._e;if(null!=v)try{const V=JSON.parse(v);pn("number"==typeof V),P=V}catch(V){mi("SharedClientState","Failed to read sequence number from WebStorage",V)}return P}(o.newValue);u!==Zi._e&&n.sequenceNumberHandler(u)}else if(o.key===n.vs){const u=n.Hs(o.newValue);yield Promise.all(u.map(h=>n.syncEngine.Js(h)))}}else n.ps.push(o)}))}}get Ls(){return this.gs.get(this.Rs)}Fs(){this.setItem(this.ys,this.Ls.Es())}Ns(e,n,o){const u=new Sh(this.currentUser,e,n,o),h=cg(this.persistenceKey,this.currentUser,e);this.setItem(h,u.Es())}Bs(e){const n=cg(this.persistenceKey,this.currentUser,e);this.removeItem(n)}qs(e){this.storage.setItem(this.Cs,JSON.stringify({clientId:this.Rs,onlineState:e}))}ks(e,n,o){const u=cp(this.persistenceKey,e),h=new lg(e,n,o);this.setItem(u,h.Es())}Qs(e){const n=JSON.stringify(Array.from(e));this.setItem(this.vs,n)}Ks(e){const n=this.Ss.exec(e);return n?n[1]:null}Us(e,n){const o=this.Ks(e);return vf.Ts(o,n)}Ws(e,n){const o=this.bs.exec(e),u=Number(o[1]);return Sh.Ts(new Vr(void 0!==o[2]?o[2]:null),u,n)}zs(e,n){const o=this.Ds.exec(e),u=Number(o[1]);return lg.Ts(u,n)}Ms(e){return Rh.Ts(e)}Hs(e){return JSON.parse(e)}Gs(e){var n=this;return(0,Ve.Z)(function*(){if(e.user.uid===n.currentUser.uid)return n.syncEngine.Ys(e.batchId,e.state,e.error);Et("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}js(e){return this.syncEngine.Zs(e.targetId,e.state,e.error)}$s(e,n){const o=n?this.gs.insert(e,n):this.gs.remove(e),u=this.Os(this.gs),h=this.Os(o),v=[],P=[];return h.forEach(V=>{u.has(V)||v.push(V)}),u.forEach(V=>{h.has(V)||P.push(V)}),this.syncEngine.Xs(v,P).then(()=>{this.gs=o})}xs(e){this.gs.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Os(e){let n=sl();return e.forEach((o,u)=>{n=n.unionWith(u.activeTargetIds)}),n}}class hv{constructor(){this.eo=new xm,this.no={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,o){}addLocalQueryTarget(e){return this.eo.ds(e),this.no[e]||"not-current"}updateQueryState(e,n,o){this.no[e]=n}removeLocalQueryTarget(e){this.eo.As(e)}isLocalQueryTarget(e){return this.eo.activeTargetIds.has(e)}clearQueryState(e){delete this.no[e]}getAllActiveQueryTargets(){return this.eo.activeTargetIds}isActiveQueryTarget(e){return this.eo.activeTargetIds.has(e)}start(){return this.eo=new xm,Promise.resolve()}handleUserChange(e,n,o){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class Xy{ro(e){}shutdown(){}}class hg{constructor(){this.io=()=>this.so(),this.oo=()=>this._o(),this.ao=[],this.uo()}ro(e){this.ao.push(e)}shutdown(){window.removeEventListener("online",this.io),window.removeEventListener("offline",this.oo)}uo(){window.addEventListener("online",this.io),window.addEventListener("offline",this.oo)}so(){Et("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ao)e(0)}_o(){Et("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ao)e(1)}static D(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let lp=null;function km(){return null===lp?lp=268435456+Math.round(2147483648*Math.random()):lp++,"0x"+lp.toString(16)}const e0={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class zI{constructor(e){this.co=e.co,this.lo=e.lo}ho(e){this.Po=e}Io(e){this.To=e}onMessage(e){this.Eo=e}close(){this.lo()}send(e){this.co(e)}Ao(){this.Po()}Ro(e){this.To(e)}Vo(e){this.Eo(e)}}const Za="WebChannelConnection";class fg extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const o=n.ssl?"https":"http",u=encodeURIComponent(this.databaseId.projectId),h=encodeURIComponent(this.databaseId.database);this.mo=o+"://"+n.host,this.fo=`projects/${u}/databases/${h}`,this.po="(default)"===this.databaseId.database?`project_id=${u}`:`project_id=${u}&database_id=${h}`}get yo(){return!1}wo(n,o,u,h,v){const P=km(),V=this.So(n,o);Et("RestConnection",`Sending RPC '${n}' ${P}:`,V,u);const z={"google-cloud-resource-prefix":this.fo,"x-goog-request-params":this.po};return this.bo(z,h,v),this.Do(n,V,z,u).then(ee=>(Et("RestConnection",`Received RPC '${n}' ${P}: `,ee),ee),ee=>{throw _o("RestConnection",`RPC '${n}' ${P} failed with error: `,ee,"url: ",V,"request:",u),ee})}Co(n,o,u,h,v,P){return this.wo(n,o,u,h,v)}bo(n,o,u){n["X-Goog-Api-Client"]="gl-js/ fire/"+au,n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),o&&o.headers.forEach((h,v)=>n[v]=h),u&&u.headers.forEach((h,v)=>n[v]=h)}So(n,o){return`${this.mo}/v1/${o}:${e0[n]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Do(e,n,o,u){const h=km();return new Promise((v,P)=>{const V=new ys;V.setWithCredentials(!0),V.listenOnce(ou.COMPLETE,()=>{try{switch(V.getLastErrorCode()){case wi.NO_ERROR:const ee=V.getResponseJson();Et(Za,`XHR for RPC '${e}' ${h} received:`,JSON.stringify(ee)),v(ee);break;case wi.TIMEOUT:Et(Za,`RPC '${e}' ${h} timed out`),P(new vt(et.DEADLINE_EXCEEDED,"Request time out"));break;case wi.HTTP_ERROR:const le=V.getStatus();if(Et(Za,`RPC '${e}' ${h} failed with status:`,le,"response text:",V.getResponseText()),le>0){let Ae=V.getResponseJson();Array.isArray(Ae)&&(Ae=Ae[0]);const Xe=Ae?.error;if(Xe&&Xe.status&&Xe.message){const kt=function(Wt){const xn=Wt.toLowerCase().replace(/_/g,"-");return Object.values(et).indexOf(xn)>=0?xn:et.UNKNOWN}(Xe.status);P(new vt(kt,Xe.message))}else P(new vt(et.UNKNOWN,"Server responded with status "+V.getStatus()))}else P(new vt(et.UNAVAILABLE,"Connection failed."));break;default:tn()}}finally{Et(Za,`RPC '${e}' ${h} completed.`)}});const z=JSON.stringify(u);Et(Za,`RPC '${e}' ${h} sending request:`,u),V.send(n,"POST",z,o,15)})}vo(e,n,o){const u=km(),h=[this.mo,"/","google.firestore.v1.Firestore","/",e,"/channel"],v=os(),P=wa(),V={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},z=this.longPollingOptions.timeoutSeconds;void 0!==z&&(V.longPollingTimeout=Math.round(1e3*z)),this.useFetchStreams&&(V.useFetchStreams=!0),this.bo(V.initMessageHeaders,n,o),V.encodeInitMessageHeaders=!0;const ee=h.join("");Et(Za,`Creating RPC '${e}' stream ${u}: ${ee}`,V);const le=v.createWebChannel(ee,V);let Ae=!1,Xe=!1;const kt=new zI({co:Wt=>{Xe?Et(Za,`Not sending because RPC '${e}' stream ${u} is closed:`,Wt):(Ae||(Et(Za,`Opening RPC '${e}' stream ${u} transport.`),le.open(),Ae=!0),Et(Za,`RPC '${e}' stream ${u} sending:`,Wt),le.send(Wt))},lo:()=>le.close()}),zt=(Wt,xn,Zn)=>{Wt.listen(xn,On=>{try{Zn(On)}catch(Mr){setTimeout(()=>{throw Mr},0)}})};return zt(le,$u.EventType.OPEN,()=>{Xe||Et(Za,`RPC '${e}' stream ${u} transport opened.`)}),zt(le,$u.EventType.CLOSE,()=>{Xe||(Xe=!0,Et(Za,`RPC '${e}' stream ${u} transport closed`),kt.Ro())}),zt(le,$u.EventType.ERROR,Wt=>{Xe||(Xe=!0,_o(Za,`RPC '${e}' stream ${u} transport errored:`,Wt),kt.Ro(new vt(et.UNAVAILABLE,"The operation could not be completed")))}),zt(le,$u.EventType.MESSAGE,Wt=>{var xn;if(!Xe){const Zn=Wt.data[0];pn(!!Zn);const Mr=Zn.error||(null===(xn=Zn[0])||void 0===xn?void 0:xn.error);if(Mr){Et(Za,`RPC '${e}' stream ${u} received error:`,Mr);const ui=Mr.status;let li=function(Fy){const J_=Ts[Fy];if(void 0!==J_)return Pl(J_)}(ui),bo=Mr.message;void 0===li&&(li=et.INTERNAL,bo="Unknown error status: "+ui+" with message "+Mr.message),Xe=!0,kt.Ro(new vt(li,bo)),le.close()}else Et(Za,`RPC '${e}' stream ${u} received:`,Zn),kt.Vo(Zn)}}),zt(P,wd.STAT_EVENT,Wt=>{Wt.stat===$r.PROXY?Et(Za,`RPC '${e}' stream ${u} detected buffering proxy`):Wt.stat===$r.NOPROXY&&Et(Za,`RPC '${e}' stream ${u} detected no buffering proxy`)}),setTimeout(()=>{kt.Ao()},0),kt}}function pg(){return typeof window<"u"?window:null}function gg(){return typeof document<"u"?document:null}function yf(i){return new dd(i,!0)}class dp{constructor(e,n,o=1e3,u=1.5,h=6e4){this.si=e,this.timerId=n,this.Fo=o,this.Mo=u,this.xo=h,this.Oo=0,this.No=null,this.Bo=Date.now(),this.reset()}reset(){this.Oo=0}Lo(){this.Oo=this.xo}ko(e){this.cancel();const n=Math.floor(this.Oo+this.qo()),o=Math.max(0,Date.now()-this.Bo),u=Math.max(0,n-o);u>0&&Et("ExponentialBackoff",`Backing off for ${u} ms (base delay: ${this.Oo} ms, delay with jitter: ${n} ms, last attempt: ${o} ms ago)`),this.No=this.si.enqueueAfterDelay(this.timerId,u,()=>(this.Bo=Date.now(),e())),this.Oo*=this.Mo,this.Oo<this.Fo&&(this.Oo=this.Fo),this.Oo>this.xo&&(this.Oo=this.xo)}Qo(){null!==this.No&&(this.No.skipDelay(),this.No=null)}cancel(){null!==this.No&&(this.No.cancel(),this.No=null)}qo(){return(Math.random()-.5)*this.Oo}}class hp{constructor(e,n,o,u,h,v,P,V){this.si=e,this.Ko=o,this.$o=u,this.connection=h,this.authCredentialsProvider=v,this.appCheckCredentialsProvider=P,this.listener=V,this.state=0,this.Uo=0,this.Wo=null,this.Go=null,this.stream=null,this.zo=new dp(e,n)}jo(){return 1===this.state||5===this.state||this.Ho()}Ho(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Jo()}stop(){var e=this;return(0,Ve.Z)(function*(){e.jo()&&(yield e.close(0))})()}Yo(){this.state=0,this.zo.reset()}Zo(){this.Ho()&&null===this.Wo&&(this.Wo=this.si.enqueueAfterDelay(this.Ko,6e4,()=>this.Xo()))}e_(e){this.t_(),this.stream.send(e)}Xo(){var e=this;return(0,Ve.Z)(function*(){if(e.Ho())return e.close(0)})()}t_(){this.Wo&&(this.Wo.cancel(),this.Wo=null)}n_(){this.Go&&(this.Go.cancel(),this.Go=null)}close(e,n){var o=this;return(0,Ve.Z)(function*(){o.t_(),o.n_(),o.zo.cancel(),o.Uo++,4!==e?o.zo.reset():n&&n.code===et.RESOURCE_EXHAUSTED?(mi(n.toString()),mi("Using maximum backoff delay to prevent overloading the backend."),o.zo.Lo()):n&&n.code===et.UNAUTHENTICATED&&3!==o.state&&(o.authCredentialsProvider.invalidateToken(),o.appCheckCredentialsProvider.invalidateToken()),null!==o.stream&&(o.r_(),o.stream.close(),o.stream=null),o.state=e,yield o.listener.Io(n)})()}r_(){}auth(){this.state=1;const e=this.i_(this.Uo),n=this.Uo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([o,u])=>{this.Uo===n&&this.s_(o,u)},o=>{e(()=>{const u=new vt(et.UNKNOWN,"Fetching auth token failed: "+o.message);return this.o_(u)})})}s_(e,n){const o=this.i_(this.Uo);this.stream=this.__(e,n),this.stream.ho(()=>{o(()=>(this.state=2,this.Go=this.si.enqueueAfterDelay(this.$o,1e4,()=>(this.Ho()&&(this.state=3),Promise.resolve())),this.listener.ho()))}),this.stream.Io(u=>{o(()=>this.o_(u))}),this.stream.onMessage(u=>{o(()=>this.onMessage(u))})}Jo(){var e=this;this.state=5,this.zo.ko((0,Ve.Z)(function*(){e.state=0,e.start()}))}o_(e){return Et("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}i_(e){return n=>{this.si.enqueueAndForget(()=>this.Uo===e?n():(Et("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class t0 extends hp{constructor(e,n,o,u,h,v){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,o,u,v),this.serializer=h}__(e,n){return this.connection.vo("Listen",e,n)}onMessage(e){this.zo.reset();const n=function qp(i,e){let n;if("targetChange"in e){const o="NO_CHANGE"===(z=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===z?1:"REMOVE"===z?2:"CURRENT"===z?3:"RESET"===z?4:tn(),u=e.targetChange.targetIds||[],h=function(z,ee){return z.useProto3Json?(pn(void 0===ee||"string"==typeof ee),as.fromBase64String(ee||"")):(pn(void 0===ee||ee instanceof Uint8Array),as.fromUint8Array(ee||new Uint8Array))}(i,e.targetChange.resumeToken),v=e.targetChange.cause,P=v&&function(z){const ee=void 0===z.code?et.UNKNOWN:Pl(z.code);return new vt(ee,z.message||"")}(v);n=new Ge(o,u,h,P||null)}else if("documentChange"in e){const o=e.documentChange,u=Ya(i,o.document.name),h=ls(o.document.updateTime),v=o.document.createTime?ls(o.document.createTime):rn.min(),P=new us({mapValue:{fields:o.document.fields}}),V=Jn.newFoundDocument(u,h,v,P);n=new X(o.targetIds||[],o.removedTargetIds||[],V.key,V)}else if("documentDelete"in e){const o=e.documentDelete,u=Ya(i,o.document),h=o.readTime?ls(o.readTime):rn.min(),v=Jn.newNoDocument(u,h);n=new X([],o.removedTargetIds||[],v.key,v)}else if("documentRemove"in e){const o=e.documentRemove,u=Ya(i,o.document);n=new X([],o.removedTargetIds||[],u,null)}else{if(!("filter"in e))return tn();{const o=e.filter,{count:u=0,unchangedNames:h}=o,v=new cd(u,h);n=new ye(o.targetId,v)}}var z;return n}(this.serializer,e),o=function(h){if(!("targetChange"in h))return rn.min();const v=h.targetChange;return v.targetIds&&v.targetIds.length?rn.min():v.readTime?ls(v.readTime):rn.min()}(e);return this.listener.a_(n,o)}u_(e){const n={};n.database=dl(this.serializer),n.addTarget=function(h,v){let P;const V=v.target;if(P=ic(V)?{documents:Kp(h,V)}:{query:tf(h,V)},P.targetId=v.targetId,v.resumeToken.approximateByteSize()>0){P.resumeToken=mh(h,v.resumeToken);const z=cl(h,v.expectedCount);null!==z&&(P.expectedCount=z)}else if(v.snapshotVersion.compareTo(rn.min())>0){P.readTime=uc(h,v.snapshotVersion.toTimestamp());const z=cl(h,v.expectedCount);null!==z&&(P.expectedCount=z)}return P}(this.serializer,e);const o=function bm(i,e){const n=function(u){switch(u){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return tn()}}(e.purpose);return null==n?null:{"goog-listen-tags":n}}(0,e);o&&(n.labels=o),this.e_(n)}c_(e){const n={};n.database=dl(this.serializer),n.removeTarget=e,this.e_(n)}}class fv extends hp{constructor(e,n,o,u,h,v){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,o,u,v),this.serializer=h,this.l_=!1}get h_(){return this.l_}start(){this.l_=!1,this.lastStreamToken=void 0,super.start()}r_(){this.l_&&this.P_([])}__(e,n){return this.connection.vo("Write",e,n)}onMessage(e){if(pn(!!e.streamToken),this.lastStreamToken=e.streamToken,this.l_){this.zo.reset();const n=function _h(i,e){return i&&i.length>0?(pn(void 0!==e),i.map(n=>function(u,h){let v=ls(u.updateTime?u.updateTime:h);return v.isEqual(rn.min())&&(v=ls(h)),new ha(v,u.transformResults||[])}(n,e))):[]}(e.writeResults,e.commitTime),o=ls(e.commitTime);return this.listener.I_(o,n)}return pn(!e.writeResults||0===e.writeResults.length),this.l_=!0,this.listener.T_()}E_(){const e={};e.database=dl(this.serializer),this.e_(e)}P_(e){const n={streamToken:this.lastStreamToken,writes:e.map(o=>fd(this.serializer,o))};this.e_(n)}}class n0 extends class{}{constructor(e,n,o,u){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=o,this.serializer=u,this.d_=!1}A_(){if(this.d_)throw new vt(et.FAILED_PRECONDITION,"The client has already been terminated.")}wo(e,n,o){return this.A_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([u,h])=>this.connection.wo(e,n,o,u,h)).catch(u=>{throw"FirebaseError"===u.name?(u.code===et.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new vt(et.UNKNOWN,u.toString())})}Co(e,n,o,u){return this.A_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([h,v])=>this.connection.Co(e,n,o,h,v,u)).catch(h=>{throw"FirebaseError"===h.name?(h.code===et.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),h):new vt(et.UNKNOWN,h.toString())})}terminate(){this.d_=!0}}class r0{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.V_=0,this.m_=null,this.f_=!0}g_(){0===this.V_&&(this.p_("Unknown"),this.m_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.m_=null,this.y_("Backend didn't respond within 10 seconds."),this.p_("Offline"),Promise.resolve())))}w_(e){"Online"===this.state?this.p_("Unknown"):(this.V_++,this.V_>=1&&(this.S_(),this.y_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.p_("Offline")))}set(e){this.S_(),this.V_=0,"Online"===e&&(this.f_=!1),this.p_(e)}p_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}y_(e){const n=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.f_?(mi(n),this.f_=!1):Et("OnlineStateTracker",n)}S_(){null!==this.m_&&(this.m_.cancel(),this.m_=null)}}class mg{constructor(e,n,o,u,h){var v=this;this.localStore=e,this.datastore=n,this.asyncQueue=o,this.remoteSyncer={},this.b_=[],this.D_=new Map,this.C_=new Set,this.v_=[],this.F_=h,this.F_.ro(P=>{o.enqueueAndForget((0,Ve.Z)(function*(){var V;zl(v)&&(Et("RemoteStore","Restarting streams for network reachability change."),yield(V=(0,Ve.Z)(function*(ee){const le=Gt(ee);le.C_.add(4),yield $l(le),le.M_.set("Unknown"),le.C_.delete(4),yield fp(le)}),function z(ee){return V.apply(this,arguments)})(v))}))}),this.M_=new r0(o,u)}}function fp(i){return $d.apply(this,arguments)}function $d(){return $d=(0,Ve.Z)(function*(i){if(zl(i))for(const e of i.v_)yield e(!0)}),$d.apply(this,arguments)}function $l(i){return Fm.apply(this,arguments)}function Fm(){return Fm=(0,Ve.Z)(function*(i){for(const e of i.v_)yield e(!1)}),Fm.apply(this,arguments)}function pp(i,e){const n=Gt(i);n.D_.has(e.targetId)||(n.D_.set(e.targetId,e),vg(n)?_g(n):If(n).Ho()&&Lm(n,e))}function gp(i,e){const n=Gt(i),o=If(n);n.D_.delete(e),o.Ho()&&mv(n,e),0===n.D_.size&&(o.Ho()?o.Zo():zl(n)&&n.M_.set("Unknown"))}function Lm(i,e){if(i.x_.Oe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(rn.min())>0){const n=i.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}If(i).u_(e)}function mv(i,e){i.x_.Oe(e),If(i).c_(e)}function _g(i){i.x_=new Jt({getRemoteKeysForTarget:e=>i.remoteSyncer.getRemoteKeysForTarget(e),_t:e=>i.D_.get(e)||null,nt:()=>i.datastore.serializer.databaseId}),If(i).start(),i.M_.g_()}function vg(i){return zl(i)&&!If(i).jo()&&i.D_.size>0}function zl(i){return 0===Gt(i).C_.size}function s0(i){i.x_=void 0}function yg(i){return Ig.apply(this,arguments)}function Ig(){return Ig=(0,Ve.Z)(function*(i){i.D_.forEach((e,n)=>{Lm(i,e)})}),Ig.apply(this,arguments)}function o0(i,e){return Vm.apply(this,arguments)}function Vm(){return Vm=(0,Ve.Z)(function*(i,e){s0(i),vg(i)?(i.M_.w_(e),_g(i)):i.M_.set("Unknown")}),Vm.apply(this,arguments)}function _v(i,e,n){return Bm.apply(this,arguments)}function Bm(){return Bm=(0,Ve.Z)(function*(i,e,n){if(i.M_.set("Online"),e instanceof Ge&&2===e.state&&e.cause)try{yield(o=(0,Ve.Z)(function*(h,v){const P=v.cause;for(const V of v.targetIds)h.D_.has(V)&&(yield h.remoteSyncer.rejectListen(V,P),h.D_.delete(V),h.x_.removeTarget(V))}),function u(h,v){return o.apply(this,arguments)})(i,e)}catch(o){Et("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),o),yield mp(i,o)}else if(e instanceof X?i.x_.$e(e):e instanceof ye?i.x_.Je(e):i.x_.Ge(e),!n.isEqual(rn.min()))try{const o=yield ag(i.localStore);n.compareTo(o)>=0&&(yield function(h,v){const P=h.x_.it(v);return P.targetChanges.forEach((V,z)=>{if(V.resumeToken.approximateByteSize()>0){const ee=h.D_.get(z);ee&&h.D_.set(z,ee.withResumeToken(V.resumeToken,v))}}),P.targetMismatches.forEach((V,z)=>{const ee=h.D_.get(V);if(!ee)return;h.D_.set(V,ee.withResumeToken(as.EMPTY_BYTE_STRING,ee.snapshotVersion)),mv(h,V);const le=new Lu(ee.target,V,z,ee.sequenceNumber);Lm(h,le)}),h.remoteSyncer.applyRemoteEvent(P)}(i,n))}catch(o){Et("RemoteStore","Failed to raise snapshot:",o),yield mp(i,o)}var o}),Bm.apply(this,arguments)}function mp(i,e,n){return Um.apply(this,arguments)}function Um(){return Um=(0,Ve.Z)(function*(i,e,n){if(!Ut(e))throw e;i.C_.add(1),yield $l(i),i.M_.set("Offline"),n||(n=()=>ag(i.localStore)),i.asyncQueue.enqueueRetryable((0,Ve.Z)(function*(){Et("RemoteStore","Retrying IndexedDB access"),yield n(),i.C_.delete(1),yield fp(i)}))}),Um.apply(this,arguments)}function vv(i,e){return e().catch(n=>mp(i,n,e))}function _p(i){return Eg.apply(this,arguments)}function Eg(){return Eg=(0,Ve.Z)(function*(i){const e=Gt(i),n=ql(e);let o=e.b_.length>0?e.b_[e.b_.length-1].batchId:-1;for(;yv(e);)try{const u=yield Mm(e.localStore,o);if(null===u){0===e.b_.length&&n.Zo();break}o=u.batchId,gl(e,u)}catch(u){yield mp(e,u)}jm(e)&&a0(e)}),Eg.apply(this,arguments)}function yv(i){return zl(i)&&i.b_.length<10}function gl(i,e){i.b_.push(e);const n=ql(i);n.Ho()&&n.h_&&n.P_(e.mutations)}function jm(i){return zl(i)&&!ql(i).jo()&&i.b_.length>0}function a0(i){ql(i).start()}function Gm(i){return Wl.apply(this,arguments)}function Wl(){return Wl=(0,Ve.Z)(function*(i){ql(i).E_()}),Wl.apply(this,arguments)}function vp(i){return Hm.apply(this,arguments)}function Hm(){return Hm=(0,Ve.Z)(function*(i){const e=ql(i);for(const n of i.b_)e.P_(n.mutations)}),Hm.apply(this,arguments)}function u0(i,e,n){return $m.apply(this,arguments)}function $m(){return $m=(0,Ve.Z)(function*(i,e,n){const o=i.b_.shift(),u=kc.from(o,e,n);yield vv(i,()=>i.remoteSyncer.applySuccessfulWrite(u)),yield _p(i)}),$m.apply(this,arguments)}function zm(i,e){return Bc.apply(this,arguments)}function Bc(){return Bc=(0,Ve.Z)(function*(i,e){var n;e&&ql(i).h_&&(yield(n=(0,Ve.Z)(function*(u,h){if(gh(P=h.code)&&P!==et.ABORTED){const v=u.b_.shift();ql(u).Yo(),yield vv(u,()=>u.remoteSyncer.rejectFailedWrite(v.batchId,h)),yield _p(u)}var P}),function o(u,h){return n.apply(this,arguments)})(i,e)),jm(i)&&a0(i)}),Bc.apply(this,arguments)}function Wm(i,e){return qm.apply(this,arguments)}function qm(){return qm=(0,Ve.Z)(function*(i,e){const n=Gt(i);n.asyncQueue.verifyOperationInProgress(),Et("RemoteStore","RemoteStore received new credentials");const o=zl(n);n.C_.add(3),yield $l(n),o&&n.M_.set("Unknown"),yield n.remoteSyncer.handleCredentialChange(e),n.C_.delete(3),yield fp(n)}),qm.apply(this,arguments)}function Iv(i,e){return Fo.apply(this,arguments)}function Fo(){return Fo=(0,Ve.Z)(function*(i,e){const n=Gt(i);e?(n.C_.delete(2),yield fp(n)):e||(n.C_.add(2),yield $l(n),n.M_.set("Unknown"))}),Fo.apply(this,arguments)}function If(i){return i.O_||(i.O_=function(n,o,u){const h=Gt(n);return h.A_(),new t0(o,h.connection,h.authCredentials,h.appCheckCredentials,h.serializer,u)}(i.datastore,i.asyncQueue,{ho:yg.bind(null,i),Io:o0.bind(null,i),a_:_v.bind(null,i)}),i.v_.push(function(){var e=(0,Ve.Z)(function*(n){n?(i.O_.Yo(),vg(i)?_g(i):i.M_.set("Unknown")):(yield i.O_.stop(),s0(i))});return function(n){return e.apply(this,arguments)}}())),i.O_}function ql(i){return i.N_||(i.N_=function(n,o,u){const h=Gt(n);return h.A_(),new fv(o,h.connection,h.authCredentials,h.appCheckCredentials,h.serializer,u)}(i.datastore,i.asyncQueue,{ho:Gm.bind(null,i),Io:zm.bind(null,i),T_:vp.bind(null,i),I_:u0.bind(null,i)}),i.v_.push(function(){var e=(0,Ve.Z)(function*(n){n?(i.N_.Yo(),yield _p(i)):(yield i.N_.stop(),i.b_.length>0&&(Et("RemoteStore",`Stopping write stream with ${i.b_.length} pending writes`),i.b_=[]))});return function(n){return e.apply(this,arguments)}}())),i.N_}class Km{constructor(e,n,o,u,h){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=o,this.op=u,this.removalCallback=h,this.deferred=new Vs,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(v=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,o,u,h){const v=Date.now()+o,P=new Km(e,n,v,u,h);return P.start(o),P}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new vt(et.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Ef(i,e){if(mi("AsyncQueue",`${e}: ${i}`),Ut(i))return new vt(et.UNAVAILABLE,`${e}: ${i}`);throw i}class zd{constructor(e){this.comparator=e?(n,o)=>e(n,o)||$t.comparator(n.key,o.key):(n,o)=>$t.comparator(n.key,o.key),this.keyedMap=zr(),this.sortedSet=new Br(this.comparator)}static emptySet(e){return new zd(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,o)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof zd)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),o=e.sortedSet.getIterator();for(;n.hasNext();){const u=n.getNext().key,h=o.getNext().key;if(!u.isEqual(h))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,n){const o=new zd;return o.comparator=this.comparator,o.keyedMap=e,o.sortedSet=n,o}}class Ym{constructor(){this.B_=new Br($t.comparator)}track(e){const n=e.doc.key,o=this.B_.get(n);o?0!==e.type&&3===o.type?this.B_=this.B_.insert(n,e):3===e.type&&1!==o.type?this.B_=this.B_.insert(n,{type:o.type,doc:e.doc}):2===e.type&&2===o.type?this.B_=this.B_.insert(n,{type:2,doc:e.doc}):2===e.type&&0===o.type?this.B_=this.B_.insert(n,{type:0,doc:e.doc}):1===e.type&&0===o.type?this.B_=this.B_.remove(n):1===e.type&&2===o.type?this.B_=this.B_.insert(n,{type:1,doc:o.doc}):0===e.type&&1===o.type?this.B_=this.B_.insert(n,{type:2,doc:e.doc}):tn():this.B_=this.B_.insert(n,e)}L_(){const e=[];return this.B_.inorderTraversal((n,o)=>{e.push(o)}),e}}class Nh{constructor(e,n,o,u,h,v,P,V,z){this.query=e,this.docs=n,this.oldDocs=o,this.docChanges=u,this.mutatedKeys=h,this.fromCache=v,this.syncStateChanged=P,this.excludesMetadataChanges=V,this.hasCachedResults=z}static fromInitialDocuments(e,n,o,u,h){const v=[];return n.forEach(P=>{v.push({type:0,doc:P})}),new Nh(e,n,zd.emptySet(n),v,o,u,!0,!1,h)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Be(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,o=e.docChanges;if(n.length!==o.length)return!1;for(let u=0;u<n.length;u++)if(n[u].type!==o[u].type||!n[u].doc.isEqual(o[u].doc))return!1;return!0}}class c0{constructor(){this.k_=void 0,this.listeners=[]}}class Ev{constructor(){this.queries=new Ws(e=>st(e),Be),this.onlineState="Unknown",this.q_=new Set}}function Tg(i,e){return Zm.apply(this,arguments)}function Zm(){return Zm=(0,Ve.Z)(function*(i,e){const n=Gt(i),o=e.query;let u=!1,h=n.queries.get(o);if(h||(u=!0,h=new c0),u)try{h.k_=yield n.onListen(o)}catch(v){const P=Ef(v,`Initialization of query '${Dt(e.query)}' failed`);return void e.onError(P)}n.queries.set(o,h),h.listeners.push(e),e.Q_(n.onlineState),h.k_&&e.K_(h.k_)&&ml(n)}),Zm.apply(this,arguments)}function Qm(i,e){return bg.apply(this,arguments)}function bg(){return bg=(0,Ve.Z)(function*(i,e){const n=Gt(i),o=e.query;let u=!1;const h=n.queries.get(o);if(h){const v=h.listeners.indexOf(e);v>=0&&(h.listeners.splice(v,1),u=0===h.listeners.length)}if(u)return n.queries.delete(o),n.onUnlisten(o)}),bg.apply(this,arguments)}function Tv(i,e){const n=Gt(i);let o=!1;for(const u of e){const v=n.queries.get(u.query);if(v){for(const P of v.listeners)P.K_(u)&&(o=!0);v.k_=u}}o&&ml(n)}function Tf(i,e,n){const o=Gt(i),u=o.queries.get(e);if(u)for(const h of u.listeners)h.onError(n);o.queries.delete(e)}function ml(i){i.q_.forEach(e=>{e.next()})}class Wd{constructor(e,n,o){this.query=e,this.U_=n,this.W_=!1,this.G_=null,this.onlineState="Unknown",this.options=o||{}}K_(e){if(!this.options.includeMetadataChanges){const o=[];for(const u of e.docChanges)3!==u.type&&o.push(u);e=new Nh(e.query,e.docs,e.oldDocs,o,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.W_?this.z_(e)&&(this.U_.next(e),n=!0):this.j_(e,this.onlineState)&&(this.H_(e),n=!0),this.G_=e,n}onError(e){this.U_.error(e)}Q_(e){this.onlineState=e;let n=!1;return this.G_&&!this.W_&&this.j_(this.G_,e)&&(this.H_(this.G_),n=!0),n}j_(e,n){return!e.fromCache||(!this.options.J_||!("Offline"!==n))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===n)}z_(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.G_&&this.G_.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}H_(e){e=Nh.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.W_=!0,this.U_.next(e)}}class l0{constructor(e,n){this.Y_=e,this.byteLength=n}Z_(){return"metadata"in this.Y_}}class bv{constructor(e){this.serializer=e}hs(e){return Ya(this.serializer,e)}Ps(e){return e.metadata.exists?ef(this.serializer,e.document,!1):Jn.newNoDocument(this.hs(e.metadata.name),this.Is(e.metadata.readTime))}Is(e){return ls(e)}}class wv{constructor(e,n,o){this.X_=e,this.localStore=n,this.serializer=o,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=Jm(e)}ea(e){this.progress.bytesLoaded+=e.byteLength;let n=this.progress.documentsLoaded;if(e.Y_.namedQuery)this.queries.push(e.Y_.namedQuery);else if(e.Y_.documentMetadata){this.documents.push({metadata:e.Y_.documentMetadata}),e.Y_.documentMetadata.exists||++n;const o=Xn.fromString(e.Y_.documentMetadata.name);this.collectionGroups.add(o.get(o.length-2))}else e.Y_.document&&(this.documents[this.documents.length-1].document=e.Y_.document,++n);return n!==this.progress.documentsLoaded?(this.progress.documentsLoaded=n,Object.assign({},this.progress)):null}ta(e){const n=new Map,o=new bv(this.serializer);for(const u of e)if(u.metadata.queries){const h=o.hs(u.metadata.name);for(const v of u.metadata.queries){const P=(n.get(v)||sr()).add(h);n.set(v,P)}}return n}complete(){var e=this;return(0,Ve.Z)(function*(){const n=yield function mf(i,e,n,o){return Hd.apply(this,arguments)}(e.localStore,new bv(e.serializer),e.documents,e.X_.id),o=e.ta(e.documents);for(const u of e.queries)yield up(e.localStore,u,o.get(u.name));return e.progress.taskState="Success",{progress:e.progress,na:e.collectionGroups,ra:n}})()}}function Jm(i){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:i.totalDocuments,totalBytes:i.totalBytes}}class wg{constructor(e){this.key=e}}class bf{constructor(e){this.key=e}}class yp{constructor(e,n){this.query=e,this.ia=n,this.sa=null,this.hasCachedResults=!1,this.current=!1,this.oa=sr(),this.mutatedKeys=sr(),this._a=Ar(e),this.aa=new zd(this._a)}get ua(){return this.ia}ca(e,n){const o=n?n.la:new Ym,u=n?n.aa:this.aa;let h=n?n.mutatedKeys:this.mutatedKeys,v=u,P=!1;const V="F"===this.query.limitType&&u.size===this.query.limit?u.last():null,z="L"===this.query.limitType&&u.size===this.query.limit?u.first():null;if(e.inorderTraversal((ee,le)=>{const Ae=u.get(ee),Xe=ln(this.query,le)?le:null,kt=!!Ae&&this.mutatedKeys.has(Ae.key),zt=!!Xe&&(Xe.hasLocalMutations||this.mutatedKeys.has(Xe.key)&&Xe.hasCommittedMutations);let Wt=!1;Ae&&Xe?Ae.data.isEqual(Xe.data)?kt!==zt&&(o.track({type:3,doc:Xe}),Wt=!0):this.ha(Ae,Xe)||(o.track({type:2,doc:Xe}),Wt=!0,(V&&this._a(Xe,V)>0||z&&this._a(Xe,z)<0)&&(P=!0)):!Ae&&Xe?(o.track({type:0,doc:Xe}),Wt=!0):Ae&&!Xe&&(o.track({type:1,doc:Ae}),Wt=!0,(V||z)&&(P=!0)),Wt&&(Xe?(v=v.add(Xe),h=zt?h.add(ee):h.delete(ee)):(v=v.delete(ee),h=h.delete(ee)))}),null!==this.query.limit)for(;v.size>this.query.limit;){const ee="F"===this.query.limitType?v.last():v.first();v=v.delete(ee.key),h=h.delete(ee.key),o.track({type:1,doc:ee})}return{aa:v,la:o,Zi:P,mutatedKeys:h}}ha(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,o){const u=this.aa;this.aa=e.aa,this.mutatedKeys=e.mutatedKeys;const h=e.la.L_();h.sort((z,ee)=>function(Ae,Xe){const kt=zt=>{switch(zt){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return tn()}};return kt(Ae)-kt(Xe)}(z.type,ee.type)||this._a(z.doc,ee.doc)),this.Pa(o);const v=n?this.Ia():[],P=0===this.oa.size&&this.current?1:0,V=P!==this.sa;return this.sa=P,0!==h.length||V?{snapshot:new Nh(this.query,e.aa,u,h,e.mutatedKeys,0===P,V,!1,!!o&&o.resumeToken.approximateByteSize()>0),Ta:v}:{Ta:v}}Q_(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({aa:this.aa,la:new Ym,mutatedKeys:this.mutatedKeys,Zi:!1},!1)):{Ta:[]}}Ea(e){return!this.ia.has(e)&&!!this.aa.has(e)&&!this.aa.get(e).hasLocalMutations}Pa(e){e&&(e.addedDocuments.forEach(n=>this.ia=this.ia.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.ia=this.ia.delete(n)),this.current=e.current)}Ia(){if(!this.current)return[];const e=this.oa;this.oa=sr(),this.aa.forEach(o=>{this.Ea(o.key)&&(this.oa=this.oa.add(o.key))});const n=[];return e.forEach(o=>{this.oa.has(o)||n.push(new bf(o))}),this.oa.forEach(o=>{e.has(o)||n.push(new wg(o))}),n}da(e){this.ia=e.ls,this.oa=sr();const n=this.ca(e.documents);return this.applyChanges(n,!0)}Aa(){return Nh.fromInitialDocuments(this.query,this.aa,this.mutatedKeys,0===this.sa,this.hasCachedResults)}}class Dv{constructor(e,n,o){this.query=e,this.targetId=n,this.view=o}}class Cv{constructor(e){this.key=e,this.Ra=!1}}class d0{constructor(e,n,o,u,h,v){this.localStore=e,this.remoteStore=n,this.eventManager=o,this.sharedClientState=u,this.currentUser=h,this.maxConcurrentLimboResolutions=v,this.Va={},this.ma=new Ws(P=>st(P),Be),this.fa=new Map,this.ga=new Set,this.pa=new Br($t.comparator),this.ya=new Map,this.wa=new so,this.Sa={},this.ba=new Map,this.Da=c.Nn(),this.onlineState="Unknown",this.Ca=void 0}get isPrimaryClient(){return!0===this.Ca}}function h0(i,e){return Xm.apply(this,arguments)}function Xm(){return Xm=(0,Ve.Z)(function*(i,e){const n=h_(i);let o,u;const h=n.ma.get(e);if(h)o=h.targetId,n.sharedClientState.addLocalQueryTarget(o),u=h.view.Aa();else{const v=yield dc(n.localStore,T(e)),P=n.sharedClientState.addLocalQueryTarget(v.targetId);o=v.targetId,u=yield e_(n,e,o,"current"===P,v.resumeToken),n.isPrimaryClient&&pp(n.remoteStore,v)}return u}),Xm.apply(this,arguments)}function e_(i,e,n,o,u){return Dg.apply(this,arguments)}function Dg(){return Dg=(0,Ve.Z)(function*(i,e,n,o,u){i.va=(le,Ae,Xe)=>{return(kt=(0,Ve.Z)(function*(Wt,xn,Zn,On){let Mr=xn.view.ca(Zn);Mr.Zi&&(Mr=yield Dh(Wt.localStore,xn.query,!1).then(({documents:bo})=>xn.view.ca(bo,Mr)));const ui=On&&On.targetChanges.get(xn.targetId),li=xn.view.applyChanges(Mr,Wt.isPrimaryClient,ui);return wf(Wt,xn.targetId,li.Ta),li.snapshot}),function zt(Wt,xn,Zn,On){return kt.apply(this,arguments)})(i,le,Ae,Xe);var kt};const h=yield Dh(i.localStore,e,!0),v=new yp(e,h.ls),P=v.ca(h.documents),V=G.createSynthesizedTargetChangeForCurrentChange(n,o&&"Offline"!==i.onlineState,u),z=v.applyChanges(P,i.isPrimaryClient,V);wf(i,n,z.Ta);const ee=new Dv(e,n,v);return i.ma.set(e,ee),i.fa.has(n)?i.fa.get(n).push(e):i.fa.set(n,[e]),z.snapshot}),Dg.apply(this,arguments)}function WI(i,e){return t_.apply(this,arguments)}function t_(){return t_=(0,Ve.Z)(function*(i,e){const n=Gt(i),o=n.ma.get(e),u=n.fa.get(o.targetId);if(u.length>1)return n.fa.set(o.targetId,u.filter(h=>!Be(h,e))),void n.ma.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(o.targetId),n.sharedClientState.isActiveQueryTarget(o.targetId)||(yield Gl(n.localStore,o.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(o.targetId),gp(n.remoteStore,o.targetId),Oh(n,o.targetId)}).catch(A))):(Oh(n,o.targetId),yield Gl(n.localStore,o.targetId,!0))}),t_.apply(this,arguments)}function Av(){return Av=(0,Ve.Z)(function*(i,e,n){const o=xv(i);try{const u=yield function(v,P){const V=Gt(v),z=Rr.now(),ee=P.reduce((Xe,kt)=>Xe.add(kt.key),sr());let le,Ae;return V.persistence.runTransaction("Locally write mutations","readwrite",Xe=>{let kt=yo(),zt=sr();return V.ss.getEntries(Xe,ee).next(Wt=>{kt=Wt,kt.forEach((xn,Zn)=>{Zn.isValidDocument()||(zt=zt.add(xn))})}).next(()=>V.localDocuments.getOverlayedDocuments(Xe,kt)).next(Wt=>{le=Wt;const xn=[];for(const Zn of P){const On=fa(Zn,le.get(Zn.key).overlayedDocument);null!=On&&xn.push(new vu(Zn.key,On,Cl(On.value.mapValue),Ai.exists(!0)))}return V.mutationQueue.addMutationBatch(Xe,z,xn,P)}).next(Wt=>{Ae=Wt;const xn=Wt.applyToLocalDocumentSet(le,zt);return V.documentOverlayCache.saveOverlays(Xe,Wt.batchId,xn)})}).then(()=>({batchId:Ae.batchId,changes:sc(le)}))}(o.localStore,e);o.sharedClientState.addPendingMutation(u.batchId),function(v,P,V){let z=v.Sa[v.currentUser.toKey()];z||(z=new Br(jn)),z=z.insert(P,V),v.Sa[v.currentUser.toKey()]=z}(o,u.batchId,n),yield hc(o,u.changes),yield _p(o.remoteStore)}catch(u){const h=Ef(u,"Failed to persist write");n.reject(h)}}),Av.apply(this,arguments)}function n_(i,e){return Cg.apply(this,arguments)}function Cg(){return Cg=(0,Ve.Z)(function*(i,e){const n=Gt(i);try{const o=yield function Pm(i,e){const n=Gt(i),o=e.snapshotVersion;let u=n.ts;return n.persistence.runTransaction("Apply remote event","readwrite-primary",h=>{const v=n.ss.newChangeBuffer({trackRemovals:!0});u=n.ts;const P=[];e.targetChanges.forEach((ee,le)=>{const Ae=u.get(le);if(!Ae)return;P.push(n.qr.removeMatchingKeys(h,ee.removedDocuments,le).next(()=>n.qr.addMatchingKeys(h,ee.addedDocuments,le)));let Xe=Ae.withSequenceNumber(h.currentSequenceNumber);var zt,Wt,xn;null!==e.targetMismatches.get(le)?Xe=Xe.withResumeToken(as.EMPTY_BYTE_STRING,rn.min()).withLastLimboFreeSnapshotVersion(rn.min()):ee.resumeToken.approximateByteSize()>0&&(Xe=Xe.withResumeToken(ee.resumeToken,o)),u=u.insert(le,Xe),Wt=Xe,xn=ee,(0===(zt=Ae).resumeToken.approximateByteSize()||Wt.snapshotVersion.toMicroseconds()-zt.snapshotVersion.toMicroseconds()>=3e8||xn.addedDocuments.size+xn.modifiedDocuments.size+xn.removedDocuments.size>0)&&P.push(n.qr.updateTargetData(h,Xe))});let V=yo(),z=sr();if(e.documentUpdates.forEach(ee=>{e.resolvedLimboDocuments.has(ee)&&P.push(n.persistence.referenceDelegate.updateLimboDocument(h,ee))}),P.push(ug(h,v,e.documentUpdates).next(ee=>{V=ee.us,z=ee.cs})),!o.isEqual(rn.min())){const ee=n.qr.getLastRemoteSnapshotVersion(h).next(le=>n.qr.setTargetsMetadata(h,h.currentSequenceNumber,o));P.push(ee)}return k.waitFor(P).next(()=>v.apply(h)).next(()=>n.localDocuments.getLocalViewOfDocuments(h,V,z)).next(()=>V)}).then(h=>(n.ts=u,h))}(n.localStore,e);e.targetChanges.forEach((u,h)=>{const v=n.ya.get(h);v&&(pn(u.addedDocuments.size+u.modifiedDocuments.size+u.removedDocuments.size<=1),u.addedDocuments.size>0?v.Ra=!0:u.modifiedDocuments.size>0?pn(v.Ra):u.removedDocuments.size>0&&(pn(v.Ra),v.Ra=!1))}),yield hc(n,o,e)}catch(o){yield A(o)}}),Cg.apply(this,arguments)}function f0(i,e,n){const o=Gt(i);if(o.isPrimaryClient&&0===n||!o.isPrimaryClient&&1===n){const u=[];o.ma.forEach((h,v)=>{const P=v.view.Q_(e);P.snapshot&&u.push(P.snapshot)}),function(v,P){const V=Gt(v);V.onlineState=P;let z=!1;V.queries.forEach((ee,le)=>{for(const Ae of le.listeners)Ae.Q_(P)&&(z=!0)}),z&&ml(V)}(o.eventManager,e),u.length&&o.Va.a_(u),o.onlineState=e,o.isPrimaryClient&&o.sharedClientState.setOnlineState(e)}}function Ag(i,e,n){return Sg.apply(this,arguments)}function Sg(){return Sg=(0,Ve.Z)(function*(i,e,n){const o=Gt(i);o.sharedClientState.updateQueryState(e,"rejected",n);const u=o.ya.get(e),h=u&&u.key;if(h){let v=new Br($t.comparator);v=v.insert(h,Jn.newNoDocument(h,rn.min()));const P=sr().add(h),V=new C(rn.min(),new Map,new Br(jn),v,P);yield n_(o,V),o.pa=o.pa.remove(h),o.ya.delete(e),Ip(o)}else yield Gl(o.localStore,e,!1).then(()=>Oh(o,e,n)).catch(A)}),Sg.apply(this,arguments)}function Sv(i,e){return r_.apply(this,arguments)}function r_(){return r_=(0,Ve.Z)(function*(i,e){const n=Gt(i),o=e.batch.batchId;try{const u=yield function ap(i,e){const n=Gt(i);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",o=>{const u=e.batch.keys(),h=n.ss.newChangeBuffer({trackRemovals:!0});return function(P,V,z,ee){const le=z.batch,Ae=le.keys();let Xe=k.resolve();return Ae.forEach(kt=>{Xe=Xe.next(()=>ee.getEntry(V,kt)).next(zt=>{const Wt=z.docVersions.get(kt);pn(null!==Wt),zt.version.compareTo(Wt)<0&&(le.applyToRemoteDocument(zt,z),zt.isValidDocument()&&(zt.setReadTime(z.commitVersion),ee.addEntry(zt)))})}),Xe.next(()=>P.mutationQueue.removeMutationBatch(V,le))}(n,o,e,h).next(()=>h.apply(o)).next(()=>n.mutationQueue.performConsistencyCheck(o)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(o,u,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(o,function(P){let V=sr();for(let z=0;z<P.mutationResults.length;++z)P.mutationResults[z].transformResults.length>0&&(V=V.add(P.batch.mutations[z].key));return V}(e))).next(()=>n.localDocuments.getDocuments(o,u))})}(n.localStore,e);qd(n,o,null),Og(n,o),n.sharedClientState.updateMutationState(o,"acknowledged"),yield hc(n,u)}catch(u){yield A(u)}}),r_.apply(this,arguments)}function Rv(i,e,n){return Rg.apply(this,arguments)}function Rg(){return Rg=(0,Ve.Z)(function*(i,e,n){const o=Gt(i);try{const u=yield function(v,P){const V=Gt(v);return V.persistence.runTransaction("Reject batch","readwrite-primary",z=>{let ee;return V.mutationQueue.lookupMutationBatch(z,P).next(le=>(pn(null!==le),ee=le.keys(),V.mutationQueue.removeMutationBatch(z,le))).next(()=>V.mutationQueue.performConsistencyCheck(z)).next(()=>V.documentOverlayCache.removeOverlaysForBatchId(z,ee,P)).next(()=>V.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(z,ee)).next(()=>V.localDocuments.getDocuments(z,ee))})}(o.localStore,e);qd(o,e,n),Og(o,e),o.sharedClientState.updateMutationState(e,"rejected",n),yield hc(o,u)}catch(u){yield A(u)}}),Rg.apply(this,arguments)}function Ng(){return Ng=(0,Ve.Z)(function*(i,e){const n=Gt(i);zl(n.remoteStore)||Et("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const o=yield function(v){const P=Gt(v);return P.persistence.runTransaction("Get highest unacknowledged batch id","readonly",V=>P.mutationQueue.getHighestUnacknowledgedBatchId(V))}(n.localStore);if(-1===o)return void e.resolve();const u=n.ba.get(o)||[];u.push(e),n.ba.set(o,u)}catch(o){const u=Ef(o,"Initialization of waitForPendingWrites() operation failed");e.reject(u)}}),Ng.apply(this,arguments)}function Og(i,e){(i.ba.get(e)||[]).forEach(n=>{n.resolve()}),i.ba.delete(e)}function qd(i,e,n){const o=Gt(i);let u=o.Sa[o.currentUser.toKey()];if(u){const h=u.get(e);h&&(n?h.reject(n):h.resolve(),u=u.remove(e)),o.Sa[o.currentUser.toKey()]=u}}function Oh(i,e,n=null){i.sharedClientState.removeLocalQueryTarget(e);for(const o of i.fa.get(e))i.ma.delete(o),n&&i.Va.Fa(o,n);i.fa.delete(e),i.isPrimaryClient&&i.wa.Rr(e).forEach(o=>{i.wa.containsKey(o)||Nv(i,o)})}function Nv(i,e){i.ga.delete(e.path.canonicalString());const n=i.pa.get(e);null!==n&&(gp(i.remoteStore,n),i.pa=i.pa.remove(e),i.ya.delete(n),Ip(i))}function wf(i,e,n){for(const o of n)o instanceof wg?(i.wa.addReference(o.key,e),Df(i,o)):o instanceof bf?(Et("SyncEngine","Document no longer in limbo: "+o.key),i.wa.removeReference(o.key,e),i.wa.containsKey(o.key)||Nv(i,o.key)):tn()}function Df(i,e){const n=e.key,o=n.path.canonicalString();i.pa.get(n)||i.ga.has(o)||(Et("SyncEngine","New document in limbo: "+n),i.ga.add(o),Ip(i))}function Ip(i){for(;i.ga.size>0&&i.pa.size<i.maxConcurrentLimboResolutions;){const e=i.ga.values().next().value;i.ga.delete(e);const n=new $t(Xn.fromString(e)),o=i.Da.next();i.ya.set(o,new Cv(n)),i.pa=i.pa.insert(n,o),pp(i.remoteStore,new Lu(T(rl(n.path)),o,"TargetPurposeLimboResolution",Zi._e))}}function hc(i,e,n){return Pg.apply(this,arguments)}function Pg(){return Pg=(0,Ve.Z)(function*(i,e,n){const o=Gt(i),u=[],h=[],v=[];var P;o.ma.isEmpty()||(o.ma.forEach((P,V)=>{v.push(o.va(V,e,n).then(z=>{if((z||n)&&o.isPrimaryClient&&o.sharedClientState.updateQueryState(V.targetId,z?.fromCache?"not-current":"current"),z){u.push(z);const ee=pl.Qi(V.targetId,z);h.push(ee)}}))}),yield Promise.all(v),o.Va.a_(u),yield(P=(0,Ve.Z)(function*(z,ee){const le=Gt(z);try{yield le.persistence.runTransaction("notifyLocalViewChanges","readwrite",Ae=>k.forEach(ee,Xe=>k.forEach(Xe.ki,kt=>le.persistence.referenceDelegate.addReference(Ae,Xe.targetId,kt)).next(()=>k.forEach(Xe.qi,kt=>le.persistence.referenceDelegate.removeReference(Ae,Xe.targetId,kt)))))}catch(Ae){if(!Ut(Ae))throw Ae;Et("LocalStore","Failed to update sequence numbers: "+Ae)}for(const Ae of ee){const Xe=Ae.targetId;if(!Ae.fromCache){const kt=le.ts.get(Xe),Wt=kt.withLastLimboFreeSnapshotVersion(kt.snapshotVersion);le.ts=le.ts.insert(Xe,Wt)}}}),function V(z,ee){return P.apply(this,arguments)})(o.localStore,h))}),Pg.apply(this,arguments)}function i_(i,e){return Ep.apply(this,arguments)}function Ep(){return Ep=(0,Ve.Z)(function*(i,e){const n=Gt(i);if(!n.currentUser.isEqual(e)){Et("SyncEngine","User change. New user:",e.toKey());const o=yield op(n.localStore,e);n.currentUser=e,(h=n).ba.forEach(P=>{P.forEach(V=>{V.reject(new vt(et.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),h.ba.clear(),n.sharedClientState.handleUserChange(e,o.removedBatchIds,o.addedBatchIds),yield hc(n,o._s)}var h}),Ep.apply(this,arguments)}function s_(i,e){const n=Gt(i),o=n.ya.get(e);if(o&&o.Ra)return sr().add(o.key);{let u=sr();const h=n.fa.get(e);if(!h)return u;for(const v of h){const P=n.ma.get(v);u=u.unionWith(P.view.ua)}return u}}function Ov(i,e){return Tp.apply(this,arguments)}function Tp(){return Tp=(0,Ve.Z)(function*(i,e){const n=Gt(i),o=yield Dh(n.localStore,e.query,!0),u=e.view.da(o);return n.isPrimaryClient&&wf(n,e.targetId,u.Ta),u}),Tp.apply(this,arguments)}function p0(i,e){return o_.apply(this,arguments)}function o_(){return o_=(0,Ve.Z)(function*(i,e){const n=Gt(i);return Ch(n.localStore,e).then(o=>hc(n,o))}),o_.apply(this,arguments)}function g0(i,e,n,o){return Mg.apply(this,arguments)}function Mg(){return Mg=(0,Ve.Z)(function*(i,e,n,o){const u=Gt(i),h=yield function(P,V){const z=Gt(P),ee=Gt(z.mutationQueue);return z.persistence.runTransaction("Lookup mutation documents","readonly",le=>ee.Cn(le,V).next(Ae=>Ae?z.localDocuments.getDocuments(le,Ae):k.resolve(null)))}(u.localStore,e);var V;null!==h?("pending"===n?yield _p(u.remoteStore):"acknowledged"===n||"rejected"===n?(qd(u,e,o||null),Og(u,e),V=e,Gt(Gt(u.localStore).mutationQueue).Fn(V)):tn(),yield hc(u,h)):Et("SyncEngine","Cannot apply mutation batch with id: "+e)}),Mg.apply(this,arguments)}function a_(){return a_=(0,Ve.Z)(function*(i,e){const n=Gt(i);if(h_(n),xv(n),!0===e&&!0!==n.Ca){const o=n.sharedClientState.getAllActiveQueryTargets(),u=yield Pv(n,o.toArray());n.Ca=!0,yield Iv(n.remoteStore,!0);for(const h of u)pp(n.remoteStore,h)}else if(!1===e&&!1!==n.Ca){const o=[];let u=Promise.resolve();n.fa.forEach((h,v)=>{n.sharedClientState.isLocalQueryTarget(v)?o.push(v):u=u.then(()=>(Oh(n,v),Gl(n.localStore,v,!0))),gp(n.remoteStore,v)}),yield u,yield Pv(n,o),function(v){const P=Gt(v);P.ya.forEach((V,z)=>{gp(P.remoteStore,z)}),P.wa.Vr(),P.ya=new Map,P.pa=new Br($t.comparator)}(n),n.Ca=!1,yield Iv(n.remoteStore,!1)}}),a_.apply(this,arguments)}function Pv(i,e,n){return u_.apply(this,arguments)}function u_(){return u_=(0,Ve.Z)(function*(i,e,n){const o=Gt(i),u=[],h=[];for(const v of e){let P;const V=o.fa.get(v);if(V&&0!==V.length){P=yield dc(o.localStore,T(V[0]));for(const z of V){const ee=o.ma.get(z),le=yield Ov(o,ee);le.snapshot&&h.push(le.snapshot)}}else{const z=yield Gd(o.localStore,v);P=yield dc(o.localStore,z),yield e_(o,c_(z),v,!1,P.resumeToken)}u.push(P)}return o.Va.a_(h),u}),u_.apply(this,arguments)}function c_(i){return Nd(i.path,i.collectionGroup,i.orderBy,i.filters,i.limit,"F",i.startAt,i.endAt)}function Mv(i){return n=Gt(i).localStore,Gt(Gt(n).persistence).Bi();var n}function _0(i,e,n,o){return l_.apply(this,arguments)}function l_(){return l_=(0,Ve.Z)(function*(i,e,n,o){const u=Gt(i);if(u.Ca)return void Et("SyncEngine","Ignoring unexpected query state notification.");const h=u.fa.get(e);if(h&&h.length>0)switch(n){case"current":case"not-current":{const v=yield Ch(u.localStore,En(h[0])),P=C.createSynthesizedRemoteEventForCurrentChange(e,"current"===n,as.EMPTY_BYTE_STRING);yield hc(u,v,P);break}case"rejected":yield Gl(u.localStore,e,!0),Oh(u,e,o);break;default:tn()}}),l_.apply(this,arguments)}function fc(i,e,n){return d_.apply(this,arguments)}function d_(){return d_=(0,Ve.Z)(function*(i,e,n){const o=h_(i);if(o.Ca){for(const u of e){if(o.fa.has(u)){Et("SyncEngine","Adding an already active target "+u);continue}const h=yield Gd(o.localStore,u),v=yield dc(o.localStore,h);yield e_(o,c_(h),v.targetId,!1,v.resumeToken),pp(o.remoteStore,v)}for(const u of n)o.fa.has(u)&&(yield Gl(o.localStore,u,!1).then(()=>{gp(o.remoteStore,u),Oh(o,u)}).catch(A))}}),d_.apply(this,arguments)}function h_(i){const e=Gt(i);return e.remoteStore.remoteSyncer.applyRemoteEvent=n_.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=s_.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Ag.bind(null,e),e.Va.a_=Tv.bind(null,e.eventManager),e.Va.Fa=Tf.bind(null,e.eventManager),e}function xv(i){const e=Gt(i);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Sv.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Rv.bind(null,e),e}class Cf{constructor(){this.synchronizeTabs=!1}initialize(e){var n=this;return(0,Ve.Z)(function*(){n.serializer=yf(e.databaseInfo.databaseId),n.sharedClientState=n.createSharedClientState(e),n.persistence=n.createPersistence(e),yield n.persistence.start(),n.localStore=n.createLocalStore(e),n.gcScheduler=n.createGarbageCollectionScheduler(e,n.localStore),n.indexBackfillerScheduler=n.createIndexBackfillerScheduler(e,n.localStore)})()}createGarbageCollectionScheduler(e,n){return null}createIndexBackfillerScheduler(e,n){return null}createLocalStore(e){return sp(this.persistence,new og,e.initialUser,this.serializer)}createPersistence(e){return new ga(Vu.jr,this.serializer)}createSharedClientState(e){return new hv}terminate(){var e=this;return(0,Ve.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class p_ extends Cf{constructor(e,n,o){super(),this.xa=e,this.cacheSizeBytes=n,this.forceOwnership=o,this.synchronizeTabs=!1}initialize(e){var n=()=>super.initialize,o=this;return(0,Ve.Z)(function*(){yield n().call(o,e),yield o.xa.initialize(o,e),yield xv(o.xa.syncEngine),yield _p(o.xa.remoteStore),yield o.persistence.mi(()=>(o.gcScheduler&&!o.gcScheduler.started&&o.gcScheduler.start(),o.indexBackfillerScheduler&&!o.indexBackfillerScheduler.started&&o.indexBackfillerScheduler.start(),Promise.resolve()))})()}createLocalStore(e){return sp(this.persistence,new og,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,n){return new nt(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,n)}createIndexBackfillerScheduler(e,n){const o=new Wu(n,this.persistence);return new ti(e.asyncQueue,o)}createPersistence(e){const n=lc(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),o=void 0!==this.cacheSizeBytes?Pa.withCacheSize(this.cacheSizeBytes):Pa.DEFAULT;return new jl(this.synchronizeTabs,n,e.clientId,o,e.asyncQueue,pg(),gg(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new hv}}class kv extends p_{constructor(e,n){super(e,n,!1),this.xa=e,this.cacheSizeBytes=n,this.synchronizeTabs=!0}initialize(e){var n=()=>super.initialize,o=this;return(0,Ve.Z)(function*(){yield n().call(o,e);const u=o.xa.syncEngine;o.sharedClientState instanceof dg&&(o.sharedClientState.syncEngine={Ys:g0.bind(null,u),Zs:_0.bind(null,u),Xs:fc.bind(null,u),Bi:Mv.bind(null,u),Js:p0.bind(null,u)},yield o.sharedClientState.start()),yield o.persistence.mi(function(){var h=(0,Ve.Z)(function*(v){yield function m0(i,e){return a_.apply(this,arguments)}(o.xa.syncEngine,v),o.gcScheduler&&(v&&!o.gcScheduler.started?o.gcScheduler.start():v||o.gcScheduler.stop()),o.indexBackfillerScheduler&&(v&&!o.indexBackfillerScheduler.started?o.indexBackfillerScheduler.start():v||o.indexBackfillerScheduler.stop())});return function(v){return h.apply(this,arguments)}}())})()}createSharedClientState(e){const n=pg();if(!dg.D(n))throw new vt(et.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const o=lc(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new dg(n,e.asyncQueue,o,e.clientId,e.initialUser)}}class Ph{initialize(e,n){var o=this;return(0,Ve.Z)(function*(){o.localStore||(o.localStore=e.localStore,o.sharedClientState=e.sharedClientState,o.datastore=o.createDatastore(n),o.remoteStore=o.createRemoteStore(n),o.eventManager=o.createEventManager(n),o.syncEngine=o.createSyncEngine(n,!e.synchronizeTabs),o.sharedClientState.onlineStateHandler=u=>f0(o.syncEngine,u,1),o.remoteStore.remoteSyncer.handleCredentialChange=i_.bind(null,o.syncEngine),yield Iv(o.remoteStore,o.syncEngine.isPrimaryClient))})()}createEventManager(e){return new Ev}createDatastore(e){const n=yf(e.databaseInfo.databaseId),o=new fg(e.databaseInfo);return new n0(e.authCredentials,e.appCheckCredentials,o,n)}createRemoteStore(e){return o=this.localStore,u=this.datastore,h=e.asyncQueue,v=n=>f0(this.syncEngine,n,0),P=hg.D()?new hg:new Xy,new mg(o,u,h,v,P);var o,u,h,v,P}createSyncEngine(e,n){return function(u,h,v,P,V,z,ee){const le=new d0(u,h,v,P,V,z);return ee&&(le.Ca=!0),le}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}terminate(){return(e=(0,Ve.Z)(function*(o){const u=Gt(o);Et("RemoteStore","RemoteStore shutting down."),u.C_.add(5),yield $l(u),u.F_.shutdown(),u.M_.set("Unknown")}),function n(o){return e.apply(this,arguments)})(this.remoteStore);var e}}function Fv(i,e=10240){let n=0;return{read:()=>(0,Ve.Z)(function*(){if(n<i.byteLength){const o={value:i.slice(n,n+e),done:!1};return n+=e,o}return{done:!0}})(),cancel:()=>(0,Ve.Z)(function*(){})(),releaseLock(){},closed:Promise.resolve()}}class xg{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Oa(this.observer.next,e)}error(e){this.observer.error?this.Oa(this.observer.error,e):mi("Uncaught Error in snapshot listener:",e.toString())}Na(){this.muted=!0}Oa(e,n){this.muted||setTimeout(()=>{this.muted||e(n)},0)}}class g_{constructor(e,n){this.Ba=e,this.serializer=n,this.metadata=new Vs,this.buffer=new Uint8Array,this.La=new TextDecoder("utf-8"),this.ka().then(o=>{o&&o.Z_()?this.metadata.resolve(o.Y_.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(o?.Y_)}`))},o=>this.metadata.reject(o))}close(){return this.Ba.cancel()}getMetadata(){var e=this;return(0,Ve.Z)(function*(){return e.metadata.promise})()}Ma(){var e=this;return(0,Ve.Z)(function*(){return yield e.getMetadata(),e.ka()})()}ka(){var e=this;return(0,Ve.Z)(function*(){const n=yield e.qa();if(null===n)return null;const o=e.La.decode(n),u=Number(o);isNaN(u)&&e.Qa(`length string (${o}) is not valid number`);const h=yield e.Ka(u);return new l0(JSON.parse(h),n.length+u)})()}$a(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}qa(){var e=this;return(0,Ve.Z)(function*(){for(;e.$a()<0&&!(yield e.Ua()););if(0===e.buffer.length)return null;const n=e.$a();n<0&&e.Qa("Reached the end of bundle when a length string is expected.");const o=e.buffer.slice(0,n);return e.buffer=e.buffer.slice(n),o})()}Ka(e){var n=this;return(0,Ve.Z)(function*(){for(;n.buffer.length<e;)(yield n.Ua())&&n.Qa("Reached the end of bundle when more is expected.");const o=n.La.decode(n.buffer.slice(0,e));return n.buffer=n.buffer.slice(e),o})()}Qa(e){throw this.Ba.cancel(),new Error(`Invalid bundle format: ${e}`)}Ua(){var e=this;return(0,Ve.Z)(function*(){const n=yield e.Ba.read();if(!n.done){const o=new Uint8Array(e.buffer.length+n.value.length);o.set(e.buffer),o.set(n.value,e.buffer.length),e.buffer=o}return n.done})()}}class y0{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var n=this;return(0,Ve.Z)(function*(){if(n.ensureCommitNotCalled(),n.mutations.length>0)throw new vt(et.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const o=yield(u=(0,Ve.Z)(function*(v,P){const V=Gt(v),z=dl(V.serializer)+"/documents",ee={documents:P.map(kt=>ll(V.serializer,kt))},le=yield V.Co("BatchGetDocuments",z,ee,P.length),Ae=new Map;le.forEach(kt=>{const zt=function Tm(i,e){return"found"in e?function(o,u){pn(!!u.found);const h=Ya(o,u.found.name),v=ls(u.found.updateTime),P=u.found.createTime?ls(u.found.createTime):rn.min(),V=new us({mapValue:{fields:u.found.fields}});return Jn.newFoundDocument(h,v,P,V)}(i,e):"missing"in e?function(o,u){pn(!!u.missing),pn(!!u.readTime);const h=Ya(o,u.missing),v=ls(u.readTime);return Jn.newNoDocument(h,v)}(i,e):tn()}(V.serializer,kt);Ae.set(zt.key.toString(),zt)});const Xe=[];return P.forEach(kt=>{const zt=Ae.get(kt.toString());pn(!!zt),Xe.push(zt)}),Xe}),function h(v,P){return u.apply(this,arguments)})(n.datastore,e);var u;return o.forEach(u=>n.recordVersion(u)),o})()}set(e,n){this.write(n.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,n){try{this.write(n.toMutation(e,this.preconditionForUpdate(e)))}catch(o){this.lastWriteError=o}this.writtenDocs.add(e.toString())}delete(e){this.write(new al(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,Ve.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const n=e.readVersions;var o;e.mutations.forEach(o=>{n.delete(o.key.toString())}),n.forEach((o,u)=>{const h=$t.fromPath(u);e.mutations.push(new Eo(h,e.precondition(h)))}),yield(o=(0,Ve.Z)(function*(h,v){const P=Gt(h),V=dl(P.serializer)+"/documents",z={writes:v.map(ee=>fd(P.serializer,ee))};yield P.wo("Commit",V,z)}),function u(h,v){return o.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let n;if(e.isFoundDocument())n=e.version;else{if(!e.isNoDocument())throw tn();n=rn.min()}const o=this.readVersions.get(e.key.toString());if(o){if(!n.isEqual(o))throw new vt(et.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),n)}precondition(e){const n=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&n?n.isEqual(rn.min())?Ai.exists(!1):Ai.updateTime(n):Ai.none()}preconditionForUpdate(e){const n=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&n){if(n.isEqual(rn.min()))throw new vt(et.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Ai.updateTime(n)}return Ai.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class I0{constructor(e,n,o,u,h){this.asyncQueue=e,this.datastore=n,this.options=o,this.updateFunction=u,this.deferred=h,this.Wa=o.maxAttempts,this.zo=new dp(this.asyncQueue,"transaction_retry")}run(){this.Wa-=1,this.Ga()}Ga(){var e=this;this.zo.ko((0,Ve.Z)(function*(){const n=new y0(e.datastore),o=e.za(n);o&&o.then(u=>{e.asyncQueue.enqueueAndForget(()=>n.commit().then(()=>{e.deferred.resolve(u)}).catch(h=>{e.ja(h)}))}).catch(u=>{e.ja(u)})}))}za(e){try{const n=this.updateFunction(e);return!Sa(n)&&n.catch&&n.then?n:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(n){return this.deferred.reject(n),null}}ja(e){this.Wa>0&&this.Ha(e)?(this.Wa-=1,this.asyncQueue.enqueueAndForget(()=>(this.Ga(),Promise.resolve()))):this.deferred.reject(e)}Ha(e){if("FirebaseError"===e.name){const n=e.code;return"aborted"===n||"failed-precondition"===n||"already-exists"===n||!gh(n)}return!1}}class E0{constructor(e,n,o,u){var h=this;this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=o,this.databaseInfo=u,this.user=Vr.UNAUTHENTICATED,this.clientId=Cd.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(o,function(){var v=(0,Ve.Z)(function*(P){Et("FirestoreClient","Received user=",P.uid),yield h.authCredentialListener(P),h.user=P});return function(P){return v.apply(this,arguments)}}()),this.appCheckCredentials.start(o,v=>(Et("FirestoreClient","Received new app check token=",v),this.appCheckCredentialListener(v,this.user)))}getConfiguration(){var e=this;return(0,Ve.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new vt(et.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const n=new Vs;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,Ve.Z)(function*(){try{e._onlineComponents&&(yield e._onlineComponents.terminate()),e._offlineComponents&&(yield e._offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),n.resolve()}catch(o){const u=Ef(o,"Failed to shutdown persistence");n.reject(u)}})),n.promise}}function kg(i,e){return m_.apply(this,arguments)}function m_(){return m_=(0,Ve.Z)(function*(i,e){i.asyncQueue.verifyOperationInProgress(),Et("FirestoreClient","Initializing OfflineComponentProvider");const n=yield i.getConfiguration();yield e.initialize(n);let o=n.initialUser;i.setCredentialChangeListener(function(){var u=(0,Ve.Z)(function*(h){o.isEqual(h)||(yield op(e.localStore,h),o=h)});return function(h){return u.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>i.terminate()),i._offlineComponents=e}),m_.apply(this,arguments)}function Uc(i,e){return bp.apply(this,arguments)}function bp(){return bp=(0,Ve.Z)(function*(i,e){i.asyncQueue.verifyOperationInProgress();const n=yield Fg(i);Et("FirestoreClient","Initializing OnlineComponentProvider");const o=yield i.getConfiguration();yield e.initialize(n,o),i.setCredentialChangeListener(u=>Wm(e.remoteStore,u)),i.setAppCheckTokenChangeListener((u,h)=>Wm(e.remoteStore,h)),i._onlineComponents=e}),bp.apply(this,arguments)}function Lv(i){return"FirebaseError"===i.name?i.code===et.FAILED_PRECONDITION||i.code===et.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||22===i.code||20===i.code||11===i.code}function Fg(i){return __.apply(this,arguments)}function __(){return __=(0,Ve.Z)(function*(i){if(!i._offlineComponents)if(i._uninitializedComponentsProvider){Et("FirestoreClient","Using user provided OfflineComponentProvider");try{yield kg(i,i._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!Lv(n))throw n;_o("Error using user provided cache. Falling back to memory cache: "+n),yield kg(i,new Cf)}}else Et("FirestoreClient","Using default OfflineComponentProvider"),yield kg(i,new Cf);return i._offlineComponents}),__.apply(this,arguments)}function wp(i){return Lg.apply(this,arguments)}function Lg(){return Lg=(0,Ve.Z)(function*(i){return i._onlineComponents||(i._uninitializedComponentsProvider?(Et("FirestoreClient","Using user provided OnlineComponentProvider"),yield Uc(i,i._uninitializedComponentsProvider._online)):(Et("FirestoreClient","Using default OnlineComponentProvider"),yield Uc(i,new Ph))),i._onlineComponents}),Lg.apply(this,arguments)}function Dp(i){return Fg(i).then(e=>e.persistence)}function Kd(i){return Fg(i).then(e=>e.localStore)}function T0(i){return wp(i).then(e=>e.remoteStore)}function Vg(i){return wp(i).then(e=>e.syncEngine)}function Mh(i){return Bg.apply(this,arguments)}function Bg(){return Bg=(0,Ve.Z)(function*(i){const e=yield wp(i),n=e.eventManager;return n.onListen=h0.bind(null,e.syncEngine),n.onUnlisten=WI.bind(null,e.syncEngine),n}),Bg.apply(this,arguments)}function Vv(i,e,n={}){const o=new Vs;return i.asyncQueue.enqueueAndForget((0,Ve.Z)(function*(){return function(h,v,P,V,z){const ee=new xg({next:Ae=>{v.enqueueAndForget(()=>Qm(h,le));const Xe=Ae.docs.has(P);!Xe&&Ae.fromCache?z.reject(new vt(et.UNAVAILABLE,"Failed to get document because the client is offline.")):Xe&&Ae.fromCache&&V&&"server"===V.source?z.reject(new vt(et.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):z.resolve(Ae)},error:Ae=>z.reject(Ae)}),le=new Wd(rl(P.path),ee,{includeMetadataChanges:!0,J_:!0});return Tg(h,le)}(yield Mh(i),i.asyncQueue,e,n,o)})),o.promise}function Bv(i,e,n={}){const o=new Vs;return i.asyncQueue.enqueueAndForget((0,Ve.Z)(function*(){return function(h,v,P,V,z){const ee=new xg({next:Ae=>{v.enqueueAndForget(()=>Qm(h,le)),Ae.fromCache&&"server"===V.source?z.reject(new vt(et.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):z.resolve(Ae)},error:Ae=>z.reject(Ae)}),le=new Wd(P,ee,{includeMetadataChanges:!0,J_:!0});return Tg(h,le)}(yield Mh(i),i.asyncQueue,e,n,o)})),o.promise}function D0(i){const e={};return void 0!==i.timeoutSeconds&&(e.timeoutSeconds=i.timeoutSeconds),e}const Gv=new Map;function Gg(i,e,n){if(!n)throw new vt(et.INVALID_ARGUMENT,`Function ${i}() cannot be called with an empty ${e}.`)}function E_(i,e,n,o){if(!0===e&&!0===o)throw new vt(et.INVALID_ARGUMENT,`${i} and ${n} cannot be used together.`)}function Hv(i){if(!$t.isDocumentKey(i))throw new vt(et.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${i} has ${i.length}.`)}function $v(i){if($t.isDocumentKey(i))throw new vt(et.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${i} has ${i.length}.`)}function Ap(i){if(void 0===i)return"undefined";if(null===i)return"null";if("string"==typeof i)return i.length>20&&(i=`${i.substring(0,20)}...`),JSON.stringify(i);if("number"==typeof i||"boolean"==typeof i)return""+i;if("object"==typeof i){if(i instanceof Array)return"an array";{const e=(o=i).constructor?o.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var o;return"function"==typeof i?"a function":tn()}function Ur(i,e){if("_delegate"in i&&(i=i._delegate),!(i instanceof e)){if(e.name===i.constructor.name)throw new vt(et.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Ap(i);throw new vt(et.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return i}function Af(i,e){if(e<=0)throw new vt(et.INVALID_ARGUMENT,`Function ${i}() requires a positive number, but it was: ${e}.`)}class zv{constructor(e){var n,o;if(void 0===e.host){if(void 0!==e.ssl)throw new vt(et.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(n=e.ssl)||void 0===n||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new vt(et.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}E_("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!(this.experimentalForceLongPolling||void 0!==e.experimentalAutoDetectLongPolling&&!e.experimentalAutoDetectLongPolling),this.experimentalLongPollingOptions=D0(null!==(o=e.experimentalLongPollingOptions)&&void 0!==o?o:{}),function(h){if(void 0!==h.timeoutSeconds){if(isNaN(h.timeoutSeconds))throw new vt(et.INVALID_ARGUMENT,`invalid long polling timeout: ${h.timeoutSeconds} (must not be NaN)`);if(h.timeoutSeconds<5)throw new vt(et.INVALID_ARGUMENT,`invalid long polling timeout: ${h.timeoutSeconds} (minimum allowed value is 5)`);if(h.timeoutSeconds>30)throw new vt(et.INVALID_ARGUMENT,`invalid long polling timeout: ${h.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.experimentalLongPollingOptions.timeoutSeconds===e.experimentalLongPollingOptions.timeoutSeconds&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Sf{constructor(e,n,o,u){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=o,this._app=u,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new zv({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new vt(et.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new vt(et.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new zv(e),void 0!==e.credentials&&(this._authCredentials=function(o){if(!o)return new Dd;switch(o.type){case"firstParty":return new ir(o.sessionIndex||"0",o.iamToken||null,o.authTokenFactory||null);case"provider":return o.client;default:throw new vt(et.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const o=Gv.get(n);o&&(Et("ComponentProvider","Removing Datastore"),Gv.delete(n),o.terminate())}(this),Promise.resolve()}}class xa{constructor(e,n,o){this.converter=n,this._query=o,this.type="query",this.firestore=e}withConverter(e){return new xa(this.firestore,e,this._query)}}class Ps{constructor(e,n,o){this.converter=n,this._key=o,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ju(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Ps(this.firestore,e,this._key)}}class ju extends xa{constructor(e,n,o){super(e,n,rl(o)),this._path=o,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Ps(this.firestore,null,new $t(e))}withConverter(e){return new ju(this.firestore,e,this._path)}}function Wv(i,e,...n){if(i=(0,ze.m9)(i),Gg("collection","path",e),i instanceof Sf){const o=Xn.fromString(e,...n);return $v(o),new ju(i,null,o)}{if(!(i instanceof Ps||i instanceof ju))throw new vt(et.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const o=i._path.child(Xn.fromString(e,...n));return $v(o),new ju(i.firestore,null,o)}}function Hg(i,e,...n){if(i=(0,ze.m9)(i),1===arguments.length&&(e=Cd.newId()),Gg("doc","path",e),i instanceof Sf){const o=Xn.fromString(e,...n);return Hv(o),new Ps(i,null,new $t(o))}{if(!(i instanceof Ps||i instanceof ju))throw new vt(et.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const o=i._path.child(Xn.fromString(e,...n));return Hv(o),new Ps(i.firestore,i instanceof ju?i.converter:null,new $t(o))}}function qv(i,e){return i=(0,ze.m9)(i),e=(0,ze.m9)(e),(i instanceof Ps||i instanceof ju)&&(e instanceof Ps||e instanceof ju)&&i.firestore===e.firestore&&i.path===e.path&&i.converter===e.converter}function b_(i,e){return i=(0,ze.m9)(i),e=(0,ze.m9)(e),i instanceof xa&&e instanceof xa&&i.firestore===e.firestore&&Be(i._query,e._query)&&i.converter===e.converter}class A0{constructor(){this.Ja=Promise.resolve(),this.Ya=[],this.Za=!1,this.Xa=[],this.eu=null,this.tu=!1,this.nu=!1,this.ru=[],this.zo=new dp(this,"async_queue_retry"),this.iu=()=>{const n=gg();n&&Et("AsyncQueue","Visibility state changed to "+n.visibilityState),this.zo.Qo()};const e=gg();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.iu)}get isShuttingDown(){return this.Za}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.su(),this.ou(e)}enterRestrictedMode(e){if(!this.Za){this.Za=!0,this.nu=e||!1;const n=gg();n&&"function"==typeof n.removeEventListener&&n.removeEventListener("visibilitychange",this.iu)}}enqueue(e){if(this.su(),this.Za)return new Promise(()=>{});const n=new Vs;return this.ou(()=>this.Za&&this.nu?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Ya.push(e),this._u()))}_u(){var e=this;return(0,Ve.Z)(function*(){if(0!==e.Ya.length){try{yield e.Ya[0](),e.Ya.shift(),e.zo.reset()}catch(n){if(!Ut(n))throw n;Et("AsyncQueue","Operation failed with retryable error: "+n)}e.Ya.length>0&&e.zo.ko(()=>e._u())}})()}ou(e){const n=this.Ja.then(()=>(this.tu=!0,e().catch(o=>{throw this.eu=o,this.tu=!1,mi("INTERNAL UNHANDLED ERROR: ",function(v){let P=v.message||"";return v.stack&&(P=v.stack.includes(v.message)?v.stack:v.message+"\n"+v.stack),P}(o)),o}).then(o=>(this.tu=!1,o))));return this.Ja=n,n}enqueueAfterDelay(e,n,o){this.su(),this.ru.indexOf(e)>-1&&(n=0);const u=Km.createAndSchedule(this,e,n,o,h=>this.au(h));return this.Xa.push(u),u}su(){this.eu&&tn()}verifyOperationInProgress(){}uu(){var e=this;return(0,Ve.Z)(function*(){let n;do{n=e.Ja,yield n}while(n!==e.Ja)})()}cu(e){for(const n of this.Xa)if(n.timerId===e)return!0;return!1}lu(e){return this.uu().then(()=>{this.Xa.sort((n,o)=>n.targetTimeMs-o.targetTimeMs);for(const n of this.Xa)if(n.skipDelay(),"all"!==e&&n.timerId===e)break;return this.uu()})}hu(e){this.ru.push(e)}au(e){const n=this.Xa.indexOf(e);this.Xa.splice(n,1)}}function w_(i){return function(n,o){if("object"!=typeof n||null===n)return!1;const u=n;for(const h of["next","error","complete"])if(h in u&&"function"==typeof u[h])return!0;return!1}(i)}class S0{constructor(){this._progressObserver={},this._taskCompletionResolver=new Vs,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,n,o){this._progressObserver={next:e,error:n,complete:o}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,n){return this._taskCompletionResolver.promise.then(e,n)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class Xi extends Sf{constructor(e,n,o,u){super(e,n,o,u),this.type="firestore",this._queue=new A0,this._persistenceKey=u?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||Yv(this),this._firestoreClient.terminate()}}function oo(i){return i._firestoreClient||Yv(i),i._firestoreClient.verifyNotTerminated(),i._firestoreClient}function Yv(i){var e,n,o;const u=i._freezeSettings(),h=(V=(null===(e=i._app)||void 0===e?void 0:e.options.appId)||"",new Ju(i._databaseId,V,i._persistenceKey,(ee=u).host,ee.ssl,ee.experimentalForceLongPolling,ee.experimentalAutoDetectLongPolling,D0(ee.experimentalLongPollingOptions),ee.useFetchStreams));var V,ee;i._firestoreClient=new E0(i._authCredentials,i._appCheckCredentials,i._queue,h),null!==(n=u.localCache)&&void 0!==n&&n._offlineComponentProvider&&null!==(o=u.localCache)&&void 0!==o&&o._onlineComponentProvider&&(i._firestoreClient._uninitializedComponentsProvider={_offlineKind:u.localCache.kind,_offline:u.localCache._offlineComponentProvider,_online:u.localCache._onlineComponentProvider})}function Zv(i,e,n){const o=new Vs;return i.asyncQueue.enqueue((0,Ve.Z)(function*(){try{yield kg(i,n),yield Uc(i,e),o.resolve()}catch(u){const h=u;if(!Lv(h))throw h;_o("Error enabling indexeddb cache. Falling back to memory cache: "+h),o.reject(h)}})).then(()=>o.promise)}function C_(i){if(i._initialized||i._terminated)throw new vt(et.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class Kl{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Kl(as.fromBase64String(e))}catch(n){throw new vt(et.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Kl(as.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class yd{constructor(...e){for(let n=0;n<e.length;++n)if(0===e[n].length)throw new vt(et.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new si(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class xh{constructor(e){this._methodName=e}}class pc{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new vt(et.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new vt(et.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return jn(this._lat,e._lat)||jn(this._long,e._long)}}const Sp=/^__.*__$/;class Qa{constructor(e,n,o){this.data=e,this.fieldMask=n,this.fieldTransforms=o}toMutation(e,n){return null!==this.fieldMask?new vu(e,this.data,this.fieldMask,n,this.fieldTransforms):new Oa(e,this.data,n,this.fieldTransforms)}}class Yd{constructor(e,n,o){this.data=e,this.fieldMask=n,this.fieldTransforms=o}toMutation(e,n){return new vu(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function Rp(i){switch(i){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw tn()}}class Eu{constructor(e,n,o,u,h,v){this.settings=e,this.databaseId=n,this.serializer=o,this.ignoreUndefinedProperties=u,void 0===h&&this.Pu(),this.fieldTransforms=h||[],this.fieldMask=v||[]}get path(){return this.settings.path}get Iu(){return this.settings.Iu}Tu(e){return new Eu(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Eu(e){var n;const o=null===(n=this.path)||void 0===n?void 0:n.child(e),u=this.Tu({path:o,du:!1});return u.Au(e),u}Ru(e){var n;const o=null===(n=this.path)||void 0===n?void 0:n.child(e),u=this.Tu({path:o,du:!1});return u.Pu(),u}Vu(e){return this.Tu({path:void 0,du:!0})}mu(e){return Mf(e,this.settings.methodName,this.settings.fu||!1,this.path,this.settings.gu)}contains(e){return void 0!==this.fieldMask.find(n=>e.isPrefixOf(n))||void 0!==this.fieldTransforms.find(n=>e.isPrefixOf(n.field))}Pu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Au(this.path.get(e))}Au(e){if(0===e.length)throw this.mu("Document fields must not be empty");if(Rp(this.Iu)&&Sp.test(e))throw this.mu('Document fields cannot begin and end with "__"')}}class A_{constructor(e,n,o){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=o||yf(e)}pu(e,n,o,u=!1){return new Eu({Iu:e,methodName:n,gu:o,path:si.emptyPath(),du:!1,fu:u},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function jc(i){const e=i._freezeSettings(),n=yf(i._databaseId);return new A_(i._databaseId,!!e.ignoreUndefinedProperties,n)}function Id(i,e,n,o,u,h={}){const v=i.pu(h.merge||h.mergeFields?2:0,e,n,u);qg("Data must be an object, but it was:",v,o);const P=R_(o,v);let V,z;if(h.merge)V=new Ko(v.fieldMask),z=v.fieldTransforms;else if(h.mergeFields){const ee=[];for(const le of h.mergeFields){const Ae=Pf(e,le,n);if(!v.contains(Ae))throw new vt(et.INVALID_ARGUMENT,`Field '${Ae}' is specified in your field mask but missing from your input data.`);ry(ee,Ae)||ee.push(Ae)}V=new Ko(ee),z=v.fieldTransforms.filter(le=>V.covers(le.field))}else V=null,z=v.fieldTransforms;return new Qa(new us(P),V,z)}class Yl extends xh{_toFieldTransform(e){if(2!==e.Iu)throw e.mu(1===e.Iu?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Yl}}function kh(i,e,n){return new Eu({Iu:3,gu:e.settings.gu,methodName:i._methodName,du:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class Zd extends xh{_toFieldTransform(e){return new Ol(e.path,new Jo)}isEqual(e){return e instanceof Zd}}class Rf extends xh{constructor(e,n){super(e),this.yu=n}_toFieldTransform(e){const n=kh(this,e,!0),o=this.yu.map(h=>Jd(h,n)),u=new _u(o);return new Ol(e.path,u)}isEqual(e){return this===e}}class Nf extends xh{constructor(e,n){super(e),this.yu=n}_toFieldTransform(e){const n=kh(this,e,!0),o=this.yu.map(h=>Jd(h,n)),u=new da(o);return new Ol(e.path,u)}isEqual(e){return this===e}}class Of extends xh{constructor(e,n){super(e),this.wu=n}_toFieldTransform(e){const n=new qa(e.serializer,ud(e.serializer,this.wu));return new Ol(e.path,n)}isEqual(e){return this===e}}function Qd(i,e,n,o){const u=i.pu(1,e,n);qg("Data must be an object, but it was:",u,o);const h=[],v=us.empty();Nu(o,(V,z)=>{const ee=Np(e,V,n);z=(0,ze.m9)(z);const le=u.Ru(ee);if(z instanceof Yl)h.push(ee);else{const Ae=Jd(z,le);null!=Ae&&(h.push(ee),v.set(ee,Ae))}});const P=new Ko(h);return new Yd(v,P,u.fieldTransforms)}function Wg(i,e,n,o,u,h){const v=i.pu(1,e,n),P=[Pf(e,o,n)],V=[u];if(h.length%2!=0)throw new vt(et.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let Ae=0;Ae<h.length;Ae+=2)P.push(Pf(e,h[Ae])),V.push(h[Ae+1]);const z=[],ee=us.empty();for(let Ae=P.length-1;Ae>=0;--Ae)if(!ry(z,P[Ae])){const Xe=P[Ae];let kt=V[Ae];kt=(0,ze.m9)(kt);const zt=v.Ru(Xe);if(kt instanceof Yl)z.push(Xe);else{const Wt=Jd(kt,zt);null!=Wt&&(z.push(Xe),ee.set(Xe,Wt))}}const le=new Ko(z);return new Yd(ee,le,v.fieldTransforms)}function S_(i,e,n,o=!1){return Jd(n,i.pu(o?4:3,e))}function Jd(i,e){if(N_(i=(0,ze.m9)(i)))return qg("Unsupported field value:",e,i),R_(i,e);if(i instanceof xh)return function(o,u){if(!Rp(u.Iu))throw u.mu(`${o._methodName}() can only be used with update() and set()`);if(!u.path)throw u.mu(`${o._methodName}() is not currently supported inside arrays`);const h=o._toFieldTransform(u);h&&u.fieldTransforms.push(h)}(i,e),null;if(void 0===i&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),i instanceof Array){if(e.settings.du&&4!==e.Iu)throw e.mu("Nested arrays are not supported");return function(o,u){const h=[];let v=0;for(const P of o){let V=Jd(P,u.Vu(v));null==V&&(V={nullValue:"NULL_VALUE"}),h.push(V),v++}return{arrayValue:{values:h}}}(i,e)}return function(o,u){if(null===(o=(0,ze.m9)(o)))return{nullValue:"NULL_VALUE"};if("number"==typeof o)return ud(u.serializer,o);if("boolean"==typeof o)return{booleanValue:o};if("string"==typeof o)return{stringValue:o};if(o instanceof Date){const h=Rr.fromDate(o);return{timestampValue:uc(u.serializer,h)}}if(o instanceof Rr){const h=new Rr(o.seconds,1e3*Math.floor(o.nanoseconds/1e3));return{timestampValue:uc(u.serializer,h)}}if(o instanceof pc)return{geoPointValue:{latitude:o.latitude,longitude:o.longitude}};if(o instanceof Kl)return{bytesValue:mh(u.serializer,o._byteString)};if(o instanceof Ps){const h=u.databaseId,v=o.firestore._databaseId;if(!v.isEqual(h))throw u.mu(`Document reference is for database ${v.projectId}/${v.database} but should be for database ${h.projectId}/${h.database}`);return{referenceValue:Fd(o.firestore._databaseId||u.databaseId,o._key.path)}}throw u.mu(`Unsupported field value: ${Ap(o)}`)}(i,e)}function R_(i,e){const n={};return Po(i)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Nu(i,(o,u)=>{const h=Jd(u,e.Eu(o));null!=h&&(n[o]=h)}),{mapValue:{fields:n}}}function N_(i){return!("object"!=typeof i||null===i||i instanceof Array||i instanceof Date||i instanceof Rr||i instanceof pc||i instanceof Kl||i instanceof Ps||i instanceof xh)}function qg(i,e,n){if(!N_(n)||"object"!=typeof(u=n)||null===u||Object.getPrototypeOf(u)!==Object.prototype&&null!==Object.getPrototypeOf(u)){const o=Ap(n);throw e.mu("an object"===o?i+" a custom object":i+" "+o)}var u}function Pf(i,e,n){if((e=(0,ze.m9)(e))instanceof yd)return e._internalPath;if("string"==typeof e)return Np(i,e);throw Mf("Field path arguments must be of type string or ",i,!1,void 0,n)}const ny=new RegExp("[~\\*/\\[\\]]");function Np(i,e,n){if(e.search(ny)>=0)throw Mf(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,i,!1,void 0,n);try{return new yd(...e.split("."))._internalPath}catch{throw Mf(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,i,!1,void 0,n)}}function Mf(i,e,n,o,u){const h=o&&!o.isEmpty(),v=void 0!==u;let P=`Function ${e}() called with invalid data`;n&&(P+=" (via `toFirestore()`)"),P+=". ";let V="";return(h||v)&&(V+=" (found",h&&(V+=` in field ${o}`),v&&(V+=` in document ${u}`),V+=")"),new vt(et.INVALID_ARGUMENT,P+i+V)}function ry(i,e){return i.some(n=>n.isEqual(e))}class Kg{constructor(e,n,o,u,h){this._firestore=e,this._userDataWriter=n,this._key=o,this._document=u,this._converter=h}get id(){return this._key.path.lastSegment()}get ref(){return new Ps(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new QI(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Yg("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n)}}}class QI extends Kg{data(){return super.data()}}function Yg(i,e){return"string"==typeof e?Np(i,e):e instanceof yd?e._internalPath:e._delegate._internalPath}function iy(i){if("L"===i.limitType&&0===i.explicitOrderBy.length)throw new vt(et.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class sy{}class Op extends sy{}function Fh(i,e,...n){let o=[];e instanceof sy&&o.push(e),o=o.concat(n),function(h){const v=h.filter(V=>V instanceof xf).length,P=h.filter(V=>V instanceof Pp).length;if(v>1||v>0&&P>0)throw new vt(et.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(o);for(const u of o)i=u._apply(i);return i}class Pp extends Op{constructor(e,n,o){super(),this._field=e,this._op=n,this._value=o,this.type="where"}static _create(e,n,o){return new Pp(e,n,o)}_apply(e){const n=this._parse(e);return F0(e._query,n),new xa(e.firestore,e.converter,Z(e._query,n))}_parse(e){const n=jc(e.firestore);return function(h,v,P,V,z,ee,le){let Ae;if(z.isKeyField()){if("array-contains"===ee||"array-contains-any"===ee)throw new vt(et.INVALID_ARGUMENT,`Invalid Query. You can't perform '${ee}' queries on documentId().`);if("in"===ee||"not-in"===ee){Vp(le,ee);const Xe=[];for(const kt of le)Xe.push(Lp(V,h,kt));Ae={arrayValue:{values:Xe}}}else Ae=Lp(V,h,le)}else"in"!==ee&&"not-in"!==ee&&"array-contains-any"!==ee||Vp(le,ee),Ae=S_(P,"where",le,"in"===ee||"not-in"===ee);return fr.create(z,ee,Ae)}(e._query,0,n,e.firestore._databaseId,this._field,this._op,this._value)}}class xf extends sy{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new xf(e,n)}_parse(e){const n=this._queryConstraints.map(o=>o._parse(e)).filter(o=>o.getFilters().length>0);return 1===n.length?n[0]:Pr.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return 0===n.getFilters().length?e:(function(u,h){let v=u;const P=h.getFlattenedFilters();for(const V of P)F0(v,V),v=Z(v,V)}(e._query,n),new xa(e.firestore,e.converter,Z(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class Mp extends Op{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new Mp(e,n)}_apply(e){const n=function(u,h,v){if(null!==u.startAt)throw new vt(et.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==u.endAt)throw new vt(et.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new cs(h,v)}(e._query,this._field,this._direction);return new xa(e.firestore,e.converter,function(u,h){const v=u.explicitOrderBy.concat([h]);return new Os(u.path,u.collectionGroup,v,u.filters.slice(),u.limit,u.limitType,u.startAt,u.endAt)}(e._query,n))}}class xp extends Op{constructor(e,n,o){super(),this.type=e,this._limit=n,this._limitType=o}static _create(e,n,o){return new xp(e,n,o)}_apply(e){return new xa(e.firestore,e.converter,ue(e._query,this._limit,this._limitType))}}class Jg extends Op{constructor(e,n,o){super(),this.type=e,this._docOrFields=n,this._inclusive=o}static _create(e,n,o){return new Jg(e,n,o)}_apply(e){const n=em(e,this.type,this._docOrFields,this._inclusive);return new xa(e.firestore,e.converter,(h=n,new Os((u=e._query).path,u.collectionGroup,u.explicitOrderBy.slice(),u.filters.slice(),u.limit,u.limitType,h,u.endAt)));var u,h}}class Xg extends Op{constructor(e,n,o){super(),this.type=e,this._docOrFields=n,this._inclusive=o}static _create(e,n,o){return new Xg(e,n,o)}_apply(e){const n=em(e,this.type,this._docOrFields,this._inclusive);return new xa(e.firestore,e.converter,(h=n,new Os((u=e._query).path,u.collectionGroup,u.explicitOrderBy.slice(),u.filters.slice(),u.limit,u.limitType,u.startAt,h)));var u,h}}function em(i,e,n,o){if(n[0]=(0,ze.m9)(n[0]),n[0]instanceof Kg)return function(h,v,P,V,z){if(!V)throw new vt(et.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${P}().`);const ee=[];for(const le of m(h))if(le.field.isKeyField())ee.push(Mu(v,V.key));else{const Ae=V.data.field(le.field);if(Pu(Ae))throw new vt(et.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+le.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===Ae){const Xe=le.field.canonicalString();throw new vt(et.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${Xe}' (used as the orderBy) does not exist.`)}ee.push(Ae)}return new pu(ee,z)}(i._query,i.firestore._databaseId,e,n[0]._document,o);{const u=jc(i.firestore);return function(v,P,V,z,ee,le){const Ae=v.explicitOrderBy;if(ee.length>Ae.length)throw new vt(et.INVALID_ARGUMENT,`Too many arguments provided to ${z}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const Xe=[];for(let kt=0;kt<ee.length;kt++){const zt=ee[kt];if(Ae[kt].field.isKeyField()){if("string"!=typeof zt)throw new vt(et.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${z}(), but got a ${typeof zt}`);if(!N(v)&&-1!==zt.indexOf("/"))throw new vt(et.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${z}() must be a plain document ID, but '${zt}' contains a slash.`);const Wt=v.path.child(Xn.fromString(zt));if(!$t.isDocumentKey(Wt))throw new vt(et.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${z}() must result in a valid document path, but '${Wt}' is not because it contains an odd number of segments.`);const xn=new $t(Wt);Xe.push(Mu(P,xn))}else{const Wt=S_(V,z,zt);Xe.push(Wt)}}return new pu(Xe,le)}(i._query,i.firestore._databaseId,u,e,n,o)}}function Lp(i,e,n){if("string"==typeof(n=(0,ze.m9)(n))){if(""===n)throw new vt(et.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!N(e)&&-1!==n.indexOf("/"))throw new vt(et.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const o=e.path.child(Xn.fromString(n));if(!$t.isDocumentKey(o))throw new vt(et.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${o}' is not because it has an odd number of segments (${o.length}).`);return Mu(i,new $t(o))}if(n instanceof Ps)return Mu(i,n._key);throw new vt(et.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Ap(n)}.`)}function Vp(i,e){if(!Array.isArray(i)||0===i.length)throw new vt(et.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function F0(i,e){const n=function(u,h){for(const v of u)for(const P of v.getFlattenedFilters())if(h.indexOf(P.op)>=0)return P.op;return null}(i.filters,function(u){switch(u){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==n)throw new vt(et.INVALID_ARGUMENT,n===e.op?`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`:`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class O_{convertValue(e,n="none"){switch(lu(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Or(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Es(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 10:return this.convertObject(e.mapValue,n);default:throw tn()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const o={};return Nu(e,(u,h)=>{o[u]=this.convertValue(h,n)}),o}convertGeoPoint(e){return new pc(Or(e.latitude),Or(e.longitude))}convertArray(e,n){return(e.values||[]).map(o=>this.convertValue(o,n))}convertServerTimestamp(e,n){switch(n){case"previous":const o=Qu(e);return null==o?null:this.convertValue(o,n);case"estimate":return this.convertTimestamp(Yo(e));default:return null}}convertTimestamp(e){const n=Ci(e);return new Rr(n.seconds,n.nanos)}convertDocumentKey(e,n){const o=Xn.fromString(e);pn(Zf(o));const u=new cu(o.get(1),o.get(3)),h=new $t(o.popFirst(5));return u.isEqual(n)||mi(`Document ${h} contains a document reference within a different database (${u.projectId}/${u.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),h}}function kf(i,e,n){let o;return o=i?n&&(n.merge||n.mergeFields)?i.toFirestore(e,n):i.toFirestore(e):e,o}class L0 extends O_{constructor(e){super(),this.firestore=e}convertBytes(e){return new Kl(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Ps(this.firestore,null,n)}}class Xd{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Ed extends Kg{constructor(e,n,o,u,h,v){super(e,n,o,u,v),this._firestore=e,this._firestoreImpl=e,this.metadata=h}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Bp(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const o=this._document.data.field(Yg("DocumentSnapshot.get",e));if(null!==o)return this._userDataWriter.convertValue(o,n.serverTimestamps)}}}class Bp extends Ed{data(e={}){return super.data(e)}}class eh{constructor(e,n,o,u){this._firestore=e,this._userDataWriter=n,this._snapshot=u,this.metadata=new Xd(u.hasPendingWrites,u.fromCache),this.query=o}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,n){this._snapshot.docs.forEach(o=>{e.call(n,new Bp(this._firestore,this._userDataWriter,o.key,o,new Xd(this._snapshot.mutatedKeys.has(o.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new vt(et.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(u,h){if(u._snapshot.oldDocs.isEmpty()){let v=0;return u._snapshot.docChanges.map(P=>({type:"added",doc:new Bp(u._firestore,u._userDataWriter,P.doc.key,P.doc,new Xd(u._snapshot.mutatedKeys.has(P.doc.key),u._snapshot.fromCache),u.query.converter),oldIndex:-1,newIndex:v++}))}{let v=u._snapshot.oldDocs;return u._snapshot.docChanges.filter(P=>h||3!==P.type).map(P=>{const V=new Bp(u._firestore,u._userDataWriter,P.doc.key,P.doc,new Xd(u._snapshot.mutatedKeys.has(P.doc.key),u._snapshot.fromCache),u.query.converter);let z=-1,ee=-1;return 0!==P.type&&(z=v.indexOf(P.doc.key),v=v.delete(P.doc.key)),1!==P.type&&(v=v.add(P.doc),ee=v.indexOf(P.doc.key)),{type:cy(P.type),doc:V,oldIndex:z,newIndex:ee}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function cy(i){switch(i){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return tn()}}function tm(i,e){return i instanceof Ed&&e instanceof Ed?i._firestore===e._firestore&&i._key.isEqual(e._key)&&(null===i._document?null===e._document:i._document.isEqual(e._document))&&i._converter===e._converter:i instanceof eh&&e instanceof eh&&i._firestore===e._firestore&&b_(i.query,e.query)&&i.metadata.isEqual(e.metadata)&&i._snapshot.isEqual(e._snapshot)}class th extends O_{constructor(e){super(),this.firestore=e}convertBytes(e){return new Kl(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Ps(this.firestore,null,n)}}function dy(i,e,n){i=Ur(i,Ps);const o=Ur(i.firestore,Xi),u=kf(i.converter,e,n);return Ff(o,[Id(jc(o),"setDoc",i._key,u,null!==i.converter,n).toMutation(i._key,Ai.none())])}function hy(i,e,n,...o){i=Ur(i,Ps);const u=Ur(i.firestore,Xi),h=jc(u);let v;return v="string"==typeof(e=(0,ze.m9)(e))||e instanceof yd?Wg(h,"updateDoc",i._key,e,n,o):Qd(h,"updateDoc",i._key,e),Ff(u,[v.toMutation(i._key,Ai.exists(!0))])}function x_(i,...e){var n,o,u;i=(0,ze.m9)(i);let h={includeMetadataChanges:!1},v=0;"object"!=typeof e[v]||w_(e[v])||(h=e[v],v++);const P={includeMetadataChanges:h.includeMetadataChanges};if(w_(e[v])){const le=e[v];e[v]=null===(n=le.next)||void 0===n?void 0:n.bind(le),e[v+1]=null===(o=le.error)||void 0===o?void 0:o.bind(le),e[v+2]=null===(u=le.complete)||void 0===u?void 0:u.bind(le)}let V,z,ee;if(i instanceof Ps)z=Ur(i.firestore,Xi),ee=rl(i._key.path),V={next:le=>{e[v]&&e[v](k_(z,i,le))},error:e[v+1],complete:e[v+2]};else{const le=Ur(i,xa);z=Ur(le.firestore,Xi),ee=le._query;const Ae=new th(z);V={next:Xe=>{e[v]&&e[v](new eh(z,Ae,le,Xe))},error:e[v+1],complete:e[v+2]},iy(i._query)}return function(Ae,Xe,kt,zt){const Wt=new xg(zt),xn=new Wd(Xe,Wt,kt);return Ae.asyncQueue.enqueueAndForget((0,Ve.Z)(function*(){return Tg(yield Mh(Ae),xn)})),()=>{Wt.Na(),Ae.asyncQueue.enqueueAndForget((0,Ve.Z)(function*(){return Qm(yield Mh(Ae),xn)}))}}(oo(z),ee,P,V)}function Ff(i,e){return function(o,u){const h=new Vs;return o.asyncQueue.enqueueAndForget((0,Ve.Z)(function*(){return function qI(i,e,n){return Av.apply(this,arguments)}(yield Vg(o),u,h)})),h.promise}(oo(i),e)}function k_(i,e,n){const o=n.docs.get(e._key),u=new th(i);return new Ed(i,u,e._key,o,new Xd(n.hasPendingWrites,n.fromCache),e.converter)}const om={maxAttempts:5};class V_{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=jc(e)}set(e,n,o){this._verifyNotCommitted();const u=Td(e,this._firestore),h=kf(u.converter,n,o),v=Id(this._dataReader,"WriteBatch.set",u._key,h,null!==u.converter,o);return this._mutations.push(v.toMutation(u._key,Ai.none())),this}update(e,n,o,...u){this._verifyNotCommitted();const h=Td(e,this._firestore);let v;return v="string"==typeof(n=(0,ze.m9)(n))||n instanceof yd?Wg(this._dataReader,"WriteBatch.update",h._key,n,o,u):Qd(this._dataReader,"WriteBatch.update",h._key,n),this._mutations.push(v.toMutation(h._key,Ai.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=Td(e,this._firestore);return this._mutations=this._mutations.concat(new al(n._key,Ai.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new vt(et.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Td(i,e){if((i=(0,ze.m9)(i)).firestore!==e)throw new vt(et.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return i}class yy extends class{constructor(n,o){this._firestore=n,this._transaction=o,this._dataReader=jc(n)}get(n){const o=Td(n,this._firestore),u=new L0(this._firestore);return this._transaction.lookup([o._key]).then(h=>{if(!h||1!==h.length)return tn();const v=h[0];if(v.isFoundDocument())return new Kg(this._firestore,u,v.key,v,o.converter);if(v.isNoDocument())return new Kg(this._firestore,u,o._key,null,o.converter);throw tn()})}set(n,o,u){const h=Td(n,this._firestore),v=kf(h.converter,o,u),P=Id(this._dataReader,"Transaction.set",h._key,v,null!==h.converter,u);return this._transaction.set(h._key,P),this}update(n,o,u,...h){const v=Td(n,this._firestore);let P;return P="string"==typeof(o=(0,ze.m9)(o))||o instanceof yd?Wg(this._dataReader,"Transaction.update",v._key,o,u,h):Qd(this._dataReader,"Transaction.update",v._key,o),this._transaction.update(v._key,P),this}delete(n){const o=Td(n,this._firestore);return this._transaction.delete(o._key),this}}{constructor(e,n){super(e,n),this._firestore=e}get(e){const n=Td(e,this._firestore),o=new th(this._firestore);return super.get(e).then(u=>new Ed(this._firestore,o,n._key,u._document,new Xd(!1,!1),n.converter))}}function um(i,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new vt("invalid-argument",`Invalid options passed to function ${i}(): You cannot specify both "merge" and "mergeFields".`);return e}function Sy(){if(typeof Uint8Array>"u")throw new vt("unimplemented","Uint8Arrays are not available in this environment.")}function Ry(){if(!function ah(){return typeof atob<"u"}())throw new vt("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(e,n=!0){au=Me.SDK_VERSION,(0,Me._registerComponent)(new qe.wA("firestore",(o,{instanceIdentifier:u,options:h})=>{const v=o.getProvider("app").getImmediate(),P=new Xi(new za(o.getProvider("auth-internal")),new Tl(o.getProvider("app-check-internal")),function(z,ee){if(!Object.prototype.hasOwnProperty.apply(z.options,["projectId"]))throw new vt(et.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new cu(z.options.projectId,ee)}(v,u),v);return h=Object.assign({useFetchStreams:n},h),P._setSettings(h),P},"PUBLIC").setMultipleInstances(!0)),(0,Me.registerVersion)(Is,"4.3.1",e),(0,Me.registerVersion)(Is,"4.3.1","esm2017")}();class Vf{constructor(e){this._delegate=e}static fromBase64String(e){return Ry(),new Vf(Kl.fromBase64String(e))}static fromUint8Array(e){return Sy(),new Vf(Kl.fromUint8Array(e))}toBase64(){return Ry(),this._delegate.toBase64()}toUint8Array(){return Sy(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function j_(i){return function Ny(i,e){if("object"!=typeof i||null===i)return!1;const n=i;for(const o of e)if(o in n&&"function"==typeof n[o])return!0;return!1}(i,["next","error","complete"])}class Oy{enableIndexedDbPersistence(e,n){return function R0(i,e){C_(i=Ur(i,Xi));const n=oo(i);if(n._uninitializedComponentsProvider)throw new vt(et.FAILED_PRECONDITION,"SDK cache is already specified.");_o("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const o=i._freezeSettings(),u=new Ph;return Zv(n,u,new p_(u,o.cacheSizeBytes,e?.forceOwnership))}(e._delegate,{forceOwnership:n})}enableMultiTabIndexedDbPersistence(e){return function N0(i){C_(i=Ur(i,Xi));const e=oo(i);if(e._uninitializedComponentsProvider)throw new vt(et.FAILED_PRECONDITION,"SDK cache is already specified.");_o("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const n=i._freezeSettings(),o=new Ph;return Zv(e,o,new kv(o,n.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function O0(i){if(i._initialized&&!i._terminated)throw new vt(et.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Vs;return i._queue.enqueueAndForgetEvenWhileRestricted((0,Ve.Z)(function*(){try{yield(n=(0,Ve.Z)(function*(u){if(!de.D())return Promise.resolve();const h=u+"main";yield de.delete(h)}),function o(u){return n.apply(this,arguments)})(lc(i._databaseId,i._persistenceKey)),e.resolve()}catch(n){e.reject(n)}var n})),e.promise}(e._delegate)}}class Vh{constructor(e,n,o){this._delegate=n,this._persistenceProvider=o,this.INTERNAL={delete:()=>this.terminate()},e instanceof cu||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const n=this._delegate._getSettings();!e.merge&&n.host!==e.host&&_o("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},n),e)).merge,this._delegate._setSettings(e)}useEmulator(e,n,o={}){!function T_(i,e,n,o={}){var u;const h=(i=Ur(i,Sf))._getSettings(),v=`${e}:${n}`;if("firestore.googleapis.com"!==h.host&&h.host!==v&&_o("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),i._setSettings(Object.assign(Object.assign({},h),{host:v,ssl:!1})),o.mockUserToken){let P,V;if("string"==typeof o.mockUserToken)P=o.mockUserToken,V=Vr.MOCK_USER;else{P=(0,ze.Sg)(o.mockUserToken,null===(u=i._app)||void 0===u?void 0:u.options.projectId);const z=o.mockUserToken.sub||o.mockUserToken.user_id;if(!z)throw new vt(et.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");V=new Vr(z)}i._authCredentials=new Cu(new Ca(P,V))}}(this._delegate,e,n,o)}enableNetwork(){return function Jv(i){return function y_(i){return i.asyncQueue.enqueue((0,Ve.Z)(function*(){const e=yield Dp(i),n=yield T0(i);return e.setNetworkEnabled(!0),function(u){const h=Gt(u);return h.C_.delete(0),fp(h)}(n)}))}(oo(i=Ur(i,Xi)))}(this._delegate)}disableNetwork(){return function Xv(i){return function vd(i){return i.asyncQueue.enqueue((0,Ve.Z)(function*(){const e=yield Dp(i),n=yield T0(i);return e.setNetworkEnabled(!1),(o=(0,Ve.Z)(function*(h){const v=Gt(h);v.C_.add(0),yield $l(v),v.M_.set("Offline")}),function u(h){return o.apply(this,arguments)})(n);var o}))}(oo(i=Ur(i,Xi)))}(this._delegate)}enablePersistence(e){let n=!1,o=!1;return e&&(n=!!e.synchronizeTabs,o=!!e.experimentalForceOwningTab,E_("synchronizeTabs",n,"experimentalForceOwningTab",o)),n?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,o)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function Qv(i){return function(n){const o=new Vs;return n.asyncQueue.enqueueAndForget((0,Ve.Z)(function*(){return function _r(i,e){return Ng.apply(this,arguments)}(yield Vg(n),o)})),o.promise}(oo(i=Ur(i,Xi)))}(this._delegate)}onSnapshotsInSync(e){return function fy(i,e){return function Uv(i,e){const n=new xg(e);return i.asyncQueue.enqueueAndForget((0,Ve.Z)(function*(){return u=yield Mh(i),h=n,Gt(u).q_.add(h),void h.next();var u,h})),()=>{n.Na(),i.asyncQueue.enqueueAndForget((0,Ve.Z)(function*(){return u=yield Mh(i),h=n,void Gt(u).q_.delete(h);var u,h}))}}(oo(i=Ur(i,Xi)),w_(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new vt("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Bh(this,Wv(this._delegate,e))}catch(n){throw ka(n,"collection()","Firestore.collection()")}}doc(e){try{return new _l(this,Hg(this._delegate,e))}catch(n){throw ka(n,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Us(this,function C0(i,e){if(i=Ur(i,Sf),Gg("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new vt(et.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new xa(i,null,(o=e,new Os(Xn.emptyPath(),o)));var o}(this._delegate,e))}catch(n){throw ka(n,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function Iy(i,e,n){i=Ur(i,Xi);const o=Object.assign(Object.assign({},om),n);return function(h){if(h.maxAttempts<1)throw new vt(et.INVALID_ARGUMENT,"Max attempts must be at least 1")}(o),function(h,v,P){const V=new Vs;return h.asyncQueue.enqueueAndForget((0,Ve.Z)(function*(){const z=yield function v_(i){return wp(i).then(e=>e.datastore)}(h);new I0(h.asyncQueue,z,P,v,V).run()})),V.promise}(oo(i),u=>e(new yy(i,u)),o)}(this._delegate,n=>e(new G_(this,n)))}batch(){return oo(this._delegate),new Py(new V_(this._delegate,e=>Ff(this._delegate,e)))}loadBundle(e){return function ZI(i,e){const n=oo(i=Ur(i,Xi)),o=new S0;return function w0(i,e,n,o){const u=function(v,P){let V;return V="string"==typeof v?Ml().encode(v):v,ee=function(ee,le){if(ee instanceof Uint8Array)return Fv(ee,void 0);if(ee instanceof ArrayBuffer)return Fv(new Uint8Array(ee),void 0);if(ee instanceof ReadableStream)return ee.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(V),new g_(ee,P);var ee}(n,yf(e));i.asyncQueue.enqueueAndForget((0,Ve.Z)(function*(){!function f_(i,e,n){const o=Gt(i);var u;(u=(0,Ve.Z)(function*(v,P,V){try{const z=yield P.getMetadata();if(yield function(kt,zt){const Wt=Gt(kt),xn=ls(zt.createTime);return Wt.persistence.runTransaction("hasNewerBundle","readonly",Zn=>Wt.Kr.getBundleMetadata(Zn,zt.id)).then(Zn=>!!Zn&&Zn.createTime.compareTo(xn)>=0)}(v.localStore,z))return yield P.close(),V._completeWith({taskState:"Success",documentsLoaded:(kt=z).totalDocuments,bytesLoaded:kt.totalBytes,totalDocuments:kt.totalDocuments,totalBytes:kt.totalBytes}),Promise.resolve(new Set);V._updateProgress(Jm(z));const ee=new wv(z,v.localStore,P.serializer);let le=yield P.Ma();for(;le;){const Xe=yield ee.ea(le);Xe&&V._updateProgress(Xe),le=yield P.Ma()}const Ae=yield ee.complete();return yield hc(v,Ae.ra,void 0),yield function(kt,zt){const Wt=Gt(kt);return Wt.persistence.runTransaction("Save bundle","readwrite",xn=>Wt.Kr.saveBundleMetadata(xn,zt))}(v.localStore,z),V._completeWith(Ae.progress),Promise.resolve(Ae.na)}catch(z){return _o("SyncEngine",`Loading bundle failed with ${z}`),V._failWith(z),Promise.resolve(new Set)}var kt}),function h(v,P,V){return u.apply(this,arguments)})(o,e,n).then(u=>{o.sharedClientState.notifyBundleLoaded(u)})}(yield Vg(i),u,o)}))}(n,i._databaseId,e,o),o}(this._delegate,e)}namedQuery(e){return function ey(i,e){return function Ug(i,e){return i.asyncQueue.enqueue((0,Ve.Z)(function*(){return function(o,u){const h=Gt(o);return h.persistence.runTransaction("Get named query","readonly",v=>h.Kr.getNamedQuery(v,u))}(yield Kd(i),e)}))}(oo(i=Ur(i,Xi)),e).then(n=>n?new xa(i,null,n.query):null)}(this._delegate,e).then(n=>n?new Us(this,n):null)}}class cm extends O_{constructor(e){super(),this.firestore=e}convertBytes(e){return new Vf(new Kl(e))}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return _l.forKey(n,this.firestore,null)}}class G_{constructor(e,n){this._firestore=e,this._delegate=n,this._userDataWriter=new cm(e)}get(e){const n=rh(e);return this._delegate.get(n).then(o=>new jp(this._firestore,new Ed(this._firestore._delegate,this._userDataWriter,o._key,o._document,o.metadata,n.converter)))}set(e,n,o){const u=rh(e);return o?(um("Transaction.set",o),this._delegate.set(u,n,o)):this._delegate.set(u,n),this}update(e,n,o,...u){const h=rh(e);return 2===arguments.length?this._delegate.update(h,n):this._delegate.update(h,n,o,...u),this}delete(e){const n=rh(e);return this._delegate.delete(n),this}}class Py{constructor(e){this._delegate=e}set(e,n,o){const u=rh(e);return o?(um("WriteBatch.set",o),this._delegate.set(u,n,o)):this._delegate.set(u,n),this}update(e,n,o,...u){const h=rh(e);return 2===arguments.length?this._delegate.update(h,n):this._delegate.update(h,n,o,...u),this}delete(e){const n=rh(e);return this._delegate.delete(n),this}commit(){return this._delegate.commit()}}class nh{constructor(e,n,o){this._firestore=e,this._userDataWriter=n,this._delegate=o}fromFirestore(e,n){const o=new Bp(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Bf(this._firestore,o),n??{})}toFirestore(e,n){return n?this._delegate.toFirestore(e,n):this._delegate.toFirestore(e)}static getInstance(e,n){const o=nh.INSTANCES;let u=o.get(e);u||(u=new WeakMap,o.set(e,u));let h=u.get(n);return h||(h=new nh(e,new cm(e),n),u.set(n,h)),h}}nh.INSTANCES=new WeakMap;class _l{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new cm(e)}static forPath(e,n,o){if(e.length%2!=0)throw new vt("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new _l(n,new Ps(n._delegate,o,new $t(e)))}static forKey(e,n,o){return new _l(n,new Ps(n._delegate,o,e))}get id(){return this._delegate.id}get parent(){return new Bh(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Bh(this.firestore,Wv(this._delegate,e))}catch(n){throw ka(n,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,ze.m9)(e))instanceof Ps&&qv(this._delegate,e)}set(e,n){n=um("DocumentReference.set",n);try{return n?dy(this._delegate,e,n):dy(this._delegate,e)}catch(o){throw ka(o,"setDoc()","DocumentReference.set()")}}update(e,n,...o){try{return 1===arguments.length?hy(this._delegate,e):hy(this._delegate,e,n,...o)}catch(u){throw ka(u,"updateDoc()","DocumentReference.update()")}}delete(){return function im(i){return Ff(Ur(i.firestore,Xi),[new al(i._key,Ai.none())])}(this._delegate)}onSnapshot(...e){const n=lm(e),o=vl(e,u=>new jp(this.firestore,new Ed(this.firestore._delegate,this._userDataWriter,u._key,u._document,u.metadata,this._delegate.converter)));return x_(this._delegate,n,o)}get(e){let n;return n="cache"===e?.source?function nm(i){i=Ur(i,Ps);const e=Ur(i.firestore,Xi),n=oo(e),o=new th(e);return function b0(i,e){const n=new Vs;return i.asyncQueue.enqueueAndForget((0,Ve.Z)(function*(){return(o=(0,Ve.Z)(function*(h,v,P){try{const V=yield function(ee,le){const Ae=Gt(ee);return Ae.persistence.runTransaction("read document","readonly",Xe=>Ae.localDocuments.getDocument(Xe,le))}(h,v);V.isFoundDocument()?P.resolve(V):V.isNoDocument()?P.resolve(null):P.reject(new vt(et.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(V){const z=Ef(V,`Failed to get document '${v} from cache`);P.reject(z)}}),function u(h,v,P){return o.apply(this,arguments)})(yield Kd(i),e,n);var o})),n.promise}(n,i._key).then(u=>new Ed(e,o,i._key,u,new Xd(null!==u&&u.hasLocalMutations,!0),i.converter))}(this._delegate):"server"===e?.source?function rm(i){i=Ur(i,Ps);const e=Ur(i.firestore,Xi);return Vv(oo(e),i._key,{source:"server"}).then(n=>k_(e,i,n))}(this._delegate):function P_(i){i=Ur(i,Ps);const e=Ur(i.firestore,Xi);return Vv(oo(e),i._key).then(n=>k_(e,i,n))}(this._delegate),n.then(o=>new jp(this.firestore,new Ed(this.firestore._delegate,this._userDataWriter,o._key,o._document,o.metadata,this._delegate.converter)))}withConverter(e){return new _l(this.firestore,this._delegate.withConverter(e?nh.getInstance(this.firestore,e):null))}}function ka(i,e,n){return i.message=i.message.replace(e,n),i}function lm(i){for(const e of i)if("object"==typeof e&&!j_(e))return e;return{}}function vl(i,e){var n,o;let u;return u=j_(i[0])?i[0]:j_(i[1])?i[1]:"function"==typeof i[0]?{next:i[0],error:i[1],complete:i[2]}:{next:i[1],error:i[2],complete:i[3]},{next:h=>{u.next&&u.next(e(h))},error:null===(n=u.error)||void 0===n?void 0:n.bind(u),complete:null===(o=u.complete)||void 0===o?void 0:o.bind(u)}}class jp{constructor(e,n){this._firestore=e,this._delegate=n}get ref(){return new _l(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,n){return this._delegate.get(e,n)}isEqual(e){return tm(this._delegate,e._delegate)}}class Bf extends jp{data(e){const n=this._delegate.data(e);return function Fn(i,e){i||tn()}(void 0!==n),n}}class Us{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new cm(e)}where(e,n,o){try{return new Us(this.firestore,Fh(this._delegate,function P0(i,e,n){const o=e,u=Yg("where",i);return Pp._create(u,o,n)}(e,n,o)))}catch(u){throw ka(u,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,n){try{return new Us(this.firestore,Fh(this._delegate,function Qg(i,e="asc"){const n=e,o=Yg("orderBy",i);return Mp._create(o,n)}(e,n)))}catch(o){throw ka(o,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Us(this.firestore,Fh(this._delegate,function kp(i){return Af("limit",i),xp._create("limit",i,"F")}(e)))}catch(n){throw ka(n,"limit()","Query.limit()")}}limitToLast(e){try{return new Us(this.firestore,Fh(this._delegate,function ay(i){return Af("limitToLast",i),xp._create("limitToLast",i,"L")}(e)))}catch(n){throw ka(n,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new Us(this.firestore,Fh(this._delegate,function Fp(...i){return Jg._create("startAt",i,!0)}(...e)))}catch(n){throw ka(n,"startAt()","Query.startAt()")}}startAfter(...e){try{return new Us(this.firestore,Fh(this._delegate,function M0(...i){return Jg._create("startAfter",i,!1)}(...e)))}catch(n){throw ka(n,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new Us(this.firestore,Fh(this._delegate,function x0(...i){return Xg._create("endBefore",i,!1)}(...e)))}catch(n){throw ka(n,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new Us(this.firestore,Fh(this._delegate,function k0(...i){return Xg._create("endAt",i,!0)}(...e)))}catch(n){throw ka(n,"endAt()","Query.endAt()")}}isEqual(e){return b_(this._delegate,e._delegate)}get(e){let n;return n="cache"===e?.source?function ly(i){i=Ur(i,xa);const e=Ur(i.firestore,Xi),n=oo(e),o=new th(e);return function I_(i,e){const n=new Vs;return i.asyncQueue.enqueueAndForget((0,Ve.Z)(function*(){return(o=(0,Ve.Z)(function*(h,v,P){try{const V=yield Dh(h,v,!0),z=new yp(v,V.ls),ee=z.ca(V.documents),le=z.applyChanges(ee,!1);P.resolve(le.snapshot)}catch(V){const z=Ef(V,`Failed to execute query '${v} against cache`);P.reject(z)}}),function u(h,v,P){return o.apply(this,arguments)})(yield Kd(i),e,n);var o})),n.promise}(n,i._query).then(u=>new eh(e,o,i,u))}(this._delegate):"server"===e?.source?function G0(i){i=Ur(i,xa);const e=Ur(i.firestore,Xi),n=oo(e),o=new th(e);return Bv(n,i._query,{source:"server"}).then(u=>new eh(e,o,i,u))}(this._delegate):function M_(i){i=Ur(i,xa);const e=Ur(i.firestore,Xi),n=oo(e),o=new th(e);return iy(i._query),Bv(n,i._query).then(u=>new eh(e,o,i,u))}(this._delegate),n.then(o=>new gc(this.firestore,new eh(this.firestore._delegate,this._userDataWriter,this._delegate,o._snapshot)))}onSnapshot(...e){const n=lm(e),o=vl(e,u=>new gc(this.firestore,new eh(this.firestore._delegate,this._userDataWriter,this._delegate,u._snapshot)));return x_(this._delegate,n,o)}withConverter(e){return new Us(this.firestore,this._delegate.withConverter(e?nh.getInstance(this.firestore,e):null))}}class yl{constructor(e,n){this._firestore=e,this._delegate=n}get type(){return this._delegate.type}get doc(){return new Bf(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class gc{constructor(e,n){this._firestore=e,this._delegate=n}get query(){return new Us(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new Bf(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(n=>new yl(this._firestore,n))}forEach(e,n){this._delegate.forEach(o=>{e.call(n,new Bf(this._firestore,o))})}isEqual(e){return tm(this._delegate,e._delegate)}}class Bh extends Us{constructor(e,n){super(e,n),this.firestore=e,this._delegate=n}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new _l(this.firestore,e):null}doc(e){try{return new _l(this.firestore,void 0===e?Hg(this._delegate):Hg(this._delegate,e))}catch(n){throw ka(n,"doc()","CollectionReference.doc()")}}add(e){return function sm(i,e){const n=Ur(i.firestore,Xi),o=Hg(i),u=kf(i.converter,e);return Ff(n,[Id(jc(i.firestore),"addDoc",o._key,u,null!==i.converter,{}).toMutation(o._key,Ai.exists(!1))]).then(()=>o)}(this._delegate,e).then(n=>new _l(this.firestore,n))}isEqual(e){return qv(this._delegate,e._delegate)}withConverter(e){return new Bh(this.firestore,this._delegate.withConverter(e?nh.getInstance(this.firestore,e):null))}}function rh(i){return Ur(i,Ps)}class H_{constructor(...e){this._delegate=new yd(...e)}static documentId(){return new H_(si.keyField().canonicalString())}isEqual(e){return(e=(0,ze.m9)(e))instanceof yd&&this._delegate._internalPath.isEqual(e._internalPath)}}class Uh{constructor(e){this._delegate=e}static serverTimestamp(){const e=function Ty(){return new Zd("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new Uh(e)}static delete(){const e=function Ey(){return new Yl("deleteField")}();return e._methodName="FieldValue.delete",new Uh(e)}static arrayUnion(...e){const n=function by(...i){return new Rf("arrayUnion",i)}(...e);return n._methodName="FieldValue.arrayUnion",new Uh(n)}static arrayRemove(...e){const n=function wy(...i){return new Nf("arrayRemove",i)}(...e);return n._methodName="FieldValue.arrayRemove",new Uh(n)}static increment(e){const n=function am(i){return new Of("increment",i)}(e);return n._methodName="FieldValue.increment",new Uh(n)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const eI={Firestore:Vh,GeoPoint:pc,Timestamp:Rr,Blob:Vf,Transaction:G_,WriteBatch:Py,DocumentReference:_l,DocumentSnapshot:jp,Query:Us,QueryDocumentSnapshot:Bf,QuerySnapshot:gc,CollectionReference:Bh,FieldPath:H_,FieldValue:Uh,setLogLevel:function X0(i){!function $a(i){Da.setLogLevel(i)}(i)},CACHE_SIZE_UNLIMITED:-1};function z_(i,e){return function nI(i,e=Ee.z){return new Oe.y(n=>{let o;return null!=e?e.schedule(()=>{o=i.onSnapshot({includeMetadataChanges:!0},n)}):o=i.onSnapshot({includeMetadataChanges:!0},n),()=>{o?.()}})}(i,e)}function W_(i,e){return z_(i,e).pipe((0,it.U)(n=>({payload:n,type:"query"})))}!function $_(i){(function tI(i,e){i.INTERNAL.registerComponent(new qe.wA("firestore-compat",n=>{const o=n.getProvider("app-compat").getImmediate(),u=n.getProvider("firestore").getImmediate();return e(o,u)},"PUBLIC").setServiceProps(Object.assign({},eI)))})(i,(e,n)=>new Vh(e,n,new Oy)),i.registerVersion("@firebase/firestore-compat","0.3.20")}(nn.Z),H(7142);class q_{ref;afs;constructor(e,n){this.ref=e,this.afs=n}set(e,n){return this.ref.set(e,n)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,n){const o=this.ref.collection(e),{ref:u,query:h}=pm(o,n);return new xy(u,h,this.afs)}snapshotChanges(){return function rI(i,e){return z_(i,e).pipe((0,pe.O)(void 0),dt(),(0,it.U)(n=>{const[o,u]=n;return u.exists?o?.exists?{payload:u,type:"modified"}:{payload:u,type:"added"}:{payload:u,type:"removed"}}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(ae.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,it.U)(({payload:n})=>e.idField?{...n.data(),[e.idField]:n.id}:n.data()))}get(e){return(0,I.D)(this.ref.get(e)).pipe(ae.iC)}}function Gp(i,e){return W_(i,e).pipe((0,pe.O)(void 0),dt(),(0,it.U)(n=>{const[o,u]=n,h=u.payload.docChanges(),v=h.map(P=>({type:P.type,payload:P}));return o&&JSON.stringify(o.payload.metadata)!==JSON.stringify(u.payload.metadata)&&u.payload.docs.forEach((P,V)=>{const z=h.find(le=>le.doc.ref.isEqual(P.ref)),ee=o?.payload.docs.find(le=>le.ref.isEqual(P.ref));z&&JSON.stringify(z.doc.metadata)===JSON.stringify(P.metadata)||!z&&ee&&JSON.stringify(ee.metadata)===JSON.stringify(P.metadata)||v.push({type:"modified",payload:{oldIndex:V,newIndex:V,type:"modified",doc:P}})}),v}))}function Hp(i,e,n){return Gp(i,n).pipe((0,_t.R)((o,u)=>function iI(i,e,n){return e.forEach(o=>{n.indexOf(o.type)>-1&&(i=function My(i,e){switch(e.type){case"added":if(!i[e.newIndex]||!i[e.newIndex].doc.ref.isEqual(e.doc.ref))return hm(i,e.newIndex,0,e);break;case"modified":if(null==i[e.oldIndex]||i[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const n=i.slice();return n.splice(e.oldIndex,1),n.splice(e.newIndex,0,e),n}return hm(i,e.newIndex,1,e)}break;case"removed":if(i[e.oldIndex]&&i[e.oldIndex].doc.ref.isEqual(e.doc.ref))return hm(i,e.oldIndex,1)}return i}(i,o))}),i}(o,u.map(h=>h.payload),e),[]),(0,ft.x)(),(0,it.U)(o=>o.map(u=>({type:u.type,payload:u}))))}function hm(i,e,n,...o){const u=i.slice();return u.splice(e,n,...o),u}function K_(i){return(!i||0===i.length)&&(i=["added","removed","modified"]),i}class xy{ref;query;afs;constructor(e,n,o){this.ref=e,this.query=n,this.afs=o}stateChanges(e){let n=Gp(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(n=n.pipe((0,it.U)(o=>o.filter(u=>e.indexOf(u.type)>-1)))),n.pipe((0,pe.O)(void 0),dt(),(0,yt.h)(([o,u])=>u.length>0||!o),(0,it.U)(([,o])=>o),ae.iC)}auditTrail(e){return this.stateChanges(e).pipe((0,_t.R)((n,o)=>[...n,...o],[]))}snapshotChanges(e){const n=K_(e);return Hp(this.query,n,this.afs.schedulers.outsideAngular).pipe(ae.iC)}valueChanges(e={}){return W_(this.query,this.afs.schedulers.outsideAngular).pipe((0,it.U)(n=>n.payload.docs.map(o=>e.idField?{...o.data(),[e.idField]:o.id}:o.data())),ae.iC)}get(e){return(0,I.D)(this.query.get(e)).pipe(ae.iC)}add(e){return this.ref.add(e)}doc(e){return new q_(this.ref.doc(e),this.afs)}}class sI{query;afs;constructor(e,n){this.query=e,this.afs=n}stateChanges(e){return e&&0!==e.length?Gp(this.query,this.afs.schedulers.outsideAngular).pipe((0,it.U)(n=>n.filter(o=>e.indexOf(o.type)>-1)),(0,yt.h)(n=>n.length>0),ae.iC):Gp(this.query,this.afs.schedulers.outsideAngular).pipe(ae.iC)}auditTrail(e){return this.stateChanges(e).pipe((0,_t.R)((n,o)=>[...n,...o],[]))}snapshotChanges(e){const n=K_(e);return Hp(this.query,n,this.afs.schedulers.outsideAngular).pipe(ae.iC)}valueChanges(e={}){return W_(this.query,this.afs.schedulers.outsideAngular).pipe((0,it.U)(o=>o.payload.docs.map(u=>e.idField?{[e.idField]:u.id,...u.data()}:u.data())),ae.iC)}get(e){return(0,I.D)(this.query.get(e)).pipe(ae.iC)}}const Y_=new fe.OlP("angularfire2.enableFirestorePersistence"),fm=new fe.OlP("angularfire2.firestore.persistenceSettings"),Z_=new fe.OlP("angularfire2.firestore.settings"),Q_=new fe.OlP("angularfire2.firestore.use-emulator");function pm(i,e=(n=>n)){return{query:e(i),ref:i}}let ky=(()=>{class i{schedulers;firestore;persistenceEnabled$;constructor(n,o,u,h,v,P,V,z,ee,le,Ae,Xe,kt,zt,Wt,xn,Zn){this.schedulers=V;const On=(0,Ce.on)(n,P,o),Mr=ee;le&&(0,De.nw)(On,P,Ae,kt,zt,Wt,Xe,xn),[this.firestore,this.persistenceEnabled$]=(0,Ce.cc)(`${On.name}.firestore`,"AngularFirestore",On.name,()=>{const ui=P.runOutsideAngular(()=>On.firestore());if(h&&ui.settings(h),Mr&&ui.useEmulator(...Mr),u&&!(0,y.PM)(v)){const li=()=>{try{return(0,I.D)(ui.enablePersistence(z||void 0).then(()=>!0,()=>!1))}catch(bo){return typeof console<"u"&&console.warn(bo),(0,$e.of)(!1)}};return[ui,P.runOutsideAngular(li)]}return[ui,(0,$e.of)(!1)]},[h,Mr,u])}collection(n,o){let u;u="string"==typeof n?this.firestore.collection(n):n;const{ref:h,query:v}=pm(u,o),P=this.schedulers.ngZone.run(()=>h);return new xy(P,v,this)}collectionGroup(n,o){const u=o||(v=>v),h=this.firestore.collectionGroup(n);return new sI(u(h),this)}doc(n){let o;o="string"==typeof n?this.firestore.doc(n):n;const u=this.schedulers.ngZone.run(()=>o);return new q_(u,this)}createId(){return this.firestore.collection("_").doc().id}static \u0275fac=function(o){return new(o||i)(fe.LFG(Ce.Dh),fe.LFG(Ce.xv,8),fe.LFG(Y_,8),fe.LFG(Z_,8),fe.LFG(fe.Lbi),fe.LFG(fe.R0b),fe.LFG(ae.HU),fe.LFG(fm,8),fe.LFG(Q_,8),fe.LFG(De.zQ,8),fe.LFG(De.Qv,8),fe.LFG(De.L6,8),fe.LFG(De._Q,8),fe.LFG(De.rT,8),fe.LFG(De.lh,8),fe.LFG(De.f7,8),fe.LFG(ae.Rf,8))};static \u0275prov=fe.Yz7({token:i,factory:i.\u0275fac,providedIn:"any"})}return i})()},7217:(qt,Ze,H)=>{H.d(Ze,{Dh:()=>I,GT:()=>Ee,cc:()=>it,hO:()=>dt,on:()=>pe,pX:()=>De,xv:()=>$e});var y=H(5879),fe=H(8326),ae=H(7142);const Ce=["ngOnDestroy"],De=(It,nn,Ve,Me={})=>new Proxy(It,{get:(qe,Ne)=>Ve.runOutsideAngular(()=>{if(It[Ne])return Me?.spy?.get&&Me.spy.get(Ne,It[Ne]),It[Ne];if(Ce.indexOf(Ne)>-1)return()=>{};const ze=nn.toPromise().then(ot=>{const ut=ot?.[Ne];return"function"==typeof ut?ut.bind(ot):ut?.then?ut.then(ce=>Ve.run(()=>ce)):Ve.run(()=>ut)});return new Proxy(()=>{},{get:(ot,ut)=>ze[ut],apply:(ot,ut,ce)=>ze.then(Zt=>{const Tt=Zt?.(...ce);return Me?.spy?.apply&&Me.spy.apply(Ne,ce,Tt),Tt})})})}),Ee=(It,nn)=>{nn.forEach(Ve=>{Object.getOwnPropertyNames(Ve.prototype||Ve).forEach(Me=>{Object.defineProperty(It.prototype,Me,Object.getOwnPropertyDescriptor(Ve.prototype||Ve,Me))})})};class Oe{constructor(nn){return nn}}const I=new y.OlP("angularfire2.app.options"),$e=new y.OlP("angularfire2.app.name");function pe(It,nn,Ve){const qe="object"==typeof Ve&&Ve||{};qe.name=qe.name||"string"==typeof Ve&&Ve||"[DEFAULT]";const ze=ae.Z.apps.filter(ot=>ot&&ot.name===qe.name)[0]||nn.runOutsideAngular(()=>ae.Z.initializeApp(It,qe));try{if(JSON.stringify(It)!==JSON.stringify(ze.options)){const ot=!!module.hot;me("error",`${ze.name} Firebase App already initialized with different options${ot?", you may need to reload as Firebase is not HMR aware.":"."}`)}}catch{}return new Oe(ze)}const me=(It,...nn)=>{(0,y.X6Q)()&&typeof console<"u"&&console[It](...nn)},Pe={provide:Oe,useFactory:pe,deps:[I,y.R0b,[new y.FiY,$e]]};let dt=(()=>{class It{static initializeApp(Ve,Me){return{ngModule:It,providers:[{provide:I,useValue:Ve},{provide:$e,useValue:Me}]}}constructor(Ve){ae.Z.registerVersion("angularfire",fe.q4.full,"core"),ae.Z.registerVersion("angularfire",fe.q4.full,"app-compat"),ae.Z.registerVersion("angular",y.q4F.full,Ve.toString())}static \u0275fac=function(Me){return new(Me||It)(y.LFG(y.Lbi))};static \u0275mod=y.oAB({type:It});static \u0275inj=y.cJS({providers:[Pe]})}return It})();function it(It,nn,Ve,Me,qe){const[,Ne,ze]=globalThis.\u0275AngularfireInstanceCache.find(ot=>ot[0]===It)||[];if(Ne)return function _t(It,nn){try{return It.toString()===nn.toString()}catch{return It===nn}}(qe,ze)||(yt("error",`${nn} was already initialized on the ${Ve} Firebase App with different settings.${ft?" You may need to reload as Firebase is not HMR aware.":""}`),yt("warn",{is:qe,was:ze})),Ne;{const ot=Me();return globalThis.\u0275AngularfireInstanceCache.push([It,ot,qe]),ot}}const ft=typeof module<"u"&&!!module.hot,yt=(It,...nn)=>{(0,y.X6Q)()&&typeof console<"u"&&console[It](...nn)};globalThis.\u0275AngularfireInstanceCache||=[]},8326:(qt,Ze,H)=>{H.d(Ze,{q4:()=>_t,iC:()=>Hn,HU:()=>ze,Rf:()=>nn});var y=H(5879),fe=H(534);(0,fe.registerVersion)("firebase","10.5.1","app");var De=H(1954),Oe=H(2631);const $e=new class I extends Oe.v{}(class Ee extends De.o{constructor(Ft,ve){super(Ft,ve),this.scheduler=Ft,this.work=ve}schedule(Ft,ve=0){return ve>0?super.schedule(Ft,ve):(this.delay=ve,this.state=Ft,this.scheduler.flush(this),this)}execute(Ft,ve){return ve>0||this.closed?super.execute(Ft,ve):this._execute(Ft,ve)}requestAsyncId(Ft,ve,be=0){return null!=be&&be>0||null==be&&this.delay>0?super.requestAsyncId(Ft,ve,be):(Ft.flush(this),0)}});var me=H(6321),Pe=H(9397),dt=H(5137),it=H(3093);const _t=new y.GfV("ANGULARFIRE2_VERSION");class nn{constructor(){return((Yt,Ft)=>{const ve=(0,fe.getApps)(),be=[];return ve.forEach(He=>{He.container.getProvider(Yt).instances.forEach(Le=>{be.includes(Le)||be.push(Le)})}),be})(Ve)}}const Ve="app-check";function Me(){}class qe{zone;delegate;constructor(Ft,ve=$e){this.zone=Ft,this.delegate=ve}now(){return this.delegate.now()}schedule(Ft,ve,be){const He=this.zone;return this.delegate.schedule(function(Le){He.runGuarded(()=>{Ft.apply(this,[Le])})},ve,be)}}class Ne{zone;task=null;constructor(Ft){this.zone=Ft}call(Ft,ve){const be=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Me,{},Me,Me)),ve.pipe((0,Pe.b)({next:be,complete:be,error:be})).subscribe(Ft).add(be)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let ze=(()=>{class Yt{ngZone;outsideAngular;insideAngular;constructor(ve){this.ngZone=ve,this.outsideAngular=ve.runOutsideAngular(()=>new qe(Zone.current)),this.insideAngular=ve.run(()=>new qe(Zone.current,me.z)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(be){return new(be||Yt)(y.LFG(y.R0b))};static \u0275prov=y.Yz7({token:Yt,factory:Yt.\u0275fac,providedIn:"root"})}return Yt})();function Hn(Yt){return function bn(Yt){return function(ve){return(ve=ve.lift(new Ne(Yt.ngZone))).pipe((0,dt.R)(Yt.outsideAngular),(0,it.Q)(Yt.insideAngular))}}(function ot(){const Yt=globalThis.\u0275AngularFireScheduler;if(!Yt)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return Yt}())(Yt)}},95:(qt,Ze,H)=>{H.d(Ze,{Wl:()=>yt,Fj:()=>Me,qu:()=>Do,NI:()=>Vi,u:()=>Wn,sg:()=>Lt,u5:()=>Go,Cf:()=>ze,JU:()=>_t,JJ:()=>sn,JL:()=>At,F:()=>er,On:()=>Bo,YN:()=>uo,wV:()=>Ds,_:()=>Er,UX:()=>ra,EJ:()=>ei,kI:()=>ce,_Y:()=>ao,Kr:()=>qi});var y=H(5879),fe=H(6814),ae=H(2459),Ce=H(5592),De=H(7453),Ee=H(4829),Oe=H(9940),I=H(8251),$e=H(7400),pe=H(2714),Pe=H(7398);let dt=(()=>{class W{constructor(B,ie){this._renderer=B,this._elementRef=ie,this.onChange=we=>{},this.onTouched=()=>{}}setProperty(B,ie){this._renderer.setProperty(this._elementRef.nativeElement,B,ie)}registerOnTouched(B){this.onTouched=B}registerOnChange(B){this.onChange=B}setDisabledState(B){this.setProperty("disabled",B)}static#e=this.\u0275fac=function(ie){return new(ie||W)(y.Y36(y.Qsj),y.Y36(y.SBq))};static#t=this.\u0275dir=y.lG2({type:W})}return W})(),it=(()=>{class W extends dt{static#e=this.\u0275fac=function(){let B;return function(we){return(B||(B=y.n5z(W)))(we||W)}}();static#t=this.\u0275dir=y.lG2({type:W,features:[y.qOj]})}return W})();const _t=new y.OlP("NgValueAccessor"),ft={provide:_t,useExisting:(0,y.Gpc)(()=>yt),multi:!0};let yt=(()=>{class W extends it{writeValue(B){this.setProperty("checked",B)}static#e=this.\u0275fac=function(){let B;return function(we){return(B||(B=y.n5z(W)))(we||W)}}();static#t=this.\u0275dir=y.lG2({type:W,selectors:[["input","type","checkbox","formControlName",""],["input","type","checkbox","formControl",""],["input","type","checkbox","ngModel",""]],hostBindings:function(ie,we){1&ie&&y.NdJ("change",function(In){return we.onChange(In.target.checked)})("blur",function(){return we.onTouched()})},features:[y._Bn([ft]),y.qOj]})}return W})();const It={provide:_t,useExisting:(0,y.Gpc)(()=>Me),multi:!0},Ve=new y.OlP("CompositionEventMode");let Me=(()=>{class W extends dt{constructor(B,ie,we){super(B,ie),this._compositionMode=we,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function nn(){const W=(0,fe.q)()?(0,fe.q)().getUserAgent():"";return/android (\d+)/.test(W.toLowerCase())}())}writeValue(B){this.setProperty("value",B??"")}_handleInput(B){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(B)}_compositionStart(){this._composing=!0}_compositionEnd(B){this._composing=!1,this._compositionMode&&this.onChange(B)}static#e=this.\u0275fac=function(ie){return new(ie||W)(y.Y36(y.Qsj),y.Y36(y.SBq),y.Y36(Ve,8))};static#t=this.\u0275dir=y.lG2({type:W,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(ie,we){1&ie&&y.NdJ("input",function(In){return we._handleInput(In.target.value)})("blur",function(){return we.onTouched()})("compositionstart",function(){return we._compositionStart()})("compositionend",function(In){return we._compositionEnd(In.target.value)})},features:[y._Bn([It]),y.qOj]})}return W})();function qe(W){return null==W||("string"==typeof W||Array.isArray(W))&&0===W.length}function Ne(W){return null!=W&&"number"==typeof W.length}const ze=new y.OlP("NgValidators"),ot=new y.OlP("NgAsyncValidators"),ut=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class ce{static min(q){return function Zt(W){return q=>{if(qe(q.value)||qe(W))return null;const B=parseFloat(q.value);return!isNaN(B)&&B<W?{min:{min:W,actual:q.value}}:null}}(q)}static max(q){return function Tt(W){return q=>{if(qe(q.value)||qe(W))return null;const B=parseFloat(q.value);return!isNaN(B)&&B>W?{max:{max:W,actual:q.value}}:null}}(q)}static required(q){return function Hn(W){return qe(W.value)?{required:!0}:null}(q)}static requiredTrue(q){return function bn(W){return!0===W.value?null:{required:!0}}(q)}static email(q){return function Ir(W){return qe(W.value)||ut.test(W.value)?null:{email:!0}}(q)}static minLength(q){return function or(W){return q=>qe(q.value)||!Ne(q.value)?null:q.value.length<W?{minlength:{requiredLength:W,actualLength:q.value.length}}:null}(q)}static maxLength(q){return function Yt(W){return q=>Ne(q.value)&&q.value.length>W?{maxlength:{requiredLength:W,actualLength:q.value.length}}:null}(q)}static pattern(q){return function Ft(W){if(!W)return ve;let q,B;return"string"==typeof W?(B="","^"!==W.charAt(0)&&(B+="^"),B+=W,"$"!==W.charAt(W.length-1)&&(B+="$"),q=new RegExp(B)):(B=W.toString(),q=W),ie=>{if(qe(ie.value))return null;const we=ie.value;return q.test(we)?null:{pattern:{requiredPattern:B,actualValue:we}}}}(q)}static nullValidator(q){return null}static compose(q){return Ct(q)}static composeAsync(q){return wt(q)}}function ve(W){return null}function be(W){return null!=W}function He(W){return(0,y.QGY)(W)?(0,ae.D)(W):W}function xe(W){let q={};return W.forEach(B=>{q=null!=B?{...q,...B}:q}),0===Object.keys(q).length?null:q}function Le(W,q){return q.map(B=>B(W))}function Pt(W){return W.map(q=>function Ye(W){return!W.validate}(q)?q:B=>q.validate(B))}function Ct(W){if(!W)return null;const q=W.filter(be);return 0==q.length?null:function(B){return xe(Le(B,q))}}function ar(W){return null!=W?Ct(Pt(W)):null}function wt(W){if(!W)return null;const q=W.filter(be);return 0==q.length?null:function(B){return function me(...W){const q=(0,Oe.jO)(W),{args:B,keys:ie}=(0,De.D)(W),we=new Ce.y(Xt=>{const{length:In}=B;if(!In)return void Xt.complete();const xi=new Array(In);let is=In,ho=In;for(let fo=0;fo<In;fo++){let ji=!1;(0,Ee.Xf)(B[fo]).subscribe((0,I.x)(Xt,ss=>{ji||(ji=!0,ho--),xi[fo]=ss},()=>is--,void 0,()=>{(!is||!ji)&&(ho||Xt.next(ie?(0,pe.n)(ie,xi):xi),Xt.complete())}))}});return q?we.pipe((0,$e.Z)(q)):we}(Le(B,q).map(He)).pipe((0,Pe.U)(xe))}}function Tn(W){return null!=W?wt(Pt(W)):null}function on(W,q){return null===W?[q]:Array.isArray(W)?[...W,q]:[W,q]}function Qn(W){return W._rawValidators}function Cn(W){return W._rawAsyncValidators}function Pn(W){return W?Array.isArray(W)?W:[W]:[]}function _e(W,q){return Array.isArray(W)?W.includes(q):W===q}function Se(W,q){const B=Pn(q);return Pn(W).forEach(we=>{_e(B,we)||B.push(we)}),B}function Ue(W,q){return Pn(q).filter(B=>!_e(W,B))}class at{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(q){this._rawValidators=q||[],this._composedValidatorFn=ar(this._rawValidators)}_setAsyncValidators(q){this._rawAsyncValidators=q||[],this._composedAsyncValidatorFn=Tn(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(q){this._onDestroyCallbacks.push(q)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(q=>q()),this._onDestroyCallbacks=[]}reset(q=void 0){this.control&&this.control.reset(q)}hasError(q,B){return!!this.control&&this.control.hasError(q,B)}getError(q,B){return this.control?this.control.getError(q,B):null}}class pt extends at{get formDirective(){return null}get path(){return null}}class Mt extends at{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class Nn{constructor(q){this._cd=q}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let sn=(()=>{class W extends Nn{constructor(B){super(B)}static#e=this.\u0275fac=function(ie){return new(ie||W)(y.Y36(Mt,2))};static#t=this.\u0275dir=y.lG2({type:W,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(ie,we){2&ie&&y.ekj("ng-untouched",we.isUntouched)("ng-touched",we.isTouched)("ng-pristine",we.isPristine)("ng-dirty",we.isDirty)("ng-valid",we.isValid)("ng-invalid",we.isInvalid)("ng-pending",we.isPending)},features:[y.qOj]})}return W})(),At=(()=>{class W extends Nn{constructor(B){super(B)}static#e=this.\u0275fac=function(ie){return new(ie||W)(y.Y36(pt,10))};static#t=this.\u0275dir=y.lG2({type:W,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(ie,we){2&ie&&y.ekj("ng-untouched",we.isUntouched)("ng-touched",we.isTouched)("ng-pristine",we.isPristine)("ng-dirty",we.isDirty)("ng-valid",we.isValid)("ng-invalid",we.isInvalid)("ng-pending",we.isPending)("ng-submitted",we.isSubmitted)},features:[y.qOj]})}return W})();const di="VALID",vi="INVALID",yi="PENDING",Oi="DISABLED";function Te(W){return(oe(W)?W.validators:W)||null}function ne(W,q){return(oe(q)?q.asyncValidators:W)||null}function oe(W){return null!=W&&!Array.isArray(W)&&"object"==typeof W}function Re(W,q,B){const ie=W.controls;if(!(q?Object.keys(ie):ie).length)throw new y.vHH(1e3,"");if(!ie[B])throw new y.vHH(1001,"")}function lt(W,q,B){W._forEachChild((ie,we)=>{if(void 0===B[we])throw new y.vHH(1002,"")})}class Rt{constructor(q,B){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(q),this._assignAsyncValidators(B)}get validator(){return this._composedValidatorFn}set validator(q){this._rawValidators=this._composedValidatorFn=q}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(q){this._rawAsyncValidators=this._composedAsyncValidatorFn=q}get parent(){return this._parent}get valid(){return this.status===di}get invalid(){return this.status===vi}get pending(){return this.status==yi}get disabled(){return this.status===Oi}get enabled(){return this.status!==Oi}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(q){this._assignValidators(q)}setAsyncValidators(q){this._assignAsyncValidators(q)}addValidators(q){this.setValidators(Se(q,this._rawValidators))}addAsyncValidators(q){this.setAsyncValidators(Se(q,this._rawAsyncValidators))}removeValidators(q){this.setValidators(Ue(q,this._rawValidators))}removeAsyncValidators(q){this.setAsyncValidators(Ue(q,this._rawAsyncValidators))}hasValidator(q){return _e(this._rawValidators,q)}hasAsyncValidator(q){return _e(this._rawAsyncValidators,q)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(q={}){this.touched=!0,this._parent&&!q.onlySelf&&this._parent.markAsTouched(q)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(q=>q.markAllAsTouched())}markAsUntouched(q={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(B=>{B.markAsUntouched({onlySelf:!0})}),this._parent&&!q.onlySelf&&this._parent._updateTouched(q)}markAsDirty(q={}){this.pristine=!1,this._parent&&!q.onlySelf&&this._parent.markAsDirty(q)}markAsPristine(q={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(B=>{B.markAsPristine({onlySelf:!0})}),this._parent&&!q.onlySelf&&this._parent._updatePristine(q)}markAsPending(q={}){this.status=yi,!1!==q.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!q.onlySelf&&this._parent.markAsPending(q)}disable(q={}){const B=this._parentMarkedDirty(q.onlySelf);this.status=Oi,this.errors=null,this._forEachChild(ie=>{ie.disable({...q,onlySelf:!0})}),this._updateValue(),!1!==q.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...q,skipPristineCheck:B}),this._onDisabledChange.forEach(ie=>ie(!0))}enable(q={}){const B=this._parentMarkedDirty(q.onlySelf);this.status=di,this._forEachChild(ie=>{ie.enable({...q,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:q.emitEvent}),this._updateAncestors({...q,skipPristineCheck:B}),this._onDisabledChange.forEach(ie=>ie(!1))}_updateAncestors(q){this._parent&&!q.onlySelf&&(this._parent.updateValueAndValidity(q),q.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(q){this._parent=q}getRawValue(){return this.value}updateValueAndValidity(q={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===di||this.status===yi)&&this._runAsyncValidator(q.emitEvent)),!1!==q.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!q.onlySelf&&this._parent.updateValueAndValidity(q)}_updateTreeValidity(q={emitEvent:!0}){this._forEachChild(B=>B._updateTreeValidity(q)),this.updateValueAndValidity({onlySelf:!0,emitEvent:q.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Oi:di}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(q){if(this.asyncValidator){this.status=yi,this._hasOwnPendingAsyncValidator=!0;const B=He(this.asyncValidator(this));this._asyncValidationSubscription=B.subscribe(ie=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(ie,{emitEvent:q})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(q,B={}){this.errors=q,this._updateControlsErrors(!1!==B.emitEvent)}get(q){let B=q;return null==B||(Array.isArray(B)||(B=B.split(".")),0===B.length)?null:B.reduce((ie,we)=>ie&&ie._find(we),this)}getError(q,B){const ie=B?this.get(B):this;return ie&&ie.errors?ie.errors[q]:null}hasError(q,B){return!!this.getError(q,B)}get root(){let q=this;for(;q._parent;)q=q._parent;return q}_updateControlsErrors(q){this.status=this._calculateStatus(),q&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(q)}_initObservables(){this.valueChanges=new y.vpe,this.statusChanges=new y.vpe}_calculateStatus(){return this._allControlsDisabled()?Oi:this.errors?vi:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(yi)?yi:this._anyControlsHaveStatus(vi)?vi:di}_anyControlsHaveStatus(q){return this._anyControls(B=>B.status===q)}_anyControlsDirty(){return this._anyControls(q=>q.dirty)}_anyControlsTouched(){return this._anyControls(q=>q.touched)}_updatePristine(q={}){this.pristine=!this._anyControlsDirty(),this._parent&&!q.onlySelf&&this._parent._updatePristine(q)}_updateTouched(q={}){this.touched=this._anyControlsTouched(),this._parent&&!q.onlySelf&&this._parent._updateTouched(q)}_registerOnCollectionChange(q){this._onCollectionChange=q}_setUpdateStrategy(q){oe(q)&&null!=q.updateOn&&(this._updateOn=q.updateOn)}_parentMarkedDirty(q){return!q&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(q){return null}_assignValidators(q){this._rawValidators=Array.isArray(q)?q.slice():q,this._composedValidatorFn=function se(W){return Array.isArray(W)?ar(W):W||null}(this._rawValidators)}_assignAsyncValidators(q){this._rawAsyncValidators=Array.isArray(q)?q.slice():q,this._composedAsyncValidatorFn=function re(W){return Array.isArray(W)?Tn(W):W||null}(this._rawAsyncValidators)}}class Kt extends Rt{constructor(q,B,ie){super(Te(B),ne(ie,B)),this.controls=q,this._initObservables(),this._setUpdateStrategy(B),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(q,B){return this.controls[q]?this.controls[q]:(this.controls[q]=B,B.setParent(this),B._registerOnCollectionChange(this._onCollectionChange),B)}addControl(q,B,ie={}){this.registerControl(q,B),this.updateValueAndValidity({emitEvent:ie.emitEvent}),this._onCollectionChange()}removeControl(q,B={}){this.controls[q]&&this.controls[q]._registerOnCollectionChange(()=>{}),delete this.controls[q],this.updateValueAndValidity({emitEvent:B.emitEvent}),this._onCollectionChange()}setControl(q,B,ie={}){this.controls[q]&&this.controls[q]._registerOnCollectionChange(()=>{}),delete this.controls[q],B&&this.registerControl(q,B),this.updateValueAndValidity({emitEvent:ie.emitEvent}),this._onCollectionChange()}contains(q){return this.controls.hasOwnProperty(q)&&this.controls[q].enabled}setValue(q,B={}){lt(this,0,q),Object.keys(q).forEach(ie=>{Re(this,!0,ie),this.controls[ie].setValue(q[ie],{onlySelf:!0,emitEvent:B.emitEvent})}),this.updateValueAndValidity(B)}patchValue(q,B={}){null!=q&&(Object.keys(q).forEach(ie=>{const we=this.controls[ie];we&&we.patchValue(q[ie],{onlySelf:!0,emitEvent:B.emitEvent})}),this.updateValueAndValidity(B))}reset(q={},B={}){this._forEachChild((ie,we)=>{ie.reset(q?q[we]:null,{onlySelf:!0,emitEvent:B.emitEvent})}),this._updatePristine(B),this._updateTouched(B),this.updateValueAndValidity(B)}getRawValue(){return this._reduceChildren({},(q,B,ie)=>(q[ie]=B.getRawValue(),q))}_syncPendingControls(){let q=this._reduceChildren(!1,(B,ie)=>!!ie._syncPendingControls()||B);return q&&this.updateValueAndValidity({onlySelf:!0}),q}_forEachChild(q){Object.keys(this.controls).forEach(B=>{const ie=this.controls[B];ie&&q(ie,B)})}_setUpControls(){this._forEachChild(q=>{q.setParent(this),q._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(q){for(const[B,ie]of Object.entries(this.controls))if(this.contains(B)&&q(ie))return!0;return!1}_reduceValue(){return this._reduceChildren({},(B,ie,we)=>((ie.enabled||this.disabled)&&(B[we]=ie.value),B))}_reduceChildren(q,B){let ie=q;return this._forEachChild((we,Xt)=>{ie=B(ie,we,Xt)}),ie}_allControlsDisabled(){for(const q of Object.keys(this.controls))if(this.controls[q].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(q){return this.controls.hasOwnProperty(q)?this.controls[q]:null}}class un extends Kt{}const Kr=new y.OlP("CallSetDisabledState",{providedIn:"root",factory:()=>js}),js="always";function Ms(W,q){return[...q.path,W]}function rt(W,q,B=js){_n(W,q),q.valueAccessor.writeValue(W.value),(W.disabled||"always"===B)&&q.valueAccessor.setDisabledState?.(W.disabled),function Vn(W,q){q.valueAccessor.registerOnChange(B=>{W._pendingValue=B,W._pendingChange=!0,W._pendingDirty=!0,"change"===W.updateOn&&Dr(W,q)})}(W,q),function qs(W,q){const B=(ie,we)=>{q.valueAccessor.writeValue(ie),we&&q.viewToModelUpdate(ie)};W.registerOnChange(B),q._registerOnDestroy(()=>{W._unregisterOnChange(B)})}(W,q),function Yr(W,q){q.valueAccessor.registerOnTouched(()=>{W._pendingTouched=!0,"blur"===W.updateOn&&W._pendingChange&&Dr(W,q),"submit"!==W.updateOn&&W.markAsTouched()})}(W,q),function en(W,q){if(q.valueAccessor.setDisabledState){const B=ie=>{q.valueAccessor.setDisabledState(ie)};W.registerOnDisabledChange(B),q._registerOnDestroy(()=>{W._unregisterOnDisabledChange(B)})}}(W,q)}function je(W,q,B=!0){const ie=()=>{};q.valueAccessor&&(q.valueAccessor.registerOnChange(ie),q.valueAccessor.registerOnTouched(ie)),jt(W,q),W&&(q._invokeOnDestroyCallbacks(),W._registerOnCollectionChange(()=>{}))}function mt(W,q){W.forEach(B=>{B.registerOnValidatorChange&&B.registerOnValidatorChange(q)})}function _n(W,q){const B=Qn(W);null!==q.validator?W.setValidators(on(B,q.validator)):"function"==typeof B&&W.setValidators([B]);const ie=Cn(W);null!==q.asyncValidator?W.setAsyncValidators(on(ie,q.asyncValidator)):"function"==typeof ie&&W.setAsyncValidators([ie]);const we=()=>W.updateValueAndValidity();mt(q._rawValidators,we),mt(q._rawAsyncValidators,we)}function jt(W,q){let B=!1;if(null!==W){if(null!==q.validator){const we=Qn(W);if(Array.isArray(we)&&we.length>0){const Xt=we.filter(In=>In!==q.validator);Xt.length!==we.length&&(B=!0,W.setValidators(Xt))}}if(null!==q.asyncValidator){const we=Cn(W);if(Array.isArray(we)&&we.length>0){const Xt=we.filter(In=>In!==q.asyncValidator);Xt.length!==we.length&&(B=!0,W.setAsyncValidators(Xt))}}}const ie=()=>{};return mt(q._rawValidators,ie),mt(q._rawAsyncValidators,ie),B}function Dr(W,q){W._pendingDirty&&W.markAsDirty(),W.setValue(W._pendingValue,{emitModelToViewChange:!1}),q.viewToModelUpdate(W._pendingValue),W._pendingChange=!1}function Pi(W,q){_n(W,q)}function Gs(W,q){if(!W.hasOwnProperty("model"))return!1;const B=W.model;return!!B.isFirstChange()||!Object.is(q,B.currentValue)}function $i(W,q){W._syncPendingControls(),q.forEach(B=>{const ie=B.control;"submit"===ie.updateOn&&ie._pendingChange&&(B.viewToModelUpdate(ie._pendingValue),ie._pendingChange=!1)})}function ea(W,q){if(!q)return null;let B,ie,we;return Array.isArray(q),q.forEach(Xt=>{Xt.constructor===Me?B=Xt:function es(W){return Object.getPrototypeOf(W.constructor)===it}(Xt)?ie=Xt:we=Xt}),we||ie||B||null}const zi={provide:pt,useExisting:(0,y.Gpc)(()=>er)},cr=(()=>Promise.resolve())();let er=(()=>{class W extends pt{constructor(B,ie,we){super(),this.callSetDisabledState=we,this.submitted=!1,this._directives=new Set,this.ngSubmit=new y.vpe,this.form=new Kt({},ar(B),Tn(ie))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(B){cr.then(()=>{const ie=this._findContainer(B.path);B.control=ie.registerControl(B.name,B.control),rt(B.control,B,this.callSetDisabledState),B.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(B)})}getControl(B){return this.form.get(B.path)}removeControl(B){cr.then(()=>{const ie=this._findContainer(B.path);ie&&ie.removeControl(B.name),this._directives.delete(B)})}addFormGroup(B){cr.then(()=>{const ie=this._findContainer(B.path),we=new Kt({});Pi(we,B),ie.registerControl(B.name,we),we.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(B){cr.then(()=>{const ie=this._findContainer(B.path);ie&&ie.removeControl(B.name)})}getFormGroup(B){return this.form.get(B.path)}updateModel(B,ie){cr.then(()=>{this.form.get(B.path).setValue(ie)})}setValue(B){this.control.setValue(B)}onSubmit(B){return this.submitted=!0,$i(this.form,this._directives),this.ngSubmit.emit(B),"dialog"===B?.target?.method}onReset(){this.resetForm()}resetForm(B=void 0){this.form.reset(B),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(B){return B.pop(),B.length?this.form.get(B):this.form}static#e=this.\u0275fac=function(ie){return new(ie||W)(y.Y36(ze,10),y.Y36(ot,10),y.Y36(Kr,8))};static#t=this.\u0275dir=y.lG2({type:W,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(ie,we){1&ie&&y.NdJ("submit",function(In){return we.onSubmit(In)})("reset",function(){return we.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[y._Bn([zi]),y.qOj]})}return W})();function ts(W,q){const B=W.indexOf(q);B>-1&&W.splice(B,1)}function Ei(W){return"object"==typeof W&&null!==W&&2===Object.keys(W).length&&"value"in W&&"disabled"in W}const Vi=class extends Rt{constructor(q=null,B,ie){super(Te(B),ne(ie,B)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(q),this._setUpdateStrategy(B),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),oe(B)&&(B.nonNullable||B.initialValueIsDefault)&&(this.defaultValue=Ei(q)?q.value:q)}setValue(q,B={}){this.value=this._pendingValue=q,this._onChange.length&&!1!==B.emitModelToViewChange&&this._onChange.forEach(ie=>ie(this.value,!1!==B.emitViewToModelChange)),this.updateValueAndValidity(B)}patchValue(q,B={}){this.setValue(q,B)}reset(q=this.defaultValue,B={}){this._applyFormState(q),this.markAsPristine(B),this.markAsUntouched(B),this.setValue(this.value,B),this._pendingChange=!1}_updateValue(){}_anyControls(q){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(q){this._onChange.push(q)}_unregisterOnChange(q){ts(this._onChange,q)}registerOnDisabledChange(q){this._onDisabledChange.push(q)}_unregisterOnDisabledChange(q){ts(this._onDisabledChange,q)}_forEachChild(q){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(q){Ei(q)?(this.value=this._pendingValue=q.value,q.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=q}},Ba={provide:Mt,useExisting:(0,y.Gpc)(()=>Bo)},xs=(()=>Promise.resolve())();let Bo=(()=>{class W extends Mt{constructor(B,ie,we,Xt,In,xi){super(),this._changeDetectorRef=In,this.callSetDisabledState=xi,this.control=new Vi,this._registered=!1,this.name="",this.update=new y.vpe,this._parent=B,this._setValidators(ie),this._setAsyncValidators(we),this.valueAccessor=ea(0,Xt)}ngOnChanges(B){if(this._checkForErrors(),!this._registered||"name"in B){if(this._registered&&(this._checkName(),this.formDirective)){const ie=B.name.previousValue;this.formDirective.removeControl({name:ie,path:this._getPath(ie)})}this._setUpControl()}"isDisabled"in B&&this._updateDisabled(B),Gs(B,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(B){this.viewModel=B,this.update.emit(B)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){rt(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(B){xs.then(()=>{this.control.setValue(B,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(B){const ie=B.isDisabled.currentValue,we=0!==ie&&(0,y.VuI)(ie);xs.then(()=>{we&&!this.control.disabled?this.control.disable():!we&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(B){return this._parent?Ms(B,this._parent):[B]}static#e=this.\u0275fac=function(ie){return new(ie||W)(y.Y36(pt,9),y.Y36(ze,10),y.Y36(ot,10),y.Y36(_t,10),y.Y36(y.sBO,8),y.Y36(Kr,8))};static#t=this.\u0275dir=y.lG2({type:W,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[y._Bn([Ba]),y.qOj,y.TTD]})}return W})(),ao=(()=>{class W{static#e=this.\u0275fac=function(ie){return new(ie||W)};static#t=this.\u0275dir=y.lG2({type:W,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]})}return W})();const Ia={provide:_t,useExisting:(0,y.Gpc)(()=>Ds),multi:!0};let Ds=(()=>{class W extends it{writeValue(B){this.setProperty("value",B??"")}registerOnChange(B){this.onChange=ie=>{B(""==ie?null:parseFloat(ie))}}static#e=this.\u0275fac=function(){let B;return function(we){return(B||(B=y.n5z(W)))(we||W)}}();static#t=this.\u0275dir=y.lG2({type:W,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(ie,we){1&ie&&y.NdJ("input",function(In){return we.onChange(In.target.value)})("blur",function(){return we.onTouched()})},features:[y._Bn([Ia]),y.qOj]})}return W})();const Bn={provide:_t,useExisting:(0,y.Gpc)(()=>Er),multi:!0};let nr=(()=>{class W{static#e=this.\u0275fac=function(ie){return new(ie||W)};static#t=this.\u0275mod=y.oAB({type:W});static#n=this.\u0275inj=y.cJS({})}return W})(),ri=(()=>{class W{constructor(){this._accessors=[]}add(B,ie){this._accessors.push([B,ie])}remove(B){for(let ie=this._accessors.length-1;ie>=0;--ie)if(this._accessors[ie][1]===B)return void this._accessors.splice(ie,1)}select(B){this._accessors.forEach(ie=>{this._isSameGroup(ie,B)&&ie[1]!==B&&ie[1].fireUncheck(B.value)})}_isSameGroup(B,ie){return!!B[0].control&&B[0]._parent===ie._control._parent&&B[1].name===ie.name}static#e=this.\u0275fac=function(ie){return new(ie||W)};static#t=this.\u0275prov=y.Yz7({token:W,factory:W.\u0275fac,providedIn:nr})}return W})(),Er=(()=>{class W extends it{constructor(B,ie,we,Xt){super(B,ie),this._registry=we,this._injector=Xt,this.setDisabledStateFired=!1,this.onChange=()=>{},this.callSetDisabledState=(0,y.f3M)(Kr,{optional:!0})??js}ngOnInit(){this._control=this._injector.get(Mt),this._checkName(),this._registry.add(this._control,this)}ngOnDestroy(){this._registry.remove(this)}writeValue(B){this._state=B===this.value,this.setProperty("checked",this._state)}registerOnChange(B){this._fn=B,this.onChange=()=>{B(this.value),this._registry.select(this)}}setDisabledState(B){(this.setDisabledStateFired||B||"whenDisabledForLegacyCode"===this.callSetDisabledState)&&this.setProperty("disabled",B),this.setDisabledStateFired=!0}fireUncheck(B){this.writeValue(B)}_checkName(){!this.name&&this.formControlName&&(this.name=this.formControlName)}static#e=this.\u0275fac=function(ie){return new(ie||W)(y.Y36(y.Qsj),y.Y36(y.SBq),y.Y36(ri),y.Y36(y.zs3))};static#t=this.\u0275dir=y.lG2({type:W,selectors:[["input","type","radio","formControlName",""],["input","type","radio","formControl",""],["input","type","radio","ngModel",""]],hostBindings:function(ie,we){1&ie&&y.NdJ("change",function(){return we.onChange()})("blur",function(){return we.onTouched()})},inputs:{name:"name",formControlName:"formControlName",value:"value"},features:[y._Bn([Bn]),y.qOj]})}return W})();const Gr=new y.OlP("NgModelWithFormControlWarning"),Cr={provide:pt,useExisting:(0,y.Gpc)(()=>Lt)};let Lt=(()=>{class W extends pt{constructor(B,ie,we){super(),this.callSetDisabledState=we,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new y.vpe,this._setValidators(B),this._setAsyncValidators(ie)}ngOnChanges(B){this._checkFormPresent(),B.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(jt(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(B){const ie=this.form.get(B.path);return rt(ie,B,this.callSetDisabledState),ie.updateValueAndValidity({emitEvent:!1}),this.directives.push(B),ie}getControl(B){return this.form.get(B.path)}removeControl(B){je(B.control||null,B,!1),function Xa(W,q){const B=W.indexOf(q);B>-1&&W.splice(B,1)}(this.directives,B)}addFormGroup(B){this._setUpFormContainer(B)}removeFormGroup(B){this._cleanUpFormContainer(B)}getFormGroup(B){return this.form.get(B.path)}addFormArray(B){this._setUpFormContainer(B)}removeFormArray(B){this._cleanUpFormContainer(B)}getFormArray(B){return this.form.get(B.path)}updateModel(B,ie){this.form.get(B.path).setValue(ie)}onSubmit(B){return this.submitted=!0,$i(this.form,this.directives),this.ngSubmit.emit(B),"dialog"===B?.target?.method}onReset(){this.resetForm()}resetForm(B=void 0){this.form.reset(B),this.submitted=!1}_updateDomValue(){this.directives.forEach(B=>{const ie=B.control,we=this.form.get(B.path);ie!==we&&(je(ie||null,B),(W=>W instanceof Vi)(we)&&(rt(we,B,this.callSetDisabledState),B.control=we))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(B){const ie=this.form.get(B.path);Pi(ie,B),ie.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(B){if(this.form){const ie=this.form.get(B.path);ie&&function hs(W,q){return jt(W,q)}(ie,B)&&ie.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){_n(this.form,this),this._oldForm&&jt(this._oldForm,this)}_checkFormPresent(){}static#e=this.\u0275fac=function(ie){return new(ie||W)(y.Y36(ze,10),y.Y36(ot,10),y.Y36(Kr,8))};static#t=this.\u0275dir=y.lG2({type:W,selectors:[["","formGroup",""]],hostBindings:function(ie,we){1&ie&&y.NdJ("submit",function(In){return we.onSubmit(In)})("reset",function(){return we.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[y._Bn([Cr]),y.qOj,y.TTD]})}return W})();const Zr={provide:Mt,useExisting:(0,y.Gpc)(()=>Wn)};let Wn=(()=>{class W extends Mt{set isDisabled(B){}static#e=this._ngModelWarningSentOnce=!1;constructor(B,ie,we,Xt,In){super(),this._ngModelWarningConfig=In,this._added=!1,this.name=null,this.update=new y.vpe,this._ngModelWarningSent=!1,this._parent=B,this._setValidators(ie),this._setAsyncValidators(we),this.valueAccessor=ea(0,Xt)}ngOnChanges(B){this._added||this._setUpControl(),Gs(B,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(B){this.viewModel=B,this.update.emit(B)}get path(){return Ms(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}static#t=this.\u0275fac=function(ie){return new(ie||W)(y.Y36(pt,13),y.Y36(ze,10),y.Y36(ot,10),y.Y36(_t,10),y.Y36(Gr,8))};static#n=this.\u0275dir=y.lG2({type:W,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[y._Bn([Zr]),y.qOj,y.TTD]})}return W})();const fs={provide:_t,useExisting:(0,y.Gpc)(()=>ei),multi:!0};function Qr(W,q){return null==W?`${q}`:(q&&"object"==typeof q&&(q="Object"),`${W}: ${q}`.slice(0,50))}let ei=(()=>{class W extends it{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(B){this._compareWith=B}writeValue(B){this.value=B;const we=Qr(this._getOptionId(B),B);this.setProperty("value",we)}registerOnChange(B){this.onChange=ie=>{this.value=this._getOptionValue(ie),B(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(B){for(const ie of this._optionMap.keys())if(this._compareWith(this._optionMap.get(ie),B))return ie;return null}_getOptionValue(B){const ie=function vn(W){return W.split(":")[0]}(B);return this._optionMap.has(ie)?this._optionMap.get(ie):B}static#e=this.\u0275fac=function(){let B;return function(we){return(B||(B=y.n5z(W)))(we||W)}}();static#t=this.\u0275dir=y.lG2({type:W,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(ie,we){1&ie&&y.NdJ("change",function(In){return we.onChange(In.target.value)})("blur",function(){return we.onTouched()})},inputs:{compareWith:"compareWith"},features:[y._Bn([fs]),y.qOj]})}return W})(),uo=(()=>{class W{constructor(B,ie,we){this._element=B,this._renderer=ie,this._select=we,this._select&&(this.id=this._select._registerOption())}set ngValue(B){null!=this._select&&(this._select._optionMap.set(this.id,B),this._setElementValue(Qr(this.id,B)),this._select.writeValue(this._select.value))}set value(B){this._setElementValue(B),this._select&&this._select.writeValue(this._select.value)}_setElementValue(B){this._renderer.setProperty(this._element.nativeElement,"value",B)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static#e=this.\u0275fac=function(ie){return new(ie||W)(y.Y36(y.SBq),y.Y36(y.Qsj),y.Y36(ei,9))};static#t=this.\u0275dir=y.lG2({type:W,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}})}return W})();const ps={provide:_t,useExisting:(0,y.Gpc)(()=>Mi),multi:!0};function ii(W,q){return null==W?`${q}`:("string"==typeof q&&(q=`'${q}'`),q&&"object"==typeof q&&(q="Object"),`${W}: ${q}`.slice(0,50))}let Mi=(()=>{class W extends it{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(B){this._compareWith=B}writeValue(B){let ie;if(this.value=B,Array.isArray(B)){const we=B.map(Xt=>this._getOptionId(Xt));ie=(Xt,In)=>{Xt._setSelected(we.indexOf(In.toString())>-1)}}else ie=(we,Xt)=>{we._setSelected(!1)};this._optionMap.forEach(ie)}registerOnChange(B){this.onChange=ie=>{const we=[],Xt=ie.selectedOptions;if(void 0!==Xt){const In=Xt;for(let xi=0;xi<In.length;xi++){const ho=this._getOptionValue(In[xi].value);we.push(ho)}}else{const In=ie.options;for(let xi=0;xi<In.length;xi++){const is=In[xi];if(is.selected){const ho=this._getOptionValue(is.value);we.push(ho)}}}this.value=we,B(we)}}_registerOption(B){const ie=(this._idCounter++).toString();return this._optionMap.set(ie,B),ie}_getOptionId(B){for(const ie of this._optionMap.keys())if(this._compareWith(this._optionMap.get(ie)._value,B))return ie;return null}_getOptionValue(B){const ie=function Un(W){return W.split(":")[0]}(B);return this._optionMap.has(ie)?this._optionMap.get(ie)._value:B}static#e=this.\u0275fac=function(){let B;return function(we){return(B||(B=y.n5z(W)))(we||W)}}();static#t=this.\u0275dir=y.lG2({type:W,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(ie,we){1&ie&&y.NdJ("change",function(In){return we.onChange(In.target)})("blur",function(){return we.onTouched()})},inputs:{compareWith:"compareWith"},features:[y._Bn([ps]),y.qOj]})}return W})(),qi=(()=>{class W{constructor(B,ie,we){this._element=B,this._renderer=ie,this._select=we,this._select&&(this.id=this._select._registerOption(this))}set ngValue(B){null!=this._select&&(this._value=B,this._setElementValue(ii(this.id,B)),this._select.writeValue(this._select.value))}set value(B){this._select?(this._value=B,this._setElementValue(ii(this.id,B)),this._select.writeValue(this._select.value)):this._setElementValue(B)}_setElementValue(B){this._renderer.setProperty(this._element.nativeElement,"value",B)}_setSelected(B){this._renderer.setProperty(this._element.nativeElement,"selected",B)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static#e=this.\u0275fac=function(ie){return new(ie||W)(y.Y36(y.SBq),y.Y36(y.Qsj),y.Y36(Mi,9))};static#t=this.\u0275dir=y.lG2({type:W,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}})}return W})(),lo=(()=>{class W{static#e=this.\u0275fac=function(ie){return new(ie||W)};static#t=this.\u0275mod=y.oAB({type:W});static#n=this.\u0275inj=y.cJS({imports:[nr]})}return W})();class Uo extends Rt{constructor(q,B,ie){super(Te(B),ne(ie,B)),this.controls=q,this._initObservables(),this._setUpdateStrategy(B),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(q){return this.controls[this._adjustIndex(q)]}push(q,B={}){this.controls.push(q),this._registerControl(q),this.updateValueAndValidity({emitEvent:B.emitEvent}),this._onCollectionChange()}insert(q,B,ie={}){this.controls.splice(q,0,B),this._registerControl(B),this.updateValueAndValidity({emitEvent:ie.emitEvent})}removeAt(q,B={}){let ie=this._adjustIndex(q);ie<0&&(ie=0),this.controls[ie]&&this.controls[ie]._registerOnCollectionChange(()=>{}),this.controls.splice(ie,1),this.updateValueAndValidity({emitEvent:B.emitEvent})}setControl(q,B,ie={}){let we=this._adjustIndex(q);we<0&&(we=0),this.controls[we]&&this.controls[we]._registerOnCollectionChange(()=>{}),this.controls.splice(we,1),B&&(this.controls.splice(we,0,B),this._registerControl(B)),this.updateValueAndValidity({emitEvent:ie.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(q,B={}){lt(this,0,q),q.forEach((ie,we)=>{Re(this,!1,we),this.at(we).setValue(ie,{onlySelf:!0,emitEvent:B.emitEvent})}),this.updateValueAndValidity(B)}patchValue(q,B={}){null!=q&&(q.forEach((ie,we)=>{this.at(we)&&this.at(we).patchValue(ie,{onlySelf:!0,emitEvent:B.emitEvent})}),this.updateValueAndValidity(B))}reset(q=[],B={}){this._forEachChild((ie,we)=>{ie.reset(q[we],{onlySelf:!0,emitEvent:B.emitEvent})}),this._updatePristine(B),this._updateTouched(B),this.updateValueAndValidity(B)}getRawValue(){return this.controls.map(q=>q.getRawValue())}clear(q={}){this.controls.length<1||(this._forEachChild(B=>B._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:q.emitEvent}))}_adjustIndex(q){return q<0?q+this.length:q}_syncPendingControls(){let q=this.controls.reduce((B,ie)=>!!ie._syncPendingControls()||B,!1);return q&&this.updateValueAndValidity({onlySelf:!0}),q}_forEachChild(q){this.controls.forEach((B,ie)=>{q(B,ie)})}_updateValue(){this.value=this.controls.filter(q=>q.enabled||this.disabled).map(q=>q.value)}_anyControls(q){return this.controls.some(B=>B.enabled&&q(B))}_setUpControls(){this._forEachChild(q=>this._registerControl(q))}_allControlsDisabled(){for(const q of this.controls)if(q.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(q){q.setParent(this),q._registerOnCollectionChange(this._onCollectionChange)}_find(q){return this.at(q)??null}}function wo(W){return!!W&&(void 0!==W.asyncValidators||void 0!==W.validators||void 0!==W.updateOn)}let Do=(()=>{class W{constructor(){this.useNonNullable=!1}get nonNullable(){const B=new W;return B.useNonNullable=!0,B}group(B,ie=null){const we=this._reduceControls(B);let Xt={};return wo(ie)?Xt=ie:null!==ie&&(Xt.validators=ie.validator,Xt.asyncValidators=ie.asyncValidator),new Kt(we,Xt)}record(B,ie=null){const we=this._reduceControls(B);return new un(we,ie)}control(B,ie,we){let Xt={};return this.useNonNullable?(wo(ie)?Xt=ie:(Xt.validators=ie,Xt.asyncValidators=we),new Vi(B,{...Xt,nonNullable:!0})):new Vi(B,ie,we)}array(B,ie,we){const Xt=B.map(In=>this._createControl(In));return new Uo(Xt,ie,we)}_reduceControls(B){const ie={};return Object.keys(B).forEach(we=>{ie[we]=this._createControl(B[we])}),ie}_createControl(B){return B instanceof Vi||B instanceof Rt?B:Array.isArray(B)?this.control(B[0],B.length>1?B[1]:null,B.length>2?B[2]:null):this.control(B)}static#e=this.\u0275fac=function(ie){return new(ie||W)};static#t=this.\u0275prov=y.Yz7({token:W,factory:W.\u0275fac,providedIn:"root"})}return W})(),Go=(()=>{class W{static withConfig(B){return{ngModule:W,providers:[{provide:Kr,useValue:B.callSetDisabledState??js}]}}static#e=this.\u0275fac=function(ie){return new(ie||W)};static#t=this.\u0275mod=y.oAB({type:W});static#n=this.\u0275inj=y.cJS({imports:[lo]})}return W})(),ra=(()=>{class W{static withConfig(B){return{ngModule:W,providers:[{provide:Gr,useValue:B.warnOnNgModelWithFormControl??"always"},{provide:Kr,useValue:B.callSetDisabledState??js}]}}static#e=this.\u0275fac=function(ie){return new(ie||W)};static#t=this.\u0275mod=y.oAB({type:W});static#n=this.\u0275inj=y.cJS({imports:[lo]})}return W})()},2614:()=>{const qt=":";const Qn=function(_e,...Se){if(Qn.translate){const at=Qn.translate(_e,Se);_e=at[0],Se=at[1]}let Ue=Pn(_e[0],_e.raw[0]);for(let at=1;at<_e.length;at++)Ue+=Se[at-1]+Pn(_e[at],_e.raw[at]);return Ue},Cn=":";function Pn(_e,Se){return Se.charAt(0)===Cn?_e.substring(function be(_e,Se){for(let Ue=1,at=1;Ue<_e.length;Ue++,at++)if("\\"===Se[at])at++;else if(_e[Ue]===qt)return Ue;throw new Error(`Unterminated $localize metadata block in "${Se}".`)}(_e,Se)+1):_e}globalThis.$localize=Qn},6593:(qt,Ze,H)=>{H.d(Ze,{Dx:()=>Mt,b2:()=>_e,q6:()=>on});var y=H(5879),fe=H(6814);class ae extends fe.w_{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class Ce extends ae{static makeCurrent(){(0,fe.HT)(new Ce)}onAndCancel(ne,re,oe){return ne.addEventListener(re,oe),()=>{ne.removeEventListener(re,oe)}}dispatchEvent(ne,re){ne.dispatchEvent(re)}remove(ne){ne.parentNode&&ne.parentNode.removeChild(ne)}createElement(ne,re){return(re=re||this.getDefaultDocument()).createElement(ne)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(ne){return ne.nodeType===Node.ELEMENT_NODE}isShadowRoot(ne){return ne instanceof DocumentFragment}getGlobalEventTarget(ne,re){return"window"===re?window:"document"===re?ne:"body"===re?ne.body:null}getBaseHref(ne){const re=function Ee(){return De=De||document.querySelector("base"),De?De.getAttribute("href"):null}();return null==re?null:function I(se){Oe=Oe||document.createElement("a"),Oe.setAttribute("href",se);const ne=Oe.pathname;return"/"===ne.charAt(0)?ne:`/${ne}`}(re)}resetBaseElement(){De=null}getUserAgent(){return window.navigator.userAgent}getCookie(ne){return(0,fe.Mx)(document.cookie,ne)}}let Oe,De=null,pe=(()=>{class se{build(){return new XMLHttpRequest}static#e=this.\u0275fac=function(oe){return new(oe||se)};static#t=this.\u0275prov=y.Yz7({token:se,factory:se.\u0275fac})}return se})();const me=new y.OlP("EventManagerPlugins");let Pe=(()=>{class se{constructor(re,oe){this._zone=oe,this._eventNameToPlugin=new Map,re.forEach(Re=>{Re.manager=this}),this._plugins=re.slice().reverse()}addEventListener(re,oe,Re){return this._findPluginFor(oe).addEventListener(re,oe,Re)}getZone(){return this._zone}_findPluginFor(re){let oe=this._eventNameToPlugin.get(re);if(oe)return oe;if(oe=this._plugins.find(lt=>lt.supports(re)),!oe)throw new y.vHH(5101,!1);return this._eventNameToPlugin.set(re,oe),oe}static#e=this.\u0275fac=function(oe){return new(oe||se)(y.LFG(me),y.LFG(y.R0b))};static#t=this.\u0275prov=y.Yz7({token:se,factory:se.\u0275fac})}return se})();class dt{constructor(ne){this._doc=ne}}const it="ng-app-id";let _t=(()=>{class se{constructor(re,oe,Re,lt={}){this.doc=re,this.appId=oe,this.nonce=Re,this.platformId=lt,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=(0,fe.PM)(lt),this.resetHostNodes()}addStyles(re){for(const oe of re)1===this.changeUsageCount(oe,1)&&this.onStyleAdded(oe)}removeStyles(re){for(const oe of re)this.changeUsageCount(oe,-1)<=0&&this.onStyleRemoved(oe)}ngOnDestroy(){const re=this.styleNodesInDOM;re&&(re.forEach(oe=>oe.remove()),re.clear());for(const oe of this.getAllStyles())this.onStyleRemoved(oe);this.resetHostNodes()}addHost(re){this.hostNodes.add(re);for(const oe of this.getAllStyles())this.addStyleToHost(re,oe)}removeHost(re){this.hostNodes.delete(re)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(re){for(const oe of this.hostNodes)this.addStyleToHost(oe,re)}onStyleRemoved(re){const oe=this.styleRef;oe.get(re)?.elements?.forEach(Re=>Re.remove()),oe.delete(re)}collectServerRenderedStyles(){const re=this.doc.head?.querySelectorAll(`style[${it}="${this.appId}"]`);if(re?.length){const oe=new Map;return re.forEach(Re=>{null!=Re.textContent&&oe.set(Re.textContent,Re)}),oe}return null}changeUsageCount(re,oe){const Re=this.styleRef;if(Re.has(re)){const lt=Re.get(re);return lt.usage+=oe,lt.usage}return Re.set(re,{usage:oe,elements:[]}),oe}getStyleElement(re,oe){const Re=this.styleNodesInDOM,lt=Re?.get(oe);if(lt?.parentNode===re)return Re.delete(oe),lt.removeAttribute(it),lt;{const Rt=this.doc.createElement("style");return this.nonce&&Rt.setAttribute("nonce",this.nonce),Rt.textContent=oe,this.platformIsServer&&Rt.setAttribute(it,this.appId),Rt}}addStyleToHost(re,oe){const Re=this.getStyleElement(re,oe);re.appendChild(Re);const lt=this.styleRef,Rt=lt.get(oe)?.elements;Rt?Rt.push(Re):lt.set(oe,{elements:[Re],usage:1})}resetHostNodes(){const re=this.hostNodes;re.clear(),re.add(this.doc.head)}static#e=this.\u0275fac=function(oe){return new(oe||se)(y.LFG(fe.K0),y.LFG(y.AFp),y.LFG(y.Ojb,8),y.LFG(y.Lbi))};static#t=this.\u0275prov=y.Yz7({token:se,factory:se.\u0275fac})}return se})();const ft={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},yt=/%COMP%/g,qe=new y.OlP("RemoveStylesOnCompDestroy",{providedIn:"root",factory:()=>!1});function ot(se,ne){return ne.map(re=>re.replace(yt,se))}let ut=(()=>{class se{constructor(re,oe,Re,lt,Rt,Kt,gn,Qt=null){this.eventManager=re,this.sharedStylesHost=oe,this.appId=Re,this.removeStylesOnCompDestroy=lt,this.doc=Rt,this.platformId=Kt,this.ngZone=gn,this.nonce=Qt,this.rendererByCompId=new Map,this.platformIsServer=(0,fe.PM)(Kt),this.defaultRenderer=new ce(re,Rt,gn,this.platformIsServer)}createRenderer(re,oe){if(!re||!oe)return this.defaultRenderer;this.platformIsServer&&oe.encapsulation===y.ifc.ShadowDom&&(oe={...oe,encapsulation:y.ifc.Emulated});const Re=this.getOrCreateRenderer(re,oe);return Re instanceof or?Re.applyToHost(re):Re instanceof Ir&&Re.applyStyles(),Re}getOrCreateRenderer(re,oe){const Re=this.rendererByCompId;let lt=Re.get(oe.id);if(!lt){const Rt=this.doc,Kt=this.ngZone,gn=this.eventManager,Qt=this.sharedStylesHost,un=this.removeStylesOnCompDestroy,wr=this.platformIsServer;switch(oe.encapsulation){case y.ifc.Emulated:lt=new or(gn,Qt,oe,this.appId,un,Rt,Kt,wr);break;case y.ifc.ShadowDom:return new bn(gn,Qt,re,oe,Rt,Kt,this.nonce,wr);default:lt=new Ir(gn,Qt,oe,un,Rt,Kt,wr)}Re.set(oe.id,lt)}return lt}ngOnDestroy(){this.rendererByCompId.clear()}static#e=this.\u0275fac=function(oe){return new(oe||se)(y.LFG(Pe),y.LFG(_t),y.LFG(y.AFp),y.LFG(qe),y.LFG(fe.K0),y.LFG(y.Lbi),y.LFG(y.R0b),y.LFG(y.Ojb))};static#t=this.\u0275prov=y.Yz7({token:se,factory:se.\u0275fac})}return se})();class ce{constructor(ne,re,oe,Re){this.eventManager=ne,this.doc=re,this.ngZone=oe,this.platformIsServer=Re,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(ne,re){return re?this.doc.createElementNS(ft[re]||re,ne):this.doc.createElement(ne)}createComment(ne){return this.doc.createComment(ne)}createText(ne){return this.doc.createTextNode(ne)}appendChild(ne,re){(Hn(ne)?ne.content:ne).appendChild(re)}insertBefore(ne,re,oe){ne&&(Hn(ne)?ne.content:ne).insertBefore(re,oe)}removeChild(ne,re){ne&&ne.removeChild(re)}selectRootElement(ne,re){let oe="string"==typeof ne?this.doc.querySelector(ne):ne;if(!oe)throw new y.vHH(-5104,!1);return re||(oe.textContent=""),oe}parentNode(ne){return ne.parentNode}nextSibling(ne){return ne.nextSibling}setAttribute(ne,re,oe,Re){if(Re){re=Re+":"+re;const lt=ft[Re];lt?ne.setAttributeNS(lt,re,oe):ne.setAttribute(re,oe)}else ne.setAttribute(re,oe)}removeAttribute(ne,re,oe){if(oe){const Re=ft[oe];Re?ne.removeAttributeNS(Re,re):ne.removeAttribute(`${oe}:${re}`)}else ne.removeAttribute(re)}addClass(ne,re){ne.classList.add(re)}removeClass(ne,re){ne.classList.remove(re)}setStyle(ne,re,oe,Re){Re&(y.JOm.DashCase|y.JOm.Important)?ne.style.setProperty(re,oe,Re&y.JOm.Important?"important":""):ne.style[re]=oe}removeStyle(ne,re,oe){oe&y.JOm.DashCase?ne.style.removeProperty(re):ne.style[re]=""}setProperty(ne,re,oe){ne[re]=oe}setValue(ne,re){ne.nodeValue=re}listen(ne,re,oe){if("string"==typeof ne&&!(ne=(0,fe.q)().getGlobalEventTarget(this.doc,ne)))throw new Error(`Unsupported event target ${ne} for event ${re}`);return this.eventManager.addEventListener(ne,re,this.decoratePreventDefault(oe))}decoratePreventDefault(ne){return re=>{if("__ngUnwrap__"===re)return ne;!1===(this.platformIsServer?this.ngZone.runGuarded(()=>ne(re)):ne(re))&&re.preventDefault()}}}function Hn(se){return"TEMPLATE"===se.tagName&&void 0!==se.content}class bn extends ce{constructor(ne,re,oe,Re,lt,Rt,Kt,gn){super(ne,lt,Rt,gn),this.sharedStylesHost=re,this.hostEl=oe,this.shadowRoot=oe.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const Qt=ot(Re.id,Re.styles);for(const un of Qt){const wr=document.createElement("style");Kt&&wr.setAttribute("nonce",Kt),wr.textContent=un,this.shadowRoot.appendChild(wr)}}nodeOrShadowRoot(ne){return ne===this.hostEl?this.shadowRoot:ne}appendChild(ne,re){return super.appendChild(this.nodeOrShadowRoot(ne),re)}insertBefore(ne,re,oe){return super.insertBefore(this.nodeOrShadowRoot(ne),re,oe)}removeChild(ne,re){return super.removeChild(this.nodeOrShadowRoot(ne),re)}parentNode(ne){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(ne)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class Ir extends ce{constructor(ne,re,oe,Re,lt,Rt,Kt,gn){super(ne,lt,Rt,Kt),this.sharedStylesHost=re,this.removeStylesOnCompDestroy=Re,this.styles=gn?ot(gn,oe.styles):oe.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}}class or extends Ir{constructor(ne,re,oe,Re,lt,Rt,Kt,gn){const Qt=Re+"-"+oe.id;super(ne,re,oe,lt,Rt,Kt,gn,Qt),this.contentAttr=function Ne(se){return"_ngcontent-%COMP%".replace(yt,se)}(Qt),this.hostAttr=function ze(se){return"_nghost-%COMP%".replace(yt,se)}(Qt)}applyToHost(ne){this.applyStyles(),this.setAttribute(ne,this.hostAttr,"")}createElement(ne,re){const oe=super.createElement(ne,re);return super.setAttribute(oe,this.contentAttr,""),oe}}let Yt=(()=>{class se extends dt{constructor(re){super(re)}supports(re){return!0}addEventListener(re,oe,Re){return re.addEventListener(oe,Re,!1),()=>this.removeEventListener(re,oe,Re)}removeEventListener(re,oe,Re){return re.removeEventListener(oe,Re)}static#e=this.\u0275fac=function(oe){return new(oe||se)(y.LFG(fe.K0))};static#t=this.\u0275prov=y.Yz7({token:se,factory:se.\u0275fac})}return se})();const Ft=["alt","control","meta","shift"],ve={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},be={alt:se=>se.altKey,control:se=>se.ctrlKey,meta:se=>se.metaKey,shift:se=>se.shiftKey};let He=(()=>{class se extends dt{constructor(re){super(re)}supports(re){return null!=se.parseEventName(re)}addEventListener(re,oe,Re){const lt=se.parseEventName(oe),Rt=se.eventCallback(lt.fullKey,Re,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>(0,fe.q)().onAndCancel(re,lt.domEventName,Rt))}static parseEventName(re){const oe=re.toLowerCase().split("."),Re=oe.shift();if(0===oe.length||"keydown"!==Re&&"keyup"!==Re)return null;const lt=se._normalizeKey(oe.pop());let Rt="",Kt=oe.indexOf("code");if(Kt>-1&&(oe.splice(Kt,1),Rt="code."),Ft.forEach(Qt=>{const un=oe.indexOf(Qt);un>-1&&(oe.splice(un,1),Rt+=Qt+".")}),Rt+=lt,0!=oe.length||0===lt.length)return null;const gn={};return gn.domEventName=Re,gn.fullKey=Rt,gn}static matchEventFullKeyCode(re,oe){let Re=ve[re.key]||re.key,lt="";return oe.indexOf("code.")>-1&&(Re=re.code,lt="code."),!(null==Re||!Re)&&(Re=Re.toLowerCase()," "===Re?Re="space":"."===Re&&(Re="dot"),Ft.forEach(Rt=>{Rt!==Re&&(0,be[Rt])(re)&&(lt+=Rt+".")}),lt+=Re,lt===oe)}static eventCallback(re,oe,Re){return lt=>{se.matchEventFullKeyCode(lt,re)&&Re.runGuarded(()=>oe(lt))}}static _normalizeKey(re){return"esc"===re?"escape":re}static#e=this.\u0275fac=function(oe){return new(oe||se)(y.LFG(fe.K0))};static#t=this.\u0275prov=y.Yz7({token:se,factory:se.\u0275fac})}return se})();const on=(0,y.eFA)(y._c5,"browser",[{provide:y.Lbi,useValue:fe.bD},{provide:y.g9A,useValue:function Ct(){Ce.makeCurrent()},multi:!0},{provide:fe.K0,useFactory:function wt(){return(0,y.RDi)(document),document},deps:[]}]),Qn=new y.OlP(""),Cn=[{provide:y.rWj,useClass:class $e{addToWindow(ne){y.dqk.getAngularTestability=(oe,Re=!0)=>{const lt=ne.findTestabilityInTree(oe,Re);if(null==lt)throw new y.vHH(5103,!1);return lt},y.dqk.getAllAngularTestabilities=()=>ne.getAllTestabilities(),y.dqk.getAllAngularRootElements=()=>ne.getAllRootElements(),y.dqk.frameworkStabilizers||(y.dqk.frameworkStabilizers=[]),y.dqk.frameworkStabilizers.push(oe=>{const Re=y.dqk.getAllAngularTestabilities();let lt=Re.length,Rt=!1;const Kt=function(gn){Rt=Rt||gn,lt--,0==lt&&oe(Rt)};Re.forEach(gn=>{gn.whenStable(Kt)})})}findTestabilityInTree(ne,re,oe){return null==re?null:ne.getTestability(re)??(oe?(0,fe.q)().isShadowRoot(re)?this.findTestabilityInTree(ne,re.host,!0):this.findTestabilityInTree(ne,re.parentElement,!0):null)}},deps:[]},{provide:y.lri,useClass:y.dDg,deps:[y.R0b,y.eoX,y.rWj]},{provide:y.dDg,useClass:y.dDg,deps:[y.R0b,y.eoX,y.rWj]}],Pn=[{provide:y.zSh,useValue:"root"},{provide:y.qLn,useFactory:function ar(){return new y.qLn},deps:[]},{provide:me,useClass:Yt,multi:!0,deps:[fe.K0,y.R0b,y.Lbi]},{provide:me,useClass:He,multi:!0,deps:[fe.K0]},ut,_t,Pe,{provide:y.FYo,useExisting:ut},{provide:fe.JF,useClass:pe,deps:[]},[]];let _e=(()=>{class se{constructor(re){}static withServerTransition(re){return{ngModule:se,providers:[{provide:y.AFp,useValue:re.appId}]}}static#e=this.\u0275fac=function(oe){return new(oe||se)(y.LFG(Qn,12))};static#t=this.\u0275mod=y.oAB({type:se});static#n=this.\u0275inj=y.cJS({providers:[...Pn,...Cn],imports:[fe.ez,y.hGG]})}return se})(),Mt=(()=>{class se{constructor(re){this._doc=re}getTitle(){return this._doc.title}setTitle(re){this._doc.title=re||""}static#e=this.\u0275fac=function(oe){return new(oe||se)(y.LFG(fe.K0))};static#t=this.\u0275prov=y.Yz7({token:se,factory:function(oe){let Re=null;return Re=oe?new oe:function pt(){return new Mt((0,y.LFG)(fe.K0))}(),Re},providedIn:"root"})}return se})();typeof window<"u"&&window},1826:(qt,Ze,H)=>{H.d(Ze,{F0:()=>Is,rH:()=>Da,Bz:()=>Ad,lC:()=>vn});var y=H(5879),fe=H(5592),ae=H(4674),De=H(2459),Ee=H(2096),Oe=H(5619),I=H(7453),$e=H(2737),pe=H(7400),me=H(9940),Pe=H(2714),dt=H(8251),it=H(7103);function _t(...S){const x=(0,me.yG)(S),A=(0,me.jO)(S),{args:L,keys:k}=(0,I.D)(S);if(0===L.length)return(0,De.D)([],x);const J=new fe.y(function ft(S,x,A=$e.y){return L=>{yt(x,()=>{const{length:k}=S,J=new Array(k);let de=k,Je=k;for(let Ke=0;Ke<k;Ke++)yt(x,()=>{const Ut=(0,De.D)(S[Ke],x);let Kn=!1;Ut.subscribe((0,dt.x)(L,hr=>{J[Ke]=hr,Kn||(Kn=!0,Je--),Je||L.next(A(J.slice()))},()=>{--de||L.complete()}))},L)},L)}}(L,x,k?de=>(0,Pe.n)(k,de):$e.y));return A?J.pipe((0,pe.Z)(A)):J}function yt(S,x,A){S?(0,it.f)(A,S,x):x()}var It=H(6973),nn=H(5211),Ve=H(4829);function Me(S){return new fe.y(x=>{(0,Ve.Xf)(S()).subscribe(x)})}var qe=H(8407);function Ne(S,x){const A=(0,ae.m)(S)?S:()=>S,L=k=>k.error(A());return new fe.y(x?k=>x.schedule(L,0,k):L)}var ze=H(6232),ot=H(7394),ut=H(9360);function ce(){return(0,ut.e)((S,x)=>{let A=null;S._refCount++;const L=(0,dt.x)(x,void 0,void 0,void 0,()=>{if(!S||S._refCount<=0||0<--S._refCount)return void(A=null);const k=S._connection,J=A;A=null,k&&(!J||k===J)&&k.unsubscribe(),x.unsubscribe()});S.subscribe(L),L.closed||(A=S.connect())})}class Zt extends fe.y{constructor(x,A){super(),this.source=x,this.subjectFactory=A,this._subject=null,this._refCount=0,this._connection=null,(0,ut.A)(x)&&(this.lift=x.lift)}_subscribe(x){return this.getSubject().subscribe(x)}getSubject(){const x=this._subject;return(!x||x.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:x}=this;this._subject=this._connection=null,x?.unsubscribe()}connect(){let x=this._connection;if(!x){x=this._connection=new ot.w0;const A=this.getSubject();x.add(this.source.subscribe((0,dt.x)(A,void 0,()=>{this._teardown(),A.complete()},L=>{this._teardown(),A.error(L)},()=>this._teardown()))),x.closed&&(this._connection=null,x=ot.w0.EMPTY)}return x}refCount(){return ce()(this)}}var Tt=H(8645),Hn=H(6814),bn=H(7398),Ir=H(4664),or=H(8180),Yt=H(7921),Ft=H(2181),ve=H(1631),be=H(1374);function He(S,x){return(0,ae.m)(x)?(0,ve.z)(S,x,1):(0,ve.z)(S,1)}var xe=H(9397);function Le(S){return(0,ut.e)((x,A)=>{let J,L=null,k=!1;L=x.subscribe((0,dt.x)(A,void 0,void 0,de=>{J=(0,Ve.Xf)(S(de,Le(S)(x))),L?(L.unsubscribe(),L=null,J.subscribe(A)):k=!0})),k&&(L.unsubscribe(),L=null,J.subscribe(A))})}var Ye=H(6699),Pt=H(3572);function Ct(S){return S<=0?()=>ze.E:(0,ut.e)((x,A)=>{let L=[];x.subscribe((0,dt.x)(A,k=>{L.push(k),S<L.length&&L.shift()},()=>{for(const k of L)A.next(k);A.complete()},void 0,()=>{L=null}))})}var ar=H(3026),Tn=H(975);function on(S){return(0,ut.e)((x,A)=>{try{x.subscribe(A)}finally{A.add(S)}})}var Qn=H(9773),Cn=H(7537),Pn=H(6593);const _e="primary",Se=Symbol("RouteTitle");class Ue{constructor(x){this.params=x||{}}has(x){return Object.prototype.hasOwnProperty.call(this.params,x)}get(x){if(this.has(x)){const A=this.params[x];return Array.isArray(A)?A[0]:A}return null}getAll(x){if(this.has(x)){const A=this.params[x];return Array.isArray(A)?A:[A]}return[]}get keys(){return Object.keys(this.params)}}function at(S){return new Ue(S)}function pt(S,x,A){const L=A.path.split("/");if(L.length>S.length||"full"===A.pathMatch&&(x.hasChildren()||L.length<S.length))return null;const k={};for(let J=0;J<L.length;J++){const de=L[J],Je=S[J];if(de.startsWith(":"))k[de.substring(1)]=Je;else if(de!==Je.path)return null}return{consumed:S.slice(0,L.length),posParams:k}}function Nn(S,x){const A=S?Object.keys(S):void 0,L=x?Object.keys(x):void 0;if(!A||!L||A.length!=L.length)return!1;let k;for(let J=0;J<A.length;J++)if(k=A[J],!kn(S[k],x[k]))return!1;return!0}function kn(S,x){if(Array.isArray(S)&&Array.isArray(x)){if(S.length!==x.length)return!1;const A=[...S].sort(),L=[...x].sort();return A.every((k,J)=>L[J]===k)}return S===x}function Ot(S){return S.length>0?S[S.length-1]:null}function sn(S){return function Ce(S){return!!S&&(S instanceof fe.y||(0,ae.m)(S.lift)&&(0,ae.m)(S.subscribe))}(S)?S:(0,y.QGY)(S)?(0,De.D)(Promise.resolve(S)):(0,Ee.of)(S)}const At={exact:function Mn(S,x,A){if(!ur(S.segments,x.segments)||!Gi(S.segments,x.segments,A)||S.numberOfChildren!==x.numberOfChildren)return!1;for(const L in x.children)if(!S.children[L]||!Mn(S.children[L],x.children[L],A))return!1;return!0},subset:xr},$n={exact:function qr(S,x){return Nn(S,x)},subset:function Sr(S,x){return Object.keys(x).length<=Object.keys(S).length&&Object.keys(x).every(A=>kn(S[A],x[A]))},ignored:()=>!0};function Fr(S,x,A){return At[A.paths](S.root,x.root,A.matrixParams)&&$n[A.queryParams](S.queryParams,x.queryParams)&&!("exact"===A.fragment&&S.fragment!==x.fragment)}function xr(S,x,A){return Bt(S,x,x.segments,A)}function Bt(S,x,A,L){if(S.segments.length>A.length){const k=S.segments.slice(0,A.length);return!(!ur(k,A)||x.hasChildren()||!Gi(k,A,L))}if(S.segments.length===A.length){if(!ur(S.segments,A)||!Gi(S.segments,A,L))return!1;for(const k in x.children)if(!S.children[k]||!xr(S.children[k],x.children[k],L))return!1;return!0}{const k=A.slice(0,S.segments.length),J=A.slice(S.segments.length);return!!(ur(S.segments,k)&&Gi(S.segments,k,L)&&S.children[_e])&&Bt(S.children[_e],x,J,L)}}function Gi(S,x,A){return x.every((L,k)=>$n[A](S[k].parameters,L.parameters))}class Sn{constructor(x=new mn([],{}),A={},L=null){this.root=x,this.queryParams=A,this.fragment=L}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=at(this.queryParams)),this._queryParamMap}toString(){return ws.serialize(this)}}class mn{constructor(x,A){this.segments=x,this.children=A,this.parent=null,Object.values(A).forEach(L=>L.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return di(this)}}class Ni{constructor(x,A){this.path=x,this.parameters=A}get parameterMap(){return this._parameterMap||(this._parameterMap=at(this.parameters)),this._parameterMap}toString(){return oe(this)}}function ur(S,x){return S.length===x.length&&S.every((A,L)=>A.path===x[L].path)}let Xr=(()=>{class S{static#e=this.\u0275fac=function(L){return new(L||S)};static#t=this.\u0275prov=y.Yz7({token:S,factory:function(){return new Hi},providedIn:"root"})}return S})();class Hi{parse(x){const A=new Ms(x);return new Sn(A.parseRootSegment(),A.parseQueryParams(),A.parseFragment())}serialize(x){const A=`/${vi(x.root,!0)}`,L=function lt(S){const x=Object.keys(S).map(A=>{const L=S[A];return Array.isArray(L)?L.map(k=>`${Oi(A)}=${Oi(k)}`).join("&"):`${Oi(A)}=${Oi(L)}`}).filter(A=>!!A);return x.length?`?${x.join("&")}`:""}(x.queryParams);return`${A}${L}${"string"==typeof x.fragment?`#${function Te(S){return encodeURI(S)}(x.fragment)}`:""}`}}const ws=new Hi;function di(S){return S.segments.map(x=>oe(x)).join("/")}function vi(S,x){if(!S.hasChildren())return di(S);if(x){const A=S.children[_e]?vi(S.children[_e],!1):"",L=[];return Object.entries(S.children).forEach(([k,J])=>{k!==_e&&L.push(`${k}:${vi(J,!1)}`)}),L.length>0?`${A}(${L.join("//")})`:A}{const A=function bs(S,x){let A=[];return Object.entries(S.children).forEach(([L,k])=>{L===_e&&(A=A.concat(x(k,L)))}),Object.entries(S.children).forEach(([L,k])=>{L!==_e&&(A=A.concat(x(k,L)))}),A}(S,(L,k)=>k===_e?[vi(S.children[_e],!1)]:[`${k}:${vi(L,!1)}`]);return 1===Object.keys(S.children).length&&null!=S.children[_e]?`${di(S)}/${A[0]}`:`${di(S)}/(${A.join("//")})`}}function yi(S){return encodeURIComponent(S).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Oi(S){return yi(S).replace(/%3B/gi,";")}function se(S){return yi(S).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function ne(S){return decodeURIComponent(S)}function re(S){return ne(S.replace(/\+/g,"%20"))}function oe(S){return`${se(S.path)}${function Re(S){return Object.keys(S).map(x=>`;${se(x)}=${se(S[x])}`).join("")}(S.parameters)}`}const Rt=/^[^\/()?;#]+/;function Kt(S){const x=S.match(Rt);return x?x[0]:""}const gn=/^[^\/()?;=#]+/,un=/^[^=?&#]+/,Kr=/^[^&#]+/;class Ms{constructor(x){this.url=x,this.remaining=x}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new mn([],{}):new mn([],this.parseChildren())}parseQueryParams(){const x={};if(this.consumeOptional("?"))do{this.parseQueryParam(x)}while(this.consumeOptional("&"));return x}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const x=[];for(this.peekStartsWith("(")||x.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),x.push(this.parseSegment());let A={};this.peekStartsWith("/(")&&(this.capture("/"),A=this.parseParens(!0));let L={};return this.peekStartsWith("(")&&(L=this.parseParens(!1)),(x.length>0||Object.keys(A).length>0)&&(L[_e]=new mn(x,A)),L}parseSegment(){const x=Kt(this.remaining);if(""===x&&this.peekStartsWith(";"))throw new y.vHH(4009,!1);return this.capture(x),new Ni(ne(x),this.parseMatrixParams())}parseMatrixParams(){const x={};for(;this.consumeOptional(";");)this.parseParam(x);return x}parseParam(x){const A=function Qt(S){const x=S.match(gn);return x?x[0]:""}(this.remaining);if(!A)return;this.capture(A);let L="";if(this.consumeOptional("=")){const k=Kt(this.remaining);k&&(L=k,this.capture(L))}x[ne(A)]=ne(L)}parseQueryParam(x){const A=function wr(S){const x=S.match(un);return x?x[0]:""}(this.remaining);if(!A)return;this.capture(A);let L="";if(this.consumeOptional("=")){const de=function js(S){const x=S.match(Kr);return x?x[0]:""}(this.remaining);de&&(L=de,this.capture(L))}const k=re(A),J=re(L);if(x.hasOwnProperty(k)){let de=x[k];Array.isArray(de)||(de=[de],x[k]=de),de.push(J)}else x[k]=J}parseParens(x){const A={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const L=Kt(this.remaining),k=this.remaining[L.length];if("/"!==k&&")"!==k&&";"!==k)throw new y.vHH(4010,!1);let J;L.indexOf(":")>-1?(J=L.slice(0,L.indexOf(":")),this.capture(J),this.capture(":")):x&&(J=_e);const de=this.parseChildren();A[J]=1===Object.keys(de).length?de[_e]:new mn([],de),this.consumeOptional("//")}return A}peekStartsWith(x){return this.remaining.startsWith(x)}consumeOptional(x){return!!this.peekStartsWith(x)&&(this.remaining=this.remaining.substring(x.length),!0)}capture(x){if(!this.consumeOptional(x))throw new y.vHH(4011,!1)}}function rt(S){return S.segments.length>0?new mn([],{[_e]:S}):S}function je(S){const x={};for(const L of Object.keys(S.children)){const J=je(S.children[L]);if(L===_e&&0===J.segments.length&&J.hasChildren())for(const[de,Je]of Object.entries(J.children))x[de]=Je;else(J.segments.length>0||J.hasChildren())&&(x[L]=J)}return function mt(S){if(1===S.numberOfChildren&&S.children[_e]){const x=S.children[_e];return new mn(S.segments.concat(x.segments),x.children)}return S}(new mn(S.segments,x))}function en(S){return S instanceof Sn}function jt(S){let x;const k=rt(function A(J){const de={};for(const Ke of J.children){const Ut=A(Ke);de[Ke.outlet]=Ut}const Je=new mn(J.url,de);return J===S&&(x=Je),Je}(S.root));return x??k}function Vn(S,x,A,L){let k=S;for(;k.parent;)k=k.parent;if(0===x.length)return qs(k,k,k,A,L);const J=function Ja(S){if("string"==typeof S[0]&&1===S.length&&"/"===S[0])return new hs(!0,0,S);let x=0,A=!1;const L=S.reduce((k,J,de)=>{if("object"==typeof J&&null!=J){if(J.outlets){const Je={};return Object.entries(J.outlets).forEach(([Ke,Ut])=>{Je[Ke]="string"==typeof Ut?Ut.split("/"):Ut}),[...k,{outlets:Je}]}if(J.segmentPath)return[...k,J.segmentPath]}return"string"!=typeof J?[...k,J]:0===de?(J.split("/").forEach((Je,Ke)=>{0==Ke&&"."===Je||(0==Ke&&""===Je?A=!0:".."===Je?x++:""!=Je&&k.push(Je))}),k):[...k,J]},[]);return new hs(A,x,L)}(x);if(J.toRoot())return qs(k,k,new mn([],{}),A,L);const de=function ma(S,x,A){if(S.isAbsolute)return new Lo(x,!0,0);if(!A)return new Lo(x,!1,NaN);if(null===A.parent)return new Lo(A,!0,0);const L=Yr(S.commands[0])?0:1;return function Dn(S,x,A){let L=S,k=x,J=A;for(;J>k;){if(J-=k,L=L.parent,!L)throw new y.vHH(4005,!1);k=L.segments.length}return new Lo(L,!1,k-J)}(A,A.segments.length-1+L,S.numberOfDoubleDots)}(J,k,S),Je=de.processChildren?es(de.segmentGroup,de.index,J.commands):Gs(de.segmentGroup,de.index,J.commands);return qs(k,de.segmentGroup,Je,A,L)}function Yr(S){return"object"==typeof S&&null!=S&&!S.outlets&&!S.segmentPath}function Dr(S){return"object"==typeof S&&null!=S&&S.outlets}function qs(S,x,A,L,k){let de,J={};L&&Object.entries(L).forEach(([Ke,Ut])=>{J[Ke]=Array.isArray(Ut)?Ut.map(Kn=>`${Kn}`):`${Ut}`}),de=S===x?A:Pi(S,x,A);const Je=rt(je(de));return new Sn(Je,J,k)}function Pi(S,x,A){const L={};return Object.entries(S.children).forEach(([k,J])=>{L[k]=J===x?A:Pi(J,x,A)}),new mn(S.segments,L)}class hs{constructor(x,A,L){if(this.isAbsolute=x,this.numberOfDoubleDots=A,this.commands=L,x&&L.length>0&&Yr(L[0]))throw new y.vHH(4003,!1);const k=L.find(Dr);if(k&&k!==Ot(L))throw new y.vHH(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Lo{constructor(x,A,L){this.segmentGroup=x,this.processChildren=A,this.index=L}}function Gs(S,x,A){if(S||(S=new mn([],{})),0===S.segments.length&&S.hasChildren())return es(S,x,A);const L=function $i(S,x,A){let L=0,k=x;const J={match:!1,pathIndex:0,commandIndex:0};for(;k<S.segments.length;){if(L>=A.length)return J;const de=S.segments[k],Je=A[L];if(Dr(Je))break;const Ke=`${Je}`,Ut=L<A.length-1?A[L+1]:null;if(k>0&&void 0===Ke)break;if(Ke&&Ut&&"object"==typeof Ut&&void 0===Ut.outlets){if(!zi(Ke,Ut,de))return J;L+=2}else{if(!zi(Ke,{},de))return J;L++}k++}return{match:!0,pathIndex:k,commandIndex:L}}(S,x,A),k=A.slice(L.commandIndex);if(L.match&&L.pathIndex<S.segments.length){const J=new mn(S.segments.slice(0,L.pathIndex),{});return J.children[_e]=new mn(S.segments.slice(L.pathIndex),S.children),es(J,0,k)}return L.match&&0===k.length?new mn(S.segments,{}):L.match&&!S.hasChildren()?ea(S,x,A):L.match?es(S,0,k):ea(S,x,A)}function es(S,x,A){if(0===A.length)return new mn(S.segments,{});{const L=function La(S){return Dr(S[0])?S[0].outlets:{[_e]:S}}(A),k={};if(Object.keys(L).some(J=>J!==_e)&&S.children[_e]&&1===S.numberOfChildren&&0===S.children[_e].segments.length){const J=es(S.children[_e],x,A);return new mn(S.segments,J.children)}return Object.entries(L).forEach(([J,de])=>{"string"==typeof de&&(de=[de]),null!==de&&(k[J]=Gs(S.children[J],x,de))}),Object.entries(S.children).forEach(([J,de])=>{void 0===L[J]&&(k[J]=de)}),new mn(S.segments,k)}}function ea(S,x,A){const L=S.segments.slice(0,x);let k=0;for(;k<A.length;){const J=A[k];if(Dr(J)){const Ke=Xa(J.outlets);return new mn(L,Ke)}if(0===k&&Yr(A[0])){L.push(new Ni(S.segments[x].path,Ii(A[0]))),k++;continue}const de=Dr(J)?J.outlets[_e]:`${J}`,Je=k<A.length-1?A[k+1]:null;de&&Je&&Yr(Je)?(L.push(new Ni(de,Ii(Je))),k+=2):(L.push(new Ni(de,{})),k++)}return new mn(L,{})}function Xa(S){const x={};return Object.entries(S).forEach(([A,L])=>{"string"==typeof L&&(L=[L]),null!==L&&(x[A]=ea(new mn([],{}),0,L))}),x}function Ii(S){const x={};return Object.entries(S).forEach(([A,L])=>x[A]=`${L}`),x}function zi(S,x,A){return S==A.path&&Nn(x,A.parameters)}const cr="imperative";class er{constructor(x,A){this.id=x,this.url=A}}class ts extends er{constructor(x,A,L="imperative",k=null){super(x,A),this.type=0,this.navigationTrigger=L,this.restoredState=k}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Ei extends er{constructor(x,A,L){super(x,A),this.urlAfterRedirects=L,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Vi extends er{constructor(x,A,L,k){super(x,A),this.reason=L,this.code=k,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Bi extends er{constructor(x,A,L,k){super(x,A),this.reason=L,this.code=k,this.type=16}}class _a extends er{constructor(x,A,L,k){super(x,A),this.error=L,this.target=k,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class hi extends er{constructor(x,A,L,k){super(x,A),this.urlAfterRedirects=L,this.state=k,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class va extends er{constructor(x,A,L,k){super(x,A),this.urlAfterRedirects=L,this.state=k,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Wi extends er{constructor(x,A,L,k,J){super(x,A),this.urlAfterRedirects=L,this.state=k,this.shouldActivate=J,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Va extends er{constructor(x,A,L,k){super(x,A),this.urlAfterRedirects=L,this.state=k,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class ya extends er{constructor(x,A,L,k){super(x,A),this.urlAfterRedirects=L,this.state=k,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class eu{constructor(x){this.route=x,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Vo{constructor(x){this.route=x,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Ba{constructor(x){this.snapshot=x,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class xs{constructor(x){this.snapshot=x,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Bo{constructor(x){this.snapshot=x,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class ao{constructor(x){this.snapshot=x,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Ia{constructor(x,A,L){this.routerEvent=x,this.position=A,this.anchor=L,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class Ds{}class Bn{constructor(x){this.url=x}}class nr{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new ri,this.attachRef=null}}let ri=(()=>{class S{constructor(){this.contexts=new Map}onChildOutletCreated(A,L){const k=this.getOrCreateContext(A);k.outlet=L,this.contexts.set(A,k)}onChildOutletDestroyed(A){const L=this.getContext(A);L&&(L.outlet=null,L.attachRef=null)}onOutletDeactivated(){const A=this.contexts;return this.contexts=new Map,A}onOutletReAttached(A){this.contexts=A}getOrCreateContext(A){let L=this.getContext(A);return L||(L=new nr,this.contexts.set(A,L)),L}getContext(A){return this.contexts.get(A)||null}static#e=this.\u0275fac=function(L){return new(L||S)};static#t=this.\u0275prov=y.Yz7({token:S,factory:S.\u0275fac,providedIn:"root"})}return S})();class Er{constructor(x){this._root=x}get root(){return this._root.value}parent(x){const A=this.pathFromRoot(x);return A.length>1?A[A.length-2]:null}children(x){const A=ks(x,this._root);return A?A.children.map(L=>L.value):[]}firstChild(x){const A=ks(x,this._root);return A&&A.children.length>0?A.children[0].value:null}siblings(x){const A=Cs(x,this._root);return A.length<2?[]:A[A.length-2].children.map(k=>k.value).filter(k=>k!==x)}pathFromRoot(x){return Cs(x,this._root).map(A=>A.value)}}function ks(S,x){if(S===x.value)return x;for(const A of x.children){const L=ks(S,A);if(L)return L}return null}function Cs(S,x){if(S===x.value)return[x];for(const A of x.children){const L=Cs(S,A);if(L.length)return L.unshift(x),L}return[]}class Gr{constructor(x,A){this.value=x,this.children=A}toString(){return`TreeNode(${this.value})`}}function Ks(S){const x={};return S&&S.children.forEach(A=>x[A.value.outlet]=A),x}class As extends Er{constructor(x,A){super(x),this.snapshot=A,Zr(this,x)}toString(){return this.snapshot.toString()}}function Cr(S,x){const A=function Lt(S,x){const de=new ns([],{},{},"",{},_e,x,null,{});return new vr("",new Gr(de,[]))}(0,x),L=new Oe.X([new Ni("",{})]),k=new Oe.X({}),J=new Oe.X({}),de=new Oe.X({}),Je=new Oe.X(""),Ke=new fn(L,k,de,Je,J,_e,x,A.root);return Ke.snapshot=A.root,new As(new Gr(Ke,[]),A)}class fn{constructor(x,A,L,k,J,de,Je,Ke){this.urlSubject=x,this.paramsSubject=A,this.queryParamsSubject=L,this.fragmentSubject=k,this.dataSubject=J,this.outlet=de,this.component=Je,this._futureSnapshot=Ke,this.title=this.dataSubject?.pipe((0,bn.U)(Ut=>Ut[Se]))??(0,Ee.of)(void 0),this.url=x,this.params=A,this.queryParams=L,this.fragment=k,this.data=J}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,bn.U)(x=>at(x)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,bn.U)(x=>at(x)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function zn(S,x="emptyOnly"){const A=S.pathFromRoot;let L=0;if("always"!==x)for(L=A.length-1;L>=1;){const k=A[L],J=A[L-1];if(k.routeConfig&&""===k.routeConfig.path)L--;else{if(J.component)break;L--}}return function ci(S){return S.reduce((x,A)=>({params:{...x.params,...A.params},data:{...x.data,...A.data},resolve:{...A.data,...x.resolve,...A.routeConfig?.data,...A._resolvedData}}),{params:{},data:{},resolve:{}})}(A.slice(L))}class ns{get title(){return this.data?.[Se]}constructor(x,A,L,k,J,de,Je,Ke,Ut){this.url=x,this.params=A,this.queryParams=L,this.fragment=k,this.data=J,this.outlet=de,this.component=Je,this.routeConfig=Ke,this._resolve=Ut}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=at(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=at(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(L=>L.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class vr extends Er{constructor(x,A){super(A),this.url=x,Zr(this,A)}toString(){return Wn(this._root)}}function Zr(S,x){x.value._routerState=S,x.children.forEach(A=>Zr(S,A))}function Wn(S){const x=S.children.length>0?` { ${S.children.map(Wn).join(", ")} } `:"";return`${S.value}${x}`}function fs(S){if(S.snapshot){const x=S.snapshot,A=S._futureSnapshot;S.snapshot=A,Nn(x.queryParams,A.queryParams)||S.queryParamsSubject.next(A.queryParams),x.fragment!==A.fragment&&S.fragmentSubject.next(A.fragment),Nn(x.params,A.params)||S.paramsSubject.next(A.params),function Mt(S,x){if(S.length!==x.length)return!1;for(let A=0;A<S.length;++A)if(!Nn(S[A],x[A]))return!1;return!0}(x.url,A.url)||S.urlSubject.next(A.url),Nn(x.data,A.data)||S.dataSubject.next(A.data)}else S.snapshot=S._futureSnapshot,S.dataSubject.next(S._futureSnapshot.data)}function Qr(S,x){const A=Nn(S.params,x.params)&&function Fa(S,x){return ur(S,x)&&S.every((A,L)=>Nn(A.parameters,x[L].parameters))}(S.url,x.url);return A&&!(!S.parent!=!x.parent)&&(!S.parent||Qr(S.parent,x.parent))}let vn=(()=>{class S{constructor(){this.activated=null,this._activatedRoute=null,this.name=_e,this.activateEvents=new y.vpe,this.deactivateEvents=new y.vpe,this.attachEvents=new y.vpe,this.detachEvents=new y.vpe,this.parentContexts=(0,y.f3M)(ri),this.location=(0,y.f3M)(y.s_b),this.changeDetector=(0,y.f3M)(y.sBO),this.environmentInjector=(0,y.f3M)(y.lqb),this.inputBinder=(0,y.f3M)(uo,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(A){if(A.name){const{firstChange:L,previousValue:k}=A.name;if(L)return;this.isTrackedInParentContexts(k)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(k)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(A){return this.parentContexts.getContext(A)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const A=this.parentContexts.getContext(this.name);A?.route&&(A.attachRef?this.attach(A.attachRef,A.route):this.activateWith(A.route,A.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new y.vHH(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new y.vHH(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new y.vHH(4012,!1);this.location.detach();const A=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(A.instance),A}attach(A,L){this.activated=A,this._activatedRoute=L,this.location.insert(A.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(A.instance)}deactivate(){if(this.activated){const A=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(A)}}activateWith(A,L){if(this.isActivated)throw new y.vHH(4013,!1);this._activatedRoute=A;const k=this.location,de=A.snapshot.component,Je=this.parentContexts.getOrCreateContext(this.name).children,Ke=new ei(A,Je,k.injector);this.activated=k.createComponent(de,{index:k.length,injector:Ke,environmentInjector:L??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static#e=this.\u0275fac=function(L){return new(L||S)};static#t=this.\u0275dir=y.lG2({type:S,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[y.TTD]})}return S})();class ei{constructor(x,A,L){this.route=x,this.childContexts=A,this.parent=L}get(x,A){return x===fn?this.route:x===ri?this.childContexts:this.parent.get(x,A)}}const uo=new y.OlP("");let ps=(()=>{class S{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(A){this.unsubscribeFromRouteData(A),this.subscribeToRouteData(A)}unsubscribeFromRouteData(A){this.outletDataSubscriptions.get(A)?.unsubscribe(),this.outletDataSubscriptions.delete(A)}subscribeToRouteData(A){const{activatedRoute:L}=A,k=_t([L.queryParams,L.params,L.data]).pipe((0,Ir.w)(([J,de,Je],Ke)=>(Je={...J,...de,...Je},0===Ke?(0,Ee.of)(Je):Promise.resolve(Je)))).subscribe(J=>{if(!A.isActivated||!A.activatedComponentRef||A.activatedRoute!==L||null===L.component)return void this.unsubscribeFromRouteData(A);const de=(0,y.qFp)(L.component);if(de)for(const{templateName:Je}of de.inputs)A.activatedComponentRef.setInput(Je,J[Je]);else this.unsubscribeFromRouteData(A)});this.outletDataSubscriptions.set(A,k)}static#e=this.\u0275fac=function(L){return new(L||S)};static#t=this.\u0275prov=y.Yz7({token:S,factory:S.\u0275fac})}return S})();function Un(S,x,A){if(A&&S.shouldReuseRoute(x.value,A.value.snapshot)){const L=A.value;L._futureSnapshot=x.value;const k=function co(S,x,A){return x.children.map(L=>{for(const k of A.children)if(S.shouldReuseRoute(L.value,k.value.snapshot))return Un(S,L,k);return Un(S,L)})}(S,x,A);return new Gr(L,k)}{if(S.shouldAttach(x.value)){const J=S.retrieve(x.value);if(null!==J){const de=J.route;return de.value._futureSnapshot=x.value,de.children=x.children.map(Je=>Un(S,Je)),de}}const L=function Mi(S){return new fn(new Oe.X(S.url),new Oe.X(S.params),new Oe.X(S.queryParams),new Oe.X(S.fragment),new Oe.X(S.data),S.outlet,S.component,S)}(x.value),k=x.children.map(J=>Un(S,J));return new Gr(L,k)}}const qi="ngNavigationCancelingError";function gs(S,x){const{redirectTo:A,navigationBehaviorOptions:L}=en(x)?{redirectTo:x,navigationBehaviorOptions:void 0}:x,k=Hs(!1,0,x);return k.url=A,k.navigationBehaviorOptions=L,k}function Hs(S,x,A){const L=new Error("NavigationCancelingError: "+(S||""));return L[qi]=!0,L.cancellationCode=x,A&&(L.url=A),L}function pi(S){return S&&S[qi]}let ta=(()=>{class S{static#e=this.\u0275fac=function(L){return new(L||S)};static#t=this.\u0275cmp=y.Xpm({type:S,selectors:[["ng-component"]],standalone:!0,features:[y.jDz],decls:1,vars:0,template:function(L,k){1&L&&y._UZ(0,"router-outlet")},dependencies:[vn],encapsulation:2})}return S})();function tu(S){const x=S.children&&S.children.map(tu),A=x?{...S,children:x}:{...S};return!A.component&&!A.loadComponent&&(x||A.loadChildren)&&A.outlet&&A.outlet!==_e&&(A.component=ta),A}function lr(S){return S.outlet||_e}function Fs(S){if(!S)return null;if(S.routeConfig?._injector)return S.routeConfig._injector;for(let x=S.parent;x;x=x.parent){const A=x.routeConfig;if(A?._loadedInjector)return A._loadedInjector;if(A?._injector)return A._injector}return null}class Ss{constructor(x,A,L,k,J){this.routeReuseStrategy=x,this.futureState=A,this.currState=L,this.forwardEvent=k,this.inputBindingEnabled=J}activate(x){const A=this.futureState._root,L=this.currState?this.currState._root:null;this.deactivateChildRoutes(A,L,x),fs(this.futureState.root),this.activateChildRoutes(A,L,x)}deactivateChildRoutes(x,A,L){const k=Ks(A);x.children.forEach(J=>{const de=J.value.outlet;this.deactivateRoutes(J,k[de],L),delete k[de]}),Object.values(k).forEach(J=>{this.deactivateRouteAndItsChildren(J,L)})}deactivateRoutes(x,A,L){const k=x.value,J=A?A.value:null;if(k===J)if(k.component){const de=L.getContext(k.outlet);de&&this.deactivateChildRoutes(x,A,de.children)}else this.deactivateChildRoutes(x,A,L);else J&&this.deactivateRouteAndItsChildren(A,L)}deactivateRouteAndItsChildren(x,A){x.value.component&&this.routeReuseStrategy.shouldDetach(x.value.snapshot)?this.detachAndStoreRouteSubtree(x,A):this.deactivateRouteAndOutlet(x,A)}detachAndStoreRouteSubtree(x,A){const L=A.getContext(x.value.outlet),k=L&&x.value.component?L.children:A,J=Ks(x);for(const de of Object.keys(J))this.deactivateRouteAndItsChildren(J[de],k);if(L&&L.outlet){const de=L.outlet.detach(),Je=L.children.onOutletDeactivated();this.routeReuseStrategy.store(x.value.snapshot,{componentRef:de,route:x,contexts:Je})}}deactivateRouteAndOutlet(x,A){const L=A.getContext(x.value.outlet),k=L&&x.value.component?L.children:A,J=Ks(x);for(const de of Object.keys(J))this.deactivateRouteAndItsChildren(J[de],k);L&&(L.outlet&&(L.outlet.deactivate(),L.children.onOutletDeactivated()),L.attachRef=null,L.route=null)}activateChildRoutes(x,A,L){const k=Ks(A);x.children.forEach(J=>{this.activateRoutes(J,k[J.value.outlet],L),this.forwardEvent(new ao(J.value.snapshot))}),x.children.length&&this.forwardEvent(new xs(x.value.snapshot))}activateRoutes(x,A,L){const k=x.value,J=A?A.value:null;if(fs(k),k===J)if(k.component){const de=L.getOrCreateContext(k.outlet);this.activateChildRoutes(x,A,de.children)}else this.activateChildRoutes(x,A,L);else if(k.component){const de=L.getOrCreateContext(k.outlet);if(this.routeReuseStrategy.shouldAttach(k.snapshot)){const Je=this.routeReuseStrategy.retrieve(k.snapshot);this.routeReuseStrategy.store(k.snapshot,null),de.children.onOutletReAttached(Je.contexts),de.attachRef=Je.componentRef,de.route=Je.route.value,de.outlet&&de.outlet.attach(Je.componentRef,Je.route.value),fs(Je.route.value),this.activateChildRoutes(x,null,de.children)}else{const Je=Fs(k.snapshot);de.attachRef=null,de.route=k,de.injector=Je,de.outlet&&de.outlet.activateWith(k,de.injector),this.activateChildRoutes(x,null,de.children)}}else this.activateChildRoutes(x,null,L)}}class nu{constructor(x){this.path=x,this.route=this.path[this.path.length-1]}}class lo{constructor(x,A){this.component=x,this.route=A}}function Uo(S,x,A){const L=S._root;return wo(L,x?x._root:null,A,[L.value])}function jo(S,x){const A=Symbol(),L=x.get(S,A);return L===A?"function"!=typeof S||(0,y.Z0I)(S)?x.get(S):S:L}function wo(S,x,A,L,k={canDeactivateChecks:[],canActivateChecks:[]}){const J=Ks(x);return S.children.forEach(de=>{(function Do(S,x,A,L,k={canDeactivateChecks:[],canActivateChecks:[]}){const J=S.value,de=x?x.value:null,Je=A?A.getContext(S.value.outlet):null;if(de&&J.routeConfig===de.routeConfig){const Ke=function Ta(S,x,A){if("function"==typeof A)return A(S,x);switch(A){case"pathParamsChange":return!ur(S.url,x.url);case"pathParamsOrQueryParamsChange":return!ur(S.url,x.url)||!Nn(S.queryParams,x.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Qr(S,x)||!Nn(S.queryParams,x.queryParams);default:return!Qr(S,x)}}(de,J,J.routeConfig.runGuardsAndResolvers);Ke?k.canActivateChecks.push(new nu(L)):(J.data=de.data,J._resolvedData=de._resolvedData),wo(S,x,J.component?Je?Je.children:null:A,L,k),Ke&&Je&&Je.outlet&&Je.outlet.isActivated&&k.canDeactivateChecks.push(new lo(Je.outlet.component,de))}else de&&Co(x,Je,k),k.canActivateChecks.push(new nu(L)),wo(S,null,J.component?Je?Je.children:null:A,L,k)})(de,J[de.value.outlet],A,L.concat([de.value]),k),delete J[de.value.outlet]}),Object.entries(J).forEach(([de,Je])=>Co(Je,A.getContext(de),k)),k}function Co(S,x,A){const L=Ks(S),k=S.value;Object.entries(L).forEach(([J,de])=>{Co(de,k.component?x?x.children.getContext(J):null:x,A)}),A.canDeactivateChecks.push(new lo(k.component&&x&&x.outlet&&x.outlet.isActivated?x.outlet.component:null,k))}function yr(S){return"function"==typeof S}function In(S){return S instanceof It.K||"EmptyError"===S?.name}const xi=Symbol("INITIAL_VALUE");function is(){return(0,Ir.w)(S=>_t(S.map(x=>x.pipe((0,or.q)(1),(0,Yt.O)(xi)))).pipe((0,bn.U)(x=>{for(const A of x)if(!0!==A){if(A===xi)return xi;if(!1===A||A instanceof Sn)return A}return!0}),(0,Ft.h)(x=>x!==xi),(0,or.q)(1)))}function ia(S){return(0,qe.z)((0,xe.b)(x=>{if(en(x))throw gs(0,x)}),(0,bn.U)(x=>!0===x))}class So{constructor(x){this.segmentGroup=x||null}}class Ua{constructor(x){this.urlTree=x}}function po(S){return Ne(new So(S))}function vc(S){return Ne(new Ua(S))}class ja{constructor(x,A){this.urlSerializer=x,this.urlTree=A}noMatchError(x){return new y.vHH(4002,!1)}lineralizeSegments(x,A){let L=[],k=A.root;for(;;){if(L=L.concat(k.segments),0===k.numberOfChildren)return(0,Ee.of)(L);if(k.numberOfChildren>1||!k.children[_e])return Ne(new y.vHH(4e3,!1));k=k.children[_e]}}applyRedirectCommands(x,A,L){return this.applyRedirectCreateUrlTree(A,this.urlSerializer.parse(A),x,L)}applyRedirectCreateUrlTree(x,A,L,k){const J=this.createSegmentGroup(x,A.root,L,k);return new Sn(J,this.createQueryParams(A.queryParams,this.urlTree.queryParams),A.fragment)}createQueryParams(x,A){const L={};return Object.entries(x).forEach(([k,J])=>{if("string"==typeof J&&J.startsWith(":")){const Je=J.substring(1);L[k]=A[Je]}else L[k]=J}),L}createSegmentGroup(x,A,L,k){const J=this.createSegments(x,A.segments,L,k);let de={};return Object.entries(A.children).forEach(([Je,Ke])=>{de[Je]=this.createSegmentGroup(x,Ke,L,k)}),new mn(J,de)}createSegments(x,A,L,k){return A.map(J=>J.path.startsWith(":")?this.findPosParam(x,J,k):this.findOrReturn(J,L))}findPosParam(x,A,L){const k=L[A.path.substring(1)];if(!k)throw new y.vHH(4001,!1);return k}findOrReturn(x,A){let L=0;for(const k of A){if(k.path===x.path)return A.splice(L),k;L++}return x}}const wu={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function Ga(S,x,A,L,k){const J=ru(S,x,A);return J.matched?(L=function Ln(S,x){return S.providers&&!S._injector&&(S._injector=(0,y.MMx)(S.providers,x,`Route: ${S.path}`)),S._injector??x}(x,L),function Gu(S,x,A,L){const k=x.canMatch;if(!k||0===k.length)return(0,Ee.of)(!0);const J=k.map(de=>{const Je=jo(de,S);return sn(function ie(S){return S&&yr(S.canMatch)}(Je)?Je.canMatch(x,A):S.runInContext(()=>Je(x,A)))});return(0,Ee.of)(J).pipe(is(),ia())}(L,x,A).pipe((0,bn.U)(de=>!0===de?J:{...wu}))):(0,Ee.of)(J)}function ru(S,x,A){if(""===x.path)return"full"===x.pathMatch&&(S.hasChildren()||A.length>0)?{...wu}:{matched:!0,consumedSegments:[],remainingSegments:A,parameters:{},positionalParamSegments:{}};const k=(x.matcher||pt)(A,S,x);if(!k)return{...wu};const J={};Object.entries(k.posParams??{}).forEach(([Je,Ke])=>{J[Je]=Ke.path});const de=k.consumed.length>0?{...J,...k.consumed[k.consumed.length-1].parameters}:J;return{matched:!0,consumedSegments:k.consumed,remainingSegments:A.slice(k.consumed.length),parameters:de,positionalParamSegments:k.posParams??{}}}function Zs(S,x,A,L){return A.length>0&&function Ho(S,x,A){return A.some(L=>yc(S,x,L)&&lr(L)!==_e)}(S,A,L)?{segmentGroup:new mn(x,zc(L,new mn(A,S.children))),slicedSegments:[]}:0===A.length&&function bd(S,x,A){return A.some(L=>yc(S,x,L))}(S,A,L)?{segmentGroup:new mn(S.segments,iu(S,0,A,L,S.children)),slicedSegments:A}:{segmentGroup:new mn(S.segments,S.children),slicedSegments:A}}function iu(S,x,A,L,k){const J={};for(const de of L)if(yc(S,A,de)&&!k[lr(de)]){const Je=new mn([],{});J[lr(de)]=Je}return{...k,...J}}function zc(S,x){const A={};A[_e]=x;for(const L of S)if(""===L.path&&lr(L)!==_e){const k=new mn([],{});A[lr(L)]=k}return A}function yc(S,x,A){return(!(S.hasChildren()||x.length>0)||"full"!==A.pathMatch)&&""===A.path}class Qs{constructor(x,A,L,k,J,de,Je){this.injector=x,this.configLoader=A,this.rootComponentType=L,this.config=k,this.urlTree=J,this.paramsInheritanceStrategy=de,this.urlSerializer=Je,this.allowRedirects=!0,this.applyRedirects=new ja(this.urlSerializer,this.urlTree)}noMatchError(x){return new y.vHH(4002,!1)}recognize(){const x=Zs(this.urlTree.root,[],[],this.config).segmentGroup;return this.processSegmentGroup(this.injector,this.config,x,_e).pipe(Le(A=>{if(A instanceof Ua)return this.allowRedirects=!1,this.urlTree=A.urlTree,this.match(A.urlTree);throw A instanceof So?this.noMatchError(A):A}),(0,bn.U)(A=>{const L=new ns([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},_e,this.rootComponentType,null,{}),k=new Gr(L,A),J=new vr("",k),de=function _n(S,x,A=null,L=null){return Vn(jt(S),x,A,L)}(L,[],this.urlTree.queryParams,this.urlTree.fragment);return de.queryParams=this.urlTree.queryParams,J.url=this.urlSerializer.serialize(de),this.inheritParamsAndData(J._root),{state:J,tree:de}}))}match(x){return this.processSegmentGroup(this.injector,this.config,x.root,_e).pipe(Le(L=>{throw L instanceof So?this.noMatchError(L):L}))}inheritParamsAndData(x){const A=x.value,L=zn(A,this.paramsInheritanceStrategy);A.params=Object.freeze(L.params),A.data=Object.freeze(L.data),x.children.forEach(k=>this.inheritParamsAndData(k))}processSegmentGroup(x,A,L,k){return 0===L.segments.length&&L.hasChildren()?this.processChildren(x,A,L):this.processSegment(x,A,L,L.segments,k,!0)}processChildren(x,A,L){const k=[];for(const J of Object.keys(L.children))"primary"===J?k.unshift(J):k.push(J);return(0,De.D)(k).pipe(He(J=>{const de=L.children[J],Je=function Ui(S,x){const A=S.filter(L=>lr(L)===x);return A.push(...S.filter(L=>lr(L)!==x)),A}(A,J);return this.processSegmentGroup(x,Je,de,J)}),(0,Ye.R)((J,de)=>(J.push(...de),J)),(0,Pt.d)(null),function wt(S,x){const A=arguments.length>=2;return L=>L.pipe(S?(0,Ft.h)((k,J)=>S(k,J,L)):$e.y,Ct(1),A?(0,Pt.d)(x):(0,ar.T)(()=>new It.K))}(),(0,ve.z)(J=>{if(null===J)return po(L);const de=Js(J);return function ba(S){S.sort((x,A)=>x.value.outlet===_e?-1:A.value.outlet===_e?1:x.value.outlet.localeCompare(A.value.outlet))}(de),(0,Ee.of)(de)}))}processSegment(x,A,L,k,J,de){return(0,De.D)(A).pipe(He(Je=>this.processSegmentAgainstRoute(Je._injector??x,A,Je,L,k,J,de).pipe(Le(Ke=>{if(Ke instanceof So)return(0,Ee.of)(null);throw Ke}))),(0,be.P)(Je=>!!Je),Le(Je=>{if(In(Je))return function Wc(S,x,A){return 0===x.length&&!S.children[A]}(L,k,J)?(0,Ee.of)([]):po(L);throw Je}))}processSegmentAgainstRoute(x,A,L,k,J,de,Je){return function su(S,x,A,L){return!!(lr(S)===L||L!==_e&&yc(x,A,S))&&("**"===S.path||ru(x,S,A).matched)}(L,k,J,de)?void 0===L.redirectTo?this.matchSegmentAgainstRoute(x,k,L,J,de,Je):Je&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(x,k,A,L,J,de):po(k):po(k)}expandSegmentAgainstRouteUsingRedirect(x,A,L,k,J,de){return"**"===k.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(x,L,k,de):this.expandRegularSegmentAgainstRouteUsingRedirect(x,A,L,k,J,de)}expandWildCardWithParamsAgainstRouteUsingRedirect(x,A,L,k){const J=this.applyRedirects.applyRedirectCommands([],L.redirectTo,{});return L.redirectTo.startsWith("/")?vc(J):this.applyRedirects.lineralizeSegments(L,J).pipe((0,ve.z)(de=>{const Je=new mn(de,{});return this.processSegment(x,A,Je,de,k,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(x,A,L,k,J,de){const{matched:Je,consumedSegments:Ke,remainingSegments:Ut,positionalParamSegments:Kn}=ru(A,k,J);if(!Je)return po(A);const hr=this.applyRedirects.applyRedirectCommands(Ke,k.redirectTo,Kn);return k.redirectTo.startsWith("/")?vc(hr):this.applyRedirects.lineralizeSegments(k,hr).pipe((0,ve.z)(An=>this.processSegment(x,L,A,An.concat(Ut),de,!1)))}matchSegmentAgainstRoute(x,A,L,k,J,de){let Je;if("**"===L.path){const Ke=k.length>0?Ot(k).parameters:{},Ut=new ns(k,Ke,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,Yi(L),lr(L),L.component??L._loadedComponent??null,L,Hu(L));Je=(0,Ee.of)({snapshot:Ut,consumedSegments:[],remainingSegments:[]}),A.children={}}else Je=Ga(A,L,k,x).pipe((0,bn.U)(({matched:Ke,consumedSegments:Ut,remainingSegments:Kn,parameters:hr})=>Ke?{snapshot:new ns(Ut,hr,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,Yi(L),lr(L),L.component??L._loadedComponent??null,L,Hu(L)),consumedSegments:Ut,remainingSegments:Kn}:null));return Je.pipe((0,Ir.w)(Ke=>null===Ke?po(A):this.getChildConfig(x=L._injector??x,L,k).pipe((0,Ir.w)(({routes:Ut})=>{const Kn=L._loadedInjector??x,{snapshot:hr,consumedSegments:An,remainingSegments:Bs}=Ke,{segmentGroup:ti,slicedSegments:Wu}=Zs(A,An,Bs,Ut);if(0===Wu.length&&ti.hasChildren())return this.processChildren(Kn,Ut,ti).pipe((0,bn.U)(Sa=>null===Sa?null:[new Gr(hr,Sa)]));if(0===Ut.length&&0===Wu.length)return(0,Ee.of)([new Gr(hr,[])]);const Zi=lr(L)===J;return this.processSegment(Kn,Ut,ti,Wu,Zi?_e:J,!0).pipe((0,bn.U)(Sa=>[new Gr(hr,Sa)]))}))))}getChildConfig(x,A,L){return A.children?(0,Ee.of)({routes:A.children,injector:x}):A.loadChildren?void 0!==A._loadedRoutes?(0,Ee.of)({routes:A._loadedRoutes,injector:A._loadedInjector}):function Ki(S,x,A,L){const k=x.canLoad;if(void 0===k||0===k.length)return(0,Ee.of)(!0);const J=k.map(de=>{const Je=jo(de,S);return sn(function ra(S){return S&&yr(S.canLoad)}(Je)?Je.canLoad(x,A):S.runInContext(()=>Je(x,A)))});return(0,Ee.of)(J).pipe(is(),ia())}(x,A,L).pipe((0,ve.z)(k=>k?this.configLoader.loadChildren(x,A).pipe((0,xe.b)(J=>{A._loadedRoutes=J.routes,A._loadedInjector=J.injector})):function bu(S){return Ne(Hs(!1,3))}())):(0,Ee.of)({routes:[],injector:x})}}function qc(S){const x=S.value.routeConfig;return x&&""===x.path}function Js(S){const x=[],A=new Set;for(const L of S){if(!qc(L)){x.push(L);continue}const k=x.find(J=>L.value.routeConfig===J.value.routeConfig);void 0!==k?(k.children.push(...L.children),A.add(k)):x.push(L)}for(const L of A){const k=Js(L.children);x.push(new Gr(L.value,k))}return x.filter(L=>!A.has(L))}function Yi(S){return S.data||{}}function Hu(S){return S.resolve||{}}function ct(S){return"string"==typeof S.title||null===S.title}function an(S){return(0,Ir.w)(x=>{const A=S(x);return A?(0,De.D)(A).pipe((0,bn.U)(()=>x)):(0,Ee.of)(x)})}const Yn=new y.OlP("ROUTES");let rr=(()=>{class S{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=(0,y.f3M)(y.Sil)}loadComponent(A){if(this.componentLoaders.get(A))return this.componentLoaders.get(A);if(A._loadedComponent)return(0,Ee.of)(A._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(A);const L=sn(A.loadComponent()).pipe((0,bn.U)(Jr),(0,xe.b)(J=>{this.onLoadEndListener&&this.onLoadEndListener(A),A._loadedComponent=J}),on(()=>{this.componentLoaders.delete(A)})),k=new Zt(L,()=>new Tt.x).pipe(ce());return this.componentLoaders.set(A,k),k}loadChildren(A,L){if(this.childrenLoaders.get(L))return this.childrenLoaders.get(L);if(L._loadedRoutes)return(0,Ee.of)({routes:L._loadedRoutes,injector:L._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(L);const J=function qn(S,x,A,L){return sn(S.loadChildren()).pipe((0,bn.U)(Jr),(0,ve.z)(k=>k instanceof y.YKP||Array.isArray(k)?(0,Ee.of)(k):(0,De.D)(x.compileModuleAsync(k))),(0,bn.U)(k=>{L&&L(S);let J,de,Je=!1;return Array.isArray(k)?(de=k,!0):(J=k.create(A).injector,de=J.get(Yn,[],{optional:!0,self:!0}).flat()),{routes:de.map(tu),injector:J}}))}(L,this.compiler,A,this.onLoadEndListener).pipe(on(()=>{this.childrenLoaders.delete(L)})),de=new Zt(J,()=>new Tt.x).pipe(ce());return this.childrenLoaders.set(L,de),de}static#e=this.\u0275fac=function(L){return new(L||S)};static#t=this.\u0275prov=y.Yz7({token:S,factory:S.\u0275fac,providedIn:"root"})}return S})();function Jr(S){return function yn(S){return S&&"object"==typeof S&&"default"in S}(S)?S.default:S}let Tr=(()=>{class S{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new Tt.x,this.transitionAbortSubject=new Tt.x,this.configLoader=(0,y.f3M)(rr),this.environmentInjector=(0,y.f3M)(y.lqb),this.urlSerializer=(0,y.f3M)(Xr),this.rootContexts=(0,y.f3M)(ri),this.inputBindingEnabled=null!==(0,y.f3M)(uo,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>(0,Ee.of)(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=k=>this.events.next(new Vo(k)),this.configLoader.onLoadStartListener=k=>this.events.next(new eu(k))}complete(){this.transitions?.complete()}handleNavigationRequest(A){const L=++this.navigationId;this.transitions?.next({...this.transitions.value,...A,id:L})}setupNavigations(A,L,k){return this.transitions=new Oe.X({id:0,currentUrlTree:L,currentRawUrl:L,currentBrowserUrl:L,extractedUrl:A.urlHandlingStrategy.extract(L),urlAfterRedirects:A.urlHandlingStrategy.extract(L),rawUrl:L,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:cr,restoredState:null,currentSnapshot:k.snapshot,targetSnapshot:null,currentRouterState:k,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe((0,Ft.h)(J=>0!==J.id),(0,bn.U)(J=>({...J,extractedUrl:A.urlHandlingStrategy.extract(J.rawUrl)})),(0,Ir.w)(J=>{this.currentTransition=J;let de=!1,Je=!1;return(0,Ee.of)(J).pipe((0,xe.b)(Ke=>{this.currentNavigation={id:Ke.id,initialUrl:Ke.rawUrl,extractedUrl:Ke.extractedUrl,trigger:Ke.source,extras:Ke.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),(0,Ir.w)(Ke=>{const Ut=Ke.currentBrowserUrl.toString(),Kn=!A.navigated||Ke.extractedUrl.toString()!==Ut||Ut!==Ke.currentUrlTree.toString();if(!Kn&&"reload"!==(Ke.extras.onSameUrlNavigation??A.onSameUrlNavigation)){const An="";return this.events.next(new Bi(Ke.id,this.urlSerializer.serialize(Ke.rawUrl),An,0)),Ke.resolve(null),ze.E}if(A.urlHandlingStrategy.shouldProcessUrl(Ke.rawUrl))return(0,Ee.of)(Ke).pipe((0,Ir.w)(An=>{const Bs=this.transitions?.getValue();return this.events.next(new ts(An.id,this.urlSerializer.serialize(An.extractedUrl),An.source,An.restoredState)),Bs!==this.transitions?.getValue()?ze.E:Promise.resolve(An)}),function O(S,x,A,L,k,J){return(0,ve.z)(de=>function Ha(S,x,A,L,k,J,de="emptyOnly"){return new Qs(S,x,A,L,k,de,J).recognize()}(S,x,A,L,de.extractedUrl,k,J).pipe((0,bn.U)(({state:Je,tree:Ke})=>({...de,targetSnapshot:Je,urlAfterRedirects:Ke}))))}(this.environmentInjector,this.configLoader,this.rootComponentType,A.config,this.urlSerializer,A.paramsInheritanceStrategy),(0,xe.b)(An=>{J.targetSnapshot=An.targetSnapshot,J.urlAfterRedirects=An.urlAfterRedirects,this.currentNavigation={...this.currentNavigation,finalUrl:An.urlAfterRedirects};const Bs=new hi(An.id,this.urlSerializer.serialize(An.extractedUrl),this.urlSerializer.serialize(An.urlAfterRedirects),An.targetSnapshot);this.events.next(Bs)}));if(Kn&&A.urlHandlingStrategy.shouldProcessUrl(Ke.currentRawUrl)){const{id:An,extractedUrl:Bs,source:ti,restoredState:Wu,extras:Zi}=Ke,Sa=new ts(An,this.urlSerializer.serialize(Bs),ti,Wu);this.events.next(Sa);const Ra=Cr(0,this.rootComponentType).snapshot;return this.currentTransition=J={...Ke,targetSnapshot:Ra,urlAfterRedirects:Bs,extras:{...Zi,skipLocationChange:!1,replaceUrl:!1}},(0,Ee.of)(J)}{const An="";return this.events.next(new Bi(Ke.id,this.urlSerializer.serialize(Ke.extractedUrl),An,1)),Ke.resolve(null),ze.E}}),(0,xe.b)(Ke=>{const Ut=new va(Ke.id,this.urlSerializer.serialize(Ke.extractedUrl),this.urlSerializer.serialize(Ke.urlAfterRedirects),Ke.targetSnapshot);this.events.next(Ut)}),(0,bn.U)(Ke=>(this.currentTransition=J={...Ke,guards:Uo(Ke.targetSnapshot,Ke.currentSnapshot,this.rootContexts)},J)),function ho(S,x){return(0,ve.z)(A=>{const{targetSnapshot:L,currentSnapshot:k,guards:{canActivateChecks:J,canDeactivateChecks:de}}=A;return 0===de.length&&0===J.length?(0,Ee.of)({...A,guardsResult:!0}):function fo(S,x,A,L){return(0,De.D)(S).pipe((0,ve.z)(k=>function Rs(S,x,A,L,k){const J=x&&x.routeConfig?x.routeConfig.canDeactivate:null;if(!J||0===J.length)return(0,Ee.of)(!0);const de=J.map(Je=>{const Ke=Fs(x)??k,Ut=jo(Je,Ke);return sn(function B(S){return S&&yr(S.canDeactivate)}(Ut)?Ut.canDeactivate(S,x,A,L):Ke.runInContext(()=>Ut(S,x,A,L))).pipe((0,be.P)())});return(0,Ee.of)(de).pipe(is())}(k.component,k.route,A,x,L)),(0,be.P)(k=>!0!==k,!0))}(de,L,k,S).pipe((0,ve.z)(Je=>Je&&function Go(S){return"boolean"==typeof S}(Je)?function ji(S,x,A,L){return(0,De.D)(x).pipe(He(k=>(0,nn.z)(function Ao(S,x){return null!==S&&x&&x(new Ba(S)),(0,Ee.of)(!0)}(k.route.parent,L),function ss(S,x){return null!==S&&x&&x(new Bo(S)),(0,Ee.of)(!0)}(k.route,L),function bi(S,x,A){const L=x[x.length-1],J=x.slice(0,x.length-1).reverse().map(de=>function _c(S){const x=S.routeConfig?S.routeConfig.canActivateChild:null;return x&&0!==x.length?{node:S,guards:x}:null}(de)).filter(de=>null!==de).map(de=>Me(()=>{const Je=de.guards.map(Ke=>{const Ut=Fs(de.node)??A,Kn=jo(Ke,Ut);return sn(function q(S){return S&&yr(S.canActivateChild)}(Kn)?Kn.canActivateChild(L,S):Ut.runInContext(()=>Kn(L,S))).pipe((0,be.P)())});return(0,Ee.of)(Je).pipe(is())}));return(0,Ee.of)(J).pipe(is())}(S,k.path,A),function Tu(S,x,A){const L=x.routeConfig?x.routeConfig.canActivate:null;if(!L||0===L.length)return(0,Ee.of)(!0);const k=L.map(J=>Me(()=>{const de=Fs(x)??A,Je=jo(J,de);return sn(function W(S){return S&&yr(S.canActivate)}(Je)?Je.canActivate(x,S):de.runInContext(()=>Je(x,S))).pipe((0,be.P)())}));return(0,Ee.of)(k).pipe(is())}(S,k.route,A))),(0,be.P)(k=>!0!==k,!0))}(L,J,S,x):(0,Ee.of)(Je)),(0,bn.U)(Je=>({...A,guardsResult:Je})))})}(this.environmentInjector,Ke=>this.events.next(Ke)),(0,xe.b)(Ke=>{if(J.guardsResult=Ke.guardsResult,en(Ke.guardsResult))throw gs(0,Ke.guardsResult);const Ut=new Wi(Ke.id,this.urlSerializer.serialize(Ke.extractedUrl),this.urlSerializer.serialize(Ke.urlAfterRedirects),Ke.targetSnapshot,!!Ke.guardsResult);this.events.next(Ut)}),(0,Ft.h)(Ke=>!!Ke.guardsResult||(this.cancelNavigationTransition(Ke,"",3),!1)),an(Ke=>{if(Ke.guards.canActivateChecks.length)return(0,Ee.of)(Ke).pipe((0,xe.b)(Ut=>{const Kn=new Va(Ut.id,this.urlSerializer.serialize(Ut.extractedUrl),this.urlSerializer.serialize(Ut.urlAfterRedirects),Ut.targetSnapshot);this.events.next(Kn)}),(0,Ir.w)(Ut=>{let Kn=!1;return(0,Ee.of)(Ut).pipe(function Q(S,x){return(0,ve.z)(A=>{const{targetSnapshot:L,guards:{canActivateChecks:k}}=A;if(!k.length)return(0,Ee.of)(A);let J=0;return(0,De.D)(k).pipe(He(de=>function U(S,x,A,L){const k=S.routeConfig,J=S._resolve;return void 0!==k?.title&&!ct(k)&&(J[Se]=k.title),function K(S,x,A,L){const k=function ge(S){return[...Object.keys(S),...Object.getOwnPropertySymbols(S)]}(S);if(0===k.length)return(0,Ee.of)({});const J={};return(0,De.D)(k).pipe((0,ve.z)(de=>function Qe(S,x,A,L){const k=Fs(x)??L,J=jo(S,k);return sn(J.resolve?J.resolve(x,A):k.runInContext(()=>J(x,A)))}(S[de],x,A,L).pipe((0,be.P)(),(0,xe.b)(Je=>{J[de]=Je}))),Ct(1),(0,Tn.h)(J),Le(de=>In(de)?ze.E:Ne(de)))}(J,S,x,L).pipe((0,bn.U)(de=>(S._resolvedData=de,S.data=zn(S,A).resolve,k&&ct(k)&&(S.data[Se]=k.title),null)))}(de.route,L,S,x)),(0,xe.b)(()=>J++),Ct(1),(0,ve.z)(de=>J===k.length?(0,Ee.of)(A):ze.E))})}(A.paramsInheritanceStrategy,this.environmentInjector),(0,xe.b)({next:()=>Kn=!0,complete:()=>{Kn||this.cancelNavigationTransition(Ut,"",2)}}))}),(0,xe.b)(Ut=>{const Kn=new ya(Ut.id,this.urlSerializer.serialize(Ut.extractedUrl),this.urlSerializer.serialize(Ut.urlAfterRedirects),Ut.targetSnapshot);this.events.next(Kn)}))}),an(Ke=>{const Ut=Kn=>{const hr=[];Kn.routeConfig?.loadComponent&&!Kn.routeConfig._loadedComponent&&hr.push(this.configLoader.loadComponent(Kn.routeConfig).pipe((0,xe.b)(An=>{Kn.component=An}),(0,bn.U)(()=>{})));for(const An of Kn.children)hr.push(...Ut(An));return hr};return _t(Ut(Ke.targetSnapshot.root)).pipe((0,Pt.d)(),(0,or.q)(1))}),an(()=>this.afterPreactivation()),(0,bn.U)(Ke=>{const Ut=function ii(S,x,A){const L=Un(S,x._root,A?A._root:void 0);return new As(L,x)}(A.routeReuseStrategy,Ke.targetSnapshot,Ke.currentRouterState);return this.currentTransition=J={...Ke,targetRouterState:Ut},J}),(0,xe.b)(()=>{this.events.next(new Ds)}),((S,x,A,L)=>(0,bn.U)(k=>(new Ss(x,k.targetRouterState,k.currentRouterState,A,L).activate(S),k)))(this.rootContexts,A.routeReuseStrategy,Ke=>this.events.next(Ke),this.inputBindingEnabled),(0,or.q)(1),(0,xe.b)({next:Ke=>{de=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Ei(Ke.id,this.urlSerializer.serialize(Ke.extractedUrl),this.urlSerializer.serialize(Ke.urlAfterRedirects))),A.titleStrategy?.updateTitle(Ke.targetRouterState.snapshot),Ke.resolve(!0)},complete:()=>{de=!0}}),(0,Qn.R)(this.transitionAbortSubject.pipe((0,xe.b)(Ke=>{throw Ke}))),on(()=>{de||Je||this.cancelNavigationTransition(J,"",1),this.currentNavigation?.id===J.id&&(this.currentNavigation=null)}),Le(Ke=>{if(Je=!0,pi(Ke))this.events.next(new Vi(J.id,this.urlSerializer.serialize(J.extractedUrl),Ke.message,Ke.cancellationCode)),function ms(S){return pi(S)&&en(S.url)}(Ke)?this.events.next(new Bn(Ke.url)):J.resolve(!1);else{this.events.next(new _a(J.id,this.urlSerializer.serialize(J.extractedUrl),Ke,J.targetSnapshot??void 0));try{J.resolve(A.errorHandler(Ke))}catch(Ut){J.reject(Ut)}}return ze.E}))}))}cancelNavigationTransition(A,L,k){const J=new Vi(A.id,this.urlSerializer.serialize(A.extractedUrl),L,k);this.events.next(J),A.resolve(!1)}static#e=this.\u0275fac=function(L){return new(L||S)};static#t=this.\u0275prov=y.Yz7({token:S,factory:S.\u0275fac,providedIn:"root"})}return S})();function gi(S){return S!==cr}let go=(()=>{class S{buildTitle(A){let L,k=A.root;for(;void 0!==k;)L=this.getResolvedTitleForRoute(k)??L,k=k.children.find(J=>J.outlet===_e);return L}getResolvedTitleForRoute(A){return A.data[Se]}static#e=this.\u0275fac=function(L){return new(L||S)};static#t=this.\u0275prov=y.Yz7({token:S,factory:function(){return(0,y.f3M)($o)},providedIn:"root"})}return S})(),$o=(()=>{class S extends go{constructor(A){super(),this.title=A}updateTitle(A){const L=this.buildTitle(A);void 0!==L&&this.title.setTitle(L)}static#e=this.\u0275fac=function(L){return new(L||S)(y.LFG(Pn.Dx))};static#t=this.\u0275prov=y.Yz7({token:S,factory:S.\u0275fac,providedIn:"root"})}return S})(),No=(()=>{class S{static#e=this.\u0275fac=function(L){return new(L||S)};static#t=this.\u0275prov=y.Yz7({token:S,factory:function(){return(0,y.f3M)(wa)},providedIn:"root"})}return S})();class os{shouldDetach(x){return!1}store(x,A){}shouldAttach(x){return!1}retrieve(x){return null}shouldReuseRoute(x,A){return x.routeConfig===A.routeConfig}}let wa=(()=>{class S extends os{static#e=this.\u0275fac=function(){let A;return function(k){return(A||(A=y.n5z(S)))(k||S)}}();static#t=this.\u0275prov=y.Yz7({token:S,factory:S.\u0275fac,providedIn:"root"})}return S})();const wi=new y.OlP("",{providedIn:"root",factory:()=>({})});let ou=(()=>{class S{static#e=this.\u0275fac=function(L){return new(L||S)};static#t=this.\u0275prov=y.Yz7({token:S,factory:function(){return(0,y.f3M)(wd)},providedIn:"root"})}return S})(),wd=(()=>{class S{shouldProcessUrl(A){return!0}extract(A){return A}merge(A,L){return A}static#e=this.\u0275fac=function(L){return new(L||S)};static#t=this.\u0275prov=y.Yz7({token:S,factory:S.\u0275fac,providedIn:"root"})}return S})();var $r=function(S){return S[S.COMPLETE=0]="COMPLETE",S[S.FAILED=1]="FAILED",S[S.REDIRECTING=2]="REDIRECTING",S}($r||{});function Zl(S,x){S.events.pipe((0,Ft.h)(A=>A instanceof Ei||A instanceof Vi||A instanceof _a||A instanceof Bi),(0,bn.U)(A=>A instanceof Ei||A instanceof Bi?$r.COMPLETE:A instanceof Vi&&(0===A.code||1===A.code)?$r.REDIRECTING:$r.FAILED),(0,Ft.h)(A=>A!==$r.REDIRECTING),(0,or.q)(1)).subscribe(()=>{x()})}function $u(S){throw S}function ys(S,x,A){return x.parse("/")}const mo={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},zo={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Is=(()=>{class S{get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){return"computed"!==this.canceledNavigationResolution?this.currentPageId:this.location.getState()?.\u0275routerPageId??this.currentPageId}get events(){return this._events}constructor(){this.disposed=!1,this.currentPageId=0,this.console=(0,y.f3M)(y.c2e),this.isNgZoneEnabled=!1,this._events=new Tt.x,this.options=(0,y.f3M)(wi,{optional:!0})||{},this.pendingTasks=(0,y.f3M)(y.HDt),this.errorHandler=this.options.errorHandler||$u,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||ys,this.navigated=!1,this.lastSuccessfulId=-1,this.urlHandlingStrategy=(0,y.f3M)(ou),this.routeReuseStrategy=(0,y.f3M)(No),this.titleStrategy=(0,y.f3M)(go),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=(0,y.f3M)(Yn,{optional:!0})?.flat()??[],this.navigationTransitions=(0,y.f3M)(Tr),this.urlSerializer=(0,y.f3M)(Xr),this.location=(0,y.f3M)(Hn.Ye),this.componentInputBindingEnabled=!!(0,y.f3M)(uo,{optional:!0}),this.eventsSubscription=new ot.w0,this.isNgZoneEnabled=(0,y.f3M)(y.R0b)instanceof y.R0b&&y.R0b.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new Sn,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=Cr(0,null),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe(A=>{this.lastSuccessfulId=A.id,this.currentPageId=this.browserPageId},A=>{this.console.warn(`Unhandled Navigation Error: ${A}`)}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){const A=this.navigationTransitions.events.subscribe(L=>{try{const{currentTransition:k}=this.navigationTransitions;if(null===k)return void(au(L)&&this._events.next(L));if(L instanceof ts)gi(k.source)&&(this.browserUrlTree=k.extractedUrl);else if(L instanceof Bi)this.rawUrlTree=k.rawUrl;else if(L instanceof hi){if("eager"===this.urlUpdateStrategy){if(!k.extras.skipLocationChange){const J=this.urlHandlingStrategy.merge(k.urlAfterRedirects,k.rawUrl);this.setBrowserUrl(J,k)}this.browserUrlTree=k.urlAfterRedirects}}else if(L instanceof Ds)this.currentUrlTree=k.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(k.urlAfterRedirects,k.rawUrl),this.routerState=k.targetRouterState,"deferred"===this.urlUpdateStrategy&&(k.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,k),this.browserUrlTree=k.urlAfterRedirects);else if(L instanceof Vi)0!==L.code&&1!==L.code&&(this.navigated=!0),(3===L.code||2===L.code)&&this.restoreHistory(k);else if(L instanceof Bn){const J=this.urlHandlingStrategy.merge(L.url,k.currentRawUrl),de={skipLocationChange:k.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||gi(k.source)};this.scheduleNavigation(J,cr,null,de,{resolve:k.resolve,reject:k.reject,promise:k.promise})}L instanceof _a&&this.restoreHistory(k,!0),L instanceof Ei&&(this.navigated=!0),au(L)&&this._events.next(L)}catch(k){this.navigationTransitions.transitionAbortSubject.next(k)}});this.eventsSubscription.add(A)}resetRootComponentType(A){this.routerState.root.component=A,this.navigationTransitions.rootComponentType=A}initialNavigation(){if(this.setUpLocationChangeListener(),!this.navigationTransitions.hasRequestedNavigation){const A=this.location.getState();this.navigateToSyncWithBrowser(this.location.path(!0),cr,A)}}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(A=>{const L="popstate"===A.type?"popstate":"hashchange";"popstate"===L&&setTimeout(()=>{this.navigateToSyncWithBrowser(A.url,L,A.state)},0)}))}navigateToSyncWithBrowser(A,L,k){const J={replaceUrl:!0},de=k?.navigationId?k:null;if(k){const Ke={...k};delete Ke.navigationId,delete Ke.\u0275routerPageId,0!==Object.keys(Ke).length&&(J.state=Ke)}const Je=this.parseUrl(A);this.scheduleNavigation(Je,L,de,J)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(A){this.config=A.map(tu),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(A,L={}){const{relativeTo:k,queryParams:J,fragment:de,queryParamsHandling:Je,preserveFragment:Ke}=L,Ut=Ke?this.currentUrlTree.fragment:de;let hr,Kn=null;switch(Je){case"merge":Kn={...this.currentUrlTree.queryParams,...J};break;case"preserve":Kn=this.currentUrlTree.queryParams;break;default:Kn=J||null}null!==Kn&&(Kn=this.removeEmptyProps(Kn));try{hr=jt(k?k.snapshot:this.routerState.snapshot.root)}catch{("string"!=typeof A[0]||!A[0].startsWith("/"))&&(A=[]),hr=this.currentUrlTree.root}return Vn(hr,A,Kn,Ut??null)}navigateByUrl(A,L={skipLocationChange:!1}){const k=en(A)?A:this.parseUrl(A),J=this.urlHandlingStrategy.merge(k,this.rawUrlTree);return this.scheduleNavigation(J,cr,null,L)}navigate(A,L={skipLocationChange:!1}){return function Vr(S){for(let x=0;x<S.length;x++)if(null==S[x])throw new y.vHH(4008,!1)}(A),this.navigateByUrl(this.createUrlTree(A,L),L)}serializeUrl(A){return this.urlSerializer.serialize(A)}parseUrl(A){let L;try{L=this.urlSerializer.parse(A)}catch(k){L=this.malformedUriErrorHandler(k,this.urlSerializer,A)}return L}isActive(A,L){let k;if(k=!0===L?{...mo}:!1===L?{...zo}:L,en(A))return Fr(this.currentUrlTree,A,k);const J=this.parseUrl(A);return Fr(this.currentUrlTree,J,k)}removeEmptyProps(A){return Object.keys(A).reduce((L,k)=>{const J=A[k];return null!=J&&(L[k]=J),L},{})}scheduleNavigation(A,L,k,J,de){if(this.disposed)return Promise.resolve(!1);let Je,Ke,Ut;de?(Je=de.resolve,Ke=de.reject,Ut=de.promise):Ut=new Promise((hr,An)=>{Je=hr,Ke=An});const Kn=this.pendingTasks.add();return Zl(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(Kn))}),this.navigationTransitions.handleNavigationRequest({source:L,restoredState:k,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,currentBrowserUrl:this.browserUrlTree,rawUrl:A,extras:J,resolve:Je,reject:Ke,promise:Ut,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),Ut.catch(hr=>Promise.reject(hr))}setBrowserUrl(A,L){const k=this.urlSerializer.serialize(A);if(this.location.isCurrentPathEqualTo(k)||L.extras.replaceUrl){const de={...L.extras.state,...this.generateNgRouterState(L.id,this.browserPageId)};this.location.replaceState(k,"",de)}else{const J={...L.extras.state,...this.generateNgRouterState(L.id,this.browserPageId+1)};this.location.go(k,"",J)}}restoreHistory(A,L=!1){if("computed"===this.canceledNavigationResolution){const J=this.currentPageId-this.browserPageId;0!==J?this.location.historyGo(J):this.currentUrlTree===this.getCurrentNavigation()?.finalUrl&&0===J&&(this.resetState(A),this.browserUrlTree=A.currentUrlTree,this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(L&&this.resetState(A),this.resetUrlToCurrentUrlTree())}resetState(A){this.routerState=A.currentRouterState,this.currentUrlTree=A.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,A.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(A,L){return"computed"===this.canceledNavigationResolution?{navigationId:A,\u0275routerPageId:L}:{navigationId:A}}static#e=this.\u0275fac=function(L){return new(L||S)};static#t=this.\u0275prov=y.Yz7({token:S,factory:S.\u0275fac,providedIn:"root"})}return S})();function au(S){return!(S instanceof Ds||S instanceof Bn)}let Da=(()=>{class S{constructor(A,L,k,J,de,Je){this.router=A,this.route=L,this.tabIndexAttribute=k,this.renderer=J,this.el=de,this.locationStrategy=Je,this.href=null,this.commands=null,this.onChanges=new Tt.x,this.preserveFragment=!1,this.skipLocationChange=!1,this.replaceUrl=!1;const Ke=de.nativeElement.tagName?.toLowerCase();this.isAnchorElement="a"===Ke||"area"===Ke,this.isAnchorElement?this.subscription=A.events.subscribe(Ut=>{Ut instanceof Ei&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(A){null!=this.tabIndexAttribute||this.isAnchorElement||this.applyAttributeValue("tabindex",A)}ngOnChanges(A){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(A){null!=A?(this.commands=Array.isArray(A)?A:[A],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(A,L,k,J,de){return!!(null===this.urlTree||this.isAnchorElement&&(0!==A||L||k||J||de||"string"==typeof this.target&&"_self"!=this.target))||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!this.isAnchorElement)}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){this.href=null!==this.urlTree&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null;const A=null===this.href?null:(0,y.P3R)(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",A)}applyAttributeValue(A,L){const k=this.renderer,J=this.el.nativeElement;null!==L?k.setAttribute(J,A,L):k.removeAttribute(J,A)}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static#e=this.\u0275fac=function(L){return new(L||S)(y.Y36(Is),y.Y36(fn),y.$8M("tabindex"),y.Y36(y.Qsj),y.Y36(y.SBq),y.Y36(Hn.S$))};static#t=this.\u0275dir=y.lG2({type:S,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(L,k){1&L&&y.NdJ("click",function(de){return k.onClick(de.button,de.ctrlKey,de.shiftKey,de.altKey,de.metaKey)}),2&L&&y.uIk("target",k.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:["preserveFragment","preserveFragment",y.VuI],skipLocationChange:["skipLocationChange","skipLocationChange",y.VuI],replaceUrl:["replaceUrl","replaceUrl",y.VuI],routerLink:"routerLink"},standalone:!0,features:[y.Xq5,y.TTD]})}return S})();class Et{}let sa=(()=>{class S{constructor(A,L,k,J,de){this.router=A,this.injector=k,this.preloadingStrategy=J,this.loader=de}setUpPreloading(){this.subscription=this.router.events.pipe((0,Ft.h)(A=>A instanceof Ei),He(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(A,L){const k=[];for(const J of L){J.providers&&!J._injector&&(J._injector=(0,y.MMx)(J.providers,A,`Route: ${J.path}`));const de=J._injector??A,Je=J._loadedInjector??de;(J.loadChildren&&!J._loadedRoutes&&void 0===J.canLoad||J.loadComponent&&!J._loadedComponent)&&k.push(this.preloadConfig(de,J)),(J.children||J._loadedRoutes)&&k.push(this.processRoutes(Je,J.children??J._loadedRoutes))}return(0,De.D)(k).pipe((0,Cn.J)())}preloadConfig(A,L){return this.preloadingStrategy.preload(L,()=>{let k;k=L.loadChildren&&void 0===L.canLoad?this.loader.loadChildren(A,L):(0,Ee.of)(null);const J=k.pipe((0,ve.z)(de=>null===de?(0,Ee.of)(void 0):(L._loadedRoutes=de.routes,L._loadedInjector=de.injector,this.processRoutes(de.injector??A,de.routes))));if(L.loadComponent&&!L._loadedComponent){const de=this.loader.loadComponent(L);return(0,De.D)([J,de]).pipe((0,Cn.J)())}return J})}static#e=this.\u0275fac=function(L){return new(L||S)(y.LFG(Is),y.LFG(y.Sil),y.LFG(y.lqb),y.LFG(Et),y.LFG(rr))};static#t=this.\u0275prov=y.Yz7({token:S,factory:S.\u0275fac,providedIn:"root"})}return S})();const tn=new y.OlP("");let pn=(()=>{class S{constructor(A,L,k,J,de={}){this.urlSerializer=A,this.transitions=L,this.viewportScroller=k,this.zone=J,this.options=de,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},de.scrollPositionRestoration=de.scrollPositionRestoration||"disabled",de.anchorScrolling=de.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(A=>{A instanceof ts?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=A.navigationTrigger,this.restoredId=A.restoredState?A.restoredState.navigationId:0):A instanceof Ei?(this.lastId=A.id,this.scheduleScrollEvent(A,this.urlSerializer.parse(A.urlAfterRedirects).fragment)):A instanceof Bi&&0===A.code&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(A,this.urlSerializer.parse(A.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(A=>{A instanceof Ia&&(A.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(A.position):A.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(A.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(A,L){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new Ia(A,"popstate"===this.lastSource?this.store[this.restoredId]:null,L))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static#e=this.\u0275fac=function(L){y.$Z()};static#t=this.\u0275prov=y.Yz7({token:S,factory:S.\u0275fac})}return S})();function et(S,x){return{\u0275kind:S,\u0275providers:x}}function Cu(){const S=(0,y.f3M)(y.zs3);return x=>{const A=S.get(y.z2F);if(x!==A.components[0])return;const L=S.get(Is),k=S.get(za);1===S.get(El)&&L.initialNavigation(),S.get(bt,null,y.XFs.Optional)?.setUpPreloading(),S.get(tn,null,y.XFs.Optional)?.init(),L.resetRootComponentType(A.componentTypes[0]),k.closed||(k.next(),k.complete(),k.unsubscribe())}}const za=new y.OlP("",{factory:()=>new Tt.x}),El=new y.OlP("",{providedIn:"root",factory:()=>1}),bt=new y.OlP("");function dr(S){return et(0,[{provide:bt,useExisting:sa},{provide:Et,useExisting:S}])}const rn=new y.OlP("ROUTER_FORROOT_GUARD"),Xs=[Hn.Ye,{provide:Xr,useClass:Hi},Is,ri,{provide:fn,useFactory:function Gt(S){return S.routerState.root},deps:[Is]},rr,[]];function Xn(){return new y.PXZ("Router",Is)}let Ad=(()=>{class S{constructor(A){}static forRoot(A,L){return{ngModule:S,providers:[Xs,[],{provide:Yn,multi:!0,useValue:A},{provide:rn,useFactory:Aa,deps:[[Is,new y.FiY,new y.tp0]]},{provide:wi,useValue:L||{}},L?.useHash?{provide:Hn.S$,useClass:Hn.Do}:{provide:Hn.S$,useClass:Hn.b0},{provide:tn,useFactory:()=>{const S=(0,y.f3M)(Hn.EM),x=(0,y.f3M)(y.R0b),A=(0,y.f3M)(wi),L=(0,y.f3M)(Tr),k=(0,y.f3M)(Xr);return A.scrollOffset&&S.setOffset(A.scrollOffset),new pn(k,L,S,x,A)}},L?.preloadingStrategy?dr(L.preloadingStrategy).\u0275providers:[],{provide:y.PXZ,multi:!0,useFactory:Xn},L?.initialNavigation?Oo(L):[],L?.bindToComponentInputs?et(8,[ps,{provide:uo,useExisting:ps}]).\u0275providers:[],[{provide:Au,useFactory:Cu},{provide:y.tb,multi:!0,useExisting:Au}]]}}static forChild(A){return{ngModule:S,providers:[{provide:Yn,multi:!0,useValue:A}]}}static#e=this.\u0275fac=function(L){return new(L||S)(y.LFG(rn,8))};static#t=this.\u0275mod=y.oAB({type:S});static#n=this.\u0275inj=y.cJS({})}return S})();function Aa(S){return"guarded"}function Oo(S){return["disabled"===S.initialNavigation?et(3,[{provide:y.ip1,multi:!0,useFactory:()=>{const x=(0,y.f3M)(Is);return()=>{x.setUpLocationChangeListener()}}},{provide:El,useValue:2}]).\u0275providers:[],"enabledBlocking"===S.initialNavigation?et(2,[{provide:El,useValue:0},{provide:y.ip1,multi:!0,deps:[y.zs3],useFactory:x=>{const A=x.get(Hn.V_,Promise.resolve());return()=>A.then(()=>new Promise(L=>{const k=x.get(Is),J=x.get(za);Zl(k,()=>{L(!0)}),x.get(Tr).afterPreactivation=()=>(L(!0),J.closed?(0,Ee.of)(void 0):J),k.initialNavigation()}))}}]).\u0275providers:[]]}const Au=new y.OlP("")},3106:(qt,Ze,H)=>{H.d(Ze,{Z:()=>_t});var y=H(9058),fe=H(4537),ae=H(534),Ce=H(7879);class De{constructor(yt,It){this._delegate=yt,this.firebase=It,(0,ae._addComponent)(yt,new fe.wA("app-compat",()=>this,"PUBLIC")),this.container=yt.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(yt){this._delegate.automaticDataCollectionEnabled=yt}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(yt=>{this._delegate.checkDestroyed(),yt()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,ae.deleteApp)(this._delegate)))}_getService(yt,It=ae._DEFAULT_ENTRY_NAME){var nn;this._delegate.checkDestroyed();const Ve=this._delegate.container.getProvider(yt);return!Ve.isInitialized()&&"EXPLICIT"===(null===(nn=Ve.getComponent())||void 0===nn?void 0:nn.instantiationMode)&&Ve.initialize(),Ve.getImmediate({identifier:It})}_removeServiceInstance(yt,It=ae._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(yt).clearInstance(It)}_addComponent(yt){(0,ae._addComponent)(this._delegate,yt)}_addOrOverwriteComponent(yt){(0,ae._addOrOverwriteComponent)(this._delegate,yt)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const Oe=new y.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),pe=function $e(){const ft=function I(ft){const yt={},It={__esModule:!0,initializeApp:function Me(ot,ut={}){const ce=ae.initializeApp(ot,ut);if((0,y.r3)(yt,ce.name))return yt[ce.name];const Zt=new ft(ce,It);return yt[ce.name]=Zt,Zt},app:Ve,registerVersion:ae.registerVersion,setLogLevel:ae.setLogLevel,onLog:ae.onLog,apps:null,SDK_VERSION:ae.SDK_VERSION,INTERNAL:{registerComponent:function Ne(ot){const ut=ot.name,ce=ut.replace("-compat","");if(ae._registerComponent(ot)&&"PUBLIC"===ot.type){const Zt=(Tt=Ve())=>{if("function"!=typeof Tt[ce])throw Oe.create("invalid-app-argument",{appName:ut});return Tt[ce]()};void 0!==ot.serviceProps&&(0,y.ZB)(Zt,ot.serviceProps),It[ce]=Zt,ft.prototype[ce]=function(...Tt){return this._getService.bind(this,ut).apply(this,ot.multipleInstances?Tt:[])}}return"PUBLIC"===ot.type?It[ce]:null},removeApp:function nn(ot){delete yt[ot]},useAsService:function ze(ot,ut){return"serverAuth"===ut?null:ut},modularAPIs:ae}};function Ve(ot){if(!(0,y.r3)(yt,ot=ot||ae._DEFAULT_ENTRY_NAME))throw Oe.create("no-app",{appName:ot});return yt[ot]}return It.default=It,Object.defineProperty(It,"apps",{get:function qe(){return Object.keys(yt).map(ot=>yt[ot])}}),Ve.App=ft,It}(De);return ft.INTERNAL=Object.assign(Object.assign({},ft.INTERNAL),{createFirebaseNamespace:$e,extendNamespace:function yt(It){(0,y.ZB)(ft,It)},createSubscribe:y.ne,ErrorFactory:y.LL,deepExtend:y.ZB}),ft}(),me=new Ce.Yd("@firebase/app-compat");if((0,y.jU)()&&void 0!==self.firebase){me.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const ft=self.firebase.SDK_VERSION;ft&&ft.indexOf("LITE")>=0&&me.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const _t=pe;!function it(ft){(0,ae.registerVersion)("@firebase/app-compat","0.2.21",ft)}()},534:(qt,Ze,H)=>{H.r(Ze),H.d(Ze,{FirebaseError:()=>Ce.ZR,SDK_VERSION:()=>Ni,_DEFAULT_ENTRY_NAME:()=>Ot,_addComponent:()=>Fr,_addOrOverwriteComponent:()=>qr,_apps:()=>At,_clearComponents:()=>Bt,_components:()=>$n,_getProvider:()=>Sr,_registerComponent:()=>Mn,_removeServiceInstance:()=>xr,deleteApp:()=>Xr,getApp:()=>ur,getApps:()=>bs,initializeApp:()=>Fa,onLog:()=>di,registerVersion:()=>ws,setLogLevel:()=>vi});var y=H(5861),fe=H(4537),ae=H(7879),Ce=H(9058);const De=(rt,je)=>je.some(mt=>rt instanceof mt);let Ee,Oe;const pe=new WeakMap,me=new WeakMap,Pe=new WeakMap,dt=new WeakMap,it=new WeakMap;let yt={get(rt,je,mt){if(rt instanceof IDBTransaction){if("done"===je)return me.get(rt);if("objectStoreNames"===je)return rt.objectStoreNames||Pe.get(rt);if("store"===je)return mt.objectStoreNames[1]?void 0:mt.objectStore(mt.objectStoreNames[0])}return Me(rt[je])},set:(rt,je,mt)=>(rt[je]=mt,!0),has:(rt,je)=>rt instanceof IDBTransaction&&("done"===je||"store"===je)||je in rt};function Ve(rt){return"function"==typeof rt?function nn(rt){return rt!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function $e(){return Oe||(Oe=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(rt)?function(...je){return rt.apply(qe(this),je),Me(pe.get(this))}:function(...je){return Me(rt.apply(qe(this),je))}:function(je,...mt){const en=rt.call(qe(this),je,...mt);return Pe.set(en,je.sort?je.sort():[je]),Me(en)}}(rt):(rt instanceof IDBTransaction&&function ft(rt){if(me.has(rt))return;const je=new Promise((mt,en)=>{const _n=()=>{rt.removeEventListener("complete",jt),rt.removeEventListener("error",Vn),rt.removeEventListener("abort",Vn)},jt=()=>{mt(),_n()},Vn=()=>{en(rt.error||new DOMException("AbortError","AbortError")),_n()};rt.addEventListener("complete",jt),rt.addEventListener("error",Vn),rt.addEventListener("abort",Vn)});me.set(rt,je)}(rt),De(rt,function I(){return Ee||(Ee=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(rt,yt):rt)}function Me(rt){if(rt instanceof IDBRequest)return function _t(rt){const je=new Promise((mt,en)=>{const _n=()=>{rt.removeEventListener("success",jt),rt.removeEventListener("error",Vn)},jt=()=>{mt(Me(rt.result)),_n()},Vn=()=>{en(rt.error),_n()};rt.addEventListener("success",jt),rt.addEventListener("error",Vn)});return je.then(mt=>{mt instanceof IDBCursor&&pe.set(mt,rt)}).catch(()=>{}),it.set(je,rt),je}(rt);if(dt.has(rt))return dt.get(rt);const je=Ve(rt);return je!==rt&&(dt.set(rt,je),it.set(je,rt)),je}const qe=rt=>it.get(rt),ot=["get","getKey","getAll","getAllKeys","count"],ut=["put","add","delete","clear"],ce=new Map;function Zt(rt,je){if(!(rt instanceof IDBDatabase)||je in rt||"string"!=typeof je)return;if(ce.get(je))return ce.get(je);const mt=je.replace(/FromIndex$/,""),en=je!==mt,_n=ut.includes(mt);if(!(mt in(en?IDBIndex:IDBObjectStore).prototype)||!_n&&!ot.includes(mt))return;const jt=function(){var Vn=(0,y.Z)(function*(Yr,...Dr){const qs=this.transaction(Yr,_n?"readwrite":"readonly");let Pi=qs.store;return en&&(Pi=Pi.index(Dr.shift())),(yield Promise.all([Pi[mt](...Dr),_n&&qs.done]))[0]});return function(Dr){return Vn.apply(this,arguments)}}();return ce.set(je,jt),jt}!function It(rt){yt=rt(yt)}(rt=>({...rt,get:(je,mt,en)=>Zt(je,mt)||rt.get(je,mt,en),has:(je,mt)=>!!Zt(je,mt)||rt.has(je,mt)}));class Tt{constructor(je){this.container=je}getPlatformInfoString(){return this.container.getProviders().map(mt=>{if(function Hn(rt){const je=rt.getComponent();return"VERSION"===je?.type}(mt)){const en=mt.getImmediate();return`${en.library}/${en.version}`}return null}).filter(mt=>mt).join(" ")}}const bn="@firebase/app",or=new ae.Yd("@firebase/app"),Ot="[DEFAULT]",sn={[bn]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},At=new Map,$n=new Map;function Fr(rt,je){try{rt.container.addComponent(je)}catch(mt){or.debug(`Component ${je.name} failed to register with FirebaseApp ${rt.name}`,mt)}}function qr(rt,je){rt.container.addOrOverwriteComponent(je)}function Mn(rt){const je=rt.name;if($n.has(je))return or.debug(`There were multiple attempts to register component ${je}.`),!1;$n.set(je,rt);for(const mt of At.values())Fr(mt,rt);return!0}function Sr(rt,je){const mt=rt.container.getProvider("heartbeat").getImmediate({optional:!0});return mt&&mt.triggerHeartbeat(),rt.container.getProvider(je)}function xr(rt,je,mt=Ot){Sr(rt,je).clearInstance(mt)}function Bt(){$n.clear()}const Sn=new Ce.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class mn{constructor(je,mt,en){this._isDeleted=!1,this._options=Object.assign({},je),this._config=Object.assign({},mt),this._name=mt.name,this._automaticDataCollectionEnabled=mt.automaticDataCollectionEnabled,this._container=en,this.container.addComponent(new fe.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(je){this.checkDestroyed(),this._automaticDataCollectionEnabled=je}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(je){this._isDeleted=je}checkDestroyed(){if(this.isDeleted)throw Sn.create("app-deleted",{appName:this._name})}}const Ni="10.5.1";function Fa(rt,je={}){let mt=rt;"object"!=typeof je&&(je={name:je});const en=Object.assign({name:Ot,automaticDataCollectionEnabled:!1},je),_n=en.name;if("string"!=typeof _n||!_n)throw Sn.create("bad-app-name",{appName:String(_n)});if(mt||(mt=(0,Ce.aH)()),!mt)throw Sn.create("no-options");const jt=At.get(_n);if(jt){if((0,Ce.vZ)(mt,jt.options)&&(0,Ce.vZ)(en,jt.config))return jt;throw Sn.create("duplicate-app",{appName:_n})}const Vn=new fe.H0(_n);for(const Dr of $n.values())Vn.addComponent(Dr);const Yr=new mn(mt,en,Vn);return At.set(_n,Yr),Yr}function ur(rt=Ot){const je=At.get(rt);if(!je&&rt===Ot&&(0,Ce.aH)())return Fa();if(!je)throw Sn.create("no-app",{appName:rt});return je}function bs(){return Array.from(At.values())}function Xr(rt){return Hi.apply(this,arguments)}function Hi(){return(Hi=(0,y.Z)(function*(rt){const je=rt.name;At.has(je)&&(At.delete(je),yield Promise.all(rt.container.getProviders().map(mt=>mt.delete())),rt.isDeleted=!0)})).apply(this,arguments)}function ws(rt,je,mt){var en;let _n=null!==(en=sn[rt])&&void 0!==en?en:rt;mt&&(_n+=`-${mt}`);const jt=_n.match(/\s|\//),Vn=je.match(/\s|\//);if(jt||Vn){const Yr=[`Unable to register library "${_n}" with version "${je}":`];return jt&&Yr.push(`library name "${_n}" contains illegal characters (whitespace or "/")`),jt&&Vn&&Yr.push("and"),Vn&&Yr.push(`version name "${je}" contains illegal characters (whitespace or "/")`),void or.warn(Yr.join(" "))}Mn(new fe.wA(`${_n}-version`,()=>({library:_n,version:je}),"VERSION"))}function di(rt,je){if(null!==rt&&"function"!=typeof rt)throw Sn.create("invalid-log-argument");(0,ae.Am)(rt,je)}function vi(rt){(0,ae.Ub)(rt)}const yi="firebase-heartbeat-database",Oi=1,Te="firebase-heartbeat-store";let se=null;function ne(){return se||(se=function Ne(rt,je,{blocked:mt,upgrade:en,blocking:_n,terminated:jt}={}){const Vn=indexedDB.open(rt,je),Yr=Me(Vn);return en&&Vn.addEventListener("upgradeneeded",Dr=>{en(Me(Vn.result),Dr.oldVersion,Dr.newVersion,Me(Vn.transaction),Dr)}),mt&&Vn.addEventListener("blocked",Dr=>mt(Dr.oldVersion,Dr.newVersion,Dr)),Yr.then(Dr=>{jt&&Dr.addEventListener("close",()=>jt()),_n&&Dr.addEventListener("versionchange",qs=>_n(qs.oldVersion,qs.newVersion,qs))}).catch(()=>{}),Yr}(yi,Oi,{upgrade:(rt,je)=>{0===je&&rt.createObjectStore(Te)}}).catch(rt=>{throw Sn.create("idb-open",{originalErrorMessage:rt.message})})),se}function oe(){return(oe=(0,y.Z)(function*(rt){try{return yield(yield ne()).transaction(Te).objectStore(Te).get(Rt(rt))}catch(je){if(je instanceof Ce.ZR)or.warn(je.message);else{const mt=Sn.create("idb-get",{originalErrorMessage:je?.message});or.warn(mt.message)}}})).apply(this,arguments)}function Re(rt,je){return lt.apply(this,arguments)}function lt(){return(lt=(0,y.Z)(function*(rt,je){try{const en=(yield ne()).transaction(Te,"readwrite");yield en.objectStore(Te).put(je,Rt(rt)),yield en.done}catch(mt){if(mt instanceof Ce.ZR)or.warn(mt.message);else{const en=Sn.create("idb-set",{originalErrorMessage:mt?.message});or.warn(en.message)}}})).apply(this,arguments)}function Rt(rt){return`${rt.name}!${rt.options.appId}`}class Qt{constructor(je){this.container=je,this._heartbeatsCache=null;const mt=this.container.getProvider("app").getImmediate();this._storage=new Kr(mt),this._heartbeatsCachePromise=this._storage.read().then(en=>(this._heartbeatsCache=en,en))}triggerHeartbeat(){var je=this;return(0,y.Z)(function*(){const en=je.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),_n=un();if(null===je._heartbeatsCache&&(je._heartbeatsCache=yield je._heartbeatsCachePromise),je._heartbeatsCache.lastSentHeartbeatDate!==_n&&!je._heartbeatsCache.heartbeats.some(jt=>jt.date===_n))return je._heartbeatsCache.heartbeats.push({date:_n,agent:en}),je._heartbeatsCache.heartbeats=je._heartbeatsCache.heartbeats.filter(jt=>{const Vn=new Date(jt.date).valueOf();return Date.now()-Vn<=2592e6}),je._storage.overwrite(je._heartbeatsCache)})()}getHeartbeatsHeader(){var je=this;return(0,y.Z)(function*(){if(null===je._heartbeatsCache&&(yield je._heartbeatsCachePromise),null===je._heartbeatsCache||0===je._heartbeatsCache.heartbeats.length)return"";const mt=un(),{heartbeatsToSend:en,unsentEntries:_n}=function wr(rt,je=1024){const mt=[];let en=rt.slice();for(const _n of rt){const jt=mt.find(Vn=>Vn.agent===_n.agent);if(jt){if(jt.dates.push(_n.date),js(mt)>je){jt.dates.pop();break}}else if(mt.push({agent:_n.agent,dates:[_n.date]}),js(mt)>je){mt.pop();break}en=en.slice(1)}return{heartbeatsToSend:mt,unsentEntries:en}}(je._heartbeatsCache.heartbeats),jt=(0,Ce.L)(JSON.stringify({version:2,heartbeats:en}));return je._heartbeatsCache.lastSentHeartbeatDate=mt,_n.length>0?(je._heartbeatsCache.heartbeats=_n,yield je._storage.overwrite(je._heartbeatsCache)):(je._heartbeatsCache.heartbeats=[],je._storage.overwrite(je._heartbeatsCache)),jt})()}}function un(){return(new Date).toISOString().substring(0,10)}class Kr{constructor(je){this.app=je,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,y.Z)(function*(){return!!(0,Ce.hl)()&&(0,Ce.eu)().then(()=>!0).catch(()=>!1)})()}read(){var je=this;return(0,y.Z)(function*(){return(yield je._canUseIndexedDBPromise)&&(yield function re(rt){return oe.apply(this,arguments)}(je.app))||{heartbeats:[]}})()}overwrite(je){var mt=this;return(0,y.Z)(function*(){var en;if(yield mt._canUseIndexedDBPromise){const jt=yield mt.read();return Re(mt.app,{lastSentHeartbeatDate:null!==(en=je.lastSentHeartbeatDate)&&void 0!==en?en:jt.lastSentHeartbeatDate,heartbeats:je.heartbeats})}})()}add(je){var mt=this;return(0,y.Z)(function*(){var en;if(yield mt._canUseIndexedDBPromise){const jt=yield mt.read();return Re(mt.app,{lastSentHeartbeatDate:null!==(en=je.lastSentHeartbeatDate)&&void 0!==en?en:jt.lastSentHeartbeatDate,heartbeats:[...jt.heartbeats,...je.heartbeats]})}})()}}function js(rt){return(0,Ce.L)(JSON.stringify({version:2,heartbeats:rt})).length}!function Ms(rt){Mn(new fe.wA("platform-logger",je=>new Tt(je),"PRIVATE")),Mn(new fe.wA("heartbeat",je=>new Qt(je),"PRIVATE")),ws(bn,"0.9.21",rt),ws(bn,"0.9.21","esm2017"),ws("fire-js","")}("")},4537:(qt,Ze,H)=>{H.d(Ze,{H0:()=>I,wA:()=>ae});var y=H(5861),fe=H(9058);class ae{constructor(pe,me,Pe){this.name=pe,this.instanceFactory=me,this.type=Pe,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(pe){return this.instantiationMode=pe,this}setMultipleInstances(pe){return this.multipleInstances=pe,this}setServiceProps(pe){return this.serviceProps=pe,this}setInstanceCreatedCallback(pe){return this.onInstanceCreated=pe,this}}const Ce="[DEFAULT]";class De{constructor(pe,me){this.name=pe,this.container=me,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(pe){const me=this.normalizeInstanceIdentifier(pe);if(!this.instancesDeferred.has(me)){const Pe=new fe.BH;if(this.instancesDeferred.set(me,Pe),this.isInitialized(me)||this.shouldAutoInitialize())try{const dt=this.getOrInitializeService({instanceIdentifier:me});dt&&Pe.resolve(dt)}catch{}}return this.instancesDeferred.get(me).promise}getImmediate(pe){var me;const Pe=this.normalizeInstanceIdentifier(pe?.identifier),dt=null!==(me=pe?.optional)&&void 0!==me&&me;if(!this.isInitialized(Pe)&&!this.shouldAutoInitialize()){if(dt)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:Pe})}catch(it){if(dt)return null;throw it}}getComponent(){return this.component}setComponent(pe){if(pe.name!==this.name)throw Error(`Mismatching Component ${pe.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=pe,this.shouldAutoInitialize()){if(function Oe($e){return"EAGER"===$e.instantiationMode}(pe))try{this.getOrInitializeService({instanceIdentifier:Ce})}catch{}for(const[me,Pe]of this.instancesDeferred.entries()){const dt=this.normalizeInstanceIdentifier(me);try{const it=this.getOrInitializeService({instanceIdentifier:dt});Pe.resolve(it)}catch{}}}}clearInstance(pe=Ce){this.instancesDeferred.delete(pe),this.instancesOptions.delete(pe),this.instances.delete(pe)}delete(){var pe=this;return(0,y.Z)(function*(){const me=Array.from(pe.instances.values());yield Promise.all([...me.filter(Pe=>"INTERNAL"in Pe).map(Pe=>Pe.INTERNAL.delete()),...me.filter(Pe=>"_delete"in Pe).map(Pe=>Pe._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(pe=Ce){return this.instances.has(pe)}getOptions(pe=Ce){return this.instancesOptions.get(pe)||{}}initialize(pe={}){const{options:me={}}=pe,Pe=this.normalizeInstanceIdentifier(pe.instanceIdentifier);if(this.isInitialized(Pe))throw Error(`${this.name}(${Pe}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const dt=this.getOrInitializeService({instanceIdentifier:Pe,options:me});for(const[it,_t]of this.instancesDeferred.entries())Pe===this.normalizeInstanceIdentifier(it)&&_t.resolve(dt);return dt}onInit(pe,me){var Pe;const dt=this.normalizeInstanceIdentifier(me),it=null!==(Pe=this.onInitCallbacks.get(dt))&&void 0!==Pe?Pe:new Set;it.add(pe),this.onInitCallbacks.set(dt,it);const _t=this.instances.get(dt);return _t&&pe(_t,dt),()=>{it.delete(pe)}}invokeOnInitCallbacks(pe,me){const Pe=this.onInitCallbacks.get(me);if(Pe)for(const dt of Pe)try{dt(pe,me)}catch{}}getOrInitializeService({instanceIdentifier:pe,options:me={}}){let Pe=this.instances.get(pe);if(!Pe&&this.component&&(Pe=this.component.instanceFactory(this.container,{instanceIdentifier:($e=pe,$e===Ce?void 0:$e),options:me}),this.instances.set(pe,Pe),this.instancesOptions.set(pe,me),this.invokeOnInitCallbacks(Pe,pe),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,pe,Pe)}catch{}var $e;return Pe||null}normalizeInstanceIdentifier(pe=Ce){return this.component?this.component.multipleInstances?pe:Ce:pe}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class I{constructor(pe){this.name=pe,this.providers=new Map}addComponent(pe){const me=this.getProvider(pe.name);if(me.isComponentSet())throw new Error(`Component ${pe.name} has already been registered with ${this.name}`);me.setComponent(pe)}addOrOverwriteComponent(pe){this.getProvider(pe.name).isComponentSet()&&this.providers.delete(pe.name),this.addComponent(pe)}getProvider(pe){if(this.providers.has(pe))return this.providers.get(pe);const me=new De(pe,this);return this.providers.set(pe,me),me}getProviders(){return Array.from(this.providers.values())}}},7879:(qt,Ze,H)=>{H.d(Ze,{Am:()=>$e,Ub:()=>I,Yd:()=>Oe,in:()=>fe});const y=[];var fe=function(pe){return pe[pe.DEBUG=0]="DEBUG",pe[pe.VERBOSE=1]="VERBOSE",pe[pe.INFO=2]="INFO",pe[pe.WARN=3]="WARN",pe[pe.ERROR=4]="ERROR",pe[pe.SILENT=5]="SILENT",pe}(fe||{});const ae={debug:fe.DEBUG,verbose:fe.VERBOSE,info:fe.INFO,warn:fe.WARN,error:fe.ERROR,silent:fe.SILENT},Ce=fe.INFO,De={[fe.DEBUG]:"log",[fe.VERBOSE]:"log",[fe.INFO]:"info",[fe.WARN]:"warn",[fe.ERROR]:"error"},Ee=(pe,me,...Pe)=>{if(me<pe.logLevel)return;const dt=(new Date).toISOString(),it=De[me];if(!it)throw new Error(`Attempted to log a message with an invalid logType (value: ${me})`);console[it](`[${dt}]  ${pe.name}:`,...Pe)};class Oe{constructor(me){this.name=me,this._logLevel=Ce,this._logHandler=Ee,this._userLogHandler=null,y.push(this)}get logLevel(){return this._logLevel}set logLevel(me){if(!(me in fe))throw new TypeError(`Invalid value "${me}" assigned to \`logLevel\``);this._logLevel=me}setLogLevel(me){this._logLevel="string"==typeof me?ae[me]:me}get logHandler(){return this._logHandler}set logHandler(me){if("function"!=typeof me)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=me}get userLogHandler(){return this._userLogHandler}set userLogHandler(me){this._userLogHandler=me}debug(...me){this._userLogHandler&&this._userLogHandler(this,fe.DEBUG,...me),this._logHandler(this,fe.DEBUG,...me)}log(...me){this._userLogHandler&&this._userLogHandler(this,fe.VERBOSE,...me),this._logHandler(this,fe.VERBOSE,...me)}info(...me){this._userLogHandler&&this._userLogHandler(this,fe.INFO,...me),this._logHandler(this,fe.INFO,...me)}warn(...me){this._userLogHandler&&this._userLogHandler(this,fe.WARN,...me),this._logHandler(this,fe.WARN,...me)}error(...me){this._userLogHandler&&this._userLogHandler(this,fe.ERROR,...me),this._logHandler(this,fe.ERROR,...me)}}function I(pe){y.forEach(me=>{me.setLogLevel(pe)})}function $e(pe,me){for(const Pe of y){let dt=null;me&&me.level&&(dt=ae[me.level]),Pe.userLogHandler=null===pe?null:(it,_t,...ft)=>{const yt=ft.map(It=>{if(null==It)return null;if("string"==typeof It)return It;if("number"==typeof It||"boolean"==typeof It)return It.toString();if(It instanceof Error)return It.message;try{return JSON.stringify(It)}catch{return null}}).filter(It=>It).join(" ");_t>=(dt??it.logLevel)&&pe({level:fe[_t].toLowerCase(),message:yt,args:ft,type:it.name})}}}},7142:(qt,Ze,H)=>{H.d(Ze,{Z:()=>y.Z});var y=H(3106);y.Z.registerVersion("firebase","10.5.1","app-compat")},2872:(qt,Ze,H)=>{H.r(Ze);var y=H(5861),fe=H(3106),ae=H(9058),Ce=H(534),De=H(7879),Ee=H(7582),Oe=H(4537);const $e={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"};const _t=function dt(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend.","unsupported-password-policy-schema-version":"The password policy received from the backend uses a schema version that is not supported by this version of the Firebase SDK.","password-does-not-meet-requirements":"The password does not meet the requirements."}},ft=function it(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},yt=new ae.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),nn=new De.Yd("@firebase/auth");function Me(b,...f){nn.logLevel<=De.in.ERROR&&nn.error(`Auth (${Ce.SDK_VERSION}): ${b}`,...f)}function qe(b,...f){throw ut(b,...f)}function Ne(b,...f){return ut(b,...f)}function ze(b,f,_){const C=Object.assign(Object.assign({},ft()),{[f]:_});return new ae.LL("auth","Firebase",C).create(f,{appName:b.name})}function ot(b,f,_){if(!(f instanceof _))throw _.name!==f.constructor.name&&qe(b,"argument-error"),ze(b,"argument-error",`Type of ${f.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function ut(b,...f){if("string"!=typeof b){const _=f[0],C=[...f.slice(1)];return C[0]&&(C[0].appName=b.name),b._errorFactory.create(_,...C)}return yt.create(b,...f)}function ce(b,f,..._){if(!b)throw ut(f,..._)}function Zt(b){const f="INTERNAL ASSERTION FAILED: "+b;throw Me(f),new Error(f)}function Tt(b,f){b||Zt(f)}function Hn(){var b;return typeof self<"u"&&(null===(b=self.location)||void 0===b?void 0:b.href)||""}function bn(){return"http:"===Ir()||"https:"===Ir()}function Ir(){var b;return typeof self<"u"&&(null===(b=self.location)||void 0===b?void 0:b.protocol)||null}class Ft{constructor(f,_){this.shortDelay=f,this.longDelay=_,Tt(_>f,"Short delay should be less than long delay!"),this.isMobile=(0,ae.uI)()||(0,ae.b$)()}get(){return function or(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(bn()||(0,ae.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function ve(b,f){Tt(b.emulator,"Emulator should always be set here");const{url:_}=b.emulator;return f?`${_}${f.startsWith("/")?f.slice(1):f}`:_}class be{static initialize(f,_,C){this.fetchImpl=f,_&&(this.headersImpl=_),C&&(this.responseImpl=C)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:typeof globalThis<"u"&&globalThis.fetch?globalThis.fetch:typeof fetch<"u"?fetch:void Zt("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:typeof globalThis<"u"&&globalThis.Headers?globalThis.Headers:typeof Headers<"u"?Headers:void Zt("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:typeof globalThis<"u"&&globalThis.Response?globalThis.Response:typeof Response<"u"?Response:void Zt("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const He={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},xe=new Ft(3e4,6e4);function Le(b,f){return b.tenantId&&!f.tenantId?Object.assign(Object.assign({},f),{tenantId:b.tenantId}):f}function Ye(b,f,_,C){return Pt.apply(this,arguments)}function Pt(){return(Pt=(0,y.Z)(function*(b,f,_,C,G={}){return Ct(b,G,(0,y.Z)(function*(){let X={},ye={};C&&("GET"===f?ye=C:X={body:JSON.stringify(C)});const Ge=(0,ae.xO)(Object.assign({key:b.config.apiKey},ye)).slice(1),ht=yield b._getAdditionalHeaders();return ht["Content-Type"]="application/json",b.languageCode&&(ht["X-Firebase-Locale"]=b.languageCode),be.fetch()(on(b,b.config.apiHost,_,Ge),Object.assign({method:f,headers:ht,referrerPolicy:"no-referrer"},X))}))})).apply(this,arguments)}function Ct(b,f,_){return ar.apply(this,arguments)}function ar(){return(ar=(0,y.Z)(function*(b,f,_){b._canInitEmulator=!1;const C=Object.assign(Object.assign({},He),f);try{const G=new Cn(b),X=yield Promise.race([_(),G.promise]);G.clearNetworkTimeout();const ye=yield X.json();if("needConfirmation"in ye)throw Pn(b,"account-exists-with-different-credential",ye);if(X.ok&&!("errorMessage"in ye))return ye;{const Ge=X.ok?ye.errorMessage:ye.error.message,[ht,Jt]=Ge.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===ht)throw Pn(b,"credential-already-in-use",ye);if("EMAIL_EXISTS"===ht)throw Pn(b,"email-already-in-use",ye);if("USER_DISABLED"===ht)throw Pn(b,"user-disabled",ye);const dn=C[ht]||ht.toLowerCase().replace(/[_\s]+/g,"-");if(Jt)throw ze(b,dn,Jt);qe(b,dn)}}catch(G){if(G instanceof ae.ZR)throw G;qe(b,"network-request-failed",{message:String(G)})}})).apply(this,arguments)}function wt(b,f,_,C){return Tn.apply(this,arguments)}function Tn(){return(Tn=(0,y.Z)(function*(b,f,_,C,G={}){const X=yield Ye(b,f,_,C,G);return"mfaPendingCredential"in X&&qe(b,"multi-factor-auth-required",{_serverResponse:X}),X})).apply(this,arguments)}function on(b,f,_,C){const G=`${f}${_}?${C}`;return b.config.emulator?ve(b.config,G):`${b.config.apiScheme}://${G}`}function Qn(b){switch(b){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class Cn{constructor(f){this.auth=f,this.timer=null,this.promise=new Promise((_,C)=>{this.timer=setTimeout(()=>C(Ne(this.auth,"network-request-failed")),xe.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Pn(b,f,_){const C={appName:b.name};_.email&&(C.email=_.email),_.phoneNumber&&(C.phoneNumber=_.phoneNumber);const G=Ne(b,f,C);return G.customData._tokenResponse=_,G}function _e(b){return void 0!==b&&void 0!==b.getResponse}function Se(b){return void 0!==b&&void 0!==b.enterprise}class Ue{constructor(f){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===f.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=f.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=f.recaptchaEnforcementState}getProviderEnforcementState(f){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const _ of this.recaptchaEnforcementState)if(_.provider&&_.provider===f)return Qn(_.enforcementState);return null}isProviderEnabled(f){return"ENFORCE"===this.getProviderEnforcementState(f)||"AUDIT"===this.getProviderEnforcementState(f)}}function pt(){return(pt=(0,y.Z)(function*(b){return(yield Ye(b,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function Mt(b,f){return Nn.apply(this,arguments)}function Nn(){return(Nn=(0,y.Z)(function*(b,f){return Ye(b,"GET","/v2/recaptchaConfig",Le(b,f))})).apply(this,arguments)}function Ot(){return(Ot=(0,y.Z)(function*(b,f){return Ye(b,"POST","/v1/accounts:delete",f)})).apply(this,arguments)}function At(){return(At=(0,y.Z)(function*(b,f){return Ye(b,"POST","/v1/accounts:update",f)})).apply(this,arguments)}function Fr(){return(Fr=(0,y.Z)(function*(b,f){return Ye(b,"POST","/v1/accounts:lookup",f)})).apply(this,arguments)}function qr(b){if(b)try{const f=new Date(Number(b));if(!isNaN(f.getTime()))return f.toUTCString()}catch{}}function xr(){return(xr=(0,y.Z)(function*(b,f=!1){const _=(0,ae.m9)(b),C=yield _.getIdToken(f),G=Gi(C);ce(G&&G.exp&&G.auth_time&&G.iat,_.auth,"internal-error");const X="object"==typeof G.firebase?G.firebase:void 0,ye=X?.sign_in_provider;return{claims:G,token:C,authTime:qr(Bt(G.auth_time)),issuedAtTime:qr(Bt(G.iat)),expirationTime:qr(Bt(G.exp)),signInProvider:ye||null,signInSecondFactor:X?.sign_in_second_factor||null}})).apply(this,arguments)}function Bt(b){return 1e3*Number(b)}function Gi(b){const[f,_,C]=b.split(".");if(void 0===f||void 0===_||void 0===C)return Me("JWT malformed, contained fewer than 3 sections"),null;try{const G=(0,ae.tV)(_);return G?JSON.parse(G):(Me("Failed to decode base64 JWT payload"),null)}catch(G){return Me("Caught error parsing JWT payload as JSON",G?.toString()),null}}function mn(b,f){return Ni.apply(this,arguments)}function Ni(){return(Ni=(0,y.Z)(function*(b,f,_=!1){if(_)return f;try{return yield f}catch(C){throw C instanceof ae.ZR&&function Fa({code:b}){return"auth/user-disabled"===b||"auth/user-token-expired"===b}(C)&&b.auth.currentUser===b&&(yield b.auth.signOut()),C}})).apply(this,arguments)}class ur{constructor(f){this.user=f,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(f){var _;if(f){const C=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),C}{this.errorBackoff=3e4;const G=(null!==(_=this.user.stsTokenManager.expirationTime)&&void 0!==_?_:0)-Date.now()-3e5;return Math.max(0,G)}}schedule(f=!1){var _=this;if(!this.isRunning)return;const C=this.getInterval(f);this.timerId=setTimeout((0,y.Z)(function*(){yield _.iteration()}),C)}iteration(){var f=this;return(0,y.Z)(function*(){try{yield f.user.getIdToken(!0)}catch(_){return void("auth/network-request-failed"===_?.code&&f.schedule(!0))}f.schedule()})()}}class bs{constructor(f,_){this.createdAt=f,this.lastLoginAt=_,this._initializeTime()}_initializeTime(){this.lastSignInTime=qr(this.lastLoginAt),this.creationTime=qr(this.createdAt)}_copy(f){this.createdAt=f.createdAt,this.lastLoginAt=f.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function Xr(b){return Hi.apply(this,arguments)}function Hi(){return Hi=(0,y.Z)(function*(b){var f;const _=b.auth,C=yield b.getIdToken(),G=yield mn(b,function $n(b,f){return Fr.apply(this,arguments)}(_,{idToken:C}));ce(G?.users.length,_,"internal-error");const X=G.users[0];b._notifyReloadListener(X);const ye=null!==(f=X.providerUserInfo)&&void 0!==f&&f.length?function yi(b){return b.map(f=>{var{providerId:_}=f,C=(0,Ee._T)(f,["providerId"]);return{providerId:_,uid:C.rawId||"",displayName:C.displayName||null,email:C.email||null,phoneNumber:C.phoneNumber||null,photoURL:C.photoUrl||null}})}(X.providerUserInfo):[],Ge=function vi(b,f){return[...b.filter(C=>!f.some(G=>G.providerId===C.providerId)),...f]}(b.providerData,ye),dn=!!b.isAnonymous&&!(b.email&&X.passwordHash||Ge?.length),hn={uid:X.localId,displayName:X.displayName||null,photoURL:X.photoUrl||null,email:X.email||null,emailVerified:X.emailVerified||!1,phoneNumber:X.phoneNumber||null,tenantId:X.tenantId||null,providerData:Ge,metadata:new bs(X.createdAt,X.lastLoginAt),isAnonymous:dn};Object.assign(b,hn)}),Hi.apply(this,arguments)}function di(){return(di=(0,y.Z)(function*(b){const f=(0,ae.m9)(b);yield Xr(f),yield f.auth._persistUserIfCurrent(f),f.auth._notifyListenersIfCurrent(f)})).apply(this,arguments)}function Te(){return(Te=(0,y.Z)(function*(b,f){const _=yield Ct(b,{},(0,y.Z)(function*(){const C=(0,ae.xO)({grant_type:"refresh_token",refresh_token:f}).slice(1),{tokenApiHost:G,apiKey:X}=b.config,ye=on(b,G,"/v1/token",`key=${X}`),Ge=yield b._getAdditionalHeaders();return Ge["Content-Type"]="application/x-www-form-urlencoded",be.fetch()(ye,{method:"POST",headers:Ge,body:C})}));return{accessToken:_.access_token,expiresIn:_.expires_in,refreshToken:_.refresh_token}})).apply(this,arguments)}class se{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(f){ce(f.idToken,"internal-error"),ce(typeof f.idToken<"u","internal-error"),ce(typeof f.refreshToken<"u","internal-error");const _="expiresIn"in f&&typeof f.expiresIn<"u"?Number(f.expiresIn):function Sn(b){const f=Gi(b);return ce(f,"internal-error"),ce(typeof f.exp<"u","internal-error"),ce(typeof f.iat<"u","internal-error"),Number(f.exp)-Number(f.iat)}(f.idToken);this.updateTokensAndExpiration(f.idToken,f.refreshToken,_)}getToken(f,_=!1){var C=this;return(0,y.Z)(function*(){return ce(!C.accessToken||C.refreshToken,f,"user-token-expired"),_||!C.accessToken||C.isExpired?C.refreshToken?(yield C.refresh(f,C.refreshToken),C.accessToken):null:C.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(f,_){var C=this;return(0,y.Z)(function*(){const{accessToken:G,refreshToken:X,expiresIn:ye}=yield function Oi(b,f){return Te.apply(this,arguments)}(f,_);C.updateTokensAndExpiration(G,X,Number(ye))})()}updateTokensAndExpiration(f,_,C){this.refreshToken=_||null,this.accessToken=f||null,this.expirationTime=Date.now()+1e3*C}static fromJSON(f,_){const{refreshToken:C,accessToken:G,expirationTime:X}=_,ye=new se;return C&&(ce("string"==typeof C,"internal-error",{appName:f}),ye.refreshToken=C),G&&(ce("string"==typeof G,"internal-error",{appName:f}),ye.accessToken=G),X&&(ce("number"==typeof X,"internal-error",{appName:f}),ye.expirationTime=X),ye}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(f){this.accessToken=f.accessToken,this.refreshToken=f.refreshToken,this.expirationTime=f.expirationTime}_clone(){return Object.assign(new se,this.toJSON())}_performRefresh(){return Zt("not implemented")}}function ne(b,f){ce("string"==typeof b||typeof b>"u","internal-error",{appName:f})}class re{constructor(f){var{uid:_,auth:C,stsTokenManager:G}=f,X=(0,Ee._T)(f,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new ur(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=_,this.auth=C,this.stsTokenManager=G,this.accessToken=G.accessToken,this.displayName=X.displayName||null,this.email=X.email||null,this.emailVerified=X.emailVerified||!1,this.phoneNumber=X.phoneNumber||null,this.photoURL=X.photoURL||null,this.isAnonymous=X.isAnonymous||!1,this.tenantId=X.tenantId||null,this.providerData=X.providerData?[...X.providerData]:[],this.metadata=new bs(X.createdAt||void 0,X.lastLoginAt||void 0)}getIdToken(f){var _=this;return(0,y.Z)(function*(){const C=yield mn(_,_.stsTokenManager.getToken(_.auth,f));return ce(C,_.auth,"internal-error"),_.accessToken!==C&&(_.accessToken=C,yield _.auth._persistUserIfCurrent(_),_.auth._notifyListenersIfCurrent(_)),C})()}getIdTokenResult(f){return function Sr(b){return xr.apply(this,arguments)}(this,f)}reload(){return function ws(b){return di.apply(this,arguments)}(this)}_assign(f){this!==f&&(ce(this.uid===f.uid,this.auth,"internal-error"),this.displayName=f.displayName,this.photoURL=f.photoURL,this.email=f.email,this.emailVerified=f.emailVerified,this.phoneNumber=f.phoneNumber,this.isAnonymous=f.isAnonymous,this.tenantId=f.tenantId,this.providerData=f.providerData.map(_=>Object.assign({},_)),this.metadata._copy(f.metadata),this.stsTokenManager._assign(f.stsTokenManager))}_clone(f){const _=new re(Object.assign(Object.assign({},this),{auth:f,stsTokenManager:this.stsTokenManager._clone()}));return _.metadata._copy(this.metadata),_}_onReload(f){ce(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=f,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(f){this.reloadListener?this.reloadListener(f):this.reloadUserInfo=f}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(f,_=!1){var C=this;return(0,y.Z)(function*(){let G=!1;f.idToken&&f.idToken!==C.stsTokenManager.accessToken&&(C.stsTokenManager.updateFromServerResponse(f),G=!0),_&&(yield Xr(C)),yield C.auth._persistUserIfCurrent(C),G&&C.auth._notifyListenersIfCurrent(C)})()}delete(){var f=this;return(0,y.Z)(function*(){const _=yield f.getIdToken();return yield mn(f,function kn(b,f){return Ot.apply(this,arguments)}(f.auth,{idToken:_})),f.stsTokenManager.clearRefreshToken(),f.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(f=>Object.assign({},f)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(f,_){var C,G,X,ye,Ge,ht,Jt,dn;const hn=null!==(C=_.displayName)&&void 0!==C?C:void 0,Si=null!==(G=_.email)&&void 0!==G?G:void 0,ko=null!==(X=_.phoneNumber)&&void 0!==X?X:void 0,Fc=null!==(ye=_.photoURL)&&void 0!==ye?ye:void 0,dd=null!==(Ge=_.tenantId)&&void 0!==Ge?Ge:void 0,cl=null!==(ht=_._redirectEventId)&&void 0!==ht?ht:void 0,uc=null!==(Jt=_.createdAt)&&void 0!==Jt?Jt:void 0,mh=null!==(dn=_.lastLoginAt)&&void 0!==dn?dn:void 0,{uid:hd,emailVerified:ls,isAnonymous:Fd,providerData:yu,stsTokenManager:ll}=_;ce(hd&&ll,f,"internal-error");const Ya=se.fromJSON(this.name,ll);ce("string"==typeof hd,f,"internal-error"),ne(hn,f.name),ne(Si,f.name),ce("boolean"==typeof ls,f,"internal-error"),ce("boolean"==typeof Fd,f,"internal-error"),ne(ko,f.name),ne(Fc,f.name),ne(dd,f.name),ne(cl,f.name),ne(uc,f.name),ne(mh,f.name);const xl=new re({uid:hd,auth:f,email:Si,emailVerified:ls,displayName:hn,isAnonymous:Fd,photoURL:Fc,phoneNumber:ko,tenantId:dd,stsTokenManager:Ya,createdAt:uc,lastLoginAt:mh});return yu&&Array.isArray(yu)&&(xl.providerData=yu.map(Jh=>Object.assign({},Jh))),cl&&(xl._redirectEventId=cl),xl}static _fromIdTokenResponse(f,_,C=!1){return(0,y.Z)(function*(){const G=new se;G.updateFromServerResponse(_);const X=new re({uid:_.localId,auth:f,stsTokenManager:G,isAnonymous:C});return yield Xr(X),X})()}}const oe=new Map;function Re(b){Tt(b instanceof Function,"Expected a class definition");let f=oe.get(b);return f?(Tt(f instanceof b,"Instance stored in cache mismatched with class"),f):(f=new b,oe.set(b,f),f)}const Rt=(()=>{class b{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,y.Z)(function*(){return!0})()}_set(_,C){var G=this;return(0,y.Z)(function*(){G.storage[_]=C})()}_get(_){var C=this;return(0,y.Z)(function*(){const G=C.storage[_];return void 0===G?null:G})()}_remove(_){var C=this;return(0,y.Z)(function*(){delete C.storage[_]})()}_addListener(_,C){}_removeListener(_,C){}}return b.type="NONE",b})();function Kt(b,f,_){return`firebase:${b}:${f}:${_}`}class gn{constructor(f,_,C){this.persistence=f,this.auth=_,this.userKey=C;const{config:G,name:X}=this.auth;this.fullUserKey=Kt(this.userKey,G.apiKey,X),this.fullPersistenceKey=Kt("persistence",G.apiKey,X),this.boundEventHandler=_._onStorageEvent.bind(_),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(f){return this.persistence._set(this.fullUserKey,f.toJSON())}getCurrentUser(){var f=this;return(0,y.Z)(function*(){const _=yield f.persistence._get(f.fullUserKey);return _?re._fromJSON(f.auth,_):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(f){var _=this;return(0,y.Z)(function*(){if(_.persistence===f)return;const C=yield _.getCurrentUser();return yield _.removeCurrentUser(),_.persistence=f,C?_.setCurrentUser(C):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(f,_,C="authUser"){return(0,y.Z)(function*(){if(!_.length)return new gn(Re(Rt),f,C);const G=(yield Promise.all(_.map(function(){var Jt=(0,y.Z)(function*(dn){if(yield dn._isAvailable())return dn});return function(dn){return Jt.apply(this,arguments)}}()))).filter(Jt=>Jt);let X=G[0]||Re(Rt);const ye=Kt(C,f.config.apiKey,f.name);let Ge=null;for(const Jt of _)try{const dn=yield Jt._get(ye);if(dn){const hn=re._fromJSON(f,dn);Jt!==X&&(Ge=hn),X=Jt;break}}catch{}const ht=G.filter(Jt=>Jt._shouldAllowMigration);return X._shouldAllowMigration&&ht.length?(X=ht[0],Ge&&(yield X._set(ye,Ge.toJSON())),yield Promise.all(_.map(function(){var Jt=(0,y.Z)(function*(dn){if(dn!==X)try{yield dn._remove(ye)}catch{}});return function(dn){return Jt.apply(this,arguments)}}())),new gn(X,f,C)):new gn(X,f,C)})()}}function Qt(b){const f=b.toLowerCase();if(f.includes("opera/")||f.includes("opr/")||f.includes("opios/"))return"Opera";if(js(f))return"IEMobile";if(f.includes("msie")||f.includes("trident/"))return"IE";if(f.includes("edge/"))return"Edge";if(un(f))return"Firefox";if(f.includes("silk/"))return"Silk";if(rt(f))return"Blackberry";if(je(f))return"Webos";if(wr(f))return"Safari";if((f.includes("chrome/")||Kr(f))&&!f.includes("edge/"))return"Chrome";if(Ms(f))return"Android";{const C=b.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===C?.length)return C[1]}return"Other"}function un(b=(0,ae.z$)()){return/firefox\//i.test(b)}function wr(b=(0,ae.z$)()){const f=b.toLowerCase();return f.includes("safari/")&&!f.includes("chrome/")&&!f.includes("crios/")&&!f.includes("android")}function Kr(b=(0,ae.z$)()){return/crios\//i.test(b)}function js(b=(0,ae.z$)()){return/iemobile/i.test(b)}function Ms(b=(0,ae.z$)()){return/android/i.test(b)}function rt(b=(0,ae.z$)()){return/blackberry/i.test(b)}function je(b=(0,ae.z$)()){return/webos/i.test(b)}function mt(b=(0,ae.z$)()){return/iphone|ipad|ipod/i.test(b)||/macintosh/i.test(b)&&/mobile/i.test(b)}function Vn(b=(0,ae.z$)()){return mt(b)||Ms(b)||je(b)||rt(b)||/windows phone/i.test(b)||js(b)}function Dr(b,f=[]){let _;switch(b){case"Browser":_=Qt((0,ae.z$)());break;case"Worker":_=`${Qt((0,ae.z$)())}-${b}`;break;default:_=b}const C=f.length?f.join(","):"FirebaseCore-web";return`${_}/JsCore/${Ce.SDK_VERSION}/${C}`}class qs{constructor(f){this.auth=f,this.queue=[]}pushCallback(f,_){const C=X=>new Promise((ye,Ge)=>{try{ye(f(X))}catch(ht){Ge(ht)}});C.onAbort=_,this.queue.push(C);const G=this.queue.length-1;return()=>{this.queue[G]=()=>Promise.resolve()}}runMiddleware(f){var _=this;return(0,y.Z)(function*(){if(_.auth.currentUser===f)return;const C=[];try{for(const G of _.queue)yield G(f),G.onAbort&&C.push(G.onAbort)}catch(G){C.reverse();for(const X of C)try{X()}catch{}throw _.auth._errorFactory.create("login-blocked",{originalMessage:G?.message})}})()}}function hs(){return(hs=(0,y.Z)(function*(b,f={}){return Ye(b,"GET","/v2/passwordPolicy",Le(b,f))})).apply(this,arguments)}class Lo{constructor(f){var _,C,G,X;const ye=f.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(_=ye.minPasswordLength)&&void 0!==_?_:6,ye.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=ye.maxPasswordLength),void 0!==ye.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=ye.containsLowercaseCharacter),void 0!==ye.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=ye.containsUppercaseCharacter),void 0!==ye.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=ye.containsNumericCharacter),void 0!==ye.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=ye.containsNonAlphanumericCharacter),this.enforcementState=f.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(G=null===(C=f.allowedNonAlphanumericCharacters)||void 0===C?void 0:C.join(""))&&void 0!==G?G:"",this.forceUpgradeOnSignin=null!==(X=f.forceUpgradeOnSignin)&&void 0!==X&&X,this.schemaVersion=f.schemaVersion}validatePassword(f){var _,C,G,X,ye,Ge;const ht={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(f,ht),this.validatePasswordCharacterOptions(f,ht),ht.isValid&&(ht.isValid=null===(_=ht.meetsMinPasswordLength)||void 0===_||_),ht.isValid&&(ht.isValid=null===(C=ht.meetsMaxPasswordLength)||void 0===C||C),ht.isValid&&(ht.isValid=null===(G=ht.containsLowercaseLetter)||void 0===G||G),ht.isValid&&(ht.isValid=null===(X=ht.containsUppercaseLetter)||void 0===X||X),ht.isValid&&(ht.isValid=null===(ye=ht.containsNumericCharacter)||void 0===ye||ye),ht.isValid&&(ht.isValid=null===(Ge=ht.containsNonAlphanumericCharacter)||void 0===Ge||Ge),ht}validatePasswordLengthOptions(f,_){const C=this.customStrengthOptions.minPasswordLength,G=this.customStrengthOptions.maxPasswordLength;C&&(_.meetsMinPasswordLength=f.length>=C),G&&(_.meetsMaxPasswordLength=f.length<=G)}validatePasswordCharacterOptions(f,_){let C;this.updatePasswordCharacterOptionsStatuses(_,!1,!1,!1,!1);for(let G=0;G<f.length;G++)C=f.charAt(G),this.updatePasswordCharacterOptionsStatuses(_,C>="a"&&C<="z",C>="A"&&C<="Z",C>="0"&&C<="9",this.allowedNonAlphanumericCharacters.includes(C))}updatePasswordCharacterOptionsStatuses(f,_,C,G,X){this.customStrengthOptions.containsLowercaseLetter&&(f.containsLowercaseLetter||(f.containsLowercaseLetter=_)),this.customStrengthOptions.containsUppercaseLetter&&(f.containsUppercaseLetter||(f.containsUppercaseLetter=C)),this.customStrengthOptions.containsNumericCharacter&&(f.containsNumericCharacter||(f.containsNumericCharacter=G)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(f.containsNonAlphanumericCharacter||(f.containsNonAlphanumericCharacter=X))}}class ma{constructor(f,_,C,G){this.app=f,this.heartbeatServiceProvider=_,this.appCheckServiceProvider=C,this.config=G,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new La(this),this.idTokenSubscription=new La(this),this.beforeStateQueue=new qs(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=yt,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=f.name,this.clientVersion=G.sdkClientVersion}_initializeWithPersistence(f,_){var C=this;return _&&(this._popupRedirectResolver=Re(_)),this._initializationPromise=this.queue((0,y.Z)(function*(){var G,X;if(!C._deleted&&(C.persistenceManager=yield gn.create(C,f),!C._deleted)){if(null!==(G=C._popupRedirectResolver)&&void 0!==G&&G._shouldInitProactively)try{yield C._popupRedirectResolver._initialize(C)}catch{}yield C.initializeCurrentUser(_),C.lastNotifiedUid=(null===(X=C.currentUser)||void 0===X?void 0:X.uid)||null,!C._deleted&&(C._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var f=this;return(0,y.Z)(function*(){if(f._deleted)return;const _=yield f.assertedPersistence.getCurrentUser();if(f.currentUser||_){if(f.currentUser&&_&&f.currentUser.uid===_.uid)return f._currentUser._assign(_),void(yield f.currentUser.getIdToken());yield f._updateCurrentUser(_,!0)}})()}initializeCurrentUser(f){var _=this;return(0,y.Z)(function*(){var C;const G=yield _.assertedPersistence.getCurrentUser();let X=G,ye=!1;if(f&&_.config.authDomain){yield _.getOrInitRedirectPersistenceManager();const Ge=null===(C=_.redirectUser)||void 0===C?void 0:C._redirectEventId,ht=X?._redirectEventId,Jt=yield _.tryRedirectSignIn(f);(!Ge||Ge===ht)&&Jt?.user&&(X=Jt.user,ye=!0)}if(!X)return _.directlySetCurrentUser(null);if(!X._redirectEventId){if(ye)try{yield _.beforeStateQueue.runMiddleware(X)}catch(Ge){X=G,_._popupRedirectResolver._overrideRedirectResult(_,()=>Promise.reject(Ge))}return X?_.reloadAndSetCurrentUserOrClear(X):_.directlySetCurrentUser(null)}return ce(_._popupRedirectResolver,_,"argument-error"),yield _.getOrInitRedirectPersistenceManager(),_.redirectUser&&_.redirectUser._redirectEventId===X._redirectEventId?_.directlySetCurrentUser(X):_.reloadAndSetCurrentUserOrClear(X)})()}tryRedirectSignIn(f){var _=this;return(0,y.Z)(function*(){let C=null;try{C=yield _._popupRedirectResolver._completeRedirectFn(_,f,!0)}catch{yield _._setRedirectUser(null)}return C})()}reloadAndSetCurrentUserOrClear(f){var _=this;return(0,y.Z)(function*(){try{yield Xr(f)}catch(C){if("auth/network-request-failed"!==C?.code)return _.directlySetCurrentUser(null)}return _.directlySetCurrentUser(f)})()}useDeviceLanguage(){this.languageCode=function Yt(){if(typeof navigator>"u")return null;const b=navigator;return b.languages&&b.languages[0]||b.language||null}()}_delete(){var f=this;return(0,y.Z)(function*(){f._deleted=!0})()}updateCurrentUser(f){var _=this;return(0,y.Z)(function*(){const C=f?(0,ae.m9)(f):null;return C&&ce(C.auth.config.apiKey===_.config.apiKey,_,"invalid-user-token"),_._updateCurrentUser(C&&C._clone(_))})()}_updateCurrentUser(f,_=!1){var C=this;return(0,y.Z)(function*(){if(!C._deleted)return f&&ce(C.tenantId===f.tenantId,C,"tenant-id-mismatch"),_||(yield C.beforeStateQueue.runMiddleware(f)),C.queue((0,y.Z)(function*(){yield C.directlySetCurrentUser(f),C.notifyAuthListeners()}))})()}signOut(){var f=this;return(0,y.Z)(function*(){return yield f.beforeStateQueue.runMiddleware(null),(f.redirectPersistenceManager||f._popupRedirectResolver)&&(yield f._setRedirectUser(null)),f._updateCurrentUser(null,!0)})()}setPersistence(f){var _=this;return this.queue((0,y.Z)(function*(){yield _.assertedPersistence.setPersistence(Re(f))}))}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(f){var _=this;return(0,y.Z)(function*(){_._getPasswordPolicyInternal()||(yield _._updatePasswordPolicy());const C=_._getPasswordPolicyInternal();return C.schemaVersion!==_.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(_._errorFactory.create("unsupported-password-policy-schema-version",{})):C.validatePassword(f)})()}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){var f=this;return(0,y.Z)(function*(){const _=yield function Pi(b){return hs.apply(this,arguments)}(f),C=new Lo(_);null===f.tenantId?f._projectPasswordPolicy=C:f._tenantPasswordPolicies[f.tenantId]=C})()}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(f){this._errorFactory=new ae.LL("auth","Firebase",f())}onAuthStateChanged(f,_,C){return this.registerStateListener(this.authStateSubscription,f,_,C)}beforeAuthStateChanged(f,_){return this.beforeStateQueue.pushCallback(f,_)}onIdTokenChanged(f,_,C){return this.registerStateListener(this.idTokenSubscription,f,_,C)}authStateReady(){return new Promise((f,_)=>{if(this.currentUser)f();else{const C=this.onAuthStateChanged(()=>{C(),f()},_)}})}toJSON(){var f;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(f=this._currentUser)||void 0===f?void 0:f.toJSON()}}_setRedirectUser(f,_){var C=this;return(0,y.Z)(function*(){const G=yield C.getOrInitRedirectPersistenceManager(_);return null===f?G.removeCurrentUser():G.setCurrentUser(f)})()}getOrInitRedirectPersistenceManager(f){var _=this;return(0,y.Z)(function*(){if(!_.redirectPersistenceManager){const C=f&&Re(f)||_._popupRedirectResolver;ce(C,_,"argument-error"),_.redirectPersistenceManager=yield gn.create(_,[Re(C._redirectPersistence)],"redirectUser"),_.redirectUser=yield _.redirectPersistenceManager.getCurrentUser()}return _.redirectPersistenceManager})()}_redirectUserForId(f){var _=this;return(0,y.Z)(function*(){var C,G;return _._isInitialized&&(yield _.queue((0,y.Z)(function*(){}))),(null===(C=_._currentUser)||void 0===C?void 0:C._redirectEventId)===f?_._currentUser:(null===(G=_.redirectUser)||void 0===G?void 0:G._redirectEventId)===f?_.redirectUser:null})()}_persistUserIfCurrent(f){var _=this;return(0,y.Z)(function*(){if(f===_.currentUser)return _.queue((0,y.Z)(function*(){return _.directlySetCurrentUser(f)}))})()}_notifyListenersIfCurrent(f){f===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var f,_;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const C=null!==(_=null===(f=this.currentUser)||void 0===f?void 0:f.uid)&&void 0!==_?_:null;this.lastNotifiedUid!==C&&(this.lastNotifiedUid=C,this.authStateSubscription.next(this.currentUser))}registerStateListener(f,_,C,G){if(this._deleted)return()=>{};const X="function"==typeof _?_:_.next.bind(_);let ye=!1;const Ge=this._isInitialized?Promise.resolve():this._initializationPromise;if(ce(Ge,this,"internal-error"),Ge.then(()=>{ye||X(this.currentUser)}),"function"==typeof _){const ht=f.addObserver(_,C,G);return()=>{ye=!0,ht()}}{const ht=f.addObserver(_);return()=>{ye=!0,ht()}}}directlySetCurrentUser(f){var _=this;return(0,y.Z)(function*(){_.currentUser&&_.currentUser!==f&&_._currentUser._stopProactiveRefresh(),f&&_.isProactiveRefreshEnabled&&f._startProactiveRefresh(),_.currentUser=f,f?yield _.assertedPersistence.setCurrentUser(f):yield _.assertedPersistence.removeCurrentUser()})()}queue(f){return this.operations=this.operations.then(f,f),this.operations}get assertedPersistence(){return ce(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(f){!f||this.frameworks.includes(f)||(this.frameworks.push(f),this.frameworks.sort(),this.clientVersion=Dr(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var f=this;return(0,y.Z)(function*(){var _;const C={"X-Client-Version":f.clientVersion};f.app.options.appId&&(C["X-Firebase-gmpid"]=f.app.options.appId);const G=yield null===(_=f.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===_?void 0:_.getHeartbeatsHeader();G&&(C["X-Firebase-Client"]=G);const X=yield f._getAppCheckToken();return X&&(C["X-Firebase-AppCheck"]=X),C})()}_getAppCheckToken(){var f=this;return(0,y.Z)(function*(){var _;const C=yield null===(_=f.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===_?void 0:_.getToken();return C?.error&&function Ve(b,...f){nn.logLevel<=De.in.WARN&&nn.warn(`Auth (${Ce.SDK_VERSION}): ${b}`,...f)}(`Error while retrieving App Check token: ${C.error}`),C?.token})()}}function Dn(b){return(0,ae.m9)(b)}class La{constructor(f){this.auth=f,this.observer=null,this.addObserver=(0,ae.ne)(_=>this.observer=_)}get next(){return ce(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function es(b){return new Promise((f,_)=>{const C=document.createElement("script");C.setAttribute("src",b),C.onload=f,C.onerror=G=>{const X=Ne("internal-error");X.customData=G,_(X)},C.type="text/javascript",C.charset="UTF-8",function Gs(){var b,f;return null!==(f=null===(b=document.getElementsByTagName("head"))||void 0===b?void 0:b[0])&&void 0!==f?f:document}().appendChild(C)})}function $i(b){return`__${b}${Math.floor(1e6*Math.random())}`}class zi{constructor(f){this.type="recaptcha-enterprise",this.auth=Dn(f)}verify(f="verify",_=!1){var C=this;return(0,y.Z)(function*(){function X(){return X=(0,y.Z)(function*(Ge){if(!_){if(null==Ge.tenantId&&null!=Ge._agentRecaptchaConfig)return Ge._agentRecaptchaConfig.siteKey;if(null!=Ge.tenantId&&void 0!==Ge._tenantRecaptchaConfigs[Ge.tenantId])return Ge._tenantRecaptchaConfigs[Ge.tenantId].siteKey}return new Promise(function(){var ht=(0,y.Z)(function*(Jt,dn){Mt(Ge,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(hn=>{if(void 0!==hn.recaptchaKey){const Si=new Ue(hn);return null==Ge.tenantId?Ge._agentRecaptchaConfig=Si:Ge._tenantRecaptchaConfigs[Ge.tenantId]=Si,Jt(Si.siteKey)}dn(new Error("recaptcha Enterprise site key undefined"))}).catch(hn=>{dn(hn)})});return function(Jt,dn){return ht.apply(this,arguments)}}())}),X.apply(this,arguments)}function ye(Ge,ht,Jt){const dn=window.grecaptcha;Se(dn)?dn.enterprise.ready(()=>{dn.enterprise.execute(Ge,{action:f}).then(hn=>{ht(hn)}).catch(()=>{ht("NO_RECAPTCHA")})}):Jt(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((Ge,ht)=>{(function G(Ge){return X.apply(this,arguments)})(C.auth).then(Jt=>{if(!_&&Se(window.grecaptcha))ye(Jt,Ge,ht);else{if(typeof window>"u")return void ht(new Error("RecaptchaVerifier is only supported in browser"));es("https://www.google.com/recaptcha/enterprise.js?render="+Jt).then(()=>{ye(Jt,Ge,ht)}).catch(dn=>{ht(dn)})}}).catch(Jt=>{ht(Jt)})})})()}}function cr(b,f,_){return er.apply(this,arguments)}function er(){return(er=(0,y.Z)(function*(b,f,_,C=!1){const G=new zi(b);let X;try{X=yield G.verify(_)}catch{X=yield G.verify(_,!0)}const ye=Object.assign({},f);return Object.assign(ye,C?{captchaResp:X}:{captchaResponse:X}),Object.assign(ye,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(ye,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),ye})).apply(this,arguments)}function ts(b,f,_,C){return Ei.apply(this,arguments)}function Ei(){return Ei=(0,y.Z)(function*(b,f,_,C){var G;if(null!==(G=b._getRecaptchaConfig())&&void 0!==G&&G.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const X=yield cr(b,f,_,"getOobCode"===_);return C(b,X)}return C(b,f).catch(function(){var X=(0,y.Z)(function*(ye){if("auth/missing-recaptcha-token"===ye.code){console.log(`${_} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const Ge=yield cr(b,f,_,"getOobCode"===_);return C(b,Ge)}return Promise.reject(ye)});return function(ye){return X.apply(this,arguments)}}())}),Ei.apply(this,arguments)}function Wi(b){const f=b.indexOf(":");return f<0?"":b.substr(0,f+1)}function ya(b){if(!b)return null;const f=Number(b);return isNaN(f)?null:f}class Vo{constructor(f,_){this.providerId=f,this.signInMethod=_}toJSON(){return Zt("not implemented")}_getIdTokenResponse(f){return Zt("not implemented")}_linkToIdToken(f,_){return Zt("not implemented")}_getReauthenticationResolver(f){return Zt("not implemented")}}function Ba(b,f){return xs.apply(this,arguments)}function xs(){return(xs=(0,y.Z)(function*(b,f){return Ye(b,"POST","/v1/accounts:resetPassword",Le(b,f))})).apply(this,arguments)}function Bo(b,f){return ao.apply(this,arguments)}function ao(){return(ao=(0,y.Z)(function*(b,f){return Ye(b,"POST","/v1/accounts:update",f)})).apply(this,arguments)}function Ds(){return(Ds=(0,y.Z)(function*(b,f){return Ye(b,"POST","/v1/accounts:update",Le(b,f))})).apply(this,arguments)}function Bn(b,f){return fi.apply(this,arguments)}function fi(){return(fi=(0,y.Z)(function*(b,f){return wt(b,"POST","/v1/accounts:signInWithPassword",Le(b,f))})).apply(this,arguments)}function nr(b,f){return ri.apply(this,arguments)}function ri(){return(ri=(0,y.Z)(function*(b,f){return Ye(b,"POST","/v1/accounts:sendOobCode",Le(b,f))})).apply(this,arguments)}function ks(){return(ks=(0,y.Z)(function*(b,f){return nr(b,f)})).apply(this,arguments)}function Cs(b,f){return Gr.apply(this,arguments)}function Gr(){return(Gr=(0,y.Z)(function*(b,f){return nr(b,f)})).apply(this,arguments)}function Ks(b,f){return As.apply(this,arguments)}function As(){return(As=(0,y.Z)(function*(b,f){return nr(b,f)})).apply(this,arguments)}function Lt(){return(Lt=(0,y.Z)(function*(b,f){return nr(b,f)})).apply(this,arguments)}function zn(){return(zn=(0,y.Z)(function*(b,f){return wt(b,"POST","/v1/accounts:signInWithEmailLink",Le(b,f))})).apply(this,arguments)}function ns(){return(ns=(0,y.Z)(function*(b,f){return wt(b,"POST","/v1/accounts:signInWithEmailLink",Le(b,f))})).apply(this,arguments)}class vr extends Vo{constructor(f,_,C,G=null){super("password",C),this._email=f,this._password=_,this._tenantId=G}static _fromEmailAndPassword(f,_){return new vr(f,_,"password")}static _fromEmailAndCode(f,_,C=null){return new vr(f,_,"emailLink",C)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(f){const _="string"==typeof f?JSON.parse(f):f;if(_?.email&&_?.password){if("password"===_.signInMethod)return this._fromEmailAndPassword(_.email,_.password);if("emailLink"===_.signInMethod)return this._fromEmailAndCode(_.email,_.password,_.tenantId)}return null}_getIdTokenResponse(f){var _=this;return(0,y.Z)(function*(){switch(_.signInMethod){case"password":return ts(f,{returnSecureToken:!0,email:_._email,password:_._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",Bn);case"emailLink":return function fn(b,f){return zn.apply(this,arguments)}(f,{email:_._email,oobCode:_._password});default:qe(f,"internal-error")}})()}_linkToIdToken(f,_){var C=this;return(0,y.Z)(function*(){switch(C.signInMethod){case"password":return Bo(f,{idToken:_,returnSecureToken:!0,email:C._email,password:C._password});case"emailLink":return function ci(b,f){return ns.apply(this,arguments)}(f,{idToken:_,email:C._email,oobCode:C._password});default:qe(f,"internal-error")}})()}_getReauthenticationResolver(f){return this._getIdTokenResponse(f)}}function Zr(b,f){return Wn.apply(this,arguments)}function Wn(){return(Wn=(0,y.Z)(function*(b,f){return wt(b,"POST","/v1/accounts:signInWithIdp",Le(b,f))})).apply(this,arguments)}class Qr extends Vo{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(f){const _=new Qr(f.providerId,f.signInMethod);return f.idToken||f.accessToken?(f.idToken&&(_.idToken=f.idToken),f.accessToken&&(_.accessToken=f.accessToken),f.nonce&&!f.pendingToken&&(_.nonce=f.nonce),f.pendingToken&&(_.pendingToken=f.pendingToken)):f.oauthToken&&f.oauthTokenSecret?(_.accessToken=f.oauthToken,_.secret=f.oauthTokenSecret):qe("argument-error"),_}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(f){const _="string"==typeof f?JSON.parse(f):f,{providerId:C,signInMethod:G}=_,X=(0,Ee._T)(_,["providerId","signInMethod"]);if(!C||!G)return null;const ye=new Qr(C,G);return ye.idToken=X.idToken||void 0,ye.accessToken=X.accessToken||void 0,ye.secret=X.secret,ye.nonce=X.nonce,ye.pendingToken=X.pendingToken||null,ye}_getIdTokenResponse(f){return Zr(f,this.buildRequest())}_linkToIdToken(f,_){const C=this.buildRequest();return C.idToken=_,Zr(f,C)}_getReauthenticationResolver(f){const _=this.buildRequest();return _.autoCreate=!1,Zr(f,_)}buildRequest(){const f={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)f.pendingToken=this.pendingToken;else{const _={};this.idToken&&(_.id_token=this.idToken),this.accessToken&&(_.access_token=this.accessToken),this.secret&&(_.oauth_token_secret=this.secret),_.providerId=this.providerId,this.nonce&&!this.pendingToken&&(_.nonce=this.nonce),f.postBody=(0,ae.xO)(_)}return f}}function ei(){return(ei=(0,y.Z)(function*(b,f){return Ye(b,"POST","/v1/accounts:sendVerificationCode",Le(b,f))})).apply(this,arguments)}function ps(){return(ps=(0,y.Z)(function*(b,f){return wt(b,"POST","/v1/accounts:signInWithPhoneNumber",Le(b,f))})).apply(this,arguments)}function Un(){return(Un=(0,y.Z)(function*(b,f){const _=yield wt(b,"POST","/v1/accounts:signInWithPhoneNumber",Le(b,f));if(_.temporaryProof)throw Pn(b,"account-exists-with-different-credential",_);return _})).apply(this,arguments)}const co={USER_NOT_FOUND:"user-not-found"};function qi(){return(qi=(0,y.Z)(function*(b,f){return wt(b,"POST","/v1/accounts:signInWithPhoneNumber",Le(b,Object.assign(Object.assign({},f),{operation:"REAUTH"})),co)})).apply(this,arguments)}class gs extends Vo{constructor(f){super("phone","phone"),this.params=f}static _fromVerification(f,_){return new gs({verificationId:f,verificationCode:_})}static _fromTokenResponse(f,_){return new gs({phoneNumber:f,temporaryProof:_})}_getIdTokenResponse(f){return function uo(b,f){return ps.apply(this,arguments)}(f,this._makeVerificationRequest())}_linkToIdToken(f,_){return function ii(b,f){return Un.apply(this,arguments)}(f,Object.assign({idToken:_},this._makeVerificationRequest()))}_getReauthenticationResolver(f){return function Mi(b,f){return qi.apply(this,arguments)}(f,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:f,phoneNumber:_,verificationId:C,verificationCode:G}=this.params;return f&&_?{temporaryProof:f,phoneNumber:_}:{sessionInfo:C,code:G}}toJSON(){const f={providerId:this.providerId};return this.params.phoneNumber&&(f.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(f.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(f.verificationCode=this.params.verificationCode),this.params.verificationId&&(f.verificationId=this.params.verificationId),f}static fromJSON(f){"string"==typeof f&&(f=JSON.parse(f));const{verificationId:_,verificationCode:C,phoneNumber:G,temporaryProof:X}=f;return C||_||G||X?new gs({verificationId:_,verificationCode:C,phoneNumber:G,temporaryProof:X}):null}}class pi{constructor(f){var _,C,G,X,ye,Ge;const ht=(0,ae.zd)((0,ae.pd)(f)),Jt=null!==(_=ht.apiKey)&&void 0!==_?_:null,dn=null!==(C=ht.oobCode)&&void 0!==C?C:null,hn=function Hs(b){switch(b){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(G=ht.mode)&&void 0!==G?G:null);ce(Jt&&dn&&hn,"argument-error"),this.apiKey=Jt,this.operation=hn,this.code=dn,this.continueUrl=null!==(X=ht.continueUrl)&&void 0!==X?X:null,this.languageCode=null!==(ye=ht.languageCode)&&void 0!==ye?ye:null,this.tenantId=null!==(Ge=ht.tenantId)&&void 0!==Ge?Ge:null}static parseLink(f){const _=function ms(b){const f=(0,ae.zd)((0,ae.pd)(b)).link,_=f?(0,ae.zd)((0,ae.pd)(f)).deep_link_id:null,C=(0,ae.zd)((0,ae.pd)(b)).deep_link_id;return(C?(0,ae.zd)((0,ae.pd)(C)).link:null)||C||_||f||b}(f);try{return new pi(_)}catch{return null}}}let Ln=(()=>{class b{constructor(){this.providerId=b.PROVIDER_ID}static credential(_,C){return vr._fromEmailAndPassword(_,C)}static credentialWithLink(_,C){const G=pi.parseLink(C);return ce(G,"argument-error"),vr._fromEmailAndCode(_,G.code,G.tenantId)}}return b.PROVIDER_ID="password",b.EMAIL_PASSWORD_SIGN_IN_METHOD="password",b.EMAIL_LINK_SIGN_IN_METHOD="emailLink",b})();class Ti{constructor(f){this.providerId=f,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(f){this.defaultLanguageCode=f}setCustomParameters(f){return this.customParameters=f,this}getCustomParameters(){return this.customParameters}}class rs extends Ti{constructor(){super(...arguments),this.scopes=[]}addScope(f){return this.scopes.includes(f)||this.scopes.push(f),this}getScopes(){return[...this.scopes]}}class _s extends rs{static credentialFromJSON(f){const _="string"==typeof f?JSON.parse(f):f;return ce("providerId"in _&&"signInMethod"in _,"argument-error"),Qr._fromParams(_)}credential(f){return this._credential(Object.assign(Object.assign({},f),{nonce:f.rawNonce}))}_credential(f){return ce(f.idToken||f.accessToken,"argument-error"),Qr._fromParams(Object.assign(Object.assign({},f),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(f){return _s.oauthCredentialFromTaggedObject(f)}static credentialFromError(f){return _s.oauthCredentialFromTaggedObject(f.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{oauthIdToken:_,oauthAccessToken:C,oauthTokenSecret:G,pendingToken:X,nonce:ye,providerId:Ge}=f;if(!C&&!G&&!_&&!X||!Ge)return null;try{return new _s(Ge)._credential({idToken:_,accessToken:C,nonce:ye,pendingToken:X})}catch{return null}}}let vs=(()=>{class b extends rs{constructor(){super("facebook.com")}static credential(_){return Qr._fromParams({providerId:b.PROVIDER_ID,signInMethod:b.FACEBOOK_SIGN_IN_METHOD,accessToken:_})}static credentialFromResult(_){return b.credentialFromTaggedObject(_)}static credentialFromError(_){return b.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_||!("oauthAccessToken"in _)||!_.oauthAccessToken)return null;try{return b.credential(_.oauthAccessToken)}catch{return null}}}return b.FACEBOOK_SIGN_IN_METHOD="facebook.com",b.PROVIDER_ID="facebook.com",b})(),Ea=(()=>{class b extends rs{constructor(){super("google.com"),this.addScope("profile")}static credential(_,C){return Qr._fromParams({providerId:b.PROVIDER_ID,signInMethod:b.GOOGLE_SIGN_IN_METHOD,idToken:_,accessToken:C})}static credentialFromResult(_){return b.credentialFromTaggedObject(_)}static credentialFromError(_){return b.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{oauthIdToken:C,oauthAccessToken:G}=_;if(!C&&!G)return null;try{return b.credential(C,G)}catch{return null}}}return b.GOOGLE_SIGN_IN_METHOD="google.com",b.PROVIDER_ID="google.com",b})(),Ys=(()=>{class b extends rs{constructor(){super("github.com")}static credential(_){return Qr._fromParams({providerId:b.PROVIDER_ID,signInMethod:b.GITHUB_SIGN_IN_METHOD,accessToken:_})}static credentialFromResult(_){return b.credentialFromTaggedObject(_)}static credentialFromError(_){return b.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_||!("oauthAccessToken"in _)||!_.oauthAccessToken)return null;try{return b.credential(_.oauthAccessToken)}catch{return null}}}return b.GITHUB_SIGN_IN_METHOD="github.com",b.PROVIDER_ID="github.com",b})();class Hr extends Vo{constructor(f,_){super(f,f),this.pendingToken=_}_getIdTokenResponse(f){return Zr(f,this.buildRequest())}_linkToIdToken(f,_){const C=this.buildRequest();return C.idToken=_,Zr(f,C)}_getReauthenticationResolver(f){const _=this.buildRequest();return _.autoCreate=!1,Zr(f,_)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(f){const _="string"==typeof f?JSON.parse(f):f,{providerId:C,signInMethod:G,pendingToken:X}=_;return C&&G&&X&&C===G?new Hr(C,X):null}static _create(f,_){return new Hr(f,_)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class lr extends Ti{constructor(f){ce(f.startsWith("saml."),"argument-error"),super(f)}static credentialFromResult(f){return lr.samlCredentialFromTaggedObject(f)}static credentialFromError(f){return lr.samlCredentialFromTaggedObject(f.customData||{})}static credentialFromJSON(f){const _=Hr.fromJSON(f);return ce(_,"argument-error"),_}static samlCredentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{pendingToken:_,providerId:C}=f;if(!_||!C)return null;try{return Hr._create(C,_)}catch{return null}}}let Ui=(()=>{class b extends rs{constructor(){super("twitter.com")}static credential(_,C){return Qr._fromParams({providerId:b.PROVIDER_ID,signInMethod:b.TWITTER_SIGN_IN_METHOD,oauthToken:_,oauthTokenSecret:C})}static credentialFromResult(_){return b.credentialFromTaggedObject(_)}static credentialFromError(_){return b.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{oauthAccessToken:C,oauthTokenSecret:G}=_;if(!C||!G)return null;try{return b.credential(C,G)}catch{return null}}}return b.TWITTER_SIGN_IN_METHOD="twitter.com",b.PROVIDER_ID="twitter.com",b})();function Fs(b,f){return Ls.apply(this,arguments)}function Ls(){return(Ls=(0,y.Z)(function*(b,f){return wt(b,"POST","/v1/accounts:signUp",Le(b,f))})).apply(this,arguments)}class Lr{constructor(f){this.user=f.user,this.providerId=f.providerId,this._tokenResponse=f._tokenResponse,this.operationType=f.operationType}static _fromIdTokenResponse(f,_,C,G=!1){return(0,y.Z)(function*(){const X=yield re._fromIdTokenResponse(f,C,G),ye=Ss(C);return new Lr({user:X,providerId:ye,_tokenResponse:C,operationType:_})})()}static _forOperation(f,_,C){return(0,y.Z)(function*(){yield f._updateTokensIfNecessary(C,!0);const G=Ss(C);return new Lr({user:f,providerId:G,_tokenResponse:C,operationType:_})})()}}function Ss(b){return b.providerId?b.providerId:"phoneNumber"in b?"phone":null}function lo(){return(lo=(0,y.Z)(function*(b){var f;const _=Dn(b);if(yield _._initializationPromise,null!==(f=_.currentUser)&&void 0!==f&&f.isAnonymous)return new Lr({user:_.currentUser,providerId:null,operationType:"signIn"});const C=yield Fs(_,{returnSecureToken:!0}),G=yield Lr._fromIdTokenResponse(_,"signIn",C,!0);return yield _._updateCurrentUser(G.user),G})).apply(this,arguments)}class Uo extends ae.ZR{constructor(f,_,C,G){var X;super(_.code,_.message),this.operationType=C,this.user=G,Object.setPrototypeOf(this,Uo.prototype),this.customData={appName:f.name,tenantId:null!==(X=f.tenantId)&&void 0!==X?X:void 0,_serverResponse:_.customData._serverResponse,operationType:C}}static _fromErrorAndOperation(f,_,C,G){return new Uo(f,_,C,G)}}function _c(b,f,_,C){return("reauthenticate"===f?_._getReauthenticationResolver(b):_._getIdTokenResponse(b)).catch(X=>{throw"auth/multi-factor-auth-required"===X.code?Uo._fromErrorAndOperation(b,X,f,C):X})}function jo(b){return new Set(b.map(({providerId:f})=>f).filter(f=>!!f))}function Do(){return Do=(0,y.Z)(function*(b,f){const _=(0,ae.m9)(b);yield yr(!0,_,f);const{providerUserInfo:C}=yield function sn(b,f){return At.apply(this,arguments)}(_.auth,{idToken:yield _.getIdToken(),deleteProvider:[f]}),G=jo(C||[]);return _.providerData=_.providerData.filter(X=>G.has(X.providerId)),G.has("phone")||(_.phoneNumber=null),yield _.auth._persistUserIfCurrent(_),_}),Do.apply(this,arguments)}function Ta(b,f){return Co.apply(this,arguments)}function Co(){return(Co=(0,y.Z)(function*(b,f,_=!1){const C=yield mn(b,f._linkToIdToken(b.auth,yield b.getIdToken()),_);return Lr._forOperation(b,"link",C)})).apply(this,arguments)}function yr(b,f,_){return Go.apply(this,arguments)}function Go(){return(Go=(0,y.Z)(function*(b,f,_){yield Xr(f);const G=!1===b?"provider-already-linked":"no-such-provider";ce(jo(f.providerData).has(_)===b,f.auth,G)})).apply(this,arguments)}function ra(b,f){return W.apply(this,arguments)}function W(){return(W=(0,y.Z)(function*(b,f,_=!1){const{auth:C}=b,G="reauthenticate";try{const X=yield mn(b,_c(C,G,f,b),_);ce(X.idToken,C,"internal-error");const ye=Gi(X.idToken);ce(ye,C,"internal-error");const{sub:Ge}=ye;return ce(b.uid===Ge,C,"user-mismatch"),Lr._forOperation(b,G,X)}catch(X){throw"auth/user-not-found"===X?.code&&qe(C,"user-mismatch"),X}})).apply(this,arguments)}function q(b,f){return B.apply(this,arguments)}function B(){return(B=(0,y.Z)(function*(b,f,_=!1){const C="signIn",G=yield _c(b,C,f),X=yield Lr._fromIdTokenResponse(b,C,G);return _||(yield b._updateCurrentUser(X.user)),X})).apply(this,arguments)}function ie(b,f){return we.apply(this,arguments)}function we(){return(we=(0,y.Z)(function*(b,f){return q(Dn(b),f)})).apply(this,arguments)}function Xt(b,f){return In.apply(this,arguments)}function In(){return(In=(0,y.Z)(function*(b,f){const _=(0,ae.m9)(b);return yield yr(!1,_,f.providerId),Ta(_,f)})).apply(this,arguments)}function xi(b,f){return is.apply(this,arguments)}function is(){return(is=(0,y.Z)(function*(b,f){return ra((0,ae.m9)(b),f)})).apply(this,arguments)}function fo(){return(fo=(0,y.Z)(function*(b,f){return wt(b,"POST","/v1/accounts:signInWithCustomToken",Le(b,f))})).apply(this,arguments)}function ss(){return ss=(0,y.Z)(function*(b,f){const _=Dn(b),C=yield function ho(b,f){return fo.apply(this,arguments)}(_,{token:f,returnSecureToken:!0}),G=yield Lr._fromIdTokenResponse(_,"signIn",C);return yield _._updateCurrentUser(G.user),G}),ss.apply(this,arguments)}class Ao{constructor(f,_){this.factorId=f,this.uid=_.mfaEnrollmentId,this.enrollmentTime=new Date(_.enrolledAt).toUTCString(),this.displayName=_.displayName}static _fromServerResponse(f,_){return"phoneInfo"in _?Tu._fromServerResponse(f,_):"totpInfo"in _?bi._fromServerResponse(f,_):qe(f,"internal-error")}}class Tu extends Ao{constructor(f){super("phone",f),this.phoneNumber=f.phoneInfo}static _fromServerResponse(f,_){return new Tu(_)}}class bi extends Ao{constructor(f){super("totp",f)}static _fromServerResponse(f,_){return new bi(_)}}function Rs(b,f,_){var C;ce((null===(C=_.url)||void 0===C?void 0:C.length)>0,b,"invalid-continue-uri"),ce(typeof _.dynamicLinkDomain>"u"||_.dynamicLinkDomain.length>0,b,"invalid-dynamic-link-domain"),f.continueUrl=_.url,f.dynamicLinkDomain=_.dynamicLinkDomain,f.canHandleCodeInApp=_.handleCodeInApp,_.iOS&&(ce(_.iOS.bundleId.length>0,b,"missing-ios-bundle-id"),f.iOSBundleId=_.iOS.bundleId),_.android&&(ce(_.android.packageName.length>0,b,"missing-android-pkg-name"),f.androidInstallApp=_.android.installApp,f.androidMinimumVersionCode=_.android.minimumVersion,f.androidPackageName=_.android.packageName)}function Ki(b){return ia.apply(this,arguments)}function ia(){return(ia=(0,y.Z)(function*(b){const f=Dn(b);f._getPasswordPolicyInternal()&&(yield f._updatePasswordPolicy())})).apply(this,arguments)}function So(){return(So=(0,y.Z)(function*(b,f,_){const C=Dn(b),G={requestType:"PASSWORD_RESET",email:f,clientType:"CLIENT_TYPE_WEB"};_&&Rs(C,G,_),yield ts(C,G,"getOobCode",Cs)})).apply(this,arguments)}function po(){return po=(0,y.Z)(function*(b,f,_){yield Ba((0,ae.m9)(b),{oobCode:f,newPassword:_}).catch(function(){var C=(0,y.Z)(function*(G){throw"auth/password-does-not-meet-requirements"===G.code&&Ki(b),G});return function(G){return C.apply(this,arguments)}}())}),po.apply(this,arguments)}function Ro(){return Ro=(0,y.Z)(function*(b,f){yield function Ia(b,f){return Ds.apply(this,arguments)}((0,ae.m9)(b),{oobCode:f})}),Ro.apply(this,arguments)}function bu(b,f){return ja.apply(this,arguments)}function ja(){return(ja=(0,y.Z)(function*(b,f){const _=(0,ae.m9)(b),C=yield Ba(_,{oobCode:f}),G=C.requestType;switch(ce(G,_,"internal-error"),G){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":ce(C.newEmail,_,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":ce(C.mfaInfo,_,"internal-error");default:ce(C.email,_,"internal-error")}let X=null;return C.mfaInfo&&(X=Ao._fromServerResponse(Dn(_),C.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===C.requestType?C.newEmail:C.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===C.requestType?C.email:C.newEmail)||null,multiFactorInfo:X},operation:G}})).apply(this,arguments)}function Ga(){return(Ga=(0,y.Z)(function*(b,f){const{data:_}=yield bu((0,ae.m9)(b),f);return _.email})).apply(this,arguments)}function Zs(){return(Zs=(0,y.Z)(function*(b,f,_){const C=Dn(b),ye=yield ts(C,{returnSecureToken:!0,email:f,password:_,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Fs).catch(ht=>{throw"auth/password-does-not-meet-requirements"===ht.code&&Ki(b),ht}),Ge=yield Lr._fromIdTokenResponse(C,"signIn",ye);return yield C._updateCurrentUser(Ge.user),Ge})).apply(this,arguments)}function Ho(){return(Ho=(0,y.Z)(function*(b,f,_){const C=Dn(b),G={requestType:"EMAIL_SIGNIN",email:f,clientType:"CLIENT_TYPE_WEB"};(function X(ye,Ge){ce(Ge.handleCodeInApp,C,"argument-error"),Ge&&Rs(C,ye,Ge)})(G,_),yield ts(C,G,"getOobCode",Ks)})).apply(this,arguments)}function su(){return(su=(0,y.Z)(function*(b,f,_){const C=(0,ae.m9)(b),G=Ln.credentialWithLink(f,_||Hn());return ce(G._tenantId===(C.tenantId||null),C,"tenant-id-mismatch"),ie(C,G)})).apply(this,arguments)}function Ha(){return(Ha=(0,y.Z)(function*(b,f){return Ye(b,"POST","/v1/accounts:createAuthUri",Le(b,f))})).apply(this,arguments)}function ba(){return ba=(0,y.Z)(function*(b,f){const C={identifier:f,continueUri:bn()?Hn():"http://localhost"},{signinMethods:G}=yield function Wc(b,f){return Ha.apply(this,arguments)}((0,ae.m9)(b),C);return G||[]}),ba.apply(this,arguments)}function Js(){return Js=(0,y.Z)(function*(b,f){const _=(0,ae.m9)(b),G={requestType:"VERIFY_EMAIL",idToken:yield b.getIdToken()};f&&Rs(_.auth,G,f);const{email:X}=yield function Er(b,f){return ks.apply(this,arguments)}(_.auth,G);X!==b.email&&(yield b.reload())}),Js.apply(this,arguments)}function Yi(){return Yi=(0,y.Z)(function*(b,f,_){const C=(0,ae.m9)(b),X={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield b.getIdToken(),newEmail:f};_&&Rs(C.auth,X,_);const{email:ye}=yield function Cr(b,f){return Lt.apply(this,arguments)}(C.auth,X);ye!==b.email&&(yield b.reload())}),Yi.apply(this,arguments)}function O(){return(O=(0,y.Z)(function*(b,f){return Ye(b,"POST","/v1/accounts:update",f)})).apply(this,arguments)}function U(){return U=(0,y.Z)(function*(b,{displayName:f,photoURL:_}){if(void 0===f&&void 0===_)return;const C=(0,ae.m9)(b),X={idToken:yield C.getIdToken(),displayName:f,photoUrl:_,returnSecureToken:!0},ye=yield mn(C,function Hu(b,f){return O.apply(this,arguments)}(C.auth,X));C.displayName=ye.displayName||null,C.photoURL=ye.photoUrl||null;const Ge=C.providerData.find(({providerId:ht})=>"password"===ht);Ge&&(Ge.displayName=C.displayName,Ge.photoURL=C.photoURL),yield C._updateTokensIfNecessary(ye)}),U.apply(this,arguments)}function Qe(b,f,_){return ct.apply(this,arguments)}function ct(){return(ct=(0,y.Z)(function*(b,f,_){const{auth:C}=b,X={idToken:yield b.getIdToken(),returnSecureToken:!0};f&&(X.email=f),_&&(X.password=_);const ye=yield mn(b,Bo(C,X));yield b._updateTokensIfNecessary(ye,!0)})).apply(this,arguments)}class Yn{constructor(f,_,C={}){this.isNewUser=f,this.providerId=_,this.profile=C}}class rr extends Yn{constructor(f,_,C,G){super(f,_,C),this.username=G}}class qn extends Yn{constructor(f,_){super(f,"facebook.com",_)}}class yn extends rr{constructor(f,_){super(f,"github.com",_,"string"==typeof _?.login?_?.login:null)}}class Jr extends Yn{constructor(f,_){super(f,"google.com",_)}}class Tr extends rr{constructor(f,_,C){super(f,"twitter.com",_,C)}}function gi(b){const{user:f,_tokenResponse:_}=b;return f.isAnonymous&&!_?{providerId:null,isNewUser:!1,profile:null}:function an(b){var f,_;if(!b)return null;const{providerId:C}=b,G=b.rawUserInfo?JSON.parse(b.rawUserInfo):{},X=b.isNewUser||"identitytoolkit#SignupNewUserResponse"===b.kind;if(!C&&b?.idToken){const ye=null===(_=null===(f=Gi(b.idToken))||void 0===f?void 0:f.firebase)||void 0===_?void 0:_.sign_in_provider;if(ye)return new Yn(X,"anonymous"!==ye&&"custom"!==ye?ye:null)}if(!C)return null;switch(C){case"facebook.com":return new qn(X,G);case"github.com":return new yn(X,G);case"google.com":return new Jr(X,G);case"twitter.com":return new Tr(X,G,b.screenName||null);case"custom":case"anonymous":return new Yn(X,null);default:return new Yn(X,C,G)}}(_)}class mo{constructor(f,_,C){this.type=f,this.credential=_,this.user=C}static _fromIdtoken(f,_){return new mo("enroll",f,_)}static _fromMfaPendingCredential(f){return new mo("signin",f)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(f){var _,C;if(f?.multiFactorSession){if(null!==(_=f.multiFactorSession)&&void 0!==_&&_.pendingCredential)return mo._fromMfaPendingCredential(f.multiFactorSession.pendingCredential);if(null!==(C=f.multiFactorSession)&&void 0!==C&&C.idToken)return mo._fromIdtoken(f.multiFactorSession.idToken)}return null}}class zo{constructor(f,_,C){this.session=f,this.hints=_,this.signInResolver=C}static _fromError(f,_){const C=Dn(f),G=_.customData._serverResponse,X=(G.mfaInfo||[]).map(Ge=>Ao._fromServerResponse(C,Ge));ce(G.mfaPendingCredential,C,"internal-error");const ye=mo._fromMfaPendingCredential(G.mfaPendingCredential);return new zo(ye,X,function(){var Ge=(0,y.Z)(function*(ht){const Jt=yield ht._process(C,ye);delete G.mfaInfo,delete G.mfaPendingCredential;const dn=Object.assign(Object.assign({},G),{idToken:Jt.idToken,refreshToken:Jt.refreshToken});switch(_.operationType){case"signIn":const hn=yield Lr._fromIdTokenResponse(C,_.operationType,dn);return yield C._updateCurrentUser(hn.user),hn;case"reauthenticate":return ce(_.user,C,"internal-error"),Lr._forOperation(_.user,_.operationType,dn);default:qe(C,"internal-error")}});return function(ht){return Ge.apply(this,arguments)}}())}resolveSignIn(f){var _=this;return(0,y.Z)(function*(){return _.signInResolver(f)})()}}class Et{constructor(f){this.user=f,this.enrolledFactors=[],f._onReload(_=>{_.mfaInfo&&(this.enrolledFactors=_.mfaInfo.map(C=>Ao._fromServerResponse(f.auth,C)))})}static _fromUser(f){return new Et(f)}getSession(){var f=this;return(0,y.Z)(function*(){return mo._fromIdtoken(yield f.user.getIdToken(),f.user)})()}enroll(f,_){var C=this;return(0,y.Z)(function*(){const G=f,X=yield C.getSession(),ye=yield mn(C.user,G._process(C.user.auth,X,_));return yield C.user._updateTokensIfNecessary(ye),C.user.reload()})()}unenroll(f){var _=this;return(0,y.Z)(function*(){const C="string"==typeof f?f:f.uid,G=yield _.user.getIdToken();try{const X=yield mn(_.user,function $a(b,f){return Ye(b,"POST","/v2/accounts/mfaEnrollment:withdraw",Le(b,f))}(_.user.auth,{idToken:G,mfaEnrollmentId:C}));_.enrolledFactors=_.enrolledFactors.filter(({uid:ye})=>ye!==C),yield _.user._updateTokensIfNecessary(X),yield _.user.reload()}catch(X){throw X}})()}}const mi=new WeakMap,sa="__sak";class tn{constructor(f,_){this.storageRetriever=f,this.type=_}_isAvailable(){try{return this.storage?(this.storage.setItem(sa,"1"),this.storage.removeItem(sa),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(f,_){return this.storage.setItem(f,JSON.stringify(_)),Promise.resolve()}_get(f){const _=this.storage.getItem(f);return Promise.resolve(_?JSON.parse(_):null)}_remove(f){return this.storage.removeItem(f),Promise.resolve()}get storage(){return this.storageRetriever()}}const vt=(()=>{class b extends tn{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(_,C)=>this.onStorageEvent(_,C),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function pn(){const b=(0,ae.z$)();return wr(b)||mt(b)}()&&function Yr(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=Vn(),this._shouldAllowMigration=!0}forAllChangedKeys(_){for(const C of Object.keys(this.listeners)){const G=this.storage.getItem(C),X=this.localCache[C];G!==X&&_(C,X,G)}}onStorageEvent(_,C=!1){if(!_.key)return void this.forAllChangedKeys((Ge,ht,Jt)=>{this.notifyListeners(Ge,Jt)});const G=_.key;if(C?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const Ge=this.storage.getItem(G);if(_.newValue!==Ge)null!==_.newValue?this.storage.setItem(G,_.newValue):this.storage.removeItem(G);else if(this.localCache[G]===_.newValue&&!C)return}const X=()=>{const Ge=this.storage.getItem(G);!C&&this.localCache[G]===Ge||this.notifyListeners(G,Ge)},ye=this.storage.getItem(G);!function jt(){return(0,ae.w1)()&&10===document.documentMode}()||ye===_.newValue||_.newValue===_.oldValue?X():setTimeout(X,10)}notifyListeners(_,C){this.localCache[_]=C;const G=this.listeners[_];if(G)for(const X of Array.from(G))X(C&&JSON.parse(C))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((_,C,G)=>{this.onStorageEvent(new StorageEvent("storage",{key:_,oldValue:C,newValue:G}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(_,C){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[_]||(this.listeners[_]=new Set,this.localCache[_]=this.storage.getItem(_)),this.listeners[_].add(C)}_removeListener(_,C){this.listeners[_]&&(this.listeners[_].delete(C),0===this.listeners[_].size&&delete this.listeners[_]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(_,C){var G=()=>super._set,X=this;return(0,y.Z)(function*(){yield G().call(X,_,C),X.localCache[_]=JSON.stringify(C)})()}_get(_){var C=()=>super._get,G=this;return(0,y.Z)(function*(){const X=yield C().call(G,_);return G.localCache[_]=JSON.stringify(X),X})()}_remove(_){var C=()=>super._remove,G=this;return(0,y.Z)(function*(){yield C().call(G,_),delete G.localCache[_]})()}}return b.type="LOCAL",b})(),Ca=(()=>{class b extends tn{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(_,C){}_removeListener(_,C){}}return b.type="SESSION",b})();let Cu=(()=>{class b{constructor(_){this.eventTarget=_,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(_){const C=this.receivers.find(X=>X.isListeningto(_));if(C)return C;const G=new b(_);return this.receivers.push(G),G}isListeningto(_){return this.eventTarget===_}handleEvent(_){var C=this;return(0,y.Z)(function*(){const G=_,{eventId:X,eventType:ye,data:Ge}=G.data,ht=C.handlersMap[ye];if(!ht?.size)return;G.ports[0].postMessage({status:"ack",eventId:X,eventType:ye});const Jt=Array.from(ht).map(function(){var hn=(0,y.Z)(function*(Si){return Si(G.origin,Ge)});return function(Si){return hn.apply(this,arguments)}}()),dn=yield function Dd(b){return Promise.all(b.map(function(){var f=(0,y.Z)(function*(_){try{return{fulfilled:!0,value:yield _}}catch(C){return{fulfilled:!1,reason:C}}});return function(_){return f.apply(this,arguments)}}()))}(Jt);G.ports[0].postMessage({status:"done",eventId:X,eventType:ye,response:dn})})()}_subscribe(_,C){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[_]||(this.handlersMap[_]=new Set),this.handlersMap[_].add(C)}_unsubscribe(_,C){this.handlersMap[_]&&C&&this.handlersMap[_].delete(C),(!C||0===this.handlersMap[_].size)&&delete this.handlersMap[_],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return b.receivers=[],b})();function za(b="",f=10){let _="";for(let C=0;C<f;C++)_+=Math.floor(10*Math.random());return b+_}class El{constructor(f){this.target=f,this.handlers=new Set}removeMessageHandler(f){f.messageChannel&&(f.messageChannel.port1.removeEventListener("message",f.onMessage),f.messageChannel.port1.close()),this.handlers.delete(f)}_send(f,_,C=50){var G=this;return(0,y.Z)(function*(){const X=typeof MessageChannel<"u"?new MessageChannel:null;if(!X)throw new Error("connection_unavailable");let ye,Ge;return new Promise((ht,Jt)=>{const dn=za("",20);X.port1.start();const hn=setTimeout(()=>{Jt(new Error("unsupported_event"))},C);Ge={messageChannel:X,onMessage(Si){const ko=Si;if(ko.data.eventId===dn)switch(ko.data.status){case"ack":clearTimeout(hn),ye=setTimeout(()=>{Jt(new Error("timeout"))},3e3);break;case"done":clearTimeout(ye),ht(ko.data.response);break;default:clearTimeout(hn),clearTimeout(ye),Jt(new Error("invalid_response"))}}},G.handlers.add(Ge),X.port1.addEventListener("message",Ge.onMessage),G.target.postMessage({eventType:f,eventId:dn,data:_},[X.port2])}).finally(()=>{Ge&&G.removeMessageHandler(Ge)})})()}}function ir(){return window}function Tl(){return typeof ir().WorkerGlobalScope<"u"&&"function"==typeof ir().importScripts}function dr(){return(dr=(0,y.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const ki="firebaseLocalStorageDb",Rr="firebaseLocalStorage",rn="fbase_key";class Xs{constructor(f){this.request=f}toPromise(){return new Promise((f,_)=>{this.request.addEventListener("success",()=>{f(this.request.result)}),this.request.addEventListener("error",()=>{_(this.request.error)})})}}function Xn(b,f){return b.transaction([Rr],f?"readwrite":"readonly").objectStore(Rr)}function si(){const b=indexedDB.open(ki,1);return new Promise((f,_)=>{b.addEventListener("error",()=>{_(b.error)}),b.addEventListener("upgradeneeded",()=>{const C=b.result;try{C.createObjectStore(Rr,{keyPath:rn})}catch(G){_(G)}}),b.addEventListener("success",(0,y.Z)(function*(){const C=b.result;C.objectStoreNames.contains(Rr)?f(C):(C.close(),yield function Ad(){const b=indexedDB.deleteDatabase(ki);return new Xs(b).toPromise()}(),f(yield si()))}))})}function $t(b,f,_){return Di.apply(this,arguments)}function Di(){return(Di=(0,y.Z)(function*(b,f,_){const C=Xn(b,!0).put({[rn]:f,value:_});return new Xs(C).toPromise()})).apply(this,arguments)}function Oo(){return(Oo=(0,y.Z)(function*(b,f){const _=Xn(b,!1).get(f),C=yield new Xs(_).toPromise();return void 0===C?null:C.value})).apply(this,arguments)}function Au(b,f){const _=Xn(b,!0).delete(f);return new Xs(_).toPromise()}const zu=(()=>{class b{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var _=this;return(0,y.Z)(function*(){return _.db||(_.db=yield si()),_.db})()}_withRetries(_){var C=this;return(0,y.Z)(function*(){let G=0;for(;;)try{const X=yield C._openDb();return yield _(X)}catch(X){if(G++>3)throw X;C.db&&(C.db.close(),C.db=void 0)}})()}initializeServiceWorkerMessaging(){var _=this;return(0,y.Z)(function*(){return Tl()?_.initializeReceiver():_.initializeSender()})()}initializeReceiver(){var _=this;return(0,y.Z)(function*(){_.receiver=Cu._getInstance(function jn(){return Tl()?self:null}()),_.receiver._subscribe("keyChanged",function(){var C=(0,y.Z)(function*(G,X){return{keyProcessed:(yield _._poll()).includes(X.key)}});return function(G,X){return C.apply(this,arguments)}}()),_.receiver._subscribe("ping",function(){var C=(0,y.Z)(function*(G,X){return["keyChanged"]});return function(G,X){return C.apply(this,arguments)}}())})()}initializeSender(){var _=this;return(0,y.Z)(function*(){var C,G;if(_.activeServiceWorker=yield function bt(){return dr.apply(this,arguments)}(),!_.activeServiceWorker)return;_.sender=new El(_.activeServiceWorker);const X=yield _.sender._send("ping",{},800);X&&null!==(C=X[0])&&void 0!==C&&C.fulfilled&&null!==(G=X[0])&&void 0!==G&&G.value.includes("keyChanged")&&(_.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(_){var C=this;return(0,y.Z)(function*(){if(C.sender&&C.activeServiceWorker&&function Cd(){var b;return(null===(b=navigator?.serviceWorker)||void 0===b?void 0:b.controller)||null}()===C.activeServiceWorker)try{yield C.sender._send("keyChanged",{key:_},C.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,y.Z)(function*(){try{if(!indexedDB)return!1;const _=yield si();return yield $t(_,sa,"1"),yield Au(_,sa),!0}catch{}return!1})()}_withPendingWrite(_){var C=this;return(0,y.Z)(function*(){C.pendingWrites++;try{yield _()}finally{C.pendingWrites--}})()}_set(_,C){var G=this;return(0,y.Z)(function*(){return G._withPendingWrite((0,y.Z)(function*(){return yield G._withRetries(X=>$t(X,_,C)),G.localCache[_]=C,G.notifyServiceWorker(_)}))})()}_get(_){var C=this;return(0,y.Z)(function*(){const G=yield C._withRetries(X=>function Aa(b,f){return Oo.apply(this,arguments)}(X,_));return C.localCache[_]=G,G})()}_remove(_){var C=this;return(0,y.Z)(function*(){return C._withPendingWrite((0,y.Z)(function*(){return yield C._withRetries(G=>Au(G,_)),delete C.localCache[_],C.notifyServiceWorker(_)}))})()}_poll(){var _=this;return(0,y.Z)(function*(){const C=yield _._withRetries(ye=>{const Ge=Xn(ye,!1).getAll();return new Xs(Ge).toPromise()});if(!C)return[];if(0!==_.pendingWrites)return[];const G=[],X=new Set;for(const{fbase_key:ye,value:Ge}of C)X.add(ye),JSON.stringify(_.localCache[ye])!==JSON.stringify(Ge)&&(_.notifyListeners(ye,Ge),G.push(ye));for(const ye of Object.keys(_.localCache))_.localCache[ye]&&!X.has(ye)&&(_.notifyListeners(ye,null),G.push(ye));return G})()}notifyListeners(_,C){this.localCache[_]=C;const G=this.listeners[_];if(G)for(const X of Array.from(G))X(C)}startPolling(){var _=this;this.stopPolling(),this.pollTimer=setInterval((0,y.Z)(function*(){return _._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(_,C){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[_]||(this.listeners[_]=new Set,this._get(_)),this.listeners[_].add(C)}_removeListener(_,C){this.listeners[_]&&(this.listeners[_].delete(C),0===this.listeners[_].size&&delete this.listeners[_]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return b.type="LOCAL",b})(),A=1e12;class L{constructor(f){this.auth=f,this.counter=A,this._widgets=new Map}render(f,_){const C=this.counter;return this._widgets.set(C,new k(f,this.auth.name,_||{})),this.counter++,C}reset(f){var _;const C=f||A;null===(_=this._widgets.get(C))||void 0===_||_.delete(),this._widgets.delete(C)}getResponse(f){var _;return(null===(_=this._widgets.get(f||A))||void 0===_?void 0:_.getResponse())||""}execute(f){var _=this;return(0,y.Z)(function*(){var C;return null===(C=_._widgets.get(f||A))||void 0===C||C.execute(),""})()}}class k{constructor(f,_,C){this.params=C,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const G="string"==typeof f?document.getElementById(f):f;ce(G,"argument-error",{appName:_}),this.container=G,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function J(b){const f=[],_="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let C=0;C<b;C++)f.push(_.charAt(Math.floor(62*Math.random())));return f.join("")}(50);const{callback:f,"expired-callback":_}=this.params;if(f)try{f(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,_)try{_()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const de=$i("rcb"),Je=new Ft(3e4,6e4);class Ut{constructor(){var f;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(f=ir().grecaptcha)||void 0===f||!f.render)}load(f,_=""){return ce(function Kn(b){return b.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(b)}(_),f,"argument-error"),this.shouldResolveImmediately(_)&&_e(ir().grecaptcha)?Promise.resolve(ir().grecaptcha):new Promise((C,G)=>{const X=ir().setTimeout(()=>{G(Ne(f,"network-request-failed"))},Je.get());ir()[de]=()=>{ir().clearTimeout(X),delete ir()[de];const Ge=ir().grecaptcha;if(!Ge||!_e(Ge))return void G(Ne(f,"internal-error"));const ht=Ge.render;Ge.render=(Jt,dn)=>{const hn=ht(Jt,dn);return this.counter++,hn},this.hostLanguage=_,C(Ge)},es(`https://www.google.com/recaptcha/api.js??${(0,ae.xO)({onload:de,render:"explicit",hl:_})}`).catch(()=>{clearTimeout(X),G(Ne(f,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(f){var _;return!(null===(_=ir().grecaptcha)||void 0===_||!_.render)&&(f===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class hr{load(f){return(0,y.Z)(function*(){return new L(f)})()}clearedOneInstance(){}}const An="recaptcha",Bs={theme:"light",type:"image"};class ti{constructor(f,_,C=Object.assign({},Bs)){this.parameters=C,this.type=An,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Dn(f),this.isInvisible="invisible"===this.parameters.size,ce(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const G="string"==typeof _?document.getElementById(_):_;ce(G,this.auth,"argument-error"),this.container=G,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new hr:new Ut,this.validateStartingState()}verify(){var f=this;return(0,y.Z)(function*(){f.assertNotDestroyed();const _=yield f.render(),C=f.getAssertedRecaptcha();return C.getResponse(_)||new Promise(X=>{const ye=Ge=>{Ge&&(f.tokenChangeListeners.delete(ye),X(Ge))};f.tokenChangeListeners.add(ye),f.isInvisible&&C.execute(_)})})()}render(){try{this.assertNotDestroyed()}catch(f){return Promise.reject(f)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(f=>{throw this.renderPromise=null,f})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(f=>{this.container.removeChild(f)})}validateStartingState(){ce(!this.parameters.sitekey,this.auth,"argument-error"),ce(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),ce(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(f){return _=>{if(this.tokenChangeListeners.forEach(C=>C(_)),"function"==typeof f)f(_);else if("string"==typeof f){const C=ir()[f];"function"==typeof C&&C(_)}}}assertNotDestroyed(){ce(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var f=this;return(0,y.Z)(function*(){if(yield f.init(),!f.widgetId){let _=f.container;if(!f.isInvisible){const C=document.createElement("div");_.appendChild(C),_=C}f.widgetId=f.getAssertedRecaptcha().render(_,f.parameters)}return f.widgetId})()}init(){var f=this;return(0,y.Z)(function*(){ce(bn()&&!Tl(),f.auth,"internal-error"),yield function Wu(){let b=null;return new Promise(f=>{"complete"!==document.readyState?(b=()=>f(),window.addEventListener("load",b)):f()}).catch(f=>{throw b&&window.removeEventListener("load",b),f})}(),f.recaptcha=yield f._recaptchaLoader.load(f.auth,f.auth.languageCode||void 0);const _=yield function at(b){return pt.apply(this,arguments)}(f.auth);ce(_,f.auth,"internal-error"),f.parameters.sitekey=_})()}getAssertedRecaptcha(){return ce(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class Zi{constructor(f,_){this.verificationId=f,this.onConfirmation=_}confirm(f){const _=gs._fromVerification(this.verificationId,f);return this.onConfirmation(_)}}function Ra(){return(Ra=(0,y.Z)(function*(b,f,_){const C=Dn(b),G=yield $s(C,f,(0,ae.m9)(_));return new Zi(G,X=>ie(C,X))})).apply(this,arguments)}function Nr(){return(Nr=(0,y.Z)(function*(b,f,_){const C=(0,ae.m9)(b);yield yr(!1,C,"phone");const G=yield $s(C.auth,f,(0,ae.m9)(_));return new Zi(G,X=>Xt(C,X))})).apply(this,arguments)}function Wo(){return(Wo=(0,y.Z)(function*(b,f,_){const C=(0,ae.m9)(b),G=yield $s(C.auth,f,(0,ae.m9)(_));return new Zi(G,X=>xi(C,X))})).apply(this,arguments)}function $s(b,f,_){return oa.apply(this,arguments)}function oa(){return oa=(0,y.Z)(function*(b,f,_){var C;const G=yield _.verify();try{let X;if(ce("string"==typeof G,b,"argument-error"),ce(_.type===An,b,"argument-error"),X="string"==typeof f?{phoneNumber:f}:f,"session"in X){const ye=X.session;if("phoneNumber"in X)return ce("enroll"===ye.type,b,"internal-error"),(yield function Vr(b,f){return Ye(b,"POST","/v2/accounts/mfaEnrollment:start",Le(b,f))}(b,{idToken:ye.credential,phoneEnrollmentInfo:{phoneNumber:X.phoneNumber,recaptchaToken:G}})).phoneSessionInfo.sessionInfo;{ce("signin"===ye.type,b,"internal-error");const Ge=(null===(C=X.multiFactorHint)||void 0===C?void 0:C.uid)||X.multiFactorUid;return ce(Ge,b,"missing-multi-factor-info"),(yield function Jl(b,f){return Ye(b,"POST","/v2/accounts/mfaSignIn:start",Le(b,f))}(b,{mfaPendingCredential:ye.credential,mfaEnrollmentId:Ge,phoneSignInInfo:{recaptchaToken:G}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:ye}=yield function vn(b,f){return ei.apply(this,arguments)}(b,{phoneNumber:X.phoneNumber,recaptchaToken:G});return ye}}finally{_._reset()}}),oa.apply(this,arguments)}function uu(){return(uu=(0,y.Z)(function*(b,f){yield Ta((0,ae.m9)(b),f)})).apply(this,arguments)}let Su=(()=>{class b{constructor(_){this.providerId=b.PROVIDER_ID,this.auth=Dn(_)}verifyPhoneNumber(_,C){return $s(this.auth,_,(0,ae.m9)(C))}static credential(_,C){return gs._fromVerification(_,C)}static credentialFromResult(_){return b.credentialFromTaggedObject(_)}static credentialFromError(_){return b.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{phoneNumber:C,temporaryProof:G}=_;return C&&G?gs._fromTokenResponse(C,G):null}}return b.PROVIDER_ID="phone",b.PHONE_SIGN_IN_METHOD="phone",b})();function vo(b,f){return f?Re(f):(ce(b._popupRedirectResolver,b,"argument-error"),b._popupRedirectResolver)}class Ku extends Vo{constructor(f){super("custom","custom"),this.params=f}_getIdTokenResponse(f){return Zr(f,this._buildIdpRequest())}_linkToIdToken(f,_){return Zr(f,this._buildIdpRequest(_))}_getReauthenticationResolver(f){return Zr(f,this._buildIdpRequest())}_buildIdpRequest(f){const _={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return f&&(_.idToken=f),_}}function Xl(b){return q(b.auth,new Ku(b),b.bypassAuthState)}function Ec(b){const{auth:f,user:_}=b;return ce(_,f,"internal-error"),ra(_,new Ku(b),b.bypassAuthState)}function Tc(b){return bc.apply(this,arguments)}function bc(){return(bc=(0,y.Z)(function*(b){const{auth:f,user:_}=b;return ce(_,f,"internal-error"),Ta(_,new Ku(b),b.bypassAuthState)})).apply(this,arguments)}class Gh{constructor(f,_,C,G,X=!1){this.auth=f,this.resolver=C,this.user=G,this.bypassAuthState=X,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(_)?_:[_]}execute(){var f=this;return new Promise(function(){var _=(0,y.Z)(function*(C,G){f.pendingPromise={resolve:C,reject:G};try{f.eventManager=yield f.resolver._initialize(f.auth),yield f.onExecution(),f.eventManager.registerConsumer(f)}catch(X){f.reject(X)}});return function(C,G){return _.apply(this,arguments)}}())}onAuthEvent(f){var _=this;return(0,y.Z)(function*(){const{urlResponse:C,sessionId:G,postBody:X,tenantId:ye,error:Ge,type:ht}=f;if(Ge)return void _.reject(Ge);const Jt={auth:_.auth,requestUri:C,sessionId:G,tenantId:ye||void 0,postBody:X||void 0,user:_.user,bypassAuthState:_.bypassAuthState};try{_.resolve(yield _.getIdpTask(ht)(Jt))}catch(dn){_.reject(dn)}})()}onError(f){this.reject(f)}getIdpTask(f){switch(f){case"signInViaPopup":case"signInViaRedirect":return Xl;case"linkViaPopup":case"linkViaRedirect":return Tc;case"reauthViaPopup":case"reauthViaRedirect":return Ec;default:qe(this.auth,"internal-error")}}resolve(f){Tt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(f),this.unregisterAndCleanUp()}reject(f){Tt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(f),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const ed=new Ft(2e3,1e4);function Zc(){return(Zc=(0,y.Z)(function*(b,f,_){const C=Dn(b);ot(b,f,Ti);const G=vo(C,_);return new no(C,"signInViaPopup",f,G).executeNotNull()})).apply(this,arguments)}function Qc(){return(Qc=(0,y.Z)(function*(b,f,_){const C=(0,ae.m9)(b);ot(C.auth,f,Ti);const G=vo(C.auth,_);return new no(C.auth,"reauthViaPopup",f,G,C).executeNotNull()})).apply(this,arguments)}function Yu(){return(Yu=(0,y.Z)(function*(b,f,_){const C=(0,ae.m9)(b);ot(C.auth,f,Ti);const G=vo(C.auth,_);return new no(C.auth,"linkViaPopup",f,G,C).executeNotNull()})).apply(this,arguments)}let no=(()=>{class b extends Gh{constructor(_,C,G,X,ye){super(_,C,X,ye),this.provider=G,this.authWindow=null,this.pollId=null,b.currentPopupAction&&b.currentPopupAction.cancel(),b.currentPopupAction=this}executeNotNull(){var _=this;return(0,y.Z)(function*(){const C=yield _.execute();return ce(C,_.auth,"internal-error"),C})()}onExecution(){var _=this;return(0,y.Z)(function*(){Tt(1===_.filter.length,"Popup operations only handle one event");const C=za();_.authWindow=yield _.resolver._openPopup(_.auth,_.provider,_.filter[0],C),_.authWindow.associatedEvent=C,_.resolver._originValidation(_.auth).catch(G=>{_.reject(G)}),_.resolver._isIframeWebStorageSupported(_.auth,G=>{G||_.reject(Ne(_.auth,"web-storage-unsupported"))}),_.pollUserCancellation()})()}get eventId(){var _;return(null===(_=this.authWindow)||void 0===_?void 0:_.associatedEvent)||null}cancel(){this.reject(Ne(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,b.currentPopupAction=null}pollUserCancellation(){const _=()=>{var C,G;this.pollId=null!==(G=null===(C=this.authWindow)||void 0===C?void 0:C.window)&&void 0!==G&&G.closed?window.setTimeout(()=>{this.pollId=null,this.reject(Ne(this.auth,"popup-closed-by-user"))},8e3):window.setTimeout(_,ed.get())};_()}}return b.currentPopupAction=null,b})();const td="pendingRedirect",qo=new Map;class Jc extends Gh{constructor(f,_,C=!1){super(f,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],_,void 0,C),this.eventId=null}execute(){var f=()=>super.execute,_=this;return(0,y.Z)(function*(){let C=qo.get(_.auth._key());if(!C){try{const X=(yield function nd(b,f){return Xc.apply(this,arguments)}(_.resolver,_.auth))?yield f().call(_):null;C=()=>Promise.resolve(X)}catch(G){C=()=>Promise.reject(G)}qo.set(_.auth._key(),C)}return _.bypassAuthState||qo.set(_.auth._key(),()=>Promise.resolve(null)),C()})()}onAuthEvent(f){var _=()=>super.onAuthEvent,C=this;return(0,y.Z)(function*(){if("signInViaRedirect"===f.type)return _().call(C,f);if("unknown"!==f.type){if(f.eventId){const G=yield C.auth._redirectUserForId(f.eventId);if(G)return C.user=G,_().call(C,f);C.resolve(null)}}else C.resolve(null)})()}onExecution(){return(0,y.Z)(function*(){})()}cleanUp(){}}function Xc(){return(Xc=(0,y.Z)(function*(b,f){const _=aa(f),C=Br(b);if(!(yield C._isAvailable()))return!1;const G="true"===(yield C._get(_));return yield C._remove(_),G})).apply(this,arguments)}function Qi(b,f){return Ru.apply(this,arguments)}function Ru(){return(Ru=(0,y.Z)(function*(b,f){return Br(b)._set(aa(f),"true")})).apply(this,arguments)}function Po(b,f){qo.set(b._key(),f)}function Br(b){return Re(b._redirectPersistence)}function aa(b){return Kt(td,b.config.apiKey,b.name)}function zs(b,f,_){return function oi(b,f,_){return Ou.apply(this,arguments)}(b,f,_)}function Ou(){return(Ou=(0,y.Z)(function*(b,f,_){const C=Dn(b);ot(b,f,Ti),yield C._initializationPromise;const G=vo(C,_);return yield Qi(G,C),G._openRedirect(C,f,"signInViaRedirect")})).apply(this,arguments)}function wc(b,f,_){return function Ko(b,f,_){return Dc.apply(this,arguments)}(b,f,_)}function Dc(){return(Dc=(0,y.Z)(function*(b,f,_){const C=(0,ae.m9)(b);ot(C.auth,f,Ti),yield C.auth._initializationPromise;const G=vo(C.auth,_);yield Qi(G,C.auth);const X=yield Qu(C);return G._openRedirect(C.auth,f,"reauthViaRedirect",X)})).apply(this,arguments)}function ah(b,f,_){return function as(b,f,_){return Zu.apply(this,arguments)}(b,f,_)}function Zu(){return(Zu=(0,y.Z)(function*(b,f,_){const C=(0,ae.m9)(b);ot(C.auth,f,Ti),yield C.auth._initializationPromise;const G=vo(C.auth,_);yield yr(!1,C,f.providerId),yield Qi(G,C.auth);const X=yield Qu(C);return G._openRedirect(C.auth,f,"linkViaRedirect",X)})).apply(this,arguments)}function Or(){return(Or=(0,y.Z)(function*(b,f){return yield Dn(b)._initializationPromise,Es(b,f,!1)})).apply(this,arguments)}function Es(b,f){return Pu.apply(this,arguments)}function Pu(){return(Pu=(0,y.Z)(function*(b,f,_=!1){const C=Dn(b),G=vo(C,f),ye=yield new Jc(C,G,_).execute();return ye&&!_&&(delete ye.user._redirectEventId,yield C._persistUserIfCurrent(ye.user),yield C._setRedirectUser(null,f)),ye})).apply(this,arguments)}function Qu(b){return Yo.apply(this,arguments)}function Yo(){return(Yo=(0,y.Z)(function*(b){const f=za(`${b.uid}:::`);return b._redirectEventId=f,yield b.auth._setRedirectUser(b),yield b.auth._persistUserIfCurrent(b),f})).apply(this,arguments)}class cu{constructor(f){this.auth=f,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(f){this.consumers.add(f),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,f)&&(this.sendToConsumer(this.queuedRedirectEvent,f),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(f){this.consumers.delete(f)}onEvent(f){if(this.hasEventBeenHandled(f))return!1;let _=!1;return this.consumers.forEach(C=>{this.isEventForConsumer(f,C)&&(_=!0,this.sendToConsumer(f,C),this.saveEventToCache(f))}),this.hasHandledPotentialRedirect||!function lu(b){switch(b.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Cc(b);default:return!1}}(f)||(this.hasHandledPotentialRedirect=!0,_||(this.queuedRedirectEvent=f,_=!0)),_}sendToConsumer(f,_){var C;if(f.error&&!Cc(f)){const G=(null===(C=f.error.code)||void 0===C?void 0:C.split("auth/")[1])||"internal-error";_.onError(Ne(this.auth,G))}else _.onAuthEvent(f)}isEventForConsumer(f,_){const C=null===_.eventId||!!f.eventId&&f.eventId===_.eventId;return _.filter.includes(f.type)&&C}hasEventBeenHandled(f){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Fi(f))}saveEventToCache(f){this.cachedEventUids.add(Fi(f)),this.lastProcessedEventTime=Date.now()}}function Fi(b){return[b.type,b.eventId,b.sessionId,b.tenantId].filter(f=>f).join("-")}function Cc({type:b,error:f}){return"unknown"===b&&"auth/no-auth-event"===f?.code}function Zo(b){return du.apply(this,arguments)}function du(){return(du=(0,y.Z)(function*(b,f={}){return Ye(b,"GET","/v1/projects",f)})).apply(this,arguments)}const hu=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,el=/^https?/;function ua(){return(ua=(0,y.Z)(function*(b){if(b.config.emulator)return;const{authorizedDomains:f}=yield Zo(b);for(const _ of f)try{if(ca(_))return}catch{}qe(b,"unauthorized-domain")})).apply(this,arguments)}function ca(b){const f=Hn(),{protocol:_,hostname:C}=new URL(f);if(b.startsWith("chrome-extension://")){const ye=new URL(b);return""===ye.hostname&&""===C?"chrome-extension:"===_&&b.replace("chrome-extension://","")===f.replace("chrome-extension://",""):"chrome-extension:"===_&&ye.hostname===C}if(!el.test(_))return!1;if(hu.test(b))return C===b;const G=b.replace(/\./g,"\\.");return new RegExp("^(.+\\."+G+"|"+G+")$","i").test(C)}const Mu=new Ft(3e4,6e4);function Xu(){const b=ir().___jsl;if(b?.H)for(const f of Object.keys(b.H))if(b.H[f].r=b.H[f].r||[],b.H[f].L=b.H[f].L||[],b.H[f].r=[...b.H[f].L],b.CP)for(let _=0;_<b.CP.length;_++)b.CP[_]=null}let ec=null;const Ac=new Ft(5e3,15e3),Dl="__/auth/iframe",uh="emulator/auth/iframe",Hh={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},_i=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function ch(b){const f=b.config;ce(f.authDomain,b,"auth-domain-config-required");const _=f.emulator?ve(f,uh):`https://${b.config.authDomain}/${Dl}`,C={apiKey:f.apiKey,appName:b.name,v:Ce.SDK_VERSION},G=_i.get(b.config.apiHost);G&&(C.eid=G);const X=b._getFrameworks();return X.length&&(C.fw=X.join(",")),`${_}?${(0,ae.xO)(C).slice(1)}`}function us(){return us=(0,y.Z)(function*(b){const f=yield function wl(b){return ec=ec||function ro(b){return new Promise((f,_)=>{var C,G,X;function ye(){Xu(),gapi.load("gapi.iframes",{callback:()=>{f(gapi.iframes.getContext())},ontimeout:()=>{Xu(),_(Ne(b,"network-request-failed"))},timeout:Mu.get()})}if(null!==(G=null===(C=ir().gapi)||void 0===C?void 0:C.iframes)&&void 0!==G&&G.Iframe)f(gapi.iframes.getContext());else{if(null===(X=ir().gapi)||void 0===X||!X.load){const Ge=$i("iframefcb");return ir()[Ge]=()=>{gapi.load?ye():_(Ne(b,"network-request-failed"))},es(`https://apis.google.com/js/api.js?onload=${Ge}`).catch(ht=>_(ht))}ye()}}).catch(f=>{throw ec=null,f})}(b),ec}(b),_=ir().gapi;return ce(_,b,"internal-error"),f.open({where:document.body,url:ch(b),messageHandlersFilter:_.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Hh,dontclear:!0},C=>new Promise(function(){var G=(0,y.Z)(function*(X,ye){yield C.restyle({setHideOnLeave:!1});const Ge=Ne(b,"network-request-failed"),ht=ir().setTimeout(()=>{ye(Ge)},Ac.get());function Jt(){ir().clearTimeout(ht),X(C)}C.ping(Jt).then(Jt,()=>{ye(Ge)})});return function(X,ye){return G.apply(this,arguments)}}()))}),us.apply(this,arguments)}const Cl={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class cs{constructor(f){this.window=f,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}const fr="__/auth/handler",Pr="emulator/auth/handler",rc=encodeURIComponent("fac");function Sc(b,f,_,C,G,X){return xu.apply(this,arguments)}function xu(){return(xu=(0,y.Z)(function*(b,f,_,C,G,X){ce(b.config.authDomain,b,"auth-domain-config-required"),ce(b.config.apiKey,b,"invalid-api-key");const ye={apiKey:b.config.apiKey,appName:b.name,authType:_,redirectUrl:C,v:Ce.SDK_VERSION,eventId:G};if(f instanceof Ti){f.setDefaultLanguage(b.languageCode),ye.providerId=f.providerId||"",(0,ae.xb)(f.getCustomParameters())||(ye.customParameters=JSON.stringify(f.getCustomParameters()));for(const[dn,hn]of Object.entries(X||{}))ye[dn]=hn}if(f instanceof rs){const dn=f.getScopes().filter(hn=>""!==hn);dn.length>0&&(ye.scopes=dn.join(","))}b.tenantId&&(ye.tid=b.tenantId);const Ge=ye;for(const dn of Object.keys(Ge))void 0===Ge[dn]&&delete Ge[dn];const ht=yield b._getAppCheckToken(),Jt=ht?`#${rc}=${encodeURIComponent(ht)}`:"";return`${function lh({config:b}){return b.emulator?ve(b,Pr):`https://${b.authDomain}/${fr}`}(b)}?${(0,ae.xO)(Ge).slice(1)}${Jt}`})).apply(this,arguments)}const Ns="webStorageSupport",ku=class id{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Ca,this._completeRedirectFn=Es,this._overrideRedirectResult=Po}_openPopup(f,_,C,G){var X=this;return(0,y.Z)(function*(){var ye;Tt(null===(ye=X.eventManagers[f._key()])||void 0===ye?void 0:ye.manager,"_initialize() not called before _openPopup()");const Ge=yield Sc(f,_,C,Hn(),G);return function nc(b,f,_,C=500,G=600){const X=Math.max((window.screen.availHeight-G)/2,0).toString(),ye=Math.max((window.screen.availWidth-C)/2,0).toString();let Ge="";const ht=Object.assign(Object.assign({},Cl),{width:C.toString(),height:G.toString(),top:X,left:ye}),Jt=(0,ae.z$)().toLowerCase();_&&(Ge=Kr(Jt)?"_blank":_),un(Jt)&&(f=f||"http://localhost",ht.scrollbars="yes");const dn=Object.entries(ht).reduce((Si,[ko,Fc])=>`${Si}${ko}=${Fc},`,"");if(function _n(b=(0,ae.z$)()){var f;return mt(b)&&!(null===(f=window.navigator)||void 0===f||!f.standalone)}(Jt)&&"_self"!==Ge)return function rd(b,f){const _=document.createElement("a");_.href=b,_.target=f;const C=document.createEvent("MouseEvent");C.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),_.dispatchEvent(C)}(f||"",Ge),new cs(null);const hn=window.open(f||"",Ge,dn);ce(hn,b,"popup-blocked");try{hn.focus()}catch{}return new cs(hn)}(f,Ge,za())})()}_openRedirect(f,_,C,G){var X=this;return(0,y.Z)(function*(){return yield X._originValidation(f),function Ql(b){ir().location.href=b}(yield Sc(f,_,C,Hn(),G)),new Promise(()=>{})})()}_initialize(f){const _=f._key();if(this.eventManagers[_]){const{manager:G,promise:X}=this.eventManagers[_];return G?Promise.resolve(G):(Tt(X,"If manager is not set, promise should be"),X)}const C=this.initAndGetManager(f);return this.eventManagers[_]={promise:C},C.catch(()=>{delete this.eventManagers[_]}),C}initAndGetManager(f){var _=this;return(0,y.Z)(function*(){const C=yield function fu(b){return us.apply(this,arguments)}(f),G=new cu(f);return C.register("authEvent",X=>(ce(X?.authEvent,f,"invalid-auth-event"),{status:G.onEvent(X.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),_.eventManagers[f._key()]={manager:G},_.iframes[f._key()]=C,G})()}_isIframeWebStorageSupported(f,_){this.iframes[f._key()].send(Ns,{type:Ns},G=>{var X;const ye=null===(X=G?.[0])||void 0===X?void 0:X[Ns];void 0!==ye&&_(!!ye),qe(f,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(f){const _=f._key();return this.originValidationPromises[_]||(this.originValidationPromises[_]=function Mo(b){return ua.apply(this,arguments)}(f)),this.originValidationPromises[_]}get _shouldInitProactively(){return Vn()||wr()||mt()}};class $h{constructor(f){this.factorId=f}_process(f,_,C){switch(_.type){case"enroll":return this._finalizeEnroll(f,_.credential,C);case"signin":return this._finalizeSignIn(f,_.credential);default:return Zt("unexpected MultiFactorSessionType")}}}class tl extends $h{constructor(f){super("phone"),this.credential=f}static _fromCredential(f){return new tl(f)}_finalizeEnroll(f,_,C){return function au(b,f){return Ye(b,"POST","/v2/accounts/mfaEnrollment:finalize",Le(b,f))}(f,{idToken:_,displayName:C,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(f,_){return function to(b,f){return Ye(b,"POST","/v2/accounts/mfaSignIn:finalize",Le(b,f))}(f,{mfaPendingCredential:_,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let zh=(()=>{class b{constructor(){}static assertion(_){return tl._fromCredential(_)}}return b.FACTOR_ID="phone",b})();var Sl="@firebase/auth";class nl{constructor(f){this.auth=f,this.internalListeners=new Map}getUid(){var f;return this.assertAuthConfigured(),(null===(f=this.auth.currentUser)||void 0===f?void 0:f.uid)||null}getToken(f){var _=this;return(0,y.Z)(function*(){return _.assertAuthConfigured(),yield _.auth._initializationPromise,_.auth.currentUser?{accessToken:yield _.auth.currentUser.getIdToken(f)}:null})()}addAuthTokenListener(f){if(this.assertAuthConfigured(),this.internalListeners.has(f))return;const _=this.auth.onIdTokenChanged(C=>{f(C?.stsTokenManager.accessToken||null)});this.internalListeners.set(f,_),this.updateProactiveRefresh()}removeAuthTokenListener(f){this.assertAuthConfigured();const _=this.internalListeners.get(f);_&&(this.internalListeners.delete(f),_(),this.updateProactiveRefresh())}assertAuthConfigured(){ce(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function Os(){return window}(0,ae.Pz)("authIdTokenMaxAge"),function Wa(b){(0,Ce._registerComponent)(new Oe.wA("auth",(f,{options:_})=>{const C=f.getProvider("app").getImmediate(),G=f.getProvider("heartbeat"),X=f.getProvider("app-check-internal"),{apiKey:ye,authDomain:Ge}=C.options;ce(ye&&!ye.includes(":"),"invalid-api-key",{appName:C.name});const ht={apiKey:ye,authDomain:Ge,clientPlatform:b,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Dr(b)},Jt=new ma(C,G,X,ht);return function hi(b,f){const _=f?.persistence||[],C=(Array.isArray(_)?_:[_]).map(Re);f?.errorMap&&b._updateErrorMap(f.errorMap),b._initializeWithPersistence(C,f?.popupRedirectResolver)}(Jt,_),Jt},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((f,_,C)=>{f.getProvider("auth-internal").initialize()})),(0,Ce._registerComponent)(new Oe.wA("auth-internal",f=>{const _=Dn(f.getProvider("auth").getImmediate());return new nl(_)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,Ce.registerVersion)(Sl,"1.3.1",function Rl(b){switch(b){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(b)),(0,Ce.registerVersion)(Sl,"1.3.1","esm2017")}("Browser");function od(){return od=(0,y.Z)(function*(b,f,_){var C;const{BuildInfo:G}=Os();Tt(f.sessionId,"AuthEvent did not contain a session ID");const X=yield function Be(b){return st.apply(this,arguments)}(f.sessionId),ye={};return mt()?ye.ibi=G.packageName:Ms()?ye.apn=G.packageName:qe(b,"operation-not-supported-in-this-environment"),G.displayName&&(ye.appDisplayName=G.displayName),ye.sessionId=X,Sc(b,_,f.type,void 0,null!==(C=f.eventId)&&void 0!==C?C:void 0,ye)}),od.apply(this,arguments)}function m(){return(m=(0,y.Z)(function*(b){const{BuildInfo:f}=Os(),_={};mt()?_.iosBundleId=f.packageName:Ms()?_.androidPackageName=f.packageName:qe(b,"operation-not-supported-in-this-environment"),yield Zo(b,_)})).apply(this,arguments)}function Z(){return(Z=(0,y.Z)(function*(b,f,_){const{cordova:C}=Os();let G=()=>{};try{yield new Promise((X,ye)=>{let Ge=null;function ht(){var hn;X();const Si=null===(hn=C.plugins.browsertab)||void 0===hn?void 0:hn.close;"function"==typeof Si&&Si(),"function"==typeof _?.close&&_.close()}function Jt(){Ge||(Ge=window.setTimeout(()=>{ye(Ne(b,"redirect-cancelled-by-user"))},2e3))}function dn(){"visible"===document?.visibilityState&&Jt()}f.addPassiveListener(ht),document.addEventListener("resume",Jt,!1),Ms()&&document.addEventListener("visibilitychange",dn,!1),G=()=>{f.removePassiveListener(ht),document.removeEventListener("resume",Jt,!1),document.removeEventListener("visibilitychange",dn,!1),Ge&&window.clearTimeout(Ge)}})}finally{G()}})).apply(this,arguments)}function st(){return(st=(0,y.Z)(function*(b){const f=function Dt(b){if(Tt(/[0-9a-zA-Z]+/.test(b),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(b);const f=new ArrayBuffer(b.length),_=new Uint8Array(f);for(let C=0;C<b.length;C++)_[C]=b.charCodeAt(C);return _}(b),_=yield crypto.subtle.digest("SHA-256",f);return Array.from(new Uint8Array(_)).map(G=>G.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}class En extends cu{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(f=>{this.resolveInialized=f})}addPassiveListener(f){this.passiveListeners.add(f)}removePassiveListener(f){this.passiveListeners.delete(f)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(f){return this.resolveInialized(),this.passiveListeners.forEach(_=>_(f)),super.onEvent(f)}initialized(){var f=this;return(0,y.Z)(function*(){yield f.initPromise})()}}function Ws(b){return Mc.apply(this,arguments)}function Mc(){return(Mc=(0,y.Z)(function*(b){const f=yield zr()._get(sc(b));return f&&(yield zr()._remove(sc(b))),f})).apply(this,arguments)}function Qo(){const b=[];for(let _=0;_<20;_++){const C=Math.floor(62*Math.random());b.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(C))}return b.join("")}function zr(){return Re(vt)}function sc(b){return Kt("authEvent",b.config.apiKey,b.name)}function Fu(b){if(!b?.includes("?"))return{};const[f,..._]=b.split("?");return(0,ae.zd)(_.join("?"))}const sr=class ad{constructor(){this._redirectPersistence=Ca,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=Es,this._overrideRedirectResult=Po}_initialize(f){var _=this;return(0,y.Z)(function*(){const C=f._key();let G=_.eventManagers.get(C);return G||(G=new En(f),_.eventManagers.set(C,G),_.attachCallbackListeners(f,G)),G})()}_openPopup(f){qe(f,"operation-not-supported-in-this-environment")}_openRedirect(f,_,C,G){var X=this;return(0,y.Z)(function*(){!function ue(b){var f,_,C,G,X,ye,Ge,ht,Jt,dn;const hn=Os();ce("function"==typeof(null===(f=hn?.universalLinks)||void 0===f?void 0:f.subscribe),b,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),ce(typeof(null===(_=hn?.BuildInfo)||void 0===_?void 0:_.packageName)<"u",b,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),ce("function"==typeof(null===(X=null===(G=null===(C=hn?.cordova)||void 0===C?void 0:C.plugins)||void 0===G?void 0:G.browsertab)||void 0===X?void 0:X.openUrl),b,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),ce("function"==typeof(null===(ht=null===(Ge=null===(ye=hn?.cordova)||void 0===ye?void 0:ye.plugins)||void 0===Ge?void 0:Ge.browsertab)||void 0===ht?void 0:ht.isAvailable),b,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),ce("function"==typeof(null===(dn=null===(Jt=hn?.cordova)||void 0===Jt?void 0:Jt.InAppBrowser)||void 0===dn?void 0:dn.open),b,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(f);const ye=yield X._initialize(f);yield ye.initialized(),ye.resetRedirect(),function Nu(){qo.clear()}(),yield X._originValidation(f);const Ge=function Ar(b,f,_=null){return{type:f,eventId:_,urlResponse:null,sessionId:Qo(),postBody:null,tenantId:b.tenantId,error:Ne(b,"no-auth-event")}}(f,C,G);yield function la(b,f){return zr()._set(sc(b),f)}(f,Ge);const ht=yield function rl(b,f,_){return od.apply(this,arguments)}(f,Ge,_),Jt=yield function T(b){const{cordova:f}=Os();return new Promise(_=>{f.plugins.browsertab.isAvailable(C=>{let G=null;C?f.plugins.browsertab.openUrl(b):G=f.InAppBrowser.open(b,function en(b=(0,ae.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(b)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(b)}()?"_blank":"_system","location=yes"),_(G)})})}(ht);return function M(b,f,_){return Z.apply(this,arguments)}(f,ye,Jt)})()}_isIframeWebStorageSupported(f,_){throw new Error("Method not implemented.")}_originValidation(f){const _=f._key();return this.originValidationPromises[_]||(this.originValidationPromises[_]=function N(b){return m.apply(this,arguments)}(f)),this.originValidationPromises[_]}attachCallbackListeners(f,_){const{universalLinks:C,handleOpenURL:G,BuildInfo:X}=Os(),ye=setTimeout((0,y.Z)(function*(){yield Ws(f),_.onEvent(oc())}),500),Ge=function(){var dn=(0,y.Z)(function*(hn){clearTimeout(ye);const Si=yield Ws(f);let ko=null;Si&&hn?.url&&(ko=function yo(b,f){var _,C;const G=function Nl(b){const f=Fu(b),_=f.link?decodeURIComponent(f.link):void 0,C=Fu(_).link,G=f.deep_link_id?decodeURIComponent(f.deep_link_id):void 0;return Fu(G).link||G||C||_||b}(f);if(G.includes("/__/auth/callback")){const X=Fu(G),ye=X.firebaseError?function Io(b){try{return JSON.parse(b)}catch{return null}}(decodeURIComponent(X.firebaseError)):null,Ge=null===(C=null===(_=ye?.code)||void 0===_?void 0:_.split("auth/"))||void 0===C?void 0:C[1],ht=Ge?Ne(Ge):null;return ht?{type:b.type,eventId:b.eventId,tenantId:b.tenantId,error:ht,urlResponse:null,sessionId:null,postBody:null}:{type:b.type,eventId:b.eventId,tenantId:b.tenantId,sessionId:b.sessionId,urlResponse:G,postBody:null}}return null}(Si,hn.url)),_.onEvent(ko||oc())});return function(Si){return dn.apply(this,arguments)}}();typeof C<"u"&&"function"==typeof C.subscribe&&C.subscribe(null,Ge);const ht=G,Jt=`${X.packageName.toLowerCase()}://`;Os().handleOpenURL=function(){var dn=(0,y.Z)(function*(hn){if(hn.toLowerCase().startsWith(Jt)&&Ge({url:hn}),"function"==typeof ht)try{ht(hn)}catch(Si){console.error(Si)}});return function(hn){return dn.apply(this,arguments)}}()}};function oc(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:Ne("no-auth-event")}}function mu(){var b;return(null===(b=self?.location)||void 0===b?void 0:b.protocol)||null}function xc(b=(0,ae.z$)()){return!("file:"!==mu()&&"ionic:"!==mu()&&"capacitor:"!==mu()||!b.toLowerCase().match(/iphone|ipad|ipod|android/))}function da(){try{const b=self.localStorage,f=za();if(b)return b.setItem(f,"1"),b.removeItem(f),!function Od(b=(0,ae.z$)()){return function Jo(){return(0,ae.w1)()&&11===document?.documentMode}()||function _u(b=(0,ae.z$)()){return/Edge\/\d+/.test(b)}(b)}()||(0,ae.hl)()}catch{return Na()&&(0,ae.hl)()}return!1}function Na(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function qa(){return(function Kh(){return"http:"===mu()||"https:"===mu()}()||(0,ae.ru)()||xc())&&!function ac(){return(0,ae.b$)()||(0,ae.UG)()}()&&da()&&!Na()}function Yh(){return xc()&&typeof document<"u"}function Ol(){return(Ol=(0,y.Z)(function*(){return!!Yh()&&new Promise(b=>{const f=setTimeout(()=>{b(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(f),b(!0)})})})).apply(this,arguments)}const ha={LOCAL:"local",NONE:"none",SESSION:"session"},Ai=ce,Pd="persistence";function Md(b){return Zh.apply(this,arguments)}function Zh(){return(Zh=(0,y.Z)(function*(b){yield b._initializationPromise;const f=fa(),_=Kt(Pd,b.config.apiKey,b.name);f&&f.setItem(_,b._getPersistence())})).apply(this,arguments)}function fa(){var b;try{return(null===(b=function zf(){return typeof window<"u"?window:null}())||void 0===b?void 0:b.sessionStorage)||null}catch{return null}}const fh=ce;class Oa{constructor(){this.browserResolver=Re(ku),this.cordovaResolver=Re(sr),this.underlyingResolver=null,this._redirectPersistence=Ca,this._completeRedirectFn=Es,this._overrideRedirectResult=Po}_initialize(f){var _=this;return(0,y.Z)(function*(){return yield _.selectUnderlyingResolver(),_.assertedUnderlyingResolver._initialize(f)})()}_openPopup(f,_,C,G){var X=this;return(0,y.Z)(function*(){return yield X.selectUnderlyingResolver(),X.assertedUnderlyingResolver._openPopup(f,_,C,G)})()}_openRedirect(f,_,C,G){var X=this;return(0,y.Z)(function*(){return yield X.selectUnderlyingResolver(),X.assertedUnderlyingResolver._openRedirect(f,_,C,G)})()}_isIframeWebStorageSupported(f,_){this.assertedUnderlyingResolver._isIframeWebStorageSupported(f,_)}_originValidation(f){return this.assertedUnderlyingResolver._originValidation(f)}get _shouldInitProactively(){return Yh()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return fh(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var f=this;return(0,y.Z)(function*(){if(f.underlyingResolver)return;const _=yield function $f(){return Ol.apply(this,arguments)}();f.underlyingResolver=_?f.cordovaResolver:f.browserResolver})()}}function vu(b){return b.unwrap()}function ol(b){return al(b)}function al(b){const{_tokenResponse:f}=b instanceof ae.ZR?b.customData:b;if(!f)return null;if(!(b instanceof ae.ZR)&&"temporaryProof"in f&&"phoneNumber"in f)return Su.credentialFromResult(b);const _=f.providerId;if(!_||_===$e.PASSWORD)return null;let C;switch(_){case $e.GOOGLE:C=Ea;break;case $e.FACEBOOK:C=vs;break;case $e.GITHUB:C=Ys;break;case $e.TWITTER:C=Ui;break;default:const{oauthIdToken:G,oauthAccessToken:X,oauthTokenSecret:ye,pendingToken:Ge,nonce:ht}=f;return X||ye||G||Ge?Ge?_.startsWith("saml.")?Hr._create(_,Ge):Qr._fromParams({providerId:_,signInMethod:_,pendingToken:Ge,idToken:G,accessToken:X}):new _s(_).credential({idToken:G,accessToken:X,rawNonce:ht}):null}return b instanceof ae.ZR?C.credentialFromError(b):C.credentialFromResult(b)}function Eo(b,f){return f.catch(_=>{throw _ instanceof ae.ZR&&function ph(b,f){var _;const C=null===(_=f.customData)||void 0===_?void 0:_._tokenResponse;if("auth/multi-factor-auth-required"===f?.code)f.resolver=new kd(b,function Is(b,f){var _;const C=(0,ae.m9)(b),G=f;return ce(f.customData.operationType,C,"argument-error"),ce(null===(_=G.customData._serverResponse)||void 0===_?void 0:_.mfaPendingCredential,C,"argument-error"),zo._fromError(C,G)}(b,f));else if(C){const G=al(f),X=f;G&&(X.credential=G,X.tenantId=C.tenantId||void 0,X.email=C.email||void 0,X.phoneNumber=C.phoneNumber||void 0)}}(b,_),_}).then(_=>{const G=_.user;return{operationType:_.operationType,credential:ol(_),additionalUserInfo:gi(_),user:Ka.getOrCreate(G)}})}function ul(b,f){return kc.apply(this,arguments)}function kc(){return(kc=(0,y.Z)(function*(b,f){const _=yield f;return{verificationId:_.verificationId,confirm:C=>Eo(b,_.confirm(C))}})).apply(this,arguments)}class kd{constructor(f,_){this.resolver=_,this.auth=function xo(b){return b.wrapped()}(f)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(f){return Eo(vu(this.auth),this.resolver.resolveSignIn(f))}}class Ka{constructor(f){this._delegate=f,this.multiFactor=function _o(b){const f=(0,ae.m9)(b);return mi.has(f)||mi.set(f,Et._fromUser(f)),mi.get(f)}(f)}static getOrCreate(f){return Ka.USER_MAP.has(f)||Ka.USER_MAP.set(f,new Ka(f)),Ka.USER_MAP.get(f)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(f){return this._delegate.getIdTokenResult(f)}getIdToken(f){return this._delegate.getIdToken(f)}linkAndRetrieveDataWithCredential(f){return this.linkWithCredential(f)}linkWithCredential(f){var _=this;return(0,y.Z)(function*(){return Eo(_.auth,Xt(_._delegate,f))})()}linkWithPhoneNumber(f,_){var C=this;return(0,y.Z)(function*(){return ul(C.auth,function Ic(b,f,_){return Nr.apply(this,arguments)}(C._delegate,f,_))})()}linkWithPopup(f){var _=this;return(0,y.Z)(function*(){return Eo(_.auth,function Gf(b,f,_){return Yu.apply(this,arguments)}(_._delegate,f,Oa))})()}linkWithRedirect(f){var _=this;return(0,y.Z)(function*(){return yield Md(Dn(_.auth)),ah(_._delegate,f,Oa)})()}reauthenticateAndRetrieveDataWithCredential(f){return this.reauthenticateWithCredential(f)}reauthenticateWithCredential(f){var _=this;return(0,y.Z)(function*(){return Eo(_.auth,xi(_._delegate,f))})()}reauthenticateWithPhoneNumber(f,_){return ul(this.auth,function Sd(b,f,_){return Wo.apply(this,arguments)}(this._delegate,f,_))}reauthenticateWithPopup(f){return Eo(this.auth,function oh(b,f,_){return Qc.apply(this,arguments)}(this._delegate,f,Oa))}reauthenticateWithRedirect(f){var _=this;return(0,y.Z)(function*(){return yield Md(Dn(_.auth)),wc(_._delegate,f,Oa)})()}sendEmailVerification(f){return function qc(b,f){return Js.apply(this,arguments)}(this._delegate,f)}unlink(f){var _=this;return(0,y.Z)(function*(){return yield function wo(b,f){return Do.apply(this,arguments)}(_._delegate,f),_})()}updateEmail(f){return function K(b,f){return Qe((0,ae.m9)(b),f,null)}(this._delegate,f)}updatePassword(f){return function ge(b,f){return Qe((0,ae.m9)(b),null,f)}(this._delegate,f)}updatePhoneNumber(f){return function qu(b,f){return uu.apply(this,arguments)}(this._delegate,f)}updateProfile(f){return function Q(b,f){return U.apply(this,arguments)}(this._delegate,f)}verifyBeforeUpdateEmail(f,_){return function ih(b,f,_){return Yi.apply(this,arguments)}(this._delegate,f,_)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Ka.USER_MAP=new WeakMap;const cd=ce;let Ts=(()=>{class b{constructor(_,C){if(this.app=_,C.isInitialized())return this._delegate=C.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:G}=_.options;cd(G,"invalid-api-key",{appName:_.name}),cd(G,"invalid-api-key",{appName:_.name});const X=typeof window<"u"?Oa:void 0;this._delegate=C.initialize({options:{persistence:gh(G,_.name),popupRedirectResolver:X}}),this._delegate._updateErrorMap(_t),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Ka.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(_){this._delegate.languageCode=_}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(_){this._delegate.tenantId=_}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(_,C){!function va(b,f,_){const C=Dn(b);ce(C._canInitEmulator,C,"emulator-config-failed"),ce(/^https?:\/\//.test(f),C,"invalid-emulator-scheme");const G=!!_?.disableWarnings,X=Wi(f),{host:ye,port:Ge}=function Va(b){const f=Wi(b),_=/(\/\/)?([^?#/]+)/.exec(b.substr(f.length));if(!_)return{host:"",port:null};const C=_[2].split("@").pop()||"",G=/^(\[[^\]]+\])(:|$)/.exec(C);if(G){const X=G[1];return{host:X,port:ya(C.substr(X.length+1))}}{const[X,ye]=C.split(":");return{host:X,port:ya(ye)}}}(f);C.config.emulator={url:`${X}//${ye}${null===Ge?"":`:${Ge}`}/`},C.settings.appVerificationDisabledForTesting=!0,C.emulatorConfig=Object.freeze({host:ye,port:Ge,protocol:X.replace(":",""),options:Object.freeze({disableWarnings:G})}),G||function eu(){function b(){const f=document.createElement("p"),_=f.style;f.innerText="Running in emulator mode. Do not use with production credentials.",_.position="fixed",_.width="100%",_.backgroundColor="#ffffff",_.border=".1em solid #000000",_.color="#b50000",_.bottom="0px",_.left="0px",_.margin="0px",_.zIndex="10000",_.textAlign="center",f.classList.add("firebase-emulator-warning"),document.body.appendChild(f)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",b):b())}()}(this._delegate,_,C)}applyActionCode(_){return function vc(b,f){return Ro.apply(this,arguments)}(this._delegate,_)}checkActionCode(_){return bu(this._delegate,_)}confirmPasswordReset(_,C){return function Ua(b,f,_){return po.apply(this,arguments)}(this._delegate,_,C)}createUserWithEmailAndPassword(_,C){var G=this;return(0,y.Z)(function*(){return Eo(G._delegate,function ru(b,f,_){return Zs.apply(this,arguments)}(G._delegate,_,C))})()}fetchProvidersForEmail(_){return this.fetchSignInMethodsForEmail(_)}fetchSignInMethodsForEmail(_){return function Qs(b,f){return ba.apply(this,arguments)}(this._delegate,_)}isSignInWithEmailLink(_){return function bd(b,f){const _=pi.parseLink(f);return"EMAIL_SIGNIN"===_?.operation}(0,_)}getRedirectResult(){var _=this;return(0,y.Z)(function*(){cd(qa(),_._delegate,"operation-not-supported-in-this-environment");const C=yield function Ci(b,f){return Or.apply(this,arguments)}(_._delegate,Oa);return C?Eo(_._delegate,Promise.resolve(C)):{credential:null,user:null}})()}addFrameworkForLogging(_){!function sl(b,f){Dn(b)._logFramework(f)}(this._delegate,_)}onAuthStateChanged(_,C,G){const{next:X,error:ye,complete:Ge}=pr(_,C,G);return this._delegate.onAuthStateChanged(X,ye,Ge)}onIdTokenChanged(_,C,G){const{next:X,error:ye,complete:Ge}=pr(_,C,G);return this._delegate.onIdTokenChanged(X,ye,Ge)}sendSignInLinkToEmail(_,C){return function zc(b,f,_){return Ho.apply(this,arguments)}(this._delegate,_,C)}sendPasswordResetEmail(_,C){return function Gu(b,f,_){return So.apply(this,arguments)}(this._delegate,_,C||void 0)}setPersistence(_){var C=this;return(0,y.Z)(function*(){let G;switch(function hh(b,f){Ai(Object.values(ha).includes(f),b,"invalid-persistence-type"),(0,ae.b$)()?Ai(f!==ha.SESSION,b,"unsupported-persistence-type"):(0,ae.UG)()?Ai(f===ha.NONE,b,"unsupported-persistence-type"):Na()?Ai(f===ha.NONE||f===ha.LOCAL&&(0,ae.hl)(),b,"unsupported-persistence-type"):Ai(f===ha.NONE||da(),b,"unsupported-persistence-type")}(C._delegate,_),_){case ha.SESSION:G=Ca;break;case ha.LOCAL:G=(yield Re(zu)._isAvailable())?zu:vt;break;case ha.NONE:G=Rt;break;default:return qe("argument-error",{appName:C._delegate.name})}return C._delegate.setPersistence(G)})()}signInAndRetrieveDataWithCredential(_){return this.signInWithCredential(_)}signInAnonymously(){return Eo(this._delegate,function nu(b){return lo.apply(this,arguments)}(this._delegate))}signInWithCredential(_){return Eo(this._delegate,ie(this._delegate,_))}signInWithCustomToken(_){return Eo(this._delegate,function ji(b,f){return ss.apply(this,arguments)}(this._delegate,_))}signInWithEmailAndPassword(_,C){return Eo(this._delegate,function iu(b,f,_){return ie((0,ae.m9)(b),Ln.credential(f,_)).catch(function(){var C=(0,y.Z)(function*(G){throw"auth/password-does-not-meet-requirements"===G.code&&Ki(b),G});return function(G){return C.apply(this,arguments)}}())}(this._delegate,_,C))}signInWithEmailLink(_,C){return Eo(this._delegate,function yc(b,f,_){return su.apply(this,arguments)}(this._delegate,_,C))}signInWithPhoneNumber(_,C){return ul(this._delegate,function Sa(b,f,_){return Ra.apply(this,arguments)}(this._delegate,_,C))}signInWithPopup(_){var C=this;return(0,y.Z)(function*(){return cd(qa(),C._delegate,"operation-not-supported-in-this-environment"),Eo(C._delegate,function jf(b,f,_){return Zc.apply(this,arguments)}(C._delegate,_,Oa))})()}signInWithRedirect(_){var C=this;return(0,y.Z)(function*(){return cd(qa(),C._delegate,"operation-not-supported-in-this-environment"),yield Md(C._delegate),zs(C._delegate,_,Oa)})()}updateCurrentUser(_){return this._delegate.updateCurrentUser(_)}verifyPasswordResetCode(_){return function wu(b,f){return Ga.apply(this,arguments)}(this._delegate,_)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return b.Persistence=ha,b})();function pr(b,f,_){let C=b;"function"!=typeof b&&({next:C,error:f,complete:_}=b);const G=C;return{next:ye=>G(ye&&Ka.getOrCreate(ye)),error:f,complete:_}}function gh(b,f){const _=function xd(b,f){const _=fa();if(!_)return[];const C=Kt(Pd,b,f);switch(_.getItem(C)){case ha.NONE:return[Rt];case ha.LOCAL:return[zu,Ca];case ha.SESSION:return[Ca];default:return[]}}(b,f);if(typeof self<"u"&&!_.includes(zu)&&_.push(zu),typeof window<"u")for(const C of[vt,Ca])_.includes(C)||_.push(C);return _.includes(Rt)||_.push(Rt),_}class Pl{constructor(){this.providerId="phone",this._delegate=new Su(vu(fe.Z.auth()))}static credential(f,_){return Su.credential(f,_)}verifyPhoneNumber(f,_){return this._delegate.verifyPhoneNumber(f,_)}unwrap(){return this._delegate}}Pl.PHONE_SIGN_IN_METHOD=Su.PHONE_SIGN_IN_METHOD,Pl.PROVIDER_ID=Su.PROVIDER_ID;const ld=ce;class Ml{constructor(f,_,C=fe.Z.app()){var G;ld(null===(G=C.options)||void 0===G?void 0:G.apiKey,"invalid-api-key",{appName:C.name}),this._delegate=new ti(C.auth(),f,_),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function Qh(b){b.INTERNAL.registerComponent(new Oe.wA("auth-compat",f=>{const _=f.getProvider("app-compat").getImmediate(),C=f.getProvider("auth");return new Ts(_,C)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:Ln,FacebookAuthProvider:vs,GithubAuthProvider:Ys,GoogleAuthProvider:Ea,OAuthProvider:_s,SAMLAuthProvider:lr,PhoneAuthProvider:Pl,PhoneMultiFactorGenerator:zh,RecaptchaVerifier:Ml,TwitterAuthProvider:Ui,Auth:Ts,AuthCredential:Vo,Error:ae.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),b.registerVersion("@firebase/auth-compat","0.4.7")}(fe.Z)},5861:(qt,Ze,H)=>{function y(ae,Ce,De,Ee,Oe,I,$e){try{var pe=ae[I]($e),me=pe.value}catch(Pe){return void De(Pe)}pe.done?Ce(me):Promise.resolve(me).then(Ee,Oe)}function fe(ae){return function(){var Ce=this,De=arguments;return new Promise(function(Ee,Oe){var I=ae.apply(Ce,De);function $e(me){y(I,Ee,Oe,$e,pe,"next",me)}function pe(me){y(I,Ee,Oe,$e,pe,"throw",me)}$e(void 0)})}}H.d(Ze,{Z:()=>fe})},7582:(qt,Ze,H)=>{function Ce(ve,be){var He={};for(var xe in ve)Object.prototype.hasOwnProperty.call(ve,xe)&&be.indexOf(xe)<0&&(He[xe]=ve[xe]);if(null!=ve&&"function"==typeof Object.getOwnPropertySymbols){var Le=0;for(xe=Object.getOwnPropertySymbols(ve);Le<xe.length;Le++)be.indexOf(xe[Le])<0&&Object.prototype.propertyIsEnumerable.call(ve,xe[Le])&&(He[xe[Le]]=ve[xe[Le]])}return He}function Pe(ve,be,He,xe){return new(He||(He=Promise))(function(Ye,Pt){function Ct(Tn){try{wt(xe.next(Tn))}catch(on){Pt(on)}}function ar(Tn){try{wt(xe.throw(Tn))}catch(on){Pt(on)}}function wt(Tn){Tn.done?Ye(Tn.value):function Le(Ye){return Ye instanceof He?Ye:new He(function(Pt){Pt(Ye)})}(Tn.value).then(Ct,ar)}wt((xe=xe.apply(ve,be||[])).next())})}function Me(ve){return this instanceof Me?(this.v=ve,this):new Me(ve)}function qe(ve,be,He){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Le,xe=He.apply(ve,be||[]),Ye=[];return Le={},Pt("next"),Pt("throw"),Pt("return"),Le[Symbol.asyncIterator]=function(){return this},Le;function Pt(Qn){xe[Qn]&&(Le[Qn]=function(Cn){return new Promise(function(Pn,_e){Ye.push([Qn,Cn,Pn,_e])>1||Ct(Qn,Cn)})})}function Ct(Qn,Cn){try{!function ar(Qn){Qn.value instanceof Me?Promise.resolve(Qn.value.v).then(wt,Tn):on(Ye[0][2],Qn)}(xe[Qn](Cn))}catch(Pn){on(Ye[0][3],Pn)}}function wt(Qn){Ct("next",Qn)}function Tn(Qn){Ct("throw",Qn)}function on(Qn,Cn){Qn(Cn),Ye.shift(),Ye.length&&Ct(Ye[0][0],Ye[0][1])}}function ze(ve){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var He,be=ve[Symbol.asyncIterator];return be?be.call(ve):(ve=function ft(ve){var be="function"==typeof Symbol&&Symbol.iterator,He=be&&ve[be],xe=0;if(He)return He.call(ve);if(ve&&"number"==typeof ve.length)return{next:function(){return ve&&xe>=ve.length&&(ve=void 0),{value:ve&&ve[xe++],done:!ve}}};throw new TypeError(be?"Object is not iterable.":"Symbol.iterator is not defined.")}(ve),He={},xe("next"),xe("throw"),xe("return"),He[Symbol.asyncIterator]=function(){return this},He);function xe(Ye){He[Ye]=ve[Ye]&&function(Pt){return new Promise(function(Ct,ar){!function Le(Ye,Pt,Ct,ar){Promise.resolve(ar).then(function(wt){Ye({value:wt,done:Ct})},Pt)}(Ct,ar,(Pt=ve[Ye](Pt)).done,Pt.value)})}}}H.d(Ze,{FC:()=>qe,KL:()=>ze,_T:()=>Ce,mG:()=>Pe,qq:()=>Me}),"function"==typeof SuppressedError&&SuppressedError}},qt=>{var Ze=y=>qt(qt.s=y);Ze(2614),Ze(8832)}]);