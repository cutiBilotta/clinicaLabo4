"use strict";(self.webpackChunkclinica=self.webpackChunkclinica||[]).push([[227],{4227:(I,g,c)=>{c.r(g),c.d(g,{MiPerfilModule:()=>C});var p=c(6814),m=c(1826),i=c(5879),f=c(4108),h=c(6751),_=c(6700),d=c(95);function v(o,a){if(1&o&&i._UZ(0,"img",20),2&o){const e=i.oxw(2);i.Q6J("src",e.imagenUrl,i.LSH)}}function Z(o,a){if(1&o&&(i.TgZ(0,"p",11),i._uU(1),i.qZA()),2&o){const e=i.oxw(2);i.xp6(1),i.Oqu(e.usuarioBD.especialidad)}}function x(o,a){if(1&o&&(i.TgZ(0,"section")(1,"div",3)(2,"h2",4),i._uU(3,"Mi Perfil"),i.qZA(),i._UZ(4,"br")(5,"br"),i.TgZ(6,"div",5)(7,"div",6)(8,"div",7)(9,"div",8),i.YNc(10,v,1,1,"img",9),i.TgZ(11,"h5",10),i._uU(12),i.qZA(),i.TgZ(13,"p",11),i._uU(14),i.qZA(),i.YNc(15,Z,2,1,"p",12),i.qZA()()(),i.TgZ(16,"div",13)(17,"div",7)(18,"div",14)(19,"div",15)(20,"div",16)(21,"p",17),i._uU(22,"Nombre Completo"),i.qZA()(),i.TgZ(23,"div",18)(24,"p",19),i._uU(25),i.qZA()()(),i._UZ(26,"hr"),i.TgZ(27,"div",15)(28,"div",16)(29,"p",17),i._uU(30,"Email"),i.qZA()(),i.TgZ(31,"div",18)(32,"p",19),i._uU(33),i.qZA()()(),i._UZ(34,"hr"),i.TgZ(35,"div",15)(36,"div",16)(37,"p",17),i._uU(38,"Edad"),i.qZA()(),i.TgZ(39,"div",18)(40,"p",19),i._uU(41),i.qZA()()(),i._UZ(42,"hr"),i.TgZ(43,"div",15)(44,"div",16)(45,"p",17),i._uU(46,"Dni"),i.qZA()(),i.TgZ(47,"div",18)(48,"p",19),i._uU(49),i.qZA()()()()(),i._UZ(50,"div",15),i.qZA()()()()),2&o){const e=i.oxw();i.xp6(10),i.Q6J("ngIf",null!=e.imagenUrl),i.xp6(2),i.Oqu(e.usuarioBD.nombre),i.xp6(2),i.Oqu(e.usuarioBD.perfil),i.xp6(1),i.Q6J("ngIf","Especialista"==e.usuarioBD.perfil),i.xp6(10),i.AsE("",e.usuarioBD.nombre," ",e.usuarioBD.apellido,""),i.xp6(8),i.Oqu(e.usuarioBD.email),i.xp6(8),i.Oqu(e.usuarioBD.edad),i.xp6(8),i.Oqu(e.usuarioBD.dni)}}function b(o,a){if(1&o&&(i.TgZ(0,"p",4),i._uU(1),i.qZA()),2&o){const e=i.oxw(2);i.xp6(1),i.hij("Su especialidad: ",e.usuarioBD.especialidad,"")}}function U(o,a){if(1&o&&(i.TgZ(0,"option",31),i._uU(1),i.qZA()),2&o){const e=a.$implicit;i.Q6J("value",e),i.xp6(1),i.Oqu(e)}}function T(o,a){if(1&o&&(i.TgZ(0,"div")(1,"label",39),i._uU(2,"Horario Ingreso \xa0\xa0"),i.qZA(),i._UZ(3,"input",40),i._uU(4,"hs. "),i._UZ(5,"br")(6,"br"),i.TgZ(7,"label",39),i._uU(8,"Horario Egreso \xa0\xa0"),i.qZA(),i._UZ(9,"input",40),i._uU(10,"hs. "),i.qZA()),2&o){const e=i.oxw().$implicit;i.xp6(1),i.MGl("for","inputIngreso_",e,""),i.xp6(2),i.MGl("id","inputIngreso_",e,""),i.xp6(4),i.MGl("for","inputEgreso_",e,""),i.xp6(2),i.MGl("id","inputEgreso_",e,"")}}function A(o,a){if(1&o){const e=i.EpF();i.TgZ(0,"div")(1,"div",36)(2,"input",37),i.NdJ("ngModelChange",function(t){const r=i.CHM(e).$implicit,l=i.oxw(3);return i.KtG(l.diasSeleccionados[r]=t)}),i.qZA(),i.TgZ(3,"label",38),i._uU(4,"\xa0\t\xa0"),i.TgZ(5,"b"),i._uU(6),i.qZA()()(),i._UZ(7,"br"),i.YNc(8,T,11,4,"div",1),i._UZ(9,"hr"),i.qZA()}if(2&o){const e=a.$implicit,s=a.index,t=i.oxw(3);i.xp6(2),i.Q6J("value",e)("id","checkDia"+s)("ngModel",t.diasSeleccionados[e]),i.xp6(4),i.Oqu(e),i.xp6(2),i.Q6J("ngIf",t.diasSeleccionados[e])}}function D(o,a){if(1&o){const e=i.EpF();i.TgZ(0,"div",32),i.YNc(1,A,10,5,"div",33),i.TgZ(2,"p",34)(3,"b"),i._uU(4),i.qZA()(),i.TgZ(5,"button",35),i.NdJ("click",function(){i.CHM(e);const t=i.oxw(2);return i.KtG(t.definirDisponibilidad())}),i._uU(6,"Aceptar"),i.qZA()()}if(2&o){const e=i.oxw(2);i.xp6(1),i.Q6J("ngForOf",e.diasHabiles),i.xp6(3),i.Oqu(e.mensajeError)}}function M(o,a){if(1&o){const e=i.EpF();i.TgZ(0,"div",21)(1,"div",22)(2,"div",23)(3,"h5",24),i._uU(4,"Defina su Disponibilidad Horaria"),i.qZA(),i.YNc(5,b,2,1,"p",25),i.TgZ(6,"div",26)(7,"select",27),i.NdJ("change",function(t){i.CHM(e);const n=i.oxw();return i.KtG(n.seleccionarEspecialidad(t))}),i.TgZ(8,"option",28),i._uU(9,"Seleccione una Especialidad"),i.qZA(),i.YNc(10,U,2,2,"option",29),i.qZA()(),i._UZ(11,"hr"),i.YNc(12,D,7,2,"div",30),i.qZA()(),i._UZ(13,"br")(14,"br"),i.qZA()}if(2&o){const e=i.oxw();i.xp6(5),i.Q6J("ngIf",null!=e.usuarioBD),i.xp6(5),i.Q6J("ngForOf",e.usuarioBD.especialidad),i.xp6(2),i.Q6J("ngIf",e.mostrarForm)}}const B=[{path:"",component:(()=>{class o{constructor(e,s,t){this.authService=e,this.database=s,this.storageService=t,this.diasHabiles=["Lunes","Martes","Mi\xe9rcoles","Jueves","Viernes","S\xe1bado"],this.diasSeleccionados={},this.especialidadSeleccionada="",this.mostrarForm=!1,this.mensajeError="",this.usuarios=[]}ngOnInit(){this.authService.getUserLogged().subscribe(e=>{if(e){this.usuarioLoggeado=e;const s=e.email;console.log("Email del usuario loggeado:",s),this.database.obtenerTodos("usuarios").subscribe(t=>{this.usuarios=t.map(n=>{let r=n.payload.doc.data();return r.id=n.payload.doc.id,r}),console.log(this.usuarios),this.usuarioBD=this.usuarios.find(n=>n.email==s),this.usuarioBD&&(console.log("Usuario encontrado en el array de usuarios:",this.usuarioBD),"paciente"==this.usuarioBD.perfil.toLowerCase()?this.storageService.obtenerImagen(this.usuarioBD.imgPerfil[0]).then(r=>{this.imagenUrl=r,console.log(this.imagenUrl)}):"administrador"==this.usuarioBD.perfil.toLowerCase()&&this.storageService.obtenerImagen(this.usuarioBD.imgPerfil).then(r=>{this.imagenUrl=r,console.log(this.imagenUrl)}))})}})}seleccionarEspecialidad(e){this.especialidadSeleccionada=e.target.value,this.mostrarForm=!0}definirDisponibilidad(){let e=!0;const s={especialidad:this.especialidadSeleccionada,horarios:{}};for(const t in this.diasSeleccionados)if(e=!1,this.diasSeleccionados[t]){const n=document.getElementById(`inputIngreso_${t}`),r=document.getElementById(`inputEgreso_${t}`),l=+n.value,u=+r.value;if(console.log(u),console.log(l),""==n.value||""==r.value)return void(this.mensajeError=`Debe ingresar horarios para ${t}`);if(!(l>=8&&l<=19&&u>=8&&u<=19))return void(this.mensajeError="Los horarios ingresados no son v\xe1lidos");s.horarios[t]={inicio:l,egreso:u}}e?this.mensajeError="Debe definir su disponibilidad":(this.usuarioBD.disponibilidad||(this.usuarioBD.disponibilidad=[]),this.usuarioBD.disponibilidad.push(s),this.database.actualizar("usuarios",this.usuarioBD,this.usuarioBD.id),console.log(this.usuarioBD))}static#i=this.\u0275fac=function(s){return new(s||o)(i.Y36(f.e),i.Y36(h.T),i.Y36(_.V))};static#e=this.\u0275cmp=i.Xpm({type:o,selectors:[["app-mi-perfil"]],decls:4,vars:2,consts:[[1,"container"],[4,"ngIf"],["class","mt-4",4,"ngIf"],[1,"container","py-5"],[1,"text-center"],[1,"row",2,"background-color","#d0e0eb"],[1,"col-lg-4"],[1,"card","mb-4","mt-4",2,"background-color","#d0e0eb"],[1,"card-body","text-center"],["alt","avatar","class","rounded-circle img-fluid","style","width: 150px;",3,"src",4,"ngIf"],[1,"my-3"],[1,"text-muted","mb-1"],["class","text-muted mb-1",4,"ngIf"],[1,"col-lg-8"],[1,"card-body"],[1,"row"],[1,"col-sm-3"],[1,"mb-0"],[1,"col-sm-9"],[1,"text-muted","mb-0"],["alt","avatar",1,"rounded-circle","img-fluid",2,"width","150px",3,"src"],[1,"mt-4"],[1,"card"],[1,"card-body",2,"background-color","#d0e0eb"],[1,"card-title","text-center"],["class","text-center",4,"ngIf"],[2,"display","flex","align-items","center","justify-content","center"],["name","especialidad","id","",3,"change"],["value","","disabled","","selected",""],[3,"value",4,"ngFor","ngForOf"],["class","form-check","style","align-items: center; justify-content: center;",4,"ngIf"],[3,"value"],[1,"form-check",2,"align-items","center","justify-content","center"],[4,"ngFor","ngForOf"],[1,"text-danger"],[1,"btn","mt-4","text-center",2,"background-color","#caff42",3,"click"],[1,"d-flex","align-items-center"],["type","checkbox","name","diasSeleccionados",1,"form-check-input",3,"value","id","ngModel","ngModelChange"],["for","'checkDia' + i",1,"form-check-label"],[3,"for"],["type","number","min","8","max","19",2,"background-color","#bbc8d0",3,"id"]],template:function(s,t){1&s&&(i.TgZ(0,"body")(1,"div",0),i.YNc(2,x,51,9,"section",1),i.YNc(3,M,15,3,"div",2),i.qZA()()),2&s&&(i.xp6(2),i.Q6J("ngIf",null!=t.usuarioBD),i.xp6(1),i.Q6J("ngIf",null!=t.usuarioBD&&"Especialista"==t.usuarioBD.perfil))},dependencies:[p.sg,p.O5,d.YN,d.Kr,d.Wl,d.JJ,d.On],styles:["body[_ngcontent-%COMP%]{background-color:#49708a;height:100%;width:100%}"]})}return o})()}];let q=(()=>{class o{static#i=this.\u0275fac=function(s){return new(s||o)};static#e=this.\u0275mod=i.oAB({type:o});static#o=this.\u0275inj=i.cJS({imports:[m.Bz.forChild(B),m.Bz]})}return o})(),C=(()=>{class o{static#i=this.\u0275fac=function(s){return new(s||o)};static#e=this.\u0275mod=i.oAB({type:o});static#o=this.\u0275inj=i.cJS({providers:[_.V,f.e],imports:[p.ez,q,d.u5]})}return o})()}}]);