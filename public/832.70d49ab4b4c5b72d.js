"use strict";(self.webpackChunkclinica=self.webpackChunkclinica||[]).push([[832],{6832:(F,b,r)=>{r.r(b),r.d(b,{MisTurnosModule:()=>D});var a=r(6814),h=r(1826);class p{constructor(c,i,e,o,s){this.especilistaId=c,this.pacienteId=i,this.calificacion=e,this.comentario=o,this.turnoId=s}toJSON(){return{especilistaId:this.especilistaId,pacienteId:this.pacienteId,calificacion:this.calificacion,comentario:this.comentario,turnoId:this.turnoId}}}var t=r(5879),x=r(6751),C=r(4108),d=r(7045),m=r(95);function v(n,c){if(1&n){const i=t.EpF();t.TgZ(0,"div",23)(1,"input",24),t.NdJ("ngModelChange",function(o){t.CHM(i);const s=t.oxw();return t.KtG(s.opcionFiltro=o)})("change",function(){t.CHM(i);const o=t.oxw();return t.KtG(o.filtrarTabla("estado"))}),t.qZA(),t._uU(2),t._UZ(3,"br"),t.qZA()}if(2&n){const i=c.$implicit,e=t.oxw();t.xp6(1),t.Q6J("value",i)("ngModel",e.opcionFiltro),t.xp6(1),t.hij(" ",i," ")}}function f(n,c){if(1&n){const i=t.EpF();t.ynx(0),t.TgZ(1,"div",23)(2,"input",24),t.NdJ("ngModelChange",function(o){t.CHM(i);const s=t.oxw(3);return t.KtG(s.opcionFiltro=o)})("change",function(){t.CHM(i);const o=t.oxw(3);return t.KtG(o.filtrarTabla("especialidad"))}),t.qZA(),t._uU(3),t._UZ(4,"br"),t.qZA(),t.BQk()}if(2&n){const i=c.$implicit,e=t.oxw(3);t.xp6(2),t.Q6J("value",i)("ngModel",e.opcionFiltro),t.xp6(1),t.hij(" ",i," ")}}function u(n,c){if(1&n&&(t.ynx(0),t.YNc(1,f,5,3,"ng-container",13),t.BQk()),2&n){const i=c.$implicit;t.xp6(1),t.Q6J("ngForOf",i.especialidades)}}function Z(n,c){if(1&n&&(t.TgZ(0,"div",25),t.YNc(1,u,2,1,"ng-container",13),t.qZA()),2&n){const i=t.oxw();t.xp6(1),t.Q6J("ngForOf",i.especialidades)}}function l(n,c){if(1&n){const i=t.EpF();t.ynx(0),t.TgZ(1,"div",23)(2,"input",26),t.NdJ("ngModelChange",function(o){t.CHM(i);const s=t.oxw();return t.KtG(s.opcionFiltro=o)}),t.qZA(),t._uU(3),t.qZA(),t.BQk()}if(2&n){const i=c.$implicit,e=t.oxw();t.xp6(2),t.Q6J("value",i)("ngModel",e.opcionFiltro),t.xp6(1),t.hij(" ",i," ")}}function _(n,c){if(1&n&&(t.TgZ(0,"th",19),t._uU(1),t.qZA()),2&n){const i=c.$implicit;t.xp6(1),t.Oqu(i)}}function A(n,c){if(1&n&&(t.ynx(0),t.TgZ(1,"p",32),t._uU(2),t.qZA(),t.BQk()),2&n){const i=t.oxw().$implicit,e=t.oxw().$implicit;t.xp6(2),t.Oqu(e[i])}}function T(n,c){if(1&n&&(t.ynx(0),t.TgZ(1,"b"),t._uU(2),t.qZA(),t.BQk()),2&n){const i=t.oxw(2).$implicit,e=t.oxw().$implicit;t.xp6(2),t.Oqu(e[i])}}function M(n,c){if(1&n&&(t.ynx(0),t._uU(1),t.BQk()),2&n){const i=t.oxw(2).$implicit,e=t.oxw().$implicit;t.xp6(1),t.hij(" ",e[i]," ")}}function w(n,c){if(1&n&&(t.YNc(0,T,3,1,"ng-container",20),t.YNc(1,M,2,1,"ng-container",20)),2&n){const i=t.oxw().$implicit;t.Q6J("ngIf","estado"==i),t.xp6(1),t.Q6J("ngIf","estado"!==i&&"reseniasCancelacion"!==i)}}function k(n,c){if(1&n){const i=t.EpF();t.TgZ(0,"td",29),t.NdJ("click",function(){t.CHM(i);const o=t.oxw().$implicit,s=t.oxw(2);return t.KtG(s.seleccionarTurno(o))}),t.YNc(1,A,3,1,"ng-container",30),t.YNc(2,w,2,2,"ng-template",null,31,t.W1O),t.qZA()}if(2&n){const i=c.$implicit,e=t.MAs(3);t.xp6(1),t.Q6J("ngIf","rese\xf1aCancelacion"==i)("ngIfElse",e)}}function U(n,c){if(1&n&&(t.TgZ(0,"li"),t._uU(1),t.qZA()),2&n){const i=c.$implicit;t.xp6(1),t.AsE(" ",i.dato," - ",i.descripcion," ")}}function I(n,c){if(1&n&&(t.TgZ(0,"ul")(1,"li"),t._uU(2),t.qZA(),t.TgZ(3,"li"),t._uU(4),t.qZA(),t.TgZ(5,"li"),t._uU(6),t.qZA(),t.TgZ(7,"li"),t._uU(8),t.qZA(),t.YNc(9,U,2,2,"li",13),t.TgZ(10,"p",34),t._uU(11,"________________________"),t.qZA()()),2&n){const i=c.$implicit;t.xp6(2),t.hij("Altura: ",i.altura,""),t.xp6(2),t.hij("Peso: ",i.peso,""),t.xp6(2),t.hij("Presi\xf3n: ",i.presion,""),t.xp6(2),t.hij("Temperatura: ",i.temperatura,""),t.xp6(1),t.Q6J("ngForOf",i.detalles)}}function S(n,c){if(1&n&&(t.ynx(0),t.TgZ(1,"div",33),t.YNc(2,I,12,5,"ul",13),t.qZA(),t.BQk()),2&n){const i=t.oxw().$implicit,e=t.oxw(2);t.xp6(2),t.Q6J("ngForOf",e.encontrarUsuario(i.pacienteId).historiaClinica)}}function J(n,c){if(1&n&&(t.TgZ(0,"tr")(1,"th",27),t._uU(2),t.qZA(),t.YNc(3,k,4,2,"td",28),t.TgZ(4,"td"),t.YNc(5,S,3,1,"ng-container",20),t.qZA()()),2&n){const i=c.$implicit,e=c.index,o=t.oxw(2);t.xp6(2),t.Oqu(e+1),t.xp6(1),t.Q6J("ngForOf",o.turnosKeys),t.xp6(2),t.Q6J("ngIf",o.mostrarHistoriaClinica(i))}}function q(n,c){if(1&n&&(t.TgZ(0,"tbody"),t.YNc(1,J,6,3,"tr",13),t.qZA()),2&n){const i=t.oxw();t.xp6(1),t.Q6J("ngForOf",i.tablaFiltrada)}}function N(n,c){if(1&n){const i=t.EpF();t.TgZ(0,"button",42),t.NdJ("click",function(){t.CHM(i),t.oxw();const o=t.MAs(6),s=t.oxw();return t.KtG(s.cancelarTurno(o.value))}),t._uU(1,"Cancelar"),t.qZA()}}function E(n,c){if(1&n&&(t.TgZ(0,"div",35)(1,"div",36)(2,"div",37)(3,"span",38),t._uU(4,"Rese\xf1a "),t.qZA()(),t._UZ(5,"input",39,40),t.qZA(),t.TgZ(7,"div",35),t.YNc(8,N,2,0,"button",41),t.qZA()()),2&n){const i=t.oxw();t.xp6(8),t.Q6J("ngIf","solicitado"==i.turnoSeleccionado.estado)}}function P(n,c){if(1&n){const i=t.EpF();t.TgZ(0,"div")(1,"div",36)(2,"div",37)(3,"span",38),t._uU(4,"Rese\xf1a "),t.qZA()(),t._UZ(5,"input",39,40),t.qZA(),t.TgZ(7,"p",32)(8,"b"),t._uU(9),t.qZA()(),t.TgZ(10,"div",35)(11,"button",43),t.NdJ("click",function(){t.CHM(i);const o=t.oxw();return t.KtG(o.aceptarTurno())}),t._uU(12,"Aceptar"),t.qZA(),t.TgZ(13,"button",44),t.NdJ("click",function(){t.CHM(i);const o=t.MAs(6),s=t.oxw();return t.KtG(s.rechazarTurno(o.value))}),t._uU(14,"Rechazar"),t.qZA()()()}if(2&n){const i=t.oxw();t.xp6(9),t.Oqu(i.mensajeError)}}function O(n,c){if(1&n){const i=t.EpF();t.TgZ(0,"button",49),t.NdJ("click",function(){t.CHM(i),t.oxw();const o=t.MAs(6),s=t.MAs(12),g=t.oxw();return t.KtG(g.finalizarTurno(o.value,s.value))}),t._uU(1,"Finalizar"),t.qZA()}}function Q(n,c){if(1&n){const i=t.EpF();t.TgZ(0,"button",44),t.NdJ("click",function(){t.CHM(i),t.oxw();const o=t.MAs(6),s=t.oxw();return t.KtG(s.cancelarTurno(o.value))}),t._uU(1,"Cancelar"),t.qZA()}}function L(n,c){if(1&n&&(t.TgZ(0,"div")(1,"div",36)(2,"div",37)(3,"span",38),t._uU(4,"Rese\xf1a "),t.qZA()(),t._UZ(5,"input",39,40),t.qZA(),t.TgZ(7,"div",36)(8,"div",37)(9,"span",45),t._uU(10,"Diagn\xf3stico "),t.qZA()(),t._UZ(11,"input",39,46),t.qZA(),t.TgZ(13,"p",32)(14,"b"),t._uU(15),t.qZA()(),t.TgZ(16,"div",35),t.YNc(17,O,2,0,"button",47),t.YNc(18,Q,2,0,"button",48),t.qZA()()),2&n){const i=t.oxw();t.xp6(15),t.Oqu(i.mensajeError),t.xp6(2),t.Q6J("ngIf","aceptado"==i.turnoSeleccionado.estado.toLowerCase()),t.xp6(1),t.Q6J("ngIf","aceptado"==i.turnoSeleccionado.estado.toLowerCase())}}function Y(n,c){if(1&n){const i=t.EpF();t.TgZ(0,"div",50)(1,"div",36)(2,"div",37)(3,"span",38),t._uU(4,"Rese\xf1a "),t.qZA()(),t._UZ(5,"input",39,40),t.qZA(),t.TgZ(7,"p")(8,"b"),t._uU(9,"Califica la atenci\xf3n del especialista:"),t.qZA()(),t.TgZ(10,"div",9)(11,"img",51),t.NdJ("click",function(){t.CHM(i);const o=t.oxw();return t.KtG(o.seleccionarPuntuacion(1))}),t.qZA(),t.TgZ(12,"img",51),t.NdJ("click",function(){t.CHM(i);const o=t.oxw();return t.KtG(o.seleccionarPuntuacion(2))}),t.qZA(),t.TgZ(13,"img",51),t.NdJ("click",function(){t.CHM(i);const o=t.oxw();return t.KtG(o.seleccionarPuntuacion(3))}),t.qZA(),t.TgZ(14,"img",51),t.NdJ("click",function(){t.CHM(i);const o=t.oxw();return t.KtG(o.seleccionarPuntuacion(4))}),t.qZA(),t.TgZ(15,"img",51),t.NdJ("click",function(){t.CHM(i);const o=t.oxw();return t.KtG(o.seleccionarPuntuacion(5))}),t.qZA()(),t.TgZ(16,"div",35)(17,"button",52),t.NdJ("click",function(){t.CHM(i);const o=t.MAs(6),s=t.oxw();return t.KtG(s.aceptar(o.value))}),t._uU(18,"Aceptar"),t.qZA()(),t._UZ(19,"br")(20,"br"),t.qZA()}if(2&n){const i=t.oxw();t.xp6(11),t.Q6J("src",i.puntuacion>=1?"assets/img/full-star.png":"assets/img/empty-star.png",t.LSH),t.xp6(1),t.Q6J("src",i.puntuacion>=2?"assets/img/full-star.png":"assets/img/empty-star.png",t.LSH),t.xp6(1),t.Q6J("src",i.puntuacion>=3?"assets/img/full-star.png":"assets/img/empty-star.png",t.LSH),t.xp6(1),t.Q6J("src",i.puntuacion>=4?"assets/img/full-star.png":"assets/img/empty-star.png",t.LSH),t.xp6(1),t.Q6J("src",i.puntuacion>=5?"assets/img/full-star.png":"assets/img/empty-star.png",t.LSH)}}function H(n,c){1&n&&t._UZ(0,"div")}const K=function(){return["presion","altura","temperatura","detalle","dia","horario"]},z=[{path:"",component:(()=>{class n{constructor(i,e){this.database=i,this.afauth=e,this.turnos=[],this.usuarios=[],this.especialistas=[],this.esPaciente=!1,this.pacientes=[],this.turnosKeys=[],this.tablaFiltrada=[],this.mensajeError="",this.especialidades=[],this.resenias=[],this.mostrarDivEspecialista=!1,this.mostrarDivResenia=!1,this.tablaCompleta=[],this.mostrarDivDiagnostico=!1,this.mostrarEncuesta=!1,this.mostrarCalificacion=!1,this.puntuacion=0,this.mostrarBtnCancelar=!1,this.filtros=["especialidad","dia","horario","estado","rese\xf1aCancelacion","temperatura","presion","altura","peso","detalle"],this.especialidadSeleccionada="",this.especialistaSeleccionado="",this.estadosFiltro=["solicitado","aceptado","rechazado","cancelado","finalizado"],this.campoSeleccionado=""}ngOnInit(){this.afauth.getAuthState().subscribe(i=>{if(i){const e=i.email?.toString();console.log(e),this.database.obtenerTodos("usuarios").subscribe(o=>{this.usuarios=o.map(s=>{let g=s.payload.doc.data();return g.id=s.payload.doc.id,g}),this.especialistas=this.usuarios.filter(s=>"Especialista"==s.perfil),this.pacientes=this.usuarios.filter(s=>"Paciente"==s.perfil),this.usuarioActualBd=this.usuarios.find(s=>s.email==e),this.usuarioActualId=this.usuarioActualBd.id,console.log(this.usuarioActualId),this.esPaciente=!!this.usuarioActualBd&&"paciente"==this.usuarioActualBd.perfil.toLowerCase(),console.log("Es Paciente : "+this.esPaciente),console.log(this.usuarios),console.log(this.pacientes)})}this.database.obtenerTodos("especialidades").subscribe(e=>{this.especialidades=e.map(o=>{let s=o.payload.doc.data();return s.id=o.payload.doc.id,s}),console.log(this.especialidades)}),this.turnos=[],this.database.obtenerTodos("turnos").subscribe(e=>{this.turnos=e.map(o=>{let s=o.payload.doc.data();return s.id=o.payload.doc.id,s}),this.resenias=[],this.turnos.forEach(o=>{(this.esPaciente&&o.pacienteId==this.usuarioActualId&&o.hasOwnProperty("rese\xf1aCancelacion")||!this.esPaciente&&o.especialistaId==this.usuarioActualId&&o.hasOwnProperty("rese\xf1aCancelacion"))&&this.resenias.push({id:o.id,resenia:o.rese\u00f1aCancelacion,dia:o.dia,horario:o.horario,especialidad:o.especialidad})}),0==this.turnosKeys.length&&this.turnosKeys.push("especialidad","dia","horario","estado","rese\xf1aCancelacion"),console.log(this.turnosKeys),this.filtrarTurnos(),console.log(this.resenias)})})}seleccionarPuntuacion(i){this.puntuacion=i,console.log("Puntuaci\xf3n seleccionada:",this.puntuacion)}filtrarTurnos(){this.esPaciente?(console.log(this.usuarioActualId),this.tablaFiltrada=this.turnos.filter(i=>i.pacienteId==this.usuarioActualId),this.tablaCompleta=this.tablaFiltrada):(this.tablaFiltrada=this.turnos.filter(i=>i.especialistaId==this.usuarioActualId),this.tablaCompleta=this.tablaFiltrada)}encontrarUsuario(i){return this.usuarios.find(e=>e.id===i)||{}}mostrarHistoriaClinica(i){return i.pacienteId&&this.usuarios&&this.usuarios.length>0&&this.encontrarUsuario(i.pacienteId).historiaClinica&&this.encontrarUsuario(i.pacienteId).historiaClinica.length>0}seleccionarTurno(i){this.turnoSeleccionado=i,console.log(i.estado),!this.esPaciente&&"aceptado"==this.turnoSeleccionado.estado.toLowerCase()||!this.esPaciente&&"solicitado"==this.turnoSeleccionado.estado.toLowerCase()?this.mostrarDivEspecialista=!0:!this.esPaciente&&"aceptado"!=this.turnoSeleccionado.estado.toLowerCase()&&!this.esPaciente&&"solicitado"!=this.turnoSeleccionado.estado.toLowerCase()||"cancelado"==this.turnoSeleccionado.estado.toLowerCase()?(this.mostrarDivEspecialista=!1,this.mostrarCalificacion=!1):this.esPaciente&&"finalizado"==i.estado.toLowerCase()||this.esPaciente&&"finalizado"==i.estado.toLowerCase()&&i.hasOwnProperty("rese\xf1aFinalizacion")?this.mostrarCalificacion=!0:this.esPaciente&&"finalizado"!=i.estado.toLowerCase()&&(this.mostrarCalificacion=!1)}aceptar(i){if(""!==i.trim()&&"finalizado"==this.turnoSeleccionado.estado.toLowerCase()){console.log("aqui");let o=new p(this.turnoSeleccionado.especialistaId,this.usuarioActualId,this.puntuacion.toString(),i,this.turnoSeleccionado.id).toJSON();console.log(o),this.database.crear("calificaciones",o),this.mostrarCalificacion=!1}else this.mensajeError="El campo de rese\xf1a y diagnostico no puede estar vac\xedo"}cancelarTurno(i){""!==i.trim()&&"solicitado"==this.turnoSeleccionado.estado.toLowerCase()?(this.turnoSeleccionado.estado="cancelado",this.turnoSeleccionado.rese\u00f1aCancelacion=i,this.database.actualizar("turnos",this.turnoSeleccionado,this.turnoSeleccionado.id)):this.mensajeError="El campo de rese\xf1a por cancelaci\xf3n no puede estar vac\xedo"}aceptarTurno(){"solicitado"==this.turnoSeleccionado.estado.toLowerCase()&&(this.turnoSeleccionado.estado="aceptado",this.database.actualizar("turnos",this.turnoSeleccionado,this.turnoSeleccionado.id))}rechazarTurno(i){""!==i.trim()?(this.turnoSeleccionado.estado="rechazado",this.turnoSeleccionado.rese\u00f1aCancelacion=i,this.database.actualizar("turnos",this.turnoSeleccionado,this.turnoSeleccionado.id)):this.mensajeError="El campo de rese\xf1a por cancelaci\xf3n no puede estar vac\xedo"}finalizarTurno(i,e){this.mostrarDivDiagnostico=!0,""!==i.trim()&&""!==e.trim()&&"aceptado"==this.turnoSeleccionado.estado.toLowerCase()?(this.turnoSeleccionado.estado="finalizado",this.turnoSeleccionado.rese\u00f1aFinalizacion=i,this.turnoSeleccionado.diagnostico=e,this.database.actualizar("turnos",this.turnoSeleccionado,this.turnoSeleccionado.id)):this.mensajeError="El campo de rese\xf1a y diagnostico no puede estar vac\xedo"}onRadioChange(i){console.log("Cambio en radio button:",i),this.filtrarTabla(i)}onTextoChange(){console.log("Cambio en el campo de texto")}filtrarTabla(i){console.log(this.opcionFiltro),console.log(i),this.campoSeleccionado=i,this.tablaFiltrada=[...this.tablaCompleta],""!==this.detalleFiltro.trim()&&(this.campoSeleccionado=i),"estado"===i?this.tablaFiltrada=this.tablaFiltrada.filter(e=>e.estado===this.opcionFiltro):"especialidad"===i&&(this.tablaFiltrada=this.tablaFiltrada.filter(e=>e.especialidad===this.opcionFiltro)),"dia"===i?this.tablaFiltrada=this.tablaFiltrada.filter(e=>e.dia.includes(this.detalleFiltro)):"horario"===i&&(this.tablaFiltrada=this.tablaFiltrada.filter(e=>e.horario.includes(this.detalleFiltro))),("altura"===this.opcionFiltro||"peso"===this.opcionFiltro||"presion"===this.opcionFiltro||"detalle"===this.opcionFiltro)&&(this.tablaFiltrada=this.tablaFiltrada.filter(e=>{const o=this.encontrarUsuario(e.pacienteId)?.historiaClinica;return console.log(o),!!o&&o.some(s=>"detalle"===this.opcionFiltro?s.detalles.some(g=>g.dato.includes(this.detalleFiltro)):s[this.opcionFiltro]&&s[this.opcionFiltro].toString().includes(this.detalleFiltro))}))}eliminarFiltro(){this.opcionFiltro="",this.tablaFiltrada=this.tablaCompleta}static#t=this.\u0275fac=function(e){return new(e||n)(t.Y36(x.T),t.Y36(C.e))};static#i=this.\u0275cmp=t.Xpm({type:n,selectors:[["app-mis-turnos"]],decls:51,vars:11,consts:[[1,"container"],[1,"text-center","text-dark"],[1,"row","mb-4"],[1,"col-12",2,"text-align","center"],[1,"card"],[1,"card-header","text-center",2,"background-color","#397c9e"],[1,"card-body",2,"background-color","#eee"],[1,"row"],[1,"col-4"],[1,"card-body"],[1,"card-title"],["class","radio-buttons-container mb-1",4,"ngFor","ngForOf"],["id","especialidad",4,"ngIf"],[4,"ngFor","ngForOf"],["name","detalleFiltro","type","text",1,"form-control","mt-2",3,"ngModel","ngModelChange","keyup.enter"],[1,"btn","btn-sm","btn-danger","mt-3","mb-2",3,"click"],[1,"table","table-bordered","table-light","table-striped","table-responsive"],["scope","col",2,"background-color","#49708a"],["class","text-center","style","background-color: #49708a;","scope","col",4,"ngFor","ngForOf"],["scope","col",1,"text-center",2,"background-color","#49708a"],[4,"ngIf"],["style","text-align: center;",4,"ngIf"],["class","card","style","text-align: center; background-color: #88abc2;",4,"ngIf"],[1,"radio-buttons-container","mb-1"],["name","filtro","type","radio",1,"mx-2",3,"value","ngModel","ngModelChange","change"],["id","especialidad"],["name","filtro","type","radio",1,"mx-2",3,"value","ngModel","ngModelChange"],["scope","row"],[3,"click",4,"ngFor","ngForOf"],[3,"click"],[4,"ngIf","ngIfElse"],["otherContent",""],[1,"text-danger"],[1,"historia-clinica-container"],[1,"text-center","text-muted"],[2,"text-align","center"],[1,"input-group","input-group-sm","mb-3"],[1,"input-group-prepend"],["id","rese\xf1a",1,"input-group-text",2,"background-color","#ddd"],["type","text","aria-label","Small","aria-describedby","inputGroup-sizing-sm",1,"form-control"],["reseniaInput",""],["class","btn btn-danger mx-2 btn-lg",3,"click",4,"ngIf"],[1,"btn","btn-danger","mx-2","btn-lg",3,"click"],[1,"btn","mx-2","btn-success","btn-lg",3,"click"],[1,"btn","mx-2","btn-danger","btn-lg",3,"click"],["id","diagnostico",1,"input-group-text",2,"background-color","#ddd"],["diagnosticoInput",""],["class","btn mx-2 btn-primary btn-lg",3,"click",4,"ngIf"],["class","btn mx-2 btn-danger  btn-lg",3,"click",4,"ngIf"],[1,"btn","mx-2","btn-primary","btn-lg",3,"click"],[1,"card",2,"text-align","center","background-color","#88abc2"],["alt","","width","50",3,"src","click"],[1,"btn","mx-2","btn-success",2,"width","100px",3,"click"]],template:function(e,o){1&e&&(t.TgZ(0,"body")(1,"div",0),t._UZ(2,"app-navbar")(3,"br")(4,"br"),t.TgZ(5,"h3",1),t._uU(6,"Tus Turnos"),t.qZA(),t._UZ(7,"br"),t.TgZ(8,"div",2)(9,"div",3)(10,"div",4)(11,"h5",5),t._uU(12,"Filtrar Tabla"),t.qZA(),t.TgZ(13,"div",6)(14,"div",7)(15,"div",8)(16,"div",4)(17,"div",9)(18,"h5",10),t._uU(19,"Estado"),t.qZA(),t.YNc(20,v,4,3,"div",11),t.qZA()()(),t.TgZ(21,"div",8)(22,"div",4)(23,"div",9)(24,"h5",10),t._uU(25,"Especialidad"),t.qZA(),t.YNc(26,Z,2,1,"div",12),t.qZA()()(),t.TgZ(27,"div",8)(28,"div",4)(29,"div",9)(30,"h5",10),t._uU(31,"Dia - Horario - Hist. Clinica"),t.qZA(),t.YNc(32,l,4,3,"ng-container",13),t.TgZ(33,"input",14),t.NdJ("ngModelChange",function(g){return o.detalleFiltro=g})("keyup.enter",function(){return o.filtrarTabla(o.opcionFiltro)}),t.qZA()()()()(),t.TgZ(34,"button",15),t.NdJ("click",function(){return o.eliminarFiltro()}),t._uU(35,"Eliminar Filtros"),t.qZA()()()()(),t.TgZ(36,"table",16)(37,"thead")(38,"tr")(39,"th",17),t._uU(40,"#"),t.qZA(),t.YNc(41,_,2,1,"th",18),t.TgZ(42,"th",19),t._uU(43,"Historia Cl\xednica"),t.qZA()()(),t.YNc(44,q,2,1,"tbody",20),t.qZA(),t.YNc(45,E,9,1,"div",21),t.YNc(46,P,15,1,"div",20),t.YNc(47,L,19,3,"div",20),t.YNc(48,Y,21,5,"div",22),t.YNc(49,H,1,0,"div",20),t._UZ(50,"br"),t.qZA()()),2&e&&(t.xp6(20),t.Q6J("ngForOf",o.estadosFiltro),t.xp6(6),t.Q6J("ngIf",null!=o.especialidades&&o.especialidades.length>0),t.xp6(6),t.Q6J("ngForOf",t.DdM(10,K)),t.xp6(1),t.Q6J("ngModel",o.detalleFiltro),t.xp6(8),t.Q6J("ngForOf",o.turnosKeys),t.xp6(3),t.Q6J("ngIf",null!=o.tablaFiltrada&&o.tablaFiltrada.length>0),t.xp6(1),t.Q6J("ngIf",o.esPaciente&&!o.mostrarCalificacion&&"solicitado"==(null==o.turnoSeleccionado?null:o.turnoSeleccionado.estado)),t.xp6(1),t.Q6J("ngIf",null!=o.turnoSeleccionado&&!o.esPaciente&&"solicitado"==o.turnoSeleccionado.estado.toLowerCase()),t.xp6(1),t.Q6J("ngIf",null!=o.turnoSeleccionado&&!o.esPaciente&&"aceptado"==o.turnoSeleccionado.estado.toLowerCase()),t.xp6(1),t.Q6J("ngIf",o.mostrarCalificacion&&o.esPaciente))},dependencies:[a.sg,a.O5,d.S,m.Fj,m._,m.JJ,m.On],styles:['@charset "UTF-8";body[_ngcontent-%COMP%]{height:100%;min-height:100vh;width:100vw;background-color:#d0e0eb}.radio-buttons-container[_ngcontent-%COMP%]{display:flex}.radio-buttons-container[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{margin-right:10px}.historia-clinica-container[_ngcontent-%COMP%]{max-height:150px;overflow-y:auto}']})}return n})()}];let B=(()=>{class n{static#t=this.\u0275fac=function(e){return new(e||n)};static#i=this.\u0275mod=t.oAB({type:n});static#o=this.\u0275inj=t.cJS({imports:[h.Bz.forChild(z),h.Bz]})}return n})();var y=r(5383);let D=(()=>{class n{static#t=this.\u0275fac=function(e){return new(e||n)};static#i=this.\u0275mod=t.oAB({type:n});static#o=this.\u0275inj=t.cJS({imports:[a.ez,B,y.W,m.u5,y.W]})}return n})()},5383:(F,b,r)=>{r.d(b,{W:()=>C});var a=r(6814),h=r(1826),p=r(5879);const t=[];let x=(()=>{class d{static#t=this.\u0275fac=function(f){return new(f||d)};static#i=this.\u0275mod=p.oAB({type:d});static#o=this.\u0275inj=p.cJS({imports:[h.Bz.forChild(t),h.Bz]})}return d})(),C=(()=>{class d{static#t=this.\u0275fac=function(f){return new(f||d)};static#i=this.\u0275mod=p.oAB({type:d});static#o=this.\u0275inj=p.cJS({imports:[a.ez,x]})}return d})()},7045:(F,b,r)=>{r.d(b,{S:()=>f});var a=r(5879),h=r(4108),p=r(6751),t=r(6814),x=r(1826);function C(u,Z){1&u&&a._UZ(0,"img",13)}function d(u,Z){1&u&&a._UZ(0,"img",14)}function m(u,Z){1&u&&a._UZ(0,"img",15)}function v(u,Z){if(1&u&&(a.TgZ(0,"a",9),a._uU(1,"\xa0\xa0\xa0\xa0\xa0 "),a.YNc(2,C,1,0,"img",10),a.YNc(3,d,1,0,"img",11),a.YNc(4,m,1,0,"img",12),a._uU(5),a.qZA()),2&u){const l=a.oxw();a.xp6(2),a.Q6J("ngIf",null!=l.perfilActual&&"paciente"==l.perfilActual.toLowerCase()),a.xp6(1),a.Q6J("ngIf",null!=l.perfilActual&&"especialista"==l.perfilActual.toLowerCase()),a.xp6(1),a.Q6J("ngIf",null!=l.perfilActual&&"administrador"==l.perfilActual.toLowerCase()),a.xp6(1),a.AsE(" Bienvenido/a, ",l.usuarioActual.nombre," - ",l.perfilActual," ")}}let f=(()=>{class u{constructor(l,_){this.afauth=l,this.database=_,this.usuarios=[]}ngOnInit(){this.afauth.getAuthState().subscribe(l=>{if(l){const _=l.email?.toString();console.log(_),this.database.obtenerTodos("usuarios").subscribe(A=>{this.usuarios=A.map(T=>{let M=T.payload.doc.data();return M.id=T.payload.doc.id,M}),this.usuarioActual=this.usuarios.find(T=>T.email==_),console.log(this.usuarioActual.id),this.perfilActual=this.usuarioActual?this.usuarioActual.perfil.toLowerCase():null,console.log("Perfil actual"+this.perfilActual)})}})}static#t=this.\u0275fac=function(_){return new(_||u)(a.Y36(h.e),a.Y36(p.T))};static#i=this.\u0275cmp=a.Xpm({type:u,selectors:[["app-navbar"]],decls:14,vars:1,consts:[[1,"container"],[1,"navbar","navbar-light",2,"background-color","#397c9e"],["class","navbar-brand text-light","href","#",4,"ngIf"],[1,"ml-auto"],["type","button","routerLink","/home",1,"btn","mx-4","my-2",2,"background-color","#eee"],["type","button","routerLink","/login",1,"btn","mx-4","my-2",2,"background-color","#eee"],["type","button","routerLink","/solicitar-turno",1,"btn","mx-4","my-2",2,"background-color","#eee"],["type","button","routerLink","/mis-turnos",1,"btn","mx-4","my-2",2,"background-color","#eee"],["type","button","routerLink","/mi-perfil",1,"btn","mx-4","my-2",2,"background-color","#eee"],["href","#",1,"navbar-brand","text-light"],["src","../../../assets/img/paciente.png","width","30","height","30","class","d-inline-block align-top","alt","",4,"ngIf"],["src","../../../assets/img/doctor.png","width","30","height","30","class","d-inline-block align-top","alt","",4,"ngIf"],["src","../../../assets/img/admin.png","width","30","height","30","class","d-inline-block align-top","alt","",4,"ngIf"],["src","../../../assets/img/paciente.png","width","30","height","30","alt","",1,"d-inline-block","align-top"],["src","../../../assets/img/doctor.png","width","30","height","30","alt","",1,"d-inline-block","align-top"],["src","../../../assets/img/admin.png","width","30","height","30","alt","",1,"d-inline-block","align-top"]],template:function(_,A){1&_&&(a.TgZ(0,"div",0)(1,"nav",1),a.YNc(2,v,6,5,"a",2),a.TgZ(3,"div",3)(4,"button",4),a._uU(5,"Home"),a.qZA(),a.TgZ(6,"button",5),a._uU(7,"Login"),a.qZA(),a.TgZ(8,"button",6),a._uU(9,"Solicitar Turno"),a.qZA(),a.TgZ(10,"button",7),a._uU(11,"Mis Turnos"),a.qZA(),a.TgZ(12,"button",8),a._uU(13,"Mi Perfil"),a.qZA()()()()),2&_&&(a.xp6(2),a.Q6J("ngIf",null!=A.usuarioActual))},dependencies:[t.O5,x.rH]})}return u})()}}]);