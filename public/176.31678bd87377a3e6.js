"use strict";(self.webpackChunkclinica=self.webpackChunkclinica||[]).push([[176],{7176:(ht,_,l)=>{l.r(_),l.d(_,{SeccionUsuariosModule:()=>gt});var u=l(6814),f=l(1826),t=l(5879),h=l(4277),Z=l(8388),p=l(6751);function b(e,s){if(1&e&&(t.TgZ(0,"th",11),t._uU(1),t.qZA()),2&e){const i=s.$implicit;t.xp6(1),t.Oqu(i)}}function T(e,s){if(1&e&&(t.TgZ(0,"td"),t._uU(1),t.qZA()),2&e){const i=s.$implicit,o=t.oxw().$implicit;t.xp6(1),t.Oqu(o[i])}}function x(e,s){if(1&e&&(t.TgZ(0,"tr")(1,"th",12),t._uU(2),t.qZA(),t.YNc(3,T,2,1,"td",7),t.qZA()),2&e){const i=s.index,o=t.oxw();t.xp6(2),t.Oqu(i+1),t.xp6(1),t.Q6J("ngForOf",o.keysPacientes)}}function v(e,s){if(1&e&&(t.ynx(0),t.TgZ(1,"th",11),t._uU(2),t.qZA(),t.BQk()),2&e){const i=t.oxw().$implicit;t.xp6(2),t.Oqu(i)}}function U(e,s){if(1&e&&(t.ynx(0),t.YNc(1,v,3,1,"ng-container",10),t.BQk()),2&e){const i=s.$implicit;t.xp6(1),t.Q6J("ngIf","disponibilidad"!==i)}}function A(e,s){if(1&e&&(t.TgZ(0,"td"),t._uU(1),t.qZA()),2&e){const i=t.oxw(2).$implicit,o=t.oxw().$implicit;t.xp6(1),t.hij(" ",o[i]," ")}}function C(e,s){1&e&&(t.ynx(0),t._uU(1,"si"),t.BQk())}function y(e,s){1&e&&(t.ynx(0),t._uU(1,"no"),t.BQk())}function I(e,s){if(1&e&&(t.TgZ(0,"td"),t.YNc(1,C,2,0,"ng-container",10),t.YNc(2,y,2,0,"ng-container",10),t.qZA()),2&e){const i=t.oxw(2).$implicit,o=t.oxw().$implicit;t.xp6(1),t.Q6J("ngIf",o[i]),t.xp6(1),t.Q6J("ngIf",!o[i])}}function q(e,s){if(1&e&&(t.ynx(0),t.YNc(1,A,2,1,"td",10),t.YNc(2,I,3,2,"td",10),t.BQk()),2&e){const i=t.oxw().$implicit;t.xp6(1),t.Q6J("ngIf","habilitacion"!==i),t.xp6(1),t.Q6J("ngIf","habilitacion"===i)}}function k(e,s){if(1&e&&(t.ynx(0),t.YNc(1,q,3,2,"ng-container",10),t.BQk()),2&e){const i=s.$implicit;t.xp6(1),t.Q6J("ngIf","disponibilidad"!==i)}}function E(e,s){if(1&e){const i=t.EpF();t.TgZ(0,"tr",13),t.NdJ("click",function(){const a=t.CHM(i).$implicit,c=t.oxw();return t.KtG(c.seleccionarEspecialista(a))}),t.TgZ(1,"th",12),t._uU(2),t.qZA(),t.YNc(3,k,2,1,"ng-container",7),t.qZA()}if(2&e){const i=s.index,o=t.oxw();t.xp6(2),t.Oqu(i+1),t.xp6(1),t.Q6J("ngForOf",o.keysEspecialistas)}}function N(e,s){if(1&e&&(t.TgZ(0,"h4",14),t._uU(1),t.qZA()),2&e){const i=t.oxw();t.xp6(1),t.lnq("Especialista seleccionado: ",i.especialistaSeleccionado.nombre," ",i.especialistaSeleccionado.apellido," - ",i.especialistaSeleccionado.especialidad," ")}}function w(e,s){if(1&e){const i=t.EpF();t.TgZ(0,"div")(1,"button",15),t.NdJ("click",function(){t.CHM(i);const n=t.oxw();return t.KtG(n.habilitar())}),t._uU(2,"Habilitar"),t.qZA()()}}function J(e,s){if(1&e){const i=t.EpF();t.TgZ(0,"div")(1,"button",16),t.NdJ("click",function(){t.CHM(i);const n=t.oxw();return t.KtG(n.deshabilitar())}),t._uU(2,"Deshabilitar"),t.qZA()()}}function F(e,s){if(1&e&&(t.TgZ(0,"th",11),t._uU(1),t.qZA()),2&e){const i=s.$implicit;t.xp6(1),t.Oqu(i)}}function S(e,s){if(1&e&&(t.TgZ(0,"td"),t._uU(1),t.qZA()),2&e){const i=s.$implicit,o=t.oxw().$implicit;t.xp6(1),t.Oqu(o[i])}}function O(e,s){if(1&e&&(t.TgZ(0,"tr")(1,"th",12),t._uU(2),t.qZA(),t.YNc(3,S,2,1,"td",7),t.qZA()),2&e){const i=s.index,o=t.oxw();t.xp6(2),t.Oqu(i+1),t.xp6(1),t.Q6J("ngForOf",o.keysAdministradores)}}let Q=(()=>{class e{constructor(i){this.database=i,this.usuarios=[],this.mensajeError="",this.pacientes=[],this.especialistas=[],this.administradores=[],this.especialistaSeleccionado=null,this.keysAdministradores=[],this.keysPacientes=[],this.keysEspecialistas=[]}ngOnInit(){this.database.obtenerTodos("usuarios").subscribe(i=>{this.usuarios=i.map(o=>{let n=o.payload.doc.data();return n.id=o.payload.doc.id,n}),this.obtenerKeys(),this.cargarTablas(),console.log(this.usuarios)})}obtenerKeys(){this.usuarios.forEach(i=>{const o=i.perfil.toLowerCase();0==this.keysPacientes.length&&"paciente"==o?this.keysPacientes=Object.keys(i):0==this.keysEspecialistas.length&&"especialista"==o?this.keysEspecialistas=Object.keys(i):0==this.keysAdministradores.length&&"administrador"==o&&(this.keysAdministradores=Object.keys(i))})}cargarTablas(){this.pacientes=[],this.especialistas=[],this.administradores=[],this.usuarios.forEach(i=>{const o=i.perfil.toLowerCase();"paciente"==o?this.pacientes.push(i):"especialista"==o?this.especialistas.push(i):"administrador"==o&&this.administradores.push(i)}),console.log(this.pacientes),console.log(this.especialistas)}seleccionarEspecialista(i){this.especialistaSeleccionado=i}habilitar(){this.especialistaSeleccionado.habilitacion=!0,this.database.actualizar("usuarios",this.especialistaSeleccionado,this.especialistaSeleccionado.id),console.log("Especialista Habilitado")}deshabilitar(){this.especialistaSeleccionado.habilitacion=!1,this.database.actualizar("usuarios",this.especialistaSeleccionado,this.especialistaSeleccionado.id);const i=this.especialistas.findIndex(o=>o.id===this.especialistaSeleccionado.id);-1!==i&&this.especialistas.splice(i,1),console.log("Especialista Inhabilitado")}static#t=this.\u0275fac=function(o){return new(o||e)(t.Y36(p.T))};static#i=this.\u0275cmp=t.Xpm({type:e,selectors:[["app-informacion-usuarios"]],decls:53,vars:9,consts:[[1,"container"],[1,"text-center"],[1,"my-4"],[1,"table-responsive"],[1,"table","table-bordered","table-light"],["scope","col",2,"background-color","#49708a"],["style","background-color: #caff42;","scope","col",4,"ngFor","ngForOf"],[4,"ngFor","ngForOf"],[3,"click",4,"ngFor","ngForOf"],["class"," text-start","style","color: #49708a;",4,"ngIf"],[4,"ngIf"],["scope","col",2,"background-color","#caff42"],["scope","row"],[3,"click"],[1,"text-start",2,"color","#49708a"],[1,"btn","btn-success","mt-2",3,"click"],[1,"btn","btn-danger","mt-2",3,"click"]],template:function(o,n){1&o&&(t.TgZ(0,"body")(1,"div",0),t._UZ(2,"br")(3,"br"),t.TgZ(4,"h3",1),t._uU(5,"Informaci\xf3n de los Usuarios"),t.qZA(),t._UZ(6,"br")(7,"hr",2),t.TgZ(8,"h3",1),t._uU(9,"Pacientes"),t.qZA(),t._UZ(10,"br"),t.TgZ(11,"div",3)(12,"table",4)(13,"thead")(14,"tr")(15,"th",5),t._uU(16,"#"),t.qZA(),t.YNc(17,b,2,1,"th",6),t.qZA()(),t.TgZ(18,"tbody"),t.YNc(19,x,4,2,"tr",7),t.qZA()()(),t._UZ(20,"hr",2),t.TgZ(21,"h3",1),t._uU(22,"Especialista"),t.qZA(),t._UZ(23,"br"),t.TgZ(24,"div",3)(25,"table",4)(26,"thead")(27,"tr")(28,"th",5),t._uU(29,"#"),t.qZA(),t.YNc(30,U,2,1,"ng-container",7),t.qZA()(),t.TgZ(31,"tbody"),t.YNc(32,E,4,2,"tr",8),t.qZA()()(),t._UZ(33,"br"),t.YNc(34,N,2,3,"h4",9),t.YNc(35,w,3,0,"div",10),t.YNc(36,J,3,0,"div",10),t._UZ(37,"hr",2),t.TgZ(38,"h3",1),t._uU(39,"Administradores"),t.qZA(),t._UZ(40,"br"),t.TgZ(41,"div",3)(42,"table",4)(43,"thead")(44,"tr")(45,"th",5),t._uU(46,"#"),t.qZA(),t.YNc(47,F,2,1,"th",6),t.qZA()(),t.TgZ(48,"tbody"),t.YNc(49,O,4,2,"tr",7),t.qZA()()(),t._UZ(50,"hr",2)(51,"br")(52,"br"),t.qZA()()),2&o&&(t.xp6(17),t.Q6J("ngForOf",n.keysPacientes),t.xp6(2),t.Q6J("ngForOf",n.pacientes),t.xp6(11),t.Q6J("ngForOf",n.keysEspecialistas),t.xp6(2),t.Q6J("ngForOf",n.especialistas),t.xp6(2),t.Q6J("ngIf",null!=n.especialistaSeleccionado),t.xp6(1),t.Q6J("ngIf",null!=n.especialistaSeleccionado&&!n.especialistaSeleccionado.habilitacion),t.xp6(1),t.Q6J("ngIf",null!=n.especialistaSeleccionado&&n.especialistaSeleccionado.habilitacion),t.xp6(11),t.Q6J("ngForOf",n.keysAdministradores),t.xp6(2),t.Q6J("ngForOf",n.administradores))},dependencies:[u.sg,u.O5],styles:["body[_ngcontent-%COMP%]{background-color:#d0e0eb}"]})}return e})();var r=l(95);class Y{constructor(s,i,o,n,a,c){this.perfil="Administrador",this.imgPerfil="",this.email=a,this.contrase\u00f1a=c,this.edad=o,this.nombre=s,this.apellido=i,this.dni=n}toJSON(){return{nombre:this.nombre,apellido:this.apellido,edad:this.edad,email:this.email,dni:this.dni,password:this.contrase\u00f1a,perfil:this.perfil,imgPerfil:this.imgPerfil}}}var j=l(4108),P=l(6700);function R(e,s){if(1&e&&(t.TgZ(0,"p",24),t._uU(1),t.qZA()),2&e){const i=t.oxw(2);t.xp6(1),t.hij("Campos inv\xe1lidos: ",i.mensajeError.join(", "),"")}}function B(e,s){if(1&e&&(t.TgZ(0,"p",25),t._uU(1),t.qZA()),2&e){const i=t.oxw(2);t.xp6(1),t.Oqu(i.mensajeExito)}}function $(e,s){if(1&e){const i=t.EpF();t.TgZ(0,"div",26),t._UZ(1,"hr"),t.TgZ(2,"h4",3),t._uU(3,"Im\xe1gen de Perfil"),t.qZA(),t.TgZ(4,"input",27),t.NdJ("change",function(n){t.CHM(i);const a=t.oxw(2);return t.KtG(a.onFileChange(n))}),t.qZA()()}}function M(e,s){if(1&e){const i=t.EpF();t.TgZ(0,"button",30),t.NdJ("click",function(){t.CHM(i);const n=t.oxw(3);return t.KtG(n.aceptar())}),t._uU(1,"Enviar Datos"),t.qZA()}}function G(e,s){if(1&e&&(t.TgZ(0,"div",28),t.YNc(1,M,2,0,"button",29),t.qZA()),2&e){const i=t.oxw(2);t.xp6(1),t.Q6J("ngIf",!i.spinner)}}function K(e,s){1&e&&(t.TgZ(0,"div",31),t._UZ(1,"img",32),t.qZA())}function H(e,s){if(1&e&&(t.TgZ(0,"form",2),t._UZ(1,"br"),t.TgZ(2,"h4",3),t._uU(3,"Registro Administrador"),t.qZA(),t._UZ(4,"br"),t.TgZ(5,"div",4)(6,"div",5)(7,"label",6),t._uU(8,"Nombre"),t.qZA(),t._UZ(9,"input",7),t.qZA(),t._UZ(10,"br"),t.TgZ(11,"div",5)(12,"label",8),t._uU(13,"Apellido"),t.qZA(),t._UZ(14,"input",9),t.qZA(),t._UZ(15,"br"),t.qZA(),t.TgZ(16,"div",10)(17,"div",5)(18,"label",11),t._uU(19,"Email"),t.qZA(),t._UZ(20,"input",12),t.qZA(),t._UZ(21,"br"),t.TgZ(22,"div",5)(23,"label",13),t._uU(24,"Password"),t.qZA(),t._UZ(25,"input",14),t.qZA()(),t.TgZ(26,"div",10)(27,"div",5)(28,"label",15),t._uU(29,"Edad"),t.qZA(),t._UZ(30,"input",16),t.qZA(),t.TgZ(31,"div",5)(32,"label",17),t._uU(33,"DNI"),t.qZA(),t._UZ(34,"input",18),t.qZA()(),t._UZ(35,"br"),t.YNc(36,R,2,1,"p",19),t.YNc(37,B,2,1,"p",20),t.YNc(38,$,5,0,"div",21),t.YNc(39,G,2,1,"div",22),t.YNc(40,K,2,0,"div",23),t._UZ(41,"br")(42,"br"),t.qZA()),2&e){const i=t.oxw();let o;t.Q6J("formGroup",i.form),t.xp6(36),t.Q6J("ngIf",i.mensajeError.length>0),t.xp6(1),t.Q6J("ngIf",""!=i.mensajeExito),t.xp6(1),t.Q6J("ngIf",""!==(null==(o=i.form.get("edad"))?null:o.value)&&""!==(null==(o=i.form.get("dni"))?null:o.value)&&""!==(null==(o=i.form.get("nombre"))?null:o.value)&&""!==(null==(o=i.form.get("apellido"))?null:o.value)&&""!==(null==(o=i.form.get("mail"))?null:o.value)),t.xp6(1),t.Q6J("ngIf",i.imagenIngresada),t.xp6(1),t.Q6J("ngIf",i.spinner)}}let z=(()=>{class e{constructor(i,o,n,a){this.authService=i,this.database=o,this.formBuilder=n,this.storageService=a,this.mensajeError=[],this.mensajeExito="",this.usuarios=[],this.imagenes=[],this.mostrarCargaImg=!1,this.mensajeErrorImg="",this.imagenIngresada=!1,this.spinner=!1,this.verificacionEmail=new t.vpe}ngOnInit(){this.form=this.formBuilder.group({nombre:new r.NI("",[r.kI.required,r.kI.pattern("[a-zA-Z ]*")]),apellido:new r.NI("",[r.kI.required,r.kI.pattern("[a-zA-Z ]*")]),edad:new r.NI("",[r.kI.required,r.kI.min(1),r.kI.max(100)]),dni:new r.NI("",[r.kI.required,r.kI.minLength(6),r.kI.maxLength(8)]),email:new r.NI("",[r.kI.email,r.kI.required]),password:new r.NI("",[r.kI.required])}),this.database.obtenerTodos("prestadores").subscribe(i=>{this.listadoObrasSociales=i.map(o=>{const n=o.payload.doc.data();return{id:o.payload.doc.id,prestadores:n.prestadores||[]}})}),this.database.obtenerTodos("usuarios").subscribe(i=>{this.usuarios=i.map(o=>{let n=o.payload.doc.data();return n.id=o.payload.doc.id,n})})}aceptar(){const o=document.getElementById("inputFile").files;if(this.mensajeError=[],console.log("Nombre"+this.form?.get("nombre")?.value),this.form?.invalid){for(const n in this.form?.controls)this.form?.controls[n]?.invalid&&this.mensajeError.push(`${n}`);console.log(this.mensajeError)}else if(this.form.valid){const n=this.form.get("nombre")?.value,a=this.form.get("apellido")?.value,c=this.form.get("edad")?.value,d=this.form.get("email")?.value,g=this.form.get("dni")?.value,m=this.form.get("password")?.value;this.nuevoAdmin=new Y(n,a,c,g,d,m),null==this.registrarse()?this.mostrarCargaImg=!1:o&&this.cargarImagen(o)}else console.log("Formulario Inv\xe1lido")}registrarse(){let i=this.form.get("email")?.value,o=this.form.get("password")?.value;return[...this.usuarios].find(c=>c.email==i)?(this.mensajeError.push("El administrador ya se encuentra registrado"),null):(this.authService.register(i,o).then(c=>{if(null!=c){console.log("Se registr\xf3 en Firebase Authentication: ",c);const d=this.nuevoAdmin.toJSON();return console.log(d),this.database.crear("usuarios",d),!0}return console.log("Error. Ingrese datos v\xe1lidos"),null}).catch(c=>(console.log(c),null)),!0)}redirigirVerificacionEmail(){this.verificacionEmail.emit()}cargarImagen(i){let o;this.spinner=!0,console.log(i),i.length>1?this.mensajeErrorImg="Se ha excedido el l\xedmite de im\xe1genes":setTimeout(()=>{if(o=this.buscarUsuarioPorDNI(),console.log(o),o){const n=[];for(let a=0;a<i.length;a++){const c=new FileReader,d=this.form.get("nombre")?.value+this.form.get("apellido")?.value+"_"+Date.now()+"_"+a;c.readAsDataURL(i[a]),c.onloadend=()=>{this.imagenes.push(c.result),this.storageService.subirImagen(d,c.result).then(g=>{if(n.push(d),console.log(d),n.length===i.length){this.nuevoAdmin.imgPerfil=n;const m=this.nuevoAdmin.toJSON();this.database.actualizar("usuarios",m,o),console.log("se actualizo el database"),this.form.reset(),this.redirigirVerificacionEmail()}})}}}},5e3)}buscarUsuarioPorDNI(){const i=this.nuevoAdmin.dni,o=this.usuarios.find(n=>n.dni===i);return o?o.id:null}onFileChange(i){this.imagenIngresada=i.target.files&&i.target.files.length>0}static#t=this.\u0275fac=function(o){return new(o||e)(t.Y36(j.e),t.Y36(p.T),t.Y36(r.qu),t.Y36(P.V))};static#i=this.\u0275cmp=t.Xpm({type:e,selectors:[["app-registro-admin"]],outputs:{verificacionEmail:"verificacionEmail"},decls:3,vars:1,consts:[[1,"container"],["class","needs-validation",3,"formGroup",4,"ngIf"],[1,"needs-validation",3,"formGroup"],[1,"text-dark","text-center"],[1,"row","mx-3"],[1,"form-group","col-md-6"],["for","nombre"],["type","text","id","nombre","autocomplete","off","formControlName","nombre",1,"form-control"],["for","apellido"],["type","text","id","apellido","autocomplete","off","formControlName","apellido",1,"form-control"],[1,"row","mt-4","mx-3"],["for","inputEmail4"],["type","email","id","email","placeholder","ejemplo@email.com","autocomplete","off","formControlName","email",1,"form-control"],["for","inputPassword4"],["type","password","id","password","placeholder","1-8 caracteres","autocomplete","off","formControlName","password",1,"form-control"],["for","Edad"],["type","number","id","edad","placeholder","1-100","autocomplete","off","formControlName","edad",1,"form-control"],["for","dni"],["type","text","id","dni","autocomplete","off","formControlName","dni",1,"form-control"],["class","text-danger text-center",4,"ngIf"],["class","text-success",4,"ngIf"],["class","col-md-6 offset-md-3 text-center",4,"ngIf"],["style","text-align: center;",4,"ngIf"],["class","spinner-container text-center mt-4",4,"ngIf"],[1,"text-danger","text-center"],[1,"text-success"],[1,"col-md-6","offset-md-3","text-center"],["type","file","accept",".png, .jpg,.jpeg","id","inputFile",1,"form-control",3,"change"],[2,"text-align","center"],["class","btn mt-5","style","background-color: #caff42;",3,"click",4,"ngIf"],[1,"btn","mt-5",2,"background-color","#caff42",3,"click"],[1,"spinner-container","text-center","mt-4"],["src","../../../../assets/img/spinner.png","alt","spinner"]],template:function(o,n){1&o&&(t.TgZ(0,"body")(1,"div",0),t.YNc(2,H,43,6,"form",1),t.qZA()()),2&o&&(t.xp6(2),t.Q6J("ngIf",n.form))},dependencies:[u.O5,r._Y,r.Fj,r.wV,r.JJ,r.JL,r.sg,r.u],styles:["body[_ngcontent-%COMP%]{background-color:#d0e0eb;height:100%}"]})}return e})();const D=["reseniaInput"];function L(e,s){if(1&e&&(t.TgZ(0,"th",11),t._uU(1),t.qZA()),2&e){const i=s.$implicit;t.xp6(1),t.Oqu(i)}}function V(e,s){if(1&e&&(t.TgZ(0,"td"),t._uU(1),t.qZA()),2&e){const i=s.$implicit,o=t.oxw().$implicit;t.xp6(1),t.Oqu(o[i])}}function X(e,s){if(1&e){const i=t.EpF();t.TgZ(0,"tr",12),t.NdJ("click",function(){const a=t.CHM(i).$implicit,c=t.oxw();return t.KtG(c.seleccionarTurno(a))}),t.TgZ(1,"th",13),t._uU(2),t.qZA(),t.YNc(3,V,2,1,"td",14),t.qZA()}if(2&e){const i=s.index,o=t.oxw();t.xp6(2),t.Oqu(i+1),t.xp6(1),t.Q6J("ngForOf",o.turnosKeys)}}function W(e,s){if(1&e&&(t.TgZ(0,"p",22)(1,"b"),t._uU(2),t.qZA()()),2&e){const i=t.oxw(2);t.xp6(2),t.Oqu(i.mensajeError)}}function tt(e,s){if(1&e){const i=t.EpF();t.TgZ(0,"div")(1,"div",15)(2,"div",16)(3,"span",17),t._uU(4,"Rese\xf1a por Cancelaci\xf3n "),t.qZA()(),t._UZ(5,"input",18,19),t.qZA(),t.YNc(7,W,3,1,"p",20),t.TgZ(8,"button",21),t.NdJ("click",function(){t.CHM(i);const n=t.MAs(6),a=t.oxw();return t.KtG(a.cancelarTurno(n.value))}),t._uU(9,"Cancelar turno"),t.qZA()()}if(2&e){const i=t.oxw();t.xp6(7),t.Q6J("ngIf",""!=i.mensajeError)}}function it(e,s){if(1&e){const i=t.EpF();t.ynx(0),t.TgZ(1,"input",26),t.NdJ("change",function(){const a=t.CHM(i).$implicit,c=t.oxw(3);return t.KtG(c.filtrarTabla(a))}),t.qZA(),t._uU(2),t._UZ(3,"br"),t.BQk()}if(2&e){const i=s.$implicit;t.xp6(1),t.Q6J("value",i),t.xp6(1),t.hij(" ",i,"")}}function et(e,s){if(1&e&&(t.ynx(0),t.YNc(1,it,4,2,"ng-container",14),t.BQk()),2&e){const i=s.$implicit;t.xp6(1),t.Q6J("ngForOf",i.especialidades)}}function ot(e,s){if(1&e&&(t.TgZ(0,"div",23)(1,"h5",24),t._uU(2,"Especialidad"),t.qZA(),t.TgZ(3,"div",25),t.YNc(4,et,2,1,"ng-container",14),t.qZA()()),2&e){const i=t.oxw();t.xp6(4),t.Q6J("ngForOf",i.especialidades)}}function nt(e,s){if(1&e){const i=t.EpF();t.ynx(0),t.TgZ(1,"input",29),t.NdJ("change",function(){const a=t.CHM(i).$implicit,c=t.oxw(2);return t.KtG(c.filtrarTablaEspecialista(a.id))}),t.qZA(),t._uU(2),t._UZ(3,"br"),t.BQk()}if(2&e){const i=s.$implicit;t.xp6(1),t.Q6J("value",i),t.xp6(1),t.lnq("",i.nombre," ",i.apellido," - ",i.id,"")}}function st(e,s){if(1&e&&(t.TgZ(0,"div",23)(1,"h5",27),t._uU(2,"Especialista"),t.qZA(),t.TgZ(3,"div",28),t.YNc(4,nt,4,4,"ng-container",14),t.qZA()()),2&e){const i=t.oxw();t.xp6(4),t.Q6J("ngForOf",i.especialistas)}}let at=(()=>{class e{constructor(i){this.database=i,this.turnos=[],this.turnosKeys=[],this.especialidades=[],this.especialistas=[],this.mensajeError="",this.mostrarBoton=!1,this.tablaFiltrada=[]}ngOnInit(){this.database.obtenerTodos("turnos").subscribe(i=>{this.turnos=[],i.forEach(o=>{const n=o.payload.doc.data();if("object"==typeof n){const c={id:o.payload.doc.id,...n};this.turnos.push(c)}else console.log("turnoData no es un objeto v\xe1lido:",n)}),this.turnos.forEach(o=>{this.turnosKeys=Object.keys(o)}),this.database.obtenerTodos("especialidades").subscribe(o=>{this.especialidades=[],o.forEach(n=>{const a=n.payload.doc.data();this.especialidades.push(a)})}),this.tablaFiltrada=this.turnos}),this.database.obtenerTodos("usuarios").subscribe(i=>{this.especialistas=i.map(o=>o.payload.doc.data()).filter(o=>{const n=o.perfil;return n&&"especialista"==n.toLowerCase()})})}seleccionarTurno(i){this.mostrarBoton=!1,console.log(i),this.turnoSeleccionado=i,"solicitado"==i.estado&&(this.mostrarBoton=!0,this.turnoSeleccionado=i)}cancelarTurno(i){""!==i.trim()?(this.turnoSeleccionado.estado="Cancelado",this.turnoSeleccionado.rese\u00f1aCancelacion=i,this.database.actualizar("turnos",this.turnoSeleccionado,this.turnoSeleccionado.id),this.reseniaInput.nativeElement.value=""):this.mensajeError="El campo de rese\xf1a por cancelaci\xf3n no puede estar vac\xedo"}filtrarTabla(i){const o=document.getElementsByName("especialistaRadio");for(let a=0;a<o.length;a++)o[a].checked=!1;const n=i;console.log(n),this.tablaFiltrada=this.turnos.filter(a=>a.especialidad==n)}filtrarTablaEspecialista(i){const o=document.getElementsByName("especialidadRadio");for(let a=0;a<o.length;a++)o[a].checked=!1;const n=i;console.log(n),this.tablaFiltrada=this.turnos.filter(a=>a.especialistaId==n)}eliminarFiltros(){const i=document.getElementsByName("especialidadRadio"),o=document.getElementsByName("especialistaRadio");for(let n=0;n<i.length;n++)i[n].checked=!1;for(let n=0;n<o.length;n++)o[n].checked=!1;this.tablaFiltrada=this.turnos}static#t=this.\u0275fac=function(o){return new(o||e)(t.Y36(p.T))};static#i=this.\u0275cmp=t.Xpm({type:e,selectors:[["app-turnos"]],viewQuery:function(o,n){if(1&o&&t.Gf(D,5),2&o){let a;t.iGM(a=t.CRH())&&(n.reseniaInput=a.first)}},decls:28,vars:5,consts:[[1,"container"],[1,"text-center","text-dark"],[1,"table","table-bordered","table-light"],["scope","col",2,"background-color","#49708a"],["style","background-color: #caff42;","scope","col",4,"ngFor","ngForOf"],[3,"click",4,"ngFor","ngForOf"],[4,"ngIf"],[1,"row","justify-content-center"],["class","form-group col-4",4,"ngIf"],[1,"row","justify-content-center","mt-4"],[1,"btn",2,"background-color","#caff42","width","200px",3,"click"],["scope","col",2,"background-color","#caff42"],[3,"click"],["scope","row"],[4,"ngFor","ngForOf"],[1,"input-group","input-group-sm","mb-3"],[1,"input-group-prepend"],["id","rese\xf1a",1,"input-group-text",2,"background-color","#ddd"],["type","text","aria-label","Small","aria-describedby","inputGroup-sizing-sm",1,"form-control"],["reseniaInput",""],["class","text-danger",4,"ngIf"],[1,"btn",2,"background-color","#caff42",3,"click"],[1,"text-danger"],[1,"form-group","col-4"],["for","especialidad"],["multiple","","id","especialidad",1,"form-control",2,"background-color","#d0e0eb"],["type","radio","name","especialidadRadio",3,"value","change"],["for","especialista"],["multiple","","id","especialista",1,"form-control",2,"background-color","#d0e0eb"],["type","radio","name","especialistaRadio",3,"value","change"]],template:function(o,n){1&o&&(t.TgZ(0,"body")(1,"div",0),t._UZ(2,"br")(3,"br"),t.TgZ(4,"h3",1),t._uU(5,"Turnos"),t.qZA(),t._UZ(6,"br"),t.TgZ(7,"table",2)(8,"thead")(9,"tr")(10,"th",3),t._uU(11,"#"),t.qZA(),t.YNc(12,L,2,1,"th",4),t.qZA()(),t.TgZ(13,"tbody"),t.YNc(14,X,4,2,"tr",5),t.qZA()(),t.YNc(15,tt,10,1,"div",6),t._UZ(16,"hr")(17,"br"),t.TgZ(18,"div",7)(19,"h4"),t._uU(20,"Filtrar tablas "),t.qZA(),t.YNc(21,ot,5,1,"div",8),t.YNc(22,st,5,1,"div",8),t.qZA(),t.TgZ(23,"div",9)(24,"button",10),t.NdJ("click",function(){return n.eliminarFiltros()}),t._uU(25,"Eliminar filtros"),t.qZA()(),t._UZ(26,"br")(27,"br"),t.qZA()()),2&o&&(t.xp6(12),t.Q6J("ngForOf",n.turnosKeys),t.xp6(2),t.Q6J("ngForOf",n.tablaFiltrada),t.xp6(1),t.Q6J("ngIf",n.mostrarBoton),t.xp6(6),t.Q6J("ngIf",null!=n.especialidades&&n.especialidades.length>0),t.xp6(1),t.Q6J("ngIf",null!=n.especialistas&&n.especialistas.length>0))},dependencies:[u.sg,u.O5],styles:["body[_ngcontent-%COMP%]{background-color:#88abc2}"]})}return e})();function rt(e,s){if(1&e){const i=t.EpF();t.TgZ(0,"div")(1,"div",3)(2,"div",4)(3,"div",5)(4,"div",6)(5,"h5",7),t._uU(6,"Ver Usuarios"),t.qZA(),t.TgZ(7,"p",8),t._uU(8,"Entra aqui para ver los usuarios dados de alta y habilitar/inhabilitar a los Especialistas"),t.qZA(),t.TgZ(9,"button",9),t.NdJ("click",function(){t.CHM(i);const n=t.oxw();return t.KtG(n.usuarios())}),t._uU(10,"Ver Usuarios"),t.qZA()()()(),t.TgZ(11,"div",4)(12,"div",5)(13,"div",6)(14,"h5",7),t._uU(15,"Registrar Especialista"),t.qZA(),t.TgZ(16,"p",8),t._uU(17,"Entra aqui para dar de alta a un nuevo Especialista"),t.qZA(),t.TgZ(18,"button",9),t.NdJ("click",function(){t.CHM(i);const n=t.oxw();return t.KtG(n.especialista())}),t._uU(19,"Registrar Especialista"),t.qZA()()()()(),t.TgZ(20,"div",3)(21,"div",4)(22,"div",5)(23,"div",6)(24,"h5",7),t._uU(25,"Registrar Paciente"),t.qZA(),t.TgZ(26,"p",8),t._uU(27,"Entra aqui para dar de alta a un nuevo Paciente"),t.qZA(),t.TgZ(28,"button",9),t.NdJ("click",function(){t.CHM(i);const n=t.oxw();return t.KtG(n.paciente())}),t._uU(29,"Registrar Paciente"),t.qZA()()()(),t.TgZ(30,"div",4)(31,"div",5)(32,"div",6)(33,"h5",7),t._uU(34,"Registrar Administrador"),t.qZA(),t.TgZ(35,"p",8),t._uU(36,"Entra aqui para dar de alta a un nuevo Administador"),t.qZA(),t.TgZ(37,"button",9),t.NdJ("click",function(){t.CHM(i);const n=t.oxw();return t.KtG(n.administrador())}),t._uU(38,"Registrar Administador"),t.qZA()()()(),t.TgZ(39,"div",3)(40,"div",4)(41,"div",5)(42,"div",6)(43,"h5",7),t._uU(44,"Turnos"),t.qZA(),t.TgZ(45,"p",8),t._uU(46,"Entra aqui para administrar Turnos"),t.qZA(),t.TgZ(47,"button",9),t.NdJ("click",function(){t.CHM(i);const n=t.oxw();return t.KtG(n.turnos())}),t._uU(48,"Administrar Turnos"),t.qZA()()()()()()()}}function ct(e,s){1&e&&(t.TgZ(0,"div"),t._UZ(1,"app-registro-especialista"),t.qZA())}function lt(e,s){1&e&&(t.TgZ(0,"div"),t._UZ(1,"app-registro-paciente"),t.qZA())}function dt(e,s){1&e&&(t.TgZ(0,"div"),t._UZ(1,"app-informacion-usuarios"),t.qZA())}function ut(e,s){1&e&&(t.TgZ(0,"div"),t._UZ(1,"app-registro-admin"),t.qZA())}function pt(e,s){1&e&&(t.TgZ(0,"div"),t._UZ(1,"app-turnos"),t.qZA())}const mt=[{path:"",component:(()=>{class e{constructor(){this.registrarPaciente=!1,this.registrarEspecialista=!1,this.registrarAdministrador=!1,this.mostrarTurnos=!1,this.mostrarUsuarios=!1,this.mostrarCuerpo=!0}paciente(){this.registrarPaciente=!0,this.registrarEspecialista=!1,this.registrarAdministrador=!1,this.mostrarUsuarios=!1,this.mostrarCuerpo=!1,this.mostrarTurnos=!1}especialista(){this.registrarEspecialista=!0,this.registrarPaciente=!1,this.registrarAdministrador=!1,this.mostrarUsuarios=!1,this.mostrarCuerpo=!1,this.mostrarTurnos=!1}administrador(){this.registrarAdministrador=!0,this.registrarPaciente=!1,this.registrarEspecialista=!1,this.mostrarUsuarios=!1,this.mostrarCuerpo=!1,this.mostrarTurnos=!1}usuarios(){this.mostrarUsuarios=!0,this.registrarPaciente=!1,this.registrarEspecialista=!1,this.registrarAdministrador=!1,this.mostrarCuerpo=!1,this.mostrarTurnos=!1}turnos(){this.mostrarUsuarios=!1,this.registrarPaciente=!1,this.registrarEspecialista=!1,this.registrarAdministrador=!1,this.mostrarCuerpo=!1,this.mostrarTurnos=!0}static#t=this.\u0275fac=function(o){return new(o||e)};static#i=this.\u0275cmp=t.Xpm({type:e,selectors:[["app-seccion-usuarios"]],decls:13,vars:6,consts:[[1,"container","text-center"],[1,"text-dark"],[4,"ngIf"],[1,"row","mt-5"],[1,"col-sm-6"],[1,"card"],[1,"card-body",2,"background-color","#d0e0eb"],[1,"card-title"],[1,"card-text"],[1,"btn",2,"background-color","#caff42",3,"click"]],template:function(o,n){1&o&&(t.TgZ(0,"body")(1,"div",0),t._UZ(2,"br")(3,"br")(4,"br"),t.TgZ(5,"h1",1),t._uU(6,"Gestion de Sistema"),t.qZA(),t.YNc(7,rt,49,0,"div",2),t.YNc(8,ct,2,0,"div",2),t.YNc(9,lt,2,0,"div",2),t.YNc(10,dt,2,0,"div",2),t.YNc(11,ut,2,0,"div",2),t.YNc(12,pt,2,0,"div",2),t.qZA()()),2&o&&(t.xp6(7),t.Q6J("ngIf",n.mostrarCuerpo),t.xp6(1),t.Q6J("ngIf",n.registrarEspecialista),t.xp6(1),t.Q6J("ngIf",n.registrarPaciente),t.xp6(1),t.Q6J("ngIf",n.mostrarUsuarios),t.xp6(1),t.Q6J("ngIf",n.registrarAdministrador),t.xp6(1),t.Q6J("ngIf",n.mostrarTurnos))},dependencies:[u.O5,h.v,Z.e,Q,z,at],styles:["body[_ngcontent-%COMP%]{background-color:#88abc2;height:100%;min-height:100vh;width:100vw}"]})}return e})()}];let _t=(()=>{class e{static#t=this.\u0275fac=function(o){return new(o||e)};static#i=this.\u0275mod=t.oAB({type:e});static#e=this.\u0275inj=t.cJS({imports:[f.Bz.forChild(mt),f.Bz]})}return e})();var ft=l(8228);let gt=(()=>{class e{static#t=this.\u0275fac=function(o){return new(o||e)};static#i=this.\u0275mod=t.oAB({type:e});static#e=this.\u0275inj=t.cJS({imports:[u.ez,_t,ft.RegistroModule,r.UX]})}return e})()}}]);