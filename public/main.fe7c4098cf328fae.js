"use strict";(self.webpackChunkclinica=self.webpackChunkclinica||[]).push([[179],{9058:(zt,Ye,H)=>{H.d(Ye,{BH:()=>Oe,G6:()=>Pt,L:()=>ze,LL:()=>Ze,Pz:()=>$e,Sg:()=>We,UG:()=>ue,ZB:()=>xe,ZR:()=>Fe,aH:()=>Le,b$:()=>$n,eu:()=>we,hl:()=>Ie,jU:()=>Kt,m9:()=>Ci,ne:()=>Wt,pd:()=>rn,r3:()=>_e,ru:()=>Et,tV:()=>pe,uI:()=>mt,vZ:()=>ft,w1:()=>gr,xO:()=>Ln,xb:()=>je,z$:()=>at,zd:()=>Rt});const Ce=function(Te){const ie=[];let re=0;for(let ne=0;ne<Te.length;ne++){let ae=Te.charCodeAt(ne);ae<128?ie[re++]=ae:ae<2048?(ie[re++]=ae>>6|192,ie[re++]=63&ae|128):55296==(64512&ae)&&ne+1<Te.length&&56320==(64512&Te.charCodeAt(ne+1))?(ae=65536+((1023&ae)<<10)+(1023&Te.charCodeAt(++ne)),ie[re++]=ae>>18|240,ie[re++]=ae>>12&63|128,ie[re++]=ae>>6&63|128,ie[re++]=63&ae|128):(ie[re++]=ae>>12|224,ie[re++]=ae>>6&63|128,ie[re++]=63&ae|128)}return ie},ye={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(Te,ie){if(!Array.isArray(Te))throw Error("encodeByteArray takes an array as a parameter");this.init_();const re=ie?this.byteToCharMapWebSafe_:this.byteToCharMap_,ne=[];for(let ae=0;ae<Te.length;ae+=3){const Re=Te[ae],ht=ae+1<Te.length,St=ht?Te[ae+1]:0,Bt=ae+2<Te.length,gn=Bt?Te[ae+2]:0;let Dr=(15&St)<<2|gn>>6,qr=63&gn;Bt||(qr=64,ht||(Dr=64)),ne.push(re[Re>>2],re[(3&Re)<<4|St>>4],re[Dr],re[qr])}return ne.join("")},encodeString(Te,ie){return this.HAS_NATIVE_SUPPORT&&!ie?btoa(Te):this.encodeByteArray(Ce(Te),ie)},decodeString(Te,ie){return this.HAS_NATIVE_SUPPORT&&!ie?atob(Te):function(Te){const ie=[];let re=0,ne=0;for(;re<Te.length;){const ae=Te[re++];if(ae<128)ie[ne++]=String.fromCharCode(ae);else if(ae>191&&ae<224){const Re=Te[re++];ie[ne++]=String.fromCharCode((31&ae)<<6|63&Re)}else if(ae>239&&ae<365){const Bt=((7&ae)<<18|(63&Te[re++])<<12|(63&Te[re++])<<6|63&Te[re++])-65536;ie[ne++]=String.fromCharCode(55296+(Bt>>10)),ie[ne++]=String.fromCharCode(56320+(1023&Bt))}else{const Re=Te[re++],ht=Te[re++];ie[ne++]=String.fromCharCode((15&ae)<<12|(63&Re)<<6|63&ht)}}return ie.join("")}(this.decodeStringToByteArray(Te,ie))},decodeStringToByteArray(Te,ie){this.init_();const re=ie?this.charToByteMapWebSafe_:this.charToByteMap_,ne=[];for(let ae=0;ae<Te.length;){const Re=re[Te.charAt(ae++)],St=ae<Te.length?re[Te.charAt(ae)]:0;++ae;const gn=ae<Te.length?re[Te.charAt(ae)]:64;++ae;const un=ae<Te.length?re[Te.charAt(ae)]:64;if(++ae,null==Re||null==St||null==gn||null==un)throw new Ne;ne.push(Re<<2|St>>4),64!==gn&&(ne.push(St<<4&240|gn>>2),64!==un&&ne.push(gn<<6&192|un))}return ne},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let Te=0;Te<this.ENCODED_VALS.length;Te++)this.byteToCharMap_[Te]=this.ENCODED_VALS.charAt(Te),this.charToByteMap_[this.byteToCharMap_[Te]]=Te,this.byteToCharMapWebSafe_[Te]=this.ENCODED_VALS_WEBSAFE.charAt(Te),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[Te]]=Te,Te>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(Te)]=Te,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(Te)]=Te)}}};class Ne extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const ze=function(Te){return function(Te){const ie=Ce(Te);return ye.encodeByteArray(ie,!0)}(Te).replace(/\./g,"")},pe=function(Te){try{return ye.decodeString(Te,!0)}catch(ie){console.error("base64Decode failed: ",ie)}return null};function xe(Te,ie){if(!(ie instanceof Object))return ie;switch(ie.constructor){case Date:return new Date(ie.getTime());case Object:void 0===Te&&(Te={});break;case Array:Te=[];break;default:return ie}for(const re in ie)!ie.hasOwnProperty(re)||!dt(re)||(Te[re]=xe(Te[re],ie[re]));return Te}function dt(Te){return"__proto__"!==Te}const lt=()=>{try{return function it(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const Te=process.env.__FIREBASE_DEFAULTS__;return Te?JSON.parse(Te):void 0})()||(()=>{if(typeof document>"u")return;let Te;try{Te=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const ie=Te&&pe(Te[1]);return ie&&JSON.parse(ie)})()}catch(Te){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${Te}`)}},Le=()=>{var Te;return null===(Te=lt())||void 0===Te?void 0:Te.config},$e=Te=>{var ie;return null===(ie=lt())||void 0===ie?void 0:ie[`_${Te}`]};class Oe{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((ie,re)=>{this.resolve=ie,this.reject=re})}wrapCallback(ie){return(re,ne)=>{re?this.reject(re):this.resolve(ne),"function"==typeof ie&&(this.promise.catch(()=>{}),1===ie.length?ie(re):ie(re,ne))}}}function We(Te,ie){if(Te.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const ne=ie||"demo-project",ae=Te.iat||0,Re=Te.sub||Te.user_id;if(!Re)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const ht=Object.assign({iss:`https://securetoken.google.com/${ne}`,aud:ne,iat:ae,exp:ae+3600,auth_time:ae,sub:Re,user_id:Re,firebase:{sign_in_provider:"custom",identities:{}}},Te);return[ze(JSON.stringify({alg:"none",type:"JWT"})),ze(JSON.stringify(ht)),""].join(".")}function at(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function mt(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(at())}function ue(){var Te;const ie=null===(Te=lt())||void 0===Te?void 0:Te.forceEnvironment;if("node"===ie)return!0;if("browser"===ie)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function Kt(){return"object"==typeof self&&self.self===self}function Et(){const Te="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof Te&&void 0!==Te.id}function $n(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function gr(){const Te=at();return Te.indexOf("MSIE ")>=0||Te.indexOf("Trident/")>=0}function Pt(){return!ue()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Ie(){try{return"object"==typeof indexedDB}catch{return!1}}function we(){return new Promise((Te,ie)=>{try{let re=!0;const ne="validate-browser-context-for-indexeddb-analytics-module",ae=self.indexedDB.open(ne);ae.onsuccess=()=>{ae.result.close(),re||self.indexedDB.deleteDatabase(ne),Te(!0)},ae.onupgradeneeded=()=>{re=!1},ae.onerror=()=>{var Re;ie((null===(Re=ae.error)||void 0===Re?void 0:Re.message)||"")}}catch(re){ie(re)}})}class Fe extends Error{constructor(ie,re,ne){super(re),this.code=ie,this.customData=ne,this.name="FirebaseError",Object.setPrototypeOf(this,Fe.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ze.prototype.create)}}class Ze{constructor(ie,re,ne){this.service=ie,this.serviceName=re,this.errors=ne}create(ie,...re){const ne=re[0]||{},ae=`${this.service}/${ie}`,Re=this.errors[ie],ht=Re?function Nt(Te,ie){return Te.replace(wt,(re,ne)=>{const ae=ie[ne];return null!=ae?String(ae):`<${ne}?>`})}(Re,ne):"Error";return new Fe(ae,`${this.serviceName}: ${ht} (${ae}).`,ne)}}const wt=/\{\$([^}]+)}/g;function _e(Te,ie){return Object.prototype.hasOwnProperty.call(Te,ie)}function je(Te){for(const ie in Te)if(Object.prototype.hasOwnProperty.call(Te,ie))return!1;return!0}function ft(Te,ie){if(Te===ie)return!0;const re=Object.keys(Te),ne=Object.keys(ie);for(const ae of re){if(!ne.includes(ae))return!1;const Re=Te[ae],ht=ie[ae];if(Mt(Re)&&Mt(ht)){if(!ft(Re,ht))return!1}else if(Re!==ht)return!1}for(const ae of ne)if(!re.includes(ae))return!1;return!0}function Mt(Te){return null!==Te&&"object"==typeof Te}function Ln(Te){const ie=[];for(const[re,ne]of Object.entries(Te))Array.isArray(ne)?ne.forEach(ae=>{ie.push(encodeURIComponent(re)+"="+encodeURIComponent(ae))}):ie.push(encodeURIComponent(re)+"="+encodeURIComponent(ne));return ie.length?"&"+ie.join("&"):""}function Rt(Te){const ie={};return Te.replace(/^\?/,"").split("&").forEach(ne=>{if(ne){const[ae,Re]=ne.split("=");ie[decodeURIComponent(ae)]=decodeURIComponent(Re)}}),ie}function rn(Te){const ie=Te.indexOf("?");if(!ie)return"";const re=Te.indexOf("#",ie);return Te.substring(ie,re>0?re:void 0)}function Wt(Te,ie){const re=new wr(Te,ie);return re.subscribe.bind(re)}class wr{constructor(ie,re){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=re,this.task.then(()=>{ie(this)}).catch(ne=>{this.error(ne)})}next(ie){this.forEachObserver(re=>{re.next(ie)})}error(ie){this.forEachObserver(re=>{re.error(ie)}),this.close(ie)}complete(){this.forEachObserver(ie=>{ie.complete()}),this.close()}subscribe(ie,re,ne){let ae;if(void 0===ie&&void 0===re&&void 0===ne)throw new Error("Missing Observer.");ae=function kn(Te,ie){if("object"!=typeof Te||null===Te)return!1;for(const re of ie)if(re in Te&&"function"==typeof Te[re])return!0;return!1}(ie,["next","error","complete"])?ie:{next:ie,error:re,complete:ne},void 0===ae.next&&(ae.next=Or),void 0===ae.error&&(ae.error=Or),void 0===ae.complete&&(ae.complete=Or);const Re=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?ae.error(this.finalError):ae.complete()}catch{}}),this.observers.push(ae),Re}unsubscribeOne(ie){void 0===this.observers||void 0===this.observers[ie]||(delete this.observers[ie],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(ie){if(!this.finalized)for(let re=0;re<this.observers.length;re++)this.sendOne(re,ie)}sendOne(ie,re){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[ie])try{re(this.observers[ie])}catch(ne){typeof console<"u"&&console.error&&console.error(ne)}})}close(ie){this.finalized||(this.finalized=!0,void 0!==ie&&(this.finalError=ie),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Or(){}function Ci(Te){return Te&&Te._delegate?Te._delegate:Te}},4108:(zt,Ye,H)=>{H.d(Ye,{e:()=>Jl});var y=H(5861),fe=H(7398),oe=H(9058),Ce=H(534),De=H(7879),ye=H(7582),Ne=H(4537);const ct=function it(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},Ct=new oe.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Jt=new De.Yd("@firebase/auth");function Le(N,...m){Jt.logLevel<=De.in.ERROR&&Jt.error(`Auth (${Ce.SDK_VERSION}): ${N}`,...m)}function $e(N,...m){throw mt(N,...m)}function Oe(N,...m){return mt(N,...m)}function mt(N,...m){if("string"!=typeof N){const T=m[0],x=[...m.slice(1)];return x[0]&&(x[0].appName=N.name),N._errorFactory.create(T,...x)}return Ct.create(N,...m)}function ue(N,m,...T){if(!N)throw mt(m,...T)}function Kt(N){const m="INTERNAL ASSERTION FAILED: "+N;throw Le(m),new Error(m)}function Et(N,m){N||Kt(m)}function gr(){var N;return typeof self<"u"&&(null===(N=self.location)||void 0===N?void 0:N.protocol)||null}class Pt{constructor(m,T){this.shortDelay=m,this.longDelay=T,Et(T>m,"Short delay should be less than long delay!"),this.isMobile=(0,oe.uI)()||(0,oe.b$)()}get(){return function or(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(function Dn(){return"http:"===gr()||"https:"===gr()}()||(0,oe.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}class we{static initialize(m,T,x){this.fetchImpl=m,T&&(this.headersImpl=T),x&&(this.responseImpl=x)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:typeof globalThis<"u"&&globalThis.fetch?globalThis.fetch:typeof fetch<"u"?fetch:void Kt("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:typeof globalThis<"u"&&globalThis.Headers?globalThis.Headers:typeof Headers<"u"?Headers:void Kt("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:typeof globalThis<"u"&&globalThis.Response?globalThis.Response:typeof Response<"u"?Response:void Kt("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const He={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},Pe=new Pt(3e4,6e4);function Fe(N,m){return N.tenantId&&!m.tenantId?Object.assign(Object.assign({},m),{tenantId:N.tenantId}):m}function Ze(N,m,T,x){return Nt.apply(this,arguments)}function Nt(){return(Nt=(0,y.Z)(function*(N,m,T,x,Z={}){return wt(N,Z,(0,y.Z)(function*(){let ce={},Be={};x&&("GET"===m?Be=x:ce={body:JSON.stringify(x)});const st=(0,oe.xO)(Object.assign({key:N.config.apiKey},Be)).slice(1),bt=yield N._getAdditionalHeaders();return bt["Content-Type"]="application/json",N.languageCode&&(bt["X-Firebase-Locale"]=N.languageCode),we.fetch()(on(N,N.config.apiHost,T,st),Object.assign({method:m,headers:bt,referrerPolicy:"no-referrer"},ce))}))})).apply(this,arguments)}function wt(N,m,T){return nr.apply(this,arguments)}function nr(){return(nr=(0,y.Z)(function*(N,m,T){N._canInitEmulator=!1;const x=Object.assign(Object.assign({},He),m);try{const Z=new xn(N),ce=yield Promise.race([T(),Z.promise]);Z.clearNetworkTimeout();const Be=yield ce.json();if("needConfirmation"in Be)throw Rn(N,"account-exists-with-different-credential",Be);if(ce.ok&&!("errorMessage"in Be))return Be;{const st=ce.ok?Be.errorMessage:Be.error.message,[bt,dn]=st.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===bt)throw Rn(N,"credential-already-in-use",Be);if("EMAIL_EXISTS"===bt)throw Rn(N,"email-already-in-use",Be);if("USER_DISABLED"===bt)throw Rn(N,"user-disabled",Be);const wn=x[bt]||bt.toLowerCase().replace(/[_\s]+/g,"-");if(dn)throw function We(N,m,T){const x=Object.assign(Object.assign({},ct()),{[m]:T});return new oe.LL("auth","Firebase",x).create(m,{appName:N.name})}(N,wn,dn);$e(N,wn)}}catch(Z){if(Z instanceof oe.ZR)throw Z;$e(N,"network-request-failed",{message:String(Z)})}})).apply(this,arguments)}function on(N,m,T,x){const Z=`${m}${T}?${x}`;return N.config.emulator?function Ie(N,m){Et(N.emulator,"Emulator should always be set here");const{url:T}=N.emulator;return m?`${T}${m.startsWith("/")?m.slice(1):m}`:T}(N.config,Z):`${N.config.apiScheme}://${Z}`}class xn{constructor(m){this.auth=m,this.timer=null,this.promise=new Promise((T,x)=>{this.timer=setTimeout(()=>x(Oe(this.auth,"network-request-failed")),Pe.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Rn(N,m,T){const x={appName:N.name};T.email&&(x.email=T.email),T.phoneNumber&&(x.phoneNumber=T.phoneNumber);const Z=Oe(N,m,x);return Z.customData._tokenResponse=T,Z}function Rt(){return(Rt=(0,y.Z)(function*(N,m){return Ze(N,"POST","/v1/accounts:delete",m)})).apply(this,arguments)}function wr(){return(wr=(0,y.Z)(function*(N,m){return Ze(N,"POST","/v1/accounts:lookup",m)})).apply(this,arguments)}function Ur(N){if(N)try{const m=new Date(Number(N));if(!isNaN(m.getTime()))return m.toUTCString()}catch{}}function Pr(){return(Pr=(0,y.Z)(function*(N,m=!1){const T=(0,oe.m9)(N),x=yield T.getIdToken(m),Z=Wr(x);ue(Z&&Z.exp&&Z.auth_time&&Z.iat,T.auth,"internal-error");const ce="object"==typeof Z.firebase?Z.firebase:void 0,Be=ce?.sign_in_provider;return{claims:Z,token:x,authTime:Ur(Yt(Z.auth_time)),issuedAtTime:Ur(Yt(Z.iat)),expirationTime:Ur(Yt(Z.exp)),signInProvider:Be||null,signInSecondFactor:ce?.sign_in_second_factor||null}})).apply(this,arguments)}function Yt(N){return 1e3*Number(N)}function Wr(N){const[m,T,x]=N.split(".");if(void 0===m||void 0===T||void 0===x)return Le("JWT malformed, contained fewer than 3 sections"),null;try{const Z=(0,oe.tV)(T);return Z?JSON.parse(Z):(Le("Failed to decode base64 JWT payload"),null)}catch(Z){return Le("Caught error parsing JWT payload as JSON",Z?.toString()),null}}function In(N,m){return wi.apply(this,arguments)}function wi(){return(wi=(0,y.Z)(function*(N,m,T=!1){if(T)return m;try{return yield m}catch(x){throw x instanceof oe.ZR&&function Pa({code:N}){return"auth/user-disabled"===N||"auth/user-token-expired"===N}(x)&&N.auth.currentUser===N&&(yield N.auth.signOut()),x}})).apply(this,arguments)}class Yi{constructor(m){this.user=m,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(m){var T;if(m){const x=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),x}{this.errorBackoff=3e4;const Z=(null!==(T=this.user.stsTokenManager.expirationTime)&&void 0!==T?T:0)-Date.now()-3e5;return Math.max(0,Z)}}schedule(m=!1){var T=this;if(!this.isRunning)return;const x=this.getInterval(m);this.timerId=setTimeout((0,y.Z)(function*(){yield T.iteration()}),x)}iteration(){var m=this;return(0,y.Z)(function*(){try{yield m.user.getIdToken(!0)}catch(T){return void("auth/network-request-failed"===T?.code&&m.schedule(!0))}m.schedule()})()}}class xr{constructor(m,T){this.createdAt=m,this.lastLoginAt=T,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ur(this.lastLoginAt),this.creationTime=Ur(this.createdAt)}_copy(m){this.createdAt=m.createdAt,this.lastLoginAt=m.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function Xr(N){return pi.apply(this,arguments)}function pi(){return pi=(0,y.Z)(function*(N){var m;const T=N.auth,x=yield N.getIdToken(),Z=yield In(N,function Wt(N,m){return wr.apply(this,arguments)}(T,{idToken:x}));ue(Z?.users.length,T,"internal-error");const ce=Z.users[0];N._notifyReloadListener(ce);const Be=null!==(m=ce.providerUserInfo)&&void 0!==m&&m.length?function Mi(N){return N.map(m=>{var{providerId:T}=m,x=(0,ye._T)(m,["providerId"]);return{providerId:T,uid:x.rawId||"",displayName:x.displayName||null,email:x.email||null,phoneNumber:x.phoneNumber||null,photoURL:x.photoUrl||null}})}(ce.providerUserInfo):[],st=function Di(N,m){return[...N.filter(x=>!m.some(Z=>Z.providerId===x.providerId)),...m]}(N.providerData,Be),wn=!!N.isAnonymous&&!(N.email&&ce.passwordHash||st?.length),Tr={uid:ce.localId,displayName:ce.displayName||null,photoURL:ce.photoUrl||null,email:ce.email||null,emailVerified:ce.emailVerified||!1,phoneNumber:ce.phoneNumber||null,tenantId:ce.tenantId||null,providerData:st,metadata:new xr(ce.createdAt,ce.lastLoginAt),isAnonymous:wn};Object.assign(N,Tr)}),pi.apply(this,arguments)}function gi(){return(gi=(0,y.Z)(function*(N){const m=(0,oe.m9)(N);yield Xr(m),yield m.auth._persistUserIfCurrent(m),m.auth._notifyListenersIfCurrent(m)})).apply(this,arguments)}function Te(){return(Te=(0,y.Z)(function*(N,m){const T=yield wt(N,{},(0,y.Z)(function*(){const x=(0,oe.xO)({grant_type:"refresh_token",refresh_token:m}).slice(1),{tokenApiHost:Z,apiKey:ce}=N.config,Be=on(N,Z,"/v1/token",`key=${ce}`),st=yield N._getAdditionalHeaders();return st["Content-Type"]="application/x-www-form-urlencoded",we.fetch()(Be,{method:"POST",headers:st,body:x})}));return{accessToken:T.access_token,expiresIn:T.expires_in,refreshToken:T.refresh_token}})).apply(this,arguments)}class ie{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(m){ue(m.idToken,"internal-error"),ue(typeof m.idToken<"u","internal-error"),ue(typeof m.refreshToken<"u","internal-error");const T="expiresIn"in m&&typeof m.expiresIn<"u"?Number(m.expiresIn):function On(N){const m=Wr(N);return ue(m,"internal-error"),ue(typeof m.exp<"u","internal-error"),ue(typeof m.iat<"u","internal-error"),Number(m.exp)-Number(m.iat)}(m.idToken);this.updateTokensAndExpiration(m.idToken,m.refreshToken,T)}getToken(m,T=!1){var x=this;return(0,y.Z)(function*(){return ue(!x.accessToken||x.refreshToken,m,"user-token-expired"),T||!x.accessToken||x.isExpired?x.refreshToken?(yield x.refresh(m,x.refreshToken),x.accessToken):null:x.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(m,T){var x=this;return(0,y.Z)(function*(){const{accessToken:Z,refreshToken:ce,expiresIn:Be}=yield function Ci(N,m){return Te.apply(this,arguments)}(m,T);x.updateTokensAndExpiration(Z,ce,Number(Be))})()}updateTokensAndExpiration(m,T,x){this.refreshToken=T||null,this.accessToken=m||null,this.expirationTime=Date.now()+1e3*x}static fromJSON(m,T){const{refreshToken:x,accessToken:Z,expirationTime:ce}=T,Be=new ie;return x&&(ue("string"==typeof x,"internal-error",{appName:m}),Be.refreshToken=x),Z&&(ue("string"==typeof Z,"internal-error",{appName:m}),Be.accessToken=Z),ce&&(ue("number"==typeof ce,"internal-error",{appName:m}),Be.expirationTime=ce),Be}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(m){this.accessToken=m.accessToken,this.refreshToken=m.refreshToken,this.expirationTime=m.expirationTime}_clone(){return Object.assign(new ie,this.toJSON())}_performRefresh(){return Kt("not implemented")}}function re(N,m){ue("string"==typeof N||typeof N>"u","internal-error",{appName:m})}class ne{constructor(m){var{uid:T,auth:x,stsTokenManager:Z}=m,ce=(0,ye._T)(m,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Yi(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=T,this.auth=x,this.stsTokenManager=Z,this.accessToken=Z.accessToken,this.displayName=ce.displayName||null,this.email=ce.email||null,this.emailVerified=ce.emailVerified||!1,this.phoneNumber=ce.phoneNumber||null,this.photoURL=ce.photoURL||null,this.isAnonymous=ce.isAnonymous||!1,this.tenantId=ce.tenantId||null,this.providerData=ce.providerData?[...ce.providerData]:[],this.metadata=new xr(ce.createdAt||void 0,ce.lastLoginAt||void 0)}getIdToken(m){var T=this;return(0,y.Z)(function*(){const x=yield In(T,T.stsTokenManager.getToken(T.auth,m));return ue(x,T.auth,"internal-error"),T.accessToken!==x&&(T.accessToken=x,yield T.auth._persistUserIfCurrent(T),T.auth._notifyListenersIfCurrent(T)),x})()}getIdTokenResult(m){return function Or(N){return Pr.apply(this,arguments)}(this,m)}reload(){return function Gs(N){return gi.apply(this,arguments)}(this)}_assign(m){this!==m&&(ue(this.uid===m.uid,this.auth,"internal-error"),this.displayName=m.displayName,this.photoURL=m.photoURL,this.email=m.email,this.emailVerified=m.emailVerified,this.phoneNumber=m.phoneNumber,this.isAnonymous=m.isAnonymous,this.tenantId=m.tenantId,this.providerData=m.providerData.map(T=>Object.assign({},T)),this.metadata._copy(m.metadata),this.stsTokenManager._assign(m.stsTokenManager))}_clone(m){const T=new ne(Object.assign(Object.assign({},this),{auth:m,stsTokenManager:this.stsTokenManager._clone()}));return T.metadata._copy(this.metadata),T}_onReload(m){ue(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=m,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(m){this.reloadListener?this.reloadListener(m):this.reloadUserInfo=m}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(m,T=!1){var x=this;return(0,y.Z)(function*(){let Z=!1;m.idToken&&m.idToken!==x.stsTokenManager.accessToken&&(x.stsTokenManager.updateFromServerResponse(m),Z=!0),T&&(yield Xr(x)),yield x.auth._persistUserIfCurrent(x),Z&&x.auth._notifyListenersIfCurrent(x)})()}delete(){var m=this;return(0,y.Z)(function*(){const T=yield m.getIdToken();return yield In(m,function Ln(N,m){return Rt.apply(this,arguments)}(m.auth,{idToken:T})),m.stsTokenManager.clearRefreshToken(),m.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(m=>Object.assign({},m)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(m,T){var x,Z,ce,Be,st,bt,dn,wn;const Tr=null!==(x=T.displayName)&&void 0!==x?x:void 0,ca=null!==(Z=T.email)&&void 0!==Z?Z:void 0,Ws=null!==(ce=T.phoneNumber)&&void 0!==ce?ce:void 0,Rl=null!==(Be=T.photoURL)&&void 0!==Be?Be:void 0,qs=null!==(st=T.tenantId)&&void 0!==st?st:void 0,Sd=null!==(bt=T._redirectEventId)&&void 0!==bt?bt:void 0,Bs=null!==(dn=T.createdAt)&&void 0!==dn?dn:void 0,si=null!==(wn=T.lastLoginAt)&&void 0!==wn?wn:void 0,{uid:ao,emailVerified:Xl,isAnonymous:Wa,providerData:sl,stsTokenManager:hh}=T;ue(ao&&hh,m,"internal-error");const Xn=ie.fromJSON(this.name,hh);ue("string"==typeof ao,m,"internal-error"),re(Tr,m.name),re(ca,m.name),ue("boolean"==typeof Xl,m,"internal-error"),ue("boolean"==typeof Wa,m,"internal-error"),re(Ws,m.name),re(Rl,m.name),re(qs,m.name),re(Sd,m.name),re(Bs,m.name),re(si,m.name);const Rd=new ne({uid:ao,auth:m,email:ca,emailVerified:Xl,displayName:Tr,isAnonymous:Wa,photoURL:Rl,phoneNumber:Ws,tenantId:qs,stsTokenManager:Xn,createdAt:Bs,lastLoginAt:si});return sl&&Array.isArray(sl)&&(Rd.providerData=sl.map(Pc=>Object.assign({},Pc))),Sd&&(Rd._redirectEventId=Sd),Rd}static _fromIdTokenResponse(m,T,x=!1){return(0,y.Z)(function*(){const Z=new ie;Z.updateFromServerResponse(T);const ce=new ne({uid:T.localId,auth:m,stsTokenManager:Z,isAnonymous:x});return yield Xr(ce),ce})()}}const ae=new Map;function Re(N){Et(N instanceof Function,"Expected a class definition");let m=ae.get(N);return m?(Et(m instanceof N,"Instance stored in cache mismatched with class"),m):(m=new N,ae.set(N,m),m)}const St=(()=>{class N{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,y.Z)(function*(){return!0})()}_set(T,x){var Z=this;return(0,y.Z)(function*(){Z.storage[T]=x})()}_get(T){var x=this;return(0,y.Z)(function*(){const Z=x.storage[T];return void 0===Z?null:Z})()}_remove(T){var x=this;return(0,y.Z)(function*(){delete x.storage[T]})()}_addListener(T,x){}_removeListener(T,x){}}return N.type="NONE",N})();function Bt(N,m,T){return`firebase:${N}:${m}:${T}`}class gn{constructor(m,T,x){this.persistence=m,this.auth=T,this.userKey=x;const{config:Z,name:ce}=this.auth;this.fullUserKey=Bt(this.userKey,Z.apiKey,ce),this.fullPersistenceKey=Bt("persistence",Z.apiKey,ce),this.boundEventHandler=T._onStorageEvent.bind(T),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(m){return this.persistence._set(this.fullUserKey,m.toJSON())}getCurrentUser(){var m=this;return(0,y.Z)(function*(){const T=yield m.persistence._get(m.fullUserKey);return T?ne._fromJSON(m.auth,T):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(m){var T=this;return(0,y.Z)(function*(){if(T.persistence===m)return;const x=yield T.getCurrentUser();return yield T.removeCurrentUser(),T.persistence=m,x?T.setCurrentUser(x):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(m,T,x="authUser"){return(0,y.Z)(function*(){if(!T.length)return new gn(Re(St),m,x);const Z=(yield Promise.all(T.map(function(){var dn=(0,y.Z)(function*(wn){if(yield wn._isAvailable())return wn});return function(wn){return dn.apply(this,arguments)}}()))).filter(dn=>dn);let ce=Z[0]||Re(St);const Be=Bt(x,m.config.apiKey,m.name);let st=null;for(const dn of T)try{const wn=yield dn._get(Be);if(wn){const Tr=ne._fromJSON(m,wn);dn!==ce&&(st=Tr),ce=dn;break}}catch{}const bt=Z.filter(dn=>dn._shouldAllowMigration);return ce._shouldAllowMigration&&bt.length?(ce=bt[0],st&&(yield ce._set(Be,st.toJSON())),yield Promise.all(T.map(function(){var dn=(0,y.Z)(function*(wn){if(wn!==ce)try{yield wn._remove(Be)}catch{}});return function(wn){return dn.apply(this,arguments)}}())),new gn(ce,m,x)):new gn(ce,m,x)})()}}function Qt(N){const m=N.toLowerCase();if(m.includes("opera/")||m.includes("opr/")||m.includes("opios/"))return"Opera";if(function Ps(N=(0,oe.z$)()){return/iemobile/i.test(N)}(m))return"IEMobile";if(m.includes("msie")||m.includes("trident/"))return"IE";if(m.includes("edge/"))return"Edge";if(function un(N=(0,oe.z$)()){return/firefox\//i.test(N)}(m))return"Firefox";if(m.includes("silk/"))return"Silk";if(function rt(N=(0,oe.z$)()){return/blackberry/i.test(N)}(m))return"Blackberry";if(function Ue(N=(0,oe.z$)()){return/webos/i.test(N)}(m))return"Webos";if(function Dr(N=(0,oe.z$)()){const m=N.toLowerCase();return m.includes("safari/")&&!m.includes("chrome/")&&!m.includes("crios/")&&!m.includes("android")}(m))return"Safari";if((m.includes("chrome/")||function qr(N=(0,oe.z$)()){return/crios\//i.test(N)}(m))&&!m.includes("edge/"))return"Chrome";if(function Ys(N=(0,oe.z$)()){return/android/i.test(N)}(m))return"Android";{const x=N.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===x?.length)return x[1]}return"Other"}function vr(N,m=[]){let T;switch(N){case"Browser":T=Qt((0,oe.z$)());break;case"Worker":T=`${Qt((0,oe.z$)())}-${N}`;break;default:T=N}const x=m.length?m.join(","):"FirebaseCore-web";return`${T}/JsCore/${Ce.SDK_VERSION}/${x}`}class Zs{constructor(m){this.auth=m,this.queue=[]}pushCallback(m,T){const x=ce=>new Promise((Be,st)=>{try{Be(m(ce))}catch(bt){st(bt)}});x.onAbort=T,this.queue.push(x);const Z=this.queue.length-1;return()=>{this.queue[Z]=()=>Promise.resolve()}}runMiddleware(m){var T=this;return(0,y.Z)(function*(){if(T.auth.currentUser===m)return;const x=[];try{for(const Z of T.queue)yield Z(m),Z.onAbort&&x.push(Z.onAbort)}catch(Z){x.reverse();for(const ce of x)try{ce()}catch{}throw T.auth._errorFactory.create("login-blocked",{originalMessage:Z?.message})}})()}}function hs(){return(hs=(0,y.Z)(function*(N,m={}){return Ze(N,"GET","/v2/passwordPolicy",Fe(N,m))})).apply(this,arguments)}class ra{constructor(m){var T,x,Z,ce;const Be=m.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(T=Be.minPasswordLength)&&void 0!==T?T:6,Be.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=Be.maxPasswordLength),void 0!==Be.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=Be.containsLowercaseCharacter),void 0!==Be.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=Be.containsUppercaseCharacter),void 0!==Be.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=Be.containsNumericCharacter),void 0!==Be.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=Be.containsNonAlphanumericCharacter),this.enforcementState=m.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(Z=null===(x=m.allowedNonAlphanumericCharacters)||void 0===x?void 0:x.join(""))&&void 0!==Z?Z:"",this.forceUpgradeOnSignin=null!==(ce=m.forceUpgradeOnSignin)&&void 0!==ce&&ce,this.schemaVersion=m.schemaVersion}validatePassword(m){var T,x,Z,ce,Be,st;const bt={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(m,bt),this.validatePasswordCharacterOptions(m,bt),bt.isValid&&(bt.isValid=null===(T=bt.meetsMinPasswordLength)||void 0===T||T),bt.isValid&&(bt.isValid=null===(x=bt.meetsMaxPasswordLength)||void 0===x||x),bt.isValid&&(bt.isValid=null===(Z=bt.containsLowercaseLetter)||void 0===Z||Z),bt.isValid&&(bt.isValid=null===(ce=bt.containsUppercaseLetter)||void 0===ce||ce),bt.isValid&&(bt.isValid=null===(Be=bt.containsNumericCharacter)||void 0===Be||Be),bt.isValid&&(bt.isValid=null===(st=bt.containsNonAlphanumericCharacter)||void 0===st||st),bt}validatePasswordLengthOptions(m,T){const x=this.customStrengthOptions.minPasswordLength,Z=this.customStrengthOptions.maxPasswordLength;x&&(T.meetsMinPasswordLength=m.length>=x),Z&&(T.meetsMaxPasswordLength=m.length<=Z)}validatePasswordCharacterOptions(m,T){let x;this.updatePasswordCharacterOptionsStatuses(T,!1,!1,!1,!1);for(let Z=0;Z<m.length;Z++)x=m.charAt(Z),this.updatePasswordCharacterOptionsStatuses(T,x>="a"&&x<="z",x>="A"&&x<="Z",x>="0"&&x<="9",this.allowedNonAlphanumericCharacters.includes(x))}updatePasswordCharacterOptionsStatuses(m,T,x,Z,ce){this.customStrengthOptions.containsLowercaseLetter&&(m.containsLowercaseLetter||(m.containsLowercaseLetter=T)),this.customStrengthOptions.containsUppercaseLetter&&(m.containsUppercaseLetter||(m.containsUppercaseLetter=x)),this.customStrengthOptions.containsNumericCharacter&&(m.containsNumericCharacter||(m.containsNumericCharacter=Z)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(m.containsNonAlphanumericCharacter||(m.containsNonAlphanumericCharacter=ce))}}class ha{constructor(m,T,x,Z){this.app=m,this.heartbeatServiceProvider=T,this.appCheckServiceProvider=x,this.config=Z,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Qa(this),this.idTokenSubscription=new Qa(this),this.beforeStateQueue=new Zs(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Ct,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=m.name,this.clientVersion=Z.sdkClientVersion}_initializeWithPersistence(m,T){var x=this;return T&&(this._popupRedirectResolver=Re(T)),this._initializationPromise=this.queue((0,y.Z)(function*(){var Z,ce;if(!x._deleted&&(x.persistenceManager=yield gn.create(x,m),!x._deleted)){if(null!==(Z=x._popupRedirectResolver)&&void 0!==Z&&Z._shouldInitProactively)try{yield x._popupRedirectResolver._initialize(x)}catch{}yield x.initializeCurrentUser(T),x.lastNotifiedUid=(null===(ce=x.currentUser)||void 0===ce?void 0:ce.uid)||null,!x._deleted&&(x._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var m=this;return(0,y.Z)(function*(){if(m._deleted)return;const T=yield m.assertedPersistence.getCurrentUser();if(m.currentUser||T){if(m.currentUser&&T&&m.currentUser.uid===T.uid)return m._currentUser._assign(T),void(yield m.currentUser.getIdToken());yield m._updateCurrentUser(T,!0)}})()}initializeCurrentUser(m){var T=this;return(0,y.Z)(function*(){var x;const Z=yield T.assertedPersistence.getCurrentUser();let ce=Z,Be=!1;if(m&&T.config.authDomain){yield T.getOrInitRedirectPersistenceManager();const st=null===(x=T.redirectUser)||void 0===x?void 0:x._redirectEventId,bt=ce?._redirectEventId,dn=yield T.tryRedirectSignIn(m);(!st||st===bt)&&dn?.user&&(ce=dn.user,Be=!0)}if(!ce)return T.directlySetCurrentUser(null);if(!ce._redirectEventId){if(Be)try{yield T.beforeStateQueue.runMiddleware(ce)}catch(st){ce=Z,T._popupRedirectResolver._overrideRedirectResult(T,()=>Promise.reject(st))}return ce?T.reloadAndSetCurrentUserOrClear(ce):T.directlySetCurrentUser(null)}return ue(T._popupRedirectResolver,T,"argument-error"),yield T.getOrInitRedirectPersistenceManager(),T.redirectUser&&T.redirectUser._redirectEventId===ce._redirectEventId?T.directlySetCurrentUser(ce):T.reloadAndSetCurrentUserOrClear(ce)})()}tryRedirectSignIn(m){var T=this;return(0,y.Z)(function*(){let x=null;try{x=yield T._popupRedirectResolver._completeRedirectFn(T,m,!0)}catch{yield T._setRedirectUser(null)}return x})()}reloadAndSetCurrentUserOrClear(m){var T=this;return(0,y.Z)(function*(){try{yield Xr(m)}catch(x){if("auth/network-request-failed"!==x?.code)return T.directlySetCurrentUser(null)}return T.directlySetCurrentUser(m)})()}useDeviceLanguage(){this.languageCode=function Zt(){if(typeof navigator>"u")return null;const N=navigator;return N.languages&&N.languages[0]||N.language||null}()}_delete(){var m=this;return(0,y.Z)(function*(){m._deleted=!0})()}updateCurrentUser(m){var T=this;return(0,y.Z)(function*(){const x=m?(0,oe.m9)(m):null;return x&&ue(x.auth.config.apiKey===T.config.apiKey,T,"invalid-user-token"),T._updateCurrentUser(x&&x._clone(T))})()}_updateCurrentUser(m,T=!1){var x=this;return(0,y.Z)(function*(){if(!x._deleted)return m&&ue(x.tenantId===m.tenantId,x,"tenant-id-mismatch"),T||(yield x.beforeStateQueue.runMiddleware(m)),x.queue((0,y.Z)(function*(){yield x.directlySetCurrentUser(m),x.notifyAuthListeners()}))})()}signOut(){var m=this;return(0,y.Z)(function*(){return yield m.beforeStateQueue.runMiddleware(null),(m.redirectPersistenceManager||m._popupRedirectResolver)&&(yield m._setRedirectUser(null)),m._updateCurrentUser(null,!0)})()}setPersistence(m){var T=this;return this.queue((0,y.Z)(function*(){yield T.assertedPersistence.setPersistence(Re(m))}))}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(m){var T=this;return(0,y.Z)(function*(){T._getPasswordPolicyInternal()||(yield T._updatePasswordPolicy());const x=T._getPasswordPolicyInternal();return x.schemaVersion!==T.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(T._errorFactory.create("unsupported-password-policy-schema-version",{})):x.validatePassword(m)})()}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){var m=this;return(0,y.Z)(function*(){const T=yield function xi(N){return hs.apply(this,arguments)}(m),x=new ra(T);null===m.tenantId?m._projectPasswordPolicy=x:m._tenantPasswordPolicies[m.tenantId]=x})()}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(m){this._errorFactory=new oe.LL("auth","Firebase",m())}onAuthStateChanged(m,T,x){return this.registerStateListener(this.authStateSubscription,m,T,x)}beforeAuthStateChanged(m,T){return this.beforeStateQueue.pushCallback(m,T)}onIdTokenChanged(m,T,x){return this.registerStateListener(this.idTokenSubscription,m,T,x)}authStateReady(){return new Promise((m,T)=>{if(this.currentUser)m();else{const x=this.onAuthStateChanged(()=>{x(),m()},T)}})}toJSON(){var m;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(m=this._currentUser)||void 0===m?void 0:m.toJSON()}}_setRedirectUser(m,T){var x=this;return(0,y.Z)(function*(){const Z=yield x.getOrInitRedirectPersistenceManager(T);return null===m?Z.removeCurrentUser():Z.setCurrentUser(m)})()}getOrInitRedirectPersistenceManager(m){var T=this;return(0,y.Z)(function*(){if(!T.redirectPersistenceManager){const x=m&&Re(m)||T._popupRedirectResolver;ue(x,T,"argument-error"),T.redirectPersistenceManager=yield gn.create(T,[Re(x._redirectPersistence)],"redirectUser"),T.redirectUser=yield T.redirectPersistenceManager.getCurrentUser()}return T.redirectPersistenceManager})()}_redirectUserForId(m){var T=this;return(0,y.Z)(function*(){var x,Z;return T._isInitialized&&(yield T.queue((0,y.Z)(function*(){}))),(null===(x=T._currentUser)||void 0===x?void 0:x._redirectEventId)===m?T._currentUser:(null===(Z=T.redirectUser)||void 0===Z?void 0:Z._redirectEventId)===m?T.redirectUser:null})()}_persistUserIfCurrent(m){var T=this;return(0,y.Z)(function*(){if(m===T.currentUser)return T.queue((0,y.Z)(function*(){return T.directlySetCurrentUser(m)}))})()}_notifyListenersIfCurrent(m){m===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var m,T;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const x=null!==(T=null===(m=this.currentUser)||void 0===m?void 0:m.uid)&&void 0!==T?T:null;this.lastNotifiedUid!==x&&(this.lastNotifiedUid=x,this.authStateSubscription.next(this.currentUser))}registerStateListener(m,T,x,Z){if(this._deleted)return()=>{};const ce="function"==typeof T?T:T.next.bind(T);let Be=!1;const st=this._isInitialized?Promise.resolve():this._initializationPromise;if(ue(st,this,"internal-error"),st.then(()=>{Be||ce(this.currentUser)}),"function"==typeof T){const bt=m.addObserver(T,x,Z);return()=>{Be=!0,bt()}}{const bt=m.addObserver(T);return()=>{Be=!0,bt()}}}directlySetCurrentUser(m){var T=this;return(0,y.Z)(function*(){T.currentUser&&T.currentUser!==m&&T._currentUser._stopProactiveRefresh(),m&&T.isProactiveRefreshEnabled&&m._startProactiveRefresh(),T.currentUser=m,m?yield T.assertedPersistence.setCurrentUser(m):yield T.assertedPersistence.removeCurrentUser()})()}queue(m){return this.operations=this.operations.then(m,m),this.operations}get assertedPersistence(){return ue(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(m){!m||this.frameworks.includes(m)||(this.frameworks.push(m),this.frameworks.sort(),this.clientVersion=vr(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var m=this;return(0,y.Z)(function*(){var T;const x={"X-Client-Version":m.clientVersion};m.app.options.appId&&(x["X-Firebase-gmpid"]=m.app.options.appId);const Z=yield null===(T=m.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===T?void 0:T.getHeartbeatsHeader();Z&&(x["X-Firebase-Client"]=Z);const ce=yield m._getAppCheckToken();return ce&&(x["X-Firebase-AppCheck"]=ce),x})()}_getAppCheckToken(){var m=this;return(0,y.Z)(function*(){var T;const x=yield null===(T=m.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===T?void 0:T.getToken();return x?.error&&function Ve(N,...m){Jt.logLevel<=De.in.WARN&&Jt.warn(`Auth (${Ce.SDK_VERSION}): ${N}`,...m)}(`Error while retrieving App Check token: ${x.error}`),x?.token})()}}class Qa{constructor(m){this.auth=m,this.observer=null,this.addObserver=(0,oe.ne)(T=>this.observer=T)}get next(){return ue(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function Cr(){return(Cr=(0,y.Z)(function*(N,m){return Ze(N,"POST","/v1/accounts:sendOobCode",Fe(N,m))})).apply(this,arguments)}function ai(){return(ai=(0,y.Z)(function*(N,m){return function ri(N,m){return Cr.apply(this,arguments)}(N,m)})).apply(this,arguments)}function to(){return to=(0,y.Z)(function*(N,m){const T=(0,oe.m9)(N),Z={requestType:"VERIFY_EMAIL",idToken:yield N.getIdToken()};m&&function Ls(N,m,T){var x;ue((null===(x=T.url)||void 0===x?void 0:x.length)>0,N,"invalid-continue-uri"),ue(typeof T.dynamicLinkDomain>"u"||T.dynamicLinkDomain.length>0,N,"invalid-dynamic-link-domain"),m.continueUrl=T.url,m.dynamicLinkDomain=T.dynamicLinkDomain,m.canHandleCodeInApp=T.handleCodeInApp,T.iOS&&(ue(T.iOS.bundleId.length>0,N,"missing-ios-bundle-id"),m.iOSBundleId=T.iOS.bundleId),T.android&&(ue(T.android.packageName.length>0,N,"missing-android-pkg-name"),m.androidInstallApp=T.android.installApp,m.androidMinimumVersionCode=T.android.minimumVersion,m.androidPackageName=T.android.packageName)}(T.auth,Z,m);const{email:ce}=yield function Yr(N,m){return ai.apply(this,arguments)}(T.auth,Z);ce!==N.email&&(yield N.reload())}),to.apply(this,arguments)}(function Qs(N){return`__${N}${Math.floor(1e6*Math.random())}`})("rcb"),new Pt(3e4,6e4),new Pt(2e3,1e4),new Pt(3e4,6e4),new Pt(5e3,15e3),encodeURIComponent("fac");var Al="@firebase/auth";class nl{constructor(m){this.auth=m,this.internalListeners=new Map}getUid(){var m;return this.assertAuthConfigured(),(null===(m=this.auth.currentUser)||void 0===m?void 0:m.uid)||null}getToken(m){var T=this;return(0,y.Z)(function*(){return T.assertAuthConfigured(),yield T.auth._initializationPromise,T.auth.currentUser?{accessToken:yield T.auth.currentUser.getIdToken(m)}:null})()}addAuthTokenListener(m){if(this.assertAuthConfigured(),this.internalListeners.has(m))return;const T=this.auth.onIdTokenChanged(x=>{m(x?.stsTokenManager.accessToken||null)});this.internalListeners.set(m,T),this.updateProactiveRefresh()}removeAuthTokenListener(m){this.assertAuthConfigured();const T=this.internalListeners.get(m);T&&(this.internalListeners.delete(m),T(),this.updateProactiveRefresh())}assertAuthConfigured(){ue(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}(0,oe.Pz)("authIdTokenMaxAge"),function Aa(N){(0,Ce._registerComponent)(new Ne.wA("auth",(m,{options:T})=>{const x=m.getProvider("app").getImmediate(),Z=m.getProvider("heartbeat"),ce=m.getProvider("app-check-internal"),{apiKey:Be,authDomain:st}=x.options;ue(Be&&!Be.includes(":"),"invalid-api-key",{appName:x.name});const bt={apiKey:Be,authDomain:st,clientPlatform:N,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:vr(N)},dn=new ha(x,Z,ce,bt);return function Ai(N,m){const T=m?.persistence||[],x=(Array.isArray(T)?T:[T]).map(Re);m?.errorMap&&N._updateErrorMap(m.errorMap),N._initializeWithPersistence(x,m?.popupRedirectResolver)}(dn,T),dn},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((m,T,x)=>{m.getProvider("auth-internal").initialize()})),(0,Ce._registerComponent)(new Ne.wA("auth-internal",m=>{const T=function Cn(N){return(0,oe.m9)(N)}(m.getProvider("auth").getImmediate());return new nl(T)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,Ce.registerVersion)(Al,"1.3.1",function Sl(N){switch(N){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(N)),(0,Ce.registerVersion)(Al,"1.3.1","esm2017")}("Browser");var Rs=H(5879),Ad=H(7213),il=H(9027);let Jl=(()=>{class N{constructor(T,x){this.afauth=T,this.firestore=x}sendVerificationEmail(){var T=this;return(0,y.Z)(function*(){const x=yield T.afauth.currentUser;if(!x)throw new Error("El usuario actual es nulo.");try{yield function Kc(N,m){return to.apply(this,arguments)}(x)}catch(Z){console.error("Error al enviar el correo de verificaci\xf3n:",Z)}})()}register(T,x){var Z=this;return(0,y.Z)(function*(){try{const ce=yield Z.afauth.createUserWithEmailAndPassword(T,x);return ce&&ce.user?(yield Z.sendVerificationEmail(),ce):(console.log("No se pudo obtener el usuario despu\xe9s del registro."),null)}catch(ce){return console.log("Error en register: ",ce),null}})()}login(T,x){var Z=this;return(0,y.Z)(function*(){try{const ce=yield Z.afauth.signInWithEmailAndPassword(T,x);return ce.user?ce:null}catch(ce){return console.log("error en login: ",ce),null}})()}getUserLogged(){return this.afauth.authState}getAuthState(){return this.afauth.authState}logout(){this.afauth.signOut()}getUserEmail(){return this.afauth.authState.pipe((0,fe.U)(T=>T?T.email:null))}getUserEmailByUID(T){return this.firestore.collection("users").doc(T).valueChanges().pipe((0,fe.U)(x=>x?x.email:null))}static#e=this.\u0275fac=function(x){return new(x||N)(Rs.LFG(Ad.zQ),Rs.LFG(il.ST))};static#t=this.\u0275prov=Rs.Yz7({token:N,factory:N.\u0275fac,providedIn:"root"})}return N})()},6751:(zt,Ye,H)=>{H.d(Ye,{T:()=>oe});var y=H(5879),fe=H(9027);let oe=(()=>{class Ce{constructor(ye){this.firestore=ye,this.usuarios=[],this.obtenerTodos("usuarios").subscribe(Ne=>{this.usuarios=Ne.map(I=>{let ze=I.payload.doc.data();return ze.id=I.payload.doc.id,ze})})}crear(ye,Ne){return this.firestore.collection(ye).add(Ne)}obtenerPorId(ye,Ne){return this.firestore.collection(ye).doc(Ne).snapshotChanges()}obtenerTodos(ye){return this.firestore.collection(ye).snapshotChanges()}actualizar(ye,Ne,I){return this.firestore.collection(ye).doc(I).set(Ne)}eliminar(ye,Ne){return this.firestore.collection(ye).doc(Ne).delete()}createWithCustomId(ye,Ne,I){this.firestore.collection(ye).doc(Ne).set(I)}static#e=this.\u0275fac=function(Ne){return new(Ne||Ce)(y.LFG(fe.ST))};static#t=this.\u0275prov=y.Yz7({token:Ce,factory:Ce.\u0275fac,providedIn:"root"})}return Ce})()},1421:(zt,Ye,H)=>{var y=H(6593),fe=H(95),oe=H(1826),Ce=H(6751),De=H(4664),ye=H(2096),Ne=H(4108),I=H(5879);const xe=[{path:"",redirectTo:"bienvenida",pathMatch:"full"},{path:"bienvenida",loadChildren:()=>H.e(119).then(H.bind(H,6119)).then(d=>d.BienvenidaModule)},{path:"registro",loadChildren:()=>Promise.all([H.e(700),H.e(228)]).then(H.bind(H,8228)).then(d=>d.RegistroModule)},{path:"login",loadChildren:()=>Promise.all([H.e(700),H.e(330)]).then(H.bind(H,7330)).then(d=>d.LoginModule)},{path:"verificacion",loadChildren:()=>H.e(187).then(H.bind(H,9187)).then(d=>d.VerificacionEmailModule)},{path:"seccion-usuarios",loadChildren:()=>Promise.all([H.e(700),H.e(228),H.e(176)]).then(H.bind(H,7176)).then(d=>d.SeccionUsuariosModule),canActivate:[(d,D)=>{const c=(0,I.f3M)(Ne.e),p=(0,I.f3M)(Ce.T);return(0,I.f3M)(oe.F0),c.getUserEmail().pipe((0,De.w)(j=>{if(j){console.log(j);const Y=j,ve=p.usuarios.find(Me=>Me.email==Y);if(ve&&("administrador"==ve.perfil||"Administrador"==ve.perfil))return console.log("Administrador True"),(0,ye.of)(!0)}return(0,ye.of)(!1)}))}]},{path:"home",loadChildren:()=>Promise.all([H.e(94),H.e(310)]).then(H.bind(H,1310)).then(d=>d.HomeModule)},{path:"solicitar-turno",loadChildren:()=>H.e(94).then(H.bind(H,94)).then(d=>d.SolicitarTurnoModule),canActivate:[(d,D)=>{const c=(0,I.f3M)(Ne.e),p=(0,I.f3M)(Ce.T);return(0,I.f3M)(oe.F0),c.getUserEmail().pipe((0,De.w)(j=>{if(j){console.log(j);const Y=j,ve=p.usuarios.find(Me=>Me.email==Y);if(ve&&"especialista"!=ve.perfil.toLocaleLowerCase())return(0,ye.of)(!0)}return(0,ye.of)(!1)}))}]},{path:"mi-perfil",loadChildren:()=>Promise.all([H.e(700),H.e(227)]).then(H.bind(H,4227)).then(d=>d.MiPerfilModule)},{path:"mis-turnos",loadChildren:()=>H.e(832).then(H.bind(H,6832)).then(d=>d.MisTurnosModule)},{path:"**",component:(()=>{class d{static#e=this.\u0275fac=function(p){return new(p||d)};static#t=this.\u0275cmp=I.Xpm({type:d,selectors:[["app-not-found"]],decls:10,vars:0,consts:[[1,"container"],[1,"text-center","text-dark"],["src","../../../assets/img/not-found.png","alt",""]],template:function(p,w){1&p&&(I.TgZ(0,"body")(1,"div",0),I._UZ(2,"br")(3,"br"),I.TgZ(4,"h1",1),I._uU(5,"P\xe1gina no encontrada"),I.qZA(),I.TgZ(6,"div"),I._UZ(7,"br")(8,"br")(9,"img",2),I.qZA()()())},styles:["body[_ngcontent-%COMP%]{background-color:#49708a;width:100vw;height:100vh;text-align:center}"]})}return d})()}];let dt=(()=>{class d{static#e=this.\u0275fac=function(p){return new(p||d)};static#t=this.\u0275mod=I.oAB({type:d});static#n=this.\u0275inj=I.cJS({imports:[oe.Bz.forRoot(xe),oe.Bz]})}return d})(),it=(()=>{class d{constructor(){this.title="clinica"}static#e=this.\u0275fac=function(p){return new(p||d)};static#t=this.\u0275cmp=I.Xpm({type:d,selectors:[["app-root"]],decls:1,vars:0,template:function(p,w){1&p&&I._UZ(0,"router-outlet")},dependencies:[oe.lC]})}return d})();var It=H(7217),ct=H(5592),Ct=H(6232),lt=H(8645),Jt=H(4829),Ve=H(1631),Le=H(4266),$e=H(4674),Oe=H(7400);const We=["addListener","removeListener"],at=["addEventListener","removeEventListener"],mt=["on","off"];function ue(d,D,c,p){if((0,$e.m)(c)&&(p=c,c=void 0),p)return ue(d,D,c).pipe((0,Oe.Z)(p));const[w,j]=function Dn(d){return(0,$e.m)(d.addEventListener)&&(0,$e.m)(d.removeEventListener)}(d)?at.map(Y=>ve=>d[Y](D,ve,c)):function Et(d){return(0,$e.m)(d.addListener)&&(0,$e.m)(d.removeListener)}(d)?We.map(Kt(d,D)):function $n(d){return(0,$e.m)(d.on)&&(0,$e.m)(d.off)}(d)?mt.map(Kt(d,D)):[];if(!w&&(0,Le.z)(d))return(0,Ve.z)(Y=>ue(Y,D,c))((0,Jt.Xf)(d));if(!w)throw new TypeError("Invalid event target");return new ct.y(Y=>{const ve=(...Me)=>Y.next(1<Me.length?Me:Me[0]);return w(ve),()=>j(ve)})}function Kt(d,D){return c=>p=>d[c](D,p)}var gr=H(6321),or=H(671);const{isArray:Ie}=Array;function we(d){return 1===d.length&&Ie(d[0])?d[0]:d}var He=H(8251);H(3019);var Nt=H(9940);function wt(...d){const D=(0,Nt.jO)(d),c=we(d);return c.length?new ct.y(p=>{let w=c.map(()=>[]),j=c.map(()=>!1);p.add(()=>{w=j=null});for(let Y=0;!p.closed&&Y<c.length;Y++)(0,Jt.Xf)(c[Y]).subscribe((0,He.x)(p,ve=>{if(w[Y].push(ve),w.every(Me=>Me.length)){const Me=w.map(nt=>nt.shift());p.next(D?D(...Me):Me),w.some((nt,Xe)=>!nt.length&&j[Xe])&&p.complete()}},()=>{j[Y]=!0,!w[Y].length&&p.complete()}));return()=>{w=j=null}}):Ct.E}var nr=H(5211),ln=H(9773),on=H(2181),Sn=H(8180),xn=H(9397),Rn=H(7398),_e=H(9360),Se=H(2737),je=H(2420);function ot(...d){const D=(0,Nt.jO)(d);return(0,_e.e)((c,p)=>{const w=d.length,j=new Array(w);let Y=d.map(()=>!1),ve=!1;for(let Me=0;Me<w;Me++)(0,Jt.Xf)(d[Me]).subscribe((0,He.x)(p,nt=>{j[Me]=nt,!ve&&!Y[Me]&&(Y[Me]=!0,(ve=Y.every(Se.y))&&(Y=null))},je.Z));c.subscribe((0,He.x)(p,Me=>{if(ve){const nt=[Me,...j];p.next(D?D(...nt):nt)}}))})}H(975),H(7921),H(3997);var Wt=H(6814);Math,Math,Math;const zs=["*"],ya=["dialog"];function L(d){return"string"==typeof d}function Qe(d){return null!=d}function bn(d){return(d||document.body).getBoundingClientRect()}const oa={animation:!0,transitionTimerDelayMs:5},ba=()=>{},{transitionTimerDelayMs:Ed}=oa,Ni=new Map,io=(d,D,c,p)=>{let w=p.context||{};const j=Ni.get(D);if(j)switch(p.runningTransition){case"continue":return Ct.E;case"stop":d.run(()=>j.transition$.complete()),w=Object.assign(j.context,w),Ni.delete(D)}const Y=c(D,p.animation,w)||ba;if(!p.animation||"none"===window.getComputedStyle(D).transitionProperty)return d.run(()=>Y()),(0,ye.of)(void 0).pipe(function As(d){return D=>new ct.y(c=>D.subscribe({next:Y=>d.run(()=>c.next(Y)),error:Y=>d.run(()=>c.error(Y)),complete:()=>d.run(()=>c.complete())}))}(d));const ve=new lt.x,Me=new lt.x,nt=ve.pipe(function Ft(...d){return D=>(0,nr.z)(D,(0,ye.of)(...d))}(!0));Ni.set(D,{transition$:ve,complete:()=>{Me.next(),Me.complete()},context:w});const Xe=function as(d){const{transitionDelay:D,transitionDuration:c}=window.getComputedStyle(d);return 1e3*(parseFloat(D)+parseFloat(c))}(D);return d.runOutsideAngular(()=>{const qt=ue(D,"transitionend").pipe((0,ln.R)(nt),(0,on.h)(({target:kt})=>kt===D));(function Pe(...d){return 1===(d=we(d)).length?(0,Jt.Xf)(d[0]):new ct.y(function Fe(d){return D=>{let c=[];for(let p=0;c&&!D.closed&&p<d.length;p++)c.push((0,Jt.Xf)(d[p]).subscribe((0,He.x)(D,w=>{if(c){for(let j=0;j<c.length;j++)j!==p&&c[j].unsubscribe();c=null}D.next(w)})))}}(d))})(function Pt(d=0,D,c=gr.P){let p=-1;return null!=D&&((0,or.K)(D)?c=D:p=D),new ct.y(w=>{let j=function Zt(d){return d instanceof Date&&!isNaN(d)}(d)?+d-c.now():d;j<0&&(j=0);let Y=0;return c.schedule(function(){w.closed||(w.next(Y++),0<=p?this.schedule(void 0,p):w.complete())},j)})}(Xe+Ed).pipe((0,ln.R)(nt)),qt,Me).pipe((0,ln.R)(nt)).subscribe(()=>{Ni.delete(D),d.run(()=>{Y(),ve.next(),ve.complete()})})}),ve.asObservable()};let su=(()=>{class d{constructor(){this.animation=oa.animation}static#e=this.\u0275fac=function(p){return new(p||d)};static#t=this.\u0275prov=I.Yz7({token:d,factory:d.\u0275fac,providedIn:"root"})}return d})(),Jc=(()=>{class d{static#e=this.\u0275fac=function(p){return new(p||d)};static#t=this.\u0275mod=I.oAB({type:d});static#n=this.\u0275inj=I.cJS({})}return d})(),Ru=(()=>{class d{static#e=this.\u0275fac=function(p){return new(p||d)};static#t=this.\u0275mod=I.oAB({type:d});static#n=this.\u0275inj=I.cJS({})}return d})(),Xu=(()=>{class d{static#e=this.\u0275fac=function(p){return new(p||d)};static#t=this.\u0275mod=I.oAB({type:d});static#n=this.\u0275inj=I.cJS({})}return d})(),Ou=(()=>{class d{static#e=this.\u0275fac=function(p){return new(p||d)};static#t=this.\u0275mod=I.oAB({type:d});static#n=this.\u0275inj=I.cJS({})}return d})();var hi=function(d){return d[d.Tab=9]="Tab",d[d.Enter=13]="Enter",d[d.Escape=27]="Escape",d[d.Space=32]="Space",d[d.PageUp=33]="PageUp",d[d.PageDown=34]="PageDown",d[d.End=35]="End",d[d.Home=36]="Home",d[d.ArrowLeft=37]="ArrowLeft",d[d.ArrowUp=38]="ArrowUp",d[d.ArrowRight=39]="ArrowRight",d[d.ArrowDown=40]="ArrowDown",d}(hi||{});typeof navigator<"u"&&navigator.userAgent&&(/iPad|iPhone|iPod/.test(navigator.userAgent)||/Macintosh/.test(navigator.userAgent)&&navigator.maxTouchPoints&&navigator.maxTouchPoints>2||/Android/.test(navigator.userAgent));const Sc=["a[href]","button:not([disabled])",'input:not([disabled]):not([type="hidden"])',"select:not([disabled])","textarea:not([disabled])","[contenteditable]",'[tabindex]:not([tabindex="-1"])'].join(", ");function xu(d){const D=Array.from(d.querySelectorAll(Sc)).filter(c=>-1!==c.tabIndex);return[D[0],D[D.length-1]]}new Date(1882,10,12),new Date(2174,10,25);let kd=(()=>{class d{static#e=this.\u0275fac=function(p){return new(p||d)};static#t=this.\u0275mod=I.oAB({type:d});static#n=this.\u0275inj=I.cJS({})}return d})(),Rr=(()=>{class d{static#e=this.\u0275fac=function(p){return new(p||d)};static#t=this.\u0275mod=I.oAB({type:d});static#n=this.\u0275inj=I.cJS({})}return d})();class Bu{constructor(D,c,p){this.nodes=D,this.viewRef=c,this.componentRef=p}}let Fd=(()=>{class d{constructor(c,p){this._el=c,this._zone=p}ngOnInit(){this._zone.onStable.asObservable().pipe((0,Sn.q)(1)).subscribe(()=>{io(this._zone,this._el.nativeElement,(c,p)=>{p&&bn(c),c.classList.add("show")},{animation:this.animation,runningTransition:"continue"})})}hide(){return io(this._zone,this._el.nativeElement,({classList:c})=>c.remove("show"),{animation:this.animation,runningTransition:"stop"})}static#e=this.\u0275fac=function(p){return new(p||d)(I.Y36(I.SBq),I.Y36(I.R0b))};static#t=this.\u0275cmp=I.Xpm({type:d,selectors:[["ngb-modal-backdrop"]],hostAttrs:[2,"z-index","1055"],hostVars:6,hostBindings:function(p,w){2&p&&(I.Tol("modal-backdrop"+(w.backdropClass?" "+w.backdropClass:"")),I.ekj("show",!w.animation)("fade",w.animation))},inputs:{animation:"animation",backdropClass:"backdropClass"},standalone:!0,features:[I.jDz],decls:0,vars:0,template:function(p,w){},encapsulation:2})}return d})();class ul{update(D){}close(D){}dismiss(D){}}const Qf=["animation","ariaLabelledBy","ariaDescribedBy","backdrop","centered","fullscreen","keyboard","scrollable","size","windowClass","modalDialogClass"],sf=["animation","backdropClass"];class b{_applyWindowOptions(D,c){Qf.forEach(p=>{Qe(c[p])&&(D[p]=c[p])})}_applyBackdropOptions(D,c){sf.forEach(p=>{Qe(c[p])&&(D[p]=c[p])})}update(D){this._applyWindowOptions(this._windowCmptRef.instance,D),this._backdropCmptRef&&this._backdropCmptRef.instance&&this._applyBackdropOptions(this._backdropCmptRef.instance,D)}get componentInstance(){if(this._contentRef&&this._contentRef.componentRef)return this._contentRef.componentRef.instance}get closed(){return this._closed.asObservable().pipe((0,ln.R)(this._hidden))}get dismissed(){return this._dismissed.asObservable().pipe((0,ln.R)(this._hidden))}get hidden(){return this._hidden.asObservable()}get shown(){return this._windowCmptRef.instance.shown.asObservable()}constructor(D,c,p,w){this._windowCmptRef=D,this._contentRef=c,this._backdropCmptRef=p,this._beforeDismiss=w,this._closed=new lt.x,this._dismissed=new lt.x,this._hidden=new lt.x,D.instance.dismissEvent.subscribe(j=>{this.dismiss(j)}),this.result=new Promise((j,Y)=>{this._resolve=j,this._reject=Y}),this.result.then(null,()=>{})}close(D){this._windowCmptRef&&(this._closed.next(D),this._resolve(D),this._removeModalElements())}_dismiss(D){this._dismissed.next(D),this._reject(D),this._removeModalElements()}dismiss(D){if(this._windowCmptRef)if(this._beforeDismiss){const c=this._beforeDismiss();!function Ke(d){return d&&d.then}(c)?!1!==c&&this._dismiss(D):c.then(p=>{!1!==p&&this._dismiss(D)},()=>{})}else this._dismiss(D)}_removeModalElements(){const D=this._windowCmptRef.instance.hide(),c=this._backdropCmptRef?this._backdropCmptRef.instance.hide():(0,ye.of)(void 0);D.subscribe(()=>{const{nativeElement:p}=this._windowCmptRef.location;p.parentNode.removeChild(p),this._windowCmptRef.destroy(),this._contentRef&&this._contentRef.viewRef&&this._contentRef.viewRef.destroy(),this._windowCmptRef=null,this._contentRef=null}),c.subscribe(()=>{if(this._backdropCmptRef){const{nativeElement:p}=this._backdropCmptRef.location;p.parentNode.removeChild(p),this._backdropCmptRef.destroy(),this._backdropCmptRef=null}}),wt(D,c).subscribe(()=>{this._hidden.next(),this._hidden.complete()})}}var f=function(d){return d[d.BACKDROP_CLICK=0]="BACKDROP_CLICK",d[d.ESC=1]="ESC",d}(f||{});let _=(()=>{class d{constructor(c,p,w){this._document=c,this._elRef=p,this._zone=w,this._closed$=new lt.x,this._elWithFocus=null,this.backdrop=!0,this.keyboard=!0,this.dismissEvent=new I.vpe,this.shown=new lt.x,this.hidden=new lt.x}get fullscreenClass(){return!0===this.fullscreen?" modal-fullscreen":L(this.fullscreen)?` modal-fullscreen-${this.fullscreen}-down`:""}dismiss(c){this.dismissEvent.emit(c)}ngOnInit(){this._elWithFocus=this._document.activeElement,this._zone.onStable.asObservable().pipe((0,Sn.q)(1)).subscribe(()=>{this._show()})}ngOnDestroy(){this._disableEventHandling()}hide(){const{nativeElement:c}=this._elRef,p={animation:this.animation,runningTransition:"stop"},Y=wt(io(this._zone,c,()=>c.classList.remove("show"),p),io(this._zone,this._dialogEl.nativeElement,()=>{},p));return Y.subscribe(()=>{this.hidden.next(),this.hidden.complete()}),this._disableEventHandling(),this._restoreFocus(),Y}_show(){const c={animation:this.animation,runningTransition:"continue"};wt(io(this._zone,this._elRef.nativeElement,(j,Y)=>{Y&&bn(j),j.classList.add("show")},c),io(this._zone,this._dialogEl.nativeElement,()=>{},c)).subscribe(()=>{this.shown.next(),this.shown.complete()}),this._enableEventHandling(),this._setFocus()}_enableEventHandling(){const{nativeElement:c}=this._elRef;this._zone.runOutsideAngular(()=>{ue(c,"keydown").pipe((0,ln.R)(this._closed$),(0,on.h)(w=>w.which===hi.Escape)).subscribe(w=>{this.keyboard?requestAnimationFrame(()=>{w.defaultPrevented||this._zone.run(()=>this.dismiss(f.ESC))}):"static"===this.backdrop&&this._bumpBackdrop()});let p=!1;ue(this._dialogEl.nativeElement,"mousedown").pipe((0,ln.R)(this._closed$),(0,xn.b)(()=>p=!1),(0,De.w)(()=>ue(c,"mouseup").pipe((0,ln.R)(this._closed$),(0,Sn.q)(1))),(0,on.h)(({target:w})=>c===w)).subscribe(()=>{p=!0}),ue(c,"click").pipe((0,ln.R)(this._closed$)).subscribe(({target:w})=>{c===w&&("static"===this.backdrop?this._bumpBackdrop():!0===this.backdrop&&!p&&this._zone.run(()=>this.dismiss(f.BACKDROP_CLICK))),p=!1})})}_disableEventHandling(){this._closed$.next()}_setFocus(){const{nativeElement:c}=this._elRef;if(!c.contains(document.activeElement)){const p=c.querySelector("[ngbAutofocus]"),w=xu(c)[0];(p||w||c).focus()}}_restoreFocus(){const c=this._document.body,p=this._elWithFocus;let w;w=p&&p.focus&&c.contains(p)?p:c,this._zone.runOutsideAngular(()=>{setTimeout(()=>w.focus()),this._elWithFocus=null})}_bumpBackdrop(){"static"===this.backdrop&&io(this._zone,this._elRef.nativeElement,({classList:c})=>(c.add("modal-static"),()=>c.remove("modal-static")),{animation:this.animation,runningTransition:"continue"})}static#e=this.\u0275fac=function(p){return new(p||d)(I.Y36(Wt.K0),I.Y36(I.SBq),I.Y36(I.R0b))};static#t=this.\u0275cmp=I.Xpm({type:d,selectors:[["ngb-modal-window"]],viewQuery:function(p,w){if(1&p&&I.Gf(ya,7),2&p){let j;I.iGM(j=I.CRH())&&(w._dialogEl=j.first)}},hostAttrs:["role","dialog","tabindex","-1"],hostVars:7,hostBindings:function(p,w){2&p&&(I.uIk("aria-modal",!0)("aria-labelledby",w.ariaLabelledBy)("aria-describedby",w.ariaDescribedBy),I.Tol("modal d-block"+(w.windowClass?" "+w.windowClass:"")),I.ekj("fade",w.animation))},inputs:{animation:"animation",ariaLabelledBy:"ariaLabelledBy",ariaDescribedBy:"ariaDescribedBy",backdrop:"backdrop",centered:"centered",fullscreen:"fullscreen",keyboard:"keyboard",scrollable:"scrollable",size:"size",windowClass:"windowClass",modalDialogClass:"modalDialogClass"},outputs:{dismissEvent:"dismiss"},standalone:!0,features:[I.jDz],ngContentSelectors:zs,decls:4,vars:2,consts:[["role","document"],["dialog",""],[1,"modal-content"]],template:function(p,w){1&p&&(I.F$t(),I.TgZ(0,"div",0,1)(2,"div",2),I.Hsn(3),I.qZA()()),2&p&&I.Tol("modal-dialog"+(w.size?" modal-"+w.size:"")+(w.centered?" modal-dialog-centered":"")+w.fullscreenClass+(w.scrollable?" modal-dialog-scrollable":"")+(w.modalDialogClass?" "+w.modalDialogClass:""))},styles:["ngb-modal-window .component-host-scrollable{display:flex;flex-direction:column;overflow:hidden}\n"],encapsulation:2})}return d})(),C=(()=>{class d{constructor(c){this._document=c}hide(){const c=Math.abs(window.innerWidth-this._document.documentElement.clientWidth),p=this._document.body,w=p.style,{overflow:j,paddingRight:Y}=w;if(c>0){const ve=parseFloat(window.getComputedStyle(p).paddingRight);w.paddingRight=`${ve+c}px`}return w.overflow="hidden",()=>{c>0&&(w.paddingRight=Y),w.overflow=j}}static#e=this.\u0275fac=function(p){return new(p||d)(I.LFG(Wt.K0))};static#t=this.\u0275prov=I.Yz7({token:d,factory:d.\u0275fac,providedIn:"root"})}return d})(),G=(()=>{class d{constructor(c,p,w,j,Y,ve,Me){this._applicationRef=c,this._injector=p,this._environmentInjector=w,this._document=j,this._scrollBar=Y,this._rendererFactory=ve,this._ngZone=Me,this._activeWindowCmptHasChanged=new lt.x,this._ariaHiddenValues=new Map,this._scrollBarRestoreFn=null,this._modalRefs=[],this._windowCmpts=[],this._activeInstances=new I.vpe,this._activeWindowCmptHasChanged.subscribe(()=>{if(this._windowCmpts.length){const nt=this._windowCmpts[this._windowCmpts.length-1];((d,D,c,p=!1)=>{d.runOutsideAngular(()=>{const w=ue(D,"focusin").pipe((0,ln.R)(c),(0,Rn.U)(j=>j.target));ue(D,"keydown").pipe((0,ln.R)(c),(0,on.h)(j=>j.which===hi.Tab),ot(w)).subscribe(([j,Y])=>{const[ve,Me]=xu(D);(Y===ve||Y===D)&&j.shiftKey&&(Me.focus(),j.preventDefault()),Y===Me&&!j.shiftKey&&(ve.focus(),j.preventDefault())}),p&&ue(D,"click").pipe((0,ln.R)(c),ot(w),(0,Rn.U)(j=>j[1])).subscribe(j=>j.focus())})})(this._ngZone,nt.location.nativeElement,this._activeWindowCmptHasChanged),this._revertAriaHidden(),this._setAriaHidden(nt.location.nativeElement)}})}_restoreScrollBar(){const c=this._scrollBarRestoreFn;c&&(this._scrollBarRestoreFn=null,c())}_hideScrollBar(){this._scrollBarRestoreFn||(this._scrollBarRestoreFn=this._scrollBar.hide())}open(c,p,w){const j=w.container instanceof HTMLElement?w.container:Qe(w.container)?this._document.querySelector(w.container):this._document.body,Y=this._rendererFactory.createRenderer(null,null);if(!j)throw new Error(`The specified modal container "${w.container||"body"}" was not found in the DOM.`);this._hideScrollBar();const ve=new ul,Me=(c=w.injector||c).get(I.lqb,null)||this._environmentInjector,nt=this._getContentRef(c,Me,p,ve,w);let Xe=!1!==w.backdrop?this._attachBackdrop(j):void 0,qt=this._attachWindowComponent(j,nt.nodes),At=new b(qt,nt,Xe,w.beforeDismiss);return this._registerModalRef(At),this._registerWindowCmpt(qt),At.hidden.pipe((0,Sn.q)(1)).subscribe(()=>Promise.resolve(!0).then(()=>{this._modalRefs.length||(Y.removeClass(this._document.body,"modal-open"),this._restoreScrollBar(),this._revertAriaHidden())})),ve.close=kt=>{At.close(kt)},ve.dismiss=kt=>{At.dismiss(kt)},ve.update=kt=>{At.update(kt)},At.update(w),1===this._modalRefs.length&&Y.addClass(this._document.body,"modal-open"),Xe&&Xe.instance&&Xe.changeDetectorRef.detectChanges(),qt.changeDetectorRef.detectChanges(),At}get activeInstances(){return this._activeInstances}dismissAll(c){this._modalRefs.forEach(p=>p.dismiss(c))}hasOpenModals(){return this._modalRefs.length>0}_attachBackdrop(c){let p=(0,I.LMc)(Fd,{environmentInjector:this._applicationRef.injector,elementInjector:this._injector});return this._applicationRef.attachView(p.hostView),c.appendChild(p.location.nativeElement),p}_attachWindowComponent(c,p){let w=(0,I.LMc)(_,{environmentInjector:this._applicationRef.injector,elementInjector:this._injector,projectableNodes:p});return this._applicationRef.attachView(w.hostView),c.appendChild(w.location.nativeElement),w}_getContentRef(c,p,w,j,Y){return w?w instanceof I.Rgc?this._createFromTemplateRef(w,j):L(w)?this._createFromString(w):this._createFromComponent(c,p,w,j,Y):new Bu([])}_createFromTemplateRef(c,p){const j=c.createEmbeddedView({$implicit:p,close(Y){p.close(Y)},dismiss(Y){p.dismiss(Y)}});return this._applicationRef.attachView(j),new Bu([j.rootNodes],j)}_createFromString(c){const p=this._document.createTextNode(`${c}`);return new Bu([[p]])}_createFromComponent(c,p,w,j,Y){const ve=I.zs3.create({providers:[{provide:ul,useValue:j}],parent:c}),Me=(0,I.LMc)(w,{environmentInjector:p,elementInjector:ve}),nt=Me.location.nativeElement;return Y.scrollable&&nt.classList.add("component-host-scrollable"),this._applicationRef.attachView(Me.hostView),new Bu([[nt]],Me.hostView,Me)}_setAriaHidden(c){const p=c.parentElement;p&&c!==this._document.body&&(Array.from(p.children).forEach(w=>{w!==c&&"SCRIPT"!==w.nodeName&&(this._ariaHiddenValues.set(w,w.getAttribute("aria-hidden")),w.setAttribute("aria-hidden","true"))}),this._setAriaHidden(p))}_revertAriaHidden(){this._ariaHiddenValues.forEach((c,p)=>{c?p.setAttribute("aria-hidden",c):p.removeAttribute("aria-hidden")}),this._ariaHiddenValues.clear()}_registerModalRef(c){const p=()=>{const w=this._modalRefs.indexOf(c);w>-1&&(this._modalRefs.splice(w,1),this._activeInstances.emit(this._modalRefs))};this._modalRefs.push(c),this._activeInstances.emit(this._modalRefs),c.result.then(p,p)}_registerWindowCmpt(c){this._windowCmpts.push(c),this._activeWindowCmptHasChanged.next(),c.onDestroy(()=>{const p=this._windowCmpts.indexOf(c);p>-1&&(this._windowCmpts.splice(p,1),this._activeWindowCmptHasChanged.next())})}static#e=this.\u0275fac=function(p){return new(p||d)(I.LFG(I.z2F),I.LFG(I.zs3),I.LFG(I.lqb),I.LFG(Wt.K0),I.LFG(C),I.LFG(I.FYo),I.LFG(I.R0b))};static#t=this.\u0275prov=I.Yz7({token:d,factory:d.\u0275fac,providedIn:"root"})}return d})(),X=(()=>{class d{constructor(c){this._ngbConfig=c,this.backdrop=!0,this.fullscreen=!1,this.keyboard=!0}get animation(){return void 0===this._animation?this._ngbConfig.animation:this._animation}set animation(c){this._animation=c}static#e=this.\u0275fac=function(p){return new(p||d)(I.LFG(su))};static#t=this.\u0275prov=I.Yz7({token:d,factory:d.\u0275fac,providedIn:"root"})}return d})(),Ee=(()=>{class d{constructor(c,p,w){this._injector=c,this._modalStack=p,this._config=w}open(c,p={}){const w={...this._config,animation:this._config.animation,...p};return this._modalStack.open(this._injector,c,w)}get activeInstances(){return this._modalStack.activeInstances}dismissAll(c){this._modalStack.dismissAll(c)}hasOpenModals(){return this._modalStack.hasOpenModals()}static#e=this.\u0275fac=function(p){return new(p||d)(I.LFG(I.zs3),I.LFG(G),I.LFG(X))};static#t=this.\u0275prov=I.Yz7({token:d,factory:d.\u0275fac,providedIn:"root"})}return d})(),Ge=(()=>{class d{static#e=this.\u0275fac=function(p){return new(p||d)};static#t=this.\u0275mod=I.oAB({type:d});static#n=this.\u0275inj=I.cJS({providers:[Ee]})}return d})(),Fc=(()=>{class d{static#e=this.\u0275fac=function(p){return new(p||d)};static#t=this.\u0275mod=I.oAB({type:d});static#n=this.\u0275inj=I.cJS({})}return d})(),rd=(()=>{class d{static#e=this.\u0275fac=function(p){return new(p||d)};static#t=this.\u0275mod=I.oAB({type:d});static#n=this.\u0275inj=I.cJS({})}return d})(),Qp=(()=>{class d{static#e=this.\u0275fac=function(p){return new(p||d)};static#t=this.\u0275mod=I.oAB({type:d});static#n=this.\u0275inj=I.cJS({})}return d})(),sd=(()=>{class d{static#e=this.\u0275fac=function(p){return new(p||d)};static#t=this.\u0275mod=I.oAB({type:d});static#n=this.\u0275inj=I.cJS({})}return d})(),ff=(()=>{class d{static#e=this.\u0275fac=function(p){return new(p||d)};static#t=this.\u0275mod=I.oAB({type:d});static#n=this.\u0275inj=I.cJS({})}return d})(),od=(()=>{class d{static#e=this.\u0275fac=function(p){return new(p||d)};static#t=this.\u0275mod=I.oAB({type:d});static#n=this.\u0275inj=I.cJS({})}return d})(),Lc=(()=>{class d{static#e=this.\u0275fac=function(p){return new(p||d)};static#t=this.\u0275mod=I.oAB({type:d});static#n=this.\u0275inj=I.cJS({})}return d})(),kl=(()=>{class d{static#e=this.\u0275fac=function(p){return new(p||d)};static#t=this.\u0275mod=I.oAB({type:d});static#n=this.\u0275inj=I.cJS({})}return d})(),vf=(()=>{class d{static#e=this.\u0275fac=function(p){return new(p||d)};static#t=this.\u0275mod=I.oAB({type:d});static#n=this.\u0275inj=I.cJS({})}return d})();new I.OlP("live announcer delay",{providedIn:"root",factory:function ap(){return 100}});let Am=(()=>{class d{static#e=this.\u0275fac=function(p){return new(p||d)};static#t=this.\u0275mod=I.oAB({type:d});static#n=this.\u0275inj=I.cJS({})}return d})(),Dh=(()=>{class d{static#e=this.\u0275fac=function(p){return new(p||d)};static#t=this.\u0275mod=I.oAB({type:d});static#n=this.\u0275inj=I.cJS({})}return d})();const Ch=[Jc,Ru,Xu,Ou,kd,Rr,Ge,Fc,Dh,rd,Qp,sd,ff,od,Lc,kl,vf,Am];let Ah=(()=>{class d{static#e=this.\u0275fac=function(p){return new(p||d)};static#t=this.\u0275mod=I.oAB({type:d});static#n=this.\u0275inj=I.cJS({imports:[Ch,Jc,Ru,Xu,Ou,kd,Rr,Ge,Fc,Dh,rd,Qp,sd,ff,od,Lc,kl,vf,Am]})}return d})();const Fl={apiKey:"AIzaSyDhMeOKg3NlfID1yZj0pWK3C0XIT-dM9gU",authDomain:"clinica-7cd94.firebaseapp.com",projectId:"clinica-7cd94",storageBucket:"clinica-7cd94.appspot.com",messagingSenderId:"112194966494",appId:"1:112194966494:web:8a8472354ee23bfb57034f"};let Ll=(()=>{class d{static#e=this.\u0275fac=function(p){return new(p||d)};static#t=this.\u0275mod=I.oAB({type:d,bootstrap:[it]});static#n=this.\u0275inj=I.cJS({imports:[y.b2,dt,It.hO.initializeApp(Fl),Ah,fe.u5]})}return d})();y.q6().bootstrapModule(Ll).catch(d=>console.error(d))},5619:(zt,Ye,H)=>{H.d(Ye,{X:()=>fe});var y=H(8645);class fe extends y.x{constructor(Ce){super(),this._value=Ce}get value(){return this.getValue()}_subscribe(Ce){const De=super._subscribe(Ce);return!De.closed&&Ce.next(this._value),De}getValue(){const{hasError:Ce,thrownError:De,_value:ye}=this;if(Ce)throw De;return this._throwIfClosed(),ye}next(Ce){super.next(this._value=Ce)}}},5592:(zt,Ye,H)=>{H.d(Ye,{y:()=>I});var y=H(305),fe=H(7394),oe=H(4850),Ce=H(8407),De=H(2653),ye=H(4674),Ne=H(1441);let I=(()=>{class xe{constructor(it){it&&(this._subscribe=it)}lift(it){const It=new xe;return It.source=this,It.operator=it,It}subscribe(it,It,ct){const Ct=function me(xe){return xe&&xe instanceof y.Lv||function pe(xe){return xe&&(0,ye.m)(xe.next)&&(0,ye.m)(xe.error)&&(0,ye.m)(xe.complete)}(xe)&&(0,fe.Nn)(xe)}(it)?it:new y.Hp(it,It,ct);return(0,Ne.x)(()=>{const{operator:lt,source:Jt}=this;Ct.add(lt?lt.call(Ct,Jt):Jt?this._subscribe(Ct):this._trySubscribe(Ct))}),Ct}_trySubscribe(it){try{return this._subscribe(it)}catch(It){it.error(It)}}forEach(it,It){return new(It=ze(It))((ct,Ct)=>{const lt=new y.Hp({next:Jt=>{try{it(Jt)}catch(Ve){Ct(Ve),lt.unsubscribe()}},error:Ct,complete:ct});this.subscribe(lt)})}_subscribe(it){var It;return null===(It=this.source)||void 0===It?void 0:It.subscribe(it)}[oe.L](){return this}pipe(...it){return(0,Ce.U)(it)(this)}toPromise(it){return new(it=ze(it))((It,ct)=>{let Ct;this.subscribe(lt=>Ct=lt,lt=>ct(lt),()=>It(Ct))})}}return xe.create=dt=>new xe(dt),xe})();function ze(xe){var dt;return null!==(dt=xe??De.config.Promise)&&void 0!==dt?dt:Promise}},8645:(zt,Ye,H)=>{H.d(Ye,{x:()=>Ne});var y=H(5592),fe=H(7394);const Ce=(0,H(2306).d)(ze=>function(){ze(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var De=H(9039),ye=H(1441);let Ne=(()=>{class ze extends y.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(me){const xe=new I(this,this);return xe.operator=me,xe}_throwIfClosed(){if(this.closed)throw new Ce}next(me){(0,ye.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const xe of this.currentObservers)xe.next(me)}})}error(me){(0,ye.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=me;const{observers:xe}=this;for(;xe.length;)xe.shift().error(me)}})}complete(){(0,ye.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:me}=this;for(;me.length;)me.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var me;return(null===(me=this.observers)||void 0===me?void 0:me.length)>0}_trySubscribe(me){return this._throwIfClosed(),super._trySubscribe(me)}_subscribe(me){return this._throwIfClosed(),this._checkFinalizedStatuses(me),this._innerSubscribe(me)}_innerSubscribe(me){const{hasError:xe,isStopped:dt,observers:it}=this;return xe||dt?fe.Lc:(this.currentObservers=null,it.push(me),new fe.w0(()=>{this.currentObservers=null,(0,De.P)(it,me)}))}_checkFinalizedStatuses(me){const{hasError:xe,thrownError:dt,isStopped:it}=this;xe?me.error(dt):it&&me.complete()}asObservable(){const me=new y.y;return me.source=this,me}}return ze.create=(pe,me)=>new I(pe,me),ze})();class I extends Ne{constructor(pe,me){super(),this.destination=pe,this.source=me}next(pe){var me,xe;null===(xe=null===(me=this.destination)||void 0===me?void 0:me.next)||void 0===xe||xe.call(me,pe)}error(pe){var me,xe;null===(xe=null===(me=this.destination)||void 0===me?void 0:me.error)||void 0===xe||xe.call(me,pe)}complete(){var pe,me;null===(me=null===(pe=this.destination)||void 0===pe?void 0:pe.complete)||void 0===me||me.call(pe)}_subscribe(pe){var me,xe;return null!==(xe=null===(me=this.source)||void 0===me?void 0:me.subscribe(pe))&&void 0!==xe?xe:fe.Lc}}},305:(zt,Ye,H)=>{H.d(Ye,{Hp:()=>ct,Lv:()=>xe});var y=H(4674),fe=H(7394),oe=H(2653),Ce=H(3894),De=H(2420);const ye=ze("C",void 0,void 0);function ze(Le,$e,Oe){return{kind:Le,value:$e,error:Oe}}var pe=H(7599),me=H(1441);class xe extends fe.w0{constructor($e){super(),this.isStopped=!1,$e?(this.destination=$e,(0,fe.Nn)($e)&&$e.add(this)):this.destination=Ve}static create($e,Oe,We){return new ct($e,Oe,We)}next($e){this.isStopped?Jt(function I(Le){return ze("N",Le,void 0)}($e),this):this._next($e)}error($e){this.isStopped?Jt(function Ne(Le){return ze("E",void 0,Le)}($e),this):(this.isStopped=!0,this._error($e))}complete(){this.isStopped?Jt(ye,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next($e){this.destination.next($e)}_error($e){try{this.destination.error($e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const dt=Function.prototype.bind;function it(Le,$e){return dt.call(Le,$e)}class It{constructor($e){this.partialObserver=$e}next($e){const{partialObserver:Oe}=this;if(Oe.next)try{Oe.next($e)}catch(We){Ct(We)}}error($e){const{partialObserver:Oe}=this;if(Oe.error)try{Oe.error($e)}catch(We){Ct(We)}else Ct($e)}complete(){const{partialObserver:$e}=this;if($e.complete)try{$e.complete()}catch(Oe){Ct(Oe)}}}class ct extends xe{constructor($e,Oe,We){let at;if(super(),(0,y.m)($e)||!$e)at={next:$e??void 0,error:Oe??void 0,complete:We??void 0};else{let mt;this&&oe.config.useDeprecatedNextContext?(mt=Object.create($e),mt.unsubscribe=()=>this.unsubscribe(),at={next:$e.next&&it($e.next,mt),error:$e.error&&it($e.error,mt),complete:$e.complete&&it($e.complete,mt)}):at=$e}this.destination=new It(at)}}function Ct(Le){oe.config.useDeprecatedSynchronousErrorHandling?(0,me.O)(Le):(0,Ce.h)(Le)}function Jt(Le,$e){const{onStoppedNotification:Oe}=oe.config;Oe&&pe.z.setTimeout(()=>Oe(Le,$e))}const Ve={closed:!0,next:De.Z,error:function lt(Le){throw Le},complete:De.Z}},7394:(zt,Ye,H)=>{H.d(Ye,{Lc:()=>ye,w0:()=>De,Nn:()=>Ne});var y=H(4674);const oe=(0,H(2306).d)(ze=>function(me){ze(this),this.message=me?`${me.length} errors occurred during unsubscription:\n${me.map((xe,dt)=>`${dt+1}) ${xe.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=me});var Ce=H(9039);class De{constructor(pe){this.initialTeardown=pe,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let pe;if(!this.closed){this.closed=!0;const{_parentage:me}=this;if(me)if(this._parentage=null,Array.isArray(me))for(const it of me)it.remove(this);else me.remove(this);const{initialTeardown:xe}=this;if((0,y.m)(xe))try{xe()}catch(it){pe=it instanceof oe?it.errors:[it]}const{_finalizers:dt}=this;if(dt){this._finalizers=null;for(const it of dt)try{I(it)}catch(It){pe=pe??[],It instanceof oe?pe=[...pe,...It.errors]:pe.push(It)}}if(pe)throw new oe(pe)}}add(pe){var me;if(pe&&pe!==this)if(this.closed)I(pe);else{if(pe instanceof De){if(pe.closed||pe._hasParent(this))return;pe._addParent(this)}(this._finalizers=null!==(me=this._finalizers)&&void 0!==me?me:[]).push(pe)}}_hasParent(pe){const{_parentage:me}=this;return me===pe||Array.isArray(me)&&me.includes(pe)}_addParent(pe){const{_parentage:me}=this;this._parentage=Array.isArray(me)?(me.push(pe),me):me?[me,pe]:pe}_removeParent(pe){const{_parentage:me}=this;me===pe?this._parentage=null:Array.isArray(me)&&(0,Ce.P)(me,pe)}remove(pe){const{_finalizers:me}=this;me&&(0,Ce.P)(me,pe),pe instanceof De&&pe._removeParent(this)}}De.EMPTY=(()=>{const ze=new De;return ze.closed=!0,ze})();const ye=De.EMPTY;function Ne(ze){return ze instanceof De||ze&&"closed"in ze&&(0,y.m)(ze.remove)&&(0,y.m)(ze.add)&&(0,y.m)(ze.unsubscribe)}function I(ze){(0,y.m)(ze)?ze():ze.unsubscribe()}},2653:(zt,Ye,H)=>{H.d(Ye,{config:()=>y});const y={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},5211:(zt,Ye,H)=>{H.d(Ye,{z:()=>De});var y=H(7537),oe=H(9940),Ce=H(2459);function De(...ye){return function fe(){return(0,y.J)(1)}()((0,Ce.D)(ye,(0,oe.yG)(ye)))}},6232:(zt,Ye,H)=>{H.d(Ye,{E:()=>fe});const fe=new(H(5592).y)(De=>De.complete())},2459:(zt,Ye,H)=>{H.d(Ye,{D:()=>$e});var y=H(4829),fe=H(3093),oe=H(5137),ye=H(5592),I=H(4971),ze=H(4674),pe=H(7103);function xe(Oe,We){if(!Oe)throw new Error("Iterable cannot be null");return new ye.y(at=>{(0,pe.f)(at,We,()=>{const mt=Oe[Symbol.asyncIterator]();(0,pe.f)(at,We,()=>{mt.next().then(ue=>{ue.done?at.complete():at.next(ue.value)})},0,!0)})})}var dt=H(8382),it=H(4026),It=H(4266),ct=H(3664),Ct=H(5726),lt=H(9853),Jt=H(541);function $e(Oe,We){return We?function Le(Oe,We){if(null!=Oe){if((0,dt.c)(Oe))return function Ce(Oe,We){return(0,y.Xf)(Oe).pipe((0,oe.R)(We),(0,fe.Q)(We))}(Oe,We);if((0,It.z)(Oe))return function Ne(Oe,We){return new ye.y(at=>{let mt=0;return We.schedule(function(){mt===Oe.length?at.complete():(at.next(Oe[mt++]),at.closed||this.schedule())})})}(Oe,We);if((0,it.t)(Oe))return function De(Oe,We){return(0,y.Xf)(Oe).pipe((0,oe.R)(We),(0,fe.Q)(We))}(Oe,We);if((0,Ct.D)(Oe))return xe(Oe,We);if((0,ct.T)(Oe))return function me(Oe,We){return new ye.y(at=>{let mt;return(0,pe.f)(at,We,()=>{mt=Oe[I.h](),(0,pe.f)(at,We,()=>{let ue,Kt;try{({value:ue,done:Kt}=mt.next())}catch(Et){return void at.error(Et)}Kt?at.complete():at.next(ue)},0,!0)}),()=>(0,ze.m)(mt?.return)&&mt.return()})}(Oe,We);if((0,Jt.L)(Oe))return function Ve(Oe,We){return xe((0,Jt.Q)(Oe),We)}(Oe,We)}throw(0,lt.z)(Oe)}(Oe,We):(0,y.Xf)(Oe)}},4829:(zt,Ye,H)=>{H.d(Ye,{Xf:()=>dt});var y=H(7582),fe=H(4266),oe=H(4026),Ce=H(5592),De=H(8382),ye=H(5726),Ne=H(9853),I=H(3664),ze=H(541),pe=H(4674),me=H(3894),xe=H(4850);function dt(Le){if(Le instanceof Ce.y)return Le;if(null!=Le){if((0,De.c)(Le))return function it(Le){return new Ce.y($e=>{const Oe=Le[xe.L]();if((0,pe.m)(Oe.subscribe))return Oe.subscribe($e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(Le);if((0,fe.z)(Le))return function It(Le){return new Ce.y($e=>{for(let Oe=0;Oe<Le.length&&!$e.closed;Oe++)$e.next(Le[Oe]);$e.complete()})}(Le);if((0,oe.t)(Le))return function ct(Le){return new Ce.y($e=>{Le.then(Oe=>{$e.closed||($e.next(Oe),$e.complete())},Oe=>$e.error(Oe)).then(null,me.h)})}(Le);if((0,ye.D)(Le))return lt(Le);if((0,I.T)(Le))return function Ct(Le){return new Ce.y($e=>{for(const Oe of Le)if($e.next(Oe),$e.closed)return;$e.complete()})}(Le);if((0,ze.L)(Le))return function Jt(Le){return lt((0,ze.Q)(Le))}(Le)}throw(0,Ne.z)(Le)}function lt(Le){return new Ce.y($e=>{(function Ve(Le,$e){var Oe,We,at,mt;return(0,y.mG)(this,void 0,void 0,function*(){try{for(Oe=(0,y.KL)(Le);!(We=yield Oe.next()).done;)if($e.next(We.value),$e.closed)return}catch(ue){at={error:ue}}finally{try{We&&!We.done&&(mt=Oe.return)&&(yield mt.call(Oe))}finally{if(at)throw at.error}}$e.complete()})})(Le,$e).catch(Oe=>$e.error(Oe))})}},3019:(zt,Ye,H)=>{H.d(Ye,{T:()=>ye});var y=H(7537),fe=H(4829),oe=H(6232),Ce=H(9940),De=H(2459);function ye(...Ne){const I=(0,Ce.yG)(Ne),ze=(0,Ce._6)(Ne,1/0),pe=Ne;return pe.length?1===pe.length?(0,fe.Xf)(pe[0]):(0,y.J)(ze)((0,De.D)(pe,I)):oe.E}},2096:(zt,Ye,H)=>{H.d(Ye,{of:()=>oe});var y=H(9940),fe=H(2459);function oe(...Ce){const De=(0,y.yG)(Ce);return(0,fe.D)(Ce,De)}},8251:(zt,Ye,H)=>{H.d(Ye,{x:()=>fe});var y=H(305);function fe(Ce,De,ye,Ne,I){return new oe(Ce,De,ye,Ne,I)}class oe extends y.Lv{constructor(De,ye,Ne,I,ze,pe){super(De),this.onFinalize=ze,this.shouldUnsubscribe=pe,this._next=ye?function(me){try{ye(me)}catch(xe){De.error(xe)}}:super._next,this._error=I?function(me){try{I(me)}catch(xe){De.error(xe)}finally{this.unsubscribe()}}:super._error,this._complete=Ne?function(){try{Ne()}catch(me){De.error(me)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var De;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:ye}=this;super.unsubscribe(),!ye&&(null===(De=this.onFinalize)||void 0===De||De.call(this))}}}},3572:(zt,Ye,H)=>{H.d(Ye,{d:()=>oe});var y=H(9360),fe=H(8251);function oe(Ce){return(0,y.e)((De,ye)=>{let Ne=!1;De.subscribe((0,fe.x)(ye,I=>{Ne=!0,ye.next(I)},()=>{Ne||ye.next(Ce),ye.complete()}))})}},3997:(zt,Ye,H)=>{H.d(Ye,{x:()=>Ce});var y=H(2737),fe=H(9360),oe=H(8251);function Ce(ye,Ne=y.y){return ye=ye??De,(0,fe.e)((I,ze)=>{let pe,me=!0;I.subscribe((0,oe.x)(ze,xe=>{const dt=Ne(xe);(me||!ye(pe,dt))&&(me=!1,pe=dt,ze.next(xe))}))})}function De(ye,Ne){return ye===Ne}},2181:(zt,Ye,H)=>{H.d(Ye,{h:()=>oe});var y=H(9360),fe=H(8251);function oe(Ce,De){return(0,y.e)((ye,Ne)=>{let I=0;ye.subscribe((0,fe.x)(Ne,ze=>Ce.call(De,ze,I++)&&Ne.next(ze)))})}},1374:(zt,Ye,H)=>{H.d(Ye,{P:()=>Ne});var y=H(6973),fe=H(2181),oe=H(8180),Ce=H(3572),De=H(3026),ye=H(2737);function Ne(I,ze){const pe=arguments.length>=2;return me=>me.pipe(I?(0,fe.h)((xe,dt)=>I(xe,dt,me)):ye.y,(0,oe.q)(1),pe?(0,Ce.d)(ze):(0,De.T)(()=>new y.K))}},7398:(zt,Ye,H)=>{H.d(Ye,{U:()=>oe});var y=H(9360),fe=H(8251);function oe(Ce,De){return(0,y.e)((ye,Ne)=>{let I=0;ye.subscribe((0,fe.x)(Ne,ze=>{Ne.next(Ce.call(De,ze,I++))}))})}},975:(zt,Ye,H)=>{H.d(Ye,{h:()=>fe});var y=H(7398);function fe(oe){return(0,y.U)(()=>oe)}},7537:(zt,Ye,H)=>{H.d(Ye,{J:()=>oe});var y=H(1631),fe=H(2737);function oe(Ce=1/0){return(0,y.z)(fe.y,Ce)}},1631:(zt,Ye,H)=>{H.d(Ye,{z:()=>I});var y=H(7398),fe=H(4829),oe=H(9360),Ce=H(7103),De=H(8251),Ne=H(4674);function I(ze,pe,me=1/0){return(0,Ne.m)(pe)?I((xe,dt)=>(0,y.U)((it,It)=>pe(xe,it,dt,It))((0,fe.Xf)(ze(xe,dt))),me):("number"==typeof pe&&(me=pe),(0,oe.e)((xe,dt)=>function ye(ze,pe,me,xe,dt,it,It,ct){const Ct=[];let lt=0,Jt=0,Ve=!1;const Le=()=>{Ve&&!Ct.length&&!lt&&pe.complete()},$e=We=>lt<xe?Oe(We):Ct.push(We),Oe=We=>{it&&pe.next(We),lt++;let at=!1;(0,fe.Xf)(me(We,Jt++)).subscribe((0,De.x)(pe,mt=>{dt?.(mt),it?$e(mt):pe.next(mt)},()=>{at=!0},void 0,()=>{if(at)try{for(lt--;Ct.length&&lt<xe;){const mt=Ct.shift();It?(0,Ce.f)(pe,It,()=>Oe(mt)):Oe(mt)}Le()}catch(mt){pe.error(mt)}}))};return ze.subscribe((0,De.x)(pe,$e,()=>{Ve=!0,Le()})),()=>{ct?.()}}(xe,dt,ze,me)))}},3093:(zt,Ye,H)=>{H.d(Ye,{Q:()=>Ce});var y=H(7103),fe=H(9360),oe=H(8251);function Ce(De,ye=0){return(0,fe.e)((Ne,I)=>{Ne.subscribe((0,oe.x)(I,ze=>(0,y.f)(I,De,()=>I.next(ze),ye),()=>(0,y.f)(I,De,()=>I.complete(),ye),ze=>(0,y.f)(I,De,()=>I.error(ze),ye)))})}},6699:(zt,Ye,H)=>{H.d(Ye,{R:()=>Ce});var y=H(9360),fe=H(8251);function Ce(De,ye){return(0,y.e)(function oe(De,ye,Ne,I,ze){return(pe,me)=>{let xe=Ne,dt=ye,it=0;pe.subscribe((0,fe.x)(me,It=>{const ct=it++;dt=xe?De(dt,It,ct):(xe=!0,It),I&&me.next(dt)},ze&&(()=>{xe&&me.next(dt),me.complete()})))}}(De,ye,arguments.length>=2,!0))}},3020:(zt,Ye,H)=>{H.d(Ye,{B:()=>De});var y=H(4829),fe=H(8645),oe=H(305),Ce=H(9360);function De(Ne={}){const{connector:I=(()=>new fe.x),resetOnError:ze=!0,resetOnComplete:pe=!0,resetOnRefCountZero:me=!0}=Ne;return xe=>{let dt,it,It,ct=0,Ct=!1,lt=!1;const Jt=()=>{it?.unsubscribe(),it=void 0},Ve=()=>{Jt(),dt=It=void 0,Ct=lt=!1},Le=()=>{const $e=dt;Ve(),$e?.unsubscribe()};return(0,Ce.e)(($e,Oe)=>{ct++,!lt&&!Ct&&Jt();const We=It=It??I();Oe.add(()=>{ct--,0===ct&&!lt&&!Ct&&(it=ye(Le,me))}),We.subscribe(Oe),!dt&&ct>0&&(dt=new oe.Hp({next:at=>We.next(at),error:at=>{lt=!0,Jt(),it=ye(Ve,ze,at),We.error(at)},complete:()=>{Ct=!0,Jt(),it=ye(Ve,pe),We.complete()}}),(0,y.Xf)($e).subscribe(dt))})(xe)}}function ye(Ne,I,...ze){if(!0===I)return void Ne();if(!1===I)return;const pe=new oe.Hp({next:()=>{pe.unsubscribe(),Ne()}});return(0,y.Xf)(I(...ze)).subscribe(pe)}},7921:(zt,Ye,H)=>{H.d(Ye,{O:()=>Ce});var y=H(5211),fe=H(9940),oe=H(9360);function Ce(...De){const ye=(0,fe.yG)(De);return(0,oe.e)((Ne,I)=>{(ye?(0,y.z)(De,Ne,ye):(0,y.z)(De,Ne)).subscribe(I)})}},5137:(zt,Ye,H)=>{H.d(Ye,{R:()=>fe});var y=H(9360);function fe(oe,Ce=0){return(0,y.e)((De,ye)=>{ye.add(oe.schedule(()=>De.subscribe(ye),Ce))})}},4664:(zt,Ye,H)=>{H.d(Ye,{w:()=>Ce});var y=H(4829),fe=H(9360),oe=H(8251);function Ce(De,ye){return(0,fe.e)((Ne,I)=>{let ze=null,pe=0,me=!1;const xe=()=>me&&!ze&&I.complete();Ne.subscribe((0,oe.x)(I,dt=>{ze?.unsubscribe();let it=0;const It=pe++;(0,y.Xf)(De(dt,It)).subscribe(ze=(0,oe.x)(I,ct=>I.next(ye?ye(dt,ct,It,it++):ct),()=>{ze=null,xe()}))},()=>{me=!0,xe()}))})}},8180:(zt,Ye,H)=>{H.d(Ye,{q:()=>Ce});var y=H(6232),fe=H(9360),oe=H(8251);function Ce(De){return De<=0?()=>y.E:(0,fe.e)((ye,Ne)=>{let I=0;ye.subscribe((0,oe.x)(Ne,ze=>{++I<=De&&(Ne.next(ze),De<=I&&Ne.complete())}))})}},9773:(zt,Ye,H)=>{H.d(Ye,{R:()=>De});var y=H(9360),fe=H(8251),oe=H(4829),Ce=H(2420);function De(ye){return(0,y.e)((Ne,I)=>{(0,oe.Xf)(ye).subscribe((0,fe.x)(I,()=>I.complete(),Ce.Z)),!I.closed&&Ne.subscribe(I)})}},9397:(zt,Ye,H)=>{H.d(Ye,{b:()=>De});var y=H(4674),fe=H(9360),oe=H(8251),Ce=H(2737);function De(ye,Ne,I){const ze=(0,y.m)(ye)||Ne||I?{next:ye,error:Ne,complete:I}:ye;return ze?(0,fe.e)((pe,me)=>{var xe;null===(xe=ze.subscribe)||void 0===xe||xe.call(ze);let dt=!0;pe.subscribe((0,oe.x)(me,it=>{var It;null===(It=ze.next)||void 0===It||It.call(ze,it),me.next(it)},()=>{var it;dt=!1,null===(it=ze.complete)||void 0===it||it.call(ze),me.complete()},it=>{var It;dt=!1,null===(It=ze.error)||void 0===It||It.call(ze,it),me.error(it)},()=>{var it,It;dt&&(null===(it=ze.unsubscribe)||void 0===it||it.call(ze)),null===(It=ze.finalize)||void 0===It||It.call(ze)}))}):Ce.y}},3026:(zt,Ye,H)=>{H.d(Ye,{T:()=>Ce});var y=H(6973),fe=H(9360),oe=H(8251);function Ce(ye=De){return(0,fe.e)((Ne,I)=>{let ze=!1;Ne.subscribe((0,oe.x)(I,pe=>{ze=!0,I.next(pe)},()=>ze?I.complete():I.error(ye())))})}function De(){return new y.K}},1954:(zt,Ye,H)=>{H.d(Ye,{o:()=>De});var y=H(7394);class fe extends y.w0{constructor(Ne,I){super()}schedule(Ne,I=0){return this}}const oe={setInterval(ye,Ne,...I){const{delegate:ze}=oe;return ze?.setInterval?ze.setInterval(ye,Ne,...I):setInterval(ye,Ne,...I)},clearInterval(ye){const{delegate:Ne}=oe;return(Ne?.clearInterval||clearInterval)(ye)},delegate:void 0};var Ce=H(9039);class De extends fe{constructor(Ne,I){super(Ne,I),this.scheduler=Ne,this.work=I,this.pending=!1}schedule(Ne,I=0){var ze;if(this.closed)return this;this.state=Ne;const pe=this.id,me=this.scheduler;return null!=pe&&(this.id=this.recycleAsyncId(me,pe,I)),this.pending=!0,this.delay=I,this.id=null!==(ze=this.id)&&void 0!==ze?ze:this.requestAsyncId(me,this.id,I),this}requestAsyncId(Ne,I,ze=0){return oe.setInterval(Ne.flush.bind(Ne,this),ze)}recycleAsyncId(Ne,I,ze=0){if(null!=ze&&this.delay===ze&&!1===this.pending)return I;null!=I&&oe.clearInterval(I)}execute(Ne,I){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const ze=this._execute(Ne,I);if(ze)return ze;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(Ne,I){let pe,ze=!1;try{this.work(Ne)}catch(me){ze=!0,pe=me||new Error("Scheduled action threw falsy error")}if(ze)return this.unsubscribe(),pe}unsubscribe(){if(!this.closed){const{id:Ne,scheduler:I}=this,{actions:ze}=I;this.work=this.state=this.scheduler=null,this.pending=!1,(0,Ce.P)(ze,this),null!=Ne&&(this.id=this.recycleAsyncId(I,Ne,null)),this.delay=null,super.unsubscribe()}}}},2631:(zt,Ye,H)=>{H.d(Ye,{v:()=>oe});var y=H(4552);class fe{constructor(De,ye=fe.now){this.schedulerActionCtor=De,this.now=ye}schedule(De,ye=0,Ne){return new this.schedulerActionCtor(this,De).schedule(Ne,ye)}}fe.now=y.l.now;class oe extends fe{constructor(De,ye=fe.now){super(De,ye),this.actions=[],this._active=!1}flush(De){const{actions:ye}=this;if(this._active)return void ye.push(De);let Ne;this._active=!0;do{if(Ne=De.execute(De.state,De.delay))break}while(De=ye.shift());if(this._active=!1,Ne){for(;De=ye.shift();)De.unsubscribe();throw Ne}}}},6321:(zt,Ye,H)=>{H.d(Ye,{P:()=>Ce,z:()=>oe});var y=H(1954);const oe=new(H(2631).v)(y.o),Ce=oe},4552:(zt,Ye,H)=>{H.d(Ye,{l:()=>y});const y={now:()=>(y.delegate||Date).now(),delegate:void 0}},7599:(zt,Ye,H)=>{H.d(Ye,{z:()=>y});const y={setTimeout(fe,oe,...Ce){const{delegate:De}=y;return De?.setTimeout?De.setTimeout(fe,oe,...Ce):setTimeout(fe,oe,...Ce)},clearTimeout(fe){const{delegate:oe}=y;return(oe?.clearTimeout||clearTimeout)(fe)},delegate:void 0}},4971:(zt,Ye,H)=>{H.d(Ye,{h:()=>fe});const fe=function y(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},4850:(zt,Ye,H)=>{H.d(Ye,{L:()=>y});const y="function"==typeof Symbol&&Symbol.observable||"@@observable"},6973:(zt,Ye,H)=>{H.d(Ye,{K:()=>fe});const fe=(0,H(2306).d)(oe=>function(){oe(this),this.name="EmptyError",this.message="no elements in sequence"})},9940:(zt,Ye,H)=>{H.d(Ye,{_6:()=>ye,jO:()=>Ce,yG:()=>De});var y=H(4674),fe=H(671);function oe(Ne){return Ne[Ne.length-1]}function Ce(Ne){return(0,y.m)(oe(Ne))?Ne.pop():void 0}function De(Ne){return(0,fe.K)(oe(Ne))?Ne.pop():void 0}function ye(Ne,I){return"number"==typeof oe(Ne)?Ne.pop():I}},7453:(zt,Ye,H)=>{H.d(Ye,{D:()=>De});const{isArray:y}=Array,{getPrototypeOf:fe,prototype:oe,keys:Ce}=Object;function De(Ne){if(1===Ne.length){const I=Ne[0];if(y(I))return{args:I,keys:null};if(function ye(Ne){return Ne&&"object"==typeof Ne&&fe(Ne)===oe}(I)){const ze=Ce(I);return{args:ze.map(pe=>I[pe]),keys:ze}}}return{args:Ne,keys:null}}},9039:(zt,Ye,H)=>{function y(fe,oe){if(fe){const Ce=fe.indexOf(oe);0<=Ce&&fe.splice(Ce,1)}}H.d(Ye,{P:()=>y})},2306:(zt,Ye,H)=>{function y(fe){const Ce=fe(De=>{Error.call(De),De.stack=(new Error).stack});return Ce.prototype=Object.create(Error.prototype),Ce.prototype.constructor=Ce,Ce}H.d(Ye,{d:()=>y})},2714:(zt,Ye,H)=>{function y(fe,oe){return fe.reduce((Ce,De,ye)=>(Ce[De]=oe[ye],Ce),{})}H.d(Ye,{n:()=>y})},1441:(zt,Ye,H)=>{H.d(Ye,{O:()=>Ce,x:()=>oe});var y=H(2653);let fe=null;function oe(De){if(y.config.useDeprecatedSynchronousErrorHandling){const ye=!fe;if(ye&&(fe={errorThrown:!1,error:null}),De(),ye){const{errorThrown:Ne,error:I}=fe;if(fe=null,Ne)throw I}}else De()}function Ce(De){y.config.useDeprecatedSynchronousErrorHandling&&fe&&(fe.errorThrown=!0,fe.error=De)}},7103:(zt,Ye,H)=>{function y(fe,oe,Ce,De=0,ye=!1){const Ne=oe.schedule(function(){Ce(),ye?fe.add(this.schedule(null,De)):this.unsubscribe()},De);if(fe.add(Ne),!ye)return Ne}H.d(Ye,{f:()=>y})},2737:(zt,Ye,H)=>{function y(fe){return fe}H.d(Ye,{y:()=>y})},4266:(zt,Ye,H)=>{H.d(Ye,{z:()=>y});const y=fe=>fe&&"number"==typeof fe.length&&"function"!=typeof fe},5726:(zt,Ye,H)=>{H.d(Ye,{D:()=>fe});var y=H(4674);function fe(oe){return Symbol.asyncIterator&&(0,y.m)(oe?.[Symbol.asyncIterator])}},4674:(zt,Ye,H)=>{function y(fe){return"function"==typeof fe}H.d(Ye,{m:()=>y})},8382:(zt,Ye,H)=>{H.d(Ye,{c:()=>oe});var y=H(4850),fe=H(4674);function oe(Ce){return(0,fe.m)(Ce[y.L])}},3664:(zt,Ye,H)=>{H.d(Ye,{T:()=>oe});var y=H(4971),fe=H(4674);function oe(Ce){return(0,fe.m)(Ce?.[y.h])}},4026:(zt,Ye,H)=>{H.d(Ye,{t:()=>fe});var y=H(4674);function fe(oe){return(0,y.m)(oe?.then)}},541:(zt,Ye,H)=>{H.d(Ye,{L:()=>Ce,Q:()=>oe});var y=H(7582),fe=H(4674);function oe(De){return(0,y.FC)(this,arguments,function*(){const Ne=De.getReader();try{for(;;){const{value:I,done:ze}=yield(0,y.qq)(Ne.read());if(ze)return yield(0,y.qq)(void 0);yield yield(0,y.qq)(I)}}finally{Ne.releaseLock()}})}function Ce(De){return(0,fe.m)(De?.getReader)}},671:(zt,Ye,H)=>{H.d(Ye,{K:()=>fe});var y=H(4674);function fe(oe){return oe&&(0,y.m)(oe.schedule)}},9360:(zt,Ye,H)=>{H.d(Ye,{A:()=>fe,e:()=>oe});var y=H(4674);function fe(Ce){return(0,y.m)(Ce?.lift)}function oe(Ce){return De=>{if(fe(De))return De.lift(function(ye){try{return Ce(ye,this)}catch(Ne){this.error(Ne)}});throw new TypeError("Unable to lift unknown Observable type")}}},7400:(zt,Ye,H)=>{H.d(Ye,{Z:()=>Ce});var y=H(7398);const{isArray:fe}=Array;function Ce(De){return(0,y.U)(ye=>function oe(De,ye){return fe(ye)?De(...ye):De(ye)}(De,ye))}},2420:(zt,Ye,H)=>{function y(){}H.d(Ye,{Z:()=>y})},8407:(zt,Ye,H)=>{H.d(Ye,{U:()=>oe,z:()=>fe});var y=H(2737);function fe(...Ce){return oe(Ce)}function oe(Ce){return 0===Ce.length?y.y:1===Ce.length?Ce[0]:function(ye){return Ce.reduce((Ne,I)=>I(Ne),ye)}}},3894:(zt,Ye,H)=>{H.d(Ye,{h:()=>oe});var y=H(2653),fe=H(7599);function oe(Ce){fe.z.setTimeout(()=>{const{onUnhandledError:De}=y.config;if(!De)throw Ce;De(Ce)})}},9853:(zt,Ye,H)=>{function y(fe){return new TypeError(`You provided ${null!==fe&&"object"==typeof fe?"an invalid object":`'${fe}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}H.d(Ye,{z:()=>y})},6814:(zt,Ye,H)=>{H.d(Ye,{Do:()=>ct,EM:()=>ks,HT:()=>Ce,JF:()=>Fs,K0:()=>ye,Mn:()=>gr,Mx:()=>xi,O5:()=>ns,PM:()=>Ts,S$:()=>dt,Tn:()=>mt,UT:()=>or,V_:()=>I,Ye:()=>Ct,ax:()=>Hs,b0:()=>It,bD:()=>yr,ez:()=>fr,mk:()=>ra,p6:()=>Wt,q:()=>oe,sg:()=>Hs,tP:()=>Ai,w_:()=>De,x:()=>at});var y=H(5879);let fe=null;function oe(){return fe}function Ce(O){fe||(fe=O)}class De{}const ye=new y.OlP("DocumentToken");let Ne=(()=>{class O{historyGo(U){throw new Error("Not implemented")}static#e=this.\u0275fac=function(K){return new(K||O)};static#t=this.\u0275prov=y.Yz7({token:O,factory:function(){return(0,y.f3M)(ze)},providedIn:"platform"})}return O})();const I=new y.OlP("Location Initialized");let ze=(()=>{class O extends Ne{constructor(){super(),this._doc=(0,y.f3M)(ye),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return oe().getBaseHref(this._doc)}onPopState(U){const K=oe().getGlobalEventTarget(this._doc,"window");return K.addEventListener("popstate",U,!1),()=>K.removeEventListener("popstate",U)}onHashChange(U){const K=oe().getGlobalEventTarget(this._doc,"window");return K.addEventListener("hashchange",U,!1),()=>K.removeEventListener("hashchange",U)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(U){this._location.pathname=U}pushState(U,K,ge){this._history.pushState(U,K,ge)}replaceState(U,K,ge){this._history.replaceState(U,K,ge)}forward(){this._history.forward()}back(){this._history.back()}historyGo(U=0){this._history.go(U)}getState(){return this._history.state}static#e=this.\u0275fac=function(K){return new(K||O)};static#t=this.\u0275prov=y.Yz7({token:O,factory:function(){return new O},providedIn:"platform"})}return O})();function pe(O,Q){if(0==O.length)return Q;if(0==Q.length)return O;let U=0;return O.endsWith("/")&&U++,Q.startsWith("/")&&U++,2==U?O+Q.substring(1):1==U?O+Q:O+"/"+Q}function me(O){const Q=O.match(/#|\?|$/),U=Q&&Q.index||O.length;return O.slice(0,U-("/"===O[U-1]?1:0))+O.slice(U)}function xe(O){return O&&"?"!==O[0]?"?"+O:O}let dt=(()=>{class O{historyGo(U){throw new Error("Not implemented")}static#e=this.\u0275fac=function(K){return new(K||O)};static#t=this.\u0275prov=y.Yz7({token:O,factory:function(){return(0,y.f3M)(It)},providedIn:"root"})}return O})();const it=new y.OlP("appBaseHref");let It=(()=>{class O extends dt{constructor(U,K){super(),this._platformLocation=U,this._removeListenerFns=[],this._baseHref=K??this._platformLocation.getBaseHrefFromDOM()??(0,y.f3M)(ye).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(U){this._removeListenerFns.push(this._platformLocation.onPopState(U),this._platformLocation.onHashChange(U))}getBaseHref(){return this._baseHref}prepareExternalUrl(U){return pe(this._baseHref,U)}path(U=!1){const K=this._platformLocation.pathname+xe(this._platformLocation.search),ge=this._platformLocation.hash;return ge&&U?`${K}${ge}`:K}pushState(U,K,ge,Je){const ut=this.prepareExternalUrl(ge+xe(Je));this._platformLocation.pushState(U,K,ut)}replaceState(U,K,ge,Je){const ut=this.prepareExternalUrl(ge+xe(Je));this._platformLocation.replaceState(U,K,ut)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(U=0){this._platformLocation.historyGo?.(U)}static#e=this.\u0275fac=function(K){return new(K||O)(y.LFG(Ne),y.LFG(it,8))};static#t=this.\u0275prov=y.Yz7({token:O,factory:O.\u0275fac,providedIn:"root"})}return O})(),ct=(()=>{class O extends dt{constructor(U,K){super(),this._platformLocation=U,this._baseHref="",this._removeListenerFns=[],null!=K&&(this._baseHref=K)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(U){this._removeListenerFns.push(this._platformLocation.onPopState(U),this._platformLocation.onHashChange(U))}getBaseHref(){return this._baseHref}path(U=!1){let K=this._platformLocation.hash;return null==K&&(K="#"),K.length>0?K.substring(1):K}prepareExternalUrl(U){const K=pe(this._baseHref,U);return K.length>0?"#"+K:K}pushState(U,K,ge,Je){let ut=this.prepareExternalUrl(ge+xe(Je));0==ut.length&&(ut=this._platformLocation.pathname),this._platformLocation.pushState(U,K,ut)}replaceState(U,K,ge,Je){let ut=this.prepareExternalUrl(ge+xe(Je));0==ut.length&&(ut=this._platformLocation.pathname),this._platformLocation.replaceState(U,K,ut)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(U=0){this._platformLocation.historyGo?.(U)}static#e=this.\u0275fac=function(K){return new(K||O)(y.LFG(Ne),y.LFG(it,8))};static#t=this.\u0275prov=y.Yz7({token:O,factory:O.\u0275fac})}return O})(),Ct=(()=>{class O{constructor(U){this._subject=new y.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=U;const K=this._locationStrategy.getBaseHref();this._basePath=function Le(O){if(new RegExp("^(https?:)?//").test(O)){const[,U]=O.split(/\/\/[^\/]+/);return U}return O}(me(Ve(K))),this._locationStrategy.onPopState(ge=>{this._subject.emit({url:this.path(!0),pop:!0,state:ge.state,type:ge.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(U=!1){return this.normalize(this._locationStrategy.path(U))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(U,K=""){return this.path()==this.normalize(U+xe(K))}normalize(U){return O.stripTrailingSlash(function Jt(O,Q){if(!O||!Q.startsWith(O))return Q;const U=Q.substring(O.length);return""===U||["/",";","?","#"].includes(U[0])?U:Q}(this._basePath,Ve(U)))}prepareExternalUrl(U){return U&&"/"!==U[0]&&(U="/"+U),this._locationStrategy.prepareExternalUrl(U)}go(U,K="",ge=null){this._locationStrategy.pushState(ge,"",U,K),this._notifyUrlChangeListeners(this.prepareExternalUrl(U+xe(K)),ge)}replaceState(U,K="",ge=null){this._locationStrategy.replaceState(ge,"",U,K),this._notifyUrlChangeListeners(this.prepareExternalUrl(U+xe(K)),ge)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(U=0){this._locationStrategy.historyGo?.(U)}onUrlChange(U){return this._urlChangeListeners.push(U),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(K=>{this._notifyUrlChangeListeners(K.url,K.state)})),()=>{const K=this._urlChangeListeners.indexOf(U);this._urlChangeListeners.splice(K,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(U="",K){this._urlChangeListeners.forEach(ge=>ge(U,K))}subscribe(U,K,ge){return this._subject.subscribe({next:U,error:K,complete:ge})}static#e=this.normalizeQueryParams=xe;static#t=this.joinWithSlash=pe;static#n=this.stripTrailingSlash=me;static#r=this.\u0275fac=function(K){return new(K||O)(y.LFG(dt))};static#i=this.\u0275prov=y.Yz7({token:O,factory:function(){return function lt(){return new Ct((0,y.LFG)(dt))}()},providedIn:"root"})}return O})();function Ve(O){return O.replace(/\/index.html$/,"")}var at=function(O){return O[O.Format=0]="Format",O[O.Standalone=1]="Standalone",O}(at||{}),mt=function(O){return O[O.Narrow=0]="Narrow",O[O.Abbreviated=1]="Abbreviated",O[O.Wide=2]="Wide",O[O.Short=3]="Short",O}(mt||{}),ue=function(O){return O[O.Short=0]="Short",O[O.Medium=1]="Medium",O[O.Long=2]="Long",O[O.Full=3]="Full",O}(ue||{}),Kt=function(O){return O[O.Decimal=0]="Decimal",O[O.Group=1]="Group",O[O.List=2]="List",O[O.PercentSign=3]="PercentSign",O[O.PlusSign=4]="PlusSign",O[O.MinusSign=5]="MinusSign",O[O.Exponential=6]="Exponential",O[O.SuperscriptingExponent=7]="SuperscriptingExponent",O[O.PerMille=8]="PerMille",O[O.Infinity=9]="Infinity",O[O.NaN=10]="NaN",O[O.TimeSeparator=11]="TimeSeparator",O[O.CurrencyDecimal=12]="CurrencyDecimal",O[O.CurrencyGroup=13]="CurrencyGroup",O}(Kt||{});function gr(O,Q,U){const K=(0,y.cg1)(O),Je=_e([K[y.wAp.DaysFormat],K[y.wAp.DaysStandalone]],Q);return _e(Je,U)}function or(O,Q,U){const K=(0,y.cg1)(O),Je=_e([K[y.wAp.MonthsFormat],K[y.wAp.MonthsStandalone]],Q);return _e(Je,U)}function we(O,Q){return _e((0,y.cg1)(O)[y.wAp.DateFormat],Q)}function He(O,Q){return _e((0,y.cg1)(O)[y.wAp.TimeFormat],Q)}function Pe(O,Q){return _e((0,y.cg1)(O)[y.wAp.DateTimeFormat],Q)}function Fe(O,Q){const U=(0,y.cg1)(O),K=U[y.wAp.NumberSymbols][Q];if(typeof K>"u"){if(Q===Kt.CurrencyDecimal)return U[y.wAp.NumberSymbols][Kt.Decimal];if(Q===Kt.CurrencyGroup)return U[y.wAp.NumberSymbols][Kt.Group]}return K}function on(O){if(!O[y.wAp.ExtraData])throw new Error(`Missing extra locale data for the locale "${O[y.wAp.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function _e(O,Q){for(let U=Q;U>-1;U--)if(typeof O[U]<"u")return O[U];throw new Error("Locale data API: locale data undefined")}function Se(O){const[Q,U]=O.split(":");return{hours:+Q,minutes:+U}}const Mt=/^(\d{4,})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,Nn={},Ln=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;var Rt=function(O){return O[O.Short=0]="Short",O[O.ShortGMT=1]="ShortGMT",O[O.Long=2]="Long",O[O.Extended=3]="Extended",O}(Rt||{}),rn=function(O){return O[O.FullYear=0]="FullYear",O[O.Month=1]="Month",O[O.Date=2]="Date",O[O.Hours=3]="Hours",O[O.Minutes=4]="Minutes",O[O.Seconds=5]="Seconds",O[O.FractionalSeconds=6]="FractionalSeconds",O[O.Day=7]="Day",O}(rn||{}),hn=function(O){return O[O.DayPeriods=0]="DayPeriods",O[O.Days=1]="Days",O[O.Months=2]="Months",O[O.Eras=3]="Eras",O}(hn||{});function Wt(O,Q,U,K){let ge=function ie(O){if(ne(O))return O;if("number"==typeof O&&!isNaN(O))return new Date(O);if("string"==typeof O){if(O=O.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(O)){const[ge,Je=1,ut=1]=O.split("-").map(an=>+an);return wr(ge,Je-1,ut)}const U=parseFloat(O);if(!isNaN(O-U))return new Date(U);let K;if(K=O.match(Mt))return function re(O){const Q=new Date(0);let U=0,K=0;const ge=O[8]?Q.setUTCFullYear:Q.setFullYear,Je=O[8]?Q.setUTCHours:Q.setHours;O[9]&&(U=Number(O[9]+O[10]),K=Number(O[9]+O[11])),ge.call(Q,Number(O[1]),Number(O[2])-1,Number(O[3]));const ut=Number(O[4]||0)-U,an=Number(O[5]||0)-K,Yn=Number(O[6]||0),rr=Math.floor(1e3*parseFloat("0."+(O[7]||0)));return Je.call(Q,ut,an,Yn,rr),Q}(K)}const Q=new Date(O);if(!ne(Q))throw new Error(`Unable to convert "${O}" into a date`);return Q}(O);Q=Ur(U,Q)||Q;let an,ut=[];for(;Q;){if(an=Ln.exec(Q),!an){ut.push(Q);break}{ut=ut.concat(an.slice(1));const Wn=ut.pop();if(!Wn)break;Q=Wn}}let Yn=ge.getTimezoneOffset();K&&(Yn=Mi(K,Yn),ge=function Te(O,Q,U){const K=U?-1:1,ge=O.getTimezoneOffset();return function Ci(O,Q){return(O=new Date(O.getTime())).setMinutes(O.getMinutes()+Q),O}(O,K*(Mi(Q,ge)-ge))}(ge,K,!0));let rr="";return ut.forEach(Wn=>{const yn=function Di(O){if(gi[O])return gi[O];let Q;switch(O){case"G":case"GG":case"GGG":Q=On(hn.Eras,mt.Abbreviated);break;case"GGGG":Q=On(hn.Eras,mt.Wide);break;case"GGGGG":Q=On(hn.Eras,mt.Narrow);break;case"y":Q=Yt(rn.FullYear,1,0,!1,!0);break;case"yy":Q=Yt(rn.FullYear,2,0,!0,!0);break;case"yyy":Q=Yt(rn.FullYear,3,0,!1,!0);break;case"yyyy":Q=Yt(rn.FullYear,4,0,!1,!0);break;case"Y":Q=Gs(1);break;case"YY":Q=Gs(2,!0);break;case"YYY":Q=Gs(3);break;case"YYYY":Q=Gs(4);break;case"M":case"L":Q=Yt(rn.Month,1,1);break;case"MM":case"LL":Q=Yt(rn.Month,2,1);break;case"MMM":Q=On(hn.Months,mt.Abbreviated);break;case"MMMM":Q=On(hn.Months,mt.Wide);break;case"MMMMM":Q=On(hn.Months,mt.Narrow);break;case"LLL":Q=On(hn.Months,mt.Abbreviated,at.Standalone);break;case"LLLL":Q=On(hn.Months,mt.Wide,at.Standalone);break;case"LLLLL":Q=On(hn.Months,mt.Narrow,at.Standalone);break;case"w":Q=pi(1);break;case"ww":Q=pi(2);break;case"W":Q=pi(1,!0);break;case"d":Q=Yt(rn.Date,1);break;case"dd":Q=Yt(rn.Date,2);break;case"c":case"cc":Q=Yt(rn.Day,1);break;case"ccc":Q=On(hn.Days,mt.Abbreviated,at.Standalone);break;case"cccc":Q=On(hn.Days,mt.Wide,at.Standalone);break;case"ccccc":Q=On(hn.Days,mt.Narrow,at.Standalone);break;case"cccccc":Q=On(hn.Days,mt.Short,at.Standalone);break;case"E":case"EE":case"EEE":Q=On(hn.Days,mt.Abbreviated);break;case"EEEE":Q=On(hn.Days,mt.Wide);break;case"EEEEE":Q=On(hn.Days,mt.Narrow);break;case"EEEEEE":Q=On(hn.Days,mt.Short);break;case"a":case"aa":case"aaa":Q=On(hn.DayPeriods,mt.Abbreviated);break;case"aaaa":Q=On(hn.DayPeriods,mt.Wide);break;case"aaaaa":Q=On(hn.DayPeriods,mt.Narrow);break;case"b":case"bb":case"bbb":Q=On(hn.DayPeriods,mt.Abbreviated,at.Standalone,!0);break;case"bbbb":Q=On(hn.DayPeriods,mt.Wide,at.Standalone,!0);break;case"bbbbb":Q=On(hn.DayPeriods,mt.Narrow,at.Standalone,!0);break;case"B":case"BB":case"BBB":Q=On(hn.DayPeriods,mt.Abbreviated,at.Format,!0);break;case"BBBB":Q=On(hn.DayPeriods,mt.Wide,at.Format,!0);break;case"BBBBB":Q=On(hn.DayPeriods,mt.Narrow,at.Format,!0);break;case"h":Q=Yt(rn.Hours,1,-12);break;case"hh":Q=Yt(rn.Hours,2,-12);break;case"H":Q=Yt(rn.Hours,1);break;case"HH":Q=Yt(rn.Hours,2);break;case"m":Q=Yt(rn.Minutes,1);break;case"mm":Q=Yt(rn.Minutes,2);break;case"s":Q=Yt(rn.Seconds,1);break;case"ss":Q=Yt(rn.Seconds,2);break;case"S":Q=Yt(rn.FractionalSeconds,1);break;case"SS":Q=Yt(rn.FractionalSeconds,2);break;case"SSS":Q=Yt(rn.FractionalSeconds,3);break;case"Z":case"ZZ":case"ZZZ":Q=wi(Rt.Short);break;case"ZZZZZ":Q=wi(Rt.Extended);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":Q=wi(Rt.ShortGMT);break;case"OOOO":case"ZZZZ":case"zzzz":Q=wi(Rt.Long);break;default:return null}return gi[O]=Q,Q}(Wn);rr+=yn?yn(ge,U,Yn):"''"===Wn?"'":Wn.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),rr}function wr(O,Q,U){const K=new Date(0);return K.setFullYear(O,Q,U),K.setHours(0,0,0),K}function Ur(O,Q){const U=function $n(O){return(0,y.cg1)(O)[y.wAp.LocaleId]}(O);if(Nn[U]=Nn[U]||{},Nn[U][Q])return Nn[U][Q];let K="";switch(Q){case"shortDate":K=we(O,ue.Short);break;case"mediumDate":K=we(O,ue.Medium);break;case"longDate":K=we(O,ue.Long);break;case"fullDate":K=we(O,ue.Full);break;case"shortTime":K=He(O,ue.Short);break;case"mediumTime":K=He(O,ue.Medium);break;case"longTime":K=He(O,ue.Long);break;case"fullTime":K=He(O,ue.Full);break;case"short":const ge=Ur(O,"shortTime"),Je=Ur(O,"shortDate");K=kn(Pe(O,ue.Short),[ge,Je]);break;case"medium":const ut=Ur(O,"mediumTime"),an=Ur(O,"mediumDate");K=kn(Pe(O,ue.Medium),[ut,an]);break;case"long":const Yn=Ur(O,"longTime"),rr=Ur(O,"longDate");K=kn(Pe(O,ue.Long),[Yn,rr]);break;case"full":const Wn=Ur(O,"fullTime"),yn=Ur(O,"fullDate");K=kn(Pe(O,ue.Full),[Wn,yn])}return K&&(Nn[U][Q]=K),K}function kn(O,Q){return Q&&(O=O.replace(/\{([^}]+)}/g,function(U,K){return null!=Q&&K in Q?Q[K]:U})),O}function Or(O,Q,U="-",K,ge){let Je="";(O<0||ge&&O<=0)&&(ge?O=1-O:(O=-O,Je=U));let ut=String(O);for(;ut.length<Q;)ut="0"+ut;return K&&(ut=ut.slice(ut.length-Q)),Je+ut}function Yt(O,Q,U=0,K=!1,ge=!1){return function(Je,ut){let an=function Wr(O,Q){switch(O){case rn.FullYear:return Q.getFullYear();case rn.Month:return Q.getMonth();case rn.Date:return Q.getDate();case rn.Hours:return Q.getHours();case rn.Minutes:return Q.getMinutes();case rn.Seconds:return Q.getSeconds();case rn.FractionalSeconds:return Q.getMilliseconds();case rn.Day:return Q.getDay();default:throw new Error(`Unknown DateType value "${O}".`)}}(O,Je);if((U>0||an>-U)&&(an+=U),O===rn.Hours)0===an&&-12===U&&(an=12);else if(O===rn.FractionalSeconds)return function Pr(O,Q){return Or(O,3).substring(0,Q)}(an,Q);const Yn=Fe(ut,Kt.MinusSign);return Or(an,Q,Yn,K,ge)}}function On(O,Q,U=at.Format,K=!1){return function(ge,Je){return function In(O,Q,U,K,ge,Je){switch(U){case hn.Months:return or(Q,ge,K)[O.getMonth()];case hn.Days:return gr(Q,ge,K)[O.getDay()];case hn.DayPeriods:const ut=O.getHours(),an=O.getMinutes();if(Je){const rr=function Sn(O){const Q=(0,y.cg1)(O);return on(Q),(Q[y.wAp.ExtraData][2]||[]).map(K=>"string"==typeof K?Se(K):[Se(K[0]),Se(K[1])])}(Q),Wn=function xn(O,Q,U){const K=(0,y.cg1)(O);on(K);const Je=_e([K[y.wAp.ExtraData][0],K[y.wAp.ExtraData][1]],Q)||[];return _e(Je,U)||[]}(Q,ge,K),yn=rr.findIndex(Zr=>{if(Array.isArray(Zr)){const[Ir,Ei]=Zr,mo=ut>=Ir.hours&&an>=Ir.minutes,Wo=ut<Ei.hours||ut===Ei.hours&&an<Ei.minutes;if(Ir.hours<Ei.hours){if(mo&&Wo)return!0}else if(mo||Wo)return!0}else if(Zr.hours===ut&&Zr.minutes===an)return!0;return!1});if(-1!==yn)return Wn[yn]}return function Dn(O,Q,U){const K=(0,y.cg1)(O),Je=_e([K[y.wAp.DayPeriodsFormat],K[y.wAp.DayPeriodsStandalone]],Q);return _e(Je,U)}(Q,ge,K)[ut<12?0:1];case hn.Eras:return function Zt(O,Q){return _e((0,y.cg1)(O)[y.wAp.Eras],Q)}(Q,K)[O.getFullYear()<=0?0:1];default:throw new Error(`unexpected translation type ${U}`)}}(ge,Je,O,Q,U,K)}}function wi(O){return function(Q,U,K){const ge=-1*K,Je=Fe(U,Kt.MinusSign),ut=ge>0?Math.floor(ge/60):Math.ceil(ge/60);switch(O){case Rt.Short:return(ge>=0?"+":"")+Or(ut,2,Je)+Or(Math.abs(ge%60),2,Je);case Rt.ShortGMT:return"GMT"+(ge>=0?"+":"")+Or(ut,1,Je);case Rt.Long:return"GMT"+(ge>=0?"+":"")+Or(ut,2,Je)+":"+Or(Math.abs(ge%60),2,Je);case Rt.Extended:return 0===K?"Z":(ge>=0?"+":"")+Or(ut,2,Je)+":"+Or(Math.abs(ge%60),2,Je);default:throw new Error(`Unknown zone width "${O}"`)}}}const Pa=0,Yi=4;function Xr(O){return wr(O.getFullYear(),O.getMonth(),O.getDate()+(Yi-O.getDay()))}function pi(O,Q=!1){return function(U,K){let ge;if(Q){const Je=new Date(U.getFullYear(),U.getMonth(),1).getDay()-1,ut=U.getDate();ge=1+Math.floor((ut+Je)/7)}else{const Je=Xr(U),ut=function xr(O){const Q=wr(O,Pa,1).getDay();return wr(O,0,1+(Q<=Yi?Yi:Yi+7)-Q)}(Je.getFullYear()),an=Je.getTime()-ut.getTime();ge=1+Math.round(an/6048e5)}return Or(ge,O,Fe(K,Kt.MinusSign))}}function Gs(O,Q=!1){return function(U,K){return Or(Xr(U).getFullYear(),O,Fe(K,Kt.MinusSign),Q)}}const gi={};function Mi(O,Q){O=O.replace(/:/g,"");const U=Date.parse("Jan 01, 1970 00:00:00 "+O)/6e4;return isNaN(U)?Q:U}function ne(O){return O instanceof Date&&!isNaN(O.valueOf())}function xi(O,Q){Q=encodeURIComponent(Q);for(const U of O.split(";")){const K=U.indexOf("="),[ge,Je]=-1==K?[U,""]:[U.slice(0,K),U.slice(K+1)];if(ge.trim()===Q)return decodeURIComponent(Je)}return null}const hs=/\s+/,Ma=[];let ra=(()=>{class O{constructor(U,K,ge,Je){this._iterableDiffers=U,this._keyValueDiffers=K,this._ngEl=ge,this._renderer=Je,this.initialClasses=Ma,this.stateMap=new Map}set klass(U){this.initialClasses=null!=U?U.trim().split(hs):Ma}set ngClass(U){this.rawClass="string"==typeof U?U.trim().split(hs):U}ngDoCheck(){for(const K of this.initialClasses)this._updateState(K,!0);const U=this.rawClass;if(Array.isArray(U)||U instanceof Set)for(const K of U)this._updateState(K,!0);else if(null!=U)for(const K of Object.keys(U))this._updateState(K,!!U[K]);this._applyStateDiff()}_updateState(U,K){const ge=this.stateMap.get(U);void 0!==ge?(ge.enabled!==K&&(ge.changed=!0,ge.enabled=K),ge.touched=!0):this.stateMap.set(U,{enabled:K,changed:!0,touched:!0})}_applyStateDiff(){for(const U of this.stateMap){const K=U[0],ge=U[1];ge.changed?(this._toggleClass(K,ge.enabled),ge.changed=!1):ge.touched||(ge.enabled&&this._toggleClass(K,!1),this.stateMap.delete(K)),ge.touched=!1}}_toggleClass(U,K){(U=U.trim()).length>0&&U.split(hs).forEach(ge=>{K?this._renderer.addClass(this._ngEl.nativeElement,ge):this._renderer.removeClass(this._ngEl.nativeElement,ge)})}static#e=this.\u0275fac=function(K){return new(K||O)(y.Y36(y.ZZ4),y.Y36(y.aQg),y.Y36(y.SBq),y.Y36(y.Qsj))};static#t=this.\u0275dir=y.lG2({type:O,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"},standalone:!0})}return O})();class Qa{constructor(Q,U,K,ge){this.$implicit=Q,this.ngForOf=U,this.index=K,this.count=ge}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Hs=(()=>{class O{set ngForOf(U){this._ngForOf=U,this._ngForOfDirty=!0}set ngForTrackBy(U){this._trackByFn=U}get ngForTrackBy(){return this._trackByFn}constructor(U,K,ge){this._viewContainer=U,this._template=K,this._differs=ge,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(U){U&&(this._template=U)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const U=this._ngForOf;!this._differ&&U&&(this._differ=this._differs.find(U).create(this.ngForTrackBy))}if(this._differ){const U=this._differ.diff(this._ngForOf);U&&this._applyChanges(U)}}_applyChanges(U){const K=this._viewContainer;U.forEachOperation((ge,Je,ut)=>{if(null==ge.previousIndex)K.createEmbeddedView(this._template,new Qa(ge.item,this._ngForOf,-1,-1),null===ut?void 0:ut);else if(null==ut)K.remove(null===Je?void 0:Je);else if(null!==Je){const an=K.get(Je);K.move(an,ut),Ms(an,ge)}});for(let ge=0,Je=K.length;ge<Je;ge++){const an=K.get(ge).context;an.index=ge,an.count=Je,an.ngForOf=this._ngForOf}U.forEachIdentityChange(ge=>{Ms(K.get(ge.currentIndex),ge)})}static ngTemplateContextGuard(U,K){return!0}static#e=this.\u0275fac=function(K){return new(K||O)(y.Y36(y.s_b),y.Y36(y.Rgc),y.Y36(y.ZZ4))};static#t=this.\u0275dir=y.lG2({type:O,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0})}return O})();function Ms(O,Q){O.context.$implicit=Q.item}let ns=(()=>{class O{constructor(U,K){this._viewContainer=U,this._context=new vu,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=K}set ngIf(U){this._context.$implicit=this._context.ngIf=U,this._updateView()}set ngIfThen(U){Do("ngIfThen",U),this._thenTemplateRef=U,this._thenViewRef=null,this._updateView()}set ngIfElse(U){Do("ngIfElse",U),this._elseTemplateRef=U,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(U,K){return!0}static#e=this.\u0275fac=function(K){return new(K||O)(y.Y36(y.s_b),y.Y36(y.Rgc))};static#t=this.\u0275dir=y.lG2({type:O,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0})}return O})();class vu{constructor(){this.$implicit=null,this.ngIf=null}}function Do(O,Q){if(Q&&!Q.createEmbeddedView)throw new Error(`${O} must be a TemplateRef, but received '${(0,y.AaK)(Q)}'.`)}let Ai=(()=>{class O{constructor(U){this._viewContainerRef=U,this._viewRef=null,this.ngTemplateOutletContext=null,this.ngTemplateOutlet=null,this.ngTemplateOutletInjector=null}ngOnChanges(U){if(U.ngTemplateOutlet||U.ngTemplateOutletInjector){const K=this._viewContainerRef;if(this._viewRef&&K.remove(K.indexOf(this._viewRef)),this.ngTemplateOutlet){const{ngTemplateOutlet:ge,ngTemplateOutletContext:Je,ngTemplateOutletInjector:ut}=this;this._viewRef=K.createEmbeddedView(ge,Je,ut?{injector:ut}:void 0)}else this._viewRef=null}else this._viewRef&&U.ngTemplateOutletContext&&this.ngTemplateOutletContext&&(this._viewRef.context=this.ngTemplateOutletContext)}static#e=this.\u0275fac=function(K){return new(K||O)(y.Y36(y.s_b))};static#t=this.\u0275dir=y.lG2({type:O,selectors:[["","ngTemplateOutlet",""]],inputs:{ngTemplateOutletContext:"ngTemplateOutletContext",ngTemplateOutlet:"ngTemplateOutlet",ngTemplateOutletInjector:"ngTemplateOutletInjector"},standalone:!0,features:[y.TTD]})}return O})(),fr=(()=>{class O{static#e=this.\u0275fac=function(K){return new(K||O)};static#t=this.\u0275mod=y.oAB({type:O});static#n=this.\u0275inj=y.cJS({})}return O})();const yr="browser",vi="server";function Ts(O){return O===vi}let ks=(()=>{class O{static#e=this.\u0275prov=(0,y.Yz7)({token:O,providedIn:"root",factory:()=>new qi((0,y.LFG)(ye),window)})}return O})();class qi{constructor(Q,U){this.document=Q,this.window=U,this.offset=()=>[0,0]}setOffset(Q){this.offset=Array.isArray(Q)?()=>Q:Q}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(Q){this.supportsScrolling()&&this.window.scrollTo(Q[0],Q[1])}scrollToAnchor(Q){if(!this.supportsScrolling())return;const U=function Li(O,Q){const U=O.getElementById(Q)||O.getElementsByName(Q)[0];if(U)return U;if("function"==typeof O.createTreeWalker&&O.body&&"function"==typeof O.body.attachShadow){const K=O.createTreeWalker(O.body,NodeFilter.SHOW_ELEMENT);let ge=K.currentNode;for(;ge;){const Je=ge.shadowRoot;if(Je){const ut=Je.getElementById(Q)||Je.querySelector(`[name="${Q}"]`);if(ut)return ut}ge=K.nextNode()}}return null}(this.document,Q);U&&(this.scrollToElement(U),U.focus())}setHistoryScrollRestoration(Q){this.supportsScrolling()&&(this.window.history.scrollRestoration=Q)}scrollToElement(Q){const U=Q.getBoundingClientRect(),K=U.left+this.window.pageXOffset,ge=U.top+this.window.pageYOffset,Je=this.offset();this.window.scrollTo(K-Je[0],ge-Je[1])}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}class Fs{}},5879:(zt,Ye,H)=>{H.d(Ye,{$8M:()=>Dl,$WT:()=>Cr,$Z:()=>Lh,AFp:()=>Sh,ALo:()=>eT,AaK:()=>xe,AsE:()=>Y_,BQk:()=>tm,CHM:()=>vd,CRH:()=>mT,EJc:()=>MD,EpF:()=>H0,F$t:()=>_y,F4k:()=>gy,FYo:()=>_p,FiY:()=>Aa,Gf:()=>pT,GfV:()=>fg,Gpc:()=>It,HDt:()=>BT,Hsn:()=>vy,Ikx:()=>aI,JOm:()=>bo,KtG:()=>Hn,LFG:()=>Bt,LMc:()=>WC,LSH:()=>w,Lbi:()=>lp,Lck:()=>Ew,MAs:()=>ly,MGl:()=>nm,MMx:()=>VE,NdJ:()=>F_,Ojb:()=>dp,OlP:()=>Yt,Oqu:()=>K_,P3R:()=>Xe,PXZ:()=>uC,Q6J:()=>Qg,QGY:()=>k_,Qsj:()=>vp,R0b:()=>Vo,RDi:()=>gf,Rgc:()=>ov,SBq:()=>Bl,SDv:()=>PE,Sil:()=>FD,Suo:()=>gT,TTD:()=>yn,TgZ:()=>Jg,Tol:()=>Wf,Udp:()=>Oa,VKq:()=>WE,VuI:()=>$C,W1O:()=>IT,WLB:()=>qE,X6Q:()=>mC,XFs:()=>Rt,Xpm:()=>fa,Xq5:()=>D_,Xts:()=>Kn,Y36:()=>Zd,YKP:()=>FE,YNc:()=>U0,Yjl:()=>Is,Yz7:()=>on,Z0I:()=>_e,ZZ4:()=>jI,_Bn:()=>kE,_UZ:()=>P_,_c5:()=>PC,_uU:()=>xy,aQg:()=>GI,c2e:()=>VT,cJS:()=>xn,cg1:()=>uI,dDg:()=>iC,dqk:()=>kn,eFA:()=>YT,eJc:()=>DI,ekj:()=>om,eoX:()=>zT,evT:()=>yg,f3M:()=>Qt,g9A:()=>Rh,gHi:()=>gg,h0i:()=>Kp,hGG:()=>MC,hij:()=>cm,iGM:()=>fT,ifc:()=>Xt,ip1:()=>LT,jDz:()=>BE,kEZ:()=>KE,kL8:()=>oE,ktI:()=>Ep,lG2:()=>pa,lnq:()=>Z_,lqb:()=>mu,lri:()=>HT,n5z:()=>au,oAB:()=>xs,oxw:()=>K0,q4F:()=>pg,qFp:()=>qC,qLn:()=>jl,qOj:()=>ts,qZA:()=>Xg,rWj:()=>$T,rg0:()=>Je,s9C:()=>yy,sBO:()=>_C,s_b:()=>$y,soG:()=>Wy,tb:()=>kI,tp0:()=>Lu,uIk:()=>C_,vHH:()=>Le,vpe:()=>Uc,wAp:()=>dm,xi3:()=>tT,xp6:()=>Cg,ynx:()=>em,z2F:()=>gm,zSh:()=>dl,zW0:()=>Jv,zs3:()=>ml});var y=H(8645),fe=H(7394),oe=H(5592),Ce=H(3019),De=H(5619),ye=H(2096),Ne=H(3020),I=H(4664),ze=H(3997);function pe(t){for(let r in t)if(t[r]===pe)return r;throw Error("Could not find renamed property on target object.")}function me(t,r){for(const s in r)r.hasOwnProperty(s)&&!t.hasOwnProperty(s)&&(t[s]=r[s])}function xe(t){if("string"==typeof t)return t;if(Array.isArray(t))return"["+t.map(xe).join(", ")+"]";if(null==t)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;const r=t.toString();if(null==r)return""+r;const s=r.indexOf("\n");return-1===s?r:r.substring(0,s)}function dt(t,r){return null==t||""===t?null===r?"":r:null==r||""===r?t:t+" "+r}const it=pe({__forward_ref__:pe});function It(t){return t.__forward_ref__=It,t.toString=function(){return xe(this())},t}function ct(t){return Ct(t)?t():t}function Ct(t){return"function"==typeof t&&t.hasOwnProperty(it)&&t.__forward_ref__===It}function lt(t){return t&&!!t.\u0275providers}const Ve="https://g.co/ng/security#xss";class Le extends Error{constructor(r,s){super(function $e(t,r){return`NG0${Math.abs(t)}${r?": "+r:""}`}(r,s)),this.code=r}}function Oe(t){return"string"==typeof t?t:null==t?"":String(t)}function Kt(t,r){throw new Le(-201,!1)}function wt(t,r,s,a){throw new Error(`ASSERTION ERROR: ${t}`+(null==a?"":` [Expected=> ${s} ${a} ${r} <=Actual]`))}function on(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function xn(t){return{providers:t.providers||[],imports:t.imports||[]}}function Rn(t){return Se(t,ft)||Se(t,Nn)}function _e(t){return null!==Rn(t)}function Se(t,r){return t.hasOwnProperty(r)?t[r]:null}function ot(t){return t&&(t.hasOwnProperty(Mt)||t.hasOwnProperty(Ln))?t[Mt]:null}const ft=pe({\u0275prov:pe}),Mt=pe({\u0275inj:pe}),Nn=pe({ngInjectableDef:pe}),Ln=pe({ngInjectorDef:pe});var Rt=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}(Rt||{});let rn;function hn(){return rn}function Wt(t){const r=rn;return rn=t,r}function wr(t,r,s){const a=Rn(t);return a&&"root"==a.providedIn?void 0===a.value?a.value=a.factory():a.value:s&Rt.Optional?null:void 0!==r?r:void Kt(xe(t))}const kn=globalThis;class Yt{constructor(r,s){this._desc=r,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof s?this.__NG_ELEMENT_ID__=s:void 0!==s&&(this.\u0275prov=on({token:this,providedIn:s.providedIn||"root",factory:s.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}const Di={},Mi="__NG_DI_FLAG__",Ci="ngTempTokenPath",ie=/\n/gm,ne="__source";let ae;function ht(t){const r=ae;return ae=t,r}function St(t,r=Rt.Default){if(void 0===ae)throw new Le(-203,!1);return null===ae?wr(t,void 0,r):ae.get(t,r&Rt.Optional?null:void 0,r)}function Bt(t,r=Rt.Default){return(hn()||St)(ct(t),r)}function Qt(t,r=Rt.Default){return Bt(t,un(r))}function un(t){return typeof t>"u"||"number"==typeof t?t:0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function Dr(t){const r=[];for(let s=0;s<t.length;s++){const a=ct(t[s]);if(Array.isArray(a)){if(0===a.length)throw new Le(900,!1);let l,g=Rt.Default;for(let E=0;E<a.length;E++){const R=a[E],k=Ps(R);"number"==typeof k?-1===k?l=R.token:g|=k:l=R}r.push(Bt(l,g))}else r.push(Bt(a))}return r}function qr(t,r){return t[Mi]=r,t.prototype[Mi]=r,t}function Ps(t){return t[Mi]}function Ue(t){return{toString:t}.toString()}var _t=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}(_t||{}),Xt=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}(Xt||{});const vn={},jt=[],zn=pe({\u0275cmp:pe}),Kr=pe({\u0275dir:pe}),vr=pe({\u0275pipe:pe}),Zs=pe({\u0275mod:pe}),xi=pe({\u0275fac:pe}),hs=pe({__NG_ELEMENT_ID__:pe}),Ma=pe({__NG_ENV_ID__:pe});function ra(t,r,s){let a=t.length;for(;;){const l=t.indexOf(r,s);if(-1===l)return l;if(0===l||t.charCodeAt(l-1)<=32){const g=r.length;if(l+g===a||t.charCodeAt(l+g)<=32)return l}s=l+1}}function ha(t,r,s){let a=0;for(;a<s.length;){const l=s[a];if("number"==typeof l){if(0!==l)break;a++;const g=s[a++],E=s[a++],R=s[a++];t.setAttribute(r,E,R,g)}else{const g=l,E=s[++a];Qa(g)?t.setProperty(r,g,E):t.setAttribute(r,g,E),a++}}return a}function Cn(t){return 3===t||4===t||6===t}function Qa(t){return 64===t.charCodeAt(0)}function Hs(t,r){if(null!==r&&0!==r.length)if(null===t||0===t.length)t=r.slice();else{let s=-1;for(let a=0;a<r.length;a++){const l=r[a];"number"==typeof l?s=l:0===s||Ms(t,s,l,null,-1===s||2===s?r[++a]:null)}}return t}function Ms(t,r,s,a,l){let g=0,E=t.length;if(-1===r)E=-1;else for(;g<t.length;){const R=t[g++];if("number"==typeof R){if(R===r){E=-1;break}if(R>r){E=g-1;break}}}for(;g<t.length;){const R=t[g];if("number"==typeof R)break;if(R===s){if(null===a)return void(null!==l&&(t[g+1]=l));if(a===t[g+1])return void(t[g+2]=l)}g++,null!==a&&g++,null!==l&&g++}-1!==E&&(t.splice(E,0,r),g=E+1),t.splice(g++,0,s),null!==a&&t.splice(g++,0,a),null!==l&&t.splice(g++,0,l)}const Qs="ng-template";function ns(t,r,s){let a=0,l=!0;for(;a<t.length;){let g=t[a++];if("string"==typeof g&&l){const E=t[a++];if(s&&"class"===g&&-1!==ra(E.toLowerCase(),r,0))return!0}else{if(1===g){for(;a<t.length&&"string"==typeof(g=t[a++]);)if(g.toLowerCase()===r)return!0;return!1}"number"==typeof g&&(l=!1)}}return!1}function vu(t){return 4===t.type&&t.value!==Qs}function Do(t,r,s){return r===(4!==t.type||s?t.value:Qs)}function ki(t,r,s){let a=4;const l=t.attrs||[],g=function Zi(t){for(let r=0;r<t.length;r++)if(Cn(t[r]))return r;return t.length}(l);let E=!1;for(let R=0;R<r.length;R++){const k=r[R];if("number"!=typeof k){if(!E)if(4&a){if(a=2|1&a,""!==k&&!Do(t,k,s)||""===k&&1===r.length){if(ar(a))return!1;E=!0}}else{const $=8&a?k:r[++R];if(8&a&&null!==t.attrs){if(!ns(t.attrs,$,s)){if(ar(a))return!1;E=!0}continue}const he=ur(8&a?"class":k,l,vu(t),s);if(-1===he){if(ar(a))return!1;E=!0;continue}if(""!==$){let ke;ke=he>g?"":l[he+1].toLowerCase();const qe=8&a?ke:null;if(qe&&-1!==ra(qe,$,0)||2&a&&$!==ke){if(ar(a))return!1;E=!0}}}}else{if(!E&&!ar(a)&&!ar(k))return!1;if(E&&ar(k))continue;E=!1,a=k|1&a}}return ar(a)||E}function ar(t){return 0==(1&t)}function ur(t,r,s,a){if(null===r)return-1;let l=0;if(a||!s){let g=!1;for(;l<r.length;){const E=r[l];if(E===t)return l;if(3===E||6===E)g=!0;else{if(1===E||2===E){let R=r[++l];for(;"string"==typeof R;)R=r[++l];continue}if(4===E)break;if(0===E){l+=4;continue}}l+=g?1:2}return-1}return function Fi(t,r){let s=t.indexOf(4);if(s>-1)for(s++;s<t.length;){const a=t[s];if("number"==typeof a)return-1;if(a===r)return s;s++}return-1}(r,t)}function jr(t,r,s=!1){for(let a=0;a<r.length;a++)if(ki(t,r[a],s))return!0;return!1}function co(t,r){e:for(let s=0;s<r.length;s++){const a=r[s];if(t.length===a.length){for(let l=0;l<t.length;l++)if(t[l]!==a[l])continue e;return!0}}return!1}function Ai(t,r){return t?":not("+r.trim()+")":r}function yu(t){let r=t[0],s=1,a=2,l="",g=!1;for(;s<t.length;){let E=t[s];if("string"==typeof E)if(2&a){const R=t[++s];l+="["+E+(R.length>0?'="'+R+'"':"")+"]"}else 8&a?l+="."+E:4&a&&(l+=" "+E);else""!==l&&!ar(E)&&(r+=Ai(g,l),l=""),a=E,g=g||!ar(a);s++}return""!==l&&(r+=Ai(g,l)),r}function fa(t){return Ue(()=>{const r=ai(t),s={...r,decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===_t.OnPush,directiveDefs:null,pipeDefs:null,dependencies:r.standalone&&t.dependencies||null,getStandaloneInjector:null,signals:t.signals??!1,data:t.data||{},encapsulation:t.encapsulation||Xt.Emulated,styles:t.styles||jt,_:null,schemas:t.schemas||null,tView:null,id:""};Co(s);const a=t.dependencies;return s.directiveDefs=kr(a,!1),s.pipeDefs=kr(a,!0),s.id=function $s(t){let r=0;const s=[t.selectors,t.ngContentSelectors,t.hostVars,t.hostAttrs,t.consts,t.vars,t.decls,t.encapsulation,t.standalone,t.signals,t.exportAs,JSON.stringify(t.inputs),JSON.stringify(t.outputs),Object.getOwnPropertyNames(t.type.prototype),!!t.contentQueries,!!t.viewQuery].join("|");for(const l of s)r=Math.imul(31,r)+l.charCodeAt(0)<<0;return r+=2147483648,"c"+r}(s),s})}function Bo(t){return Gn(t)||_i(t)}function ka(t){return null!==t}function xs(t){return Ue(()=>({type:t.type,bootstrap:t.bootstrap||jt,declarations:t.declarations||jt,imports:t.imports||jt,exports:t.exports||jt,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function lo(t,r){if(null==t)return vn;const s={};for(const a in t)if(t.hasOwnProperty(a)){let l=t[a],g=l;Array.isArray(l)&&(g=l[1],l=l[0]),s[l]=a,r&&(r[l]=g)}return s}function pa(t){return Ue(()=>{const r=ai(t);return Co(r),r})}function Is(t){return{type:t.type,name:t.name,factory:null,pure:!1!==t.pure,standalone:!0===t.standalone,onDestroy:t.type.prototype.ngOnDestroy||null}}function Gn(t){return t[zn]||null}function _i(t){return t[Kr]||null}function ri(t){return t[vr]||null}function Cr(t){const r=Gn(t)||_i(t)||ri(t);return null!==r&&r.standalone}function Yr(t,r){const s=t[Zs]||null;if(!s&&!0===r)throw new Error(`Type ${xe(t)} does not have '\u0275mod' property.`);return s}function ai(t){const r={};return{type:t.type,providersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:r,inputTransforms:null,inputConfig:t.inputs||vn,exportAs:t.exportAs||null,standalone:!0===t.standalone,signals:!0===t.signals,selectors:t.selectors||jt,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:lo(t.inputs,r),outputs:lo(t.outputs)}}function Co(t){t.features?.forEach(r=>r(t))}function kr(t,r){if(!t)return null;const s=r?ri:Bo;return()=>("function"==typeof t?t():t).map(a=>s(a)).filter(ka)}const hr=0,Lt=1,En=2,Vn=3,ui=4,Wi=5,ei=6,fr=7,yr=8,vi=9,Gr=10,_n=11,yi=12,Ts=13,bs=14,ti=15,er=16,ks=17,qi=18,Li=19,ws=20,Fs=21,fs=22,rs=23,ho=24,Bn=25,is=1,ps=2,Ds=7,Js=9,Hr=11;function Er(t){return Array.isArray(t)&&"object"==typeof t[is]}function ci(t){return Array.isArray(t)&&!0===t[is]}function Xs(t){return 0!=(4&t.flags)}function gs(t){return t.componentOffset>-1}function Fr(t){return 1==(1&t.flags)}function Cs(t){return!!t.template}function eu(t){return 0!=(512&t[En])}function Bi(t,r){return t.hasOwnProperty(xi)?t[xi]:null}let Ii=null,Ls=!1;function Qi(t){const r=Ii;return Ii=t,r}const sa={version:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{}};function Po(t){if(!zs(t)||t.dirty){if(!t.producerMustRecompute(t)&&!La(t))return void(t.dirty=!1);t.producerRecomputeValue(t),t.dirty=!1}}function vc(t){t.dirty=!0,function Fa(t){if(void 0===t.liveConsumerNode)return;const r=Ls;Ls=!0;try{for(const s of t.liveConsumerNode)s.dirty||vc(s)}finally{Ls=r}}(t),t.consumerMarkedDirty?.(t)}function Mo(t){return t&&(t.nextProducerIndex=0),Qi(t)}function Eu(t,r){if(Qi(r),t&&void 0!==t.producerNode&&void 0!==t.producerIndexOfThis&&void 0!==t.producerLastReadVersion){if(zs(t))for(let s=t.nextProducerIndex;s<t.producerNode.length;s++)bu(t.producerNode[s],t.producerIndexOfThis[s]);for(;t.producerNode.length>t.nextProducerIndex;)t.producerNode.pop(),t.producerLastReadVersion.pop(),t.producerIndexOfThis.pop()}}function La(t){wu(t);for(let r=0;r<t.producerNode.length;r++){const s=t.producerNode[r],a=t.producerLastReadVersion[r];if(a!==s.version||(Po(s),a!==s.version))return!0}return!1}function Tu(t){if(wu(t),zs(t))for(let r=0;r<t.producerNode.length;r++)bu(t.producerNode[r],t.producerIndexOfThis[r]);t.producerNode.length=t.producerLastReadVersion.length=t.producerIndexOfThis.length=0,t.liveConsumerNode&&(t.liveConsumerNode.length=t.liveConsumerIndexOfThis.length=0)}function bu(t,r){if(function yc(t){t.liveConsumerNode??=[],t.liveConsumerIndexOfThis??=[]}(t),wu(t),1===t.liveConsumerNode.length)for(let a=0;a<t.producerNode.length;a++)bu(t.producerNode[a],t.producerIndexOfThis[a]);const s=t.liveConsumerNode.length-1;if(t.liveConsumerNode[r]=t.liveConsumerNode[s],t.liveConsumerIndexOfThis[r]=t.liveConsumerIndexOfThis[s],t.liveConsumerNode.length--,t.liveConsumerIndexOfThis.length--,r<t.liveConsumerNode.length){const a=t.liveConsumerIndexOfThis[r],l=t.liveConsumerNode[r];wu(l),l.producerIndexOfThis[a]=r}}function zs(t){return t.consumerIsAlwaysLive||(t?.liveConsumerNode?.length??0)>0}function wu(t){t.producerNode??=[],t.producerIndexOfThis??=[],t.producerLastReadVersion??=[]}let eo=null;function Je(t){const r=Qi(null);try{return t()}finally{Qi(r)}}const an=()=>{},Yn=(()=>({...sa,consumerIsAlwaysLive:!0,consumerAllowSignalWrites:!1,consumerMarkedDirty:t=>{t.schedule(t.ref)},hasRun:!1,cleanupFn:an}))();class Wn{constructor(r,s,a){this.previousValue=r,this.currentValue=s,this.firstChange=a}isFirstChange(){return this.firstChange}}function yn(){return Zr}function Zr(t){return t.type.prototype.ngOnChanges&&(t.setInput=Ei),Ir}function Ir(){const t=Wo(this),r=t?.current;if(r){const s=t.previous;if(s===vn)t.previous=r;else for(let a in r)s[a]=r[a];t.current=null,this.ngOnChanges(r)}}function Ei(t,r,s,a){const l=this.declaredInputs[s],g=Wo(t)||function qo(t,r){return t[mo]=r}(t,{previous:vn,current:null}),E=g.current||(g.current={}),R=g.previous,k=R[l];E[l]=new Wn(k&&k.currentValue,r,R===vn),t[a]=r}yn.ngInherit=!0;const mo="__ngSimpleChanges__";function Wo(t){return t[mo]||null}const Ri=function(t,r,s){};function $r(t){for(;Array.isArray(t);)t=t[hr];return t}function Ku(t,r){return $r(r[t])}function ms(t,r){return $r(r[t.index])}function Ko(t,r){return t.data[r]}function _s(t,r){return t[r]}function Lr(t,r){const s=r[t];return Er(s)?s:s[hr]}function Ba(t,r){return null==r?null:t[r]}function yt(t){t[ks]=0}function Ti(t){1024&t[En]||(t[En]|=1024,Ua(t,1))}function vo(t){1024&t[En]&&(t[En]&=-1025,Ua(t,-1))}function Ua(t,r){let s=t[Vn];if(null===s)return;s[Wi]+=r;let a=s;for(s=s[Vn];null!==s&&(1===r&&1===a[Wi]||-1===r&&0===a[Wi]);)s[Wi]+=r,a=s,s=s[Vn]}function tn(t,r){if(256==(256&t[En]))throw new Le(911,!1);null===t[Fs]&&(t[Fs]=[]),t[Fs].push(r)}const Un={lFrame:de(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function _d(){return Un.bindingsEnabled}function Cu(){return null!==Un.skipHydrationRootTNode}function Tt(){return Un.lFrame.lView}function ir(){return Un.lFrame.tView}function vd(t){return Un.lFrame.contextLView=t,t[yr]}function Hn(t){return Un.lFrame.contextLView=null,t}function Ui(){let t=wl();for(;null!==t&&64===t.type;)t=t.parent;return t}function wl(){return Un.lFrame.currentTNode}function Ar(){const t=Un.lFrame,r=t.currentTNode;return t.isParent?r:r.parent}function sn(t,r){const s=Un.lFrame;s.currentTNode=t,s.isParent=r}function no(){return Un.lFrame.isParent}function Jn(){Un.lFrame.isParent=!1}function bi(){const t=Un.lFrame;let r=t.bindingRootIndex;return-1===r&&(r=t.bindingRootIndex=t.tView.bindingStartIndex),r}function Ta(){return Un.lFrame.bindingIndex}function iu(){return Un.lFrame.bindingIndex++}function yo(t){const r=Un.lFrame,s=r.bindingIndex;return r.bindingIndex=r.bindingIndex+t,s}function Ic(t){Un.lFrame.inI18n=t}function Yu(t,r){const s=Un.lFrame;s.bindingIndex=s.bindingRootIndex=t,ro(r)}function ro(t){Un.lFrame.currentDirectiveIndex=t}function S(){return Un.lFrame.currentQueryIndex}function M(t){Un.lFrame.currentQueryIndex=t}function A(t){const r=t[Lt];return 2===r.type?r.declTNode:1===r.type?t[ei]:null}function F(t,r,s){if(s&Rt.SkipSelf){let l=r,g=t;for(;!(l=l.parent,null!==l||s&Rt.Host||(l=A(g),null===l||(g=g[bs],10&l.type))););if(null===l)return!1;r=l,t=g}const a=Un.lFrame=J();return a.currentTNode=r,a.lView=t,!0}function L(t){const r=J(),s=t[Lt];Un.lFrame=r,r.currentTNode=s.firstChild,r.lView=t,r.tView=s,r.contextLView=t,r.bindingIndex=s.bindingStartIndex,r.inI18n=!1}function J(){const t=Un.lFrame,r=null===t?null:t.child;return null===r?de(t):r}function de(t){const r={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return null!==t&&(t.child=r),r}function Qe(){const t=Un.lFrame;return Un.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}const Ke=Qe;function Vt(){const t=Qe();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function bn(){return Un.lFrame.selectedIndex}function As(t){Un.lFrame.selectedIndex=t}function di(){const t=Un.lFrame;return Ko(t.tView,t.selectedIndex)}let Ni=!0;function io(){return Ni}function aa(t){Ni=t}function wa(t,r){for(let s=r.directiveStart,a=r.directiveEnd;s<a;s++){const g=t.data[s].type.prototype,{ngAfterContentInit:E,ngAfterContentChecked:R,ngAfterViewInit:k,ngAfterViewChecked:$,ngOnDestroy:te}=g;E&&(t.contentHooks??=[]).push(-s,E),R&&((t.contentHooks??=[]).push(s,R),(t.contentCheckHooks??=[]).push(s,R)),k&&(t.viewHooks??=[]).push(-s,k),$&&((t.viewHooks??=[]).push(s,$),(t.viewCheckHooks??=[]).push(s,$)),null!=te&&(t.destroyHooks??=[]).push(s,te)}}function su(t,r,s){so(t,r,3,s)}function Ga(t,r,s,a){(3&t[En])===s&&so(t,r,s,a)}function Tc(t,r){let s=t[En];(3&s)===r&&(s&=8191,s+=1,t[En]=s)}function so(t,r,s,a){const g=a??-1,E=r.length-1;let R=0;for(let k=void 0!==a?65535&t[ks]:0;k<E;k++)if("number"==typeof r[k+1]){if(R=r[k],null!=a&&R>=a)break}else r[k]<0&&(t[ks]+=65536),(R<g||-1==g)&&(Td(t,s,r,k),t[ks]=(4294901760&t[ks])+k+2),k++}function Zu(t,r){Ri(4,t,r);const s=Qi(null);try{r.call(t)}finally{Qi(s),Ri(5,t,r)}}function Td(t,r,s,a){const l=s[a]<0,g=s[a+1],R=t[l?-s[a]:s[a]];l?t[En]>>13<t[ks]>>16&&(3&t[En])===r&&(t[En]+=8192,Zu(R,g)):Zu(R,g)}const Su=-1;class Yc{constructor(r,s,a){this.factory=r,this.resolving=!1,this.canSeeViewProviders=s,this.injectImpl=a}}function Qu(t){return t!==Su}function Ha(t){return 32767&t}function oo(t,r){let s=function Ju(t){return t>>16}(t),a=r;for(;s>0;)a=a[bs],s--;return a}let ql=!0;function Jc(t){const r=ql;return ql=t,r}const es=255,wc=5;let Ru=0;const xo={};function Zo(t,r){const s=ii(t,r);if(-1!==s)return s;const a=r[Lt];a.firstCreatePass&&(t.injectorIndex=r.length,us(a.data,t),us(r,null),us(a.blueprint,null));const l=Nu(t,r),g=t.injectorIndex;if(Qu(l)){const E=Ha(l),R=oo(l,r),k=R[Lt].data;for(let $=0;$<8;$++)r[g+$]=R[E+$]|k[E+$]}return r[g+8]=l,g}function us(t,r){t.push(0,0,0,0,0,0,0,0,r)}function ii(t,r){return-1===t.injectorIndex||t.parent&&t.parent.injectorIndex===t.injectorIndex||null===r[t.injectorIndex+8]?-1:t.injectorIndex}function Nu(t,r){if(t.parent&&-1!==t.parent.injectorIndex)return t.parent.injectorIndex;let s=0,a=null,l=r;for(;null!==l;){if(a=cu(l),null===a)return Su;if(s++,l=l[bs],-1!==a.injectorIndex)return a.injectorIndex|s<<16}return Su}function Dc(t,r,s){!function ni(t,r,s){let a;"string"==typeof s?a=s.charCodeAt(0)||0:s.hasOwnProperty(hs)&&(a=s[hs]),null==a&&(a=s[hs]=Ru++);const l=a&es;r.data[t+(l>>wc)]|=1<<l}(t,r,s)}function Cc(t,r,s){if(s&Rt.Optional||void 0!==t)return t;Kt()}function Qh(t,r,s,a){if(s&Rt.Optional&&void 0===a&&(a=null),!(s&(Rt.Self|Rt.Host))){const l=t[vi],g=Wt(void 0);try{return l?l.get(r,a,s&Rt.Optional):wr(r,a,s&Rt.Optional)}finally{Wt(g)}}return Cc(a,0,s)}function vs(t,r,s,a=Rt.Default,l){if(null!==t){if(2048&r[En]&&!(a&Rt.Self)){const E=function uu(t,r,s,a,l){let g=t,E=r;for(;null!==g&&null!==E&&2048&E[En]&&!(512&E[En]);){const R=Xu(g,E,s,a|Rt.Self,xo);if(R!==xo)return R;let k=g.parent;if(!k){const $=E[ws];if($){const te=$.get(s,xo,a);if(te!==xo)return te}k=cu(E),E=E[bs]}g=k}return l}(t,r,s,a,xo);if(E!==xo)return E}const g=Xu(t,r,s,a,xo);if(g!==xo)return g}return Qh(r,s,a,l)}function Xu(t,r,s,a,l){const g=function ou(t){if("string"==typeof t)return t.charCodeAt(0)||0;const r=t.hasOwnProperty(hs)?t[hs]:void 0;return"number"==typeof r?r>=0?r&es:Ac:r}(s);if("function"==typeof g){if(!F(r,t,a))return a&Rt.Host?Cc(l,0,a):Qh(r,s,a,l);try{let E;if(E=g(a),null!=E||a&Rt.Optional)return E;Kt()}finally{Ke()}}else if("number"==typeof g){let E=null,R=ii(t,r),k=Su,$=a&Rt.Host?r[ti][ei]:null;for((-1===R||a&Rt.SkipSelf)&&(k=-1===R?Nu(t,r):r[R+8],k!==Su&&$a(a,!1)?(E=r[Lt],R=Ha(k),r=oo(k,r)):R=-1);-1!==R;){const te=r[Lt];if(ec(g,R,te.data)){const he=Ou(R,r,s,E,a,$);if(he!==xo)return he}k=r[R+8],k!==Su&&$a(a,r[Lt].data[R+8]===$)&&ec(g,R,r)?(E=te,R=Ha(k),r=oo(k,r)):R=-1}}return l}function Ou(t,r,s,a,l,g){const E=r[Lt],R=E.data[t+8],te=jn(R,E,s,null==a?gs(R)&&ql:a!=E&&0!=(3&R.type),l&Rt.Host&&g===R);return null!==te?ji(r,E,te,R):xo}function jn(t,r,s,a,l){const g=t.providerIndexes,E=r.data,R=1048575&g,k=t.directiveStart,te=g>>20,ke=l?R+te:t.directiveEnd;for(let qe=a?R:R+te;qe<ke;qe++){const gt=E[qe];if(qe<k&&s===gt||qe>=k&&gt.type===s)return qe}if(l){const qe=E[k];if(qe&&Cs(qe)&&qe.type===s)return k}return null}function ji(t,r,s,a){let l=t[s];const g=r.data;if(function bc(t){return t instanceof Yc}(l)){const E=l;E.resolving&&function at(t,r){const s=r?`. Dependency path: ${r.join(" > ")} > ${t}`:"";throw new Le(-200,`Circular dependency in DI detected for ${t}${s}`)}(function We(t){return"function"==typeof t?t.name||t.toString():"object"==typeof t&&null!=t&&"function"==typeof t.type?t.type.name||t.type.toString():Oe(t)}(g[s]));const R=Jc(E.canSeeViewProviders);E.resolving=!0;const $=E.injectImpl?Wt(E.injectImpl):null;F(t,a,Rt.Default);try{l=t[s]=E.factory(void 0,g,t,a),r.firstCreatePass&&s>=a.directiveStart&&function Io(t,r,s){const{ngOnChanges:a,ngOnInit:l,ngDoCheck:g}=r.type.prototype;if(a){const E=Zr(r);(s.preOrderHooks??=[]).push(t,E),(s.preOrderCheckHooks??=[]).push(t,E)}l&&(s.preOrderHooks??=[]).push(0-t,l),g&&((s.preOrderHooks??=[]).push(t,g),(s.preOrderCheckHooks??=[]).push(t,g))}(s,g[s],r)}finally{null!==$&&Wt($),Jc(R),E.resolving=!1,Ke()}}return l}function ec(t,r,s){return!!(s[r+(t>>wc)]&1<<t)}function $a(t,r){return!(t&Rt.Self||t&Rt.Host&&r)}class Gi{constructor(r,s){this._tNode=r,this._lView=s}get(r,s,a){return vs(this._tNode,this._lView,r,un(a),s)}}function Ac(){return new Gi(Ui(),Tt())}function au(t){return Ue(()=>{const r=t.prototype.constructor,s=r[xi]||Jo(r),a=Object.prototype;let l=Object.getPrototypeOf(t.prototype).constructor;for(;l&&l!==a;){const g=l[xi]||Jo(l);if(g&&g!==s)return g;l=Object.getPrototypeOf(l)}return g=>new g})}function Jo(t){return Ct(t)?()=>{const r=Jo(ct(t));return r&&r()}:Bi(t)}function cu(t){const r=t[Lt],s=r.type;return 2===s?r.declTNode:1===s?t[ei]:null}function Dl(t){return function Qo(t,r){if("class"===r)return t.classes;if("style"===r)return t.styles;const s=t.attrs;if(s){const a=s.length;let l=0;for(;l<a;){const g=s[l];if(Cn(g))break;if(0===g)l+=2;else if("number"==typeof g)for(l++;l<a&&"string"==typeof s[l];)l++;else{if(g===r)return s[l+1];l+=2}}}return null}(Ui(),t)}const Eo="__parameters__";function za(t,r,s){return Ue(()=>{const a=function tc(t){return function(...s){if(t){const a=t(...s);for(const l in a)this[l]=a[l]}}}(r);function l(...g){if(this instanceof l)return a.apply(this,g),this;const E=new l(...g);return R.annotation=E,R;function R(k,$,te){const he=k.hasOwnProperty(Eo)?k[Eo]:Object.defineProperty(k,Eo,{value:[]})[Eo];for(;he.length<=te;)he.push(null);return(he[te]=he[te]||[]).push(E),k}}return s&&(l.prototype=Object.create(s.prototype)),l.prototype.ngMetadataName=t,l.annotationCls=l,l})}function du(t,r){t.forEach(s=>Array.isArray(s)?du(s,r):r(s))}function Cl(t,r,s){r>=t.length?t.push(s):t.splice(r,0,s)}function cr(t,r){return r>=t.length-1?t.pop():t.splice(r,1)[0]}function Mr(t,r){const s=[];for(let a=0;a<t;a++)s.push(r);return s}function Ss(t,r,s){let a=ku(t,r);return a>=0?t[1|a]=s:(a=~a,function xu(t,r,s,a){let l=t.length;if(l==r)t.push(s,a);else if(1===l)t.push(a,t[0]),t[0]=s;else{for(l--,t.push(t[l-1],t[l]);l>r;)t[l]=t[l-2],l--;t[r]=s,t[r+1]=a}}(t,a,r,s)),a}function Yl(t,r){const s=ku(t,r);if(s>=0)return t[1|s]}function ku(t,r){return function tl(t,r,s){let a=0,l=t.length>>s;for(;l!==a;){const g=a+(l-a>>1),E=t[g<<s];if(r===E)return g<<s;E>r?l=g:a=g+1}return~(l<<s)}(t,r,1)}const Aa=qr(za("Optional"),8),Lu=qr(za("SkipSelf"),4);function Ka(t){return 128==(128&t.flags)}var bo=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}(bo||{});const Od=/^>|^->|<!--|-->|--!>|<!-$/g,Yf=/(<|>)/g,Ol="\u200b$1\u200b";const la=new Map;let Oi=0;const fu="__ngContext__";function ko(t,r){Er(r)?(t[fu]=r[Li],function gh(t){la.set(t[Li],t)}(r)):t[fu]=r}let Bu;function nd(t,r){return Bu(t,r)}function ul(t){const r=t[Vn];return ci(r)?r[Vn]:r}function b(t){return _(t[yi])}function f(t){return _(t[ui])}function _(t){for(;null!==t&&!ci(t);)t=t[ui];return t}function C(t,r,s,a,l){if(null!=a){let g,E=!1;ci(a)?g=a:Er(a)&&(E=!0,a=a[hr]);const R=$r(a);0===t&&null!==s?null==l?Fc(r,s,R):cc(r,s,R,l||null,!0):1===t&&null!==s?cc(r,s,R,l||null,!0):2===t?function df(t,r,s){const a=ll(t,r);a&&function Ml(t,r,s,a){t.removeChild(r,s,a)}(t,a,r,s)}(r,R,E):3===t&&r.destroyNode(R),null!=g&&function id(t,r,s,a,l){const g=s[Ds];g!==$r(s)&&C(r,t,a,g,l);for(let R=Hr;R<s.length;R++){const k=s[R];hf(k[Lt],k,t,r,a,g)}}(r,t,g,s,l)}}function G(t,r){return t.createText(r)}function Ee(t,r){return t.createComment(function Zf(t){return t.replace(Od,r=>r.replace(Yf,Ol))}(r))}function Ge(t,r,s){return t.createElement(r,s)}function Uu(t,r){const s=t[Js],a=s.indexOf(r);vo(r),s.splice(a,1)}function kc(t,r){if(t.length<=Hr)return;const s=Hr+r,a=t[s];if(a){const l=a[er];null!==l&&l!==t&&Uu(l,a),r>0&&(t[s-1][ui]=a[ui]);const g=cr(t,Hr+r);!function pt(t,r){hf(t,r,r[_n],2,null,null),r[hr]=null,r[ei]=null}(a[Lt],a);const E=g[qi];null!==E&&E.detachView(g[Lt]),a[Vn]=null,a[ui]=null,a[En]&=-129}return a}function cl(t,r){if(!(256&r[En])){const s=r[_n];r[rs]&&Tu(r[rs]),r[ho]&&Tu(r[ho]),s.destroyNode&&hf(t,r,s,3,null,null),function fn(t){let r=t[yi];if(!r)return uc(t[Lt],t);for(;r;){let s=null;if(Er(r))s=r[yi];else{const a=r[Hr];a&&(s=a)}if(!s){for(;r&&!r[ui]&&r!==t;)Er(r)&&uc(r[Lt],r),r=r[Vn];null===r&&(r=t),Er(r)&&uc(r[Lt],r),s=r&&r[ui]}r=s}}(r)}}function uc(t,r){if(!(256&r[En])){r[En]&=-129,r[En]|=256,function vh(t,r){let s;if(null!=t&&null!=(s=t.destroyHooks))for(let a=0;a<s.length;a+=2){const l=r[s[a]];if(!(l instanceof Yc)){const g=s[a+1];if(Array.isArray(g))for(let E=0;E<g.length;E+=2){const R=l[g[E]],k=g[E+1];Ri(4,R,k);try{k.call(R)}finally{Ri(5,R,k)}}else{Ri(4,l,g);try{g.call(l)}finally{Ri(5,l,g)}}}}}(t,r),function _h(t,r){const s=t.cleanup,a=r[fr];if(null!==s)for(let g=0;g<s.length-1;g+=2)if("string"==typeof s[g]){const E=s[g+3];E>=0?a[E]():a[-E].unsubscribe(),g+=2}else s[g].call(a[s[g+1]]);null!==a&&(r[fr]=null);const l=r[Fs];if(null!==l){r[Fs]=null;for(let g=0;g<l.length;g++)(0,l[g])()}}(t,r),1===r[Lt].type&&r[_n].destroy();const s=r[er];if(null!==s&&ci(r[Vn])){s!==r[Vn]&&Uu(s,r);const a=r[qi];null!==a&&a.detachView(t)}!function rf(t){la.delete(t[Li])}(r)}}function Hi(t,r,s){return Ld(t,r.parent,s)}function Ld(t,r,s){let a=r;for(;null!==a&&40&a.type;)a=(r=a).parent;if(null===a)return s[hr];{const{componentOffset:l}=a;if(l>-1){const{encapsulation:g}=t.data[a.directiveStart+l];if(g===Xt.None||g===Xt.Emulated)return null}return ms(a,s)}}function cc(t,r,s,a,l){t.insertBefore(r,s,a,l)}function Fc(t,r,s){t.appendChild(r,s)}function pu(t,r,s,a,l){null!==a?cc(t,r,s,a,l):Fc(t,r,s)}function ll(t,r){return t.parentNode(r)}function uf(t,r,s){return Xf(t,r,s)}function cf(t,r,s){return 40&t.type?ms(t,s):null}let Zp,ju,xl,od,Xf=cf;function yh(t,r){Xf=t,Zp=r}function rd(t,r,s,a){const l=Hi(t,a,r),g=r[_n],R=uf(a.parent||r[ei],a,r);if(null!=l)if(Array.isArray(s))for(let k=0;k<s.length;k++)pu(g,l,s[k],R,!1);else pu(g,l,s,R,!1);void 0!==Zp&&Zp(g,a,r,s,l)}function Ih(t,r){if(null!==r){const s=r.type;if(3&s)return ms(r,t);if(4&s)return lf(-1,t[r.index]);if(8&s){const a=r.child;if(null!==a)return Ih(t,a);{const l=t[r.index];return ci(l)?lf(-1,l):$r(l)}}if(32&s)return nd(r,t)()||$r(t[r.index]);{const a=ep(t,r);return null!==a?Array.isArray(a)?a[0]:Ih(ul(t[ti]),a):Ih(t,r.next)}}return null}function ep(t,r){return null!==r?t[ti][ei].projection[r.projection]:null}function lf(t,r){const s=Hr+t+1;if(s<r.length){const a=r[s],l=a[Lt].firstChild;if(null!==l)return Ih(a,l)}return r[Ds]}function tp(t,r,s,a,l,g,E){for(;null!=s;){const R=a[s.index],k=s.type;if(E&&0===r&&(R&&ko($r(R),a),s.flags|=2),32!=(32&s.flags))if(8&k)tp(t,r,s.child,a,l,g,!1),C(r,t,l,R,g);else if(32&k){const $=nd(s,a);let te;for(;te=$();)C(r,t,l,te,g);C(r,t,l,R,g)}else 16&k?vm(t,r,a,s,l,g):C(r,t,l,R,g);s=E?s.projectionNext:s.next}}function hf(t,r,s,a,l,g){tp(s,a,t.firstChild,r,l,g,!1)}function vm(t,r,s,a,l,g){const E=s[ti],k=E[ei].projection[a.projection];if(Array.isArray(k))for(let $=0;$<k.length;$++)C(r,t,l,k[$],g);else{let $=k;const te=E[Vn];Ka(a)&&($.flags|=128),tp(t,r,$,te,l,g,!0)}}function Im(t,r,s){""===s?t.removeAttribute(r,"class"):t.setAttribute(r,"class",s)}function ff(t,r,s){const{mergedAttrs:a,classes:l,styles:g}=s;null!==a&&ha(t,r,a),null!==l&&Im(t,r,l),null!==g&&function ym(t,r,s){t.setAttribute(r,"style",s)}(t,r,g)}function Eh(t){return function pf(){if(void 0===ju&&(ju=null,kn.trustedTypes))try{ju=kn.trustedTypes.createPolicy("angular",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch{}return ju}()?.createHTML(t)||t}function gf(t){xl=t}function Bd(){if(void 0!==xl)return xl;if(typeof document<"u")return document;throw new Le(210,!1)}function Tm(t){return function mf(){if(void 0===od&&(od=null,kn.trustedTypes))try{od=kn.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch{}return od}()?.createScriptURL(t)||t}class rp{constructor(r){this.changingThisBreaksApplicationSecurity=r}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${Ve})`}}function Lc(t){return t instanceof rp?t.changingThisBreaksApplicationSecurity:t}function _f(t,r){const s=function lv(t){return t instanceof rp&&t.getTypeName()||null}(t);if(null!=s&&s!==r){if("ResourceURL"===s&&"URL"===r)return!0;throw new Error(`Required a safe ${r}, got a ${s} (see ${Ve})`)}return s===r}class wm{constructor(r){this.inertDocumentHelper=r}getInertBodyElement(r){r="<body><remove></remove>"+r;try{const s=(new window.DOMParser).parseFromString(Eh(r),"text/html").body;return null===s?this.inertDocumentHelper.getInertBodyElement(r):(s.removeChild(s.firstChild),s)}catch{return null}}}class hv{constructor(r){this.defaultDoc=r,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert")}getInertBodyElement(r){const s=this.inertDocument.createElement("template");return s.innerHTML=Eh(r),s}}const tg=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function op(t){return(t=String(t)).match(tg)?t:"unsafe:"+t}function Vc(t){const r={};for(const s of t.split(","))r[s]=!0;return r}function jd(...t){const r={};for(const s of t)for(const a in s)s.hasOwnProperty(a)&&(r[a]=!0);return r}const ap=Vc("area,br,col,hr,img,wbr"),yf=Vc("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),Dm=Vc("rp,rt"),up=jd(ap,jd(yf,Vc("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),jd(Dm,Vc("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),jd(Dm,yf)),ad=Vc("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),rg=jd(ad,Vc("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),Vc("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext"));var D=function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t}(D||{});function w(t){const r=kt();return r?r.sanitize(D.URL,t)||"":_f(t,"URL")?Lc(t):op(Oe(t))}function j(t){const r=kt();if(r)return Tm(r.sanitize(D.RESOURCE_URL,t)||"");if(_f(t,"ResourceURL"))return Tm(Lc(t));throw new Le(904,!1)}function Xe(t,r,s){return function nt(t,r){return"src"===r&&("embed"===t||"frame"===t||"iframe"===t||"media"===t||"script"===t)||"href"===r&&("base"===t||"link"===t)?j:w}(r,s)(t)}function kt(){const t=Tt();return t&&t[Gr].sanitizer}const Kn=new Yt("ENVIRONMENT_INITIALIZER"),lr=new Yt("INJECTOR",-1),An=new Yt("INJECTOR_DEF_TYPES");class br{get(r,s=Di){if(s===Di){const a=new Error(`NullInjectorError: No provider for ${xe(r)}!`);throw a.name="NullInjectorError",a}return s}}function Pi(...t){return{\u0275providers:_r(0,t),\u0275fromNgModule:!0}}function _r(t,...r){const s=[],a=new Set;let l;const g=E=>{s.push(E)};return du(r,E=>{const R=E;Qr(R,g,[],a)&&(l||=[],l.push(R))}),void 0!==l&&zr(l,g),s}function zr(t,r){for(let s=0;s<t.length;s++){const{ngModule:a,providers:l}=t[s];$i(l,g=>{r(g,a)})}}function Qr(t,r,s,a){if(!(t=ct(t)))return!1;let l=null,g=ot(t);const E=!g&&Gn(t);if(g||E){if(E&&!E.standalone)return!1;l=t}else{const k=t.ngModule;if(g=ot(k),!g)return!1;l=k}const R=a.has(l);if(E){if(R)return!1;if(a.add(l),E.dependencies){const k="function"==typeof E.dependencies?E.dependencies():E.dependencies;for(const $ of k)Qr($,r,s,a)}}else{if(!g)return!1;{if(null!=g.imports&&!R){let $;a.add(l);try{du(g.imports,te=>{Qr(te,r,s,a)&&($||=[],$.push(te))})}finally{}void 0!==$&&zr($,r)}if(!R){const $=Bi(l)||(()=>new l);r({provide:l,useFactory:$,deps:jt},l),r({provide:An,useValue:l,multi:!0},l),r({provide:Kn,useValue:()=>Bt(l),multi:!0},l)}const k=g.providers;if(null!=k&&!R){const $=t;$i(k,te=>{r(te,$)})}}}return l!==t&&void 0!==t.providers}function $i(t,r){for(let s of t)lt(s)&&(s=s.\u0275providers),Array.isArray(s)?$i(s,r):r(s)}const Fo=pe({provide:String,useValue:pe});function Ns(t){return null!==t&&"object"==typeof t&&Fo in t}function Ks(t){return"function"==typeof t}const dl=new Yt("Set Injector scope."),Lo={},lc={};let hl;function gu(){return void 0===hl&&(hl=new br),hl}class mu{}class fl extends mu{get destroyed(){return this._destroyed}constructor(r,s,a,l){super(),this.parent=s,this.source=a,this.scopes=l,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,cp(r,E=>this.processProvider(E)),this.records.set(lr,$u(void 0,this)),l.has("environment")&&this.records.set(mu,$u(void 0,this));const g=this.records.get(dl);null!=g&&"string"==typeof g.value&&this.scopes.add(g.value),this.injectorDefTypes=new Set(this.get(An.multi,jt,Rt.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const s of this._ngOnDestroyHooks)s.ngOnDestroy();const r=this._onDestroyHooks;this._onDestroyHooks=[];for(const s of r)s()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear()}}onDestroy(r){return this.assertNotDestroyed(),this._onDestroyHooks.push(r),()=>this.removeOnDestroy(r)}runInContext(r){this.assertNotDestroyed();const s=ht(this),a=Wt(void 0);try{return r()}finally{ht(s),Wt(a)}}get(r,s=Di,a=Rt.Default){if(this.assertNotDestroyed(),r.hasOwnProperty(Ma))return r[Ma](this);a=un(a);const g=ht(this),E=Wt(void 0);try{if(!(a&Rt.SkipSelf)){let k=this.records.get(r);if(void 0===k){const $=function Tf(t){return"function"==typeof t||"object"==typeof t&&t instanceof Yt}(r)&&Rn(r);k=$&&this.injectableDefInScope($)?$u(pl(r),Lo):null,this.records.set(r,k)}if(null!=k)return this.hydrate(r,k)}return(a&Rt.Self?gu():this.parent).get(r,s=a&Rt.Optional&&s===Di?null:s)}catch(R){if("NullInjectorError"===R.name){if((R[Ci]=R[Ci]||[]).unshift(xe(r)),g)throw R;return function Ys(t,r,s,a){const l=t[Ci];throw r[ne]&&l.unshift(r[ne]),t.message=function rt(t,r,s,a=null){t=t&&"\n"===t.charAt(0)&&"\u0275"==t.charAt(1)?t.slice(2):t;let l=xe(r);if(Array.isArray(r))l=r.map(xe).join(" -> ");else if("object"==typeof r){let g=[];for(let E in r)if(r.hasOwnProperty(E)){let R=r[E];g.push(E+":"+("string"==typeof R?JSON.stringify(R):xe(R)))}l=`{${g.join(", ")}}`}return`${s}${a?"("+a+")":""}[${l}]: ${t.replace(ie,"\n  ")}`}("\n"+t.message,l,s,a),t.ngTokenPath=l,t[Ci]=null,t}(R,r,"R3InjectorError",this.source)}throw R}finally{Wt(E),ht(g)}}resolveInjectorInitializers(){const r=ht(this),s=Wt(void 0);try{const l=this.get(Kn.multi,jt,Rt.Self);for(const g of l)g()}finally{ht(r),Wt(s)}}toString(){const r=[],s=this.records;for(const a of s.keys())r.push(xe(a));return`R3Injector[${r.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Le(205,!1)}processProvider(r){let s=Ks(r=ct(r))?r:ct(r&&r.provide);const a=function Bc(t){return Ns(t)?$u(void 0,t.useValue):$u(Hu(t),Lo)}(r);if(Ks(r)||!0!==r.multi)this.records.get(s);else{let l=this.records.get(s);l||(l=$u(void 0,Lo,!0),l.factory=()=>Dr(l.multi),this.records.set(s,l)),s=r,l.multi.push(r)}this.records.set(s,a)}hydrate(r,s){return s.value===Lo&&(s.value=lc,s.value=s.factory()),"object"==typeof s.value&&s.value&&function cd(t){return null!==t&&"object"==typeof t&&"function"==typeof t.ngOnDestroy}(s.value)&&this._ngOnDestroyHooks.add(s.value),s.value}injectableDefInScope(r){if(!r.providedIn)return!1;const s=ct(r.providedIn);return"string"==typeof s?"any"===s||this.scopes.has(s):this.injectorDefTypes.has(s)}removeOnDestroy(r){const s=this._onDestroyHooks.indexOf(r);-1!==s&&this._onDestroyHooks.splice(s,1)}}function pl(t){const r=Rn(t),s=null!==r?r.factory:Bi(t);if(null!==s)return s;if(t instanceof Yt)throw new Le(204,!1);if(t instanceof Function)return function Gd(t){const r=t.length;if(r>0)throw Mr(r,"?"),new Le(204,!1);const s=function je(t){return t&&(t[ft]||t[Nn])||null}(t);return null!==s?()=>s.factory(t):()=>new t}(t);throw new Le(204,!1)}function Hu(t,r,s){let a;if(Ks(t)){const l=ct(t);return Bi(l)||pl(l)}if(Ns(t))a=()=>ct(t.useValue);else if(function Gu(t){return!(!t||!t.useFactory)}(t))a=()=>t.useFactory(...Dr(t.deps||[]));else if(function Jr(t){return!(!t||!t.useExisting)}(t))a=()=>Bt(ct(t.useExisting));else{const l=ct(t&&(t.useClass||t.provide));if(!function Hd(t){return!!t.deps}(t))return Bi(l)||pl(l);a=()=>new l(...Dr(t.deps))}return a}function $u(t,r,s=!1){return{factory:t,value:r,multi:s?[]:void 0}}function cp(t,r){for(const s of t)Array.isArray(s)?cp(s,r):s&&lt(s)?cp(s.\u0275providers,r):r(s)}const Sh=new Yt("AppId",{providedIn:"root",factory:()=>ig}),ig="ng",Rh=new Yt("Platform Initializer"),lp=new Yt("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),dp=new Yt("CSP nonce",{providedIn:"root",factory:()=>Bd().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});let ag=(t,r,s)=>null;function ug(t,r,s=!1){return ag(t,r,s)}class t0{}class pv{}class r0{resolveComponentFactory(r){throw function n0(t){const r=Error(`No component factory found for ${xe(t)}.`);return r.ngComponent=t,r}(r)}}let hg=(()=>{class t{static#e=this.NULL=new r0}return t})();function mp(){return qd(Ui(),Tt())}function qd(t,r){return new Bl(ms(t,r))}let Bl=(()=>{class t{constructor(s){this.nativeElement=s}static#e=this.__NG_ELEMENT_ID__=mp}return t})();function km(t){return t instanceof Bl?t.nativeElement:t}class _p{}let vp=(()=>{class t{constructor(){this.destroyNode=null}static#e=this.__NG_ELEMENT_ID__=()=>function Fm(){const t=Tt(),s=Lr(Ui().index,t);return(Er(s)?s:t)[_n]}()}return t})(),_v=(()=>{class t{static#e=this.\u0275prov=on({token:t,providedIn:"root",factory:()=>null})}return t})();class fg{constructor(r){this.full=r,this.major=r.split(".")[0],this.minor=r.split(".")[1],this.patch=r.split(".").slice(2).join(".")}}const pg=new fg("16.2.11"),Ul={};function gg(t){if(!hn()&&!function Re(){return ae}())throw new Le(-203,!1)}function _g(t,r=null,s=null,a){const l=Iv(t,r,s,a);return l.resolveInjectorInitializers(),l}function Iv(t,r=null,s=null,a,l=new Set){const g=[s||jt,Pi(t)];return a=a||("object"==typeof t?void 0:xe(t)),new fl(g,r||gu(),a||null,l)}let ml=(()=>{class t{static#e=this.THROW_IF_NOT_FOUND=Di;static#t=this.NULL=new br;static create(s,a){if(Array.isArray(s))return _g({name:""},a,s,"");{const l=s.name??"";return _g({name:l},s.parent,s.providers,l)}}static#n=this.\u0275prov=on({token:t,providedIn:"any",factory:()=>Bt(lr)});static#r=this.__NG_ELEMENT_ID__=-1}return t})();function jm(t){return t.ngOriginalError}class jl{constructor(){this._console=console}handleError(r){const s=this._findOriginalError(r);this._console.error("ERROR",r),s&&this._console.error("ORIGINAL ERROR",s)}_findOriginalError(r){let s=r&&jm(r);for(;s&&jm(s);)s=jm(s);return s||null}}let Ep=(()=>{class t{static#e=this.__NG_ELEMENT_ID__=u0;static#t=this.__NG_ENV_ID__=s=>s}return t})();class Gm extends Ep{constructor(r){super(),this._lView=r}onDestroy(r){return tn(this._lView,r),()=>function mn(t,r){if(null===t[Fs])return;const s=t[Fs].indexOf(r);-1!==s&&t[Fs].splice(s,1)}(this._lView,r)}}function u0(){return new Gm(Tt())}function $m(t){return r=>{setTimeout(t,void 0,r)}}const Uc=class Hm extends y.x{constructor(r=!1){super(),this.__isAsync=r}emit(r){super.next(r)}subscribe(r,s,a){let l=r,g=s||(()=>null),E=a;if(r&&"object"==typeof r){const k=r;l=k.next?.bind(k),g=k.error?.bind(k),E=k.complete?.bind(k)}this.__isAsync&&(g=$m(g),l&&(l=$m(l)),E&&(E=$m(E)));const R=super.subscribe({next:l,error:g,complete:E});return r instanceof fe.w0&&r.add(R),R}};function zm(...t){}class Vo{constructor({enableLongStackTrace:r=!1,shouldCoalesceEventChangeDetection:s=!1,shouldCoalesceRunChangeDetection:a=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Uc(!1),this.onMicrotaskEmpty=new Uc(!1),this.onStable=new Uc(!1),this.onError=new Uc(!1),typeof Zone>"u")throw new Le(908,!1);Zone.assertZonePatched();const l=this;l._nesting=0,l._outer=l._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(l._inner=l._inner.fork(new Zone.TaskTrackingZoneSpec)),r&&Zone.longStackTraceZoneSpec&&(l._inner=l._inner.fork(Zone.longStackTraceZoneSpec)),l.shouldCoalesceEventChangeDetection=!a&&s,l.shouldCoalesceRunChangeDetection=a,l.lastRequestAnimationFrameId=-1,l.nativeRequestAnimationFrame=function Wm(){const t="function"==typeof kn.requestAnimationFrame;let r=kn[t?"requestAnimationFrame":"setTimeout"],s=kn[t?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&r&&s){const a=r[Zone.__symbol__("OriginalDelegate")];a&&(r=a);const l=s[Zone.__symbol__("OriginalDelegate")];l&&(s=l)}return{nativeRequestAnimationFrame:r,nativeCancelAnimationFrame:s}}().nativeRequestAnimationFrame,function Sf(t){const r=()=>{!function qm(t){t.isCheckStableRunning||-1!==t.lastRequestAnimationFrameId||(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(kn,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,Kd(t),t.isCheckStableRunning=!0,Gl(t),t.isCheckStableRunning=!1},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),Kd(t))}(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(s,a,l,g,E,R)=>{if(function Ym(t){return!(!Array.isArray(t)||1!==t.length)&&!0===t[0].data?.__ignore_ng_zone__}(R))return s.invokeTask(l,g,E,R);try{return Km(t),s.invokeTask(l,g,E,R)}finally{(t.shouldCoalesceEventChangeDetection&&"eventTask"===g.type||t.shouldCoalesceRunChangeDetection)&&r(),Fh(t)}},onInvoke:(s,a,l,g,E,R,k)=>{try{return Km(t),s.invoke(l,g,E,R,k)}finally{t.shouldCoalesceRunChangeDetection&&r(),Fh(t)}},onHasTask:(s,a,l,g)=>{s.hasTask(l,g),a===l&&("microTask"==g.change?(t._hasPendingMicrotasks=g.microTask,Kd(t),Gl(t)):"macroTask"==g.change&&(t.hasPendingMacrotasks=g.macroTask))},onHandleError:(s,a,l,g)=>(s.handleError(l,g),t.runOutsideAngular(()=>t.onError.emit(g)),!1)})}(l)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Vo.isInAngularZone())throw new Le(909,!1)}static assertNotInAngularZone(){if(Vo.isInAngularZone())throw new Le(909,!1)}run(r,s,a){return this._inner.run(r,s,a)}runTask(r,s,a,l){const g=this._inner,E=g.scheduleEventTask("NgZoneEvent: "+l,r,Af,zm,zm);try{return g.runTask(E,s,a)}finally{g.cancelTask(E)}}runGuarded(r,s,a){return this._inner.runGuarded(r,s,a)}runOutsideAngular(r){return this._outer.run(r)}}const Af={};function Gl(t){if(0==t._nesting&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function Kd(t){t.hasPendingMicrotasks=!!(t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&-1!==t.lastRequestAnimationFrameId)}function Km(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function Fh(t){t._nesting--,Gl(t)}class c0{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Uc,this.onMicrotaskEmpty=new Uc,this.onStable=new Uc,this.onError=new Uc}run(r,s,a){return r.apply(s,a)}runGuarded(r,s,a){return r.apply(s,a)}runOutsideAngular(r){return r()}runTask(r,s,a,l){return r.apply(s,a)}}const Tv=new Yt("",{providedIn:"root",factory:vg});function vg(){const t=Qt(Vo);let r=!0;const s=new oe.y(l=>{r=t.isStable&&!t.hasPendingMacrotasks&&!t.hasPendingMicrotasks,t.runOutsideAngular(()=>{l.next(r),l.complete()})}),a=new oe.y(l=>{let g;t.runOutsideAngular(()=>{g=t.onStable.subscribe(()=>{Vo.assertNotInAngularZone(),queueMicrotask(()=>{!r&&!t.hasPendingMacrotasks&&!t.hasPendingMicrotasks&&(r=!0,l.next(!0))})})});const E=t.onUnstable.subscribe(()=>{Vo.assertInAngularZone(),r&&(r=!1,t.runOutsideAngular(()=>{l.next(!1)}))});return()=>{g.unsubscribe(),E.unsubscribe()}});return(0,Ce.T)(s,a.pipe((0,Ne.B)()))}function yg(t){return t.ownerDocument}function _l(t){return t instanceof Function?t():t}let Ig=(()=>{class t{constructor(){this.renderDepth=0,this.handler=null}begin(){this.handler?.validateBegin(),this.renderDepth++}end(){this.renderDepth--,0===this.renderDepth&&this.handler?.execute()}ngOnDestroy(){this.handler?.destroy(),this.handler=null}static#e=this.\u0275prov=on({token:t,providedIn:"root",factory:()=>new t})}return t})();function Nf(t){for(;t;){t[En]|=64;const r=ul(t);if(eu(t)&&!r)return t;t=r}return null}const Av=new Yt("",{providedIn:"root",factory:()=>!1});let bg=null;function wg(t,r){return t[r]??Dg()}function Rv(t,r){const s=Dg();s.producerNode?.length&&(t[r]=bg,s.lView=t,bg=Nv())}const n_={...sa,consumerIsAlwaysLive:!0,consumerMarkedDirty:t=>{Nf(t.lView)},lView:null};function Nv(){return Object.create(n_)}function Dg(){return bg??=Nv(),bg}const pr={};function Cg(t){Ag(ir(),Tt(),bn()+t,!1)}function Ag(t,r,s,a){if(!a)if(3==(3&r[En])){const g=t.preOrderCheckHooks;null!==g&&su(r,g,s)}else{const g=t.preOrderHooks;null!==g&&Ga(r,g,0,s)}As(s)}function Zd(t,r=Rt.Default){const s=Tt();return null===s?Bt(t,r):vs(Ui(),s,ct(t),r)}function Lh(){throw new Error("invalid")}function Of(t,r,s,a,l,g,E,R,k,$,te){const he=r.blueprint.slice();return he[hr]=l,he[En]=140|a,(null!==$||t&&2048&t[En])&&(he[En]|=2048),yt(he),he[Vn]=he[bs]=t,he[yr]=s,he[Gr]=E||t&&t[Gr],he[_n]=R||t&&t[_n],he[vi]=k||t&&t[vi]||null,he[ei]=g,he[Li]=function Pd(){return Oi++}(),he[fs]=te,he[ws]=$,he[ti]=2==r.type?t[ti]:he,he}function Pf(t,r,s,a,l){let g=t.data[r];if(null===g)g=bp(t,r,s,a,l),function uh(){return Un.lFrame.inI18n}()&&(g.flags|=32);else if(64&g.type){g.type=s,g.value=a,g.attrs=l;const E=Ar();g.injectorIndex=null===E?-1:E.injectorIndex}return sn(g,!0),g}function bp(t,r,s,a,l){const g=wl(),E=no(),k=t.data[r]=function a_(t,r,s,a,l,g){let E=r?r.injectorIndex:-1,R=0;return Cu()&&(R|=128),{type:s,index:a,insertBeforeIndex:null,injectorIndex:E,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:R,providerIndexes:0,value:l,attrs:g,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:r,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,E?g:g&&g.parent,s,r,a,l);return null===t.firstChild&&(t.firstChild=k),null!==g&&(E?null==g.child&&null!==k.parent&&(g.child=k):null===g.next&&(g.next=k,k.prev=g)),k}function hc(t,r,s,a){if(0===s)return-1;const l=r.length;for(let g=0;g<s;g++)r.push(a),t.blueprint.push(a),t.data.push(null);return l}function Sg(t,r,s,a,l){const g=wg(r,rs),E=bn(),R=2&a;try{As(-1),R&&r.length>Bn&&Ag(t,r,Bn,!1),Ri(R?2:0,l);const $=R?g:null,te=Mo($);try{null!==$&&($.dirty=!1),s(a,l)}finally{Eu($,te)}}finally{R&&null===r[rs]&&Rv(r,rs),As(E),Ri(R?3:1,l)}}function r_(t,r,s){if(Xs(r)){const a=Qi(null);try{const g=r.directiveEnd;for(let E=r.directiveStart;E<g;E++){const R=t.data[E];R.contentQueries&&R.contentQueries(1,s[E],E)}}finally{Qi(a)}}}function wp(t,r,s){_d()&&(function Fv(t,r,s,a){const l=s.directiveStart,g=s.directiveEnd;gs(s)&&function g_(t,r,s){const a=ms(r,t),l=Pv(s);let E=16;s.signals?E=4096:s.onPush&&(E=64);const R=Sp(t,Of(t,l,null,E,a,r,null,t[Gr].rendererFactory.createRenderer(a,s),null,null,null));t[r.index]=R}(r,s,t.data[l+s.componentOffset]),t.firstCreatePass||Zo(s,r),ko(a,r);const E=s.initialInputs;for(let R=l;R<g;R++){const k=t.data[R],$=ji(r,t,R,s);ko($,r),null!==E&&Vv(0,R-l,$,k,0,E),Cs(k)&&(Lr(s.index,r)[yr]=ji(r,t,R,s))}}(t,r,s,ms(s,r)),64==(64&s.flags)&&Vh(t,r,s))}function i_(t,r,s=ms){const a=r.localNames;if(null!==a){let l=r.index+1;for(let g=0;g<a.length;g+=2){const E=a[g+1],R=-1===E?s(r,t):t[E];t[l++]=R}}}function Pv(t){const r=t.tView;return null===r||r.incompleteFirstPass?t.tView=Dp(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts,t.id):r}function Dp(t,r,s,a,l,g,E,R,k,$,te){const he=Bn+a,ke=he+l,qe=function p0(t,r){const s=[];for(let a=0;a<r;a++)s.push(a<t?null:pr);return s}(he,ke),gt="function"==typeof $?$():$;return qe[Lt]={type:t,blueprint:qe,template:s,queries:null,viewQuery:R,declTNode:r,data:qe.slice().fill(null,he),bindingStartIndex:he,expandoStartIndex:ke,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof g?g():g,pipeRegistry:"function"==typeof E?E():E,firstChild:null,schemas:k,consts:gt,incompleteFirstPass:!1,ssrId:te}}let Rg=t=>null;function u_(t,r,s,a){for(let l in t)if(t.hasOwnProperty(l)){s=null===s?{}:s;const g=t[l];null===a?xv(s,r,l,g):a.hasOwnProperty(l)&&xv(s,r,a[l],g)}return s}function xv(t,r,s,a){t.hasOwnProperty(s)?t[s].push(r,a):t[s]=[r,a]}function fc(t,r,s,a,l,g,E,R){const k=ms(r,s);let te,$=r.inputs;!R&&null!=$&&(te=$[a])?(v_(t,s,te,a,l),gs(r)&&function l_(t,r){const s=Lr(r,t);16&s[En]||(s[En]|=64)}(s,r.index)):3&r.type&&(a=function c_(t){return"class"===t?"className":"for"===t?"htmlFor":"formaction"===t?"formAction":"innerHtml"===t?"innerHTML":"readonly"===t?"readOnly":"tabindex"===t?"tabIndex":t}(a),l=null!=E?E(l,r.value||"",a):l,g.setProperty(k,a,l))}function h_(t,r,s,a){if(_d()){const l=null===a?null:{"":-1},g=function Ng(t,r){const s=t.directiveRegistry;let a=null,l=null;if(s)for(let g=0;g<s.length;g++){const E=s[g];if(jr(r,E.selectors,!1))if(a||(a=[]),Cs(E))if(null!==E.findHostDirectiveDefs){const R=[];l=l||new Map,E.findHostDirectiveDefs(E,R,l),a.unshift(...R,E),p_(t,r,R.length)}else a.unshift(E),p_(t,r,0);else l=l||new Map,E.findHostDirectiveDefs?.(E,a,l),a.push(E)}return null===a?null:[a,l]}(t,s);let E,R;null===g?E=R=null:[E,R]=g,null!==E&&Mf(t,r,s,E,l,R),l&&function y0(t,r,s){if(r){const a=t.localNames=[];for(let l=0;l<r.length;l+=2){const g=s[r[l+1]];if(null==g)throw new Le(-301,!1);a.push(r[l],g)}}}(s,a,l)}s.mergedAttrs=Hs(s.mergedAttrs,s.attrs)}function Mf(t,r,s,a,l,g){for(let $=0;$<a.length;$++)Dc(Zo(s,r),t,a[$].type);!function E0(t,r,s){t.flags|=1,t.directiveStart=r,t.directiveEnd=r+s,t.providerIndexes=r}(s,t.data.length,a.length);for(let $=0;$<a.length;$++){const te=a[$];te.providersResolver&&te.providersResolver(te)}let E=!1,R=!1,k=hc(t,r,a.length,null);for(let $=0;$<a.length;$++){const te=a[$];s.mergedAttrs=Hs(s.mergedAttrs,te.hostAttrs),Og(t,s,r,k,te),I0(k,te,l),null!==te.contentQueries&&(s.flags|=4),(null!==te.hostBindings||null!==te.hostAttrs||0!==te.hostVars)&&(s.flags|=64);const he=te.type.prototype;!E&&(he.ngOnChanges||he.ngOnInit||he.ngDoCheck)&&((t.preOrderHooks??=[]).push(s.index),E=!0),!R&&(he.ngOnChanges||he.ngDoCheck)&&((t.preOrderCheckHooks??=[]).push(s.index),R=!0),k++}!function _0(t,r,s){const l=r.directiveEnd,g=t.data,E=r.attrs,R=[];let k=null,$=null;for(let te=r.directiveStart;te<l;te++){const he=g[te],ke=s?s.get(he):null,gt=ke?ke.outputs:null;k=u_(he.inputs,te,k,ke?ke.inputs:null),$=u_(he.outputs,te,$,gt);const Ot=null===k||null===E||vu(r)?null:m_(k,te,E);R.push(Ot)}null!==k&&(k.hasOwnProperty("class")&&(r.flags|=8),k.hasOwnProperty("style")&&(r.flags|=16)),r.initialInputs=R,r.inputs=k,r.outputs=$}(t,s,g)}function Vh(t,r,s){const a=s.directiveStart,l=s.directiveEnd,g=s.index,E=function Id(){return Un.lFrame.currentDirectiveIndex}();try{As(g);for(let R=a;R<l;R++){const k=t.data[R],$=r[R];ro(R),(null!==k.hostBindings||0!==k.hostVars||null!==k.hostAttrs)&&Lv(k,$)}}finally{As(-1),ro(E)}}function Lv(t,r){null!==t.hostBindings&&t.hostBindings(1,r)}function p_(t,r,s){r.componentOffset=s,(t.components??=[]).push(r.index)}function I0(t,r,s){if(s){if(r.exportAs)for(let a=0;a<r.exportAs.length;a++)s[r.exportAs[a]]=t;Cs(r)&&(s[""]=t)}}function Og(t,r,s,a,l){t.data[a]=l;const g=l.factory||(l.factory=Bi(l.type)),E=new Yc(g,Cs(l),Zd);t.blueprint[a]=E,s[a]=E,function v0(t,r,s,a,l){const g=l.hostBindings;if(g){let E=t.hostBindingOpCodes;null===E&&(E=t.hostBindingOpCodes=[]);const R=~r.index;(function f_(t){let r=t.length;for(;r>0;){const s=t[--r];if("number"==typeof s&&s<0)return s}return 0})(E)!=R&&E.push(R),E.push(s,a,g)}}(t,r,a,hc(t,s,l.hostVars,pr),l)}function jc(t,r,s,a,l,g){const E=ms(t,r);!function Cp(t,r,s,a,l,g,E){if(null==g)t.removeAttribute(r,l,s);else{const R=null==E?Oe(g):E(g,a||"",l);t.setAttribute(r,l,R,s)}}(r[_n],E,g,t.value,s,a,l)}function Vv(t,r,s,a,l,g){const E=g[r];if(null!==E)for(let R=0;R<E.length;)Pg(a,s,E[R++],E[R++],E[R++])}function Pg(t,r,s,a,l){const g=Qi(null);try{const E=t.inputTransforms;null!==E&&E.hasOwnProperty(a)&&(l=E[a].call(r,l)),null!==t.setInput?t.setInput(r,l,s,a):r[a]=l}finally{Qi(g)}}function m_(t,r,s){let a=null,l=0;for(;l<s.length;){const g=s[l];if(0!==g)if(5!==g){if("number"==typeof g)break;if(t.hasOwnProperty(g)){null===a&&(a=[]);const E=t[g];for(let R=0;R<E.length;R+=2)if(E[R]===r){a.push(g,E[R+1],s[l+1]);break}}l+=2}else l+=2;else l+=4}return a}function Ap(t,r,s,a){return[t,!0,!1,r,null,0,a,s,null,null,null]}function Mg(t,r){const s=t.contentQueries;if(null!==s)for(let a=0;a<s.length;a+=2){const g=s[a+1];if(-1!==g){const E=t.data[g];M(s[a]),E.contentQueries(2,r[g],g)}}}function Sp(t,r){return t[yi]?t[Ts][ui]=r:t[yi]=r,t[Ts]=r,r}function Qd(t,r,s){M(0);const a=Qi(null);try{r(t,s)}finally{Qi(a)}}function xg(t){return t[fr]||(t[fr]=[])}function __(t){return t.cleanup||(t.cleanup=[])}function kg(t,r){const s=t[vi],a=s?s.get(jl,null):null;a&&a.handleError(r)}function v_(t,r,s,a,l){for(let g=0;g<s.length;){const E=s[g++],R=s[g++];Pg(t.data[E],r[E],a,R,l)}}function ld(t,r,s){const a=Ku(r,t);!function X(t,r,s){t.setValue(r,s)}(t[_n],a,s)}function b0(t,r){const s=Lr(r,t),a=s[Lt];!function Bv(t,r){for(let s=r.length;s<t.blueprint.length;s++)r.push(t.blueprint[s])}(a,s);const l=s[hr];null!==l&&null===s[fs]&&(s[fs]=ug(l,s[vi])),y_(a,s,s[yr])}function y_(t,r,s){L(r);try{const a=t.viewQuery;null!==a&&Qd(1,a,s);const l=t.template;null!==l&&Sg(t,r,l,1,s),t.firstCreatePass&&(t.firstCreatePass=!1),t.staticContentQueries&&Mg(t,r),t.staticViewQueries&&Qd(2,t.viewQuery,s);const g=t.components;null!==g&&function Uv(t,r){for(let s=0;s<r.length;s++)b0(t,r[s])}(r,g)}catch(a){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),a}finally{r[En]&=-5,Vt()}}let jv=(()=>{class t{constructor(){this.all=new Set,this.queue=new Map}create(s,a,l){const g=typeof Zone>"u"?null:Zone.current,E=function ut(t,r,s){const a=Object.create(Yn);s&&(a.consumerAllowSignalWrites=!0),a.fn=t,a.schedule=r;const l=E=>{a.cleanupFn=E};return a.ref={notify:()=>vc(a),run:()=>{if(a.dirty=!1,a.hasRun&&!La(a))return;a.hasRun=!0;const E=Mo(a);try{a.cleanupFn(),a.cleanupFn=an,a.fn(l)}finally{Eu(a,E)}},cleanup:()=>a.cleanupFn()},a.ref}(s,$=>{this.all.has($)&&this.queue.set($,g)},l);let R;this.all.add(E),E.notify();const k=()=>{E.cleanup(),R?.(),this.all.delete(E),this.queue.delete(E)};return R=a?.onDestroy(k),{destroy:k}}flush(){if(0!==this.queue.size)for(const[s,a]of this.queue)this.queue.delete(s),a?a.run(()=>s.run()):s.run()}get isQueueEmpty(){return 0===this.queue.size}static#e=this.\u0275prov=on({token:t,providedIn:"root",factory:()=>new t})}return t})();function Fg(t,r,s){let a=s?t.styles:null,l=s?t.classes:null,g=0;if(null!==r)for(let E=0;E<r.length;E++){const R=r[E];"number"==typeof R?g=R:1==g?l=dt(l,R):2==g&&(a=dt(a,R+": "+r[++E]+";"))}s?t.styles=a:t.stylesWithoutHost=a,s?t.classes=l:t.classesWithoutHost=l}function Rp(t,r,s,a,l=!1){for(;null!==s;){const g=r[s.index];null!==g&&a.push($r(g)),ci(g)&&Gv(g,a);const E=s.type;if(8&E)Rp(t,r,s.child,a);else if(32&E){const R=nd(s,r);let k;for(;k=R();)a.push(k)}else if(16&E){const R=ep(r,s);if(Array.isArray(R))a.push(...R);else{const k=ul(r[ti]);Rp(k[Lt],k,R,a,!0)}}s=l?s.projectionNext:s.next}return a}function Gv(t,r){for(let s=Hr;s<t.length;s++){const a=t[s],l=a[Lt].firstChild;null!==l&&Rp(a[Lt],a,l,r)}t[Ds]!==t[hr]&&r.push(t[Ds])}function Lg(t,r,s,a=!0){const l=r[Gr],g=l.rendererFactory,E=l.afterRenderEventManager;g.begin?.(),E?.begin();try{Vg(t,r,t.template,s)}catch(k){throw a&&kg(r,k),k}finally{g.end?.(),l.effectManager?.flush(),E?.end()}}function Vg(t,r,s,a){const l=r[En];if(256!=(256&l)){r[Gr].effectManager?.flush(),L(r);try{yt(r),function Yo(t){return Un.lFrame.bindingIndex=t}(t.bindingStartIndex),null!==s&&Sg(t,r,s,2,a);const E=3==(3&l);if(E){const $=t.preOrderCheckHooks;null!==$&&su(r,$,null)}else{const $=t.preOrderHooks;null!==$&&Ga(r,$,0,null),Tc(r,0)}if(function $v(t){for(let r=b(t);null!==r;r=f(r)){if(!r[ps])continue;const s=r[Js];for(let a=0;a<s.length;a++){Ti(s[a])}}}(r),I_(r,2),null!==t.contentQueries&&Mg(t,r),E){const $=t.contentCheckHooks;null!==$&&su(r,$)}else{const $=t.contentHooks;null!==$&&Ga(r,$,1),Tc(r,1)}!function Ov(t,r){const s=t.hostBindingOpCodes;if(null===s)return;const a=wg(r,ho);try{for(let l=0;l<s.length;l++){const g=s[l];if(g<0)As(~g);else{const E=g,R=s[++l],k=s[++l];Yu(R,E),a.dirty=!1;const $=Mo(a);try{k(2,r[E])}finally{Eu(a,$)}}}}finally{null===r[ho]&&Rv(r,ho),As(-1)}}(t,r);const R=t.components;null!==R&&Vr(r,R,0);const k=t.viewQuery;if(null!==k&&Qd(2,k,a),E){const $=t.viewCheckHooks;null!==$&&su(r,$)}else{const $=t.viewHooks;null!==$&&Ga(r,$,2),Tc(r,2)}!0===t.firstUpdatePass&&(t.firstUpdatePass=!1),r[En]&=-73,vo(r)}finally{Vt()}}}function I_(t,r){for(let s=b(t);null!==s;s=f(s))for(let a=Hr;a<s.length;a++)Np(s[a],r)}function zv(t,r,s){Np(Lr(r,t),s)}function Np(t,r){if(!function Ia(t){return 128==(128&t[En])}(t))return;const s=t[Lt],a=t[En];if(80&a&&0===r||1024&a||2===r)Vg(s,t,s.template,t[yr]);else if(t[Wi]>0){I_(t,1);const l=s.components;null!==l&&Vr(t,l,1)}}function Vr(t,r,s){for(let a=0;a<r.length;a++)zv(t,r[a],s)}class xf{get rootNodes(){const r=this._lView,s=r[Lt];return Rp(s,r,s.firstChild,[])}constructor(r,s){this._lView=r,this._cdRefInjectingView=s,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[yr]}set context(r){this._lView[yr]=r}get destroyed(){return 256==(256&this._lView[En])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const r=this._lView[Vn];if(ci(r)){const s=r[8],a=s?s.indexOf(this):-1;a>-1&&(kc(r,a),cr(s,a))}this._attachedToViewContainer=!1}cl(this._lView[Lt],this._lView)}onDestroy(r){tn(this._lView,r)}markForCheck(){Nf(this._cdRefInjectingView||this._lView)}detach(){this._lView[En]&=-129}reattach(){this._lView[En]|=128}detectChanges(){Lg(this._lView[Lt],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new Le(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function pn(t,r){hf(t,r,r[_n],2,null,null)}(this._lView[Lt],this._lView)}attachToAppRef(r){if(this._attachedToViewContainer)throw new Le(902,!1);this._appRef=r}}class Wv extends xf{constructor(r){super(r),this._view=r}detectChanges(){const r=this._view;Lg(r[Lt],r,r[yr],!1)}checkNoChanges(){}get context(){return null}}class kf extends hg{constructor(r){super(),this.ngModule=r}resolveComponentFactory(r){const s=Gn(r);return new zu(s,this.ngModule)}}function E_(t){const r=[];for(let s in t)t.hasOwnProperty(s)&&r.push({propName:t[s],templateName:s});return r}class Os{constructor(r,s){this.injector=r,this.parentInjector=s}get(r,s,a){a=un(a);const l=this.injector.get(r,Ul,a);return l!==Ul||s===Ul?l:this.parentInjector.get(r,s,a)}}class zu extends pv{get inputs(){const r=this.componentDef,s=r.inputTransforms,a=E_(r.inputs);if(null!==s)for(const l of a)s.hasOwnProperty(l.propName)&&(l.transform=s[l.propName]);return a}get outputs(){return E_(this.componentDef.outputs)}constructor(r,s){super(),this.componentDef=r,this.ngModule=s,this.componentType=r.type,this.selector=function mi(t){return t.map(yu).join(",")}(r.selectors),this.ngContentSelectors=r.ngContentSelectors?r.ngContentSelectors:[],this.isBoundToModule=!!s}create(r,s,a,l){let g=(l=l||this.ngModule)instanceof mu?l:l?.injector;g&&null!==this.componentDef.getStandaloneInjector&&(g=this.componentDef.getStandaloneInjector(g)||g);const E=g?new Os(r,g):r,R=E.get(_p,null);if(null===R)throw new Le(407,!1);const he={rendererFactory:R,sanitizer:E.get(_v,null),effectManager:E.get(jv,null),afterRenderEventManager:E.get(Ig,null)},ke=R.createRenderer(null,this.componentDef),qe=this.componentDef.selectors[0][0]||"div",gt=a?function s_(t,r,s,a){const g=a.get(Av,!1)||s===Xt.ShadowDom,E=t.selectRootElement(r,g);return function g0(t){Rg(t)}(E),E}(ke,a,this.componentDef.encapsulation,E):Ge(ke,qe,function Na(t){const r=t.toLowerCase();return"svg"===r?"svg":"math"===r?"math":null}(qe)),Pn=this.componentDef.signals?4608:this.componentDef.onPush?576:528;let Dt=null;null!==gt&&(Dt=ug(gt,E,!0));const dr=Dp(0,null,null,1,0,null,null,null,null,null,null),Br=Of(null,dr,null,Pn,null,null,he,ke,E,null,Dt);let ds,zc;L(Br);try{const qh=this.componentDef;let mm,$I=null;qh.findHostDirectiveDefs?(mm=[],$I=new Map,qh.findHostDirectiveDefs(qh,mm,$I),mm.push(qh)):mm=[qh];const KC=function C0(t,r){const s=t[Lt],a=Bn;return t[a]=r,Pf(s,a,2,"#host",null)}(Br,gt),YC=function Bg(t,r,s,a,l,g,E){const R=l[Lt];!function Kv(t,r,s,a){for(const l of t)r.mergedAttrs=Hs(r.mergedAttrs,l.hostAttrs);null!==r.mergedAttrs&&(Fg(r,r.mergedAttrs,!0),null!==s&&ff(a,s,r))}(a,t,r,E);let k=null;null!==r&&(k=ug(r,l[vi]));const $=g.rendererFactory.createRenderer(r,s);let te=16;s.signals?te=4096:s.onPush&&(te=64);const he=Of(l,Pv(s),null,te,l[t.index],t,g,$,null,null,k);return R.firstCreatePass&&p_(R,t,a.length-1),Sp(l,he),l[t.index]=he}(KC,gt,qh,mm,Br,he,ke);zc=Ko(dr,Bn),gt&&function A0(t,r,s,a){if(a)ha(t,s,["ng-version",pg.full]);else{const{attrs:l,classes:g}=function Ja(t){const r=[],s=[];let a=1,l=2;for(;a<t.length;){let g=t[a];if("string"==typeof g)2===l?""!==g&&r.push(g,t[++a]):8===l&&s.push(g);else{if(!ar(l))break;l=g}a++}return{attrs:r,classes:s}}(r.selectors[0]);l&&ha(t,s,l),g&&g.length>0&&Im(t,s,g.join(" "))}}(ke,qh,gt,a),void 0!==s&&function b_(t,r,s){const a=t.projection=[];for(let l=0;l<r.length;l++){const g=s[l];a.push(null!=g?Array.from(g):null)}}(zc,this.ngContentSelectors,s),ds=function T_(t,r,s,a,l,g){const E=Ui(),R=l[Lt],k=ms(E,l);Mf(R,l,E,s,null,a);for(let te=0;te<s.length;te++)ko(ji(l,R,E.directiveStart+te,E),l);Vh(R,l,E),k&&ko(k,l);const $=ji(l,R,E.directiveStart+E.componentOffset,E);if(t[yr]=l[yr]=$,null!==g)for(const te of g)te($,r);return r_(R,E,t),$}(YC,qh,mm,$I,Br,[S0]),y_(dr,Br,null)}finally{Vt()}return new qv(this.componentType,ds,qd(zc,Br),Br,zc)}}class qv extends t0{constructor(r,s,a,l,g){super(),this.location=a,this._rootLView=l,this._tNode=g,this.previousInputValues=null,this.instance=s,this.hostView=this.changeDetectorRef=new Wv(l),this.componentType=r}setInput(r,s){const a=this._tNode.inputs;let l;if(null!==a&&(l=a[r])){if(this.previousInputValues??=new Map,this.previousInputValues.has(r)&&Object.is(this.previousInputValues.get(r),s))return;const g=this._rootLView;v_(g[Lt],g,l,r,s),this.previousInputValues.set(r,s),Nf(Lr(this._tNode.index,g))}}get injector(){return new Gi(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(r){this.hostView.onDestroy(r)}}function S0(){const t=Ui();wa(Tt()[Lt],t)}function ts(t){let r=function Yv(t){return Object.getPrototypeOf(t.prototype).constructor}(t.type),s=!0;const a=[t];for(;r;){let l;if(Cs(t))l=r.\u0275cmp||r.\u0275dir;else{if(r.\u0275cmp)throw new Le(903,!1);l=r.\u0275dir}if(l){if(s){a.push(l);const E=t;E.inputs=w_(t.inputs),E.inputTransforms=w_(t.inputTransforms),E.declaredInputs=w_(t.declaredInputs),E.outputs=w_(t.outputs);const R=l.hostBindings;R&&R0(t,R);const k=l.viewQuery,$=l.contentQueries;if(k&&uo(t,k),$&&Zv(t,$),me(t.inputs,l.inputs),me(t.declaredInputs,l.declaredInputs),me(t.outputs,l.outputs),null!==l.inputTransforms&&(null===E.inputTransforms&&(E.inputTransforms={}),me(E.inputTransforms,l.inputTransforms)),Cs(l)&&l.data.animation){const te=t.data;te.animation=(te.animation||[]).concat(l.data.animation)}}const g=l.features;if(g)for(let E=0;E<g.length;E++){const R=g[E];R&&R.ngInherit&&R(t),R===ts&&(s=!1)}}r=Object.getPrototypeOf(r)}!function KI(t){let r=0,s=null;for(let a=t.length-1;a>=0;a--){const l=t[a];l.hostVars=r+=l.hostVars,l.hostAttrs=Hs(l.hostAttrs,s=Hs(s,l.hostAttrs))}}(a)}function w_(t){return t===vn?{}:t===jt?[]:t}function uo(t,r){const s=t.viewQuery;t.viewQuery=s?(a,l)=>{r(a,l),s(a,l)}:r}function Zv(t,r){const s=t.contentQueries;t.contentQueries=s?(a,l,g)=>{r(a,l,g),s(a,l,g)}:r}function R0(t,r){const s=t.hostBindings;t.hostBindings=s?(a,l)=>{r(a,l),s(a,l)}:r}function Jv(t){return r=>{r.findHostDirectiveDefs=Xv,r.hostDirectives=(Array.isArray(t)?t:t()).map(s=>"function"==typeof s?{directive:ct(s),inputs:vn,outputs:vn}:{directive:ct(s.directive),inputs:ey(s.inputs),outputs:ey(s.outputs)})}}function Xv(t,r,s){if(null!==t.hostDirectives)for(const a of t.hostDirectives){const l=_i(a.directive);YI(l.declaredInputs,a.inputs),Xv(l,r,s),s.set(l,a),r.push(l)}}function ey(t){if(void 0===t||0===t.length)return vn;const r={};for(let s=0;s<t.length;s+=2)r[t[s]]=t[s+1];return r}function YI(t,r){for(const s in r)r.hasOwnProperty(s)&&(t[r[s]]=t[s])}function D_(t){const r=t.inputConfig,s={};for(const a in r)if(r.hasOwnProperty(a)){const l=r[a];Array.isArray(l)&&l[2]&&(s[a]=l[2])}t.inputTransforms=s}function jg(t){return!!ny(t)&&(Array.isArray(t)||!(t instanceof Map)&&Symbol.iterator in t)}function ny(t){return null!==t&&("function"==typeof t||"object"==typeof t)}function pc(t,r,s){return t[r]=s}function Za(t,r,s){return!Object.is(t[r],s)&&(t[r]=s,!0)}function Jd(t,r,s,a){const l=Za(t,r,s);return Za(t,r+1,a)||l}function Pp(t,r,s,a,l){const g=Jd(t,r,s,a);return Za(t,r+2,l)||g}function C_(t,r,s,a){const l=Tt();return Za(l,iu(),r)&&(ir(),jc(di(),l,t,r,s,a)),C_}function hd(t,r,s,a){return Za(t,iu(),s)?r+Oe(s)+a:pr}function U0(t,r,s,a,l,g,E,R){const k=Tt(),$=ir(),te=t+Bn,he=$.firstCreatePass?function B0(t,r,s,a,l,g,E,R,k){const $=r.consts,te=Pf(r,t,4,E||null,Ba($,R));h_(r,s,te,Ba($,k)),wa(r,te);const he=te.tView=Dp(2,te,a,l,g,r.directiveRegistry,r.pipeRegistry,null,r.schemas,$,null);return null!==r.queries&&(r.queries.template(r,te),he.queries=r.queries.embeddedTView(te)),te}(te,$,k,r,s,a,l,g,E):$.data[te];sn(he,!1);const ke=j0($,k,he,t);io()&&rd($,k,ke,he),ko(ke,k),Sp(k,k[te]=Ap(ke,k,ke,he)),Fr(he)&&wp($,k,he),null!=E&&i_(k,he,R)}let j0=function nh(t,r,s,a){return aa(!0),r[_n].createComment("")};function ly(t){return _s(function yd(){return Un.lFrame.contextLView}(),Bn+t)}function Qg(t,r,s){const a=Tt();return Za(a,iu(),r)&&fc(ir(),di(),a,t,r,a[_n],s,!1),Qg}function O_(t,r,s,a,l){const E=l?"class":"style";v_(t,s,r.inputs[E],E,a)}function Jg(t,r,s,a){const l=Tt(),g=ir(),E=Bn+t,R=l[_n],k=g.firstCreatePass?function ih(t,r,s,a,l,g){const E=r.consts,k=Pf(r,t,2,a,Ba(E,l));return h_(r,s,k,Ba(E,g)),null!==k.attrs&&Fg(k,k.attrs,!1),null!==k.mergedAttrs&&Fg(k,k.mergedAttrs,!0),null!==r.queries&&r.queries.elementStart(r,k),k}(E,g,l,r,s,a):g.data[E],$=dy(g,l,k,R,r,t);l[E]=$;const te=Fr(k);return sn(k,!0),ff(R,$,k),32!=(32&k.flags)&&io()&&rd(g,l,$,k),0===function vt(){return Un.lFrame.elementDepthCount}()&&ko($,l),function Vs(){Un.lFrame.elementDepthCount++}(),te&&(wp(g,l,k),r_(g,k,l)),null!==a&&i_(l,k),Jg}function Xg(){let t=Ui();no()?Jn():(t=t.parent,sn(t,!1));const r=t;(function ja(t){return Un.skipHydrationRootTNode===t})(r)&&function bl(){Un.skipHydrationRootTNode=null}(),function Ea(){Un.lFrame.elementDepthCount--}();const s=ir();return s.firstCreatePass&&(wa(s,t),Xs(t)&&s.queries.elementEnd(t)),null!=r.classesWithoutHost&&function Zc(t){return 0!=(8&t.flags)}(r)&&O_(s,r,Tt(),r.classesWithoutHost,!0),null!=r.stylesWithoutHost&&function Yh(t){return 0!=(16&t.flags)}(r)&&O_(s,r,Tt(),r.stylesWithoutHost,!1),Xg}function P_(t,r,s,a){return Jg(t,r,s,a),Xg(),P_}let dy=(t,r,s,a,l,g)=>(aa(!0),Ge(a,l,function Ed(){return Un.lFrame.currentNamespace}()));function em(t,r,s){const a=Tt(),l=ir(),g=t+Bn,E=l.firstCreatePass?function fy(t,r,s,a,l){const g=r.consts,E=Ba(g,a),R=Pf(r,t,8,"ng-container",E);return null!==E&&Fg(R,E,!0),h_(r,s,R,Ba(g,l)),null!==r.queries&&r.queries.elementStart(r,R),R}(g,l,a,r,s):l.data[g];sn(E,!0);const R=py(l,a,E,t);return a[g]=R,io()&&rd(l,a,R,E),ko(R,a),Fr(E)&&(wp(l,a,E),r_(l,E,a)),null!=s&&i_(a,E),em}function tm(){let t=Ui();const r=ir();return no()?Jn():(t=t.parent,sn(t,!1)),r.firstCreatePass&&(wa(r,t),Xs(t)&&r.queries.elementEnd(t)),tm}let py=(t,r,s,a)=>(aa(!0),Ee(r[_n],""));function H0(){return Tt()}function k_(t){return!!t&&"function"==typeof t.then}function gy(t){return!!t&&"function"==typeof t.subscribe}function F_(t,r,s,a){const l=Tt(),g=ir(),E=Ui();return function z0(t,r,s,a,l,g,E){const R=Fr(a),$=t.firstCreatePass&&__(t),te=r[yr],he=xg(r);let ke=!0;if(3&a.type||E){const Ot=ms(a,r),cn=E?E(Ot):Ot,Pn=he.length,Dt=E?Br=>E($r(Br[a.index])):a.index;let dr=null;if(!E&&R&&(dr=function $0(t,r,s,a){const l=t.cleanup;if(null!=l)for(let g=0;g<l.length-1;g+=2){const E=l[g];if(E===s&&l[g+1]===a){const R=r[fr],k=l[g+2];return R.length>k?R[k]:null}"string"==typeof E&&(g+=2)}return null}(t,r,l,a.index)),null!==dr)(dr.__ngLastListenerFn__||dr).__ngNextListenerFn__=g,dr.__ngLastListenerFn__=g,ke=!1;else{g=q0(a,r,te,g,!1);const Br=s.listen(cn,l,g);he.push(g,Br),$&&$.push(l,Dt,Pn,Pn+1)}}else g=q0(a,r,te,g,!1);const qe=a.outputs;let gt;if(ke&&null!==qe&&(gt=qe[l])){const Ot=gt.length;if(Ot)for(let cn=0;cn<Ot;cn+=2){const ds=r[gt[cn]][gt[cn+1]].subscribe(g),zc=he.length;he.push(g,ds),$&&$.push(l,a.index,zc,-(zc+1))}}}(g,l,l[_n],E,t,r,a),F_}function W0(t,r,s,a){try{return Ri(6,r,s),!1!==s(a)}catch(l){return kg(t,l),!1}finally{Ri(7,r,s)}}function q0(t,r,s,a,l){return function g(E){if(E===Function)return a;Nf(t.componentOffset>-1?Lr(t.index,r):r);let k=W0(r,s,a,E),$=g.__ngNextListenerFn__;for(;$;)k=W0(r,s,$,E)&&k,$=$.__ngNextListenerFn__;return l&&!1===k&&E.preventDefault(),k}}function K0(t=1){return function Zn(t){return(Un.lFrame.contextLView=function Sr(t,r){for(;t>0;)r=r[bs],t--;return r}(t,Un.lFrame.contextLView))[yr]}(t)}function Y0(t,r){let s=null;const a=function zi(t){const r=t.attrs;if(null!=r){const s=r.indexOf(5);if(!(1&s))return r[s+1]}return null}(t);for(let l=0;l<r.length;l++){const g=r[l];if("*"!==g){if(null===a?jr(t,g,!0):co(a,g))return l}else s=l}return s}function _y(t){const r=Tt()[ti][ei];if(!r.projection){const a=r.projection=Mr(t?t.length:1,null),l=a.slice();let g=r.child;for(;null!==g;){const E=t?Y0(g,t):0;null!==E&&(l[E]?l[E].projectionNext=g:a[E]=g,l[E]=g),g=g.next}}}function vy(t,r=0,s){const a=Tt(),l=ir(),g=Pf(l,Bn+t,16,null,s||null);null===g.projection&&(g.projection=r),Jn(),(!a[fs]||Cu())&&32!=(32&g.flags)&&function Qp(t,r,s){vm(r[_n],0,r,s,Hi(t,s,r),uf(s.parent||r[ei],s,r))}(l,a,g)}function yy(t,r,s){return nm(t,"",r,"",s),yy}function nm(t,r,s,a,l){const g=Tt(),E=hd(g,r,s,a);return E!==pr&&fc(ir(),di(),g,t,E,g[_n],l,!1),nm}function rm(t,r){return t<<17|r<<2}function Hh(t){return t>>17&32767}function V_(t){return 2|t}function $f(t){return(131068&t)>>2}function Ay(t,r){return-131069&t|r<<2}function Sy(t){return 1|t}function Hp(t,r,s,a,l){const g=t[s+1],E=null===r;let R=a?Hh(g):$f(g),k=!1;for(;0!==R&&(!1===k||E);){const te=t[R+1];J0(t[R],r)&&(k=!0,t[R+1]=a?Sy(te):V_(te)),R=a?Hh(te):$f(te)}k&&(t[s+1]=a?V_(g):Sy(g))}function J0(t,r){return null===t||null==r||(Array.isArray(t)?t[1]:t)===r||!(!Array.isArray(t)||"string"!=typeof r)&&ku(t,r)>=0}const na={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function im(t){return t.substring(na.key,na.keyEnd)}function zf(t,r){const s=na.textEnd;return s===r?-1:(r=na.keyEnd=function sm(t,r,s){for(;r<s&&t.charCodeAt(r)>32;)r++;return r}(t,na.key=r,s),$h(t,r,s))}function $h(t,r,s){for(;r<s&&t.charCodeAt(r)<=32;)r++;return r}function Oa(t,r,s){return Il(t,r,s,!1),Oa}function om(t,r){return Il(t,r,null,!0),om}function Wf(t){!function gc(t,r,s,a){const l=ir(),g=yo(2);l.firstUpdatePass&&oh(l,null,g,a);const E=Tt();if(s!==pr&&Za(E,g,s)){const R=l.data[bn()];if(um(R,a)&&!zh(l,g)){let k=a?R.classesWithoutHost:R.stylesWithoutHost;null!==k&&(s=dt(k,s||"")),O_(l,R,E,s,a)}else!function z_(t,r,s,a,l,g,E,R){l===pr&&(l=jt);let k=0,$=0,te=0<l.length?l[0]:null,he=0<g.length?g[0]:null;for(;null!==te||null!==he;){const ke=k<l.length?l[k+1]:void 0,qe=$<g.length?g[$+1]:void 0;let Ot,gt=null;te===he?(k+=2,$+=2,ke!==qe&&(gt=he,Ot=qe)):null===he||null!==te&&te<he?(k+=2,gt=te):($+=2,gt=he,Ot=qe),null!==gt&&W_(t,r,s,a,gt,Ot,E,R),te=k<l.length?l[k]:null,he=$<g.length?g[$]:null}}(l,R,E,E[_n],E[g+1],E[g+1]=function nI(t,r,s){if(null==s||""===s)return jt;const a=[],l=Lc(s);if(Array.isArray(l))for(let g=0;g<l.length;g++)t(a,l[g],!0);else if("object"==typeof l)for(const g in l)l.hasOwnProperty(g)&&t(a,g,l[g]);else"string"==typeof l&&r(a,l);return a}(t,r,s),a,g)}}(rI,js,t,!0)}function js(t,r){for(let s=function Ny(t){return function Py(t){na.key=0,na.keyEnd=0,na.value=0,na.valueEnd=0,na.textEnd=t.length}(t),zf(t,$h(t,0,na.textEnd))}(r);s>=0;s=zf(r,s))Ss(t,im(r),!0)}function Il(t,r,s,a){const l=Tt(),g=ir(),E=yo(2);g.firstUpdatePass&&oh(g,t,E,a),r!==pr&&Za(l,E,r)&&W_(g,g.data[bn()],l,l[_n],t,l[E+1]=function iI(t,r){return null==t||""===t||("string"==typeof r?t+=r:"object"==typeof t&&(t=xe(Lc(t)))),t}(r,s),a,E)}function zh(t,r){return r>=t.expandoStartIndex}function oh(t,r,s,a){const l=t.data;if(null===l[s+1]){const g=l[bn()],E=zh(t,s);um(g,a)&&null===r&&!E&&(r=!1),r=function G_(t,r,s,a){const l=function Ec(t){const r=Un.lFrame.currentDirectiveIndex;return-1===r?null:t[r]}(t);let g=a?r.residualClasses:r.residualStyles;if(null===l)0===(a?r.classBindings:r.styleBindings)&&(s=am(s=H_(null,t,r,s,a),r.attrs,a),g=null);else{const E=r.directiveStylingLast;if(-1===E||t[E]!==l)if(s=H_(l,t,r,s,a),null===g){let k=function Wh(t,r,s){const a=s?r.classBindings:r.styleBindings;if(0!==$f(a))return t[Hh(a)]}(t,r,a);void 0!==k&&Array.isArray(k)&&(k=H_(null,t,r,k[1],a),k=am(k,r.attrs,a),function eI(t,r,s,a){t[Hh(s?r.classBindings:r.styleBindings)]=a}(t,r,a,k))}else g=function tI(t,r,s){let a;const l=r.directiveEnd;for(let g=1+r.directiveStylingLast;g<l;g++)a=am(a,t[g].hostAttrs,s);return am(a,r.attrs,s)}(t,r,a)}return void 0!==g&&(a?r.residualClasses=g:r.residualStyles=g),s}(l,g,r,a),function tE(t,r,s,a,l,g){let E=g?r.classBindings:r.styleBindings,R=Hh(E),k=$f(E);t[a]=s;let te,$=!1;if(Array.isArray(s)?(te=s[1],(null===te||ku(s,te)>0)&&($=!0)):te=s,l)if(0!==k){const ke=Hh(t[R+1]);t[a+1]=rm(ke,R),0!==ke&&(t[ke+1]=Ay(t[ke+1],a)),t[R+1]=function Cy(t,r){return 131071&t|r<<17}(t[R+1],a)}else t[a+1]=rm(R,0),0!==R&&(t[R+1]=Ay(t[R+1],a)),R=a;else t[a+1]=rm(k,0),0===R?R=a:t[k+1]=Ay(t[k+1],a),k=a;$&&(t[a+1]=V_(t[a+1])),Hp(t,te,a,!0),Hp(t,te,a,!1),function B_(t,r,s,a,l){const g=l?t.residualClasses:t.residualStyles;null!=g&&"string"==typeof r&&ku(g,r)>=0&&(s[a+1]=Sy(s[a+1]))}(r,te,t,a,g),E=rm(R,k),g?r.classBindings=E:r.styleBindings=E}(l,g,r,s,E,a)}}function H_(t,r,s,a,l){let g=null;const E=s.directiveEnd;let R=s.directiveStylingLast;for(-1===R?R=s.directiveStart:R++;R<E&&(g=r[R],a=am(a,g.hostAttrs,l),g!==t);)R++;return null!==t&&(s.directiveStylingLast=R),a}function am(t,r,s){const a=s?1:2;let l=-1;if(null!==r)for(let g=0;g<r.length;g++){const E=r[g];"number"==typeof E?l=E:l===a&&(Array.isArray(t)||(t=void 0===t?[]:["",t]),Ss(t,E,!!s||r[++g]))}return void 0===t?null:t}function rI(t,r,s){const a=String(r);""!==a&&!a.includes(" ")&&Ss(t,a,s)}function W_(t,r,s,a,l,g,E,R){if(!(3&r.type))return;const k=t.data,$=k[R+1],te=function eE(t){return 1==(1&t)}($)?zp(k,r,s,l,$f($),E):void 0;Wp(te)||(Wp(g)||function XI(t){return 2==(2&t)}($)&&(g=zp(k,null,s,l,R,E)),function sd(t,r,s,a,l){if(r)l?t.addClass(s,a):t.removeClass(s,a);else{let g=-1===a.indexOf("-")?void 0:bo.DashCase;null==l?t.removeStyle(s,a,g):("string"==typeof l&&l.endsWith("!important")&&(l=l.slice(0,-10),g|=bo.Important),t.setStyle(s,a,l,g))}}(a,E,Ku(bn(),s),l,g))}function zp(t,r,s,a,l,g){const E=null===r;let R;for(;l>0;){const k=t[l],$=Array.isArray(k),te=$?k[1]:k,he=null===te;let ke=s[l+1];ke===pr&&(ke=he?jt:void 0);let qe=he?Yl(ke,a):te===a?ke:void 0;if($&&!Wp(qe)&&(qe=Yl(k,a)),Wp(qe)&&(R=qe,E))return R;const gt=t[l+1];l=E?Hh(gt):$f(gt)}if(null!==r){let k=g?r.residualClasses:r.residualStyles;null!=k&&(R=Yl(k,a))}return R}function Wp(t){return void 0!==t}function um(t,r){return 0!=(t.flags&(r?8:16))}function xy(t,r=""){const s=Tt(),a=ir(),l=t+Bn,g=a.firstCreatePass?Pf(a,l,1,r,null):a.data[l],E=q_(a,s,g,r,t);s[l]=E,io()&&rd(a,s,E,g),sn(g,!1)}let q_=(t,r,s,a,l)=>(aa(!0),G(r[_n],a));function K_(t){return cm("",t,""),K_}function cm(t,r,s){const a=Tt(),l=hd(a,t,r,s);return l!==pr&&ld(a,bn(),l),cm}function Y_(t,r,s,a,l){const g=Tt(),E=function $l(t,r,s,a,l,g){const R=Jd(t,Ta(),s,l);return yo(2),R?r+Oe(s)+a+Oe(l)+g:pr}(g,t,r,s,a,l);return E!==pr&&ld(g,bn(),E),Y_}function Z_(t,r,s,a,l,g,E){const R=Tt(),k=function jh(t,r,s,a,l,g,E,R){const $=Pp(t,Ta(),s,l,E);return yo(3),$?r+Oe(s)+a+Oe(l)+g+Oe(E)+R:pr}(R,t,r,s,a,l,g,E);return k!==pr&&ld(R,bn(),k),Z_}function aI(t,r,s){const a=Tt();return Za(a,iu(),r)&&fc(ir(),di(),a,t,r,a[_n],s,!0),aI}const qp=void 0;var Tb=["en",[["a","p"],["AM","PM"],qp],[["AM","PM"],qp,qp],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],qp,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],qp,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",qp,"{1} 'at' {0}",qp],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function Eb(t){const s=Math.floor(Math.abs(t)),a=t.toString().replace(/^[^.]*\.?/,"").length;return 1===s&&0===a?1:5}];let lm={};function uI(t){const r=function bb(t){return t.toLowerCase().replace(/_/g,"-")}(t);let s=aE(r);if(s)return s;const a=r.split("-")[0];if(s=aE(a),s)return s;if("en"===a)return Tb;throw new Le(701,!1)}function oE(t){return uI(t)[dm.PluralCase]}function aE(t){return t in lm||(lm[t]=kn.ng&&kn.ng.common&&kn.ng.common.locales&&kn.ng.common.locales[t]),lm[t]}var dm=function(t){return t[t.LocaleId=0]="LocaleId",t[t.DayPeriodsFormat=1]="DayPeriodsFormat",t[t.DayPeriodsStandalone=2]="DayPeriodsStandalone",t[t.DaysFormat=3]="DaysFormat",t[t.DaysStandalone=4]="DaysStandalone",t[t.MonthsFormat=5]="MonthsFormat",t[t.MonthsStandalone=6]="MonthsStandalone",t[t.Eras=7]="Eras",t[t.FirstDayOfWeek=8]="FirstDayOfWeek",t[t.WeekendRange=9]="WeekendRange",t[t.DateFormat=10]="DateFormat",t[t.TimeFormat=11]="TimeFormat",t[t.DateTimeFormat=12]="DateTimeFormat",t[t.NumberSymbols=13]="NumberSymbols",t[t.NumberFormats=14]="NumberFormats",t[t.CurrencyCode=15]="CurrencyCode",t[t.CurrencySymbol=16]="CurrencySymbol",t[t.CurrencyName=17]="CurrencyName",t[t.Currencies=18]="Currencies",t[t.Directionality=19]="Directionality",t[t.PluralCase=20]="PluralCase",t[t.ExtraData=21]="ExtraData",t}(dm||{});const hm="en-US",Vy={marker:"element"},By={marker:"ICU"};var Hc=function(t){return t[t.SHIFT=2]="SHIFT",t[t.APPEND_EAGERLY=1]="APPEND_EAGERLY",t[t.COMMENT=2]="COMMENT",t}(Hc||{});let uE=hm;function cE(t){(function Nt(t,r){null==t&&wt(r,t,null,"!=")})(t,"Expected localeId to be defined"),"string"==typeof t&&(uE=t.toLowerCase().replace(/_/g,"-"))}function lE(t,r,s){const a=r.insertBeforeIndex,l=Array.isArray(a)?a[0]:a;return null===l?cf(t,0,s):$r(s[l])}function dE(t,r,s,a,l){const g=r.insertBeforeIndex;if(Array.isArray(g)){let E=a,R=null;if(3&r.type||(R=E,E=l),null!==E&&-1===r.componentOffset)for(let k=1;k<g.length;k++)cc(t,E,s[g[k]],R,!1)}}function hE(t,r){if(t.push(r),t.length>1)for(let s=t.length-2;s>=0;s--){const a=t[s];fE(a)||Sb(a,r)&&null===Rb(a)&&Nb(a,r.index)}}function fE(t){return!(64&t.type)}function Sb(t,r){return fE(r)||t.index>r.index}function Rb(t){const r=t.insertBeforeIndex;return Array.isArray(r)?r[0]:r}function Nb(t,r){const s=t.insertBeforeIndex;Array.isArray(s)?s[0]=r:(yh(lE,dE),t.insertBeforeIndex=r)}function Mb(t,r,s){const a=bp(t,s,64,null,null);return hE(r,a),a}function Ub(){const t=[];let s,a,r=-1;function g(R,k){r=0;const $=function Uy(t,r){const s=r[t.currentCaseLViewIndex];return null===s?s:s<0?~s:s}(R,k);a=null!==$?R.remove[$]:jt}function E(){if(r<a.length){const R=a[r++];return R>0?s[R]:(t.push(r,a),g(s[Lt].data[~R],s),E())}return 0===t.length?null:(a=t.pop(),r=t.pop(),E())}return function l(R,k){for(s=k;t.length;)t.pop();return g(R.value,k),E}}const jy=/\ufffd(\d+):?\d*\ufffd/gi,Gb=/\ufffd(\d+)\ufffd/,TE=/^\s*(\ufffd\d+:?\d*\ufffd)\s*,\s*(select|plural)\s*,/,nv="\ufffd",Hb=/\ufffd\/?\*(\d+:\d+)\ufffd/gi,$b=/\ufffd(\/?[#*]\d+):?\d*\ufffd/gi,zb=/\uE500/g;function bE(t,r,s,a,l,g,E){const R=hc(t,a,1,null);let k=R<<Hc.SHIFT,$=Ar();r===$&&($=null),null===$&&(k|=Hc.APPEND_EAGERLY),E&&(k|=Hc.COMMENT,function Fd(t){void 0===Bu&&(Bu=t())}(Ub)),l.push(k,null===g?"":g);const te=bp(t,R,E?32:1,null===g?"":g,null);hE(s,te);const he=te.index;return sn(te,!1),null!==$&&r!==$&&function Pb(t,r){let s=t.insertBeforeIndex;null===s?(yh(lE,dE),s=t.insertBeforeIndex=[null,r]):(function or(t,r,s){t!=r&&wt(s,t,r,"==")}(Array.isArray(s),!0,"Expecting array here"),s.push(r))}($,he),te}function Kb(t,r,s,a,l,g,E){const R=E.match(jy),k=bE(t,r,s,g,a,R?null:E,!1);R&&rv(l,E,k.index,null,0,null)}function rv(t,r,s,a,l,g){const E=t.length,R=E+1;t.push(null,null);const k=E+2,$=r.split(jy);let te=0;for(let he=0;he<$.length;he++){const ke=$[he];if(1&he){const qe=l+parseInt(ke,10);t.push(-1-qe),te|=wE(qe)}else""!==ke&&t.push(ke)}return t.push(s<<2|(a?1:0)),a&&t.push(a,g),t[E]=te,t[R]=t.length-k,te}function wE(t){return 1<<Math.min(t,31)}function DE(t){let r,g,s="",a=0,l=!1;for(;null!==(r=Hb.exec(t));)l?r[0]===`${nv}/*${g}${nv}`&&(a=r.index,l=!1):(s+=t.substring(a,r.index+r[0].length),g=r[1],l=!0);return s+=t.slice(a),s}function CE(t,r,s,a,l,g){let E=0;const R={type:l.type,currentCaseLViewIndex:hc(t,r,1,null),anchorIdx:g,cases:[],create:[],remove:[],update:[]};(function nw(t,r,s){t.push(wE(r.mainBinding),2,-1-r.mainBinding,s<<2|2)})(s,l,g),function Ob(t,r,s){const a=t.data[r];null===a?t.data[r]=s:a.value=s}(t,g,R);const k=l.values;for(let $=0;$<k.length;$++){const te=k[$],he=[];for(let ke=0;ke<te.length;ke++){const qe=te[ke];if("string"!=typeof qe){const gt=he.push(qe)-1;te[ke]=`\x3c!--\ufffd${gt}\ufffd--\x3e`}}E=ew(t,R,r,s,a,l.cases[$],te.join(""),he)|E}E&&function rw(t,r,s){t.push(r,1,s<<2|3)}(s,E,g)}function Xb(t){const r=[],s=[];let a=1,l=0;const g=cI(t=t.replace(TE,function(E,R,k){return a="select"===k?0:1,l=parseInt(R.slice(1),10),""}));for(let E=0;E<g.length;){let R=g[E++].trim();1===a&&(R=R.replace(/\s*(?:=)?(\w+)\s*/,"$1")),R.length&&r.push(R);const k=cI(g[E++]);r.length>s.length&&s.push(k)}return{type:a,mainBinding:l,cases:r,values:s}}function cI(t){if(!t)return[];let r=0;const s=[],a=[],l=/[{}]/g;let g;for(l.lastIndex=0;g=l.exec(t);){const R=g.index;if("}"==g[0]){if(s.pop(),0==s.length){const k=t.substring(r,R);TE.test(k)?a.push(Xb(k)):a.push(k),r=R+1}}else{if(0==s.length){const k=t.substring(r,R);a.push(k),r=R+1}s.push("{")}}const E=t.substring(r);return a.push(E),a}function ew(t,r,s,a,l,g,E,R){const k=[],$=[],te=[];r.cases.push(g),r.create.push(k),r.remove.push($),r.update.push(te);const ke=function eg(t){const r=new hv(t);return function vf(){try{return!!(new window.DOMParser).parseFromString(Eh(""),"text/html")}catch{return!1}}()?new wm(r):r}(Bd()).getInertBodyElement(E),qe=function Ll(t){return"content"in t&&function d(t){return t.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===t.nodeName}(t)?t.content:null}(ke)||ke;return qe?AE(t,r,s,a,k,$,te,qe,l,R,0):0}function AE(t,r,s,a,l,g,E,R,k,$,te){let he=0,ke=R.firstChild;for(;ke;){const qe=hc(t,s,1,null);switch(ke.nodeType){case Node.ELEMENT_NODE:const gt=ke,Ot=gt.tagName.toLowerCase();if(up.hasOwnProperty(Ot)){lI(l,Vy,Ot,k,qe),t.data[qe]=Ot;const dr=gt.attributes;for(let Br=0;Br<dr.length;Br++){const ds=dr.item(Br),zc=ds.name.toLowerCase();ds.value.match(jy)?rg.hasOwnProperty(zc)&&rv(E,ds.value,qe,ds.name,0,ad[zc]?op:null):iw(l,qe,ds)}he=AE(t,r,s,a,l,g,E,ke,qe,$,te+1)|he,SE(g,qe,te)}break;case Node.TEXT_NODE:const cn=ke.textContent||"",Pn=cn.match(jy);lI(l,null,Pn?"":cn,k,qe),SE(g,qe,te),Pn&&(he=rv(E,cn,qe,null,0,null)|he);break;case Node.COMMENT_NODE:const Dt=Gb.exec(ke.textContent||"");if(Dt){const Br=$[parseInt(Dt[1],10)];lI(l,By,"",k,qe),CE(t,s,a,k,Br,qe),tw(g,qe,te)}}ke=ke.nextSibling}return he}function SE(t,r,s){0===s&&t.push(r)}function tw(t,r,s){0===s&&(t.push(~r),t.push(r))}function lI(t,r,s,a,l){null!==r&&t.push(r),t.push(s,l,function xb(t,r,s){return t|r<<17|s<<1}(0,a,l))}function iw(t,r,s){t.push(r<<1|1,s.name,s.value)}function NE(t,r,s=-1){const a=ir(),l=Tt(),g=Bn+t,E=Ba(a.consts,r),R=Ar();a.firstCreatePass&&function qb(t,r,s,a,l,g){const E=Ar(),R=[],k=[],$=[[]];l=function Jb(t,r){if(function Qb(t){return-1===t}(r))return DE(t);{const s=t.indexOf(`:${r}${nv}`)+2+r.toString().length,a=t.search(new RegExp(`${nv}\\/\\*\\d+:${r}${nv}`));return DE(t.substring(s,a))}}(l,g);const te=function Wb(t){return t.replace(zb," ")}(l).split($b);for(let he=0;he<te.length;he++){let ke=te[he];if(1&he){const qe=47===ke.charCodeAt(0),Ot=(ke.charCodeAt(qe?1:0),Bn+Number.parseInt(ke.substring(qe?2:1)));if(qe)$.shift(),sn(Ar(),!1);else{const cn=Mb(t,$[0],Ot);$.unshift([]),sn(cn,!0)}}else{const qe=cI(ke);for(let gt=0;gt<qe.length;gt++){let Ot=qe[gt];if(1&gt){const cn=Ot;if("object"!=typeof cn)throw new Error(`Unable to parse ICU expression in "${l}" message.`);CE(t,s,k,r,cn,bE(t,E,$[0],s,R,"",!0).index)}else""!==Ot&&Kb(t,E,$[0],R,k,s,Ot)}}}t.data[a]={create:R,update:k}}(a,null===R?0:R.index,l,g,E,s),2===a.type?l[ti][En]|=32:l[En]|=32;const k=a.data[g],te=Ld(a,R===l[ei]?null:R,l);(function Lb(t,r,s,a){const l=t[_n];for(let g=0;g<r.length;g++){const E=r[g++],R=r[g],$=(E&Hc.APPEND_EAGERLY)===Hc.APPEND_EAGERLY,te=E>>>Hc.SHIFT;let he=t[te];null===he&&(he=t[te]=(E&Hc.COMMENT)===Hc.COMMENT?l.createComment(R):G(l,R)),$&&null!==s&&cc(l,s,he,a,!1)}})(l,k.create,te,R&&8&R.type?l[R.index]:null),Ic(!0)}function PE(t,r,s){NE(t,r,s),function OE(){Ic(!1)}()}function dI(t,r,s,a,l){if(t=ct(t),Array.isArray(t))for(let g=0;g<t.length;g++)dI(t[g],r,s,a,l);else{const g=ir(),E=Tt(),R=Ui();let k=Ks(t)?t:ct(t.provide);const $=Hu(t),te=1048575&R.providerIndexes,he=R.directiveStart,ke=R.providerIndexes>>20;if(Ks(t)||!t.multi){const qe=new Yc($,l,Zd),gt=fI(k,r,l?te:te+ke,he);-1===gt?(Dc(Zo(R,E),g,k),hI(g,t,r.length),r.push(k),R.directiveStart++,R.directiveEnd++,l&&(R.providerIndexes+=1048576),s.push(qe),E.push(qe)):(s[gt]=qe,E[gt]=qe)}else{const qe=fI(k,r,te+ke,he),gt=fI(k,r,te,te+ke),cn=gt>=0&&s[gt];if(l&&!cn||!l&&!(qe>=0&&s[qe])){Dc(Zo(R,E),g,k);const Pn=function Iw(t,r,s,a,l){const g=new Yc(t,s,Zd);return g.multi=[],g.index=r,g.componentProviders=0,xE(g,l,a&&!s),g}(l?yw:vw,s.length,l,a,$);!l&&cn&&(s[gt].providerFactory=Pn),hI(g,t,r.length,0),r.push(k),R.directiveStart++,R.directiveEnd++,l&&(R.providerIndexes+=1048576),s.push(Pn),E.push(Pn)}else hI(g,t,qe>-1?qe:gt,xE(s[l?gt:qe],$,!l&&a));!l&&a&&cn&&s[gt].componentProviders++}}}function hI(t,r,s,a){const l=Ks(r),g=function ud(t){return!!t.useClass}(r);if(l||g){const k=(g?ct(r.useClass):r).prototype.ngOnDestroy;if(k){const $=t.destroyHooks||(t.destroyHooks=[]);if(!l&&r.multi){const te=$.indexOf(s);-1===te?$.push(s,[a,k]):$[te+1].push(a,k)}else $.push(s,k)}}}function xE(t,r,s){return s&&t.componentProviders++,t.multi.push(r)-1}function fI(t,r,s,a){for(let l=s;l<a;l++)if(r[l]===t)return l;return-1}function vw(t,r,s,a){return pI(this.multi,[])}function yw(t,r,s,a){const l=this.multi;let g;if(this.providerFactory){const E=this.providerFactory.componentProviders,R=ji(s,s[Lt],this.providerFactory.index,a);g=R.slice(0,E),pI(l,g);for(let k=E;k<R.length;k++)g.push(R[k])}else g=[],pI(l,g);return g}function pI(t,r){for(let s=0;s<t.length;s++)r.push((0,t[s])());return r}function kE(t,r=[]){return s=>{s.providersResolver=(a,l)=>function _w(t,r,s){const a=ir();if(a.firstCreatePass){const l=Cs(t);dI(s,a.data,a.blueprint,l,!0),dI(r,a.data,a.blueprint,l,!1)}}(a,l?l(t):t,r)}}class Kp{}class FE{}function Ew(t,r){return new gI(t,r??null,[])}class gI extends Kp{constructor(r,s,a){super(),this._parent=s,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new kf(this);const l=Yr(r);this._bootstrapComponents=_l(l.bootstrap),this._r3Injector=Iv(r,s,[{provide:Kp,useValue:this},{provide:hg,useValue:this.componentFactoryResolver},...a],xe(r),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(r)}get injector(){return this._r3Injector}destroy(){const r=this._r3Injector;!r.destroyed&&r.destroy(),this.destroyCbs.forEach(s=>s()),this.destroyCbs=null}onDestroy(r){this.destroyCbs.push(r)}}class mI extends FE{constructor(r){super(),this.moduleType=r}create(r){return new gI(this.moduleType,r,[])}}class LE extends Kp{constructor(r){super(),this.componentFactoryResolver=new kf(this),this.instance=null;const s=new fl([...r.providers,{provide:Kp,useValue:this},{provide:hg,useValue:this.componentFactoryResolver}],r.parent||gu(),r.debugName,new Set(["environment"]));this.injector=s,r.runEnvironmentInitializers&&s.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(r){this.injector.onDestroy(r)}}function VE(t,r,s=null){return new LE({providers:t,parent:r,debugName:s,runEnvironmentInitializers:!0}).injector}let bw=(()=>{class t{constructor(s){this._injector=s,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(s){if(!s.standalone)return null;if(!this.cachedInjectors.has(s)){const a=_r(0,s.type),l=a.length>0?VE([a],this._injector,`Standalone[${s.type.name}]`):null;this.cachedInjectors.set(s,l)}return this.cachedInjectors.get(s)}ngOnDestroy(){try{for(const s of this.cachedInjectors.values())null!==s&&s.destroy()}finally{this.cachedInjectors.clear()}}static#e=this.\u0275prov=on({token:t,providedIn:"environment",factory:()=>new t(Bt(mu))})}return t})();function BE(t){t.getStandaloneInjector=r=>r.get(bw).getOrCreateStandaloneInjector(t)}function WE(t,r,s,a){return function YE(t,r,s,a,l,g){const E=r+s;return Za(t,E,l)?pc(t,E+1,g?a.call(g,l):a(l)):iv(t,E+1)}(Tt(),bi(),t,r,s,a)}function qE(t,r,s,a,l){return ZE(Tt(),bi(),t,r,s,a,l)}function KE(t,r,s,a,l,g){return function QE(t,r,s,a,l,g,E,R){const k=r+s;return Pp(t,k,l,g,E)?pc(t,k+3,R?a.call(R,l,g,E):a(l,g,E)):iv(t,k+3)}(Tt(),bi(),t,r,s,a,l,g)}function iv(t,r){const s=t[r];return s===pr?void 0:s}function ZE(t,r,s,a,l,g,E){const R=r+s;return Jd(t,R,l,g)?pc(t,R+2,E?a.call(E,l,g):a(l,g)):iv(t,R+2)}function eT(t,r){const s=ir();let a;const l=t+Bn;s.firstCreatePass?(a=function Bw(t,r){if(r)for(let s=r.length-1;s>=0;s--){const a=r[s];if(t===a.name)return a}}(r,s.pipeRegistry),s.data[l]=a,a.onDestroy&&(s.destroyHooks??=[]).push(l,a.onDestroy)):a=s.data[l];const g=a.factory||(a.factory=Bi(a.type)),R=Wt(Zd);try{const k=Jc(!1),$=g();return Jc(k),function rh(t,r,s,a){s>=t.data.length&&(t.data[s]=null,t.blueprint[s]=null),r[s]=a}(s,Tt(),l,$),$}finally{Wt(R)}}function tT(t,r,s,a){const l=t+Bn,g=Tt(),E=_s(g,l);return function sv(t,r){return t[Lt].data[r].pure}(g,l)?ZE(g,bi(),r,E.transform,s,a,E):E.transform(s,a)}function $w(){return this._results[Symbol.iterator]()}class vI{static#e=Symbol.iterator;get changes(){return this._changes||(this._changes=new Uc)}constructor(r=!1){this._emitDistinctChangesOnly=r,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const s=vI.prototype;s[Symbol.iterator]||(s[Symbol.iterator]=$w)}get(r){return this._results[r]}map(r){return this._results.map(r)}filter(r){return this._results.filter(r)}find(r){return this._results.find(r)}reduce(r,s){return this._results.reduce(r,s)}forEach(r){this._results.forEach(r)}some(r){return this._results.some(r)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(r,s){const a=this;a.dirty=!1;const l=function ys(t){return t.flat(Number.POSITIVE_INFINITY)}(r);(this._changesDetected=!function Kl(t,r,s){if(t.length!==r.length)return!1;for(let a=0;a<t.length;a++){let l=t[a],g=r[a];if(s&&(l=s(l),g=s(g)),g!==l)return!1}return!0}(a._results,l,s))&&(a._results=l,a.length=l.length,a.last=l[this.length-1],a.first=l[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}function Ww(t,r,s,a=!0){const l=r[Lt];if(function cs(t,r,s,a){const l=Hr+a,g=s.length;a>0&&(s[l-1][ui]=r),a<g-Hr?(r[ui]=s[l],Cl(s,Hr+a,r)):(s.push(r),r[ui]=null),r[Vn]=s;const E=r[er];null!==E&&s!==E&&function ta(t,r){const s=t[Js];r[ti]!==r[Vn][Vn][ti]&&(t[ps]=!0),null===s?t[Js]=[r]:s.push(r)}(E,r);const R=r[qi];null!==R&&R.insertView(t),r[En]|=128}(l,r,t,s),a){const g=lf(s,t),E=r[_n],R=ll(E,t[Ds]);null!==R&&function en(t,r,s,a,l,g){a[hr]=l,a[ei]=r,hf(t,a,s,1,l,g)}(l,t[ei],E,r,R,g)}}let ov=(()=>{class t{static#e=this.__NG_ELEMENT_ID__=Yw}return t})();const qw=ov,Kw=class extends qw{constructor(r,s,a){super(),this._declarationLView=r,this._declarationTContainer=s,this.elementRef=a}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(r,s){return this.createEmbeddedViewImpl(r,s)}createEmbeddedViewImpl(r,s,a){const l=function zw(t,r,s,a){const l=r.tView,R=Of(t,l,s,4096&t[En]?4096:16,null,r,null,null,null,a?.injector??null,a?.hydrationInfo??null);R[er]=t[r.index];const $=t[qi];return null!==$&&(R[qi]=$.createEmbeddedView(l)),y_(l,R,s),R}(this._declarationLView,this._declarationTContainer,r,{injector:s,hydrationInfo:a});return new xf(l)}};function Yw(){return Gy(Ui(),Tt())}function Gy(t,r){return 4&t.type?new Kw(r,t,qd(t,r)):null}let $y=(()=>{class t{static#e=this.__NG_ELEMENT_ID__=tD}return t})();function tD(){return uT(Ui(),Tt())}const nD=$y,oT=class extends nD{constructor(r,s,a){super(),this._lContainer=r,this._hostTNode=s,this._hostLView=a}get element(){return qd(this._hostTNode,this._hostLView)}get injector(){return new Gi(this._hostTNode,this._hostLView)}get parentInjector(){const r=Nu(this._hostTNode,this._hostLView);if(Qu(r)){const s=oo(r,this._hostLView),a=Ha(r);return new Gi(s[Lt].data[a+8],s)}return new Gi(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(r){const s=aT(this._lContainer);return null!==s&&s[r]||null}get length(){return this._lContainer.length-Hr}createEmbeddedView(r,s,a){let l,g;"number"==typeof a?l=a:null!=a&&(l=a.index,g=a.injector);const R=r.createEmbeddedViewImpl(s||{},g,null);return this.insertImpl(R,l,false),R}createComponent(r,s,a,l,g){const E=r&&!function ic(t){return"function"==typeof t}(r);let R;if(E)R=s;else{const Ot=s||{};R=Ot.index,a=Ot.injector,l=Ot.projectableNodes,g=Ot.environmentInjector||Ot.ngModuleRef}const k=E?r:new zu(Gn(r)),$=a||this.parentInjector;if(!g&&null==k.ngModule){const cn=(E?$:this.parentInjector).get(mu,null);cn&&(g=cn)}Gn(k.componentType??{});const qe=k.create($,l,null,g);return this.insertImpl(qe.hostView,R,false),qe}insert(r,s){return this.insertImpl(r,s,!1)}insertImpl(r,s,a){const l=r._lView;if(function Du(t){return ci(t[Vn])}(l)){const k=this.indexOf(r);if(-1!==k)this.detach(k);else{const $=l[Vn],te=new oT($,$[ei],$[Vn]);te.detach(te.indexOf(r))}}const E=this._adjustIndex(s),R=this._lContainer;return Ww(R,l,E,!a),r.attachToViewContainerRef(),Cl(yI(R),E,r),r}move(r,s){return this.insert(r,s)}indexOf(r){const s=aT(this._lContainer);return null!==s?s.indexOf(r):-1}remove(r){const s=this._adjustIndex(r,-1),a=kc(this._lContainer,s);a&&(cr(yI(this._lContainer),s),cl(a[Lt],a))}detach(r){const s=this._adjustIndex(r,-1),a=kc(this._lContainer,s);return a&&null!=cr(yI(this._lContainer),s)?new xf(a):null}_adjustIndex(r,s=0){return r??this.length+s}};function aT(t){return t[8]}function yI(t){return t[8]||(t[8]=[])}function uT(t,r){let s;const a=r[t.index];return ci(a)?s=a:(s=Ap(a,r,null,t),r[t.index]=s,Sp(r,s)),cT(s,r,t,a),new oT(s,t,r)}let cT=function lT(t,r,s,a){if(t[Ds])return;let l;l=8&s.type?$r(a):function rD(t,r){const s=t[_n],a=s.createComment(""),l=ms(r,t);return cc(s,ll(s,l),a,function Jf(t,r){return t.nextSibling(r)}(s,l),!1),a}(r,s),t[Ds]=l};class II{constructor(r){this.queryList=r,this.matches=null}clone(){return new II(this.queryList)}setDirty(){this.queryList.setDirty()}}class EI{constructor(r=[]){this.queries=r}createEmbeddedView(r){const s=r.queries;if(null!==s){const a=null!==r.contentQueries?r.contentQueries[0]:s.length,l=[];for(let g=0;g<a;g++){const E=s.getByIndex(g);l.push(this.queries[E.indexInDeclarationView].clone())}return new EI(l)}return null}insertView(r){this.dirtyQueriesWithMatches(r)}detachView(r){this.dirtyQueriesWithMatches(r)}dirtyQueriesWithMatches(r){for(let s=0;s<this.queries.length;s++)null!==yT(r,s).matches&&this.queries[s].setDirty()}}class dT{constructor(r,s,a=null){this.predicate=r,this.flags=s,this.read=a}}class TI{constructor(r=[]){this.queries=r}elementStart(r,s){for(let a=0;a<this.queries.length;a++)this.queries[a].elementStart(r,s)}elementEnd(r){for(let s=0;s<this.queries.length;s++)this.queries[s].elementEnd(r)}embeddedTView(r){let s=null;for(let a=0;a<this.length;a++){const l=null!==s?s.length:0,g=this.getByIndex(a).embeddedTView(r,l);g&&(g.indexInDeclarationView=a,null!==s?s.push(g):s=[g])}return null!==s?new TI(s):null}template(r,s){for(let a=0;a<this.queries.length;a++)this.queries[a].template(r,s)}getByIndex(r){return this.queries[r]}get length(){return this.queries.length}track(r){this.queries.push(r)}}class bI{constructor(r,s=-1){this.metadata=r,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=s}elementStart(r,s){this.isApplyingToNode(s)&&this.matchTNode(r,s)}elementEnd(r){this._declarationNodeIndex===r.index&&(this._appliesToNextNode=!1)}template(r,s){this.elementStart(r,s)}embeddedTView(r,s){return this.isApplyingToNode(r)?(this.crossesNgTemplate=!0,this.addMatch(-r.index,s),new bI(this.metadata)):null}isApplyingToNode(r){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const s=this._declarationNodeIndex;let a=r.parent;for(;null!==a&&8&a.type&&a.index!==s;)a=a.parent;return s===(null!==a?a.index:-1)}return this._appliesToNextNode}matchTNode(r,s){const a=this.metadata.predicate;if(Array.isArray(a))for(let l=0;l<a.length;l++){const g=a[l];this.matchTNodeWithReadOption(r,s,oD(s,g)),this.matchTNodeWithReadOption(r,s,jn(s,r,g,!1,!1))}else a===ov?4&s.type&&this.matchTNodeWithReadOption(r,s,-1):this.matchTNodeWithReadOption(r,s,jn(s,r,a,!1,!1))}matchTNodeWithReadOption(r,s,a){if(null!==a){const l=this.metadata.read;if(null!==l)if(l===Bl||l===$y||l===ov&&4&s.type)this.addMatch(s.index,-2);else{const g=jn(s,r,l,!1,!1);null!==g&&this.addMatch(s.index,g)}else this.addMatch(s.index,a)}}addMatch(r,s){null===this.matches?this.matches=[r,s]:this.matches.push(r,s)}}function oD(t,r){const s=t.localNames;if(null!==s)for(let a=0;a<s.length;a+=2)if(s[a]===r)return s[a+1];return null}function uD(t,r,s,a){return-1===s?function aD(t,r){return 11&t.type?qd(t,r):4&t.type?Gy(t,r):null}(r,t):-2===s?function cD(t,r,s){return s===Bl?qd(r,t):s===ov?Gy(r,t):s===$y?uT(r,t):void 0}(t,r,a):ji(t,t[Lt],s,r)}function hT(t,r,s,a){const l=r[qi].queries[a];if(null===l.matches){const g=t.data,E=s.matches,R=[];for(let k=0;k<E.length;k+=2){const $=E[k];R.push($<0?null:uD(r,g[$],E[k+1],s.metadata.read))}l.matches=R}return l.matches}function wI(t,r,s,a){const l=t.queries.getByIndex(s),g=l.matches;if(null!==g){const E=hT(t,r,l,s);for(let R=0;R<g.length;R+=2){const k=g[R];if(k>0)a.push(E[R/2]);else{const $=g[R+1],te=r[-k];for(let he=Hr;he<te.length;he++){const ke=te[he];ke[er]===ke[Vn]&&wI(ke[Lt],ke,$,a)}if(null!==te[Js]){const he=te[Js];for(let ke=0;ke<he.length;ke++){const qe=he[ke];wI(qe[Lt],qe,$,a)}}}}}return a}function fT(t){const r=Tt(),s=ir(),a=S();M(a+1);const l=yT(s,a);if(t.dirty&&function ru(t){return 4==(4&t[En])}(r)===(2==(2&l.metadata.flags))){if(null===l.matches)t.reset([]);else{const g=l.crossesNgTemplate?wI(s,r,a,[]):hT(s,r,l,a);t.reset(g,km),t.notifyOnChanges()}return!0}return!1}function pT(t,r,s){const a=ir();a.firstCreatePass&&(vT(a,new dT(t,r,s),-1),2==(2&r)&&(a.staticViewQueries=!0)),_T(a,Tt(),r)}function gT(t,r,s,a){const l=ir();if(l.firstCreatePass){const g=Ui();vT(l,new dT(r,s,a),g.index),function dD(t,r){const s=t.contentQueries||(t.contentQueries=[]);r!==(s.length?s[s.length-1]:-1)&&s.push(t.queries.length-1,r)}(l,t),2==(2&s)&&(l.staticContentQueries=!0)}_T(l,Tt(),s)}function mT(){return function lD(t,r){return t[qi].queries[r].queryList}(Tt(),S())}function _T(t,r,s){const a=new vI(4==(4&s));(function Mv(t,r,s,a){const l=xg(r);l.push(s),t.firstCreatePass&&__(t).push(a,l.length-1)})(t,r,a,a.destroy),null===r[qi]&&(r[qi]=new EI),r[qi].queries.push(new II(a))}function vT(t,r,s){null===t.queries&&(t.queries=new TI),t.queries.track(new bI(r,s))}function yT(t,r){return t.queries.getByIndex(r)}function IT(t,r){return Gy(t,r)}function DI(t){return!!Yr(t)}const LT=new Yt("Application Initializer");let NI=(()=>{class t{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((s,a)=>{this.resolve=s,this.reject=a}),this.appInits=Qt(LT,{optional:!0})??[]}runInitializers(){if(this.initialized)return;const s=[];for(const l of this.appInits){const g=l();if(k_(g))s.push(g);else if(gy(g)){const E=new Promise((R,k)=>{g.subscribe({complete:R,error:k})});s.push(E)}}const a=()=>{this.done=!0,this.resolve()};Promise.all(s).then(()=>{a()}).catch(l=>{this.reject(l)}),0===s.length&&a(),this.initialized=!0}static#e=this.\u0275fac=function(a){return new(a||t)};static#t=this.\u0275prov=on({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),VT=(()=>{class t{log(s){console.log(s)}warn(s){console.warn(s)}static#e=this.\u0275fac=function(a){return new(a||t)};static#t=this.\u0275prov=on({token:t,factory:t.\u0275fac,providedIn:"platform"})}return t})();const Wy=new Yt("LocaleId",{providedIn:"root",factory:()=>Qt(Wy,Rt.Optional|Rt.SkipSelf)||function PD(){return typeof $localize<"u"&&$localize.locale||hm}()}),MD=new Yt("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});let BT=(()=>{class t{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new De.X(!1)}add(){this.hasPendingTasks.next(!0);const s=this.taskId++;return this.pendingTasks.add(s),s}remove(s){this.pendingTasks.delete(s),0===this.pendingTasks.size&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks.next(!1)}static#e=this.\u0275fac=function(a){return new(a||t)};static#t=this.\u0275prov=on({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();class kD{constructor(r,s){this.ngModuleFactory=r,this.componentFactories=s}}let FD=(()=>{class t{compileModuleSync(s){return new mI(s)}compileModuleAsync(s){return Promise.resolve(this.compileModuleSync(s))}compileModuleAndAllComponentsSync(s){const a=this.compileModuleSync(s),g=_l(Yr(s).declarations).reduce((E,R)=>{const k=Gn(R);return k&&E.push(new zu(k)),E},[]);return new kD(a,g)}compileModuleAndAllComponentsAsync(s){return Promise.resolve(this.compileModuleAndAllComponentsSync(s))}clearCache(){}clearCacheFor(s){}getModuleId(s){}static#e=this.\u0275fac=function(a){return new(a||t)};static#t=this.\u0275prov=on({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();const HT=new Yt(""),$T=new Yt("");let MI,iC=(()=>{class t{constructor(s,a,l){this._ngZone=s,this.registry=a,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,MI||(function sC(t){MI=t}(l),l.addToWindow(a)),this._watchAngularEvents(),s.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Vo.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;0!==this._callbacks.length;){let s=this._callbacks.pop();clearTimeout(s.timeoutId),s.doneCb(this._didWork)}this._didWork=!1});else{let s=this.getPendingTasks();this._callbacks=this._callbacks.filter(a=>!a.updateCb||!a.updateCb(s)||(clearTimeout(a.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(s=>({source:s.source,creationLocation:s.creationLocation,data:s.data})):[]}addCallback(s,a,l){let g=-1;a&&a>0&&(g=setTimeout(()=>{this._callbacks=this._callbacks.filter(E=>E.timeoutId!==g),s(this._didWork,this.getPendingTasks())},a)),this._callbacks.push({doneCb:s,timeoutId:g,updateCb:l})}whenStable(s,a,l){if(l&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(s,a,l),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(s){this.registry.registerApplication(s,this)}unregisterApplication(s){this.registry.unregisterApplication(s)}findProviders(s,a,l){return[]}static#e=this.\u0275fac=function(a){return new(a||t)(Bt(Vo),Bt(zT),Bt($T))};static#t=this.\u0275prov=on({token:t,factory:t.\u0275fac})}return t})(),zT=(()=>{class t{constructor(){this._applications=new Map}registerApplication(s,a){this._applications.set(s,a)}unregisterApplication(s){this._applications.delete(s)}unregisterAllApplications(){this._applications.clear()}getTestability(s){return this._applications.get(s)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(s,a=!0){return MI?.findTestabilityInTree(this,s,a)??null}static#e=this.\u0275fac=function(a){return new(a||t)};static#t=this.\u0275prov=on({token:t,factory:t.\u0275fac,providedIn:"platform"})}return t})(),qf=null;const WT=new Yt("AllowMultipleToken"),xI=new Yt("PlatformDestroyListeners"),kI=new Yt("appBootstrapListener");class uC{constructor(r,s){this.name=r,this.token=s}}function YT(t,r,s=[]){const a=`Platform: ${r}`,l=new Yt(a);return(g=[])=>{let E=FI();if(!E||E.injector.get(WT,!1)){const R=[...s,...g,{provide:l,useValue:!0}];t?t(R):function cC(t){if(qf&&!qf.get(WT,!1))throw new Le(400,!1);(function qT(){!function Kc(t){eo=t}(()=>{throw new Le(600,!1)})})(),qf=t;const r=t.get(QT);(function KT(t){t.get(Rh,null)?.forEach(s=>s())})(t)}(function ZT(t=[],r){return ml.create({name:r,providers:[{provide:dl,useValue:"platform"},{provide:xI,useValue:new Set([()=>qf=null])},...t]})}(R,a))}return function dC(t){const r=FI();if(!r)throw new Le(401,!1);return r}()}}function FI(){return qf?.get(QT)??null}let QT=(()=>{class t{constructor(s){this._injector=s,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(s,a){const l=function hC(t="zone.js",r){return"noop"===t?new c0:"zone.js"===t?new Vo(r):t}(a?.ngZone,function JT(t){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:t?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:t?.runCoalescing??!1}}({eventCoalescing:a?.ngZoneEventCoalescing,runCoalescing:a?.ngZoneRunCoalescing}));return l.run(()=>{const g=function Tw(t,r,s){return new gI(t,r,s)}(s.moduleType,this.injector,function rb(t){return[{provide:Vo,useFactory:t},{provide:Kn,multi:!0,useFactory:()=>{const r=Qt(pC,{optional:!0});return()=>r.initialize()}},{provide:nb,useFactory:fC},{provide:Tv,useFactory:vg}]}(()=>l)),E=g.injector.get(jl,null);return l.runOutsideAngular(()=>{const R=l.onError.subscribe({next:k=>{E.handleError(k)}});g.onDestroy(()=>{Ky(this._modules,g),R.unsubscribe()})}),function XT(t,r,s){try{const a=s();return k_(a)?a.catch(l=>{throw r.runOutsideAngular(()=>t.handleError(l)),l}):a}catch(a){throw r.runOutsideAngular(()=>t.handleError(a)),a}}(E,l,()=>{const R=g.injector.get(NI);return R.runInitializers(),R.donePromise.then(()=>(cE(g.injector.get(Wy,hm)||hm),this._moduleDoBootstrap(g),g))})})}bootstrapModule(s,a=[]){const l=eb({},a);return function oC(t,r,s){const a=new mI(s);return Promise.resolve(a)}(0,0,s).then(g=>this.bootstrapModuleFactory(g,l))}_moduleDoBootstrap(s){const a=s.injector.get(gm);if(s._bootstrapComponents.length>0)s._bootstrapComponents.forEach(l=>a.bootstrap(l));else{if(!s.instance.ngDoBootstrap)throw new Le(-403,!1);s.instance.ngDoBootstrap(a)}this._modules.push(s)}onDestroy(s){this._destroyListeners.push(s)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Le(404,!1);this._modules.slice().forEach(a=>a.destroy()),this._destroyListeners.forEach(a=>a());const s=this._injector.get(xI,null);s&&(s.forEach(a=>a()),s.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}static#e=this.\u0275fac=function(a){return new(a||t)(Bt(ml))};static#t=this.\u0275prov=on({token:t,factory:t.\u0275fac,providedIn:"platform"})}return t})();function eb(t,r){return Array.isArray(r)?r.reduce(eb,t):{...t,...r}}let gm=(()=>{class t{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=Qt(nb),this.zoneIsStable=Qt(Tv),this.componentTypes=[],this.components=[],this.isStable=Qt(BT).hasPendingTasks.pipe((0,I.w)(s=>s?(0,ye.of)(!1):this.zoneIsStable),(0,ze.x)(),(0,Ne.B)()),this._injector=Qt(mu)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(s,a){const l=s instanceof pv;if(!this._injector.get(NI).done)throw!l&&Cr(s),new Le(405,!1);let E;E=l?s:this._injector.get(hg).resolveComponentFactory(s),this.componentTypes.push(E.componentType);const R=function aC(t){return t.isBoundToModule}(E)?void 0:this._injector.get(Kp),$=E.create(ml.NULL,[],a||E.selector,R),te=$.location.nativeElement,he=$.injector.get(HT,null);return he?.registerApplication(te),$.onDestroy(()=>{this.detachView($.hostView),Ky(this.components,$),he?.unregisterApplication(te)}),this._loadComponent($),$}tick(){if(this._runningTick)throw new Le(101,!1);try{this._runningTick=!0;for(let s of this._views)s.detectChanges()}catch(s){this.internalErrorHandler(s)}finally{this._runningTick=!1}}attachView(s){const a=s;this._views.push(a),a.attachToAppRef(this)}detachView(s){const a=s;Ky(this._views,a),a.detachFromAppRef()}_loadComponent(s){this.attachView(s.hostView),this.tick(),this.components.push(s);const a=this._injector.get(kI,[]);a.push(...this._bootstrapListeners),a.forEach(l=>l(s))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(s=>s()),this._views.slice().forEach(s=>s.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(s){return this._destroyListeners.push(s),()=>Ky(this._destroyListeners,s)}destroy(){if(this._destroyed)throw new Le(406,!1);const s=this._injector;s.destroy&&!s.destroyed&&s.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static#e=this.\u0275fac=function(a){return new(a||t)};static#t=this.\u0275prov=on({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function Ky(t,r){const s=t.indexOf(r);s>-1&&t.splice(s,1)}const nb=new Yt("",{providedIn:"root",factory:()=>Qt(jl).handleError.bind(void 0)});function fC(){const t=Qt(Vo),r=Qt(jl);return s=>t.runOutsideAngular(()=>r.handleError(s))}let pC=(()=>{class t{constructor(){this.zone=Qt(Vo),this.applicationRef=Qt(gm)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static#e=this.\u0275fac=function(a){return new(a||t)};static#t=this.\u0275prov=on({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function mC(){return!1}let _C=(()=>{class t{static#e=this.__NG_ELEMENT_ID__=vC}return t})();function vC(t){return function yC(t,r,s){if(gs(t)&&!s){const a=Lr(t.index,r);return new xf(a,a)}return 47&t.type?new xf(r[ti],r):null}(Ui(),Tt(),16==(16&t))}class ab{constructor(){}supports(r){return jg(r)}create(r){return new DC(r)}}const wC=(t,r)=>r;class DC{constructor(r){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=r||wC}forEachItem(r){let s;for(s=this._itHead;null!==s;s=s._next)r(s)}forEachOperation(r){let s=this._itHead,a=this._removalsHead,l=0,g=null;for(;s||a;){const E=!a||s&&s.currentIndex<cb(a,l,g)?s:a,R=cb(E,l,g),k=E.currentIndex;if(E===a)l--,a=a._nextRemoved;else if(s=s._next,null==E.previousIndex)l++;else{g||(g=[]);const $=R-l,te=k-l;if($!=te){for(let ke=0;ke<$;ke++){const qe=ke<g.length?g[ke]:g[ke]=0,gt=qe+ke;te<=gt&&gt<$&&(g[ke]=qe+1)}g[E.previousIndex]=te-$}}R!==k&&r(E,R,k)}}forEachPreviousItem(r){let s;for(s=this._previousItHead;null!==s;s=s._nextPrevious)r(s)}forEachAddedItem(r){let s;for(s=this._additionsHead;null!==s;s=s._nextAdded)r(s)}forEachMovedItem(r){let s;for(s=this._movesHead;null!==s;s=s._nextMoved)r(s)}forEachRemovedItem(r){let s;for(s=this._removalsHead;null!==s;s=s._nextRemoved)r(s)}forEachIdentityChange(r){let s;for(s=this._identityChangesHead;null!==s;s=s._nextIdentityChange)r(s)}diff(r){if(null==r&&(r=[]),!jg(r))throw new Le(900,!1);return this.check(r)?this:null}onDestroy(){}check(r){this._reset();let l,g,E,s=this._itHead,a=!1;if(Array.isArray(r)){this.length=r.length;for(let R=0;R<this.length;R++)g=r[R],E=this._trackByFn(R,g),null!==s&&Object.is(s.trackById,E)?(a&&(s=this._verifyReinsertion(s,g,E,R)),Object.is(s.item,g)||this._addIdentityChange(s,g)):(s=this._mismatch(s,g,E,R),a=!0),s=s._next}else l=0,function dd(t,r){if(Array.isArray(t))for(let s=0;s<t.length;s++)r(t[s]);else{const s=t[Symbol.iterator]();let a;for(;!(a=s.next()).done;)r(a.value)}}(r,R=>{E=this._trackByFn(l,R),null!==s&&Object.is(s.trackById,E)?(a&&(s=this._verifyReinsertion(s,R,E,l)),Object.is(s.item,R)||this._addIdentityChange(s,R)):(s=this._mismatch(s,R,E,l),a=!0),s=s._next,l++}),this.length=l;return this._truncate(s),this.collection=r,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let r;for(r=this._previousItHead=this._itHead;null!==r;r=r._next)r._nextPrevious=r._next;for(r=this._additionsHead;null!==r;r=r._nextAdded)r.previousIndex=r.currentIndex;for(this._additionsHead=this._additionsTail=null,r=this._movesHead;null!==r;r=r._nextMoved)r.previousIndex=r.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(r,s,a,l){let g;return null===r?g=this._itTail:(g=r._prev,this._remove(r)),null!==(r=null===this._unlinkedRecords?null:this._unlinkedRecords.get(a,null))?(Object.is(r.item,s)||this._addIdentityChange(r,s),this._reinsertAfter(r,g,l)):null!==(r=null===this._linkedRecords?null:this._linkedRecords.get(a,l))?(Object.is(r.item,s)||this._addIdentityChange(r,s),this._moveAfter(r,g,l)):r=this._addAfter(new CC(s,a),g,l),r}_verifyReinsertion(r,s,a,l){let g=null===this._unlinkedRecords?null:this._unlinkedRecords.get(a,null);return null!==g?r=this._reinsertAfter(g,r._prev,l):r.currentIndex!=l&&(r.currentIndex=l,this._addToMoves(r,l)),r}_truncate(r){for(;null!==r;){const s=r._next;this._addToRemovals(this._unlink(r)),r=s}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(r,s,a){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(r);const l=r._prevRemoved,g=r._nextRemoved;return null===l?this._removalsHead=g:l._nextRemoved=g,null===g?this._removalsTail=l:g._prevRemoved=l,this._insertAfter(r,s,a),this._addToMoves(r,a),r}_moveAfter(r,s,a){return this._unlink(r),this._insertAfter(r,s,a),this._addToMoves(r,a),r}_addAfter(r,s,a){return this._insertAfter(r,s,a),this._additionsTail=null===this._additionsTail?this._additionsHead=r:this._additionsTail._nextAdded=r,r}_insertAfter(r,s,a){const l=null===s?this._itHead:s._next;return r._next=l,r._prev=s,null===l?this._itTail=r:l._prev=r,null===s?this._itHead=r:s._next=r,null===this._linkedRecords&&(this._linkedRecords=new ub),this._linkedRecords.put(r),r.currentIndex=a,r}_remove(r){return this._addToRemovals(this._unlink(r))}_unlink(r){null!==this._linkedRecords&&this._linkedRecords.remove(r);const s=r._prev,a=r._next;return null===s?this._itHead=a:s._next=a,null===a?this._itTail=s:a._prev=s,r}_addToMoves(r,s){return r.previousIndex===s||(this._movesTail=null===this._movesTail?this._movesHead=r:this._movesTail._nextMoved=r),r}_addToRemovals(r){return null===this._unlinkedRecords&&(this._unlinkedRecords=new ub),this._unlinkedRecords.put(r),r.currentIndex=null,r._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=r,r._prevRemoved=null):(r._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=r),r}_addIdentityChange(r,s){return r.item=s,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=r:this._identityChangesTail._nextIdentityChange=r,r}}class CC{constructor(r,s){this.item=r,this.trackById=s,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class AC{constructor(){this._head=null,this._tail=null}add(r){null===this._head?(this._head=this._tail=r,r._nextDup=null,r._prevDup=null):(this._tail._nextDup=r,r._prevDup=this._tail,r._nextDup=null,this._tail=r)}get(r,s){let a;for(a=this._head;null!==a;a=a._nextDup)if((null===s||s<=a.currentIndex)&&Object.is(a.trackById,r))return a;return null}remove(r){const s=r._prevDup,a=r._nextDup;return null===s?this._head=a:s._nextDup=a,null===a?this._tail=s:a._prevDup=s,null===this._head}}class ub{constructor(){this.map=new Map}put(r){const s=r.trackById;let a=this.map.get(s);a||(a=new AC,this.map.set(s,a)),a.add(r)}get(r,s){const l=this.map.get(r);return l?l.get(r,s):null}remove(r){const s=r.trackById;return this.map.get(s).remove(r)&&this.map.delete(s),r}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function cb(t,r,s){const a=t.previousIndex;if(null===a)return a;let l=0;return s&&a<s.length&&(l=s[a]),a+r+l}class lb{constructor(){}supports(r){return r instanceof Map||ny(r)}create(){return new SC}}class SC{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(r){let s;for(s=this._mapHead;null!==s;s=s._next)r(s)}forEachPreviousItem(r){let s;for(s=this._previousMapHead;null!==s;s=s._nextPrevious)r(s)}forEachChangedItem(r){let s;for(s=this._changesHead;null!==s;s=s._nextChanged)r(s)}forEachAddedItem(r){let s;for(s=this._additionsHead;null!==s;s=s._nextAdded)r(s)}forEachRemovedItem(r){let s;for(s=this._removalsHead;null!==s;s=s._nextRemoved)r(s)}diff(r){if(r){if(!(r instanceof Map||ny(r)))throw new Le(900,!1)}else r=new Map;return this.check(r)?this:null}onDestroy(){}check(r){this._reset();let s=this._mapHead;if(this._appendAfter=null,this._forEach(r,(a,l)=>{if(s&&s.key===l)this._maybeAddToChanges(s,a),this._appendAfter=s,s=s._next;else{const g=this._getOrCreateRecordForKey(l,a);s=this._insertBeforeOrAppend(s,g)}}),s){s._prev&&(s._prev._next=null),this._removalsHead=s;for(let a=s;null!==a;a=a._nextRemoved)a===this._mapHead&&(this._mapHead=null),this._records.delete(a.key),a._nextRemoved=a._next,a.previousValue=a.currentValue,a.currentValue=null,a._prev=null,a._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(r,s){if(r){const a=r._prev;return s._next=r,s._prev=a,r._prev=s,a&&(a._next=s),r===this._mapHead&&(this._mapHead=s),this._appendAfter=r,r}return this._appendAfter?(this._appendAfter._next=s,s._prev=this._appendAfter):this._mapHead=s,this._appendAfter=s,null}_getOrCreateRecordForKey(r,s){if(this._records.has(r)){const l=this._records.get(r);this._maybeAddToChanges(l,s);const g=l._prev,E=l._next;return g&&(g._next=E),E&&(E._prev=g),l._next=null,l._prev=null,l}const a=new RC(r);return this._records.set(r,a),a.currentValue=s,this._addToAdditions(a),a}_reset(){if(this.isDirty){let r;for(this._previousMapHead=this._mapHead,r=this._previousMapHead;null!==r;r=r._next)r._nextPrevious=r._next;for(r=this._changesHead;null!==r;r=r._nextChanged)r.previousValue=r.currentValue;for(r=this._additionsHead;null!=r;r=r._nextAdded)r.previousValue=r.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(r,s){Object.is(s,r.currentValue)||(r.previousValue=r.currentValue,r.currentValue=s,this._addToChanges(r))}_addToAdditions(r){null===this._additionsHead?this._additionsHead=this._additionsTail=r:(this._additionsTail._nextAdded=r,this._additionsTail=r)}_addToChanges(r){null===this._changesHead?this._changesHead=this._changesTail=r:(this._changesTail._nextChanged=r,this._changesTail=r)}_forEach(r,s){r instanceof Map?r.forEach(s):Object.keys(r).forEach(a=>s(r[a],a))}}class RC{constructor(r){this.key=r,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function db(){return new jI([new ab])}let jI=(()=>{class t{static#e=this.\u0275prov=on({token:t,providedIn:"root",factory:db});constructor(s){this.factories=s}static create(s,a){if(null!=a){const l=a.factories.slice();s=s.concat(l)}return new t(s)}static extend(s){return{provide:t,useFactory:a=>t.create(s,a||db()),deps:[[t,new Lu,new Aa]]}}find(s){const a=this.factories.find(l=>l.supports(s));if(null!=a)return a;throw new Le(901,!1)}}return t})();function hb(){return new GI([new lb])}let GI=(()=>{class t{static#e=this.\u0275prov=on({token:t,providedIn:"root",factory:hb});constructor(s){this.factories=s}static create(s,a){if(a){const l=a.factories.slice();s=s.concat(l)}return new t(s)}static extend(s){return{provide:t,useFactory:a=>t.create(s,a||hb()),deps:[[t,new Lu,new Aa]]}}find(s){const a=this.factories.find(l=>l.supports(s));if(a)return a;throw new Le(901,!1)}}return t})();const PC=YT(null,"core",[]);let MC=(()=>{class t{constructor(s){}static#e=this.\u0275fac=function(a){return new(a||t)(Bt(gm))};static#t=this.\u0275mod=xs({type:t});static#n=this.\u0275inj=xn({})}return t})();function $C(t){return"boolean"==typeof t?t:null!=t&&"false"!==t}function WC(t,r){const s=Gn(t),a=r.elementInjector||gu();return new zu(s).create(a,r.projectableNodes,r.hostElement,r.environmentInjector)}function qC(t){const r=Gn(t);if(!r)return null;const s=new zu(r);return{get selector(){return s.selector},get type(){return s.componentType},get inputs(){return s.inputs},get outputs(){return s.outputs},get ngContentSelectors(){return s.ngContentSelectors},get isStandalone(){return r.standalone},get isSignal(){return r.signals}}}},7213:(zt,Ye,H)=>{H.d(Ye,{zQ:()=>gr,rT:()=>Kt,f7:()=>$n,L6:()=>mt,_Q:()=>ue,lh:()=>Et,Qv:()=>at,nw:()=>Dn}),H(2872);var fe=H(6814),oe=H(5879),Ce=H(8326),De=H(7217),ye=H(8645),Ne=H(2096),I=H(5592),ze=H(2459),pe=H(3019),me=H(3093),xe=H(4664),dt=H(7398),it=H(4552);class It extends ye.x{constructor(Pt=1/0,Ie=1/0,we=it.l){super(),this._bufferSize=Pt,this._windowTime=Ie,this._timestampProvider=we,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=Ie===1/0,this._bufferSize=Math.max(1,Pt),this._windowTime=Math.max(1,Ie)}next(Pt){const{isStopped:Ie,_buffer:we,_infiniteTimeWindow:He,_timestampProvider:Pe,_windowTime:Fe}=this;Ie||(we.push(Pt),!He&&we.push(Pe.now()+Fe)),this._trimBuffer(),super.next(Pt)}_subscribe(Pt){this._throwIfClosed(),this._trimBuffer();const Ie=this._innerSubscribe(Pt),{_infiniteTimeWindow:we,_buffer:He}=this,Pe=He.slice();for(let Fe=0;Fe<Pe.length&&!Pt.closed;Fe+=we?1:2)Pt.next(Pe[Fe]);return this._checkFinalizedStatuses(Pt),Ie}_trimBuffer(){const{_bufferSize:Pt,_timestampProvider:Ie,_buffer:we,_infiniteTimeWindow:He}=this,Pe=(He?1:2)*Pt;if(Pt<1/0&&Pe<we.length&&we.splice(0,we.length-Pe),!He){const Fe=Ie.now();let Ze=0;for(let Nt=1;Nt<we.length&&we[Nt]<=Fe;Nt+=2)Ze=Nt;Ze&&we.splice(0,Ze+1)}}}var ct=H(3020);function Ct(Zt,Pt,Ie){let we,He=!1;return Zt&&"object"==typeof Zt?({bufferSize:we=1/0,windowTime:Pt=1/0,refCount:He=!1,scheduler:Ie}=Zt):we=Zt??1/0,(0,ct.B)({connector:()=>new It(we,Pt,Ie),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:He})}var lt=H(1374),Jt=H(4674);function Ve(Zt,Pt){return(0,Jt.m)(Pt)?(0,xe.w)(()=>Zt,Pt):(0,xe.w)(()=>Zt)}var Le=H(5137),$e=H(2181);H(7142);const at=new oe.OlP("angularfire2.auth.use-emulator"),mt=new oe.OlP("angularfire2.auth.settings"),ue=new oe.OlP("angularfire2.auth.tenant-id"),Kt=new oe.OlP("angularfire2.auth.langugage-code"),Et=new oe.OlP("angularfire2.auth.use-device-language"),$n=new oe.OlP("angularfire.auth.persistence"),Dn=(Zt,Pt,Ie,we,He,Pe,Fe,Ze)=>(0,De.cc)(`${Zt.name}.auth`,"AngularFireAuth",Zt.name,()=>{const Nt=Pt.runOutsideAngular(()=>Zt.auth());if(Ie&&Nt.useEmulator(...Ie),we&&(Nt.tenantId=we),Nt.languageCode=He,Pe&&Nt.useDeviceLanguage(),Fe)for(const[wt,nr]of Object.entries(Fe))Nt.settings[wt]=nr;return Ze&&Nt.setPersistence(Ze),Nt},[Ie,we,He,Pe,Fe,Ze]);let gr=(()=>{class Zt{authState;idToken;user;idTokenResult;credential;constructor(Ie,we,He,Pe,Fe,Ze,Nt,wt,nr,Ft,ln,on){const Sn=new ye.x,xn=(0,Ne.of)(void 0).pipe((0,me.Q)(Fe.outsideAngular),(0,xe.w)(()=>Pe.runOutsideAngular(()=>Promise.resolve().then(H.bind(H,2872)))),(0,dt.U)(()=>(0,De.on)(Ie,Pe,we)),(0,dt.U)(Rn=>Dn(Rn,Pe,Ze,wt,nr,Ft,Nt,ln)),Ct({bufferSize:1,refCount:!1}));if((0,fe.PM)(He))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=(0,Ne.of)(null);else{xn.pipe((0,lt.P)()).subscribe();const Rn=xn.pipe((0,xe.w)(je=>je.getRedirectResult().then(ot=>ot,()=>null)),Ce.iC,Ct({bufferSize:1,refCount:!1})),_e=xn.pipe((0,xe.w)(je=>new I.y(ot=>({unsubscribe:Pe.runOutsideAngular(()=>je.onAuthStateChanged(ft=>ot.next(ft),ft=>ot.error(ft),()=>ot.complete()))})))),Se=xn.pipe((0,xe.w)(je=>new I.y(ot=>({unsubscribe:Pe.runOutsideAngular(()=>je.onIdTokenChanged(ft=>ot.next(ft),ft=>ot.error(ft),()=>ot.complete()))}))));this.authState=Rn.pipe(Ve(_e),(0,Le.R)(Fe.outsideAngular),(0,me.Q)(Fe.insideAngular)),this.user=Rn.pipe(Ve(Se),(0,Le.R)(Fe.outsideAngular),(0,me.Q)(Fe.insideAngular)),this.idToken=this.user.pipe((0,xe.w)(je=>je?(0,ze.D)(je.getIdToken()):(0,Ne.of)(null))),this.idTokenResult=this.user.pipe((0,xe.w)(je=>je?(0,ze.D)(je.getIdTokenResult()):(0,Ne.of)(null))),this.credential=(0,pe.T)(Rn,Sn,this.authState.pipe((0,$e.h)(je=>!je))).pipe((0,dt.U)(je=>je?.user?je:null),(0,Le.R)(Fe.outsideAngular),(0,me.Q)(Fe.insideAngular))}return(0,De.pX)(this,xn,Pe,{spy:{apply:(Rn,_e,Se)=>{(Rn.startsWith("signIn")||Rn.startsWith("createUser"))&&Se.then(je=>Sn.next(je))}}})}static \u0275fac=function(we){return new(we||Zt)(oe.LFG(De.Dh),oe.LFG(De.xv,8),oe.LFG(oe.Lbi),oe.LFG(oe.R0b),oe.LFG(Ce.HU),oe.LFG(at,8),oe.LFG(mt,8),oe.LFG(ue,8),oe.LFG(Kt,8),oe.LFG(Et,8),oe.LFG($n,8),oe.LFG(Ce.Rf,8))};static \u0275prov=oe.Yz7({token:Zt,factory:Zt.\u0275fac,providedIn:"any"})}return Zt})()},9027:(zt,Ye,H)=>{H.d(Ye,{ST:()=>Fy});var y=H(6814),fe=H(5879),oe=H(8326),Ce=H(7217),De=H(7213),ye=H(6321),Ne=H(5592),I=H(2459),ze=H(2096),pe=H(7921),me=H(9360),xe=H(8251);function dt(){return(0,me.e)((i,e)=>{let n,o=!1;i.subscribe((0,xe.x)(e,u=>{const h=n;n=u,o&&e.next([h,u]),o=!0}))})}var ue,it=H(7398),It=H(6699),ct=H(3997),Ct=H(2181),Jt=(H(2872),H(3106)),Ve=H(5861),Le=H(534),$e=H(4537),Oe=H(7879),We=H(9058),at=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},mt={},Kt=Kt||{},Et=at||self;function $n(i){var e=typeof i;return"array"==(e="object"!=e?e:i?Array.isArray(i)?"array":e:"null")||"object"==e&&"number"==typeof i.length}function Dn(i){var e=typeof i;return"object"==e&&null!=i||"function"==e}var or="closure_uid_"+(1e9*Math.random()>>>0),Zt=0;function Pt(i,e,n){return i.call.apply(i.bind,arguments)}function Ie(i,e,n){if(!i)throw Error();if(2<arguments.length){var o=Array.prototype.slice.call(arguments,2);return function(){var u=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(u,o),i.apply(e,u)}}return function(){return i.apply(e,arguments)}}function we(i,e,n){return(we=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Pt:Ie).apply(null,arguments)}function He(i,e){var n=Array.prototype.slice.call(arguments,1);return function(){var o=n.slice();return o.push.apply(o,arguments),i.apply(this,o)}}function Pe(i,e){function n(){}n.prototype=e.prototype,i.$=e.prototype,i.prototype=new n,i.prototype.constructor=i,i.ac=function(o,u,h){for(var v=Array(arguments.length-2),P=2;P<arguments.length;P++)v[P-2]=arguments[P];return e.prototype[u].apply(o,v)}}function Fe(){this.s=this.s,this.o=this.o}Fe.prototype.s=!1,Fe.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),0)&&function gr(i){Object.prototype.hasOwnProperty.call(i,or)&&i[or]||(i[or]=++Zt)}(this)},Fe.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const Nt=Array.prototype.indexOf?function(i,e){return Array.prototype.indexOf.call(i,e,void 0)}:function(i,e){if("string"==typeof i)return"string"!=typeof e||1!=e.length?-1:i.indexOf(e,0);for(let n=0;n<i.length;n++)if(n in i&&i[n]===e)return n;return-1};function wt(i){const e=i.length;if(0<e){const n=Array(e);for(let o=0;o<e;o++)n[o]=i[o];return n}return[]}function nr(i,e){for(let n=1;n<arguments.length;n++){const o=arguments[n];if($n(o)){const u=i.length||0,h=o.length||0;i.length=u+h;for(let v=0;v<h;v++)i[u+v]=o[v]}else i.push(o)}}function Ft(i,e){this.type=i,this.g=this.target=e,this.defaultPrevented=!1}Ft.prototype.h=function(){this.defaultPrevented=!0};var ln=function(){if(!Et.addEventListener||!Object.defineProperty)return!1;var i=!1,e=Object.defineProperty({},"passive",{get:function(){i=!0}});try{Et.addEventListener("test",()=>{},e),Et.removeEventListener("test",()=>{},e)}catch{}return i}();function on(i){return/^[\s\xa0]*$/.test(i)}function Sn(){var i=Et.navigator;return i&&(i=i.userAgent)?i:""}function xn(i){return-1!=Sn().indexOf(i)}function Rn(i){return Rn[" "](i),i}Rn[" "]=function(){};var Rt,i,Se=xn("Opera"),je=xn("Trident")||xn("MSIE"),ot=xn("Edge"),ft=ot||je,Mt=xn("Gecko")&&!(-1!=Sn().toLowerCase().indexOf("webkit")&&!xn("Edge"))&&!(xn("Trident")||xn("MSIE"))&&!xn("Edge"),Nn=-1!=Sn().toLowerCase().indexOf("webkit")&&!xn("Edge");function Ln(){var i=Et.document;return i?i.documentMode:void 0}e:{var rn="",hn=(i=Sn(),Mt?/rv:([^\);]+)(\)|;)/.exec(i):ot?/Edge\/([\d\.]+)/.exec(i):je?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(i):Nn?/WebKit\/(\S+)/.exec(i):Se?/(?:Version)[ \/]?(\S+)/.exec(i):void 0);if(hn&&(rn=hn?hn[1]:""),je){var Wt=Ln();if(null!=Wt&&Wt>parseFloat(rn)){Rt=String(Wt);break e}}Rt=rn}var kn=Et.document&&je&&(Ln()||parseInt(Rt,10))||void 0;function Or(i,e){if(Ft.call(this,i?i.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,i){var n=this.type=i.type,o=i.changedTouches&&i.changedTouches.length?i.changedTouches[0]:null;if(this.target=i.target||i.srcElement,this.g=e,e=i.relatedTarget){if(Mt){e:{try{Rn(e.nodeName);var u=!0;break e}catch{}u=!1}u||(e=null)}}else"mouseover"==n?e=i.fromElement:"mouseout"==n&&(e=i.toElement);this.relatedTarget=e,o?(this.clientX=void 0!==o.clientX?o.clientX:o.pageX,this.clientY=void 0!==o.clientY?o.clientY:o.pageY,this.screenX=o.screenX||0,this.screenY=o.screenY||0):(this.clientX=void 0!==i.clientX?i.clientX:i.pageX,this.clientY=void 0!==i.clientY?i.clientY:i.pageY,this.screenX=i.screenX||0,this.screenY=i.screenY||0),this.button=i.button,this.key=i.key||"",this.ctrlKey=i.ctrlKey,this.altKey=i.altKey,this.shiftKey=i.shiftKey,this.metaKey=i.metaKey,this.pointerId=i.pointerId||0,this.pointerType="string"==typeof i.pointerType?i.pointerType:Pr[i.pointerType]||"",this.state=i.state,this.i=i,i.defaultPrevented&&Or.$.h.call(this)}}Pe(Or,Ft);var Pr={2:"touch",3:"pen",4:"mouse"};Or.prototype.h=function(){Or.$.h.call(this);var i=this.i;i.preventDefault?i.preventDefault():i.returnValue=!1};var Yt="closure_listenable_"+(1e6*Math.random()|0),Wr=0;function On(i,e,n,o,u){this.listener=i,this.proxy=null,this.src=e,this.type=n,this.capture=!!o,this.la=u,this.key=++Wr,this.fa=this.ia=!1}function In(i){i.fa=!0,i.listener=null,i.proxy=null,i.src=null,i.la=null}function wi(i,e,n){for(const o in i)e.call(n,i[o],o,i)}function Yi(i){const e={};for(const n in i)e[n]=i[n];return e}const xr="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Xr(i,e){let n,o;for(let u=1;u<arguments.length;u++){for(n in o=arguments[u],o)i[n]=o[n];for(let h=0;h<xr.length;h++)n=xr[h],Object.prototype.hasOwnProperty.call(o,n)&&(i[n]=o[n])}}function pi(i){this.src=i,this.g={},this.h=0}function Gs(i,e){var n=e.type;if(n in i.g){var h,o=i.g[n],u=Nt(o,e);(h=0<=u)&&Array.prototype.splice.call(o,u,1),h&&(In(e),0==i.g[n].length&&(delete i.g[n],i.h--))}}function gi(i,e,n,o){for(var u=0;u<i.length;++u){var h=i[u];if(!h.fa&&h.listener==e&&h.capture==!!n&&h.la==o)return u}return-1}pi.prototype.add=function(i,e,n,o,u){var h=i.toString();(i=this.g[h])||(i=this.g[h]=[],this.h++);var v=gi(i,e,o,u);return-1<v?(e=i[v],n||(e.ia=!1)):((e=new On(e,this.src,h,!!o,u)).ia=n,i.push(e)),e};var Di="closure_lm_"+(1e6*Math.random()|0),Mi={};function Ci(i,e,n,o,u){if(o&&o.once)return re(i,e,n,o,u);if(Array.isArray(e)){for(var h=0;h<e.length;h++)Ci(i,e[h],n,o,u);return null}return n=gn(n),i&&i[Yt]?i.O(e,n,Dn(o)?!!o.capture:!!o,u):Te(i,e,n,!1,o,u)}function Te(i,e,n,o,u,h){if(!e)throw Error("Invalid event type");var v=Dn(u)?!!u.capture:!!u,P=St(i);if(P||(i[Di]=P=new pi(i)),(n=P.add(e,n,o,v,h)).proxy)return n;if(o=function ie(){const e=ht;return function i(n){return e.call(i.src,i.listener,n)}}(),n.proxy=o,o.src=i,o.listener=n,i.addEventListener)ln||(u=v),void 0===u&&(u=!1),i.addEventListener(e.toString(),o,u);else if(i.attachEvent)i.attachEvent(Re(e.toString()),o);else{if(!i.addListener||!i.removeListener)throw Error("addEventListener and attachEvent are unavailable.");i.addListener(o)}return n}function re(i,e,n,o,u){if(Array.isArray(e)){for(var h=0;h<e.length;h++)re(i,e[h],n,o,u);return null}return n=gn(n),i&&i[Yt]?i.P(e,n,Dn(o)?!!o.capture:!!o,u):Te(i,e,n,!0,o,u)}function ne(i,e,n,o,u){if(Array.isArray(e))for(var h=0;h<e.length;h++)ne(i,e[h],n,o,u);else o=Dn(o)?!!o.capture:!!o,n=gn(n),i&&i[Yt]?(i=i.i,(e=String(e).toString())in i.g&&-1<(n=gi(h=i.g[e],n,o,u))&&(In(h[n]),Array.prototype.splice.call(h,n,1),0==h.length&&(delete i.g[e],i.h--))):i&&(i=St(i))&&(e=i.g[e.toString()],i=-1,e&&(i=gi(e,n,o,u)),(n=-1<i?e[i]:null)&&ae(n))}function ae(i){if("number"!=typeof i&&i&&!i.fa){var e=i.src;if(e&&e[Yt])Gs(e.i,i);else{var n=i.type,o=i.proxy;e.removeEventListener?e.removeEventListener(n,o,i.capture):e.detachEvent?e.detachEvent(Re(n),o):e.addListener&&e.removeListener&&e.removeListener(o),(n=St(e))?(Gs(n,i),0==n.h&&(n.src=null,e[Di]=null)):In(i)}}}function Re(i){return i in Mi?Mi[i]:Mi[i]="on"+i}function ht(i,e){if(i.fa)i=!0;else{e=new Or(e,this);var n=i.listener,o=i.la||i.src;i.ia&&ae(i),i=n.call(o,e)}return i}function St(i){return(i=i[Di])instanceof pi?i:null}var Bt="__closure_events_fn_"+(1e9*Math.random()>>>0);function gn(i){return"function"==typeof i?i:(i[Bt]||(i[Bt]=function(e){return i.handleEvent(e)}),i[Bt])}function Qt(){Fe.call(this),this.i=new pi(this),this.S=this,this.J=null}function un(i,e){var n,o=i.J;if(o)for(n=[];o;o=o.J)n.push(o);if(i=i.S,o=e.type||e,"string"==typeof e)e=new Ft(e,i);else if(e instanceof Ft)e.target=e.target||i;else{var u=e;Xr(e=new Ft(o,i),u)}if(u=!0,n)for(var h=n.length-1;0<=h;h--){var v=e.g=n[h];u=Dr(v,o,!0,e)&&u}if(u=Dr(v=e.g=i,o,!0,e)&&u,u=Dr(v,o,!1,e)&&u,n)for(h=0;h<n.length;h++)u=Dr(v=e.g=n[h],o,!1,e)&&u}function Dr(i,e,n,o){if(!(e=i.i.g[String(e)]))return!0;e=e.concat();for(var u=!0,h=0;h<e.length;++h){var v=e[h];if(v&&!v.fa&&v.capture==n){var P=v.listener,V=v.la||v.src;v.ia&&Gs(i.i,v),u=!1!==P.call(V,o)&&u}}return u&&!o.defaultPrevented}Pe(Qt,Fe),Qt.prototype[Yt]=!0,Qt.prototype.removeEventListener=function(i,e,n,o){ne(this,i,e,n,o)},Qt.prototype.N=function(){if(Qt.$.N.call(this),this.i){var e,i=this.i;for(e in i.g){for(var n=i.g[e],o=0;o<n.length;o++)In(n[o]);delete i.g[e],i.h--}}this.J=null},Qt.prototype.O=function(i,e,n,o){return this.i.add(String(i),e,!1,n,o)},Qt.prototype.P=function(i,e,n,o){return this.i.add(String(i),e,!0,n,o)};var qr=Et.JSON.stringify;function Ys(){var i=Kr;let e=null;return i.g&&(e=i.g,i.g=i.g.next,i.g||(i.h=null),e.next=null),e}var Ue=new class Ps{constructor(e,n){this.i=e,this.j=n,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}(()=>new _t,i=>i.reset());class _t{constructor(){this.next=this.g=this.h=null}set(e,n){this.h=e,this.g=n,this.next=null}reset(){this.next=this.g=this.h=null}}function Xt(i){var e=1;i=i.split(":");const n=[];for(;0<e&&i.length;)n.push(i.shift()),e--;return i.length&&n.push(i.join(":")),n}function vn(i){Et.setTimeout(()=>{throw i},0)}let jt,zn=!1,Kr=new class rt{constructor(){this.h=this.g=null}add(e,n){const o=Ue.get();o.set(e,n),this.h?this.h.next=o:this.g=o,this.h=o}},vr=()=>{const i=Et.Promise.resolve(void 0);jt=()=>{i.then(Zs)}};var Zs=()=>{for(var i;i=Ys();){try{i.h.call(i.g)}catch(n){vn(n)}var e=Ue;e.j(i),100>e.h&&(e.h++,i.next=e.g,e.g=i)}zn=!1};function xi(i,e){Qt.call(this),this.h=i||1,this.g=e||Et,this.j=we(this.qb,this),this.l=Date.now()}function hs(i){i.ga=!1,i.T&&(i.g.clearTimeout(i.T),i.T=null)}function Ma(i,e,n){if("function"==typeof i)n&&(i=we(i,n));else{if(!i||"function"!=typeof i.handleEvent)throw Error("Invalid listener argument");i=we(i.handleEvent,i)}return 2147483647<Number(e)?-1:Et.setTimeout(i,e||0)}function ra(i){i.g=Ma(()=>{i.g=null,i.i&&(i.i=!1,ra(i))},i.j);const e=i.h;i.h=null,i.m.apply(null,e)}Pe(xi,Qt),(ue=xi.prototype).ga=!1,ue.T=null,ue.qb=function(){if(this.ga){var i=Date.now()-this.l;0<i&&i<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-i):(this.T&&(this.g.clearTimeout(this.T),this.T=null),un(this,"tick"),this.ga&&(hs(this),this.start()))}},ue.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},ue.N=function(){xi.$.N.call(this),hs(this),delete this.g};class ha extends Fe{constructor(e,n){super(),this.m=e,this.j=n,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:ra(this)}N(){super.N(),this.g&&(Et.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Cn(i){Fe.call(this),this.h=i,this.g={}}Pe(Cn,Fe);var Qa=[];function Hs(i,e,n,o){Array.isArray(n)||(n&&(Qa[0]=n.toString()),n=Qa);for(var u=0;u<n.length;u++){var h=Ci(e,n[u],o||i.handleEvent,!1,i.h||i);if(!h)break;i.g[h.key]=h}}function Ms(i){wi(i.g,function(e,n){this.g.hasOwnProperty(n)&&ae(e)},i),i.g={}}function Qs(){this.g=!0}function Do(i,e,n,o){i.info(function(){return"XMLHTTP TEXT ("+e+"): "+function ar(i,e){if(!i.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n)for(i=0;i<n.length;i++)if(Array.isArray(n[i])){var o=n[i];if(!(2>o.length)){var u=o[1];if(Array.isArray(u)&&!(1>u.length)){var h=u[0];if("noop"!=h&&"stop"!=h&&"close"!=h)for(var v=1;v<u.length;v++)u[v]=""}}}return qr(n)}catch{return e}}(i,n)+(o?" "+o:"")})}Cn.prototype.N=function(){Cn.$.N.call(this),Ms(this)},Cn.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Qs.prototype.Ea=function(){this.g=!1},Qs.prototype.info=function(){};var ur={},jr=null;function zi(){return jr=jr||new Qt}function Zi(i){Ft.call(this,ur.Ta,i)}function Fi(i){const e=zi();un(e,new Zi(e))}function co(i,e){Ft.call(this,ur.STAT_EVENT,i),this.stat=e}function Ai(i){const e=zi();un(e,new co(e,i))}function yu(i,e){Ft.call(this,ur.Ua,i),this.size=e}function mi(i,e){if("function"!=typeof i)throw Error("Fn must not be null and must be a function");return Et.setTimeout(function(){i()},e)}ur.Ta="serverreachability",Pe(Zi,Ft),ur.STAT_EVENT="statevent",Pe(co,Ft),ur.Ua="timingevent",Pe(yu,Ft);var Ja={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},fa={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function xa(){}function ka(){}xa.prototype.h=null;var pa,xs={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function Uo(){Ft.call(this,"d")}function lo(){Ft.call(this,"c")}function Is(){}function Gn(i,e,n,o){this.l=i,this.j=e,this.m=n,this.W=o||1,this.U=new Cn(this),this.P=ri,this.V=new xi(i=ft?125:void 0),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new _i}function _i(){this.i=null,this.g="",this.h=!1}Pe(Uo,Ft),Pe(lo,Ft),Pe(Is,xa),Is.prototype.g=function(){return new XMLHttpRequest},Is.prototype.i=function(){return{}},pa=new Is;var ri=45e3,Cr={},Yr={};function ai(i,e,n){i.L=1,i.v=ks(yi(e)),i.s=n,i.S=!0,Co(i,null)}function Co(i,e){i.G=Date.now(),hr(i),i.A=yi(i.v);var n=i.A,o=i.W;Array.isArray(o)||(o=[String(o)]),jo(n.i,"t",o),i.C=0,n=i.l.J,i.h=new _i,i.g=tu(i.l,n?e:null,!i.s),0<i.O&&(i.M=new ha(we(i.Pa,i,i.g),i.O)),Hs(i.U,i.g,"readystatechange",i.nb),e=i.I?Yi(i.I):{},i.s?(i.u||(i.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",i.g.ha(i.A,i.u,i.s,e)):(i.u="GET",i.g.ha(i.A,i.u,null,e)),Fi(),function ns(i,e,n,o,u,h){i.info(function(){if(i.g)if(h)for(var v="",P=h.split("&"),V=0;V<P.length;V++){var z=P[V].split("=");if(1<z.length){var ee=z[0];z=z[1];var le=ee.split("_");v=2<=le.length&&"type"==le[1]?v+(ee+"=")+z+"&":v+(ee+"=redacted&")}}else v=null;else v=h;return"XMLHTTP REQ ("+o+") [attempt "+u+"]: "+e+"\n"+n+"\n"+v})}(i.j,i.u,i.A,i.m,i.W,i.s)}function kr(i){return!!i.g&&"GET"==i.u&&2!=i.L&&i.l.Ha}function Es(i,e,n){let u,o=!0;for(;!i.J&&i.C<n.length;){if(u=$s(i,n),u==Yr){4==e&&(i.o=4,Ai(14),o=!1),Do(i.j,i.m,null,"[Incomplete Response]");break}if(u==Cr){i.o=4,Ai(15),Do(i.j,i.m,n,"[Invalid Chunk]"),o=!1;break}Do(i.j,i.m,u,null),Wi(i,u)}kr(i)&&u!=Yr&&u!=Cr&&(i.h.g="",i.C=0),4!=e||0!=n.length||i.h.h||(i.o=1,Ai(16),o=!1),i.i=i.i&&o,o?0<n.length&&!i.ba&&(i.ba=!0,(e=i.l).g==i&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),_a(e),e.M=!0,Ai(11))):(Do(i.j,i.m,n,"[Invalid Chunked Response]"),ui(i),Vn(i))}function $s(i,e){var n=i.C,o=e.indexOf("\n",n);return-1==o?Yr:(n=Number(e.substring(n,o)),isNaN(n)?Cr:(o+=1)+n>e.length?Yr:(e=e.slice(o,o+n),i.C=o+n,e))}function hr(i){i.Y=Date.now()+i.P,Lt(i,i.P)}function Lt(i,e){if(null!=i.B)throw Error("WatchDog timer not null");i.B=mi(we(i.lb,i),e)}function En(i){i.B&&(Et.clearTimeout(i.B),i.B=null)}function Vn(i){0==i.l.H||i.J||wu(i.l,i)}function ui(i){En(i);var e=i.M;e&&"function"==typeof e.sa&&e.sa(),i.M=null,hs(i.V),Ms(i.U),i.g&&(e=i.g,i.g=null,e.abort(),e.sa())}function Wi(i,e){try{var n=i.l;if(0!=n.H&&(n.g==i||gs(n.i,i)))if(!i.K&&gs(n.i,i)&&3==n.H){try{var o=n.Ja.g.parse(e)}catch{o=null}if(Array.isArray(o)&&3==o.length){var u=o;if(0==u[0]){e:if(!n.u){if(n.g){if(!(n.g.G+3e3<i.G))break e;zs(n),Wu(n)}Tu(n),Ai(18)}}else n.Fa=u[1],0<n.Fa-n.V&&37500>u[2]&&n.G&&0==n.A&&!n.v&&(n.v=mi(we(n.ib,n),6e3));if(1>=Xs(n.i)&&n.oa){try{n.oa()}catch{}n.oa=void 0}}else zo(n,11)}else if((i.K||n.g==i)&&zs(n),!on(e))for(u=n.Ja.g.parse(e),e=0;e<u.length;e++){let z=u[e];if(n.V=z[0],z=z[1],2==n.H)if("c"==z[0]){n.K=z[1],n.pa=z[2];const ee=z[3];null!=ee&&(n.ra=ee,n.l.info("VER="+n.ra));const le=z[4];null!=le&&(n.Ga=le,n.l.info("SVER="+n.Ga));const Ae=z[5];null!=Ae&&"number"==typeof Ae&&0<Ae&&(n.L=o=1.5*Ae,n.l.info("backChannelRequestTimeoutMs_="+o)),o=n;const et=i.g;if(et){const xt=et.g?et.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(xt){var h=o.i;h.g||-1==xt.indexOf("spdy")&&-1==xt.indexOf("quic")&&-1==xt.indexOf("h2")||(h.j=h.l,h.g=new Set,h.h&&(Fr(h,h.h),h.h=null))}if(o.F){const Ht=et.g?et.g.getResponseHeader("X-HTTP-Session-Id"):null;Ht&&(o.Da=Ht,er(o.I,o.F,Ht))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-i.G,n.l.info("Handshake RTT: "+n.S+"ms"));var v=i;if((o=n).wa=Wc(o,o.J?o.pa:null,o.Y),v.K){Cs(o.i,v);var P=v,V=o.L;V&&P.setTimeout(V),P.B&&(En(P),hr(P)),o.g=v}else La(o);0<n.j.length&&Fa(n)}else"stop"!=z[0]&&"close"!=z[0]||zo(n,7);else 3==n.H&&("stop"==z[0]||"close"==z[0]?"stop"==z[0]?zo(n,7):sa(n):"noop"!=z[0]&&n.h&&n.h.Aa(z),n.A=0)}Fi()}catch{}}function yr(i,e){if(i.forEach&&"function"==typeof i.forEach)i.forEach(e,void 0);else if($n(i)||"string"==typeof i)Array.prototype.forEach.call(i,e,void 0);else for(var n=function fr(i){if(i.ta&&"function"==typeof i.ta)return i.ta();if(!i.Z||"function"!=typeof i.Z){if(typeof Map<"u"&&i instanceof Map)return Array.from(i.keys());if(!(typeof Set<"u"&&i instanceof Set)){if($n(i)||"string"==typeof i){var e=[];i=i.length;for(var n=0;n<i;n++)e.push(n);return e}e=[],n=0;for(const o in i)e[n++]=o;return e}}}(i),o=function ei(i){if(i.Z&&"function"==typeof i.Z)return i.Z();if(typeof Map<"u"&&i instanceof Map||typeof Set<"u"&&i instanceof Set)return Array.from(i.values());if("string"==typeof i)return i.split("");if($n(i)){for(var e=[],n=i.length,o=0;o<n;o++)e.push(i[o]);return e}for(o in e=[],n=0,i)e[n++]=i[o];return e}(i),u=o.length,h=0;h<u;h++)e.call(void 0,o[h],n&&n[h],i)}(ue=Gn.prototype).setTimeout=function(i){this.P=i},ue.nb=function(i){i=i.target;const e=this.M;e&&3==Bi(i)?e.l():this.Pa(i)},ue.Pa=function(i){try{if(i==this.g)e:{const ee=Bi(this.g);var e=this.g.Ia();if(this.g.da(),!(3>ee)&&(3!=ee||ft||this.g&&(this.h.h||this.g.ja()||os(this.g)))){this.J||4!=ee||7==e||Fi(),En(this);var n=this.g.da();this.ca=n;t:if(kr(this)){var o=os(this.g);i="";var u=o.length,h=4==Bi(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){ui(this),Vn(this);var v="";break t}this.h.i=new Et.TextDecoder}for(e=0;e<u;e++)this.h.h=!0,i+=this.h.i.decode(o[e],{stream:h&&e==u-1});o.splice(0,u),this.h.g+=i,this.C=0,v=this.h.g}else v=this.g.ja();if(this.i=200==n,function vu(i,e,n,o,u,h,v){i.info(function(){return"XMLHTTP RESP ("+o+") [ attempt "+u+"]: "+e+"\n"+n+"\n"+h+" "+v})}(this.j,this.u,this.A,this.m,this.W,ee,n),this.i){if(this.aa&&!this.K){t:{if(this.g){var P,V=this.g;if((P=V.g?V.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!on(P)){var z=P;break t}}z=null}if(!(n=z)){this.i=!1,this.o=3,Ai(12),ui(this),Vn(this);break e}Do(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Wi(this,n)}this.S?(Es(this,ee,v),ft&&this.i&&3==ee&&(Hs(this.U,this.V,"tick",this.mb),this.V.start())):(Do(this.j,this.m,v,null),Wi(this,v)),4==ee&&ui(this),this.i&&!this.J&&(4==ee?wu(this.l,this):(this.i=!1,hr(this)))}else(function Oo(i){const e={};i=(i.g&&2<=Bi(i)&&i.g.getAllResponseHeaders()||"").split("\r\n");for(let o=0;o<i.length;o++){if(on(i[o]))continue;var n=Xt(i[o]);const u=n[0];if("string"!=typeof(n=n[1]))continue;n=n.trim();const h=e[u]||[];e[u]=h,h.push(n)}!function Pa(i,e){for(const n in i)e.call(void 0,i[n],n,i)}(e,function(o){return o.join(", ")})})(this.g),400==n&&0<v.indexOf("Unknown SID")?(this.o=3,Ai(12)):(this.o=0,Ai(13)),ui(this),Vn(this)}}}catch{}},ue.mb=function(){if(this.g){var i=Bi(this.g),e=this.g.ja();this.C<e.length&&(En(this),Es(this,i,e),this.i&&4!=i&&hr(this))}},ue.cancel=function(){this.J=!0,ui(this)},ue.lb=function(){this.B=null;const i=Date.now();0<=i-this.Y?(function ki(i,e){i.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.L&&(Fi(),Ai(17)),ui(this),this.o=2,Vn(this)):Lt(this,this.Y-i)};var vi=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function _n(i){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,i instanceof _n){this.h=i.h,Ts(this,i.j),this.s=i.s,this.g=i.g,bs(this,i.m),this.l=i.l;var e=i.i,n=new Si;n.i=e.i,e.g&&(n.g=new Map(e.g),n.h=e.h),ti(this,n),this.o=i.o}else i&&(e=String(i).match(vi))?(this.h=!1,Ts(this,e[1]||"",!0),this.s=qi(e[2]||""),this.g=qi(e[3]||"",!0),bs(this,e[4]),this.l=qi(e[5]||"",!0),ti(this,e[6]||"",!0),this.o=qi(e[7]||"")):(this.h=!1,this.i=new Si(null,this.h))}function yi(i){return new _n(i)}function Ts(i,e,n){i.j=n?qi(e,!0):e,i.j&&(i.j=i.j.replace(/:$/,""))}function bs(i,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);i.m=e}else i.m=null}function ti(i,e,n){e instanceof Si?(i.i=e,function ia(i,e){e&&!i.j&&(is(i),i.i=null,i.g.forEach(function(n,o){var u=o.toLowerCase();o!=u&&(ps(this,o),jo(this,u,n))},i)),i.j=e}(i.i,i.h)):(n||(e=Li(e,ho)),i.i=new Si(e,i.h))}function er(i,e,n){i.i.set(e,n)}function ks(i){return er(i,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),i}function qi(i,e){return i?e?decodeURI(i.replace(/%25/g,"%2525")):decodeURIComponent(i):""}function Li(i,e,n){return"string"==typeof i?(i=encodeURI(i).replace(e,ws),n&&(i=i.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),i):null}function ws(i){return"%"+((i=i.charCodeAt(0))>>4&15).toString(16)+(15&i).toString(16)}_n.prototype.toString=function(){var i=[],e=this.j;e&&i.push(Li(e,Fs,!0),":");var n=this.g;return(n||"file"==e)&&(i.push("//"),(e=this.s)&&i.push(Li(e,Fs,!0),"@"),i.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&i.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&i.push("/"),i.push(Li(n,"/"==n.charAt(0)?rs:fs,!0))),(n=this.i.toString())&&i.push("?",n),(n=this.o)&&i.push("#",Li(n,Bn)),i.join("")};var Fs=/[#\/\?@]/g,fs=/[#\?:]/g,rs=/[#\?]/g,ho=/[#\?@]/g,Bn=/#/g;function Si(i,e){this.h=this.g=null,this.i=i||null,this.j=!!e}function is(i){i.g||(i.g=new Map,i.h=0,i.i&&function Gr(i,e){if(i){i=i.split("&");for(var n=0;n<i.length;n++){var o=i[n].indexOf("="),u=null;if(0<=o){var h=i[n].substring(0,o);u=i[n].substring(o+1)}else h=i[n];e(h,u?decodeURIComponent(u.replace(/\+/g," ")):"")}}}(i.i,function(e,n){i.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}function ps(i,e){is(i),e=Js(i,e),i.g.has(e)&&(i.i=null,i.h-=i.g.get(e).length,i.g.delete(e))}function Ds(i,e){return is(i),e=Js(i,e),i.g.has(e)}function jo(i,e,n){ps(i,e),0<n.length&&(i.i=null,i.g.set(Js(i,e),wt(n)),i.h+=n.length)}function Js(i,e){return e=String(e),i.j&&(e=e.toLowerCase()),e}function Xa(i){this.l=i||Er,i=Et.PerformanceNavigationTiming?0<(i=Et.performance.getEntriesByType("navigation")).length&&("hq"==i[0].nextHopProtocol||"h2"==i[0].nextHopProtocol):!!(Et.g&&Et.g.Ka&&Et.g.Ka()&&Et.g.Ka().dc),this.j=i?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(ue=Si.prototype).add=function(i,e){is(this),this.i=null,i=Js(this,i);var n=this.g.get(i);return n||this.g.set(i,n=[]),n.push(e),this.h+=1,this},ue.forEach=function(i,e){is(this),this.g.forEach(function(n,o){n.forEach(function(u){i.call(e,u,o,this)},this)},this)},ue.ta=function(){is(this);const i=Array.from(this.g.values()),e=Array.from(this.g.keys()),n=[];for(let o=0;o<e.length;o++){const u=i[o];for(let h=0;h<u.length;h++)n.push(e[o])}return n},ue.Z=function(i){is(this);let e=[];if("string"==typeof i)Ds(this,i)&&(e=e.concat(this.g.get(Js(this,i))));else{i=Array.from(this.g.values());for(let n=0;n<i.length;n++)e=e.concat(i[n])}return e},ue.set=function(i,e){return is(this),this.i=null,Ds(this,i=Js(this,i))&&(this.h-=this.g.get(i).length),this.g.set(i,[e]),this.h+=1,this},ue.get=function(i,e){return i&&0<(i=this.Z(i)).length?String(i[0]):e},ue.toString=function(){if(this.i)return this.i;if(!this.g)return"";const i=[],e=Array.from(this.g.keys());for(var n=0;n<e.length;n++){var o=e[n];const h=encodeURIComponent(String(o)),v=this.Z(o);for(o=0;o<v.length;o++){var u=h;""!==v[o]&&(u+="="+encodeURIComponent(String(v[o]))),i.push(u)}}return this.i=i.join("&")};var Er=10;function ci(i){return!!i.h||!!i.g&&i.g.size>=i.j}function Xs(i){return i.h?1:i.g?i.g.size:0}function gs(i,e){return i.h?i.h==e:!!i.g&&i.g.has(e)}function Fr(i,e){i.g?i.g.add(e):i.h=e}function Cs(i,e){i.h&&i.h==e?i.h=null:i.g&&i.g.has(e)&&i.g.delete(e)}function eu(i){if(null!=i.h)return i.i.concat(i.h.F);if(null!=i.g&&0!==i.g.size){let e=i.i;for(const n of i.g.values())e=e.concat(n.F);return e}return wt(i.i)}Xa.prototype.cancel=function(){if(this.i=eu(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const i of this.g.values())i.cancel();this.g.clear()}};var fo=class{stringify(i){return Et.JSON.stringify(i,void 0)}parse(i){return Et.JSON.parse(i,void 0)}};function Go(){this.g=new fo}function _c(i,e,n){const o=n||"";try{yr(i,function(u,h){let v=u;Dn(u)&&(v=qr(u)),e.push(o+h+"="+encodeURIComponent(v))})}catch(u){throw e.push(o+"type="+encodeURIComponent("_badmap")),u}}function Ao(i,e,n,o,u){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,u(o)}catch{}}function So(i){this.l=i.ec||null,this.j=i.ob||!1}function ga(i,e){Qt.call(this),this.F=i,this.u=e,this.m=void 0,this.readyState=Ro,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Pe(So,xa),So.prototype.g=function(){return new ga(this.l,this.j)},So.prototype.i=function(i){return function(){return i}}({}),Pe(ga,Qt);var Ro=0;function mr(i){i.j.read().then(i.Xa.bind(i)).catch(i.ka.bind(i))}function $o(i){i.readyState=4,i.l=null,i.j=null,i.A=null,ma(i)}function ma(i){i.onreadystatechange&&i.onreadystatechange.call(i)}(ue=ga.prototype).open=function(i,e){if(this.readyState!=Ro)throw this.abort(),Error("Error reopening a connection");this.C=i,this.B=e,this.readyState=1,ma(this)},ue.send=function(i){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};i&&(e.body=i),(this.F||Et).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))},ue.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,$o(this)),this.readyState=Ro},ue.$a=function(i){if(this.g&&(this.l=i,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=i.headers,this.readyState=2,ma(this)),this.g&&(this.readyState=3,ma(this),this.g)))if("arraybuffer"===this.responseType)i.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof Et.ReadableStream<"u"&&"body"in i){if(this.j=i.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;mr(this)}else i.text().then(this.Za.bind(this),this.ka.bind(this))},ue.Xa=function(i){if(this.g){if(this.u&&i.value)this.response.push(i.value);else if(!this.u){var e=i.value?i.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!i.done}))&&(this.response=this.responseText+=e)}i.done?$o(this):ma(this),3==this.readyState&&mr(this)}},ue.Za=function(i){this.g&&(this.response=this.responseText=i,$o(this))},ue.Ya=function(i){this.g&&(this.response=i,$o(this))},ue.ka=function(){this.g&&$o(this)},ue.setRequestHeader=function(i,e){this.v.append(i,e)},ue.getResponseHeader=function(i){return this.h&&this.h.get(i.toLowerCase())||""},ue.getAllResponseHeaders=function(){if(!this.h)return"";const i=[],e=this.h.entries();for(var n=e.next();!n.done;)i.push((n=n.value)[0]+": "+n[1]),n=e.next();return i.join("\r\n")},Object.defineProperty(ga.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(i){this.m=i?"include":"same-origin"}});var W=Et.JSON.parse;function q(i){Qt.call(this),this.headers=new Map,this.u=i||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=B,this.L=this.M=!1}Pe(q,Qt);var B="",se=/^https?$/i,be=["POST","PUT"];function Tn(i,e){i.h=!1,i.g&&(i.l=!0,i.g.abort(),i.l=!1),i.j=e,i.m=5,Vi(i),po(i)}function Vi(i){i.F||(i.F=!0,un(i,"complete"),un(i,"error"))}function ss(i){if(i.h&&typeof Kt<"u"&&(!i.C[1]||4!=Bi(i)||2!=i.da()))if(i.v&&4==Bi(i))Ma(i.La,0,i);else if(un(i,"readystatechange"),4==Bi(i)){i.h=!1;try{const v=i.da();e:switch(v){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var n;if(!(n=e)){var o;if(o=0===v){var u=String(i.I).match(vi)[1]||null;!u&&Et.self&&Et.self.location&&(u=Et.self.location.protocol.slice(0,-1)),o=!se.test(u?u.toLowerCase():"")}n=o}if(n)un(i,"complete"),un(i,"success");else{i.m=6;try{var h=2<Bi(i)?i.g.statusText:""}catch{h=""}i.j=h+" ["+i.da()+"]",Vi(i)}}finally{po(i)}}}function po(i,e){if(i.g){No(i);const n=i.g,o=i.C[0]?()=>{}:null;i.g=null,i.C=null,e||un(i,"ready");try{n.onreadystatechange=o}catch{}}}function No(i){i.g&&i.L&&(i.g.ontimeout=null),i.A&&(Et.clearTimeout(i.A),i.A=null)}function Bi(i){return i.g?i.g.readyState:0}function os(i){try{if(!i.g)return null;if("response"in i.g)return i.g.response;switch(i.K){case B:case"text":return i.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in i.g)return i.g.mozResponseArrayBuffer}return null}catch{return null}}function Iu(i){let e="";return wi(i,function(n,o){e+=o,e+=":",e+=n,e+="\r\n"}),e}function Ii(i,e,n){e:{for(o in n){var o=!1;break e}o=!0}o||(n=Iu(n),"string"==typeof i?null!=n&&encodeURIComponent(String(n)):er(i,e,n))}function Ls(i,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[i]||e}function Qi(i){this.Ga=0,this.j=[],this.l=new Qs,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=Ls("failFast",!1,i),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=Ls("baseRetryDelayMs",5e3,i),this.hb=Ls("retryDelaySeedMs",1e4,i),this.eb=Ls("forwardChannelMaxRetries",2,i),this.xa=Ls("forwardChannelRequestTimeoutMs",2e4,i),this.va=i&&i.xmlHttpFactory||void 0,this.Ha=i&&i.useFetchStreams||!1,this.L=void 0,this.J=i&&i.supportsCrossDomainXhr||!1,this.K="",this.i=new Xa(i&&i.concurrentRequestLimit),this.Ja=new Go,this.P=i&&i.fastHandshake||!1,this.O=i&&i.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=i&&i.bc||!1,i&&i.Ea&&this.l.Ea(),i&&i.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&i&&i.detectBufferingProxy||!1,this.qa=void 0,i&&i.longPollingTimeout&&0<i.longPollingTimeout&&(this.qa=i.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}function sa(i){if(Po(i),3==i.H){var e=i.W++,n=yi(i.I);if(er(n,"SID",i.K),er(n,"RID",e),er(n,"TYPE","terminate"),Mo(i,n),(e=new Gn(i,i.l,e)).L=2,e.v=ks(yi(n)),n=!1,Et.navigator&&Et.navigator.sendBeacon)try{n=Et.navigator.sendBeacon(e.v.toString(),"")}catch{}!n&&Et.Image&&((new Image).src=e.v,n=!0),n||(e.g=tu(e.l,null),e.g.ha(e.v)),e.G=Date.now(),hr(e)}gd(i)}function Wu(i){i.g&&(_a(i),i.g.cancel(),i.g=null)}function Po(i){Wu(i),i.u&&(Et.clearTimeout(i.u),i.u=null),zs(i),i.i.cancel(),i.m&&("number"==typeof i.m&&Et.clearTimeout(i.m),i.m=null)}function Fa(i){if(!ci(i.i)&&!i.m){i.m=!0;var e=i.Na;jt||vr(),zn||(jt(),zn=!0),Kr.add(e,i),i.C=0}}function vc(i,e){var n;n=e?e.m:i.W++;const o=yi(i.I);er(o,"SID",i.K),er(o,"RID",n),er(o,"AID",i.V),Mo(i,o),i.o&&i.s&&Ii(o,i.o,i.s),n=new Gn(i,i.l,n,i.C+1),null===i.o&&(n.I=i.s),e&&(i.j=e.F.concat(i.j)),e=Eu(i,n,1e3),n.setTimeout(Math.round(.5*i.xa)+Math.round(.5*i.xa*Math.random())),Fr(i.i,n),ai(n,o,e)}function Mo(i,e){i.na&&wi(i.na,function(n,o){er(e,o,n)}),i.h&&yr({},function(n,o){er(e,o,n)})}function Eu(i,e,n){n=Math.min(i.j.length,n);var o=i.h?we(i.h.Va,i.h,i):null;e:{var u=i.j;let h=-1;for(;;){const v=["count="+n];-1==h?0<n?(h=u[0].g,v.push("ofs="+h)):h=0:v.push("ofs="+h);let P=!0;for(let V=0;V<n;V++){let z=u[V].g;const ee=u[V].map;if(z-=h,0>z)h=Math.max(0,u[V].g-100),P=!1;else try{_c(ee,v,"req"+z+"_")}catch{o&&o(ee)}}if(P){o=v.join("&");break e}}}return i=i.j.splice(0,n),e.F=i,o}function La(i){if(!i.g&&!i.u){i.ba=1;var e=i.Ma;jt||vr(),zn||(jt(),zn=!0),Kr.add(e,i),i.A=0}}function Tu(i){return!(i.g||i.u||3<=i.A||(i.ba++,i.u=mi(we(i.Ma,i),yc(i,i.A)),i.A++,0))}function _a(i){null!=i.B&&(Et.clearTimeout(i.B),i.B=null)}function bu(i){i.g=new Gn(i,i.l,"rpc",i.ba),null===i.o&&(i.g.I=i.s),i.g.O=0;var e=yi(i.wa);er(e,"RID","rpc"),er(e,"SID",i.K),er(e,"AID",i.V),er(e,"CI",i.G?"0":"1"),!i.G&&i.qa&&er(e,"TO",i.qa),er(e,"TYPE","xmlhttp"),Mo(i,e),i.o&&i.s&&Ii(e,i.o,i.s),i.L&&i.g.setTimeout(i.L);var n=i.g;i=i.pa,n.L=1,n.v=ks(yi(e)),n.s=null,n.S=!0,Co(n,i)}function zs(i){null!=i.v&&(Et.clearTimeout(i.v),i.v=null)}function wu(i,e){var n=null;if(i.g==e){zs(i),_a(i),i.g=null;var o=2}else{if(!gs(i.i,e))return;n=e.F,Cs(i.i,e),o=1}if(0!=i.H)if(e.i)if(1==o){n=e.s?e.s.length:0,e=Date.now()-e.G;var u=i.C;un(o=zi(),new yu(o,n)),Fa(i)}else La(i);else if(3==(u=e.o)||0==u&&0<e.ca||!(1==o&&function go(i,e){return!(Xs(i.i)>=i.i.j-(i.m?1:0)||(i.m?(i.j=e.F.concat(i.j),0):1==i.H||2==i.H||i.C>=(i.cb?0:i.eb)||(i.m=mi(we(i.Na,i,e),yc(i,i.C)),i.C++,0)))}(i,e)||2==o&&Tu(i)))switch(n&&0<n.length&&(e=i.i,e.i=e.i.concat(n)),u){case 1:zo(i,5);break;case 4:zo(i,10);break;case 3:zo(i,6);break;default:zo(i,2)}}function yc(i,e){let n=i.ab+Math.floor(Math.random()*i.hb);return i.isActive()||(n*=2),n*e}function zo(i,e){if(i.l.info("Error code "+e),2==e){var n=null;i.h&&(n=null);var o=we(i.pb,i);n||(n=new _n("//www.google.com/images/cleardot.gif"),Et.location&&"http"==Et.location.protocol||Ts(n,"https"),ks(n)),function Ho(i,e){const n=new Qs;if(Et.Image){const o=new Image;o.onload=He(Ao,n,o,"TestLoadImage: loaded",!0,e),o.onerror=He(Ao,n,o,"TestLoadImage: error",!1,e),o.onabort=He(Ao,n,o,"TestLoadImage: abort",!1,e),o.ontimeout=He(Ao,n,o,"TestLoadImage: timeout",!1,e),Et.setTimeout(function(){o.ontimeout&&o.ontimeout()},1e4),o.src=i}else e(!1)}(n.toString(),o)}else Ai(2);i.H=0,i.h&&i.h.za(e),gd(i),Po(i)}function gd(i){if(i.H=0,i.ma=[],i.h){const e=eu(i.i);(0!=e.length||0!=i.j.length)&&(nr(i.ma,e),nr(i.ma,i.j),i.i.i.length=0,wt(i.j),i.j.length=0),i.h.ya()}}function Wc(i,e,n){var o=n instanceof _n?yi(n):new _n(n);if(""!=o.g)e&&(o.g=e+"."+o.g),bs(o,o.m);else{var u=Et.location;o=u.protocol,e=e?e+"."+u.hostname:u.hostname,u=+u.port;var h=new _n(null);o&&Ts(h,o),e&&(h.g=e),u&&bs(h,u),n&&(h.l=n),o=h}return e=i.Da,(n=i.F)&&e&&er(o,n,e),er(o,"VER",i.ra),Mo(i,o),o}function tu(i,e,n){if(e&&!i.J)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new q(n&&i.Ha&&!i.va?new So({ob:!0}):i.va)).Oa(i.J),e}function qc(){}function Va(){if(je&&!(10<=Number(kn)))throw Error("Environmental error: no available transport.")}function eo(i,e){Qt.call(this),this.g=new Qi(e),this.l=i,this.h=e&&e.messageUrlParams||null,i=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(i?i["X-Client-Protocol"]="webchannel":i={"X-Client-Protocol":"webchannel"}),this.g.s=i,i=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(i?i["X-WebChannel-Content-Type"]=e.messageContentType:i={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(i?i["X-WebChannel-Client-Profile"]=e.Ca:i={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=i,(i=e&&e.cc)&&!on(i)&&(this.g.o=i),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!on(e)&&(this.g.F=e,null!==(i=this.h)&&e in i&&e in(i=this.h)&&delete i[e]),this.j=new to(this)}function va(i){Uo.call(this),i.__headers__&&(this.headers=i.__headers__,this.statusCode=i.__status__,delete i.__headers__,delete i.__status__);var e=i.__sm__;if(e){e:{for(const n in e){i=n;break e}i=void 0}(this.i=i)&&(i=this.i,e=null!==e&&i in e?e[i]:void 0),this.data=e}else this.data=i}function Kc(){lo.call(this),this.status=1}function to(i){this.g=i}function Ji(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function qu(i,e,n){n||(n=0);var o=Array(16);if("string"==typeof e)for(var u=0;16>u;++u)o[u]=e.charCodeAt(n++)|e.charCodeAt(n++)<<8|e.charCodeAt(n++)<<16|e.charCodeAt(n++)<<24;else for(u=0;16>u;++u)o[u]=e[n++]|e[n++]<<8|e[n++]<<16|e[n++]<<24;var h=i.g[3],v=(e=i.g[0])+(h^(n=i.g[1])&((u=i.g[2])^h))+o[0]+3614090360&4294967295;v=(n=(u=(h=(e=(n=(u=(h=(e=(n=(u=(h=(e=(n=(u=(h=(e=(n=(u=(h=(e=(n=(u=(h=(e=(n=(u=(h=(e=(n=(u=(h=(e=(n=(u=(h=(e=(n=(u=(h=(e=(n=(u=(h=(e=(n=(u=(h=(e=(n=(u=(h=(e=(n=(u=(h=(e=(n=(u=(h=(e=n+(v<<7&4294967295|v>>>25))+((v=h+(u^e&(n^u))+o[1]+3905402710&4294967295)<<12&4294967295|v>>>20))+((v=u+(n^h&(e^n))+o[2]+606105819&4294967295)<<17&4294967295|v>>>15))+((v=n+(e^u&(h^e))+o[3]+3250441966&4294967295)<<22&4294967295|v>>>10))+((v=e+(h^n&(u^h))+o[4]+4118548399&4294967295)<<7&4294967295|v>>>25))+((v=h+(u^e&(n^u))+o[5]+1200080426&4294967295)<<12&4294967295|v>>>20))+((v=u+(n^h&(e^n))+o[6]+2821735955&4294967295)<<17&4294967295|v>>>15))+((v=n+(e^u&(h^e))+o[7]+4249261313&4294967295)<<22&4294967295|v>>>10))+((v=e+(h^n&(u^h))+o[8]+1770035416&4294967295)<<7&4294967295|v>>>25))+((v=h+(u^e&(n^u))+o[9]+2336552879&4294967295)<<12&4294967295|v>>>20))+((v=u+(n^h&(e^n))+o[10]+4294925233&4294967295)<<17&4294967295|v>>>15))+((v=n+(e^u&(h^e))+o[11]+2304563134&4294967295)<<22&4294967295|v>>>10))+((v=e+(h^n&(u^h))+o[12]+1804603682&4294967295)<<7&4294967295|v>>>25))+((v=h+(u^e&(n^u))+o[13]+4254626195&4294967295)<<12&4294967295|v>>>20))+((v=u+(n^h&(e^n))+o[14]+2792965006&4294967295)<<17&4294967295|v>>>15))+((v=n+(e^u&(h^e))+o[15]+1236535329&4294967295)<<22&4294967295|v>>>10))+((v=e+(u^h&(n^u))+o[1]+4129170786&4294967295)<<5&4294967295|v>>>27))+((v=h+(n^u&(e^n))+o[6]+3225465664&4294967295)<<9&4294967295|v>>>23))+((v=u+(e^n&(h^e))+o[11]+643717713&4294967295)<<14&4294967295|v>>>18))+((v=n+(h^e&(u^h))+o[0]+3921069994&4294967295)<<20&4294967295|v>>>12))+((v=e+(u^h&(n^u))+o[5]+3593408605&4294967295)<<5&4294967295|v>>>27))+((v=h+(n^u&(e^n))+o[10]+38016083&4294967295)<<9&4294967295|v>>>23))+((v=u+(e^n&(h^e))+o[15]+3634488961&4294967295)<<14&4294967295|v>>>18))+((v=n+(h^e&(u^h))+o[4]+3889429448&4294967295)<<20&4294967295|v>>>12))+((v=e+(u^h&(n^u))+o[9]+568446438&4294967295)<<5&4294967295|v>>>27))+((v=h+(n^u&(e^n))+o[14]+3275163606&4294967295)<<9&4294967295|v>>>23))+((v=u+(e^n&(h^e))+o[3]+4107603335&4294967295)<<14&4294967295|v>>>18))+((v=n+(h^e&(u^h))+o[8]+1163531501&4294967295)<<20&4294967295|v>>>12))+((v=e+(u^h&(n^u))+o[13]+2850285829&4294967295)<<5&4294967295|v>>>27))+((v=h+(n^u&(e^n))+o[2]+4243563512&4294967295)<<9&4294967295|v>>>23))+((v=u+(e^n&(h^e))+o[7]+1735328473&4294967295)<<14&4294967295|v>>>18))+((v=n+(h^e&(u^h))+o[12]+2368359562&4294967295)<<20&4294967295|v>>>12))+((v=e+(n^u^h)+o[5]+4294588738&4294967295)<<4&4294967295|v>>>28))+((v=h+(e^n^u)+o[8]+2272392833&4294967295)<<11&4294967295|v>>>21))+((v=u+(h^e^n)+o[11]+1839030562&4294967295)<<16&4294967295|v>>>16))+((v=n+(u^h^e)+o[14]+4259657740&4294967295)<<23&4294967295|v>>>9))+((v=e+(n^u^h)+o[1]+2763975236&4294967295)<<4&4294967295|v>>>28))+((v=h+(e^n^u)+o[4]+1272893353&4294967295)<<11&4294967295|v>>>21))+((v=u+(h^e^n)+o[7]+4139469664&4294967295)<<16&4294967295|v>>>16))+((v=n+(u^h^e)+o[10]+3200236656&4294967295)<<23&4294967295|v>>>9))+((v=e+(n^u^h)+o[13]+681279174&4294967295)<<4&4294967295|v>>>28))+((v=h+(e^n^u)+o[0]+3936430074&4294967295)<<11&4294967295|v>>>21))+((v=u+(h^e^n)+o[3]+3572445317&4294967295)<<16&4294967295|v>>>16))+((v=n+(u^h^e)+o[6]+76029189&4294967295)<<23&4294967295|v>>>9))+((v=e+(n^u^h)+o[9]+3654602809&4294967295)<<4&4294967295|v>>>28))+((v=h+(e^n^u)+o[12]+3873151461&4294967295)<<11&4294967295|v>>>21))+((v=u+(h^e^n)+o[15]+530742520&4294967295)<<16&4294967295|v>>>16))+((v=n+(u^h^e)+o[2]+3299628645&4294967295)<<23&4294967295|v>>>9))+((v=e+(u^(n|~h))+o[0]+4096336452&4294967295)<<6&4294967295|v>>>26))+((v=h+(n^(e|~u))+o[7]+1126891415&4294967295)<<10&4294967295|v>>>22))+((v=u+(e^(h|~n))+o[14]+2878612391&4294967295)<<15&4294967295|v>>>17))+((v=n+(h^(u|~e))+o[5]+4237533241&4294967295)<<21&4294967295|v>>>11))+((v=e+(u^(n|~h))+o[12]+1700485571&4294967295)<<6&4294967295|v>>>26))+((v=h+(n^(e|~u))+o[3]+2399980690&4294967295)<<10&4294967295|v>>>22))+((v=u+(e^(h|~n))+o[10]+4293915773&4294967295)<<15&4294967295|v>>>17))+((v=n+(h^(u|~e))+o[1]+2240044497&4294967295)<<21&4294967295|v>>>11))+((v=e+(u^(n|~h))+o[8]+1873313359&4294967295)<<6&4294967295|v>>>26))+((v=h+(n^(e|~u))+o[15]+4264355552&4294967295)<<10&4294967295|v>>>22))+((v=u+(e^(h|~n))+o[6]+2734768916&4294967295)<<15&4294967295|v>>>17))+((v=n+(h^(u|~e))+o[13]+1309151649&4294967295)<<21&4294967295|v>>>11))+((h=(e=n+((v=e+(u^(n|~h))+o[4]+4149444226&4294967295)<<6&4294967295|v>>>26))+((v=h+(n^(e|~u))+o[11]+3174756917&4294967295)<<10&4294967295|v>>>22))^((u=h+((v=u+(e^(h|~n))+o[2]+718787259&4294967295)<<15&4294967295|v>>>17))|~e))+o[9]+3951481745&4294967295,i.g[0]=i.g[0]+e&4294967295,i.g[1]=i.g[1]+(u+(v<<21&4294967295|v>>>11))&4294967295,i.g[2]=i.g[2]+u&4294967295,i.g[3]=i.g[3]+h&4294967295}function O(i,e){this.h=e;for(var n=[],o=!0,u=i.length-1;0<=u;u--){var h=0|i[u];o&&h==e||(n[u]=h,o=!1)}this.g=n}(ue=q.prototype).Oa=function(i){this.M=i},ue.ha=function(i,e,n,o){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+i);e=e?e.toUpperCase():"GET",this.I=i,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():pa.g(),this.C=function Bo(i){return i.h||(i.h=i.i())}(this.u?this.u:pa),this.g.onreadystatechange=we(this.La,this);try{this.G=!0,this.g.open(e,String(i),!0),this.G=!1}catch(h){return void Tn(this,h)}if(i=n||"",n=new Map(this.headers),o)if(Object.getPrototypeOf(o)===Object.prototype)for(var u in o)n.set(u,o[u]);else{if("function"!=typeof o.keys||"function"!=typeof o.get)throw Error("Unknown input type for opt_headers: "+String(o));for(const h of o.keys())n.set(h,o.get(h))}o=Array.from(n.keys()).find(h=>"content-type"==h.toLowerCase()),u=Et.FormData&&i instanceof Et.FormData,!(0<=Nt(be,e))||o||u||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[h,v]of n)this.g.setRequestHeader(h,v);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{No(this),0<this.B&&((this.L=function nn(i){return je&&"number"==typeof i.timeout&&void 0!==i.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=we(this.ua,this)):this.A=Ma(this.ua,this.B,this)),this.v=!0,this.g.send(i),this.v=!1}catch(h){Tn(this,h)}},ue.ua=function(){typeof Kt<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,un(this,"timeout"),this.abort(8))},ue.abort=function(i){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=i||7,un(this,"complete"),un(this,"abort"),po(this))},ue.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),po(this,!0)),q.$.N.call(this)},ue.La=function(){this.s||(this.G||this.v||this.l?ss(this):this.kb())},ue.kb=function(){ss(this)},ue.isActive=function(){return!!this.g},ue.da=function(){try{return 2<Bi(this)?this.g.status:-1}catch{return-1}},ue.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}},ue.Wa=function(i){if(this.g){var e=this.g.responseText;return i&&0==e.indexOf(i)&&(e=e.substring(i.length)),W(e)}},ue.Ia=function(){return this.m},ue.Sa=function(){return"string"==typeof this.j?this.j:String(this.j)},(ue=Qi.prototype).ra=8,ue.H=1,ue.Na=function(i){if(this.m)if(this.m=null,1==this.H){if(!i){this.W=Math.floor(1e5*Math.random()),i=this.W++;const u=new Gn(this,this.l,i);let h=this.s;if(this.U&&(h?(h=Yi(h),Xr(h,this.U)):h=this.U),null!==this.o||this.O||(u.I=h,h=null),this.P)e:{for(var e=0,n=0;n<this.j.length;n++){var o=this.j[n];if(void 0===(o="__data__"in o.map&&"string"==typeof(o=o.map.__data__)?o.length:void 0))break;if(4096<(e+=o)){e=n;break e}if(4096===e||n===this.j.length-1){e=n+1;break e}}e=1e3}else e=1e3;e=Eu(this,u,e),er(n=yi(this.I),"RID",i),er(n,"CVER",22),this.F&&er(n,"X-HTTP-Session-Id",this.F),Mo(this,n),h&&(this.O?e="headers="+encodeURIComponent(String(Iu(h)))+"&"+e:this.o&&Ii(n,this.o,h)),Fr(this.i,u),this.bb&&er(n,"TYPE","init"),this.P?(er(n,"$req",e),er(n,"SID","null"),u.aa=!0,ai(u,n,null)):ai(u,n,e),this.H=2}}else 3==this.H&&(i?vc(this,i):0==this.j.length||ci(this.i)||vc(this))},ue.Ma=function(){if(this.u=null,bu(this),this.ca&&!(this.M||null==this.g||0>=this.S)){var i=2*this.S;this.l.info("BP detection timer enabled: "+i),this.B=mi(we(this.jb,this),i)}},ue.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,Ai(10),Wu(this),bu(this))},ue.ib=function(){null!=this.v&&(this.v=null,Wu(this),Tu(this),Ai(19))},ue.pb=function(i){i?(this.l.info("Successfully pinged google.com"),Ai(2)):(this.l.info("Failed to ping google.com"),Ai(1))},ue.isActive=function(){return!!this.h&&this.h.isActive(this)},(ue=qc.prototype).Ba=function(){},ue.Aa=function(){},ue.za=function(){},ue.ya=function(){},ue.isActive=function(){return!0},ue.Va=function(){},Va.prototype.g=function(i,e){return new eo(i,e)},Pe(eo,Qt),eo.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var i=this.g,e=this.l,n=this.h||void 0;Ai(0),i.Y=e,i.na=n||{},i.G=i.aa,i.I=Wc(i,null,i.Y),Fa(i)},eo.prototype.close=function(){sa(this.g)},eo.prototype.u=function(i){var e=this.g;if("string"==typeof i){var n={};n.__data__=i,i=n}else this.v&&((n={}).__data__=qr(i),i=n);e.j.push(new class{constructor(i,e){this.g=i,this.map=e}}(e.fb++,i)),3==e.H&&Fa(e)},eo.prototype.N=function(){this.g.h=null,delete this.j,sa(this.g),delete this.g,eo.$.N.call(this)},Pe(va,Uo),Pe(Kc,lo),Pe(to,qc),to.prototype.Ba=function(){un(this.g,"a")},to.prototype.Aa=function(i){un(this.g,new va(i))},to.prototype.za=function(i){un(this.g,new Kc)},to.prototype.ya=function(){un(this.g,"b")},Pe(Ji,function ah(){this.blockSize=-1}),Ji.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},Ji.prototype.j=function(i,e){void 0===e&&(e=i.length);for(var n=e-this.blockSize,o=this.m,u=this.h,h=0;h<e;){if(0==u)for(;h<=n;)qu(this,i,h),h+=this.blockSize;if("string"==typeof i){for(;h<e;)if(o[u++]=i.charCodeAt(h++),u==this.blockSize){qu(this,o),u=0;break}}else for(;h<e;)if(o[u++]=i[h++],u==this.blockSize){qu(this,o),u=0;break}}this.h=u,this.i+=e},Ji.prototype.l=function(){var i=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);i[0]=128;for(var e=1;e<i.length-8;++e)i[e]=0;var n=8*this.i;for(e=i.length-8;e<i.length;++e)i[e]=255&n,n/=256;for(this.j(i),i=Array(16),e=n=0;4>e;++e)for(var o=0;32>o;o+=8)i[n++]=this.g[e]>>>o&255;return i};var Q={};function U(i){return-128<=i&&128>i?function _e(i,e){var n=Q;return Object.prototype.hasOwnProperty.call(n,i)?n[i]:n[i]=e(i)}(i,function(e){return new O([0|e],0>e?-1:0)}):new O([0|i],0>i?-1:0)}function K(i){if(isNaN(i)||!isFinite(i))return ut;if(0>i)return yn(K(-i));for(var e=[],n=1,o=0;i>=n;o++)e[o]=i/n|0,n*=Je;return new O(e,0)}var Je=4294967296,ut=U(0),an=U(1),Yn=U(16777216);function rr(i){if(0!=i.h)return!1;for(var e=0;e<i.g.length;e++)if(0!=i.g[e])return!1;return!0}function Wn(i){return-1==i.h}function yn(i){for(var e=i.g.length,n=[],o=0;o<e;o++)n[o]=~i.g[o];return new O(n,~i.h).add(an)}function Zr(i,e){return i.add(yn(e))}function Ir(i,e){for(;(65535&i[e])!=i[e];)i[e+1]+=i[e]>>>16,i[e]&=65535,e++}function Ei(i,e){this.g=i,this.h=e}function mo(i,e){if(rr(e))throw Error("division by zero");if(rr(i))return new Ei(ut,ut);if(Wn(i))return e=mo(yn(i),e),new Ei(yn(e.g),yn(e.h));if(Wn(e))return e=mo(i,yn(e)),new Ei(yn(e.g),e.h);if(30<i.g.length){if(Wn(i)||Wn(e))throw Error("slowDivide_ only works with positive integers.");for(var n=an,o=e;0>=o.X(i);)n=Wo(n),o=Wo(o);var u=qo(n,1),h=qo(o,1);for(o=qo(o,2),n=qo(n,2);!rr(o);){var v=h.add(o);0>=v.X(i)&&(u=u.add(n),h=v),o=qo(o,1),n=qo(n,1)}return e=Zr(i,u.R(e)),new Ei(u,e)}for(u=ut;0<=i.X(e);){for(n=Math.max(1,Math.floor(i.ea()/e.ea())),o=48>=(o=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,o-48),v=(h=K(n)).R(e);Wn(v)||0<v.X(i);)v=(h=K(n-=o)).R(e);rr(h)&&(h=an),u=u.add(h),i=Zr(i,v)}return new Ei(u,i)}function Wo(i){for(var e=i.g.length+1,n=[],o=0;o<e;o++)n[o]=i.D(o)<<1|i.D(o-1)>>>31;return new O(n,i.h)}function qo(i,e){var n=e>>5;e%=32;for(var o=i.g.length-n,u=[],h=0;h<o;h++)u[h]=0<e?i.D(h+n)>>>e|i.D(h+n+1)<<32-e:i.D(h+n);return new O(u,i.h)}(ue=O.prototype).ea=function(){if(Wn(this))return-yn(this).ea();for(var i=0,e=1,n=0;n<this.g.length;n++){var o=this.D(n);i+=(0<=o?o:Je+o)*e,e*=Je}return i},ue.toString=function(i){if(2>(i=i||10)||36<i)throw Error("radix out of range: "+i);if(rr(this))return"0";if(Wn(this))return"-"+yn(this).toString(i);for(var e=K(Math.pow(i,6)),n=this,o="";;){var u=mo(n,e).g,h=((0<(n=Zr(n,u.R(e))).g.length?n.g[0]:n.h)>>>0).toString(i);if(rr(n=u))return h+o;for(;6>h.length;)h="0"+h;o=h+o}},ue.D=function(i){return 0>i?0:i<this.g.length?this.g[i]:this.h},ue.X=function(i){return Wn(i=Zr(this,i))?-1:rr(i)?0:1},ue.abs=function(){return Wn(this)?yn(this):this},ue.add=function(i){for(var e=Math.max(this.g.length,i.g.length),n=[],o=0,u=0;u<=e;u++){var h=o+(65535&this.D(u))+(65535&i.D(u)),v=(h>>>16)+(this.D(u)>>>16)+(i.D(u)>>>16);o=v>>>16,n[u]=(v&=65535)<<16|(h&=65535)}return new O(n,-2147483648&n[n.length-1]?-1:0)},ue.R=function(i){if(rr(this)||rr(i))return ut;if(Wn(this))return Wn(i)?yn(this).R(yn(i)):yn(yn(this).R(i));if(Wn(i))return yn(this.R(yn(i)));if(0>this.X(Yn)&&0>i.X(Yn))return K(this.ea()*i.ea());for(var e=this.g.length+i.g.length,n=[],o=0;o<2*e;o++)n[o]=0;for(o=0;o<this.g.length;o++)for(var u=0;u<i.g.length;u++){var h=this.D(o)>>>16,v=65535&this.D(o),P=i.D(u)>>>16,V=65535&i.D(u);n[2*o+2*u]+=v*V,Ir(n,2*o+2*u),n[2*o+2*u+1]+=h*V,Ir(n,2*o+2*u+1),n[2*o+2*u+1]+=v*P,Ir(n,2*o+2*u+1),n[2*o+2*u+2]+=h*P,Ir(n,2*o+2*u+2)}for(o=0;o<e;o++)n[o]=n[2*o+1]<<16|n[2*o];for(o=e;o<2*e;o++)n[o]=0;return new O(n,0)},ue.gb=function(i){return mo(this,i).h},ue.and=function(i){for(var e=Math.max(this.g.length,i.g.length),n=[],o=0;o<e;o++)n[o]=this.D(o)&i.D(o);return new O(n,this.h&i.h)},ue.or=function(i){for(var e=Math.max(this.g.length,i.g.length),n=[],o=0;o<e;o++)n[o]=this.D(o)|i.D(o);return new O(n,this.h|i.h)},ue.xor=function(i){for(var e=Math.max(this.g.length,i.g.length),n=[],o=0;o<e;o++)n[o]=this.D(o)^i.D(o);return new O(n,this.h^i.h)},Va.prototype.createWebChannel=Va.prototype.g,eo.prototype.send=eo.prototype.u,eo.prototype.open=eo.prototype.m,eo.prototype.close=eo.prototype.close,Ja.NO_ERROR=0,Ja.TIMEOUT=8,Ja.HTTP_ERROR=6,fa.COMPLETE="complete",ka.EventType=xs,xs.OPEN="a",xs.CLOSE="b",xs.ERROR="c",xs.MESSAGE="d",Qt.prototype.listen=Qt.prototype.O,q.prototype.listenOnce=q.prototype.P,q.prototype.getLastError=q.prototype.Sa,q.prototype.getLastErrorCode=q.prototype.Ia,q.prototype.getStatus=q.prototype.da,q.prototype.getResponseJson=q.prototype.Wa,q.prototype.getResponseText=q.prototype.ja,q.prototype.send=q.prototype.ha,q.prototype.setWithCredentials=q.prototype.Oa,Ji.prototype.digest=Ji.prototype.l,Ji.prototype.reset=Ji.prototype.reset,Ji.prototype.update=Ji.prototype.j,O.prototype.add=O.prototype.add,O.prototype.multiply=O.prototype.R,O.prototype.modulo=O.prototype.gb,O.prototype.compare=O.prototype.X,O.prototype.toNumber=O.prototype.ea,O.prototype.toString=O.prototype.toString,O.prototype.getBits=O.prototype.D,O.fromNumber=K,O.fromString=function ge(i,e){if(0==i.length)throw Error("number format error: empty string");if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if("-"==i.charAt(0))return yn(ge(i.substring(1),e));if(0<=i.indexOf("-"))throw Error('number format error: interior "-" character');for(var n=K(Math.pow(e,8)),o=ut,u=0;u<i.length;u+=8){var h=Math.min(8,i.length-u),v=parseInt(i.substring(u,u+h),e);8>h?(h=K(Math.pow(e,h)),o=o.R(h).add(K(v))):o=(o=o.R(n)).add(K(v))}return o};var Xi=mt.createWebChannelTransport=function(){return new Va},ya=mt.getStatEventTarget=function(){return zi()},Ri=mt.ErrorCode=Ja,nu=mt.EventType=fa,md=mt.Event=ur,$r=mt.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},Ku=(mt.FetchXmlHttpFactory=So,mt.WebChannel=ka),ms=mt.XhrIo=q,_o=mt.Md5=Ji,Ko=mt.Integer=O;const _s="@firebase/firestore";class Lr{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Lr.UNAUTHENTICATED=new Lr(null),Lr.GOOGLE_CREDENTIALS=new Lr("google-credentials-uid"),Lr.FIRST_PARTY=new Lr("first-party-uid"),Lr.MOCK_USER=new Lr("mock-user");let ru="10.5.1";const Ia=new Oe.Yd("@firebase/firestore");function Du(){return Ia.logLevel}function yt(i,...e){if(Ia.logLevel<=Oe.in.DEBUG){const n=e.map(Ua);Ia.debug(`Firestore (${ru}): ${i}`,...n)}}function Ti(i,...e){if(Ia.logLevel<=Oe.in.ERROR){const n=e.map(Ua);Ia.error(`Firestore (${ru}): ${i}`,...n)}}function vo(i,...e){if(Ia.logLevel<=Oe.in.WARN){const n=e.map(Ua);Ia.warn(`Firestore (${ru}): ${i}`,...n)}}function Ua(i){if("string"==typeof i)return i;try{return JSON.stringify(i)}catch{return i}}function tn(i="Unexpected state"){const e=`FIRESTORE (${ru}) INTERNAL ASSERTION FAILED: `+i;throw Ti(e),new Error(e)}function mn(i,e){i||tn()}function Ut(i,e){return i}const tt={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class vt extends We.ZR{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Vs{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}class Ea{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class _d{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Lr.UNAUTHENTICATED))}shutdown(){}}class Cu{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class ja{constructor(e){this.t=e,this.currentUser=Lr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){var o=this;let u=this.i;const h=z=>this.i!==u?(u=this.i,n(z)):Promise.resolve();let v=new Vs;this.o=()=>{this.i++,this.currentUser=this.u(),v.resolve(),v=new Vs,e.enqueueRetryable(()=>h(this.currentUser))};const P=()=>{const z=v;e.enqueueRetryable((0,Ve.Z)(function*(){yield z.promise,yield h(o.currentUser)}))},V=z=>{yt("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=z,this.auth.addAuthTokenListener(this.o),P()};this.t.onInit(z=>V(z)),setTimeout(()=>{if(!this.auth){const z=this.t.getImmediate({optional:!0});z?V(z):(yt("FirebaseAuthCredentialsProvider","Auth not yet detected"),v.resolve(),v=new Vs)}},0),P()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(o=>this.i!==e?(yt("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):o?(mn("string"==typeof o.accessToken),new Ea(o.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return mn(null===e||"string"==typeof e),new Lr(e)}}class Tl{constructor(e,n,o){this.l=e,this.h=n,this.P=o,this.type="FirstParty",this.user=Lr.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class tr{constructor(e,n,o){this.l=e,this.h=n,this.P=o}getToken(){return Promise.resolve(new Tl(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(Lr.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Wl{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class bl{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){const o=h=>{null!=h.error&&yt("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${h.error.message}`);const v=h.token!==this.R;return this.R=h.token,yt("FirebaseAppCheckTokenProvider",`Received ${v?"new":"existing"} token.`),v?n(h.token):Promise.resolve()};this.o=h=>{e.enqueueRetryable(()=>o(h))};const u=h=>{yt("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=h,this.appCheck.addTokenListener(this.o)};this.A.onInit(h=>u(h)),setTimeout(()=>{if(!this.appCheck){const h=this.A.getImmediate({optional:!0});h?u(h):yt("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(mn("string"==typeof n.token),this.R=n.token,new Wl(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function ir(i){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(i);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(n);else for(let o=0;o<i;o++)n[o]=Math.floor(256*Math.random());return n}class vd{static newId(){const n=62*Math.floor(256/62);let o="";for(;o.length<20;){const u=ir(40);for(let h=0;h<u.length;++h)o.length<20&&u[h]<n&&(o+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(u[h]%62))}return o}}function Hn(i,e){return i<e?-1:i>e?1:0}function Ui(i,e,n){return i.length===e.length&&i.every((o,u)=>n(o,e[u]))}function wl(i){return i+"\0"}class Ar{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new vt(tt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new vt(tt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new vt(tt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new vt(tt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Ar.fromMillis(Date.now())}static fromDate(e){return Ar.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),o=Math.floor(1e6*(e-1e3*n));return new Ar(n,o)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Hn(this.nanoseconds,e.nanoseconds):Hn(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class sn{constructor(e){this.timestamp=e}static fromTimestamp(e){return new sn(e)}static min(){return new sn(new Ar(0,0))}static max(){return new sn(new Ar(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class no{constructor(e,n,o){void 0===n?n=0:n>e.length&&tn(),void 0===o?o=e.length-n:o>e.length-n&&tn(),this.segments=e,this.offset=n,this.len=o}get length(){return this.len}isEqual(e){return 0===no.comparator(this,e)}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof no?e.forEach(o=>{n.push(o)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,o=this.limit();n<o;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const o=Math.min(e.length,n.length);for(let u=0;u<o;u++){const h=e.get(u),v=n.get(u);if(h<v)return-1;if(h>v)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class Jn extends no{construct(e,n,o){return new Jn(e,n,o)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const n=[];for(const o of e){if(o.indexOf("//")>=0)throw new vt(tt.INVALID_ARGUMENT,`Invalid segment (${o}). Paths must not contain // in them.`);n.push(...o.split("/").filter(u=>u.length>0))}return new Jn(n)}static emptyPath(){return new Jn([])}}const yd=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class li extends no{construct(e,n,o){return new li(e,n,o)}static isValidIdentifier(e){return yd.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),li.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new li(["__name__"])}static fromServerFormat(e){const n=[];let o="",u=0;const h=()=>{if(0===o.length)throw new vt(tt.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(o),o=""};let v=!1;for(;u<e.length;){const P=e[u];if("\\"===P){if(u+1===e.length)throw new vt(tt.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const V=e[u+1];if("\\"!==V&&"."!==V&&"`"!==V)throw new vt(tt.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);o+=V,u+=2}else"`"===P?(v=!v,u++):"."!==P||v?(o+=P,u++):(h(),u++)}if(h(),v)throw new vt(tt.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new li(n)}static emptyPath(){return new li([])}}class Gt{constructor(e){this.path=e}static fromPath(e){return new Gt(Jn.fromString(e))}static fromName(e){return new Gt(Jn.fromString(e).popFirst(5))}static empty(){return new Gt(Jn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Jn.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,n){return Jn.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Gt(new Jn(e.slice()))}}class bi{constructor(e,n,o,u){this.indexId=e,this.collectionGroup=n,this.fields=o,this.indexState=u}}function Ta(i){return i.fields.find(e=>2===e.kind)}function Yo(i){return i.fields.filter(e=>2!==e.kind)}bi.UNKNOWN_ID=-1;class yo{constructor(e,n){this.fieldPath=e,this.kind=n}}class Ic{constructor(e,n){this.sequenceNumber=e,this.offset=n}static empty(){return new Ic(0,ro.min())}}function Yu(i,e){const n=i.toTimestamp().seconds,o=i.toTimestamp().nanoseconds+1,u=sn.fromTimestamp(1e9===o?new Ar(n+1,0):new Ar(n,o));return new ro(u,Gt.empty(),e)}function Id(i){return new ro(i.readTime,i.key,-1)}class ro{constructor(e,n,o){this.readTime=e,this.documentKey=n,this.largestBatchId=o}static min(){return new ro(sn.min(),Gt.empty(),-1)}static max(){return new ro(sn.max(),Gt.empty(),-1)}}function Ec(i,e){let n=i.readTime.compareTo(e.readTime);return 0!==n?n:(n=Gt.comparator(i.documentKey,e.documentKey),0!==n?n:Hn(i.largestBatchId,e.largestBatchId))}const S="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class M{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function A(i){return F.apply(this,arguments)}function F(){return F=(0,Ve.Z)(function*(i){if(i.code!==tt.FAILED_PRECONDITION||i.message!==S)throw i;yt("LocalStore","Unexpectedly lost primary lease")}),F.apply(this,arguments)}class L{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&tn(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new L((o,u)=>{this.nextCallback=h=>{this.wrapSuccess(e,h).next(o,u)},this.catchCallback=h=>{this.wrapFailure(n,h).next(o,u)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof L?n:L.resolve(n)}catch(n){return L.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):L.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):L.reject(n)}static resolve(e){return new L((n,o)=>{n(e)})}static reject(e){return new L((n,o)=>{o(e)})}static waitFor(e){return new L((n,o)=>{let u=0,h=0,v=!1;e.forEach(P=>{++u,P.next(()=>{++h,v&&h===u&&n()},V=>o(V))}),v=!0,h===u&&n()})}static or(e){let n=L.resolve(!1);for(const o of e)n=n.next(u=>u?L.resolve(u):o());return n}static forEach(e,n){const o=[];return e.forEach((u,h)=>{o.push(n.call(this,u,h))}),this.waitFor(o)}static mapArray(e,n){return new L((o,u)=>{const h=e.length,v=new Array(h);let P=0;for(let V=0;V<h;V++){const z=V;n(e[z]).next(ee=>{v[z]=ee,++P,P===h&&o(v)},ee=>u(ee))}})}static doWhile(e,n){return new L((o,u)=>{const h=()=>{!0===e()?n().next(()=>{h()},u):o()};h()})}}class J{constructor(e,n){this.action=e,this.transaction=n,this.aborted=!1,this.V=new Vs,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{n.error?this.V.reject(new Ke(e,n.error)):this.V.resolve()},this.transaction.onerror=o=>{const u=As(o.target.error);this.V.reject(new Ke(e,u))}}static open(e,n,o,u){try{return new J(n,e.transaction(u,o))}catch(h){throw new Ke(n,h)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(yt("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const n=this.transaction.objectStore(e);return new Zn(n)}}class de{constructor(e,n,o){this.name=e,this.version=n,this.p=o,12.2===de.S((0,We.z$)())&&Ti("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return yt("SimpleDb","Removing database:",e),Sr(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!(0,We.hl)())return!1;if(de.C())return!0;const e=(0,We.z$)(),n=de.S(e),o=0<n&&n<10,u=de.v(e),h=0<u&&u<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||o||h)}static C(){var e;return typeof process<"u"&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.F)}static M(e,n){return e.store(n)}static S(e){const n=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),o=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(o)}static v(e){const n=e.match(/Android ([\d.]+)/i),o=n?n[1].split(".").slice(0,2).join("."):"-1";return Number(o)}O(e){var n=this;return(0,Ve.Z)(function*(){return n.db||(yt("SimpleDb","Opening database:",n.name),n.db=yield new Promise((o,u)=>{const h=indexedDB.open(n.name,n.version);h.onsuccess=v=>{o(v.target.result)},h.onblocked=()=>{u(new Ke(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},h.onerror=v=>{const P=v.target.error;u("VersionError"===P.name?new vt(tt.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===P.name?new vt(tt.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+P):new Ke(e,P))},h.onupgradeneeded=v=>{yt("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',v.oldVersion),n.p.N(v.target.result,h.transaction,v.oldVersion,n.version).next(()=>{yt("SimpleDb","Database upgrade to version "+n.version+" complete")})}})),n.B&&(n.db.onversionchange=o=>n.B(o)),n.db})()}L(e){this.B=e,this.db&&(this.db.onversionchange=n=>e(n))}runTransaction(e,n,o,u){var h=this;return(0,Ve.Z)(function*(){const v="readonly"===n;let P=0;for(;;){++P;try{h.db=yield h.O(e);const V=J.open(h.db,e,v?"readonly":"readwrite",o),z=u(V).next(ee=>(V.g(),ee)).catch(ee=>(V.abort(ee),L.reject(ee))).toPromise();return z.catch(()=>{}),yield V.m,z}catch(V){const z=V,ee="FirebaseError"!==z.name&&P<3;if(yt("SimpleDb","Transaction failed with error:",z.message,"Retrying:",ee),h.close(),!ee)return Promise.reject(z)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class Qe{constructor(e){this.k=e,this.q=!1,this.K=null}get isDone(){return this.q}get $(){return this.K}set cursor(e){this.k=e}done(){this.q=!0}U(e){this.K=e}delete(){return Sr(this.k.delete())}}class Ke extends vt{constructor(e,n){super(tt.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${n}`),this.name="IndexedDbTransactionError"}}function Vt(i){return"IndexedDbTransactionError"===i.name}class Zn{constructor(e){this.store=e}put(e,n){let o;return void 0!==n?(yt("SimpleDb","PUT",this.store.name,e,n),o=this.store.put(n,e)):(yt("SimpleDb","PUT",this.store.name,"<auto-key>",e),o=this.store.put(e)),Sr(o)}add(e){return yt("SimpleDb","ADD",this.store.name,e,e),Sr(this.store.add(e))}get(e){return Sr(this.store.get(e)).next(n=>(void 0===n&&(n=null),yt("SimpleDb","GET",this.store.name,e,n),n))}delete(e){return yt("SimpleDb","DELETE",this.store.name,e),Sr(this.store.delete(e))}count(){return yt("SimpleDb","COUNT",this.store.name),Sr(this.store.count())}W(e,n){const o=this.options(e,n);if(o.index||"function"!=typeof this.store.getAll){const u=this.cursor(o),h=[];return this.G(u,(v,P)=>{h.push(P)}).next(()=>h)}{const u=this.store.getAll(o.range);return new L((h,v)=>{u.onerror=P=>{v(P.target.error)},u.onsuccess=P=>{h(P.target.result)}})}}j(e,n){const o=this.store.getAll(e,null===n?void 0:n);return new L((u,h)=>{o.onerror=v=>{h(v.target.error)},o.onsuccess=v=>{u(v.target.result)}})}H(e,n){yt("SimpleDb","DELETE ALL",this.store.name);const o=this.options(e,n);o.J=!1;const u=this.cursor(o);return this.G(u,(h,v,P)=>P.delete())}Y(e,n){let o;n?o=e:(o={},n=e);const u=this.cursor(o);return this.G(u,n)}Z(e){const n=this.cursor({});return new L((o,u)=>{n.onerror=h=>{const v=As(h.target.error);u(v)},n.onsuccess=h=>{const v=h.target.result;v?e(v.primaryKey,v.value).next(P=>{P?v.continue():o()}):o()}})}G(e,n){const o=[];return new L((u,h)=>{e.onerror=v=>{h(v.target.error)},e.onsuccess=v=>{const P=v.target.result;if(!P)return void u();const V=new Qe(P),z=n(P.primaryKey,P.value,V);if(z instanceof L){const ee=z.catch(le=>(V.done(),L.reject(le)));o.push(ee)}V.isDone?u():null===V.$?P.continue():P.continue(V.$)}}).next(()=>L.waitFor(o))}options(e,n){let o;return void 0!==e&&("string"==typeof e?o=e:n=e),{index:o,range:n}}cursor(e){let n="next";if(e.reverse&&(n="prev"),e.index){const o=this.store.index(e.index);return e.J?o.openKeyCursor(e.range,n):o.openCursor(e.range,n)}return this.store.openCursor(e.range,n)}}function Sr(i){return new L((e,n)=>{i.onsuccess=o=>{e(o.target.result)},i.onerror=o=>{const u=As(o.target.error);n(u)}})}let bn=!1;function As(i){const e=de.S((0,We.z$)());if(e>=12.2&&e<13){const n="An internal error was encountered in the Indexed Database server";if(i.message.indexOf(n)>=0){const o=new vt("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return bn||(bn=!0,setTimeout(()=>{throw o},0)),o}}return i}class di{constructor(e,n){this.asyncQueue=e,this.X=n,this.task=null}start(){this.ee(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}ee(e){var n=this;yt("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,Ve.Z)(function*(){n.task=null;try{yt("IndexBackiller",`Documents written: ${yield n.X.te()}`)}catch(o){Vt(o)?yt("IndexBackiller","Ignoring IndexedDB error during index backfill: ",o):yield A(o)}yield n.ee(6e4)}))}}class Au{constructor(e,n){this.localStore=e,this.persistence=n}te(e=50){var n=this;return(0,Ve.Z)(function*(){return n.persistence.runTransaction("Backfill Indexes","readwrite-primary",o=>n.ne(o,e))})()}ne(e,n){const o=new Set;let u=n,h=!0;return L.doWhile(()=>!0===h&&u>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(v=>{if(null!==v&&!o.has(v))return yt("IndexBackiller",`Processing collection: ${v}`),this.re(e,v,u).next(P=>{u-=P,o.add(v)});h=!1})).next(()=>n-u)}re(e,n,o){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,n).next(u=>this.localStore.localDocuments.getNextDocuments(e,n,u,o).next(h=>{const v=h.changes;return this.localStore.indexManager.updateIndexEntries(e,v).next(()=>this.ie(u,h)).next(P=>(yt("IndexBackiller",`Updating offset: ${P}`),this.localStore.indexManager.updateCollectionGroup(e,n,P))).next(()=>v.size)}))}ie(e,n){let o=e;return n.changes.forEach((u,h)=>{const v=Id(h);Ec(v,o)>0&&(o=v)}),new ro(o.readTime,o.documentKey,Math.max(n.batchId,e.largestBatchId))}}let as=(()=>{class i{constructor(n,o){this.previousValue=n,o&&(o.sequenceNumberHandler=u=>this.se(u),this.oe=u=>o.writeSequenceNumber(u))}se(n){return this.previousValue=Math.max(n,this.previousValue),this.previousValue}next(){const n=++this.previousValue;return this.oe&&this.oe(n),n}}return i._e=-1,i})();function oa(i){return null==i}function ba(i){return 0===i&&1/i==-1/0}function Ed(i){return"number"==typeof i&&Number.isInteger(i)&&!ba(i)&&i<=Number.MAX_SAFE_INTEGER&&i>=Number.MIN_SAFE_INTEGER}function Ni(i){let e="";for(let n=0;n<i.length;n++)e.length>0&&(e=aa(e)),e=io(i.get(n),e);return aa(e)}function io(i,e){let n=e;const o=i.length;for(let u=0;u<o;u++){const h=i.charAt(u);switch(h){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=h}}return n}function aa(i){return i+"\x01\x01"}function Io(i){const e=i.length;if(mn(e>=2),2===e)return mn("\x01"===i.charAt(0)&&"\x01"===i.charAt(1)),Jn.emptyPath();const n=e-2,o=[];let u="";for(let h=0;h<e;){const v=i.indexOf("\x01",h);switch((v<0||v>n)&&tn(),i.charAt(v+1)){case"\x01":const P=i.substring(h,v);let V;0===u.length?V=P:(u+=P,V=u,u=""),o.push(V);break;case"\x10":u+=i.substring(h,v),u+="\0";break;case"\x11":u+=i.substring(h,v+1);break;default:tn()}h=v+2}return new Jn(o)}const wa=["userId","batchId"];function su(i,e){return[i,Ni(e)]}function Ga(i,e,n){return[i,Ni(e),n]}const Tc={},so=["prefixPath","collectionGroup","readTime","documentId"],Zu=["prefixPath","collectionGroup","documentId"],Td=["collectionGroup","readTime","prefixPath","documentId"],Su=["canonicalId","targetId"],Yc=["targetId","path"],bc=["path","targetId"],ch=["collectionId","parent"],bd=["indexId","uid"],Kh=["uid","sequenceNumber"],Zc=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],Yh=["indexId","uid","orderedDocumentKey"],Qc=["userId","collectionPath","documentId"],Zh=["userId","collectionPath","largestBatchId"],Qu=["userId","collectionGroup","largestBatchId"],Ha=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],Ju=[...Ha,"documentOverlays"],oo=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],ql=oo,Jc=[...ql,"indexConfiguration","indexState","indexEntries"];class Xc extends M{constructor(e,n){super(),this.ae=e,this.currentSequenceNumber=n}}function es(i,e){const n=Ut(i);return de.M(n.ae,e)}function wc(i){let e=0;for(const n in i)Object.prototype.hasOwnProperty.call(i,n)&&e++;return e}function Ru(i,e){for(const n in i)Object.prototype.hasOwnProperty.call(i,n)&&e(n,i[n])}function xo(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}class ni{constructor(e,n){this.comparator=e,this.root=n||us.EMPTY}insert(e,n){return new ni(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,us.BLACK,null,null))}remove(e){return new ni(this.comparator,this.root.remove(e,this.comparator).copy(null,null,us.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const o=this.comparator(e,n.key);if(0===o)return n.value;o<0?n=n.left:o>0&&(n=n.right)}return null}indexOf(e){let n=0,o=this.root;for(;!o.isEmpty();){const u=this.comparator(e,o.key);if(0===u)return n+o.left.size;u<0?o=o.left:(n+=o.left.size+1,o=o.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,o)=>(e(n,o),!1))}toString(){const e=[];return this.inorderTraversal((n,o)=>(e.push(`${n}:${o}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Zo(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Zo(this.root,e,this.comparator,!1)}getReverseIterator(){return new Zo(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Zo(this.root,e,this.comparator,!0)}}class Zo{constructor(e,n,o,u){this.isReverse=u,this.nodeStack=[];let h=1;for(;!e.isEmpty();)if(h=n?o(e.key,n):1,n&&u&&(h*=-1),h<0)e=this.isReverse?e.left:e.right;else{if(0===h){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class us{constructor(e,n,o,u,h){this.key=e,this.value=n,this.color=o??us.RED,this.left=u??us.EMPTY,this.right=h??us.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,o,u,h){return new us(e??this.key,n??this.value,o??this.color,u??this.left,h??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,o){let u=this;const h=o(e,u.key);return u=h<0?u.copy(null,null,null,u.left.insert(e,n,o),null):0===h?u.copy(null,n,null,null,null):u.copy(null,null,null,null,u.right.insert(e,n,o)),u.fixUp()}removeMin(){if(this.left.isEmpty())return us.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let o,u=this;if(n(e,u.key)<0)u.left.isEmpty()||u.left.isRed()||u.left.left.isRed()||(u=u.moveRedLeft()),u=u.copy(null,null,null,u.left.remove(e,n),null);else{if(u.left.isRed()&&(u=u.rotateRight()),u.right.isEmpty()||u.right.isRed()||u.right.left.isRed()||(u=u.moveRedRight()),0===n(e,u.key)){if(u.right.isEmpty())return us.EMPTY;o=u.right.min(),u=u.copy(o.key,o.value,null,null,u.right.removeMin())}u=u.copy(null,null,null,null,u.right.remove(e,n))}return u.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,us.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,us.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw tn();const e=this.left.check();if(e!==this.right.check())throw tn();return e+(this.isRed()?0:1)}}us.EMPTY=null,us.RED=!0,us.BLACK=!1,us.EMPTY=new class{constructor(){this.size=0}get key(){throw tn()}get value(){throw tn()}get color(){throw tn()}get left(){throw tn()}get right(){throw tn()}copy(e,n,o,u,h){return this}insert(e,n,o){return new us(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class ii{constructor(e){this.comparator=e,this.data=new ni(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,o)=>(e(n),!1))}forEachInRange(e,n){const o=this.data.getIteratorFrom(e[0]);for(;o.hasNext();){const u=o.getNext();if(this.comparator(u.key,e[1])>=0)return;n(u.key)}}forEachWhile(e,n){let o;for(o=void 0!==n?this.data.getIteratorFrom(n):this.data.getIterator();o.hasNext();)if(!e(o.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Nu(this.data.getIterator())}getIteratorFrom(e){return new Nu(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(o=>{n=n.add(o)}),n}isEqual(e){if(!(e instanceof ii)||this.size!==e.size)return!1;const n=this.data.getIterator(),o=e.data.getIterator();for(;n.hasNext();){const u=n.getNext().key,h=o.getNext().key;if(0!==this.comparator(u,h))return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new ii(this.comparator);return n.data=e,n}}class Nu{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Dc(i){return i.hasNext()?i.getNext():void 0}class Qo{constructor(e){this.fields=e,e.sort(li.comparator)}static empty(){return new Qo([])}unionWith(e){let n=new ii(li.comparator);for(const o of this.fields)n=n.add(o);for(const o of e)n=n.add(o);return new Qo(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Ui(this.fields,e.fields,(n,o)=>n.isEqual(o))}}class Cc extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class vs{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(u){try{return atob(u)}catch(h){throw typeof DOMException<"u"&&h instanceof DOMException?new Cc("Invalid base64 string: "+h):h}}(e);return new vs(n)}static fromUint8Array(e){const n=function(u){let h="";for(let v=0;v<u.length;++v)h+=String.fromCharCode(u[v]);return h}(e);return new vs(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(n){const o=new Uint8Array(n.length);for(let u=0;u<n.length;u++)o[u]=n.charCodeAt(u);return o}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Hn(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}vs.EMPTY_BYTE_STRING=new vs("");const Xu=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ou(i){if(mn(!!i),"string"==typeof i){let e=0;const n=Xu.exec(i);if(mn(!!n),n[1]){let u=n[1];u=(u+"000000000").substr(0,9),e=Number(u)}const o=new Date(i);return{seconds:Math.floor(o.getTime()/1e3),nanos:e}}return{seconds:jn(i.seconds),nanos:jn(i.nanos)}}function jn(i){return"number"==typeof i?i:"string"==typeof i?Number(i):0}function ji(i){return"string"==typeof i?vs.fromBase64String(i):vs.fromUint8Array(i)}function ou(i){var e,n;return"server_timestamp"===(null===(n=((null===(e=i?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function ec(i){const e=i.mapValue.fields.__previous_value__;return ou(e)?ec(e):e}function $a(i){const e=Ou(i.mapValue.fields.__local_write_time__.timestampValue);return new Ar(e.seconds,e.nanos)}class Pu{constructor(e,n,o,u,h,v,P,V,z){this.databaseId=e,this.appId=n,this.persistenceKey=o,this.host=u,this.ssl=h,this.forceLongPolling=v,this.autoDetectLongPolling=P,this.longPollingOptions=V,this.useFetchStreams=z}}class Da{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new Da("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Da&&e.projectId===this.projectId&&e.database===this.database}}const Gi={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Ac={nullValue:"NULL_VALUE"};function au(i){return"nullValue"in i?0:"booleanValue"in i?1:"integerValue"in i||"doubleValue"in i?2:"timestampValue"in i?3:"stringValue"in i?5:"bytesValue"in i?6:"referenceValue"in i?7:"geoPointValue"in i?8:"arrayValue"in i?9:"mapValue"in i?ou(i)?4:lh(i)?9007199254740991:10:tn()}function Jo(i,e){if(i===e)return!0;const n=au(i);if(n!==au(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return i.booleanValue===e.booleanValue;case 4:return $a(i).isEqual($a(e));case 3:return function(u,h){if("string"==typeof u.timestampValue&&"string"==typeof h.timestampValue&&u.timestampValue.length===h.timestampValue.length)return u.timestampValue===h.timestampValue;const v=Ou(u.timestampValue),P=Ou(h.timestampValue);return v.seconds===P.seconds&&v.nanos===P.nanos}(i,e);case 5:return i.stringValue===e.stringValue;case 6:return h=e,ji(i.bytesValue).isEqual(ji(h.bytesValue));case 7:return i.referenceValue===e.referenceValue;case 8:return function(u,h){return jn(u.geoPointValue.latitude)===jn(h.geoPointValue.latitude)&&jn(u.geoPointValue.longitude)===jn(h.geoPointValue.longitude)}(i,e);case 2:return function(u,h){if("integerValue"in u&&"integerValue"in h)return jn(u.integerValue)===jn(h.integerValue);if("doubleValue"in u&&"doubleValue"in h){const v=jn(u.doubleValue),P=jn(h.doubleValue);return v===P?ba(v)===ba(P):isNaN(v)&&isNaN(P)}return!1}(i,e);case 9:return Ui(i.arrayValue.values||[],e.arrayValue.values||[],Jo);case 10:return function(u,h){const v=u.mapValue.fields||{},P=h.mapValue.fields||{};if(wc(v)!==wc(P))return!1;for(const V in v)if(v.hasOwnProperty(V)&&(void 0===P[V]||!Jo(v[V],P[V])))return!1;return!0}(i,e);default:return tn()}var h}function uu(i,e){return void 0!==(i.values||[]).find(n=>Jo(n,e))}function cu(i,e){if(i===e)return 0;const n=au(i),o=au(e);if(n!==o)return Hn(n,o);switch(n){case 0:case 9007199254740991:return 0;case 1:return Hn(i.booleanValue,e.booleanValue);case 2:return function(h,v){const P=jn(h.integerValue||h.doubleValue),V=jn(v.integerValue||v.doubleValue);return P<V?-1:P>V?1:P===V?0:isNaN(P)?isNaN(V)?0:-1:1}(i,e);case 3:return Dl(i.timestampValue,e.timestampValue);case 4:return Dl($a(i),$a(e));case 5:return Hn(i.stringValue,e.stringValue);case 6:return function(h,v){const P=ji(h),V=ji(v);return P.compareTo(V)}(i.bytesValue,e.bytesValue);case 7:return function(h,v){const P=h.split("/"),V=v.split("/");for(let z=0;z<P.length&&z<V.length;z++){const ee=Hn(P[z],V[z]);if(0!==ee)return ee}return Hn(P.length,V.length)}(i.referenceValue,e.referenceValue);case 8:return function(h,v){const P=Hn(jn(h.latitude),jn(v.latitude));return 0!==P?P:Hn(jn(h.longitude),jn(v.longitude))}(i.geoPointValue,e.geoPointValue);case 9:return function(h,v){const P=h.values||[],V=v.values||[];for(let z=0;z<P.length&&z<V.length;++z){const ee=cu(P[z],V[z]);if(ee)return ee}return Hn(P.length,V.length)}(i.arrayValue,e.arrayValue);case 10:return function(h,v){if(h===Gi.mapValue&&v===Gi.mapValue)return 0;if(h===Gi.mapValue)return 1;if(v===Gi.mapValue)return-1;const P=h.fields||{},V=Object.keys(P),z=v.fields||{},ee=Object.keys(z);V.sort(),ee.sort();for(let le=0;le<V.length&&le<ee.length;++le){const Ae=Hn(V[le],ee[le]);if(0!==Ae)return Ae;const et=cu(P[V[le]],z[ee[le]]);if(0!==et)return et}return Hn(V.length,ee.length)}(i.mapValue,e.mapValue);default:throw tn()}}function Dl(i,e){if("string"==typeof i&&"string"==typeof e&&i.length===e.length)return Hn(i,e);const n=Ou(i),o=Ou(e),u=Hn(n.seconds,o.seconds);return 0!==u?u:Hn(n.nanos,o.nanos)}function ua(i){return Eo(i)}function Eo(i){return"nullValue"in i?"null":"booleanValue"in i?""+i.booleanValue:"integerValue"in i?""+i.integerValue:"doubleValue"in i?""+i.doubleValue:"timestampValue"in i?function(n){const o=Ou(n);return`time(${o.seconds},${o.nanos})`}(i.timestampValue):"stringValue"in i?i.stringValue:"bytesValue"in i?ji(i.bytesValue).toBase64():"referenceValue"in i?Gt.fromName(i.referenceValue).toString():"geoPointValue"in i?function(n){return`geo(${n.latitude},${n.longitude})`}(i.geoPointValue):"arrayValue"in i?function(n){let o="[",u=!0;for(const h of n.values||[])u?u=!1:o+=",",o+=Eo(h);return o+"]"}(i.arrayValue):"mapValue"in i?function(n){const o=Object.keys(n.fields||{}).sort();let u="{",h=!0;for(const v of o)h?h=!1:u+=",",u+=`${v}:${Eo(n.fields[v])}`;return u+"}"}(i.mapValue):tn()}function Ca(i,e){return{referenceValue:`projects/${i.projectId}/databases/${i.database}/documents/${e.path.canonicalString()}`}}function tc(i){return!!i&&"integerValue"in i}function za(i){return!!i&&"arrayValue"in i}function Xo(i){return!!i&&"nullValue"in i}function wd(i){return!!i&&"doubleValue"in i&&isNaN(Number(i.doubleValue))}function el(i){return!!i&&"mapValue"in i}function nc(i){if(i.geoPointValue)return{geoPointValue:Object.assign({},i.geoPointValue)};if(i.timestampValue&&"object"==typeof i.timestampValue)return{timestampValue:Object.assign({},i.timestampValue)};if(i.mapValue){const e={mapValue:{fields:{}}};return Ru(i.mapValue.fields,(n,o)=>e.mapValue.fields[n]=nc(o)),e}if(i.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(i.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=nc(i.arrayValue.values[n]);return e}return Object.assign({},i)}function lh(i){return"__max__"===(((i.mapValue||{}).fields||{}).__type__||{}).stringValue}function Jh(i){return"nullValue"in i?Ac:"booleanValue"in i?{booleanValue:!1}:"integerValue"in i||"doubleValue"in i?{doubleValue:NaN}:"timestampValue"in i?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in i?{stringValue:""}:"bytesValue"in i?{bytesValue:""}:"referenceValue"in i?Ca(Da.empty(),Gt.empty()):"geoPointValue"in i?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in i?{arrayValue:{}}:"mapValue"in i?{mapValue:{}}:tn()}function Xh(i){return"nullValue"in i?{booleanValue:!1}:"booleanValue"in i?{doubleValue:NaN}:"integerValue"in i||"doubleValue"in i?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in i?{stringValue:""}:"stringValue"in i?{bytesValue:""}:"bytesValue"in i?Ca(Da.empty(),Gt.empty()):"referenceValue"in i?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in i?{arrayValue:{}}:"arrayValue"in i?{mapValue:{}}:"mapValue"in i?Gi:tn()}function hi(i,e){const n=cu(i.value,e.value);return 0!==n?n:i.inclusive&&!e.inclusive?-1:!i.inclusive&&e.inclusive?1:0}function rc(i,e){const n=cu(i.value,e.value);return 0!==n?n:i.inclusive&&!e.inclusive?1:!i.inclusive&&e.inclusive?-1:0}class Ki{constructor(e){this.value=e}static empty(){return new Ki({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let o=0;o<e.length-1;++o)if(n=(n.mapValue.fields||{})[e.get(o)],!el(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=nc(n)}setAll(e){let n=li.emptyPath(),o={},u=[];e.forEach((v,P)=>{if(!n.isImmediateParentOf(P)){const V=this.getFieldsMap(n);this.applyChanges(V,o,u),o={},u=[],n=P.popLast()}v?o[P.lastSegment()]=nc(v):u.push(P.lastSegment())});const h=this.getFieldsMap(n);this.applyChanges(h,o,u)}delete(e){const n=this.field(e.popLast());el(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Jo(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let o=0;o<e.length;++o){let u=n.mapValue.fields[e.get(o)];el(u)&&u.mapValue.fields||(u={mapValue:{fields:{}}},n.mapValue.fields[e.get(o)]=u),n=u}return n.mapValue.fields}applyChanges(e,n,o){Ru(n,(u,h)=>e[u]=h);for(const u of o)delete e[u]}clone(){return new Ki(nc(this.value))}}function Dd(i){const e=[];return Ru(i.fields,(n,o)=>{const u=new li([n]);if(el(o)){const h=Dd(o.mapValue).fields;if(0===h.length)e.push(u);else for(const v of h)e.push(u.child(v))}else e.push(u)}),new Qo(e)}class qn{constructor(e,n,o,u,h,v,P){this.key=e,this.documentType=n,this.version=o,this.readTime=u,this.createTime=h,this.data=v,this.documentState=P}static newInvalidDocument(e){return new qn(e,0,sn.min(),sn.min(),sn.min(),Ki.empty(),0)}static newFoundDocument(e,n,o,u){return new qn(e,1,n,sn.min(),o,u,0)}static newNoDocument(e,n){return new qn(e,2,n,sn.min(),sn.min(),Ki.empty(),0)}static newUnknownDocument(e,n){return new qn(e,3,n,sn.min(),sn.min(),Ki.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(sn.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Ki.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Ki.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=sn.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof qn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new qn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Mu{constructor(e,n){this.position=e,this.inclusive=n}}function ic(i,e,n){let o=0;for(let u=0;u<i.position.length;u++){const h=e[u],v=i.position[u];if(o=h.field.isKeyField()?Gt.comparator(Gt.fromName(v.referenceValue),n.key):cu(v,n.data.field(h.field)),"desc"===h.dir&&(o*=-1),0!==o)break}return o}function Kl(i,e){if(null===i)return null===e;if(null===e||i.inclusive!==e.inclusive||i.position.length!==e.position.length)return!1;for(let n=0;n<i.position.length;n++)if(!Jo(i.position[n],e.position[n]))return!1;return!0}class ys{constructor(e,n="asc"){this.field=e,this.dir=n}}function du(i,e){return i.dir===e.dir&&i.field.isEqual(e.field)}class Cl{}class cr extends Cl{constructor(e,n,o){super(),this.field=e,this.op=n,this.value=o}static create(e,n,o){return e.isKeyField()?"in"===n||"not-in"===n?this.createKeyFieldInFilter(e,n,o):new tl(e,n,o):"array-contains"===n?new Zl(e,o):"in"===n?new Fu(e,o):"not-in"===n?new Al(e,o):"array-contains-any"===n?new Nc(e,o):new cr(e,n,o)}static createKeyFieldInFilter(e,n,o){return"in"===n?new tf(e,o):new Kf(e,o)}matches(e){const n=e.data.field(this.field);return"!="===this.op?null!==n&&this.matchesComparison(cu(n,this.value)):null!==n&&au(this.value)===au(n)&&this.matchesComparison(cu(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return tn()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Mr extends Cl{constructor(e,n){super(),this.filters=e,this.op=n,this.ue=null}static create(e,n){return new Mr(e,n)}matches(e){return sc(this)?void 0===this.filters.find(n=>!n.matches(e)):void 0!==this.filters.find(n=>n.matches(e))}getFlattenedFilters(){return null!==this.ue||(this.ue=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ue}getFilters(){return Object.assign([],this.filters)}}function sc(i){return"and"===i.op}function Sc(i){return"or"===i.op}function xu(i){return Cd(i)&&sc(i)}function Cd(i){for(const e of i.filters)if(e instanceof Mr)return!1;return!0}function Ss(i){if(i instanceof cr)return i.field.canonicalString()+i.op.toString()+ua(i.value);if(xu(i))return i.filters.map(e=>Ss(e)).join(",");{const e=i.filters.map(n=>Ss(n)).join(",");return`${i.op}(${e})`}}function Yl(i,e){return i instanceof cr?(o=i,(u=e)instanceof cr&&o.op===u.op&&o.field.isEqual(u.field)&&Jo(o.value,u.value)):i instanceof Mr?function(o,u){return u instanceof Mr&&o.op===u.op&&o.filters.length===u.filters.length&&o.filters.reduce((h,v,P)=>h&&Yl(v,u.filters[P]),!0)}(i,e):void tn();var o,u}function ku(i,e){const n=i.filters.concat(e);return Mr.create(n,i.op)}function ef(i){return i instanceof cr?`${(n=i).field.canonicalString()} ${n.op} ${ua(n.value)}`:i instanceof Mr?function(n){return n.op.toString()+" {"+n.getFilters().map(ef).join(" ,")+"}"}(i):"Filter";var n}class tl extends cr{constructor(e,n,o){super(e,n,o),this.key=Gt.fromName(o.referenceValue)}matches(e){const n=Gt.comparator(e.key,this.key);return this.matchesComparison(n)}}class tf extends cr{constructor(e,n){super(e,"in",n),this.keys=Rc(0,n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class Kf extends cr{constructor(e,n){super(e,"not-in",n),this.keys=Rc(0,n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function Rc(i,e){var n;return((null===(n=e.arrayValue)||void 0===n?void 0:n.values)||[]).map(o=>Gt.fromName(o.referenceValue))}class Zl extends cr{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return za(n)&&uu(n.arrayValue,this.value)}}class Fu extends cr{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return null!==n&&uu(this.value.arrayValue,n)}}class Al extends cr{constructor(e,n){super(e,"not-in",n)}matches(e){if(uu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return null!==n&&!uu(this.value.arrayValue,n)}}class Nc extends cr{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!za(n)||!n.arrayValue.values)&&n.arrayValue.values.some(o=>uu(this.value.arrayValue,o))}}class nl{constructor(e,n=null,o=[],u=[],h=null,v=null,P=null){this.path=e,this.collectionGroup=n,this.orderBy=o,this.filters=u,this.limit=h,this.startAt=v,this.endAt=P,this.ce=null}}function Sl(i,e=null,n=[],o=[],u=null,h=null,v=null){return new nl(i,e,n,o,u,h,v)}function Aa(i){const e=Ut(i);if(null===e.ce){let n=e.path.canonicalString();null!==e.collectionGroup&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(o=>Ss(o)).join(","),n+="|ob:",n+=e.orderBy.map(o=>{return(h=o).field.canonicalString()+h.dir;var h}).join(","),oa(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(o=>ua(o)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(o=>ua(o)).join(",")),e.ce=n}return e.ce}function rl(i,e){if(i.limit!==e.limit||i.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<i.orderBy.length;n++)if(!du(i.orderBy[n],e.orderBy[n]))return!1;if(i.filters.length!==e.filters.length)return!1;for(let n=0;n<i.filters.length;n++)if(!Yl(i.filters[n],e.filters[n]))return!1;return i.collectionGroup===e.collectionGroup&&!!i.path.isEqual(e.path)&&!!Kl(i.startAt,e.startAt)&&Kl(i.endAt,e.endAt)}function Lu(i){return Gt.isDocumentKey(i.path)&&null===i.collectionGroup&&0===i.filters.length}function Oc(i,e){return i.filters.filter(n=>n instanceof cr&&n.field.isEqual(e))}function Ql(i,e,n){let o=Ac,u=!0;for(const h of Oc(i,e)){let v=Ac,P=!0;switch(h.op){case"<":case"<=":v=Jh(h.value);break;case"==":case"in":case">=":v=h.value;break;case">":v=h.value,P=!1;break;case"!=":case"not-in":v=Ac}hi({value:o,inclusive:u},{value:v,inclusive:P})<0&&(o=v,u=P)}if(null!==n)for(let h=0;h<i.orderBy.length;++h)if(i.orderBy[h].field.isEqual(e)){const v=n.position[h];hi({value:o,inclusive:u},{value:v,inclusive:n.inclusive})<0&&(o=v,u=n.inclusive);break}return{value:o,inclusive:u}}function dh(i,e,n){let o=Gi,u=!0;for(const h of Oc(i,e)){let v=Gi,P=!0;switch(h.op){case">=":case">":v=Xh(h.value),P=!1;break;case"==":case"in":case"<=":v=h.value;break;case"<":v=h.value,P=!1;break;case"!=":case"not-in":v=Gi}rc({value:o,inclusive:u},{value:v,inclusive:P})>0&&(o=v,u=P)}if(null!==n)for(let h=0;h<i.orderBy.length;++h)if(i.orderBy[h].field.isEqual(e)){const v=n.position[h];rc({value:o,inclusive:u},{value:v,inclusive:n.inclusive})>0&&(o=v,u=n.inclusive);break}return{value:o,inclusive:u}}class Rs{constructor(e,n=null,o=[],u=[],h=null,v="F",P=null,V=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=o,this.filters=u,this.limit=h,this.limitType=v,this.startAt=P,this.endAt=V,this.le=null,this.he=null,this.Pe=null}}function Ad(i,e,n,o,u,h,v,P){return new Rs(i,e,n,o,u,h,v,P)}function il(i){return new Rs(i)}function Jl(i){return 0===i.filters.length&&null===i.limit&&null==i.startAt&&null==i.endAt&&(0===i.explicitOrderBy.length||1===i.explicitOrderBy.length&&i.explicitOrderBy[0].field.isKeyField())}function N(i){return null!==i.collectionGroup}function m(i){const e=Ut(i);if(null===e.le){e.le=[];const n=new Set;for(const h of e.explicitOrderBy)e.le.push(h),n.add(h.field.canonicalString());const o=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(v){let P=new ii(li.comparator);return v.filters.forEach(V=>{V.getFlattenedFilters().forEach(z=>{z.isInequality()&&(P=P.add(z.field))})}),P})(e).forEach(h=>{n.has(h.canonicalString())||h.isKeyField()||e.le.push(new ys(h,o))}),n.has(li.keyField().canonicalString())||e.le.push(new ys(li.keyField(),o))}return e.le}function T(i){const e=Ut(i);return e.he||(e.he=function x(i,e){if("F"===i.limitType)return Sl(i.path,i.collectionGroup,e,i.filters,i.limit,i.startAt,i.endAt);{e=e.map(u=>new ys(u.field,"desc"===u.dir?"asc":"desc"));const n=i.endAt?new Mu(i.endAt.position,i.endAt.inclusive):null,o=i.startAt?new Mu(i.startAt.position,i.startAt.inclusive):null;return Sl(i.path,i.collectionGroup,e,i.filters,i.limit,n,o)}}(e,m(i))),e.he}function Z(i,e){const n=i.filters.concat([e]);return new Rs(i.path,i.collectionGroup,i.explicitOrderBy.slice(),n,i.limit,i.limitType,i.startAt,i.endAt)}function ce(i,e,n){return new Rs(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),e,n,i.startAt,i.endAt)}function Be(i,e){return rl(T(i),T(e))&&i.limitType===e.limitType}function st(i){return`${Aa(T(i))}|lt:${i.limitType}`}function bt(i){return`Query(target=${function(n){let o=n.path.canonicalString();return null!==n.collectionGroup&&(o+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(o+=`, filters: [${n.filters.map(u=>ef(u)).join(", ")}]`),oa(n.limit)||(o+=", limit: "+n.limit),n.orderBy.length>0&&(o+=`, orderBy: [${n.orderBy.map(u=>{return`${(v=u).field.canonicalString()} (${v.dir})`;var v}).join(", ")}]`),n.startAt&&(o+=", startAt: ",o+=n.startAt.inclusive?"b:":"a:",o+=n.startAt.position.map(u=>ua(u)).join(",")),n.endAt&&(o+=", endAt: ",o+=n.endAt.inclusive?"a:":"b:",o+=n.endAt.position.map(u=>ua(u)).join(",")),`Target(${o})`}(T(i))}; limitType=${i.limitType})`}function dn(i,e){return e.isFoundDocument()&&function(o,u){const h=u.key.path;return null!==o.collectionGroup?u.key.hasCollectionId(o.collectionGroup)&&o.path.isPrefixOf(h):Gt.isDocumentKey(o.path)?o.path.isEqual(h):o.path.isImmediateParentOf(h)}(i,e)&&function(o,u){for(const h of m(o))if(!h.field.isKeyField()&&null===u.data.field(h.field))return!1;return!0}(i,e)&&function(o,u){for(const h of o.filters)if(!h.matches(u))return!1;return!0}(i,e)&&(u=e,!((o=i).startAt&&!function(v,P,V){const z=ic(v,P,V);return v.inclusive?z<=0:z<0}(o.startAt,m(o),u)||o.endAt&&!function(v,P,V){const z=ic(v,P,V);return v.inclusive?z>=0:z>0}(o.endAt,m(o),u)));var o,u}function wn(i){return i.collectionGroup||(i.path.length%2==1?i.path.lastSegment():i.path.get(i.path.length-2))}function Tr(i){return(e,n)=>{let o=!1;for(const u of m(i)){const h=ca(u,e,n);if(0!==h)return h;o=o||u.field.isKeyField()}return 0}}function ca(i,e,n){const o=i.field.isKeyField()?Gt.comparator(e.key,n.key):function(h,v,P){const V=v.data.field(h),z=P.data.field(h);return null!==V&&null!==z?cu(V,z):tn()}(i.field,e,n);switch(i.dir){case"asc":return o;case"desc":return-1*o;default:return tn()}}class Ws{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),o=this.inner[n];if(void 0!==o)for(const[u,h]of o)if(this.equalsFn(u,e))return h}has(e){return void 0!==this.get(e)}set(e,n){const o=this.mapKeyFn(e),u=this.inner[o];if(void 0===u)return this.inner[o]=[[e,n]],void this.innerSize++;for(let h=0;h<u.length;h++)if(this.equalsFn(u[h][0],e))return void(u[h]=[e,n]);u.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),o=this.inner[n];if(void 0===o)return!1;for(let u=0;u<o.length;u++)if(this.equalsFn(o[u][0],e))return 1===o.length?delete this.inner[n]:o.splice(u,1),this.innerSize--,!0;return!1}forEach(e){Ru(this.inner,(n,o)=>{for(const[u,h]of o)e(u,h)})}isEmpty(){return xo(this.inner)}size(){return this.innerSize}}const Rl=new ni(Gt.comparator);function qs(){return Rl}const Sd=new ni(Gt.comparator);function Bs(...i){let e=Sd;for(const n of i)e=e.insert(n.key,n);return e}function si(i){let e=Sd;return i.forEach((n,o)=>e=e.insert(n,o.overlayedDocument)),e}function ao(){return Wa()}function Xl(){return Wa()}function Wa(){return new Ws(i=>i.toString(),(i,e)=>i.isEqual(e))}const sl=new ni(Gt.comparator),hh=new ii(Gt.comparator);function Xn(...i){let e=hh;for(const n of i)e=e.add(n);return e}const Rd=new ii(Hn);function Pc(){return Rd}function Nd(i,e){if(i.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ba(e)?"-0":e}}function fh(i){return{integerValue:""+i}}function ed(i,e){return Ed(e)?fh(e):Nd(i,e)}class hu{constructor(){this._=void 0}}function nf(i,e,n){return i instanceof To?function(u,h){const v={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:u.seconds,nanos:u.nanoseconds}}}};return h&&ou(h)&&(h=ec(h)),h&&(v.fields.__previous_value__=h),{mapValue:v}}(n,e):i instanceof qa?Nl(i,e):i instanceof Ka?Vu(i,e):function(u,h){const v=Mc(u,h),P=Od(v)+Od(u.Ie);return tc(v)&&tc(u.Ie)?fh(P):Nd(u.serializer,P)}(i,e)}function ph(i,e,n){return i instanceof qa?Nl(i,e):i instanceof Ka?Vu(i,e):n}function Mc(i,e){return i instanceof bo?tc(o=e)||(h=o)&&"doubleValue"in h?e:{integerValue:0}:null;var o,h}class To extends hu{}class qa extends hu{constructor(e){super(),this.elements=e}}function Nl(i,e){const n=Yf(e);for(const o of i.elements)n.some(u=>Jo(u,o))||n.push(o);return{arrayValue:{values:n}}}class Ka extends hu{constructor(e){super(),this.elements=e}}function Vu(i,e){let n=Yf(e);for(const o of i.elements)n=n.filter(u=>!Jo(u,o));return{arrayValue:{values:n}}}class bo extends hu{constructor(e,n){super(),this.serializer=e,this.Ie=n}}function Od(i){return jn(i.integerValue||i.doubleValue)}function Yf(i){return za(i)&&i.arrayValue.values?i.arrayValue.values.slice():[]}class Ol{constructor(e,n){this.field=e,this.transform=n}}class la{constructor(e,n){this.version=e,this.transformResults=n}}class Oi{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Oi}static exists(e){return new Oi(void 0,e)}static updateTime(e){return new Oi(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Pd(i,e){return void 0!==i.updateTime?e.isFoundDocument()&&e.version.isEqual(i.updateTime):void 0===i.exists||i.exists===e.isFoundDocument()}class gh{}function Md(i,e){if(!i.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return i.isNoDocument()?new xc(i.key,Oi.none()):new Sa(i.key,i.data,Oi.none());{const n=i.data,o=Ki.empty();let u=new ii(li.comparator);for(let h of e.fields)if(!u.has(h)){let v=n.field(h);null===v&&h.length>1&&(h=h.popLast(),v=n.field(h)),null===v?o.delete(h):o.set(h,v),u=u.add(h)}return new fu(i.key,o,new Qo(u.toArray()),Oi.none())}}function rf(i,e,n){i instanceof Sa?function(u,h,v){const P=u.value.clone(),V=td(u.fieldTransforms,h,v.transformResults);P.setAll(V),h.convertToFoundDocument(v.version,P).setHasCommittedMutations()}(i,e,n):i instanceof fu?function(u,h,v){if(!Pd(u.precondition,h))return void h.convertToUnknownDocument(v.version);const P=td(u.fieldTransforms,h,v.transformResults),V=h.data;V.setAll(ko(u)),V.setAll(P),h.convertToFoundDocument(v.version,V).setHasCommittedMutations()}(i,e,n):e.convertToNoDocument(n.version).setHasCommittedMutations()}function xd(i,e,n,o){return i instanceof Sa?function(h,v,P,V){if(!Pd(h.precondition,v))return P;const z=h.value.clone(),ee=kd(h.fieldTransforms,V,v);return z.setAll(ee),v.convertToFoundDocument(v.version,z).setHasLocalMutations(),null}(i,e,n,o):i instanceof fu?function(h,v,P,V){if(!Pd(h.precondition,v))return P;const z=kd(h.fieldTransforms,V,v),ee=v.data;return ee.setAll(ko(h)),ee.setAll(z),v.convertToFoundDocument(v.version,ee).setHasLocalMutations(),null===P?null:P.unionWith(h.fieldMask.fields).unionWith(h.fieldTransforms.map(le=>le.field))}(i,e,n,o):(P=n,Pd(i.precondition,v=e)?(v.convertToNoDocument(v.version).setHasLocalMutations(),null):P);var v,P}function da(i,e){let n=null;for(const o of i.fieldTransforms){const u=e.data.field(o.field),h=Mc(o.transform,u||null);null!=h&&(null===n&&(n=Ki.empty()),n.set(o.field,h))}return n||null}function mh(i,e){return i.type===e.type&&!!i.key.isEqual(e.key)&&!!i.precondition.isEqual(e.precondition)&&(u=e.fieldTransforms,!!(void 0===(o=i.fieldTransforms)&&void 0===u||o&&u&&Ui(o,u,(h,v)=>function Zf(i,e){return i.field.isEqual(e.field)&&(u=e.transform,(o=i.transform)instanceof qa&&u instanceof qa||o instanceof Ka&&u instanceof Ka?Ui(o.elements,u.elements,Jo):o instanceof bo&&u instanceof bo?Jo(o.Ie,u.Ie):o instanceof To&&u instanceof To);var o,u}(h,v))))&&(0===i.type?i.value.isEqual(e.value):1!==i.type||i.data.isEqual(e.data)&&i.fieldMask.isEqual(e.fieldMask));var o,u}class Sa extends gh{constructor(e,n,o,u=[]){super(),this.key=e,this.value=n,this.precondition=o,this.fieldTransforms=u,this.type=0}getFieldMask(){return null}}class fu extends gh{constructor(e,n,o,u,h=[]){super(),this.key=e,this.data=n,this.fieldMask=o,this.precondition=u,this.fieldTransforms=h,this.type=1}getFieldMask(){return this.fieldMask}}function ko(i){const e=new Map;return i.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const o=i.data.field(n);e.set(n,o)}}),e}function td(i,e,n){const o=new Map;mn(i.length===n.length);for(let u=0;u<n.length;u++){const h=i[u],v=h.transform,P=e.data.field(h.field);o.set(h.field,ph(v,P,n[u]))}return o}function kd(i,e,n){const o=new Map;for(const u of i){const h=u.transform,v=n.data.field(u.field);o.set(u.field,nf(h,v,e))}return o}class xc extends gh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class ea extends gh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class ol{constructor(e,n,o,u){this.batchId=e,this.localWriteTime=n,this.baseMutations=o,this.mutations=u}applyToRemoteDocument(e,n){const o=n.mutationResults;for(let u=0;u<this.mutations.length;u++){const h=this.mutations[u];h.key.isEqual(e.key)&&rf(h,e,o[u])}}applyToLocalView(e,n){for(const o of this.baseMutations)o.key.isEqual(e.key)&&(n=xd(o,e,n,this.localWriteTime));for(const o of this.mutations)o.key.isEqual(e.key)&&(n=xd(o,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const o=Xl();return this.mutations.forEach(u=>{const h=e.get(u.key),v=h.overlayedDocument;let P=this.applyToLocalView(v,h.mutatedFields);P=n.has(u.key)?null:P;const V=Md(v,P);null!==V&&o.set(u.key,V),v.isValidDocument()||v.convertToNoDocument(sn.min())}),o}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Xn())}isEqual(e){return this.batchId===e.batchId&&Ui(this.mutations,e.mutations,(n,o)=>mh(n,o))&&Ui(this.baseMutations,e.baseMutations,(n,o)=>mh(n,o))}}class Pl{constructor(e,n,o,u){this.batch=e,this.commitVersion=n,this.mutationResults=o,this.docVersions=u}static from(e,n,o){mn(e.mutations.length===o.length);let u=sl;const h=e.mutations;for(let v=0;v<h.length;v++)u=u.insert(h[v].key,o[v].version);return new Pl(e,n,o,u)}}class al{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class ac{constructor(e,n){this.count=e,this.unchangedNames=n}}var Us,Rr;function Bu(i){switch(i){default:return tn();case tt.CANCELLED:case tt.UNKNOWN:case tt.DEADLINE_EXCEEDED:case tt.RESOURCE_EXHAUSTED:case tt.INTERNAL:case tt.UNAVAILABLE:case tt.UNAUTHENTICATED:return!1;case tt.INVALID_ARGUMENT:case tt.NOT_FOUND:case tt.ALREADY_EXISTS:case tt.PERMISSION_DENIED:case tt.FAILED_PRECONDITION:case tt.ABORTED:case tt.OUT_OF_RANGE:case tt.UNIMPLEMENTED:case tt.DATA_LOSS:return!0}}function nd(i){if(void 0===i)return Ti("GRPC error has no .code"),tt.UNKNOWN;switch(i){case Us.OK:return tt.OK;case Us.CANCELLED:return tt.CANCELLED;case Us.UNKNOWN:return tt.UNKNOWN;case Us.DEADLINE_EXCEEDED:return tt.DEADLINE_EXCEEDED;case Us.RESOURCE_EXHAUSTED:return tt.RESOURCE_EXHAUSTED;case Us.INTERNAL:return tt.INTERNAL;case Us.UNAVAILABLE:return tt.UNAVAILABLE;case Us.UNAUTHENTICATED:return tt.UNAUTHENTICATED;case Us.INVALID_ARGUMENT:return tt.INVALID_ARGUMENT;case Us.NOT_FOUND:return tt.NOT_FOUND;case Us.ALREADY_EXISTS:return tt.ALREADY_EXISTS;case Us.PERMISSION_DENIED:return tt.PERMISSION_DENIED;case Us.FAILED_PRECONDITION:return tt.FAILED_PRECONDITION;case Us.ABORTED:return tt.ABORTED;case Us.OUT_OF_RANGE:return tt.OUT_OF_RANGE;case Us.UNIMPLEMENTED:return tt.UNIMPLEMENTED;case Us.DATA_LOSS:return tt.DATA_LOSS;default:return tn()}}(Rr=Us||(Us={}))[Rr.OK=0]="OK",Rr[Rr.CANCELLED=1]="CANCELLED",Rr[Rr.UNKNOWN=2]="UNKNOWN",Rr[Rr.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Rr[Rr.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Rr[Rr.NOT_FOUND=5]="NOT_FOUND",Rr[Rr.ALREADY_EXISTS=6]="ALREADY_EXISTS",Rr[Rr.PERMISSION_DENIED=7]="PERMISSION_DENIED",Rr[Rr.UNAUTHENTICATED=16]="UNAUTHENTICATED",Rr[Rr.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Rr[Rr.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Rr[Rr.ABORTED=10]="ABORTED",Rr[Rr.OUT_OF_RANGE=11]="OUT_OF_RANGE",Rr[Rr.UNIMPLEMENTED=12]="UNIMPLEMENTED",Rr[Rr.INTERNAL=13]="INTERNAL",Rr[Rr.UNAVAILABLE=14]="UNAVAILABLE",Rr[Rr.DATA_LOSS=15]="DATA_LOSS";function ul(){return new TextEncoder}const Qf=new Ko([4294967295,4294967295],0);function sf(i){const e=ul().encode(i),n=new _o;return n.update(e),new Uint8Array(n.digest())}function b(i){const e=new DataView(i.buffer),n=e.getUint32(0,!0),o=e.getUint32(4,!0),u=e.getUint32(8,!0),h=e.getUint32(12,!0);return[new Ko([n,o],0),new Ko([u,h],0)]}class f{constructor(e,n,o){if(this.bitmap=e,this.padding=n,this.hashCount=o,n<0||n>=8)throw new _(`Invalid padding: ${n}`);if(o<0)throw new _(`Invalid hash count: ${o}`);if(e.length>0&&0===this.hashCount)throw new _(`Invalid hash count: ${o}`);if(0===e.length&&0!==n)throw new _(`Invalid padding when bitmap length is 0: ${n}`);this.Te=8*e.length-n,this.Ee=Ko.fromNumber(this.Te)}de(e,n,o){let u=e.add(n.multiply(Ko.fromNumber(o)));return 1===u.compare(Qf)&&(u=new Ko([u.getBits(0),u.getBits(1)],0)),u.modulo(this.Ee).toNumber()}Ae(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.Te)return!1;const n=sf(e),[o,u]=b(n);for(let h=0;h<this.hashCount;h++){const v=this.de(o,u,h);if(!this.Ae(v))return!1}return!0}static create(e,n,o){const u=e%8==0?0:8-e%8,h=new Uint8Array(Math.ceil(e/8)),v=new f(h,u,n);return o.forEach(P=>v.insert(P)),v}insert(e){if(0===this.Te)return;const n=sf(e),[o,u]=b(n);for(let h=0;h<this.hashCount;h++){const v=this.de(o,u,h);this.Re(v)}}Re(e){const n=Math.floor(e/8);this.bitmap[n]|=1<<e%8}}class _ extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class C{constructor(e,n,o,u,h){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=o,this.documentUpdates=u,this.resolvedLimboDocuments=h}static createSynthesizedRemoteEventForCurrentChange(e,n,o){const u=new Map;return u.set(e,G.createSynthesizedTargetChangeForCurrentChange(e,n,o)),new C(sn.min(),u,new ni(Hn),qs(),Xn())}}class G{constructor(e,n,o,u,h){this.resumeToken=e,this.current=n,this.addedDocuments=o,this.modifiedDocuments=u,this.removedDocuments=h}static createSynthesizedTargetChangeForCurrentChange(e,n,o){return new G(o,n,Xn(),Xn(),Xn())}}class X{constructor(e,n,o,u){this.Ve=e,this.removedTargetIds=n,this.key=o,this.me=u}}class Ee{constructor(e,n){this.targetId=e,this.fe=n}}class Ge{constructor(e,n,o=vs.EMPTY_BYTE_STRING,u=null){this.state=e,this.targetIds=n,this.resumeToken=o,this.cause=u}}class pt{constructor(){this.ge=0,this.pe=fn(),this.ye=vs.EMPTY_BYTE_STRING,this.we=!1,this.Se=!0}get current(){return this.we}get resumeToken(){return this.ye}get be(){return 0!==this.ge}get De(){return this.Se}Ce(e){e.approximateByteSize()>0&&(this.Se=!0,this.ye=e)}ve(){let e=Xn(),n=Xn(),o=Xn();return this.pe.forEach((u,h)=>{switch(h){case 0:e=e.add(u);break;case 2:n=n.add(u);break;case 1:o=o.add(u);break;default:tn()}}),new G(this.ye,this.we,e,n,o)}Fe(){this.Se=!1,this.pe=fn()}Me(e,n){this.Se=!0,this.pe=this.pe.insert(e,n)}xe(e){this.Se=!0,this.pe=this.pe.remove(e)}Oe(){this.ge+=1}Ne(){this.ge-=1}Be(){this.Se=!0,this.we=!0}}class en{constructor(e){this.Le=e,this.ke=new Map,this.qe=qs(),this.Qe=pn(),this.Ke=new ni(Hn)}$e(e){for(const n of e.Ve)e.me&&e.me.isFoundDocument()?this.Ue(n,e.me):this.We(n,e.key,e.me);for(const n of e.removedTargetIds)this.We(n,e.key,e.me)}Ge(e){this.forEachTarget(e,n=>{const o=this.ze(n);switch(e.state){case 0:this.je(n)&&o.Ce(e.resumeToken);break;case 1:o.Ne(),o.be||o.Fe(),o.Ce(e.resumeToken);break;case 2:o.Ne(),o.be||this.removeTarget(n);break;case 3:this.je(n)&&(o.Be(),o.Ce(e.resumeToken));break;case 4:this.je(n)&&(this.He(n),o.Ce(e.resumeToken));break;default:tn()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ke.forEach((o,u)=>{this.je(u)&&n(u)})}Je(e){const n=e.targetId,o=e.fe.count,u=this.Ye(n);if(u){const h=u.target;if(Lu(h))if(0===o){const v=new Gt(h.path);this.We(n,v,qn.newNoDocument(v,sn.min()))}else mn(1===o);else{const v=this.Ze(n);if(v!==o){const P=this.Xe(e),V=P?this.et(P,e,v):1;0!==V&&(this.He(n),this.Ke=this.Ke.insert(n,2===V?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch"))}}}}Xe(e){const n=e.fe.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:o="",padding:u=0},hashCount:h=0}=n;let v,P;try{v=ji(o).toUint8Array()}catch(V){if(V instanceof Cc)return vo("Decoding the base64 bloom filter in existence filter failed ("+V.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw V}try{P=new f(v,u,h)}catch(V){return vo(V instanceof _?"BloomFilter error: ":"Applying bloom filter failed: ",V),null}return 0===P.Te?null:P}et(e,n,o){return n.fe.count===o-this.rt(e,n.targetId)?0:2}rt(e,n){const o=this.Le.getRemoteKeysForTarget(n);let u=0;return o.forEach(h=>{const v=this.Le.nt(),P=`projects/${v.projectId}/databases/${v.database}/documents/${h.path.canonicalString()}`;e.mightContain(P)||(this.We(n,h,null),u++)}),u}it(e){const n=new Map;this.ke.forEach((h,v)=>{const P=this.Ye(v);if(P){if(h.current&&Lu(P.target)){const V=new Gt(P.target.path);null!==this.qe.get(V)||this.st(v,V)||this.We(v,V,qn.newNoDocument(V,e))}h.De&&(n.set(v,h.ve()),h.Fe())}});let o=Xn();this.Qe.forEach((h,v)=>{let P=!0;v.forEachWhile(V=>{const z=this.Ye(V);return!z||"TargetPurposeLimboResolution"===z.purpose||(P=!1,!1)}),P&&(o=o.add(h))}),this.qe.forEach((h,v)=>v.setReadTime(e));const u=new C(e,n,this.Ke,this.qe,o);return this.qe=qs(),this.Qe=pn(),this.Ke=new ni(Hn),u}Ue(e,n){if(!this.je(e))return;const o=this.st(e,n.key)?2:0;this.ze(e).Me(n.key,o),this.qe=this.qe.insert(n.key,n),this.Qe=this.Qe.insert(n.key,this.ot(n.key).add(e))}We(e,n,o){if(!this.je(e))return;const u=this.ze(e);this.st(e,n)?u.Me(n,1):u.xe(n),this.Qe=this.Qe.insert(n,this.ot(n).delete(e)),o&&(this.qe=this.qe.insert(n,o))}removeTarget(e){this.ke.delete(e)}Ze(e){const n=this.ze(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Oe(e){this.ze(e).Oe()}ze(e){let n=this.ke.get(e);return n||(n=new pt,this.ke.set(e,n)),n}ot(e){let n=this.Qe.get(e);return n||(n=new ii(Hn),this.Qe=this.Qe.insert(e,n)),n}je(e){const n=null!==this.Ye(e);return n||yt("WatchChangeAggregator","Detected inactive target",e),n}Ye(e){const n=this.ke.get(e);return n&&n.be?null:this.Le._t(e)}He(e){this.ke.set(e,new pt),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.We(e,n,null)})}st(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function pn(){return new ni(Gt.comparator)}function fn(){return new ni(Gt.comparator)}const cs={asc:"ASCENDING",desc:"DESCENDING"},ta={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Uu={and:"AND",or:"OR"};class kc{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function cl(i,e){return i.useProto3Json||oa(e)?e:{value:e}}function uc(i,e){return i.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function _h(i,e){return i.useProto3Json?e.toBase64():e.toUint8Array()}function vh(i,e){return uc(i,e.toTimestamp())}function Hi(i){return mn(!!i),sn.fromTimestamp(function(n){const o=Ou(n);return new Ar(o.seconds,o.nanos)}(i))}function Ld(i,e){return(o=i,new Jn(["projects",o.projectId,"databases",o.database])).child("documents").child(e).canonicalString();var o}function cc(i){const e=Jn.fromString(i);return mn(ff(e)),e}function Fc(i,e){return Ld(i.databaseId,e.path)}function pu(i,e){const n=cc(e);if(n.get(1)!==i.databaseId.projectId)throw new vt(tt.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+i.databaseId.projectId);if(n.get(3)!==i.databaseId.database)throw new vt(tt.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+i.databaseId.database);return new Gt(Jf(n))}function Ml(i,e){return Ld(i.databaseId,e)}function af(i){const e=cc(i);return 4===e.length?Jn.emptyPath():Jf(e)}function ll(i){return new Jn(["projects",i.databaseId.projectId,"databases",i.databaseId.database]).canonicalString()}function Jf(i){return mn(i.length>4&&"documents"===i.get(4)),i.popFirst(5)}function uf(i,e,n){return{name:Fc(i,e),fields:n.value.mapValue.fields}}function cf(i,e,n){const o=pu(i,e.name),u=Hi(e.updateTime),h=e.createTime?Hi(e.createTime):sn.min(),v=new Ki({mapValue:{fields:e.fields}}),P=qn.newFoundDocument(o,u,h,v);return n&&P.setHasCommittedMutations(),n?P.setHasCommittedMutations():P}function yh(i,e){let n;if(e instanceof Sa)n={update:uf(i,e.key,e.value)};else if(e instanceof xc)n={delete:Fc(i,e.key)};else if(e instanceof fu)n={update:uf(i,e.key,e.data),updateMask:Im(e.fieldMask)};else{if(!(e instanceof ea))return tn();n={verify:Fc(i,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(o=>function(h,v){const P=v.transform;if(P instanceof To)return{fieldPath:v.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(P instanceof qa)return{fieldPath:v.field.canonicalString(),appendMissingElements:{values:P.elements}};if(P instanceof Ka)return{fieldPath:v.field.canonicalString(),removeAllFromArray:{values:P.elements}};if(P instanceof bo)return{fieldPath:v.field.canonicalString(),increment:P.Ie};throw tn()}(0,o))),e.precondition.isNone||(n.currentDocument=void 0!==(h=e.precondition).updateTime?{updateTime:vh(i,h.updateTime)}:void 0!==h.exists?{exists:h.exists}:tn()),n;var h}function rd(i,e){const n=e.currentDocument?void 0!==(h=e.currentDocument).updateTime?Oi.updateTime(Hi(h.updateTime)):void 0!==h.exists?Oi.exists(h.exists):Oi.none():Oi.none(),o=e.updateTransforms?e.updateTransforms.map(u=>function(v,P){let V=null;"setToServerValue"in P?(mn("REQUEST_TIME"===P.setToServerValue),V=new To):"appendMissingElements"in P?V=new qa(P.appendMissingElements.values||[]):"removeAllFromArray"in P?V=new Ka(P.removeAllFromArray.values||[]):"increment"in P?V=new bo(v,P.increment):tn();const z=li.fromServerFormat(P.fieldPath);return new Ol(z,V)}(i,u)):[];var h;if(e.update){const u=pu(i,e.update.name),h=new Ki({mapValue:{fields:e.update.fields}});if(e.updateMask){const v=new Qo((e.updateMask.fieldPaths||[]).map(ee=>li.fromServerFormat(ee)));return new fu(u,h,v,n,o)}return new Sa(u,h,n,o)}if(e.delete){const u=pu(i,e.delete);return new xc(u,n)}if(e.verify){const u=pu(i,e.verify);return new ea(u,n)}return tn()}function ep(i,e){return{documents:[Ml(i,e.path)]}}function lf(i,e){const n={structuredQuery:{}},o=e.path;null!==e.collectionGroup?(n.parent=Ml(i,o),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=Ml(i,o.popLast()),n.structuredQuery.from=[{collectionId:o.lastSegment()}]);const u=function(V){if(0!==V.length)return ym(Mr.create(V,"and"))}(e.filters);u&&(n.structuredQuery.where=u);const h=function(V){if(0!==V.length)return V.map(z=>{return{field:id((le=z).field),direction:hf(le.dir)};var le})}(e.orderBy);h&&(n.structuredQuery.orderBy=h);const v=cl(i,e.limit);return null!==v&&(n.structuredQuery.limit=v),e.startAt&&(n.structuredQuery.startAt={before:(V=e.startAt).inclusive,values:V.position}),e.endAt&&(n.structuredQuery.endAt=function(V){return{before:!V.inclusive,values:V.position}}(e.endAt)),n;var V}function df(i){let e=af(i.parent);const n=i.structuredQuery,o=n.from?n.from.length:0;let u=null;if(o>0){mn(1===o);const ee=n.from[0];ee.allDescendants?u=ee.collectionId:e=e.child(ee.collectionId)}let h=[];n.where&&(h=function(le){const Ae=tp(le);return Ae instanceof Mr&&xu(Ae)?Ae.getFilters():[Ae]}(n.where));let v=[];n.orderBy&&(v=n.orderBy.map(Ae=>{return new ys(sd((xt=Ae).field),function($t){switch($t){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(xt.direction));var xt}));let P=null;n.limit&&(P=function(le){let Ae;return Ae="object"==typeof le?le.value:le,oa(Ae)?null:Ae}(n.limit));let V=null;var le;n.startAt&&(V=new Mu((le=n.startAt).values||[],!!le.before));let z=null;return n.endAt&&(z=function(le){return new Mu(le.values||[],!le.before)}(n.endAt)),Ad(e,u,v,h,P,"F",V,z)}function tp(i){return void 0!==i.unaryFilter?function(n){switch(n.unaryFilter.op){case"IS_NAN":const o=sd(n.unaryFilter.field);return cr.create(o,"==",{doubleValue:NaN});case"IS_NULL":const u=sd(n.unaryFilter.field);return cr.create(u,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const h=sd(n.unaryFilter.field);return cr.create(h,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const v=sd(n.unaryFilter.field);return cr.create(v,"!=",{nullValue:"NULL_VALUE"});default:return tn()}}(i):void 0!==i.fieldFilter?cr.create(sd((n=i).fieldFilter.field),function(u){switch(u){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return tn()}}(n.fieldFilter.op),n.fieldFilter.value):void 0!==i.compositeFilter?function(n){return Mr.create(n.compositeFilter.filters.map(o=>tp(o)),function(u){switch(u){case"AND":return"and";case"OR":return"or";default:return tn()}}(n.compositeFilter.op))}(i):tn();var n}function hf(i){return cs[i]}function Qp(i){return ta[i]}function vm(i){return Uu[i]}function id(i){return{fieldPath:i.canonicalString()}}function sd(i){return li.fromServerFormat(i.fieldPath)}function ym(i){return i instanceof cr?function(n){if("=="===n.op){if(wd(n.value))return{unaryFilter:{field:id(n.field),op:"IS_NAN"}};if(Xo(n.value))return{unaryFilter:{field:id(n.field),op:"IS_NULL"}}}else if("!="===n.op){if(wd(n.value))return{unaryFilter:{field:id(n.field),op:"IS_NOT_NAN"}};if(Xo(n.value))return{unaryFilter:{field:id(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:id(n.field),op:Qp(n.op),value:n.value}}}(i):i instanceof Mr?function(n){const o=n.getFilters().map(u=>ym(u));return 1===o.length?o[0]:{compositeFilter:{op:vm(n.op),filters:o}}}(i):tn()}function Im(i){const e=[];return i.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function ff(i){return i.length>=4&&"projects"===i.get(0)&&"databases"===i.get(2)}class ju{constructor(e,n,o,u,h=sn.min(),v=sn.min(),P=vs.EMPTY_BYTE_STRING,V=null){this.target=e,this.targetId=n,this.purpose=o,this.sequenceNumber=u,this.snapshotVersion=h,this.lastLimboFreeSnapshotVersion=v,this.resumeToken=P,this.expectedCount=V}withSequenceNumber(e){return new ju(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new ju(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new ju(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new ju(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class pf{constructor(e){this.ut=e}}function Em(i,e){const n=e.key,o={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:np(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())o.document={name:Fc(h=i.ut,(v=e).key),fields:v.data.value.mapValue.fields,updateTime:uc(h,v.version.toTimestamp()),createTime:uc(h,v.createTime.toTimestamp())};else if(e.isNoDocument())o.noDocument={path:n.path.toArray(),readTime:Th(e.version)};else{if(!e.isUnknownDocument())return tn();o.unknownDocument={path:n.path.toArray(),version:Th(e.version)}}var h,v;return o}function np(i){const e=i.toTimestamp();return[e.seconds,e.nanoseconds]}function Th(i){const e=i.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Vd(i){const e=new Ar(i.seconds,i.nanoseconds);return sn.fromTimestamp(e)}function xl(i,e){const n=(e.baseMutations||[]).map(h=>rd(i.ut,h));for(let h=0;h<e.mutations.length-1;++h)h+1<e.mutations.length&&void 0!==e.mutations[h+1].transform&&(e.mutations[h].updateTransforms=e.mutations[h+1].transform.fieldTransforms,e.mutations.splice(h+1,1),++h);const o=e.mutations.map(h=>rd(i.ut,h)),u=Ar.fromMillis(e.localWriteTimeMs);return new ol(e.batchId,u,n,o)}function gf(i){const e=Vd(i.readTime),n=void 0!==i.lastLimboFreeSnapshotVersion?Vd(i.lastLimboFreeSnapshotVersion):sn.min();let o;return o=void 0!==i.query.documents?(mn(1===(h=i.query).documents.length),T(il(af(h.documents[0])))):function(h){return T(df(h))}(i.query),new ju(o,i.targetId,"TargetPurposeListen",i.lastListenSequenceNumber,e,n,vs.fromBase64String(i.resumeToken));var h}function Bd(i,e){const n=Th(e.snapshotVersion),o=Th(e.lastLimboFreeSnapshotVersion);let u;u=Lu(e.target)?ep(i.ut,e.target):lf(i.ut,e.target);const h=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Aa(e.target),readTime:n,resumeToken:h,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:o,query:u}}function od(i){const e=df({parent:i.parent,structuredQuery:i.structuredQuery});return"LAST"===i.limitType?ce(e,e.limit,"L"):e}function mf(i,e){return new al(e.largestBatchId,rd(i.ut,e.overlayMutation))}function Jp(i,e){const n=e.path.lastSegment();return[i,Ni(e.path.popLast()),n]}function Xp(i,e,n,o){return{indexId:i,uid:e.uid||"",sequenceNumber:n,readTime:Th(o.readTime),documentKey:Ni(o.documentKey.path),largestBatchId:o.largestBatchId}}class Tm{getBundleMetadata(e,n){return rp(e).get(n).next(o=>{if(o)return{id:(h=o).bundleId,createTime:Vd(h.createTime),version:h.version};var h})}saveBundleMetadata(e,n){return rp(e).put({bundleId:(u=n).id,createTime:Th(Hi(u.createTime)),version:u.version});var u}getNamedQuery(e,n){return bm(e).get(n).next(o=>{if(o)return{name:(h=o).name,query:od(h.bundledQuery),readTime:Vd(h.readTime)};var h})}saveNamedQuery(e,n){return bm(e).put({name:(u=n).name,readTime:Th(Hi(u.readTime)),bundledQuery:u.bundledQuery});var u}}function rp(i){return es(i,"bundles")}function bm(i){return es(i,"namedQueries")}class ip{constructor(e,n){this.serializer=e,this.userId=n}static ct(e,n){return new ip(e,n.uid||"")}getOverlay(e,n){return bh(e).get(Jp(this.userId,n)).next(o=>o?mf(this.serializer,o):null)}getOverlays(e,n){const o=ao();return L.forEach(n,u=>this.getOverlay(e,u).next(h=>{null!==h&&o.set(u,h)})).next(()=>o)}saveOverlays(e,n,o){const u=[];return o.forEach((h,v)=>{const P=new al(n,v);u.push(this.lt(e,P))}),L.waitFor(u)}removeOverlaysForBatchId(e,n,o){const u=new Set;n.forEach(v=>u.add(Ni(v.getCollectionPath())));const h=[];return u.forEach(v=>{const P=IDBKeyRange.bound([this.userId,v,o],[this.userId,v,o+1],!1,!0);h.push(bh(e).H("collectionPathOverlayIndex",P))}),L.waitFor(h)}getOverlaysForCollection(e,n,o){const u=ao(),h=Ni(n),v=IDBKeyRange.bound([this.userId,h,o],[this.userId,h,Number.POSITIVE_INFINITY],!0);return bh(e).W("collectionPathOverlayIndex",v).next(P=>{for(const V of P){const z=mf(this.serializer,V);u.set(z.getKey(),z)}return u})}getOverlaysForCollectionGroup(e,n,o,u){const h=ao();let v;const P=IDBKeyRange.bound([this.userId,n,o],[this.userId,n,Number.POSITIVE_INFINITY],!0);return bh(e).Y({index:"collectionGroupOverlayIndex",range:P},(V,z,ee)=>{const le=mf(this.serializer,z);h.size()<u||le.largestBatchId===v?(h.set(le.getKey(),le),v=le.largestBatchId):ee.done()}).next(()=>h)}lt(e,n){return bh(e).put(function(u,h,v){const[P,V,z]=Jp(h,v.mutation.key);return{userId:h,collectionPath:V,documentId:z,collectionGroup:v.mutation.key.getCollectionGroup(),largestBatchId:v.largestBatchId,overlayMutation:yh(u.ut,v.mutation)}}(this.serializer,this.userId,n))}}function bh(i){return es(i,"documentOverlays")}class Ud{constructor(){}ht(e,n){this.Pt(e,n),n.It()}Pt(e,n){if("nullValue"in e)this.Tt(n,5);else if("booleanValue"in e)this.Tt(n,10),n.Et(e.booleanValue?1:0);else if("integerValue"in e)this.Tt(n,15),n.Et(jn(e.integerValue));else if("doubleValue"in e){const o=jn(e.doubleValue);isNaN(o)?this.Tt(n,13):(this.Tt(n,15),ba(o)?n.Et(0):n.Et(o))}else if("timestampValue"in e){const o=e.timestampValue;this.Tt(n,20),"string"==typeof o?n.dt(o):(n.dt(`${o.seconds||""}`),n.Et(o.nanos||0))}else if("stringValue"in e)this.At(e.stringValue,n),this.Rt(n);else if("bytesValue"in e)this.Tt(n,30),n.Vt(ji(e.bytesValue)),this.Rt(n);else if("referenceValue"in e)this.ft(e.referenceValue,n);else if("geoPointValue"in e){const o=e.geoPointValue;this.Tt(n,45),n.Et(o.latitude||0),n.Et(o.longitude||0)}else"mapValue"in e?lh(e)?this.Tt(n,Number.MAX_SAFE_INTEGER):(this.gt(e.mapValue,n),this.Rt(n)):"arrayValue"in e?(this.yt(e.arrayValue,n),this.Rt(n)):tn()}At(e,n){this.Tt(n,25),this.wt(e,n)}wt(e,n){n.dt(e)}gt(e,n){const o=e.fields||{};this.Tt(n,55);for(const u of Object.keys(o))this.At(u,n),this.Pt(o[u],n)}yt(e,n){const o=e.values||[];this.Tt(n,50);for(const u of o)this.Pt(u,n)}ft(e,n){this.Tt(n,37),Gt.fromName(e).path.forEach(o=>{this.Tt(n,60),this.wt(o,n)})}Tt(e,n){e.Et(n)}Rt(e){e.Et(2)}}function cv(i){if(0===i)return 8;let e=0;return!(i>>4)&&(e+=4,i<<=4),!(i>>6)&&(e+=2,i<<=2),!(i>>7)&&(e+=1),e}function Lc(i){const e=64-function(o){let u=0;for(let h=0;h<8;++h){const v=cv(255&o[h]);if(u+=v,8!==v)break}return u}(i);return Math.ceil(e/8)}Ud.St=new Ud;class _f{constructor(){this.buffer=new Uint8Array(1024),this.position=0}bt(e){const n=e[Symbol.iterator]();let o=n.next();for(;!o.done;)this.Dt(o.value),o=n.next();this.Ct()}vt(e){const n=e[Symbol.iterator]();let o=n.next();for(;!o.done;)this.Ft(o.value),o=n.next();this.Mt()}xt(e){for(const n of e){const o=n.charCodeAt(0);if(o<128)this.Dt(o);else if(o<2048)this.Dt(960|o>>>6),this.Dt(128|63&o);else if(n<"\ud800"||"\udbff"<n)this.Dt(480|o>>>12),this.Dt(128|63&o>>>6),this.Dt(128|63&o);else{const u=n.codePointAt(0);this.Dt(240|u>>>18),this.Dt(128|63&u>>>12),this.Dt(128|63&u>>>6),this.Dt(128|63&u)}}this.Ct()}Ot(e){for(const n of e){const o=n.charCodeAt(0);if(o<128)this.Ft(o);else if(o<2048)this.Ft(960|o>>>6),this.Ft(128|63&o);else if(n<"\ud800"||"\udbff"<n)this.Ft(480|o>>>12),this.Ft(128|63&o>>>6),this.Ft(128|63&o);else{const u=n.codePointAt(0);this.Ft(240|u>>>18),this.Ft(128|63&u>>>12),this.Ft(128|63&u>>>6),this.Ft(128|63&u)}}this.Mt()}Nt(e){const n=this.Bt(e),o=Lc(n);this.Lt(1+o),this.buffer[this.position++]=255&o;for(let u=n.length-o;u<n.length;++u)this.buffer[this.position++]=255&n[u]}kt(e){const n=this.Bt(e),o=Lc(n);this.Lt(1+o),this.buffer[this.position++]=~(255&o);for(let u=n.length-o;u<n.length;++u)this.buffer[this.position++]=~(255&n[u])}qt(){this.Qt(255),this.Qt(255)}Kt(){this.$t(255),this.$t(255)}reset(){this.position=0}seed(e){this.Lt(e.length),this.buffer.set(e,this.position),this.position+=e.length}Ut(){return this.buffer.slice(0,this.position)}Bt(e){const n=function(h){const v=new DataView(new ArrayBuffer(8));return v.setFloat64(0,h,!1),new Uint8Array(v.buffer)}(e),o=0!=(128&n[0]);n[0]^=o?255:128;for(let u=1;u<n.length;++u)n[u]^=o?255:0;return n}Dt(e){const n=255&e;0===n?(this.Qt(0),this.Qt(255)):255===n?(this.Qt(255),this.Qt(0)):this.Qt(n)}Ft(e){const n=255&e;0===n?(this.$t(0),this.$t(255)):255===n?(this.$t(255),this.$t(0)):this.$t(e)}Ct(){this.Qt(0),this.Qt(1)}Mt(){this.$t(0),this.$t(1)}Qt(e){this.Lt(1),this.buffer[this.position++]=e}$t(e){this.Lt(1),this.buffer[this.position++]=~e}Lt(e){const n=e+this.position;if(n<=this.buffer.length)return;let o=2*this.buffer.length;o<n&&(o=n);const u=new Uint8Array(o);u.set(this.buffer),this.buffer=u}}class lv{constructor(e){this.Wt=e}Vt(e){this.Wt.bt(e)}dt(e){this.Wt.xt(e)}Et(e){this.Wt.Nt(e)}It(){this.Wt.qt()}}class Jy{constructor(e){this.Wt=e}Vt(e){this.Wt.vt(e)}dt(e){this.Wt.Ot(e)}Et(e){this.Wt.kt(e)}It(){this.Wt.Kt()}}class sp{constructor(){this.Wt=new _f,this.Gt=new lv(this.Wt),this.zt=new Jy(this.Wt)}seed(e){this.Wt.seed(e)}jt(e){return 0===e?this.Gt:this.zt}Ut(){return this.Wt.Ut()}reset(){this.Wt.reset()}}class wh{constructor(e,n,o,u){this.indexId=e,this.documentKey=n,this.arrayValue=o,this.directionalValue=u}Ht(){const e=this.directionalValue.length,n=0===e||255===this.directionalValue[e-1]?e+1:e,o=new Uint8Array(n);return o.set(this.directionalValue,0),n!==e?o.set([0],this.directionalValue.length):++o[o.length-1],new wh(this.indexId,this.documentKey,this.arrayValue,o)}}function kl(i,e){let n=i.indexId-e.indexId;return 0!==n?n:(n=dv(i.arrayValue,e.arrayValue),0!==n?n:(n=dv(i.directionalValue,e.directionalValue),0!==n?n:Gt.comparator(i.documentKey,e.documentKey)))}function dv(i,e){for(let n=0;n<i.length&&n<e.length;++n){const o=i[n]-e[n];if(0!==o)return o}return i.length-e.length}class eg{constructor(e){this.Jt=new ii((n,o)=>li.comparator(n.field,o.field)),this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Yt=e.orderBy,this.Zt=[];for(const n of e.filters){const o=n;o.isInequality()?this.Jt=this.Jt.add(o):this.Zt.push(o)}}get Xt(){return this.Jt.size>1}en(e){if(mn(e.collectionGroup===this.collectionId),this.Xt)return!1;const n=Ta(e);if(void 0!==n&&!this.tn(n))return!1;const o=Yo(e);let u=new Set,h=0,v=0;for(;h<o.length&&this.tn(o[h]);++h)u=u.add(o[h].fieldPath.canonicalString());if(h===o.length)return!0;if(this.Jt.size>0){const P=this.Jt.getIterator().getNext();if(!u.has(P.field.canonicalString())){const V=o[h];if(!this.nn(P,V)||!this.rn(this.Yt[v++],V))return!1}++h}for(;h<o.length;++h)if(v>=this.Yt.length||!this.rn(this.Yt[v++],o[h]))return!1;return!0}sn(){if(this.Xt)return null;let e=new ii(li.comparator);const n=[];for(const o of this.Zt)if(!o.field.isKeyField())if("array-contains"===o.op||"array-contains-any"===o.op)n.push(new yo(o.field,2));else{if(e.has(o.field))continue;e=e.add(o.field),n.push(new yo(o.field,0))}for(const o of this.Yt)o.field.isKeyField()||e.has(o.field)||(e=e.add(o.field),n.push(new yo(o.field,"asc"===o.dir?0:1)));return new bi(bi.UNKNOWN_ID,this.collectionId,n,Ic.empty())}tn(e){for(const n of this.Zt)if(this.nn(n,e))return!0;return!1}nn(e,n){return!(void 0===e||!e.field.isEqual(n.fieldPath))&&2===n.kind==("array-contains"===e.op||"array-contains-any"===e.op)}rn(e,n){return!!e.field.isEqual(n.fieldPath)&&(0===n.kind&&"asc"===e.dir||1===n.kind&&"desc"===e.dir)}}function wm(i){var e,n;if(mn(i instanceof cr||i instanceof Mr),i instanceof cr){if(i instanceof Fu){const u=(null===(n=null===(e=i.value.arrayValue)||void 0===e?void 0:e.values)||void 0===n?void 0:n.map(h=>cr.create(i.field,"==",h)))||[];return Mr.create(u,"or")}return i}const o=i.filters.map(u=>wm(u));return Mr.create(o,i.op)}function hv(i){if(0===i.getFilters().length)return[];const e=Vc(wm(i));return mn(op(e)),vf(e)||tg(e)?[e]:e.getFilters()}function vf(i){return i instanceof cr}function tg(i){return i instanceof Mr&&xu(i)}function op(i){return vf(i)||tg(i)||function(n){if(n instanceof Mr&&Sc(n)){for(const o of n.getFilters())if(!vf(o)&&!tg(o))return!1;return!0}return!1}(i)}function Vc(i){if(mn(i instanceof cr||i instanceof Mr),i instanceof cr)return i;if(1===i.filters.length)return Vc(i.filters[0]);const e=i.filters.map(o=>Vc(o));let n=Mr.create(e,i.op);return n=yf(n),op(n)?n:(mn(n instanceof Mr),mn(sc(n)),mn(n.filters.length>1),n.filters.reduce((o,u)=>jd(o,u)))}function jd(i,e){let n;return mn(i instanceof cr||i instanceof Mr),mn(e instanceof cr||e instanceof Mr),n=i instanceof cr?e instanceof cr?Mr.create([i,e],"and"):ap(i,e):e instanceof cr?ap(e,i):function(u,h){if(mn(u.filters.length>0&&h.filters.length>0),sc(u)&&sc(h))return ku(u,h.getFilters());const v=Sc(u)?u:h,P=Sc(u)?h:u,V=v.filters.map(z=>jd(z,P));return Mr.create(V,"or")}(i,e),yf(n)}function ap(i,e){if(sc(e))return ku(e,i.getFilters());{const n=e.filters.map(o=>jd(i,o));return Mr.create(n,"or")}}function yf(i){if(mn(i instanceof cr||i instanceof Mr),i instanceof cr)return i;const e=i.getFilters();if(1===e.length)return yf(e[0]);if(Cd(i))return i;const n=e.map(u=>yf(u)),o=[];return n.forEach(u=>{u instanceof cr?o.push(u):u instanceof Mr&&(u.op===i.op?o.push(...u.filters):o.push(u))}),1===o.length?o[0]:Mr.create(o,i.op)}class Dm{constructor(){this.on=new Cm}addToCollectionParentIndex(e,n){return this.on.add(n),L.resolve()}getCollectionParents(e,n){return L.resolve(this.on.getEntries(n))}addFieldIndex(e,n){return L.resolve()}deleteFieldIndex(e,n){return L.resolve()}deleteAllFieldIndexes(e){return L.resolve()}createTargetIndexes(e,n){return L.resolve()}getDocumentsMatchingTarget(e,n){return L.resolve(null)}getIndexType(e,n){return L.resolve(0)}getFieldIndexes(e,n){return L.resolve([])}getNextCollectionGroupToUpdate(e){return L.resolve(null)}getMinOffset(e,n){return L.resolve(ro.min())}getMinOffsetFromCollectionGroup(e,n){return L.resolve(ro.min())}updateCollectionGroup(e,n,o){return L.resolve()}updateIndexEntries(e,n){return L.resolve()}}class Cm{constructor(){this.index={}}add(e){const n=e.lastSegment(),o=e.popLast(),u=this.index[n]||new ii(Jn.comparator),h=!u.has(o);return this.index[n]=u.add(o),h}has(e){const n=e.lastSegment(),o=e.popLast(),u=this.index[n];return u&&u.has(o)}getEntries(e){return(this.index[e]||new ii(Jn.comparator)).toArray()}}const ng=new Uint8Array(0);class Am{constructor(e,n){this.user=e,this.databaseId=n,this._n=new Cm,this.an=new Ws(o=>Aa(o),(o,u)=>rl(o,u)),this.uid=e.uid||""}addToCollectionParentIndex(e,n){if(!this._n.has(n)){const o=n.lastSegment(),u=n.popLast();e.addOnCommittedListener(()=>{this._n.add(n)});const h={collectionId:o,parent:Ni(u)};return up(e).put(h)}return L.resolve()}getCollectionParents(e,n){const o=[],u=IDBKeyRange.bound([n,""],[wl(n),""],!1,!0);return up(e).W(u).next(h=>{for(const v of h){if(v.collectionId!==n)break;o.push(Io(v.parent))}return o})}addFieldIndex(e,n){const o=If(e),u={indexId:(P=n).indexId,collectionGroup:P.collectionGroup,fields:P.fields.map(V=>[V.fieldPath.canonicalString(),V.kind])};var P;delete u.indexId;const h=o.add(u);if(n.indexState){const v=Ef(e);return h.next(P=>{v.put(Xp(P,this.user,n.indexState.sequenceNumber,n.indexState.offset))})}return h.next()}deleteFieldIndex(e,n){const o=If(e),u=Ef(e),h=ad(e);return o.delete(n.indexId).next(()=>u.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0))).next(()=>h.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){const n=If(e),o=ad(e),u=Ef(e);return n.H().next(()=>o.H()).next(()=>u.H())}createTargetIndexes(e,n){return L.forEach(this.un(n),o=>this.getIndexType(e,o).next(u=>{if(0===u||1===u){const h=new eg(o).sn();if(null!=h)return this.addFieldIndex(e,h)}}))}getDocumentsMatchingTarget(e,n){const o=ad(e);let u=!0;const h=new Map;return L.forEach(this.un(n),v=>this.cn(e,v).next(P=>{u&&(u=!!P),h.set(v,P)})).next(()=>{if(u){let v=Xn();const P=[];return L.forEach(h,(V,z)=>{var Mn;yt("IndexedDbIndexManager",`Using index ${Mn=V,`id=${Mn.indexId}|cg=${Mn.collectionGroup}|f=${Mn.fields.map(Nr=>`${Nr.fieldPath}:${Nr.kind}`).join(",")}`} to execute ${Aa(n)}`);const ee=function(Mn,Nr){const oi=Ta(Nr);if(void 0===oi)return null;for(const fi of Oc(Mn,oi.fieldPath))switch(fi.op){case"array-contains-any":return fi.value.arrayValue.values||[];case"array-contains":return[fi.value]}return null}(z,V),le=function(Mn,Nr){const oi=new Map;for(const fi of Yo(Nr))for(const wo of Oc(Mn,fi.fieldPath))switch(wo.op){case"==":case"in":oi.set(fi.fieldPath.canonicalString(),wo.value);break;case"not-in":case"!=":return oi.set(fi.fieldPath.canonicalString(),wo.value),Array.from(oi.values())}return null}(z,V),Ae=function(Mn,Nr){const oi=[];let fi=!0;for(const wo of Yo(Nr)){const El=0===wo.kind?Ql(Mn,wo.fieldPath,Mn.startAt):dh(Mn,wo.fieldPath,Mn.startAt);oi.push(El.value),fi&&(fi=El.inclusive)}return new Mu(oi,fi)}(z,V),et=function(Mn,Nr){const oi=[];let fi=!0;for(const wo of Yo(Nr)){const El=0===wo.kind?dh(Mn,wo.fieldPath,Mn.endAt):Ql(Mn,wo.fieldPath,Mn.endAt);oi.push(El.value),fi&&(fi=El.inclusive)}return new Mu(oi,fi)}(z,V),xt=this.ln(V,z,Ae),Ht=this.ln(V,z,et),$t=this.hn(V,z,le),Fn=this.Pn(V.indexId,ee,xt,Ae.inclusive,Ht,et.inclusive,$t);return L.forEach(Fn,Qn=>o.j(Qn,n.limit).next(Mn=>{Mn.forEach(Nr=>{const oi=Gt.fromSegments(Nr.documentKey);v.has(oi)||(v=v.add(oi),P.push(oi))})}))}).next(()=>P)}return L.resolve(null)})}un(e){let n=this.an.get(e);return n||(n=0===e.filters.length?[e]:hv(Mr.create(e.filters,"and")).map(o=>Sl(e.path,e.collectionGroup,e.orderBy,o.getFilters(),e.limit,e.startAt,e.endAt)),this.an.set(e,n),n)}Pn(e,n,o,u,h,v,P){const V=(null!=n?n.length:1)*Math.max(o.length,h.length),z=V/(null!=n?n.length:1),ee=[];for(let le=0;le<V;++le){const Ae=n?this.In(n[le/z]):ng,et=this.Tn(e,Ae,o[le%z],u),xt=this.En(e,Ae,h[le%z],v),Ht=P.map($t=>this.Tn(e,Ae,$t,!0));ee.push(...this.createRange(et,xt,Ht))}return ee}Tn(e,n,o,u){const h=new wh(e,Gt.empty(),n,o);return u?h:h.Ht()}En(e,n,o,u){const h=new wh(e,Gt.empty(),n,o);return u?h.Ht():h}cn(e,n){const o=new eg(n),u=null!=n.collectionGroup?n.collectionGroup:n.path.lastSegment();return this.getFieldIndexes(e,u).next(h=>{let v=null;for(const P of h)o.en(P)&&(!v||P.fields.length>v.fields.length)&&(v=P);return v})}getIndexType(e,n){let o=2;const u=this.un(n);return L.forEach(u,h=>this.cn(e,h).next(v=>{v?0!==o&&v.fields.length<function(V){let z=new ii(li.comparator),ee=!1;for(const le of V.filters)for(const Ae of le.getFlattenedFilters())Ae.field.isKeyField()||("array-contains"===Ae.op||"array-contains-any"===Ae.op?ee=!0:z=z.add(Ae.field));for(const le of V.orderBy)le.field.isKeyField()||(z=z.add(le.field));return z.size+(ee?1:0)}(h)&&(o=1):o=0})).next(()=>null!==n.limit&&u.length>1&&2===o?1:o)}dn(e,n){const o=new sp;for(const u of Yo(e)){const h=n.data.field(u.fieldPath);if(null==h)return null;const v=o.jt(u.kind);Ud.St.ht(h,v)}return o.Ut()}In(e){const n=new sp;return Ud.St.ht(e,n.jt(0)),n.Ut()}An(e,n){const o=new sp;return Ud.St.ht(Ca(this.databaseId,n),o.jt(function(h){const v=Yo(h);return 0===v.length?0:v[v.length-1].kind}(e))),o.Ut()}hn(e,n,o){if(null===o)return[];let u=[];u.push(new sp);let h=0;for(const v of Yo(e)){const P=o[h++];for(const V of u)if(this.Rn(n,v.fieldPath)&&za(P))u=this.Vn(u,v,P);else{const z=V.jt(v.kind);Ud.St.ht(P,z)}}return this.mn(u)}ln(e,n,o){return this.hn(e,n,o.position)}mn(e){const n=[];for(let o=0;o<e.length;++o)n[o]=e[o].Ut();return n}Vn(e,n,o){const u=[...e],h=[];for(const v of o.arrayValue.values||[])for(const P of u){const V=new sp;V.seed(P.Ut()),Ud.St.ht(v,V.jt(n.kind)),h.push(V)}return h}Rn(e,n){return!!e.filters.find(o=>o instanceof cr&&o.field.isEqual(n)&&("in"===o.op||"not-in"===o.op))}getFieldIndexes(e,n){const o=If(e),u=Ef(e);return(n?o.W("collectionGroupIndex",IDBKeyRange.bound(n,n)):o.W()).next(h=>{const v=[];return L.forEach(h,P=>u.get([P.indexId,this.uid]).next(V=>{v.push(function(ee,le){const Ae=le?new Ic(le.sequenceNumber,new ro(Vd(le.readTime),new Gt(Io(le.documentKey)),le.largestBatchId)):Ic.empty(),et=ee.fields.map(([xt,Ht])=>new yo(li.fromServerFormat(xt),Ht));return new bi(ee.indexId,ee.collectionGroup,et,Ae)}(P,V))})).next(()=>v)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(n=>0===n.length?null:(n.sort((o,u)=>{const h=o.indexState.sequenceNumber-u.indexState.sequenceNumber;return 0!==h?h:Hn(o.collectionGroup,u.collectionGroup)}),n[0].collectionGroup))}updateCollectionGroup(e,n,o){const u=If(e),h=Ef(e);return this.fn(e).next(v=>u.W("collectionGroupIndex",IDBKeyRange.bound(n,n)).next(P=>L.forEach(P,V=>h.put(Xp(V.indexId,this.user,v,o)))))}updateIndexEntries(e,n){const o=new Map;return L.forEach(n,(u,h)=>{const v=o.get(u.collectionGroup);return(v?L.resolve(v):this.getFieldIndexes(e,u.collectionGroup)).next(P=>(o.set(u.collectionGroup,P),L.forEach(P,V=>this.gn(e,u,V).next(z=>{const ee=this.pn(h,V);return z.isEqual(ee)?L.resolve():this.yn(e,h,V,z,ee)}))))})}wn(e,n,o,u){return ad(e).put({indexId:u.indexId,uid:this.uid,arrayValue:u.arrayValue,directionalValue:u.directionalValue,orderedDocumentKey:this.An(o,n.key),documentKey:n.key.path.toArray()})}Sn(e,n,o,u){return ad(e).delete([u.indexId,this.uid,u.arrayValue,u.directionalValue,this.An(o,n.key),n.key.path.toArray()])}gn(e,n,o){const u=ad(e);let h=new ii(kl);return u.Y({index:"documentKeyIndex",range:IDBKeyRange.only([o.indexId,this.uid,this.An(o,n)])},(v,P)=>{h=h.add(new wh(o.indexId,n,P.arrayValue,P.directionalValue))}).next(()=>h)}pn(e,n){let o=new ii(kl);const u=this.dn(n,e);if(null==u)return o;const h=Ta(n);if(null!=h){const v=e.data.field(h.fieldPath);if(za(v))for(const P of v.arrayValue.values||[])o=o.add(new wh(n.indexId,e.key,this.In(P),u))}else o=o.add(new wh(n.indexId,e.key,ng,u));return o}yn(e,n,o,u,h){yt("IndexedDbIndexManager","Updating index entries for document '%s'",n.key);const v=[];return function(V,z,ee,le,Ae){const et=V.getIterator(),xt=z.getIterator();let Ht=Dc(et),$t=Dc(xt);for(;Ht||$t;){let Fn=!1,Qn=!1;if(Ht&&$t){const Mn=ee(Ht,$t);Mn<0?Qn=!0:Mn>0&&(Fn=!0)}else null!=Ht?Qn=!0:Fn=!0;Fn?(le($t),$t=Dc(xt)):Qn?(Ae(Ht),Ht=Dc(et)):(Ht=Dc(et),$t=Dc(xt))}}(u,h,kl,P=>{v.push(this.wn(e,n,o,P))},P=>{v.push(this.Sn(e,n,o,P))}),L.waitFor(v)}fn(e){let n=1;return Ef(e).Y({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(o,u,h)=>{h.done(),n=u.sequenceNumber+1}).next(()=>n)}createRange(e,n,o){o=o.sort((v,P)=>kl(v,P)).filter((v,P,V)=>!P||0!==kl(v,V[P-1]));const u=[];u.push(e);for(const v of o){const P=kl(v,e),V=kl(v,n);if(0===P)u[0]=e.Ht();else if(P>0&&V<0)u.push(v),u.push(v.Ht());else if(V>0)break}u.push(n);const h=[];for(let v=0;v<u.length;v+=2){if(this.bn(u[v],u[v+1]))return[];h.push(IDBKeyRange.bound([u[v].indexId,this.uid,u[v].arrayValue,u[v].directionalValue,ng,[]],[u[v+1].indexId,this.uid,u[v+1].arrayValue,u[v+1].directionalValue,ng,[]]))}return h}bn(e,n){return kl(e,n)>0}getMinOffsetFromCollectionGroup(e,n){return this.getFieldIndexes(e,n).next(rg)}getMinOffset(e,n){return L.mapArray(this.un(n),o=>this.cn(e,o).next(u=>u||tn())).next(rg)}}function up(i){return es(i,"collectionParents")}function ad(i){return es(i,"indexEntries")}function If(i){return es(i,"indexConfiguration")}function Ef(i){return es(i,"indexState")}function rg(i){mn(0!==i.length);let e=i[0].indexState.offset,n=e.largestBatchId;for(let o=1;o<i.length;o++){const u=i[o].indexState.offset;Ec(u,e)<0&&(e=u),n<u.largestBatchId&&(n=u.largestBatchId)}return new ro(e.readTime,e.documentKey,n)}const Sm={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Ra{constructor(e,n,o){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=o}static withCacheSize(e){return new Ra(e,Ra.DEFAULT_COLLECTION_PERCENTILE,Ra.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function Rm(i,e,n){const o=i.store("mutations"),u=i.store("documentMutations"),h=[],v=IDBKeyRange.only(n.batchId);let P=0;const V=o.Y({range:v},(ee,le,Ae)=>(P++,Ae.delete()));h.push(V.next(()=>{mn(1===P)}));const z=[];for(const ee of n.mutations){const le=Ga(e,ee.key.path,n.batchId);h.push(u.delete(le)),z.push(ee.key)}return L.waitFor(h).next(()=>z)}function Dh(i){if(!i)return 0;let e;if(i.document)e=i.document;else if(i.unknownDocument)e=i.unknownDocument;else{if(!i.noDocument)throw tn();e=i.noDocument}return JSON.stringify(e).length}Ra.DEFAULT_COLLECTION_PERCENTILE=10,Ra.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Ra.DEFAULT=new Ra(41943040,Ra.DEFAULT_COLLECTION_PERCENTILE,Ra.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Ra.DISABLED=new Ra(-1,0,0);class Ch{constructor(e,n,o,u){this.userId=e,this.serializer=n,this.indexManager=o,this.referenceDelegate=u,this.Dn={}}static ct(e,n,o,u){mn(""!==e.uid);const h=e.isAuthenticated()?e.uid:"";return new Ch(h,n,o,u)}checkEmpty(e){let n=!0;const o=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Fl(e).Y({index:"userMutationsIndex",range:o},(u,h,v)=>{n=!1,v.done()}).next(()=>n)}addMutationBatch(e,n,o,u){const h=Ll(e),v=Fl(e);return v.add({}).next(P=>{mn("number"==typeof P);const V=new ol(P,n,o,u),z=function(et,xt,Ht){const $t=Ht.baseMutations.map(Qn=>yh(et.ut,Qn)),Fn=Ht.mutations.map(Qn=>yh(et.ut,Qn));return{userId:xt,batchId:Ht.batchId,localWriteTimeMs:Ht.localWriteTime.toMillis(),baseMutations:$t,mutations:Fn}}(this.serializer,this.userId,V),ee=[];let le=new ii((Ae,et)=>Hn(Ae.canonicalString(),et.canonicalString()));for(const Ae of u){const et=Ga(this.userId,Ae.key.path,P);le=le.add(Ae.key.path.popLast()),ee.push(v.put(z)),ee.push(h.put(et,Tc))}return le.forEach(Ae=>{ee.push(this.indexManager.addToCollectionParentIndex(e,Ae))}),e.addOnCommittedListener(()=>{this.Dn[P]=V.keys()}),L.waitFor(ee).next(()=>V)})}lookupMutationBatch(e,n){return Fl(e).get(n).next(o=>o?(mn(o.userId===this.userId),xl(this.serializer,o)):null)}Cn(e,n){return this.Dn[n]?L.resolve(this.Dn[n]):this.lookupMutationBatch(e,n).next(o=>{if(o){const u=o.keys();return this.Dn[n]=u,u}return null})}getNextMutationBatchAfterBatchId(e,n){const o=n+1,u=IDBKeyRange.lowerBound([this.userId,o]);let h=null;return Fl(e).Y({index:"userMutationsIndex",range:u},(v,P,V)=>{P.userId===this.userId&&(mn(P.batchId>=o),h=xl(this.serializer,P)),V.done()}).next(()=>h)}getHighestUnacknowledgedBatchId(e){const n=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let o=-1;return Fl(e).Y({index:"userMutationsIndex",range:n,reverse:!0},(u,h,v)=>{o=h.batchId,v.done()}).next(()=>o)}getAllMutationBatches(e){const n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Fl(e).W("userMutationsIndex",n).next(o=>o.map(u=>xl(this.serializer,u)))}getAllMutationBatchesAffectingDocumentKey(e,n){const o=su(this.userId,n.path),u=IDBKeyRange.lowerBound(o),h=[];return Ll(e).Y({range:u},(v,P,V)=>{const[z,ee,le]=v,Ae=Io(ee);if(z===this.userId&&n.path.isEqual(Ae))return Fl(e).get(le).next(et=>{if(!et)throw tn();mn(et.userId===this.userId),h.push(xl(this.serializer,et))});V.done()}).next(()=>h)}getAllMutationBatchesAffectingDocumentKeys(e,n){let o=new ii(Hn);const u=[];return n.forEach(h=>{const v=su(this.userId,h.path),P=IDBKeyRange.lowerBound(v),V=Ll(e).Y({range:P},(z,ee,le)=>{const[Ae,et,xt]=z,Ht=Io(et);Ae===this.userId&&h.path.isEqual(Ht)?o=o.add(xt):le.done()});u.push(V)}),L.waitFor(u).next(()=>this.vn(e,o))}getAllMutationBatchesAffectingQuery(e,n){const o=n.path,u=o.length+1,h=su(this.userId,o),v=IDBKeyRange.lowerBound(h);let P=new ii(Hn);return Ll(e).Y({range:v},(V,z,ee)=>{const[le,Ae,et]=V,xt=Io(Ae);le===this.userId&&o.isPrefixOf(xt)?xt.length===u&&(P=P.add(et)):ee.done()}).next(()=>this.vn(e,P))}vn(e,n){const o=[],u=[];return n.forEach(h=>{u.push(Fl(e).get(h).next(v=>{if(null===v)throw tn();mn(v.userId===this.userId),o.push(xl(this.serializer,v))}))}),L.waitFor(u).next(()=>o)}removeMutationBatch(e,n){return Rm(e.ae,this.userId,n).next(o=>(e.addOnCommittedListener(()=>{this.Fn(n.batchId)}),L.forEach(o,u=>this.referenceDelegate.markPotentiallyOrphaned(e,u))))}Fn(e){delete this.Dn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(n=>{if(!n)return L.resolve();const o=IDBKeyRange.lowerBound([this.userId]),u=[];return Ll(e).Y({range:o},(h,v,P)=>{if(h[0]===this.userId){const V=Io(h[1]);u.push(V)}else P.done()}).next(()=>{mn(0===u.length)})})}containsKey(e,n){return Ah(e,this.userId,n)}Mn(e){return d(e).get(this.userId).next(n=>n||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function Ah(i,e,n){const o=su(e,n.path),u=o[1],h=IDBKeyRange.lowerBound(o);let v=!1;return Ll(i).Y({range:h,J:!0},(P,V,z)=>{const[ee,le,Ae]=P;ee===e&&le===u&&(v=!0),z.done()}).next(()=>v)}function Fl(i){return es(i,"mutations")}function Ll(i){return es(i,"documentMutations")}function d(i){return es(i,"mutationQueues")}class D{constructor(e){this.xn=e}next(){return this.xn+=2,this.xn}static On(){return new D(0)}static Nn(){return new D(-1)}}class c{constructor(e,n){this.referenceDelegate=e,this.serializer=n}allocateTargetId(e){return this.Bn(e).next(n=>{const o=new D(n.highestTargetId);return n.highestTargetId=o.next(),this.Ln(e,n).next(()=>n.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Bn(e).next(n=>sn.fromTimestamp(new Ar(n.lastRemoteSnapshotVersion.seconds,n.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Bn(e).next(n=>n.highestListenSequenceNumber)}setTargetsMetadata(e,n,o){return this.Bn(e).next(u=>(u.highestListenSequenceNumber=n,o&&(u.lastRemoteSnapshotVersion=o.toTimestamp()),n>u.highestListenSequenceNumber&&(u.highestListenSequenceNumber=n),this.Ln(e,u)))}addTargetData(e,n){return this.kn(e,n).next(()=>this.Bn(e).next(o=>(o.targetCount+=1,this.qn(n,o),this.Ln(e,o))))}updateTargetData(e,n){return this.kn(e,n)}removeTargetData(e,n){return this.removeMatchingKeysForTargetId(e,n.targetId).next(()=>p(e).delete(n.targetId)).next(()=>this.Bn(e)).next(o=>(mn(o.targetCount>0),o.targetCount-=1,this.Ln(e,o)))}removeTargets(e,n,o){let u=0;const h=[];return p(e).Y((v,P)=>{const V=gf(P);V.sequenceNumber<=n&&null===o.get(V.targetId)&&(u++,h.push(this.removeTargetData(e,V)))}).next(()=>L.waitFor(h)).next(()=>u)}forEachTarget(e,n){return p(e).Y((o,u)=>{const h=gf(u);n(h)})}Bn(e){return w(e).get("targetGlobalKey").next(n=>(mn(null!==n),n))}Ln(e,n){return w(e).put("targetGlobalKey",n)}kn(e,n){return p(e).put(Bd(this.serializer,n))}qn(e,n){let o=!1;return e.targetId>n.highestTargetId&&(n.highestTargetId=e.targetId,o=!0),e.sequenceNumber>n.highestListenSequenceNumber&&(n.highestListenSequenceNumber=e.sequenceNumber,o=!0),o}getTargetCount(e){return this.Bn(e).next(n=>n.targetCount)}getTargetData(e,n){const o=Aa(n),u=IDBKeyRange.bound([o,Number.NEGATIVE_INFINITY],[o,Number.POSITIVE_INFINITY]);let h=null;return p(e).Y({range:u,index:"queryTargetsIndex"},(v,P,V)=>{const z=gf(P);rl(n,z.target)&&(h=z,V.done())}).next(()=>h)}addMatchingKeys(e,n,o){const u=[],h=j(e);return n.forEach(v=>{const P=Ni(v.path);u.push(h.put({targetId:o,path:P})),u.push(this.referenceDelegate.addReference(e,o,v))}),L.waitFor(u)}removeMatchingKeys(e,n,o){const u=j(e);return L.forEach(n,h=>{const v=Ni(h.path);return L.waitFor([u.delete([o,v]),this.referenceDelegate.removeReference(e,o,h)])})}removeMatchingKeysForTargetId(e,n){const o=j(e),u=IDBKeyRange.bound([n],[n+1],!1,!0);return o.delete(u)}getMatchingKeysForTargetId(e,n){const o=IDBKeyRange.bound([n],[n+1],!1,!0),u=j(e);let h=Xn();return u.Y({range:o,J:!0},(v,P,V)=>{const z=Io(v[1]),ee=new Gt(z);h=h.add(ee)}).next(()=>h)}containsKey(e,n){const o=Ni(n.path),u=IDBKeyRange.bound([o],[wl(o)],!1,!0);let h=0;return j(e).Y({index:"documentTargetsIndex",J:!0,range:u},([v,P],V,z)=>{0!==v&&(h++,z.done())}).next(()=>h>0)}_t(e,n){return p(e).get(n).next(o=>o?gf(o):null)}}function p(i){return es(i,"targets")}function w(i){return es(i,"targetGlobal")}function j(i){return es(i,"targetDocuments")}function Y([i,e],[n,o]){const u=Hn(i,n);return 0===u?Hn(e,o):u}class ve{constructor(e){this.Qn=e,this.buffer=new ii(Y),this.Kn=0}$n(){return++this.Kn}Un(e){const n=[e,this.$n()];if(this.buffer.size<this.Qn)this.buffer=this.buffer.add(n);else{const o=this.buffer.last();Y(n,o)<0&&(this.buffer=this.buffer.delete(o).add(n))}}get maxValue(){return this.buffer.last()[0]}}class Me{constructor(e,n,o){this.garbageCollector=e,this.asyncQueue=n,this.localStore=o,this.Wn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Gn(6e4)}stop(){this.Wn&&(this.Wn.cancel(),this.Wn=null)}get started(){return null!==this.Wn}Gn(e){var n=this;yt("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Wn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,Ve.Z)(function*(){n.Wn=null;try{yield n.localStore.collectGarbage(n.garbageCollector)}catch(o){Vt(o)?yt("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",o):yield A(o)}yield n.Gn(3e5)}))}}class nt{constructor(e,n){this.zn=e,this.params=n}calculateTargetCount(e,n){return this.zn.jn(e).next(o=>Math.floor(n/100*o))}nthSequenceNumber(e,n){if(0===n)return L.resolve(as._e);const o=new ve(n);return this.zn.forEachTarget(e,u=>o.Un(u.sequenceNumber)).next(()=>this.zn.Hn(e,u=>o.Un(u))).next(()=>o.maxValue)}removeTargets(e,n,o){return this.zn.removeTargets(e,n,o)}removeOrphanedDocuments(e,n){return this.zn.removeOrphanedDocuments(e,n)}collect(e,n){return-1===this.params.cacheSizeCollectionThreshold?(yt("LruGarbageCollector","Garbage collection skipped; disabled"),L.resolve(Sm)):this.getCacheSize(e).next(o=>o<this.params.cacheSizeCollectionThreshold?(yt("LruGarbageCollector",`Garbage collection skipped; Cache size ${o} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Sm):this.Jn(e,n))}getCacheSize(e){return this.zn.getCacheSize(e)}Jn(e,n){let o,u,h,v,P,V,z;const ee=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(le=>(le>this.params.maximumSequenceNumbersToCollect?(yt("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${le}`),u=this.params.maximumSequenceNumbersToCollect):u=le,v=Date.now(),this.nthSequenceNumber(e,u))).next(le=>(o=le,P=Date.now(),this.removeTargets(e,o,n))).next(le=>(h=le,V=Date.now(),this.removeOrphanedDocuments(e,o))).next(le=>(z=Date.now(),Du()<=Oe.in.DEBUG&&yt("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${v-ee}ms\n\tDetermined least recently used ${u} in `+(P-v)+`ms\n\tRemoved ${h} targets in `+(V-P)+`ms\n\tRemoved ${le} documents in `+(z-V)+`ms\nTotal Duration: ${z-ee}ms`),L.resolve({didRun:!0,sequenceNumbersCollected:u,targetsRemoved:h,documentsRemoved:le})))}}class qt{constructor(e,n){this.db=e,this.garbageCollector=function Xe(i,e){return new nt(i,e)}(this,n)}jn(e){const n=this.Yn(e);return this.db.getTargetCache().getTargetCount(e).next(o=>n.next(u=>o+u))}Yn(e){let n=0;return this.Hn(e,o=>{n++}).next(()=>n)}forEachTarget(e,n){return this.db.getTargetCache().forEachTarget(e,n)}Hn(e,n){return this.Zn(e,(o,u)=>n(u))}addReference(e,n,o){return At(e,o)}removeReference(e,n,o){return At(e,o)}removeTargets(e,n,o){return this.db.getTargetCache().removeTargets(e,n,o)}markPotentiallyOrphaned(e,n){return At(e,n)}Xn(e,n){return function(u,h){let v=!1;return d(u).Z(P=>Ah(u,P,h).next(V=>(V&&(v=!0),L.resolve(!V)))).next(()=>v)}(e,n)}removeOrphanedDocuments(e,n){const o=this.db.getRemoteDocumentCache().newChangeBuffer(),u=[];let h=0;return this.Zn(e,(v,P)=>{if(P<=n){const V=this.Xn(e,v).next(z=>{if(!z)return h++,o.getEntry(e,v).next(()=>(o.removeEntry(v,sn.min()),j(e).delete([0,Ni(v.path)])))});u.push(V)}}).next(()=>L.waitFor(u)).next(()=>o.apply(e)).next(()=>h)}removeTarget(e,n){const o=n.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,o)}updateLimboDocument(e,n){return At(e,n)}Zn(e,n){const o=j(e);let u,h=as._e;return o.Y({index:"documentTargetsIndex"},([v,P],{path:V,sequenceNumber:z})=>{0===v?(h!==as._e&&n(new Gt(Io(u)),h),h=z,u=V):h=as._e}).next(()=>{h!==as._e&&n(new Gt(Io(u)),h)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function At(i,e){return j(i).put((u=i.currentSequenceNumber,{targetId:0,path:Ni(e.path),sequenceNumber:u}));var u}class kt{constructor(){this.changes=new Ws(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,qn.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const o=this.changes.get(n);return void 0!==o?L.resolve(o):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class Kn{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,n,o){return sr(e).put(o)}removeEntry(e,n,o){return sr(e).delete(function(h,v){const P=h.path.toArray();return[P.slice(0,P.length-2),P[P.length-2],np(v),P[P.length-1]]}(n,o))}updateMetadata(e,n){return this.getMetadata(e).next(o=>(o.byteSize+=n,this.er(e,o)))}getEntry(e,n){let o=qn.newInvalidDocument(n);return sr(e).Y({index:"documentKeyIndex",range:IDBKeyRange.only(Pi(n))},(u,h)=>{o=this.tr(n,h)}).next(()=>o)}nr(e,n){let o={size:0,document:qn.newInvalidDocument(n)};return sr(e).Y({index:"documentKeyIndex",range:IDBKeyRange.only(Pi(n))},(u,h)=>{o={document:this.tr(n,h),size:Dh(h)}}).next(()=>o)}getEntries(e,n){let o=qs();return this.rr(e,n,(u,h)=>{const v=this.tr(u,h);o=o.insert(u,v)}).next(()=>o)}ir(e,n){let o=qs(),u=new ni(Gt.comparator);return this.rr(e,n,(h,v)=>{const P=this.tr(h,v);o=o.insert(h,P),u=u.insert(h,Dh(v))}).next(()=>({documents:o,sr:u}))}rr(e,n,o){if(n.isEmpty())return L.resolve();let u=new ii(zr);n.forEach(V=>u=u.add(V));const h=IDBKeyRange.bound(Pi(u.first()),Pi(u.last())),v=u.getIterator();let P=v.getNext();return sr(e).Y({index:"documentKeyIndex",range:h},(V,z,ee)=>{const le=Gt.fromSegments([...z.prefixPath,z.collectionGroup,z.documentId]);for(;P&&zr(P,le)<0;)o(P,null),P=v.getNext();P&&P.isEqual(le)&&(o(P,z),P=v.hasNext()?v.getNext():null),P?ee.U(Pi(P)):ee.done()}).next(()=>{for(;P;)o(P,null),P=v.hasNext()?v.getNext():null})}getDocumentsMatchingQuery(e,n,o,u,h){const v=n.path,P=[v.popLast().toArray(),v.lastSegment(),np(o.readTime),o.documentKey.path.isEmpty()?"":o.documentKey.path.lastSegment()],V=[v.popLast().toArray(),v.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return sr(e).W(IDBKeyRange.bound(P,V,!0)).next(z=>{h?.incrementDocumentReadCount(z.length);let ee=qs();for(const le of z){const Ae=this.tr(Gt.fromSegments(le.prefixPath.concat(le.collectionGroup,le.documentId)),le);Ae.isFoundDocument()&&(dn(n,Ae)||u.has(Ae.key))&&(ee=ee.insert(Ae.key,Ae))}return ee})}getAllFromCollectionGroup(e,n,o,u){let h=qs();const v=_r(n,o),P=_r(n,ro.max());return sr(e).Y({index:"collectionGroupIndex",range:IDBKeyRange.bound(v,P,!0)},(V,z,ee)=>{const le=this.tr(Gt.fromSegments(z.prefixPath.concat(z.collectionGroup,z.documentId)),z);h=h.insert(le.key,le),h.size===u&&ee.done()}).next(()=>h)}newChangeBuffer(e){return new An(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(n=>n.byteSize)}getMetadata(e){return br(e).get("remoteDocumentGlobalKey").next(n=>(mn(!!n),n))}er(e,n){return br(e).put("remoteDocumentGlobalKey",n)}tr(e,n){if(n){const o=function Eh(i,e){let n;if(e.document)n=cf(i.ut,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const o=Gt.fromSegments(e.noDocument.path),u=Vd(e.noDocument.readTime);n=qn.newNoDocument(o,u),e.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!e.unknownDocument)return tn();{const o=Gt.fromSegments(e.unknownDocument.path),u=Vd(e.unknownDocument.version);n=qn.newUnknownDocument(o,u)}}return e.readTime&&n.setReadTime(function(u){const h=new Ar(u[0],u[1]);return sn.fromTimestamp(h)}(e.readTime)),n}(this.serializer,n);if(!o.isNoDocument()||!o.version.isEqual(sn.min()))return o}return qn.newInvalidDocument(e)}}function lr(i){return new Kn(i)}class An extends kt{constructor(e,n){super(),this._r=e,this.trackRemovals=n,this.ar=new Ws(o=>o.toString(),(o,u)=>o.isEqual(u))}applyChanges(e){const n=[];let o=0,u=new ii((h,v)=>Hn(h.canonicalString(),v.canonicalString()));return this.changes.forEach((h,v)=>{const P=this.ar.get(h);if(n.push(this._r.removeEntry(e,h,P.readTime)),v.isValidDocument()){const V=Em(this._r.serializer,v);u=u.add(h.path.popLast());const z=Dh(V);o+=z-P.size,n.push(this._r.addEntry(e,h,V))}else if(o-=P.size,this.trackRemovals){const V=Em(this._r.serializer,v.convertToNoDocument(sn.min()));n.push(this._r.addEntry(e,h,V))}}),u.forEach(h=>{n.push(this._r.indexManager.addToCollectionParentIndex(e,h))}),n.push(this._r.updateMetadata(e,o)),L.waitFor(n)}getFromCache(e,n){return this._r.nr(e,n).next(o=>(this.ar.set(n,{size:o.size,readTime:o.document.readTime}),o.document))}getAllFromCache(e,n){return this._r.ir(e,n).next(({documents:o,sr:u})=>(u.forEach((h,v)=>{this.ar.set(h,{size:v,readTime:o.get(h).readTime})}),o))}}function br(i){return es(i,"remoteDocumentGlobal")}function sr(i){return es(i,"remoteDocumentsV14")}function Pi(i){const e=i.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function _r(i,e){const n=e.documentKey.path.toArray();return[i,np(e.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function zr(i,e){const n=i.path.toArray(),o=e.path.toArray();let u=0;for(let h=0;h<n.length-2&&h<o.length-2;++h)if(u=Hn(n[h],o[h]),u)return u;return u=Hn(n.length,o.length),u||(u=Hn(n[n.length-2],o[o.length-2]),u||Hn(n[n.length-1],o[o.length-1]))}class Qr{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}class ls{constructor(e,n,o,u){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=o,this.indexManager=u}getDocument(e,n){let o=null;return this.documentOverlayCache.getOverlay(e,n).next(u=>(o=u,this.remoteDocumentCache.getEntry(e,n))).next(u=>(null!==o&&xd(o.mutation,u,Qo.empty(),Ar.now()),u))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(o=>this.getLocalViewOfDocuments(e,o,Xn()).next(()=>o))}getLocalViewOfDocuments(e,n,o=Xn()){const u=ao();return this.populateOverlays(e,u,n).next(()=>this.computeViews(e,n,u,o).next(h=>{let v=Bs();return h.forEach((P,V)=>{v=v.insert(P,V.overlayedDocument)}),v}))}getOverlayedDocuments(e,n){const o=ao();return this.populateOverlays(e,o,n).next(()=>this.computeViews(e,n,o,Xn()))}populateOverlays(e,n,o){const u=[];return o.forEach(h=>{n.has(h)||u.push(h)}),this.documentOverlayCache.getOverlays(e,u).next(h=>{h.forEach((v,P)=>{n.set(v,P)})})}computeViews(e,n,o,u){let h=qs();const v=Wa(),P=Wa();return n.forEach((V,z)=>{const ee=o.get(z.key);u.has(z.key)&&(void 0===ee||ee.mutation instanceof fu)?h=h.insert(z.key,z):void 0!==ee?(v.set(z.key,ee.mutation.getFieldMask()),xd(ee.mutation,z,ee.mutation.getFieldMask(),Ar.now())):v.set(z.key,Qo.empty())}),this.recalculateAndSaveOverlays(e,h).next(V=>(V.forEach((z,ee)=>v.set(z,ee)),n.forEach((z,ee)=>{var le;return P.set(z,new Qr(ee,null!==(le=v.get(z))&&void 0!==le?le:null))}),P))}recalculateAndSaveOverlays(e,n){const o=Wa();let u=new ni((v,P)=>v-P),h=Xn();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(v=>{for(const P of v)P.keys().forEach(V=>{const z=n.get(V);if(null===z)return;let ee=o.get(V)||Qo.empty();ee=P.applyToLocalView(z,ee),o.set(V,ee);const le=(u.get(P.batchId)||Xn()).add(V);u=u.insert(P.batchId,le)})}).next(()=>{const v=[],P=u.getReverseIterator();for(;P.hasNext();){const V=P.getNext(),z=V.key,ee=V.value,le=Xl();ee.forEach(Ae=>{if(!h.has(Ae)){const et=Md(n.get(Ae),o.get(Ae));null!==et&&le.set(Ae,et),h=h.add(Ae)}}),v.push(this.documentOverlayCache.saveOverlays(e,z,le))}return L.waitFor(v)}).next(()=>o)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(o=>this.recalculateAndSaveOverlays(e,o))}getDocumentsMatchingQuery(e,n,o,u){return Gt.isDocumentKey((v=n).path)&&null===v.collectionGroup&&0===v.filters.length?this.getDocumentsMatchingDocumentQuery(e,n.path):N(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,o,u):this.getDocumentsMatchingCollectionQuery(e,n,o,u);var v}getNextDocuments(e,n,o,u){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,o,u).next(h=>{const v=u-h.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,o.largestBatchId,u-h.size):L.resolve(ao());let P=-1,V=h;return v.next(z=>L.forEach(z,(ee,le)=>(P<le.largestBatchId&&(P=le.largestBatchId),h.get(ee)?L.resolve():this.remoteDocumentCache.getEntry(e,ee).next(Ae=>{V=V.insert(ee,Ae)}))).next(()=>this.populateOverlays(e,z,h)).next(()=>this.computeViews(e,V,z,Xn())).next(ee=>({batchId:P,changes:si(ee)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Gt(n)).next(o=>{let u=Bs();return o.isFoundDocument()&&(u=u.insert(o.key,o)),u})}getDocumentsMatchingCollectionGroupQuery(e,n,o,u){const h=n.collectionGroup;let v=Bs();return this.indexManager.getCollectionParents(e,h).next(P=>L.forEach(P,V=>{const z=(le=n,Ae=V.child(h),new Rs(Ae,null,le.explicitOrderBy.slice(),le.filters.slice(),le.limit,le.limitType,le.startAt,le.endAt));var le,Ae;return this.getDocumentsMatchingCollectionQuery(e,z,o,u).next(ee=>{ee.forEach((le,Ae)=>{v=v.insert(le,Ae)})})}).next(()=>v))}getDocumentsMatchingCollectionQuery(e,n,o,u){let h;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,o.largestBatchId).next(v=>(h=v,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,o,h,u))).next(v=>{h.forEach((V,z)=>{const ee=z.getKey();null===v.get(ee)&&(v=v.insert(ee,qn.newInvalidDocument(ee)))});let P=Bs();return v.forEach((V,z)=>{const ee=h.get(V);void 0!==ee&&xd(ee.mutation,z,Qo.empty(),Ar.now()),dn(n,z)&&(P=P.insert(V,z))}),P})}}class $i{constructor(e){this.serializer=e,this.ur=new Map,this.cr=new Map}getBundleMetadata(e,n){return L.resolve(this.ur.get(n))}saveBundleMetadata(e,n){return this.ur.set(n.id,{id:(u=n).id,version:u.version,createTime:Hi(u.createTime)}),L.resolve();var u}getNamedQuery(e,n){return L.resolve(this.cr.get(n))}saveNamedQuery(e,n){return this.cr.set(n.name,{name:(u=n).name,query:od(u.bundledQuery),readTime:Hi(u.readTime)}),L.resolve();var u}}class Fo{constructor(){this.overlays=new ni(Gt.comparator),this.lr=new Map}getOverlay(e,n){return L.resolve(this.overlays.get(n))}getOverlays(e,n){const o=ao();return L.forEach(n,u=>this.getOverlay(e,u).next(h=>{null!==h&&o.set(u,h)})).next(()=>o)}saveOverlays(e,n,o){return o.forEach((u,h)=>{this.lt(e,n,h)}),L.resolve()}removeOverlaysForBatchId(e,n,o){const u=this.lr.get(o);return void 0!==u&&(u.forEach(h=>this.overlays=this.overlays.remove(h)),this.lr.delete(o)),L.resolve()}getOverlaysForCollection(e,n,o){const u=ao(),h=n.length+1,v=new Gt(n.child("")),P=this.overlays.getIteratorFrom(v);for(;P.hasNext();){const V=P.getNext().value,z=V.getKey();if(!n.isPrefixOf(z.path))break;z.path.length===h&&V.largestBatchId>o&&u.set(V.getKey(),V)}return L.resolve(u)}getOverlaysForCollectionGroup(e,n,o,u){let h=new ni((z,ee)=>z-ee);const v=this.overlays.getIterator();for(;v.hasNext();){const z=v.getNext().value;if(z.getKey().getCollectionGroup()===n&&z.largestBatchId>o){let ee=h.get(z.largestBatchId);null===ee&&(ee=ao(),h=h.insert(z.largestBatchId,ee)),ee.set(z.getKey(),z)}}const P=ao(),V=h.getIterator();for(;V.hasNext()&&(V.getNext().value.forEach((z,ee)=>P.set(z,ee)),!(P.size()>=u)););return L.resolve(P)}lt(e,n,o){const u=this.overlays.get(o.key);if(null!==u){const v=this.lr.get(u.largestBatchId).delete(o.key);this.lr.set(u.largestBatchId,v)}this.overlays=this.overlays.insert(o.key,new al(n,o));let h=this.lr.get(n);void 0===h&&(h=Xn(),this.lr.set(n,h)),this.lr.set(n,h.add(o.key))}}class Ns{constructor(){this.hr=new ii(Jr.Pr),this.Ir=new ii(Jr.Tr)}isEmpty(){return this.hr.isEmpty()}addReference(e,n){const o=new Jr(e,n);this.hr=this.hr.add(o),this.Ir=this.Ir.add(o)}Er(e,n){e.forEach(o=>this.addReference(o,n))}removeReference(e,n){this.dr(new Jr(e,n))}Ar(e,n){e.forEach(o=>this.removeReference(o,n))}Rr(e){const n=new Gt(new Jn([])),o=new Jr(n,e),u=new Jr(n,e+1),h=[];return this.Ir.forEachInRange([o,u],v=>{this.dr(v),h.push(v.key)}),h}Vr(){this.hr.forEach(e=>this.dr(e))}dr(e){this.hr=this.hr.delete(e),this.Ir=this.Ir.delete(e)}mr(e){const n=new Gt(new Jn([])),o=new Jr(n,e),u=new Jr(n,e+1);let h=Xn();return this.Ir.forEachInRange([o,u],v=>{h=h.add(v.key)}),h}containsKey(e){const n=new Jr(e,0),o=this.hr.firstAfterOrEqual(n);return null!==o&&e.isEqual(o.key)}}class Jr{constructor(e,n){this.key=e,this.gr=n}static Pr(e,n){return Gt.comparator(e.key,n.key)||Hn(e.gr,n.gr)}static Tr(e,n){return Hn(e.gr,n.gr)||Gt.comparator(e.key,n.key)}}class Gu{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.pr=1,this.yr=new ii(Jr.Pr)}checkEmpty(e){return L.resolve(0===this.mutationQueue.length)}addMutationBatch(e,n,o,u){const h=this.pr;this.pr++;const v=new ol(h,n,o,u);this.mutationQueue.push(v);for(const P of u)this.yr=this.yr.add(new Jr(P.key,h)),this.indexManager.addToCollectionParentIndex(e,P.key.path.popLast());return L.resolve(v)}lookupMutationBatch(e,n){return L.resolve(this.wr(n))}getNextMutationBatchAfterBatchId(e,n){const u=this.Sr(n+1),h=u<0?0:u;return L.resolve(this.mutationQueue.length>h?this.mutationQueue[h]:null)}getHighestUnacknowledgedBatchId(){return L.resolve(0===this.mutationQueue.length?-1:this.pr-1)}getAllMutationBatches(e){return L.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const o=new Jr(n,0),u=new Jr(n,Number.POSITIVE_INFINITY),h=[];return this.yr.forEachInRange([o,u],v=>{const P=this.wr(v.gr);h.push(P)}),L.resolve(h)}getAllMutationBatchesAffectingDocumentKeys(e,n){let o=new ii(Hn);return n.forEach(u=>{const h=new Jr(u,0),v=new Jr(u,Number.POSITIVE_INFINITY);this.yr.forEachInRange([h,v],P=>{o=o.add(P.gr)})}),L.resolve(this.br(o))}getAllMutationBatchesAffectingQuery(e,n){const o=n.path,u=o.length+1;let h=o;Gt.isDocumentKey(h)||(h=h.child(""));const v=new Jr(new Gt(h),0);let P=new ii(Hn);return this.yr.forEachWhile(V=>{const z=V.key.path;return!!o.isPrefixOf(z)&&(z.length===u&&(P=P.add(V.gr)),!0)},v),L.resolve(this.br(P))}br(e){const n=[];return e.forEach(o=>{const u=this.wr(o);null!==u&&n.push(u)}),n}removeMutationBatch(e,n){mn(0===this.Dr(n.batchId,"removed")),this.mutationQueue.shift();let o=this.yr;return L.forEach(n.mutations,u=>{const h=new Jr(u.key,n.batchId);return o=o.delete(h),this.referenceDelegate.markPotentiallyOrphaned(e,u.key)}).next(()=>{this.yr=o})}Fn(e){}containsKey(e,n){const o=new Jr(n,0),u=this.yr.firstAfterOrEqual(o);return L.resolve(n.isEqual(u&&u.key))}performConsistencyCheck(e){return L.resolve()}Dr(e,n){return this.Sr(e)}Sr(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}wr(e){const n=this.Sr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}class Ks{constructor(e){this.Cr=e,this.docs=new ni(Gt.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const o=n.key,u=this.docs.get(o),h=u?u.size:0,v=this.Cr(n);return this.docs=this.docs.insert(o,{document:n.mutableCopy(),size:v}),this.size+=v-h,this.indexManager.addToCollectionParentIndex(e,o.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const o=this.docs.get(n);return L.resolve(o?o.document.mutableCopy():qn.newInvalidDocument(n))}getEntries(e,n){let o=qs();return n.forEach(u=>{const h=this.docs.get(u);o=o.insert(u,h?h.document.mutableCopy():qn.newInvalidDocument(u))}),L.resolve(o)}getDocumentsMatchingQuery(e,n,o,u){let h=qs();const v=n.path,P=new Gt(v.child("")),V=this.docs.getIteratorFrom(P);for(;V.hasNext();){const{key:z,value:{document:ee}}=V.getNext();if(!v.isPrefixOf(z.path))break;z.path.length>v.length+1||Ec(Id(ee),o)<=0||(u.has(ee.key)||dn(n,ee))&&(h=h.insert(ee.key,ee.mutableCopy()))}return L.resolve(h)}getAllFromCollectionGroup(e,n,o,u){tn()}vr(e,n){return L.forEach(this.docs,o=>n(o))}newChangeBuffer(e){return new ud(this)}getSize(e){return L.resolve(this.size)}}class ud extends kt{constructor(e){super(),this._r=e}applyChanges(e){const n=[];return this.changes.forEach((o,u)=>{u.isValidDocument()?n.push(this._r.addEntry(e,u)):this._r.removeEntry(o)}),L.waitFor(n)}getFromCache(e,n){return this._r.getEntry(e,n)}getAllFromCache(e,n){return this._r.getEntries(e,n)}}class dl{constructor(e){this.persistence=e,this.Fr=new Ws(n=>Aa(n),rl),this.lastRemoteSnapshotVersion=sn.min(),this.highestTargetId=0,this.Mr=0,this.Or=new Ns,this.targetCount=0,this.Nr=D.On()}forEachTarget(e,n){return this.Fr.forEach((o,u)=>n(u)),L.resolve()}getLastRemoteSnapshotVersion(e){return L.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return L.resolve(this.Mr)}allocateTargetId(e){return this.highestTargetId=this.Nr.next(),L.resolve(this.highestTargetId)}setTargetsMetadata(e,n,o){return o&&(this.lastRemoteSnapshotVersion=o),n>this.Mr&&(this.Mr=n),L.resolve()}kn(e){this.Fr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.Nr=new D(n),this.highestTargetId=n),e.sequenceNumber>this.Mr&&(this.Mr=e.sequenceNumber)}addTargetData(e,n){return this.kn(n),this.targetCount+=1,L.resolve()}updateTargetData(e,n){return this.kn(n),L.resolve()}removeTargetData(e,n){return this.Fr.delete(n.target),this.Or.Rr(n.targetId),this.targetCount-=1,L.resolve()}removeTargets(e,n,o){let u=0;const h=[];return this.Fr.forEach((v,P)=>{P.sequenceNumber<=n&&null===o.get(P.targetId)&&(this.Fr.delete(v),h.push(this.removeMatchingKeysForTargetId(e,P.targetId)),u++)}),L.waitFor(h).next(()=>u)}getTargetCount(e){return L.resolve(this.targetCount)}getTargetData(e,n){const o=this.Fr.get(n)||null;return L.resolve(o)}addMatchingKeys(e,n,o){return this.Or.Er(n,o),L.resolve()}removeMatchingKeys(e,n,o){this.Or.Ar(n,o);const u=this.persistence.referenceDelegate,h=[];return u&&n.forEach(v=>{h.push(u.markPotentiallyOrphaned(e,v))}),L.waitFor(h)}removeMatchingKeysForTargetId(e,n){return this.Or.Rr(n),L.resolve()}getMatchingKeysForTargetId(e,n){const o=this.Or.mr(n);return L.resolve(o)}containsKey(e,n){return L.resolve(this.Or.containsKey(n))}}class Lo{constructor(e,n){this.Br={},this.overlays={},this.Lr=new as(0),this.kr=!1,this.kr=!0,this.referenceDelegate=e(this),this.qr=new dl(this),this.indexManager=new Dm,this.remoteDocumentCache=new Ks(o=>this.referenceDelegate.Qr(o)),this.serializer=new pf(n),this.Kr=new $i(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.kr=!1,Promise.resolve()}get started(){return this.kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new Fo,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let o=this.Br[e.toKey()];return o||(o=new Gu(n,this.referenceDelegate),this.Br[e.toKey()]=o),o}getTargetCache(){return this.qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Kr}runTransaction(e,n,o){yt("MemoryPersistence","Starting transaction:",e);const u=new lc(this.Lr.next());return this.referenceDelegate.$r(),o(u).next(h=>this.referenceDelegate.Ur(u).next(()=>h)).toPromise().then(h=>(u.raiseOnCommittedEvent(),h))}Wr(e,n){return L.or(Object.values(this.Br).map(o=>()=>o.containsKey(e,n)))}}class lc extends M{constructor(e){super(),this.currentSequenceNumber=e}}class hl{constructor(e){this.persistence=e,this.Gr=new Ns,this.zr=null}static jr(e){return new hl(e)}get Hr(){if(this.zr)return this.zr;throw tn()}addReference(e,n,o){return this.Gr.addReference(o,n),this.Hr.delete(o.toString()),L.resolve()}removeReference(e,n,o){return this.Gr.removeReference(o,n),this.Hr.add(o.toString()),L.resolve()}markPotentiallyOrphaned(e,n){return this.Hr.add(n.toString()),L.resolve()}removeTarget(e,n){this.Gr.Rr(n.targetId).forEach(u=>this.Hr.add(u.toString()));const o=this.persistence.getTargetCache();return o.getMatchingKeysForTargetId(e,n.targetId).next(u=>{u.forEach(h=>this.Hr.add(h.toString()))}).next(()=>o.removeTargetData(e,n))}$r(){this.zr=new Set}Ur(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return L.forEach(this.Hr,o=>{const u=Gt.fromPath(o);return this.Jr(e,u).next(h=>{h||n.removeEntry(u,sn.min())})}).next(()=>(this.zr=null,n.apply(e)))}updateLimboDocument(e,n){return this.Jr(e,n).next(o=>{o?this.Hr.delete(n.toString()):this.Hr.add(n.toString())})}Qr(e){return 0}Jr(e,n){return L.or([()=>L.resolve(this.Gr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Wr(e,n)])}}class mu{constructor(e){this.serializer=e}N(e,n,o,u){const h=new J("createOrUpgrade",n);var V;o<1&&u>=1&&(e.createObjectStore("owner"),(V=e).createObjectStore("mutationQueues",{keyPath:"userId"}),V.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",wa,{unique:!0}),V.createObjectStore("documentMutations"),fl(e),function(V){V.createObjectStore("remoteDocuments")}(e));let v=L.resolve();return o<3&&u>=3&&(0!==o&&(function(V){V.deleteObjectStore("targetDocuments"),V.deleteObjectStore("targets"),V.deleteObjectStore("targetGlobal")}(e),fl(e)),v=v.next(()=>function(V){const z=V.store("targetGlobal"),ee={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:sn.min().toTimestamp(),targetCount:0};return z.put("targetGlobalKey",ee)}(h))),o<4&&u>=4&&(0!==o&&(v=v.next(()=>function(V,z){return z.store("mutations").W().next(ee=>{V.deleteObjectStore("mutations"),V.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",wa,{unique:!0});const le=z.store("mutations"),Ae=ee.map(et=>le.put(et));return L.waitFor(Ae)})}(e,h))),v=v.next(()=>{!function(V){V.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),o<5&&u>=5&&(v=v.next(()=>this.Zr(h))),o<6&&u>=6&&(v=v.next(()=>(function(V){V.createObjectStore("remoteDocumentGlobal")}(e),this.Xr(h)))),o<7&&u>=7&&(v=v.next(()=>this.ei(h))),o<8&&u>=8&&(v=v.next(()=>this.ti(e,h))),o<9&&u>=9&&(v=v.next(()=>{!function(V){V.objectStoreNames.contains("remoteDocumentChanges")&&V.deleteObjectStore("remoteDocumentChanges")}(e)})),o<10&&u>=10&&(v=v.next(()=>this.ni(h))),o<11&&u>=11&&(v=v.next(()=>{(function(V){V.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(V){V.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),o<12&&u>=12&&(v=v.next(()=>{!function(V){const z=V.createObjectStore("documentOverlays",{keyPath:Qc});z.createIndex("collectionPathOverlayIndex",Zh,{unique:!1}),z.createIndex("collectionGroupOverlayIndex",Qu,{unique:!1})}(e)})),o<13&&u>=13&&(v=v.next(()=>function(V){const z=V.createObjectStore("remoteDocumentsV14",{keyPath:so});z.createIndex("documentKeyIndex",Zu),z.createIndex("collectionGroupIndex",Td)}(e)).next(()=>this.ri(e,h)).next(()=>e.deleteObjectStore("remoteDocuments"))),o<14&&u>=14&&(v=v.next(()=>this.ii(e,h))),o<15&&u>=15&&(v=v.next(()=>function(V){V.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),V.createObjectStore("indexState",{keyPath:bd}).createIndex("sequenceNumberIndex",Kh,{unique:!1}),V.createObjectStore("indexEntries",{keyPath:Zc}).createIndex("documentKeyIndex",Yh,{unique:!1})}(e))),v}Xr(e){let n=0;return e.store("remoteDocuments").Y((o,u)=>{n+=Dh(u)}).next(()=>{const o={byteSize:n};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",o)})}Zr(e){const n=e.store("mutationQueues"),o=e.store("mutations");return n.W().next(u=>L.forEach(u,h=>{const v=IDBKeyRange.bound([h.userId,-1],[h.userId,h.lastAcknowledgedBatchId]);return o.W("userMutationsIndex",v).next(P=>L.forEach(P,V=>{mn(V.userId===h.userId);const z=xl(this.serializer,V);return Rm(e,h.userId,z).next(()=>{})}))}))}ei(e){const n=e.store("targetDocuments"),o=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(u=>{const h=[];return o.Y((v,P)=>{const V=new Jn(v),z=[0,Ni(V)];h.push(n.get(z).next(ee=>ee?L.resolve():n.put({targetId:0,path:Ni(V),sequenceNumber:u.highestListenSequenceNumber})))}).next(()=>L.waitFor(h))})}ti(e,n){e.createObjectStore("collectionParents",{keyPath:ch});const o=n.store("collectionParents"),u=new Cm,h=v=>{if(u.add(v)){const P=v.lastSegment(),V=v.popLast();return o.put({collectionId:P,parent:Ni(V)})}};return n.store("remoteDocuments").Y({J:!0},(v,P)=>{const V=new Jn(v);return h(V.popLast())}).next(()=>n.store("documentMutations").Y({J:!0},([v,P,V],z)=>{const ee=Io(P);return h(ee.popLast())}))}ni(e){const n=e.store("targets");return n.Y((o,u)=>{const h=gf(u),v=Bd(this.serializer,h);return n.put(v)})}ri(e,n){const o=n.store("remoteDocuments"),u=[];return o.Y((h,v)=>{const P=n.store("remoteDocumentsV14"),V=(le=v,le.document?new Gt(Jn.fromString(le.document.name).popFirst(5)):le.noDocument?Gt.fromSegments(le.noDocument.path):le.unknownDocument?Gt.fromSegments(le.unknownDocument.path):tn()).path.toArray(),z={prefixPath:V.slice(0,V.length-2),collectionGroup:V[V.length-2],documentId:V[V.length-1],readTime:v.readTime||[0,0],unknownDocument:v.unknownDocument,noDocument:v.noDocument,document:v.document,hasCommittedMutations:!!v.hasCommittedMutations};var le;u.push(P.put(z))}).next(()=>L.waitFor(u))}ii(e,n){const o=n.store("mutations"),u=lr(this.serializer),h=new Lo(hl.jr,this.serializer.ut);return o.W().next(v=>{const P=new Map;return v.forEach(V=>{var z;let ee=null!==(z=P.get(V.userId))&&void 0!==z?z:Xn();xl(this.serializer,V).keys().forEach(le=>ee=ee.add(le)),P.set(V.userId,ee)}),L.forEach(P,(V,z)=>{const ee=new Lr(z),le=ip.ct(this.serializer,ee),Ae=h.getIndexManager(ee),et=Ch.ct(ee,this.serializer,Ae,h.referenceDelegate);return new ls(u,et,le,Ae).recalculateAndSaveOverlaysForDocumentKeys(new Xc(n,as._e),V).next()})})}}function fl(i){i.createObjectStore("targetDocuments",{keyPath:Yc}).createIndex("documentTargetsIndex",bc,{unique:!0}),i.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",Su,{unique:!0}),i.createObjectStore("targetGlobal")}const pl="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class Gd{constructor(e,n,o,u,h,v,P,V,z,ee,le=15){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=o,this.si=h,this.window=v,this.document=P,this.oi=z,this._i=ee,this.ai=le,this.Lr=null,this.kr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ui=null,this.inForeground=!1,this.ci=null,this.li=null,this.hi=Number.NEGATIVE_INFINITY,this.Pi=Ae=>Promise.resolve(),!Gd.D())throw new vt(tt.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new qt(this,u),this.Ii=n+"main",this.serializer=new pf(V),this.Ti=new de(this.Ii,this.ai,new mu(this.serializer)),this.qr=new c(this.referenceDelegate,this.serializer),this.remoteDocumentCache=lr(this.serializer),this.Kr=new Tm,this.window&&this.window.localStorage?this.Ei=this.window.localStorage:(this.Ei=null,!1===ee&&Ti("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.di().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new vt(tt.FAILED_PRECONDITION,pl);return this.Ai(),this.Ri(),this.Vi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.qr.getHighestSequenceNumber(e))}).then(e=>{this.Lr=new as(e,this.oi)}).then(()=>{this.kr=!0}).catch(e=>(this.Ti&&this.Ti.close(),Promise.reject(e)))}mi(e){var n=this;return this.Pi=function(){var o=(0,Ve.Z)(function*(u){if(n.started)return e(u)});return function(u){return o.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ti.L(function(){var n=(0,Ve.Z)(function*(o){null===o.newVersion&&(yield e())});return function(o){return n.apply(this,arguments)}}())}setNetworkEnabled(e){var n=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.si.enqueueAndForget((0,Ve.Z)(function*(){n.started&&(yield n.di())})))}di(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Hu(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.fi(e).next(n=>{n||(this.isPrimary=!1,this.si.enqueueRetryable(()=>this.Pi(!1)))})}).next(()=>this.gi(e)).next(n=>this.isPrimary&&!n?this.pi(e).next(()=>!1):!!n&&this.yi(e).next(()=>!0))).catch(e=>{if(Vt(e))return yt("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return yt("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.si.enqueueRetryable(()=>this.Pi(e)),this.isPrimary=e})}fi(e){return Bc(e).get("owner").next(n=>L.resolve(this.wi(n)))}Si(e){return Hu(e).delete(this.clientId)}bi(){var e=this;return(0,Ve.Z)(function*(){if(e.isPrimary&&!e.Di(e.hi,18e5)){e.hi=Date.now();const n=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",o=>{const u=es(o,"clientMetadata");return u.W().next(h=>{const v=e.Ci(h,18e5),P=h.filter(V=>-1===v.indexOf(V));return L.forEach(P,V=>u.delete(V.clientId)).next(()=>P)})}).catch(()=>[]);if(e.Ei)for(const o of n)e.Ei.removeItem(e.vi(o.clientId))}})()}Vi(){this.li=this.si.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.di().then(()=>this.bi()).then(()=>this.Vi()))}wi(e){return!!e&&e.ownerId===this.clientId}gi(e){return this._i?L.resolve(!0):Bc(e).get("owner").next(n=>{if(null!==n&&this.Di(n.leaseTimestampMs,5e3)&&!this.Fi(n.ownerId)){if(this.wi(n)&&this.networkEnabled)return!0;if(!this.wi(n)){if(!n.allowTabSynchronization)throw new vt(tt.FAILED_PRECONDITION,pl);return!1}}return!(!this.networkEnabled||!this.inForeground)||Hu(e).W().next(o=>void 0===this.Ci(o,5e3).find(u=>!(this.clientId===u.clientId||!(!this.networkEnabled&&u.networkEnabled||!this.inForeground&&u.inForeground&&this.networkEnabled===u.networkEnabled))))}).next(n=>(this.isPrimary!==n&&yt("IndexedDbPersistence",`Client ${n?"is":"is not"} eligible for a primary lease.`),n))}shutdown(){var e=this;return(0,Ve.Z)(function*(){e.kr=!1,e.Mi(),e.li&&(e.li.cancel(),e.li=null),e.xi(),e.Oi(),yield e.Ti.runTransaction("shutdown","readwrite",["owner","clientMetadata"],n=>{const o=new Xc(n,as._e);return e.pi(o).next(()=>e.Si(o))}),e.Ti.close(),e.Ni()})()}Ci(e,n){return e.filter(o=>this.Di(o.updateTimeMs,n)&&!this.Fi(o.clientId))}Bi(){return this.runTransaction("getActiveClients","readonly",e=>Hu(e).W().next(n=>this.Ci(n,18e5).map(o=>o.clientId)))}get started(){return this.kr}getMutationQueue(e,n){return Ch.ct(e,this.serializer,n,this.referenceDelegate)}getTargetCache(){return this.qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new Am(e,this.serializer.ut.databaseId)}getDocumentOverlayCache(e){return ip.ct(this.serializer,e)}getBundleCache(){return this.Kr}runTransaction(e,n,o){yt("IndexedDbPersistence","Starting transaction:",e);const u="readonly"===n?"readonly":"readwrite",h=15===(V=this.ai)?Jc:14===V?ql:13===V?oo:12===V?Ju:11===V?Ha:void tn();var V;let v;return this.Ti.runTransaction(e,u,h,P=>(v=new Xc(P,this.Lr?this.Lr.next():as._e),"readwrite-primary"===n?this.fi(v).next(V=>!!V||this.gi(v)).next(V=>{if(!V)throw Ti(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.si.enqueueRetryable(()=>this.Pi(!1)),new vt(tt.FAILED_PRECONDITION,S);return o(v)}).next(V=>this.yi(v).next(()=>V)):this.Li(v).next(()=>o(v)))).then(P=>(v.raiseOnCommittedEvent(),P))}Li(e){return Bc(e).get("owner").next(n=>{if(null!==n&&this.Di(n.leaseTimestampMs,5e3)&&!this.Fi(n.ownerId)&&!this.wi(n)&&!(this._i||this.allowTabSynchronization&&n.allowTabSynchronization))throw new vt(tt.FAILED_PRECONDITION,pl)})}yi(e){const n={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Bc(e).put("owner",n)}static D(){return de.D()}pi(e){const n=Bc(e);return n.get("owner").next(o=>this.wi(o)?(yt("IndexedDbPersistence","Releasing primary lease."),n.delete("owner")):L.resolve())}Di(e,n){const o=Date.now();return!(e<o-n||e>o&&(Ti(`Detected an update time that is in the future: ${e} > ${o}`),1))}Ai(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ci=()=>{this.si.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.di()))},this.document.addEventListener("visibilitychange",this.ci),this.inForeground="visible"===this.document.visibilityState)}xi(){this.ci&&(this.document.removeEventListener("visibilitychange",this.ci),this.ci=null)}Ri(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ui=()=>{this.Mi();const n=/(?:Version|Mobile)\/1[456]/;(0,We.G6)()&&(navigator.appVersion.match(n)||navigator.userAgent.match(n))&&this.si.enterRestrictedMode(!0),this.si.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ui))}Oi(){this.ui&&(this.window.removeEventListener("pagehide",this.ui),this.ui=null)}Fi(e){var n;try{const o=null!==(null===(n=this.Ei)||void 0===n?void 0:n.getItem(this.vi(e)));return yt("IndexedDbPersistence",`Client '${e}' ${o?"is":"is not"} zombied in LocalStorage`),o}catch(o){return Ti("IndexedDbPersistence","Failed to get zombied client id.",o),!1}}Mi(){if(this.Ei)try{this.Ei.setItem(this.vi(this.clientId),String(Date.now()))}catch(e){Ti("Failed to set zombie client id.",e)}}Ni(){if(this.Ei)try{this.Ei.removeItem(this.vi(this.clientId))}catch{}}vi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Bc(i){return es(i,"owner")}function Hu(i){return es(i,"clientMetadata")}function $u(i,e){let n=i.projectId;return i.isDefaultDatabase||(n+="."+i.database),"firestore/"+e+"/"+n+"/"}class Hd{constructor(e,n,o,u){this.targetId=e,this.fromCache=n,this.ki=o,this.qi=u}static Qi(e,n){let o=Xn(),u=Xn();for(const h of n.docChanges)switch(h.type){case 0:o=o.add(h.doc.key);break;case 1:u=u.add(h.doc.key)}return new Hd(e,n.fromCache,o,u)}}class cd{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class Tf{constructor(){this.Ki=!1,this.$i=!1,this.Ui=100,this.Wi=8}initialize(e,n){this.Gi=e,this.indexManager=n,this.Ki=!0}getDocumentsMatchingQuery(e,n,o,u){const h={result:null};return this.zi(e,n).next(v=>{h.result=v}).next(()=>{if(!h.result)return this.ji(e,n,u,o).next(v=>{h.result=v})}).next(()=>{if(h.result)return;const v=new cd;return this.Hi(e,n,v).next(P=>{if(h.result=P,this.$i)return this.Ji(e,n,v,P.size)})}).next(()=>h.result)}Ji(e,n,o,u){return o.documentReadCount<this.Ui?(Du()<=Oe.in.DEBUG&&yt("QueryEngine","SDK will not create cache indexes for query:",bt(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Ui,"documents"),L.resolve()):(Du()<=Oe.in.DEBUG&&yt("QueryEngine","Query:",bt(n),"scans",o.documentReadCount,"local documents and returns",u,"documents as results."),o.documentReadCount>this.Wi*u?(Du()<=Oe.in.DEBUG&&yt("QueryEngine","The SDK decides to create cache indexes for query:",bt(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,T(n))):L.resolve())}zi(e,n){if(Jl(n))return L.resolve(null);let o=T(n);return this.indexManager.getIndexType(e,o).next(u=>0===u?null:(null!==n.limit&&1===u&&(n=ce(n,null,"F"),o=T(n)),this.indexManager.getDocumentsMatchingTarget(e,o).next(h=>{const v=Xn(...h);return this.Gi.getDocuments(e,v).next(P=>this.indexManager.getMinOffset(e,o).next(V=>{const z=this.Yi(n,P);return this.Zi(n,z,v,V.readTime)?this.zi(e,ce(n,null,"F")):this.Xi(e,z,n,V)}))})))}ji(e,n,o,u){return Jl(n)||u.isEqual(sn.min())?L.resolve(null):this.Gi.getDocuments(e,o).next(h=>{const v=this.Yi(n,h);return this.Zi(n,v,o,u)?L.resolve(null):(Du()<=Oe.in.DEBUG&&yt("QueryEngine","Re-using previous result from %s to execute query: %s",u.toString(),bt(n)),this.Xi(e,v,n,Yu(u,-1)).next(P=>P))})}Yi(e,n){let o=new ii(Tr(e));return n.forEach((u,h)=>{dn(e,h)&&(o=o.add(h))}),o}Zi(e,n,o,u){if(null===e.limit)return!1;if(o.size!==n.size)return!0;const h="F"===e.limitType?n.last():n.first();return!!h&&(h.hasPendingWrites||h.version.compareTo(u)>0)}Hi(e,n,o){return Du()<=Oe.in.DEBUG&&yt("QueryEngine","Using full collection scan to execute query:",bt(n)),this.Gi.getDocumentsMatchingQuery(e,n,ro.min(),o)}Xi(e,n,o,u){return this.Gi.getDocumentsMatchingQuery(e,o,u).next(h=>(n.forEach(v=>{h=h.insert(v.key,v)}),h))}}class cp{constructor(e,n,o,u){this.persistence=e,this.es=n,this.serializer=u,this.ts=new ni(Hn),this.ns=new Ws(h=>Aa(h),rl),this.rs=new Map,this.ss=e.getRemoteDocumentCache(),this.qr=e.getTargetCache(),this.Kr=e.getBundleCache(),this.os(o)}os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new ls(this.ss,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ss.setIndexManager(this.indexManager),this.es.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.ts))}}function Sh(i,e,n,o){return new cp(i,e,n,o)}function ig(i,e){return Rh.apply(this,arguments)}function Rh(){return Rh=(0,Ve.Z)(function*(i,e){const n=Ut(i);return yield n.persistence.runTransaction("Handle user change","readonly",o=>{let u;return n.mutationQueue.getAllMutationBatches(o).next(h=>(u=h,n.os(e),n.mutationQueue.getAllMutationBatches(o))).next(h=>{const v=[],P=[];let V=Xn();for(const z of u){v.push(z.batchId);for(const ee of z.mutations)V=V.add(ee.key)}for(const z of h){P.push(z.batchId);for(const ee of z.mutations)V=V.add(ee.key)}return n.localDocuments.getDocuments(o,V).next(z=>({_s:z,removedBatchIds:v,addedBatchIds:P}))})})}),Rh.apply(this,arguments)}function Nm(i){const e=Ut(i);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.qr.getLastRemoteSnapshotVersion(n))}function dp(i,e,n){let o=Xn(),u=Xn();return n.forEach(h=>o=o.add(h)),e.getEntries(i,o).next(h=>{let v=qs();return n.forEach((P,V)=>{const z=h.get(P);V.isFoundDocument()!==z.isFoundDocument()&&(u=u.add(P)),V.isNoDocument()&&V.version.isEqual(sn.min())?(e.removeEntry(P,V.readTime),v=v.insert(P,V)):!z.isValidDocument()||V.version.compareTo(z.version)>0||0===V.version.compareTo(z.version)&&z.hasPendingWrites?(e.addEntry(V),v=v.insert(P,V)):yt("LocalStore","Ignoring outdated watch update for ",P,". Current version:",z.version," Watch version:",V.version)}),{us:v,cs:u}})}function Pm(i,e){const n=Ut(i);return n.persistence.runTransaction("Get next mutation batch","readonly",o=>(void 0===e&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(o,e)))}function Nh(i,e){const n=Ut(i);return n.persistence.runTransaction("Allocate target","readwrite",o=>{let u;return n.qr.getTargetData(o,e).next(h=>h?(u=h,L.resolve(u)):n.qr.allocateTargetId(o).next(v=>(u=new ju(e,v,"TargetPurposeListen",o.currentSequenceNumber),n.qr.addTargetData(o,u).next(()=>u))))}).then(o=>{const u=n.ts.get(o.targetId);return(null===u||o.snapshotVersion.compareTo(u.snapshotVersion)>0)&&(n.ts=n.ts.insert(o.targetId,o),n.ns.set(e,o.targetId)),o})}function dc(i,e,n){return gl.apply(this,arguments)}function gl(){return gl=(0,Ve.Z)(function*(i,e,n){const o=Ut(i),u=o.ts.get(e),h=n?"readwrite":"readwrite-primary";try{n||(yield o.persistence.runTransaction("Release target",h,v=>o.persistence.referenceDelegate.removeTarget(v,u)))}catch(v){if(!Vt(v))throw v;yt("LocalStore",`Failed to update sequence numbers for target ${e}: ${v}`)}o.ts=o.ts.remove(e),o.ns.delete(u.target)}),gl.apply(this,arguments)}function Oh(i,e,n){const o=Ut(i);let u=sn.min(),h=Xn();return o.persistence.runTransaction("Execute query","readwrite",v=>function(V,z,ee){const le=Ut(V),Ae=le.ns.get(ee);return void 0!==Ae?L.resolve(le.ts.get(Ae)):le.qr.getTargetData(z,ee)}(o,v,T(e)).next(P=>{if(P)return u=P.lastLimboFreeSnapshotVersion,o.qr.getMatchingKeysForTargetId(v,P.targetId).next(V=>{h=V})}).next(()=>o.es.getDocumentsMatchingQuery(v,e,n?u:sn.min(),n?h:Xn())).next(P=>(Vl(o,wn(e),P),{documents:P,ls:h})))}function Ph(i,e){const n=Ut(i),o=Ut(n.qr),u=n.ts.get(e);return u?Promise.resolve(u.target):n.persistence.runTransaction("Get target data","readonly",h=>o._t(h,e).next(v=>v?v.target:null))}function $d(i,e){const n=Ut(i),o=n.rs.get(e)||sn.min();return n.persistence.runTransaction("Get new document changes","readonly",u=>n.ss.getAllFromCollectionGroup(u,e,Yu(o,-1),Number.MAX_SAFE_INTEGER)).then(u=>(Vl(n,e,u),u))}function Vl(i,e,n){let o=i.rs.get(e)||sn.min();n.forEach((u,h)=>{h.readTime.compareTo(o)>0&&(o=h.readTime)}),i.rs.set(e,o)}function zd(){return zd=(0,Ve.Z)(function*(i,e,n,o){const u=Ut(i);let h=Xn(),v=qs();for(const z of n){const ee=e.hs(z.metadata.name);z.document&&(h=h.add(ee));const le=e.Ps(z);le.setReadTime(e.Is(z.metadata.readTime)),v=v.insert(ee,le)}const P=u.ss.newChangeBuffer({trackRemovals:!0}),V=yield Nh(u,(ee=o,T(il(Jn.fromString(`__bundle__/docs/${ee}`)))));var ee;return u.persistence.runTransaction("Apply bundle documents","readwrite",z=>dp(z,P,v).next(ee=>(P.apply(z),ee)).next(ee=>u.qr.removeMatchingKeysForTargetId(z,V.targetId).next(()=>u.qr.addMatchingKeys(z,h,V.targetId)).next(()=>u.localDocuments.getLocalViewOfDocuments(z,ee.us,ee.cs)).next(()=>ee.us)))}),zd.apply(this,arguments)}function Wd(i,e){return wf.apply(this,arguments)}function wf(){return wf=(0,Ve.Z)(function*(i,e,n=Xn()){const o=yield Nh(i,T(od(e.bundledQuery))),u=Ut(i);return u.persistence.runTransaction("Save named query","readwrite",h=>{const v=Hi(e.readTime);if(o.snapshotVersion.compareTo(v)>=0)return u.Kr.saveNamedQuery(h,e);const P=o.withResumeToken(vs.EMPTY_BYTE_STRING,v);return u.ts=u.ts.insert(P.targetId,P),u.qr.updateTargetData(h,P).next(()=>u.qr.removeMatchingKeysForTargetId(h,o.targetId)).next(()=>u.qr.addMatchingKeys(h,n,o.targetId)).next(()=>u.Kr.saveNamedQuery(h,e))})}),wf.apply(this,arguments)}function Mh(i,e){return`firestore_clients_${i}_${e}`}function sg(i,e,n){let o=`firestore_mutations_${i}_${n}`;return e.isAuthenticated()&&(o+=`_${e.uid}`),o}function hp(i,e){return`firestore_targets_${i}_${e}`}class xh{constructor(e,n,o,u){this.user=e,this.batchId=n,this.state=o,this.error=u}static Ts(e,n,o){const u=JSON.parse(o);let h,v="object"==typeof u&&-1!==["pending","acknowledged","rejected"].indexOf(u.state)&&(void 0===u.error||"object"==typeof u.error);return v&&u.error&&(v="string"==typeof u.error.message&&"string"==typeof u.error.code,v&&(h=new vt(u.error.code,u.error.message))),v?new xh(e,n,u.state,h):(Ti("SharedClientState",`Failed to parse mutation state for ID '${n}': ${o}`),null)}Es(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class og{constructor(e,n,o){this.targetId=e,this.state=n,this.error=o}static Ts(e,n){const o=JSON.parse(n);let u,h="object"==typeof o&&-1!==["not-current","current","rejected"].indexOf(o.state)&&(void 0===o.error||"object"==typeof o.error);return h&&o.error&&(h="string"==typeof o.error.message&&"string"==typeof o.error.code,h&&(u=new vt(o.error.code,o.error.message))),h?new og(e,o.state,u):(Ti("SharedClientState",`Failed to parse target state for ID '${e}': ${n}`),null)}Es(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Df{constructor(e,n){this.clientId=e,this.activeTargetIds=n}static Ts(e,n){const o=JSON.parse(n);let u="object"==typeof o&&o.activeTargetIds instanceof Array,h=Pc();for(let v=0;u&&v<o.activeTargetIds.length;++v)u=Ed(o.activeTargetIds[v]),h=h.add(o.activeTargetIds[v]);return u?new Df(e,h):(Ti("SharedClientState",`Failed to parse client data for instance '${e}': ${n}`),null)}}class kh{constructor(e,n){this.clientId=e,this.onlineState=n}static Ts(e){const n=JSON.parse(e);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new kh(n.clientId,n.onlineState):(Ti("SharedClientState",`Failed to parse online state: ${e}`),null)}}class Mm{constructor(){this.activeTargetIds=Pc()}ds(e){this.activeTargetIds=this.activeTargetIds.add(e)}As(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Es(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class ag{constructor(e,n,o,u,h){this.window=e,this.si=n,this.persistenceKey=o,this.Rs=u,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Vs=this.fs.bind(this),this.gs=new ni(Hn),this.started=!1,this.ps=[];const v=o.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=h,this.ys=Mh(this.persistenceKey,this.Rs),this.ws=`firestore_sequence_number_${this.persistenceKey}`,this.gs=this.gs.insert(this.Rs,new Mm),this.Ss=new RegExp(`^firestore_clients_${v}_([^_]*)$`),this.bs=new RegExp(`^firestore_mutations_${v}_(\\d+)(?:_(.*))?$`),this.Ds=new RegExp(`^firestore_targets_${v}_(\\d+)$`),this.Cs=`firestore_online_state_${this.persistenceKey}`,this.vs=function(V){return`firestore_bundle_loaded_v2_${V}`}(this.persistenceKey),this.window.addEventListener("storage",this.Vs)}static D(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,Ve.Z)(function*(){const n=yield e.syncEngine.Bi();for(const u of n){if(u===e.Rs)continue;const h=e.getItem(Mh(e.persistenceKey,u));if(h){const v=Df.Ts(u,h);v&&(e.gs=e.gs.insert(v.clientId,v))}}e.Fs();const o=e.storage.getItem(e.Cs);if(o){const u=e.Ms(o);u&&e.xs(u)}for(const u of e.ps)e.fs(u);e.ps=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.ws,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Os(this.gs)}isActiveQueryTarget(e){let n=!1;return this.gs.forEach((o,u)=>{u.activeTargetIds.has(e)&&(n=!0)}),n}addPendingMutation(e){this.Ns(e,"pending")}updateMutationState(e,n,o){this.Ns(e,n,o),this.Bs(e)}addLocalQueryTarget(e){let n="not-current";if(this.isActiveQueryTarget(e)){const o=this.storage.getItem(hp(this.persistenceKey,e));if(o){const u=og.Ts(e,o);u&&(n=u.state)}}return this.Ls.ds(e),this.Fs(),n}removeLocalQueryTarget(e){this.Ls.As(e),this.Fs()}isLocalQueryTarget(e){return this.Ls.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(hp(this.persistenceKey,e))}updateQueryState(e,n,o){this.ks(e,n,o)}handleUserChange(e,n,o){n.forEach(u=>{this.Bs(u)}),this.currentUser=e,o.forEach(u=>{this.addPendingMutation(u)})}setOnlineState(e){this.qs(e)}notifyBundleLoaded(e){this.Qs(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.Vs),this.removeItem(this.ys),this.started=!1)}getItem(e){const n=this.storage.getItem(e);return yt("SharedClientState","READ",e,n),n}setItem(e,n){yt("SharedClientState","SET",e,n),this.storage.setItem(e,n)}removeItem(e){yt("SharedClientState","REMOVE",e),this.storage.removeItem(e)}fs(e){var n=this;const o=e;if(o.storageArea===this.storage){if(yt("SharedClientState","EVENT",o.key,o.newValue),o.key===this.ys)return void Ti("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.si.enqueueRetryable((0,Ve.Z)(function*(){if(n.started){if(null!==o.key)if(n.Ss.test(o.key)){if(null==o.newValue){const u=n.Ks(o.key);return n.$s(u,null)}{const u=n.Us(o.key,o.newValue);if(u)return n.$s(u.clientId,u)}}else if(n.bs.test(o.key)){if(null!==o.newValue){const u=n.Ws(o.key,o.newValue);if(u)return n.Gs(u)}}else if(n.Ds.test(o.key)){if(null!==o.newValue){const u=n.zs(o.key,o.newValue);if(u)return n.js(u)}}else if(o.key===n.Cs){if(null!==o.newValue){const u=n.Ms(o.newValue);if(u)return n.xs(u)}}else if(o.key===n.ws){const u=function(v){let P=as._e;if(null!=v)try{const V=JSON.parse(v);mn("number"==typeof V),P=V}catch(V){Ti("SharedClientState","Failed to read sequence number from WebStorage",V)}return P}(o.newValue);u!==as._e&&n.sequenceNumberHandler(u)}else if(o.key===n.vs){const u=n.Hs(o.newValue);yield Promise.all(u.map(h=>n.syncEngine.Js(h)))}}else n.ps.push(o)}))}}get Ls(){return this.gs.get(this.Rs)}Fs(){this.setItem(this.ys,this.Ls.Es())}Ns(e,n,o){const u=new xh(this.currentUser,e,n,o),h=sg(this.persistenceKey,this.currentUser,e);this.setItem(h,u.Es())}Bs(e){const n=sg(this.persistenceKey,this.currentUser,e);this.removeItem(n)}qs(e){this.storage.setItem(this.Cs,JSON.stringify({clientId:this.Rs,onlineState:e}))}ks(e,n,o){const u=hp(this.persistenceKey,e),h=new og(e,n,o);this.setItem(u,h.Es())}Qs(e){const n=JSON.stringify(Array.from(e));this.setItem(this.vs,n)}Ks(e){const n=this.Ss.exec(e);return n?n[1]:null}Us(e,n){const o=this.Ks(e);return Df.Ts(o,n)}Ws(e,n){const o=this.bs.exec(e),u=Number(o[1]);return xh.Ts(new Lr(void 0!==o[2]?o[2]:null),u,n)}zs(e,n){const o=this.Ds.exec(e),u=Number(o[1]);return og.Ts(u,n)}Ms(e){return kh.Ts(e)}Hs(e){return JSON.parse(e)}Gs(e){var n=this;return(0,Ve.Z)(function*(){if(e.user.uid===n.currentUser.uid)return n.syncEngine.Ys(e.batchId,e.state,e.error);yt("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}js(e){return this.syncEngine.Zs(e.targetId,e.state,e.error)}$s(e,n){const o=n?this.gs.insert(e,n):this.gs.remove(e),u=this.Os(this.gs),h=this.Os(o),v=[],P=[];return h.forEach(V=>{u.has(V)||v.push(V)}),u.forEach(V=>{h.has(V)||P.push(V)}),this.syncEngine.Xs(v,P).then(()=>{this.gs=o})}xs(e){this.gs.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Os(e){let n=Pc();return e.forEach((o,u)=>{n=n.unionWith(u.activeTargetIds)}),n}}class fv{constructor(){this.eo=new Mm,this.no={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,o){}addLocalQueryTarget(e){return this.eo.ds(e),this.no[e]||"not-current"}updateQueryState(e,n,o){this.no[e]=n}removeLocalQueryTarget(e){this.eo.As(e)}isLocalQueryTarget(e){return this.eo.activeTargetIds.has(e)}clearQueryState(e){delete this.no[e]}getAllActiveQueryTargets(){return this.eo.activeTargetIds}isActiveQueryTarget(e){return this.eo.activeTargetIds.has(e)}start(){return this.eo=new Mm,Promise.resolve()}handleUserChange(e,n,o){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class Xy{ro(e){}shutdown(){}}class ug{constructor(){this.io=()=>this.so(),this.oo=()=>this._o(),this.ao=[],this.uo()}ro(e){this.ao.push(e)}shutdown(){window.removeEventListener("online",this.io),window.removeEventListener("offline",this.oo)}uo(){window.addEventListener("online",this.io),window.addEventListener("offline",this.oo)}so(){yt("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ao)e(0)}_o(){yt("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ao)e(1)}static D(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let fp=null;function xm(){return null===fp?fp=268435456+Math.round(2147483648*Math.random()):fp++,"0x"+fp.toString(16)}const e0={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class zI{constructor(e){this.co=e.co,this.lo=e.lo}ho(e){this.Po=e}Io(e){this.To=e}onMessage(e){this.Eo=e}close(){this.lo()}send(e){this.co(e)}Ao(){this.Po()}Ro(e){this.To(e)}Vo(e){this.Eo(e)}}const Ya="WebChannelConnection";class cg extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const o=n.ssl?"https":"http",u=encodeURIComponent(this.databaseId.projectId),h=encodeURIComponent(this.databaseId.database);this.mo=o+"://"+n.host,this.fo=`projects/${u}/databases/${h}`,this.po="(default)"===this.databaseId.database?`project_id=${u}`:`project_id=${u}&database_id=${h}`}get yo(){return!1}wo(n,o,u,h,v){const P=xm(),V=this.So(n,o);yt("RestConnection",`Sending RPC '${n}' ${P}:`,V,u);const z={"google-cloud-resource-prefix":this.fo,"x-goog-request-params":this.po};return this.bo(z,h,v),this.Do(n,V,z,u).then(ee=>(yt("RestConnection",`Received RPC '${n}' ${P}: `,ee),ee),ee=>{throw vo("RestConnection",`RPC '${n}' ${P} failed with error: `,ee,"url: ",V,"request:",u),ee})}Co(n,o,u,h,v,P){return this.wo(n,o,u,h,v)}bo(n,o,u){n["X-Goog-Api-Client"]="gl-js/ fire/"+ru,n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),o&&o.headers.forEach((h,v)=>n[v]=h),u&&u.headers.forEach((h,v)=>n[v]=h)}So(n,o){return`${this.mo}/v1/${o}:${e0[n]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Do(e,n,o,u){const h=xm();return new Promise((v,P)=>{const V=new ms;V.setWithCredentials(!0),V.listenOnce(nu.COMPLETE,()=>{try{switch(V.getLastErrorCode()){case Ri.NO_ERROR:const ee=V.getResponseJson();yt(Ya,`XHR for RPC '${e}' ${h} received:`,JSON.stringify(ee)),v(ee);break;case Ri.TIMEOUT:yt(Ya,`RPC '${e}' ${h} timed out`),P(new vt(tt.DEADLINE_EXCEEDED,"Request time out"));break;case Ri.HTTP_ERROR:const le=V.getStatus();if(yt(Ya,`RPC '${e}' ${h} failed with status:`,le,"response text:",V.getResponseText()),le>0){let Ae=V.getResponseJson();Array.isArray(Ae)&&(Ae=Ae[0]);const et=Ae?.error;if(et&&et.status&&et.message){const xt=function($t){const Fn=$t.toLowerCase().replace(/_/g,"-");return Object.values(tt).indexOf(Fn)>=0?Fn:tt.UNKNOWN}(et.status);P(new vt(xt,et.message))}else P(new vt(tt.UNKNOWN,"Server responded with status "+V.getStatus()))}else P(new vt(tt.UNAVAILABLE,"Connection failed."));break;default:tn()}}finally{yt(Ya,`RPC '${e}' ${h} completed.`)}});const z=JSON.stringify(u);yt(Ya,`RPC '${e}' ${h} sending request:`,u),V.send(n,"POST",z,o,15)})}vo(e,n,o){const u=xm(),h=[this.mo,"/","google.firestore.v1.Firestore","/",e,"/channel"],v=Xi(),P=ya(),V={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},z=this.longPollingOptions.timeoutSeconds;void 0!==z&&(V.longPollingTimeout=Math.round(1e3*z)),this.useFetchStreams&&(V.useFetchStreams=!0),this.bo(V.initMessageHeaders,n,o),V.encodeInitMessageHeaders=!0;const ee=h.join("");yt(Ya,`Creating RPC '${e}' stream ${u}: ${ee}`,V);const le=v.createWebChannel(ee,V);let Ae=!1,et=!1;const xt=new zI({co:$t=>{et?yt(Ya,`Not sending because RPC '${e}' stream ${u} is closed:`,$t):(Ae||(yt(Ya,`Opening RPC '${e}' stream ${u} transport.`),le.open(),Ae=!0),yt(Ya,`RPC '${e}' stream ${u} sending:`,$t),le.send($t))},lo:()=>le.close()}),Ht=($t,Fn,Qn)=>{$t.listen(Fn,Mn=>{try{Qn(Mn)}catch(Nr){setTimeout(()=>{throw Nr},0)}})};return Ht(le,Ku.EventType.OPEN,()=>{et||yt(Ya,`RPC '${e}' stream ${u} transport opened.`)}),Ht(le,Ku.EventType.CLOSE,()=>{et||(et=!0,yt(Ya,`RPC '${e}' stream ${u} transport closed`),xt.Ro())}),Ht(le,Ku.EventType.ERROR,$t=>{et||(et=!0,vo(Ya,`RPC '${e}' stream ${u} transport errored:`,$t),xt.Ro(new vt(tt.UNAVAILABLE,"The operation could not be completed")))}),Ht(le,Ku.EventType.MESSAGE,$t=>{var Fn;if(!et){const Qn=$t.data[0];mn(!!Qn);const Nr=Qn.error||(null===(Fn=Qn[0])||void 0===Fn?void 0:Fn.error);if(Nr){yt(Ya,`RPC '${e}' stream ${u} received error:`,Nr);const oi=Nr.status;let fi=function(Ly){const J_=Us[Ly];if(void 0!==J_)return nd(J_)}(oi),wo=Nr.message;void 0===fi&&(fi=tt.INTERNAL,wo="Unknown error status: "+oi+" with message "+Nr.message),et=!0,xt.Ro(new vt(fi,wo)),le.close()}else yt(Ya,`RPC '${e}' stream ${u} received:`,Qn),xt.Vo(Qn)}}),Ht(P,md.STAT_EVENT,$t=>{$t.stat===$r.PROXY?yt(Ya,`RPC '${e}' stream ${u} detected buffering proxy`):$t.stat===$r.NOPROXY&&yt(Ya,`RPC '${e}' stream ${u} detected no buffering proxy`)}),setTimeout(()=>{xt.Ao()},0),xt}}function lg(){return typeof window<"u"?window:null}function dg(){return typeof document<"u"?document:null}function Cf(i){return new kc(i,!0)}class pp{constructor(e,n,o=1e3,u=1.5,h=6e4){this.si=e,this.timerId=n,this.Fo=o,this.Mo=u,this.xo=h,this.Oo=0,this.No=null,this.Bo=Date.now(),this.reset()}reset(){this.Oo=0}Lo(){this.Oo=this.xo}ko(e){this.cancel();const n=Math.floor(this.Oo+this.qo()),o=Math.max(0,Date.now()-this.Bo),u=Math.max(0,n-o);u>0&&yt("ExponentialBackoff",`Backing off for ${u} ms (base delay: ${this.Oo} ms, delay with jitter: ${n} ms, last attempt: ${o} ms ago)`),this.No=this.si.enqueueAfterDelay(this.timerId,u,()=>(this.Bo=Date.now(),e())),this.Oo*=this.Mo,this.Oo<this.Fo&&(this.Oo=this.Fo),this.Oo>this.xo&&(this.Oo=this.xo)}Qo(){null!==this.No&&(this.No.skipDelay(),this.No=null)}cancel(){null!==this.No&&(this.No.cancel(),this.No=null)}qo(){return(Math.random()-.5)*this.Oo}}class gp{constructor(e,n,o,u,h,v,P,V){this.si=e,this.Ko=o,this.$o=u,this.connection=h,this.authCredentialsProvider=v,this.appCheckCredentialsProvider=P,this.listener=V,this.state=0,this.Uo=0,this.Wo=null,this.Go=null,this.stream=null,this.zo=new pp(e,n)}jo(){return 1===this.state||5===this.state||this.Ho()}Ho(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Jo()}stop(){var e=this;return(0,Ve.Z)(function*(){e.jo()&&(yield e.close(0))})()}Yo(){this.state=0,this.zo.reset()}Zo(){this.Ho()&&null===this.Wo&&(this.Wo=this.si.enqueueAfterDelay(this.Ko,6e4,()=>this.Xo()))}e_(e){this.t_(),this.stream.send(e)}Xo(){var e=this;return(0,Ve.Z)(function*(){if(e.Ho())return e.close(0)})()}t_(){this.Wo&&(this.Wo.cancel(),this.Wo=null)}n_(){this.Go&&(this.Go.cancel(),this.Go=null)}close(e,n){var o=this;return(0,Ve.Z)(function*(){o.t_(),o.n_(),o.zo.cancel(),o.Uo++,4!==e?o.zo.reset():n&&n.code===tt.RESOURCE_EXHAUSTED?(Ti(n.toString()),Ti("Using maximum backoff delay to prevent overloading the backend."),o.zo.Lo()):n&&n.code===tt.UNAUTHENTICATED&&3!==o.state&&(o.authCredentialsProvider.invalidateToken(),o.appCheckCredentialsProvider.invalidateToken()),null!==o.stream&&(o.r_(),o.stream.close(),o.stream=null),o.state=e,yield o.listener.Io(n)})()}r_(){}auth(){this.state=1;const e=this.i_(this.Uo),n=this.Uo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([o,u])=>{this.Uo===n&&this.s_(o,u)},o=>{e(()=>{const u=new vt(tt.UNKNOWN,"Fetching auth token failed: "+o.message);return this.o_(u)})})}s_(e,n){const o=this.i_(this.Uo);this.stream=this.__(e,n),this.stream.ho(()=>{o(()=>(this.state=2,this.Go=this.si.enqueueAfterDelay(this.$o,1e4,()=>(this.Ho()&&(this.state=3),Promise.resolve())),this.listener.ho()))}),this.stream.Io(u=>{o(()=>this.o_(u))}),this.stream.onMessage(u=>{o(()=>this.onMessage(u))})}Jo(){var e=this;this.state=5,this.zo.ko((0,Ve.Z)(function*(){e.state=0,e.start()}))}o_(e){return yt("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}i_(e){return n=>{this.si.enqueueAndForget(()=>this.Uo===e?n():(yt("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class t0 extends gp{constructor(e,n,o,u,h,v){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,o,u,v),this.serializer=h}__(e,n){return this.connection.vo("Listen",e,n)}onMessage(e){this.zo.reset();const n=function Zp(i,e){let n;if("targetChange"in e){const o="NO_CHANGE"===(z=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===z?1:"REMOVE"===z?2:"CURRENT"===z?3:"RESET"===z?4:tn(),u=e.targetChange.targetIds||[],h=function(z,ee){return z.useProto3Json?(mn(void 0===ee||"string"==typeof ee),vs.fromBase64String(ee||"")):(mn(void 0===ee||ee instanceof Uint8Array),vs.fromUint8Array(ee||new Uint8Array))}(i,e.targetChange.resumeToken),v=e.targetChange.cause,P=v&&function(z){const ee=void 0===z.code?tt.UNKNOWN:nd(z.code);return new vt(ee,z.message||"")}(v);n=new Ge(o,u,h,P||null)}else if("documentChange"in e){const o=e.documentChange,u=pu(i,o.document.name),h=Hi(o.document.updateTime),v=o.document.createTime?Hi(o.document.createTime):sn.min(),P=new Ki({mapValue:{fields:o.document.fields}}),V=qn.newFoundDocument(u,h,v,P);n=new X(o.targetIds||[],o.removedTargetIds||[],V.key,V)}else if("documentDelete"in e){const o=e.documentDelete,u=pu(i,o.document),h=o.readTime?Hi(o.readTime):sn.min(),v=qn.newNoDocument(u,h);n=new X([],o.removedTargetIds||[],v.key,v)}else if("documentRemove"in e){const o=e.documentRemove,u=pu(i,o.document);n=new X([],o.removedTargetIds||[],u,null)}else{if(!("filter"in e))return tn();{const o=e.filter,{count:u=0,unchangedNames:h}=o,v=new ac(u,h);n=new Ee(o.targetId,v)}}var z;return n}(this.serializer,e),o=function(h){if(!("targetChange"in h))return sn.min();const v=h.targetChange;return v.targetIds&&v.targetIds.length?sn.min():v.readTime?Hi(v.readTime):sn.min()}(e);return this.listener.a_(n,o)}u_(e){const n={};n.database=ll(this.serializer),n.addTarget=function(h,v){let P;const V=v.target;if(P=Lu(V)?{documents:ep(h,V)}:{query:lf(h,V)},P.targetId=v.targetId,v.resumeToken.approximateByteSize()>0){P.resumeToken=_h(h,v.resumeToken);const z=cl(h,v.expectedCount);null!==z&&(P.expectedCount=z)}else if(v.snapshotVersion.compareTo(sn.min())>0){P.readTime=uc(h,v.snapshotVersion.toTimestamp());const z=cl(h,v.expectedCount);null!==z&&(P.expectedCount=z)}return P}(this.serializer,e);const o=function _m(i,e){const n=function(u){switch(u){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return tn()}}(e.purpose);return null==n?null:{"goog-listen-tags":n}}(0,e);o&&(n.labels=o),this.e_(n)}c_(e){const n={};n.database=ll(this.serializer),n.removeTarget=e,this.e_(n)}}class pv extends gp{constructor(e,n,o,u,h,v){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,o,u,v),this.serializer=h,this.l_=!1}get h_(){return this.l_}start(){this.l_=!1,this.lastStreamToken=void 0,super.start()}r_(){this.l_&&this.P_([])}__(e,n){return this.connection.vo("Write",e,n)}onMessage(e){if(mn(!!e.streamToken),this.lastStreamToken=e.streamToken,this.l_){this.zo.reset();const n=function Ih(i,e){return i&&i.length>0?(mn(void 0!==e),i.map(n=>function(u,h){let v=Hi(u.updateTime?u.updateTime:h);return v.isEqual(sn.min())&&(v=Hi(h)),new la(v,u.transformResults||[])}(n,e))):[]}(e.writeResults,e.commitTime),o=Hi(e.commitTime);return this.listener.I_(o,n)}return mn(!e.writeResults||0===e.writeResults.length),this.l_=!0,this.listener.T_()}E_(){const e={};e.database=ll(this.serializer),this.e_(e)}P_(e){const n={streamToken:this.lastStreamToken,writes:e.map(o=>yh(this.serializer,o))};this.e_(n)}}class n0 extends class{}{constructor(e,n,o,u){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=o,this.serializer=u,this.d_=!1}A_(){if(this.d_)throw new vt(tt.FAILED_PRECONDITION,"The client has already been terminated.")}wo(e,n,o){return this.A_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([u,h])=>this.connection.wo(e,n,o,u,h)).catch(u=>{throw"FirebaseError"===u.name?(u.code===tt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new vt(tt.UNKNOWN,u.toString())})}Co(e,n,o,u){return this.A_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([h,v])=>this.connection.Co(e,n,o,h,v,u)).catch(h=>{throw"FirebaseError"===h.name?(h.code===tt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),h):new vt(tt.UNKNOWN,h.toString())})}terminate(){this.d_=!0}}class r0{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.V_=0,this.m_=null,this.f_=!0}g_(){0===this.V_&&(this.p_("Unknown"),this.m_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.m_=null,this.y_("Backend didn't respond within 10 seconds."),this.p_("Offline"),Promise.resolve())))}w_(e){"Online"===this.state?this.p_("Unknown"):(this.V_++,this.V_>=1&&(this.S_(),this.y_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.p_("Offline")))}set(e){this.S_(),this.V_=0,"Online"===e&&(this.f_=!1),this.p_(e)}p_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}y_(e){const n=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.f_?(Ti(n),this.f_=!1):yt("OnlineStateTracker",n)}S_(){null!==this.m_&&(this.m_.cancel(),this.m_=null)}}class hg{constructor(e,n,o,u,h){var v=this;this.localStore=e,this.datastore=n,this.asyncQueue=o,this.remoteSyncer={},this.b_=[],this.D_=new Map,this.C_=new Set,this.v_=[],this.F_=h,this.F_.ro(P=>{o.enqueueAndForget((0,Ve.Z)(function*(){var V;Ul(v)&&(yt("RemoteStore","Restarting streams for network reachability change."),yield(V=(0,Ve.Z)(function*(ee){const le=Ut(ee);le.C_.add(4),yield Bl(le),le.M_.set("Unknown"),le.C_.delete(4),yield mp(le)}),function z(ee){return V.apply(this,arguments)})(v))}))}),this.M_=new r0(o,u)}}function mp(i){return qd.apply(this,arguments)}function qd(){return qd=(0,Ve.Z)(function*(i){if(Ul(i))for(const e of i.v_)yield e(!0)}),qd.apply(this,arguments)}function Bl(i){return km.apply(this,arguments)}function km(){return km=(0,Ve.Z)(function*(i){for(const e of i.v_)yield e(!1)}),km.apply(this,arguments)}function _p(i,e){const n=Ut(i);n.D_.has(e.targetId)||(n.D_.set(e.targetId,e),pg(n)?fg(n):Af(n).Ho()&&Fm(n,e))}function vp(i,e){const n=Ut(i),o=Af(n);n.D_.delete(e),o.Ho()&&_v(n,e),0===n.D_.size&&(o.Ho()?o.Zo():Ul(n)&&n.M_.set("Unknown"))}function Fm(i,e){if(i.x_.Oe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(sn.min())>0){const n=i.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Af(i).u_(e)}function _v(i,e){i.x_.Oe(e),Af(i).c_(e)}function fg(i){i.x_=new en({getRemoteKeysForTarget:e=>i.remoteSyncer.getRemoteKeysForTarget(e),_t:e=>i.D_.get(e)||null,nt:()=>i.datastore.serializer.databaseId}),Af(i).start(),i.M_.g_()}function pg(i){return Ul(i)&&!Af(i).jo()&&i.D_.size>0}function Ul(i){return 0===Ut(i).C_.size}function s0(i){i.x_=void 0}function gg(i){return mg.apply(this,arguments)}function mg(){return mg=(0,Ve.Z)(function*(i){i.D_.forEach((e,n)=>{Fm(i,e)})}),mg.apply(this,arguments)}function o0(i,e){return Lm.apply(this,arguments)}function Lm(){return Lm=(0,Ve.Z)(function*(i,e){s0(i),pg(i)?(i.M_.w_(e),fg(i)):i.M_.set("Unknown")}),Lm.apply(this,arguments)}function vv(i,e,n){return Vm.apply(this,arguments)}function Vm(){return Vm=(0,Ve.Z)(function*(i,e,n){if(i.M_.set("Online"),e instanceof Ge&&2===e.state&&e.cause)try{yield(o=(0,Ve.Z)(function*(h,v){const P=v.cause;for(const V of v.targetIds)h.D_.has(V)&&(yield h.remoteSyncer.rejectListen(V,P),h.D_.delete(V),h.x_.removeTarget(V))}),function u(h,v){return o.apply(this,arguments)})(i,e)}catch(o){yt("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),o),yield yp(i,o)}else if(e instanceof X?i.x_.$e(e):e instanceof Ee?i.x_.Je(e):i.x_.Ge(e),!n.isEqual(sn.min()))try{const o=yield Nm(i.localStore);n.compareTo(o)>=0&&(yield function(h,v){const P=h.x_.it(v);return P.targetChanges.forEach((V,z)=>{if(V.resumeToken.approximateByteSize()>0){const ee=h.D_.get(z);ee&&h.D_.set(z,ee.withResumeToken(V.resumeToken,v))}}),P.targetMismatches.forEach((V,z)=>{const ee=h.D_.get(V);if(!ee)return;h.D_.set(V,ee.withResumeToken(vs.EMPTY_BYTE_STRING,ee.snapshotVersion)),_v(h,V);const le=new ju(ee.target,V,z,ee.sequenceNumber);Fm(h,le)}),h.remoteSyncer.applyRemoteEvent(P)}(i,n))}catch(o){yt("RemoteStore","Failed to raise snapshot:",o),yield yp(i,o)}var o}),Vm.apply(this,arguments)}function yp(i,e,n){return Bm.apply(this,arguments)}function Bm(){return Bm=(0,Ve.Z)(function*(i,e,n){if(!Vt(e))throw e;i.C_.add(1),yield Bl(i),i.M_.set("Offline"),n||(n=()=>Nm(i.localStore)),i.asyncQueue.enqueueRetryable((0,Ve.Z)(function*(){yt("RemoteStore","Retrying IndexedDB access"),yield n(),i.C_.delete(1),yield mp(i)}))}),Bm.apply(this,arguments)}function yv(i,e){return e().catch(n=>yp(i,n,e))}function Ip(i){return _g.apply(this,arguments)}function _g(){return _g=(0,Ve.Z)(function*(i){const e=Ut(i),n=Gl(e);let o=e.b_.length>0?e.b_[e.b_.length-1].batchId:-1;for(;Iv(e);)try{const u=yield Pm(e.localStore,o);if(null===u){0===e.b_.length&&n.Zo();break}o=u.batchId,ml(e,u)}catch(u){yield yp(e,u)}Um(e)&&a0(e)}),_g.apply(this,arguments)}function Iv(i){return Ul(i)&&i.b_.length<10}function ml(i,e){i.b_.push(e);const n=Gl(i);n.Ho()&&n.h_&&n.P_(e.mutations)}function Um(i){return Ul(i)&&!Gl(i).jo()&&i.b_.length>0}function a0(i){Gl(i).start()}function jm(i){return jl.apply(this,arguments)}function jl(){return jl=(0,Ve.Z)(function*(i){Gl(i).E_()}),jl.apply(this,arguments)}function Ep(i){return Gm.apply(this,arguments)}function Gm(){return Gm=(0,Ve.Z)(function*(i){const e=Gl(i);for(const n of i.b_)e.P_(n.mutations)}),Gm.apply(this,arguments)}function u0(i,e,n){return Hm.apply(this,arguments)}function Hm(){return Hm=(0,Ve.Z)(function*(i,e,n){const o=i.b_.shift(),u=Pl.from(o,e,n);yield yv(i,()=>i.remoteSyncer.applySuccessfulWrite(u)),yield Ip(i)}),Hm.apply(this,arguments)}function $m(i,e){return Uc.apply(this,arguments)}function Uc(){return Uc=(0,Ve.Z)(function*(i,e){var n;e&&Gl(i).h_&&(yield(n=(0,Ve.Z)(function*(u,h){if(Bu(P=h.code)&&P!==tt.ABORTED){const v=u.b_.shift();Gl(u).Yo(),yield yv(u,()=>u.remoteSyncer.rejectFailedWrite(v.batchId,h)),yield Ip(u)}var P}),function o(u,h){return n.apply(this,arguments)})(i,e)),Um(i)&&a0(i)}),Uc.apply(this,arguments)}function zm(i,e){return Wm.apply(this,arguments)}function Wm(){return Wm=(0,Ve.Z)(function*(i,e){const n=Ut(i);n.asyncQueue.verifyOperationInProgress(),yt("RemoteStore","RemoteStore received new credentials");const o=Ul(n);n.C_.add(3),yield Bl(n),o&&n.M_.set("Unknown"),yield n.remoteSyncer.handleCredentialChange(e),n.C_.delete(3),yield mp(n)}),Wm.apply(this,arguments)}function Ev(i,e){return Vo.apply(this,arguments)}function Vo(){return Vo=(0,Ve.Z)(function*(i,e){const n=Ut(i);e?(n.C_.delete(2),yield mp(n)):e||(n.C_.add(2),yield Bl(n),n.M_.set("Unknown"))}),Vo.apply(this,arguments)}function Af(i){return i.O_||(i.O_=function(n,o,u){const h=Ut(n);return h.A_(),new t0(o,h.connection,h.authCredentials,h.appCheckCredentials,h.serializer,u)}(i.datastore,i.asyncQueue,{ho:gg.bind(null,i),Io:o0.bind(null,i),a_:vv.bind(null,i)}),i.v_.push(function(){var e=(0,Ve.Z)(function*(n){n?(i.O_.Yo(),pg(i)?fg(i):i.M_.set("Unknown")):(yield i.O_.stop(),s0(i))});return function(n){return e.apply(this,arguments)}}())),i.O_}function Gl(i){return i.N_||(i.N_=function(n,o,u){const h=Ut(n);return h.A_(),new pv(o,h.connection,h.authCredentials,h.appCheckCredentials,h.serializer,u)}(i.datastore,i.asyncQueue,{ho:jm.bind(null,i),Io:$m.bind(null,i),T_:Ep.bind(null,i),I_:u0.bind(null,i)}),i.v_.push(function(){var e=(0,Ve.Z)(function*(n){n?(i.N_.Yo(),yield Ip(i)):(yield i.N_.stop(),i.b_.length>0&&(yt("RemoteStore",`Stopping write stream with ${i.b_.length} pending writes`),i.b_=[]))});return function(n){return e.apply(this,arguments)}}())),i.N_}class qm{constructor(e,n,o,u,h){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=o,this.op=u,this.removalCallback=h,this.deferred=new Vs,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(v=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,o,u,h){const v=Date.now()+o,P=new qm(e,n,v,u,h);return P.start(o),P}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new vt(tt.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Sf(i,e){if(Ti("AsyncQueue",`${e}: ${i}`),Vt(i))return new vt(tt.UNAVAILABLE,`${e}: ${i}`);throw i}class Kd{constructor(e){this.comparator=e?(n,o)=>e(n,o)||Gt.comparator(n.key,o.key):(n,o)=>Gt.comparator(n.key,o.key),this.keyedMap=Bs(),this.sortedSet=new ni(this.comparator)}static emptySet(e){return new Kd(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,o)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Kd)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),o=e.sortedSet.getIterator();for(;n.hasNext();){const u=n.getNext().key,h=o.getNext().key;if(!u.isEqual(h))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,n){const o=new Kd;return o.comparator=this.comparator,o.keyedMap=e,o.sortedSet=n,o}}class Km{constructor(){this.B_=new ni(Gt.comparator)}track(e){const n=e.doc.key,o=this.B_.get(n);o?0!==e.type&&3===o.type?this.B_=this.B_.insert(n,e):3===e.type&&1!==o.type?this.B_=this.B_.insert(n,{type:o.type,doc:e.doc}):2===e.type&&2===o.type?this.B_=this.B_.insert(n,{type:2,doc:e.doc}):2===e.type&&0===o.type?this.B_=this.B_.insert(n,{type:0,doc:e.doc}):1===e.type&&0===o.type?this.B_=this.B_.remove(n):1===e.type&&2===o.type?this.B_=this.B_.insert(n,{type:1,doc:o.doc}):0===e.type&&1===o.type?this.B_=this.B_.insert(n,{type:2,doc:e.doc}):tn():this.B_=this.B_.insert(n,e)}L_(){const e=[];return this.B_.inorderTraversal((n,o)=>{e.push(o)}),e}}class Fh{constructor(e,n,o,u,h,v,P,V,z){this.query=e,this.docs=n,this.oldDocs=o,this.docChanges=u,this.mutatedKeys=h,this.fromCache=v,this.syncStateChanged=P,this.excludesMetadataChanges=V,this.hasCachedResults=z}static fromInitialDocuments(e,n,o,u,h){const v=[];return n.forEach(P=>{v.push({type:0,doc:P})}),new Fh(e,n,Kd.emptySet(n),v,o,u,!0,!1,h)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Be(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,o=e.docChanges;if(n.length!==o.length)return!1;for(let u=0;u<n.length;u++)if(n[u].type!==o[u].type||!n[u].doc.isEqual(o[u].doc))return!1;return!0}}class c0{constructor(){this.k_=void 0,this.listeners=[]}}class Tv{constructor(){this.queries=new Ws(e=>st(e),Be),this.onlineState="Unknown",this.q_=new Set}}function vg(i,e){return Ym.apply(this,arguments)}function Ym(){return Ym=(0,Ve.Z)(function*(i,e){const n=Ut(i),o=e.query;let u=!1,h=n.queries.get(o);if(h||(u=!0,h=new c0),u)try{h.k_=yield n.onListen(o)}catch(v){const P=Sf(v,`Initialization of query '${bt(e.query)}' failed`);return void e.onError(P)}n.queries.set(o,h),h.listeners.push(e),e.Q_(n.onlineState),h.k_&&e.K_(h.k_)&&_l(n)}),Ym.apply(this,arguments)}function Zm(i,e){return yg.apply(this,arguments)}function yg(){return yg=(0,Ve.Z)(function*(i,e){const n=Ut(i),o=e.query;let u=!1;const h=n.queries.get(o);if(h){const v=h.listeners.indexOf(e);v>=0&&(h.listeners.splice(v,1),u=0===h.listeners.length)}if(u)return n.queries.delete(o),n.onUnlisten(o)}),yg.apply(this,arguments)}function bv(i,e){const n=Ut(i);let o=!1;for(const u of e){const v=n.queries.get(u.query);if(v){for(const P of v.listeners)P.K_(u)&&(o=!0);v.k_=u}}o&&_l(n)}function Rf(i,e,n){const o=Ut(i),u=o.queries.get(e);if(u)for(const h of u.listeners)h.onError(n);o.queries.delete(e)}function _l(i){i.q_.forEach(e=>{e.next()})}class Yd{constructor(e,n,o){this.query=e,this.U_=n,this.W_=!1,this.G_=null,this.onlineState="Unknown",this.options=o||{}}K_(e){if(!this.options.includeMetadataChanges){const o=[];for(const u of e.docChanges)3!==u.type&&o.push(u);e=new Fh(e.query,e.docs,e.oldDocs,o,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.W_?this.z_(e)&&(this.U_.next(e),n=!0):this.j_(e,this.onlineState)&&(this.H_(e),n=!0),this.G_=e,n}onError(e){this.U_.error(e)}Q_(e){this.onlineState=e;let n=!1;return this.G_&&!this.W_&&this.j_(this.G_,e)&&(this.H_(this.G_),n=!0),n}j_(e,n){return!e.fromCache||(!this.options.J_||!("Offline"!==n))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===n)}z_(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.G_&&this.G_.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}H_(e){e=Fh.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.W_=!0,this.U_.next(e)}}class l0{constructor(e,n){this.Y_=e,this.byteLength=n}Z_(){return"metadata"in this.Y_}}class wv{constructor(e){this.serializer=e}hs(e){return pu(this.serializer,e)}Ps(e){return e.metadata.exists?cf(this.serializer,e.document,!1):qn.newNoDocument(this.hs(e.metadata.name),this.Is(e.metadata.readTime))}Is(e){return Hi(e)}}class Dv{constructor(e,n,o){this.X_=e,this.localStore=n,this.serializer=o,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=Qm(e)}ea(e){this.progress.bytesLoaded+=e.byteLength;let n=this.progress.documentsLoaded;if(e.Y_.namedQuery)this.queries.push(e.Y_.namedQuery);else if(e.Y_.documentMetadata){this.documents.push({metadata:e.Y_.documentMetadata}),e.Y_.documentMetadata.exists||++n;const o=Jn.fromString(e.Y_.documentMetadata.name);this.collectionGroups.add(o.get(o.length-2))}else e.Y_.document&&(this.documents[this.documents.length-1].document=e.Y_.document,++n);return n!==this.progress.documentsLoaded?(this.progress.documentsLoaded=n,Object.assign({},this.progress)):null}ta(e){const n=new Map,o=new wv(this.serializer);for(const u of e)if(u.metadata.queries){const h=o.hs(u.metadata.name);for(const v of u.metadata.queries){const P=(n.get(v)||Xn()).add(h);n.set(v,P)}}return n}complete(){var e=this;return(0,Ve.Z)(function*(){const n=yield function bf(i,e,n,o){return zd.apply(this,arguments)}(e.localStore,new wv(e.serializer),e.documents,e.X_.id),o=e.ta(e.documents);for(const u of e.queries)yield Wd(e.localStore,u,o.get(u.name));return e.progress.taskState="Success",{progress:e.progress,na:e.collectionGroups,ra:n}})()}}function Qm(i){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:i.totalDocuments,totalBytes:i.totalBytes}}class Ig{constructor(e){this.key=e}}class Nf{constructor(e){this.key=e}}class Tp{constructor(e,n){this.query=e,this.ia=n,this.sa=null,this.hasCachedResults=!1,this.current=!1,this.oa=Xn(),this.mutatedKeys=Xn(),this._a=Tr(e),this.aa=new Kd(this._a)}get ua(){return this.ia}ca(e,n){const o=n?n.la:new Km,u=n?n.aa:this.aa;let h=n?n.mutatedKeys:this.mutatedKeys,v=u,P=!1;const V="F"===this.query.limitType&&u.size===this.query.limit?u.last():null,z="L"===this.query.limitType&&u.size===this.query.limit?u.first():null;if(e.inorderTraversal((ee,le)=>{const Ae=u.get(ee),et=dn(this.query,le)?le:null,xt=!!Ae&&this.mutatedKeys.has(Ae.key),Ht=!!et&&(et.hasLocalMutations||this.mutatedKeys.has(et.key)&&et.hasCommittedMutations);let $t=!1;Ae&&et?Ae.data.isEqual(et.data)?xt!==Ht&&(o.track({type:3,doc:et}),$t=!0):this.ha(Ae,et)||(o.track({type:2,doc:et}),$t=!0,(V&&this._a(et,V)>0||z&&this._a(et,z)<0)&&(P=!0)):!Ae&&et?(o.track({type:0,doc:et}),$t=!0):Ae&&!et&&(o.track({type:1,doc:Ae}),$t=!0,(V||z)&&(P=!0)),$t&&(et?(v=v.add(et),h=Ht?h.add(ee):h.delete(ee)):(v=v.delete(ee),h=h.delete(ee)))}),null!==this.query.limit)for(;v.size>this.query.limit;){const ee="F"===this.query.limitType?v.last():v.first();v=v.delete(ee.key),h=h.delete(ee.key),o.track({type:1,doc:ee})}return{aa:v,la:o,Zi:P,mutatedKeys:h}}ha(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,o){const u=this.aa;this.aa=e.aa,this.mutatedKeys=e.mutatedKeys;const h=e.la.L_();h.sort((z,ee)=>function(Ae,et){const xt=Ht=>{switch(Ht){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return tn()}};return xt(Ae)-xt(et)}(z.type,ee.type)||this._a(z.doc,ee.doc)),this.Pa(o);const v=n?this.Ia():[],P=0===this.oa.size&&this.current?1:0,V=P!==this.sa;return this.sa=P,0!==h.length||V?{snapshot:new Fh(this.query,e.aa,u,h,e.mutatedKeys,0===P,V,!1,!!o&&o.resumeToken.approximateByteSize()>0),Ta:v}:{Ta:v}}Q_(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({aa:this.aa,la:new Km,mutatedKeys:this.mutatedKeys,Zi:!1},!1)):{Ta:[]}}Ea(e){return!this.ia.has(e)&&!!this.aa.has(e)&&!this.aa.get(e).hasLocalMutations}Pa(e){e&&(e.addedDocuments.forEach(n=>this.ia=this.ia.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.ia=this.ia.delete(n)),this.current=e.current)}Ia(){if(!this.current)return[];const e=this.oa;this.oa=Xn(),this.aa.forEach(o=>{this.Ea(o.key)&&(this.oa=this.oa.add(o.key))});const n=[];return e.forEach(o=>{this.oa.has(o)||n.push(new Nf(o))}),this.oa.forEach(o=>{e.has(o)||n.push(new Ig(o))}),n}da(e){this.ia=e.ls,this.oa=Xn();const n=this.ca(e.documents);return this.applyChanges(n,!0)}Aa(){return Fh.fromInitialDocuments(this.query,this.aa,this.mutatedKeys,0===this.sa,this.hasCachedResults)}}class Cv{constructor(e,n,o){this.query=e,this.targetId=n,this.view=o}}class Av{constructor(e){this.key=e,this.Ra=!1}}class d0{constructor(e,n,o,u,h,v){this.localStore=e,this.remoteStore=n,this.eventManager=o,this.sharedClientState=u,this.currentUser=h,this.maxConcurrentLimboResolutions=v,this.Va={},this.ma=new Ws(P=>st(P),Be),this.fa=new Map,this.ga=new Set,this.pa=new ni(Gt.comparator),this.ya=new Map,this.wa=new Ns,this.Sa={},this.ba=new Map,this.Da=D.Nn(),this.onlineState="Unknown",this.Ca=void 0}get isPrimaryClient(){return!0===this.Ca}}function h0(i,e){return Jm.apply(this,arguments)}function Jm(){return Jm=(0,Ve.Z)(function*(i,e){const n=d_(i);let o,u;const h=n.ma.get(e);if(h)o=h.targetId,n.sharedClientState.addLocalQueryTarget(o),u=h.view.Aa();else{const v=yield Nh(n.localStore,T(e)),P=n.sharedClientState.addLocalQueryTarget(v.targetId);o=v.targetId,u=yield Xm(n,e,o,"current"===P,v.resumeToken),n.isPrimaryClient&&_p(n.remoteStore,v)}return u}),Jm.apply(this,arguments)}function Xm(i,e,n,o,u){return Eg.apply(this,arguments)}function Eg(){return Eg=(0,Ve.Z)(function*(i,e,n,o,u){i.va=(le,Ae,et)=>{return(xt=(0,Ve.Z)(function*($t,Fn,Qn,Mn){let Nr=Fn.view.ca(Qn);Nr.Zi&&(Nr=yield Oh($t.localStore,Fn.query,!1).then(({documents:wo})=>Fn.view.ca(wo,Nr)));const oi=Mn&&Mn.targetChanges.get(Fn.targetId),fi=Fn.view.applyChanges(Nr,$t.isPrimaryClient,oi);return Of($t,Fn.targetId,fi.Ta),fi.snapshot}),function Ht($t,Fn,Qn,Mn){return xt.apply(this,arguments)})(i,le,Ae,et);var xt};const h=yield Oh(i.localStore,e,!0),v=new Tp(e,h.ls),P=v.ca(h.documents),V=G.createSynthesizedTargetChangeForCurrentChange(n,o&&"Offline"!==i.onlineState,u),z=v.applyChanges(P,i.isPrimaryClient,V);Of(i,n,z.Ta);const ee=new Cv(e,n,v);return i.ma.set(e,ee),i.fa.has(n)?i.fa.get(n).push(e):i.fa.set(n,[e]),z.snapshot}),Eg.apply(this,arguments)}function WI(i,e){return e_.apply(this,arguments)}function e_(){return e_=(0,Ve.Z)(function*(i,e){const n=Ut(i),o=n.ma.get(e),u=n.fa.get(o.targetId);if(u.length>1)return n.fa.set(o.targetId,u.filter(h=>!Be(h,e))),void n.ma.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(o.targetId),n.sharedClientState.isActiveQueryTarget(o.targetId)||(yield dc(n.localStore,o.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(o.targetId),vp(n.remoteStore,o.targetId),Lh(n,o.targetId)}).catch(A))):(Lh(n,o.targetId),yield dc(n.localStore,o.targetId,!0))}),e_.apply(this,arguments)}function Sv(){return Sv=(0,Ve.Z)(function*(i,e,n){const o=kv(i);try{const u=yield function(v,P){const V=Ut(v),z=Ar.now(),ee=P.reduce((et,xt)=>et.add(xt.key),Xn());let le,Ae;return V.persistence.runTransaction("Locally write mutations","readwrite",et=>{let xt=qs(),Ht=Xn();return V.ss.getEntries(et,ee).next($t=>{xt=$t,xt.forEach((Fn,Qn)=>{Qn.isValidDocument()||(Ht=Ht.add(Fn))})}).next(()=>V.localDocuments.getOverlayedDocuments(et,xt)).next($t=>{le=$t;const Fn=[];for(const Qn of P){const Mn=da(Qn,le.get(Qn.key).overlayedDocument);null!=Mn&&Fn.push(new fu(Qn.key,Mn,Dd(Mn.value.mapValue),Oi.exists(!0)))}return V.mutationQueue.addMutationBatch(et,z,Fn,P)}).next($t=>{Ae=$t;const Fn=$t.applyToLocalDocumentSet(le,Ht);return V.documentOverlayCache.saveOverlays(et,$t.batchId,Fn)})}).then(()=>({batchId:Ae.batchId,changes:si(le)}))}(o.localStore,e);o.sharedClientState.addPendingMutation(u.batchId),function(v,P,V){let z=v.Sa[v.currentUser.toKey()];z||(z=new ni(Hn)),z=z.insert(P,V),v.Sa[v.currentUser.toKey()]=z}(o,u.batchId,n),yield hc(o,u.changes),yield Ip(o.remoteStore)}catch(u){const h=Sf(u,"Failed to persist write");n.reject(h)}}),Sv.apply(this,arguments)}function t_(i,e){return Tg.apply(this,arguments)}function Tg(){return Tg=(0,Ve.Z)(function*(i,e){const n=Ut(i);try{const o=yield function Om(i,e){const n=Ut(i),o=e.snapshotVersion;let u=n.ts;return n.persistence.runTransaction("Apply remote event","readwrite-primary",h=>{const v=n.ss.newChangeBuffer({trackRemovals:!0});u=n.ts;const P=[];e.targetChanges.forEach((ee,le)=>{const Ae=u.get(le);if(!Ae)return;P.push(n.qr.removeMatchingKeys(h,ee.removedDocuments,le).next(()=>n.qr.addMatchingKeys(h,ee.addedDocuments,le)));let et=Ae.withSequenceNumber(h.currentSequenceNumber);var Ht,$t,Fn;null!==e.targetMismatches.get(le)?et=et.withResumeToken(vs.EMPTY_BYTE_STRING,sn.min()).withLastLimboFreeSnapshotVersion(sn.min()):ee.resumeToken.approximateByteSize()>0&&(et=et.withResumeToken(ee.resumeToken,o)),u=u.insert(le,et),$t=et,Fn=ee,(0===(Ht=Ae).resumeToken.approximateByteSize()||$t.snapshotVersion.toMicroseconds()-Ht.snapshotVersion.toMicroseconds()>=3e8||Fn.addedDocuments.size+Fn.modifiedDocuments.size+Fn.removedDocuments.size>0)&&P.push(n.qr.updateTargetData(h,et))});let V=qs(),z=Xn();if(e.documentUpdates.forEach(ee=>{e.resolvedLimboDocuments.has(ee)&&P.push(n.persistence.referenceDelegate.updateLimboDocument(h,ee))}),P.push(dp(h,v,e.documentUpdates).next(ee=>{V=ee.us,z=ee.cs})),!o.isEqual(sn.min())){const ee=n.qr.getLastRemoteSnapshotVersion(h).next(le=>n.qr.setTargetsMetadata(h,h.currentSequenceNumber,o));P.push(ee)}return L.waitFor(P).next(()=>v.apply(h)).next(()=>n.localDocuments.getLocalViewOfDocuments(h,V,z)).next(()=>V)}).then(h=>(n.ts=u,h))}(n.localStore,e);e.targetChanges.forEach((u,h)=>{const v=n.ya.get(h);v&&(mn(u.addedDocuments.size+u.modifiedDocuments.size+u.removedDocuments.size<=1),u.addedDocuments.size>0?v.Ra=!0:u.modifiedDocuments.size>0?mn(v.Ra):u.removedDocuments.size>0&&(mn(v.Ra),v.Ra=!1))}),yield hc(n,o,e)}catch(o){yield A(o)}}),Tg.apply(this,arguments)}function f0(i,e,n){const o=Ut(i);if(o.isPrimaryClient&&0===n||!o.isPrimaryClient&&1===n){const u=[];o.ma.forEach((h,v)=>{const P=v.view.Q_(e);P.snapshot&&u.push(P.snapshot)}),function(v,P){const V=Ut(v);V.onlineState=P;let z=!1;V.queries.forEach((ee,le)=>{for(const Ae of le.listeners)Ae.Q_(P)&&(z=!0)}),z&&_l(V)}(o.eventManager,e),u.length&&o.Va.a_(u),o.onlineState=e,o.isPrimaryClient&&o.sharedClientState.setOnlineState(e)}}function bg(i,e,n){return wg.apply(this,arguments)}function wg(){return wg=(0,Ve.Z)(function*(i,e,n){const o=Ut(i);o.sharedClientState.updateQueryState(e,"rejected",n);const u=o.ya.get(e),h=u&&u.key;if(h){let v=new ni(Gt.comparator);v=v.insert(h,qn.newNoDocument(h,sn.min()));const P=Xn().add(h),V=new C(sn.min(),new Map,new ni(Hn),v,P);yield t_(o,V),o.pa=o.pa.remove(h),o.ya.delete(e),bp(o)}else yield dc(o.localStore,e,!1).then(()=>Lh(o,e,n)).catch(A)}),wg.apply(this,arguments)}function Rv(i,e){return n_.apply(this,arguments)}function n_(){return n_=(0,Ve.Z)(function*(i,e){const n=Ut(i),o=e.batch.batchId;try{const u=yield function lp(i,e){const n=Ut(i);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",o=>{const u=e.batch.keys(),h=n.ss.newChangeBuffer({trackRemovals:!0});return function(P,V,z,ee){const le=z.batch,Ae=le.keys();let et=L.resolve();return Ae.forEach(xt=>{et=et.next(()=>ee.getEntry(V,xt)).next(Ht=>{const $t=z.docVersions.get(xt);mn(null!==$t),Ht.version.compareTo($t)<0&&(le.applyToRemoteDocument(Ht,z),Ht.isValidDocument()&&(Ht.setReadTime(z.commitVersion),ee.addEntry(Ht)))})}),et.next(()=>P.mutationQueue.removeMutationBatch(V,le))}(n,o,e,h).next(()=>h.apply(o)).next(()=>n.mutationQueue.performConsistencyCheck(o)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(o,u,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(o,function(P){let V=Xn();for(let z=0;z<P.mutationResults.length;++z)P.mutationResults[z].transformResults.length>0&&(V=V.add(P.batch.mutations[z].key));return V}(e))).next(()=>n.localDocuments.getDocuments(o,u))})}(n.localStore,e);Zd(n,o,null),Ag(n,o),n.sharedClientState.updateMutationState(o,"acknowledged"),yield hc(n,u)}catch(u){yield A(u)}}),n_.apply(this,arguments)}function Nv(i,e,n){return Dg.apply(this,arguments)}function Dg(){return Dg=(0,Ve.Z)(function*(i,e,n){const o=Ut(i);try{const u=yield function(v,P){const V=Ut(v);return V.persistence.runTransaction("Reject batch","readwrite-primary",z=>{let ee;return V.mutationQueue.lookupMutationBatch(z,P).next(le=>(mn(null!==le),ee=le.keys(),V.mutationQueue.removeMutationBatch(z,le))).next(()=>V.mutationQueue.performConsistencyCheck(z)).next(()=>V.documentOverlayCache.removeOverlaysForBatchId(z,ee,P)).next(()=>V.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(z,ee)).next(()=>V.localDocuments.getDocuments(z,ee))})}(o.localStore,e);Zd(o,e,n),Ag(o,e),o.sharedClientState.updateMutationState(e,"rejected",n),yield hc(o,u)}catch(u){yield A(u)}}),Dg.apply(this,arguments)}function Cg(){return Cg=(0,Ve.Z)(function*(i,e){const n=Ut(i);Ul(n.remoteStore)||yt("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const o=yield function(v){const P=Ut(v);return P.persistence.runTransaction("Get highest unacknowledged batch id","readonly",V=>P.mutationQueue.getHighestUnacknowledgedBatchId(V))}(n.localStore);if(-1===o)return void e.resolve();const u=n.ba.get(o)||[];u.push(e),n.ba.set(o,u)}catch(o){const u=Sf(o,"Initialization of waitForPendingWrites() operation failed");e.reject(u)}}),Cg.apply(this,arguments)}function Ag(i,e){(i.ba.get(e)||[]).forEach(n=>{n.resolve()}),i.ba.delete(e)}function Zd(i,e,n){const o=Ut(i);let u=o.Sa[o.currentUser.toKey()];if(u){const h=u.get(e);h&&(n?h.reject(n):h.resolve(),u=u.remove(e)),o.Sa[o.currentUser.toKey()]=u}}function Lh(i,e,n=null){i.sharedClientState.removeLocalQueryTarget(e);for(const o of i.fa.get(e))i.ma.delete(o),n&&i.Va.Fa(o,n);i.fa.delete(e),i.isPrimaryClient&&i.wa.Rr(e).forEach(o=>{i.wa.containsKey(o)||Ov(i,o)})}function Ov(i,e){i.ga.delete(e.path.canonicalString());const n=i.pa.get(e);null!==n&&(vp(i.remoteStore,n),i.pa=i.pa.remove(e),i.ya.delete(n),bp(i))}function Of(i,e,n){for(const o of n)o instanceof Ig?(i.wa.addReference(o.key,e),Pf(i,o)):o instanceof Nf?(yt("SyncEngine","Document no longer in limbo: "+o.key),i.wa.removeReference(o.key,e),i.wa.containsKey(o.key)||Ov(i,o.key)):tn()}function Pf(i,e){const n=e.key,o=n.path.canonicalString();i.pa.get(n)||i.ga.has(o)||(yt("SyncEngine","New document in limbo: "+n),i.ga.add(o),bp(i))}function bp(i){for(;i.ga.size>0&&i.pa.size<i.maxConcurrentLimboResolutions;){const e=i.ga.values().next().value;i.ga.delete(e);const n=new Gt(Jn.fromString(e)),o=i.Da.next();i.ya.set(o,new Av(n)),i.pa=i.pa.insert(n,o),_p(i.remoteStore,new ju(T(il(n.path)),o,"TargetPurposeLimboResolution",as._e))}}function hc(i,e,n){return Sg.apply(this,arguments)}function Sg(){return Sg=(0,Ve.Z)(function*(i,e,n){const o=Ut(i),u=[],h=[],v=[];var P;o.ma.isEmpty()||(o.ma.forEach((P,V)=>{v.push(o.va(V,e,n).then(z=>{if((z||n)&&o.isPrimaryClient&&o.sharedClientState.updateQueryState(V.targetId,z?.fromCache?"not-current":"current"),z){u.push(z);const ee=Hd.Qi(V.targetId,z);h.push(ee)}}))}),yield Promise.all(v),o.Va.a_(u),yield(P=(0,Ve.Z)(function*(z,ee){const le=Ut(z);try{yield le.persistence.runTransaction("notifyLocalViewChanges","readwrite",Ae=>L.forEach(ee,et=>L.forEach(et.ki,xt=>le.persistence.referenceDelegate.addReference(Ae,et.targetId,xt)).next(()=>L.forEach(et.qi,xt=>le.persistence.referenceDelegate.removeReference(Ae,et.targetId,xt)))))}catch(Ae){if(!Vt(Ae))throw Ae;yt("LocalStore","Failed to update sequence numbers: "+Ae)}for(const Ae of ee){const et=Ae.targetId;if(!Ae.fromCache){const xt=le.ts.get(et),$t=xt.withLastLimboFreeSnapshotVersion(xt.snapshotVersion);le.ts=le.ts.insert(et,$t)}}}),function V(z,ee){return P.apply(this,arguments)})(o.localStore,h))}),Sg.apply(this,arguments)}function r_(i,e){return wp.apply(this,arguments)}function wp(){return wp=(0,Ve.Z)(function*(i,e){const n=Ut(i);if(!n.currentUser.isEqual(e)){yt("SyncEngine","User change. New user:",e.toKey());const o=yield ig(n.localStore,e);n.currentUser=e,(h=n).ba.forEach(P=>{P.forEach(V=>{V.reject(new vt(tt.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),h.ba.clear(),n.sharedClientState.handleUserChange(e,o.removedBatchIds,o.addedBatchIds),yield hc(n,o._s)}var h}),wp.apply(this,arguments)}function i_(i,e){const n=Ut(i),o=n.ya.get(e);if(o&&o.Ra)return Xn().add(o.key);{let u=Xn();const h=n.fa.get(e);if(!h)return u;for(const v of h){const P=n.ma.get(v);u=u.unionWith(P.view.ua)}return u}}function Pv(i,e){return Dp.apply(this,arguments)}function Dp(){return Dp=(0,Ve.Z)(function*(i,e){const n=Ut(i),o=yield Oh(n.localStore,e.query,!0),u=e.view.da(o);return n.isPrimaryClient&&Of(n,e.targetId,u.Ta),u}),Dp.apply(this,arguments)}function p0(i,e){return s_.apply(this,arguments)}function s_(){return s_=(0,Ve.Z)(function*(i,e){const n=Ut(i);return $d(n.localStore,e).then(o=>hc(n,o))}),s_.apply(this,arguments)}function g0(i,e,n,o){return Rg.apply(this,arguments)}function Rg(){return Rg=(0,Ve.Z)(function*(i,e,n,o){const u=Ut(i),h=yield function(P,V){const z=Ut(P),ee=Ut(z.mutationQueue);return z.persistence.runTransaction("Lookup mutation documents","readonly",le=>ee.Cn(le,V).next(Ae=>Ae?z.localDocuments.getDocuments(le,Ae):L.resolve(null)))}(u.localStore,e);var V;null!==h?("pending"===n?yield Ip(u.remoteStore):"acknowledged"===n||"rejected"===n?(Zd(u,e,o||null),Ag(u,e),V=e,Ut(Ut(u.localStore).mutationQueue).Fn(V)):tn(),yield hc(u,h)):yt("SyncEngine","Cannot apply mutation batch with id: "+e)}),Rg.apply(this,arguments)}function o_(){return o_=(0,Ve.Z)(function*(i,e){const n=Ut(i);if(d_(n),kv(n),!0===e&&!0!==n.Ca){const o=n.sharedClientState.getAllActiveQueryTargets(),u=yield Mv(n,o.toArray());n.Ca=!0,yield Ev(n.remoteStore,!0);for(const h of u)_p(n.remoteStore,h)}else if(!1===e&&!1!==n.Ca){const o=[];let u=Promise.resolve();n.fa.forEach((h,v)=>{n.sharedClientState.isLocalQueryTarget(v)?o.push(v):u=u.then(()=>(Lh(n,v),dc(n.localStore,v,!0))),vp(n.remoteStore,v)}),yield u,yield Mv(n,o),function(v){const P=Ut(v);P.ya.forEach((V,z)=>{vp(P.remoteStore,z)}),P.wa.Vr(),P.ya=new Map,P.pa=new ni(Gt.comparator)}(n),n.Ca=!1,yield Ev(n.remoteStore,!1)}}),o_.apply(this,arguments)}function Mv(i,e,n){return a_.apply(this,arguments)}function a_(){return a_=(0,Ve.Z)(function*(i,e,n){const o=Ut(i),u=[],h=[];for(const v of e){let P;const V=o.fa.get(v);if(V&&0!==V.length){P=yield Nh(o.localStore,T(V[0]));for(const z of V){const ee=o.ma.get(z),le=yield Pv(o,ee);le.snapshot&&h.push(le.snapshot)}}else{const z=yield Ph(o.localStore,v);P=yield Nh(o.localStore,z),yield Xm(o,u_(z),v,!1,P.resumeToken)}u.push(P)}return o.Va.a_(h),u}),a_.apply(this,arguments)}function u_(i){return Ad(i.path,i.collectionGroup,i.orderBy,i.filters,i.limit,"F",i.startAt,i.endAt)}function xv(i){return n=Ut(i).localStore,Ut(Ut(n).persistence).Bi();var n}function _0(i,e,n,o){return c_.apply(this,arguments)}function c_(){return c_=(0,Ve.Z)(function*(i,e,n,o){const u=Ut(i);if(u.Ca)return void yt("SyncEngine","Ignoring unexpected query state notification.");const h=u.fa.get(e);if(h&&h.length>0)switch(n){case"current":case"not-current":{const v=yield $d(u.localStore,wn(h[0])),P=C.createSynthesizedRemoteEventForCurrentChange(e,"current"===n,vs.EMPTY_BYTE_STRING);yield hc(u,v,P);break}case"rejected":yield dc(u.localStore,e,!0),Lh(u,e,o);break;default:tn()}}),c_.apply(this,arguments)}function fc(i,e,n){return l_.apply(this,arguments)}function l_(){return l_=(0,Ve.Z)(function*(i,e,n){const o=d_(i);if(o.Ca){for(const u of e){if(o.fa.has(u)){yt("SyncEngine","Adding an already active target "+u);continue}const h=yield Ph(o.localStore,u),v=yield Nh(o.localStore,h);yield Xm(o,u_(h),v.targetId,!1,v.resumeToken),_p(o.remoteStore,v)}for(const u of n)o.fa.has(u)&&(yield dc(o.localStore,u,!1).then(()=>{vp(o.remoteStore,u),Lh(o,u)}).catch(A))}}),l_.apply(this,arguments)}function d_(i){const e=Ut(i);return e.remoteStore.remoteSyncer.applyRemoteEvent=t_.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=i_.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=bg.bind(null,e),e.Va.a_=bv.bind(null,e.eventManager),e.Va.Fa=Rf.bind(null,e.eventManager),e}function kv(i){const e=Ut(i);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Rv.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Nv.bind(null,e),e}class Mf{constructor(){this.synchronizeTabs=!1}initialize(e){var n=this;return(0,Ve.Z)(function*(){n.serializer=Cf(e.databaseInfo.databaseId),n.sharedClientState=n.createSharedClientState(e),n.persistence=n.createPersistence(e),yield n.persistence.start(),n.localStore=n.createLocalStore(e),n.gcScheduler=n.createGarbageCollectionScheduler(e,n.localStore),n.indexBackfillerScheduler=n.createIndexBackfillerScheduler(e,n.localStore)})()}createGarbageCollectionScheduler(e,n){return null}createIndexBackfillerScheduler(e,n){return null}createLocalStore(e){return Sh(this.persistence,new Tf,e.initialUser,this.serializer)}createPersistence(e){return new Lo(hl.jr,this.serializer)}createSharedClientState(e){return new fv}terminate(){var e=this;return(0,Ve.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class f_ extends Mf{constructor(e,n,o){super(),this.xa=e,this.cacheSizeBytes=n,this.forceOwnership=o,this.synchronizeTabs=!1}initialize(e){var n=()=>super.initialize,o=this;return(0,Ve.Z)(function*(){yield n().call(o,e),yield o.xa.initialize(o,e),yield kv(o.xa.syncEngine),yield Ip(o.xa.remoteStore),yield o.persistence.mi(()=>(o.gcScheduler&&!o.gcScheduler.started&&o.gcScheduler.start(),o.indexBackfillerScheduler&&!o.indexBackfillerScheduler.started&&o.indexBackfillerScheduler.start(),Promise.resolve()))})()}createLocalStore(e){return Sh(this.persistence,new Tf,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,n){return new Me(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,n)}createIndexBackfillerScheduler(e,n){const o=new Au(n,this.persistence);return new di(e.asyncQueue,o)}createPersistence(e){const n=$u(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),o=void 0!==this.cacheSizeBytes?Ra.withCacheSize(this.cacheSizeBytes):Ra.DEFAULT;return new Gd(this.synchronizeTabs,n,e.clientId,o,e.asyncQueue,lg(),dg(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new fv}}class Fv extends f_{constructor(e,n){super(e,n,!1),this.xa=e,this.cacheSizeBytes=n,this.synchronizeTabs=!0}initialize(e){var n=()=>super.initialize,o=this;return(0,Ve.Z)(function*(){yield n().call(o,e);const u=o.xa.syncEngine;o.sharedClientState instanceof ag&&(o.sharedClientState.syncEngine={Ys:g0.bind(null,u),Zs:_0.bind(null,u),Xs:fc.bind(null,u),Bi:xv.bind(null,u),Js:p0.bind(null,u)},yield o.sharedClientState.start()),yield o.persistence.mi(function(){var h=(0,Ve.Z)(function*(v){yield function m0(i,e){return o_.apply(this,arguments)}(o.xa.syncEngine,v),o.gcScheduler&&(v&&!o.gcScheduler.started?o.gcScheduler.start():v||o.gcScheduler.stop()),o.indexBackfillerScheduler&&(v&&!o.indexBackfillerScheduler.started?o.indexBackfillerScheduler.start():v||o.indexBackfillerScheduler.stop())});return function(v){return h.apply(this,arguments)}}())})()}createSharedClientState(e){const n=lg();if(!ag.D(n))throw new vt(tt.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const o=$u(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new ag(n,e.asyncQueue,o,e.clientId,e.initialUser)}}class Vh{initialize(e,n){var o=this;return(0,Ve.Z)(function*(){o.localStore||(o.localStore=e.localStore,o.sharedClientState=e.sharedClientState,o.datastore=o.createDatastore(n),o.remoteStore=o.createRemoteStore(n),o.eventManager=o.createEventManager(n),o.syncEngine=o.createSyncEngine(n,!e.synchronizeTabs),o.sharedClientState.onlineStateHandler=u=>f0(o.syncEngine,u,1),o.remoteStore.remoteSyncer.handleCredentialChange=r_.bind(null,o.syncEngine),yield Ev(o.remoteStore,o.syncEngine.isPrimaryClient))})()}createEventManager(e){return new Tv}createDatastore(e){const n=Cf(e.databaseInfo.databaseId),o=new cg(e.databaseInfo);return new n0(e.authCredentials,e.appCheckCredentials,o,n)}createRemoteStore(e){return o=this.localStore,u=this.datastore,h=e.asyncQueue,v=n=>f0(this.syncEngine,n,0),P=ug.D()?new ug:new Xy,new hg(o,u,h,v,P);var o,u,h,v,P}createSyncEngine(e,n){return function(u,h,v,P,V,z,ee){const le=new d0(u,h,v,P,V,z);return ee&&(le.Ca=!0),le}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}terminate(){return(e=(0,Ve.Z)(function*(o){const u=Ut(o);yt("RemoteStore","RemoteStore shutting down."),u.C_.add(5),yield Bl(u),u.F_.shutdown(),u.M_.set("Unknown")}),function n(o){return e.apply(this,arguments)})(this.remoteStore);var e}}function Lv(i,e=10240){let n=0;return{read:()=>(0,Ve.Z)(function*(){if(n<i.byteLength){const o={value:i.slice(n,n+e),done:!1};return n+=e,o}return{done:!0}})(),cancel:()=>(0,Ve.Z)(function*(){})(),releaseLock(){},closed:Promise.resolve()}}class Ng{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Oa(this.observer.next,e)}error(e){this.observer.error?this.Oa(this.observer.error,e):Ti("Uncaught Error in snapshot listener:",e.toString())}Na(){this.muted=!0}Oa(e,n){this.muted||setTimeout(()=>{this.muted||e(n)},0)}}class p_{constructor(e,n){this.Ba=e,this.serializer=n,this.metadata=new Vs,this.buffer=new Uint8Array,this.La=new TextDecoder("utf-8"),this.ka().then(o=>{o&&o.Z_()?this.metadata.resolve(o.Y_.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(o?.Y_)}`))},o=>this.metadata.reject(o))}close(){return this.Ba.cancel()}getMetadata(){var e=this;return(0,Ve.Z)(function*(){return e.metadata.promise})()}Ma(){var e=this;return(0,Ve.Z)(function*(){return yield e.getMetadata(),e.ka()})()}ka(){var e=this;return(0,Ve.Z)(function*(){const n=yield e.qa();if(null===n)return null;const o=e.La.decode(n),u=Number(o);isNaN(u)&&e.Qa(`length string (${o}) is not valid number`);const h=yield e.Ka(u);return new l0(JSON.parse(h),n.length+u)})()}$a(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}qa(){var e=this;return(0,Ve.Z)(function*(){for(;e.$a()<0&&!(yield e.Ua()););if(0===e.buffer.length)return null;const n=e.$a();n<0&&e.Qa("Reached the end of bundle when a length string is expected.");const o=e.buffer.slice(0,n);return e.buffer=e.buffer.slice(n),o})()}Ka(e){var n=this;return(0,Ve.Z)(function*(){for(;n.buffer.length<e;)(yield n.Ua())&&n.Qa("Reached the end of bundle when more is expected.");const o=n.La.decode(n.buffer.slice(0,e));return n.buffer=n.buffer.slice(e),o})()}Qa(e){throw this.Ba.cancel(),new Error(`Invalid bundle format: ${e}`)}Ua(){var e=this;return(0,Ve.Z)(function*(){const n=yield e.Ba.read();if(!n.done){const o=new Uint8Array(e.buffer.length+n.value.length);o.set(e.buffer),o.set(n.value,e.buffer.length),e.buffer=o}return n.done})()}}class y0{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var n=this;return(0,Ve.Z)(function*(){if(n.ensureCommitNotCalled(),n.mutations.length>0)throw new vt(tt.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const o=yield(u=(0,Ve.Z)(function*(v,P){const V=Ut(v),z=ll(V.serializer)+"/documents",ee={documents:P.map(xt=>Fc(V.serializer,xt))},le=yield V.Co("BatchGetDocuments",z,ee,P.length),Ae=new Map;le.forEach(xt=>{const Ht=function Xf(i,e){return"found"in e?function(o,u){mn(!!u.found);const h=pu(o,u.found.name),v=Hi(u.found.updateTime),P=u.found.createTime?Hi(u.found.createTime):sn.min(),V=new Ki({mapValue:{fields:u.found.fields}});return qn.newFoundDocument(h,v,P,V)}(i,e):"missing"in e?function(o,u){mn(!!u.missing),mn(!!u.readTime);const h=pu(o,u.missing),v=Hi(u.readTime);return qn.newNoDocument(h,v)}(i,e):tn()}(V.serializer,xt);Ae.set(Ht.key.toString(),Ht)});const et=[];return P.forEach(xt=>{const Ht=Ae.get(xt.toString());mn(!!Ht),et.push(Ht)}),et}),function h(v,P){return u.apply(this,arguments)})(n.datastore,e);var u;return o.forEach(u=>n.recordVersion(u)),o})()}set(e,n){this.write(n.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,n){try{this.write(n.toMutation(e,this.preconditionForUpdate(e)))}catch(o){this.lastWriteError=o}this.writtenDocs.add(e.toString())}delete(e){this.write(new xc(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,Ve.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const n=e.readVersions;var o;e.mutations.forEach(o=>{n.delete(o.key.toString())}),n.forEach((o,u)=>{const h=Gt.fromPath(u);e.mutations.push(new ea(h,e.precondition(h)))}),yield(o=(0,Ve.Z)(function*(h,v){const P=Ut(h),V=ll(P.serializer)+"/documents",z={writes:v.map(ee=>yh(P.serializer,ee))};yield P.wo("Commit",V,z)}),function u(h,v){return o.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let n;if(e.isFoundDocument())n=e.version;else{if(!e.isNoDocument())throw tn();n=sn.min()}const o=this.readVersions.get(e.key.toString());if(o){if(!n.isEqual(o))throw new vt(tt.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),n)}precondition(e){const n=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&n?n.isEqual(sn.min())?Oi.exists(!1):Oi.updateTime(n):Oi.none()}preconditionForUpdate(e){const n=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&n){if(n.isEqual(sn.min()))throw new vt(tt.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Oi.updateTime(n)}return Oi.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class I0{constructor(e,n,o,u,h){this.asyncQueue=e,this.datastore=n,this.options=o,this.updateFunction=u,this.deferred=h,this.Wa=o.maxAttempts,this.zo=new pp(this.asyncQueue,"transaction_retry")}run(){this.Wa-=1,this.Ga()}Ga(){var e=this;this.zo.ko((0,Ve.Z)(function*(){const n=new y0(e.datastore),o=e.za(n);o&&o.then(u=>{e.asyncQueue.enqueueAndForget(()=>n.commit().then(()=>{e.deferred.resolve(u)}).catch(h=>{e.ja(h)}))}).catch(u=>{e.ja(u)})}))}za(e){try{const n=this.updateFunction(e);return!oa(n)&&n.catch&&n.then?n:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(n){return this.deferred.reject(n),null}}ja(e){this.Wa>0&&this.Ha(e)?(this.Wa-=1,this.asyncQueue.enqueueAndForget(()=>(this.Ga(),Promise.resolve()))):this.deferred.reject(e)}Ha(e){if("FirebaseError"===e.name){const n=e.code;return"aborted"===n||"failed-precondition"===n||"already-exists"===n||!Bu(n)}return!1}}class E0{constructor(e,n,o,u){var h=this;this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=o,this.databaseInfo=u,this.user=Lr.UNAUTHENTICATED,this.clientId=vd.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(o,function(){var v=(0,Ve.Z)(function*(P){yt("FirestoreClient","Received user=",P.uid),yield h.authCredentialListener(P),h.user=P});return function(P){return v.apply(this,arguments)}}()),this.appCheckCredentials.start(o,v=>(yt("FirestoreClient","Received new app check token=",v),this.appCheckCredentialListener(v,this.user)))}getConfiguration(){var e=this;return(0,Ve.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new vt(tt.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const n=new Vs;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,Ve.Z)(function*(){try{e._onlineComponents&&(yield e._onlineComponents.terminate()),e._offlineComponents&&(yield e._offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),n.resolve()}catch(o){const u=Sf(o,"Failed to shutdown persistence");n.reject(u)}})),n.promise}}function Og(i,e){return g_.apply(this,arguments)}function g_(){return g_=(0,Ve.Z)(function*(i,e){i.asyncQueue.verifyOperationInProgress(),yt("FirestoreClient","Initializing OfflineComponentProvider");const n=yield i.getConfiguration();yield e.initialize(n);let o=n.initialUser;i.setCredentialChangeListener(function(){var u=(0,Ve.Z)(function*(h){o.isEqual(h)||(yield ig(e.localStore,h),o=h)});return function(h){return u.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>i.terminate()),i._offlineComponents=e}),g_.apply(this,arguments)}function jc(i,e){return Cp.apply(this,arguments)}function Cp(){return Cp=(0,Ve.Z)(function*(i,e){i.asyncQueue.verifyOperationInProgress();const n=yield Pg(i);yt("FirestoreClient","Initializing OnlineComponentProvider");const o=yield i.getConfiguration();yield e.initialize(n,o),i.setCredentialChangeListener(u=>zm(e.remoteStore,u)),i.setAppCheckTokenChangeListener((u,h)=>zm(e.remoteStore,h)),i._onlineComponents=e}),Cp.apply(this,arguments)}function Vv(i){return"FirebaseError"===i.name?i.code===tt.FAILED_PRECONDITION||i.code===tt.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||22===i.code||20===i.code||11===i.code}function Pg(i){return m_.apply(this,arguments)}function m_(){return m_=(0,Ve.Z)(function*(i){if(!i._offlineComponents)if(i._uninitializedComponentsProvider){yt("FirestoreClient","Using user provided OfflineComponentProvider");try{yield Og(i,i._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!Vv(n))throw n;vo("Error using user provided cache. Falling back to memory cache: "+n),yield Og(i,new Mf)}}else yt("FirestoreClient","Using default OfflineComponentProvider"),yield Og(i,new Mf);return i._offlineComponents}),m_.apply(this,arguments)}function Ap(i){return Mg.apply(this,arguments)}function Mg(){return Mg=(0,Ve.Z)(function*(i){return i._onlineComponents||(i._uninitializedComponentsProvider?(yt("FirestoreClient","Using user provided OnlineComponentProvider"),yield jc(i,i._uninitializedComponentsProvider._online)):(yt("FirestoreClient","Using default OnlineComponentProvider"),yield jc(i,new Vh))),i._onlineComponents}),Mg.apply(this,arguments)}function Sp(i){return Pg(i).then(e=>e.persistence)}function Qd(i){return Pg(i).then(e=>e.localStore)}function T0(i){return Ap(i).then(e=>e.remoteStore)}function xg(i){return Ap(i).then(e=>e.syncEngine)}function Bh(i){return kg.apply(this,arguments)}function kg(){return kg=(0,Ve.Z)(function*(i){const e=yield Ap(i),n=e.eventManager;return n.onListen=h0.bind(null,e.syncEngine),n.onUnlisten=WI.bind(null,e.syncEngine),n}),kg.apply(this,arguments)}function Bv(i,e,n={}){const o=new Vs;return i.asyncQueue.enqueueAndForget((0,Ve.Z)(function*(){return function(h,v,P,V,z){const ee=new Ng({next:Ae=>{v.enqueueAndForget(()=>Zm(h,le));const et=Ae.docs.has(P);!et&&Ae.fromCache?z.reject(new vt(tt.UNAVAILABLE,"Failed to get document because the client is offline.")):et&&Ae.fromCache&&V&&"server"===V.source?z.reject(new vt(tt.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):z.resolve(Ae)},error:Ae=>z.reject(Ae)}),le=new Yd(il(P.path),ee,{includeMetadataChanges:!0,J_:!0});return vg(h,le)}(yield Bh(i),i.asyncQueue,e,n,o)})),o.promise}function Uv(i,e,n={}){const o=new Vs;return i.asyncQueue.enqueueAndForget((0,Ve.Z)(function*(){return function(h,v,P,V,z){const ee=new Ng({next:Ae=>{v.enqueueAndForget(()=>Zm(h,le)),Ae.fromCache&&"server"===V.source?z.reject(new vt(tt.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):z.resolve(Ae)},error:Ae=>z.reject(Ae)}),le=new Yd(P,ee,{includeMetadataChanges:!0,J_:!0});return vg(h,le)}(yield Bh(i),i.asyncQueue,e,n,o)})),o.promise}function D0(i){const e={};return void 0!==i.timeoutSeconds&&(e.timeoutSeconds=i.timeoutSeconds),e}const Hv=new Map;function Vg(i,e,n){if(!n)throw new vt(tt.INVALID_ARGUMENT,`Function ${i}() cannot be called with an empty ${e}.`)}function I_(i,e,n,o){if(!0===e&&!0===o)throw new vt(tt.INVALID_ARGUMENT,`${i} and ${n} cannot be used together.`)}function $v(i){if(!Gt.isDocumentKey(i))throw new vt(tt.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${i} has ${i.length}.`)}function zv(i){if(Gt.isDocumentKey(i))throw new vt(tt.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${i} has ${i.length}.`)}function Np(i){if(void 0===i)return"undefined";if(null===i)return"null";if("string"==typeof i)return i.length>20&&(i=`${i.substring(0,20)}...`),JSON.stringify(i);if("number"==typeof i||"boolean"==typeof i)return""+i;if("object"==typeof i){if(i instanceof Array)return"an array";{const e=(o=i).constructor?o.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var o;return"function"==typeof i?"a function":tn()}function Vr(i,e){if("_delegate"in i&&(i=i._delegate),!(i instanceof e)){if(e.name===i.constructor.name)throw new vt(tt.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Np(i);throw new vt(tt.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return i}function xf(i,e){if(e<=0)throw new vt(tt.INVALID_ARGUMENT,`Function ${i}() requires a positive number, but it was: ${e}.`)}class Wv{constructor(e){var n,o;if(void 0===e.host){if(void 0!==e.ssl)throw new vt(tt.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(n=e.ssl)||void 0===n||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new vt(tt.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}I_("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!(this.experimentalForceLongPolling||void 0!==e.experimentalAutoDetectLongPolling&&!e.experimentalAutoDetectLongPolling),this.experimentalLongPollingOptions=D0(null!==(o=e.experimentalLongPollingOptions)&&void 0!==o?o:{}),function(h){if(void 0!==h.timeoutSeconds){if(isNaN(h.timeoutSeconds))throw new vt(tt.INVALID_ARGUMENT,`invalid long polling timeout: ${h.timeoutSeconds} (must not be NaN)`);if(h.timeoutSeconds<5)throw new vt(tt.INVALID_ARGUMENT,`invalid long polling timeout: ${h.timeoutSeconds} (minimum allowed value is 5)`);if(h.timeoutSeconds>30)throw new vt(tt.INVALID_ARGUMENT,`invalid long polling timeout: ${h.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.experimentalLongPollingOptions.timeoutSeconds===e.experimentalLongPollingOptions.timeoutSeconds&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class kf{constructor(e,n,o,u){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=o,this._app=u,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Wv({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new vt(tt.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new vt(tt.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Wv(e),void 0!==e.credentials&&(this._authCredentials=function(o){if(!o)return new _d;switch(o.type){case"firstParty":return new tr(o.sessionIndex||"0",o.iamToken||null,o.authTokenFactory||null);case"provider":return o.client;default:throw new vt(tt.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const o=Hv.get(n);o&&(yt("ComponentProvider","Removing Datastore"),Hv.delete(n),o.terminate())}(this),Promise.resolve()}}class Na{constructor(e,n,o){this.converter=n,this._query=o,this.type="query",this.firestore=e}withConverter(e){return new Na(this.firestore,e,this._query)}}class Os{constructor(e,n,o){this.converter=n,this._key=o,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new zu(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Os(this.firestore,e,this._key)}}class zu extends Na{constructor(e,n,o){super(e,n,il(o)),this._path=o,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Os(this.firestore,null,new Gt(e))}withConverter(e){return new zu(this.firestore,e,this._path)}}function qv(i,e,...n){if(i=(0,We.m9)(i),Vg("collection","path",e),i instanceof kf){const o=Jn.fromString(e,...n);return zv(o),new zu(i,null,o)}{if(!(i instanceof Os||i instanceof zu))throw new vt(tt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const o=i._path.child(Jn.fromString(e,...n));return zv(o),new zu(i.firestore,null,o)}}function Bg(i,e,...n){if(i=(0,We.m9)(i),1===arguments.length&&(e=vd.newId()),Vg("doc","path",e),i instanceof kf){const o=Jn.fromString(e,...n);return $v(o),new Os(i,null,new Gt(o))}{if(!(i instanceof Os||i instanceof zu))throw new vt(tt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const o=i._path.child(Jn.fromString(e,...n));return $v(o),new Os(i.firestore,i instanceof zu?i.converter:null,new Gt(o))}}function Kv(i,e){return i=(0,We.m9)(i),e=(0,We.m9)(e),(i instanceof Os||i instanceof zu)&&(e instanceof Os||e instanceof zu)&&i.firestore===e.firestore&&i.path===e.path&&i.converter===e.converter}function T_(i,e){return i=(0,We.m9)(i),e=(0,We.m9)(e),i instanceof Na&&e instanceof Na&&i.firestore===e.firestore&&Be(i._query,e._query)&&i.converter===e.converter}class A0{constructor(){this.Ja=Promise.resolve(),this.Ya=[],this.Za=!1,this.Xa=[],this.eu=null,this.tu=!1,this.nu=!1,this.ru=[],this.zo=new pp(this,"async_queue_retry"),this.iu=()=>{const n=dg();n&&yt("AsyncQueue","Visibility state changed to "+n.visibilityState),this.zo.Qo()};const e=dg();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.iu)}get isShuttingDown(){return this.Za}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.su(),this.ou(e)}enterRestrictedMode(e){if(!this.Za){this.Za=!0,this.nu=e||!1;const n=dg();n&&"function"==typeof n.removeEventListener&&n.removeEventListener("visibilitychange",this.iu)}}enqueue(e){if(this.su(),this.Za)return new Promise(()=>{});const n=new Vs;return this.ou(()=>this.Za&&this.nu?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Ya.push(e),this._u()))}_u(){var e=this;return(0,Ve.Z)(function*(){if(0!==e.Ya.length){try{yield e.Ya[0](),e.Ya.shift(),e.zo.reset()}catch(n){if(!Vt(n))throw n;yt("AsyncQueue","Operation failed with retryable error: "+n)}e.Ya.length>0&&e.zo.ko(()=>e._u())}})()}ou(e){const n=this.Ja.then(()=>(this.tu=!0,e().catch(o=>{throw this.eu=o,this.tu=!1,Ti("INTERNAL UNHANDLED ERROR: ",function(v){let P=v.message||"";return v.stack&&(P=v.stack.includes(v.message)?v.stack:v.message+"\n"+v.stack),P}(o)),o}).then(o=>(this.tu=!1,o))));return this.Ja=n,n}enqueueAfterDelay(e,n,o){this.su(),this.ru.indexOf(e)>-1&&(n=0);const u=qm.createAndSchedule(this,e,n,o,h=>this.au(h));return this.Xa.push(u),u}su(){this.eu&&tn()}verifyOperationInProgress(){}uu(){var e=this;return(0,Ve.Z)(function*(){let n;do{n=e.Ja,yield n}while(n!==e.Ja)})()}cu(e){for(const n of this.Xa)if(n.timerId===e)return!0;return!1}lu(e){return this.uu().then(()=>{this.Xa.sort((n,o)=>n.targetTimeMs-o.targetTimeMs);for(const n of this.Xa)if(n.skipDelay(),"all"!==e&&n.timerId===e)break;return this.uu()})}hu(e){this.ru.push(e)}au(e){const n=this.Xa.indexOf(e);this.Xa.splice(n,1)}}function b_(i){return function(n,o){if("object"!=typeof n||null===n)return!1;const u=n;for(const h of["next","error","complete"])if(h in u&&"function"==typeof u[h])return!0;return!1}(i)}class S0{constructor(){this._progressObserver={},this._taskCompletionResolver=new Vs,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,n,o){this._progressObserver={next:e,error:n,complete:o}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,n){return this._taskCompletionResolver.promise.then(e,n)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class ts extends kf{constructor(e,n,o,u){super(e,n,o,u),this.type="firestore",this._queue=new A0,this._persistenceKey=u?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||Zv(this),this._firestoreClient.terminate()}}function uo(i){return i._firestoreClient||Zv(i),i._firestoreClient.verifyNotTerminated(),i._firestoreClient}function Zv(i){var e,n,o;const u=i._freezeSettings(),h=(V=(null===(e=i._app)||void 0===e?void 0:e.options.appId)||"",new Pu(i._databaseId,V,i._persistenceKey,(ee=u).host,ee.ssl,ee.experimentalForceLongPolling,ee.experimentalAutoDetectLongPolling,D0(ee.experimentalLongPollingOptions),ee.useFetchStreams));var V,ee;i._firestoreClient=new E0(i._authCredentials,i._appCheckCredentials,i._queue,h),null!==(n=u.localCache)&&void 0!==n&&n._offlineComponentProvider&&null!==(o=u.localCache)&&void 0!==o&&o._onlineComponentProvider&&(i._firestoreClient._uninitializedComponentsProvider={_offlineKind:u.localCache.kind,_offline:u.localCache._offlineComponentProvider,_online:u.localCache._onlineComponentProvider})}function Qv(i,e,n){const o=new Vs;return i.asyncQueue.enqueue((0,Ve.Z)(function*(){try{yield Og(i,n),yield jc(i,e),o.resolve()}catch(u){const h=u;if(!Vv(h))throw h;vo("Error enabling indexeddb cache. Falling back to memory cache: "+h),o.reject(h)}})).then(()=>o.promise)}function D_(i){if(i._initialized||i._terminated)throw new vt(tt.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class Hl{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Hl(vs.fromBase64String(e))}catch(n){throw new vt(tt.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Hl(vs.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class dd{constructor(...e){for(let n=0;n<e.length;++n)if(0===e[n].length)throw new vt(tt.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new li(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Uh{constructor(e){this._methodName=e}}class pc{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new vt(tt.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new vt(tt.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Hn(this._lat,e._lat)||Hn(this._long,e._long)}}const Op=/^__.*__$/;class Za{constructor(e,n,o){this.data=e,this.fieldMask=n,this.fieldTransforms=o}toMutation(e,n){return null!==this.fieldMask?new fu(e,this.data,this.fieldMask,n,this.fieldTransforms):new Sa(e,this.data,n,this.fieldTransforms)}}class Jd{constructor(e,n,o){this.data=e,this.fieldMask=n,this.fieldTransforms=o}toMutation(e,n){return new fu(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function Pp(i){switch(i){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw tn()}}class _u{constructor(e,n,o,u,h,v){this.settings=e,this.databaseId=n,this.serializer=o,this.ignoreUndefinedProperties=u,void 0===h&&this.Pu(),this.fieldTransforms=h||[],this.fieldMask=v||[]}get path(){return this.settings.path}get Iu(){return this.settings.Iu}Tu(e){return new _u(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Eu(e){var n;const o=null===(n=this.path)||void 0===n?void 0:n.child(e),u=this.Tu({path:o,du:!1});return u.Au(e),u}Ru(e){var n;const o=null===(n=this.path)||void 0===n?void 0:n.child(e),u=this.Tu({path:o,du:!1});return u.Pu(),u}Vu(e){return this.Tu({path:void 0,du:!0})}mu(e){return Uf(e,this.settings.methodName,this.settings.fu||!1,this.path,this.settings.gu)}contains(e){return void 0!==this.fieldMask.find(n=>e.isPrefixOf(n))||void 0!==this.fieldTransforms.find(n=>e.isPrefixOf(n.field))}Pu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Au(this.path.get(e))}Au(e){if(0===e.length)throw this.mu("Document fields must not be empty");if(Pp(this.Iu)&&Op.test(e))throw this.mu('Document fields cannot begin and end with "__"')}}class C_{constructor(e,n,o){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=o||Cf(e)}pu(e,n,o,u=!1){return new _u({Iu:e,methodName:n,gu:o,path:li.emptyPath(),du:!1,fu:u},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Gc(i){const e=i._freezeSettings(),n=Cf(i._databaseId);return new C_(i._databaseId,!!e.ignoreUndefinedProperties,n)}function hd(i,e,n,o,u,h={}){const v=i.pu(h.merge||h.mergeFields?2:0,e,n,u);Hg("Data must be an object, but it was:",v,o);const P=S_(o,v);let V,z;if(h.merge)V=new Qo(v.fieldMask),z=v.fieldTransforms;else if(h.mergeFields){const ee=[];for(const le of h.mergeFields){const Ae=Bf(e,le,n);if(!v.contains(Ae))throw new vt(tt.INVALID_ARGUMENT,`Field '${Ae}' is specified in your field mask but missing from your input data.`);iy(ee,Ae)||ee.push(Ae)}V=new Qo(ee),z=v.fieldTransforms.filter(le=>V.covers(le.field))}else V=null,z=v.fieldTransforms;return new Za(new Ki(P),V,z)}class $l extends Uh{_toFieldTransform(e){if(2!==e.Iu)throw e.mu(1===e.Iu?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof $l}}function jh(i,e,n){return new _u({Iu:3,gu:e.settings.gu,methodName:i._methodName,du:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class Xd extends Uh{_toFieldTransform(e){return new Ol(e.path,new To)}isEqual(e){return e instanceof Xd}}class Ff extends Uh{constructor(e,n){super(e),this.yu=n}_toFieldTransform(e){const n=jh(this,e,!0),o=this.yu.map(h=>th(h,n)),u=new qa(o);return new Ol(e.path,u)}isEqual(e){return this===e}}class Lf extends Uh{constructor(e,n){super(e),this.yu=n}_toFieldTransform(e){const n=jh(this,e,!0),o=this.yu.map(h=>th(h,n)),u=new Ka(o);return new Ol(e.path,u)}isEqual(e){return this===e}}class Vf extends Uh{constructor(e,n){super(e),this.wu=n}_toFieldTransform(e){const n=new bo(e.serializer,ed(e.serializer,this.wu));return new Ol(e.path,n)}isEqual(e){return this===e}}function eh(i,e,n,o){const u=i.pu(1,e,n);Hg("Data must be an object, but it was:",u,o);const h=[],v=Ki.empty();Ru(o,(V,z)=>{const ee=Mp(e,V,n);z=(0,We.m9)(z);const le=u.Ru(ee);if(z instanceof $l)h.push(ee);else{const Ae=th(z,le);null!=Ae&&(h.push(ee),v.set(ee,Ae))}});const P=new Qo(h);return new Jd(v,P,u.fieldTransforms)}function Gg(i,e,n,o,u,h){const v=i.pu(1,e,n),P=[Bf(e,o,n)],V=[u];if(h.length%2!=0)throw new vt(tt.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let Ae=0;Ae<h.length;Ae+=2)P.push(Bf(e,h[Ae])),V.push(h[Ae+1]);const z=[],ee=Ki.empty();for(let Ae=P.length-1;Ae>=0;--Ae)if(!iy(z,P[Ae])){const et=P[Ae];let xt=V[Ae];xt=(0,We.m9)(xt);const Ht=v.Ru(et);if(xt instanceof $l)z.push(et);else{const $t=th(xt,Ht);null!=$t&&(z.push(et),ee.set(et,$t))}}const le=new Qo(z);return new Jd(ee,le,v.fieldTransforms)}function A_(i,e,n,o=!1){return th(n,i.pu(o?4:3,e))}function th(i,e){if(R_(i=(0,We.m9)(i)))return Hg("Unsupported field value:",e,i),S_(i,e);if(i instanceof Uh)return function(o,u){if(!Pp(u.Iu))throw u.mu(`${o._methodName}() can only be used with update() and set()`);if(!u.path)throw u.mu(`${o._methodName}() is not currently supported inside arrays`);const h=o._toFieldTransform(u);h&&u.fieldTransforms.push(h)}(i,e),null;if(void 0===i&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),i instanceof Array){if(e.settings.du&&4!==e.Iu)throw e.mu("Nested arrays are not supported");return function(o,u){const h=[];let v=0;for(const P of o){let V=th(P,u.Vu(v));null==V&&(V={nullValue:"NULL_VALUE"}),h.push(V),v++}return{arrayValue:{values:h}}}(i,e)}return function(o,u){if(null===(o=(0,We.m9)(o)))return{nullValue:"NULL_VALUE"};if("number"==typeof o)return ed(u.serializer,o);if("boolean"==typeof o)return{booleanValue:o};if("string"==typeof o)return{stringValue:o};if(o instanceof Date){const h=Ar.fromDate(o);return{timestampValue:uc(u.serializer,h)}}if(o instanceof Ar){const h=new Ar(o.seconds,1e3*Math.floor(o.nanoseconds/1e3));return{timestampValue:uc(u.serializer,h)}}if(o instanceof pc)return{geoPointValue:{latitude:o.latitude,longitude:o.longitude}};if(o instanceof Hl)return{bytesValue:_h(u.serializer,o._byteString)};if(o instanceof Os){const h=u.databaseId,v=o.firestore._databaseId;if(!v.isEqual(h))throw u.mu(`Document reference is for database ${v.projectId}/${v.database} but should be for database ${h.projectId}/${h.database}`);return{referenceValue:Ld(o.firestore._databaseId||u.databaseId,o._key.path)}}throw u.mu(`Unsupported field value: ${Np(o)}`)}(i,e)}function S_(i,e){const n={};return xo(i)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ru(i,(o,u)=>{const h=th(u,e.Eu(o));null!=h&&(n[o]=h)}),{mapValue:{fields:n}}}function R_(i){return!("object"!=typeof i||null===i||i instanceof Array||i instanceof Date||i instanceof Ar||i instanceof pc||i instanceof Hl||i instanceof Os||i instanceof Uh)}function Hg(i,e,n){if(!R_(n)||"object"!=typeof(u=n)||null===u||Object.getPrototypeOf(u)!==Object.prototype&&null!==Object.getPrototypeOf(u)){const o=Np(n);throw e.mu("an object"===o?i+" a custom object":i+" "+o)}var u}function Bf(i,e,n){if((e=(0,We.m9)(e))instanceof dd)return e._internalPath;if("string"==typeof e)return Mp(i,e);throw Uf("Field path arguments must be of type string or ",i,!1,void 0,n)}const ry=new RegExp("[~\\*/\\[\\]]");function Mp(i,e,n){if(e.search(ry)>=0)throw Uf(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,i,!1,void 0,n);try{return new dd(...e.split("."))._internalPath}catch{throw Uf(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,i,!1,void 0,n)}}function Uf(i,e,n,o,u){const h=o&&!o.isEmpty(),v=void 0!==u;let P=`Function ${e}() called with invalid data`;n&&(P+=" (via `toFirestore()`)"),P+=". ";let V="";return(h||v)&&(V+=" (found",h&&(V+=` in field ${o}`),v&&(V+=` in document ${u}`),V+=")"),new vt(tt.INVALID_ARGUMENT,P+i+V)}function iy(i,e){return i.some(n=>n.isEqual(e))}class $g{constructor(e,n,o,u,h){this._firestore=e,this._userDataWriter=n,this._key=o,this._document=u,this._converter=h}get id(){return this._key.path.lastSegment()}get ref(){return new Os(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new QI(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(zg("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n)}}}class QI extends $g{data(){return super.data()}}function zg(i,e){return"string"==typeof e?Mp(i,e):e instanceof dd?e._internalPath:e._delegate._internalPath}function sy(i){if("L"===i.limitType&&0===i.explicitOrderBy.length)throw new vt(tt.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class oy{}class xp extends oy{}function Gh(i,e,...n){let o=[];e instanceof oy&&o.push(e),o=o.concat(n),function(h){const v=h.filter(V=>V instanceof jf).length,P=h.filter(V=>V instanceof kp).length;if(v>1||v>0&&P>0)throw new vt(tt.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(o);for(const u of o)i=u._apply(i);return i}class kp extends xp{constructor(e,n,o){super(),this._field=e,this._op=n,this._value=o,this.type="where"}static _create(e,n,o){return new kp(e,n,o)}_apply(e){const n=this._parse(e);return F0(e._query,n),new Na(e.firestore,e.converter,Z(e._query,n))}_parse(e){const n=Gc(e.firestore);return function(h,v,P,V,z,ee,le){let Ae;if(z.isKeyField()){if("array-contains"===ee||"array-contains-any"===ee)throw new vt(tt.INVALID_ARGUMENT,`Invalid Query. You can't perform '${ee}' queries on documentId().`);if("in"===ee||"not-in"===ee){jp(le,ee);const et=[];for(const xt of le)et.push(Up(V,h,xt));Ae={arrayValue:{values:et}}}else Ae=Up(V,h,le)}else"in"!==ee&&"not-in"!==ee&&"array-contains-any"!==ee||jp(le,ee),Ae=A_(P,"where",le,"in"===ee||"not-in"===ee);return cr.create(z,ee,Ae)}(e._query,0,n,e.firestore._databaseId,this._field,this._op,this._value)}}class jf extends oy{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new jf(e,n)}_parse(e){const n=this._queryConstraints.map(o=>o._parse(e)).filter(o=>o.getFilters().length>0);return 1===n.length?n[0]:Mr.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return 0===n.getFilters().length?e:(function(u,h){let v=u;const P=h.getFlattenedFilters();for(const V of P)F0(v,V),v=Z(v,V)}(e._query,n),new Na(e.firestore,e.converter,Z(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class Fp extends xp{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new Fp(e,n)}_apply(e){const n=function(u,h,v){if(null!==u.startAt)throw new vt(tt.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==u.endAt)throw new vt(tt.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new ys(h,v)}(e._query,this._field,this._direction);return new Na(e.firestore,e.converter,function(u,h){const v=u.explicitOrderBy.concat([h]);return new Rs(u.path,u.collectionGroup,v,u.filters.slice(),u.limit,u.limitType,u.startAt,u.endAt)}(e._query,n))}}class Lp extends xp{constructor(e,n,o){super(),this.type=e,this._limit=n,this._limitType=o}static _create(e,n,o){return new Lp(e,n,o)}_apply(e){return new Na(e.firestore,e.converter,ce(e._query,this._limit,this._limitType))}}class Kg extends xp{constructor(e,n,o){super(),this.type=e,this._docOrFields=n,this._inclusive=o}static _create(e,n,o){return new Kg(e,n,o)}_apply(e){const n=Zg(e,this.type,this._docOrFields,this._inclusive);return new Na(e.firestore,e.converter,(h=n,new Rs((u=e._query).path,u.collectionGroup,u.explicitOrderBy.slice(),u.filters.slice(),u.limit,u.limitType,h,u.endAt)));var u,h}}class Yg extends xp{constructor(e,n,o){super(),this.type=e,this._docOrFields=n,this._inclusive=o}static _create(e,n,o){return new Yg(e,n,o)}_apply(e){const n=Zg(e,this.type,this._docOrFields,this._inclusive);return new Na(e.firestore,e.converter,(h=n,new Rs((u=e._query).path,u.collectionGroup,u.explicitOrderBy.slice(),u.filters.slice(),u.limit,u.limitType,u.startAt,h)));var u,h}}function Zg(i,e,n,o){if(n[0]=(0,We.m9)(n[0]),n[0]instanceof $g)return function(h,v,P,V,z){if(!V)throw new vt(tt.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${P}().`);const ee=[];for(const le of m(h))if(le.field.isKeyField())ee.push(Ca(v,V.key));else{const Ae=V.data.field(le.field);if(ou(Ae))throw new vt(tt.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+le.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===Ae){const et=le.field.canonicalString();throw new vt(tt.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${et}' (used as the orderBy) does not exist.`)}ee.push(Ae)}return new Mu(ee,z)}(i._query,i.firestore._databaseId,e,n[0]._document,o);{const u=Gc(i.firestore);return function(v,P,V,z,ee,le){const Ae=v.explicitOrderBy;if(ee.length>Ae.length)throw new vt(tt.INVALID_ARGUMENT,`Too many arguments provided to ${z}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const et=[];for(let xt=0;xt<ee.length;xt++){const Ht=ee[xt];if(Ae[xt].field.isKeyField()){if("string"!=typeof Ht)throw new vt(tt.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${z}(), but got a ${typeof Ht}`);if(!N(v)&&-1!==Ht.indexOf("/"))throw new vt(tt.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${z}() must be a plain document ID, but '${Ht}' contains a slash.`);const $t=v.path.child(Jn.fromString(Ht));if(!Gt.isDocumentKey($t))throw new vt(tt.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${z}() must result in a valid document path, but '${$t}' is not because it contains an odd number of segments.`);const Fn=new Gt($t);et.push(Ca(P,Fn))}else{const $t=A_(V,z,Ht);et.push($t)}}return new Mu(et,le)}(i._query,i.firestore._databaseId,u,e,n,o)}}function Up(i,e,n){if("string"==typeof(n=(0,We.m9)(n))){if(""===n)throw new vt(tt.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!N(e)&&-1!==n.indexOf("/"))throw new vt(tt.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const o=e.path.child(Jn.fromString(n));if(!Gt.isDocumentKey(o))throw new vt(tt.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${o}' is not because it has an odd number of segments (${o.length}).`);return Ca(i,new Gt(o))}if(n instanceof Os)return Ca(i,n._key);throw new vt(tt.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Np(n)}.`)}function jp(i,e){if(!Array.isArray(i)||0===i.length)throw new vt(tt.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function F0(i,e){const n=function(u,h){for(const v of u)for(const P of v.getFlattenedFilters())if(h.indexOf(P.op)>=0)return P.op;return null}(i.filters,function(u){switch(u){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==n)throw new vt(tt.INVALID_ARGUMENT,n===e.op?`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`:`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class N_{convertValue(e,n="none"){switch(au(e)){case 0:return null;case 1:return e.booleanValue;case 2:return jn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(ji(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 10:return this.convertObject(e.mapValue,n);default:throw tn()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const o={};return Ru(e,(u,h)=>{o[u]=this.convertValue(h,n)}),o}convertGeoPoint(e){return new pc(jn(e.latitude),jn(e.longitude))}convertArray(e,n){return(e.values||[]).map(o=>this.convertValue(o,n))}convertServerTimestamp(e,n){switch(n){case"previous":const o=ec(e);return null==o?null:this.convertValue(o,n);case"estimate":return this.convertTimestamp($a(e));default:return null}}convertTimestamp(e){const n=Ou(e);return new Ar(n.seconds,n.nanos)}convertDocumentKey(e,n){const o=Jn.fromString(e);mn(ff(o));const u=new Da(o.get(1),o.get(3)),h=new Gt(o.popFirst(5));return u.isEqual(n)||Ti(`Document ${h} contains a document reference within a different database (${u.projectId}/${u.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),h}}function Gf(i,e,n){let o;return o=i?n&&(n.merge||n.mergeFields)?i.toFirestore(e,n):i.toFirestore(e):e,o}class L0 extends N_{constructor(e){super(),this.firestore=e}convertBytes(e){return new Hl(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Os(this.firestore,null,n)}}class nh{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class fd extends $g{constructor(e,n,o,u,h,v){super(e,n,o,u,v),this._firestore=e,this._firestoreImpl=e,this.metadata=h}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Gp(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const o=this._document.data.field(zg("DocumentSnapshot.get",e));if(null!==o)return this._userDataWriter.convertValue(o,n.serverTimestamps)}}}class Gp extends fd{data(e={}){return super.data(e)}}class rh{constructor(e,n,o,u){this._firestore=e,this._userDataWriter=n,this._snapshot=u,this.metadata=new nh(u.hasPendingWrites,u.fromCache),this.query=o}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,n){this._snapshot.docs.forEach(o=>{e.call(n,new Gp(this._firestore,this._userDataWriter,o.key,o,new nh(this._snapshot.mutatedKeys.has(o.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new vt(tt.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(u,h){if(u._snapshot.oldDocs.isEmpty()){let v=0;return u._snapshot.docChanges.map(P=>({type:"added",doc:new Gp(u._firestore,u._userDataWriter,P.doc.key,P.doc,new nh(u._snapshot.mutatedKeys.has(P.doc.key),u._snapshot.fromCache),u.query.converter),oldIndex:-1,newIndex:v++}))}{let v=u._snapshot.oldDocs;return u._snapshot.docChanges.filter(P=>h||3!==P.type).map(P=>{const V=new Gp(u._firestore,u._userDataWriter,P.doc.key,P.doc,new nh(u._snapshot.mutatedKeys.has(P.doc.key),u._snapshot.fromCache),u.query.converter);let z=-1,ee=-1;return 0!==P.type&&(z=v.indexOf(P.doc.key),v=v.delete(P.doc.key)),1!==P.type&&(v=v.add(P.doc),ee=v.indexOf(P.doc.key)),{type:ly(P.type),doc:V,oldIndex:z,newIndex:ee}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function ly(i){switch(i){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return tn()}}function Qg(i,e){return i instanceof fd&&e instanceof fd?i._firestore===e._firestore&&i._key.isEqual(e._key)&&(null===i._document?null===e._document:i._document.isEqual(e._document))&&i._converter===e._converter:i instanceof rh&&e instanceof rh&&i._firestore===e._firestore&&T_(i.query,e.query)&&i.metadata.isEqual(e.metadata)&&i._snapshot.isEqual(e._snapshot)}class ih extends N_{constructor(e){super(),this.firestore=e}convertBytes(e){return new Hl(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Os(this.firestore,null,n)}}function hy(i,e,n){i=Vr(i,Os);const o=Vr(i.firestore,ts),u=Gf(i.converter,e,n);return Hf(o,[hd(Gc(o),"setDoc",i._key,u,null!==i.converter,n).toMutation(i._key,Oi.none())])}function fy(i,e,n,...o){i=Vr(i,Os);const u=Vr(i.firestore,ts),h=Gc(u);let v;return v="string"==typeof(e=(0,We.m9)(e))||e instanceof dd?Gg(h,"updateDoc",i._key,e,n,o):eh(h,"updateDoc",i._key,e),Hf(u,[v.toMutation(i._key,Oi.exists(!0))])}function M_(i,...e){var n,o,u;i=(0,We.m9)(i);let h={includeMetadataChanges:!1},v=0;"object"!=typeof e[v]||b_(e[v])||(h=e[v],v++);const P={includeMetadataChanges:h.includeMetadataChanges};if(b_(e[v])){const le=e[v];e[v]=null===(n=le.next)||void 0===n?void 0:n.bind(le),e[v+1]=null===(o=le.error)||void 0===o?void 0:o.bind(le),e[v+2]=null===(u=le.complete)||void 0===u?void 0:u.bind(le)}let V,z,ee;if(i instanceof Os)z=Vr(i.firestore,ts),ee=il(i._key.path),V={next:le=>{e[v]&&e[v](x_(z,i,le))},error:e[v+1],complete:e[v+2]};else{const le=Vr(i,Na);z=Vr(le.firestore,ts),ee=le._query;const Ae=new ih(z);V={next:et=>{e[v]&&e[v](new rh(z,Ae,le,et))},error:e[v+1],complete:e[v+2]},sy(i._query)}return function(Ae,et,xt,Ht){const $t=new Ng(Ht),Fn=new Yd(et,$t,xt);return Ae.asyncQueue.enqueueAndForget((0,Ve.Z)(function*(){return vg(yield Bh(Ae),Fn)})),()=>{$t.Na(),Ae.asyncQueue.enqueueAndForget((0,Ve.Z)(function*(){return Zm(yield Bh(Ae),Fn)}))}}(uo(z),ee,P,V)}function Hf(i,e){return function(o,u){const h=new Vs;return o.asyncQueue.enqueueAndForget((0,Ve.Z)(function*(){return function qI(i,e,n){return Sv.apply(this,arguments)}(yield xg(o),u,h)})),h.promise}(uo(i),e)}function x_(i,e,n){const o=n.docs.get(e._key),u=new ih(i);return new fd(i,u,e._key,o,new nh(n.hasPendingWrites,n.fromCache),e.converter)}const nm={maxAttempts:5};class L_{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=Gc(e)}set(e,n,o){this._verifyNotCommitted();const u=pd(e,this._firestore),h=Gf(u.converter,n,o),v=hd(this._dataReader,"WriteBatch.set",u._key,h,null!==u.converter,o);return this._mutations.push(v.toMutation(u._key,Oi.none())),this}update(e,n,o,...u){this._verifyNotCommitted();const h=pd(e,this._firestore);let v;return v="string"==typeof(n=(0,We.m9)(n))||n instanceof dd?Gg(this._dataReader,"WriteBatch.update",h._key,n,o,u):eh(this._dataReader,"WriteBatch.update",h._key,n),this._mutations.push(v.toMutation(h._key,Oi.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=pd(e,this._firestore);return this._mutations=this._mutations.concat(new xc(n._key,Oi.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new vt(tt.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function pd(i,e){if((i=(0,We.m9)(i)).firestore!==e)throw new vt(tt.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return i}class Iy extends class{constructor(n,o){this._firestore=n,this._transaction=o,this._dataReader=Gc(n)}get(n){const o=pd(n,this._firestore),u=new L0(this._firestore);return this._transaction.lookup([o._key]).then(h=>{if(!h||1!==h.length)return tn();const v=h[0];if(v.isFoundDocument())return new $g(this._firestore,u,v.key,v,o.converter);if(v.isNoDocument())return new $g(this._firestore,u,o._key,null,o.converter);throw tn()})}set(n,o,u){const h=pd(n,this._firestore),v=Gf(h.converter,o,u),P=hd(this._dataReader,"Transaction.set",h._key,v,null!==h.converter,u);return this._transaction.set(h._key,P),this}update(n,o,u,...h){const v=pd(n,this._firestore);let P;return P="string"==typeof(o=(0,We.m9)(o))||o instanceof dd?Gg(this._dataReader,"Transaction.update",v._key,o,u,h):eh(this._dataReader,"Transaction.update",v._key,o),this._transaction.update(v._key,P),this}delete(n){const o=pd(n,this._firestore);return this._transaction.delete(o._key),this}}{constructor(e,n){super(e,n),this._firestore=e}get(e){const n=pd(e,this._firestore),o=new ih(this._firestore);return super.get(e).then(u=>new fd(this._firestore,o,n._key,u._document,new nh(!1,!1),n.converter))}}function im(i,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new vt("invalid-argument",`Invalid options passed to function ${i}(): You cannot specify both "merge" and "mergeFields".`);return e}function Ry(){if(typeof Uint8Array>"u")throw new vt("unimplemented","Uint8Arrays are not available in this environment.")}function Ny(){if(!function Qh(){return typeof atob<"u"}())throw new vt("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(e,n=!0){ru=Le.SDK_VERSION,(0,Le._registerComponent)(new $e.wA("firestore",(o,{instanceIdentifier:u,options:h})=>{const v=o.getProvider("app").getImmediate(),P=new ts(new ja(o.getProvider("auth-internal")),new bl(o.getProvider("app-check-internal")),function(z,ee){if(!Object.prototype.hasOwnProperty.apply(z.options,["projectId"]))throw new vt(tt.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Da(z.options.projectId,ee)}(v,u),v);return h=Object.assign({useFetchStreams:n},h),P._setSettings(h),P},"PUBLIC").setMultipleInstances(!0)),(0,Le.registerVersion)(_s,"4.3.1",e),(0,Le.registerVersion)(_s,"4.3.1","esm2017")}();class zf{constructor(e){this._delegate=e}static fromBase64String(e){return Ny(),new zf(Hl.fromBase64String(e))}static fromUint8Array(e){return Ry(),new zf(Hl.fromUint8Array(e))}toBase64(){return Ny(),this._delegate.toBase64()}toUint8Array(){return Ry(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function U_(i){return function Oy(i,e){if("object"!=typeof i||null===i)return!1;const n=i;for(const o of e)if(o in n&&"function"==typeof n[o])return!0;return!1}(i,["next","error","complete"])}class Py{enableIndexedDbPersistence(e,n){return function R0(i,e){D_(i=Vr(i,ts));const n=uo(i);if(n._uninitializedComponentsProvider)throw new vt(tt.FAILED_PRECONDITION,"SDK cache is already specified.");vo("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const o=i._freezeSettings(),u=new Vh;return Qv(n,u,new f_(u,o.cacheSizeBytes,e?.forceOwnership))}(e._delegate,{forceOwnership:n})}enableMultiTabIndexedDbPersistence(e){return function N0(i){D_(i=Vr(i,ts));const e=uo(i);if(e._uninitializedComponentsProvider)throw new vt(tt.FAILED_PRECONDITION,"SDK cache is already specified.");vo("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const n=i._freezeSettings(),o=new Vh;return Qv(e,o,new Fv(o,n.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function O0(i){if(i._initialized&&!i._terminated)throw new vt(tt.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Vs;return i._queue.enqueueAndForgetEvenWhileRestricted((0,Ve.Z)(function*(){try{yield(n=(0,Ve.Z)(function*(u){if(!de.D())return Promise.resolve();const h=u+"main";yield de.delete(h)}),function o(u){return n.apply(this,arguments)})($u(i._databaseId,i._persistenceKey)),e.resolve()}catch(n){e.reject(n)}var n})),e.promise}(e._delegate)}}class $h{constructor(e,n,o){this._delegate=n,this._persistenceProvider=o,this.INTERNAL={delete:()=>this.terminate()},e instanceof Da||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const n=this._delegate._getSettings();!e.merge&&n.host!==e.host&&vo("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},n),e)).merge,this._delegate._setSettings(e)}useEmulator(e,n,o={}){!function E_(i,e,n,o={}){var u;const h=(i=Vr(i,kf))._getSettings(),v=`${e}:${n}`;if("firestore.googleapis.com"!==h.host&&h.host!==v&&vo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),i._setSettings(Object.assign(Object.assign({},h),{host:v,ssl:!1})),o.mockUserToken){let P,V;if("string"==typeof o.mockUserToken)P=o.mockUserToken,V=Lr.MOCK_USER;else{P=(0,We.Sg)(o.mockUserToken,null===(u=i._app)||void 0===u?void 0:u.options.projectId);const z=o.mockUserToken.sub||o.mockUserToken.user_id;if(!z)throw new vt(tt.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");V=new Lr(z)}i._authCredentials=new Cu(new Ea(P,V))}}(this._delegate,e,n,o)}enableNetwork(){return function Xv(i){return function v_(i){return i.asyncQueue.enqueue((0,Ve.Z)(function*(){const e=yield Sp(i),n=yield T0(i);return e.setNetworkEnabled(!0),function(u){const h=Ut(u);return h.C_.delete(0),mp(h)}(n)}))}(uo(i=Vr(i,ts)))}(this._delegate)}disableNetwork(){return function ey(i){return function ld(i){return i.asyncQueue.enqueue((0,Ve.Z)(function*(){const e=yield Sp(i),n=yield T0(i);return e.setNetworkEnabled(!1),(o=(0,Ve.Z)(function*(h){const v=Ut(h);v.C_.add(0),yield Bl(v),v.M_.set("Offline")}),function u(h){return o.apply(this,arguments)})(n);var o}))}(uo(i=Vr(i,ts)))}(this._delegate)}enablePersistence(e){let n=!1,o=!1;return e&&(n=!!e.synchronizeTabs,o=!!e.experimentalForceOwningTab,I_("synchronizeTabs",n,"experimentalForceOwningTab",o)),n?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,o)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function Jv(i){return function(n){const o=new Vs;return n.asyncQueue.enqueueAndForget((0,Ve.Z)(function*(){return function pr(i,e){return Cg.apply(this,arguments)}(yield xg(n),o)})),o.promise}(uo(i=Vr(i,ts)))}(this._delegate)}onSnapshotsInSync(e){return function py(i,e){return function jv(i,e){const n=new Ng(e);return i.asyncQueue.enqueueAndForget((0,Ve.Z)(function*(){return u=yield Bh(i),h=n,Ut(u).q_.add(h),void h.next();var u,h})),()=>{n.Na(),i.asyncQueue.enqueueAndForget((0,Ve.Z)(function*(){return u=yield Bh(i),h=n,void Ut(u).q_.delete(h);var u,h}))}}(uo(i=Vr(i,ts)),b_(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new vt("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new zh(this,qv(this._delegate,e))}catch(n){throw Oa(n,"collection()","Firestore.collection()")}}doc(e){try{return new vl(this,Bg(this._delegate,e))}catch(n){throw Oa(n,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new js(this,function C0(i,e){if(i=Vr(i,kf),Vg("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new vt(tt.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Na(i,null,(o=e,new Rs(Jn.emptyPath(),o)));var o}(this._delegate,e))}catch(n){throw Oa(n,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function Ey(i,e,n){i=Vr(i,ts);const o=Object.assign(Object.assign({},nm),n);return function(h){if(h.maxAttempts<1)throw new vt(tt.INVALID_ARGUMENT,"Max attempts must be at least 1")}(o),function(h,v,P){const V=new Vs;return h.asyncQueue.enqueueAndForget((0,Ve.Z)(function*(){const z=yield function __(i){return Ap(i).then(e=>e.datastore)}(h);new I0(h.asyncQueue,z,P,v,V).run()})),V.promise}(uo(i),u=>e(new Iy(i,u)),o)}(this._delegate,n=>e(new j_(this,n)))}batch(){return uo(this._delegate),new My(new L_(this._delegate,e=>Hf(this._delegate,e)))}loadBundle(e){return function ZI(i,e){const n=uo(i=Vr(i,ts)),o=new S0;return function w0(i,e,n,o){const u=function(v,P){let V;return V="string"==typeof v?ul().encode(v):v,ee=function(ee,le){if(ee instanceof Uint8Array)return Lv(ee,void 0);if(ee instanceof ArrayBuffer)return Lv(new Uint8Array(ee),void 0);if(ee instanceof ReadableStream)return ee.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(V),new p_(ee,P);var ee}(n,Cf(e));i.asyncQueue.enqueueAndForget((0,Ve.Z)(function*(){!function h_(i,e,n){const o=Ut(i);var u;(u=(0,Ve.Z)(function*(v,P,V){try{const z=yield P.getMetadata();if(yield function(xt,Ht){const $t=Ut(xt),Fn=Hi(Ht.createTime);return $t.persistence.runTransaction("hasNewerBundle","readonly",Qn=>$t.Kr.getBundleMetadata(Qn,Ht.id)).then(Qn=>!!Qn&&Qn.createTime.compareTo(Fn)>=0)}(v.localStore,z))return yield P.close(),V._completeWith({taskState:"Success",documentsLoaded:(xt=z).totalDocuments,bytesLoaded:xt.totalBytes,totalDocuments:xt.totalDocuments,totalBytes:xt.totalBytes}),Promise.resolve(new Set);V._updateProgress(Qm(z));const ee=new Dv(z,v.localStore,P.serializer);let le=yield P.Ma();for(;le;){const et=yield ee.ea(le);et&&V._updateProgress(et),le=yield P.Ma()}const Ae=yield ee.complete();return yield hc(v,Ae.ra,void 0),yield function(xt,Ht){const $t=Ut(xt);return $t.persistence.runTransaction("Save bundle","readwrite",Fn=>$t.Kr.saveBundleMetadata(Fn,Ht))}(v.localStore,z),V._completeWith(Ae.progress),Promise.resolve(Ae.na)}catch(z){return vo("SyncEngine",`Loading bundle failed with ${z}`),V._failWith(z),Promise.resolve(new Set)}var xt}),function h(v,P,V){return u.apply(this,arguments)})(o,e,n).then(u=>{o.sharedClientState.notifyBundleLoaded(u)})}(yield xg(i),u,o)}))}(n,i._databaseId,e,o),o}(this._delegate,e)}namedQuery(e){return function ty(i,e){return function Fg(i,e){return i.asyncQueue.enqueue((0,Ve.Z)(function*(){return function(o,u){const h=Ut(o);return h.persistence.runTransaction("Get named query","readonly",v=>h.Kr.getNamedQuery(v,u))}(yield Qd(i),e)}))}(uo(i=Vr(i,ts)),e).then(n=>n?new Na(i,null,n.query):null)}(this._delegate,e).then(n=>n?new js(this,n):null)}}class sm extends N_{constructor(e){super(),this.firestore=e}convertBytes(e){return new zf(new Hl(e))}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return vl.forKey(n,this.firestore,null)}}class j_{constructor(e,n){this._firestore=e,this._delegate=n,this._userDataWriter=new sm(e)}get(e){const n=oh(e);return this._delegate.get(n).then(o=>new $p(this._firestore,new fd(this._firestore._delegate,this._userDataWriter,o._key,o._document,o.metadata,n.converter)))}set(e,n,o){const u=oh(e);return o?(im("Transaction.set",o),this._delegate.set(u,n,o)):this._delegate.set(u,n),this}update(e,n,o,...u){const h=oh(e);return 2===arguments.length?this._delegate.update(h,n):this._delegate.update(h,n,o,...u),this}delete(e){const n=oh(e);return this._delegate.delete(n),this}}class My{constructor(e){this._delegate=e}set(e,n,o){const u=oh(e);return o?(im("WriteBatch.set",o),this._delegate.set(u,n,o)):this._delegate.set(u,n),this}update(e,n,o,...u){const h=oh(e);return 2===arguments.length?this._delegate.update(h,n):this._delegate.update(h,n,o,...u),this}delete(e){const n=oh(e);return this._delegate.delete(n),this}commit(){return this._delegate.commit()}}class sh{constructor(e,n,o){this._firestore=e,this._userDataWriter=n,this._delegate=o}fromFirestore(e,n){const o=new Gp(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Wf(this._firestore,o),n??{})}toFirestore(e,n){return n?this._delegate.toFirestore(e,n):this._delegate.toFirestore(e)}static getInstance(e,n){const o=sh.INSTANCES;let u=o.get(e);u||(u=new WeakMap,o.set(e,u));let h=u.get(n);return h||(h=new sh(e,new sm(e),n),u.set(n,h)),h}}sh.INSTANCES=new WeakMap;class vl{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new sm(e)}static forPath(e,n,o){if(e.length%2!=0)throw new vt("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new vl(n,new Os(n._delegate,o,new Gt(e)))}static forKey(e,n,o){return new vl(n,new Os(n._delegate,o,e))}get id(){return this._delegate.id}get parent(){return new zh(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new zh(this.firestore,qv(this._delegate,e))}catch(n){throw Oa(n,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,We.m9)(e))instanceof Os&&Kv(this._delegate,e)}set(e,n){n=im("DocumentReference.set",n);try{return n?hy(this._delegate,e,n):hy(this._delegate,e)}catch(o){throw Oa(o,"setDoc()","DocumentReference.set()")}}update(e,n,...o){try{return 1===arguments.length?fy(this._delegate,e):fy(this._delegate,e,n,...o)}catch(u){throw Oa(u,"updateDoc()","DocumentReference.update()")}}delete(){return function em(i){return Hf(Vr(i.firestore,ts),[new xc(i._key,Oi.none())])}(this._delegate)}onSnapshot(...e){const n=om(e),o=yl(e,u=>new $p(this.firestore,new fd(this.firestore._delegate,this._userDataWriter,u._key,u._document,u.metadata,this._delegate.converter)));return M_(this._delegate,n,o)}get(e){let n;return n="cache"===e?.source?function Jg(i){i=Vr(i,Os);const e=Vr(i.firestore,ts),n=uo(e),o=new ih(e);return function b0(i,e){const n=new Vs;return i.asyncQueue.enqueueAndForget((0,Ve.Z)(function*(){return(o=(0,Ve.Z)(function*(h,v,P){try{const V=yield function(ee,le){const Ae=Ut(ee);return Ae.persistence.runTransaction("read document","readonly",et=>Ae.localDocuments.getDocument(et,le))}(h,v);V.isFoundDocument()?P.resolve(V):V.isNoDocument()?P.resolve(null):P.reject(new vt(tt.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(V){const z=Sf(V,`Failed to get document '${v} from cache`);P.reject(z)}}),function u(h,v,P){return o.apply(this,arguments)})(yield Qd(i),e,n);var o})),n.promise}(n,i._key).then(u=>new fd(e,o,i._key,u,new nh(null!==u&&u.hasLocalMutations,!0),i.converter))}(this._delegate):"server"===e?.source?function Xg(i){i=Vr(i,Os);const e=Vr(i.firestore,ts);return Bv(uo(e),i._key,{source:"server"}).then(n=>x_(e,i,n))}(this._delegate):function O_(i){i=Vr(i,Os);const e=Vr(i.firestore,ts);return Bv(uo(e),i._key).then(n=>x_(e,i,n))}(this._delegate),n.then(o=>new $p(this.firestore,new fd(this.firestore._delegate,this._userDataWriter,o._key,o._document,o.metadata,this._delegate.converter)))}withConverter(e){return new vl(this.firestore,this._delegate.withConverter(e?sh.getInstance(this.firestore,e):null))}}function Oa(i,e,n){return i.message=i.message.replace(e,n),i}function om(i){for(const e of i)if("object"==typeof e&&!U_(e))return e;return{}}function yl(i,e){var n,o;let u;return u=U_(i[0])?i[0]:U_(i[1])?i[1]:"function"==typeof i[0]?{next:i[0],error:i[1],complete:i[2]}:{next:i[1],error:i[2],complete:i[3]},{next:h=>{u.next&&u.next(e(h))},error:null===(n=u.error)||void 0===n?void 0:n.bind(u),complete:null===(o=u.complete)||void 0===o?void 0:o.bind(u)}}class $p{constructor(e,n){this._firestore=e,this._delegate=n}get ref(){return new vl(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,n){return this._delegate.get(e,n)}isEqual(e){return Qg(this._delegate,e._delegate)}}class Wf extends $p{data(e){const n=this._delegate.data(e);return function Un(i,e){i||tn()}(void 0!==n),n}}class js{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new sm(e)}where(e,n,o){try{return new js(this.firestore,Gh(this._delegate,function P0(i,e,n){const o=e,u=zg("where",i);return kp._create(u,o,n)}(e,n,o)))}catch(u){throw Oa(u,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,n){try{return new js(this.firestore,Gh(this._delegate,function qg(i,e="asc"){const n=e,o=zg("orderBy",i);return Fp._create(o,n)}(e,n)))}catch(o){throw Oa(o,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new js(this.firestore,Gh(this._delegate,function Vp(i){return xf("limit",i),Lp._create("limit",i,"F")}(e)))}catch(n){throw Oa(n,"limit()","Query.limit()")}}limitToLast(e){try{return new js(this.firestore,Gh(this._delegate,function uy(i){return xf("limitToLast",i),Lp._create("limitToLast",i,"L")}(e)))}catch(n){throw Oa(n,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new js(this.firestore,Gh(this._delegate,function Bp(...i){return Kg._create("startAt",i,!0)}(...e)))}catch(n){throw Oa(n,"startAt()","Query.startAt()")}}startAfter(...e){try{return new js(this.firestore,Gh(this._delegate,function M0(...i){return Kg._create("startAfter",i,!1)}(...e)))}catch(n){throw Oa(n,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new js(this.firestore,Gh(this._delegate,function x0(...i){return Yg._create("endBefore",i,!1)}(...e)))}catch(n){throw Oa(n,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new js(this.firestore,Gh(this._delegate,function k0(...i){return Yg._create("endAt",i,!0)}(...e)))}catch(n){throw Oa(n,"endAt()","Query.endAt()")}}isEqual(e){return T_(this._delegate,e._delegate)}get(e){let n;return n="cache"===e?.source?function dy(i){i=Vr(i,Na);const e=Vr(i.firestore,ts),n=uo(e),o=new ih(e);return function y_(i,e){const n=new Vs;return i.asyncQueue.enqueueAndForget((0,Ve.Z)(function*(){return(o=(0,Ve.Z)(function*(h,v,P){try{const V=yield Oh(h,v,!0),z=new Tp(v,V.ls),ee=z.ca(V.documents),le=z.applyChanges(ee,!1);P.resolve(le.snapshot)}catch(V){const z=Sf(V,`Failed to execute query '${v} against cache`);P.reject(z)}}),function u(h,v,P){return o.apply(this,arguments)})(yield Qd(i),e,n);var o})),n.promise}(n,i._query).then(u=>new rh(e,o,i,u))}(this._delegate):"server"===e?.source?function G0(i){i=Vr(i,Na);const e=Vr(i.firestore,ts),n=uo(e),o=new ih(e);return Uv(n,i._query,{source:"server"}).then(u=>new rh(e,o,i,u))}(this._delegate):function P_(i){i=Vr(i,Na);const e=Vr(i.firestore,ts),n=uo(e),o=new ih(e);return sy(i._query),Uv(n,i._query).then(u=>new rh(e,o,i,u))}(this._delegate),n.then(o=>new gc(this.firestore,new rh(this.firestore._delegate,this._userDataWriter,this._delegate,o._snapshot)))}onSnapshot(...e){const n=om(e),o=yl(e,u=>new gc(this.firestore,new rh(this.firestore._delegate,this._userDataWriter,this._delegate,u._snapshot)));return M_(this._delegate,n,o)}withConverter(e){return new js(this.firestore,this._delegate.withConverter(e?sh.getInstance(this.firestore,e):null))}}class Il{constructor(e,n){this._firestore=e,this._delegate=n}get type(){return this._delegate.type}get doc(){return new Wf(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class gc{constructor(e,n){this._firestore=e,this._delegate=n}get query(){return new js(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new Wf(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(n=>new Il(this._firestore,n))}forEach(e,n){this._delegate.forEach(o=>{e.call(n,new Wf(this._firestore,o))})}isEqual(e){return Qg(this._delegate,e._delegate)}}class zh extends js{constructor(e,n){super(e,n),this.firestore=e,this._delegate=n}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new vl(this.firestore,e):null}doc(e){try{return new vl(this.firestore,void 0===e?Bg(this._delegate):Bg(this._delegate,e))}catch(n){throw Oa(n,"doc()","CollectionReference.doc()")}}add(e){return function tm(i,e){const n=Vr(i.firestore,ts),o=Bg(i),u=Gf(i.converter,e);return Hf(n,[hd(Gc(i.firestore),"addDoc",o._key,u,null!==i.converter,{}).toMutation(o._key,Oi.exists(!1))]).then(()=>o)}(this._delegate,e).then(n=>new vl(this.firestore,n))}isEqual(e){return Kv(this._delegate,e._delegate)}withConverter(e){return new zh(this.firestore,this._delegate.withConverter(e?sh.getInstance(this.firestore,e):null))}}function oh(i){return Vr(i,Os)}class G_{constructor(...e){this._delegate=new dd(...e)}static documentId(){return new G_(li.keyField().canonicalString())}isEqual(e){return(e=(0,We.m9)(e))instanceof dd&&this._delegate._internalPath.isEqual(e._internalPath)}}class Wh{constructor(e){this._delegate=e}static serverTimestamp(){const e=function by(){return new Xd("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new Wh(e)}static delete(){const e=function Ty(){return new $l("deleteField")}();return e._methodName="FieldValue.delete",new Wh(e)}static arrayUnion(...e){const n=function wy(...i){return new Ff("arrayUnion",i)}(...e);return n._methodName="FieldValue.arrayUnion",new Wh(n)}static arrayRemove(...e){const n=function Dy(...i){return new Lf("arrayRemove",i)}(...e);return n._methodName="FieldValue.arrayRemove",new Wh(n)}static increment(e){const n=function rm(i){return new Vf("increment",i)}(e);return n._methodName="FieldValue.increment",new Wh(n)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const eI={Firestore:$h,GeoPoint:pc,Timestamp:Ar,Blob:zf,Transaction:j_,WriteBatch:My,DocumentReference:vl,DocumentSnapshot:$p,Query:js,QueryDocumentSnapshot:Wf,QuerySnapshot:gc,CollectionReference:zh,FieldPath:G_,FieldValue:Wh,setLogLevel:function X0(i){!function Ba(i){Ia.setLogLevel(i)}(i)},CACHE_SIZE_UNLIMITED:-1};function $_(i,e){return function nI(i,e=ye.z){return new Ne.y(n=>{let o;return null!=e?e.schedule(()=>{o=i.onSnapshot({includeMetadataChanges:!0},n)}):o=i.onSnapshot({includeMetadataChanges:!0},n),()=>{o?.()}})}(i,e)}function z_(i,e){return $_(i,e).pipe((0,it.U)(n=>({payload:n,type:"query"})))}!function H_(i){(function tI(i,e){i.INTERNAL.registerComponent(new $e.wA("firestore-compat",n=>{const o=n.getProvider("app-compat").getImmediate(),u=n.getProvider("firestore").getImmediate();return e(o,u)},"PUBLIC").setServiceProps(Object.assign({},eI)))})(i,(e,n)=>new $h(e,n,new Py)),i.registerVersion("@firebase/firestore-compat","0.3.20")}(Jt.Z),H(7142);class W_{ref;afs;constructor(e,n){this.ref=e,this.afs=n}set(e,n){return this.ref.set(e,n)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,n){const o=this.ref.collection(e),{ref:u,query:h}=Q_(o,n);return new ky(u,h,this.afs)}snapshotChanges(){return function rI(i,e){return $_(i,e).pipe((0,pe.O)(void 0),dt(),(0,it.U)(n=>{const[o,u]=n;return u.exists?o?.exists?{payload:u,type:"modified"}:{payload:u,type:"added"}:{payload:u,type:"removed"}}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(oe.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,it.U)(({payload:n})=>e.idField?{...n.data(),[e.idField]:n.id}:n.data()))}get(e){return(0,I.D)(this.ref.get(e)).pipe(oe.iC)}}function zp(i,e){return z_(i,e).pipe((0,pe.O)(void 0),dt(),(0,it.U)(n=>{const[o,u]=n,h=u.payload.docChanges(),v=h.map(P=>({type:P.type,payload:P}));return o&&JSON.stringify(o.payload.metadata)!==JSON.stringify(u.payload.metadata)&&u.payload.docs.forEach((P,V)=>{const z=h.find(le=>le.doc.ref.isEqual(P.ref)),ee=o?.payload.docs.find(le=>le.ref.isEqual(P.ref));z&&JSON.stringify(z.doc.metadata)===JSON.stringify(P.metadata)||!z&&ee&&JSON.stringify(ee.metadata)===JSON.stringify(P.metadata)||v.push({type:"modified",payload:{oldIndex:V,newIndex:V,type:"modified",doc:P}})}),v}))}function Wp(i,e,n){return zp(i,n).pipe((0,It.R)((o,u)=>function iI(i,e,n){return e.forEach(o=>{n.indexOf(o.type)>-1&&(i=function xy(i,e){switch(e.type){case"added":if(!i[e.newIndex]||!i[e.newIndex].doc.ref.isEqual(e.doc.ref))return um(i,e.newIndex,0,e);break;case"modified":if(null==i[e.oldIndex]||i[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const n=i.slice();return n.splice(e.oldIndex,1),n.splice(e.newIndex,0,e),n}return um(i,e.newIndex,1,e)}break;case"removed":if(i[e.oldIndex]&&i[e.oldIndex].doc.ref.isEqual(e.doc.ref))return um(i,e.oldIndex,1)}return i}(i,o))}),i}(o,u.map(h=>h.payload),e),[]),(0,ct.x)(),(0,it.U)(o=>o.map(u=>({type:u.type,payload:u}))))}function um(i,e,n,...o){const u=i.slice();return u.splice(e,n,...o),u}function q_(i){return(!i||0===i.length)&&(i=["added","removed","modified"]),i}class ky{ref;query;afs;constructor(e,n,o){this.ref=e,this.query=n,this.afs=o}stateChanges(e){let n=zp(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(n=n.pipe((0,it.U)(o=>o.filter(u=>e.indexOf(u.type)>-1)))),n.pipe((0,pe.O)(void 0),dt(),(0,Ct.h)(([o,u])=>u.length>0||!o),(0,it.U)(([,o])=>o),oe.iC)}auditTrail(e){return this.stateChanges(e).pipe((0,It.R)((n,o)=>[...n,...o],[]))}snapshotChanges(e){const n=q_(e);return Wp(this.query,n,this.afs.schedulers.outsideAngular).pipe(oe.iC)}valueChanges(e={}){return z_(this.query,this.afs.schedulers.outsideAngular).pipe((0,it.U)(n=>n.payload.docs.map(o=>e.idField?{...o.data(),[e.idField]:o.id}:o.data())),oe.iC)}get(e){return(0,I.D)(this.query.get(e)).pipe(oe.iC)}add(e){return this.ref.add(e)}doc(e){return new W_(this.ref.doc(e),this.afs)}}class sI{query;afs;constructor(e,n){this.query=e,this.afs=n}stateChanges(e){return e&&0!==e.length?zp(this.query,this.afs.schedulers.outsideAngular).pipe((0,it.U)(n=>n.filter(o=>e.indexOf(o.type)>-1)),(0,Ct.h)(n=>n.length>0),oe.iC):zp(this.query,this.afs.schedulers.outsideAngular).pipe(oe.iC)}auditTrail(e){return this.stateChanges(e).pipe((0,It.R)((n,o)=>[...n,...o],[]))}snapshotChanges(e){const n=q_(e);return Wp(this.query,n,this.afs.schedulers.outsideAngular).pipe(oe.iC)}valueChanges(e={}){return z_(this.query,this.afs.schedulers.outsideAngular).pipe((0,it.U)(o=>o.payload.docs.map(u=>e.idField?{[e.idField]:u.id,...u.data()}:u.data())),oe.iC)}get(e){return(0,I.D)(this.query.get(e)).pipe(oe.iC)}}const K_=new fe.OlP("angularfire2.enableFirestorePersistence"),cm=new fe.OlP("angularfire2.firestore.persistenceSettings"),Y_=new fe.OlP("angularfire2.firestore.settings"),Z_=new fe.OlP("angularfire2.firestore.use-emulator");function Q_(i,e=(n=>n)){return{query:e(i),ref:i}}let Fy=(()=>{class i{schedulers;firestore;persistenceEnabled$;constructor(n,o,u,h,v,P,V,z,ee,le,Ae,et,xt,Ht,$t,Fn,Qn){this.schedulers=V;const Mn=(0,Ce.on)(n,P,o),Nr=ee;le&&(0,De.nw)(Mn,P,Ae,xt,Ht,$t,et,Fn),[this.firestore,this.persistenceEnabled$]=(0,Ce.cc)(`${Mn.name}.firestore`,"AngularFirestore",Mn.name,()=>{const oi=P.runOutsideAngular(()=>Mn.firestore());if(h&&oi.settings(h),Nr&&oi.useEmulator(...Nr),u&&!(0,y.PM)(v)){const fi=()=>{try{return(0,I.D)(oi.enablePersistence(z||void 0).then(()=>!0,()=>!1))}catch(wo){return typeof console<"u"&&console.warn(wo),(0,ze.of)(!1)}};return[oi,P.runOutsideAngular(fi)]}return[oi,(0,ze.of)(!1)]},[h,Nr,u])}collection(n,o){let u;u="string"==typeof n?this.firestore.collection(n):n;const{ref:h,query:v}=Q_(u,o),P=this.schedulers.ngZone.run(()=>h);return new ky(P,v,this)}collectionGroup(n,o){const u=o||(v=>v),h=this.firestore.collectionGroup(n);return new sI(u(h),this)}doc(n){let o;o="string"==typeof n?this.firestore.doc(n):n;const u=this.schedulers.ngZone.run(()=>o);return new W_(u,this)}createId(){return this.firestore.collection("_").doc().id}static \u0275fac=function(o){return new(o||i)(fe.LFG(Ce.Dh),fe.LFG(Ce.xv,8),fe.LFG(K_,8),fe.LFG(Y_,8),fe.LFG(fe.Lbi),fe.LFG(fe.R0b),fe.LFG(oe.HU),fe.LFG(cm,8),fe.LFG(Z_,8),fe.LFG(De.zQ,8),fe.LFG(De.Qv,8),fe.LFG(De.L6,8),fe.LFG(De._Q,8),fe.LFG(De.rT,8),fe.LFG(De.lh,8),fe.LFG(De.f7,8),fe.LFG(oe.Rf,8))};static \u0275prov=fe.Yz7({token:i,factory:i.\u0275fac,providedIn:"any"})}return i})()},7217:(zt,Ye,H)=>{H.d(Ye,{Dh:()=>I,GT:()=>ye,cc:()=>it,hO:()=>dt,on:()=>pe,pX:()=>De,xv:()=>ze});var y=H(5879),fe=H(8326),oe=H(7142);const Ce=["ngOnDestroy"],De=(lt,Jt,Ve,Le={})=>new Proxy(lt,{get:($e,Oe)=>Ve.runOutsideAngular(()=>{if(lt[Oe])return Le?.spy?.get&&Le.spy.get(Oe,lt[Oe]),lt[Oe];if(Ce.indexOf(Oe)>-1)return()=>{};const We=Jt.toPromise().then(at=>{const mt=at?.[Oe];return"function"==typeof mt?mt.bind(at):mt?.then?mt.then(ue=>Ve.run(()=>ue)):Ve.run(()=>mt)});return new Proxy(()=>{},{get:(at,mt)=>We[mt],apply:(at,mt,ue)=>We.then(Kt=>{const Et=Kt?.(...ue);return Le?.spy?.apply&&Le.spy.apply(Oe,ue,Et),Et})})})}),ye=(lt,Jt)=>{Jt.forEach(Ve=>{Object.getOwnPropertyNames(Ve.prototype||Ve).forEach(Le=>{Object.defineProperty(lt.prototype,Le,Object.getOwnPropertyDescriptor(Ve.prototype||Ve,Le))})})};class Ne{constructor(Jt){return Jt}}const I=new y.OlP("angularfire2.app.options"),ze=new y.OlP("angularfire2.app.name");function pe(lt,Jt,Ve){const $e="object"==typeof Ve&&Ve||{};$e.name=$e.name||"string"==typeof Ve&&Ve||"[DEFAULT]";const We=oe.Z.apps.filter(at=>at&&at.name===$e.name)[0]||Jt.runOutsideAngular(()=>oe.Z.initializeApp(lt,$e));try{if(JSON.stringify(lt)!==JSON.stringify(We.options)){const at=!!module.hot;me("error",`${We.name} Firebase App already initialized with different options${at?", you may need to reload as Firebase is not HMR aware.":"."}`)}}catch{}return new Ne(We)}const me=(lt,...Jt)=>{(0,y.X6Q)()&&typeof console<"u"&&console[lt](...Jt)},xe={provide:Ne,useFactory:pe,deps:[I,y.R0b,[new y.FiY,ze]]};let dt=(()=>{class lt{static initializeApp(Ve,Le){return{ngModule:lt,providers:[{provide:I,useValue:Ve},{provide:ze,useValue:Le}]}}constructor(Ve){oe.Z.registerVersion("angularfire",fe.q4.full,"core"),oe.Z.registerVersion("angularfire",fe.q4.full,"app-compat"),oe.Z.registerVersion("angular",y.q4F.full,Ve.toString())}static \u0275fac=function(Le){return new(Le||lt)(y.LFG(y.Lbi))};static \u0275mod=y.oAB({type:lt});static \u0275inj=y.cJS({providers:[xe]})}return lt})();function it(lt,Jt,Ve,Le,$e){const[,Oe,We]=globalThis.\u0275AngularfireInstanceCache.find(at=>at[0]===lt)||[];if(Oe)return function It(lt,Jt){try{return lt.toString()===Jt.toString()}catch{return lt===Jt}}($e,We)||(Ct("error",`${Jt} was already initialized on the ${Ve} Firebase App with different settings.${ct?" You may need to reload as Firebase is not HMR aware.":""}`),Ct("warn",{is:$e,was:We})),Oe;{const at=Le();return globalThis.\u0275AngularfireInstanceCache.push([lt,at,$e]),at}}const ct=typeof module<"u"&&!!module.hot,Ct=(lt,...Jt)=>{(0,y.X6Q)()&&typeof console<"u"&&console[lt](...Jt)};globalThis.\u0275AngularfireInstanceCache||=[]},8326:(zt,Ye,H)=>{H.d(Ye,{q4:()=>It,iC:()=>$n,HU:()=>We,Rf:()=>Jt});var y=H(5879),fe=H(534);(0,fe.registerVersion)("firebase","10.5.1","app");var De=H(1954),Ne=H(2631);const ze=new class I extends Ne.v{}(class ye extends De.o{constructor(Pt,Ie){super(Pt,Ie),this.scheduler=Pt,this.work=Ie}schedule(Pt,Ie=0){return Ie>0?super.schedule(Pt,Ie):(this.delay=Ie,this.state=Pt,this.scheduler.flush(this),this)}execute(Pt,Ie){return Ie>0||this.closed?super.execute(Pt,Ie):this._execute(Pt,Ie)}requestAsyncId(Pt,Ie,we=0){return null!=we&&we>0||null==we&&this.delay>0?super.requestAsyncId(Pt,Ie,we):(Pt.flush(this),0)}});var me=H(6321),xe=H(9397),dt=H(5137),it=H(3093);const It=new y.GfV("ANGULARFIRE2_VERSION");class Jt{constructor(){return((Zt,Pt)=>{const Ie=(0,fe.getApps)(),we=[];return Ie.forEach(He=>{He.container.getProvider(Zt).instances.forEach(Fe=>{we.includes(Fe)||we.push(Fe)})}),we})(Ve)}}const Ve="app-check";function Le(){}class $e{zone;delegate;constructor(Pt,Ie=ze){this.zone=Pt,this.delegate=Ie}now(){return this.delegate.now()}schedule(Pt,Ie,we){const He=this.zone;return this.delegate.schedule(function(Fe){He.runGuarded(()=>{Pt.apply(this,[Fe])})},Ie,we)}}class Oe{zone;task=null;constructor(Pt){this.zone=Pt}call(Pt,Ie){const we=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Le,{},Le,Le)),Ie.pipe((0,xe.b)({next:we,complete:we,error:we})).subscribe(Pt).add(we)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let We=(()=>{class Zt{ngZone;outsideAngular;insideAngular;constructor(Ie){this.ngZone=Ie,this.outsideAngular=Ie.runOutsideAngular(()=>new $e(Zone.current)),this.insideAngular=Ie.run(()=>new $e(Zone.current,me.z)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(we){return new(we||Zt)(y.LFG(y.R0b))};static \u0275prov=y.Yz7({token:Zt,factory:Zt.\u0275fac,providedIn:"root"})}return Zt})();function $n(Zt){return function Dn(Zt){return function(Ie){return(Ie=Ie.lift(new Oe(Zt.ngZone))).pipe((0,dt.R)(Zt.outsideAngular),(0,it.Q)(Zt.insideAngular))}}(function at(){const Zt=globalThis.\u0275AngularFireScheduler;if(!Zt)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return Zt}())(Zt)}},95:(zt,Ye,H)=>{H.d(Ye,{Wl:()=>Ct,Fj:()=>Le,qu:()=>So,NI:()=>Zi,u:()=>yr,sg:()=>Lt,u5:()=>$o,Cf:()=>We,JU:()=>It,JJ:()=>rn,JL:()=>hn,F:()=>ur,On:()=>Uo,YN:()=>Ts,wV:()=>Is,UX:()=>ma,EJ:()=>yi,kI:()=>ue,_Y:()=>lo,Kr:()=>Li});var y=H(5879),fe=H(6814),oe=H(2459),Ce=H(5592),De=H(7453),ye=H(4829),Ne=H(9940),I=H(8251),ze=H(7400),pe=H(2714),xe=H(7398);let dt=(()=>{class W{constructor(B,se){this._renderer=B,this._elementRef=se,this.onChange=be=>{},this.onTouched=()=>{}}setProperty(B,se){this._renderer.setProperty(this._elementRef.nativeElement,B,se)}registerOnTouched(B){this.onTouched=B}registerOnChange(B){this.onChange=B}setDisabledState(B){this.setProperty("disabled",B)}static#e=this.\u0275fac=function(se){return new(se||W)(y.Y36(y.Qsj),y.Y36(y.SBq))};static#t=this.\u0275dir=y.lG2({type:W})}return W})(),it=(()=>{class W extends dt{static#e=this.\u0275fac=function(){let B;return function(be){return(B||(B=y.n5z(W)))(be||W)}}();static#t=this.\u0275dir=y.lG2({type:W,features:[y.qOj]})}return W})();const It=new y.OlP("NgValueAccessor"),ct={provide:It,useExisting:(0,y.Gpc)(()=>Ct),multi:!0};let Ct=(()=>{class W extends it{writeValue(B){this.setProperty("checked",B)}static#e=this.\u0275fac=function(){let B;return function(be){return(B||(B=y.n5z(W)))(be||W)}}();static#t=this.\u0275dir=y.lG2({type:W,selectors:[["input","type","checkbox","formControlName",""],["input","type","checkbox","formControl",""],["input","type","checkbox","ngModel",""]],hostBindings:function(se,be){1&se&&y.NdJ("change",function(Tn){return be.onChange(Tn.target.checked)})("blur",function(){return be.onTouched()})},features:[y._Bn([ct]),y.qOj]})}return W})();const lt={provide:It,useExisting:(0,y.Gpc)(()=>Le),multi:!0},Ve=new y.OlP("CompositionEventMode");let Le=(()=>{class W extends dt{constructor(B,se,be){super(B,se),this._compositionMode=be,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function Jt(){const W=(0,fe.q)()?(0,fe.q)().getUserAgent():"";return/android (\d+)/.test(W.toLowerCase())}())}writeValue(B){this.setProperty("value",B??"")}_handleInput(B){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(B)}_compositionStart(){this._composing=!0}_compositionEnd(B){this._composing=!1,this._compositionMode&&this.onChange(B)}static#e=this.\u0275fac=function(se){return new(se||W)(y.Y36(y.Qsj),y.Y36(y.SBq),y.Y36(Ve,8))};static#t=this.\u0275dir=y.lG2({type:W,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(se,be){1&se&&y.NdJ("input",function(Tn){return be._handleInput(Tn.target.value)})("blur",function(){return be.onTouched()})("compositionstart",function(){return be._compositionStart()})("compositionend",function(Tn){return be._compositionEnd(Tn.target.value)})},features:[y._Bn([lt]),y.qOj]})}return W})();function $e(W){return null==W||("string"==typeof W||Array.isArray(W))&&0===W.length}function Oe(W){return null!=W&&"number"==typeof W.length}const We=new y.OlP("NgValidators"),at=new y.OlP("NgAsyncValidators"),mt=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class ue{static min(q){return function Kt(W){return q=>{if($e(q.value)||$e(W))return null;const B=parseFloat(q.value);return!isNaN(B)&&B<W?{min:{min:W,actual:q.value}}:null}}(q)}static max(q){return function Et(W){return q=>{if($e(q.value)||$e(W))return null;const B=parseFloat(q.value);return!isNaN(B)&&B>W?{max:{max:W,actual:q.value}}:null}}(q)}static required(q){return function $n(W){return $e(W.value)?{required:!0}:null}(q)}static requiredTrue(q){return function Dn(W){return!0===W.value?null:{required:!0}}(q)}static email(q){return function gr(W){return $e(W.value)||mt.test(W.value)?null:{email:!0}}(q)}static minLength(q){return function or(W){return q=>$e(q.value)||!Oe(q.value)?null:q.value.length<W?{minlength:{requiredLength:W,actualLength:q.value.length}}:null}(q)}static maxLength(q){return function Zt(W){return q=>Oe(q.value)&&q.value.length>W?{maxlength:{requiredLength:W,actualLength:q.value.length}}:null}(q)}static pattern(q){return function Pt(W){if(!W)return Ie;let q,B;return"string"==typeof W?(B="","^"!==W.charAt(0)&&(B+="^"),B+=W,"$"!==W.charAt(W.length-1)&&(B+="$"),q=new RegExp(B)):(B=W.toString(),q=W),se=>{if($e(se.value))return null;const be=se.value;return q.test(be)?null:{pattern:{requiredPattern:B,actualValue:be}}}}(q)}static nullValidator(q){return null}static compose(q){return wt(q)}static composeAsync(q){return Ft(q)}}function Ie(W){return null}function we(W){return null!=W}function He(W){return(0,y.QGY)(W)?(0,oe.D)(W):W}function Pe(W){let q={};return W.forEach(B=>{q=null!=B?{...q,...B}:q}),0===Object.keys(q).length?null:q}function Fe(W,q){return q.map(B=>B(W))}function Nt(W){return W.map(q=>function Ze(W){return!W.validate}(q)?q:B=>q.validate(B))}function wt(W){if(!W)return null;const q=W.filter(we);return 0==q.length?null:function(B){return Pe(Fe(B,q))}}function nr(W){return null!=W?wt(Nt(W)):null}function Ft(W){if(!W)return null;const q=W.filter(we);return 0==q.length?null:function(B){return function me(...W){const q=(0,Ne.jO)(W),{args:B,keys:se}=(0,De.D)(W),be=new Ce.y(nn=>{const{length:Tn}=B;if(!Tn)return void nn.complete();const Vi=new Array(Tn);let ss=Tn,po=Tn;for(let No=0;No<Tn;No++){let Bi=!1;(0,ye.Xf)(B[No]).subscribe((0,I.x)(nn,os=>{Bi||(Bi=!0,po--),Vi[No]=os},()=>ss--,void 0,()=>{(!ss||!Bi)&&(po||nn.next(se?(0,pe.n)(se,Vi):Vi),nn.complete())}))}});return q?be.pipe((0,ze.Z)(q)):be}(Fe(B,q).map(He)).pipe((0,xe.U)(Pe))}}function ln(W){return null!=W?Ft(Nt(W)):null}function on(W,q){return null===W?[q]:Array.isArray(W)?[...W,q]:[W,q]}function Sn(W){return W._rawValidators}function xn(W){return W._rawAsyncValidators}function Rn(W){return W?Array.isArray(W)?W:[W]:[]}function _e(W,q){return Array.isArray(W)?W.includes(q):W===q}function Se(W,q){const B=Rn(q);return Rn(W).forEach(be=>{_e(B,be)||B.push(be)}),B}function je(W,q){return Rn(q).filter(B=>!_e(W,B))}class ot{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(q){this._rawValidators=q||[],this._composedValidatorFn=nr(this._rawValidators)}_setAsyncValidators(q){this._rawAsyncValidators=q||[],this._composedAsyncValidatorFn=ln(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(q){this._onDestroyCallbacks.push(q)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(q=>q()),this._onDestroyCallbacks=[]}reset(q=void 0){this.control&&this.control.reset(q)}hasError(q,B){return!!this.control&&this.control.hasError(q,B)}getError(q,B){return this.control?this.control.getError(q,B):null}}class ft extends ot{get formDirective(){return null}get path(){return null}}class Mt extends ot{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class Nn{constructor(q){this._cd=q}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let rn=(()=>{class W extends Nn{constructor(B){super(B)}static#e=this.\u0275fac=function(se){return new(se||W)(y.Y36(Mt,2))};static#t=this.\u0275dir=y.lG2({type:W,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(se,be){2&se&&y.ekj("ng-untouched",be.isUntouched)("ng-touched",be.isTouched)("ng-pristine",be.isPristine)("ng-dirty",be.isDirty)("ng-valid",be.isValid)("ng-invalid",be.isInvalid)("ng-pending",be.isPending)},features:[y.qOj]})}return W})(),hn=(()=>{class W extends Nn{constructor(B){super(B)}static#e=this.\u0275fac=function(se){return new(se||W)(y.Y36(ft,10))};static#t=this.\u0275dir=y.lG2({type:W,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(se,be){2&se&&y.ekj("ng-untouched",be.isUntouched)("ng-touched",be.isTouched)("ng-pristine",be.isPristine)("ng-dirty",be.isDirty)("ng-valid",be.isValid)("ng-invalid",be.isInvalid)("ng-pending",be.isPending)("ng-submitted",be.isSubmitted)},features:[y.qOj]})}return W})();const gi="VALID",Di="INVALID",Mi="PENDING",Ci="DISABLED";function Te(W){return(ae(W)?W.validators:W)||null}function re(W,q){return(ae(q)?q.asyncValidators:W)||null}function ae(W){return null!=W&&!Array.isArray(W)&&"object"==typeof W}function Re(W,q,B){const se=W.controls;if(!(q?Object.keys(se):se).length)throw new y.vHH(1e3,"");if(!se[B])throw new y.vHH(1001,"")}function ht(W,q,B){W._forEachChild((se,be)=>{if(void 0===B[be])throw new y.vHH(1002,"")})}class St{constructor(q,B){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(q),this._assignAsyncValidators(B)}get validator(){return this._composedValidatorFn}set validator(q){this._rawValidators=this._composedValidatorFn=q}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(q){this._rawAsyncValidators=this._composedAsyncValidatorFn=q}get parent(){return this._parent}get valid(){return this.status===gi}get invalid(){return this.status===Di}get pending(){return this.status==Mi}get disabled(){return this.status===Ci}get enabled(){return this.status!==Ci}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(q){this._assignValidators(q)}setAsyncValidators(q){this._assignAsyncValidators(q)}addValidators(q){this.setValidators(Se(q,this._rawValidators))}addAsyncValidators(q){this.setAsyncValidators(Se(q,this._rawAsyncValidators))}removeValidators(q){this.setValidators(je(q,this._rawValidators))}removeAsyncValidators(q){this.setAsyncValidators(je(q,this._rawAsyncValidators))}hasValidator(q){return _e(this._rawValidators,q)}hasAsyncValidator(q){return _e(this._rawAsyncValidators,q)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(q={}){this.touched=!0,this._parent&&!q.onlySelf&&this._parent.markAsTouched(q)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(q=>q.markAllAsTouched())}markAsUntouched(q={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(B=>{B.markAsUntouched({onlySelf:!0})}),this._parent&&!q.onlySelf&&this._parent._updateTouched(q)}markAsDirty(q={}){this.pristine=!1,this._parent&&!q.onlySelf&&this._parent.markAsDirty(q)}markAsPristine(q={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(B=>{B.markAsPristine({onlySelf:!0})}),this._parent&&!q.onlySelf&&this._parent._updatePristine(q)}markAsPending(q={}){this.status=Mi,!1!==q.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!q.onlySelf&&this._parent.markAsPending(q)}disable(q={}){const B=this._parentMarkedDirty(q.onlySelf);this.status=Ci,this.errors=null,this._forEachChild(se=>{se.disable({...q,onlySelf:!0})}),this._updateValue(),!1!==q.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...q,skipPristineCheck:B}),this._onDisabledChange.forEach(se=>se(!0))}enable(q={}){const B=this._parentMarkedDirty(q.onlySelf);this.status=gi,this._forEachChild(se=>{se.enable({...q,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:q.emitEvent}),this._updateAncestors({...q,skipPristineCheck:B}),this._onDisabledChange.forEach(se=>se(!1))}_updateAncestors(q){this._parent&&!q.onlySelf&&(this._parent.updateValueAndValidity(q),q.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(q){this._parent=q}getRawValue(){return this.value}updateValueAndValidity(q={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===gi||this.status===Mi)&&this._runAsyncValidator(q.emitEvent)),!1!==q.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!q.onlySelf&&this._parent.updateValueAndValidity(q)}_updateTreeValidity(q={emitEvent:!0}){this._forEachChild(B=>B._updateTreeValidity(q)),this.updateValueAndValidity({onlySelf:!0,emitEvent:q.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Ci:gi}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(q){if(this.asyncValidator){this.status=Mi,this._hasOwnPendingAsyncValidator=!0;const B=He(this.asyncValidator(this));this._asyncValidationSubscription=B.subscribe(se=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(se,{emitEvent:q})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(q,B={}){this.errors=q,this._updateControlsErrors(!1!==B.emitEvent)}get(q){let B=q;return null==B||(Array.isArray(B)||(B=B.split(".")),0===B.length)?null:B.reduce((se,be)=>se&&se._find(be),this)}getError(q,B){const se=B?this.get(B):this;return se&&se.errors?se.errors[q]:null}hasError(q,B){return!!this.getError(q,B)}get root(){let q=this;for(;q._parent;)q=q._parent;return q}_updateControlsErrors(q){this.status=this._calculateStatus(),q&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(q)}_initObservables(){this.valueChanges=new y.vpe,this.statusChanges=new y.vpe}_calculateStatus(){return this._allControlsDisabled()?Ci:this.errors?Di:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Mi)?Mi:this._anyControlsHaveStatus(Di)?Di:gi}_anyControlsHaveStatus(q){return this._anyControls(B=>B.status===q)}_anyControlsDirty(){return this._anyControls(q=>q.dirty)}_anyControlsTouched(){return this._anyControls(q=>q.touched)}_updatePristine(q={}){this.pristine=!this._anyControlsDirty(),this._parent&&!q.onlySelf&&this._parent._updatePristine(q)}_updateTouched(q={}){this.touched=this._anyControlsTouched(),this._parent&&!q.onlySelf&&this._parent._updateTouched(q)}_registerOnCollectionChange(q){this._onCollectionChange=q}_setUpdateStrategy(q){ae(q)&&null!=q.updateOn&&(this._updateOn=q.updateOn)}_parentMarkedDirty(q){return!q&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(q){return null}_assignValidators(q){this._rawValidators=Array.isArray(q)?q.slice():q,this._composedValidatorFn=function ie(W){return Array.isArray(W)?nr(W):W||null}(this._rawValidators)}_assignAsyncValidators(q){this._rawAsyncValidators=Array.isArray(q)?q.slice():q,this._composedAsyncValidatorFn=function ne(W){return Array.isArray(W)?ln(W):W||null}(this._rawAsyncValidators)}}class Bt extends St{constructor(q,B,se){super(Te(B),re(se,B)),this.controls=q,this._initObservables(),this._setUpdateStrategy(B),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(q,B){return this.controls[q]?this.controls[q]:(this.controls[q]=B,B.setParent(this),B._registerOnCollectionChange(this._onCollectionChange),B)}addControl(q,B,se={}){this.registerControl(q,B),this.updateValueAndValidity({emitEvent:se.emitEvent}),this._onCollectionChange()}removeControl(q,B={}){this.controls[q]&&this.controls[q]._registerOnCollectionChange(()=>{}),delete this.controls[q],this.updateValueAndValidity({emitEvent:B.emitEvent}),this._onCollectionChange()}setControl(q,B,se={}){this.controls[q]&&this.controls[q]._registerOnCollectionChange(()=>{}),delete this.controls[q],B&&this.registerControl(q,B),this.updateValueAndValidity({emitEvent:se.emitEvent}),this._onCollectionChange()}contains(q){return this.controls.hasOwnProperty(q)&&this.controls[q].enabled}setValue(q,B={}){ht(this,0,q),Object.keys(q).forEach(se=>{Re(this,!0,se),this.controls[se].setValue(q[se],{onlySelf:!0,emitEvent:B.emitEvent})}),this.updateValueAndValidity(B)}patchValue(q,B={}){null!=q&&(Object.keys(q).forEach(se=>{const be=this.controls[se];be&&be.patchValue(q[se],{onlySelf:!0,emitEvent:B.emitEvent})}),this.updateValueAndValidity(B))}reset(q={},B={}){this._forEachChild((se,be)=>{se.reset(q?q[be]:null,{onlySelf:!0,emitEvent:B.emitEvent})}),this._updatePristine(B),this._updateTouched(B),this.updateValueAndValidity(B)}getRawValue(){return this._reduceChildren({},(q,B,se)=>(q[se]=B.getRawValue(),q))}_syncPendingControls(){let q=this._reduceChildren(!1,(B,se)=>!!se._syncPendingControls()||B);return q&&this.updateValueAndValidity({onlySelf:!0}),q}_forEachChild(q){Object.keys(this.controls).forEach(B=>{const se=this.controls[B];se&&q(se,B)})}_setUpControls(){this._forEachChild(q=>{q.setParent(this),q._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(q){for(const[B,se]of Object.entries(this.controls))if(this.contains(B)&&q(se))return!0;return!1}_reduceValue(){return this._reduceChildren({},(B,se,be)=>((se.enabled||this.disabled)&&(B[be]=se.value),B))}_reduceChildren(q,B){let se=q;return this._forEachChild((be,nn)=>{se=B(se,be,nn)}),se}_allControlsDisabled(){for(const q of Object.keys(this.controls))if(this.controls[q].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(q){return this.controls.hasOwnProperty(q)?this.controls[q]:null}}class un extends Bt{}const qr=new y.OlP("CallSetDisabledState",{providedIn:"root",factory:()=>Ps}),Ps="always";function Ys(W,q){return[...q.path,W]}function rt(W,q,B=Ps){vn(W,q),q.valueAccessor.writeValue(W.value),(W.disabled||"always"===B)&&q.valueAccessor.setDisabledState?.(W.disabled),function zn(W,q){q.valueAccessor.registerOnChange(B=>{W._pendingValue=B,W._pendingChange=!0,W._pendingDirty=!0,"change"===W.updateOn&&vr(W,q)})}(W,q),function Zs(W,q){const B=(se,be)=>{q.valueAccessor.writeValue(se),be&&q.viewToModelUpdate(se)};W.registerOnChange(B),q._registerOnDestroy(()=>{W._unregisterOnChange(B)})}(W,q),function Kr(W,q){q.valueAccessor.registerOnTouched(()=>{W._pendingTouched=!0,"blur"===W.updateOn&&W._pendingChange&&vr(W,q),"submit"!==W.updateOn&&W.markAsTouched()})}(W,q),function Xt(W,q){if(q.valueAccessor.setDisabledState){const B=se=>{q.valueAccessor.setDisabledState(se)};W.registerOnDisabledChange(B),q._registerOnDestroy(()=>{W._unregisterOnDisabledChange(B)})}}(W,q)}function Ue(W,q,B=!0){const se=()=>{};q.valueAccessor&&(q.valueAccessor.registerOnChange(se),q.valueAccessor.registerOnTouched(se)),jt(W,q),W&&(q._invokeOnDestroyCallbacks(),W._registerOnCollectionChange(()=>{}))}function _t(W,q){W.forEach(B=>{B.registerOnValidatorChange&&B.registerOnValidatorChange(q)})}function vn(W,q){const B=Sn(W);null!==q.validator?W.setValidators(on(B,q.validator)):"function"==typeof B&&W.setValidators([B]);const se=xn(W);null!==q.asyncValidator?W.setAsyncValidators(on(se,q.asyncValidator)):"function"==typeof se&&W.setAsyncValidators([se]);const be=()=>W.updateValueAndValidity();_t(q._rawValidators,be),_t(q._rawAsyncValidators,be)}function jt(W,q){let B=!1;if(null!==W){if(null!==q.validator){const be=Sn(W);if(Array.isArray(be)&&be.length>0){const nn=be.filter(Tn=>Tn!==q.validator);nn.length!==be.length&&(B=!0,W.setValidators(nn))}}if(null!==q.asyncValidator){const be=xn(W);if(Array.isArray(be)&&be.length>0){const nn=be.filter(Tn=>Tn!==q.asyncValidator);nn.length!==be.length&&(B=!0,W.setAsyncValidators(nn))}}}const se=()=>{};return _t(q._rawValidators,se),_t(q._rawAsyncValidators,se),B}function vr(W,q){W._pendingDirty&&W.markAsDirty(),W.setValue(W._pendingValue,{emitModelToViewChange:!1}),q.viewToModelUpdate(W._pendingValue),W._pendingChange=!1}function xi(W,q){vn(W,q)}function Hs(W,q){if(!W.hasOwnProperty("model"))return!1;const B=W.model;return!!B.isFirstChange()||!Object.is(q,B.currentValue)}function Qs(W,q){W._syncPendingControls(),q.forEach(B=>{const se=B.control;"submit"===se.updateOn&&se._pendingChange&&(B.viewToModelUpdate(se._pendingValue),se._pendingChange=!1)})}function ns(W,q){if(!q)return null;let B,se,be;return Array.isArray(q),q.forEach(nn=>{nn.constructor===Le?B=nn:function Ms(W){return Object.getPrototypeOf(W.constructor)===it}(nn)?se=nn:be=nn}),be||se||B||null}const ki={provide:ft,useExisting:(0,y.Gpc)(()=>ur)},ar=(()=>Promise.resolve())();let ur=(()=>{class W extends ft{constructor(B,se,be){super(),this.callSetDisabledState=be,this.submitted=!1,this._directives=new Set,this.ngSubmit=new y.vpe,this.form=new Bt({},nr(B),ln(se))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(B){ar.then(()=>{const se=this._findContainer(B.path);B.control=se.registerControl(B.name,B.control),rt(B.control,B,this.callSetDisabledState),B.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(B)})}getControl(B){return this.form.get(B.path)}removeControl(B){ar.then(()=>{const se=this._findContainer(B.path);se&&se.removeControl(B.name),this._directives.delete(B)})}addFormGroup(B){ar.then(()=>{const se=this._findContainer(B.path),be=new Bt({});xi(be,B),se.registerControl(B.name,be),be.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(B){ar.then(()=>{const se=this._findContainer(B.path);se&&se.removeControl(B.name)})}getFormGroup(B){return this.form.get(B.path)}updateModel(B,se){ar.then(()=>{this.form.get(B.path).setValue(se)})}setValue(B){this.control.setValue(B)}onSubmit(B){return this.submitted=!0,Qs(this.form,this._directives),this.ngSubmit.emit(B),"dialog"===B?.target?.method}onReset(){this.resetForm()}resetForm(B=void 0){this.form.reset(B),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(B){return B.pop(),B.length?this.form.get(B):this.form}static#e=this.\u0275fac=function(se){return new(se||W)(y.Y36(We,10),y.Y36(at,10),y.Y36(qr,8))};static#t=this.\u0275dir=y.lG2({type:W,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(se,be){1&se&&y.NdJ("submit",function(Tn){return be.onSubmit(Tn)})("reset",function(){return be.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[y._Bn([ki]),y.qOj]})}return W})();function jr(W,q){const B=W.indexOf(q);B>-1&&W.splice(B,1)}function zi(W){return"object"==typeof W&&null!==W&&2===Object.keys(W).length&&"value"in W&&"disabled"in W}const Zi=class extends St{constructor(q=null,B,se){super(Te(B),re(se,B)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(q),this._setUpdateStrategy(B),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),ae(B)&&(B.nonNullable||B.initialValueIsDefault)&&(this.defaultValue=zi(q)?q.value:q)}setValue(q,B={}){this.value=this._pendingValue=q,this._onChange.length&&!1!==B.emitModelToViewChange&&this._onChange.forEach(se=>se(this.value,!1!==B.emitViewToModelChange)),this.updateValueAndValidity(B)}patchValue(q,B={}){this.setValue(q,B)}reset(q=this.defaultValue,B={}){this._applyFormState(q),this.markAsPristine(B),this.markAsUntouched(B),this.setValue(this.value,B),this._pendingChange=!1}_updateValue(){}_anyControls(q){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(q){this._onChange.push(q)}_unregisterOnChange(q){jr(this._onChange,q)}registerOnDisabledChange(q){this._onDisabledChange.push(q)}_unregisterOnDisabledChange(q){jr(this._onDisabledChange,q)}_forEachChild(q){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(q){zi(q)?(this.value=this._pendingValue=q.value,q.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=q}},ka={provide:Mt,useExisting:(0,y.Gpc)(()=>Uo)},xs=(()=>Promise.resolve())();let Uo=(()=>{class W extends Mt{constructor(B,se,be,nn,Tn,Vi){super(),this._changeDetectorRef=Tn,this.callSetDisabledState=Vi,this.control=new Zi,this._registered=!1,this.name="",this.update=new y.vpe,this._parent=B,this._setValidators(se),this._setAsyncValidators(be),this.valueAccessor=ns(0,nn)}ngOnChanges(B){if(this._checkForErrors(),!this._registered||"name"in B){if(this._registered&&(this._checkName(),this.formDirective)){const se=B.name.previousValue;this.formDirective.removeControl({name:se,path:this._getPath(se)})}this._setUpControl()}"isDisabled"in B&&this._updateDisabled(B),Hs(B,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(B){this.viewModel=B,this.update.emit(B)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){rt(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(B){xs.then(()=>{this.control.setValue(B,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(B){const se=B.isDisabled.currentValue,be=0!==se&&(0,y.VuI)(se);xs.then(()=>{be&&!this.control.disabled?this.control.disable():!be&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(B){return this._parent?Ys(B,this._parent):[B]}static#e=this.\u0275fac=function(se){return new(se||W)(y.Y36(ft,9),y.Y36(We,10),y.Y36(at,10),y.Y36(It,10),y.Y36(y.sBO,8),y.Y36(qr,8))};static#t=this.\u0275dir=y.lG2({type:W,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[y._Bn([ka]),y.qOj,y.TTD]})}return W})(),lo=(()=>{class W{static#e=this.\u0275fac=function(se){return new(se||W)};static#t=this.\u0275dir=y.lG2({type:W,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]})}return W})();const pa={provide:It,useExisting:(0,y.Gpc)(()=>Is),multi:!0};let Is=(()=>{class W extends it{writeValue(B){this.setProperty("value",B??"")}registerOnChange(B){this.onChange=se=>{B(""==se?null:parseFloat(se))}}static#e=this.\u0275fac=function(){let B;return function(be){return(B||(B=y.n5z(W)))(be||W)}}();static#t=this.\u0275dir=y.lG2({type:W,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(se,be){1&se&&y.NdJ("input",function(Tn){return be.onChange(Tn.target.value)})("blur",function(){return be.onTouched()})},features:[y._Bn([pa]),y.qOj]})}return W})(),ri=(()=>{class W{static#e=this.\u0275fac=function(se){return new(se||W)};static#t=this.\u0275mod=y.oAB({type:W});static#n=this.\u0275inj=y.cJS({})}return W})();const kr=new y.OlP("NgModelWithFormControlWarning"),hr={provide:ft,useExisting:(0,y.Gpc)(()=>Lt)};let Lt=(()=>{class W extends ft{constructor(B,se,be){super(),this.callSetDisabledState=be,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new y.vpe,this._setValidators(B),this._setAsyncValidators(se)}ngOnChanges(B){this._checkFormPresent(),B.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(jt(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(B){const se=this.form.get(B.path);return rt(se,B,this.callSetDisabledState),se.updateValueAndValidity({emitEvent:!1}),this.directives.push(B),se}getControl(B){return this.form.get(B.path)}removeControl(B){Ue(B.control||null,B,!1),function vu(W,q){const B=W.indexOf(q);B>-1&&W.splice(B,1)}(this.directives,B)}addFormGroup(B){this._setUpFormContainer(B)}removeFormGroup(B){this._cleanUpFormContainer(B)}getFormGroup(B){return this.form.get(B.path)}addFormArray(B){this._setUpFormContainer(B)}removeFormArray(B){this._cleanUpFormContainer(B)}getFormArray(B){return this.form.get(B.path)}updateModel(B,se){this.form.get(B.path).setValue(se)}onSubmit(B){return this.submitted=!0,Qs(this.form,this.directives),this.ngSubmit.emit(B),"dialog"===B?.target?.method}onReset(){this.resetForm()}resetForm(B=void 0){this.form.reset(B),this.submitted=!1}_updateDomValue(){this.directives.forEach(B=>{const se=B.control,be=this.form.get(B.path);se!==be&&(Ue(se||null,B),(W=>W instanceof Zi)(be)&&(rt(be,B,this.callSetDisabledState),B.control=be))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(B){const se=this.form.get(B.path);xi(se,B),se.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(B){if(this.form){const se=this.form.get(B.path);se&&function hs(W,q){return jt(W,q)}(se,B)&&se.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){vn(this.form,this),this._oldForm&&jt(this._oldForm,this)}_checkFormPresent(){}static#e=this.\u0275fac=function(se){return new(se||W)(y.Y36(We,10),y.Y36(at,10),y.Y36(qr,8))};static#t=this.\u0275dir=y.lG2({type:W,selectors:[["","formGroup",""]],hostBindings:function(se,be){1&se&&y.NdJ("submit",function(Tn){return be.onSubmit(Tn)})("reset",function(){return be.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[y._Bn([hr]),y.qOj,y.TTD]})}return W})();const fr={provide:Mt,useExisting:(0,y.Gpc)(()=>yr)};let yr=(()=>{class W extends Mt{set isDisabled(B){}static#e=this._ngModelWarningSentOnce=!1;constructor(B,se,be,nn,Tn){super(),this._ngModelWarningConfig=Tn,this._added=!1,this.name=null,this.update=new y.vpe,this._ngModelWarningSent=!1,this._parent=B,this._setValidators(se),this._setAsyncValidators(be),this.valueAccessor=ns(0,nn)}ngOnChanges(B){this._added||this._setUpControl(),Hs(B,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(B){this.viewModel=B,this.update.emit(B)}get path(){return Ys(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}static#t=this.\u0275fac=function(se){return new(se||W)(y.Y36(ft,13),y.Y36(We,10),y.Y36(at,10),y.Y36(It,10),y.Y36(kr,8))};static#n=this.\u0275dir=y.lG2({type:W,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[y._Bn([fr]),y.qOj,y.TTD]})}return W})();const vi={provide:It,useExisting:(0,y.Gpc)(()=>yi),multi:!0};function Gr(W,q){return null==W?`${q}`:(q&&"object"==typeof q&&(q="Object"),`${W}: ${q}`.slice(0,50))}let yi=(()=>{class W extends it{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(B){this._compareWith=B}writeValue(B){this.value=B;const be=Gr(this._getOptionId(B),B);this.setProperty("value",be)}registerOnChange(B){this.onChange=se=>{this.value=this._getOptionValue(se),B(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(B){for(const se of this._optionMap.keys())if(this._compareWith(this._optionMap.get(se),B))return se;return null}_getOptionValue(B){const se=function _n(W){return W.split(":")[0]}(B);return this._optionMap.has(se)?this._optionMap.get(se):B}static#e=this.\u0275fac=function(){let B;return function(be){return(B||(B=y.n5z(W)))(be||W)}}();static#t=this.\u0275dir=y.lG2({type:W,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(se,be){1&se&&y.NdJ("change",function(Tn){return be.onChange(Tn.target.value)})("blur",function(){return be.onTouched()})},inputs:{compareWith:"compareWith"},features:[y._Bn([vi]),y.qOj]})}return W})(),Ts=(()=>{class W{constructor(B,se,be){this._element=B,this._renderer=se,this._select=be,this._select&&(this.id=this._select._registerOption())}set ngValue(B){null!=this._select&&(this._select._optionMap.set(this.id,B),this._setElementValue(Gr(this.id,B)),this._select.writeValue(this._select.value))}set value(B){this._setElementValue(B),this._select&&this._select.writeValue(this._select.value)}_setElementValue(B){this._renderer.setProperty(this._element.nativeElement,"value",B)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static#e=this.\u0275fac=function(se){return new(se||W)(y.Y36(y.SBq),y.Y36(y.Qsj),y.Y36(yi,9))};static#t=this.\u0275dir=y.lG2({type:W,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}})}return W})();const bs={provide:It,useExisting:(0,y.Gpc)(()=>qi),multi:!0};function ti(W,q){return null==W?`${q}`:("string"==typeof q&&(q=`'${q}'`),q&&"object"==typeof q&&(q="Object"),`${W}: ${q}`.slice(0,50))}let qi=(()=>{class W extends it{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(B){this._compareWith=B}writeValue(B){let se;if(this.value=B,Array.isArray(B)){const be=B.map(nn=>this._getOptionId(nn));se=(nn,Tn)=>{nn._setSelected(be.indexOf(Tn.toString())>-1)}}else se=(be,nn)=>{be._setSelected(!1)};this._optionMap.forEach(se)}registerOnChange(B){this.onChange=se=>{const be=[],nn=se.selectedOptions;if(void 0!==nn){const Tn=nn;for(let Vi=0;Vi<Tn.length;Vi++){const po=this._getOptionValue(Tn[Vi].value);be.push(po)}}else{const Tn=se.options;for(let Vi=0;Vi<Tn.length;Vi++){const ss=Tn[Vi];if(ss.selected){const po=this._getOptionValue(ss.value);be.push(po)}}}this.value=be,B(be)}}_registerOption(B){const se=(this._idCounter++).toString();return this._optionMap.set(se,B),se}_getOptionId(B){for(const se of this._optionMap.keys())if(this._compareWith(this._optionMap.get(se)._value,B))return se;return null}_getOptionValue(B){const se=function er(W){return W.split(":")[0]}(B);return this._optionMap.has(se)?this._optionMap.get(se)._value:B}static#e=this.\u0275fac=function(){let B;return function(be){return(B||(B=y.n5z(W)))(be||W)}}();static#t=this.\u0275dir=y.lG2({type:W,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(se,be){1&se&&y.NdJ("change",function(Tn){return be.onChange(Tn.target)})("blur",function(){return be.onTouched()})},inputs:{compareWith:"compareWith"},features:[y._Bn([bs]),y.qOj]})}return W})(),Li=(()=>{class W{constructor(B,se,be){this._element=B,this._renderer=se,this._select=be,this._select&&(this.id=this._select._registerOption(this))}set ngValue(B){null!=this._select&&(this._value=B,this._setElementValue(ti(this.id,B)),this._select.writeValue(this._select.value))}set value(B){this._select?(this._value=B,this._setElementValue(ti(this.id,B)),this._select.writeValue(this._select.value)):this._setElementValue(B)}_setElementValue(B){this._renderer.setProperty(this._element.nativeElement,"value",B)}_setSelected(B){this._renderer.setProperty(this._element.nativeElement,"selected",B)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static#e=this.\u0275fac=function(se){return new(se||W)(y.Y36(y.SBq),y.Y36(y.Qsj),y.Y36(qi,9))};static#t=this.\u0275dir=y.lG2({type:W,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}})}return W})(),fo=(()=>{class W{static#e=this.\u0275fac=function(se){return new(se||W)};static#t=this.\u0275mod=y.oAB({type:W});static#n=this.\u0275inj=y.cJS({imports:[ri]})}return W})();class Go extends St{constructor(q,B,se){super(Te(B),re(se,B)),this.controls=q,this._initObservables(),this._setUpdateStrategy(B),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(q){return this.controls[this._adjustIndex(q)]}push(q,B={}){this.controls.push(q),this._registerControl(q),this.updateValueAndValidity({emitEvent:B.emitEvent}),this._onCollectionChange()}insert(q,B,se={}){this.controls.splice(q,0,B),this._registerControl(B),this.updateValueAndValidity({emitEvent:se.emitEvent})}removeAt(q,B={}){let se=this._adjustIndex(q);se<0&&(se=0),this.controls[se]&&this.controls[se]._registerOnCollectionChange(()=>{}),this.controls.splice(se,1),this.updateValueAndValidity({emitEvent:B.emitEvent})}setControl(q,B,se={}){let be=this._adjustIndex(q);be<0&&(be=0),this.controls[be]&&this.controls[be]._registerOnCollectionChange(()=>{}),this.controls.splice(be,1),B&&(this.controls.splice(be,0,B),this._registerControl(B)),this.updateValueAndValidity({emitEvent:se.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(q,B={}){ht(this,0,q),q.forEach((se,be)=>{Re(this,!1,be),this.at(be).setValue(se,{onlySelf:!0,emitEvent:B.emitEvent})}),this.updateValueAndValidity(B)}patchValue(q,B={}){null!=q&&(q.forEach((se,be)=>{this.at(be)&&this.at(be).patchValue(se,{onlySelf:!0,emitEvent:B.emitEvent})}),this.updateValueAndValidity(B))}reset(q=[],B={}){this._forEachChild((se,be)=>{se.reset(q[be],{onlySelf:!0,emitEvent:B.emitEvent})}),this._updatePristine(B),this._updateTouched(B),this.updateValueAndValidity(B)}getRawValue(){return this.controls.map(q=>q.getRawValue())}clear(q={}){this.controls.length<1||(this._forEachChild(B=>B._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:q.emitEvent}))}_adjustIndex(q){return q<0?q+this.length:q}_syncPendingControls(){let q=this.controls.reduce((B,se)=>!!se._syncPendingControls()||B,!1);return q&&this.updateValueAndValidity({onlySelf:!0}),q}_forEachChild(q){this.controls.forEach((B,se)=>{q(B,se)})}_updateValue(){this.value=this.controls.filter(q=>q.enabled||this.disabled).map(q=>q.value)}_anyControls(q){return this.controls.some(B=>B.enabled&&q(B))}_setUpControls(){this._forEachChild(q=>this._registerControl(q))}_allControlsDisabled(){for(const q of this.controls)if(q.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(q){q.setParent(this),q._registerOnCollectionChange(this._onCollectionChange)}_find(q){return this.at(q)??null}}function Ao(W){return!!W&&(void 0!==W.asyncValidators||void 0!==W.validators||void 0!==W.updateOn)}let So=(()=>{class W{constructor(){this.useNonNullable=!1}get nonNullable(){const B=new W;return B.useNonNullable=!0,B}group(B,se=null){const be=this._reduceControls(B);let nn={};return Ao(se)?nn=se:null!==se&&(nn.validators=se.validator,nn.asyncValidators=se.asyncValidator),new Bt(be,nn)}record(B,se=null){const be=this._reduceControls(B);return new un(be,se)}control(B,se,be){let nn={};return this.useNonNullable?(Ao(se)?nn=se:(nn.validators=se,nn.asyncValidators=be),new Zi(B,{...nn,nonNullable:!0})):new Zi(B,se,be)}array(B,se,be){const nn=B.map(Tn=>this._createControl(Tn));return new Go(nn,se,be)}_reduceControls(B){const se={};return Object.keys(B).forEach(be=>{se[be]=this._createControl(B[be])}),se}_createControl(B){return B instanceof Zi||B instanceof St?B:Array.isArray(B)?this.control(B[0],B.length>1?B[1]:null,B.length>2?B[2]:null):this.control(B)}static#e=this.\u0275fac=function(se){return new(se||W)};static#t=this.\u0275prov=y.Yz7({token:W,factory:W.\u0275fac,providedIn:"root"})}return W})(),$o=(()=>{class W{static withConfig(B){return{ngModule:W,providers:[{provide:qr,useValue:B.callSetDisabledState??Ps}]}}static#e=this.\u0275fac=function(se){return new(se||W)};static#t=this.\u0275mod=y.oAB({type:W});static#n=this.\u0275inj=y.cJS({imports:[fo]})}return W})(),ma=(()=>{class W{static withConfig(B){return{ngModule:W,providers:[{provide:kr,useValue:B.warnOnNgModelWithFormControl??"always"},{provide:qr,useValue:B.callSetDisabledState??Ps}]}}static#e=this.\u0275fac=function(se){return new(se||W)};static#t=this.\u0275mod=y.oAB({type:W});static#n=this.\u0275inj=y.cJS({imports:[fo]})}return W})()},2614:()=>{const zt=":";const Sn=function(_e,...Se){if(Sn.translate){const ot=Sn.translate(_e,Se);_e=ot[0],Se=ot[1]}let je=Rn(_e[0],_e.raw[0]);for(let ot=1;ot<_e.length;ot++)je+=Se[ot-1]+Rn(_e[ot],_e.raw[ot]);return je},xn=":";function Rn(_e,Se){return Se.charAt(0)===xn?_e.substring(function we(_e,Se){for(let je=1,ot=1;je<_e.length;je++,ot++)if("\\"===Se[ot])ot++;else if(_e[je]===zt)return je;throw new Error(`Unterminated $localize metadata block in "${Se}".`)}(_e,Se)+1):_e}globalThis.$localize=Sn},6593:(zt,Ye,H)=>{H.d(Ye,{Dx:()=>Mt,b2:()=>_e,q6:()=>on});var y=H(5879),fe=H(6814);class oe extends fe.w_{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class Ce extends oe{static makeCurrent(){(0,fe.HT)(new Ce)}onAndCancel(re,ne,ae){return re.addEventListener(ne,ae),()=>{re.removeEventListener(ne,ae)}}dispatchEvent(re,ne){re.dispatchEvent(ne)}remove(re){re.parentNode&&re.parentNode.removeChild(re)}createElement(re,ne){return(ne=ne||this.getDefaultDocument()).createElement(re)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(re){return re.nodeType===Node.ELEMENT_NODE}isShadowRoot(re){return re instanceof DocumentFragment}getGlobalEventTarget(re,ne){return"window"===ne?window:"document"===ne?re:"body"===ne?re.body:null}getBaseHref(re){const ne=function ye(){return De=De||document.querySelector("base"),De?De.getAttribute("href"):null}();return null==ne?null:function I(ie){Ne=Ne||document.createElement("a"),Ne.setAttribute("href",ie);const re=Ne.pathname;return"/"===re.charAt(0)?re:`/${re}`}(ne)}resetBaseElement(){De=null}getUserAgent(){return window.navigator.userAgent}getCookie(re){return(0,fe.Mx)(document.cookie,re)}}let Ne,De=null,pe=(()=>{class ie{build(){return new XMLHttpRequest}static#e=this.\u0275fac=function(ae){return new(ae||ie)};static#t=this.\u0275prov=y.Yz7({token:ie,factory:ie.\u0275fac})}return ie})();const me=new y.OlP("EventManagerPlugins");let xe=(()=>{class ie{constructor(ne,ae){this._zone=ae,this._eventNameToPlugin=new Map,ne.forEach(Re=>{Re.manager=this}),this._plugins=ne.slice().reverse()}addEventListener(ne,ae,Re){return this._findPluginFor(ae).addEventListener(ne,ae,Re)}getZone(){return this._zone}_findPluginFor(ne){let ae=this._eventNameToPlugin.get(ne);if(ae)return ae;if(ae=this._plugins.find(ht=>ht.supports(ne)),!ae)throw new y.vHH(5101,!1);return this._eventNameToPlugin.set(ne,ae),ae}static#e=this.\u0275fac=function(ae){return new(ae||ie)(y.LFG(me),y.LFG(y.R0b))};static#t=this.\u0275prov=y.Yz7({token:ie,factory:ie.\u0275fac})}return ie})();class dt{constructor(re){this._doc=re}}const it="ng-app-id";let It=(()=>{class ie{constructor(ne,ae,Re,ht={}){this.doc=ne,this.appId=ae,this.nonce=Re,this.platformId=ht,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=(0,fe.PM)(ht),this.resetHostNodes()}addStyles(ne){for(const ae of ne)1===this.changeUsageCount(ae,1)&&this.onStyleAdded(ae)}removeStyles(ne){for(const ae of ne)this.changeUsageCount(ae,-1)<=0&&this.onStyleRemoved(ae)}ngOnDestroy(){const ne=this.styleNodesInDOM;ne&&(ne.forEach(ae=>ae.remove()),ne.clear());for(const ae of this.getAllStyles())this.onStyleRemoved(ae);this.resetHostNodes()}addHost(ne){this.hostNodes.add(ne);for(const ae of this.getAllStyles())this.addStyleToHost(ne,ae)}removeHost(ne){this.hostNodes.delete(ne)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(ne){for(const ae of this.hostNodes)this.addStyleToHost(ae,ne)}onStyleRemoved(ne){const ae=this.styleRef;ae.get(ne)?.elements?.forEach(Re=>Re.remove()),ae.delete(ne)}collectServerRenderedStyles(){const ne=this.doc.head?.querySelectorAll(`style[${it}="${this.appId}"]`);if(ne?.length){const ae=new Map;return ne.forEach(Re=>{null!=Re.textContent&&ae.set(Re.textContent,Re)}),ae}return null}changeUsageCount(ne,ae){const Re=this.styleRef;if(Re.has(ne)){const ht=Re.get(ne);return ht.usage+=ae,ht.usage}return Re.set(ne,{usage:ae,elements:[]}),ae}getStyleElement(ne,ae){const Re=this.styleNodesInDOM,ht=Re?.get(ae);if(ht?.parentNode===ne)return Re.delete(ae),ht.removeAttribute(it),ht;{const St=this.doc.createElement("style");return this.nonce&&St.setAttribute("nonce",this.nonce),St.textContent=ae,this.platformIsServer&&St.setAttribute(it,this.appId),St}}addStyleToHost(ne,ae){const Re=this.getStyleElement(ne,ae);ne.appendChild(Re);const ht=this.styleRef,St=ht.get(ae)?.elements;St?St.push(Re):ht.set(ae,{elements:[Re],usage:1})}resetHostNodes(){const ne=this.hostNodes;ne.clear(),ne.add(this.doc.head)}static#e=this.\u0275fac=function(ae){return new(ae||ie)(y.LFG(fe.K0),y.LFG(y.AFp),y.LFG(y.Ojb,8),y.LFG(y.Lbi))};static#t=this.\u0275prov=y.Yz7({token:ie,factory:ie.\u0275fac})}return ie})();const ct={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Ct=/%COMP%/g,$e=new y.OlP("RemoveStylesOnCompDestroy",{providedIn:"root",factory:()=>!1});function at(ie,re){return re.map(ne=>ne.replace(Ct,ie))}let mt=(()=>{class ie{constructor(ne,ae,Re,ht,St,Bt,gn,Qt=null){this.eventManager=ne,this.sharedStylesHost=ae,this.appId=Re,this.removeStylesOnCompDestroy=ht,this.doc=St,this.platformId=Bt,this.ngZone=gn,this.nonce=Qt,this.rendererByCompId=new Map,this.platformIsServer=(0,fe.PM)(Bt),this.defaultRenderer=new ue(ne,St,gn,this.platformIsServer)}createRenderer(ne,ae){if(!ne||!ae)return this.defaultRenderer;this.platformIsServer&&ae.encapsulation===y.ifc.ShadowDom&&(ae={...ae,encapsulation:y.ifc.Emulated});const Re=this.getOrCreateRenderer(ne,ae);return Re instanceof or?Re.applyToHost(ne):Re instanceof gr&&Re.applyStyles(),Re}getOrCreateRenderer(ne,ae){const Re=this.rendererByCompId;let ht=Re.get(ae.id);if(!ht){const St=this.doc,Bt=this.ngZone,gn=this.eventManager,Qt=this.sharedStylesHost,un=this.removeStylesOnCompDestroy,Dr=this.platformIsServer;switch(ae.encapsulation){case y.ifc.Emulated:ht=new or(gn,Qt,ae,this.appId,un,St,Bt,Dr);break;case y.ifc.ShadowDom:return new Dn(gn,Qt,ne,ae,St,Bt,this.nonce,Dr);default:ht=new gr(gn,Qt,ae,un,St,Bt,Dr)}Re.set(ae.id,ht)}return ht}ngOnDestroy(){this.rendererByCompId.clear()}static#e=this.\u0275fac=function(ae){return new(ae||ie)(y.LFG(xe),y.LFG(It),y.LFG(y.AFp),y.LFG($e),y.LFG(fe.K0),y.LFG(y.Lbi),y.LFG(y.R0b),y.LFG(y.Ojb))};static#t=this.\u0275prov=y.Yz7({token:ie,factory:ie.\u0275fac})}return ie})();class ue{constructor(re,ne,ae,Re){this.eventManager=re,this.doc=ne,this.ngZone=ae,this.platformIsServer=Re,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(re,ne){return ne?this.doc.createElementNS(ct[ne]||ne,re):this.doc.createElement(re)}createComment(re){return this.doc.createComment(re)}createText(re){return this.doc.createTextNode(re)}appendChild(re,ne){($n(re)?re.content:re).appendChild(ne)}insertBefore(re,ne,ae){re&&($n(re)?re.content:re).insertBefore(ne,ae)}removeChild(re,ne){re&&re.removeChild(ne)}selectRootElement(re,ne){let ae="string"==typeof re?this.doc.querySelector(re):re;if(!ae)throw new y.vHH(-5104,!1);return ne||(ae.textContent=""),ae}parentNode(re){return re.parentNode}nextSibling(re){return re.nextSibling}setAttribute(re,ne,ae,Re){if(Re){ne=Re+":"+ne;const ht=ct[Re];ht?re.setAttributeNS(ht,ne,ae):re.setAttribute(ne,ae)}else re.setAttribute(ne,ae)}removeAttribute(re,ne,ae){if(ae){const Re=ct[ae];Re?re.removeAttributeNS(Re,ne):re.removeAttribute(`${ae}:${ne}`)}else re.removeAttribute(ne)}addClass(re,ne){re.classList.add(ne)}removeClass(re,ne){re.classList.remove(ne)}setStyle(re,ne,ae,Re){Re&(y.JOm.DashCase|y.JOm.Important)?re.style.setProperty(ne,ae,Re&y.JOm.Important?"important":""):re.style[ne]=ae}removeStyle(re,ne,ae){ae&y.JOm.DashCase?re.style.removeProperty(ne):re.style[ne]=""}setProperty(re,ne,ae){re[ne]=ae}setValue(re,ne){re.nodeValue=ne}listen(re,ne,ae){if("string"==typeof re&&!(re=(0,fe.q)().getGlobalEventTarget(this.doc,re)))throw new Error(`Unsupported event target ${re} for event ${ne}`);return this.eventManager.addEventListener(re,ne,this.decoratePreventDefault(ae))}decoratePreventDefault(re){return ne=>{if("__ngUnwrap__"===ne)return re;!1===(this.platformIsServer?this.ngZone.runGuarded(()=>re(ne)):re(ne))&&ne.preventDefault()}}}function $n(ie){return"TEMPLATE"===ie.tagName&&void 0!==ie.content}class Dn extends ue{constructor(re,ne,ae,Re,ht,St,Bt,gn){super(re,ht,St,gn),this.sharedStylesHost=ne,this.hostEl=ae,this.shadowRoot=ae.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const Qt=at(Re.id,Re.styles);for(const un of Qt){const Dr=document.createElement("style");Bt&&Dr.setAttribute("nonce",Bt),Dr.textContent=un,this.shadowRoot.appendChild(Dr)}}nodeOrShadowRoot(re){return re===this.hostEl?this.shadowRoot:re}appendChild(re,ne){return super.appendChild(this.nodeOrShadowRoot(re),ne)}insertBefore(re,ne,ae){return super.insertBefore(this.nodeOrShadowRoot(re),ne,ae)}removeChild(re,ne){return super.removeChild(this.nodeOrShadowRoot(re),ne)}parentNode(re){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(re)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class gr extends ue{constructor(re,ne,ae,Re,ht,St,Bt,gn){super(re,ht,St,Bt),this.sharedStylesHost=ne,this.removeStylesOnCompDestroy=Re,this.styles=gn?at(gn,ae.styles):ae.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}}class or extends gr{constructor(re,ne,ae,Re,ht,St,Bt,gn){const Qt=Re+"-"+ae.id;super(re,ne,ae,ht,St,Bt,gn,Qt),this.contentAttr=function Oe(ie){return"_ngcontent-%COMP%".replace(Ct,ie)}(Qt),this.hostAttr=function We(ie){return"_nghost-%COMP%".replace(Ct,ie)}(Qt)}applyToHost(re){this.applyStyles(),this.setAttribute(re,this.hostAttr,"")}createElement(re,ne){const ae=super.createElement(re,ne);return super.setAttribute(ae,this.contentAttr,""),ae}}let Zt=(()=>{class ie extends dt{constructor(ne){super(ne)}supports(ne){return!0}addEventListener(ne,ae,Re){return ne.addEventListener(ae,Re,!1),()=>this.removeEventListener(ne,ae,Re)}removeEventListener(ne,ae,Re){return ne.removeEventListener(ae,Re)}static#e=this.\u0275fac=function(ae){return new(ae||ie)(y.LFG(fe.K0))};static#t=this.\u0275prov=y.Yz7({token:ie,factory:ie.\u0275fac})}return ie})();const Pt=["alt","control","meta","shift"],Ie={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},we={alt:ie=>ie.altKey,control:ie=>ie.ctrlKey,meta:ie=>ie.metaKey,shift:ie=>ie.shiftKey};let He=(()=>{class ie extends dt{constructor(ne){super(ne)}supports(ne){return null!=ie.parseEventName(ne)}addEventListener(ne,ae,Re){const ht=ie.parseEventName(ae),St=ie.eventCallback(ht.fullKey,Re,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>(0,fe.q)().onAndCancel(ne,ht.domEventName,St))}static parseEventName(ne){const ae=ne.toLowerCase().split("."),Re=ae.shift();if(0===ae.length||"keydown"!==Re&&"keyup"!==Re)return null;const ht=ie._normalizeKey(ae.pop());let St="",Bt=ae.indexOf("code");if(Bt>-1&&(ae.splice(Bt,1),St="code."),Pt.forEach(Qt=>{const un=ae.indexOf(Qt);un>-1&&(ae.splice(un,1),St+=Qt+".")}),St+=ht,0!=ae.length||0===ht.length)return null;const gn={};return gn.domEventName=Re,gn.fullKey=St,gn}static matchEventFullKeyCode(ne,ae){let Re=Ie[ne.key]||ne.key,ht="";return ae.indexOf("code.")>-1&&(Re=ne.code,ht="code."),!(null==Re||!Re)&&(Re=Re.toLowerCase()," "===Re?Re="space":"."===Re&&(Re="dot"),Pt.forEach(St=>{St!==Re&&(0,we[St])(ne)&&(ht+=St+".")}),ht+=Re,ht===ae)}static eventCallback(ne,ae,Re){return ht=>{ie.matchEventFullKeyCode(ht,ne)&&Re.runGuarded(()=>ae(ht))}}static _normalizeKey(ne){return"esc"===ne?"escape":ne}static#e=this.\u0275fac=function(ae){return new(ae||ie)(y.LFG(fe.K0))};static#t=this.\u0275prov=y.Yz7({token:ie,factory:ie.\u0275fac})}return ie})();const on=(0,y.eFA)(y._c5,"browser",[{provide:y.Lbi,useValue:fe.bD},{provide:y.g9A,useValue:function wt(){Ce.makeCurrent()},multi:!0},{provide:fe.K0,useFactory:function Ft(){return(0,y.RDi)(document),document},deps:[]}]),Sn=new y.OlP(""),xn=[{provide:y.rWj,useClass:class ze{addToWindow(re){y.dqk.getAngularTestability=(ae,Re=!0)=>{const ht=re.findTestabilityInTree(ae,Re);if(null==ht)throw new y.vHH(5103,!1);return ht},y.dqk.getAllAngularTestabilities=()=>re.getAllTestabilities(),y.dqk.getAllAngularRootElements=()=>re.getAllRootElements(),y.dqk.frameworkStabilizers||(y.dqk.frameworkStabilizers=[]),y.dqk.frameworkStabilizers.push(ae=>{const Re=y.dqk.getAllAngularTestabilities();let ht=Re.length,St=!1;const Bt=function(gn){St=St||gn,ht--,0==ht&&ae(St)};Re.forEach(gn=>{gn.whenStable(Bt)})})}findTestabilityInTree(re,ne,ae){return null==ne?null:re.getTestability(ne)??(ae?(0,fe.q)().isShadowRoot(ne)?this.findTestabilityInTree(re,ne.host,!0):this.findTestabilityInTree(re,ne.parentElement,!0):null)}},deps:[]},{provide:y.lri,useClass:y.dDg,deps:[y.R0b,y.eoX,y.rWj]},{provide:y.dDg,useClass:y.dDg,deps:[y.R0b,y.eoX,y.rWj]}],Rn=[{provide:y.zSh,useValue:"root"},{provide:y.qLn,useFactory:function nr(){return new y.qLn},deps:[]},{provide:me,useClass:Zt,multi:!0,deps:[fe.K0,y.R0b,y.Lbi]},{provide:me,useClass:He,multi:!0,deps:[fe.K0]},mt,It,xe,{provide:y.FYo,useExisting:mt},{provide:fe.JF,useClass:pe,deps:[]},[]];let _e=(()=>{class ie{constructor(ne){}static withServerTransition(ne){return{ngModule:ie,providers:[{provide:y.AFp,useValue:ne.appId}]}}static#e=this.\u0275fac=function(ae){return new(ae||ie)(y.LFG(Sn,12))};static#t=this.\u0275mod=y.oAB({type:ie});static#n=this.\u0275inj=y.cJS({providers:[...Rn,...xn],imports:[fe.ez,y.hGG]})}return ie})(),Mt=(()=>{class ie{constructor(ne){this._doc=ne}getTitle(){return this._doc.title}setTitle(ne){this._doc.title=ne||""}static#e=this.\u0275fac=function(ae){return new(ae||ie)(y.LFG(fe.K0))};static#t=this.\u0275prov=y.Yz7({token:ie,factory:function(ae){let Re=null;return Re=ae?new ae:function ft(){return new Mt((0,y.LFG)(fe.K0))}(),Re},providedIn:"root"})}return ie})();typeof window<"u"&&window},1826:(zt,Ye,H)=>{H.d(Ye,{F0:()=>_s,rH:()=>Ia,Bz:()=>yd,lC:()=>_n});var y=H(5879),fe=H(5592),oe=H(4674),De=H(2459),ye=H(2096),Ne=H(5619),I=H(7453),ze=H(2737),pe=H(7400),me=H(9940),xe=H(2714),dt=H(8251),it=H(7103);function It(...S){const M=(0,me.yG)(S),A=(0,me.jO)(S),{args:F,keys:L}=(0,I.D)(S);if(0===F.length)return(0,De.D)([],M);const J=new fe.y(function ct(S,M,A=ze.y){return F=>{Ct(M,()=>{const{length:L}=S,J=new Array(L);let de=L,Qe=L;for(let Ke=0;Ke<L;Ke++)Ct(M,()=>{const Vt=(0,De.D)(S[Ke],M);let Zn=!1;Vt.subscribe((0,dt.x)(F,Sr=>{J[Ke]=Sr,Zn||(Zn=!0,Qe--),Qe||F.next(A(J.slice()))},()=>{--de||F.complete()}))},F)},F)}}(F,M,L?de=>(0,xe.n)(L,de):ze.y));return A?J.pipe((0,pe.Z)(A)):J}function Ct(S,M,A){S?(0,it.f)(A,S,M):M()}var lt=H(6973),Jt=H(5211),Ve=H(4829);function Le(S){return new fe.y(M=>{(0,Ve.Xf)(S()).subscribe(M)})}var $e=H(8407);function Oe(S,M){const A=(0,oe.m)(S)?S:()=>S,F=L=>L.error(A());return new fe.y(M?L=>M.schedule(F,0,L):F)}var We=H(6232),at=H(7394),mt=H(9360);function ue(){return(0,mt.e)((S,M)=>{let A=null;S._refCount++;const F=(0,dt.x)(M,void 0,void 0,void 0,()=>{if(!S||S._refCount<=0||0<--S._refCount)return void(A=null);const L=S._connection,J=A;A=null,L&&(!J||L===J)&&L.unsubscribe(),M.unsubscribe()});S.subscribe(F),F.closed||(A=S.connect())})}class Kt extends fe.y{constructor(M,A){super(),this.source=M,this.subjectFactory=A,this._subject=null,this._refCount=0,this._connection=null,(0,mt.A)(M)&&(this.lift=M.lift)}_subscribe(M){return this.getSubject().subscribe(M)}getSubject(){const M=this._subject;return(!M||M.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:M}=this;this._subject=this._connection=null,M?.unsubscribe()}connect(){let M=this._connection;if(!M){M=this._connection=new at.w0;const A=this.getSubject();M.add(this.source.subscribe((0,dt.x)(A,void 0,()=>{this._teardown(),A.complete()},F=>{this._teardown(),A.error(F)},()=>this._teardown()))),M.closed&&(this._connection=null,M=at.w0.EMPTY)}return M}refCount(){return ue()(this)}}var Et=H(8645),$n=H(6814),Dn=H(7398),gr=H(4664),or=H(8180),Zt=H(7921),Pt=H(2181),Ie=H(1631),we=H(1374);function He(S,M){return(0,oe.m)(M)?(0,Ie.z)(S,M,1):(0,Ie.z)(S,1)}var Pe=H(9397);function Fe(S){return(0,mt.e)((M,A)=>{let J,F=null,L=!1;F=M.subscribe((0,dt.x)(A,void 0,void 0,de=>{J=(0,Ve.Xf)(S(de,Fe(S)(M))),F?(F.unsubscribe(),F=null,J.subscribe(A)):L=!0})),L&&(F.unsubscribe(),F=null,J.subscribe(A))})}var Ze=H(6699),Nt=H(3572);function wt(S){return S<=0?()=>We.E:(0,mt.e)((M,A)=>{let F=[];M.subscribe((0,dt.x)(A,L=>{F.push(L),S<F.length&&F.shift()},()=>{for(const L of F)A.next(L);A.complete()},void 0,()=>{F=null}))})}var nr=H(3026),ln=H(975);function on(S){return(0,mt.e)((M,A)=>{try{M.subscribe(A)}finally{A.add(S)}})}var Sn=H(9773),xn=H(7537),Rn=H(6593);const _e="primary",Se=Symbol("RouteTitle");class je{constructor(M){this.params=M||{}}has(M){return Object.prototype.hasOwnProperty.call(this.params,M)}get(M){if(this.has(M)){const A=this.params[M];return Array.isArray(A)?A[0]:A}return null}getAll(M){if(this.has(M)){const A=this.params[M];return Array.isArray(A)?A:[A]}return[]}get keys(){return Object.keys(this.params)}}function ot(S){return new je(S)}function ft(S,M,A){const F=A.path.split("/");if(F.length>S.length||"full"===A.pathMatch&&(M.hasChildren()||F.length<S.length))return null;const L={};for(let J=0;J<F.length;J++){const de=F[J],Qe=S[J];if(de.startsWith(":"))L[de.substring(1)]=Qe;else if(de!==Qe.path)return null}return{consumed:S.slice(0,F.length),posParams:L}}function Nn(S,M){const A=S?Object.keys(S):void 0,F=M?Object.keys(M):void 0;if(!A||!F||A.length!=F.length)return!1;let L;for(let J=0;J<A.length;J++)if(L=A[J],!Ln(S[L],M[L]))return!1;return!0}function Ln(S,M){if(Array.isArray(S)&&Array.isArray(M)){if(S.length!==M.length)return!1;const A=[...S].sort(),F=[...M].sort();return A.every((L,J)=>F[J]===L)}return S===M}function Rt(S){return S.length>0?S[S.length-1]:null}function rn(S){return function Ce(S){return!!S&&(S instanceof fe.y||(0,oe.m)(S.lift)&&(0,oe.m)(S.subscribe))}(S)?S:(0,y.QGY)(S)?(0,De.D)(Promise.resolve(S)):(0,ye.of)(S)}const hn={exact:function kn(S,M,A){if(!Yi(S.segments,M.segments)||!Wr(S.segments,M.segments,A)||S.numberOfChildren!==M.numberOfChildren)return!1;for(const F in M.children)if(!S.children[F]||!kn(S.children[F],M.children[F],A))return!1;return!0},subset:Pr},Wt={exact:function Ur(S,M){return Nn(S,M)},subset:function Or(S,M){return Object.keys(M).length<=Object.keys(S).length&&Object.keys(M).every(A=>Ln(S[A],M[A]))},ignored:()=>!0};function wr(S,M,A){return hn[A.paths](S.root,M.root,A.matrixParams)&&Wt[A.queryParams](S.queryParams,M.queryParams)&&!("exact"===A.fragment&&S.fragment!==M.fragment)}function Pr(S,M,A){return Yt(S,M,M.segments,A)}function Yt(S,M,A,F){if(S.segments.length>A.length){const L=S.segments.slice(0,A.length);return!(!Yi(L,A)||M.hasChildren()||!Wr(L,A,F))}if(S.segments.length===A.length){if(!Yi(S.segments,A)||!Wr(S.segments,A,F))return!1;for(const L in M.children)if(!S.children[L]||!Pr(S.children[L],M.children[L],F))return!1;return!0}{const L=A.slice(0,S.segments.length),J=A.slice(S.segments.length);return!!(Yi(S.segments,L)&&Wr(S.segments,L,F)&&S.children[_e])&&Yt(S.children[_e],M,J,F)}}function Wr(S,M,A){return M.every((F,L)=>Wt[A](S[L].parameters,F.parameters))}class On{constructor(M=new In([],{}),A={},F=null){this.root=M,this.queryParams=A,this.fragment=F}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=ot(this.queryParams)),this._queryParamMap}toString(){return Gs.serialize(this)}}class In{constructor(M,A){this.segments=M,this.children=A,this.parent=null,Object.values(A).forEach(F=>F.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return gi(this)}}class wi{constructor(M,A){this.path=M,this.parameters=A}get parameterMap(){return this._parameterMap||(this._parameterMap=ot(this.parameters)),this._parameterMap}toString(){return ae(this)}}function Yi(S,M){return S.length===M.length&&S.every((A,F)=>A.path===M[F].path)}let Xr=(()=>{class S{static#e=this.\u0275fac=function(F){return new(F||S)};static#t=this.\u0275prov=y.Yz7({token:S,factory:function(){return new pi},providedIn:"root"})}return S})();class pi{parse(M){const A=new Ys(M);return new On(A.parseRootSegment(),A.parseQueryParams(),A.parseFragment())}serialize(M){const A=`/${Di(M.root,!0)}`,F=function ht(S){const M=Object.keys(S).map(A=>{const F=S[A];return Array.isArray(F)?F.map(L=>`${Ci(A)}=${Ci(L)}`).join("&"):`${Ci(A)}=${Ci(F)}`}).filter(A=>!!A);return M.length?`?${M.join("&")}`:""}(M.queryParams);return`${A}${F}${"string"==typeof M.fragment?`#${function Te(S){return encodeURI(S)}(M.fragment)}`:""}`}}const Gs=new pi;function gi(S){return S.segments.map(M=>ae(M)).join("/")}function Di(S,M){if(!S.hasChildren())return gi(S);if(M){const A=S.children[_e]?Di(S.children[_e],!1):"",F=[];return Object.entries(S.children).forEach(([L,J])=>{L!==_e&&F.push(`${L}:${Di(J,!1)}`)}),F.length>0?`${A}(${F.join("//")})`:A}{const A=function xr(S,M){let A=[];return Object.entries(S.children).forEach(([F,L])=>{F===_e&&(A=A.concat(M(L,F)))}),Object.entries(S.children).forEach(([F,L])=>{F!==_e&&(A=A.concat(M(L,F)))}),A}(S,(F,L)=>L===_e?[Di(S.children[_e],!1)]:[`${L}:${Di(F,!1)}`]);return 1===Object.keys(S.children).length&&null!=S.children[_e]?`${gi(S)}/${A[0]}`:`${gi(S)}/(${A.join("//")})`}}function Mi(S){return encodeURIComponent(S).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Ci(S){return Mi(S).replace(/%3B/gi,";")}function ie(S){return Mi(S).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function re(S){return decodeURIComponent(S)}function ne(S){return re(S.replace(/\+/g,"%20"))}function ae(S){return`${ie(S.path)}${function Re(S){return Object.keys(S).map(M=>`;${ie(M)}=${ie(S[M])}`).join("")}(S.parameters)}`}const St=/^[^\/()?;#]+/;function Bt(S){const M=S.match(St);return M?M[0]:""}const gn=/^[^\/()?;=#]+/,un=/^[^=?&#]+/,qr=/^[^&#]+/;class Ys{constructor(M){this.url=M,this.remaining=M}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new In([],{}):new In([],this.parseChildren())}parseQueryParams(){const M={};if(this.consumeOptional("?"))do{this.parseQueryParam(M)}while(this.consumeOptional("&"));return M}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const M=[];for(this.peekStartsWith("(")||M.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),M.push(this.parseSegment());let A={};this.peekStartsWith("/(")&&(this.capture("/"),A=this.parseParens(!0));let F={};return this.peekStartsWith("(")&&(F=this.parseParens(!1)),(M.length>0||Object.keys(A).length>0)&&(F[_e]=new In(M,A)),F}parseSegment(){const M=Bt(this.remaining);if(""===M&&this.peekStartsWith(";"))throw new y.vHH(4009,!1);return this.capture(M),new wi(re(M),this.parseMatrixParams())}parseMatrixParams(){const M={};for(;this.consumeOptional(";");)this.parseParam(M);return M}parseParam(M){const A=function Qt(S){const M=S.match(gn);return M?M[0]:""}(this.remaining);if(!A)return;this.capture(A);let F="";if(this.consumeOptional("=")){const L=Bt(this.remaining);L&&(F=L,this.capture(F))}M[re(A)]=re(F)}parseQueryParam(M){const A=function Dr(S){const M=S.match(un);return M?M[0]:""}(this.remaining);if(!A)return;this.capture(A);let F="";if(this.consumeOptional("=")){const de=function Ps(S){const M=S.match(qr);return M?M[0]:""}(this.remaining);de&&(F=de,this.capture(F))}const L=ne(A),J=ne(F);if(M.hasOwnProperty(L)){let de=M[L];Array.isArray(de)||(de=[de],M[L]=de),de.push(J)}else M[L]=J}parseParens(M){const A={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const F=Bt(this.remaining),L=this.remaining[F.length];if("/"!==L&&")"!==L&&";"!==L)throw new y.vHH(4010,!1);let J;F.indexOf(":")>-1?(J=F.slice(0,F.indexOf(":")),this.capture(J),this.capture(":")):M&&(J=_e);const de=this.parseChildren();A[J]=1===Object.keys(de).length?de[_e]:new In([],de),this.consumeOptional("//")}return A}peekStartsWith(M){return this.remaining.startsWith(M)}consumeOptional(M){return!!this.peekStartsWith(M)&&(this.remaining=this.remaining.substring(M.length),!0)}capture(M){if(!this.consumeOptional(M))throw new y.vHH(4011,!1)}}function rt(S){return S.segments.length>0?new In([],{[_e]:S}):S}function Ue(S){const M={};for(const F of Object.keys(S.children)){const J=Ue(S.children[F]);if(F===_e&&0===J.segments.length&&J.hasChildren())for(const[de,Qe]of Object.entries(J.children))M[de]=Qe;else(J.segments.length>0||J.hasChildren())&&(M[F]=J)}return function _t(S){if(1===S.numberOfChildren&&S.children[_e]){const M=S.children[_e];return new In(S.segments.concat(M.segments),M.children)}return S}(new In(S.segments,M))}function Xt(S){return S instanceof On}function jt(S){let M;const L=rt(function A(J){const de={};for(const Ke of J.children){const Vt=A(Ke);de[Ke.outlet]=Vt}const Qe=new In(J.url,de);return J===S&&(M=Qe),Qe}(S.root));return M??L}function zn(S,M,A,F){let L=S;for(;L.parent;)L=L.parent;if(0===M.length)return Zs(L,L,L,A,F);const J=function Ma(S){if("string"==typeof S[0]&&1===S.length&&"/"===S[0])return new hs(!0,0,S);let M=0,A=!1;const F=S.reduce((L,J,de)=>{if("object"==typeof J&&null!=J){if(J.outlets){const Qe={};return Object.entries(J.outlets).forEach(([Ke,Vt])=>{Qe[Ke]="string"==typeof Vt?Vt.split("/"):Vt}),[...L,{outlets:Qe}]}if(J.segmentPath)return[...L,J.segmentPath]}return"string"!=typeof J?[...L,J]:0===de?(J.split("/").forEach((Qe,Ke)=>{0==Ke&&"."===Qe||(0==Ke&&""===Qe?A=!0:".."===Qe?M++:""!=Qe&&L.push(Qe))}),L):[...L,J]},[]);return new hs(A,M,F)}(M);if(J.toRoot())return Zs(L,L,new In([],{}),A,F);const de=function ha(S,M,A){if(S.isAbsolute)return new ra(M,!0,0);if(!A)return new ra(M,!1,NaN);if(null===A.parent)return new ra(A,!0,0);const F=Kr(S.commands[0])?0:1;return function Cn(S,M,A){let F=S,L=M,J=A;for(;J>L;){if(J-=L,F=F.parent,!F)throw new y.vHH(4005,!1);L=F.segments.length}return new ra(F,!1,L-J)}(A,A.segments.length-1+F,S.numberOfDoubleDots)}(J,L,S),Qe=de.processChildren?Ms(de.segmentGroup,de.index,J.commands):Hs(de.segmentGroup,de.index,J.commands);return Zs(L,de.segmentGroup,Qe,A,F)}function Kr(S){return"object"==typeof S&&null!=S&&!S.outlets&&!S.segmentPath}function vr(S){return"object"==typeof S&&null!=S&&S.outlets}function Zs(S,M,A,F,L){let de,J={};F&&Object.entries(F).forEach(([Ke,Vt])=>{J[Ke]=Array.isArray(Vt)?Vt.map(Zn=>`${Zn}`):`${Vt}`}),de=S===M?A:xi(S,M,A);const Qe=rt(Ue(de));return new On(Qe,J,L)}function xi(S,M,A){const F={};return Object.entries(S.children).forEach(([L,J])=>{F[L]=J===M?A:xi(J,M,A)}),new In(S.segments,F)}class hs{constructor(M,A,F){if(this.isAbsolute=M,this.numberOfDoubleDots=A,this.commands=F,M&&F.length>0&&Kr(F[0]))throw new y.vHH(4003,!1);const L=F.find(vr);if(L&&L!==Rt(F))throw new y.vHH(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class ra{constructor(M,A,F){this.segmentGroup=M,this.processChildren=A,this.index=F}}function Hs(S,M,A){if(S||(S=new In([],{})),0===S.segments.length&&S.hasChildren())return Ms(S,M,A);const F=function Qs(S,M,A){let F=0,L=M;const J={match:!1,pathIndex:0,commandIndex:0};for(;L<S.segments.length;){if(F>=A.length)return J;const de=S.segments[L],Qe=A[F];if(vr(Qe))break;const Ke=`${Qe}`,Vt=F<A.length-1?A[F+1]:null;if(L>0&&void 0===Ke)break;if(Ke&&Vt&&"object"==typeof Vt&&void 0===Vt.outlets){if(!ki(Ke,Vt,de))return J;F+=2}else{if(!ki(Ke,{},de))return J;F++}L++}return{match:!0,pathIndex:L,commandIndex:F}}(S,M,A),L=A.slice(F.commandIndex);if(F.match&&F.pathIndex<S.segments.length){const J=new In(S.segments.slice(0,F.pathIndex),{});return J.children[_e]=new In(S.segments.slice(F.pathIndex),S.children),Ms(J,0,L)}return F.match&&0===L.length?new In(S.segments,{}):F.match&&!S.hasChildren()?ns(S,M,A):F.match?Ms(S,0,L):ns(S,M,A)}function Ms(S,M,A){if(0===A.length)return new In(S.segments,{});{const F=function Qa(S){return vr(S[0])?S[0].outlets:{[_e]:S}}(A),L={};if(Object.keys(F).some(J=>J!==_e)&&S.children[_e]&&1===S.numberOfChildren&&0===S.children[_e].segments.length){const J=Ms(S.children[_e],M,A);return new In(S.segments,J.children)}return Object.entries(F).forEach(([J,de])=>{"string"==typeof de&&(de=[de]),null!==de&&(L[J]=Hs(S.children[J],M,de))}),Object.entries(S.children).forEach(([J,de])=>{void 0===F[J]&&(L[J]=de)}),new In(S.segments,L)}}function ns(S,M,A){const F=S.segments.slice(0,M);let L=0;for(;L<A.length;){const J=A[L];if(vr(J)){const Ke=vu(J.outlets);return new In(F,Ke)}if(0===L&&Kr(A[0])){F.push(new wi(S.segments[M].path,Do(A[0]))),L++;continue}const de=vr(J)?J.outlets[_e]:`${J}`,Qe=L<A.length-1?A[L+1]:null;de&&Qe&&Kr(Qe)?(F.push(new wi(de,Do(Qe))),L+=2):(F.push(new wi(de,{})),L++)}return new In(F,{})}function vu(S){const M={};return Object.entries(S).forEach(([A,F])=>{"string"==typeof F&&(F=[F]),null!==F&&(M[A]=ns(new In([],{}),0,F))}),M}function Do(S){const M={};return Object.entries(S).forEach(([A,F])=>M[A]=`${F}`),M}function ki(S,M,A){return S==A.path&&Nn(M,A.parameters)}const ar="imperative";class ur{constructor(M,A){this.id=M,this.url=A}}class jr extends ur{constructor(M,A,F="imperative",L=null){super(M,A),this.type=0,this.navigationTrigger=F,this.restoredState=L}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class zi extends ur{constructor(M,A,F){super(M,A),this.urlAfterRedirects=F,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Zi extends ur{constructor(M,A,F,L){super(M,A),this.reason=F,this.code=L,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Fi extends ur{constructor(M,A,F,L){super(M,A),this.reason=F,this.code=L,this.type=16}}class co extends ur{constructor(M,A,F,L){super(M,A),this.error=F,this.target=L,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Ai extends ur{constructor(M,A,F,L){super(M,A),this.urlAfterRedirects=F,this.state=L,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class yu extends ur{constructor(M,A,F,L){super(M,A),this.urlAfterRedirects=F,this.state=L,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class mi extends ur{constructor(M,A,F,L,J){super(M,A),this.urlAfterRedirects=F,this.state=L,this.shouldActivate=J,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Ja extends ur{constructor(M,A,F,L){super(M,A),this.urlAfterRedirects=F,this.state=L,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class fa extends ur{constructor(M,A,F,L){super(M,A),this.urlAfterRedirects=F,this.state=L,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class xa{constructor(M){this.route=M,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Bo{constructor(M){this.route=M,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class ka{constructor(M){this.snapshot=M,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class xs{constructor(M){this.snapshot=M,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Uo{constructor(M){this.snapshot=M,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class lo{constructor(M){this.snapshot=M,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class pa{constructor(M,A,F){this.routerEvent=M,this.position=A,this.anchor=F,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class Is{}class Gn{constructor(M){this.url=M}}class ri{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new Cr,this.attachRef=null}}let Cr=(()=>{class S{constructor(){this.contexts=new Map}onChildOutletCreated(A,F){const L=this.getOrCreateContext(A);L.outlet=F,this.contexts.set(A,L)}onChildOutletDestroyed(A){const F=this.getContext(A);F&&(F.outlet=null,F.attachRef=null)}onOutletDeactivated(){const A=this.contexts;return this.contexts=new Map,A}onOutletReAttached(A){this.contexts=A}getOrCreateContext(A){let F=this.getContext(A);return F||(F=new ri,this.contexts.set(A,F)),F}getContext(A){return this.contexts.get(A)||null}static#e=this.\u0275fac=function(F){return new(F||S)};static#t=this.\u0275prov=y.Yz7({token:S,factory:S.\u0275fac,providedIn:"root"})}return S})();class Yr{constructor(M){this._root=M}get root(){return this._root.value}parent(M){const A=this.pathFromRoot(M);return A.length>1?A[A.length-2]:null}children(M){const A=ai(M,this._root);return A?A.children.map(F=>F.value):[]}firstChild(M){const A=ai(M,this._root);return A&&A.children.length>0?A.children[0].value:null}siblings(M){const A=Co(M,this._root);return A.length<2?[]:A[A.length-2].children.map(L=>L.value).filter(L=>L!==M)}pathFromRoot(M){return Co(M,this._root).map(A=>A.value)}}function ai(S,M){if(S===M.value)return M;for(const A of M.children){const F=ai(S,A);if(F)return F}return null}function Co(S,M){if(S===M.value)return[M];for(const A of M.children){const F=Co(S,A);if(F.length)return F.unshift(M),F}return[]}class kr{constructor(M,A){this.value=M,this.children=A}toString(){return`TreeNode(${this.value})`}}function Es(S){const M={};return S&&S.children.forEach(A=>M[A.value.outlet]=A),M}class $s extends Yr{constructor(M,A){super(M),this.snapshot=A,fr(this,M)}toString(){return this.snapshot.toString()}}function hr(S,M){const A=function Lt(S,M){const de=new Wi([],{},{},"",{},_e,M,null,{});return new ei("",new kr(de,[]))}(0,M),F=new Ne.X([new wi("",{})]),L=new Ne.X({}),J=new Ne.X({}),de=new Ne.X({}),Qe=new Ne.X(""),Ke=new En(F,L,de,Qe,J,_e,M,A.root);return Ke.snapshot=A.root,new $s(new kr(Ke,[]),A)}class En{constructor(M,A,F,L,J,de,Qe,Ke){this.urlSubject=M,this.paramsSubject=A,this.queryParamsSubject=F,this.fragmentSubject=L,this.dataSubject=J,this.outlet=de,this.component=Qe,this._futureSnapshot=Ke,this.title=this.dataSubject?.pipe((0,Dn.U)(Vt=>Vt[Se]))??(0,ye.of)(void 0),this.url=M,this.params=A,this.queryParams=F,this.fragment=L,this.data=J}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,Dn.U)(M=>ot(M)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,Dn.U)(M=>ot(M)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Vn(S,M="emptyOnly"){const A=S.pathFromRoot;let F=0;if("always"!==M)for(F=A.length-1;F>=1;){const L=A[F],J=A[F-1];if(L.routeConfig&&""===L.routeConfig.path)F--;else{if(J.component)break;F--}}return function ui(S){return S.reduce((M,A)=>({params:{...M.params,...A.params},data:{...M.data,...A.data},resolve:{...A.data,...M.resolve,...A.routeConfig?.data,...A._resolvedData}}),{params:{},data:{},resolve:{}})}(A.slice(F))}class Wi{get title(){return this.data?.[Se]}constructor(M,A,F,L,J,de,Qe,Ke,Vt){this.url=M,this.params=A,this.queryParams=F,this.fragment=L,this.data=J,this.outlet=de,this.component=Qe,this.routeConfig=Ke,this._resolve=Vt}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=ot(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=ot(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(F=>F.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class ei extends Yr{constructor(M,A){super(A),this.url=M,fr(this,A)}toString(){return yr(this._root)}}function fr(S,M){M.value._routerState=S,M.children.forEach(A=>fr(S,A))}function yr(S){const M=S.children.length>0?` { ${S.children.map(yr).join(", ")} } `:"";return`${S.value}${M}`}function vi(S){if(S.snapshot){const M=S.snapshot,A=S._futureSnapshot;S.snapshot=A,Nn(M.queryParams,A.queryParams)||S.queryParamsSubject.next(A.queryParams),M.fragment!==A.fragment&&S.fragmentSubject.next(A.fragment),Nn(M.params,A.params)||S.paramsSubject.next(A.params),function Mt(S,M){if(S.length!==M.length)return!1;for(let A=0;A<S.length;++A)if(!Nn(S[A],M[A]))return!1;return!0}(M.url,A.url)||S.urlSubject.next(A.url),Nn(M.data,A.data)||S.dataSubject.next(A.data)}else S.snapshot=S._futureSnapshot,S.dataSubject.next(S._futureSnapshot.data)}function Gr(S,M){const A=Nn(S.params,M.params)&&function Pa(S,M){return Yi(S,M)&&S.every((A,F)=>Nn(A.parameters,M[F].parameters))}(S.url,M.url);return A&&!(!S.parent!=!M.parent)&&(!S.parent||Gr(S.parent,M.parent))}let _n=(()=>{class S{constructor(){this.activated=null,this._activatedRoute=null,this.name=_e,this.activateEvents=new y.vpe,this.deactivateEvents=new y.vpe,this.attachEvents=new y.vpe,this.detachEvents=new y.vpe,this.parentContexts=(0,y.f3M)(Cr),this.location=(0,y.f3M)(y.s_b),this.changeDetector=(0,y.f3M)(y.sBO),this.environmentInjector=(0,y.f3M)(y.lqb),this.inputBinder=(0,y.f3M)(Ts,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(A){if(A.name){const{firstChange:F,previousValue:L}=A.name;if(F)return;this.isTrackedInParentContexts(L)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(L)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(A){return this.parentContexts.getContext(A)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const A=this.parentContexts.getContext(this.name);A?.route&&(A.attachRef?this.attach(A.attachRef,A.route):this.activateWith(A.route,A.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new y.vHH(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new y.vHH(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new y.vHH(4012,!1);this.location.detach();const A=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(A.instance),A}attach(A,F){this.activated=A,this._activatedRoute=F,this.location.insert(A.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(A.instance)}deactivate(){if(this.activated){const A=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(A)}}activateWith(A,F){if(this.isActivated)throw new y.vHH(4013,!1);this._activatedRoute=A;const L=this.location,de=A.snapshot.component,Qe=this.parentContexts.getOrCreateContext(this.name).children,Ke=new yi(A,Qe,L.injector);this.activated=L.createComponent(de,{index:L.length,injector:Ke,environmentInjector:F??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static#e=this.\u0275fac=function(F){return new(F||S)};static#t=this.\u0275dir=y.lG2({type:S,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[y.TTD]})}return S})();class yi{constructor(M,A,F){this.route=M,this.childContexts=A,this.parent=F}get(M,A){return M===En?this.route:M===Cr?this.childContexts:this.parent.get(M,A)}}const Ts=new y.OlP("");let bs=(()=>{class S{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(A){this.unsubscribeFromRouteData(A),this.subscribeToRouteData(A)}unsubscribeFromRouteData(A){this.outletDataSubscriptions.get(A)?.unsubscribe(),this.outletDataSubscriptions.delete(A)}subscribeToRouteData(A){const{activatedRoute:F}=A,L=It([F.queryParams,F.params,F.data]).pipe((0,gr.w)(([J,de,Qe],Ke)=>(Qe={...J,...de,...Qe},0===Ke?(0,ye.of)(Qe):Promise.resolve(Qe)))).subscribe(J=>{if(!A.isActivated||!A.activatedComponentRef||A.activatedRoute!==F||null===F.component)return void this.unsubscribeFromRouteData(A);const de=(0,y.qFp)(F.component);if(de)for(const{templateName:Qe}of de.inputs)A.activatedComponentRef.setInput(Qe,J[Qe]);else this.unsubscribeFromRouteData(A)});this.outletDataSubscriptions.set(A,L)}static#e=this.\u0275fac=function(F){return new(F||S)};static#t=this.\u0275prov=y.Yz7({token:S,factory:S.\u0275fac})}return S})();function er(S,M,A){if(A&&S.shouldReuseRoute(M.value,A.value.snapshot)){const F=A.value;F._futureSnapshot=M.value;const L=function ks(S,M,A){return M.children.map(F=>{for(const L of A.children)if(S.shouldReuseRoute(F.value,L.value.snapshot))return er(S,F,L);return er(S,F)})}(S,M,A);return new kr(F,L)}{if(S.shouldAttach(M.value)){const J=S.retrieve(M.value);if(null!==J){const de=J.route;return de.value._futureSnapshot=M.value,de.children=M.children.map(Qe=>er(S,Qe)),de}}const F=function qi(S){return new En(new Ne.X(S.url),new Ne.X(S.params),new Ne.X(S.queryParams),new Ne.X(S.fragment),new Ne.X(S.data),S.outlet,S.component,S)}(M.value),L=M.children.map(J=>er(S,J));return new kr(F,L)}}const Li="ngNavigationCancelingError";function ws(S,M){const{redirectTo:A,navigationBehaviorOptions:F}=Xt(M)?{redirectTo:M,navigationBehaviorOptions:void 0}:M,L=Fs(!1,0,M);return L.url=A,L.navigationBehaviorOptions=F,L}function Fs(S,M,A){const F=new Error("NavigationCancelingError: "+(S||""));return F[Li]=!0,F.cancellationCode=M,A&&(F.url=A),F}function rs(S){return S&&S[Li]}let ho=(()=>{class S{static#e=this.\u0275fac=function(F){return new(F||S)};static#t=this.\u0275cmp=y.Xpm({type:S,selectors:[["ng-component"]],standalone:!0,features:[y.jDz],decls:1,vars:0,template:function(F,L){1&F&&y._UZ(0,"router-outlet")},dependencies:[_n],encapsulation:2})}return S})();function Xa(S){const M=S.children&&S.children.map(Xa),A=M?{...S,children:M}:{...S};return!A.component&&!A.loadComponent&&(M||A.loadChildren)&&A.outlet&&A.outlet!==_e&&(A.component=ho),A}function Er(S){return S.outlet||_e}function Xs(S){if(!S)return null;if(S.routeConfig?._injector)return S.routeConfig._injector;for(let M=S.parent;M;M=M.parent){const A=M.routeConfig;if(A?._loadedInjector)return A._loadedInjector;if(A?._injector)return A._injector}return null}class Cs{constructor(M,A,F,L,J){this.routeReuseStrategy=M,this.futureState=A,this.currState=F,this.forwardEvent=L,this.inputBindingEnabled=J}activate(M){const A=this.futureState._root,F=this.currState?this.currState._root:null;this.deactivateChildRoutes(A,F,M),vi(this.futureState.root),this.activateChildRoutes(A,F,M)}deactivateChildRoutes(M,A,F){const L=Es(A);M.children.forEach(J=>{const de=J.value.outlet;this.deactivateRoutes(J,L[de],F),delete L[de]}),Object.values(L).forEach(J=>{this.deactivateRouteAndItsChildren(J,F)})}deactivateRoutes(M,A,F){const L=M.value,J=A?A.value:null;if(L===J)if(L.component){const de=F.getContext(L.outlet);de&&this.deactivateChildRoutes(M,A,de.children)}else this.deactivateChildRoutes(M,A,F);else J&&this.deactivateRouteAndItsChildren(A,F)}deactivateRouteAndItsChildren(M,A){M.value.component&&this.routeReuseStrategy.shouldDetach(M.value.snapshot)?this.detachAndStoreRouteSubtree(M,A):this.deactivateRouteAndOutlet(M,A)}detachAndStoreRouteSubtree(M,A){const F=A.getContext(M.value.outlet),L=F&&M.value.component?F.children:A,J=Es(M);for(const de of Object.keys(J))this.deactivateRouteAndItsChildren(J[de],L);if(F&&F.outlet){const de=F.outlet.detach(),Qe=F.children.onOutletDeactivated();this.routeReuseStrategy.store(M.value.snapshot,{componentRef:de,route:M,contexts:Qe})}}deactivateRouteAndOutlet(M,A){const F=A.getContext(M.value.outlet),L=F&&M.value.component?F.children:A,J=Es(M);for(const de of Object.keys(J))this.deactivateRouteAndItsChildren(J[de],L);F&&(F.outlet&&(F.outlet.deactivate(),F.children.onOutletDeactivated()),F.attachRef=null,F.route=null)}activateChildRoutes(M,A,F){const L=Es(A);M.children.forEach(J=>{this.activateRoutes(J,L[J.value.outlet],F),this.forwardEvent(new lo(J.value.snapshot))}),M.children.length&&this.forwardEvent(new xs(M.value.snapshot))}activateRoutes(M,A,F){const L=M.value,J=A?A.value:null;if(vi(L),L===J)if(L.component){const de=F.getOrCreateContext(L.outlet);this.activateChildRoutes(M,A,de.children)}else this.activateChildRoutes(M,A,F);else if(L.component){const de=F.getOrCreateContext(L.outlet);if(this.routeReuseStrategy.shouldAttach(L.snapshot)){const Qe=this.routeReuseStrategy.retrieve(L.snapshot);this.routeReuseStrategy.store(L.snapshot,null),de.children.onOutletReAttached(Qe.contexts),de.attachRef=Qe.componentRef,de.route=Qe.route.value,de.outlet&&de.outlet.attach(Qe.componentRef,Qe.route.value),vi(Qe.route.value),this.activateChildRoutes(M,null,de.children)}else{const Qe=Xs(L.snapshot);de.attachRef=null,de.route=L,de.injector=Qe,de.outlet&&de.outlet.activateWith(L,de.injector),this.activateChildRoutes(M,null,de.children)}}else this.activateChildRoutes(M,null,F)}}class eu{constructor(M){this.path=M,this.route=this.path[this.path.length-1]}}class fo{constructor(M,A){this.component=M,this.route=A}}function Go(S,M,A){const F=S._root;return Ao(F,M?M._root:null,A,[F.value])}function Ho(S,M){const A=Symbol(),F=M.get(S,A);return F===A?"function"!=typeof S||(0,y.Z0I)(S)?M.get(S):S:F}function Ao(S,M,A,F,L={canDeactivateChecks:[],canActivateChecks:[]}){const J=Es(M);return S.children.forEach(de=>{(function So(S,M,A,F,L={canDeactivateChecks:[],canActivateChecks:[]}){const J=S.value,de=M?M.value:null,Qe=A?A.getContext(S.value.outlet):null;if(de&&J.routeConfig===de.routeConfig){const Ke=function ga(S,M,A){if("function"==typeof A)return A(S,M);switch(A){case"pathParamsChange":return!Yi(S.url,M.url);case"pathParamsOrQueryParamsChange":return!Yi(S.url,M.url)||!Nn(S.queryParams,M.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Gr(S,M)||!Nn(S.queryParams,M.queryParams);default:return!Gr(S,M)}}(de,J,J.routeConfig.runGuardsAndResolvers);Ke?L.canActivateChecks.push(new eu(F)):(J.data=de.data,J._resolvedData=de._resolvedData),Ao(S,M,J.component?Qe?Qe.children:null:A,F,L),Ke&&Qe&&Qe.outlet&&Qe.outlet.isActivated&&L.canDeactivateChecks.push(new fo(Qe.outlet.component,de))}else de&&Ro(M,Qe,L),L.canActivateChecks.push(new eu(F)),Ao(S,null,J.component?Qe?Qe.children:null:A,F,L)})(de,J[de.value.outlet],A,F.concat([de.value]),L),delete J[de.value.outlet]}),Object.entries(J).forEach(([de,Qe])=>Ro(Qe,A.getContext(de),L)),L}function Ro(S,M,A){const F=Es(S),L=S.value;Object.entries(F).forEach(([J,de])=>{Ro(de,L.component?M?M.children.getContext(J):null:M,A)}),A.canDeactivateChecks.push(new fo(L.component&&M&&M.outlet&&M.outlet.isActivated?M.outlet.component:null,L))}function mr(S){return"function"==typeof S}function Tn(S){return S instanceof lt.K||"EmptyError"===S?.name}const Vi=Symbol("INITIAL_VALUE");function ss(){return(0,gr.w)(S=>It(S.map(M=>M.pipe((0,or.q)(1),(0,Zt.O)(Vi)))).pipe((0,Dn.U)(M=>{for(const A of M)if(!0!==A){if(A===Vi)return Vi;if(!1===A||A instanceof On)return A}return!0}),(0,Pt.h)(M=>M!==Vi),(0,or.q)(1)))}function sa(S){return(0,$e.z)((0,Pe.b)(M=>{if(Xt(M))throw ws(0,M)}),(0,Dn.U)(M=>!0===M))}class Po{constructor(M){this.segmentGroup=M||null}}class Fa{constructor(M){this.urlTree=M}}function go(S){return Oe(new Po(S))}function vc(S){return Oe(new Fa(S))}class La{constructor(M,A){this.urlSerializer=M,this.urlTree=A}noMatchError(M){return new y.vHH(4002,!1)}lineralizeSegments(M,A){let F=[],L=A.root;for(;;){if(F=F.concat(L.segments),0===L.numberOfChildren)return(0,ye.of)(F);if(L.numberOfChildren>1||!L.children[_e])return Oe(new y.vHH(4e3,!1));L=L.children[_e]}}applyRedirectCommands(M,A,F){return this.applyRedirectCreateUrlTree(A,this.urlSerializer.parse(A),M,F)}applyRedirectCreateUrlTree(M,A,F,L){const J=this.createSegmentGroup(M,A.root,F,L);return new On(J,this.createQueryParams(A.queryParams,this.urlTree.queryParams),A.fragment)}createQueryParams(M,A){const F={};return Object.entries(M).forEach(([L,J])=>{if("string"==typeof J&&J.startsWith(":")){const Qe=J.substring(1);F[L]=A[Qe]}else F[L]=J}),F}createSegmentGroup(M,A,F,L){const J=this.createSegments(M,A.segments,F,L);let de={};return Object.entries(A.children).forEach(([Qe,Ke])=>{de[Qe]=this.createSegmentGroup(M,Ke,F,L)}),new In(J,de)}createSegments(M,A,F,L){return A.map(J=>J.path.startsWith(":")?this.findPosParam(M,J,L):this.findOrReturn(J,F))}findPosParam(M,A,F){const L=F[A.path.substring(1)];if(!L)throw new y.vHH(4001,!1);return L}findOrReturn(M,A){let F=0;for(const L of A){if(L.path===M.path)return A.splice(F),L;F++}return M}}const Tu={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function _a(S,M,A,F,L){const J=bu(S,M,A);return J.matched?(F=function Bn(S,M){return S.providers&&!S._injector&&(S._injector=(0,y.MMx)(S.providers,M,`Route: ${S.path}`)),S._injector??M}(M,F),function Wu(S,M,A,F){const L=M.canMatch;if(!L||0===L.length)return(0,ye.of)(!0);const J=L.map(de=>{const Qe=Ho(de,S);return rn(function se(S){return S&&mr(S.canMatch)}(Qe)?Qe.canMatch(M,A):S.runInContext(()=>Qe(M,A)))});return(0,ye.of)(J).pipe(ss(),sa())}(F,M,A).pipe((0,Dn.U)(de=>!0===de?J:{...Tu}))):(0,ye.of)(J)}function bu(S,M,A){if(""===M.path)return"full"===M.pathMatch&&(S.hasChildren()||A.length>0)?{...Tu}:{matched:!0,consumedSegments:[],remainingSegments:A,parameters:{},positionalParamSegments:{}};const L=(M.matcher||ft)(A,S,M);if(!L)return{...Tu};const J={};Object.entries(L.posParams??{}).forEach(([Qe,Ke])=>{J[Qe]=Ke.path});const de=L.consumed.length>0?{...J,...L.consumed[L.consumed.length-1].parameters}:J;return{matched:!0,consumedSegments:L.consumed,remainingSegments:A.slice(L.consumed.length),parameters:de,positionalParamSegments:L.posParams??{}}}function zs(S,M,A,F){return A.length>0&&function zo(S,M,A){return A.some(F=>Wc(S,M,F)&&Er(F)!==_e)}(S,A,F)?{segmentGroup:new In(M,yc(F,new In(A,S.children))),slicedSegments:[]}:0===A.length&&function gd(S,M,A){return A.some(F=>Wc(S,M,F))}(S,A,F)?{segmentGroup:new In(S.segments,wu(S,0,A,F,S.children)),slicedSegments:A}:{segmentGroup:new In(S.segments,S.children),slicedSegments:A}}function wu(S,M,A,F,L){const J={};for(const de of F)if(Wc(S,A,de)&&!L[Er(de)]){const Qe=new In([],{});J[Er(de)]=Qe}return{...L,...J}}function yc(S,M){const A={};A[_e]=M;for(const F of S)if(""===F.path&&Er(F)!==_e){const L=new In([],{});A[Er(F)]=L}return A}function Wc(S,M,A){return(!(S.hasChildren()||M.length>0)||"full"!==A.pathMatch)&&""===A.path}class eo{constructor(M,A,F,L,J,de,Qe){this.injector=M,this.configLoader=A,this.rootComponentType=F,this.config=L,this.urlTree=J,this.paramsInheritanceStrategy=de,this.urlSerializer=Qe,this.allowRedirects=!0,this.applyRedirects=new La(this.urlSerializer,this.urlTree)}noMatchError(M){return new y.vHH(4002,!1)}recognize(){const M=zs(this.urlTree.root,[],[],this.config).segmentGroup;return this.processSegmentGroup(this.injector,this.config,M,_e).pipe(Fe(A=>{if(A instanceof Fa)return this.allowRedirects=!1,this.urlTree=A.urlTree,this.match(A.urlTree);throw A instanceof Po?this.noMatchError(A):A}),(0,Dn.U)(A=>{const F=new Wi([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},_e,this.rootComponentType,null,{}),L=new kr(F,A),J=new ei("",L),de=function vn(S,M,A=null,F=null){return zn(jt(S),M,A,F)}(F,[],this.urlTree.queryParams,this.urlTree.fragment);return de.queryParams=this.urlTree.queryParams,J.url=this.urlSerializer.serialize(de),this.inheritParamsAndData(J._root),{state:J,tree:de}}))}match(M){return this.processSegmentGroup(this.injector,this.config,M.root,_e).pipe(Fe(F=>{throw F instanceof Po?this.noMatchError(F):F}))}inheritParamsAndData(M){const A=M.value,F=Vn(A,this.paramsInheritanceStrategy);A.params=Object.freeze(F.params),A.data=Object.freeze(F.data),M.children.forEach(L=>this.inheritParamsAndData(L))}processSegmentGroup(M,A,F,L){return 0===F.segments.length&&F.hasChildren()?this.processChildren(M,A,F):this.processSegment(M,A,F,F.segments,L,!0)}processChildren(M,A,F){const L=[];for(const J of Object.keys(F.children))"primary"===J?L.unshift(J):L.push(J);return(0,De.D)(L).pipe(He(J=>{const de=F.children[J],Qe=function ci(S,M){const A=S.filter(F=>Er(F)===M);return A.push(...S.filter(F=>Er(F)!==M)),A}(A,J);return this.processSegmentGroup(M,Qe,de,J)}),(0,Ze.R)((J,de)=>(J.push(...de),J)),(0,Nt.d)(null),function Ft(S,M){const A=arguments.length>=2;return F=>F.pipe(S?(0,Pt.h)((L,J)=>S(L,J,F)):ze.y,wt(1),A?(0,Nt.d)(M):(0,nr.T)(()=>new lt.K))}(),(0,Ie.z)(J=>{if(null===J)return go(F);const de=to(J);return function va(S){S.sort((M,A)=>M.value.outlet===_e?-1:A.value.outlet===_e?1:M.value.outlet.localeCompare(A.value.outlet))}(de),(0,ye.of)(de)}))}processSegment(M,A,F,L,J,de){return(0,De.D)(A).pipe(He(Qe=>this.processSegmentAgainstRoute(Qe._injector??M,A,Qe,F,L,J,de).pipe(Fe(Ke=>{if(Ke instanceof Po)return(0,ye.of)(null);throw Ke}))),(0,we.P)(Qe=>!!Qe),Fe(Qe=>{if(Tn(Qe))return function qc(S,M,A){return 0===M.length&&!S.children[A]}(F,L,J)?(0,ye.of)([]):go(F);throw Qe}))}processSegmentAgainstRoute(M,A,F,L,J,de,Qe){return function tu(S,M,A,F){return!!(Er(S)===F||F!==_e&&Wc(M,A,S))&&("**"===S.path||bu(M,S,A).matched)}(F,L,J,de)?void 0===F.redirectTo?this.matchSegmentAgainstRoute(M,L,F,J,de,Qe):Qe&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(M,L,A,F,J,de):go(L):go(L)}expandSegmentAgainstRouteUsingRedirect(M,A,F,L,J,de){return"**"===L.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(M,F,L,de):this.expandRegularSegmentAgainstRouteUsingRedirect(M,A,F,L,J,de)}expandWildCardWithParamsAgainstRouteUsingRedirect(M,A,F,L){const J=this.applyRedirects.applyRedirectCommands([],F.redirectTo,{});return F.redirectTo.startsWith("/")?vc(J):this.applyRedirects.lineralizeSegments(F,J).pipe((0,Ie.z)(de=>{const Qe=new In(de,{});return this.processSegment(M,A,Qe,de,L,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(M,A,F,L,J,de){const{matched:Qe,consumedSegments:Ke,remainingSegments:Vt,positionalParamSegments:Zn}=bu(A,L,J);if(!Qe)return go(A);const Sr=this.applyRedirects.applyRedirectCommands(Ke,L.redirectTo,Zn);return L.redirectTo.startsWith("/")?vc(Sr):this.applyRedirects.lineralizeSegments(L,Sr).pipe((0,Ie.z)(bn=>this.processSegment(M,F,A,bn.concat(Vt),de,!1)))}matchSegmentAgainstRoute(M,A,F,L,J,de){let Qe;if("**"===F.path){const Ke=L.length>0?Rt(L).parameters:{},Vt=new Wi(L,Ke,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,Ji(F),Er(F),F.component??F._loadedComponent??null,F,qu(F));Qe=(0,ye.of)({snapshot:Vt,consumedSegments:[],remainingSegments:[]}),A.children={}}else Qe=_a(A,F,L,M).pipe((0,Dn.U)(({matched:Ke,consumedSegments:Vt,remainingSegments:Zn,parameters:Sr})=>Ke?{snapshot:new Wi(Vt,Sr,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,Ji(F),Er(F),F.component??F._loadedComponent??null,F,qu(F)),consumedSegments:Vt,remainingSegments:Zn}:null));return Qe.pipe((0,gr.w)(Ke=>null===Ke?go(A):this.getChildConfig(M=F._injector??M,F,L).pipe((0,gr.w)(({routes:Vt})=>{const Zn=F._loadedInjector??M,{snapshot:Sr,consumedSegments:bn,remainingSegments:As}=Ke,{segmentGroup:di,slicedSegments:Au}=zs(A,bn,As,Vt);if(0===Au.length&&di.hasChildren())return this.processChildren(Zn,Vt,di).pipe((0,Dn.U)(oa=>null===oa?null:[new kr(Sr,oa)]));if(0===Vt.length&&0===Au.length)return(0,ye.of)([new kr(Sr,[])]);const as=Er(F)===J;return this.processSegment(Zn,Vt,di,Au,as?_e:J,!0).pipe((0,Dn.U)(oa=>[new kr(Sr,oa)]))}))))}getChildConfig(M,A,F){return A.children?(0,ye.of)({routes:A.children,injector:M}):A.loadChildren?void 0!==A._loadedRoutes?(0,ye.of)({routes:A._loadedRoutes,injector:A._loadedInjector}):function Qi(S,M,A,F){const L=M.canLoad;if(void 0===L||0===L.length)return(0,ye.of)(!0);const J=L.map(de=>{const Qe=Ho(de,S);return rn(function ma(S){return S&&mr(S.canLoad)}(Qe)?Qe.canLoad(M,A):S.runInContext(()=>Qe(M,A)))});return(0,ye.of)(J).pipe(ss(),sa())}(M,A,F).pipe((0,Ie.z)(L=>L?this.configLoader.loadChildren(M,A).pipe((0,Pe.b)(J=>{A._loadedRoutes=J.routes,A._loadedInjector=J.injector})):function Eu(S){return Oe(Fs(!1,3))}())):(0,ye.of)({routes:[],injector:M})}}function Kc(S){const M=S.value.routeConfig;return M&&""===M.path}function to(S){const M=[],A=new Set;for(const F of S){if(!Kc(F)){M.push(F);continue}const L=M.find(J=>F.value.routeConfig===J.value.routeConfig);void 0!==L?(L.children.push(...F.children),A.add(L)):M.push(F)}for(const F of A){const L=to(F.children);M.push(new kr(F.value,L))}return M.filter(F=>!A.has(F))}function Ji(S){return S.data||{}}function qu(S){return S.resolve||{}}function ut(S){return"string"==typeof S.title||null===S.title}function an(S){return(0,gr.w)(M=>{const A=S(M);return A?(0,De.D)(A).pipe((0,Dn.U)(()=>M)):(0,ye.of)(M)})}const Yn=new y.OlP("ROUTES");let rr=(()=>{class S{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=(0,y.f3M)(y.Sil)}loadComponent(A){if(this.componentLoaders.get(A))return this.componentLoaders.get(A);if(A._loadedComponent)return(0,ye.of)(A._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(A);const F=rn(A.loadComponent()).pipe((0,Dn.U)(Zr),(0,Pe.b)(J=>{this.onLoadEndListener&&this.onLoadEndListener(A),A._loadedComponent=J}),on(()=>{this.componentLoaders.delete(A)})),L=new Kt(F,()=>new Et.x).pipe(ue());return this.componentLoaders.set(A,L),L}loadChildren(A,F){if(this.childrenLoaders.get(F))return this.childrenLoaders.get(F);if(F._loadedRoutes)return(0,ye.of)({routes:F._loadedRoutes,injector:F._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(F);const J=function Wn(S,M,A,F){return rn(S.loadChildren()).pipe((0,Dn.U)(Zr),(0,Ie.z)(L=>L instanceof y.YKP||Array.isArray(L)?(0,ye.of)(L):(0,De.D)(M.compileModuleAsync(L))),(0,Dn.U)(L=>{F&&F(S);let J,de,Qe=!1;return Array.isArray(L)?(de=L,!0):(J=L.create(A).injector,de=J.get(Yn,[],{optional:!0,self:!0}).flat()),{routes:de.map(Xa),injector:J}}))}(F,this.compiler,A,this.onLoadEndListener).pipe(on(()=>{this.childrenLoaders.delete(F)})),de=new Kt(J,()=>new Et.x).pipe(ue());return this.childrenLoaders.set(F,de),de}static#e=this.\u0275fac=function(F){return new(F||S)};static#t=this.\u0275prov=y.Yz7({token:S,factory:S.\u0275fac,providedIn:"root"})}return S})();function Zr(S){return function yn(S){return S&&"object"==typeof S&&"default"in S}(S)?S.default:S}let Ir=(()=>{class S{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new Et.x,this.transitionAbortSubject=new Et.x,this.configLoader=(0,y.f3M)(rr),this.environmentInjector=(0,y.f3M)(y.lqb),this.urlSerializer=(0,y.f3M)(Xr),this.rootContexts=(0,y.f3M)(Cr),this.inputBindingEnabled=null!==(0,y.f3M)(Ts,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>(0,ye.of)(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=L=>this.events.next(new Bo(L)),this.configLoader.onLoadStartListener=L=>this.events.next(new xa(L))}complete(){this.transitions?.complete()}handleNavigationRequest(A){const F=++this.navigationId;this.transitions?.next({...this.transitions.value,...A,id:F})}setupNavigations(A,F,L){return this.transitions=new Ne.X({id:0,currentUrlTree:F,currentRawUrl:F,currentBrowserUrl:F,extractedUrl:A.urlHandlingStrategy.extract(F),urlAfterRedirects:A.urlHandlingStrategy.extract(F),rawUrl:F,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:ar,restoredState:null,currentSnapshot:L.snapshot,targetSnapshot:null,currentRouterState:L,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe((0,Pt.h)(J=>0!==J.id),(0,Dn.U)(J=>({...J,extractedUrl:A.urlHandlingStrategy.extract(J.rawUrl)})),(0,gr.w)(J=>{this.currentTransition=J;let de=!1,Qe=!1;return(0,ye.of)(J).pipe((0,Pe.b)(Ke=>{this.currentNavigation={id:Ke.id,initialUrl:Ke.rawUrl,extractedUrl:Ke.extractedUrl,trigger:Ke.source,extras:Ke.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),(0,gr.w)(Ke=>{const Vt=Ke.currentBrowserUrl.toString(),Zn=!A.navigated||Ke.extractedUrl.toString()!==Vt||Vt!==Ke.currentUrlTree.toString();if(!Zn&&"reload"!==(Ke.extras.onSameUrlNavigation??A.onSameUrlNavigation)){const bn="";return this.events.next(new Fi(Ke.id,this.urlSerializer.serialize(Ke.rawUrl),bn,0)),Ke.resolve(null),We.E}if(A.urlHandlingStrategy.shouldProcessUrl(Ke.rawUrl))return(0,ye.of)(Ke).pipe((0,gr.w)(bn=>{const As=this.transitions?.getValue();return this.events.next(new jr(bn.id,this.urlSerializer.serialize(bn.extractedUrl),bn.source,bn.restoredState)),As!==this.transitions?.getValue()?We.E:Promise.resolve(bn)}),function O(S,M,A,F,L,J){return(0,Ie.z)(de=>function Va(S,M,A,F,L,J,de="emptyOnly"){return new eo(S,M,A,F,L,de,J).recognize()}(S,M,A,F,de.extractedUrl,L,J).pipe((0,Dn.U)(({state:Qe,tree:Ke})=>({...de,targetSnapshot:Qe,urlAfterRedirects:Ke}))))}(this.environmentInjector,this.configLoader,this.rootComponentType,A.config,this.urlSerializer,A.paramsInheritanceStrategy),(0,Pe.b)(bn=>{J.targetSnapshot=bn.targetSnapshot,J.urlAfterRedirects=bn.urlAfterRedirects,this.currentNavigation={...this.currentNavigation,finalUrl:bn.urlAfterRedirects};const As=new Ai(bn.id,this.urlSerializer.serialize(bn.extractedUrl),this.urlSerializer.serialize(bn.urlAfterRedirects),bn.targetSnapshot);this.events.next(As)}));if(Zn&&A.urlHandlingStrategy.shouldProcessUrl(Ke.currentRawUrl)){const{id:bn,extractedUrl:As,source:di,restoredState:Au,extras:as}=Ke,oa=new jr(bn,this.urlSerializer.serialize(As),di,Au);this.events.next(oa);const ba=hr(0,this.rootComponentType).snapshot;return this.currentTransition=J={...Ke,targetSnapshot:ba,urlAfterRedirects:As,extras:{...as,skipLocationChange:!1,replaceUrl:!1}},(0,ye.of)(J)}{const bn="";return this.events.next(new Fi(Ke.id,this.urlSerializer.serialize(Ke.extractedUrl),bn,1)),Ke.resolve(null),We.E}}),(0,Pe.b)(Ke=>{const Vt=new yu(Ke.id,this.urlSerializer.serialize(Ke.extractedUrl),this.urlSerializer.serialize(Ke.urlAfterRedirects),Ke.targetSnapshot);this.events.next(Vt)}),(0,Dn.U)(Ke=>(this.currentTransition=J={...Ke,guards:Go(Ke.targetSnapshot,Ke.currentSnapshot,this.rootContexts)},J)),function po(S,M){return(0,Ie.z)(A=>{const{targetSnapshot:F,currentSnapshot:L,guards:{canActivateChecks:J,canDeactivateChecks:de}}=A;return 0===de.length&&0===J.length?(0,ye.of)({...A,guardsResult:!0}):function No(S,M,A,F){return(0,De.D)(S).pipe((0,Ie.z)(L=>function Ls(S,M,A,F,L){const J=M&&M.routeConfig?M.routeConfig.canDeactivate:null;if(!J||0===J.length)return(0,ye.of)(!0);const de=J.map(Qe=>{const Ke=Xs(M)??L,Vt=Ho(Qe,Ke);return rn(function B(S){return S&&mr(S.canDeactivate)}(Vt)?Vt.canDeactivate(S,M,A,F):Ke.runInContext(()=>Vt(S,M,A,F))).pipe((0,we.P)())});return(0,ye.of)(de).pipe(ss())}(L.component,L.route,A,M,F)),(0,we.P)(L=>!0!==L,!0))}(de,F,L,S).pipe((0,Ie.z)(Qe=>Qe&&function $o(S){return"boolean"==typeof S}(Qe)?function Bi(S,M,A,F){return(0,De.D)(M).pipe(He(L=>(0,Jt.z)(function Oo(S,M){return null!==S&&M&&M(new ka(S)),(0,ye.of)(!0)}(L.route.parent,F),function os(S,M){return null!==S&&M&&M(new Uo(S)),(0,ye.of)(!0)}(L.route,F),function Ii(S,M,A){const F=M[M.length-1],J=M.slice(0,M.length-1).reverse().map(de=>function _c(S){const M=S.routeConfig?S.routeConfig.canActivateChild:null;return M&&0!==M.length?{node:S,guards:M}:null}(de)).filter(de=>null!==de).map(de=>Le(()=>{const Qe=de.guards.map(Ke=>{const Vt=Xs(de.node)??A,Zn=Ho(Ke,Vt);return rn(function q(S){return S&&mr(S.canActivateChild)}(Zn)?Zn.canActivateChild(F,S):Vt.runInContext(()=>Zn(F,S))).pipe((0,we.P)())});return(0,ye.of)(Qe).pipe(ss())}));return(0,ye.of)(J).pipe(ss())}(S,L.path,A),function Iu(S,M,A){const F=M.routeConfig?M.routeConfig.canActivate:null;if(!F||0===F.length)return(0,ye.of)(!0);const L=F.map(J=>Le(()=>{const de=Xs(M)??A,Qe=Ho(J,de);return rn(function W(S){return S&&mr(S.canActivate)}(Qe)?Qe.canActivate(M,S):de.runInContext(()=>Qe(M,S))).pipe((0,we.P)())}));return(0,ye.of)(L).pipe(ss())}(S,L.route,A))),(0,we.P)(L=>!0!==L,!0))}(F,J,S,M):(0,ye.of)(Qe)),(0,Dn.U)(Qe=>({...A,guardsResult:Qe})))})}(this.environmentInjector,Ke=>this.events.next(Ke)),(0,Pe.b)(Ke=>{if(J.guardsResult=Ke.guardsResult,Xt(Ke.guardsResult))throw ws(0,Ke.guardsResult);const Vt=new mi(Ke.id,this.urlSerializer.serialize(Ke.extractedUrl),this.urlSerializer.serialize(Ke.urlAfterRedirects),Ke.targetSnapshot,!!Ke.guardsResult);this.events.next(Vt)}),(0,Pt.h)(Ke=>!!Ke.guardsResult||(this.cancelNavigationTransition(Ke,"",3),!1)),an(Ke=>{if(Ke.guards.canActivateChecks.length)return(0,ye.of)(Ke).pipe((0,Pe.b)(Vt=>{const Zn=new Ja(Vt.id,this.urlSerializer.serialize(Vt.extractedUrl),this.urlSerializer.serialize(Vt.urlAfterRedirects),Vt.targetSnapshot);this.events.next(Zn)}),(0,gr.w)(Vt=>{let Zn=!1;return(0,ye.of)(Vt).pipe(function Q(S,M){return(0,Ie.z)(A=>{const{targetSnapshot:F,guards:{canActivateChecks:L}}=A;if(!L.length)return(0,ye.of)(A);let J=0;return(0,De.D)(L).pipe(He(de=>function U(S,M,A,F){const L=S.routeConfig,J=S._resolve;return void 0!==L?.title&&!ut(L)&&(J[Se]=L.title),function K(S,M,A,F){const L=function ge(S){return[...Object.keys(S),...Object.getOwnPropertySymbols(S)]}(S);if(0===L.length)return(0,ye.of)({});const J={};return(0,De.D)(L).pipe((0,Ie.z)(de=>function Je(S,M,A,F){const L=Xs(M)??F,J=Ho(S,L);return rn(J.resolve?J.resolve(M,A):L.runInContext(()=>J(M,A)))}(S[de],M,A,F).pipe((0,we.P)(),(0,Pe.b)(Qe=>{J[de]=Qe}))),wt(1),(0,ln.h)(J),Fe(de=>Tn(de)?We.E:Oe(de)))}(J,S,M,F).pipe((0,Dn.U)(de=>(S._resolvedData=de,S.data=Vn(S,A).resolve,L&&ut(L)&&(S.data[Se]=L.title),null)))}(de.route,F,S,M)),(0,Pe.b)(()=>J++),wt(1),(0,Ie.z)(de=>J===L.length?(0,ye.of)(A):We.E))})}(A.paramsInheritanceStrategy,this.environmentInjector),(0,Pe.b)({next:()=>Zn=!0,complete:()=>{Zn||this.cancelNavigationTransition(Vt,"",2)}}))}),(0,Pe.b)(Vt=>{const Zn=new fa(Vt.id,this.urlSerializer.serialize(Vt.extractedUrl),this.urlSerializer.serialize(Vt.urlAfterRedirects),Vt.targetSnapshot);this.events.next(Zn)}))}),an(Ke=>{const Vt=Zn=>{const Sr=[];Zn.routeConfig?.loadComponent&&!Zn.routeConfig._loadedComponent&&Sr.push(this.configLoader.loadComponent(Zn.routeConfig).pipe((0,Pe.b)(bn=>{Zn.component=bn}),(0,Dn.U)(()=>{})));for(const bn of Zn.children)Sr.push(...Vt(bn));return Sr};return It(Vt(Ke.targetSnapshot.root)).pipe((0,Nt.d)(),(0,or.q)(1))}),an(()=>this.afterPreactivation()),(0,Dn.U)(Ke=>{const Vt=function ti(S,M,A){const F=er(S,M._root,A?A._root:void 0);return new $s(F,M)}(A.routeReuseStrategy,Ke.targetSnapshot,Ke.currentRouterState);return this.currentTransition=J={...Ke,targetRouterState:Vt},J}),(0,Pe.b)(()=>{this.events.next(new Is)}),((S,M,A,F)=>(0,Dn.U)(L=>(new Cs(M,L.targetRouterState,L.currentRouterState,A,F).activate(S),L)))(this.rootContexts,A.routeReuseStrategy,Ke=>this.events.next(Ke),this.inputBindingEnabled),(0,or.q)(1),(0,Pe.b)({next:Ke=>{de=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new zi(Ke.id,this.urlSerializer.serialize(Ke.extractedUrl),this.urlSerializer.serialize(Ke.urlAfterRedirects))),A.titleStrategy?.updateTitle(Ke.targetRouterState.snapshot),Ke.resolve(!0)},complete:()=>{de=!0}}),(0,Sn.R)(this.transitionAbortSubject.pipe((0,Pe.b)(Ke=>{throw Ke}))),on(()=>{de||Qe||this.cancelNavigationTransition(J,"",1),this.currentNavigation?.id===J.id&&(this.currentNavigation=null)}),Fe(Ke=>{if(Qe=!0,rs(Ke))this.events.next(new Zi(J.id,this.urlSerializer.serialize(J.extractedUrl),Ke.message,Ke.cancellationCode)),function fs(S){return rs(S)&&Xt(S.url)}(Ke)?this.events.next(new Gn(Ke.url)):J.resolve(!1);else{this.events.next(new co(J.id,this.urlSerializer.serialize(J.extractedUrl),Ke,J.targetSnapshot??void 0));try{J.resolve(A.errorHandler(Ke))}catch(Vt){J.reject(Vt)}}return We.E}))}))}cancelNavigationTransition(A,F,L){const J=new Zi(A.id,this.urlSerializer.serialize(A.extractedUrl),F,L);this.events.next(J),A.resolve(!1)}static#e=this.\u0275fac=function(F){return new(F||S)};static#t=this.\u0275prov=y.Yz7({token:S,factory:S.\u0275fac,providedIn:"root"})}return S})();function Ei(S){return S!==ar}let mo=(()=>{class S{buildTitle(A){let F,L=A.root;for(;void 0!==L;)F=this.getResolvedTitleForRoute(L)??F,L=L.children.find(J=>J.outlet===_e);return F}getResolvedTitleForRoute(A){return A.data[Se]}static#e=this.\u0275fac=function(F){return new(F||S)};static#t=this.\u0275prov=y.Yz7({token:S,factory:function(){return(0,y.f3M)(Wo)},providedIn:"root"})}return S})(),Wo=(()=>{class S extends mo{constructor(A){super(),this.title=A}updateTitle(A){const F=this.buildTitle(A);void 0!==F&&this.title.setTitle(F)}static#e=this.\u0275fac=function(F){return new(F||S)(y.LFG(Rn.Dx))};static#t=this.\u0275prov=y.Yz7({token:S,factory:S.\u0275fac,providedIn:"root"})}return S})(),qo=(()=>{class S{static#e=this.\u0275fac=function(F){return new(F||S)};static#t=this.\u0275prov=y.Yz7({token:S,factory:function(){return(0,y.f3M)(ya)},providedIn:"root"})}return S})();class Xi{shouldDetach(M){return!1}store(M,A){}shouldAttach(M){return!1}retrieve(M){return null}shouldReuseRoute(M,A){return M.routeConfig===A.routeConfig}}let ya=(()=>{class S extends Xi{static#e=this.\u0275fac=function(){let A;return function(L){return(A||(A=y.n5z(S)))(L||S)}}();static#t=this.\u0275prov=y.Yz7({token:S,factory:S.\u0275fac,providedIn:"root"})}return S})();const Ri=new y.OlP("",{providedIn:"root",factory:()=>({})});let nu=(()=>{class S{static#e=this.\u0275fac=function(F){return new(F||S)};static#t=this.\u0275prov=y.Yz7({token:S,factory:function(){return(0,y.f3M)(md)},providedIn:"root"})}return S})(),md=(()=>{class S{shouldProcessUrl(A){return!0}extract(A){return A}merge(A,F){return A}static#e=this.\u0275fac=function(F){return new(F||S)};static#t=this.\u0275prov=y.Yz7({token:S,factory:S.\u0275fac,providedIn:"root"})}return S})();var $r=function(S){return S[S.COMPLETE=0]="COMPLETE",S[S.FAILED=1]="FAILED",S[S.REDIRECTING=2]="REDIRECTING",S}($r||{});function zl(S,M){S.events.pipe((0,Pt.h)(A=>A instanceof zi||A instanceof Zi||A instanceof co||A instanceof Fi),(0,Dn.U)(A=>A instanceof zi||A instanceof Fi?$r.COMPLETE:A instanceof Zi&&(0===A.code||1===A.code)?$r.REDIRECTING:$r.FAILED),(0,Pt.h)(A=>A!==$r.REDIRECTING),(0,or.q)(1)).subscribe(()=>{M()})}function Ku(S){throw S}function ms(S,M,A){return M.parse("/")}const _o={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Ko={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let _s=(()=>{class S{get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){return"computed"!==this.canceledNavigationResolution?this.currentPageId:this.location.getState()?.\u0275routerPageId??this.currentPageId}get events(){return this._events}constructor(){this.disposed=!1,this.currentPageId=0,this.console=(0,y.f3M)(y.c2e),this.isNgZoneEnabled=!1,this._events=new Et.x,this.options=(0,y.f3M)(Ri,{optional:!0})||{},this.pendingTasks=(0,y.f3M)(y.HDt),this.errorHandler=this.options.errorHandler||Ku,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||ms,this.navigated=!1,this.lastSuccessfulId=-1,this.urlHandlingStrategy=(0,y.f3M)(nu),this.routeReuseStrategy=(0,y.f3M)(qo),this.titleStrategy=(0,y.f3M)(mo),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=(0,y.f3M)(Yn,{optional:!0})?.flat()??[],this.navigationTransitions=(0,y.f3M)(Ir),this.urlSerializer=(0,y.f3M)(Xr),this.location=(0,y.f3M)($n.Ye),this.componentInputBindingEnabled=!!(0,y.f3M)(Ts,{optional:!0}),this.eventsSubscription=new at.w0,this.isNgZoneEnabled=(0,y.f3M)(y.R0b)instanceof y.R0b&&y.R0b.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new On,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=hr(0,null),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe(A=>{this.lastSuccessfulId=A.id,this.currentPageId=this.browserPageId},A=>{this.console.warn(`Unhandled Navigation Error: ${A}`)}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){const A=this.navigationTransitions.events.subscribe(F=>{try{const{currentTransition:L}=this.navigationTransitions;if(null===L)return void(ru(F)&&this._events.next(F));if(F instanceof jr)Ei(L.source)&&(this.browserUrlTree=L.extractedUrl);else if(F instanceof Fi)this.rawUrlTree=L.rawUrl;else if(F instanceof Ai){if("eager"===this.urlUpdateStrategy){if(!L.extras.skipLocationChange){const J=this.urlHandlingStrategy.merge(L.urlAfterRedirects,L.rawUrl);this.setBrowserUrl(J,L)}this.browserUrlTree=L.urlAfterRedirects}}else if(F instanceof Is)this.currentUrlTree=L.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(L.urlAfterRedirects,L.rawUrl),this.routerState=L.targetRouterState,"deferred"===this.urlUpdateStrategy&&(L.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,L),this.browserUrlTree=L.urlAfterRedirects);else if(F instanceof Zi)0!==F.code&&1!==F.code&&(this.navigated=!0),(3===F.code||2===F.code)&&this.restoreHistory(L);else if(F instanceof Gn){const J=this.urlHandlingStrategy.merge(F.url,L.currentRawUrl),de={skipLocationChange:L.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||Ei(L.source)};this.scheduleNavigation(J,ar,null,de,{resolve:L.resolve,reject:L.reject,promise:L.promise})}F instanceof co&&this.restoreHistory(L,!0),F instanceof zi&&(this.navigated=!0),ru(F)&&this._events.next(F)}catch(L){this.navigationTransitions.transitionAbortSubject.next(L)}});this.eventsSubscription.add(A)}resetRootComponentType(A){this.routerState.root.component=A,this.navigationTransitions.rootComponentType=A}initialNavigation(){if(this.setUpLocationChangeListener(),!this.navigationTransitions.hasRequestedNavigation){const A=this.location.getState();this.navigateToSyncWithBrowser(this.location.path(!0),ar,A)}}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(A=>{const F="popstate"===A.type?"popstate":"hashchange";"popstate"===F&&setTimeout(()=>{this.navigateToSyncWithBrowser(A.url,F,A.state)},0)}))}navigateToSyncWithBrowser(A,F,L){const J={replaceUrl:!0},de=L?.navigationId?L:null;if(L){const Ke={...L};delete Ke.navigationId,delete Ke.\u0275routerPageId,0!==Object.keys(Ke).length&&(J.state=Ke)}const Qe=this.parseUrl(A);this.scheduleNavigation(Qe,F,de,J)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(A){this.config=A.map(Xa),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(A,F={}){const{relativeTo:L,queryParams:J,fragment:de,queryParamsHandling:Qe,preserveFragment:Ke}=F,Vt=Ke?this.currentUrlTree.fragment:de;let Sr,Zn=null;switch(Qe){case"merge":Zn={...this.currentUrlTree.queryParams,...J};break;case"preserve":Zn=this.currentUrlTree.queryParams;break;default:Zn=J||null}null!==Zn&&(Zn=this.removeEmptyProps(Zn));try{Sr=jt(L?L.snapshot:this.routerState.snapshot.root)}catch{("string"!=typeof A[0]||!A[0].startsWith("/"))&&(A=[]),Sr=this.currentUrlTree.root}return zn(Sr,A,Zn,Vt??null)}navigateByUrl(A,F={skipLocationChange:!1}){const L=Xt(A)?A:this.parseUrl(A),J=this.urlHandlingStrategy.merge(L,this.rawUrlTree);return this.scheduleNavigation(J,ar,null,F)}navigate(A,F={skipLocationChange:!1}){return function Lr(S){for(let M=0;M<S.length;M++)if(null==S[M])throw new y.vHH(4008,!1)}(A),this.navigateByUrl(this.createUrlTree(A,F),F)}serializeUrl(A){return this.urlSerializer.serialize(A)}parseUrl(A){let F;try{F=this.urlSerializer.parse(A)}catch(L){F=this.malformedUriErrorHandler(L,this.urlSerializer,A)}return F}isActive(A,F){let L;if(L=!0===F?{..._o}:!1===F?{...Ko}:F,Xt(A))return wr(this.currentUrlTree,A,L);const J=this.parseUrl(A);return wr(this.currentUrlTree,J,L)}removeEmptyProps(A){return Object.keys(A).reduce((F,L)=>{const J=A[L];return null!=J&&(F[L]=J),F},{})}scheduleNavigation(A,F,L,J,de){if(this.disposed)return Promise.resolve(!1);let Qe,Ke,Vt;de?(Qe=de.resolve,Ke=de.reject,Vt=de.promise):Vt=new Promise((Sr,bn)=>{Qe=Sr,Ke=bn});const Zn=this.pendingTasks.add();return zl(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(Zn))}),this.navigationTransitions.handleNavigationRequest({source:F,restoredState:L,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,currentBrowserUrl:this.browserUrlTree,rawUrl:A,extras:J,resolve:Qe,reject:Ke,promise:Vt,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),Vt.catch(Sr=>Promise.reject(Sr))}setBrowserUrl(A,F){const L=this.urlSerializer.serialize(A);if(this.location.isCurrentPathEqualTo(L)||F.extras.replaceUrl){const de={...F.extras.state,...this.generateNgRouterState(F.id,this.browserPageId)};this.location.replaceState(L,"",de)}else{const J={...F.extras.state,...this.generateNgRouterState(F.id,this.browserPageId+1)};this.location.go(L,"",J)}}restoreHistory(A,F=!1){if("computed"===this.canceledNavigationResolution){const J=this.currentPageId-this.browserPageId;0!==J?this.location.historyGo(J):this.currentUrlTree===this.getCurrentNavigation()?.finalUrl&&0===J&&(this.resetState(A),this.browserUrlTree=A.currentUrlTree,this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(F&&this.resetState(A),this.resetUrlToCurrentUrlTree())}resetState(A){this.routerState=A.currentRouterState,this.currentUrlTree=A.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,A.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(A,F){return"computed"===this.canceledNavigationResolution?{navigationId:A,\u0275routerPageId:F}:{navigationId:A}}static#e=this.\u0275fac=function(F){return new(F||S)};static#t=this.\u0275prov=y.Yz7({token:S,factory:S.\u0275fac,providedIn:"root"})}return S})();function ru(S){return!(S instanceof Is||S instanceof Gn)}let Ia=(()=>{class S{constructor(A,F,L,J,de,Qe){this.router=A,this.route=F,this.tabIndexAttribute=L,this.renderer=J,this.el=de,this.locationStrategy=Qe,this.href=null,this.commands=null,this.onChanges=new Et.x,this.preserveFragment=!1,this.skipLocationChange=!1,this.replaceUrl=!1;const Ke=de.nativeElement.tagName?.toLowerCase();this.isAnchorElement="a"===Ke||"area"===Ke,this.isAnchorElement?this.subscription=A.events.subscribe(Vt=>{Vt instanceof zi&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(A){null!=this.tabIndexAttribute||this.isAnchorElement||this.applyAttributeValue("tabindex",A)}ngOnChanges(A){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(A){null!=A?(this.commands=Array.isArray(A)?A:[A],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(A,F,L,J,de){return!!(null===this.urlTree||this.isAnchorElement&&(0!==A||F||L||J||de||"string"==typeof this.target&&"_self"!=this.target))||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!this.isAnchorElement)}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){this.href=null!==this.urlTree&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null;const A=null===this.href?null:(0,y.P3R)(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",A)}applyAttributeValue(A,F){const L=this.renderer,J=this.el.nativeElement;null!==F?L.setAttribute(J,A,F):L.removeAttribute(J,A)}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static#e=this.\u0275fac=function(F){return new(F||S)(y.Y36(_s),y.Y36(En),y.$8M("tabindex"),y.Y36(y.Qsj),y.Y36(y.SBq),y.Y36($n.S$))};static#t=this.\u0275dir=y.lG2({type:S,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(F,L){1&F&&y.NdJ("click",function(de){return L.onClick(de.button,de.ctrlKey,de.shiftKey,de.altKey,de.metaKey)}),2&F&&y.uIk("target",L.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:["preserveFragment","preserveFragment",y.VuI],skipLocationChange:["skipLocationChange","skipLocationChange",y.VuI],replaceUrl:["replaceUrl","replaceUrl",y.VuI],routerLink:"routerLink"},standalone:!0,features:[y.Xq5,y.TTD]})}return S})();class yt{}let Ua=(()=>{class S{constructor(A,F,L,J,de){this.router=A,this.injector=L,this.preloadingStrategy=J,this.loader=de}setUpPreloading(){this.subscription=this.router.events.pipe((0,Pt.h)(A=>A instanceof zi),He(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(A,F){const L=[];for(const J of F){J.providers&&!J._injector&&(J._injector=(0,y.MMx)(J.providers,A,`Route: ${J.path}`));const de=J._injector??A,Qe=J._loadedInjector??de;(J.loadChildren&&!J._loadedRoutes&&void 0===J.canLoad||J.loadComponent&&!J._loadedComponent)&&L.push(this.preloadConfig(de,J)),(J.children||J._loadedRoutes)&&L.push(this.processRoutes(Qe,J.children??J._loadedRoutes))}return(0,De.D)(L).pipe((0,xn.J)())}preloadConfig(A,F){return this.preloadingStrategy.preload(F,()=>{let L;L=F.loadChildren&&void 0===F.canLoad?this.loader.loadChildren(A,F):(0,ye.of)(null);const J=L.pipe((0,Ie.z)(de=>null===de?(0,ye.of)(void 0):(F._loadedRoutes=de.routes,F._loadedInjector=de.injector,this.processRoutes(de.injector??A,de.routes))));if(F.loadComponent&&!F._loadedComponent){const de=this.loader.loadComponent(F);return(0,De.D)([J,de]).pipe((0,xn.J)())}return J})}static#e=this.\u0275fac=function(F){return new(F||S)(y.LFG(_s),y.LFG(y.Sil),y.LFG(y.lqb),y.LFG(yt),y.LFG(rr))};static#t=this.\u0275prov=y.Yz7({token:S,factory:S.\u0275fac,providedIn:"root"})}return S})();const tn=new y.OlP("");let mn=(()=>{class S{constructor(A,F,L,J,de={}){this.urlSerializer=A,this.transitions=F,this.viewportScroller=L,this.zone=J,this.options=de,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},de.scrollPositionRestoration=de.scrollPositionRestoration||"disabled",de.anchorScrolling=de.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(A=>{A instanceof jr?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=A.navigationTrigger,this.restoredId=A.restoredState?A.restoredState.navigationId:0):A instanceof zi?(this.lastId=A.id,this.scheduleScrollEvent(A,this.urlSerializer.parse(A.urlAfterRedirects).fragment)):A instanceof Fi&&0===A.code&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(A,this.urlSerializer.parse(A.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(A=>{A instanceof pa&&(A.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(A.position):A.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(A.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(A,F){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new pa(A,"popstate"===this.lastSource?this.store[this.restoredId]:null,F))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static#e=this.\u0275fac=function(F){y.$Z()};static#t=this.\u0275prov=y.Yz7({token:S,factory:S.\u0275fac})}return S})();function tt(S,M){return{\u0275kind:S,\u0275providers:M}}function Cu(){const S=(0,y.f3M)(y.zs3);return M=>{const A=S.get(y.z2F);if(M!==A.components[0])return;const F=S.get(_s),L=S.get(ja);1===S.get(Tl)&&F.initialNavigation(),S.get(Tt,null,y.XFs.Optional)?.setUpPreloading(),S.get(tn,null,y.XFs.Optional)?.init(),F.resetRootComponentType(A.componentTypes[0]),L.closed||(L.next(),L.complete(),L.unsubscribe())}}const ja=new y.OlP("",{factory:()=>new Et.x}),Tl=new y.OlP("",{providedIn:"root",factory:()=>1}),Tt=new y.OlP("");function ir(S){return tt(0,[{provide:Tt,useExisting:Ua},{provide:yt,useExisting:S}])}const sn=new y.OlP("ROUTER_FORROOT_GUARD"),no=[$n.Ye,{provide:Xr,useClass:pi},_s,Cr,{provide:En,useFactory:function Ut(S){return S.routerState.root},deps:[_s]},rr,[]];function Jn(){return new y.PXZ("Router",_s)}let yd=(()=>{class S{constructor(A){}static forRoot(A,F){return{ngModule:S,providers:[no,[],{provide:Yn,multi:!0,useValue:A},{provide:sn,useFactory:Ta,deps:[[_s,new y.FiY,new y.tp0]]},{provide:Ri,useValue:F||{}},F?.useHash?{provide:$n.S$,useClass:$n.Do}:{provide:$n.S$,useClass:$n.b0},{provide:tn,useFactory:()=>{const S=(0,y.f3M)($n.EM),M=(0,y.f3M)(y.R0b),A=(0,y.f3M)(Ri),F=(0,y.f3M)(Ir),L=(0,y.f3M)(Xr);return A.scrollOffset&&S.setOffset(A.scrollOffset),new mn(L,F,S,M,A)}},F?.preloadingStrategy?ir(F.preloadingStrategy).\u0275providers:[],{provide:y.PXZ,multi:!0,useFactory:Jn},F?.initialNavigation?Yo(F):[],F?.bindToComponentInputs?tt(8,[bs,{provide:Ts,useExisting:bs}]).\u0275providers:[],[{provide:iu,useFactory:Cu},{provide:y.tb,multi:!0,useExisting:iu}]]}}static forChild(A){return{ngModule:S,providers:[{provide:Yn,multi:!0,useValue:A}]}}static#e=this.\u0275fac=function(F){return new(F||S)(y.LFG(sn,8))};static#t=this.\u0275mod=y.oAB({type:S});static#n=this.\u0275inj=y.cJS({})}return S})();function Ta(S){return"guarded"}function Yo(S){return["disabled"===S.initialNavigation?tt(3,[{provide:y.ip1,multi:!0,useFactory:()=>{const M=(0,y.f3M)(_s);return()=>{M.setUpLocationChangeListener()}}},{provide:Tl,useValue:2}]).\u0275providers:[],"enabledBlocking"===S.initialNavigation?tt(2,[{provide:Tl,useValue:0},{provide:y.ip1,multi:!0,deps:[y.zs3],useFactory:M=>{const A=M.get($n.V_,Promise.resolve());return()=>A.then(()=>new Promise(F=>{const L=M.get(_s),J=M.get(ja);zl(L,()=>{F(!0)}),M.get(Ir).afterPreactivation=()=>(F(!0),J.closed?(0,ye.of)(void 0):J),L.initialNavigation()}))}}]).\u0275providers:[]]}const iu=new y.OlP("")},3106:(zt,Ye,H)=>{H.d(Ye,{Z:()=>It});var y=H(9058),fe=H(4537),oe=H(534),Ce=H(7879);class De{constructor(Ct,lt){this._delegate=Ct,this.firebase=lt,(0,oe._addComponent)(Ct,new fe.wA("app-compat",()=>this,"PUBLIC")),this.container=Ct.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Ct){this._delegate.automaticDataCollectionEnabled=Ct}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(Ct=>{this._delegate.checkDestroyed(),Ct()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,oe.deleteApp)(this._delegate)))}_getService(Ct,lt=oe._DEFAULT_ENTRY_NAME){var Jt;this._delegate.checkDestroyed();const Ve=this._delegate.container.getProvider(Ct);return!Ve.isInitialized()&&"EXPLICIT"===(null===(Jt=Ve.getComponent())||void 0===Jt?void 0:Jt.instantiationMode)&&Ve.initialize(),Ve.getImmediate({identifier:lt})}_removeServiceInstance(Ct,lt=oe._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(Ct).clearInstance(lt)}_addComponent(Ct){(0,oe._addComponent)(this._delegate,Ct)}_addOrOverwriteComponent(Ct){(0,oe._addOrOverwriteComponent)(this._delegate,Ct)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const Ne=new y.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),pe=function ze(){const ct=function I(ct){const Ct={},lt={__esModule:!0,initializeApp:function Le(at,mt={}){const ue=oe.initializeApp(at,mt);if((0,y.r3)(Ct,ue.name))return Ct[ue.name];const Kt=new ct(ue,lt);return Ct[ue.name]=Kt,Kt},app:Ve,registerVersion:oe.registerVersion,setLogLevel:oe.setLogLevel,onLog:oe.onLog,apps:null,SDK_VERSION:oe.SDK_VERSION,INTERNAL:{registerComponent:function Oe(at){const mt=at.name,ue=mt.replace("-compat","");if(oe._registerComponent(at)&&"PUBLIC"===at.type){const Kt=(Et=Ve())=>{if("function"!=typeof Et[ue])throw Ne.create("invalid-app-argument",{appName:mt});return Et[ue]()};void 0!==at.serviceProps&&(0,y.ZB)(Kt,at.serviceProps),lt[ue]=Kt,ct.prototype[ue]=function(...Et){return this._getService.bind(this,mt).apply(this,at.multipleInstances?Et:[])}}return"PUBLIC"===at.type?lt[ue]:null},removeApp:function Jt(at){delete Ct[at]},useAsService:function We(at,mt){return"serverAuth"===mt?null:mt},modularAPIs:oe}};function Ve(at){if(!(0,y.r3)(Ct,at=at||oe._DEFAULT_ENTRY_NAME))throw Ne.create("no-app",{appName:at});return Ct[at]}return lt.default=lt,Object.defineProperty(lt,"apps",{get:function $e(){return Object.keys(Ct).map(at=>Ct[at])}}),Ve.App=ct,lt}(De);return ct.INTERNAL=Object.assign(Object.assign({},ct.INTERNAL),{createFirebaseNamespace:ze,extendNamespace:function Ct(lt){(0,y.ZB)(ct,lt)},createSubscribe:y.ne,ErrorFactory:y.LL,deepExtend:y.ZB}),ct}(),me=new Ce.Yd("@firebase/app-compat");if((0,y.jU)()&&void 0!==self.firebase){me.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const ct=self.firebase.SDK_VERSION;ct&&ct.indexOf("LITE")>=0&&me.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const It=pe;!function it(ct){(0,oe.registerVersion)("@firebase/app-compat","0.2.21",ct)}()},534:(zt,Ye,H)=>{H.r(Ye),H.d(Ye,{FirebaseError:()=>Ce.ZR,SDK_VERSION:()=>wi,_DEFAULT_ENTRY_NAME:()=>Rt,_addComponent:()=>wr,_addOrOverwriteComponent:()=>Ur,_apps:()=>hn,_clearComponents:()=>Yt,_components:()=>Wt,_getProvider:()=>Or,_registerComponent:()=>kn,_removeServiceInstance:()=>Pr,deleteApp:()=>Xr,getApp:()=>Yi,getApps:()=>xr,initializeApp:()=>Pa,onLog:()=>gi,registerVersion:()=>Gs,setLogLevel:()=>Di});var y=H(5861),fe=H(4537),oe=H(7879),Ce=H(9058);const De=(rt,Ue)=>Ue.some(_t=>rt instanceof _t);let ye,Ne;const pe=new WeakMap,me=new WeakMap,xe=new WeakMap,dt=new WeakMap,it=new WeakMap;let Ct={get(rt,Ue,_t){if(rt instanceof IDBTransaction){if("done"===Ue)return me.get(rt);if("objectStoreNames"===Ue)return rt.objectStoreNames||xe.get(rt);if("store"===Ue)return _t.objectStoreNames[1]?void 0:_t.objectStore(_t.objectStoreNames[0])}return Le(rt[Ue])},set:(rt,Ue,_t)=>(rt[Ue]=_t,!0),has:(rt,Ue)=>rt instanceof IDBTransaction&&("done"===Ue||"store"===Ue)||Ue in rt};function Ve(rt){return"function"==typeof rt?function Jt(rt){return rt!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function ze(){return Ne||(Ne=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(rt)?function(...Ue){return rt.apply($e(this),Ue),Le(pe.get(this))}:function(...Ue){return Le(rt.apply($e(this),Ue))}:function(Ue,..._t){const Xt=rt.call($e(this),Ue,..._t);return xe.set(Xt,Ue.sort?Ue.sort():[Ue]),Le(Xt)}}(rt):(rt instanceof IDBTransaction&&function ct(rt){if(me.has(rt))return;const Ue=new Promise((_t,Xt)=>{const vn=()=>{rt.removeEventListener("complete",jt),rt.removeEventListener("error",zn),rt.removeEventListener("abort",zn)},jt=()=>{_t(),vn()},zn=()=>{Xt(rt.error||new DOMException("AbortError","AbortError")),vn()};rt.addEventListener("complete",jt),rt.addEventListener("error",zn),rt.addEventListener("abort",zn)});me.set(rt,Ue)}(rt),De(rt,function I(){return ye||(ye=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(rt,Ct):rt)}function Le(rt){if(rt instanceof IDBRequest)return function It(rt){const Ue=new Promise((_t,Xt)=>{const vn=()=>{rt.removeEventListener("success",jt),rt.removeEventListener("error",zn)},jt=()=>{_t(Le(rt.result)),vn()},zn=()=>{Xt(rt.error),vn()};rt.addEventListener("success",jt),rt.addEventListener("error",zn)});return Ue.then(_t=>{_t instanceof IDBCursor&&pe.set(_t,rt)}).catch(()=>{}),it.set(Ue,rt),Ue}(rt);if(dt.has(rt))return dt.get(rt);const Ue=Ve(rt);return Ue!==rt&&(dt.set(rt,Ue),it.set(Ue,rt)),Ue}const $e=rt=>it.get(rt),at=["get","getKey","getAll","getAllKeys","count"],mt=["put","add","delete","clear"],ue=new Map;function Kt(rt,Ue){if(!(rt instanceof IDBDatabase)||Ue in rt||"string"!=typeof Ue)return;if(ue.get(Ue))return ue.get(Ue);const _t=Ue.replace(/FromIndex$/,""),Xt=Ue!==_t,vn=mt.includes(_t);if(!(_t in(Xt?IDBIndex:IDBObjectStore).prototype)||!vn&&!at.includes(_t))return;const jt=function(){var zn=(0,y.Z)(function*(Kr,...vr){const Zs=this.transaction(Kr,vn?"readwrite":"readonly");let xi=Zs.store;return Xt&&(xi=xi.index(vr.shift())),(yield Promise.all([xi[_t](...vr),vn&&Zs.done]))[0]});return function(vr){return zn.apply(this,arguments)}}();return ue.set(Ue,jt),jt}!function lt(rt){Ct=rt(Ct)}(rt=>({...rt,get:(Ue,_t,Xt)=>Kt(Ue,_t)||rt.get(Ue,_t,Xt),has:(Ue,_t)=>!!Kt(Ue,_t)||rt.has(Ue,_t)}));class Et{constructor(Ue){this.container=Ue}getPlatformInfoString(){return this.container.getProviders().map(_t=>{if(function $n(rt){const Ue=rt.getComponent();return"VERSION"===Ue?.type}(_t)){const Xt=_t.getImmediate();return`${Xt.library}/${Xt.version}`}return null}).filter(_t=>_t).join(" ")}}const Dn="@firebase/app",or=new oe.Yd("@firebase/app"),Rt="[DEFAULT]",rn={[Dn]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},hn=new Map,Wt=new Map;function wr(rt,Ue){try{rt.container.addComponent(Ue)}catch(_t){or.debug(`Component ${Ue.name} failed to register with FirebaseApp ${rt.name}`,_t)}}function Ur(rt,Ue){rt.container.addOrOverwriteComponent(Ue)}function kn(rt){const Ue=rt.name;if(Wt.has(Ue))return or.debug(`There were multiple attempts to register component ${Ue}.`),!1;Wt.set(Ue,rt);for(const _t of hn.values())wr(_t,rt);return!0}function Or(rt,Ue){const _t=rt.container.getProvider("heartbeat").getImmediate({optional:!0});return _t&&_t.triggerHeartbeat(),rt.container.getProvider(Ue)}function Pr(rt,Ue,_t=Rt){Or(rt,Ue).clearInstance(_t)}function Yt(){Wt.clear()}const On=new Ce.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class In{constructor(Ue,_t,Xt){this._isDeleted=!1,this._options=Object.assign({},Ue),this._config=Object.assign({},_t),this._name=_t.name,this._automaticDataCollectionEnabled=_t.automaticDataCollectionEnabled,this._container=Xt,this.container.addComponent(new fe.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Ue){this.checkDestroyed(),this._automaticDataCollectionEnabled=Ue}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(Ue){this._isDeleted=Ue}checkDestroyed(){if(this.isDeleted)throw On.create("app-deleted",{appName:this._name})}}const wi="10.5.1";function Pa(rt,Ue={}){let _t=rt;"object"!=typeof Ue&&(Ue={name:Ue});const Xt=Object.assign({name:Rt,automaticDataCollectionEnabled:!1},Ue),vn=Xt.name;if("string"!=typeof vn||!vn)throw On.create("bad-app-name",{appName:String(vn)});if(_t||(_t=(0,Ce.aH)()),!_t)throw On.create("no-options");const jt=hn.get(vn);if(jt){if((0,Ce.vZ)(_t,jt.options)&&(0,Ce.vZ)(Xt,jt.config))return jt;throw On.create("duplicate-app",{appName:vn})}const zn=new fe.H0(vn);for(const vr of Wt.values())zn.addComponent(vr);const Kr=new In(_t,Xt,zn);return hn.set(vn,Kr),Kr}function Yi(rt=Rt){const Ue=hn.get(rt);if(!Ue&&rt===Rt&&(0,Ce.aH)())return Pa();if(!Ue)throw On.create("no-app",{appName:rt});return Ue}function xr(){return Array.from(hn.values())}function Xr(rt){return pi.apply(this,arguments)}function pi(){return(pi=(0,y.Z)(function*(rt){const Ue=rt.name;hn.has(Ue)&&(hn.delete(Ue),yield Promise.all(rt.container.getProviders().map(_t=>_t.delete())),rt.isDeleted=!0)})).apply(this,arguments)}function Gs(rt,Ue,_t){var Xt;let vn=null!==(Xt=rn[rt])&&void 0!==Xt?Xt:rt;_t&&(vn+=`-${_t}`);const jt=vn.match(/\s|\//),zn=Ue.match(/\s|\//);if(jt||zn){const Kr=[`Unable to register library "${vn}" with version "${Ue}":`];return jt&&Kr.push(`library name "${vn}" contains illegal characters (whitespace or "/")`),jt&&zn&&Kr.push("and"),zn&&Kr.push(`version name "${Ue}" contains illegal characters (whitespace or "/")`),void or.warn(Kr.join(" "))}kn(new fe.wA(`${vn}-version`,()=>({library:vn,version:Ue}),"VERSION"))}function gi(rt,Ue){if(null!==rt&&"function"!=typeof rt)throw On.create("invalid-log-argument");(0,oe.Am)(rt,Ue)}function Di(rt){(0,oe.Ub)(rt)}const Mi="firebase-heartbeat-database",Ci=1,Te="firebase-heartbeat-store";let ie=null;function re(){return ie||(ie=function Oe(rt,Ue,{blocked:_t,upgrade:Xt,blocking:vn,terminated:jt}={}){const zn=indexedDB.open(rt,Ue),Kr=Le(zn);return Xt&&zn.addEventListener("upgradeneeded",vr=>{Xt(Le(zn.result),vr.oldVersion,vr.newVersion,Le(zn.transaction),vr)}),_t&&zn.addEventListener("blocked",vr=>_t(vr.oldVersion,vr.newVersion,vr)),Kr.then(vr=>{jt&&vr.addEventListener("close",()=>jt()),vn&&vr.addEventListener("versionchange",Zs=>vn(Zs.oldVersion,Zs.newVersion,Zs))}).catch(()=>{}),Kr}(Mi,Ci,{upgrade:(rt,Ue)=>{0===Ue&&rt.createObjectStore(Te)}}).catch(rt=>{throw On.create("idb-open",{originalErrorMessage:rt.message})})),ie}function ae(){return(ae=(0,y.Z)(function*(rt){try{return yield(yield re()).transaction(Te).objectStore(Te).get(St(rt))}catch(Ue){if(Ue instanceof Ce.ZR)or.warn(Ue.message);else{const _t=On.create("idb-get",{originalErrorMessage:Ue?.message});or.warn(_t.message)}}})).apply(this,arguments)}function Re(rt,Ue){return ht.apply(this,arguments)}function ht(){return(ht=(0,y.Z)(function*(rt,Ue){try{const Xt=(yield re()).transaction(Te,"readwrite");yield Xt.objectStore(Te).put(Ue,St(rt)),yield Xt.done}catch(_t){if(_t instanceof Ce.ZR)or.warn(_t.message);else{const Xt=On.create("idb-set",{originalErrorMessage:_t?.message});or.warn(Xt.message)}}})).apply(this,arguments)}function St(rt){return`${rt.name}!${rt.options.appId}`}class Qt{constructor(Ue){this.container=Ue,this._heartbeatsCache=null;const _t=this.container.getProvider("app").getImmediate();this._storage=new qr(_t),this._heartbeatsCachePromise=this._storage.read().then(Xt=>(this._heartbeatsCache=Xt,Xt))}triggerHeartbeat(){var Ue=this;return(0,y.Z)(function*(){const Xt=Ue.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),vn=un();if(null===Ue._heartbeatsCache&&(Ue._heartbeatsCache=yield Ue._heartbeatsCachePromise),Ue._heartbeatsCache.lastSentHeartbeatDate!==vn&&!Ue._heartbeatsCache.heartbeats.some(jt=>jt.date===vn))return Ue._heartbeatsCache.heartbeats.push({date:vn,agent:Xt}),Ue._heartbeatsCache.heartbeats=Ue._heartbeatsCache.heartbeats.filter(jt=>{const zn=new Date(jt.date).valueOf();return Date.now()-zn<=2592e6}),Ue._storage.overwrite(Ue._heartbeatsCache)})()}getHeartbeatsHeader(){var Ue=this;return(0,y.Z)(function*(){if(null===Ue._heartbeatsCache&&(yield Ue._heartbeatsCachePromise),null===Ue._heartbeatsCache||0===Ue._heartbeatsCache.heartbeats.length)return"";const _t=un(),{heartbeatsToSend:Xt,unsentEntries:vn}=function Dr(rt,Ue=1024){const _t=[];let Xt=rt.slice();for(const vn of rt){const jt=_t.find(zn=>zn.agent===vn.agent);if(jt){if(jt.dates.push(vn.date),Ps(_t)>Ue){jt.dates.pop();break}}else if(_t.push({agent:vn.agent,dates:[vn.date]}),Ps(_t)>Ue){_t.pop();break}Xt=Xt.slice(1)}return{heartbeatsToSend:_t,unsentEntries:Xt}}(Ue._heartbeatsCache.heartbeats),jt=(0,Ce.L)(JSON.stringify({version:2,heartbeats:Xt}));return Ue._heartbeatsCache.lastSentHeartbeatDate=_t,vn.length>0?(Ue._heartbeatsCache.heartbeats=vn,yield Ue._storage.overwrite(Ue._heartbeatsCache)):(Ue._heartbeatsCache.heartbeats=[],Ue._storage.overwrite(Ue._heartbeatsCache)),jt})()}}function un(){return(new Date).toISOString().substring(0,10)}class qr{constructor(Ue){this.app=Ue,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,y.Z)(function*(){return!!(0,Ce.hl)()&&(0,Ce.eu)().then(()=>!0).catch(()=>!1)})()}read(){var Ue=this;return(0,y.Z)(function*(){return(yield Ue._canUseIndexedDBPromise)&&(yield function ne(rt){return ae.apply(this,arguments)}(Ue.app))||{heartbeats:[]}})()}overwrite(Ue){var _t=this;return(0,y.Z)(function*(){var Xt;if(yield _t._canUseIndexedDBPromise){const jt=yield _t.read();return Re(_t.app,{lastSentHeartbeatDate:null!==(Xt=Ue.lastSentHeartbeatDate)&&void 0!==Xt?Xt:jt.lastSentHeartbeatDate,heartbeats:Ue.heartbeats})}})()}add(Ue){var _t=this;return(0,y.Z)(function*(){var Xt;if(yield _t._canUseIndexedDBPromise){const jt=yield _t.read();return Re(_t.app,{lastSentHeartbeatDate:null!==(Xt=Ue.lastSentHeartbeatDate)&&void 0!==Xt?Xt:jt.lastSentHeartbeatDate,heartbeats:[...jt.heartbeats,...Ue.heartbeats]})}})()}}function Ps(rt){return(0,Ce.L)(JSON.stringify({version:2,heartbeats:rt})).length}!function Ys(rt){kn(new fe.wA("platform-logger",Ue=>new Et(Ue),"PRIVATE")),kn(new fe.wA("heartbeat",Ue=>new Qt(Ue),"PRIVATE")),Gs(Dn,"0.9.21",rt),Gs(Dn,"0.9.21","esm2017"),Gs("fire-js","")}("")},4537:(zt,Ye,H)=>{H.d(Ye,{H0:()=>I,wA:()=>oe});var y=H(5861),fe=H(9058);class oe{constructor(pe,me,xe){this.name=pe,this.instanceFactory=me,this.type=xe,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(pe){return this.instantiationMode=pe,this}setMultipleInstances(pe){return this.multipleInstances=pe,this}setServiceProps(pe){return this.serviceProps=pe,this}setInstanceCreatedCallback(pe){return this.onInstanceCreated=pe,this}}const Ce="[DEFAULT]";class De{constructor(pe,me){this.name=pe,this.container=me,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(pe){const me=this.normalizeInstanceIdentifier(pe);if(!this.instancesDeferred.has(me)){const xe=new fe.BH;if(this.instancesDeferred.set(me,xe),this.isInitialized(me)||this.shouldAutoInitialize())try{const dt=this.getOrInitializeService({instanceIdentifier:me});dt&&xe.resolve(dt)}catch{}}return this.instancesDeferred.get(me).promise}getImmediate(pe){var me;const xe=this.normalizeInstanceIdentifier(pe?.identifier),dt=null!==(me=pe?.optional)&&void 0!==me&&me;if(!this.isInitialized(xe)&&!this.shouldAutoInitialize()){if(dt)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:xe})}catch(it){if(dt)return null;throw it}}getComponent(){return this.component}setComponent(pe){if(pe.name!==this.name)throw Error(`Mismatching Component ${pe.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=pe,this.shouldAutoInitialize()){if(function Ne(ze){return"EAGER"===ze.instantiationMode}(pe))try{this.getOrInitializeService({instanceIdentifier:Ce})}catch{}for(const[me,xe]of this.instancesDeferred.entries()){const dt=this.normalizeInstanceIdentifier(me);try{const it=this.getOrInitializeService({instanceIdentifier:dt});xe.resolve(it)}catch{}}}}clearInstance(pe=Ce){this.instancesDeferred.delete(pe),this.instancesOptions.delete(pe),this.instances.delete(pe)}delete(){var pe=this;return(0,y.Z)(function*(){const me=Array.from(pe.instances.values());yield Promise.all([...me.filter(xe=>"INTERNAL"in xe).map(xe=>xe.INTERNAL.delete()),...me.filter(xe=>"_delete"in xe).map(xe=>xe._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(pe=Ce){return this.instances.has(pe)}getOptions(pe=Ce){return this.instancesOptions.get(pe)||{}}initialize(pe={}){const{options:me={}}=pe,xe=this.normalizeInstanceIdentifier(pe.instanceIdentifier);if(this.isInitialized(xe))throw Error(`${this.name}(${xe}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const dt=this.getOrInitializeService({instanceIdentifier:xe,options:me});for(const[it,It]of this.instancesDeferred.entries())xe===this.normalizeInstanceIdentifier(it)&&It.resolve(dt);return dt}onInit(pe,me){var xe;const dt=this.normalizeInstanceIdentifier(me),it=null!==(xe=this.onInitCallbacks.get(dt))&&void 0!==xe?xe:new Set;it.add(pe),this.onInitCallbacks.set(dt,it);const It=this.instances.get(dt);return It&&pe(It,dt),()=>{it.delete(pe)}}invokeOnInitCallbacks(pe,me){const xe=this.onInitCallbacks.get(me);if(xe)for(const dt of xe)try{dt(pe,me)}catch{}}getOrInitializeService({instanceIdentifier:pe,options:me={}}){let xe=this.instances.get(pe);if(!xe&&this.component&&(xe=this.component.instanceFactory(this.container,{instanceIdentifier:(ze=pe,ze===Ce?void 0:ze),options:me}),this.instances.set(pe,xe),this.instancesOptions.set(pe,me),this.invokeOnInitCallbacks(xe,pe),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,pe,xe)}catch{}var ze;return xe||null}normalizeInstanceIdentifier(pe=Ce){return this.component?this.component.multipleInstances?pe:Ce:pe}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class I{constructor(pe){this.name=pe,this.providers=new Map}addComponent(pe){const me=this.getProvider(pe.name);if(me.isComponentSet())throw new Error(`Component ${pe.name} has already been registered with ${this.name}`);me.setComponent(pe)}addOrOverwriteComponent(pe){this.getProvider(pe.name).isComponentSet()&&this.providers.delete(pe.name),this.addComponent(pe)}getProvider(pe){if(this.providers.has(pe))return this.providers.get(pe);const me=new De(pe,this);return this.providers.set(pe,me),me}getProviders(){return Array.from(this.providers.values())}}},7879:(zt,Ye,H)=>{H.d(Ye,{Am:()=>ze,Ub:()=>I,Yd:()=>Ne,in:()=>fe});const y=[];var fe=function(pe){return pe[pe.DEBUG=0]="DEBUG",pe[pe.VERBOSE=1]="VERBOSE",pe[pe.INFO=2]="INFO",pe[pe.WARN=3]="WARN",pe[pe.ERROR=4]="ERROR",pe[pe.SILENT=5]="SILENT",pe}(fe||{});const oe={debug:fe.DEBUG,verbose:fe.VERBOSE,info:fe.INFO,warn:fe.WARN,error:fe.ERROR,silent:fe.SILENT},Ce=fe.INFO,De={[fe.DEBUG]:"log",[fe.VERBOSE]:"log",[fe.INFO]:"info",[fe.WARN]:"warn",[fe.ERROR]:"error"},ye=(pe,me,...xe)=>{if(me<pe.logLevel)return;const dt=(new Date).toISOString(),it=De[me];if(!it)throw new Error(`Attempted to log a message with an invalid logType (value: ${me})`);console[it](`[${dt}]  ${pe.name}:`,...xe)};class Ne{constructor(me){this.name=me,this._logLevel=Ce,this._logHandler=ye,this._userLogHandler=null,y.push(this)}get logLevel(){return this._logLevel}set logLevel(me){if(!(me in fe))throw new TypeError(`Invalid value "${me}" assigned to \`logLevel\``);this._logLevel=me}setLogLevel(me){this._logLevel="string"==typeof me?oe[me]:me}get logHandler(){return this._logHandler}set logHandler(me){if("function"!=typeof me)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=me}get userLogHandler(){return this._userLogHandler}set userLogHandler(me){this._userLogHandler=me}debug(...me){this._userLogHandler&&this._userLogHandler(this,fe.DEBUG,...me),this._logHandler(this,fe.DEBUG,...me)}log(...me){this._userLogHandler&&this._userLogHandler(this,fe.VERBOSE,...me),this._logHandler(this,fe.VERBOSE,...me)}info(...me){this._userLogHandler&&this._userLogHandler(this,fe.INFO,...me),this._logHandler(this,fe.INFO,...me)}warn(...me){this._userLogHandler&&this._userLogHandler(this,fe.WARN,...me),this._logHandler(this,fe.WARN,...me)}error(...me){this._userLogHandler&&this._userLogHandler(this,fe.ERROR,...me),this._logHandler(this,fe.ERROR,...me)}}function I(pe){y.forEach(me=>{me.setLogLevel(pe)})}function ze(pe,me){for(const xe of y){let dt=null;me&&me.level&&(dt=oe[me.level]),xe.userLogHandler=null===pe?null:(it,It,...ct)=>{const Ct=ct.map(lt=>{if(null==lt)return null;if("string"==typeof lt)return lt;if("number"==typeof lt||"boolean"==typeof lt)return lt.toString();if(lt instanceof Error)return lt.message;try{return JSON.stringify(lt)}catch{return null}}).filter(lt=>lt).join(" ");It>=(dt??it.logLevel)&&pe({level:fe[It].toLowerCase(),message:Ct,args:ct,type:it.name})}}}},7142:(zt,Ye,H)=>{H.d(Ye,{Z:()=>y.Z});var y=H(3106);y.Z.registerVersion("firebase","10.5.1","app-compat")},2872:(zt,Ye,H)=>{H.r(Ye);var y=H(5861),fe=H(3106),oe=H(9058),Ce=H(534),De=H(7879),ye=H(7582),Ne=H(4537);const ze={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"};const It=function dt(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend.","unsupported-password-policy-schema-version":"The password policy received from the backend uses a schema version that is not supported by this version of the Firebase SDK.","password-does-not-meet-requirements":"The password does not meet the requirements."}},ct=function it(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},Ct=new oe.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Jt=new De.Yd("@firebase/auth");function Le(b,...f){Jt.logLevel<=De.in.ERROR&&Jt.error(`Auth (${Ce.SDK_VERSION}): ${b}`,...f)}function $e(b,...f){throw mt(b,...f)}function Oe(b,...f){return mt(b,...f)}function We(b,f,_){const C=Object.assign(Object.assign({},ct()),{[f]:_});return new oe.LL("auth","Firebase",C).create(f,{appName:b.name})}function at(b,f,_){if(!(f instanceof _))throw _.name!==f.constructor.name&&$e(b,"argument-error"),We(b,"argument-error",`Type of ${f.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function mt(b,...f){if("string"!=typeof b){const _=f[0],C=[...f.slice(1)];return C[0]&&(C[0].appName=b.name),b._errorFactory.create(_,...C)}return Ct.create(b,...f)}function ue(b,f,..._){if(!b)throw mt(f,..._)}function Kt(b){const f="INTERNAL ASSERTION FAILED: "+b;throw Le(f),new Error(f)}function Et(b,f){b||Kt(f)}function $n(){var b;return typeof self<"u"&&(null===(b=self.location)||void 0===b?void 0:b.href)||""}function Dn(){return"http:"===gr()||"https:"===gr()}function gr(){var b;return typeof self<"u"&&(null===(b=self.location)||void 0===b?void 0:b.protocol)||null}class Pt{constructor(f,_){this.shortDelay=f,this.longDelay=_,Et(_>f,"Short delay should be less than long delay!"),this.isMobile=(0,oe.uI)()||(0,oe.b$)()}get(){return function or(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(Dn()||(0,oe.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Ie(b,f){Et(b.emulator,"Emulator should always be set here");const{url:_}=b.emulator;return f?`${_}${f.startsWith("/")?f.slice(1):f}`:_}class we{static initialize(f,_,C){this.fetchImpl=f,_&&(this.headersImpl=_),C&&(this.responseImpl=C)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:typeof globalThis<"u"&&globalThis.fetch?globalThis.fetch:typeof fetch<"u"?fetch:void Kt("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:typeof globalThis<"u"&&globalThis.Headers?globalThis.Headers:typeof Headers<"u"?Headers:void Kt("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:typeof globalThis<"u"&&globalThis.Response?globalThis.Response:typeof Response<"u"?Response:void Kt("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const He={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},Pe=new Pt(3e4,6e4);function Fe(b,f){return b.tenantId&&!f.tenantId?Object.assign(Object.assign({},f),{tenantId:b.tenantId}):f}function Ze(b,f,_,C){return Nt.apply(this,arguments)}function Nt(){return(Nt=(0,y.Z)(function*(b,f,_,C,G={}){return wt(b,G,(0,y.Z)(function*(){let X={},Ee={};C&&("GET"===f?Ee=C:X={body:JSON.stringify(C)});const Ge=(0,oe.xO)(Object.assign({key:b.config.apiKey},Ee)).slice(1),pt=yield b._getAdditionalHeaders();return pt["Content-Type"]="application/json",b.languageCode&&(pt["X-Firebase-Locale"]=b.languageCode),we.fetch()(on(b,b.config.apiHost,_,Ge),Object.assign({method:f,headers:pt,referrerPolicy:"no-referrer"},X))}))})).apply(this,arguments)}function wt(b,f,_){return nr.apply(this,arguments)}function nr(){return(nr=(0,y.Z)(function*(b,f,_){b._canInitEmulator=!1;const C=Object.assign(Object.assign({},He),f);try{const G=new xn(b),X=yield Promise.race([_(),G.promise]);G.clearNetworkTimeout();const Ee=yield X.json();if("needConfirmation"in Ee)throw Rn(b,"account-exists-with-different-credential",Ee);if(X.ok&&!("errorMessage"in Ee))return Ee;{const Ge=X.ok?Ee.errorMessage:Ee.error.message,[pt,en]=Ge.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===pt)throw Rn(b,"credential-already-in-use",Ee);if("EMAIL_EXISTS"===pt)throw Rn(b,"email-already-in-use",Ee);if("USER_DISABLED"===pt)throw Rn(b,"user-disabled",Ee);const pn=C[pt]||pt.toLowerCase().replace(/[_\s]+/g,"-");if(en)throw We(b,pn,en);$e(b,pn)}}catch(G){if(G instanceof oe.ZR)throw G;$e(b,"network-request-failed",{message:String(G)})}})).apply(this,arguments)}function Ft(b,f,_,C){return ln.apply(this,arguments)}function ln(){return(ln=(0,y.Z)(function*(b,f,_,C,G={}){const X=yield Ze(b,f,_,C,G);return"mfaPendingCredential"in X&&$e(b,"multi-factor-auth-required",{_serverResponse:X}),X})).apply(this,arguments)}function on(b,f,_,C){const G=`${f}${_}?${C}`;return b.config.emulator?Ie(b.config,G):`${b.config.apiScheme}://${G}`}function Sn(b){switch(b){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class xn{constructor(f){this.auth=f,this.timer=null,this.promise=new Promise((_,C)=>{this.timer=setTimeout(()=>C(Oe(this.auth,"network-request-failed")),Pe.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Rn(b,f,_){const C={appName:b.name};_.email&&(C.email=_.email),_.phoneNumber&&(C.phoneNumber=_.phoneNumber);const G=Oe(b,f,C);return G.customData._tokenResponse=_,G}function _e(b){return void 0!==b&&void 0!==b.getResponse}function Se(b){return void 0!==b&&void 0!==b.enterprise}class je{constructor(f){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===f.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=f.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=f.recaptchaEnforcementState}getProviderEnforcementState(f){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const _ of this.recaptchaEnforcementState)if(_.provider&&_.provider===f)return Sn(_.enforcementState);return null}isProviderEnabled(f){return"ENFORCE"===this.getProviderEnforcementState(f)||"AUDIT"===this.getProviderEnforcementState(f)}}function ft(){return(ft=(0,y.Z)(function*(b){return(yield Ze(b,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function Mt(b,f){return Nn.apply(this,arguments)}function Nn(){return(Nn=(0,y.Z)(function*(b,f){return Ze(b,"GET","/v2/recaptchaConfig",Fe(b,f))})).apply(this,arguments)}function Rt(){return(Rt=(0,y.Z)(function*(b,f){return Ze(b,"POST","/v1/accounts:delete",f)})).apply(this,arguments)}function hn(){return(hn=(0,y.Z)(function*(b,f){return Ze(b,"POST","/v1/accounts:update",f)})).apply(this,arguments)}function wr(){return(wr=(0,y.Z)(function*(b,f){return Ze(b,"POST","/v1/accounts:lookup",f)})).apply(this,arguments)}function Ur(b){if(b)try{const f=new Date(Number(b));if(!isNaN(f.getTime()))return f.toUTCString()}catch{}}function Pr(){return(Pr=(0,y.Z)(function*(b,f=!1){const _=(0,oe.m9)(b),C=yield _.getIdToken(f),G=Wr(C);ue(G&&G.exp&&G.auth_time&&G.iat,_.auth,"internal-error");const X="object"==typeof G.firebase?G.firebase:void 0,Ee=X?.sign_in_provider;return{claims:G,token:C,authTime:Ur(Yt(G.auth_time)),issuedAtTime:Ur(Yt(G.iat)),expirationTime:Ur(Yt(G.exp)),signInProvider:Ee||null,signInSecondFactor:X?.sign_in_second_factor||null}})).apply(this,arguments)}function Yt(b){return 1e3*Number(b)}function Wr(b){const[f,_,C]=b.split(".");if(void 0===f||void 0===_||void 0===C)return Le("JWT malformed, contained fewer than 3 sections"),null;try{const G=(0,oe.tV)(_);return G?JSON.parse(G):(Le("Failed to decode base64 JWT payload"),null)}catch(G){return Le("Caught error parsing JWT payload as JSON",G?.toString()),null}}function In(b,f){return wi.apply(this,arguments)}function wi(){return(wi=(0,y.Z)(function*(b,f,_=!1){if(_)return f;try{return yield f}catch(C){throw C instanceof oe.ZR&&function Pa({code:b}){return"auth/user-disabled"===b||"auth/user-token-expired"===b}(C)&&b.auth.currentUser===b&&(yield b.auth.signOut()),C}})).apply(this,arguments)}class Yi{constructor(f){this.user=f,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(f){var _;if(f){const C=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),C}{this.errorBackoff=3e4;const G=(null!==(_=this.user.stsTokenManager.expirationTime)&&void 0!==_?_:0)-Date.now()-3e5;return Math.max(0,G)}}schedule(f=!1){var _=this;if(!this.isRunning)return;const C=this.getInterval(f);this.timerId=setTimeout((0,y.Z)(function*(){yield _.iteration()}),C)}iteration(){var f=this;return(0,y.Z)(function*(){try{yield f.user.getIdToken(!0)}catch(_){return void("auth/network-request-failed"===_?.code&&f.schedule(!0))}f.schedule()})()}}class xr{constructor(f,_){this.createdAt=f,this.lastLoginAt=_,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ur(this.lastLoginAt),this.creationTime=Ur(this.createdAt)}_copy(f){this.createdAt=f.createdAt,this.lastLoginAt=f.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function Xr(b){return pi.apply(this,arguments)}function pi(){return pi=(0,y.Z)(function*(b){var f;const _=b.auth,C=yield b.getIdToken(),G=yield In(b,function Wt(b,f){return wr.apply(this,arguments)}(_,{idToken:C}));ue(G?.users.length,_,"internal-error");const X=G.users[0];b._notifyReloadListener(X);const Ee=null!==(f=X.providerUserInfo)&&void 0!==f&&f.length?function Mi(b){return b.map(f=>{var{providerId:_}=f,C=(0,ye._T)(f,["providerId"]);return{providerId:_,uid:C.rawId||"",displayName:C.displayName||null,email:C.email||null,phoneNumber:C.phoneNumber||null,photoURL:C.photoUrl||null}})}(X.providerUserInfo):[],Ge=function Di(b,f){return[...b.filter(C=>!f.some(G=>G.providerId===C.providerId)),...f]}(b.providerData,Ee),pn=!!b.isAnonymous&&!(b.email&&X.passwordHash||Ge?.length),fn={uid:X.localId,displayName:X.displayName||null,photoURL:X.photoUrl||null,email:X.email||null,emailVerified:X.emailVerified||!1,phoneNumber:X.phoneNumber||null,tenantId:X.tenantId||null,providerData:Ge,metadata:new xr(X.createdAt,X.lastLoginAt),isAnonymous:pn};Object.assign(b,fn)}),pi.apply(this,arguments)}function gi(){return(gi=(0,y.Z)(function*(b){const f=(0,oe.m9)(b);yield Xr(f),yield f.auth._persistUserIfCurrent(f),f.auth._notifyListenersIfCurrent(f)})).apply(this,arguments)}function Te(){return(Te=(0,y.Z)(function*(b,f){const _=yield wt(b,{},(0,y.Z)(function*(){const C=(0,oe.xO)({grant_type:"refresh_token",refresh_token:f}).slice(1),{tokenApiHost:G,apiKey:X}=b.config,Ee=on(b,G,"/v1/token",`key=${X}`),Ge=yield b._getAdditionalHeaders();return Ge["Content-Type"]="application/x-www-form-urlencoded",we.fetch()(Ee,{method:"POST",headers:Ge,body:C})}));return{accessToken:_.access_token,expiresIn:_.expires_in,refreshToken:_.refresh_token}})).apply(this,arguments)}class ie{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(f){ue(f.idToken,"internal-error"),ue(typeof f.idToken<"u","internal-error"),ue(typeof f.refreshToken<"u","internal-error");const _="expiresIn"in f&&typeof f.expiresIn<"u"?Number(f.expiresIn):function On(b){const f=Wr(b);return ue(f,"internal-error"),ue(typeof f.exp<"u","internal-error"),ue(typeof f.iat<"u","internal-error"),Number(f.exp)-Number(f.iat)}(f.idToken);this.updateTokensAndExpiration(f.idToken,f.refreshToken,_)}getToken(f,_=!1){var C=this;return(0,y.Z)(function*(){return ue(!C.accessToken||C.refreshToken,f,"user-token-expired"),_||!C.accessToken||C.isExpired?C.refreshToken?(yield C.refresh(f,C.refreshToken),C.accessToken):null:C.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(f,_){var C=this;return(0,y.Z)(function*(){const{accessToken:G,refreshToken:X,expiresIn:Ee}=yield function Ci(b,f){return Te.apply(this,arguments)}(f,_);C.updateTokensAndExpiration(G,X,Number(Ee))})()}updateTokensAndExpiration(f,_,C){this.refreshToken=_||null,this.accessToken=f||null,this.expirationTime=Date.now()+1e3*C}static fromJSON(f,_){const{refreshToken:C,accessToken:G,expirationTime:X}=_,Ee=new ie;return C&&(ue("string"==typeof C,"internal-error",{appName:f}),Ee.refreshToken=C),G&&(ue("string"==typeof G,"internal-error",{appName:f}),Ee.accessToken=G),X&&(ue("number"==typeof X,"internal-error",{appName:f}),Ee.expirationTime=X),Ee}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(f){this.accessToken=f.accessToken,this.refreshToken=f.refreshToken,this.expirationTime=f.expirationTime}_clone(){return Object.assign(new ie,this.toJSON())}_performRefresh(){return Kt("not implemented")}}function re(b,f){ue("string"==typeof b||typeof b>"u","internal-error",{appName:f})}class ne{constructor(f){var{uid:_,auth:C,stsTokenManager:G}=f,X=(0,ye._T)(f,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Yi(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=_,this.auth=C,this.stsTokenManager=G,this.accessToken=G.accessToken,this.displayName=X.displayName||null,this.email=X.email||null,this.emailVerified=X.emailVerified||!1,this.phoneNumber=X.phoneNumber||null,this.photoURL=X.photoURL||null,this.isAnonymous=X.isAnonymous||!1,this.tenantId=X.tenantId||null,this.providerData=X.providerData?[...X.providerData]:[],this.metadata=new xr(X.createdAt||void 0,X.lastLoginAt||void 0)}getIdToken(f){var _=this;return(0,y.Z)(function*(){const C=yield In(_,_.stsTokenManager.getToken(_.auth,f));return ue(C,_.auth,"internal-error"),_.accessToken!==C&&(_.accessToken=C,yield _.auth._persistUserIfCurrent(_),_.auth._notifyListenersIfCurrent(_)),C})()}getIdTokenResult(f){return function Or(b){return Pr.apply(this,arguments)}(this,f)}reload(){return function Gs(b){return gi.apply(this,arguments)}(this)}_assign(f){this!==f&&(ue(this.uid===f.uid,this.auth,"internal-error"),this.displayName=f.displayName,this.photoURL=f.photoURL,this.email=f.email,this.emailVerified=f.emailVerified,this.phoneNumber=f.phoneNumber,this.isAnonymous=f.isAnonymous,this.tenantId=f.tenantId,this.providerData=f.providerData.map(_=>Object.assign({},_)),this.metadata._copy(f.metadata),this.stsTokenManager._assign(f.stsTokenManager))}_clone(f){const _=new ne(Object.assign(Object.assign({},this),{auth:f,stsTokenManager:this.stsTokenManager._clone()}));return _.metadata._copy(this.metadata),_}_onReload(f){ue(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=f,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(f){this.reloadListener?this.reloadListener(f):this.reloadUserInfo=f}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(f,_=!1){var C=this;return(0,y.Z)(function*(){let G=!1;f.idToken&&f.idToken!==C.stsTokenManager.accessToken&&(C.stsTokenManager.updateFromServerResponse(f),G=!0),_&&(yield Xr(C)),yield C.auth._persistUserIfCurrent(C),G&&C.auth._notifyListenersIfCurrent(C)})()}delete(){var f=this;return(0,y.Z)(function*(){const _=yield f.getIdToken();return yield In(f,function Ln(b,f){return Rt.apply(this,arguments)}(f.auth,{idToken:_})),f.stsTokenManager.clearRefreshToken(),f.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(f=>Object.assign({},f)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(f,_){var C,G,X,Ee,Ge,pt,en,pn;const fn=null!==(C=_.displayName)&&void 0!==C?C:void 0,cs=null!==(G=_.email)&&void 0!==G?G:void 0,ta=null!==(X=_.phoneNumber)&&void 0!==X?X:void 0,Uu=null!==(Ee=_.photoURL)&&void 0!==Ee?Ee:void 0,kc=null!==(Ge=_.tenantId)&&void 0!==Ge?Ge:void 0,cl=null!==(pt=_._redirectEventId)&&void 0!==pt?pt:void 0,uc=null!==(en=_.createdAt)&&void 0!==en?en:void 0,_h=null!==(pn=_.lastLoginAt)&&void 0!==pn?pn:void 0,{uid:vh,emailVerified:Hi,isAnonymous:Ld,providerData:cc,stsTokenManager:Fc}=_;ue(vh&&Fc,f,"internal-error");const pu=ie.fromJSON(this.name,Fc);ue("string"==typeof vh,f,"internal-error"),re(fn,f.name),re(cs,f.name),ue("boolean"==typeof Hi,f,"internal-error"),ue("boolean"==typeof Ld,f,"internal-error"),re(ta,f.name),re(Uu,f.name),re(kc,f.name),re(cl,f.name),re(uc,f.name),re(_h,f.name);const Ml=new ne({uid:vh,auth:f,email:cs,emailVerified:Hi,displayName:fn,isAnonymous:Ld,photoURL:Uu,phoneNumber:ta,tenantId:kc,stsTokenManager:pu,createdAt:uc,lastLoginAt:_h});return cc&&Array.isArray(cc)&&(Ml.providerData=cc.map(af=>Object.assign({},af))),cl&&(Ml._redirectEventId=cl),Ml}static _fromIdTokenResponse(f,_,C=!1){return(0,y.Z)(function*(){const G=new ie;G.updateFromServerResponse(_);const X=new ne({uid:_.localId,auth:f,stsTokenManager:G,isAnonymous:C});return yield Xr(X),X})()}}const ae=new Map;function Re(b){Et(b instanceof Function,"Expected a class definition");let f=ae.get(b);return f?(Et(f instanceof b,"Instance stored in cache mismatched with class"),f):(f=new b,ae.set(b,f),f)}const St=(()=>{class b{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,y.Z)(function*(){return!0})()}_set(_,C){var G=this;return(0,y.Z)(function*(){G.storage[_]=C})()}_get(_){var C=this;return(0,y.Z)(function*(){const G=C.storage[_];return void 0===G?null:G})()}_remove(_){var C=this;return(0,y.Z)(function*(){delete C.storage[_]})()}_addListener(_,C){}_removeListener(_,C){}}return b.type="NONE",b})();function Bt(b,f,_){return`firebase:${b}:${f}:${_}`}class gn{constructor(f,_,C){this.persistence=f,this.auth=_,this.userKey=C;const{config:G,name:X}=this.auth;this.fullUserKey=Bt(this.userKey,G.apiKey,X),this.fullPersistenceKey=Bt("persistence",G.apiKey,X),this.boundEventHandler=_._onStorageEvent.bind(_),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(f){return this.persistence._set(this.fullUserKey,f.toJSON())}getCurrentUser(){var f=this;return(0,y.Z)(function*(){const _=yield f.persistence._get(f.fullUserKey);return _?ne._fromJSON(f.auth,_):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(f){var _=this;return(0,y.Z)(function*(){if(_.persistence===f)return;const C=yield _.getCurrentUser();return yield _.removeCurrentUser(),_.persistence=f,C?_.setCurrentUser(C):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(f,_,C="authUser"){return(0,y.Z)(function*(){if(!_.length)return new gn(Re(St),f,C);const G=(yield Promise.all(_.map(function(){var en=(0,y.Z)(function*(pn){if(yield pn._isAvailable())return pn});return function(pn){return en.apply(this,arguments)}}()))).filter(en=>en);let X=G[0]||Re(St);const Ee=Bt(C,f.config.apiKey,f.name);let Ge=null;for(const en of _)try{const pn=yield en._get(Ee);if(pn){const fn=ne._fromJSON(f,pn);en!==X&&(Ge=fn),X=en;break}}catch{}const pt=G.filter(en=>en._shouldAllowMigration);return X._shouldAllowMigration&&pt.length?(X=pt[0],Ge&&(yield X._set(Ee,Ge.toJSON())),yield Promise.all(_.map(function(){var en=(0,y.Z)(function*(pn){if(pn!==X)try{yield pn._remove(Ee)}catch{}});return function(pn){return en.apply(this,arguments)}}())),new gn(X,f,C)):new gn(X,f,C)})()}}function Qt(b){const f=b.toLowerCase();if(f.includes("opera/")||f.includes("opr/")||f.includes("opios/"))return"Opera";if(Ps(f))return"IEMobile";if(f.includes("msie")||f.includes("trident/"))return"IE";if(f.includes("edge/"))return"Edge";if(un(f))return"Firefox";if(f.includes("silk/"))return"Silk";if(rt(f))return"Blackberry";if(Ue(f))return"Webos";if(Dr(f))return"Safari";if((f.includes("chrome/")||qr(f))&&!f.includes("edge/"))return"Chrome";if(Ys(f))return"Android";{const C=b.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===C?.length)return C[1]}return"Other"}function un(b=(0,oe.z$)()){return/firefox\//i.test(b)}function Dr(b=(0,oe.z$)()){const f=b.toLowerCase();return f.includes("safari/")&&!f.includes("chrome/")&&!f.includes("crios/")&&!f.includes("android")}function qr(b=(0,oe.z$)()){return/crios\//i.test(b)}function Ps(b=(0,oe.z$)()){return/iemobile/i.test(b)}function Ys(b=(0,oe.z$)()){return/android/i.test(b)}function rt(b=(0,oe.z$)()){return/blackberry/i.test(b)}function Ue(b=(0,oe.z$)()){return/webos/i.test(b)}function _t(b=(0,oe.z$)()){return/iphone|ipad|ipod/i.test(b)||/macintosh/i.test(b)&&/mobile/i.test(b)}function zn(b=(0,oe.z$)()){return _t(b)||Ys(b)||Ue(b)||rt(b)||/windows phone/i.test(b)||Ps(b)}function vr(b,f=[]){let _;switch(b){case"Browser":_=Qt((0,oe.z$)());break;case"Worker":_=`${Qt((0,oe.z$)())}-${b}`;break;default:_=b}const C=f.length?f.join(","):"FirebaseCore-web";return`${_}/JsCore/${Ce.SDK_VERSION}/${C}`}class Zs{constructor(f){this.auth=f,this.queue=[]}pushCallback(f,_){const C=X=>new Promise((Ee,Ge)=>{try{Ee(f(X))}catch(pt){Ge(pt)}});C.onAbort=_,this.queue.push(C);const G=this.queue.length-1;return()=>{this.queue[G]=()=>Promise.resolve()}}runMiddleware(f){var _=this;return(0,y.Z)(function*(){if(_.auth.currentUser===f)return;const C=[];try{for(const G of _.queue)yield G(f),G.onAbort&&C.push(G.onAbort)}catch(G){C.reverse();for(const X of C)try{X()}catch{}throw _.auth._errorFactory.create("login-blocked",{originalMessage:G?.message})}})()}}function hs(){return(hs=(0,y.Z)(function*(b,f={}){return Ze(b,"GET","/v2/passwordPolicy",Fe(b,f))})).apply(this,arguments)}class ra{constructor(f){var _,C,G,X;const Ee=f.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(_=Ee.minPasswordLength)&&void 0!==_?_:6,Ee.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=Ee.maxPasswordLength),void 0!==Ee.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=Ee.containsLowercaseCharacter),void 0!==Ee.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=Ee.containsUppercaseCharacter),void 0!==Ee.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=Ee.containsNumericCharacter),void 0!==Ee.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=Ee.containsNonAlphanumericCharacter),this.enforcementState=f.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(G=null===(C=f.allowedNonAlphanumericCharacters)||void 0===C?void 0:C.join(""))&&void 0!==G?G:"",this.forceUpgradeOnSignin=null!==(X=f.forceUpgradeOnSignin)&&void 0!==X&&X,this.schemaVersion=f.schemaVersion}validatePassword(f){var _,C,G,X,Ee,Ge;const pt={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(f,pt),this.validatePasswordCharacterOptions(f,pt),pt.isValid&&(pt.isValid=null===(_=pt.meetsMinPasswordLength)||void 0===_||_),pt.isValid&&(pt.isValid=null===(C=pt.meetsMaxPasswordLength)||void 0===C||C),pt.isValid&&(pt.isValid=null===(G=pt.containsLowercaseLetter)||void 0===G||G),pt.isValid&&(pt.isValid=null===(X=pt.containsUppercaseLetter)||void 0===X||X),pt.isValid&&(pt.isValid=null===(Ee=pt.containsNumericCharacter)||void 0===Ee||Ee),pt.isValid&&(pt.isValid=null===(Ge=pt.containsNonAlphanumericCharacter)||void 0===Ge||Ge),pt}validatePasswordLengthOptions(f,_){const C=this.customStrengthOptions.minPasswordLength,G=this.customStrengthOptions.maxPasswordLength;C&&(_.meetsMinPasswordLength=f.length>=C),G&&(_.meetsMaxPasswordLength=f.length<=G)}validatePasswordCharacterOptions(f,_){let C;this.updatePasswordCharacterOptionsStatuses(_,!1,!1,!1,!1);for(let G=0;G<f.length;G++)C=f.charAt(G),this.updatePasswordCharacterOptionsStatuses(_,C>="a"&&C<="z",C>="A"&&C<="Z",C>="0"&&C<="9",this.allowedNonAlphanumericCharacters.includes(C))}updatePasswordCharacterOptionsStatuses(f,_,C,G,X){this.customStrengthOptions.containsLowercaseLetter&&(f.containsLowercaseLetter||(f.containsLowercaseLetter=_)),this.customStrengthOptions.containsUppercaseLetter&&(f.containsUppercaseLetter||(f.containsUppercaseLetter=C)),this.customStrengthOptions.containsNumericCharacter&&(f.containsNumericCharacter||(f.containsNumericCharacter=G)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(f.containsNonAlphanumericCharacter||(f.containsNonAlphanumericCharacter=X))}}class ha{constructor(f,_,C,G){this.app=f,this.heartbeatServiceProvider=_,this.appCheckServiceProvider=C,this.config=G,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Qa(this),this.idTokenSubscription=new Qa(this),this.beforeStateQueue=new Zs(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Ct,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=f.name,this.clientVersion=G.sdkClientVersion}_initializeWithPersistence(f,_){var C=this;return _&&(this._popupRedirectResolver=Re(_)),this._initializationPromise=this.queue((0,y.Z)(function*(){var G,X;if(!C._deleted&&(C.persistenceManager=yield gn.create(C,f),!C._deleted)){if(null!==(G=C._popupRedirectResolver)&&void 0!==G&&G._shouldInitProactively)try{yield C._popupRedirectResolver._initialize(C)}catch{}yield C.initializeCurrentUser(_),C.lastNotifiedUid=(null===(X=C.currentUser)||void 0===X?void 0:X.uid)||null,!C._deleted&&(C._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var f=this;return(0,y.Z)(function*(){if(f._deleted)return;const _=yield f.assertedPersistence.getCurrentUser();if(f.currentUser||_){if(f.currentUser&&_&&f.currentUser.uid===_.uid)return f._currentUser._assign(_),void(yield f.currentUser.getIdToken());yield f._updateCurrentUser(_,!0)}})()}initializeCurrentUser(f){var _=this;return(0,y.Z)(function*(){var C;const G=yield _.assertedPersistence.getCurrentUser();let X=G,Ee=!1;if(f&&_.config.authDomain){yield _.getOrInitRedirectPersistenceManager();const Ge=null===(C=_.redirectUser)||void 0===C?void 0:C._redirectEventId,pt=X?._redirectEventId,en=yield _.tryRedirectSignIn(f);(!Ge||Ge===pt)&&en?.user&&(X=en.user,Ee=!0)}if(!X)return _.directlySetCurrentUser(null);if(!X._redirectEventId){if(Ee)try{yield _.beforeStateQueue.runMiddleware(X)}catch(Ge){X=G,_._popupRedirectResolver._overrideRedirectResult(_,()=>Promise.reject(Ge))}return X?_.reloadAndSetCurrentUserOrClear(X):_.directlySetCurrentUser(null)}return ue(_._popupRedirectResolver,_,"argument-error"),yield _.getOrInitRedirectPersistenceManager(),_.redirectUser&&_.redirectUser._redirectEventId===X._redirectEventId?_.directlySetCurrentUser(X):_.reloadAndSetCurrentUserOrClear(X)})()}tryRedirectSignIn(f){var _=this;return(0,y.Z)(function*(){let C=null;try{C=yield _._popupRedirectResolver._completeRedirectFn(_,f,!0)}catch{yield _._setRedirectUser(null)}return C})()}reloadAndSetCurrentUserOrClear(f){var _=this;return(0,y.Z)(function*(){try{yield Xr(f)}catch(C){if("auth/network-request-failed"!==C?.code)return _.directlySetCurrentUser(null)}return _.directlySetCurrentUser(f)})()}useDeviceLanguage(){this.languageCode=function Zt(){if(typeof navigator>"u")return null;const b=navigator;return b.languages&&b.languages[0]||b.language||null}()}_delete(){var f=this;return(0,y.Z)(function*(){f._deleted=!0})()}updateCurrentUser(f){var _=this;return(0,y.Z)(function*(){const C=f?(0,oe.m9)(f):null;return C&&ue(C.auth.config.apiKey===_.config.apiKey,_,"invalid-user-token"),_._updateCurrentUser(C&&C._clone(_))})()}_updateCurrentUser(f,_=!1){var C=this;return(0,y.Z)(function*(){if(!C._deleted)return f&&ue(C.tenantId===f.tenantId,C,"tenant-id-mismatch"),_||(yield C.beforeStateQueue.runMiddleware(f)),C.queue((0,y.Z)(function*(){yield C.directlySetCurrentUser(f),C.notifyAuthListeners()}))})()}signOut(){var f=this;return(0,y.Z)(function*(){return yield f.beforeStateQueue.runMiddleware(null),(f.redirectPersistenceManager||f._popupRedirectResolver)&&(yield f._setRedirectUser(null)),f._updateCurrentUser(null,!0)})()}setPersistence(f){var _=this;return this.queue((0,y.Z)(function*(){yield _.assertedPersistence.setPersistence(Re(f))}))}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(f){var _=this;return(0,y.Z)(function*(){_._getPasswordPolicyInternal()||(yield _._updatePasswordPolicy());const C=_._getPasswordPolicyInternal();return C.schemaVersion!==_.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(_._errorFactory.create("unsupported-password-policy-schema-version",{})):C.validatePassword(f)})()}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){var f=this;return(0,y.Z)(function*(){const _=yield function xi(b){return hs.apply(this,arguments)}(f),C=new ra(_);null===f.tenantId?f._projectPasswordPolicy=C:f._tenantPasswordPolicies[f.tenantId]=C})()}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(f){this._errorFactory=new oe.LL("auth","Firebase",f())}onAuthStateChanged(f,_,C){return this.registerStateListener(this.authStateSubscription,f,_,C)}beforeAuthStateChanged(f,_){return this.beforeStateQueue.pushCallback(f,_)}onIdTokenChanged(f,_,C){return this.registerStateListener(this.idTokenSubscription,f,_,C)}authStateReady(){return new Promise((f,_)=>{if(this.currentUser)f();else{const C=this.onAuthStateChanged(()=>{C(),f()},_)}})}toJSON(){var f;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(f=this._currentUser)||void 0===f?void 0:f.toJSON()}}_setRedirectUser(f,_){var C=this;return(0,y.Z)(function*(){const G=yield C.getOrInitRedirectPersistenceManager(_);return null===f?G.removeCurrentUser():G.setCurrentUser(f)})()}getOrInitRedirectPersistenceManager(f){var _=this;return(0,y.Z)(function*(){if(!_.redirectPersistenceManager){const C=f&&Re(f)||_._popupRedirectResolver;ue(C,_,"argument-error"),_.redirectPersistenceManager=yield gn.create(_,[Re(C._redirectPersistence)],"redirectUser"),_.redirectUser=yield _.redirectPersistenceManager.getCurrentUser()}return _.redirectPersistenceManager})()}_redirectUserForId(f){var _=this;return(0,y.Z)(function*(){var C,G;return _._isInitialized&&(yield _.queue((0,y.Z)(function*(){}))),(null===(C=_._currentUser)||void 0===C?void 0:C._redirectEventId)===f?_._currentUser:(null===(G=_.redirectUser)||void 0===G?void 0:G._redirectEventId)===f?_.redirectUser:null})()}_persistUserIfCurrent(f){var _=this;return(0,y.Z)(function*(){if(f===_.currentUser)return _.queue((0,y.Z)(function*(){return _.directlySetCurrentUser(f)}))})()}_notifyListenersIfCurrent(f){f===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var f,_;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const C=null!==(_=null===(f=this.currentUser)||void 0===f?void 0:f.uid)&&void 0!==_?_:null;this.lastNotifiedUid!==C&&(this.lastNotifiedUid=C,this.authStateSubscription.next(this.currentUser))}registerStateListener(f,_,C,G){if(this._deleted)return()=>{};const X="function"==typeof _?_:_.next.bind(_);let Ee=!1;const Ge=this._isInitialized?Promise.resolve():this._initializationPromise;if(ue(Ge,this,"internal-error"),Ge.then(()=>{Ee||X(this.currentUser)}),"function"==typeof _){const pt=f.addObserver(_,C,G);return()=>{Ee=!0,pt()}}{const pt=f.addObserver(_);return()=>{Ee=!0,pt()}}}directlySetCurrentUser(f){var _=this;return(0,y.Z)(function*(){_.currentUser&&_.currentUser!==f&&_._currentUser._stopProactiveRefresh(),f&&_.isProactiveRefreshEnabled&&f._startProactiveRefresh(),_.currentUser=f,f?yield _.assertedPersistence.setCurrentUser(f):yield _.assertedPersistence.removeCurrentUser()})()}queue(f){return this.operations=this.operations.then(f,f),this.operations}get assertedPersistence(){return ue(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(f){!f||this.frameworks.includes(f)||(this.frameworks.push(f),this.frameworks.sort(),this.clientVersion=vr(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var f=this;return(0,y.Z)(function*(){var _;const C={"X-Client-Version":f.clientVersion};f.app.options.appId&&(C["X-Firebase-gmpid"]=f.app.options.appId);const G=yield null===(_=f.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===_?void 0:_.getHeartbeatsHeader();G&&(C["X-Firebase-Client"]=G);const X=yield f._getAppCheckToken();return X&&(C["X-Firebase-AppCheck"]=X),C})()}_getAppCheckToken(){var f=this;return(0,y.Z)(function*(){var _;const C=yield null===(_=f.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===_?void 0:_.getToken();return C?.error&&function Ve(b,...f){Jt.logLevel<=De.in.WARN&&Jt.warn(`Auth (${Ce.SDK_VERSION}): ${b}`,...f)}(`Error while retrieving App Check token: ${C.error}`),C?.token})()}}function Cn(b){return(0,oe.m9)(b)}class Qa{constructor(f){this.auth=f,this.observer=null,this.addObserver=(0,oe.ne)(_=>this.observer=_)}get next(){return ue(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function Ms(b){return new Promise((f,_)=>{const C=document.createElement("script");C.setAttribute("src",b),C.onload=f,C.onerror=G=>{const X=Oe("internal-error");X.customData=G,_(X)},C.type="text/javascript",C.charset="UTF-8",function Hs(){var b,f;return null!==(f=null===(b=document.getElementsByTagName("head"))||void 0===b?void 0:b[0])&&void 0!==f?f:document}().appendChild(C)})}function Qs(b){return`__${b}${Math.floor(1e6*Math.random())}`}class ki{constructor(f){this.type="recaptcha-enterprise",this.auth=Cn(f)}verify(f="verify",_=!1){var C=this;return(0,y.Z)(function*(){function X(){return X=(0,y.Z)(function*(Ge){if(!_){if(null==Ge.tenantId&&null!=Ge._agentRecaptchaConfig)return Ge._agentRecaptchaConfig.siteKey;if(null!=Ge.tenantId&&void 0!==Ge._tenantRecaptchaConfigs[Ge.tenantId])return Ge._tenantRecaptchaConfigs[Ge.tenantId].siteKey}return new Promise(function(){var pt=(0,y.Z)(function*(en,pn){Mt(Ge,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(fn=>{if(void 0!==fn.recaptchaKey){const cs=new je(fn);return null==Ge.tenantId?Ge._agentRecaptchaConfig=cs:Ge._tenantRecaptchaConfigs[Ge.tenantId]=cs,en(cs.siteKey)}pn(new Error("recaptcha Enterprise site key undefined"))}).catch(fn=>{pn(fn)})});return function(en,pn){return pt.apply(this,arguments)}}())}),X.apply(this,arguments)}function Ee(Ge,pt,en){const pn=window.grecaptcha;Se(pn)?pn.enterprise.ready(()=>{pn.enterprise.execute(Ge,{action:f}).then(fn=>{pt(fn)}).catch(()=>{pt("NO_RECAPTCHA")})}):en(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((Ge,pt)=>{(function G(Ge){return X.apply(this,arguments)})(C.auth).then(en=>{if(!_&&Se(window.grecaptcha))Ee(en,Ge,pt);else{if(typeof window>"u")return void pt(new Error("RecaptchaVerifier is only supported in browser"));Ms("https://www.google.com/recaptcha/enterprise.js?render="+en).then(()=>{Ee(en,Ge,pt)}).catch(pn=>{pt(pn)})}}).catch(en=>{pt(en)})})})()}}function ar(b,f,_){return ur.apply(this,arguments)}function ur(){return(ur=(0,y.Z)(function*(b,f,_,C=!1){const G=new ki(b);let X;try{X=yield G.verify(_)}catch{X=yield G.verify(_,!0)}const Ee=Object.assign({},f);return Object.assign(Ee,C?{captchaResp:X}:{captchaResponse:X}),Object.assign(Ee,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(Ee,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),Ee})).apply(this,arguments)}function jr(b,f,_,C){return zi.apply(this,arguments)}function zi(){return zi=(0,y.Z)(function*(b,f,_,C){var G;if(null!==(G=b._getRecaptchaConfig())&&void 0!==G&&G.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const X=yield ar(b,f,_,"getOobCode"===_);return C(b,X)}return C(b,f).catch(function(){var X=(0,y.Z)(function*(Ee){if("auth/missing-recaptcha-token"===Ee.code){console.log(`${_} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const Ge=yield ar(b,f,_,"getOobCode"===_);return C(b,Ge)}return Promise.reject(Ee)});return function(Ee){return X.apply(this,arguments)}}())}),zi.apply(this,arguments)}function mi(b){const f=b.indexOf(":");return f<0?"":b.substr(0,f+1)}function fa(b){if(!b)return null;const f=Number(b);return isNaN(f)?null:f}class Bo{constructor(f,_){this.providerId=f,this.signInMethod=_}toJSON(){return Kt("not implemented")}_getIdTokenResponse(f){return Kt("not implemented")}_linkToIdToken(f,_){return Kt("not implemented")}_getReauthenticationResolver(f){return Kt("not implemented")}}function ka(b,f){return xs.apply(this,arguments)}function xs(){return(xs=(0,y.Z)(function*(b,f){return Ze(b,"POST","/v1/accounts:resetPassword",Fe(b,f))})).apply(this,arguments)}function Uo(b,f){return lo.apply(this,arguments)}function lo(){return(lo=(0,y.Z)(function*(b,f){return Ze(b,"POST","/v1/accounts:update",f)})).apply(this,arguments)}function Is(){return(Is=(0,y.Z)(function*(b,f){return Ze(b,"POST","/v1/accounts:update",Fe(b,f))})).apply(this,arguments)}function Gn(b,f){return _i.apply(this,arguments)}function _i(){return(_i=(0,y.Z)(function*(b,f){return Ft(b,"POST","/v1/accounts:signInWithPassword",Fe(b,f))})).apply(this,arguments)}function ri(b,f){return Cr.apply(this,arguments)}function Cr(){return(Cr=(0,y.Z)(function*(b,f){return Ze(b,"POST","/v1/accounts:sendOobCode",Fe(b,f))})).apply(this,arguments)}function ai(){return(ai=(0,y.Z)(function*(b,f){return ri(b,f)})).apply(this,arguments)}function Co(b,f){return kr.apply(this,arguments)}function kr(){return(kr=(0,y.Z)(function*(b,f){return ri(b,f)})).apply(this,arguments)}function Es(b,f){return $s.apply(this,arguments)}function $s(){return($s=(0,y.Z)(function*(b,f){return ri(b,f)})).apply(this,arguments)}function Lt(){return(Lt=(0,y.Z)(function*(b,f){return ri(b,f)})).apply(this,arguments)}function Vn(){return(Vn=(0,y.Z)(function*(b,f){return Ft(b,"POST","/v1/accounts:signInWithEmailLink",Fe(b,f))})).apply(this,arguments)}function Wi(){return(Wi=(0,y.Z)(function*(b,f){return Ft(b,"POST","/v1/accounts:signInWithEmailLink",Fe(b,f))})).apply(this,arguments)}class ei extends Bo{constructor(f,_,C,G=null){super("password",C),this._email=f,this._password=_,this._tenantId=G}static _fromEmailAndPassword(f,_){return new ei(f,_,"password")}static _fromEmailAndCode(f,_,C=null){return new ei(f,_,"emailLink",C)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(f){const _="string"==typeof f?JSON.parse(f):f;if(_?.email&&_?.password){if("password"===_.signInMethod)return this._fromEmailAndPassword(_.email,_.password);if("emailLink"===_.signInMethod)return this._fromEmailAndCode(_.email,_.password,_.tenantId)}return null}_getIdTokenResponse(f){var _=this;return(0,y.Z)(function*(){switch(_.signInMethod){case"password":return jr(f,{returnSecureToken:!0,email:_._email,password:_._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",Gn);case"emailLink":return function En(b,f){return Vn.apply(this,arguments)}(f,{email:_._email,oobCode:_._password});default:$e(f,"internal-error")}})()}_linkToIdToken(f,_){var C=this;return(0,y.Z)(function*(){switch(C.signInMethod){case"password":return Uo(f,{idToken:_,returnSecureToken:!0,email:C._email,password:C._password});case"emailLink":return function ui(b,f){return Wi.apply(this,arguments)}(f,{idToken:_,email:C._email,oobCode:C._password});default:$e(f,"internal-error")}})()}_getReauthenticationResolver(f){return this._getIdTokenResponse(f)}}function fr(b,f){return yr.apply(this,arguments)}function yr(){return(yr=(0,y.Z)(function*(b,f){return Ft(b,"POST","/v1/accounts:signInWithIdp",Fe(b,f))})).apply(this,arguments)}class Gr extends Bo{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(f){const _=new Gr(f.providerId,f.signInMethod);return f.idToken||f.accessToken?(f.idToken&&(_.idToken=f.idToken),f.accessToken&&(_.accessToken=f.accessToken),f.nonce&&!f.pendingToken&&(_.nonce=f.nonce),f.pendingToken&&(_.pendingToken=f.pendingToken)):f.oauthToken&&f.oauthTokenSecret?(_.accessToken=f.oauthToken,_.secret=f.oauthTokenSecret):$e("argument-error"),_}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(f){const _="string"==typeof f?JSON.parse(f):f,{providerId:C,signInMethod:G}=_,X=(0,ye._T)(_,["providerId","signInMethod"]);if(!C||!G)return null;const Ee=new Gr(C,G);return Ee.idToken=X.idToken||void 0,Ee.accessToken=X.accessToken||void 0,Ee.secret=X.secret,Ee.nonce=X.nonce,Ee.pendingToken=X.pendingToken||null,Ee}_getIdTokenResponse(f){return fr(f,this.buildRequest())}_linkToIdToken(f,_){const C=this.buildRequest();return C.idToken=_,fr(f,C)}_getReauthenticationResolver(f){const _=this.buildRequest();return _.autoCreate=!1,fr(f,_)}buildRequest(){const f={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)f.pendingToken=this.pendingToken;else{const _={};this.idToken&&(_.id_token=this.idToken),this.accessToken&&(_.access_token=this.accessToken),this.secret&&(_.oauth_token_secret=this.secret),_.providerId=this.providerId,this.nonce&&!this.pendingToken&&(_.nonce=this.nonce),f.postBody=(0,oe.xO)(_)}return f}}function yi(){return(yi=(0,y.Z)(function*(b,f){return Ze(b,"POST","/v1/accounts:sendVerificationCode",Fe(b,f))})).apply(this,arguments)}function bs(){return(bs=(0,y.Z)(function*(b,f){return Ft(b,"POST","/v1/accounts:signInWithPhoneNumber",Fe(b,f))})).apply(this,arguments)}function er(){return(er=(0,y.Z)(function*(b,f){const _=yield Ft(b,"POST","/v1/accounts:signInWithPhoneNumber",Fe(b,f));if(_.temporaryProof)throw Rn(b,"account-exists-with-different-credential",_);return _})).apply(this,arguments)}const ks={USER_NOT_FOUND:"user-not-found"};function Li(){return(Li=(0,y.Z)(function*(b,f){return Ft(b,"POST","/v1/accounts:signInWithPhoneNumber",Fe(b,Object.assign(Object.assign({},f),{operation:"REAUTH"})),ks)})).apply(this,arguments)}class ws extends Bo{constructor(f){super("phone","phone"),this.params=f}static _fromVerification(f,_){return new ws({verificationId:f,verificationCode:_})}static _fromTokenResponse(f,_){return new ws({phoneNumber:f,temporaryProof:_})}_getIdTokenResponse(f){return function Ts(b,f){return bs.apply(this,arguments)}(f,this._makeVerificationRequest())}_linkToIdToken(f,_){return function ti(b,f){return er.apply(this,arguments)}(f,Object.assign({idToken:_},this._makeVerificationRequest()))}_getReauthenticationResolver(f){return function qi(b,f){return Li.apply(this,arguments)}(f,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:f,phoneNumber:_,verificationId:C,verificationCode:G}=this.params;return f&&_?{temporaryProof:f,phoneNumber:_}:{sessionInfo:C,code:G}}toJSON(){const f={providerId:this.providerId};return this.params.phoneNumber&&(f.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(f.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(f.verificationCode=this.params.verificationCode),this.params.verificationId&&(f.verificationId=this.params.verificationId),f}static fromJSON(f){"string"==typeof f&&(f=JSON.parse(f));const{verificationId:_,verificationCode:C,phoneNumber:G,temporaryProof:X}=f;return C||_||G||X?new ws({verificationId:_,verificationCode:C,phoneNumber:G,temporaryProof:X}):null}}class rs{constructor(f){var _,C,G,X,Ee,Ge;const pt=(0,oe.zd)((0,oe.pd)(f)),en=null!==(_=pt.apiKey)&&void 0!==_?_:null,pn=null!==(C=pt.oobCode)&&void 0!==C?C:null,fn=function Fs(b){switch(b){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(G=pt.mode)&&void 0!==G?G:null);ue(en&&pn&&fn,"argument-error"),this.apiKey=en,this.operation=fn,this.code=pn,this.continueUrl=null!==(X=pt.continueUrl)&&void 0!==X?X:null,this.languageCode=null!==(Ee=pt.languageCode)&&void 0!==Ee?Ee:null,this.tenantId=null!==(Ge=pt.tenantId)&&void 0!==Ge?Ge:null}static parseLink(f){const _=function fs(b){const f=(0,oe.zd)((0,oe.pd)(b)).link,_=f?(0,oe.zd)((0,oe.pd)(f)).deep_link_id:null,C=(0,oe.zd)((0,oe.pd)(b)).deep_link_id;return(C?(0,oe.zd)((0,oe.pd)(C)).link:null)||C||_||f||b}(f);try{return new rs(_)}catch{return null}}}let Bn=(()=>{class b{constructor(){this.providerId=b.PROVIDER_ID}static credential(_,C){return ei._fromEmailAndPassword(_,C)}static credentialWithLink(_,C){const G=rs.parseLink(C);return ue(G,"argument-error"),ei._fromEmailAndCode(_,G.code,G.tenantId)}}return b.PROVIDER_ID="password",b.EMAIL_PASSWORD_SIGN_IN_METHOD="password",b.EMAIL_LINK_SIGN_IN_METHOD="emailLink",b})();class Si{constructor(f){this.providerId=f,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(f){this.defaultLanguageCode=f}setCustomParameters(f){return this.customParameters=f,this}getCustomParameters(){return this.customParameters}}class is extends Si{constructor(){super(...arguments),this.scopes=[]}addScope(f){return this.scopes.includes(f)||this.scopes.push(f),this}getScopes(){return[...this.scopes]}}class ps extends is{static credentialFromJSON(f){const _="string"==typeof f?JSON.parse(f):f;return ue("providerId"in _&&"signInMethod"in _,"argument-error"),Gr._fromParams(_)}credential(f){return this._credential(Object.assign(Object.assign({},f),{nonce:f.rawNonce}))}_credential(f){return ue(f.idToken||f.accessToken,"argument-error"),Gr._fromParams(Object.assign(Object.assign({},f),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(f){return ps.oauthCredentialFromTaggedObject(f)}static credentialFromError(f){return ps.oauthCredentialFromTaggedObject(f.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{oauthIdToken:_,oauthAccessToken:C,oauthTokenSecret:G,pendingToken:X,nonce:Ee,providerId:Ge}=f;if(!C&&!G&&!_&&!X||!Ge)return null;try{return new ps(Ge)._credential({idToken:_,accessToken:C,nonce:Ee,pendingToken:X})}catch{return null}}}let Ds=(()=>{class b extends is{constructor(){super("facebook.com")}static credential(_){return Gr._fromParams({providerId:b.PROVIDER_ID,signInMethod:b.FACEBOOK_SIGN_IN_METHOD,accessToken:_})}static credentialFromResult(_){return b.credentialFromTaggedObject(_)}static credentialFromError(_){return b.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_||!("oauthAccessToken"in _)||!_.oauthAccessToken)return null;try{return b.credential(_.oauthAccessToken)}catch{return null}}}return b.FACEBOOK_SIGN_IN_METHOD="facebook.com",b.PROVIDER_ID="facebook.com",b})(),jo=(()=>{class b extends is{constructor(){super("google.com"),this.addScope("profile")}static credential(_,C){return Gr._fromParams({providerId:b.PROVIDER_ID,signInMethod:b.GOOGLE_SIGN_IN_METHOD,idToken:_,accessToken:C})}static credentialFromResult(_){return b.credentialFromTaggedObject(_)}static credentialFromError(_){return b.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{oauthIdToken:C,oauthAccessToken:G}=_;if(!C&&!G)return null;try{return b.credential(C,G)}catch{return null}}}return b.GOOGLE_SIGN_IN_METHOD="google.com",b.PROVIDER_ID="google.com",b})(),Js=(()=>{class b extends is{constructor(){super("github.com")}static credential(_){return Gr._fromParams({providerId:b.PROVIDER_ID,signInMethod:b.GITHUB_SIGN_IN_METHOD,accessToken:_})}static credentialFromResult(_){return b.credentialFromTaggedObject(_)}static credentialFromError(_){return b.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_||!("oauthAccessToken"in _)||!_.oauthAccessToken)return null;try{return b.credential(_.oauthAccessToken)}catch{return null}}}return b.GITHUB_SIGN_IN_METHOD="github.com",b.PROVIDER_ID="github.com",b})();class Hr extends Bo{constructor(f,_){super(f,f),this.pendingToken=_}_getIdTokenResponse(f){return fr(f,this.buildRequest())}_linkToIdToken(f,_){const C=this.buildRequest();return C.idToken=_,fr(f,C)}_getReauthenticationResolver(f){const _=this.buildRequest();return _.autoCreate=!1,fr(f,_)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(f){const _="string"==typeof f?JSON.parse(f):f,{providerId:C,signInMethod:G,pendingToken:X}=_;return C&&G&&X&&C===G?new Hr(C,X):null}static _create(f,_){return new Hr(f,_)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class Er extends Si{constructor(f){ue(f.startsWith("saml."),"argument-error"),super(f)}static credentialFromResult(f){return Er.samlCredentialFromTaggedObject(f)}static credentialFromError(f){return Er.samlCredentialFromTaggedObject(f.customData||{})}static credentialFromJSON(f){const _=Hr.fromJSON(f);return ue(_,"argument-error"),_}static samlCredentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{pendingToken:_,providerId:C}=f;if(!_||!C)return null;try{return Hr._create(C,_)}catch{return null}}}let ci=(()=>{class b extends is{constructor(){super("twitter.com")}static credential(_,C){return Gr._fromParams({providerId:b.PROVIDER_ID,signInMethod:b.TWITTER_SIGN_IN_METHOD,oauthToken:_,oauthTokenSecret:C})}static credentialFromResult(_){return b.credentialFromTaggedObject(_)}static credentialFromError(_){return b.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{oauthAccessToken:C,oauthTokenSecret:G}=_;if(!C||!G)return null;try{return b.credential(C,G)}catch{return null}}}return b.TWITTER_SIGN_IN_METHOD="twitter.com",b.PROVIDER_ID="twitter.com",b})();function Xs(b,f){return gs.apply(this,arguments)}function gs(){return(gs=(0,y.Z)(function*(b,f){return Ft(b,"POST","/v1/accounts:signUp",Fe(b,f))})).apply(this,arguments)}class Fr{constructor(f){this.user=f.user,this.providerId=f.providerId,this._tokenResponse=f._tokenResponse,this.operationType=f.operationType}static _fromIdTokenResponse(f,_,C,G=!1){return(0,y.Z)(function*(){const X=yield ne._fromIdTokenResponse(f,C,G),Ee=Cs(C);return new Fr({user:X,providerId:Ee,_tokenResponse:C,operationType:_})})()}static _forOperation(f,_,C){return(0,y.Z)(function*(){yield f._updateTokensIfNecessary(C,!0);const G=Cs(C);return new Fr({user:f,providerId:G,_tokenResponse:C,operationType:_})})()}}function Cs(b){return b.providerId?b.providerId:"phoneNumber"in b?"phone":null}function fo(){return(fo=(0,y.Z)(function*(b){var f;const _=Cn(b);if(yield _._initializationPromise,null!==(f=_.currentUser)&&void 0!==f&&f.isAnonymous)return new Fr({user:_.currentUser,providerId:null,operationType:"signIn"});const C=yield Xs(_,{returnSecureToken:!0}),G=yield Fr._fromIdTokenResponse(_,"signIn",C,!0);return yield _._updateCurrentUser(G.user),G})).apply(this,arguments)}class Go extends oe.ZR{constructor(f,_,C,G){var X;super(_.code,_.message),this.operationType=C,this.user=G,Object.setPrototypeOf(this,Go.prototype),this.customData={appName:f.name,tenantId:null!==(X=f.tenantId)&&void 0!==X?X:void 0,_serverResponse:_.customData._serverResponse,operationType:C}}static _fromErrorAndOperation(f,_,C,G){return new Go(f,_,C,G)}}function _c(b,f,_,C){return("reauthenticate"===f?_._getReauthenticationResolver(b):_._getIdTokenResponse(b)).catch(X=>{throw"auth/multi-factor-auth-required"===X.code?Go._fromErrorAndOperation(b,X,f,C):X})}function Ho(b){return new Set(b.map(({providerId:f})=>f).filter(f=>!!f))}function So(){return So=(0,y.Z)(function*(b,f){const _=(0,oe.m9)(b);yield mr(!0,_,f);const{providerUserInfo:C}=yield function rn(b,f){return hn.apply(this,arguments)}(_.auth,{idToken:yield _.getIdToken(),deleteProvider:[f]}),G=Ho(C||[]);return _.providerData=_.providerData.filter(X=>G.has(X.providerId)),G.has("phone")||(_.phoneNumber=null),yield _.auth._persistUserIfCurrent(_),_}),So.apply(this,arguments)}function ga(b,f){return Ro.apply(this,arguments)}function Ro(){return(Ro=(0,y.Z)(function*(b,f,_=!1){const C=yield In(b,f._linkToIdToken(b.auth,yield b.getIdToken()),_);return Fr._forOperation(b,"link",C)})).apply(this,arguments)}function mr(b,f,_){return $o.apply(this,arguments)}function $o(){return($o=(0,y.Z)(function*(b,f,_){yield Xr(f);const G=!1===b?"provider-already-linked":"no-such-provider";ue(Ho(f.providerData).has(_)===b,f.auth,G)})).apply(this,arguments)}function ma(b,f){return W.apply(this,arguments)}function W(){return(W=(0,y.Z)(function*(b,f,_=!1){const{auth:C}=b,G="reauthenticate";try{const X=yield In(b,_c(C,G,f,b),_);ue(X.idToken,C,"internal-error");const Ee=Wr(X.idToken);ue(Ee,C,"internal-error");const{sub:Ge}=Ee;return ue(b.uid===Ge,C,"user-mismatch"),Fr._forOperation(b,G,X)}catch(X){throw"auth/user-not-found"===X?.code&&$e(C,"user-mismatch"),X}})).apply(this,arguments)}function q(b,f){return B.apply(this,arguments)}function B(){return(B=(0,y.Z)(function*(b,f,_=!1){const C="signIn",G=yield _c(b,C,f),X=yield Fr._fromIdTokenResponse(b,C,G);return _||(yield b._updateCurrentUser(X.user)),X})).apply(this,arguments)}function se(b,f){return be.apply(this,arguments)}function be(){return(be=(0,y.Z)(function*(b,f){return q(Cn(b),f)})).apply(this,arguments)}function nn(b,f){return Tn.apply(this,arguments)}function Tn(){return(Tn=(0,y.Z)(function*(b,f){const _=(0,oe.m9)(b);return yield mr(!1,_,f.providerId),ga(_,f)})).apply(this,arguments)}function Vi(b,f){return ss.apply(this,arguments)}function ss(){return(ss=(0,y.Z)(function*(b,f){return ma((0,oe.m9)(b),f)})).apply(this,arguments)}function No(){return(No=(0,y.Z)(function*(b,f){return Ft(b,"POST","/v1/accounts:signInWithCustomToken",Fe(b,f))})).apply(this,arguments)}function os(){return os=(0,y.Z)(function*(b,f){const _=Cn(b),C=yield function po(b,f){return No.apply(this,arguments)}(_,{token:f,returnSecureToken:!0}),G=yield Fr._fromIdTokenResponse(_,"signIn",C);return yield _._updateCurrentUser(G.user),G}),os.apply(this,arguments)}class Oo{constructor(f,_){this.factorId=f,this.uid=_.mfaEnrollmentId,this.enrollmentTime=new Date(_.enrolledAt).toUTCString(),this.displayName=_.displayName}static _fromServerResponse(f,_){return"phoneInfo"in _?Iu._fromServerResponse(f,_):"totpInfo"in _?Ii._fromServerResponse(f,_):$e(f,"internal-error")}}class Iu extends Oo{constructor(f){super("phone",f),this.phoneNumber=f.phoneInfo}static _fromServerResponse(f,_){return new Iu(_)}}class Ii extends Oo{constructor(f){super("totp",f)}static _fromServerResponse(f,_){return new Ii(_)}}function Ls(b,f,_){var C;ue((null===(C=_.url)||void 0===C?void 0:C.length)>0,b,"invalid-continue-uri"),ue(typeof _.dynamicLinkDomain>"u"||_.dynamicLinkDomain.length>0,b,"invalid-dynamic-link-domain"),f.continueUrl=_.url,f.dynamicLinkDomain=_.dynamicLinkDomain,f.canHandleCodeInApp=_.handleCodeInApp,_.iOS&&(ue(_.iOS.bundleId.length>0,b,"missing-ios-bundle-id"),f.iOSBundleId=_.iOS.bundleId),_.android&&(ue(_.android.packageName.length>0,b,"missing-android-pkg-name"),f.androidInstallApp=_.android.installApp,f.androidMinimumVersionCode=_.android.minimumVersion,f.androidPackageName=_.android.packageName)}function Qi(b){return sa.apply(this,arguments)}function sa(){return(sa=(0,y.Z)(function*(b){const f=Cn(b);f._getPasswordPolicyInternal()&&(yield f._updatePasswordPolicy())})).apply(this,arguments)}function Po(){return(Po=(0,y.Z)(function*(b,f,_){const C=Cn(b),G={requestType:"PASSWORD_RESET",email:f,clientType:"CLIENT_TYPE_WEB"};_&&Ls(C,G,_),yield jr(C,G,"getOobCode",Co)})).apply(this,arguments)}function go(){return go=(0,y.Z)(function*(b,f,_){yield ka((0,oe.m9)(b),{oobCode:f,newPassword:_}).catch(function(){var C=(0,y.Z)(function*(G){throw"auth/password-does-not-meet-requirements"===G.code&&Qi(b),G});return function(G){return C.apply(this,arguments)}}())}),go.apply(this,arguments)}function Mo(){return Mo=(0,y.Z)(function*(b,f){yield function pa(b,f){return Is.apply(this,arguments)}((0,oe.m9)(b),{oobCode:f})}),Mo.apply(this,arguments)}function Eu(b,f){return La.apply(this,arguments)}function La(){return(La=(0,y.Z)(function*(b,f){const _=(0,oe.m9)(b),C=yield ka(_,{oobCode:f}),G=C.requestType;switch(ue(G,_,"internal-error"),G){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":ue(C.newEmail,_,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":ue(C.mfaInfo,_,"internal-error");default:ue(C.email,_,"internal-error")}let X=null;return C.mfaInfo&&(X=Oo._fromServerResponse(Cn(_),C.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===C.requestType?C.newEmail:C.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===C.requestType?C.email:C.newEmail)||null,multiFactorInfo:X},operation:G}})).apply(this,arguments)}function _a(){return(_a=(0,y.Z)(function*(b,f){const{data:_}=yield Eu((0,oe.m9)(b),f);return _.email})).apply(this,arguments)}function zs(){return(zs=(0,y.Z)(function*(b,f,_){const C=Cn(b),Ee=yield jr(C,{returnSecureToken:!0,email:f,password:_,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Xs).catch(pt=>{throw"auth/password-does-not-meet-requirements"===pt.code&&Qi(b),pt}),Ge=yield Fr._fromIdTokenResponse(C,"signIn",Ee);return yield C._updateCurrentUser(Ge.user),Ge})).apply(this,arguments)}function zo(){return(zo=(0,y.Z)(function*(b,f,_){const C=Cn(b),G={requestType:"EMAIL_SIGNIN",email:f,clientType:"CLIENT_TYPE_WEB"};(function X(Ee,Ge){ue(Ge.handleCodeInApp,C,"argument-error"),Ge&&Ls(C,Ee,Ge)})(G,_),yield jr(C,G,"getOobCode",Es)})).apply(this,arguments)}function tu(){return(tu=(0,y.Z)(function*(b,f,_){const C=(0,oe.m9)(b),G=Bn.credentialWithLink(f,_||$n());return ue(G._tenantId===(C.tenantId||null),C,"tenant-id-mismatch"),se(C,G)})).apply(this,arguments)}function Va(){return(Va=(0,y.Z)(function*(b,f){return Ze(b,"POST","/v1/accounts:createAuthUri",Fe(b,f))})).apply(this,arguments)}function va(){return va=(0,y.Z)(function*(b,f){const C={identifier:f,continueUri:Dn()?$n():"http://localhost"},{signinMethods:G}=yield function qc(b,f){return Va.apply(this,arguments)}((0,oe.m9)(b),C);return G||[]}),va.apply(this,arguments)}function to(){return to=(0,y.Z)(function*(b,f){const _=(0,oe.m9)(b),G={requestType:"VERIFY_EMAIL",idToken:yield b.getIdToken()};f&&Ls(_.auth,G,f);const{email:X}=yield function Yr(b,f){return ai.apply(this,arguments)}(_.auth,G);X!==b.email&&(yield b.reload())}),to.apply(this,arguments)}function Ji(){return Ji=(0,y.Z)(function*(b,f,_){const C=(0,oe.m9)(b),X={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield b.getIdToken(),newEmail:f};_&&Ls(C.auth,X,_);const{email:Ee}=yield function hr(b,f){return Lt.apply(this,arguments)}(C.auth,X);Ee!==b.email&&(yield b.reload())}),Ji.apply(this,arguments)}function O(){return(O=(0,y.Z)(function*(b,f){return Ze(b,"POST","/v1/accounts:update",f)})).apply(this,arguments)}function U(){return U=(0,y.Z)(function*(b,{displayName:f,photoURL:_}){if(void 0===f&&void 0===_)return;const C=(0,oe.m9)(b),X={idToken:yield C.getIdToken(),displayName:f,photoUrl:_,returnSecureToken:!0},Ee=yield In(C,function qu(b,f){return O.apply(this,arguments)}(C.auth,X));C.displayName=Ee.displayName||null,C.photoURL=Ee.photoUrl||null;const Ge=C.providerData.find(({providerId:pt})=>"password"===pt);Ge&&(Ge.displayName=C.displayName,Ge.photoURL=C.photoURL),yield C._updateTokensIfNecessary(Ee)}),U.apply(this,arguments)}function Je(b,f,_){return ut.apply(this,arguments)}function ut(){return(ut=(0,y.Z)(function*(b,f,_){const{auth:C}=b,X={idToken:yield b.getIdToken(),returnSecureToken:!0};f&&(X.email=f),_&&(X.password=_);const Ee=yield In(b,Uo(C,X));yield b._updateTokensIfNecessary(Ee,!0)})).apply(this,arguments)}class Yn{constructor(f,_,C={}){this.isNewUser=f,this.providerId=_,this.profile=C}}class rr extends Yn{constructor(f,_,C,G){super(f,_,C),this.username=G}}class Wn extends Yn{constructor(f,_){super(f,"facebook.com",_)}}class yn extends rr{constructor(f,_){super(f,"github.com",_,"string"==typeof _?.login?_?.login:null)}}class Zr extends Yn{constructor(f,_){super(f,"google.com",_)}}class Ir extends rr{constructor(f,_,C){super(f,"twitter.com",_,C)}}function Ei(b){const{user:f,_tokenResponse:_}=b;return f.isAnonymous&&!_?{providerId:null,isNewUser:!1,profile:null}:function an(b){var f,_;if(!b)return null;const{providerId:C}=b,G=b.rawUserInfo?JSON.parse(b.rawUserInfo):{},X=b.isNewUser||"identitytoolkit#SignupNewUserResponse"===b.kind;if(!C&&b?.idToken){const Ee=null===(_=null===(f=Wr(b.idToken))||void 0===f?void 0:f.firebase)||void 0===_?void 0:_.sign_in_provider;if(Ee)return new Yn(X,"anonymous"!==Ee&&"custom"!==Ee?Ee:null)}if(!C)return null;switch(C){case"facebook.com":return new Wn(X,G);case"github.com":return new yn(X,G);case"google.com":return new Zr(X,G);case"twitter.com":return new Ir(X,G,b.screenName||null);case"custom":case"anonymous":return new Yn(X,null);default:return new Yn(X,C,G)}}(_)}class _o{constructor(f,_,C){this.type=f,this.credential=_,this.user=C}static _fromIdtoken(f,_){return new _o("enroll",f,_)}static _fromMfaPendingCredential(f){return new _o("signin",f)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(f){var _,C;if(f?.multiFactorSession){if(null!==(_=f.multiFactorSession)&&void 0!==_&&_.pendingCredential)return _o._fromMfaPendingCredential(f.multiFactorSession.pendingCredential);if(null!==(C=f.multiFactorSession)&&void 0!==C&&C.idToken)return _o._fromIdtoken(f.multiFactorSession.idToken)}return null}}class Ko{constructor(f,_,C){this.session=f,this.hints=_,this.signInResolver=C}static _fromError(f,_){const C=Cn(f),G=_.customData._serverResponse,X=(G.mfaInfo||[]).map(Ge=>Oo._fromServerResponse(C,Ge));ue(G.mfaPendingCredential,C,"internal-error");const Ee=_o._fromMfaPendingCredential(G.mfaPendingCredential);return new Ko(Ee,X,function(){var Ge=(0,y.Z)(function*(pt){const en=yield pt._process(C,Ee);delete G.mfaInfo,delete G.mfaPendingCredential;const pn=Object.assign(Object.assign({},G),{idToken:en.idToken,refreshToken:en.refreshToken});switch(_.operationType){case"signIn":const fn=yield Fr._fromIdTokenResponse(C,_.operationType,pn);return yield C._updateCurrentUser(fn.user),fn;case"reauthenticate":return ue(_.user,C,"internal-error"),Fr._forOperation(_.user,_.operationType,pn);default:$e(C,"internal-error")}});return function(pt){return Ge.apply(this,arguments)}}())}resolveSignIn(f){var _=this;return(0,y.Z)(function*(){return _.signInResolver(f)})()}}class yt{constructor(f){this.user=f,this.enrolledFactors=[],f._onReload(_=>{_.mfaInfo&&(this.enrolledFactors=_.mfaInfo.map(C=>Oo._fromServerResponse(f.auth,C)))})}static _fromUser(f){return new yt(f)}getSession(){var f=this;return(0,y.Z)(function*(){return _o._fromIdtoken(yield f.user.getIdToken(),f.user)})()}enroll(f,_){var C=this;return(0,y.Z)(function*(){const G=f,X=yield C.getSession(),Ee=yield In(C.user,G._process(C.user.auth,X,_));return yield C.user._updateTokensIfNecessary(Ee),C.user.reload()})()}unenroll(f){var _=this;return(0,y.Z)(function*(){const C="string"==typeof f?f:f.uid,G=yield _.user.getIdToken();try{const X=yield In(_.user,function Ba(b,f){return Ze(b,"POST","/v2/accounts/mfaEnrollment:withdraw",Fe(b,f))}(_.user.auth,{idToken:G,mfaEnrollmentId:C}));_.enrolledFactors=_.enrolledFactors.filter(({uid:Ee})=>Ee!==C),yield _.user._updateTokensIfNecessary(X),yield _.user.reload()}catch(X){throw X}})()}}const Ti=new WeakMap,Ua="__sak";class tn{constructor(f,_){this.storageRetriever=f,this.type=_}_isAvailable(){try{return this.storage?(this.storage.setItem(Ua,"1"),this.storage.removeItem(Ua),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(f,_){return this.storage.setItem(f,JSON.stringify(_)),Promise.resolve()}_get(f){const _=this.storage.getItem(f);return Promise.resolve(_?JSON.parse(_):null)}_remove(f){return this.storage.removeItem(f),Promise.resolve()}get storage(){return this.storageRetriever()}}const vt=(()=>{class b extends tn{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(_,C)=>this.onStorageEvent(_,C),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function mn(){const b=(0,oe.z$)();return Dr(b)||_t(b)}()&&function Kr(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=zn(),this._shouldAllowMigration=!0}forAllChangedKeys(_){for(const C of Object.keys(this.listeners)){const G=this.storage.getItem(C),X=this.localCache[C];G!==X&&_(C,X,G)}}onStorageEvent(_,C=!1){if(!_.key)return void this.forAllChangedKeys((Ge,pt,en)=>{this.notifyListeners(Ge,en)});const G=_.key;if(C?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const Ge=this.storage.getItem(G);if(_.newValue!==Ge)null!==_.newValue?this.storage.setItem(G,_.newValue):this.storage.removeItem(G);else if(this.localCache[G]===_.newValue&&!C)return}const X=()=>{const Ge=this.storage.getItem(G);!C&&this.localCache[G]===Ge||this.notifyListeners(G,Ge)},Ee=this.storage.getItem(G);!function jt(){return(0,oe.w1)()&&10===document.documentMode}()||Ee===_.newValue||_.newValue===_.oldValue?X():setTimeout(X,10)}notifyListeners(_,C){this.localCache[_]=C;const G=this.listeners[_];if(G)for(const X of Array.from(G))X(C&&JSON.parse(C))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((_,C,G)=>{this.onStorageEvent(new StorageEvent("storage",{key:_,oldValue:C,newValue:G}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(_,C){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[_]||(this.listeners[_]=new Set,this.localCache[_]=this.storage.getItem(_)),this.listeners[_].add(C)}_removeListener(_,C){this.listeners[_]&&(this.listeners[_].delete(C),0===this.listeners[_].size&&delete this.listeners[_]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(_,C){var G=()=>super._set,X=this;return(0,y.Z)(function*(){yield G().call(X,_,C),X.localCache[_]=JSON.stringify(C)})()}_get(_){var C=()=>super._get,G=this;return(0,y.Z)(function*(){const X=yield C().call(G,_);return G.localCache[_]=JSON.stringify(X),X})()}_remove(_){var C=()=>super._remove,G=this;return(0,y.Z)(function*(){yield C().call(G,_),delete G.localCache[_]})()}}return b.type="LOCAL",b})(),Ea=(()=>{class b extends tn{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(_,C){}_removeListener(_,C){}}return b.type="SESSION",b})();let Cu=(()=>{class b{constructor(_){this.eventTarget=_,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(_){const C=this.receivers.find(X=>X.isListeningto(_));if(C)return C;const G=new b(_);return this.receivers.push(G),G}isListeningto(_){return this.eventTarget===_}handleEvent(_){var C=this;return(0,y.Z)(function*(){const G=_,{eventId:X,eventType:Ee,data:Ge}=G.data,pt=C.handlersMap[Ee];if(!pt?.size)return;G.ports[0].postMessage({status:"ack",eventId:X,eventType:Ee});const en=Array.from(pt).map(function(){var fn=(0,y.Z)(function*(cs){return cs(G.origin,Ge)});return function(cs){return fn.apply(this,arguments)}}()),pn=yield function _d(b){return Promise.all(b.map(function(){var f=(0,y.Z)(function*(_){try{return{fulfilled:!0,value:yield _}}catch(C){return{fulfilled:!1,reason:C}}});return function(_){return f.apply(this,arguments)}}()))}(en);G.ports[0].postMessage({status:"done",eventId:X,eventType:Ee,response:pn})})()}_subscribe(_,C){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[_]||(this.handlersMap[_]=new Set),this.handlersMap[_].add(C)}_unsubscribe(_,C){this.handlersMap[_]&&C&&this.handlersMap[_].delete(C),(!C||0===this.handlersMap[_].size)&&delete this.handlersMap[_],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return b.receivers=[],b})();function ja(b="",f=10){let _="";for(let C=0;C<f;C++)_+=Math.floor(10*Math.random());return b+_}class Tl{constructor(f){this.target=f,this.handlers=new Set}removeMessageHandler(f){f.messageChannel&&(f.messageChannel.port1.removeEventListener("message",f.onMessage),f.messageChannel.port1.close()),this.handlers.delete(f)}_send(f,_,C=50){var G=this;return(0,y.Z)(function*(){const X=typeof MessageChannel<"u"?new MessageChannel:null;if(!X)throw new Error("connection_unavailable");let Ee,Ge;return new Promise((pt,en)=>{const pn=ja("",20);X.port1.start();const fn=setTimeout(()=>{en(new Error("unsupported_event"))},C);Ge={messageChannel:X,onMessage(cs){const ta=cs;if(ta.data.eventId===pn)switch(ta.data.status){case"ack":clearTimeout(fn),Ee=setTimeout(()=>{en(new Error("timeout"))},3e3);break;case"done":clearTimeout(Ee),pt(ta.data.response);break;default:clearTimeout(fn),clearTimeout(Ee),en(new Error("invalid_response"))}}},G.handlers.add(Ge),X.port1.addEventListener("message",Ge.onMessage),G.target.postMessage({eventType:f,eventId:pn,data:_},[X.port2])}).finally(()=>{Ge&&G.removeMessageHandler(Ge)})})()}}function tr(){return window}function bl(){return typeof tr().WorkerGlobalScope<"u"&&"function"==typeof tr().importScripts}function ir(){return(ir=(0,y.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const Ui="firebaseLocalStorageDb",Ar="firebaseLocalStorage",sn="fbase_key";class no{constructor(f){this.request=f}toPromise(){return new Promise((f,_)=>{this.request.addEventListener("success",()=>{f(this.request.result)}),this.request.addEventListener("error",()=>{_(this.request.error)})})}}function Jn(b,f){return b.transaction([Ar],f?"readwrite":"readonly").objectStore(Ar)}function li(){const b=indexedDB.open(Ui,1);return new Promise((f,_)=>{b.addEventListener("error",()=>{_(b.error)}),b.addEventListener("upgradeneeded",()=>{const C=b.result;try{C.createObjectStore(Ar,{keyPath:sn})}catch(G){_(G)}}),b.addEventListener("success",(0,y.Z)(function*(){const C=b.result;C.objectStoreNames.contains(Ar)?f(C):(C.close(),yield function yd(){const b=indexedDB.deleteDatabase(Ui);return new no(b).toPromise()}(),f(yield li()))}))})}function Gt(b,f,_){return bi.apply(this,arguments)}function bi(){return(bi=(0,y.Z)(function*(b,f,_){const C=Jn(b,!0).put({[sn]:f,value:_});return new no(C).toPromise()})).apply(this,arguments)}function Yo(){return(Yo=(0,y.Z)(function*(b,f){const _=Jn(b,!1).get(f),C=yield new no(_).toPromise();return void 0===C?null:C.value})).apply(this,arguments)}function iu(b,f){const _=Jn(b,!0).delete(f);return new no(_).toPromise()}const Yu=(()=>{class b{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var _=this;return(0,y.Z)(function*(){return _.db||(_.db=yield li()),_.db})()}_withRetries(_){var C=this;return(0,y.Z)(function*(){let G=0;for(;;)try{const X=yield C._openDb();return yield _(X)}catch(X){if(G++>3)throw X;C.db&&(C.db.close(),C.db=void 0)}})()}initializeServiceWorkerMessaging(){var _=this;return(0,y.Z)(function*(){return bl()?_.initializeReceiver():_.initializeSender()})()}initializeReceiver(){var _=this;return(0,y.Z)(function*(){_.receiver=Cu._getInstance(function Hn(){return bl()?self:null}()),_.receiver._subscribe("keyChanged",function(){var C=(0,y.Z)(function*(G,X){return{keyProcessed:(yield _._poll()).includes(X.key)}});return function(G,X){return C.apply(this,arguments)}}()),_.receiver._subscribe("ping",function(){var C=(0,y.Z)(function*(G,X){return["keyChanged"]});return function(G,X){return C.apply(this,arguments)}}())})()}initializeSender(){var _=this;return(0,y.Z)(function*(){var C,G;if(_.activeServiceWorker=yield function Tt(){return ir.apply(this,arguments)}(),!_.activeServiceWorker)return;_.sender=new Tl(_.activeServiceWorker);const X=yield _.sender._send("ping",{},800);X&&null!==(C=X[0])&&void 0!==C&&C.fulfilled&&null!==(G=X[0])&&void 0!==G&&G.value.includes("keyChanged")&&(_.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(_){var C=this;return(0,y.Z)(function*(){if(C.sender&&C.activeServiceWorker&&function vd(){var b;return(null===(b=navigator?.serviceWorker)||void 0===b?void 0:b.controller)||null}()===C.activeServiceWorker)try{yield C.sender._send("keyChanged",{key:_},C.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,y.Z)(function*(){try{if(!indexedDB)return!1;const _=yield li();return yield Gt(_,Ua,"1"),yield iu(_,Ua),!0}catch{}return!1})()}_withPendingWrite(_){var C=this;return(0,y.Z)(function*(){C.pendingWrites++;try{yield _()}finally{C.pendingWrites--}})()}_set(_,C){var G=this;return(0,y.Z)(function*(){return G._withPendingWrite((0,y.Z)(function*(){return yield G._withRetries(X=>Gt(X,_,C)),G.localCache[_]=C,G.notifyServiceWorker(_)}))})()}_get(_){var C=this;return(0,y.Z)(function*(){const G=yield C._withRetries(X=>function Ta(b,f){return Yo.apply(this,arguments)}(X,_));return C.localCache[_]=G,G})()}_remove(_){var C=this;return(0,y.Z)(function*(){return C._withPendingWrite((0,y.Z)(function*(){return yield C._withRetries(G=>iu(G,_)),delete C.localCache[_],C.notifyServiceWorker(_)}))})()}_poll(){var _=this;return(0,y.Z)(function*(){const C=yield _._withRetries(Ee=>{const Ge=Jn(Ee,!1).getAll();return new no(Ge).toPromise()});if(!C)return[];if(0!==_.pendingWrites)return[];const G=[],X=new Set;for(const{fbase_key:Ee,value:Ge}of C)X.add(Ee),JSON.stringify(_.localCache[Ee])!==JSON.stringify(Ge)&&(_.notifyListeners(Ee,Ge),G.push(Ee));for(const Ee of Object.keys(_.localCache))_.localCache[Ee]&&!X.has(Ee)&&(_.notifyListeners(Ee,null),G.push(Ee));return G})()}notifyListeners(_,C){this.localCache[_]=C;const G=this.listeners[_];if(G)for(const X of Array.from(G))X(C)}startPolling(){var _=this;this.stopPolling(),this.pollTimer=setInterval((0,y.Z)(function*(){return _._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(_,C){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[_]||(this.listeners[_]=new Set,this._get(_)),this.listeners[_].add(C)}_removeListener(_,C){this.listeners[_]&&(this.listeners[_].delete(C),0===this.listeners[_].size&&delete this.listeners[_]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return b.type="LOCAL",b})(),A=1e12;class F{constructor(f){this.auth=f,this.counter=A,this._widgets=new Map}render(f,_){const C=this.counter;return this._widgets.set(C,new L(f,this.auth.name,_||{})),this.counter++,C}reset(f){var _;const C=f||A;null===(_=this._widgets.get(C))||void 0===_||_.delete(),this._widgets.delete(C)}getResponse(f){var _;return(null===(_=this._widgets.get(f||A))||void 0===_?void 0:_.getResponse())||""}execute(f){var _=this;return(0,y.Z)(function*(){var C;return null===(C=_._widgets.get(f||A))||void 0===C||C.execute(),""})()}}class L{constructor(f,_,C){this.params=C,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const G="string"==typeof f?document.getElementById(f):f;ue(G,"argument-error",{appName:_}),this.container=G,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function J(b){const f=[],_="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let C=0;C<b;C++)f.push(_.charAt(Math.floor(62*Math.random())));return f.join("")}(50);const{callback:f,"expired-callback":_}=this.params;if(f)try{f(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,_)try{_()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const de=Qs("rcb"),Qe=new Pt(3e4,6e4);class Vt{constructor(){var f;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(f=tr().grecaptcha)||void 0===f||!f.render)}load(f,_=""){return ue(function Zn(b){return b.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(b)}(_),f,"argument-error"),this.shouldResolveImmediately(_)&&_e(tr().grecaptcha)?Promise.resolve(tr().grecaptcha):new Promise((C,G)=>{const X=tr().setTimeout(()=>{G(Oe(f,"network-request-failed"))},Qe.get());tr()[de]=()=>{tr().clearTimeout(X),delete tr()[de];const Ge=tr().grecaptcha;if(!Ge||!_e(Ge))return void G(Oe(f,"internal-error"));const pt=Ge.render;Ge.render=(en,pn)=>{const fn=pt(en,pn);return this.counter++,fn},this.hostLanguage=_,C(Ge)},Ms(`https://www.google.com/recaptcha/api.js??${(0,oe.xO)({onload:de,render:"explicit",hl:_})}`).catch(()=>{clearTimeout(X),G(Oe(f,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(f){var _;return!(null===(_=tr().grecaptcha)||void 0===_||!_.render)&&(f===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class Sr{load(f){return(0,y.Z)(function*(){return new F(f)})()}clearedOneInstance(){}}const bn="recaptcha",As={theme:"light",type:"image"};class di{constructor(f,_,C=Object.assign({},As)){this.parameters=C,this.type=bn,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Cn(f),this.isInvisible="invisible"===this.parameters.size,ue(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const G="string"==typeof _?document.getElementById(_):_;ue(G,this.auth,"argument-error"),this.container=G,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Sr:new Vt,this.validateStartingState()}verify(){var f=this;return(0,y.Z)(function*(){f.assertNotDestroyed();const _=yield f.render(),C=f.getAssertedRecaptcha();return C.getResponse(_)||new Promise(X=>{const Ee=Ge=>{Ge&&(f.tokenChangeListeners.delete(Ee),X(Ge))};f.tokenChangeListeners.add(Ee),f.isInvisible&&C.execute(_)})})()}render(){try{this.assertNotDestroyed()}catch(f){return Promise.reject(f)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(f=>{throw this.renderPromise=null,f})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(f=>{this.container.removeChild(f)})}validateStartingState(){ue(!this.parameters.sitekey,this.auth,"argument-error"),ue(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),ue(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(f){return _=>{if(this.tokenChangeListeners.forEach(C=>C(_)),"function"==typeof f)f(_);else if("string"==typeof f){const C=tr()[f];"function"==typeof C&&C(_)}}}assertNotDestroyed(){ue(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var f=this;return(0,y.Z)(function*(){if(yield f.init(),!f.widgetId){let _=f.container;if(!f.isInvisible){const C=document.createElement("div");_.appendChild(C),_=C}f.widgetId=f.getAssertedRecaptcha().render(_,f.parameters)}return f.widgetId})()}init(){var f=this;return(0,y.Z)(function*(){ue(Dn()&&!bl(),f.auth,"internal-error"),yield function Au(){let b=null;return new Promise(f=>{"complete"!==document.readyState?(b=()=>f(),window.addEventListener("load",b)):f()}).catch(f=>{throw b&&window.removeEventListener("load",b),f})}(),f.recaptcha=yield f._recaptchaLoader.load(f.auth,f.auth.languageCode||void 0);const _=yield function ot(b){return ft.apply(this,arguments)}(f.auth);ue(_,f.auth,"internal-error"),f.parameters.sitekey=_})()}getAssertedRecaptcha(){return ue(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class as{constructor(f,_){this.verificationId=f,this.onConfirmation=_}confirm(f){const _=ws._fromVerification(this.verificationId,f);return this.onConfirmation(_)}}function ba(){return(ba=(0,y.Z)(function*(b,f,_){const C=Cn(b),G=yield Io(C,f,(0,oe.m9)(_));return new as(G,X=>se(C,X))})).apply(this,arguments)}function Ni(){return(Ni=(0,y.Z)(function*(b,f,_){const C=(0,oe.m9)(b);yield mr(!1,C,"phone");const G=yield Io(C.auth,f,(0,oe.m9)(_));return new as(G,X=>nn(C,X))})).apply(this,arguments)}function aa(){return(aa=(0,y.Z)(function*(b,f,_){const C=(0,oe.m9)(b),G=yield Io(C.auth,f,(0,oe.m9)(_));return new as(G,X=>Vi(C,X))})).apply(this,arguments)}function Io(b,f,_){return wa.apply(this,arguments)}function wa(){return wa=(0,y.Z)(function*(b,f,_){var C;const G=yield _.verify();try{let X;if(ue("string"==typeof G,b,"argument-error"),ue(_.type===bn,b,"argument-error"),X="string"==typeof f?{phoneNumber:f}:f,"session"in X){const Ee=X.session;if("phoneNumber"in X)return ue("enroll"===Ee.type,b,"internal-error"),(yield function Lr(b,f){return Ze(b,"POST","/v2/accounts/mfaEnrollment:start",Fe(b,f))}(b,{idToken:Ee.credential,phoneEnrollmentInfo:{phoneNumber:X.phoneNumber,recaptchaToken:G}})).phoneSessionInfo.sessionInfo;{ue("signin"===Ee.type,b,"internal-error");const Ge=(null===(C=X.multiFactorHint)||void 0===C?void 0:C.uid)||X.multiFactorUid;return ue(Ge,b,"missing-multi-factor-info"),(yield function Id(b,f){return Ze(b,"POST","/v2/accounts/mfaSignIn:start",Fe(b,f))}(b,{mfaPendingCredential:Ee.credential,mfaEnrollmentId:Ge,phoneSignInInfo:{recaptchaToken:G}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:Ee}=yield function _n(b,f){return yi.apply(this,arguments)}(b,{phoneNumber:X.phoneNumber,recaptchaToken:G});return Ee}}finally{_._reset()}}),wa.apply(this,arguments)}function Ga(){return(Ga=(0,y.Z)(function*(b,f){yield ga((0,oe.m9)(b),f)})).apply(this,arguments)}let Tc=(()=>{class b{constructor(_){this.providerId=b.PROVIDER_ID,this.auth=Cn(_)}verifyPhoneNumber(_,C){return Io(this.auth,_,(0,oe.m9)(C))}static credential(_,C){return ws._fromVerification(_,C)}static credentialFromResult(_){return b.credentialFromTaggedObject(_)}static credentialFromError(_){return b.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{phoneNumber:C,temporaryProof:G}=_;return C&&G?ws._fromTokenResponse(C,G):null}}return b.PROVIDER_ID="phone",b.PHONE_SIGN_IN_METHOD="phone",b})();function so(b,f){return f?Re(f):(ue(b._popupRedirectResolver,b,"argument-error"),b._popupRedirectResolver)}class Zu extends Bo{constructor(f){super("custom","custom"),this.params=f}_getIdTokenResponse(f){return fr(f,this._buildIdpRequest())}_linkToIdToken(f,_){return fr(f,this._buildIdpRequest(_))}_getReauthenticationResolver(f){return fr(f,this._buildIdpRequest())}_buildIdpRequest(f){const _={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return f&&(_.idToken=f),_}}function Td(b){return q(b.auth,new Zu(b),b.bypassAuthState)}function Su(b){const{auth:f,user:_}=b;return ue(_,f,"internal-error"),ma(_,new Zu(b),b.bypassAuthState)}function Yc(b){return bc.apply(this,arguments)}function bc(){return(bc=(0,y.Z)(function*(b){const{auth:f,user:_}=b;return ue(_,f,"internal-error"),ga(_,new Zu(b),b.bypassAuthState)})).apply(this,arguments)}class ch{constructor(f,_,C,G,X=!1){this.auth=f,this.resolver=C,this.user=G,this.bypassAuthState=X,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(_)?_:[_]}execute(){var f=this;return new Promise(function(){var _=(0,y.Z)(function*(C,G){f.pendingPromise={resolve:C,reject:G};try{f.eventManager=yield f.resolver._initialize(f.auth),yield f.onExecution(),f.eventManager.registerConsumer(f)}catch(X){f.reject(X)}});return function(C,G){return _.apply(this,arguments)}}())}onAuthEvent(f){var _=this;return(0,y.Z)(function*(){const{urlResponse:C,sessionId:G,postBody:X,tenantId:Ee,error:Ge,type:pt}=f;if(Ge)return void _.reject(Ge);const en={auth:_.auth,requestUri:C,sessionId:G,tenantId:Ee||void 0,postBody:X||void 0,user:_.user,bypassAuthState:_.bypassAuthState};try{_.resolve(yield _.getIdpTask(pt)(en))}catch(pn){_.reject(pn)}})()}onError(f){this.reject(f)}getIdpTask(f){switch(f){case"signInViaPopup":case"signInViaRedirect":return Td;case"linkViaPopup":case"linkViaRedirect":return Yc;case"reauthViaPopup":case"reauthViaRedirect":return Su;default:$e(this.auth,"internal-error")}}resolve(f){Et(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(f),this.unregisterAndCleanUp()}reject(f){Et(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(f),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const bd=new Pt(2e3,1e4);function Zc(){return(Zc=(0,y.Z)(function*(b,f,_){const C=Cn(b);at(b,f,Si);const G=so(C,_);return new Ha(C,"signInViaPopup",f,G).executeNotNull()})).apply(this,arguments)}function Qc(){return(Qc=(0,y.Z)(function*(b,f,_){const C=(0,oe.m9)(b);at(C.auth,f,Si);const G=so(C.auth,_);return new Ha(C.auth,"reauthViaPopup",f,G,C).executeNotNull()})).apply(this,arguments)}function Qu(){return(Qu=(0,y.Z)(function*(b,f,_){const C=(0,oe.m9)(b);at(C.auth,f,Si);const G=so(C.auth,_);return new Ha(C.auth,"linkViaPopup",f,G,C).executeNotNull()})).apply(this,arguments)}let Ha=(()=>{class b extends ch{constructor(_,C,G,X,Ee){super(_,C,X,Ee),this.provider=G,this.authWindow=null,this.pollId=null,b.currentPopupAction&&b.currentPopupAction.cancel(),b.currentPopupAction=this}executeNotNull(){var _=this;return(0,y.Z)(function*(){const C=yield _.execute();return ue(C,_.auth,"internal-error"),C})()}onExecution(){var _=this;return(0,y.Z)(function*(){Et(1===_.filter.length,"Popup operations only handle one event");const C=ja();_.authWindow=yield _.resolver._openPopup(_.auth,_.provider,_.filter[0],C),_.authWindow.associatedEvent=C,_.resolver._originValidation(_.auth).catch(G=>{_.reject(G)}),_.resolver._isIframeWebStorageSupported(_.auth,G=>{G||_.reject(Oe(_.auth,"web-storage-unsupported"))}),_.pollUserCancellation()})()}get eventId(){var _;return(null===(_=this.authWindow)||void 0===_?void 0:_.associatedEvent)||null}cancel(){this.reject(Oe(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,b.currentPopupAction=null}pollUserCancellation(){const _=()=>{var C,G;this.pollId=null!==(G=null===(C=this.authWindow)||void 0===C?void 0:C.window)&&void 0!==G&&G.closed?window.setTimeout(()=>{this.pollId=null,this.reject(Oe(this.auth,"popup-closed-by-user"))},8e3):window.setTimeout(_,bd.get())};_()}}return b.currentPopupAction=null,b})();const Ju="pendingRedirect",oo=new Map;class ql extends ch{constructor(f,_,C=!1){super(f,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],_,void 0,C),this.eventId=null}execute(){var f=()=>super.execute,_=this;return(0,y.Z)(function*(){let C=oo.get(_.auth._key());if(!C){try{const X=(yield function Jc(b,f){return Xc.apply(this,arguments)}(_.resolver,_.auth))?yield f().call(_):null;C=()=>Promise.resolve(X)}catch(G){C=()=>Promise.reject(G)}oo.set(_.auth._key(),C)}return _.bypassAuthState||oo.set(_.auth._key(),()=>Promise.resolve(null)),C()})()}onAuthEvent(f){var _=()=>super.onAuthEvent,C=this;return(0,y.Z)(function*(){if("signInViaRedirect"===f.type)return _().call(C,f);if("unknown"!==f.type){if(f.eventId){const G=yield C.auth._redirectUserForId(f.eventId);if(G)return C.user=G,_().call(C,f);C.resolve(null)}}else C.resolve(null)})()}onExecution(){return(0,y.Z)(function*(){})()}cleanUp(){}}function Xc(){return(Xc=(0,y.Z)(function*(b,f){const _=Zo(f),C=ni(b);if(!(yield C._isAvailable()))return!1;const G="true"===(yield C._get(_));return yield C._remove(_),G})).apply(this,arguments)}function es(b,f){return wc.apply(this,arguments)}function wc(){return(wc=(0,y.Z)(function*(b,f){return ni(b)._set(Zo(f),"true")})).apply(this,arguments)}function xo(b,f){oo.set(b._key(),f)}function ni(b){return Re(b._redirectPersistence)}function Zo(b){return Bt(Ju,b.config.apiKey,b.name)}function us(b,f,_){return function ii(b,f,_){return Nu.apply(this,arguments)}(b,f,_)}function Nu(){return(Nu=(0,y.Z)(function*(b,f,_){const C=Cn(b);at(b,f,Si),yield C._initializationPromise;const G=so(C,_);return yield es(G,C),G._openRedirect(C,f,"signInViaRedirect")})).apply(this,arguments)}function Dc(b,f,_){return function Qo(b,f,_){return Cc.apply(this,arguments)}(b,f,_)}function Cc(){return(Cc=(0,y.Z)(function*(b,f,_){const C=(0,oe.m9)(b);at(C.auth,f,Si),yield C.auth._initializationPromise;const G=so(C.auth,_);yield es(G,C.auth);const X=yield ec(C);return G._openRedirect(C.auth,f,"reauthViaRedirect",X)})).apply(this,arguments)}function Qh(b,f,_){return function vs(b,f,_){return Xu.apply(this,arguments)}(b,f,_)}function Xu(){return(Xu=(0,y.Z)(function*(b,f,_){const C=(0,oe.m9)(b);at(C.auth,f,Si),yield C.auth._initializationPromise;const G=so(C.auth,_);yield mr(!1,C,f.providerId),yield es(G,C.auth);const X=yield ec(C);return G._openRedirect(C.auth,f,"linkViaRedirect",X)})).apply(this,arguments)}function jn(){return(jn=(0,y.Z)(function*(b,f){return yield Cn(b)._initializationPromise,ji(b,f,!1)})).apply(this,arguments)}function ji(b,f){return ou.apply(this,arguments)}function ou(){return(ou=(0,y.Z)(function*(b,f,_=!1){const C=Cn(b),G=so(C,f),Ee=yield new ql(C,G,_).execute();return Ee&&!_&&(delete Ee.user._redirectEventId,yield C._persistUserIfCurrent(Ee.user),yield C._setRedirectUser(null,f)),Ee})).apply(this,arguments)}function ec(b){return $a.apply(this,arguments)}function $a(){return($a=(0,y.Z)(function*(b){const f=ja(`${b.uid}:::`);return b._redirectEventId=f,yield b.auth._setRedirectUser(b),yield b.auth._persistUserIfCurrent(b),f})).apply(this,arguments)}class Da{constructor(f){this.auth=f,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(f){this.consumers.add(f),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,f)&&(this.sendToConsumer(this.queuedRedirectEvent,f),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(f){this.consumers.delete(f)}onEvent(f){if(this.hasEventBeenHandled(f))return!1;let _=!1;return this.consumers.forEach(C=>{this.isEventForConsumer(f,C)&&(_=!0,this.sendToConsumer(f,C),this.saveEventToCache(f))}),this.hasHandledPotentialRedirect||!function au(b){switch(b.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Ac(b);default:return!1}}(f)||(this.hasHandledPotentialRedirect=!0,_||(this.queuedRedirectEvent=f,_=!0)),_}sendToConsumer(f,_){var C;if(f.error&&!Ac(f)){const G=(null===(C=f.error.code)||void 0===C?void 0:C.split("auth/")[1])||"internal-error";_.onError(Oe(this.auth,G))}else _.onAuthEvent(f)}isEventForConsumer(f,_){const C=null===_.eventId||!!f.eventId&&f.eventId===_.eventId;return _.filter.includes(f.type)&&C}hasEventBeenHandled(f){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Gi(f))}saveEventToCache(f){this.cachedEventUids.add(Gi(f)),this.lastProcessedEventTime=Date.now()}}function Gi(b){return[b.type,b.eventId,b.sessionId,b.tenantId].filter(f=>f).join("-")}function Ac({type:b,error:f}){return"unknown"===b&&"auth/no-auth-event"===f?.code}function Jo(b){return uu.apply(this,arguments)}function uu(){return(uu=(0,y.Z)(function*(b,f={}){return Ze(b,"GET","/v1/projects",f)})).apply(this,arguments)}const cu=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Dl=/^https?/;function Eo(){return(Eo=(0,y.Z)(function*(b){if(b.config.emulator)return;const{authorizedDomains:f}=yield Jo(b);for(const _ of f)try{if(lu(_))return}catch{}$e(b,"unauthorized-domain")})).apply(this,arguments)}function lu(b){const f=$n(),{protocol:_,hostname:C}=new URL(f);if(b.startsWith("chrome-extension://")){const Ee=new URL(b);return""===Ee.hostname&&""===C?"chrome-extension:"===_&&b.replace("chrome-extension://","")===f.replace("chrome-extension://",""):"chrome-extension:"===_&&Ee.hostname===C}if(!Dl.test(_))return!1;if(cu.test(b))return C===b;const G=b.replace(/\./g,"\\.");return new RegExp("^(.+\\."+G+"|"+G+")$","i").test(C)}const Ca=new Pt(3e4,6e4);function tc(){const b=tr().___jsl;if(b?.H)for(const f of Object.keys(b.H))if(b.H[f].r=b.H[f].r||[],b.H[f].L=b.H[f].L||[],b.H[f].r=[...b.H[f].L],b.CP)for(let _=0;_<b.CP.length;_++)b.CP[_]=null}let Xo=null;const el=new Pt(5e3,15e3),nc="__/auth/iframe",lh="emulator/auth/iframe",Jh={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Xh=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function hi(b){const f=b.config;ue(f.authDomain,b,"auth-domain-config-required");const _=f.emulator?Ie(f,lh):`https://${b.config.authDomain}/${nc}`,C={apiKey:f.apiKey,appName:b.name,v:Ce.SDK_VERSION},G=Xh.get(b.config.apiHost);G&&(C.eid=G);const X=b._getFrameworks();return X.length&&(C.fw=X.join(",")),`${_}?${(0,oe.xO)(C).slice(1)}`}function Ki(){return Ki=(0,y.Z)(function*(b){const f=yield function wd(b){return Xo=Xo||function za(b){return new Promise((f,_)=>{var C,G,X;function Ee(){tc(),gapi.load("gapi.iframes",{callback:()=>{f(gapi.iframes.getContext())},ontimeout:()=>{tc(),_(Oe(b,"network-request-failed"))},timeout:Ca.get()})}if(null!==(G=null===(C=tr().gapi)||void 0===C?void 0:C.iframes)&&void 0!==G&&G.Iframe)f(gapi.iframes.getContext());else{if(null===(X=tr().gapi)||void 0===X||!X.load){const Ge=Qs("iframefcb");return tr()[Ge]=()=>{gapi.load?Ee():_(Oe(b,"network-request-failed"))},Ms(`https://apis.google.com/js/api.js?onload=${Ge}`).catch(pt=>_(pt))}Ee()}}).catch(f=>{throw Xo=null,f})}(b),Xo}(b),_=tr().gapi;return ue(_,b,"internal-error"),f.open({where:document.body,url:hi(b),messageHandlersFilter:_.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Jh,dontclear:!0},C=>new Promise(function(){var G=(0,y.Z)(function*(X,Ee){yield C.restyle({setHideOnLeave:!1});const Ge=Oe(b,"network-request-failed"),pt=tr().setTimeout(()=>{Ee(Ge)},el.get());function en(){tr().clearTimeout(pt),X(C)}C.ping(en).then(en,()=>{Ee(Ge)})});return function(X,Ee){return G.apply(this,arguments)}}()))}),Ki.apply(this,arguments)}const Dd={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class ys{constructor(f){this.window=f,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}const cr="__/auth/handler",Mr="emulator/auth/handler",sc=encodeURIComponent("fac");function Sc(b,f,_,C,G,X){return xu.apply(this,arguments)}function xu(){return(xu=(0,y.Z)(function*(b,f,_,C,G,X){ue(b.config.authDomain,b,"auth-domain-config-required"),ue(b.config.apiKey,b,"invalid-api-key");const Ee={apiKey:b.config.apiKey,appName:b.name,authType:_,redirectUrl:C,v:Ce.SDK_VERSION,eventId:G};if(f instanceof Si){f.setDefaultLanguage(b.languageCode),Ee.providerId=f.providerId||"",(0,oe.xb)(f.getCustomParameters())||(Ee.customParameters=JSON.stringify(f.getCustomParameters()));for(const[pn,fn]of Object.entries(X||{}))Ee[pn]=fn}if(f instanceof is){const pn=f.getScopes().filter(fn=>""!==fn);pn.length>0&&(Ee.scopes=pn.join(","))}b.tenantId&&(Ee.tid=b.tenantId);const Ge=Ee;for(const pn of Object.keys(Ge))void 0===Ge[pn]&&delete Ge[pn];const pt=yield b._getAppCheckToken(),en=pt?`#${sc}=${encodeURIComponent(pt)}`:"";return`${function Cd({config:b}){return b.emulator?Ie(b,Mr):`https://${b.authDomain}/${cr}`}(b)}?${(0,oe.xO)(Ge).slice(1)}${en}`})).apply(this,arguments)}const Ss="webStorageSupport",ku=class Yl{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Ea,this._completeRedirectFn=ji,this._overrideRedirectResult=xo}_openPopup(f,_,C,G){var X=this;return(0,y.Z)(function*(){var Ee;Et(null===(Ee=X.eventManagers[f._key()])||void 0===Ee?void 0:Ee.manager,"_initialize() not called before _openPopup()");const Ge=yield Sc(f,_,C,$n(),G);return function du(b,f,_,C=500,G=600){const X=Math.max((window.screen.availHeight-G)/2,0).toString(),Ee=Math.max((window.screen.availWidth-C)/2,0).toString();let Ge="";const pt=Object.assign(Object.assign({},Dd),{width:C.toString(),height:G.toString(),top:X,left:Ee}),en=(0,oe.z$)().toLowerCase();_&&(Ge=qr(en)?"_blank":_),un(en)&&(f=f||"http://localhost",pt.scrollbars="yes");const pn=Object.entries(pt).reduce((cs,[ta,Uu])=>`${cs}${ta}=${Uu},`,"");if(function vn(b=(0,oe.z$)()){var f;return _t(b)&&!(null===(f=window.navigator)||void 0===f||!f.standalone)}(en)&&"_self"!==Ge)return function Cl(b,f){const _=document.createElement("a");_.href=b,_.target=f;const C=document.createEvent("MouseEvent");C.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),_.dispatchEvent(C)}(f||"",Ge),new ys(null);const fn=window.open(f||"",Ge,pn);ue(fn,b,"popup-blocked");try{fn.focus()}catch{}return new ys(fn)}(f,Ge,ja())})()}_openRedirect(f,_,C,G){var X=this;return(0,y.Z)(function*(){return yield X._originValidation(f),function Wl(b){tr().location.href=b}(yield Sc(f,_,C,$n(),G)),new Promise(()=>{})})()}_initialize(f){const _=f._key();if(this.eventManagers[_]){const{manager:G,promise:X}=this.eventManagers[_];return G?Promise.resolve(G):(Et(X,"If manager is not set, promise should be"),X)}const C=this.initAndGetManager(f);return this.eventManagers[_]={promise:C},C.catch(()=>{delete this.eventManagers[_]}),C}initAndGetManager(f){var _=this;return(0,y.Z)(function*(){const C=yield function rc(b){return Ki.apply(this,arguments)}(f),G=new Da(f);return C.register("authEvent",X=>(ue(X?.authEvent,f,"invalid-auth-event"),{status:G.onEvent(X.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),_.eventManagers[f._key()]={manager:G},_.iframes[f._key()]=C,G})()}_isIframeWebStorageSupported(f,_){this.iframes[f._key()].send(Ss,{type:Ss},G=>{var X;const Ee=null===(X=G?.[0])||void 0===X?void 0:X[Ss];void 0!==Ee&&_(!!Ee),$e(f,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(f){const _=f._key();return this.originValidationPromises[_]||(this.originValidationPromises[_]=function ua(b){return Eo.apply(this,arguments)}(f)),this.originValidationPromises[_]}get _shouldInitProactively(){return zn()||Dr()||_t()}};class ef{constructor(f){this.factorId=f}_process(f,_,C){switch(_.type){case"enroll":return this._finalizeEnroll(f,_.credential,C);case"signin":return this._finalizeSignIn(f,_.credential);default:return Kt("unexpected MultiFactorSessionType")}}}class tl extends ef{constructor(f){super("phone"),this.credential=f}static _fromCredential(f){return new tl(f)}_finalizeEnroll(f,_,C){return function ru(b,f){return Ze(b,"POST","/v2/accounts/mfaEnrollment:finalize",Fe(b,f))}(f,{idToken:_,displayName:C,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(f,_){return function ro(b,f){return Ze(b,"POST","/v2/accounts/mfaSignIn:finalize",Fe(b,f))}(f,{mfaPendingCredential:_,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let tf=(()=>{class b{constructor(){}static assertion(_){return tl._fromCredential(_)}}return b.FACTOR_ID="phone",b})();var Al="@firebase/auth";class nl{constructor(f){this.auth=f,this.internalListeners=new Map}getUid(){var f;return this.assertAuthConfigured(),(null===(f=this.auth.currentUser)||void 0===f?void 0:f.uid)||null}getToken(f){var _=this;return(0,y.Z)(function*(){return _.assertAuthConfigured(),yield _.auth._initializationPromise,_.auth.currentUser?{accessToken:yield _.auth.currentUser.getIdToken(f)}:null})()}addAuthTokenListener(f){if(this.assertAuthConfigured(),this.internalListeners.has(f))return;const _=this.auth.onIdTokenChanged(C=>{f(C?.stsTokenManager.accessToken||null)});this.internalListeners.set(f,_),this.updateProactiveRefresh()}removeAuthTokenListener(f){this.assertAuthConfigured();const _=this.internalListeners.get(f);_&&(this.internalListeners.delete(f),_(),this.updateProactiveRefresh())}assertAuthConfigured(){ue(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function Rs(){return window}(0,oe.Pz)("authIdTokenMaxAge"),function Aa(b){(0,Ce._registerComponent)(new Ne.wA("auth",(f,{options:_})=>{const C=f.getProvider("app").getImmediate(),G=f.getProvider("heartbeat"),X=f.getProvider("app-check-internal"),{apiKey:Ee,authDomain:Ge}=C.options;ue(Ee&&!Ee.includes(":"),"invalid-api-key",{appName:C.name});const pt={apiKey:Ee,authDomain:Ge,clientPlatform:b,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:vr(b)},en=new ha(C,G,X,pt);return function Ai(b,f){const _=f?.persistence||[],C=(Array.isArray(_)?_:[_]).map(Re);f?.errorMap&&b._updateErrorMap(f.errorMap),b._initializeWithPersistence(C,f?.popupRedirectResolver)}(en,_),en},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((f,_,C)=>{f.getProvider("auth-internal").initialize()})),(0,Ce._registerComponent)(new Ne.wA("auth-internal",f=>{const _=Cn(f.getProvider("auth").getImmediate());return new nl(_)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,Ce.registerVersion)(Al,"1.3.1",function Sl(b){switch(b){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(b)),(0,Ce.registerVersion)(Al,"1.3.1","esm2017")}("Browser");function Jl(){return Jl=(0,y.Z)(function*(b,f,_){var C;const{BuildInfo:G}=Rs();Et(f.sessionId,"AuthEvent did not contain a session ID");const X=yield function Be(b){return st.apply(this,arguments)}(f.sessionId),Ee={};return _t()?Ee.ibi=G.packageName:Ys()?Ee.apn=G.packageName:$e(b,"operation-not-supported-in-this-environment"),G.displayName&&(Ee.appDisplayName=G.displayName),Ee.sessionId=X,Sc(b,_,f.type,void 0,null!==(C=f.eventId)&&void 0!==C?C:void 0,Ee)}),Jl.apply(this,arguments)}function m(){return(m=(0,y.Z)(function*(b){const{BuildInfo:f}=Rs(),_={};_t()?_.iosBundleId=f.packageName:Ys()?_.androidPackageName=f.packageName:$e(b,"operation-not-supported-in-this-environment"),yield Jo(b,_)})).apply(this,arguments)}function Z(){return(Z=(0,y.Z)(function*(b,f,_){const{cordova:C}=Rs();let G=()=>{};try{yield new Promise((X,Ee)=>{let Ge=null;function pt(){var fn;X();const cs=null===(fn=C.plugins.browsertab)||void 0===fn?void 0:fn.close;"function"==typeof cs&&cs(),"function"==typeof _?.close&&_.close()}function en(){Ge||(Ge=window.setTimeout(()=>{Ee(Oe(b,"redirect-cancelled-by-user"))},2e3))}function pn(){"visible"===document?.visibilityState&&en()}f.addPassiveListener(pt),document.addEventListener("resume",en,!1),Ys()&&document.addEventListener("visibilitychange",pn,!1),G=()=>{f.removePassiveListener(pt),document.removeEventListener("resume",en,!1),document.removeEventListener("visibilitychange",pn,!1),Ge&&window.clearTimeout(Ge)}})}finally{G()}})).apply(this,arguments)}function st(){return(st=(0,y.Z)(function*(b){const f=function bt(b){if(Et(/[0-9a-zA-Z]+/.test(b),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(b);const f=new ArrayBuffer(b.length),_=new Uint8Array(f);for(let C=0;C<b.length;C++)_[C]=b.charCodeAt(C);return _}(b),_=yield crypto.subtle.digest("SHA-256",f);return Array.from(new Uint8Array(_)).map(G=>G.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}class wn extends Da{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(f=>{this.resolveInialized=f})}addPassiveListener(f){this.passiveListeners.add(f)}removePassiveListener(f){this.passiveListeners.delete(f)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(f){return this.resolveInialized(),this.passiveListeners.forEach(_=>_(f)),super.onEvent(f)}initialized(){var f=this;return(0,y.Z)(function*(){yield f.initPromise})()}}function Ws(b){return Rl.apply(this,arguments)}function Rl(){return(Rl=(0,y.Z)(function*(b){const f=yield Bs()._get(si(b));return f&&(yield Bs()._remove(si(b))),f})).apply(this,arguments)}function Sd(){const b=[];for(let _=0;_<20;_++){const C=Math.floor(62*Math.random());b.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(C))}return b.join("")}function Bs(){return Re(vt)}function si(b){return Bt("authEvent",b.config.apiKey,b.name)}function Wa(b){if(!b?.includes("?"))return{};const[f,..._]=b.split("?");return(0,oe.zd)(_.join("?"))}const Xn=class hh{constructor(){this._redirectPersistence=Ea,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=ji,this._overrideRedirectResult=xo}_initialize(f){var _=this;return(0,y.Z)(function*(){const C=f._key();let G=_.eventManagers.get(C);return G||(G=new wn(f),_.eventManagers.set(C,G),_.attachCallbackListeners(f,G)),G})()}_openPopup(f){$e(f,"operation-not-supported-in-this-environment")}_openRedirect(f,_,C,G){var X=this;return(0,y.Z)(function*(){!function ce(b){var f,_,C,G,X,Ee,Ge,pt,en,pn;const fn=Rs();ue("function"==typeof(null===(f=fn?.universalLinks)||void 0===f?void 0:f.subscribe),b,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),ue(typeof(null===(_=fn?.BuildInfo)||void 0===_?void 0:_.packageName)<"u",b,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),ue("function"==typeof(null===(X=null===(G=null===(C=fn?.cordova)||void 0===C?void 0:C.plugins)||void 0===G?void 0:G.browsertab)||void 0===X?void 0:X.openUrl),b,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),ue("function"==typeof(null===(pt=null===(Ge=null===(Ee=fn?.cordova)||void 0===Ee?void 0:Ee.plugins)||void 0===Ge?void 0:Ge.browsertab)||void 0===pt?void 0:pt.isAvailable),b,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),ue("function"==typeof(null===(pn=null===(en=fn?.cordova)||void 0===en?void 0:en.InAppBrowser)||void 0===pn?void 0:pn.open),b,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(f);const Ee=yield X._initialize(f);yield Ee.initialized(),Ee.resetRedirect(),function Ru(){oo.clear()}(),yield X._originValidation(f);const Ge=function Tr(b,f,_=null){return{type:f,eventId:_,urlResponse:null,sessionId:Sd(),postBody:null,tenantId:b.tenantId,error:Oe(b,"no-auth-event")}}(f,C,G);yield function ca(b,f){return Bs()._set(si(b),f)}(f,Ge);const pt=yield function il(b,f,_){return Jl.apply(this,arguments)}(f,Ge,_),en=yield function T(b){const{cordova:f}=Rs();return new Promise(_=>{f.plugins.browsertab.isAvailable(C=>{let G=null;C?f.plugins.browsertab.openUrl(b):G=f.InAppBrowser.open(b,function Xt(b=(0,oe.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(b)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(b)}()?"_blank":"_system","location=yes"),_(G)})})}(pt);return function x(b,f,_){return Z.apply(this,arguments)}(f,Ee,en)})()}_isIframeWebStorageSupported(f,_){throw new Error("Method not implemented.")}_originValidation(f){const _=f._key();return this.originValidationPromises[_]||(this.originValidationPromises[_]=function N(b){return m.apply(this,arguments)}(f)),this.originValidationPromises[_]}attachCallbackListeners(f,_){const{universalLinks:C,handleOpenURL:G,BuildInfo:X}=Rs(),Ee=setTimeout((0,y.Z)(function*(){yield Ws(f),_.onEvent(Rd())}),500),Ge=function(){var pn=(0,y.Z)(function*(fn){clearTimeout(Ee);const cs=yield Ws(f);let ta=null;cs&&fn?.url&&(ta=function qs(b,f){var _,C;const G=function Xl(b){const f=Wa(b),_=f.link?decodeURIComponent(f.link):void 0,C=Wa(_).link,G=f.deep_link_id?decodeURIComponent(f.deep_link_id):void 0;return Wa(G).link||G||C||_||b}(f);if(G.includes("/__/auth/callback")){const X=Wa(G),Ee=X.firebaseError?function ao(b){try{return JSON.parse(b)}catch{return null}}(decodeURIComponent(X.firebaseError)):null,Ge=null===(C=null===(_=Ee?.code)||void 0===_?void 0:_.split("auth/"))||void 0===C?void 0:C[1],pt=Ge?Oe(Ge):null;return pt?{type:b.type,eventId:b.eventId,tenantId:b.tenantId,error:pt,urlResponse:null,sessionId:null,postBody:null}:{type:b.type,eventId:b.eventId,tenantId:b.tenantId,sessionId:b.sessionId,urlResponse:G,postBody:null}}return null}(cs,fn.url)),_.onEvent(ta||Rd())});return function(cs){return pn.apply(this,arguments)}}();typeof C<"u"&&"function"==typeof C.subscribe&&C.subscribe(null,Ge);const pt=G,en=`${X.packageName.toLowerCase()}://`;Rs().handleOpenURL=function(){var pn=(0,y.Z)(function*(fn){if(fn.toLowerCase().startsWith(en)&&Ge({url:fn}),"function"==typeof pt)try{pt(fn)}catch(cs){console.error(cs)}});return function(fn){return pn.apply(this,arguments)}}()}};function Rd(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:Oe("no-auth-event")}}function hu(){var b;return(null===(b=self?.location)||void 0===b?void 0:b.protocol)||null}function ph(b=(0,oe.z$)()){return!("file:"!==hu()&&"ionic:"!==hu()&&"capacitor:"!==hu()||!b.toLowerCase().match(/iphone|ipad|ipod|android/))}function Ka(){try{const b=self.localStorage,f=ja();if(b)return b.setItem(f,"1"),b.removeItem(f),!function Nl(b=(0,oe.z$)()){return function To(){return(0,oe.w1)()&&11===document?.documentMode}()||function qa(b=(0,oe.z$)()){return/Edge\/\d+/.test(b)}(b)}()||(0,oe.hl)()}catch{return Vu()&&(0,oe.hl)()}return!1}function Vu(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function bo(){return(function nf(){return"http:"===hu()||"https:"===hu()}()||(0,oe.ru)()||ph())&&!function Mc(){return(0,oe.b$)()||(0,oe.UG)()}()&&Ka()&&!Vu()}function Od(){return ph()&&typeof document<"u"}function Ol(){return(Ol=(0,y.Z)(function*(){return!!Od()&&new Promise(b=>{const f=setTimeout(()=>{b(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(f),b(!0)})})})).apply(this,arguments)}const la={LOCAL:"local",NONE:"none",SESSION:"session"},Oi=ue,Pd="persistence";function Md(b){return rf.apply(this,arguments)}function rf(){return(rf=(0,y.Z)(function*(b){yield b._initializationPromise;const f=da(),_=Bt(Pd,b.config.apiKey,b.name);f&&f.setItem(_,b._getPersistence())})).apply(this,arguments)}function da(){var b;try{return(null===(b=function Zf(){return typeof window<"u"?window:null}())||void 0===b?void 0:b.sessionStorage)||null}catch{return null}}const mh=ue;class Sa{constructor(){this.browserResolver=Re(ku),this.cordovaResolver=Re(Xn),this.underlyingResolver=null,this._redirectPersistence=Ea,this._completeRedirectFn=ji,this._overrideRedirectResult=xo}_initialize(f){var _=this;return(0,y.Z)(function*(){return yield _.selectUnderlyingResolver(),_.assertedUnderlyingResolver._initialize(f)})()}_openPopup(f,_,C,G){var X=this;return(0,y.Z)(function*(){return yield X.selectUnderlyingResolver(),X.assertedUnderlyingResolver._openPopup(f,_,C,G)})()}_openRedirect(f,_,C,G){var X=this;return(0,y.Z)(function*(){return yield X.selectUnderlyingResolver(),X.assertedUnderlyingResolver._openRedirect(f,_,C,G)})()}_isIframeWebStorageSupported(f,_){this.assertedUnderlyingResolver._isIframeWebStorageSupported(f,_)}_originValidation(f){return this.assertedUnderlyingResolver._originValidation(f)}get _shouldInitProactively(){return Od()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return mh(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var f=this;return(0,y.Z)(function*(){if(f.underlyingResolver)return;const _=yield function Yf(){return Ol.apply(this,arguments)}();f.underlyingResolver=_?f.cordovaResolver:f.browserResolver})()}}function fu(b){return b.unwrap()}function td(b){return xc(b)}function xc(b){const{_tokenResponse:f}=b instanceof oe.ZR?b.customData:b;if(!f)return null;if(!(b instanceof oe.ZR)&&"temporaryProof"in f&&"phoneNumber"in f)return Tc.credentialFromResult(b);const _=f.providerId;if(!_||_===ze.PASSWORD)return null;let C;switch(_){case ze.GOOGLE:C=jo;break;case ze.FACEBOOK:C=Ds;break;case ze.GITHUB:C=Js;break;case ze.TWITTER:C=ci;break;default:const{oauthIdToken:G,oauthAccessToken:X,oauthTokenSecret:Ee,pendingToken:Ge,nonce:pt}=f;return X||Ee||G||Ge?Ge?_.startsWith("saml.")?Hr._create(_,Ge):Gr._fromParams({providerId:_,signInMethod:_,pendingToken:Ge,idToken:G,accessToken:X}):new ps(_).credential({idToken:G,accessToken:X,rawNonce:pt}):null}return b instanceof oe.ZR?C.credentialFromError(b):C.credentialFromResult(b)}function ea(b,f){return f.catch(_=>{throw _ instanceof oe.ZR&&function kd(b,f){var _;const C=null===(_=f.customData)||void 0===_?void 0:_._tokenResponse;if("auth/multi-factor-auth-required"===f?.code)f.resolver=new al(b,function _s(b,f){var _;const C=(0,oe.m9)(b),G=f;return ue(f.customData.operationType,C,"argument-error"),ue(null===(_=G.customData._serverResponse)||void 0===_?void 0:_.mfaPendingCredential,C,"argument-error"),Ko._fromError(C,G)}(b,f));else if(C){const G=xc(f),X=f;G&&(X.credential=G,X.tenantId=C.tenantId||void 0,X.email=C.email||void 0,X.phoneNumber=C.phoneNumber||void 0)}}(b,_),_}).then(_=>{const G=_.user;return{operationType:_.operationType,credential:td(_),additionalUserInfo:Ei(_),user:oc.getOrCreate(G)}})}function ol(b,f){return Pl.apply(this,arguments)}function Pl(){return(Pl=(0,y.Z)(function*(b,f){const _=yield f;return{verificationId:_.verificationId,confirm:C=>ea(b,_.confirm(C))}})).apply(this,arguments)}class al{constructor(f,_){this.resolver=_,this.auth=function ko(b){return b.wrapped()}(f)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(f){return ea(fu(this.auth),this.resolver.resolveSignIn(f))}}class oc{constructor(f){this._delegate=f,this.multiFactor=function vo(b){const f=(0,oe.m9)(b);return Ti.has(f)||Ti.set(f,yt._fromUser(f)),Ti.get(f)}(f)}static getOrCreate(f){return oc.USER_MAP.has(f)||oc.USER_MAP.set(f,new oc(f)),oc.USER_MAP.get(f)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(f){return this._delegate.getIdTokenResult(f)}getIdToken(f){return this._delegate.getIdToken(f)}linkAndRetrieveDataWithCredential(f){return this.linkWithCredential(f)}linkWithCredential(f){var _=this;return(0,y.Z)(function*(){return ea(_.auth,nn(_._delegate,f))})()}linkWithPhoneNumber(f,_){var C=this;return(0,y.Z)(function*(){return ol(C.auth,function Ed(b,f,_){return Ni.apply(this,arguments)}(C._delegate,f,_))})()}linkWithPopup(f){var _=this;return(0,y.Z)(function*(){return ea(_.auth,function Zh(b,f,_){return Qu.apply(this,arguments)}(_._delegate,f,Sa))})()}linkWithRedirect(f){var _=this;return(0,y.Z)(function*(){return yield Md(Cn(_.auth)),Qh(_._delegate,f,Sa)})()}reauthenticateAndRetrieveDataWithCredential(f){return this.reauthenticateWithCredential(f)}reauthenticateWithCredential(f){var _=this;return(0,y.Z)(function*(){return ea(_.auth,Vi(_._delegate,f))})()}reauthenticateWithPhoneNumber(f,_){return ol(this.auth,function io(b,f,_){return aa.apply(this,arguments)}(this._delegate,f,_))}reauthenticateWithPopup(f){return ea(this.auth,function Yh(b,f,_){return Qc.apply(this,arguments)}(this._delegate,f,Sa))}reauthenticateWithRedirect(f){var _=this;return(0,y.Z)(function*(){return yield Md(Cn(_.auth)),Dc(_._delegate,f,Sa)})()}sendEmailVerification(f){return function Kc(b,f){return to.apply(this,arguments)}(this._delegate,f)}unlink(f){var _=this;return(0,y.Z)(function*(){return yield function Ao(b,f){return So.apply(this,arguments)}(_._delegate,f),_})()}updateEmail(f){return function K(b,f){return Je((0,oe.m9)(b),f,null)}(this._delegate,f)}updatePassword(f){return function ge(b,f){return Je((0,oe.m9)(b),null,f)}(this._delegate,f)}updatePhoneNumber(f){return function su(b,f){return Ga.apply(this,arguments)}(this._delegate,f)}updateProfile(f){return function Q(b,f){return U.apply(this,arguments)}(this._delegate,f)}verifyBeforeUpdateEmail(f,_){return function ah(b,f,_){return Ji.apply(this,arguments)}(this._delegate,f,_)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}oc.USER_MAP=new WeakMap;const ac=ue;let Us=(()=>{class b{constructor(_,C){if(this.app=_,C.isInitialized())return this._delegate=C.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:G}=_.options;ac(G,"invalid-api-key",{appName:_.name}),ac(G,"invalid-api-key",{appName:_.name});const X=typeof window<"u"?Sa:void 0;this._delegate=C.initialize({options:{persistence:Bu(G,_.name),popupRedirectResolver:X}}),this._delegate._updateErrorMap(It),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?oc.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(_){this._delegate.languageCode=_}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(_){this._delegate.tenantId=_}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(_,C){!function yu(b,f,_){const C=Cn(b);ue(C._canInitEmulator,C,"emulator-config-failed"),ue(/^https?:\/\//.test(f),C,"invalid-emulator-scheme");const G=!!_?.disableWarnings,X=mi(f),{host:Ee,port:Ge}=function Ja(b){const f=mi(b),_=/(\/\/)?([^?#/]+)/.exec(b.substr(f.length));if(!_)return{host:"",port:null};const C=_[2].split("@").pop()||"",G=/^(\[[^\]]+\])(:|$)/.exec(C);if(G){const X=G[1];return{host:X,port:fa(C.substr(X.length+1))}}{const[X,Ee]=C.split(":");return{host:X,port:fa(Ee)}}}(f);C.config.emulator={url:`${X}//${Ee}${null===Ge?"":`:${Ge}`}/`},C.settings.appVerificationDisabledForTesting=!0,C.emulatorConfig=Object.freeze({host:Ee,port:Ge,protocol:X.replace(":",""),options:Object.freeze({disableWarnings:G})}),G||function xa(){function b(){const f=document.createElement("p"),_=f.style;f.innerText="Running in emulator mode. Do not use with production credentials.",_.position="fixed",_.width="100%",_.backgroundColor="#ffffff",_.border=".1em solid #000000",_.color="#b50000",_.bottom="0px",_.left="0px",_.margin="0px",_.zIndex="10000",_.textAlign="center",f.classList.add("firebase-emulator-warning"),document.body.appendChild(f)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",b):b())}()}(this._delegate,_,C)}applyActionCode(_){return function vc(b,f){return Mo.apply(this,arguments)}(this._delegate,_)}checkActionCode(_){return Eu(this._delegate,_)}confirmPasswordReset(_,C){return function Fa(b,f,_){return go.apply(this,arguments)}(this._delegate,_,C)}createUserWithEmailAndPassword(_,C){var G=this;return(0,y.Z)(function*(){return ea(G._delegate,function bu(b,f,_){return zs.apply(this,arguments)}(G._delegate,_,C))})()}fetchProvidersForEmail(_){return this.fetchSignInMethodsForEmail(_)}fetchSignInMethodsForEmail(_){return function eo(b,f){return va.apply(this,arguments)}(this._delegate,_)}isSignInWithEmailLink(_){return function gd(b,f){const _=rs.parseLink(f);return"EMAIL_SIGNIN"===_?.operation}(0,_)}getRedirectResult(){var _=this;return(0,y.Z)(function*(){ac(bo(),_._delegate,"operation-not-supported-in-this-environment");const C=yield function Ou(b,f){return jn.apply(this,arguments)}(_._delegate,Sa);return C?ea(_._delegate,Promise.resolve(C)):{credential:null,user:null}})()}addFrameworkForLogging(_){!function Pc(b,f){Cn(b)._logFramework(f)}(this._delegate,_)}onAuthStateChanged(_,C,G){const{next:X,error:Ee,complete:Ge}=Rr(_,C,G);return this._delegate.onAuthStateChanged(X,Ee,Ge)}onIdTokenChanged(_,C,G){const{next:X,error:Ee,complete:Ge}=Rr(_,C,G);return this._delegate.onIdTokenChanged(X,Ee,Ge)}sendSignInLinkToEmail(_,C){return function yc(b,f,_){return zo.apply(this,arguments)}(this._delegate,_,C)}sendPasswordResetEmail(_,C){return function Wu(b,f,_){return Po.apply(this,arguments)}(this._delegate,_,C||void 0)}setPersistence(_){var C=this;return(0,y.Z)(function*(){let G;switch(function gh(b,f){Oi(Object.values(la).includes(f),b,"invalid-persistence-type"),(0,oe.b$)()?Oi(f!==la.SESSION,b,"unsupported-persistence-type"):(0,oe.UG)()?Oi(f===la.NONE,b,"unsupported-persistence-type"):Vu()?Oi(f===la.NONE||f===la.LOCAL&&(0,oe.hl)(),b,"unsupported-persistence-type"):Oi(f===la.NONE||Ka(),b,"unsupported-persistence-type")}(C._delegate,_),_){case la.SESSION:G=Ea;break;case la.LOCAL:G=(yield Re(Yu)._isAvailable())?Yu:vt;break;case la.NONE:G=St;break;default:return $e("argument-error",{appName:C._delegate.name})}return C._delegate.setPersistence(G)})()}signInAndRetrieveDataWithCredential(_){return this.signInWithCredential(_)}signInAnonymously(){return ea(this._delegate,function eu(b){return fo.apply(this,arguments)}(this._delegate))}signInWithCredential(_){return ea(this._delegate,se(this._delegate,_))}signInWithCustomToken(_){return ea(this._delegate,function Bi(b,f){return os.apply(this,arguments)}(this._delegate,_))}signInWithEmailAndPassword(_,C){return ea(this._delegate,function wu(b,f,_){return se((0,oe.m9)(b),Bn.credential(f,_)).catch(function(){var C=(0,y.Z)(function*(G){throw"auth/password-does-not-meet-requirements"===G.code&&Qi(b),G});return function(G){return C.apply(this,arguments)}}())}(this._delegate,_,C))}signInWithEmailLink(_,C){return ea(this._delegate,function Wc(b,f,_){return tu.apply(this,arguments)}(this._delegate,_,C))}signInWithPhoneNumber(_,C){return ol(this._delegate,function oa(b,f,_){return ba.apply(this,arguments)}(this._delegate,_,C))}signInWithPopup(_){var C=this;return(0,y.Z)(function*(){return ac(bo(),C._delegate,"operation-not-supported-in-this-environment"),ea(C._delegate,function Kh(b,f,_){return Zc.apply(this,arguments)}(C._delegate,_,Sa))})()}signInWithRedirect(_){var C=this;return(0,y.Z)(function*(){return ac(bo(),C._delegate,"operation-not-supported-in-this-environment"),yield Md(C._delegate),us(C._delegate,_,Sa)})()}updateCurrentUser(_){return this._delegate.updateCurrentUser(_)}verifyPasswordResetCode(_){return function Tu(b,f){return _a.apply(this,arguments)}(this._delegate,_)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return b.Persistence=la,b})();function Rr(b,f,_){let C=b;"function"!=typeof b&&({next:C,error:f,complete:_}=b);const G=C;return{next:Ee=>G(Ee&&oc.getOrCreate(Ee)),error:f,complete:_}}function Bu(b,f){const _=function xd(b,f){const _=da();if(!_)return[];const C=Bt(Pd,b,f);switch(_.getItem(C)){case la.NONE:return[St];case la.LOCAL:return[Yu,Ea];case la.SESSION:return[Ea];default:return[]}}(b,f);if(typeof self<"u"&&!_.includes(Yu)&&_.push(Yu),typeof window<"u")for(const C of[vt,Ea])_.includes(C)||_.push(C);return _.includes(St)||_.push(St),_}class nd{constructor(){this.providerId="phone",this._delegate=new Tc(fu(fe.Z.auth()))}static credential(f,_){return Tc.credential(f,_)}verifyPhoneNumber(f,_){return this._delegate.verifyPhoneNumber(f,_)}unwrap(){return this._delegate}}nd.PHONE_SIGN_IN_METHOD=Tc.PHONE_SIGN_IN_METHOD,nd.PROVIDER_ID=Tc.PROVIDER_ID;const Fd=ue;class ul{constructor(f,_,C=fe.Z.app()){var G;Fd(null===(G=C.options)||void 0===G?void 0:G.apiKey,"invalid-api-key",{appName:C.name}),this._delegate=new di(C.auth(),f,_),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function sf(b){b.INTERNAL.registerComponent(new Ne.wA("auth-compat",f=>{const _=f.getProvider("app-compat").getImmediate(),C=f.getProvider("auth");return new Us(_,C)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:Bn,FacebookAuthProvider:Ds,GithubAuthProvider:Js,GoogleAuthProvider:jo,OAuthProvider:ps,SAMLAuthProvider:Er,PhoneAuthProvider:nd,PhoneMultiFactorGenerator:tf,RecaptchaVerifier:ul,TwitterAuthProvider:ci,Auth:Us,AuthCredential:Bo,Error:oe.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),b.registerVersion("@firebase/auth-compat","0.4.7")}(fe.Z)},5861:(zt,Ye,H)=>{function y(oe,Ce,De,ye,Ne,I,ze){try{var pe=oe[I](ze),me=pe.value}catch(xe){return void De(xe)}pe.done?Ce(me):Promise.resolve(me).then(ye,Ne)}function fe(oe){return function(){var Ce=this,De=arguments;return new Promise(function(ye,Ne){var I=oe.apply(Ce,De);function ze(me){y(I,ye,Ne,ze,pe,"next",me)}function pe(me){y(I,ye,Ne,ze,pe,"throw",me)}ze(void 0)})}}H.d(Ye,{Z:()=>fe})},7582:(zt,Ye,H)=>{function Ce(Ie,we){var He={};for(var Pe in Ie)Object.prototype.hasOwnProperty.call(Ie,Pe)&&we.indexOf(Pe)<0&&(He[Pe]=Ie[Pe]);if(null!=Ie&&"function"==typeof Object.getOwnPropertySymbols){var Fe=0;for(Pe=Object.getOwnPropertySymbols(Ie);Fe<Pe.length;Fe++)we.indexOf(Pe[Fe])<0&&Object.prototype.propertyIsEnumerable.call(Ie,Pe[Fe])&&(He[Pe[Fe]]=Ie[Pe[Fe]])}return He}function xe(Ie,we,He,Pe){return new(He||(He=Promise))(function(Ze,Nt){function wt(ln){try{Ft(Pe.next(ln))}catch(on){Nt(on)}}function nr(ln){try{Ft(Pe.throw(ln))}catch(on){Nt(on)}}function Ft(ln){ln.done?Ze(ln.value):function Fe(Ze){return Ze instanceof He?Ze:new He(function(Nt){Nt(Ze)})}(ln.value).then(wt,nr)}Ft((Pe=Pe.apply(Ie,we||[])).next())})}function Le(Ie){return this instanceof Le?(this.v=Ie,this):new Le(Ie)}function $e(Ie,we,He){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Fe,Pe=He.apply(Ie,we||[]),Ze=[];return Fe={},Nt("next"),Nt("throw"),Nt("return"),Fe[Symbol.asyncIterator]=function(){return this},Fe;function Nt(Sn){Pe[Sn]&&(Fe[Sn]=function(xn){return new Promise(function(Rn,_e){Ze.push([Sn,xn,Rn,_e])>1||wt(Sn,xn)})})}function wt(Sn,xn){try{!function nr(Sn){Sn.value instanceof Le?Promise.resolve(Sn.value.v).then(Ft,ln):on(Ze[0][2],Sn)}(Pe[Sn](xn))}catch(Rn){on(Ze[0][3],Rn)}}function Ft(Sn){wt("next",Sn)}function ln(Sn){wt("throw",Sn)}function on(Sn,xn){Sn(xn),Ze.shift(),Ze.length&&wt(Ze[0][0],Ze[0][1])}}function We(Ie){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var He,we=Ie[Symbol.asyncIterator];return we?we.call(Ie):(Ie=function ct(Ie){var we="function"==typeof Symbol&&Symbol.iterator,He=we&&Ie[we],Pe=0;if(He)return He.call(Ie);if(Ie&&"number"==typeof Ie.length)return{next:function(){return Ie&&Pe>=Ie.length&&(Ie=void 0),{value:Ie&&Ie[Pe++],done:!Ie}}};throw new TypeError(we?"Object is not iterable.":"Symbol.iterator is not defined.")}(Ie),He={},Pe("next"),Pe("throw"),Pe("return"),He[Symbol.asyncIterator]=function(){return this},He);function Pe(Ze){He[Ze]=Ie[Ze]&&function(Nt){return new Promise(function(wt,nr){!function Fe(Ze,Nt,wt,nr){Promise.resolve(nr).then(function(Ft){Ze({value:Ft,done:wt})},Nt)}(wt,nr,(Nt=Ie[Ze](Nt)).done,Nt.value)})}}}H.d(Ye,{FC:()=>$e,KL:()=>We,_T:()=>Ce,mG:()=>xe,qq:()=>Le}),"function"==typeof SuppressedError&&SuppressedError}},zt=>{var Ye=y=>zt(zt.s=y);Ye(2614),Ye(1421)}]);