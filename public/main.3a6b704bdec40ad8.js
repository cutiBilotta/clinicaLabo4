"use strict";(self.webpackChunkclinica=self.webpackChunkclinica||[]).push([[179],{9058:(Wt,Je,G)=>{G.d(Je,{BH:()=>Pe,G6:()=>Bt,L:()=>qe,LL:()=>Xe,Pz:()=>He,Sg:()=>$e,UG:()=>de,ZB:()=>Ve,ZR:()=>Ue,aH:()=>_e,b$:()=>Jn,eu:()=>Se,hl:()=>be,jU:()=>Ot,m9:()=>ji,ne:()=>or,pd:()=>ln,r3:()=>Ee,ru:()=>wt,tV:()=>ye,uI:()=>ft,vZ:()=>pt,w1:()=>Or,xO:()=>zn,xb:()=>ze,z$:()=>ot,zd:()=>Mt});const Oe=function(we){const ie=[];let se=0;for(let re=0;re<we.length;re++){let ue=we.charCodeAt(re);ue<128?ie[se++]=ue:ue<2048?(ie[se++]=ue>>6|192,ie[se++]=63&ue|128):55296==(64512&ue)&&re+1<we.length&&56320==(64512&we.charCodeAt(re+1))?(ue=65536+((1023&ue)<<10)+(1023&we.charCodeAt(++re)),ie[se++]=ue>>18|240,ie[se++]=ue>>12&63|128,ie[se++]=ue>>6&63|128,ie[se++]=63&ue|128):(ie[se++]=ue>>12|224,ie[se++]=ue>>6&63|128,ie[se++]=63&ue|128)}return ie},Te={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(we,ie){if(!Array.isArray(we))throw Error("encodeByteArray takes an array as a parameter");this.init_();const se=ie?this.byteToCharMapWebSafe_:this.byteToCharMap_,re=[];for(let ue=0;ue<we.length;ue+=3){const Le=we[ue],_t=ue+1<we.length,Pt=_t?we[ue+1]:0,$t=ue+2<we.length,gn=$t?we[ue+2]:0;let Br=(15&Pt)<<2|gn>>6,li=63&gn;$t||(li=64,_t||(Br=64)),re.push(se[Le>>2],se[(3&Le)<<4|Pt>>4],se[Br],se[li])}return re.join("")},encodeString(we,ie){return this.HAS_NATIVE_SUPPORT&&!ie?btoa(we):this.encodeByteArray(Oe(we),ie)},decodeString(we,ie){return this.HAS_NATIVE_SUPPORT&&!ie?atob(we):function(we){const ie=[];let se=0,re=0;for(;se<we.length;){const ue=we[se++];if(ue<128)ie[re++]=String.fromCharCode(ue);else if(ue>191&&ue<224){const Le=we[se++];ie[re++]=String.fromCharCode((31&ue)<<6|63&Le)}else if(ue>239&&ue<365){const $t=((7&ue)<<18|(63&we[se++])<<12|(63&we[se++])<<6|63&we[se++])-65536;ie[re++]=String.fromCharCode(55296+($t>>10)),ie[re++]=String.fromCharCode(56320+(1023&$t))}else{const Le=we[se++],_t=we[se++];ie[re++]=String.fromCharCode((15&ue)<<12|(63&Le)<<6|63&_t)}}return ie.join("")}(this.decodeStringToByteArray(we,ie))},decodeStringToByteArray(we,ie){this.init_();const se=ie?this.charToByteMapWebSafe_:this.charToByteMap_,re=[];for(let ue=0;ue<we.length;){const Le=se[we.charAt(ue++)],Pt=ue<we.length?se[we.charAt(ue)]:0;++ue;const gn=ue<we.length?se[we.charAt(ue)]:64;++ue;const hn=ue<we.length?se[we.charAt(ue)]:64;if(++ue,null==Le||null==Pt||null==gn||null==hn)throw new ke;re.push(Le<<2|Pt>>4),64!==gn&&(re.push(Pt<<4&240|gn>>2),64!==hn&&re.push(gn<<6&192|hn))}return re},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let we=0;we<this.ENCODED_VALS.length;we++)this.byteToCharMap_[we]=this.ENCODED_VALS.charAt(we),this.charToByteMap_[this.byteToCharMap_[we]]=we,this.byteToCharMapWebSafe_[we]=this.ENCODED_VALS_WEBSAFE.charAt(we),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[we]]=we,we>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(we)]=we,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(we)]=we)}}};class ke extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const qe=function(we){return function(we){const ie=Oe(we);return Te.encodeByteArray(ie,!0)}(we).replace(/\./g,"")},ye=function(we){try{return Te.decodeString(we,!0)}catch(ie){console.error("base64Decode failed: ",ie)}return null};function Ve(we,ie){if(!(ie instanceof Object))return ie;switch(ie.constructor){case Date:return new Date(ie.getTime());case Object:void 0===we&&(we={});break;case Array:we=[];break;default:return ie}for(const se in ie)!ie.hasOwnProperty(se)||!ht(se)||(we[se]=Ve(we[se],ie[se]));return we}function ht(we){return"__proto__"!==we}const bt=()=>{try{return function st(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const we=process.env.__FIREBASE_DEFAULTS__;return we?JSON.parse(we):void 0})()||(()=>{if(typeof document>"u")return;let we;try{we=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const ie=we&&ye(we[1]);return ie&&JSON.parse(ie)})()}catch(we){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${we}`)}},_e=()=>{var we;return null===(we=bt())||void 0===we?void 0:we.config},He=we=>{var ie;return null===(ie=bt())||void 0===ie?void 0:ie[`_${we}`]};class Pe{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((ie,se)=>{this.resolve=ie,this.reject=se})}wrapCallback(ie){return(se,re)=>{se?this.reject(se):this.resolve(re),"function"==typeof ie&&(this.promise.catch(()=>{}),1===ie.length?ie(se):ie(se,re))}}}function $e(we,ie){if(we.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const re=ie||"demo-project",ue=we.iat||0,Le=we.sub||we.user_id;if(!Le)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const _t=Object.assign({iss:`https://securetoken.google.com/${re}`,aud:re,iat:ue,exp:ue+3600,auth_time:ue,sub:Le,user_id:Le,firebase:{sign_in_provider:"custom",identities:{}}},we);return[qe(JSON.stringify({alg:"none",type:"JWT"})),qe(JSON.stringify(_t)),""].join(".")}function ot(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function ft(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ot())}function de(){var we;const ie=null===(we=bt())||void 0===we?void 0:we.forceEnvironment;if("node"===ie)return!0;if("browser"===ie)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function Ot(){return"object"==typeof self&&self.self===self}function wt(){const we="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof we&&void 0!==we.id}function Jn(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function Or(){const we=ot();return we.indexOf("MSIE ")>=0||we.indexOf("Trident/")>=0}function Bt(){return!de()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function be(){try{return"object"==typeof indexedDB}catch{return!1}}function Se(){return new Promise((we,ie)=>{try{let se=!0;const re="validate-browser-context-for-indexeddb-analytics-module",ue=self.indexedDB.open(re);ue.onsuccess=()=>{ue.result.close(),se||self.indexedDB.deleteDatabase(re),we(!0)},ue.onupgradeneeded=()=>{se=!1},ue.onerror=()=>{var Le;ie((null===(Le=ue.error)||void 0===Le?void 0:Le.message)||"")}}catch(se){ie(se)}})}class Ue extends Error{constructor(ie,se,re){super(se),this.code=ie,this.customData=re,this.name="FirebaseError",Object.setPrototypeOf(this,Ue.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Xe.prototype.create)}}class Xe{constructor(ie,se,re){this.service=ie,this.serviceName=se,this.errors=re}create(ie,...se){const re=se[0]||{},ue=`${this.service}/${ie}`,Le=this.errors[ie],_t=Le?function Ft(we,ie){return we.replace(Rt,(se,re)=>{const ue=ie[re];return null!=ue?String(ue):`<${re}?>`})}(Le,re):"Error";return new Ue(ue,`${this.serviceName}: ${_t} (${ue}).`,re)}}const Rt=/\{\$([^}]+)}/g;function Ee(we,ie){return Object.prototype.hasOwnProperty.call(we,ie)}function ze(we){for(const ie in we)if(Object.prototype.hasOwnProperty.call(we,ie))return!1;return!0}function pt(we,ie){if(we===ie)return!0;const se=Object.keys(we),re=Object.keys(ie);for(const ue of se){if(!re.includes(ue))return!1;const Le=we[ue],_t=ie[ue];if(Lt(Le)&&Lt(_t)){if(!pt(Le,_t))return!1}else if(Le!==_t)return!1}for(const ue of re)if(!se.includes(ue))return!1;return!0}function Lt(we){return null!==we&&"object"==typeof we}function zn(we){const ie=[];for(const[se,re]of Object.entries(we))Array.isArray(re)?re.forEach(ue=>{ie.push(encodeURIComponent(se)+"="+encodeURIComponent(ue))}):ie.push(encodeURIComponent(se)+"="+encodeURIComponent(re));return ie.length?"&"+ie.join("&"):""}function Mt(we){const ie={};return we.replace(/^\?/,"").split("&").forEach(re=>{if(re){const[ue,Le]=re.split("=");ie[decodeURIComponent(ue)]=decodeURIComponent(Le)}}),ie}function ln(we){const ie=we.indexOf("?");if(!ie)return"";const se=we.indexOf("#",ie);return we.substring(ie,se>0?se:void 0)}function or(we,ie){const se=new cn(we,ie);return se.subscribe.bind(se)}class cn{constructor(ie,se){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=se,this.task.then(()=>{ie(this)}).catch(re=>{this.error(re)})}next(ie){this.forEachObserver(se=>{se.next(ie)})}error(ie){this.forEachObserver(se=>{se.error(ie)}),this.close(ie)}complete(){this.forEachObserver(ie=>{ie.complete()}),this.close()}subscribe(ie,se,re){let ue;if(void 0===ie&&void 0===se&&void 0===re)throw new Error("Missing Observer.");ue=function Hn(we,ie){if("object"!=typeof we||null===we)return!1;for(const se of ie)if(se in we&&"function"==typeof we[se])return!0;return!1}(ie,["next","error","complete"])?ie:{next:ie,error:se,complete:re},void 0===ue.next&&(ue.next=$r),void 0===ue.error&&(ue.error=$r),void 0===ue.complete&&(ue.complete=$r);const Le=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?ue.error(this.finalError):ue.complete()}catch{}}),this.observers.push(ue),Le}unsubscribeOne(ie){void 0===this.observers||void 0===this.observers[ie]||(delete this.observers[ie],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(ie){if(!this.finalized)for(let se=0;se<this.observers.length;se++)this.sendOne(se,ie)}sendOne(ie,se){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[ie])try{se(this.observers[ie])}catch(re){typeof console<"u"&&console.error&&console.error(re)}})}close(ie){this.finalized||(this.finalized=!0,void 0!==ie&&(this.finalError=ie),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function $r(){}function ji(we){return we&&we._delegate?we._delegate:we}},9672:(Wt,Je,G)=>{G.d(Je,{b9:()=>I_,qx:()=>ym,JN:()=>kl});var E=G(6593),me=G(95),le=G(1826),Oe=G(6751),Ne=G(4664),Te=G(2096),ke=G(4108),T=G(5879);const ht=[{path:"",redirectTo:"bienvenida",pathMatch:"full"},{path:"bienvenida",loadChildren:()=>G.e(119).then(G.bind(G,6119)).then(c=>c.BienvenidaModule)},{path:"registro",loadChildren:()=>Promise.all([G.e(700),G.e(228)]).then(G.bind(G,8228)).then(c=>c.RegistroModule)},{path:"login",loadChildren:()=>Promise.all([G.e(700),G.e(330)]).then(G.bind(G,7330)).then(c=>c.LoginModule)},{path:"verificacion",loadChildren:()=>G.e(187).then(G.bind(G,9187)).then(c=>c.VerificacionEmailModule)},{path:"seccion-usuarios",loadChildren:()=>Promise.all([G.e(700),G.e(228),G.e(592),G.e(893)]).then(G.bind(G,5893)).then(c=>c.SeccionUsuariosModule),canActivate:[(c,h)=>{const a=(0,T.f3M)(ke.e),d=(0,T.f3M)(Oe.T);return(0,T.f3M)(le.F0),a.getUserEmail().pipe((0,Ne.w)(S=>{if(S){console.log(S);const B=S,Z=d.usuarios.find(ae=>ae.email==B);if(Z&&("administrador"==Z.perfil||"Administrador"==Z.perfil))return console.log("Administrador True"),(0,Te.of)(!0)}return(0,Te.of)(!1)}))}]},{path:"home",loadChildren:()=>Promise.all([G.e(700),G.e(140),G.e(730),G.e(310)]).then(G.bind(G,1310)).then(c=>c.HomeModule)},{path:"solicitar-turno",loadChildren:()=>Promise.all([G.e(700),G.e(140),G.e(730)]).then(G.bind(G,8730)).then(c=>c.SolicitarTurnoModule),canActivate:[(c,h)=>{const a=(0,T.f3M)(ke.e),d=(0,T.f3M)(Oe.T);return(0,T.f3M)(le.F0),a.getUserEmail().pipe((0,Ne.w)(S=>{if(S){console.log(S);const B=S,Z=d.usuarios.find(ae=>ae.email==B);if(Z&&"especialista"!=Z.perfil.toLocaleLowerCase())return(0,Te.of)(!0)}return(0,Te.of)(!1)}))}]},{path:"mi-perfil",loadChildren:()=>Promise.all([G.e(700),G.e(140),G.e(592),G.e(227)]).then(G.bind(G,4227)).then(c=>c.MiPerfilModule)},{path:"mis-turnos",loadChildren:()=>G.e(832).then(G.bind(G,6832)).then(c=>c.MisTurnosModule)},{path:"carga-historia-clinica",loadChildren:()=>Promise.all([G.e(700),G.e(140),G.e(957)]).then(G.bind(G,2957)).then(c=>c.CargaHistClinicaModule),canActivate:[(c,h)=>{const a=(0,T.f3M)(ke.e),d=(0,T.f3M)(Oe.T);return(0,T.f3M)(le.F0),a.getUserEmail().pipe((0,Ne.w)(S=>{if(S){console.log(S);const B=S,Z=d.usuarios.find(ae=>ae.email==B);if(Z&&"especialista"==Z.perfil.toLocaleLowerCase())return(0,Te.of)(!0)}return(0,Te.of)(!1)}))}]},{path:"**",component:(()=>{class c{static#e=this.\u0275fac=function(d){return new(d||c)};static#t=this.\u0275cmp=T.Xpm({type:c,selectors:[["app-not-found"]],decls:10,vars:0,consts:[[1,"container"],[1,"text-center","text-dark"],["src","../../../assets/img/not-found.png","alt",""]],template:function(d,m){1&d&&(T.TgZ(0,"body")(1,"div",0),T._UZ(2,"br")(3,"br"),T.TgZ(4,"h1",1),T._uU(5,"P\xe1gina no encontrada"),T.qZA(),T.TgZ(6,"div"),T._UZ(7,"br")(8,"br")(9,"img",2),T.qZA()()())},styles:["body[_ngcontent-%COMP%]{background-color:#49708a;width:100vw;height:100vh;text-align:center}"]})}return c})()}];let st=(()=>{class c{static#e=this.\u0275fac=function(d){return new(d||c)};static#t=this.\u0275mod=T.oAB({type:c});static#n=this.\u0275inj=T.cJS({imports:[le.Bz.forRoot(ht),le.Bz]})}return c})(),Et=(()=>{class c{constructor(){this.title="clinica"}static#e=this.\u0275fac=function(d){return new(d||c)};static#t=this.\u0275cmp=T.Xpm({type:c,selectors:[["app-root"]],decls:1,vars:0,template:function(d,m){1&d&&T._UZ(0,"router-outlet")},dependencies:[le.lC]})}return c})();var mt=G(7217),Ct=G(5592),bt=G(6232),jt=G(8645),Re=G(4829),_e=G(1631),He=G(4266),Pe=G(4674),$e=G(7400);const ot=["addListener","removeListener"],ft=["addEventListener","removeEventListener"],de=["on","off"];function Ot(c,h,a,d){if((0,Pe.m)(a)&&(d=a,a=void 0),d)return Ot(c,h,a).pipe((0,$e.Z)(d));const[m,S]=function Or(c){return(0,Pe.m)(c.addEventListener)&&(0,Pe.m)(c.removeEventListener)}(c)?ft.map(B=>Z=>c[B](h,Z,a)):function Jn(c){return(0,Pe.m)(c.addListener)&&(0,Pe.m)(c.removeListener)}(c)?ot.map(wt(c,h)):function On(c){return(0,Pe.m)(c.on)&&(0,Pe.m)(c.off)}(c)?de.map(wt(c,h)):[];if(!m&&(0,He.z)(c))return(0,_e.z)(B=>Ot(B,h,a))((0,Re.Xf)(c));if(!m)throw new TypeError("Invalid event target");return new Ct.y(B=>{const Z=(...ae)=>B.next(1<ae.length?ae:ae[0]);return m(Z),()=>S(Z)})}function wt(c,h){return a=>d=>c[a](h,d)}var _r=G(6321),tn=G(671);const{isArray:Se}=Array;function Ke(c){return 1===c.length&&Se(c[0])?c[0]:c}var Fe=G(8251);G(3019);var Rt=G(9940);function hr(...c){const h=(0,Rt.jO)(c),a=Ke(c);return a.length?new Ct.y(d=>{let m=a.map(()=>[]),S=a.map(()=>!1);d.add(()=>{m=S=null});for(let B=0;!d.closed&&B<a.length;B++)(0,Re.Xf)(a[B]).subscribe((0,Fe.x)(d,Z=>{if(m[B].push(Z),m.every(ae=>ae.length)){const ae=m.map(pe=>pe.shift());d.next(h?h(...ae):ae),m.some((pe,Ce)=>!pe.length&&S[Ce])&&d.complete()}},()=>{S[B]=!0,!m[B].length&&d.complete()}));return()=>{m=S=null}}):bt.E}var Ut=G(5211),Yt=G(9773),Ln=G(2181),An=G(8180),$n=G(9397),Ee=G(7398),xe=G(9360),ze=G(2737),lt=G(2420);function pt(...c){const h=(0,Rt.jO)(c);return(0,xe.e)((a,d)=>{const m=c.length,S=new Array(m);let B=c.map(()=>!1),Z=!1;for(let ae=0;ae<m;ae++)(0,Re.Xf)(c[ae]).subscribe((0,Fe.x)(d,pe=>{S[ae]=pe,!Z&&!B[ae]&&(B[ae]=!0,(Z=B.every(ze.y))&&(B=null))},lt.Z));a.subscribe((0,Fe.x)(d,ae=>{if(Z){const pe=[ae,...S];d.next(h?h(...pe):pe)}}))})}G(975),G(7921),G(3997);var cn=G(6814);Math,Math,Math;const Il=["*"],ki=["dialog"];function te(c){return"string"==typeof c}function Ze(c){return null!=c}function zi(c){return(c||document.body).getBoundingClientRect()}const va={animation:!0,transitionTimerDelayMs:5},mh=()=>{},{transitionTimerDelayMs:Ts}=va,gu=new Map,Ni=(c,h,a,d)=>{let m=d.context||{};const S=gu.get(h);if(S)switch(d.runningTransition){case"continue":return bt.E;case"stop":c.run(()=>S.transition$.complete()),m=Object.assign(S.context,m),gu.delete(h)}const B=a(h,d.animation,m)||mh;if(!d.animation||"none"===window.getComputedStyle(h).transitionProperty)return c.run(()=>B()),(0,Te.of)(void 0).pipe(function gi(c){return h=>new Ct.y(a=>h.subscribe({next:B=>c.run(()=>a.next(B)),error:B=>c.run(()=>a.error(B)),complete:()=>c.run(()=>a.complete())}))}(c));const Z=new jt.x,ae=new jt.x,pe=Z.pipe(function Kn(...c){return h=>(0,Ut.z)(h,(0,Te.of)(...c))}(!0));gu.set(h,{transition$:Z,complete:()=>{ae.next(),ae.complete()},context:m});const Ce=function Ba(c){const{transitionDelay:h,transitionDuration:a}=window.getComputedStyle(c);return 1e3*(parseFloat(h)+parseFloat(a))}(h);return c.runOutsideAngular(()=>{const rt=Ot(h,"transitionend").pipe((0,Yt.R)(pe),(0,Ln.h)(({target:dt})=>dt===h));(function Ue(...c){return 1===(c=Ke(c)).length?(0,Re.Xf)(c[0]):new Ct.y(function Xe(c){return h=>{let a=[];for(let d=0;a&&!h.closed&&d<c.length;d++)a.push((0,Re.Xf)(c[d]).subscribe((0,Fe.x)(h,m=>{if(a){for(let S=0;S<a.length;S++)S!==d&&a[S].unsubscribe();a=null}h.next(m)})))}}(c))})(function be(c=0,h,a=_r.P){let d=-1;return null!=h&&((0,tn.K)(h)?a=h:d=h),new Ct.y(m=>{let S=function Bt(c){return c instanceof Date&&!isNaN(c)}(c)?+c-a.now():c;S<0&&(S=0);let B=0;return a.schedule(function(){m.closed||(m.next(B++),0<=d?this.schedule(void 0,d):m.complete())},S)})}(Ce+Ts).pipe((0,Yt.R)(pe)),rt,ae).pipe((0,Yt.R)(pe)).subscribe(()=>{gu.delete(h),c.run(()=>{B(),Z.next(),Z.complete()})})}),Z.asObservable()};let Ia=(()=>{class c{constructor(){this.animation=va.animation}static#e=this.\u0275fac=function(d){return new(d||c)};static#t=this.\u0275prov=T.Yz7({token:c,factory:c.\u0275fac,providedIn:"root"})}return c})(),vu=(()=>{class c{static#e=this.\u0275fac=function(d){return new(d||c)};static#t=this.\u0275mod=T.oAB({type:c});static#n=this.\u0275inj=T.cJS({})}return c})(),Go=(()=>{class c{static#e=this.\u0275fac=function(d){return new(d||c)};static#t=this.\u0275mod=T.oAB({type:c});static#n=this.\u0275inj=T.cJS({})}return c})(),Yl=(()=>{class c{static#e=this.\u0275fac=function(d){return new(d||c)};static#t=this.\u0275mod=T.oAB({type:c});static#n=this.\u0275inj=T.cJS({})}return c})(),ai=(()=>{class c{static#e=this.\u0275fac=function(d){return new(d||c)};static#t=this.\u0275mod=T.oAB({type:c});static#n=this.\u0275inj=T.cJS({})}return c})();var qr=function(c){return c[c.Tab=9]="Tab",c[c.Enter=13]="Enter",c[c.Escape=27]="Escape",c[c.Space=32]="Space",c[c.PageUp=33]="PageUp",c[c.PageDown=34]="PageDown",c[c.End=35]="End",c[c.Home=36]="Home",c[c.ArrowLeft=37]="ArrowLeft",c[c.ArrowUp=38]="ArrowUp",c[c.ArrowRight=39]="ArrowRight",c[c.ArrowDown=40]="ArrowDown",c}(qr||{});typeof navigator<"u"&&navigator.userAgent&&(/iPad|iPhone|iPod/.test(navigator.userAgent)||/Macintosh/.test(navigator.userAgent)&&navigator.maxTouchPoints&&navigator.maxTouchPoints>2||/Android/.test(navigator.userAgent));const eu=["a[href]","button:not([disabled])",'input:not([disabled]):not([type="hidden"])',"select:not([disabled])","textarea:not([disabled])","[contenteditable]",'[tabindex]:not([tabindex="-1"])'].join(", ");function yh(c){const h=Array.from(c.querySelectorAll(eu)).filter(a=>-1!==a.tabIndex);return[h[0],h[h.length-1]]}new Date(1882,10,12),new Date(2174,10,25);let Cu=(()=>{class c{static#e=this.\u0275fac=function(d){return new(d||c)};static#t=this.\u0275mod=T.oAB({type:c});static#n=this.\u0275inj=T.cJS({})}return c})(),Gd=(()=>{class c{static#e=this.\u0275fac=function(d){return new(d||c)};static#t=this.\u0275mod=T.oAB({type:c});static#n=this.\u0275inj=T.cJS({})}return c})();class fl{constructor(h,a,d){this.nodes=h,this.viewRef=a,this.componentRef=d}}let cd=(()=>{class c{constructor(a,d){this._el=a,this._zone=d}ngOnInit(){this._zone.onStable.asObservable().pipe((0,An.q)(1)).subscribe(()=>{Ni(this._zone,this._el.nativeElement,(a,d)=>{d&&zi(a),a.classList.add("show")},{animation:this.animation,runningTransition:"continue"})})}hide(){return Ni(this._zone,this._el.nativeElement,({classList:a})=>a.remove("show"),{animation:this.animation,runningTransition:"stop"})}static#e=this.\u0275fac=function(d){return new(d||c)(T.Y36(T.SBq),T.Y36(T.R0b))};static#t=this.\u0275cmp=T.Xpm({type:c,selectors:[["ngb-modal-backdrop"]],hostAttrs:[2,"z-index","1055"],hostVars:6,hostBindings:function(d,m){2&d&&(T.Tol("modal-backdrop"+(m.backdropClass?" "+m.backdropClass:"")),T.ekj("show",!m.animation)("fade",m.animation))},inputs:{animation:"animation",backdropClass:"backdropClass"},standalone:!0,features:[T.jDz],decls:0,vars:0,template:function(d,m){},encapsulation:2})}return c})();class bp{update(h){}close(h){}dismiss(h){}}const wp=["animation","ariaLabelledBy","ariaDescribedBy","backdrop","centered","fullscreen","keyboard","scrollable","size","windowClass","modalDialogClass"],D=["animation","backdropClass"];class g{_applyWindowOptions(h,a){wp.forEach(d=>{Ze(a[d])&&(h[d]=a[d])})}_applyBackdropOptions(h,a){D.forEach(d=>{Ze(a[d])&&(h[d]=a[d])})}update(h){this._applyWindowOptions(this._windowCmptRef.instance,h),this._backdropCmptRef&&this._backdropCmptRef.instance&&this._applyBackdropOptions(this._backdropCmptRef.instance,h)}get componentInstance(){if(this._contentRef&&this._contentRef.componentRef)return this._contentRef.componentRef.instance}get closed(){return this._closed.asObservable().pipe((0,Yt.R)(this._hidden))}get dismissed(){return this._dismissed.asObservable().pipe((0,Yt.R)(this._hidden))}get hidden(){return this._hidden.asObservable()}get shown(){return this._windowCmptRef.instance.shown.asObservable()}constructor(h,a,d,m){this._windowCmptRef=h,this._contentRef=a,this._backdropCmptRef=d,this._beforeDismiss=m,this._closed=new jt.x,this._dismissed=new jt.x,this._hidden=new jt.x,h.instance.dismissEvent.subscribe(S=>{this.dismiss(S)}),this.result=new Promise((S,B)=>{this._resolve=S,this._reject=B}),this.result.then(null,()=>{})}close(h){this._windowCmptRef&&(this._closed.next(h),this._resolve(h),this._removeModalElements())}_dismiss(h){this._dismissed.next(h),this._reject(h),this._removeModalElements()}dismiss(h){if(this._windowCmptRef)if(this._beforeDismiss){const a=this._beforeDismiss();!function Ht(c){return c&&c.then}(a)?!1!==a&&this._dismiss(h):a.then(d=>{!1!==d&&this._dismiss(h)},()=>{})}else this._dismiss(h)}_removeModalElements(){const h=this._windowCmptRef.instance.hide(),a=this._backdropCmptRef?this._backdropCmptRef.instance.hide():(0,Te.of)(void 0);h.subscribe(()=>{const{nativeElement:d}=this._windowCmptRef.location;d.parentNode.removeChild(d),this._windowCmptRef.destroy(),this._contentRef&&this._contentRef.viewRef&&this._contentRef.viewRef.destroy(),this._windowCmptRef=null,this._contentRef=null}),a.subscribe(()=>{if(this._backdropCmptRef){const{nativeElement:d}=this._backdropCmptRef.location;d.parentNode.removeChild(d),this._backdropCmptRef.destroy(),this._backdropCmptRef=null}}),hr(h,a).subscribe(()=>{this._hidden.next(),this._hidden.complete()})}}var v=function(c){return c[c.BACKDROP_CLICK=0]="BACKDROP_CLICK",c[c.ESC=1]="ESC",c}(v||{});let C=(()=>{class c{constructor(a,d,m){this._document=a,this._elRef=d,this._zone=m,this._closed$=new jt.x,this._elWithFocus=null,this.backdrop=!0,this.keyboard=!0,this.dismissEvent=new T.vpe,this.shown=new jt.x,this.hidden=new jt.x}get fullscreenClass(){return!0===this.fullscreen?" modal-fullscreen":te(this.fullscreen)?` modal-fullscreen-${this.fullscreen}-down`:""}dismiss(a){this.dismissEvent.emit(a)}ngOnInit(){this._elWithFocus=this._document.activeElement,this._zone.onStable.asObservable().pipe((0,An.q)(1)).subscribe(()=>{this._show()})}ngOnDestroy(){this._disableEventHandling()}hide(){const{nativeElement:a}=this._elRef,d={animation:this.animation,runningTransition:"stop"},B=hr(Ni(this._zone,a,()=>a.classList.remove("show"),d),Ni(this._zone,this._dialogEl.nativeElement,()=>{},d));return B.subscribe(()=>{this.hidden.next(),this.hidden.complete()}),this._disableEventHandling(),this._restoreFocus(),B}_show(){const a={animation:this.animation,runningTransition:"continue"};hr(Ni(this._zone,this._elRef.nativeElement,(S,B)=>{B&&zi(S),S.classList.add("show")},a),Ni(this._zone,this._dialogEl.nativeElement,()=>{},a)).subscribe(()=>{this.shown.next(),this.shown.complete()}),this._enableEventHandling(),this._setFocus()}_enableEventHandling(){const{nativeElement:a}=this._elRef;this._zone.runOutsideAngular(()=>{Ot(a,"keydown").pipe((0,Yt.R)(this._closed$),(0,Ln.h)(m=>m.which===qr.Escape)).subscribe(m=>{this.keyboard?requestAnimationFrame(()=>{m.defaultPrevented||this._zone.run(()=>this.dismiss(v.ESC))}):"static"===this.backdrop&&this._bumpBackdrop()});let d=!1;Ot(this._dialogEl.nativeElement,"mousedown").pipe((0,Yt.R)(this._closed$),(0,$n.b)(()=>d=!1),(0,Ne.w)(()=>Ot(a,"mouseup").pipe((0,Yt.R)(this._closed$),(0,An.q)(1))),(0,Ln.h)(({target:m})=>a===m)).subscribe(()=>{d=!0}),Ot(a,"click").pipe((0,Yt.R)(this._closed$)).subscribe(({target:m})=>{a===m&&("static"===this.backdrop?this._bumpBackdrop():!0===this.backdrop&&!d&&this._zone.run(()=>this.dismiss(v.BACKDROP_CLICK))),d=!1})})}_disableEventHandling(){this._closed$.next()}_setFocus(){const{nativeElement:a}=this._elRef;if(!a.contains(document.activeElement)){const d=a.querySelector("[ngbAutofocus]"),m=yh(a)[0];(d||m||a).focus()}}_restoreFocus(){const a=this._document.body,d=this._elWithFocus;let m;m=d&&d.focus&&a.contains(d)?d:a,this._zone.runOutsideAngular(()=>{setTimeout(()=>m.focus()),this._elWithFocus=null})}_bumpBackdrop(){"static"===this.backdrop&&Ni(this._zone,this._elRef.nativeElement,({classList:a})=>(a.add("modal-static"),()=>a.remove("modal-static")),{animation:this.animation,runningTransition:"continue"})}static#e=this.\u0275fac=function(d){return new(d||c)(T.Y36(cn.K0),T.Y36(T.SBq),T.Y36(T.R0b))};static#t=this.\u0275cmp=T.Xpm({type:c,selectors:[["ngb-modal-window"]],viewQuery:function(d,m){if(1&d&&T.Gf(ki,7),2&d){let S;T.iGM(S=T.CRH())&&(m._dialogEl=S.first)}},hostAttrs:["role","dialog","tabindex","-1"],hostVars:7,hostBindings:function(d,m){2&d&&(T.uIk("aria-modal",!0)("aria-labelledby",m.ariaLabelledBy)("aria-describedby",m.ariaDescribedBy),T.Tol("modal d-block"+(m.windowClass?" "+m.windowClass:"")),T.ekj("fade",m.animation))},inputs:{animation:"animation",ariaLabelledBy:"ariaLabelledBy",ariaDescribedBy:"ariaDescribedBy",backdrop:"backdrop",centered:"centered",fullscreen:"fullscreen",keyboard:"keyboard",scrollable:"scrollable",size:"size",windowClass:"windowClass",modalDialogClass:"modalDialogClass"},outputs:{dismissEvent:"dismiss"},standalone:!0,features:[T.jDz],ngContentSelectors:Il,decls:4,vars:2,consts:[["role","document"],["dialog",""],[1,"modal-content"]],template:function(d,m){1&d&&(T.F$t(),T.TgZ(0,"div",0,1)(2,"div",2),T.Hsn(3),T.qZA()()),2&d&&T.Tol("modal-dialog"+(m.size?" modal-"+m.size:"")+(m.centered?" modal-dialog-centered":"")+m.fullscreenClass+(m.scrollable?" modal-dialog-scrollable":"")+(m.modalDialogClass?" "+m.modalDialogClass:""))},styles:["ngb-modal-window .component-host-scrollable{display:flex;flex-direction:column;overflow:hidden}\n"],encapsulation:2})}return c})(),$=(()=>{class c{constructor(a){this._document=a}hide(){const a=Math.abs(window.innerWidth-this._document.documentElement.clientWidth),d=this._document.body,m=d.style,{overflow:S,paddingRight:B}=m;if(a>0){const Z=parseFloat(window.getComputedStyle(d).paddingRight);m.paddingRight=`${Z+a}px`}return m.overflow="hidden",()=>{a>0&&(m.paddingRight=B),m.overflow=S}}static#e=this.\u0275fac=function(d){return new(d||c)(T.LFG(cn.K0))};static#t=this.\u0275prov=T.Yz7({token:c,factory:c.\u0275fac,providedIn:"root"})}return c})(),X=(()=>{class c{constructor(a,d,m,S,B,Z,ae){this._applicationRef=a,this._injector=d,this._environmentInjector=m,this._document=S,this._scrollBar=B,this._rendererFactory=Z,this._ngZone=ae,this._activeWindowCmptHasChanged=new jt.x,this._ariaHiddenValues=new Map,this._scrollBarRestoreFn=null,this._modalRefs=[],this._windowCmpts=[],this._activeInstances=new T.vpe,this._activeWindowCmptHasChanged.subscribe(()=>{if(this._windowCmpts.length){const pe=this._windowCmpts[this._windowCmpts.length-1];((c,h,a,d=!1)=>{c.runOutsideAngular(()=>{const m=Ot(h,"focusin").pipe((0,Yt.R)(a),(0,Ee.U)(S=>S.target));Ot(h,"keydown").pipe((0,Yt.R)(a),(0,Ln.h)(S=>S.which===qr.Tab),pt(m)).subscribe(([S,B])=>{const[Z,ae]=yh(h);(B===Z||B===h)&&S.shiftKey&&(ae.focus(),S.preventDefault()),B===ae&&!S.shiftKey&&(Z.focus(),S.preventDefault())}),d&&Ot(h,"click").pipe((0,Yt.R)(a),pt(m),(0,Ee.U)(S=>S[1])).subscribe(S=>S.focus())})})(this._ngZone,pe.location.nativeElement,this._activeWindowCmptHasChanged),this._revertAriaHidden(),this._setAriaHidden(pe.location.nativeElement)}})}_restoreScrollBar(){const a=this._scrollBarRestoreFn;a&&(this._scrollBarRestoreFn=null,a())}_hideScrollBar(){this._scrollBarRestoreFn||(this._scrollBarRestoreFn=this._scrollBar.hide())}open(a,d,m){const S=m.container instanceof HTMLElement?m.container:Ze(m.container)?this._document.querySelector(m.container):this._document.body,B=this._rendererFactory.createRenderer(null,null);if(!S)throw new Error(`The specified modal container "${m.container||"body"}" was not found in the DOM.`);this._hideScrollBar();const Z=new bp,ae=(a=m.injector||a).get(T.lqb,null)||this._environmentInjector,pe=this._getContentRef(a,ae,d,Z,m);let Ce=!1!==m.backdrop?this._attachBackdrop(S):void 0,rt=this._attachWindowComponent(S,pe.nodes),ut=new g(rt,pe,Ce,m.beforeDismiss);return this._registerModalRef(ut),this._registerWindowCmpt(rt),ut.hidden.pipe((0,An.q)(1)).subscribe(()=>Promise.resolve(!0).then(()=>{this._modalRefs.length||(B.removeClass(this._document.body,"modal-open"),this._restoreScrollBar(),this._revertAriaHidden())})),Z.close=dt=>{ut.close(dt)},Z.dismiss=dt=>{ut.dismiss(dt)},Z.update=dt=>{ut.update(dt)},ut.update(m),1===this._modalRefs.length&&B.addClass(this._document.body,"modal-open"),Ce&&Ce.instance&&Ce.changeDetectorRef.detectChanges(),rt.changeDetectorRef.detectChanges(),ut}get activeInstances(){return this._activeInstances}dismissAll(a){this._modalRefs.forEach(d=>d.dismiss(a))}hasOpenModals(){return this._modalRefs.length>0}_attachBackdrop(a){let d=(0,T.LMc)(cd,{environmentInjector:this._applicationRef.injector,elementInjector:this._injector});return this._applicationRef.attachView(d.hostView),a.appendChild(d.location.nativeElement),d}_attachWindowComponent(a,d){let m=(0,T.LMc)(C,{environmentInjector:this._applicationRef.injector,elementInjector:this._injector,projectableNodes:d});return this._applicationRef.attachView(m.hostView),a.appendChild(m.location.nativeElement),m}_getContentRef(a,d,m,S,B){return m?m instanceof T.Rgc?this._createFromTemplateRef(m,S):te(m)?this._createFromString(m):this._createFromComponent(a,d,m,S,B):new fl([])}_createFromTemplateRef(a,d){const S=a.createEmbeddedView({$implicit:d,close(B){d.close(B)},dismiss(B){d.dismiss(B)}});return this._applicationRef.attachView(S),new fl([S.rootNodes],S)}_createFromString(a){const d=this._document.createTextNode(`${a}`);return new fl([[d]])}_createFromComponent(a,d,m,S,B){const Z=T.zs3.create({providers:[{provide:bp,useValue:S}],parent:a}),ae=(0,T.LMc)(m,{environmentInjector:d,elementInjector:Z}),pe=ae.location.nativeElement;return B.scrollable&&pe.classList.add("component-host-scrollable"),this._applicationRef.attachView(ae.hostView),new fl([[pe]],ae.hostView,ae)}_setAriaHidden(a){const d=a.parentElement;d&&a!==this._document.body&&(Array.from(d.children).forEach(m=>{m!==a&&"SCRIPT"!==m.nodeName&&(this._ariaHiddenValues.set(m,m.getAttribute("aria-hidden")),m.setAttribute("aria-hidden","true"))}),this._setAriaHidden(d))}_revertAriaHidden(){this._ariaHiddenValues.forEach((a,d)=>{a?d.setAttribute("aria-hidden",a):d.removeAttribute("aria-hidden")}),this._ariaHiddenValues.clear()}_registerModalRef(a){const d=()=>{const m=this._modalRefs.indexOf(a);m>-1&&(this._modalRefs.splice(m,1),this._activeInstances.emit(this._modalRefs))};this._modalRefs.push(a),this._activeInstances.emit(this._modalRefs),a.result.then(d,d)}_registerWindowCmpt(a){this._windowCmpts.push(a),this._activeWindowCmptHasChanged.next(),a.onDestroy(()=>{const d=this._windowCmpts.indexOf(a);d>-1&&(this._windowCmpts.splice(d,1),this._activeWindowCmptHasChanged.next())})}static#e=this.\u0275fac=function(d){return new(d||c)(T.LFG(T.z2F),T.LFG(T.zs3),T.LFG(T.lqb),T.LFG(cn.K0),T.LFG($),T.LFG(T.FYo),T.LFG(T.R0b))};static#t=this.\u0275prov=T.Yz7({token:c,factory:c.\u0275fac,providedIn:"root"})}return c})(),De=(()=>{class c{constructor(a){this._ngbConfig=a,this.backdrop=!0,this.fullscreen=!1,this.keyboard=!0}get animation(){return void 0===this._animation?this._ngbConfig.animation:this._animation}set animation(a){this._animation=a}static#e=this.\u0275fac=function(d){return new(d||c)(T.LFG(Ia))};static#t=this.\u0275prov=T.Yz7({token:c,factory:c.\u0275fac,providedIn:"root"})}return c})(),We=(()=>{class c{constructor(a,d,m){this._injector=a,this._modalStack=d,this._config=m}open(a,d={}){const m={...this._config,animation:this._config.animation,...d};return this._modalStack.open(this._injector,a,m)}get activeInstances(){return this._modalStack.activeInstances}dismissAll(a){this._modalStack.dismissAll(a)}hasOpenModals(){return this._modalStack.hasOpenModals()}static#e=this.\u0275fac=function(d){return new(d||c)(T.LFG(T.zs3),T.LFG(X),T.LFG(De))};static#t=this.\u0275prov=T.Yz7({token:c,factory:c.\u0275fac,providedIn:"root"})}return c})(),gt=(()=>{class c{static#e=this.\u0275fac=function(d){return new(d||c)};static#t=this.\u0275mod=T.oAB({type:c});static#n=this.\u0275inj=T.cJS({providers:[We]})}return c})(),pl=(()=>{class c{static#e=this.\u0275fac=function(d){return new(d||c)};static#t=this.\u0275mod=T.oAB({type:c});static#n=this.\u0275inj=T.cJS({})}return c})(),wh=(()=>{class c{static#e=this.\u0275fac=function(d){return new(d||c)};static#t=this.\u0275mod=T.oAB({type:c});static#n=this.\u0275inj=T.cJS({})}return c})(),Mg=(()=>{class c{static#e=this.\u0275fac=function(d){return new(d||c)};static#t=this.\u0275mod=T.oAB({type:c});static#n=this.\u0275inj=T.cJS({})}return c})(),xg=(()=>{class c{static#e=this.\u0275fac=function(d){return new(d||c)};static#t=this.\u0275mod=T.oAB({type:c});static#n=this.\u0275inj=T.cJS({})}return c})(),Pl=(()=>{class c{static#e=this.\u0275fac=function(d){return new(d||c)};static#t=this.\u0275mod=T.oAB({type:c});static#n=this.\u0275inj=T.cJS({})}return c})(),Sh=(()=>{class c{static#e=this.\u0275fac=function(d){return new(d||c)};static#t=this.\u0275mod=T.oAB({type:c});static#n=this.\u0275inj=T.cJS({})}return c})(),Rh=(()=>{class c{static#e=this.\u0275fac=function(d){return new(d||c)};static#t=this.\u0275mod=T.oAB({type:c});static#n=this.\u0275inj=T.cJS({})}return c})(),Ym=(()=>{class c{static#e=this.\u0275fac=function(d){return new(d||c)};static#t=this.\u0275mod=T.oAB({type:c});static#n=this.\u0275inj=T.cJS({})}return c})(),xp=(()=>{class c{static#e=this.\u0275fac=function(d){return new(d||c)};static#t=this.\u0275mod=T.oAB({type:c});static#n=this.\u0275inj=T.cJS({})}return c})();new T.OlP("live announcer delay",{providedIn:"root",factory:function Nf(){return 100}});let Pf=(()=>{class c{static#e=this.\u0275fac=function(d){return new(d||c)};static#t=this.\u0275mod=T.oAB({type:c});static#n=this.\u0275inj=T.cJS({})}return c})(),Oh=(()=>{class c{static#e=this.\u0275fac=function(d){return new(d||c)};static#t=this.\u0275mod=T.oAB({type:c});static#n=this.\u0275inj=T.cJS({})}return c})();const Mf=[vu,Go,Yl,ai,Cu,Gd,gt,pl,Oh,wh,Mg,xg,Pl,Sh,Rh,Ym,xp,Pf];let pd=(()=>{class c{static#e=this.\u0275fac=function(d){return new(d||c)};static#t=this.\u0275mod=T.oAB({type:c});static#n=this.\u0275inj=T.cJS({imports:[Mf,vu,Go,Yl,ai,Cu,Gd,gt,pl,Oh,wh,Mg,xg,Pl,Sh,Rh,Ym,xp,Pf]})}return c})();var Fn=G(6825);function Ol(c){return new T.vHH(3e3,!1)}function su(c){switch(c.length){case 0:return new Fn.ZN;case 1:return c[0];default:return new Fn.ZE(c)}}function Vp(c,h,a=new Map,d=new Map){const m=[],S=[];let B=-1,Z=null;if(h.forEach(ae=>{const pe=ae.get("offset"),Ce=pe==B,rt=Ce&&Z||new Map;ae.forEach((ut,dt)=>{let At=dt,Gt=ut;if("offset"!==dt)switch(At=c.normalizePropertyName(At,m),Gt){case Fn.k1:Gt=a.get(dt);break;case Fn.l3:Gt=d.get(dt);break;default:Gt=c.normalizeStyleValue(dt,At,Gt,m)}rt.set(At,Gt)}),Ce||S.push(rt),Z=rt,B=pe}),m.length)throw function gy(c){return new T.vHH(3502,!1)}();return S}function Zd(c,h,a,d){switch(h){case"start":c.onStart(()=>d(a&&Qd(a,"start",c)));break;case"done":c.onDone(()=>d(a&&Qd(a,"done",c)));break;case"destroy":c.onDestroy(()=>d(a&&Qd(a,"destroy",c)))}}function Qd(c,h,a){const S=uc(c.element,c.triggerName,c.fromState,c.toState,h||c.phaseName,a.totalTime??c.totalTime,!!a.disabled),B=c._data;return null!=B&&(S._data=B),S}function uc(c,h,a,d,m="",S=0,B){return{element:c,triggerName:h,fromState:a,toState:d,phaseName:m,totalTime:S,disabled:!!B}}function $a(c,h,a){let d=c.get(h);return d||c.set(h,d=a),d}function o_(c){const h=c.indexOf(":");return[c.substring(1,h),c.slice(h+1)]}const a_=(()=>typeof document>"u"?null:document.documentElement)();function Lf(c){const h=c.parentNode||c.host||null;return h===a_?null:h}let md=null,Vf=!1;function Yg(c,h){for(;h;){if(h===c)return!0;h=Lf(h)}return!1}function l_(c,h,a){if(a)return Array.from(c.querySelectorAll(h));const d=c.querySelector(h);return d?[d]:[]}let Vh=(()=>{class c{validateStyleProperty(a){return function Kg(c){md||(md=function yy(){return typeof document<"u"?document.body:null}()||{},Vf=!!md.style&&"WebkitAppearance"in md.style);let h=!0;return md.style&&!function qg(c){return"ebkit"==c.substring(1,6)}(c)&&(h=c in md.style,!h&&Vf&&(h="Webkit"+c.charAt(0).toUpperCase()+c.slice(1)in md.style)),h}(a)}matchesElement(a,d){return!1}containsElement(a,d){return Yg(a,d)}getParentElement(a){return Lf(a)}query(a,d,m){return l_(a,d,m)}computeStyle(a,d,m){return m||""}animate(a,d,m,S,B,Z=[],ae){return new Fn.ZN(m,S)}static#e=this.\u0275fac=function(d){return new(d||c)};static#t=this.\u0275prov=T.Yz7({token:c,factory:c.\u0275fac})}return c})(),_d=(()=>{class c{static#e=this.NOOP=new Vh}return c})();const Up=1e3,Bc="ng-enter",Bh="ng-leave",yd="ng-trigger",vd=".ng-trigger",Jd="ng-animating",Uc=".ng-animating";function ou(c){if("number"==typeof c)return c;const h=c.match(/^(-?[\.\d]+)(m?s)/);return!h||h.length<2?0:Xd(parseFloat(h[1]),h[2])}function Xd(c,h){return"s"===h?c*Up:c}function cc(c,h,a){return c.hasOwnProperty("duration")?c:function Hp(c,h,a){let m,S=0,B="";if("string"==typeof c){const Z=c.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===Z)return h.push(Ol()),{duration:0,delay:0,easing:""};m=Xd(parseFloat(Z[1]),Z[2]);const ae=Z[3];null!=ae&&(S=Xd(parseFloat(ae),Z[4]));const pe=Z[5];pe&&(B=pe)}else m=c;if(!a){let Z=!1,ae=h.length;m<0&&(h.push(function dy(){return new T.vHH(3100,!1)}()),Z=!0),S<0&&(h.push(function Mh(){return new T.vHH(3101,!1)}()),Z=!0),Z&&h.splice(ae,0,Ol())}return{duration:m,delay:S,easing:B}}(c,h,a)}function dc(c,h={}){return Object.keys(c).forEach(a=>{h[a]=c[a]}),h}function Id(c){const h=new Map;return Object.keys(c).forEach(a=>{h.set(a,c[a])}),h}function jc(c,h=new Map,a){if(a)for(let[d,m]of a)h.set(d,m);for(let[d,m]of c)h.set(d,m);return h}function hc(c,h,a){h.forEach((d,m)=>{const S=Uh(m);a&&!a.has(m)&&a.set(m,c.style[S]),c.style[S]=d})}function fc(c,h){h.forEach((a,d)=>{const m=Uh(d);c.style[m]=""})}function Hc(c){return Array.isArray(c)?1==c.length?c[0]:(0,Fn.vP)(c):c}const Jg=new RegExp("{{\\s*(.+?)\\s*}}","g");function vy(c){let h=[];if("string"==typeof c){let a;for(;a=Jg.exec(c);)h.push(a[1]);Jg.lastIndex=0}return h}function co(c,h,a){const d=c.toString(),m=d.replace(Jg,(S,B)=>{let Z=h[B];return null==Z&&(a.push(function Vc(c){return new T.vHH(3003,!1)}()),Z=""),Z.toString()});return m==d?c:m}function eh(c){const h=[];let a=c.next();for(;!a.done;)h.push(a.value),a=c.next();return h}const Gp=/-+([a-z0-9])/g;function Uh(c){return c.replace(Gp,(...h)=>h[1].toUpperCase())}function Ml(c,h,a){switch(h.type){case 7:return c.visitTrigger(h,a);case 0:return c.visitState(h,a);case 1:return c.visitTransition(h,a);case 2:return c.visitSequence(h,a);case 3:return c.visitGroup(h,a);case 4:return c.visitAnimate(h,a);case 5:return c.visitKeyframes(h,a);case 6:return c.visitStyle(h,a);case 8:return c.visitReference(h,a);case 9:return c.visitAnimateChild(h,a);case 10:return c.visitAnimateRef(h,a);case 11:return c.visitQuery(h,a);case 12:return c.visitStagger(h,a);default:throw function t_(c){return new T.vHH(3004,!1)}()}}function Xg(c,h){return window.getComputedStyle(c)[h]}const Nu="*";function pc(c,h){const a=[];return"string"==typeof c?c.split(/\s*,\s*/).forEach(d=>function tm(c,h,a){if(":"==c[0]){const ae=function $f(c,h){switch(c){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(a,d)=>parseFloat(d)>parseFloat(a);case":decrement":return(a,d)=>parseFloat(d)<parseFloat(a);default:return h.push(function $g(c){return new T.vHH(3016,!1)}()),"* => *"}}(c,a);if("function"==typeof ae)return void h.push(ae);c=ae}const d=c.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==d||d.length<4)return a.push(function Gg(c){return new T.vHH(3015,!1)}()),h;const m=d[1],S=d[2],B=d[3];h.push(nm(m,B));"<"==S[0]&&!(m==Nu&&B==Nu)&&h.push(nm(B,m))}(d,a,h)):a.push(c),a}const Ed=new Set(["true","1"]),jh=new Set(["false","0"]);function nm(c,h){const a=Ed.has(c)||jh.has(c),d=Ed.has(h)||jh.has(h);return(m,S)=>{let B=c==Nu||c==m,Z=h==Nu||h==S;return!B&&a&&"boolean"==typeof m&&(B=m?Ed.has(c):jh.has(c)),!Z&&d&&"boolean"==typeof S&&(Z=S?Ed.has(h):jh.has(h)),B&&Z}}const zp=new RegExp("s*:selfs*,?","g");function au(c,h,a,d){return new Wp(c).build(h,a,d)}class Wp{constructor(h){this._driver=h}build(h,a,d){const m=new rm(a);return this._resetContextStyleTimingState(m),Ml(this,Hc(h),m)}_resetContextStyleTimingState(h){h.currentQuerySelector="",h.collectedStyles=new Map,h.collectedStyles.set("",new Map),h.currentTime=0}visitTrigger(h,a){let d=a.queryCount=0,m=a.depCount=0;const S=[],B=[];return"@"==h.name.charAt(0)&&a.errors.push(function n_(){return new T.vHH(3006,!1)}()),h.definitions.forEach(Z=>{if(this._resetContextStyleTimingState(a),0==Z.type){const ae=Z,pe=ae.name;pe.toString().split(/\s*,\s*/).forEach(Ce=>{ae.name=Ce,S.push(this.visitState(ae,a))}),ae.name=pe}else if(1==Z.type){const ae=this.visitTransition(Z,a);d+=ae.queryCount,m+=ae.depCount,B.push(ae)}else a.errors.push(function fy(){return new T.vHH(3007,!1)}())}),{type:7,name:h.name,states:S,transitions:B,queryCount:d,depCount:m,options:null}}visitState(h,a){const d=this.visitStyle(h.styles,a),m=h.options&&h.options.params||null;if(d.containsDynamicStyles){const S=new Set,B=m||{};d.styles.forEach(Z=>{Z instanceof Map&&Z.forEach(ae=>{vy(ae).forEach(pe=>{B.hasOwnProperty(pe)||S.add(pe)})})}),S.size&&(eh(S.values()),a.errors.push(function jg(c,h){return new T.vHH(3008,!1)}()))}return{type:0,name:h.name,style:d,options:m?{params:m}:null}}visitTransition(h,a){a.queryCount=0,a.depCount=0;const d=Ml(this,Hc(h.animation),a);return{type:1,matchers:pc(h.expr,a.errors),animation:d,queryCount:a.queryCount,depCount:a.depCount,options:Pu(h.options)}}visitSequence(h,a){return{type:2,steps:h.steps.map(d=>Ml(this,d,a)),options:Pu(h.options)}}visitGroup(h,a){const d=a.currentTime;let m=0;const S=h.steps.map(B=>{a.currentTime=d;const Z=Ml(this,B,a);return m=Math.max(m,a.currentTime),Z});return a.currentTime=m,{type:3,steps:S,options:Pu(h.options)}}visitAnimate(h,a){const d=function im(c,h){if(c.hasOwnProperty("duration"))return c;if("number"==typeof c)return Wf(cc(c,h).duration,0,"");const a=c;if(a.split(/\s+/).some(S=>"{"==S.charAt(0)&&"{"==S.charAt(1))){const S=Wf(0,0,"");return S.dynamic=!0,S.strValue=a,S}const m=cc(a,h);return Wf(m.duration,m.delay,m.easing)}(h.timings,a.errors);a.currentAnimateTimings=d;let m,S=h.styles?h.styles:(0,Fn.oB)({});if(5==S.type)m=this.visitKeyframes(S,a);else{let B=h.styles,Z=!1;if(!B){Z=!0;const pe={};d.easing&&(pe.easing=d.easing),B=(0,Fn.oB)(pe)}a.currentTime+=d.duration+d.delay;const ae=this.visitStyle(B,a);ae.isEmptyStep=Z,m=ae}return a.currentAnimateTimings=null,{type:4,timings:d,style:m,options:null}}visitStyle(h,a){const d=this._makeStyleAst(h,a);return this._validateStyleAst(d,a),d}_makeStyleAst(h,a){const d=[],m=Array.isArray(h.styles)?h.styles:[h.styles];for(let Z of m)"string"==typeof Z?Z===Fn.l3?d.push(Z):a.errors.push(new T.vHH(3002,!1)):d.push(Id(Z));let S=!1,B=null;return d.forEach(Z=>{if(Z instanceof Map&&(Z.has("easing")&&(B=Z.get("easing"),Z.delete("easing")),!S))for(let ae of Z.values())if(ae.toString().indexOf("{{")>=0){S=!0;break}}),{type:6,styles:d,easing:B,offset:h.offset,containsDynamicStyles:S,options:null}}_validateStyleAst(h,a){const d=a.currentAnimateTimings;let m=a.currentTime,S=a.currentTime;d&&S>0&&(S-=d.duration+d.delay),h.styles.forEach(B=>{"string"!=typeof B&&B.forEach((Z,ae)=>{const pe=a.collectedStyles.get(a.currentQuerySelector),Ce=pe.get(ae);let rt=!0;Ce&&(S!=m&&S>=Ce.startTime&&m<=Ce.endTime&&(a.errors.push(function xh(c,h,a,d,m){return new T.vHH(3010,!1)}()),rt=!1),S=Ce.startTime),rt&&pe.set(ae,{startTime:S,endTime:m}),a.options&&function Qg(c,h,a){const d=h.params||{},m=vy(c);m.length&&m.forEach(S=>{d.hasOwnProperty(S)||a.push(function kp(c){return new T.vHH(3001,!1)}())})}(Z,a.options,a.errors)})})}visitKeyframes(h,a){const d={type:5,styles:[],options:null};if(!a.currentAnimateTimings)return a.errors.push(function xf(){return new T.vHH(3011,!1)}()),d;let S=0;const B=[];let Z=!1,ae=!1,pe=0;const Ce=h.steps.map(Pn=>{const xn=this._makeStyleAst(Pn,a);let mr=null!=xn.offset?xn.offset:function c_(c){if("string"==typeof c)return null;let h=null;if(Array.isArray(c))c.forEach(a=>{if(a instanceof Map&&a.has("offset")){const d=a;h=parseFloat(d.get("offset")),d.delete("offset")}});else if(c instanceof Map&&c.has("offset")){const a=c;h=parseFloat(a.get("offset")),a.delete("offset")}return h}(xn.styles),Nn=0;return null!=mr&&(S++,Nn=xn.offset=mr),ae=ae||Nn<0||Nn>1,Z=Z||Nn<pe,pe=Nn,B.push(Nn),xn});ae&&a.errors.push(function Hg(){return new T.vHH(3012,!1)}()),Z&&a.errors.push(function i_(){return new T.vHH(3200,!1)}());const rt=h.steps.length;let ut=0;S>0&&S<rt?a.errors.push(function Fp(){return new T.vHH(3202,!1)}()):0==S&&(ut=1/(rt-1));const dt=rt-1,At=a.currentTime,Gt=a.currentAnimateTimings,en=Gt.duration;return Ce.forEach((Pn,xn)=>{const mr=ut>0?xn==dt?1:ut*xn:B[xn],Nn=mr*en;a.currentTime=At+Gt.delay+Nn,Gt.duration=Nn,this._validateStyleAst(Pn,a),Pn.offset=mr,d.styles.push(Pn)}),d}visitReference(h,a){return{type:8,animation:Ml(this,Hc(h.animation),a),options:Pu(h.options)}}visitAnimateChild(h,a){return a.depCount++,{type:9,options:Pu(h.options)}}visitAnimateRef(h,a){return{type:10,animation:this.visitReference(h.animation,a),options:Pu(h.options)}}visitQuery(h,a){const d=a.currentQuerySelector,m=h.options||{};a.queryCount++,a.currentQuery=h;const[S,B]=function qp(c){const h=!!c.split(/\s*,\s*/).find(a=>":self"==a);return h&&(c=c.replace(zp,"")),c=c.replace(/@\*/g,vd).replace(/@\w+/g,a=>vd+"-"+a.slice(1)).replace(/:animating/g,Uc),[c,h]}(h.selector);a.currentQuerySelector=d.length?d+" "+S:S,$a(a.collectedStyles,a.currentQuerySelector,new Map);const Z=Ml(this,Hc(h.animation),a);return a.currentQuery=null,a.currentQuerySelector=d,{type:11,selector:S,limit:m.limit||0,optional:!!m.optional,includeSelf:B,animation:Z,originalSelector:h.selector,options:Pu(h.options)}}visitStagger(h,a){a.currentQuery||a.errors.push(function gd(){return new T.vHH(3013,!1)}());const d="full"===h.timings?{duration:0,delay:0,easing:"full"}:cc(h.timings,a.errors,!0);return{type:12,animation:Ml(this,Hc(h.animation),a),timings:d,options:null}}}class rm{constructor(h){this.errors=h,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles=new Map,this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function Pu(c){return c?(c=dc(c)).params&&(c.params=function Ty(c){return c?dc(c):null}(c.params)):c={},c}function Wf(c,h,a){return{duration:c,delay:h,easing:a}}function Kp(c,h,a,d,m,S,B=null,Z=!1){return{type:1,element:c,keyframes:h,preStyleProps:a,postStyleProps:d,duration:m,delay:S,totalTime:m+S,easing:B,subTimeline:Z}}class Td{constructor(){this._map=new Map}get(h){return this._map.get(h)||[]}append(h,a){let d=this._map.get(h);d||this._map.set(h,d=[]),d.push(...a)}has(h){return this._map.has(h)}clear(){this._map.clear()}}const Ou=new RegExp(":enter","g"),by=new RegExp(":leave","g");function qf(c,h,a,d,m,S=new Map,B=new Map,Z,ae,pe=[]){return(new gc).buildKeyframes(c,h,a,d,m,S,B,Z,ae,pe)}class gc{buildKeyframes(h,a,d,m,S,B,Z,ae,pe,Ce=[]){pe=pe||new Td;const rt=new Kf(h,a,pe,m,S,Ce,[]);rt.options=ae;const ut=ae.delay?ou(ae.delay):0;rt.currentTimeline.delayNextStep(ut),rt.currentTimeline.setStyles([B],null,rt.errors,ae),Ml(this,d,rt);const dt=rt.timelines.filter(At=>At.containsAnimation());if(dt.length&&Z.size){let At;for(let Gt=dt.length-1;Gt>=0;Gt--){const en=dt[Gt];if(en.element===a){At=en;break}}At&&!At.allowOnlyTimelineStyles()&&At.setStyles([Z],null,rt.errors,ae)}return dt.length?dt.map(At=>At.buildKeyframes()):[Kp(a,[],[],[],0,ut,"",!1)]}visitTrigger(h,a){}visitState(h,a){}visitTransition(h,a){}visitAnimateChild(h,a){const d=a.subInstructions.get(a.element);if(d){const m=a.createSubContext(h.options),S=a.currentTimeline.currentTime,B=this._visitSubInstructions(d,m,m.options);S!=B&&a.transformIntoNewTimeline(B)}a.previousNode=h}visitAnimateRef(h,a){const d=a.createSubContext(h.options);d.transformIntoNewTimeline(),this._applyAnimationRefDelays([h.options,h.animation.options],a,d),this.visitReference(h.animation,d),a.transformIntoNewTimeline(d.currentTimeline.currentTime),a.previousNode=h}_applyAnimationRefDelays(h,a,d){for(const m of h){const S=m?.delay;if(S){const B="number"==typeof S?S:ou(co(S,m?.params??{},a.errors));d.delayNextStep(B)}}}_visitSubInstructions(h,a,d){let S=a.currentTimeline.currentTime;const B=null!=d.duration?ou(d.duration):null,Z=null!=d.delay?ou(d.delay):null;return 0!==B&&h.forEach(ae=>{const pe=a.appendInstructionToTimeline(ae,B,Z);S=Math.max(S,pe.duration+pe.delay)}),S}visitReference(h,a){a.updateOptions(h.options,!0),Ml(this,h.animation,a),a.previousNode=h}visitSequence(h,a){const d=a.subContextCount;let m=a;const S=h.options;if(S&&(S.params||S.delay)&&(m=a.createSubContext(S),m.transformIntoNewTimeline(),null!=S.delay)){6==m.previousNode.type&&(m.currentTimeline.snapshotCurrentStyles(),m.previousNode=bd);const B=ou(S.delay);m.delayNextStep(B)}h.steps.length&&(h.steps.forEach(B=>Ml(this,B,m)),m.currentTimeline.applyStylesToKeyframe(),m.subContextCount>d&&m.transformIntoNewTimeline()),a.previousNode=h}visitGroup(h,a){const d=[];let m=a.currentTimeline.currentTime;const S=h.options&&h.options.delay?ou(h.options.delay):0;h.steps.forEach(B=>{const Z=a.createSubContext(h.options);S&&Z.delayNextStep(S),Ml(this,B,Z),m=Math.max(m,Z.currentTimeline.currentTime),d.push(Z.currentTimeline)}),d.forEach(B=>a.currentTimeline.mergeTimelineCollectedStyles(B)),a.transformIntoNewTimeline(m),a.previousNode=h}_visitTiming(h,a){if(h.dynamic){const d=h.strValue;return cc(a.params?co(d,a.params,a.errors):d,a.errors)}return{duration:h.duration,delay:h.delay,easing:h.easing}}visitAnimate(h,a){const d=a.currentAnimateTimings=this._visitTiming(h.timings,a),m=a.currentTimeline;d.delay&&(a.incrementTime(d.delay),m.snapshotCurrentStyles());const S=h.style;5==S.type?this.visitKeyframes(S,a):(a.incrementTime(d.duration),this.visitStyle(S,a),m.applyStylesToKeyframe()),a.currentAnimateTimings=null,a.previousNode=h}visitStyle(h,a){const d=a.currentTimeline,m=a.currentAnimateTimings;!m&&d.hasCurrentStyleProperties()&&d.forwardFrame();const S=m&&m.easing||h.easing;h.isEmptyStep?d.applyEmptyStep(S):d.setStyles(h.styles,S,a.errors,a.options),a.previousNode=h}visitKeyframes(h,a){const d=a.currentAnimateTimings,m=a.currentTimeline.duration,S=d.duration,Z=a.createSubContext().currentTimeline;Z.easing=d.easing,h.styles.forEach(ae=>{Z.forwardTime((ae.offset||0)*S),Z.setStyles(ae.styles,ae.easing,a.errors,a.options),Z.applyStylesToKeyframe()}),a.currentTimeline.mergeTimelineCollectedStyles(Z),a.transformIntoNewTimeline(m+S),a.previousNode=h}visitQuery(h,a){const d=a.currentTimeline.currentTime,m=h.options||{},S=m.delay?ou(m.delay):0;S&&(6===a.previousNode.type||0==d&&a.currentTimeline.hasCurrentStyleProperties())&&(a.currentTimeline.snapshotCurrentStyles(),a.previousNode=bd);let B=d;const Z=a.invokeQuery(h.selector,h.originalSelector,h.limit,h.includeSelf,!!m.optional,a.errors);a.currentQueryTotal=Z.length;let ae=null;Z.forEach((pe,Ce)=>{a.currentQueryIndex=Ce;const rt=a.createSubContext(h.options,pe);S&&rt.delayNextStep(S),pe===a.element&&(ae=rt.currentTimeline),Ml(this,h.animation,rt),rt.currentTimeline.applyStylesToKeyframe(),B=Math.max(B,rt.currentTimeline.currentTime)}),a.currentQueryIndex=0,a.currentQueryTotal=0,a.transformIntoNewTimeline(B),ae&&(a.currentTimeline.mergeTimelineCollectedStyles(ae),a.currentTimeline.snapshotCurrentStyles()),a.previousNode=h}visitStagger(h,a){const d=a.parentContext,m=a.currentTimeline,S=h.timings,B=Math.abs(S.duration),Z=B*(a.currentQueryTotal-1);let ae=B*a.currentQueryIndex;switch(S.duration<0?"reverse":S.easing){case"reverse":ae=Z-ae;break;case"full":ae=d.currentStaggerTime}const Ce=a.currentTimeline;ae&&Ce.delayNextStep(ae);const rt=Ce.currentTime;Ml(this,h.animation,a),a.previousNode=h,d.currentStaggerTime=m.currentTime-rt+(m.startTime-d.currentTimeline.startTime)}}const bd={};class Kf{constructor(h,a,d,m,S,B,Z,ae){this._driver=h,this.element=a,this.subInstructions=d,this._enterClassName=m,this._leaveClassName=S,this.errors=B,this.timelines=Z,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=bd,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=ae||new Zp(this._driver,a,0),Z.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(h,a){if(!h)return;const d=h;let m=this.options;null!=d.duration&&(m.duration=ou(d.duration)),null!=d.delay&&(m.delay=ou(d.delay));const S=d.params;if(S){let B=m.params;B||(B=this.options.params={}),Object.keys(S).forEach(Z=>{(!a||!B.hasOwnProperty(Z))&&(B[Z]=co(S[Z],B,this.errors))})}}_copyOptions(){const h={};if(this.options){const a=this.options.params;if(a){const d=h.params={};Object.keys(a).forEach(m=>{d[m]=a[m]})}}return h}createSubContext(h=null,a,d){const m=a||this.element,S=new Kf(this._driver,m,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(m,d||0));return S.previousNode=this.previousNode,S.currentAnimateTimings=this.currentAnimateTimings,S.options=this._copyOptions(),S.updateOptions(h),S.currentQueryIndex=this.currentQueryIndex,S.currentQueryTotal=this.currentQueryTotal,S.parentContext=this,this.subContextCount++,S}transformIntoNewTimeline(h){return this.previousNode=bd,this.currentTimeline=this.currentTimeline.fork(this.element,h),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(h,a,d){const m={duration:a??h.duration,delay:this.currentTimeline.currentTime+(d??0)+h.delay,easing:""},S=new om(this._driver,h.element,h.keyframes,h.preStyleProps,h.postStyleProps,m,h.stretchStartingKeyframe);return this.timelines.push(S),m}incrementTime(h){this.currentTimeline.forwardTime(this.currentTimeline.duration+h)}delayNextStep(h){h>0&&this.currentTimeline.delayNextStep(h)}invokeQuery(h,a,d,m,S,B){let Z=[];if(m&&Z.push(this.element),h.length>0){h=(h=h.replace(Ou,"."+this._enterClassName)).replace(by,"."+this._leaveClassName);let pe=this._driver.query(this.element,h,1!=d);0!==d&&(pe=d<0?pe.slice(pe.length+d,pe.length):pe.slice(0,d)),Z.push(...pe)}return!S&&0==Z.length&&B.push(function kf(c){return new T.vHH(3014,!1)}()),Z}}class Zp{constructor(h,a,d,m){this._driver=h,this.element=a,this.startTime=d,this._elementTimelineStylesLookup=m,this.duration=0,this.easing=null,this._previousKeyframe=new Map,this._currentKeyframe=new Map,this._keyframes=new Map,this._styleSummary=new Map,this._localTimelineStyles=new Map,this._pendingStyles=new Map,this._backFill=new Map,this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(a),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(a,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(h){const a=1===this._keyframes.size&&this._pendingStyles.size;this.duration||a?(this.forwardTime(this.currentTime+h),a&&this.snapshotCurrentStyles()):this.startTime+=h}fork(h,a){return this.applyStylesToKeyframe(),new Zp(this._driver,h,a||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(h){this.applyStylesToKeyframe(),this.duration=h,this._loadKeyframe()}_updateStyle(h,a){this._localTimelineStyles.set(h,a),this._globalTimelineStyles.set(h,a),this._styleSummary.set(h,{time:this.currentTime,value:a})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(h){h&&this._previousKeyframe.set("easing",h);for(let[a,d]of this._globalTimelineStyles)this._backFill.set(a,d||Fn.l3),this._currentKeyframe.set(a,Fn.l3);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(h,a,d,m){a&&this._previousKeyframe.set("easing",a);const S=m&&m.params||{},B=function lu(c,h){const a=new Map;let d;return c.forEach(m=>{if("*"===m){d=d||h.keys();for(let S of d)a.set(S,Fn.l3)}else jc(m,a)}),a}(h,this._globalTimelineStyles);for(let[Z,ae]of B){const pe=co(ae,S,d);this._pendingStyles.set(Z,pe),this._localTimelineStyles.has(Z)||this._backFill.set(Z,this._globalTimelineStyles.get(Z)??Fn.l3),this._updateStyle(Z,pe)}}applyStylesToKeyframe(){0!=this._pendingStyles.size&&(this._pendingStyles.forEach((h,a)=>{this._currentKeyframe.set(a,h)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((h,a)=>{this._currentKeyframe.has(a)||this._currentKeyframe.set(a,h)}))}snapshotCurrentStyles(){for(let[h,a]of this._localTimelineStyles)this._pendingStyles.set(h,a),this._updateStyle(h,a)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const h=[];for(let a in this._currentKeyframe)h.push(a);return h}mergeTimelineCollectedStyles(h){h._styleSummary.forEach((a,d)=>{const m=this._styleSummary.get(d);(!m||a.time>m.time)&&this._updateStyle(d,a.value)})}buildKeyframes(){this.applyStylesToKeyframe();const h=new Set,a=new Set,d=1===this._keyframes.size&&0===this.duration;let m=[];this._keyframes.forEach((Z,ae)=>{const pe=jc(Z,new Map,this._backFill);pe.forEach((Ce,rt)=>{Ce===Fn.k1?h.add(rt):Ce===Fn.l3&&a.add(rt)}),d||pe.set("offset",ae/this.duration),m.push(pe)});const S=h.size?eh(h.values()):[],B=a.size?eh(a.values()):[];if(d){const Z=m[0],ae=new Map(Z);Z.set("offset",0),ae.set("offset",1),m=[Z,ae]}return Kp(this.element,m,S,B,this.duration,this.startTime,this.easing,!1)}}class om extends Zp{constructor(h,a,d,m,S,B,Z=!1){super(h,a,B.delay),this.keyframes=d,this.preStyleProps=m,this.postStyleProps=S,this._stretchStartingKeyframe=Z,this.timings={duration:B.duration,delay:B.delay,easing:B.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let h=this.keyframes,{delay:a,duration:d,easing:m}=this.timings;if(this._stretchStartingKeyframe&&a){const S=[],B=d+a,Z=a/B,ae=jc(h[0]);ae.set("offset",0),S.push(ae);const pe=jc(h[0]);pe.set("offset",Qp(Z)),S.push(pe);const Ce=h.length-1;for(let rt=1;rt<=Ce;rt++){let ut=jc(h[rt]);const dt=ut.get("offset");ut.set("offset",Qp((a+dt*d)/B)),S.push(ut)}d=B,a=0,m="",h=S}return Kp(this.element,h,this.preStyleProps,this.postStyleProps,d,a,m,!0)}}function Qp(c,h=3){const a=Math.pow(10,h-1);return Math.round(c*a)/a}class Yf{}const ho=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]);class Hh extends Yf{normalizePropertyName(h,a){return Uh(h)}normalizeStyleValue(h,a,d,m){let S="";const B=d.toString().trim();if(ho.has(a)&&0!==d&&"0"!==d)if("number"==typeof d)S="px";else{const Z=d.match(/^[+-]?[\d\.]+([a-z]*)$/);Z&&0==Z[1].length&&m.push(function hy(c,h){return new T.vHH(3005,!1)}())}return B+S}}function Mu(c,h,a,d,m,S,B,Z,ae,pe,Ce,rt,ut){return{type:0,element:c,triggerName:h,isRemovalTransition:m,fromState:a,fromStyles:S,toState:d,toStyles:B,timelines:Z,queriedElements:ae,preStyleProps:pe,postStyleProps:Ce,totalTime:rt,errors:ut}}const Zf={};class th{constructor(h,a,d){this._triggerName=h,this.ast=a,this._stateStyles=d}match(h,a,d,m){return function am(c,h,a,d,m){return c.some(S=>S(h,a,d,m))}(this.ast.matchers,h,a,d,m)}buildStyles(h,a,d){let m=this._stateStyles.get("*");return void 0!==h&&(m=this._stateStyles.get(h?.toString())||m),m?m.buildStyles(a,d):new Map}build(h,a,d,m,S,B,Z,ae,pe,Ce){const rt=[],ut=this.ast.options&&this.ast.options.params||Zf,At=this.buildStyles(d,Z&&Z.params||Zf,rt),Gt=ae&&ae.params||Zf,en=this.buildStyles(m,Gt,rt),Pn=new Set,xn=new Map,mr=new Map,Nn="void"===m,Ir={params:rh(Gt,ut),delay:this.ast.options?.delay},er=Ce?[]:qf(h,a,this.ast.animation,S,B,At,en,Ir,pe,rt);let Nr=0;if(er.forEach(Oi=>{Nr=Math.max(Oi.duration+Oi.delay,Nr)}),rt.length)return Mu(a,this._triggerName,d,m,Nn,At,en,[],[],xn,mr,Nr,rt);er.forEach(Oi=>{const ri=Oi.element,Ys=$a(xn,ri,new Set);Oi.preStyleProps.forEach(Ii=>Ys.add(Ii));const Ro=$a(mr,ri,new Set);Oi.postStyleProps.forEach(Ii=>Ro.add(Ii)),ri!==a&&Pn.add(ri)});const Vr=eh(Pn.values());return Mu(a,this._triggerName,d,m,Nn,At,en,er,Vr,xn,mr,Nr)}}function rh(c,h){const a=dc(h);for(const d in c)c.hasOwnProperty(d)&&null!=c[d]&&(a[d]=c[d]);return a}class Dy{constructor(h,a,d){this.styles=h,this.defaultParams=a,this.normalizer=d}buildStyles(h,a){const d=new Map,m=dc(this.defaultParams);return Object.keys(h).forEach(S=>{const B=h[S];null!==B&&(m[S]=B)}),this.styles.styles.forEach(S=>{"string"!=typeof S&&S.forEach((B,Z)=>{B&&(B=co(B,m,a));const ae=this.normalizer.normalizePropertyName(Z,a);B=this.normalizer.normalizeStyleValue(Z,ae,B,a),d.set(Z,B)})}),d}}class Jp{constructor(h,a,d){this.name=h,this.ast=a,this._normalizer=d,this.transitionFactories=[],this.states=new Map,a.states.forEach(m=>{this.states.set(m.name,new Dy(m.style,m.options&&m.options.params||{},d))}),Xp(this.states,"true","1"),Xp(this.states,"false","0"),a.transitions.forEach(m=>{this.transitionFactories.push(new th(h,m,this.states))}),this.fallbackTransition=function lm(c,h,a){return new th(c,{type:1,animation:{type:2,steps:[],options:null},matchers:[(B,Z)=>!0],options:null,queryCount:0,depCount:0},h)}(h,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(h,a,d,m){return this.transitionFactories.find(B=>B.match(h,a,d,m))||null}matchStyles(h,a,d){return this.fallbackTransition.buildStyles(h,a,d)}}function Xp(c,h,a){c.has(h)?c.has(a)||c.set(a,c.get(h)):c.has(a)&&c.set(h,c.get(a))}const eg=new Td;class p_{constructor(h,a,d){this.bodyNode=h,this._driver=a,this._normalizer=d,this._animations=new Map,this._playersById=new Map,this.players=[]}register(h,a){const d=[],S=au(this._driver,a,d,[]);if(d.length)throw function Ff(c){return new T.vHH(3503,!1)}();this._animations.set(h,S)}_buildPlayer(h,a,d){const m=h.element,S=Vp(this._normalizer,h.keyframes,a,d);return this._driver.animate(m,S,h.duration,h.delay,h.easing,[],!0)}create(h,a,d={}){const m=[],S=this._animations.get(h);let B;const Z=new Map;if(S?(B=qf(this._driver,a,S,Bc,Bh,new Map,new Map,d,eg,m),B.forEach(Ce=>{const rt=$a(Z,Ce.element,new Map);Ce.postStyleProps.forEach(ut=>rt.set(ut,null))})):(m.push(function So(){return new T.vHH(3300,!1)}()),B=[]),m.length)throw function s_(c){return new T.vHH(3504,!1)}();Z.forEach((Ce,rt)=>{Ce.forEach((ut,dt)=>{Ce.set(dt,this._driver.computeStyle(rt,dt,Fn.l3))})});const pe=su(B.map(Ce=>{const rt=Z.get(Ce.element);return this._buildPlayer(Ce,new Map,rt)}));return this._playersById.set(h,pe),pe.onDestroy(()=>this.destroy(h)),this.players.push(pe),pe}destroy(h){const a=this._getPlayer(h);a.destroy(),this._playersById.delete(h);const d=this.players.indexOf(a);d>=0&&this.players.splice(d,1)}_getPlayer(h){const a=this._playersById.get(h);if(!a)throw function Kd(c){return new T.vHH(3301,!1)}();return a}listen(h,a,d,m){const S=uc(a,"","","");return Zd(this._getPlayer(h),d,S,m),()=>{}}command(h,a,d,m){if("register"==d)return void this.register(h,m[0]);if("create"==d)return void this.create(h,a,m[0]||{});const S=this._getPlayer(h);switch(d){case"play":S.play();break;case"pause":S.pause();break;case"reset":S.reset();break;case"restart":S.restart();break;case"finish":S.finish();break;case"init":S.init();break;case"setPosition":S.setPosition(parseFloat(m[0]));break;case"destroy":this.destroy(h)}}}const ih="ng-animate-queued",mc="ng-animate-disabled",um=[],Qf={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},Gh={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},za="__ng_removed";class tg{get params(){return this.options.params}constructor(h,a=""){this.namespaceId=a;const d=h&&h.hasOwnProperty("value");if(this.value=function wv(c){return c??null}(d?h.value:h),d){const S=dc(h);delete S.value,this.options=S}else this.options={};this.options.params||(this.options.params={})}absorbOptions(h){const a=h.params;if(a){const d=this.options.params;Object.keys(a).forEach(m=>{null==d[m]&&(d[m]=a[m])})}}}const $h="void",cm=new tg($h);class Ay{constructor(h,a,d){this.id=h,this.hostElement=a,this._engine=d,this.players=[],this._triggers=new Map,this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+h,uu(a,this._hostClassName)}listen(h,a,d,m){if(!this._triggers.has(a))throw function my(c,h){return new T.vHH(3302,!1)}();if(null==d||0==d.length)throw function Wg(c){return new T.vHH(3303,!1)}();if(!function Dv(c){return"start"==c||"done"==c}(d))throw function kh(c,h){return new T.vHH(3400,!1)}();const S=$a(this._elementListeners,h,[]),B={name:a,phase:d,callback:m};S.push(B);const Z=$a(this._engine.statesByElement,h,new Map);return Z.has(a)||(uu(h,yd),uu(h,yd+"-"+a),Z.set(a,cm)),()=>{this._engine.afterFlush(()=>{const ae=S.indexOf(B);ae>=0&&S.splice(ae,1),this._triggers.has(a)||Z.delete(a)})}}register(h,a){return!this._triggers.has(h)&&(this._triggers.set(h,a),!0)}_getTrigger(h){const a=this._triggers.get(h);if(!a)throw function _y(c){return new T.vHH(3401,!1)}();return a}trigger(h,a,d,m=!0){const S=this._getTrigger(a),B=new Jf(this.id,a,h);let Z=this._engine.statesByElement.get(h);Z||(uu(h,yd),uu(h,yd+"-"+a),this._engine.statesByElement.set(h,Z=new Map));let ae=Z.get(a);const pe=new tg(d,this.id);if(!(d&&d.hasOwnProperty("value"))&&ae&&pe.absorbOptions(ae.options),Z.set(a,pe),ae||(ae=cm),pe.value!==$h&&ae.value===pe.value){if(!function y_(c,h){const a=Object.keys(c),d=Object.keys(h);if(a.length!=d.length)return!1;for(let m=0;m<a.length;m++){const S=a[m];if(!h.hasOwnProperty(S)||c[S]!==h[S])return!1}return!0}(ae.params,pe.params)){const Gt=[],en=S.matchStyles(ae.value,ae.params,Gt),Pn=S.matchStyles(pe.value,pe.params,Gt);Gt.length?this._engine.reportError(Gt):this._engine.afterFlush(()=>{fc(h,en),hc(h,Pn)})}return}const ut=$a(this._engine.playersByElement,h,[]);ut.forEach(Gt=>{Gt.namespaceId==this.id&&Gt.triggerName==a&&Gt.queued&&Gt.destroy()});let dt=S.matchTransition(ae.value,pe.value,h,pe.params),At=!1;if(!dt){if(!m)return;dt=S.fallbackTransition,At=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:h,triggerName:a,transition:dt,fromState:ae,toState:pe,player:B,isFallbackTransition:At}),At||(uu(h,ih),B.onStart(()=>{Gc(h,ih)})),B.onDone(()=>{let Gt=this.players.indexOf(B);Gt>=0&&this.players.splice(Gt,1);const en=this._engine.playersByElement.get(h);if(en){let Pn=en.indexOf(B);Pn>=0&&en.splice(Pn,1)}}),this.players.push(B),ut.push(B),B}deregister(h){this._triggers.delete(h),this._engine.statesByElement.forEach(a=>a.delete(h)),this._elementListeners.forEach((a,d)=>{this._elementListeners.set(d,a.filter(m=>m.name!=h))})}clearElementCache(h){this._engine.statesByElement.delete(h),this._elementListeners.delete(h);const a=this._engine.playersByElement.get(h);a&&(a.forEach(d=>d.destroy()),this._engine.playersByElement.delete(h))}_signalRemovalForInnerTriggers(h,a){const d=this._engine.driver.query(h,vd,!0);d.forEach(m=>{if(m[za])return;const S=this._engine.fetchNamespacesByElement(m);S.size?S.forEach(B=>B.triggerLeaveAnimation(m,a,!1,!0)):this.clearElementCache(m)}),this._engine.afterFlushAnimationsDone(()=>d.forEach(m=>this.clearElementCache(m)))}triggerLeaveAnimation(h,a,d,m){const S=this._engine.statesByElement.get(h),B=new Map;if(S){const Z=[];if(S.forEach((ae,pe)=>{if(B.set(pe,ae.value),this._triggers.has(pe)){const Ce=this.trigger(h,pe,$h,m);Ce&&Z.push(Ce)}}),Z.length)return this._engine.markElementAsRemoved(this.id,h,!0,a,B),d&&su(Z).onDone(()=>this._engine.processLeaveNode(h)),!0}return!1}prepareLeaveAnimationListeners(h){const a=this._elementListeners.get(h),d=this._engine.statesByElement.get(h);if(a&&d){const m=new Set;a.forEach(S=>{const B=S.name;if(m.has(B))return;m.add(B);const ae=this._triggers.get(B).fallbackTransition,pe=d.get(B)||cm,Ce=new tg($h),rt=new Jf(this.id,B,h);this._engine.totalQueuedPlayers++,this._queue.push({element:h,triggerName:B,transition:ae,fromState:pe,toState:Ce,player:rt,isFallbackTransition:!0})})}}removeNode(h,a){const d=this._engine;if(h.childElementCount&&this._signalRemovalForInnerTriggers(h,a),this.triggerLeaveAnimation(h,a,!0))return;let m=!1;if(d.totalAnimations){const S=d.players.length?d.playersByQueriedElement.get(h):[];if(S&&S.length)m=!0;else{let B=h;for(;B=B.parentNode;)if(d.statesByElement.get(B)){m=!0;break}}}if(this.prepareLeaveAnimationListeners(h),m)d.markElementAsRemoved(this.id,h,!1,a);else{const S=h[za];(!S||S===Qf)&&(d.afterFlush(()=>this.clearElementCache(h)),d.destroyInnerAnimations(h),d._onRemovalComplete(h,a))}}insertNode(h,a){uu(h,this._hostClassName)}drainQueuedTransitions(h){const a=[];return this._queue.forEach(d=>{const m=d.player;if(m.destroyed)return;const S=d.element,B=this._elementListeners.get(S);B&&B.forEach(Z=>{if(Z.name==d.triggerName){const ae=uc(S,d.triggerName,d.fromState.value,d.toState.value);ae._data=h,Zd(d.player,Z.phase,ae,Z.callback)}}),m.markedForDestroy?this._engine.afterFlush(()=>{m.destroy()}):a.push(d)}),this._queue=[],a.sort((d,m)=>{const S=d.transition.ast.depCount,B=m.transition.ast.depCount;return 0==S||0==B?S-B:this._engine.driver.containsElement(d.element,m.element)?1:-1})}destroy(h){this.players.forEach(a=>a.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,h)}}class dm{_onRemovalComplete(h,a){this.onRemovalComplete(h,a)}constructor(h,a,d){this.bodyNode=h,this.driver=a,this._normalizer=d,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(m,S)=>{}}get queuedPlayers(){const h=[];return this._namespaceList.forEach(a=>{a.players.forEach(d=>{d.queued&&h.push(d)})}),h}createNamespace(h,a){const d=new Ay(h,a,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,a)?this._balanceNamespaceList(d,a):(this.newHostElements.set(a,d),this.collectEnterElement(a)),this._namespaceLookup[h]=d}_balanceNamespaceList(h,a){const d=this._namespaceList,m=this.namespacesByHostElement;if(d.length-1>=0){let B=!1,Z=this.driver.getParentElement(a);for(;Z;){const ae=m.get(Z);if(ae){const pe=d.indexOf(ae);d.splice(pe+1,0,h),B=!0;break}Z=this.driver.getParentElement(Z)}B||d.unshift(h)}else d.push(h);return m.set(a,h),h}register(h,a){let d=this._namespaceLookup[h];return d||(d=this.createNamespace(h,a)),d}registerTrigger(h,a,d){let m=this._namespaceLookup[h];m&&m.register(a,d)&&this.totalAnimations++}destroy(h,a){h&&(this.afterFlush(()=>{}),this.afterFlushAnimationsDone(()=>{const d=this._fetchNamespace(h);this.namespacesByHostElement.delete(d.hostElement);const m=this._namespaceList.indexOf(d);m>=0&&this._namespaceList.splice(m,1),d.destroy(a),delete this._namespaceLookup[h]}))}_fetchNamespace(h){return this._namespaceLookup[h]}fetchNamespacesByElement(h){const a=new Set,d=this.statesByElement.get(h);if(d)for(let m of d.values())if(m.namespaceId){const S=this._fetchNamespace(m.namespaceId);S&&a.add(S)}return a}trigger(h,a,d,m){if(zh(a)){const S=this._fetchNamespace(h);if(S)return S.trigger(a,d,m),!0}return!1}insertNode(h,a,d,m){if(!zh(a))return;const S=a[za];if(S&&S.setForRemoval){S.setForRemoval=!1,S.setForMove=!0;const B=this.collectedLeaveElements.indexOf(a);B>=0&&this.collectedLeaveElements.splice(B,1)}if(h){const B=this._fetchNamespace(h);B&&B.insertNode(a,d)}m&&this.collectEnterElement(a)}collectEnterElement(h){this.collectedEnterElements.push(h)}markElementAsDisabled(h,a){a?this.disabledNodes.has(h)||(this.disabledNodes.add(h),uu(h,mc)):this.disabledNodes.has(h)&&(this.disabledNodes.delete(h),Gc(h,mc))}removeNode(h,a,d){if(zh(a)){const m=h?this._fetchNamespace(h):null;m?m.removeNode(a,d):this.markElementAsRemoved(h,a,!1,d);const S=this.namespacesByHostElement.get(a);S&&S.id!==h&&S.removeNode(a,d)}else this._onRemovalComplete(a,d)}markElementAsRemoved(h,a,d,m,S){this.collectedLeaveElements.push(a),a[za]={namespaceId:h,setForRemoval:m,hasAnimation:d,removedBeforeQueried:!1,previousTriggersValues:S}}listen(h,a,d,m,S){return zh(a)?this._fetchNamespace(h).listen(a,d,m,S):()=>{}}_buildInstruction(h,a,d,m,S){return h.transition.build(this.driver,h.element,h.fromState.value,h.toState.value,d,m,h.fromState.options,h.toState.options,a,S)}destroyInnerAnimations(h){let a=this.driver.query(h,vd,!0);a.forEach(d=>this.destroyActiveAnimationsForElement(d)),0!=this.playersByQueriedElement.size&&(a=this.driver.query(h,Uc,!0),a.forEach(d=>this.finishActiveQueriedAnimationOnElement(d)))}destroyActiveAnimationsForElement(h){const a=this.playersByElement.get(h);a&&a.forEach(d=>{d.queued?d.markedForDestroy=!0:d.destroy()})}finishActiveQueriedAnimationOnElement(h){const a=this.playersByQueriedElement.get(h);a&&a.forEach(d=>d.finish())}whenRenderingDone(){return new Promise(h=>{if(this.players.length)return su(this.players).onDone(()=>h());h()})}processLeaveNode(h){const a=h[za];if(a&&a.setForRemoval){if(h[za]=Qf,a.namespaceId){this.destroyInnerAnimations(h);const d=this._fetchNamespace(a.namespaceId);d&&d.clearElementCache(h)}this._onRemovalComplete(h,a.setForRemoval)}h.classList?.contains(mc)&&this.markElementAsDisabled(h,!1),this.driver.query(h,".ng-animate-disabled",!0).forEach(d=>{this.markElementAsDisabled(d,!1)})}flush(h=-1){let a=[];if(this.newHostElements.size&&(this.newHostElements.forEach((d,m)=>this._balanceNamespaceList(d,m)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let d=0;d<this.collectedEnterElements.length;d++)uu(this.collectedEnterElements[d],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const d=[];try{a=this._flushAnimations(d,h)}finally{for(let m=0;m<d.length;m++)d[m]()}}else for(let d=0;d<this.collectedLeaveElements.length;d++)this.processLeaveNode(this.collectedLeaveElements[d]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(d=>d()),this._flushFns=[],this._whenQuietFns.length){const d=this._whenQuietFns;this._whenQuietFns=[],a.length?su(a).onDone(()=>{d.forEach(m=>m())}):d.forEach(m=>m())}}reportError(h){throw function Fh(c){return new T.vHH(3402,!1)}()}_flushAnimations(h,a){const d=new Td,m=[],S=new Map,B=[],Z=new Map,ae=new Map,pe=new Map,Ce=new Set;this.disabledNodes.forEach(an=>{Ce.add(an);const Tn=this.driver.query(an,".ng-animate-queued",!0);for(let Bn=0;Bn<Tn.length;Bn++)Ce.add(Tn[Bn])});const rt=this.bodyNode,ut=Array.from(this.statesByElement.keys()),dt=Xf(ut,this.collectedEnterElements),At=new Map;let Gt=0;dt.forEach((an,Tn)=>{const Bn=Bc+Gt++;At.set(Tn,Bn),an.forEach(Pr=>uu(Pr,Bn))});const en=[],Pn=new Set,xn=new Set;for(let an=0;an<this.collectedLeaveElements.length;an++){const Tn=this.collectedLeaveElements[an],Bn=Tn[za];Bn&&Bn.setForRemoval&&(en.push(Tn),Pn.add(Tn),Bn.hasAnimation?this.driver.query(Tn,".ng-star-inserted",!0).forEach(Pr=>Pn.add(Pr)):xn.add(Tn))}const mr=new Map,Nn=Xf(ut,Array.from(Pn));Nn.forEach((an,Tn)=>{const Bn=Bh+Gt++;mr.set(Tn,Bn),an.forEach(Pr=>uu(Pr,Bn))}),h.push(()=>{dt.forEach((an,Tn)=>{const Bn=At.get(Tn);an.forEach(Pr=>Gc(Pr,Bn))}),Nn.forEach((an,Tn)=>{const Bn=mr.get(Tn);an.forEach(Pr=>Gc(Pr,Bn))}),en.forEach(an=>{this.processLeaveNode(an)})});const Ir=[],er=[];for(let an=this._namespaceList.length-1;an>=0;an--)this._namespaceList[an].drainQueuedTransitions(a).forEach(Bn=>{const Pr=Bn.player,hs=Bn.element;if(Ir.push(Pr),this.collectedEnterElements.length){const Hs=hs[za];if(Hs&&Hs.setForMove){if(Hs.previousTriggersValues&&Hs.previousTriggersValues.has(Bn.triggerName)){const Na=Hs.previousTriggersValues.get(Bn.triggerName),ha=this.statesByElement.get(Bn.element);if(ha&&ha.has(Bn.triggerName)){const Ic=ha.get(Bn.triggerName);Ic.value=Na,ha.set(Bn.triggerName,Ic)}}return void Pr.destroy()}}const qo=!rt||!this.driver.containsElement(rt,hs),fo=mr.get(hs),Ra=At.get(hs),Mi=this._buildInstruction(Bn,d,Ra,fo,qo);if(Mi.errors&&Mi.errors.length)return void er.push(Mi);if(qo)return Pr.onStart(()=>fc(hs,Mi.fromStyles)),Pr.onDestroy(()=>hc(hs,Mi.toStyles)),void m.push(Pr);if(Bn.isFallbackTransition)return Pr.onStart(()=>fc(hs,Mi.fromStyles)),Pr.onDestroy(()=>hc(hs,Mi.toStyles)),void m.push(Pr);const cu=[];Mi.timelines.forEach(Hs=>{Hs.stretchStartingKeyframe=!0,this.disabledNodes.has(Hs.element)||cu.push(Hs)}),Mi.timelines=cu,d.append(hs,Mi.timelines),B.push({instruction:Mi,player:Pr,element:hs}),Mi.queriedElements.forEach(Hs=>$a(Z,Hs,[]).push(Pr)),Mi.preStyleProps.forEach((Hs,Na)=>{if(Hs.size){let ha=ae.get(Na);ha||ae.set(Na,ha=new Set),Hs.forEach((Ic,Er)=>ha.add(Er))}}),Mi.postStyleProps.forEach((Hs,Na)=>{let ha=pe.get(Na);ha||pe.set(Na,ha=new Set),Hs.forEach((Ic,Er)=>ha.add(Er))})});if(er.length){const an=[];er.forEach(Tn=>{an.push(function lc(c,h){return new T.vHH(3505,!1)}())}),Ir.forEach(Tn=>Tn.destroy()),this.reportError(an)}const Nr=new Map,Vr=new Map;B.forEach(an=>{const Tn=an.element;d.has(Tn)&&(Vr.set(Tn,Tn),this._beforeAnimationBuild(an.player.namespaceId,an.instruction,Nr))}),m.forEach(an=>{const Tn=an.element;this._getPreviousPlayers(Tn,!1,an.namespaceId,an.triggerName,null).forEach(Pr=>{$a(Nr,Tn,[]).push(Pr),Pr.destroy()})});const Oi=en.filter(an=>ep(an,ae,pe)),ri=new Map;rg(ri,this.driver,xn,pe,Fn.l3).forEach(an=>{ep(an,ae,pe)&&Oi.push(an)});const Ro=new Map;dt.forEach((an,Tn)=>{rg(Ro,this.driver,new Set(an),ae,Fn.k1)}),Oi.forEach(an=>{const Tn=ri.get(an),Bn=Ro.get(an);ri.set(an,new Map([...Tn?.entries()??[],...Bn?.entries()??[]]))});const Ii=[],yc=[],ku={};B.forEach(an=>{const{element:Tn,player:Bn,instruction:Pr}=an;if(d.has(Tn)){if(Ce.has(Tn))return Bn.onDestroy(()=>hc(Tn,Pr.toStyles)),Bn.disabled=!0,Bn.overrideTotalTime(Pr.totalTime),void m.push(Bn);let hs=ku;if(Vr.size>1){let fo=Tn;const Ra=[];for(;fo=fo.parentNode;){const Mi=Vr.get(fo);if(Mi){hs=Mi;break}Ra.push(fo)}Ra.forEach(Mi=>Vr.set(Mi,hs))}const qo=this._buildAnimation(Bn.namespaceId,Pr,Nr,S,Ro,ri);if(Bn.setRealPlayer(qo),hs===ku)Ii.push(Bn);else{const fo=this.playersByElement.get(hs);fo&&fo.length&&(Bn.parentPlayer=su(fo)),m.push(Bn)}}else fc(Tn,Pr.fromStyles),Bn.onDestroy(()=>hc(Tn,Pr.toStyles)),yc.push(Bn),Ce.has(Tn)&&m.push(Bn)}),yc.forEach(an=>{const Tn=S.get(an.element);if(Tn&&Tn.length){const Bn=su(Tn);an.setRealPlayer(Bn)}}),m.forEach(an=>{an.parentPlayer?an.syncPlayerEvents(an.parentPlayer):an.destroy()});for(let an=0;an<en.length;an++){const Tn=en[an],Bn=Tn[za];if(Gc(Tn,Bh),Bn&&Bn.hasAnimation)continue;let Pr=[];if(Z.size){let qo=Z.get(Tn);qo&&qo.length&&Pr.push(...qo);let fo=this.driver.query(Tn,Uc,!0);for(let Ra=0;Ra<fo.length;Ra++){let Mi=Z.get(fo[Ra]);Mi&&Mi.length&&Pr.push(...Mi)}}const hs=Pr.filter(qo=>!qo.destroyed);hs.length?ig(this,Tn,hs):this.processLeaveNode(Tn)}return en.length=0,Ii.forEach(an=>{this.players.push(an),an.onDone(()=>{an.destroy();const Tn=this.players.indexOf(an);this.players.splice(Tn,1)}),an.play()}),Ii}afterFlush(h){this._flushFns.push(h)}afterFlushAnimationsDone(h){this._whenQuietFns.push(h)}_getPreviousPlayers(h,a,d,m,S){let B=[];if(a){const Z=this.playersByQueriedElement.get(h);Z&&(B=Z)}else{const Z=this.playersByElement.get(h);if(Z){const ae=!S||S==$h;Z.forEach(pe=>{pe.queued||!ae&&pe.triggerName!=m||B.push(pe)})}}return(d||m)&&(B=B.filter(Z=>!(d&&d!=Z.namespaceId||m&&m!=Z.triggerName))),B}_beforeAnimationBuild(h,a,d){const S=a.element,B=a.isRemovalTransition?void 0:h,Z=a.isRemovalTransition?void 0:a.triggerName;for(const ae of a.timelines){const pe=ae.element,Ce=pe!==S,rt=$a(d,pe,[]);this._getPreviousPlayers(pe,Ce,B,Z,a.toState).forEach(dt=>{const At=dt.getRealPlayer();At.beforeDestroy&&At.beforeDestroy(),dt.destroy(),rt.push(dt)})}fc(S,a.fromStyles)}_buildAnimation(h,a,d,m,S,B){const Z=a.triggerName,ae=a.element,pe=[],Ce=new Set,rt=new Set,ut=a.timelines.map(At=>{const Gt=At.element;Ce.add(Gt);const en=Gt[za];if(en&&en.removedBeforeQueried)return new Fn.ZN(At.duration,At.delay);const Pn=Gt!==ae,xn=function __(c){const h=[];return sg(c,h),h}((d.get(Gt)||um).map(Nr=>Nr.getRealPlayer())).filter(Nr=>!!Nr.element&&Nr.element===Gt),mr=S.get(Gt),Nn=B.get(Gt),Ir=Vp(this._normalizer,At.keyframes,mr,Nn),er=this._buildPlayer(At,Ir,xn);if(At.subTimeline&&m&&rt.add(Gt),Pn){const Nr=new Jf(h,Z,Gt);Nr.setRealPlayer(er),pe.push(Nr)}return er});pe.forEach(At=>{$a(this.playersByQueriedElement,At.element,[]).push(At),At.onDone(()=>function ng(c,h,a){let d=c.get(h);if(d){if(d.length){const m=d.indexOf(a);d.splice(m,1)}0==d.length&&c.delete(h)}return d}(this.playersByQueriedElement,At.element,At))}),Ce.forEach(At=>uu(At,Jd));const dt=su(ut);return dt.onDestroy(()=>{Ce.forEach(At=>Gc(At,Jd)),hc(ae,a.toStyles)}),rt.forEach(At=>{$a(m,At,[]).push(dt)}),dt}_buildPlayer(h,a,d){return a.length>0?this.driver.animate(h.element,a,h.duration,h.delay,h.easing,d):new Fn.ZN(h.duration,h.delay)}}class Jf{constructor(h,a,d){this.namespaceId=h,this.triggerName=a,this.element=d,this._player=new Fn.ZN,this._containsRealPlayer=!1,this._queuedCallbacks=new Map,this.destroyed=!1,this.parentPlayer=null,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(h){this._containsRealPlayer||(this._player=h,this._queuedCallbacks.forEach((a,d)=>{a.forEach(m=>Zd(h,d,void 0,m))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(h.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(h){this.totalTime=h}syncPlayerEvents(h){const a=this._player;a.triggerCallback&&h.onStart(()=>a.triggerCallback("start")),h.onDone(()=>this.finish()),h.onDestroy(()=>this.destroy())}_queueEvent(h,a){$a(this._queuedCallbacks,h,[]).push(a)}onDone(h){this.queued&&this._queueEvent("done",h),this._player.onDone(h)}onStart(h){this.queued&&this._queueEvent("start",h),this._player.onStart(h)}onDestroy(h){this.queued&&this._queueEvent("destroy",h),this._player.onDestroy(h)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(h){this.queued||this._player.setPosition(h)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(h){const a=this._player;a.triggerCallback&&a.triggerCallback(h)}}function zh(c){return c&&1===c.nodeType}function hm(c,h){const a=c.style.display;return c.style.display=h??"none",a}function rg(c,h,a,d,m){const S=[];a.forEach(ae=>S.push(hm(ae)));const B=[];d.forEach((ae,pe)=>{const Ce=new Map;ae.forEach(rt=>{const ut=h.computeStyle(pe,rt,m);Ce.set(rt,ut),(!ut||0==ut.length)&&(pe[za]=Gh,B.push(pe))}),c.set(pe,Ce)});let Z=0;return a.forEach(ae=>hm(ae,S[Z++])),B}function Xf(c,h){const a=new Map;if(c.forEach(Z=>a.set(Z,[])),0==h.length)return a;const m=new Set(h),S=new Map;function B(Z){if(!Z)return 1;let ae=S.get(Z);if(ae)return ae;const pe=Z.parentNode;return ae=a.has(pe)?pe:m.has(pe)?1:B(pe),S.set(Z,ae),ae}return h.forEach(Z=>{const ae=B(Z);1!==ae&&a.get(ae).push(Z)}),a}function uu(c,h){c.classList?.add(h)}function Gc(c,h){c.classList?.remove(h)}function ig(c,h,a){su(a).onDone(()=>c.processLeaveNode(h))}function sg(c,h){for(let a=0;a<c.length;a++){const d=c[a];d instanceof Fn.ZE?sg(d.players,h):h.push(d)}}function ep(c,h,a){const d=a.get(c);if(!d)return!1;let m=h.get(c);return m?d.forEach(S=>m.add(S)):h.set(c,d),a.delete(c),!0}class cr{constructor(h,a,d){this.bodyNode=h,this._driver=a,this._normalizer=d,this._triggerCache={},this.onRemovalComplete=(m,S)=>{},this._transitionEngine=new dm(h,a,d),this._timelineEngine=new p_(h,a,d),this._transitionEngine.onRemovalComplete=(m,S)=>this.onRemovalComplete(m,S)}registerTrigger(h,a,d,m,S){const B=h+"-"+m;let Z=this._triggerCache[B];if(!Z){const ae=[],Ce=au(this._driver,S,ae,[]);if(ae.length)throw function zg(c,h){return new T.vHH(3404,!1)}();Z=function f_(c,h,a){return new Jp(c,h,a)}(m,Ce,this._normalizer),this._triggerCache[B]=Z}this._transitionEngine.registerTrigger(a,m,Z)}register(h,a){this._transitionEngine.register(h,a)}destroy(h,a){this._transitionEngine.destroy(h,a)}onInsert(h,a,d,m){this._transitionEngine.insertNode(h,a,d,m)}onRemove(h,a,d){this._transitionEngine.removeNode(h,a,d)}disableAnimations(h,a){this._transitionEngine.markElementAsDisabled(h,a)}process(h,a,d,m){if("@"==d.charAt(0)){const[S,B]=o_(d);this._timelineEngine.command(S,a,B,m)}else this._transitionEngine.trigger(h,a,d,m)}listen(h,a,d,m,S){if("@"==d.charAt(0)){const[B,Z]=o_(d);return this._timelineEngine.listen(B,a,Z,S)}return this._transitionEngine.listen(h,a,d,m,S)}flush(h=-1){this._transitionEngine.flush(h)}get players(){return[...this._transitionEngine.players,...this._timelineEngine.players]}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}afterFlushAnimationsDone(h){this._transitionEngine.afterFlushAnimationsDone(h)}}let ag=(()=>{class c{static#e=this.initialStylesByElement=new WeakMap;constructor(a,d,m){this._element=a,this._startStyles=d,this._endStyles=m,this._state=0;let S=c.initialStylesByElement.get(a);S||c.initialStylesByElement.set(a,S=new Map),this._initialStyles=S}start(){this._state<1&&(this._startStyles&&hc(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(hc(this._element,this._initialStyles),this._endStyles&&(hc(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(c.initialStylesByElement.delete(this._element),this._startStyles&&(fc(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(fc(this._element,this._endStyles),this._endStyles=null),hc(this._element,this._initialStyles),this._state=3)}}return c})();function _c(c){let h=null;return c.forEach((a,d)=>{(function sh(c){return"display"===c||"position"===c})(d)&&(h=h||new Map,h.set(d,a))}),h}class fm{constructor(h,a,d,m){this.element=h,this.keyframes=a,this.options=d,this._specialStyles=m,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this._originalOnDoneFns=[],this._originalOnStartFns=[],this.time=0,this.parentPlayer=null,this.currentSnapshot=new Map,this._duration=d.duration,this._delay=d.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(h=>h()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const h=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,h,this.options),this._finalKeyframe=h.length?h[h.length-1]:new Map,this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(h){const a=[];return h.forEach(d=>{a.push(Object.fromEntries(d))}),a}_triggerWebAnimation(h,a,d){return h.animate(this._convertKeyframesToObject(a),d)}onStart(h){this._originalOnStartFns.push(h),this._onStartFns.push(h)}onDone(h){this._originalOnDoneFns.push(h),this._onDoneFns.push(h)}onDestroy(h){this._onDestroyFns.push(h)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(h=>h()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(h=>h()),this._onDestroyFns=[])}setPosition(h){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=h*this.time}getPosition(){return+(this.domPlayer.currentTime??0)/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const h=new Map;this.hasStarted()&&this._finalKeyframe.forEach((d,m)=>{"offset"!==m&&h.set(m,this._finished?d:Xg(this.element,m))}),this.currentSnapshot=h}triggerCallback(h){const a="start"===h?this._onStartFns:this._onDoneFns;a.forEach(d=>d()),a.length=0}}class Wh{validateStyleProperty(h){return!0}validateAnimatableStyleProperty(h){return!0}matchesElement(h,a){return!1}containsElement(h,a){return Yg(h,a)}getParentElement(h){return Lf(h)}query(h,a,d){return l_(h,a,d)}computeStyle(h,a,d){return window.getComputedStyle(h)[a]}animate(h,a,d,m,S,B=[]){const ae={duration:d,delay:m,fill:0==m?"both":"forwards"};S&&(ae.easing=S);const pe=new Map,Ce=B.filter(dt=>dt instanceof fm);(function Hf(c,h){return 0===c||0===h})(d,m)&&Ce.forEach(dt=>{dt.currentSnapshot.forEach((At,Gt)=>pe.set(Gt,At))});let rt=function Zg(c){return c.length?c[0]instanceof Map?c:c.map(h=>Id(h)):[]}(a).map(dt=>jc(dt));rt=function Gf(c,h,a){if(a.size&&h.length){let d=h[0],m=[];if(a.forEach((S,B)=>{d.has(B)||m.push(B),d.set(B,S)}),m.length)for(let S=1;S<h.length;S++){let B=h[S];m.forEach(Z=>B.set(Z,Xg(c,Z)))}}return h}(h,rt,pe);const ut=function og(c,h){let a=null,d=null;return Array.isArray(h)&&h.length?(a=_c(h[0]),h.length>1&&(d=_c(h[h.length-1]))):h instanceof Map&&(a=_c(h)),a||d?new ag(c,a,d):null}(h,rt);return new fm(h,rt,ae,ut)}}let qh=(()=>{class c extends Fn._j{constructor(a,d){super(),this._nextAnimationId=0,this._renderer=a.createRenderer(d.body,{id:"0",encapsulation:T.ifc.None,styles:[],data:{animation:[]}})}build(a){const d=this._nextAnimationId.toString();this._nextAnimationId++;const m=Array.isArray(a)?(0,Fn.vP)(a):a;return np(this._renderer,null,d,"register",[m]),new tp(d,this._renderer)}static#e=this.\u0275fac=function(d){return new(d||c)(T.LFG(T.FYo),T.LFG(cn.K0))};static#t=this.\u0275prov=T.Yz7({token:c,factory:c.\u0275fac})}return c})();class tp extends Fn.LC{constructor(h,a){super(),this._id=h,this._renderer=a}create(h,a){return new xl(this._id,h,a||{},this._renderer)}}class xl{constructor(h,a,d,m){this.id=h,this.element=a,this._renderer=m,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",d)}_listen(h,a){return this._renderer.listen(this.element,`@@${this.id}:${h}`,a)}_command(h,...a){return np(this._renderer,this.element,this.id,h,a)}onDone(h){this._listen("done",h)}onStart(h){this._listen("start",h)}onDestroy(h){this._listen("destroy",h)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(h){this._command("setPosition",h)}getPosition(){return this._renderer.engine.players[+this.id]?.getPosition()??0}}function np(c,h,a,d,m){return c.setProperty(h,`@@${a}:${d}`,m)}const Yh="@.disabled";let pm=(()=>{class c{constructor(a,d,m){this.delegate=a,this.engine=d,this._zone=m,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,d.onRemovalComplete=(S,B)=>{const Z=B?.parentNode(S);Z&&B.removeChild(Z,S)}}createRenderer(a,d){const S=this.delegate.createRenderer(a,d);if(!(a&&d&&d.data&&d.data.animation)){let Ce=this._rendererCache.get(S);return Ce||(Ce=new gm("",S,this.engine,()=>this._rendererCache.delete(S)),this._rendererCache.set(S,Ce)),Ce}const B=d.id,Z=d.id+"-"+this._currentId;this._currentId++,this.engine.register(Z,a);const ae=Ce=>{Array.isArray(Ce)?Ce.forEach(ae):this.engine.registerTrigger(B,Z,a,Ce.name,Ce)};return d.data.animation.forEach(ae),new rp(this,Z,S,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){queueMicrotask(()=>{this._microtaskId++})}scheduleListenerCallback(a,d,m){a>=0&&a<this._microtaskId?this._zone.run(()=>d(m)):(0==this._animationCallbacksBuffer.length&&queueMicrotask(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(S=>{const[B,Z]=S;B(Z)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([d,m]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}static#e=this.\u0275fac=function(d){return new(d||c)(T.LFG(T.FYo),T.LFG(cr),T.LFG(T.R0b))};static#t=this.\u0275prov=T.Yz7({token:c,factory:c.\u0275fac})}return c})();class gm{constructor(h,a,d,m){this.namespaceId=h,this.delegate=a,this.engine=d,this._onDestroy=m}get data(){return this.delegate.data}destroyNode(h){this.delegate.destroyNode?.(h)}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.engine.afterFlushAnimationsDone(()=>{queueMicrotask(()=>{this.delegate.destroy()})}),this._onDestroy?.()}createElement(h,a){return this.delegate.createElement(h,a)}createComment(h){return this.delegate.createComment(h)}createText(h){return this.delegate.createText(h)}appendChild(h,a){this.delegate.appendChild(h,a),this.engine.onInsert(this.namespaceId,a,h,!1)}insertBefore(h,a,d,m=!0){this.delegate.insertBefore(h,a,d),this.engine.onInsert(this.namespaceId,a,h,m)}removeChild(h,a,d){this.engine.onRemove(this.namespaceId,a,this.delegate)}selectRootElement(h,a){return this.delegate.selectRootElement(h,a)}parentNode(h){return this.delegate.parentNode(h)}nextSibling(h){return this.delegate.nextSibling(h)}setAttribute(h,a,d,m){this.delegate.setAttribute(h,a,d,m)}removeAttribute(h,a,d){this.delegate.removeAttribute(h,a,d)}addClass(h,a){this.delegate.addClass(h,a)}removeClass(h,a){this.delegate.removeClass(h,a)}setStyle(h,a,d,m){this.delegate.setStyle(h,a,d,m)}removeStyle(h,a,d){this.delegate.removeStyle(h,a,d)}setProperty(h,a,d){"@"==a.charAt(0)&&a==Yh?this.disableAnimations(h,!!d):this.delegate.setProperty(h,a,d)}setValue(h,a){this.delegate.setValue(h,a)}listen(h,a,d){return this.delegate.listen(h,a,d)}disableAnimations(h,a){this.engine.disableAnimations(h,a)}}class rp extends gm{constructor(h,a,d,m,S){super(a,d,m,S),this.factory=h,this.namespaceId=a}setProperty(h,a,d){"@"==a.charAt(0)?"."==a.charAt(1)&&a==Yh?this.disableAnimations(h,d=void 0===d||!!d):this.engine.process(this.namespaceId,h,a.slice(1),d):this.delegate.setProperty(h,a,d)}listen(h,a,d){if("@"==a.charAt(0)){const m=function Sy(c){switch(c){case"body":return document.body;case"document":return document;case"window":return window;default:return c}}(h);let S=a.slice(1),B="";return"@"!=S.charAt(0)&&([S,B]=function mm(c){const h=c.indexOf(".");return[c.substring(0,h),c.slice(h+1)]}(S)),this.engine.listen(this.namespaceId,m,S,B,Z=>{this.factory.scheduleListenerCallback(Z._data||-1,d,Z)})}return this.delegate.listen(h,a,d)}}const ug=[{provide:Fn._j,useClass:qh},{provide:Yf,useFactory:function lg(){return new Hh}},{provide:cr,useClass:(()=>{class c extends cr{constructor(a,d,m,S){super(a.body,d,m)}ngOnDestroy(){this.flush()}static#e=this.\u0275fac=function(d){return new(d||c)(T.LFG(cn.K0),T.LFG(_d),T.LFG(Yf),T.LFG(T.z2F))};static#t=this.\u0275prov=T.Yz7({token:c,factory:c.\u0275fac})}return c})()},{provide:T.FYo,useFactory:function Ny(c,h,a){return new pm(c,h,a)},deps:[E.se,cr,T.R0b]}],cg=[{provide:_d,useFactory:()=>new Wh},{provide:T.QbO,useValue:"BrowserAnimations"},...ug],dg=[{provide:_d,useClass:Vh},{provide:T.QbO,useValue:"NoopAnimations"},...ug];let _m=(()=>{class c{static withConfig(a){return{ngModule:c,providers:a.disableAnimations?dg:cg}}static#e=this.\u0275fac=function(d){return new(d||c)};static#t=this.\u0275mod=T.oAB({type:c});static#n=this.\u0275inj=T.cJS({providers:cg,imports:[E.b2]})}return c})();const kl=(0,Fn.X$)("slideInAnimation",[(0,Fn.eR)(":enter",[(0,Fn.oB)({transform:"translateX(100%)"}),(0,Fn.jt)("0.5s ease-in-out",(0,Fn.oB)({transform:"translateX(0%)"}))]),(0,Fn.eR)(":leave",[(0,Fn.jt)("0.5s ease-in-out",(0,Fn.oB)({transform:"translateX(-100%)"}))])]),ym=(0,Fn.X$)("openClose",[(0,Fn.SB)("open",(0,Fn.oB)({opacity:1})),(0,Fn.SB)("closed",(0,Fn.oB)({opacity:.8})),(0,Fn.eR)("open => closed",[(0,Fn.jt)("1s",(0,Fn.F4)([(0,Fn.oB)({transform:"scale(1) rotateX(0)",offset:0}),(0,Fn.oB)({transform:"scale(2.5) rotateX(-90deg)",offset:1})]))]),(0,Fn.eR)("closed => open",[(0,Fn.jt)("0.5s",(0,Fn.F4)([(0,Fn.oB)({transform:"scale(1) rotateX(0)",offset:0}),(0,Fn.oB)({transform:"scale(2.5) rotateX(-90deg)",offset:1})]))])]),vm={apiKey:"AIzaSyDhMeOKg3NlfID1yZj0pWK3C0XIT-dM9gU",authDomain:"clinica-7cd94.firebaseapp.com",projectId:"clinica-7cd94",storageBucket:"clinica-7cd94.appspot.com",messagingSenderId:"112194966494",appId:"1:112194966494:web:8a8472354ee23bfb57034f"};let I_=(()=>{class c{static#e=this.\u0275fac=function(d){return new(d||c)};static#t=this.\u0275mod=T.oAB({type:c,bootstrap:[Et]});static#n=this.\u0275inj=T.cJS({imports:[E.b2,st,mt.hO.initializeApp(vm),pd,me.u5,_m]})}return c})()},4108:(Wt,Je,G)=>{G.d(Je,{e:()=>Ld});var E=G(5861),me=G(7398),le=G(9058),Oe=G(534),Ne=G(7879),Te=G(7582),ke=G(4537);const mt=function st(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},Ct=new le.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),jt=new Ne.Yd("@firebase/auth");function _e(P,...y){jt.logLevel<=Ne.in.ERROR&&jt.error(`Auth (${Oe.SDK_VERSION}): ${P}`,...y)}function He(P,...y){throw ft(P,...y)}function Pe(P,...y){return ft(P,...y)}function ft(P,...y){if("string"!=typeof P){const w=y[0],x=[...y.slice(1)];return x[0]&&(x[0].appName=P.name),P._errorFactory.create(w,...x)}return Ct.create(P,...y)}function de(P,y,...w){if(!P)throw ft(y,...w)}function Ot(P){const y="INTERNAL ASSERTION FAILED: "+P;throw _e(y),new Error(y)}function wt(P,y){P||Ot(y)}function Or(){var P;return typeof self<"u"&&(null===(P=self.location)||void 0===P?void 0:P.protocol)||null}class Bt{constructor(y,w){this.shortDelay=y,this.longDelay=w,wt(w>y,"Short delay should be less than long delay!"),this.isMobile=(0,le.uI)()||(0,le.b$)()}get(){return function _r(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(function On(){return"http:"===Or()||"https:"===Or()}()||(0,le.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}class Se{static initialize(y,w,x){this.fetchImpl=y,w&&(this.headersImpl=w),x&&(this.responseImpl=x)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:typeof globalThis<"u"&&globalThis.fetch?globalThis.fetch:typeof fetch<"u"?fetch:void Ot("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:typeof globalThis<"u"&&globalThis.Headers?globalThis.Headers:typeof Headers<"u"?Headers:void Ot("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:typeof globalThis<"u"&&globalThis.Response?globalThis.Response:typeof Response<"u"?Response:void Ot("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Ke={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},Fe=new Bt(3e4,6e4);function Ue(P,y){return P.tenantId&&!y.tenantId?Object.assign(Object.assign({},y),{tenantId:P.tenantId}):y}function Xe(P,y,w,x){return Ft.apply(this,arguments)}function Ft(){return(Ft=(0,E.Z)(function*(P,y,w,x,Q={}){return Rt(P,Q,(0,E.Z)(function*(){let ce={},je={};x&&("GET"===y?je=x:ce={body:JSON.stringify(x)});const at=(0,le.xO)(Object.assign({key:P.config.apiKey},je)).slice(1),St=yield P._getAdditionalHeaders();return St["Content-Type"]="application/json",P.languageCode&&(St["X-Firebase-Locale"]=P.languageCode),Se.fetch()(Yt(P,P.config.apiHost,w,at),Object.assign({method:y,headers:St,referrerPolicy:"no-referrer"},ce))}))})).apply(this,arguments)}function Rt(P,y,w){return hr.apply(this,arguments)}function hr(){return(hr=(0,E.Z)(function*(P,y,w){P._canInitEmulator=!1;const x=Object.assign(Object.assign({},Ke),y);try{const Q=new An(P),ce=yield Promise.race([w(),Q.promise]);Q.clearNetworkTimeout();const je=yield ce.json();if("needConfirmation"in je)throw $n(P,"account-exists-with-different-credential",je);if(ce.ok&&!("errorMessage"in je))return je;{const at=ce.ok?je.errorMessage:je.error.message,[St,pn]=at.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===St)throw $n(P,"credential-already-in-use",je);if("EMAIL_EXISTS"===St)throw $n(P,"email-already-in-use",je);if("USER_DISABLED"===St)throw $n(P,"user-disabled",je);const Rn=x[St]||St.toLowerCase().replace(/[_\s]+/g,"-");if(pn)throw function $e(P,y,w){const x=Object.assign(Object.assign({},mt()),{[y]:w});return new le.LL("auth","Firebase",x).create(y,{appName:P.name})}(P,Rn,pn);He(P,Rn)}}catch(Q){if(Q instanceof le.ZR)throw Q;He(P,"network-request-failed",{message:String(Q)})}})).apply(this,arguments)}function Yt(P,y,w,x){const Q=`${y}${w}?${x}`;return P.config.emulator?function be(P,y){wt(P.emulator,"Emulator should always be set here");const{url:w}=P.emulator;return y?`${w}${y.startsWith("/")?y.slice(1):y}`:w}(P.config,Q):`${P.config.apiScheme}://${Q}`}class An{constructor(y){this.auth=y,this.timer=null,this.promise=new Promise((w,x)=>{this.timer=setTimeout(()=>x(Pe(this.auth,"network-request-failed")),Fe.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function $n(P,y,w){const x={appName:P.name};w.email&&(x.email=w.email),w.phoneNumber&&(x.phoneNumber=w.phoneNumber);const Q=Pe(P,y,x);return Q.customData._tokenResponse=w,Q}function Mt(){return(Mt=(0,E.Z)(function*(P,y){return Xe(P,"POST","/v1/accounts:delete",y)})).apply(this,arguments)}function cn(){return(cn=(0,E.Z)(function*(P,y){return Xe(P,"POST","/v1/accounts:lookup",y)})).apply(this,arguments)}function Gr(P){if(P)try{const y=new Date(Number(P));if(!isNaN(y.getTime()))return y.toUTCString()}catch{}}function Yr(){return(Yr=(0,E.Z)(function*(P,y=!1){const w=(0,le.m9)(P),x=yield w.getIdToken(y),Q=Wi(x);de(Q&&Q.exp&&Q.auth_time&&Q.iat,w.auth,"internal-error");const ce="object"==typeof Q.firebase?Q.firebase:void 0,je=ce?.sign_in_provider;return{claims:Q,token:x,authTime:Gr(Xt(Q.auth_time)),issuedAtTime:Gr(Xt(Q.iat)),expirationTime:Gr(Xt(Q.exp)),signInProvider:je||null,signInSecondFactor:ce?.sign_in_second_factor||null}})).apply(this,arguments)}function Xt(P){return 1e3*Number(P)}function Wi(P){const[y,w,x]=P.split(".");if(void 0===y||void 0===w||void 0===x)return _e("JWT malformed, contained fewer than 3 sections"),null;try{const Q=(0,le.tV)(w);return Q?JSON.parse(Q):(_e("Failed to decode base64 JWT payload"),null)}catch(Q){return _e("Caught error parsing JWT payload as JSON",Q?.toString()),null}}function Dn(P,y){return Vi.apply(this,arguments)}function Vi(){return(Vi=(0,E.Z)(function*(P,y,w=!1){if(w)return y;try{return yield y}catch(x){throw x instanceof le.ZR&&function Pa({code:P}){return"auth/user-disabled"===P||"auth/user-token-expired"===P}(x)&&P.auth.currentUser===P&&(yield P.auth.signOut()),x}})).apply(this,arguments)}class ts{constructor(y){this.user=y,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(y){var w;if(y){const x=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),x}{this.errorBackoff=3e4;const Q=(null!==(w=this.user.stsTokenManager.expirationTime)&&void 0!==w?w:0)-Date.now()-3e5;return Math.max(0,Q)}}schedule(y=!1){var w=this;if(!this.isRunning)return;const x=this.getInterval(y);this.timerId=setTimeout((0,E.Z)(function*(){yield w.iteration()}),x)}iteration(){var y=this;return(0,E.Z)(function*(){try{yield y.user.getIdToken(!0)}catch(w){return void("auth/network-request-failed"===w?.code&&y.schedule(!0))}y.schedule()})()}}class go{constructor(y,w){this.createdAt=y,this.lastLoginAt=w,this._initializeTime()}_initializeTime(){this.lastSignInTime=Gr(this.lastLoginAt),this.creationTime=Gr(this.createdAt)}_copy(y){this.createdAt=y.createdAt,this.lastLoginAt=y.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function dr(P){return Ti.apply(this,arguments)}function Ti(){return Ti=(0,E.Z)(function*(P){var y;const w=P.auth,x=yield P.getIdToken(),Q=yield Dn(P,function or(P,y){return cn.apply(this,arguments)}(w,{idToken:x}));de(Q?.users.length,w,"internal-error");const ce=Q.users[0];P._notifyReloadListener(ce);const je=null!==(y=ce.providerUserInfo)&&void 0!==y&&y.length?function Ui(P){return P.map(y=>{var{providerId:w}=y,x=(0,Te._T)(y,["providerId"]);return{providerId:w,uid:x.rawId||"",displayName:x.displayName||null,email:x.email||null,phoneNumber:x.phoneNumber||null,photoURL:x.photoUrl||null}})}(ce.providerUserInfo):[],at=function xi(P,y){return[...P.filter(x=>!y.some(Q=>Q.providerId===x.providerId)),...y]}(P.providerData,je),Rn=!!P.isAnonymous&&!(P.email&&ce.passwordHash||at?.length),Lr={uid:ce.localId,displayName:ce.displayName||null,photoURL:ce.photoUrl||null,email:ce.email||null,emailVerified:ce.emailVerified||!1,phoneNumber:ce.phoneNumber||null,tenantId:ce.tenantId||null,providerData:at,metadata:new go(ce.createdAt,ce.lastLoginAt),isAnonymous:Rn};Object.assign(P,Lr)}),Ti.apply(this,arguments)}function Bi(){return(Bi=(0,E.Z)(function*(P){const y=(0,le.m9)(P);yield dr(y),yield y.auth._persistUserIfCurrent(y),y.auth._notifyListenersIfCurrent(y)})).apply(this,arguments)}function we(){return(we=(0,E.Z)(function*(P,y){const w=yield Rt(P,{},(0,E.Z)(function*(){const x=(0,le.xO)({grant_type:"refresh_token",refresh_token:y}).slice(1),{tokenApiHost:Q,apiKey:ce}=P.config,je=Yt(P,Q,"/v1/token",`key=${ce}`),at=yield P._getAdditionalHeaders();return at["Content-Type"]="application/x-www-form-urlencoded",Se.fetch()(je,{method:"POST",headers:at,body:x})}));return{accessToken:w.access_token,expiresIn:w.expires_in,refreshToken:w.refresh_token}})).apply(this,arguments)}class ie{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(y){de(y.idToken,"internal-error"),de(typeof y.idToken<"u","internal-error"),de(typeof y.refreshToken<"u","internal-error");const w="expiresIn"in y&&typeof y.expiresIn<"u"?Number(y.expiresIn):function wn(P){const y=Wi(P);return de(y,"internal-error"),de(typeof y.exp<"u","internal-error"),de(typeof y.iat<"u","internal-error"),Number(y.exp)-Number(y.iat)}(y.idToken);this.updateTokensAndExpiration(y.idToken,y.refreshToken,w)}getToken(y,w=!1){var x=this;return(0,E.Z)(function*(){return de(!x.accessToken||x.refreshToken,y,"user-token-expired"),w||!x.accessToken||x.isExpired?x.refreshToken?(yield x.refresh(y,x.refreshToken),x.accessToken):null:x.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(y,w){var x=this;return(0,E.Z)(function*(){const{accessToken:Q,refreshToken:ce,expiresIn:je}=yield function ji(P,y){return we.apply(this,arguments)}(y,w);x.updateTokensAndExpiration(Q,ce,Number(je))})()}updateTokensAndExpiration(y,w,x){this.refreshToken=w||null,this.accessToken=y||null,this.expirationTime=Date.now()+1e3*x}static fromJSON(y,w){const{refreshToken:x,accessToken:Q,expirationTime:ce}=w,je=new ie;return x&&(de("string"==typeof x,"internal-error",{appName:y}),je.refreshToken=x),Q&&(de("string"==typeof Q,"internal-error",{appName:y}),je.accessToken=Q),ce&&(de("number"==typeof ce,"internal-error",{appName:y}),je.expirationTime=ce),je}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(y){this.accessToken=y.accessToken,this.refreshToken=y.refreshToken,this.expirationTime=y.expirationTime}_clone(){return Object.assign(new ie,this.toJSON())}_performRefresh(){return Ot("not implemented")}}function se(P,y){de("string"==typeof P||typeof P>"u","internal-error",{appName:y})}class re{constructor(y){var{uid:w,auth:x,stsTokenManager:Q}=y,ce=(0,Te._T)(y,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new ts(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=w,this.auth=x,this.stsTokenManager=Q,this.accessToken=Q.accessToken,this.displayName=ce.displayName||null,this.email=ce.email||null,this.emailVerified=ce.emailVerified||!1,this.phoneNumber=ce.phoneNumber||null,this.photoURL=ce.photoURL||null,this.isAnonymous=ce.isAnonymous||!1,this.tenantId=ce.tenantId||null,this.providerData=ce.providerData?[...ce.providerData]:[],this.metadata=new go(ce.createdAt||void 0,ce.lastLoginAt||void 0)}getIdToken(y){var w=this;return(0,E.Z)(function*(){const x=yield Dn(w,w.stsTokenManager.getToken(w.auth,y));return de(x,w.auth,"internal-error"),w.accessToken!==x&&(w.accessToken=x,yield w.auth._persistUserIfCurrent(w),w.auth._notifyListenersIfCurrent(w)),x})()}getIdTokenResult(y){return function $r(P){return Yr.apply(this,arguments)}(this,y)}reload(){return function ps(P){return Bi.apply(this,arguments)}(this)}_assign(y){this!==y&&(de(this.uid===y.uid,this.auth,"internal-error"),this.displayName=y.displayName,this.photoURL=y.photoURL,this.email=y.email,this.emailVerified=y.emailVerified,this.phoneNumber=y.phoneNumber,this.isAnonymous=y.isAnonymous,this.tenantId=y.tenantId,this.providerData=y.providerData.map(w=>Object.assign({},w)),this.metadata._copy(y.metadata),this.stsTokenManager._assign(y.stsTokenManager))}_clone(y){const w=new re(Object.assign(Object.assign({},this),{auth:y,stsTokenManager:this.stsTokenManager._clone()}));return w.metadata._copy(this.metadata),w}_onReload(y){de(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=y,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(y){this.reloadListener?this.reloadListener(y):this.reloadUserInfo=y}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(y,w=!1){var x=this;return(0,E.Z)(function*(){let Q=!1;y.idToken&&y.idToken!==x.stsTokenManager.accessToken&&(x.stsTokenManager.updateFromServerResponse(y),Q=!0),w&&(yield dr(x)),yield x.auth._persistUserIfCurrent(x),Q&&x.auth._notifyListenersIfCurrent(x)})()}delete(){var y=this;return(0,E.Z)(function*(){const w=yield y.getIdToken();return yield Dn(y,function zn(P,y){return Mt.apply(this,arguments)}(y.auth,{idToken:w})),y.stsTokenManager.clearRefreshToken(),y.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(y=>Object.assign({},y)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(y,w){var x,Q,ce,je,at,St,pn,Rn;const Lr=null!==(x=w.displayName)&&void 0!==x?x:void 0,ba=null!==(Q=w.email)&&void 0!==Q?Q:void 0,no=null!==(ce=w.phoneNumber)&&void 0!==ce?ce:void 0,rd=null!==(je=w.photoURL)&&void 0!==je?je:void 0,Co=null!==(at=w.tenantId)&&void 0!==at?at:void 0,id=null!==(St=w._redirectEventId)&&void 0!==St?St:void 0,bu=null!==(pn=w.createdAt)&&void 0!==pn?pn:void 0,Ao=null!==(Rn=w.lastLoginAt)&&void 0!==Rn?Rn:void 0,{uid:Rr,emailVerified:sd,isAnonymous:Al,providerData:wu,stsTokenManager:ff}=w;de(Rr&&ff,y,"internal-error");const gr=ie.fromJSON(this.name,ff);de("string"==typeof Rr,y,"internal-error"),se(Lr,y.name),se(ba,y.name),de("boolean"==typeof sd,y,"internal-error"),de("boolean"==typeof Al,y,"internal-error"),se(no,y.name),se(rd,y.name),se(Co,y.name),se(id,y.name),se(bu,y.name),se(Ao,y.name);const xc=new re({uid:Rr,auth:y,email:ba,emailVerified:sd,displayName:Lr,isAnonymous:Al,photoURL:rd,phoneNumber:no,tenantId:Co,stsTokenManager:gr,createdAt:bu,lastLoginAt:Ao});return wu&&Array.isArray(wu)&&(xc.providerData=wu.map(pf=>Object.assign({},pf))),id&&(xc._redirectEventId=id),xc}static _fromIdTokenResponse(y,w,x=!1){return(0,E.Z)(function*(){const Q=new ie;Q.updateFromServerResponse(w);const ce=new re({uid:w.localId,auth:y,stsTokenManager:Q,isAnonymous:x});return yield dr(ce),ce})()}}const ue=new Map;function Le(P){wt(P instanceof Function,"Expected a class definition");let y=ue.get(P);return y?(wt(y instanceof P,"Instance stored in cache mismatched with class"),y):(y=new P,ue.set(P,y),y)}const Pt=(()=>{class P{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,E.Z)(function*(){return!0})()}_set(w,x){var Q=this;return(0,E.Z)(function*(){Q.storage[w]=x})()}_get(w){var x=this;return(0,E.Z)(function*(){const Q=x.storage[w];return void 0===Q?null:Q})()}_remove(w){var x=this;return(0,E.Z)(function*(){delete x.storage[w]})()}_addListener(w,x){}_removeListener(w,x){}}return P.type="NONE",P})();function $t(P,y,w){return`firebase:${P}:${y}:${w}`}class gn{constructor(y,w,x){this.persistence=y,this.auth=w,this.userKey=x;const{config:Q,name:ce}=this.auth;this.fullUserKey=$t(this.userKey,Q.apiKey,ce),this.fullPersistenceKey=$t("persistence",Q.apiKey,ce),this.boundEventHandler=w._onStorageEvent.bind(w),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(y){return this.persistence._set(this.fullUserKey,y.toJSON())}getCurrentUser(){var y=this;return(0,E.Z)(function*(){const w=yield y.persistence._get(y.fullUserKey);return w?re._fromJSON(y.auth,w):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(y){var w=this;return(0,E.Z)(function*(){if(w.persistence===y)return;const x=yield w.getCurrentUser();return yield w.removeCurrentUser(),w.persistence=y,x?w.setCurrentUser(x):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(y,w,x="authUser"){return(0,E.Z)(function*(){if(!w.length)return new gn(Le(Pt),y,x);const Q=(yield Promise.all(w.map(function(){var pn=(0,E.Z)(function*(Rn){if(yield Rn._isAvailable())return Rn});return function(Rn){return pn.apply(this,arguments)}}()))).filter(pn=>pn);let ce=Q[0]||Le(Pt);const je=$t(x,y.config.apiKey,y.name);let at=null;for(const pn of w)try{const Rn=yield pn._get(je);if(Rn){const Lr=re._fromJSON(y,Rn);pn!==ce&&(at=Lr),ce=pn;break}}catch{}const St=Q.filter(pn=>pn._shouldAllowMigration);return ce._shouldAllowMigration&&St.length?(ce=St[0],at&&(yield ce._set(je,at.toJSON())),yield Promise.all(w.map(function(){var pn=(0,E.Z)(function*(Rn){if(Rn!==ce)try{yield Rn._remove(je)}catch{}});return function(Rn){return pn.apply(this,arguments)}}())),new gn(ce,y,x)):new gn(ce,y,x)})()}}function Jt(P){const y=P.toLowerCase();if(y.includes("opera/")||y.includes("opr/")||y.includes("opios/"))return"Opera";if(function Gs(P=(0,le.z$)()){return/iemobile/i.test(P)}(y))return"IEMobile";if(y.includes("msie")||y.includes("trident/"))return"IE";if(y.includes("edge/"))return"Edge";if(function hn(P=(0,le.z$)()){return/firefox\//i.test(P)}(y))return"Firefox";if(y.includes("silk/"))return"Silk";if(function it(P=(0,le.z$)()){return/blackberry/i.test(P)}(y))return"Blackberry";if(function Ge(P=(0,le.z$)()){return/webos/i.test(P)}(y))return"Webos";if(function Br(P=(0,le.z$)()){const y=P.toLowerCase();return y.includes("safari/")&&!y.includes("chrome/")&&!y.includes("crios/")&&!y.includes("android")}(y))return"Safari";if((y.includes("chrome/")||function li(P=(0,le.z$)()){return/crios\//i.test(P)}(y))&&!y.includes("edge/"))return"Chrome";if(function Qs(P=(0,le.z$)()){return/android/i.test(P)}(y))return"Android";{const x=P.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===x?.length)return x[1]}return"Other"}function Mr(P,y=[]){let w;switch(P){case"Browser":w=Jt((0,le.z$)());break;case"Worker":w=`${Jt((0,le.z$)())}-${P}`;break;default:w=P}const x=y.length?y.join(","):"FirebaseCore-web";return`${w}/JsCore/${Oe.SDK_VERSION}/${x}`}class Js{constructor(y){this.auth=y,this.queue=[]}pushCallback(y,w){const x=ce=>new Promise((je,at)=>{try{je(y(ce))}catch(St){at(St)}});x.onAbort=w,this.queue.push(x);const Q=this.queue.length-1;return()=>{this.queue[Q]=()=>Promise.resolve()}}runMiddleware(y){var w=this;return(0,E.Z)(function*(){if(w.auth.currentUser===y)return;const x=[];try{for(const Q of w.queue)yield Q(y),Q.onAbort&&x.push(Q.onAbort)}catch(Q){x.reverse();for(const ce of x)try{ce()}catch{}throw w.auth._errorFactory.create("login-blocked",{originalMessage:Q?.message})}})()}}function Ds(){return(Ds=(0,E.Z)(function*(P,y={}){return Xe(P,"GET","/v2/passwordPolicy",Ue(P,y))})).apply(this,arguments)}class Yo{constructor(y){var w,x,Q,ce;const je=y.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(w=je.minPasswordLength)&&void 0!==w?w:6,je.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=je.maxPasswordLength),void 0!==je.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=je.containsLowercaseCharacter),void 0!==je.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=je.containsUppercaseCharacter),void 0!==je.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=je.containsNumericCharacter),void 0!==je.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=je.containsNonAlphanumericCharacter),this.enforcementState=y.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(Q=null===(x=y.allowedNonAlphanumericCharacters)||void 0===x?void 0:x.join(""))&&void 0!==Q?Q:"",this.forceUpgradeOnSignin=null!==(ce=y.forceUpgradeOnSignin)&&void 0!==ce&&ce,this.schemaVersion=y.schemaVersion}validatePassword(y){var w,x,Q,ce,je,at;const St={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(y,St),this.validatePasswordCharacterOptions(y,St),St.isValid&&(St.isValid=null===(w=St.meetsMinPasswordLength)||void 0===w||w),St.isValid&&(St.isValid=null===(x=St.meetsMaxPasswordLength)||void 0===x||x),St.isValid&&(St.isValid=null===(Q=St.containsLowercaseLetter)||void 0===Q||Q),St.isValid&&(St.isValid=null===(ce=St.containsUppercaseLetter)||void 0===ce||ce),St.isValid&&(St.isValid=null===(je=St.containsNumericCharacter)||void 0===je||je),St.isValid&&(St.isValid=null===(at=St.containsNonAlphanumericCharacter)||void 0===at||at),St}validatePasswordLengthOptions(y,w){const x=this.customStrengthOptions.minPasswordLength,Q=this.customStrengthOptions.maxPasswordLength;x&&(w.meetsMinPasswordLength=y.length>=x),Q&&(w.meetsMaxPasswordLength=y.length<=Q)}validatePasswordCharacterOptions(y,w){let x;this.updatePasswordCharacterOptionsStatuses(w,!1,!1,!1,!1);for(let Q=0;Q<y.length;Q++)x=y.charAt(Q),this.updatePasswordCharacterOptionsStatuses(w,x>="a"&&x<="z",x>="A"&&x<="Z",x>="0"&&x<="9",this.allowedNonAlphanumericCharacters.includes(x))}updatePasswordCharacterOptionsStatuses(y,w,x,Q,ce){this.customStrengthOptions.containsLowercaseLetter&&(y.containsLowercaseLetter||(y.containsLowercaseLetter=w)),this.customStrengthOptions.containsUppercaseLetter&&(y.containsUppercaseLetter||(y.containsUppercaseLetter=x)),this.customStrengthOptions.containsNumericCharacter&&(y.containsNumericCharacter||(y.containsNumericCharacter=Q)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(y.containsNonAlphanumericCharacter||(y.containsNonAlphanumericCharacter=ce))}}class Ka{constructor(y,w,x,Q){this.app=y,this.heartbeatServiceProvider=w,this.appCheckServiceProvider=x,this.config=Q,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Ya(this),this.idTokenSubscription=new Ya(this),this.beforeStateQueue=new Js(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Ct,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=y.name,this.clientVersion=Q.sdkClientVersion}_initializeWithPersistence(y,w){var x=this;return w&&(this._popupRedirectResolver=Le(w)),this._initializationPromise=this.queue((0,E.Z)(function*(){var Q,ce;if(!x._deleted&&(x.persistenceManager=yield gn.create(x,y),!x._deleted)){if(null!==(Q=x._popupRedirectResolver)&&void 0!==Q&&Q._shouldInitProactively)try{yield x._popupRedirectResolver._initialize(x)}catch{}yield x.initializeCurrentUser(w),x.lastNotifiedUid=(null===(ce=x.currentUser)||void 0===ce?void 0:ce.uid)||null,!x._deleted&&(x._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var y=this;return(0,E.Z)(function*(){if(y._deleted)return;const w=yield y.assertedPersistence.getCurrentUser();if(y.currentUser||w){if(y.currentUser&&w&&y.currentUser.uid===w.uid)return y._currentUser._assign(w),void(yield y.currentUser.getIdToken());yield y._updateCurrentUser(w,!0)}})()}initializeCurrentUser(y){var w=this;return(0,E.Z)(function*(){var x;const Q=yield w.assertedPersistence.getCurrentUser();let ce=Q,je=!1;if(y&&w.config.authDomain){yield w.getOrInitRedirectPersistenceManager();const at=null===(x=w.redirectUser)||void 0===x?void 0:x._redirectEventId,St=ce?._redirectEventId,pn=yield w.tryRedirectSignIn(y);(!at||at===St)&&pn?.user&&(ce=pn.user,je=!0)}if(!ce)return w.directlySetCurrentUser(null);if(!ce._redirectEventId){if(je)try{yield w.beforeStateQueue.runMiddleware(ce)}catch(at){ce=Q,w._popupRedirectResolver._overrideRedirectResult(w,()=>Promise.reject(at))}return ce?w.reloadAndSetCurrentUserOrClear(ce):w.directlySetCurrentUser(null)}return de(w._popupRedirectResolver,w,"argument-error"),yield w.getOrInitRedirectPersistenceManager(),w.redirectUser&&w.redirectUser._redirectEventId===ce._redirectEventId?w.directlySetCurrentUser(ce):w.reloadAndSetCurrentUserOrClear(ce)})()}tryRedirectSignIn(y){var w=this;return(0,E.Z)(function*(){let x=null;try{x=yield w._popupRedirectResolver._completeRedirectFn(w,y,!0)}catch{yield w._setRedirectUser(null)}return x})()}reloadAndSetCurrentUserOrClear(y){var w=this;return(0,E.Z)(function*(){try{yield dr(y)}catch(x){if("auth/network-request-failed"!==x?.code)return w.directlySetCurrentUser(null)}return w.directlySetCurrentUser(y)})()}useDeviceLanguage(){this.languageCode=function tn(){if(typeof navigator>"u")return null;const P=navigator;return P.languages&&P.languages[0]||P.language||null}()}_delete(){var y=this;return(0,E.Z)(function*(){y._deleted=!0})()}updateCurrentUser(y){var w=this;return(0,E.Z)(function*(){const x=y?(0,le.m9)(y):null;return x&&de(x.auth.config.apiKey===w.config.apiKey,w,"invalid-user-token"),w._updateCurrentUser(x&&x._clone(w))})()}_updateCurrentUser(y,w=!1){var x=this;return(0,E.Z)(function*(){if(!x._deleted)return y&&de(x.tenantId===y.tenantId,x,"tenant-id-mismatch"),w||(yield x.beforeStateQueue.runMiddleware(y)),x.queue((0,E.Z)(function*(){yield x.directlySetCurrentUser(y),x.notifyAuthListeners()}))})()}signOut(){var y=this;return(0,E.Z)(function*(){return yield y.beforeStateQueue.runMiddleware(null),(y.redirectPersistenceManager||y._popupRedirectResolver)&&(yield y._setRedirectUser(null)),y._updateCurrentUser(null,!0)})()}setPersistence(y){var w=this;return this.queue((0,E.Z)(function*(){yield w.assertedPersistence.setPersistence(Le(y))}))}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(y){var w=this;return(0,E.Z)(function*(){w._getPasswordPolicyInternal()||(yield w._updatePasswordPolicy());const x=w._getPasswordPolicyInternal();return x.schemaVersion!==w.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(w._errorFactory.create("unsupported-password-policy-schema-version",{})):x.validatePassword(y)})()}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){var y=this;return(0,E.Z)(function*(){const w=yield function Hi(P){return Ds.apply(this,arguments)}(y),x=new Yo(w);null===y.tenantId?y._projectPasswordPolicy=x:y._tenantPasswordPolicies[y.tenantId]=x})()}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(y){this._errorFactory=new le.LL("auth","Firebase",y())}onAuthStateChanged(y,w,x){return this.registerStateListener(this.authStateSubscription,y,w,x)}beforeAuthStateChanged(y,w){return this.beforeStateQueue.pushCallback(y,w)}onIdTokenChanged(y,w,x){return this.registerStateListener(this.idTokenSubscription,y,w,x)}authStateReady(){return new Promise((y,w)=>{if(this.currentUser)y();else{const x=this.onAuthStateChanged(()=>{x(),y()},w)}})}toJSON(){var y;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(y=this._currentUser)||void 0===y?void 0:y.toJSON()}}_setRedirectUser(y,w){var x=this;return(0,E.Z)(function*(){const Q=yield x.getOrInitRedirectPersistenceManager(w);return null===y?Q.removeCurrentUser():Q.setCurrentUser(y)})()}getOrInitRedirectPersistenceManager(y){var w=this;return(0,E.Z)(function*(){if(!w.redirectPersistenceManager){const x=y&&Le(y)||w._popupRedirectResolver;de(x,w,"argument-error"),w.redirectPersistenceManager=yield gn.create(w,[Le(x._redirectPersistence)],"redirectUser"),w.redirectUser=yield w.redirectPersistenceManager.getCurrentUser()}return w.redirectPersistenceManager})()}_redirectUserForId(y){var w=this;return(0,E.Z)(function*(){var x,Q;return w._isInitialized&&(yield w.queue((0,E.Z)(function*(){}))),(null===(x=w._currentUser)||void 0===x?void 0:x._redirectEventId)===y?w._currentUser:(null===(Q=w.redirectUser)||void 0===Q?void 0:Q._redirectEventId)===y?w.redirectUser:null})()}_persistUserIfCurrent(y){var w=this;return(0,E.Z)(function*(){if(y===w.currentUser)return w.queue((0,E.Z)(function*(){return w.directlySetCurrentUser(y)}))})()}_notifyListenersIfCurrent(y){y===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var y,w;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const x=null!==(w=null===(y=this.currentUser)||void 0===y?void 0:y.uid)&&void 0!==w?w:null;this.lastNotifiedUid!==x&&(this.lastNotifiedUid=x,this.authStateSubscription.next(this.currentUser))}registerStateListener(y,w,x,Q){if(this._deleted)return()=>{};const ce="function"==typeof w?w:w.next.bind(w);let je=!1;const at=this._isInitialized?Promise.resolve():this._initializationPromise;if(de(at,this,"internal-error"),at.then(()=>{je||ce(this.currentUser)}),"function"==typeof w){const St=y.addObserver(w,x,Q);return()=>{je=!0,St()}}{const St=y.addObserver(w);return()=>{je=!0,St()}}}directlySetCurrentUser(y){var w=this;return(0,E.Z)(function*(){w.currentUser&&w.currentUser!==y&&w._currentUser._stopProactiveRefresh(),y&&w.isProactiveRefreshEnabled&&y._startProactiveRefresh(),w.currentUser=y,y?yield w.assertedPersistence.setCurrentUser(y):yield w.assertedPersistence.removeCurrentUser()})()}queue(y){return this.operations=this.operations.then(y,y),this.operations}get assertedPersistence(){return de(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(y){!y||this.frameworks.includes(y)||(this.frameworks.push(y),this.frameworks.sort(),this.clientVersion=Mr(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var y=this;return(0,E.Z)(function*(){var w;const x={"X-Client-Version":y.clientVersion};y.app.options.appId&&(x["X-Firebase-gmpid"]=y.app.options.appId);const Q=yield null===(w=y.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===w?void 0:w.getHeartbeatsHeader();Q&&(x["X-Firebase-Client"]=Q);const ce=yield y._getAppCheckToken();return ce&&(x["X-Firebase-AppCheck"]=ce),x})()}_getAppCheckToken(){var y=this;return(0,E.Z)(function*(){var w;const x=yield null===(w=y.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===w?void 0:w.getToken();return x?.error&&function Re(P,...y){jt.logLevel<=Ne.in.WARN&&jt.warn(`Auth (${Oe.SDK_VERSION}): ${P}`,...y)}(`Error while retrieving App Check token: ${x.error}`),x?.token})()}}class Ya{constructor(y){this.auth=y,this.observer=null,this.addObserver=(0,le.ne)(w=>this.observer=w)}get next(){return de(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function ns(){return(ns=(0,E.Z)(function*(P,y){return Xe(P,"POST","/v1/accounts:sendOobCode",Ue(P,y))})).apply(this,arguments)}function rs(){return(rs=(0,E.Z)(function*(P,y){return function fi(P,y){return ns.apply(this,arguments)}(P,y)})).apply(this,arguments)}function lo(){return lo=(0,E.Z)(function*(P,y){const w=(0,le.m9)(P),Q={requestType:"VERIFY_EMAIL",idToken:yield P.getIdToken()};y&&function Vs(P,y,w){var x;de((null===(x=w.url)||void 0===x?void 0:x.length)>0,P,"invalid-continue-uri"),de(typeof w.dynamicLinkDomain>"u"||w.dynamicLinkDomain.length>0,P,"invalid-dynamic-link-domain"),y.continueUrl=w.url,y.dynamicLinkDomain=w.dynamicLinkDomain,y.canHandleCodeInApp=w.handleCodeInApp,w.iOS&&(de(w.iOS.bundleId.length>0,P,"missing-ios-bundle-id"),y.iOSBundleId=w.iOS.bundleId),w.android&&(de(w.android.packageName.length>0,P,"missing-android-pkg-name"),y.androidInstallApp=w.android.installApp,y.androidMinimumVersionCode=w.android.minimumVersion,y.androidPackageName=w.android.packageName)}(w.auth,Q,y);const{email:ce}=yield function Dr(P,y){return rs.apply(this,arguments)}(w.auth,Q);ce!==P.email&&(yield P.reload())}),lo.apply(this,arguments)}(function Zo(P){return`__${P}${Math.floor(1e6*Math.random())}`})("rcb"),new Bt(3e4,6e4),new Bt(2e3,1e4),new Bt(3e4,6e4),new Bt(5e3,15e3),encodeURIComponent("fac");var kd="@firebase/auth";class Oc{constructor(y){this.auth=y,this.internalListeners=new Map}getUid(){var y;return this.assertAuthConfigured(),(null===(y=this.auth.currentUser)||void 0===y?void 0:y.uid)||null}getToken(y){var w=this;return(0,E.Z)(function*(){return w.assertAuthConfigured(),yield w.auth._initializationPromise,w.auth.currentUser?{accessToken:yield w.auth.currentUser.getIdToken(y)}:null})()}addAuthTokenListener(y){if(this.assertAuthConfigured(),this.internalListeners.has(y))return;const w=this.auth.onIdTokenChanged(x=>{y(x?.stsTokenManager.accessToken||null)});this.internalListeners.set(y,w),this.updateProactiveRefresh()}removeAuthTokenListener(y){this.assertAuthConfigured();const w=this.internalListeners.get(y);w&&(this.internalListeners.delete(y),w(),this.updateProactiveRefresh())}assertAuthConfigured(){de(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}(0,le.Pz)("authIdTokenMaxAge"),function ja(P){(0,Oe._registerComponent)(new ke.wA("auth",(y,{options:w})=>{const x=y.getProvider("app").getImmediate(),Q=y.getProvider("heartbeat"),ce=y.getProvider("app-check-internal"),{apiKey:je,authDomain:at}=x.options;de(je&&!je.includes(":"),"invalid-api-key",{appName:x.name});const St={apiKey:je,authDomain:at,clientPlatform:P,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Mr(P)},pn=new Ka(x,Q,ce,St);return function di(P,y){const w=y?.persistence||[],x=(Array.isArray(w)?w:[w]).map(Le);y?.errorMap&&P._updateErrorMap(y.errorMap),P._initializeWithPersistence(x,y?.popupRedirectResolver)}(pn,w),pn},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((y,w,x)=>{y.getProvider("auth-internal").initialize()})),(0,Oe._registerComponent)(new ke.wA("auth-internal",y=>{const w=function Mn(P){return(0,le.m9)(P)}(y.getProvider("auth").getImmediate());return new Oc(w)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,Oe.registerVersion)(kd,"1.3.1",function nd(P){switch(P){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(P)),(0,Oe.registerVersion)(kd,"1.3.1","esm2017")}("Browser");var js=G(5879),Ih=G(7213),Mc=G(9027);let Ld=(()=>{class P{constructor(w,x){this.afauth=w,this.firestore=x}sendVerificationEmail(){var w=this;return(0,E.Z)(function*(){const x=yield w.afauth.currentUser;if(!x)throw new Error("El usuario actual es nulo.");try{yield function Sc(P,y){return lo.apply(this,arguments)}(x)}catch(Q){console.error("Error al enviar el correo de verificaci\xf3n:",Q)}})()}register(w,x){var Q=this;return(0,E.Z)(function*(){try{const ce=yield Q.afauth.createUserWithEmailAndPassword(w,x);return ce&&ce.user?(yield Q.sendVerificationEmail(),ce):(console.log("No se pudo obtener el usuario despu\xe9s del registro."),null)}catch(ce){return console.log("Error en register: ",ce),null}})()}login(w,x){var Q=this;return(0,E.Z)(function*(){try{const ce=yield Q.afauth.signInWithEmailAndPassword(w,x);return ce.user?ce:null}catch(ce){return console.log("error en login: ",ce),null}})()}getUserLogged(){return this.afauth.authState}getAuthState(){return this.afauth.authState}logout(){this.afauth.signOut()}getUserEmail(){return this.afauth.authState.pipe((0,me.U)(w=>w?w.email:null))}getUserEmailByUID(w){return this.firestore.collection("users").doc(w).valueChanges().pipe((0,me.U)(x=>x?x.email:null))}static#e=this.\u0275fac=function(x){return new(x||P)(js.LFG(Ih.zQ),js.LFG(Mc.ST))};static#t=this.\u0275prov=js.Yz7({token:P,factory:P.\u0275fac,providedIn:"root"})}return P})()},6751:(Wt,Je,G)=>{G.d(Je,{T:()=>le});var E=G(5879),me=G(9027);let le=(()=>{class Oe{constructor(Te){this.firestore=Te,this.usuarios=[],this.obtenerTodos("usuarios").subscribe(ke=>{this.usuarios=ke.map(T=>{let qe=T.payload.doc.data();return qe.id=T.payload.doc.id,qe})})}crear(Te,ke){return this.firestore.collection(Te).add(ke)}obtenerPorId(Te,ke){return this.firestore.collection(Te).doc(ke).snapshotChanges()}obtenerTodos(Te){return this.firestore.collection(Te).snapshotChanges()}actualizar(Te,ke,T){return this.firestore.collection(Te).doc(T).set(ke)}eliminar(Te,ke){return this.firestore.collection(Te).doc(ke).delete()}createWithCustomId(Te,ke,T){this.firestore.collection(Te).doc(ke).set(T)}static#e=this.\u0275fac=function(ke){return new(ke||Oe)(E.LFG(me.ST))};static#t=this.\u0275prov=E.Yz7({token:Oe,factory:Oe.\u0275fac,providedIn:"root"})}return Oe})()},4913:(Wt,Je,G)=>{var E=G(6593),me=G(9672);E.q6().bootstrapModule(me.b9).catch(le=>console.error(le))},5619:(Wt,Je,G)=>{G.d(Je,{X:()=>me});var E=G(8645);class me extends E.x{constructor(Oe){super(),this._value=Oe}get value(){return this.getValue()}_subscribe(Oe){const Ne=super._subscribe(Oe);return!Ne.closed&&Oe.next(this._value),Ne}getValue(){const{hasError:Oe,thrownError:Ne,_value:Te}=this;if(Oe)throw Ne;return this._throwIfClosed(),Te}next(Oe){super.next(this._value=Oe)}}},5592:(Wt,Je,G)=>{G.d(Je,{y:()=>T});var E=G(305),me=G(7394),le=G(4850),Oe=G(8407),Ne=G(2653),Te=G(4674),ke=G(1441);let T=(()=>{class Ve{constructor(st){st&&(this._subscribe=st)}lift(st){const Et=new Ve;return Et.source=this,Et.operator=st,Et}subscribe(st,Et,mt){const Ct=function Ie(Ve){return Ve&&Ve instanceof E.Lv||function ye(Ve){return Ve&&(0,Te.m)(Ve.next)&&(0,Te.m)(Ve.error)&&(0,Te.m)(Ve.complete)}(Ve)&&(0,me.Nn)(Ve)}(st)?st:new E.Hp(st,Et,mt);return(0,ke.x)(()=>{const{operator:bt,source:jt}=this;Ct.add(bt?bt.call(Ct,jt):jt?this._subscribe(Ct):this._trySubscribe(Ct))}),Ct}_trySubscribe(st){try{return this._subscribe(st)}catch(Et){st.error(Et)}}forEach(st,Et){return new(Et=qe(Et))((mt,Ct)=>{const bt=new E.Hp({next:jt=>{try{st(jt)}catch(Re){Ct(Re),bt.unsubscribe()}},error:Ct,complete:mt});this.subscribe(bt)})}_subscribe(st){var Et;return null===(Et=this.source)||void 0===Et?void 0:Et.subscribe(st)}[le.L](){return this}pipe(...st){return(0,Oe.U)(st)(this)}toPromise(st){return new(st=qe(st))((Et,mt)=>{let Ct;this.subscribe(bt=>Ct=bt,bt=>mt(bt),()=>Et(Ct))})}}return Ve.create=ht=>new Ve(ht),Ve})();function qe(Ve){var ht;return null!==(ht=Ve??Ne.config.Promise)&&void 0!==ht?ht:Promise}},8645:(Wt,Je,G)=>{G.d(Je,{x:()=>ke});var E=G(5592),me=G(7394);const Oe=(0,G(2306).d)(qe=>function(){qe(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var Ne=G(9039),Te=G(1441);let ke=(()=>{class qe extends E.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(Ie){const Ve=new T(this,this);return Ve.operator=Ie,Ve}_throwIfClosed(){if(this.closed)throw new Oe}next(Ie){(0,Te.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const Ve of this.currentObservers)Ve.next(Ie)}})}error(Ie){(0,Te.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=Ie;const{observers:Ve}=this;for(;Ve.length;)Ve.shift().error(Ie)}})}complete(){(0,Te.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:Ie}=this;for(;Ie.length;)Ie.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var Ie;return(null===(Ie=this.observers)||void 0===Ie?void 0:Ie.length)>0}_trySubscribe(Ie){return this._throwIfClosed(),super._trySubscribe(Ie)}_subscribe(Ie){return this._throwIfClosed(),this._checkFinalizedStatuses(Ie),this._innerSubscribe(Ie)}_innerSubscribe(Ie){const{hasError:Ve,isStopped:ht,observers:st}=this;return Ve||ht?me.Lc:(this.currentObservers=null,st.push(Ie),new me.w0(()=>{this.currentObservers=null,(0,Ne.P)(st,Ie)}))}_checkFinalizedStatuses(Ie){const{hasError:Ve,thrownError:ht,isStopped:st}=this;Ve?Ie.error(ht):st&&Ie.complete()}asObservable(){const Ie=new E.y;return Ie.source=this,Ie}}return qe.create=(ye,Ie)=>new T(ye,Ie),qe})();class T extends ke{constructor(ye,Ie){super(),this.destination=ye,this.source=Ie}next(ye){var Ie,Ve;null===(Ve=null===(Ie=this.destination)||void 0===Ie?void 0:Ie.next)||void 0===Ve||Ve.call(Ie,ye)}error(ye){var Ie,Ve;null===(Ve=null===(Ie=this.destination)||void 0===Ie?void 0:Ie.error)||void 0===Ve||Ve.call(Ie,ye)}complete(){var ye,Ie;null===(Ie=null===(ye=this.destination)||void 0===ye?void 0:ye.complete)||void 0===Ie||Ie.call(ye)}_subscribe(ye){var Ie,Ve;return null!==(Ve=null===(Ie=this.source)||void 0===Ie?void 0:Ie.subscribe(ye))&&void 0!==Ve?Ve:me.Lc}}},305:(Wt,Je,G)=>{G.d(Je,{Hp:()=>mt,Lv:()=>Ve});var E=G(4674),me=G(7394),le=G(2653),Oe=G(3894),Ne=G(2420);const Te=qe("C",void 0,void 0);function qe(_e,He,Pe){return{kind:_e,value:He,error:Pe}}var ye=G(7599),Ie=G(1441);class Ve extends me.w0{constructor(He){super(),this.isStopped=!1,He?(this.destination=He,(0,me.Nn)(He)&&He.add(this)):this.destination=Re}static create(He,Pe,$e){return new mt(He,Pe,$e)}next(He){this.isStopped?jt(function T(_e){return qe("N",_e,void 0)}(He),this):this._next(He)}error(He){this.isStopped?jt(function ke(_e){return qe("E",void 0,_e)}(He),this):(this.isStopped=!0,this._error(He))}complete(){this.isStopped?jt(Te,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(He){this.destination.next(He)}_error(He){try{this.destination.error(He)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const ht=Function.prototype.bind;function st(_e,He){return ht.call(_e,He)}class Et{constructor(He){this.partialObserver=He}next(He){const{partialObserver:Pe}=this;if(Pe.next)try{Pe.next(He)}catch($e){Ct($e)}}error(He){const{partialObserver:Pe}=this;if(Pe.error)try{Pe.error(He)}catch($e){Ct($e)}else Ct(He)}complete(){const{partialObserver:He}=this;if(He.complete)try{He.complete()}catch(Pe){Ct(Pe)}}}class mt extends Ve{constructor(He,Pe,$e){let ot;if(super(),(0,E.m)(He)||!He)ot={next:He??void 0,error:Pe??void 0,complete:$e??void 0};else{let ft;this&&le.config.useDeprecatedNextContext?(ft=Object.create(He),ft.unsubscribe=()=>this.unsubscribe(),ot={next:He.next&&st(He.next,ft),error:He.error&&st(He.error,ft),complete:He.complete&&st(He.complete,ft)}):ot=He}this.destination=new Et(ot)}}function Ct(_e){le.config.useDeprecatedSynchronousErrorHandling?(0,Ie.O)(_e):(0,Oe.h)(_e)}function jt(_e,He){const{onStoppedNotification:Pe}=le.config;Pe&&ye.z.setTimeout(()=>Pe(_e,He))}const Re={closed:!0,next:Ne.Z,error:function bt(_e){throw _e},complete:Ne.Z}},7394:(Wt,Je,G)=>{G.d(Je,{Lc:()=>Te,w0:()=>Ne,Nn:()=>ke});var E=G(4674);const le=(0,G(2306).d)(qe=>function(Ie){qe(this),this.message=Ie?`${Ie.length} errors occurred during unsubscription:\n${Ie.map((Ve,ht)=>`${ht+1}) ${Ve.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=Ie});var Oe=G(9039);class Ne{constructor(ye){this.initialTeardown=ye,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let ye;if(!this.closed){this.closed=!0;const{_parentage:Ie}=this;if(Ie)if(this._parentage=null,Array.isArray(Ie))for(const st of Ie)st.remove(this);else Ie.remove(this);const{initialTeardown:Ve}=this;if((0,E.m)(Ve))try{Ve()}catch(st){ye=st instanceof le?st.errors:[st]}const{_finalizers:ht}=this;if(ht){this._finalizers=null;for(const st of ht)try{T(st)}catch(Et){ye=ye??[],Et instanceof le?ye=[...ye,...Et.errors]:ye.push(Et)}}if(ye)throw new le(ye)}}add(ye){var Ie;if(ye&&ye!==this)if(this.closed)T(ye);else{if(ye instanceof Ne){if(ye.closed||ye._hasParent(this))return;ye._addParent(this)}(this._finalizers=null!==(Ie=this._finalizers)&&void 0!==Ie?Ie:[]).push(ye)}}_hasParent(ye){const{_parentage:Ie}=this;return Ie===ye||Array.isArray(Ie)&&Ie.includes(ye)}_addParent(ye){const{_parentage:Ie}=this;this._parentage=Array.isArray(Ie)?(Ie.push(ye),Ie):Ie?[Ie,ye]:ye}_removeParent(ye){const{_parentage:Ie}=this;Ie===ye?this._parentage=null:Array.isArray(Ie)&&(0,Oe.P)(Ie,ye)}remove(ye){const{_finalizers:Ie}=this;Ie&&(0,Oe.P)(Ie,ye),ye instanceof Ne&&ye._removeParent(this)}}Ne.EMPTY=(()=>{const qe=new Ne;return qe.closed=!0,qe})();const Te=Ne.EMPTY;function ke(qe){return qe instanceof Ne||qe&&"closed"in qe&&(0,E.m)(qe.remove)&&(0,E.m)(qe.add)&&(0,E.m)(qe.unsubscribe)}function T(qe){(0,E.m)(qe)?qe():qe.unsubscribe()}},2653:(Wt,Je,G)=>{G.d(Je,{config:()=>E});const E={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},5211:(Wt,Je,G)=>{G.d(Je,{z:()=>Ne});var E=G(7537),le=G(9940),Oe=G(2459);function Ne(...Te){return function me(){return(0,E.J)(1)}()((0,Oe.D)(Te,(0,le.yG)(Te)))}},6232:(Wt,Je,G)=>{G.d(Je,{E:()=>me});const me=new(G(5592).y)(Ne=>Ne.complete())},2459:(Wt,Je,G)=>{G.d(Je,{D:()=>He});var E=G(4829),me=G(3093),le=G(5137),Te=G(5592),T=G(4971),qe=G(4674),ye=G(7103);function Ve(Pe,$e){if(!Pe)throw new Error("Iterable cannot be null");return new Te.y(ot=>{(0,ye.f)(ot,$e,()=>{const ft=Pe[Symbol.asyncIterator]();(0,ye.f)(ot,$e,()=>{ft.next().then(de=>{de.done?ot.complete():ot.next(de.value)})},0,!0)})})}var ht=G(8382),st=G(4026),Et=G(4266),mt=G(3664),Ct=G(5726),bt=G(9853),jt=G(541);function He(Pe,$e){return $e?function _e(Pe,$e){if(null!=Pe){if((0,ht.c)(Pe))return function Oe(Pe,$e){return(0,E.Xf)(Pe).pipe((0,le.R)($e),(0,me.Q)($e))}(Pe,$e);if((0,Et.z)(Pe))return function ke(Pe,$e){return new Te.y(ot=>{let ft=0;return $e.schedule(function(){ft===Pe.length?ot.complete():(ot.next(Pe[ft++]),ot.closed||this.schedule())})})}(Pe,$e);if((0,st.t)(Pe))return function Ne(Pe,$e){return(0,E.Xf)(Pe).pipe((0,le.R)($e),(0,me.Q)($e))}(Pe,$e);if((0,Ct.D)(Pe))return Ve(Pe,$e);if((0,mt.T)(Pe))return function Ie(Pe,$e){return new Te.y(ot=>{let ft;return(0,ye.f)(ot,$e,()=>{ft=Pe[T.h](),(0,ye.f)(ot,$e,()=>{let de,Ot;try{({value:de,done:Ot}=ft.next())}catch(wt){return void ot.error(wt)}Ot?ot.complete():ot.next(de)},0,!0)}),()=>(0,qe.m)(ft?.return)&&ft.return()})}(Pe,$e);if((0,jt.L)(Pe))return function Re(Pe,$e){return Ve((0,jt.Q)(Pe),$e)}(Pe,$e)}throw(0,bt.z)(Pe)}(Pe,$e):(0,E.Xf)(Pe)}},4829:(Wt,Je,G)=>{G.d(Je,{Xf:()=>ht});var E=G(7582),me=G(4266),le=G(4026),Oe=G(5592),Ne=G(8382),Te=G(5726),ke=G(9853),T=G(3664),qe=G(541),ye=G(4674),Ie=G(3894),Ve=G(4850);function ht(_e){if(_e instanceof Oe.y)return _e;if(null!=_e){if((0,Ne.c)(_e))return function st(_e){return new Oe.y(He=>{const Pe=_e[Ve.L]();if((0,ye.m)(Pe.subscribe))return Pe.subscribe(He);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(_e);if((0,me.z)(_e))return function Et(_e){return new Oe.y(He=>{for(let Pe=0;Pe<_e.length&&!He.closed;Pe++)He.next(_e[Pe]);He.complete()})}(_e);if((0,le.t)(_e))return function mt(_e){return new Oe.y(He=>{_e.then(Pe=>{He.closed||(He.next(Pe),He.complete())},Pe=>He.error(Pe)).then(null,Ie.h)})}(_e);if((0,Te.D)(_e))return bt(_e);if((0,T.T)(_e))return function Ct(_e){return new Oe.y(He=>{for(const Pe of _e)if(He.next(Pe),He.closed)return;He.complete()})}(_e);if((0,qe.L)(_e))return function jt(_e){return bt((0,qe.Q)(_e))}(_e)}throw(0,ke.z)(_e)}function bt(_e){return new Oe.y(He=>{(function Re(_e,He){var Pe,$e,ot,ft;return(0,E.mG)(this,void 0,void 0,function*(){try{for(Pe=(0,E.KL)(_e);!($e=yield Pe.next()).done;)if(He.next($e.value),He.closed)return}catch(de){ot={error:de}}finally{try{$e&&!$e.done&&(ft=Pe.return)&&(yield ft.call(Pe))}finally{if(ot)throw ot.error}}He.complete()})})(_e,He).catch(Pe=>He.error(Pe))})}},3019:(Wt,Je,G)=>{G.d(Je,{T:()=>Te});var E=G(7537),me=G(4829),le=G(6232),Oe=G(9940),Ne=G(2459);function Te(...ke){const T=(0,Oe.yG)(ke),qe=(0,Oe._6)(ke,1/0),ye=ke;return ye.length?1===ye.length?(0,me.Xf)(ye[0]):(0,E.J)(qe)((0,Ne.D)(ye,T)):le.E}},2096:(Wt,Je,G)=>{G.d(Je,{of:()=>le});var E=G(9940),me=G(2459);function le(...Oe){const Ne=(0,E.yG)(Oe);return(0,me.D)(Oe,Ne)}},8251:(Wt,Je,G)=>{G.d(Je,{x:()=>me});var E=G(305);function me(Oe,Ne,Te,ke,T){return new le(Oe,Ne,Te,ke,T)}class le extends E.Lv{constructor(Ne,Te,ke,T,qe,ye){super(Ne),this.onFinalize=qe,this.shouldUnsubscribe=ye,this._next=Te?function(Ie){try{Te(Ie)}catch(Ve){Ne.error(Ve)}}:super._next,this._error=T?function(Ie){try{T(Ie)}catch(Ve){Ne.error(Ve)}finally{this.unsubscribe()}}:super._error,this._complete=ke?function(){try{ke()}catch(Ie){Ne.error(Ie)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var Ne;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:Te}=this;super.unsubscribe(),!Te&&(null===(Ne=this.onFinalize)||void 0===Ne||Ne.call(this))}}}},3572:(Wt,Je,G)=>{G.d(Je,{d:()=>le});var E=G(9360),me=G(8251);function le(Oe){return(0,E.e)((Ne,Te)=>{let ke=!1;Ne.subscribe((0,me.x)(Te,T=>{ke=!0,Te.next(T)},()=>{ke||Te.next(Oe),Te.complete()}))})}},3997:(Wt,Je,G)=>{G.d(Je,{x:()=>Oe});var E=G(2737),me=G(9360),le=G(8251);function Oe(Te,ke=E.y){return Te=Te??Ne,(0,me.e)((T,qe)=>{let ye,Ie=!0;T.subscribe((0,le.x)(qe,Ve=>{const ht=ke(Ve);(Ie||!Te(ye,ht))&&(Ie=!1,ye=ht,qe.next(Ve))}))})}function Ne(Te,ke){return Te===ke}},2181:(Wt,Je,G)=>{G.d(Je,{h:()=>le});var E=G(9360),me=G(8251);function le(Oe,Ne){return(0,E.e)((Te,ke)=>{let T=0;Te.subscribe((0,me.x)(ke,qe=>Oe.call(Ne,qe,T++)&&ke.next(qe)))})}},1374:(Wt,Je,G)=>{G.d(Je,{P:()=>ke});var E=G(6973),me=G(2181),le=G(8180),Oe=G(3572),Ne=G(3026),Te=G(2737);function ke(T,qe){const ye=arguments.length>=2;return Ie=>Ie.pipe(T?(0,me.h)((Ve,ht)=>T(Ve,ht,Ie)):Te.y,(0,le.q)(1),ye?(0,Oe.d)(qe):(0,Ne.T)(()=>new E.K))}},7398:(Wt,Je,G)=>{G.d(Je,{U:()=>le});var E=G(9360),me=G(8251);function le(Oe,Ne){return(0,E.e)((Te,ke)=>{let T=0;Te.subscribe((0,me.x)(ke,qe=>{ke.next(Oe.call(Ne,qe,T++))}))})}},975:(Wt,Je,G)=>{G.d(Je,{h:()=>me});var E=G(7398);function me(le){return(0,E.U)(()=>le)}},7537:(Wt,Je,G)=>{G.d(Je,{J:()=>le});var E=G(1631),me=G(2737);function le(Oe=1/0){return(0,E.z)(me.y,Oe)}},1631:(Wt,Je,G)=>{G.d(Je,{z:()=>T});var E=G(7398),me=G(4829),le=G(9360),Oe=G(7103),Ne=G(8251),ke=G(4674);function T(qe,ye,Ie=1/0){return(0,ke.m)(ye)?T((Ve,ht)=>(0,E.U)((st,Et)=>ye(Ve,st,ht,Et))((0,me.Xf)(qe(Ve,ht))),Ie):("number"==typeof ye&&(Ie=ye),(0,le.e)((Ve,ht)=>function Te(qe,ye,Ie,Ve,ht,st,Et,mt){const Ct=[];let bt=0,jt=0,Re=!1;const _e=()=>{Re&&!Ct.length&&!bt&&ye.complete()},He=$e=>bt<Ve?Pe($e):Ct.push($e),Pe=$e=>{st&&ye.next($e),bt++;let ot=!1;(0,me.Xf)(Ie($e,jt++)).subscribe((0,Ne.x)(ye,ft=>{ht?.(ft),st?He(ft):ye.next(ft)},()=>{ot=!0},void 0,()=>{if(ot)try{for(bt--;Ct.length&&bt<Ve;){const ft=Ct.shift();Et?(0,Oe.f)(ye,Et,()=>Pe(ft)):Pe(ft)}_e()}catch(ft){ye.error(ft)}}))};return qe.subscribe((0,Ne.x)(ye,He,()=>{Re=!0,_e()})),()=>{mt?.()}}(Ve,ht,qe,Ie)))}},3093:(Wt,Je,G)=>{G.d(Je,{Q:()=>Oe});var E=G(7103),me=G(9360),le=G(8251);function Oe(Ne,Te=0){return(0,me.e)((ke,T)=>{ke.subscribe((0,le.x)(T,qe=>(0,E.f)(T,Ne,()=>T.next(qe),Te),()=>(0,E.f)(T,Ne,()=>T.complete(),Te),qe=>(0,E.f)(T,Ne,()=>T.error(qe),Te)))})}},6699:(Wt,Je,G)=>{G.d(Je,{R:()=>Oe});var E=G(9360),me=G(8251);function Oe(Ne,Te){return(0,E.e)(function le(Ne,Te,ke,T,qe){return(ye,Ie)=>{let Ve=ke,ht=Te,st=0;ye.subscribe((0,me.x)(Ie,Et=>{const mt=st++;ht=Ve?Ne(ht,Et,mt):(Ve=!0,Et),T&&Ie.next(ht)},qe&&(()=>{Ve&&Ie.next(ht),Ie.complete()})))}}(Ne,Te,arguments.length>=2,!0))}},3020:(Wt,Je,G)=>{G.d(Je,{B:()=>Ne});var E=G(4829),me=G(8645),le=G(305),Oe=G(9360);function Ne(ke={}){const{connector:T=(()=>new me.x),resetOnError:qe=!0,resetOnComplete:ye=!0,resetOnRefCountZero:Ie=!0}=ke;return Ve=>{let ht,st,Et,mt=0,Ct=!1,bt=!1;const jt=()=>{st?.unsubscribe(),st=void 0},Re=()=>{jt(),ht=Et=void 0,Ct=bt=!1},_e=()=>{const He=ht;Re(),He?.unsubscribe()};return(0,Oe.e)((He,Pe)=>{mt++,!bt&&!Ct&&jt();const $e=Et=Et??T();Pe.add(()=>{mt--,0===mt&&!bt&&!Ct&&(st=Te(_e,Ie))}),$e.subscribe(Pe),!ht&&mt>0&&(ht=new le.Hp({next:ot=>$e.next(ot),error:ot=>{bt=!0,jt(),st=Te(Re,qe,ot),$e.error(ot)},complete:()=>{Ct=!0,jt(),st=Te(Re,ye),$e.complete()}}),(0,E.Xf)(He).subscribe(ht))})(Ve)}}function Te(ke,T,...qe){if(!0===T)return void ke();if(!1===T)return;const ye=new le.Hp({next:()=>{ye.unsubscribe(),ke()}});return(0,E.Xf)(T(...qe)).subscribe(ye)}},7921:(Wt,Je,G)=>{G.d(Je,{O:()=>Oe});var E=G(5211),me=G(9940),le=G(9360);function Oe(...Ne){const Te=(0,me.yG)(Ne);return(0,le.e)((ke,T)=>{(Te?(0,E.z)(Ne,ke,Te):(0,E.z)(Ne,ke)).subscribe(T)})}},5137:(Wt,Je,G)=>{G.d(Je,{R:()=>me});var E=G(9360);function me(le,Oe=0){return(0,E.e)((Ne,Te)=>{Te.add(le.schedule(()=>Ne.subscribe(Te),Oe))})}},4664:(Wt,Je,G)=>{G.d(Je,{w:()=>Oe});var E=G(4829),me=G(9360),le=G(8251);function Oe(Ne,Te){return(0,me.e)((ke,T)=>{let qe=null,ye=0,Ie=!1;const Ve=()=>Ie&&!qe&&T.complete();ke.subscribe((0,le.x)(T,ht=>{qe?.unsubscribe();let st=0;const Et=ye++;(0,E.Xf)(Ne(ht,Et)).subscribe(qe=(0,le.x)(T,mt=>T.next(Te?Te(ht,mt,Et,st++):mt),()=>{qe=null,Ve()}))},()=>{Ie=!0,Ve()}))})}},8180:(Wt,Je,G)=>{G.d(Je,{q:()=>Oe});var E=G(6232),me=G(9360),le=G(8251);function Oe(Ne){return Ne<=0?()=>E.E:(0,me.e)((Te,ke)=>{let T=0;Te.subscribe((0,le.x)(ke,qe=>{++T<=Ne&&(ke.next(qe),Ne<=T&&ke.complete())}))})}},9773:(Wt,Je,G)=>{G.d(Je,{R:()=>Ne});var E=G(9360),me=G(8251),le=G(4829),Oe=G(2420);function Ne(Te){return(0,E.e)((ke,T)=>{(0,le.Xf)(Te).subscribe((0,me.x)(T,()=>T.complete(),Oe.Z)),!T.closed&&ke.subscribe(T)})}},9397:(Wt,Je,G)=>{G.d(Je,{b:()=>Ne});var E=G(4674),me=G(9360),le=G(8251),Oe=G(2737);function Ne(Te,ke,T){const qe=(0,E.m)(Te)||ke||T?{next:Te,error:ke,complete:T}:Te;return qe?(0,me.e)((ye,Ie)=>{var Ve;null===(Ve=qe.subscribe)||void 0===Ve||Ve.call(qe);let ht=!0;ye.subscribe((0,le.x)(Ie,st=>{var Et;null===(Et=qe.next)||void 0===Et||Et.call(qe,st),Ie.next(st)},()=>{var st;ht=!1,null===(st=qe.complete)||void 0===st||st.call(qe),Ie.complete()},st=>{var Et;ht=!1,null===(Et=qe.error)||void 0===Et||Et.call(qe,st),Ie.error(st)},()=>{var st,Et;ht&&(null===(st=qe.unsubscribe)||void 0===st||st.call(qe)),null===(Et=qe.finalize)||void 0===Et||Et.call(qe)}))}):Oe.y}},3026:(Wt,Je,G)=>{G.d(Je,{T:()=>Oe});var E=G(6973),me=G(9360),le=G(8251);function Oe(Te=Ne){return(0,me.e)((ke,T)=>{let qe=!1;ke.subscribe((0,le.x)(T,ye=>{qe=!0,T.next(ye)},()=>qe?T.complete():T.error(Te())))})}function Ne(){return new E.K}},1954:(Wt,Je,G)=>{G.d(Je,{o:()=>Ne});var E=G(7394);class me extends E.w0{constructor(ke,T){super()}schedule(ke,T=0){return this}}const le={setInterval(Te,ke,...T){const{delegate:qe}=le;return qe?.setInterval?qe.setInterval(Te,ke,...T):setInterval(Te,ke,...T)},clearInterval(Te){const{delegate:ke}=le;return(ke?.clearInterval||clearInterval)(Te)},delegate:void 0};var Oe=G(9039);class Ne extends me{constructor(ke,T){super(ke,T),this.scheduler=ke,this.work=T,this.pending=!1}schedule(ke,T=0){var qe;if(this.closed)return this;this.state=ke;const ye=this.id,Ie=this.scheduler;return null!=ye&&(this.id=this.recycleAsyncId(Ie,ye,T)),this.pending=!0,this.delay=T,this.id=null!==(qe=this.id)&&void 0!==qe?qe:this.requestAsyncId(Ie,this.id,T),this}requestAsyncId(ke,T,qe=0){return le.setInterval(ke.flush.bind(ke,this),qe)}recycleAsyncId(ke,T,qe=0){if(null!=qe&&this.delay===qe&&!1===this.pending)return T;null!=T&&le.clearInterval(T)}execute(ke,T){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const qe=this._execute(ke,T);if(qe)return qe;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(ke,T){let ye,qe=!1;try{this.work(ke)}catch(Ie){qe=!0,ye=Ie||new Error("Scheduled action threw falsy error")}if(qe)return this.unsubscribe(),ye}unsubscribe(){if(!this.closed){const{id:ke,scheduler:T}=this,{actions:qe}=T;this.work=this.state=this.scheduler=null,this.pending=!1,(0,Oe.P)(qe,this),null!=ke&&(this.id=this.recycleAsyncId(T,ke,null)),this.delay=null,super.unsubscribe()}}}},2631:(Wt,Je,G)=>{G.d(Je,{v:()=>le});var E=G(4552);class me{constructor(Ne,Te=me.now){this.schedulerActionCtor=Ne,this.now=Te}schedule(Ne,Te=0,ke){return new this.schedulerActionCtor(this,Ne).schedule(ke,Te)}}me.now=E.l.now;class le extends me{constructor(Ne,Te=me.now){super(Ne,Te),this.actions=[],this._active=!1}flush(Ne){const{actions:Te}=this;if(this._active)return void Te.push(Ne);let ke;this._active=!0;do{if(ke=Ne.execute(Ne.state,Ne.delay))break}while(Ne=Te.shift());if(this._active=!1,ke){for(;Ne=Te.shift();)Ne.unsubscribe();throw ke}}}},6321:(Wt,Je,G)=>{G.d(Je,{P:()=>Oe,z:()=>le});var E=G(1954);const le=new(G(2631).v)(E.o),Oe=le},4552:(Wt,Je,G)=>{G.d(Je,{l:()=>E});const E={now:()=>(E.delegate||Date).now(),delegate:void 0}},7599:(Wt,Je,G)=>{G.d(Je,{z:()=>E});const E={setTimeout(me,le,...Oe){const{delegate:Ne}=E;return Ne?.setTimeout?Ne.setTimeout(me,le,...Oe):setTimeout(me,le,...Oe)},clearTimeout(me){const{delegate:le}=E;return(le?.clearTimeout||clearTimeout)(me)},delegate:void 0}},4971:(Wt,Je,G)=>{G.d(Je,{h:()=>me});const me=function E(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},4850:(Wt,Je,G)=>{G.d(Je,{L:()=>E});const E="function"==typeof Symbol&&Symbol.observable||"@@observable"},6973:(Wt,Je,G)=>{G.d(Je,{K:()=>me});const me=(0,G(2306).d)(le=>function(){le(this),this.name="EmptyError",this.message="no elements in sequence"})},9940:(Wt,Je,G)=>{G.d(Je,{_6:()=>Te,jO:()=>Oe,yG:()=>Ne});var E=G(4674),me=G(671);function le(ke){return ke[ke.length-1]}function Oe(ke){return(0,E.m)(le(ke))?ke.pop():void 0}function Ne(ke){return(0,me.K)(le(ke))?ke.pop():void 0}function Te(ke,T){return"number"==typeof le(ke)?ke.pop():T}},7453:(Wt,Je,G)=>{G.d(Je,{D:()=>Ne});const{isArray:E}=Array,{getPrototypeOf:me,prototype:le,keys:Oe}=Object;function Ne(ke){if(1===ke.length){const T=ke[0];if(E(T))return{args:T,keys:null};if(function Te(ke){return ke&&"object"==typeof ke&&me(ke)===le}(T)){const qe=Oe(T);return{args:qe.map(ye=>T[ye]),keys:qe}}}return{args:ke,keys:null}}},9039:(Wt,Je,G)=>{function E(me,le){if(me){const Oe=me.indexOf(le);0<=Oe&&me.splice(Oe,1)}}G.d(Je,{P:()=>E})},2306:(Wt,Je,G)=>{function E(me){const Oe=me(Ne=>{Error.call(Ne),Ne.stack=(new Error).stack});return Oe.prototype=Object.create(Error.prototype),Oe.prototype.constructor=Oe,Oe}G.d(Je,{d:()=>E})},2714:(Wt,Je,G)=>{function E(me,le){return me.reduce((Oe,Ne,Te)=>(Oe[Ne]=le[Te],Oe),{})}G.d(Je,{n:()=>E})},1441:(Wt,Je,G)=>{G.d(Je,{O:()=>Oe,x:()=>le});var E=G(2653);let me=null;function le(Ne){if(E.config.useDeprecatedSynchronousErrorHandling){const Te=!me;if(Te&&(me={errorThrown:!1,error:null}),Ne(),Te){const{errorThrown:ke,error:T}=me;if(me=null,ke)throw T}}else Ne()}function Oe(Ne){E.config.useDeprecatedSynchronousErrorHandling&&me&&(me.errorThrown=!0,me.error=Ne)}},7103:(Wt,Je,G)=>{function E(me,le,Oe,Ne=0,Te=!1){const ke=le.schedule(function(){Oe(),Te?me.add(this.schedule(null,Ne)):this.unsubscribe()},Ne);if(me.add(ke),!Te)return ke}G.d(Je,{f:()=>E})},2737:(Wt,Je,G)=>{function E(me){return me}G.d(Je,{y:()=>E})},4266:(Wt,Je,G)=>{G.d(Je,{z:()=>E});const E=me=>me&&"number"==typeof me.length&&"function"!=typeof me},5726:(Wt,Je,G)=>{G.d(Je,{D:()=>me});var E=G(4674);function me(le){return Symbol.asyncIterator&&(0,E.m)(le?.[Symbol.asyncIterator])}},4674:(Wt,Je,G)=>{function E(me){return"function"==typeof me}G.d(Je,{m:()=>E})},8382:(Wt,Je,G)=>{G.d(Je,{c:()=>le});var E=G(4850),me=G(4674);function le(Oe){return(0,me.m)(Oe[E.L])}},3664:(Wt,Je,G)=>{G.d(Je,{T:()=>le});var E=G(4971),me=G(4674);function le(Oe){return(0,me.m)(Oe?.[E.h])}},4026:(Wt,Je,G)=>{G.d(Je,{t:()=>me});var E=G(4674);function me(le){return(0,E.m)(le?.then)}},541:(Wt,Je,G)=>{G.d(Je,{L:()=>Oe,Q:()=>le});var E=G(7582),me=G(4674);function le(Ne){return(0,E.FC)(this,arguments,function*(){const ke=Ne.getReader();try{for(;;){const{value:T,done:qe}=yield(0,E.qq)(ke.read());if(qe)return yield(0,E.qq)(void 0);yield yield(0,E.qq)(T)}}finally{ke.releaseLock()}})}function Oe(Ne){return(0,me.m)(Ne?.getReader)}},671:(Wt,Je,G)=>{G.d(Je,{K:()=>me});var E=G(4674);function me(le){return le&&(0,E.m)(le.schedule)}},9360:(Wt,Je,G)=>{G.d(Je,{A:()=>me,e:()=>le});var E=G(4674);function me(Oe){return(0,E.m)(Oe?.lift)}function le(Oe){return Ne=>{if(me(Ne))return Ne.lift(function(Te){try{return Oe(Te,this)}catch(ke){this.error(ke)}});throw new TypeError("Unable to lift unknown Observable type")}}},7400:(Wt,Je,G)=>{G.d(Je,{Z:()=>Oe});var E=G(7398);const{isArray:me}=Array;function Oe(Ne){return(0,E.U)(Te=>function le(Ne,Te){return me(Te)?Ne(...Te):Ne(Te)}(Ne,Te))}},2420:(Wt,Je,G)=>{function E(){}G.d(Je,{Z:()=>E})},8407:(Wt,Je,G)=>{G.d(Je,{U:()=>le,z:()=>me});var E=G(2737);function me(...Oe){return le(Oe)}function le(Oe){return 0===Oe.length?E.y:1===Oe.length?Oe[0]:function(Te){return Oe.reduce((ke,T)=>T(ke),Te)}}},3894:(Wt,Je,G)=>{G.d(Je,{h:()=>le});var E=G(2653),me=G(7599);function le(Oe){me.z.setTimeout(()=>{const{onUnhandledError:Ne}=E.config;if(!Ne)throw Oe;Ne(Oe)})}},9853:(Wt,Je,G)=>{function E(me){return new TypeError(`You provided ${null!==me&&"object"==typeof me?"an invalid object":`'${me}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}G.d(Je,{z:()=>E})},6825:(Wt,Je,G)=>{G.d(Je,{F4:()=>ye,LC:()=>me,SB:()=>qe,X$:()=>Oe,ZE:()=>bt,ZN:()=>Ct,_j:()=>E,eR:()=>Ie,jt:()=>Ne,k1:()=>jt,l3:()=>le,oB:()=>T,vP:()=>ke});class E{}class me{}const le="*";function Oe(Re,_e){return{type:7,name:Re,definitions:_e,options:{}}}function Ne(Re,_e=null){return{type:4,styles:_e,timings:Re}}function ke(Re,_e=null){return{type:2,steps:Re,options:_e}}function T(Re){return{type:6,styles:Re,offset:null}}function qe(Re,_e,He){return{type:0,name:Re,styles:_e,options:He}}function ye(Re){return{type:5,steps:Re}}function Ie(Re,_e,He=null){return{type:1,expr:Re,animation:_e,options:He}}class Ct{constructor(_e=0,He=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._originalOnDoneFns=[],this._originalOnStartFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=_e+He}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(_e=>_e()),this._onDoneFns=[])}onStart(_e){this._originalOnStartFns.push(_e),this._onStartFns.push(_e)}onDone(_e){this._originalOnDoneFns.push(_e),this._onDoneFns.push(_e)}onDestroy(_e){this._onDestroyFns.push(_e)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){queueMicrotask(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(_e=>_e()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(_e=>_e()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(_e){this._position=this.totalTime?_e*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(_e){const He="start"==_e?this._onStartFns:this._onDoneFns;He.forEach(Pe=>Pe()),He.length=0}}class bt{constructor(_e){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=_e;let He=0,Pe=0,$e=0;const ot=this.players.length;0==ot?queueMicrotask(()=>this._onFinish()):this.players.forEach(ft=>{ft.onDone(()=>{++He==ot&&this._onFinish()}),ft.onDestroy(()=>{++Pe==ot&&this._onDestroy()}),ft.onStart(()=>{++$e==ot&&this._onStart()})}),this.totalTime=this.players.reduce((ft,de)=>Math.max(ft,de.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(_e=>_e()),this._onDoneFns=[])}init(){this.players.forEach(_e=>_e.init())}onStart(_e){this._onStartFns.push(_e)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(_e=>_e()),this._onStartFns=[])}onDone(_e){this._onDoneFns.push(_e)}onDestroy(_e){this._onDestroyFns.push(_e)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(_e=>_e.play())}pause(){this.players.forEach(_e=>_e.pause())}restart(){this.players.forEach(_e=>_e.restart())}finish(){this._onFinish(),this.players.forEach(_e=>_e.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(_e=>_e.destroy()),this._onDestroyFns.forEach(_e=>_e()),this._onDestroyFns=[])}reset(){this.players.forEach(_e=>_e.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(_e){const He=_e*this.totalTime;this.players.forEach(Pe=>{const $e=Pe.totalTime?Math.min(1,He/Pe.totalTime):1;Pe.setPosition($e)})}getPosition(){const _e=this.players.reduce((He,Pe)=>null===He||Pe.totalTime>He.totalTime?Pe:He,null);return null!=_e?_e.getPosition():0}beforeDestroy(){this.players.forEach(_e=>{_e.beforeDestroy&&_e.beforeDestroy()})}triggerCallback(_e){const He="start"==_e?this._onStartFns:this._onDoneFns;He.forEach(Pe=>Pe()),He.length=0}}const jt="!"},6814:(Wt,Je,G)=>{G.d(Je,{Do:()=>mt,EM:()=>Oo,HT:()=>Oe,JF:()=>to,K0:()=>Te,Mn:()=>Or,Mx:()=>Hi,O5:()=>mo,PM:()=>so,S$:()=>ht,Tn:()=>ft,UT:()=>_r,V_:()=>T,Ye:()=>Ct,ax:()=>ro,b0:()=>Et,bD:()=>rr,ez:()=>si,mk:()=>Yo,p6:()=>or,q:()=>le,sg:()=>ro,tP:()=>di,w_:()=>Ne,x:()=>ot});var E=G(5879);let me=null;function le(){return me}function Oe(O){me||(me=O)}class Ne{}const Te=new E.OlP("DocumentToken");let ke=(()=>{class O{historyGo(H){throw new Error("Not implemented")}static#e=this.\u0275fac=function(Y){return new(Y||O)};static#t=this.\u0275prov=E.Yz7({token:O,factory:function(){return(0,E.f3M)(qe)},providedIn:"platform"})}return O})();const T=new E.OlP("Location Initialized");let qe=(()=>{class O extends ke{constructor(){super(),this._doc=(0,E.f3M)(Te),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return le().getBaseHref(this._doc)}onPopState(H){const Y=le().getGlobalEventTarget(this._doc,"window");return Y.addEventListener("popstate",H,!1),()=>Y.removeEventListener("popstate",H)}onHashChange(H){const Y=le().getGlobalEventTarget(this._doc,"window");return Y.addEventListener("hashchange",H,!1),()=>Y.removeEventListener("hashchange",H)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(H){this._location.pathname=H}pushState(H,Y,ve){this._history.pushState(H,Y,ve)}replaceState(H,Y,ve){this._history.replaceState(H,Y,ve)}forward(){this._history.forward()}back(){this._history.back()}historyGo(H=0){this._history.go(H)}getState(){return this._history.state}static#e=this.\u0275fac=function(Y){return new(Y||O)};static#t=this.\u0275prov=E.Yz7({token:O,factory:function(){return new O},providedIn:"platform"})}return O})();function ye(O,J){if(0==O.length)return J;if(0==J.length)return O;let H=0;return O.endsWith("/")&&H++,J.startsWith("/")&&H++,2==H?O+J.substring(1):1==H?O+J:O+"/"+J}function Ie(O){const J=O.match(/#|\?|$/),H=J&&J.index||O.length;return O.slice(0,H-("/"===O[H-1]?1:0))+O.slice(H)}function Ve(O){return O&&"?"!==O[0]?"?"+O:O}let ht=(()=>{class O{historyGo(H){throw new Error("Not implemented")}static#e=this.\u0275fac=function(Y){return new(Y||O)};static#t=this.\u0275prov=E.Yz7({token:O,factory:function(){return(0,E.f3M)(Et)},providedIn:"root"})}return O})();const st=new E.OlP("appBaseHref");let Et=(()=>{class O extends ht{constructor(H,Y){super(),this._platformLocation=H,this._removeListenerFns=[],this._baseHref=Y??this._platformLocation.getBaseHrefFromDOM()??(0,E.f3M)(Te).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(H){this._removeListenerFns.push(this._platformLocation.onPopState(H),this._platformLocation.onHashChange(H))}getBaseHref(){return this._baseHref}prepareExternalUrl(H){return ye(this._baseHref,H)}path(H=!1){const Y=this._platformLocation.pathname+Ve(this._platformLocation.search),ve=this._platformLocation.hash;return ve&&H?`${Y}${ve}`:Y}pushState(H,Y,ve,et){const ct=this.prepareExternalUrl(ve+Ve(et));this._platformLocation.pushState(H,Y,ct)}replaceState(H,Y,ve,et){const ct=this.prepareExternalUrl(ve+Ve(et));this._platformLocation.replaceState(H,Y,ct)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(H=0){this._platformLocation.historyGo?.(H)}static#e=this.\u0275fac=function(Y){return new(Y||O)(E.LFG(ke),E.LFG(st,8))};static#t=this.\u0275prov=E.Yz7({token:O,factory:O.\u0275fac,providedIn:"root"})}return O})(),mt=(()=>{class O extends ht{constructor(H,Y){super(),this._platformLocation=H,this._baseHref="",this._removeListenerFns=[],null!=Y&&(this._baseHref=Y)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(H){this._removeListenerFns.push(this._platformLocation.onPopState(H),this._platformLocation.onHashChange(H))}getBaseHref(){return this._baseHref}path(H=!1){let Y=this._platformLocation.hash;return null==Y&&(Y="#"),Y.length>0?Y.substring(1):Y}prepareExternalUrl(H){const Y=ye(this._baseHref,H);return Y.length>0?"#"+Y:Y}pushState(H,Y,ve,et){let ct=this.prepareExternalUrl(ve+Ve(et));0==ct.length&&(ct=this._platformLocation.pathname),this._platformLocation.pushState(H,Y,ct)}replaceState(H,Y,ve,et){let ct=this.prepareExternalUrl(ve+Ve(et));0==ct.length&&(ct=this._platformLocation.pathname),this._platformLocation.replaceState(H,Y,ct)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(H=0){this._platformLocation.historyGo?.(H)}static#e=this.\u0275fac=function(Y){return new(Y||O)(E.LFG(ke),E.LFG(st,8))};static#t=this.\u0275prov=E.Yz7({token:O,factory:O.\u0275fac})}return O})(),Ct=(()=>{class O{constructor(H){this._subject=new E.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=H;const Y=this._locationStrategy.getBaseHref();this._basePath=function _e(O){if(new RegExp("^(https?:)?//").test(O)){const[,H]=O.split(/\/\/[^\/]+/);return H}return O}(Ie(Re(Y))),this._locationStrategy.onPopState(ve=>{this._subject.emit({url:this.path(!0),pop:!0,state:ve.state,type:ve.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(H=!1){return this.normalize(this._locationStrategy.path(H))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(H,Y=""){return this.path()==this.normalize(H+Ve(Y))}normalize(H){return O.stripTrailingSlash(function jt(O,J){if(!O||!J.startsWith(O))return J;const H=J.substring(O.length);return""===H||["/",";","?","#"].includes(H[0])?H:J}(this._basePath,Re(H)))}prepareExternalUrl(H){return H&&"/"!==H[0]&&(H="/"+H),this._locationStrategy.prepareExternalUrl(H)}go(H,Y="",ve=null){this._locationStrategy.pushState(ve,"",H,Y),this._notifyUrlChangeListeners(this.prepareExternalUrl(H+Ve(Y)),ve)}replaceState(H,Y="",ve=null){this._locationStrategy.replaceState(ve,"",H,Y),this._notifyUrlChangeListeners(this.prepareExternalUrl(H+Ve(Y)),ve)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(H=0){this._locationStrategy.historyGo?.(H)}onUrlChange(H){return this._urlChangeListeners.push(H),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(Y=>{this._notifyUrlChangeListeners(Y.url,Y.state)})),()=>{const Y=this._urlChangeListeners.indexOf(H);this._urlChangeListeners.splice(Y,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(H="",Y){this._urlChangeListeners.forEach(ve=>ve(H,Y))}subscribe(H,Y,ve){return this._subject.subscribe({next:H,error:Y,complete:ve})}static#e=this.normalizeQueryParams=Ve;static#t=this.joinWithSlash=ye;static#n=this.stripTrailingSlash=Ie;static#r=this.\u0275fac=function(Y){return new(Y||O)(E.LFG(ht))};static#i=this.\u0275prov=E.Yz7({token:O,factory:function(){return function bt(){return new Ct((0,E.LFG)(ht))}()},providedIn:"root"})}return O})();function Re(O){return O.replace(/\/index.html$/,"")}var ot=function(O){return O[O.Format=0]="Format",O[O.Standalone=1]="Standalone",O}(ot||{}),ft=function(O){return O[O.Narrow=0]="Narrow",O[O.Abbreviated=1]="Abbreviated",O[O.Wide=2]="Wide",O[O.Short=3]="Short",O}(ft||{}),de=function(O){return O[O.Short=0]="Short",O[O.Medium=1]="Medium",O[O.Long=2]="Long",O[O.Full=3]="Full",O}(de||{}),Ot=function(O){return O[O.Decimal=0]="Decimal",O[O.Group=1]="Group",O[O.List=2]="List",O[O.PercentSign=3]="PercentSign",O[O.PlusSign=4]="PlusSign",O[O.MinusSign=5]="MinusSign",O[O.Exponential=6]="Exponential",O[O.SuperscriptingExponent=7]="SuperscriptingExponent",O[O.PerMille=8]="PerMille",O[O.Infinity=9]="Infinity",O[O.NaN=10]="NaN",O[O.TimeSeparator=11]="TimeSeparator",O[O.CurrencyDecimal=12]="CurrencyDecimal",O[O.CurrencyGroup=13]="CurrencyGroup",O}(Ot||{});function Or(O,J,H){const Y=(0,E.cg1)(O),et=Ee([Y[E.wAp.DaysFormat],Y[E.wAp.DaysStandalone]],J);return Ee(et,H)}function _r(O,J,H){const Y=(0,E.cg1)(O),et=Ee([Y[E.wAp.MonthsFormat],Y[E.wAp.MonthsStandalone]],J);return Ee(et,H)}function Se(O,J){return Ee((0,E.cg1)(O)[E.wAp.DateFormat],J)}function Ke(O,J){return Ee((0,E.cg1)(O)[E.wAp.TimeFormat],J)}function Fe(O,J){return Ee((0,E.cg1)(O)[E.wAp.DateTimeFormat],J)}function Ue(O,J){const H=(0,E.cg1)(O),Y=H[E.wAp.NumberSymbols][J];if(typeof Y>"u"){if(J===Ot.CurrencyDecimal)return H[E.wAp.NumberSymbols][Ot.Decimal];if(J===Ot.CurrencyGroup)return H[E.wAp.NumberSymbols][Ot.Group]}return Y}function Yt(O){if(!O[E.wAp.ExtraData])throw new Error(`Missing extra locale data for the locale "${O[E.wAp.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function Ee(O,J){for(let H=J;H>-1;H--)if(typeof O[H]<"u")return O[H];throw new Error("Locale data API: locale data undefined")}function xe(O){const[J,H]=O.split(":");return{hours:+J,minutes:+H}}const Lt=/^(\d{4,})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,jn={},zn=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;var Mt=function(O){return O[O.Short=0]="Short",O[O.ShortGMT=1]="ShortGMT",O[O.Long=2]="Long",O[O.Extended=3]="Extended",O}(Mt||{}),ln=function(O){return O[O.FullYear=0]="FullYear",O[O.Month=1]="Month",O[O.Date=2]="Date",O[O.Hours=3]="Hours",O[O.Minutes=4]="Minutes",O[O.Seconds=5]="Seconds",O[O.FractionalSeconds=6]="FractionalSeconds",O[O.Day=7]="Day",O}(ln||{}),mn=function(O){return O[O.DayPeriods=0]="DayPeriods",O[O.Days=1]="Days",O[O.Months=2]="Months",O[O.Eras=3]="Eras",O}(mn||{});function or(O,J,H,Y){let ve=function ie(O){if(re(O))return O;if("number"==typeof O&&!isNaN(O))return new Date(O);if("string"==typeof O){if(O=O.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(O)){const[ve,et=1,ct=1]=O.split("-").map(dn=>+dn);return cn(ve,et-1,ct)}const H=parseFloat(O);if(!isNaN(O-H))return new Date(H);let Y;if(Y=O.match(Lt))return function se(O){const J=new Date(0);let H=0,Y=0;const ve=O[8]?J.setUTCFullYear:J.setFullYear,et=O[8]?J.setUTCHours:J.setHours;O[9]&&(H=Number(O[9]+O[10]),Y=Number(O[9]+O[11])),ve.call(J,Number(O[1]),Number(O[2])-1,Number(O[3]));const ct=Number(O[4]||0)-H,dn=Number(O[5]||0)-Y,ir=Number(O[6]||0),yr=Math.floor(1e3*parseFloat("0."+(O[7]||0)));return et.call(J,ct,dn,ir,yr),J}(Y)}const J=new Date(O);if(!re(J))throw new Error(`Unable to convert "${O}" into a date`);return J}(O);J=Gr(H,J)||J;let dn,ct=[];for(;J;){if(dn=zn.exec(J),!dn){ct.push(J);break}{ct=ct.concat(dn.slice(1));const Xn=ct.pop();if(!Xn)break;J=Xn}}let ir=ve.getTimezoneOffset();Y&&(ir=Ui(Y,ir),ve=function we(O,J,H){const Y=H?-1:1,ve=O.getTimezoneOffset();return function ji(O,J){return(O=new Date(O.getTime())).setMinutes(O.getMinutes()+J),O}(O,Y*(Ui(J,ve)-ve))}(ve,Y,!0));let yr="";return ct.forEach(Xn=>{const bn=function xi(O){if(Bi[O])return Bi[O];let J;switch(O){case"G":case"GG":case"GGG":J=wn(mn.Eras,ft.Abbreviated);break;case"GGGG":J=wn(mn.Eras,ft.Wide);break;case"GGGGG":J=wn(mn.Eras,ft.Narrow);break;case"y":J=Xt(ln.FullYear,1,0,!1,!0);break;case"yy":J=Xt(ln.FullYear,2,0,!0,!0);break;case"yyy":J=Xt(ln.FullYear,3,0,!1,!0);break;case"yyyy":J=Xt(ln.FullYear,4,0,!1,!0);break;case"Y":J=ps(1);break;case"YY":J=ps(2,!0);break;case"YYY":J=ps(3);break;case"YYYY":J=ps(4);break;case"M":case"L":J=Xt(ln.Month,1,1);break;case"MM":case"LL":J=Xt(ln.Month,2,1);break;case"MMM":J=wn(mn.Months,ft.Abbreviated);break;case"MMMM":J=wn(mn.Months,ft.Wide);break;case"MMMMM":J=wn(mn.Months,ft.Narrow);break;case"LLL":J=wn(mn.Months,ft.Abbreviated,ot.Standalone);break;case"LLLL":J=wn(mn.Months,ft.Wide,ot.Standalone);break;case"LLLLL":J=wn(mn.Months,ft.Narrow,ot.Standalone);break;case"w":J=Ti(1);break;case"ww":J=Ti(2);break;case"W":J=Ti(1,!0);break;case"d":J=Xt(ln.Date,1);break;case"dd":J=Xt(ln.Date,2);break;case"c":case"cc":J=Xt(ln.Day,1);break;case"ccc":J=wn(mn.Days,ft.Abbreviated,ot.Standalone);break;case"cccc":J=wn(mn.Days,ft.Wide,ot.Standalone);break;case"ccccc":J=wn(mn.Days,ft.Narrow,ot.Standalone);break;case"cccccc":J=wn(mn.Days,ft.Short,ot.Standalone);break;case"E":case"EE":case"EEE":J=wn(mn.Days,ft.Abbreviated);break;case"EEEE":J=wn(mn.Days,ft.Wide);break;case"EEEEE":J=wn(mn.Days,ft.Narrow);break;case"EEEEEE":J=wn(mn.Days,ft.Short);break;case"a":case"aa":case"aaa":J=wn(mn.DayPeriods,ft.Abbreviated);break;case"aaaa":J=wn(mn.DayPeriods,ft.Wide);break;case"aaaaa":J=wn(mn.DayPeriods,ft.Narrow);break;case"b":case"bb":case"bbb":J=wn(mn.DayPeriods,ft.Abbreviated,ot.Standalone,!0);break;case"bbbb":J=wn(mn.DayPeriods,ft.Wide,ot.Standalone,!0);break;case"bbbbb":J=wn(mn.DayPeriods,ft.Narrow,ot.Standalone,!0);break;case"B":case"BB":case"BBB":J=wn(mn.DayPeriods,ft.Abbreviated,ot.Format,!0);break;case"BBBB":J=wn(mn.DayPeriods,ft.Wide,ot.Format,!0);break;case"BBBBB":J=wn(mn.DayPeriods,ft.Narrow,ot.Format,!0);break;case"h":J=Xt(ln.Hours,1,-12);break;case"hh":J=Xt(ln.Hours,2,-12);break;case"H":J=Xt(ln.Hours,1);break;case"HH":J=Xt(ln.Hours,2);break;case"m":J=Xt(ln.Minutes,1);break;case"mm":J=Xt(ln.Minutes,2);break;case"s":J=Xt(ln.Seconds,1);break;case"ss":J=Xt(ln.Seconds,2);break;case"S":J=Xt(ln.FractionalSeconds,1);break;case"SS":J=Xt(ln.FractionalSeconds,2);break;case"SSS":J=Xt(ln.FractionalSeconds,3);break;case"Z":case"ZZ":case"ZZZ":J=Vi(Mt.Short);break;case"ZZZZZ":J=Vi(Mt.Extended);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":J=Vi(Mt.ShortGMT);break;case"OOOO":case"ZZZZ":case"zzzz":J=Vi(Mt.Long);break;default:return null}return Bi[O]=J,J}(Xn);yr+=bn?bn(ve,H,ir):"''"===Xn?"'":Xn.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),yr}function cn(O,J,H){const Y=new Date(0);return Y.setFullYear(O,J,H),Y.setHours(0,0,0),Y}function Gr(O,J){const H=function Jn(O){return(0,E.cg1)(O)[E.wAp.LocaleId]}(O);if(jn[H]=jn[H]||{},jn[H][J])return jn[H][J];let Y="";switch(J){case"shortDate":Y=Se(O,de.Short);break;case"mediumDate":Y=Se(O,de.Medium);break;case"longDate":Y=Se(O,de.Long);break;case"fullDate":Y=Se(O,de.Full);break;case"shortTime":Y=Ke(O,de.Short);break;case"mediumTime":Y=Ke(O,de.Medium);break;case"longTime":Y=Ke(O,de.Long);break;case"fullTime":Y=Ke(O,de.Full);break;case"short":const ve=Gr(O,"shortTime"),et=Gr(O,"shortDate");Y=Hn(Fe(O,de.Short),[ve,et]);break;case"medium":const ct=Gr(O,"mediumTime"),dn=Gr(O,"mediumDate");Y=Hn(Fe(O,de.Medium),[ct,dn]);break;case"long":const ir=Gr(O,"longTime"),yr=Gr(O,"longDate");Y=Hn(Fe(O,de.Long),[ir,yr]);break;case"full":const Xn=Gr(O,"fullTime"),bn=Gr(O,"fullDate");Y=Hn(Fe(O,de.Full),[Xn,bn])}return Y&&(jn[H][J]=Y),Y}function Hn(O,J){return J&&(O=O.replace(/\{([^}]+)}/g,function(H,Y){return null!=J&&Y in J?J[Y]:H})),O}function $r(O,J,H="-",Y,ve){let et="";(O<0||ve&&O<=0)&&(ve?O=1-O:(O=-O,et=H));let ct=String(O);for(;ct.length<J;)ct="0"+ct;return Y&&(ct=ct.slice(ct.length-J)),et+ct}function Xt(O,J,H=0,Y=!1,ve=!1){return function(et,ct){let dn=function Wi(O,J){switch(O){case ln.FullYear:return J.getFullYear();case ln.Month:return J.getMonth();case ln.Date:return J.getDate();case ln.Hours:return J.getHours();case ln.Minutes:return J.getMinutes();case ln.Seconds:return J.getSeconds();case ln.FractionalSeconds:return J.getMilliseconds();case ln.Day:return J.getDay();default:throw new Error(`Unknown DateType value "${O}".`)}}(O,et);if((H>0||dn>-H)&&(dn+=H),O===ln.Hours)0===dn&&-12===H&&(dn=12);else if(O===ln.FractionalSeconds)return function Yr(O,J){return $r(O,3).substring(0,J)}(dn,J);const ir=Ue(ct,Ot.MinusSign);return $r(dn,J,ir,Y,ve)}}function wn(O,J,H=ot.Format,Y=!1){return function(ve,et){return function Dn(O,J,H,Y,ve,et){switch(H){case mn.Months:return _r(J,ve,Y)[O.getMonth()];case mn.Days:return Or(J,ve,Y)[O.getDay()];case mn.DayPeriods:const ct=O.getHours(),dn=O.getMinutes();if(et){const yr=function Ln(O){const J=(0,E.cg1)(O);return Yt(J),(J[E.wAp.ExtraData][2]||[]).map(Y=>"string"==typeof Y?xe(Y):[xe(Y[0]),xe(Y[1])])}(J),Xn=function An(O,J,H){const Y=(0,E.cg1)(O);Yt(Y);const et=Ee([Y[E.wAp.ExtraData][0],Y[E.wAp.ExtraData][1]],J)||[];return Ee(et,H)||[]}(J,ve,Y),bn=yr.findIndex(oi=>{if(Array.isArray(oi)){const[kr,Ai]=oi,Eo=ct>=kr.hours&&dn>=kr.minutes,ia=ct<Ai.hours||ct===Ai.hours&&dn<Ai.minutes;if(kr.hours<Ai.hours){if(Eo&&ia)return!0}else if(Eo||ia)return!0}else if(oi.hours===ct&&oi.minutes===dn)return!0;return!1});if(-1!==bn)return Xn[bn]}return function On(O,J,H){const Y=(0,E.cg1)(O),et=Ee([Y[E.wAp.DayPeriodsFormat],Y[E.wAp.DayPeriodsStandalone]],J);return Ee(et,H)}(J,ve,Y)[ct<12?0:1];case mn.Eras:return function tn(O,J){return Ee((0,E.cg1)(O)[E.wAp.Eras],J)}(J,Y)[O.getFullYear()<=0?0:1];default:throw new Error(`unexpected translation type ${H}`)}}(ve,et,O,J,H,Y)}}function Vi(O){return function(J,H,Y){const ve=-1*Y,et=Ue(H,Ot.MinusSign),ct=ve>0?Math.floor(ve/60):Math.ceil(ve/60);switch(O){case Mt.Short:return(ve>=0?"+":"")+$r(ct,2,et)+$r(Math.abs(ve%60),2,et);case Mt.ShortGMT:return"GMT"+(ve>=0?"+":"")+$r(ct,1,et);case Mt.Long:return"GMT"+(ve>=0?"+":"")+$r(ct,2,et)+":"+$r(Math.abs(ve%60),2,et);case Mt.Extended:return 0===Y?"Z":(ve>=0?"+":"")+$r(ct,2,et)+":"+$r(Math.abs(ve%60),2,et);default:throw new Error(`Unknown zone width "${O}"`)}}}const Pa=0,ts=4;function dr(O){return cn(O.getFullYear(),O.getMonth(),O.getDate()+(ts-O.getDay()))}function Ti(O,J=!1){return function(H,Y){let ve;if(J){const et=new Date(H.getFullYear(),H.getMonth(),1).getDay()-1,ct=H.getDate();ve=1+Math.floor((ct+et)/7)}else{const et=dr(H),ct=function go(O){const J=cn(O,Pa,1).getDay();return cn(O,0,1+(J<=ts?ts:ts+7)-J)}(et.getFullYear()),dn=et.getTime()-ct.getTime();ve=1+Math.round(dn/6048e5)}return $r(ve,O,Ue(Y,Ot.MinusSign))}}function ps(O,J=!1){return function(H,Y){return $r(dr(H).getFullYear(),O,Ue(Y,Ot.MinusSign),J)}}const Bi={};function Ui(O,J){O=O.replace(/:/g,"");const H=Date.parse("Jan 01, 1970 00:00:00 "+O)/6e4;return isNaN(H)?J:H}function re(O){return O instanceof Date&&!isNaN(O.valueOf())}function Hi(O,J){J=encodeURIComponent(J);for(const H of O.split(";")){const Y=H.indexOf("="),[ve,et]=-1==Y?[H,""]:[H.slice(0,Y),H.slice(Y+1)];if(ve.trim()===J)return decodeURIComponent(et)}return null}const Ds=/\s+/,qa=[];let Yo=(()=>{class O{constructor(H,Y,ve,et){this._iterableDiffers=H,this._keyValueDiffers=Y,this._ngEl=ve,this._renderer=et,this.initialClasses=qa,this.stateMap=new Map}set klass(H){this.initialClasses=null!=H?H.trim().split(Ds):qa}set ngClass(H){this.rawClass="string"==typeof H?H.trim().split(Ds):H}ngDoCheck(){for(const Y of this.initialClasses)this._updateState(Y,!0);const H=this.rawClass;if(Array.isArray(H)||H instanceof Set)for(const Y of H)this._updateState(Y,!0);else if(null!=H)for(const Y of Object.keys(H))this._updateState(Y,!!H[Y]);this._applyStateDiff()}_updateState(H,Y){const ve=this.stateMap.get(H);void 0!==ve?(ve.enabled!==Y&&(ve.changed=!0,ve.enabled=Y),ve.touched=!0):this.stateMap.set(H,{enabled:Y,changed:!0,touched:!0})}_applyStateDiff(){for(const H of this.stateMap){const Y=H[0],ve=H[1];ve.changed?(this._toggleClass(Y,ve.enabled),ve.changed=!1):ve.touched||(ve.enabled&&this._toggleClass(Y,!1),this.stateMap.delete(Y)),ve.touched=!1}}_toggleClass(H,Y){(H=H.trim()).length>0&&H.split(Ds).forEach(ve=>{Y?this._renderer.addClass(this._ngEl.nativeElement,ve):this._renderer.removeClass(this._ngEl.nativeElement,ve)})}static#e=this.\u0275fac=function(Y){return new(Y||O)(E.Y36(E.ZZ4),E.Y36(E.aQg),E.Y36(E.SBq),E.Y36(E.Qsj))};static#t=this.\u0275dir=E.lG2({type:O,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"},standalone:!0})}return O})();class Ya{constructor(J,H,Y,ve){this.$implicit=J,this.ngForOf=H,this.index=Y,this.count=ve}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let ro=(()=>{class O{set ngForOf(H){this._ngForOf=H,this._ngForOfDirty=!0}set ngForTrackBy(H){this._trackByFn=H}get ngForTrackBy(){return this._trackByFn}constructor(H,Y,ve){this._viewContainer=H,this._template=Y,this._differs=ve,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(H){H&&(this._template=H)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const H=this._ngForOf;!this._differ&&H&&(this._differ=this._differs.find(H).create(this.ngForTrackBy))}if(this._differ){const H=this._differ.diff(this._ngForOf);H&&this._applyChanges(H)}}_applyChanges(H){const Y=this._viewContainer;H.forEachOperation((ve,et,ct)=>{if(null==ve.previousIndex)Y.createEmbeddedView(this._template,new Ya(ve.item,this._ngForOf,-1,-1),null===ct?void 0:ct);else if(null==ct)Y.remove(null===et?void 0:et);else if(null!==et){const dn=Y.get(et);Y.move(dn,ct),$s(dn,ve)}});for(let ve=0,et=Y.length;ve<et;ve++){const dn=Y.get(ve).context;dn.index=ve,dn.count=et,dn.ngForOf=this._ngForOf}H.forEachIdentityChange(ve=>{$s(Y.get(ve.currentIndex),ve)})}static ngTemplateContextGuard(H,Y){return!0}static#e=this.\u0275fac=function(Y){return new(Y||O)(E.Y36(E.s_b),E.Y36(E.Rgc),E.Y36(E.ZZ4))};static#t=this.\u0275dir=E.lG2({type:O,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0})}return O})();function $s(O,J){O.context.$implicit=J.item}let mo=(()=>{class O{constructor(H,Y){this._viewContainer=H,this._context=new Xs,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=Y}set ngIf(H){this._context.$implicit=this._context.ngIf=H,this._updateView()}set ngIfThen(H){Qo("ngIfThen",H),this._thenTemplateRef=H,this._thenViewRef=null,this._updateView()}set ngIfElse(H){Qo("ngIfElse",H),this._elseTemplateRef=H,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(H,Y){return!0}static#e=this.\u0275fac=function(Y){return new(Y||O)(E.Y36(E.s_b),E.Y36(E.Rgc))};static#t=this.\u0275dir=E.lG2({type:O,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0})}return O})();class Xs{constructor(){this.$implicit=null,this.ngIf=null}}function Qo(O,J){if(J&&!J.createEmbeddedView)throw new Error(`${O} must be a TemplateRef, but received '${(0,E.AaK)(J)}'.`)}let di=(()=>{class O{constructor(H){this._viewContainerRef=H,this._viewRef=null,this.ngTemplateOutletContext=null,this.ngTemplateOutlet=null,this.ngTemplateOutletInjector=null}ngOnChanges(H){if(H.ngTemplateOutlet||H.ngTemplateOutletInjector){const Y=this._viewContainerRef;if(this._viewRef&&Y.remove(Y.indexOf(this._viewRef)),this.ngTemplateOutlet){const{ngTemplateOutlet:ve,ngTemplateOutletContext:et,ngTemplateOutletInjector:ct}=this;this._viewRef=Y.createEmbeddedView(ve,et,ct?{injector:ct}:void 0)}else this._viewRef=null}else this._viewRef&&H.ngTemplateOutletContext&&this.ngTemplateOutletContext&&(this._viewRef.context=this.ngTemplateOutletContext)}static#e=this.\u0275fac=function(Y){return new(Y||O)(E.Y36(E.s_b))};static#t=this.\u0275dir=E.lG2({type:O,selectors:[["","ngTemplateOutlet",""]],inputs:{ngTemplateOutletContext:"ngTemplateOutletContext",ngTemplateOutlet:"ngTemplateOutlet",ngTemplateOutletInjector:"ngTemplateOutletInjector"},standalone:!0,features:[E.TTD]})}return O})(),si=(()=>{class O{static#e=this.\u0275fac=function(Y){return new(Y||O)};static#t=this.\u0275mod=E.oAB({type:O});static#n=this.\u0275inj=E.cJS({})}return O})();const rr="browser",eo="server";function so(O){return O===eo}let Oo=(()=>{class O{static#e=this.\u0275prov=(0,E.Yz7)({token:O,providedIn:"root",factory:()=>new wi((0,E.LFG)(Te),window)})}return O})();class wi{constructor(J,H){this.document=J,this.window=H,this.offset=()=>[0,0]}setOffset(J){this.offset=Array.isArray(J)?()=>J:J}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(J){this.supportsScrolling()&&this.window.scrollTo(J[0],J[1])}scrollToAnchor(J){if(!this.supportsScrolling())return;const H=function Ji(O,J){const H=O.getElementById(J)||O.getElementsByName(J)[0];if(H)return H;if("function"==typeof O.createTreeWalker&&O.body&&"function"==typeof O.body.attachShadow){const Y=O.createTreeWalker(O.body,NodeFilter.SHOW_ELEMENT);let ve=Y.currentNode;for(;ve;){const et=ve.shadowRoot;if(et){const ct=et.getElementById(J)||et.querySelector(`[name="${J}"]`);if(ct)return ct}ve=Y.nextNode()}}return null}(this.document,J);H&&(this.scrollToElement(H),H.focus())}setHistoryScrollRestoration(J){this.supportsScrolling()&&(this.window.history.scrollRestoration=J)}scrollToElement(J){const H=J.getBoundingClientRect(),Y=H.left+this.window.pageXOffset,ve=H.top+this.window.pageYOffset,et=this.offset();this.window.scrollTo(Y-et[0],ve-et[1])}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}class to{}},5879:(Wt,Je,G)=>{G.d(Je,{$8M:()=>Xc,$WT:()=>ns,$Z:()=>sh,AFp:()=>qg,ALo:()=>tT,AaK:()=>Ve,AsE:()=>rv,BQk:()=>V_,CHM:()=>Ad,CRH:()=>_T,DdM:()=>WE,EJc:()=>MD,EpF:()=>W0,F$t:()=>Kv,F4k:()=>Wv,FYo:()=>$f,FiY:()=>ja,Gf:()=>gT,GfV:()=>zf,Gpc:()=>Et,HDt:()=>UT,HOy:()=>q_,Hsn:()=>Yv,Ikx:()=>cI,JOm:()=>Ca,KtG:()=>Zn,LFG:()=>$t,LMc:()=>WC,LSH:()=>kp,Lbi:()=>Kg,Lck:()=>Tw,MAs:()=>jv,MGl:()=>B_,MMx:()=>VE,NdJ:()=>$y,Ojb:()=>Yg,OlP:()=>Xt,Oqu:()=>nv,P3R:()=>jg,PXZ:()=>lC,Q6J:()=>x_,QGY:()=>Gy,QbO:()=>yy,Qsj:()=>Ed,R0b:()=>ho,RDi:()=>Op,Rgc:()=>fv,SBq:()=>pc,SDv:()=>OE,Sil:()=>FD,Suo:()=>mT,TTD:()=>bn,TgZ:()=>k_,Tol:()=>wg,Udp:()=>Wa,VKq:()=>qE,VuI:()=>$C,W1O:()=>ET,WLB:()=>KE,X6Q:()=>mC,XFs:()=>Mt,Xpm:()=>Za,Xq5:()=>My,Xts:()=>xf,Y36:()=>_c,YKP:()=>FE,YNc:()=>G0,Yjl:()=>ks,Yz7:()=>Yt,Z0I:()=>Ee,ZZ4:()=>$I,_Bn:()=>kE,_UZ:()=>Uy,_c5:()=>OC,_uU:()=>h0,aQg:()=>zI,c2e:()=>BT,cJS:()=>An,cg1:()=>dI,dDg:()=>iC,dqk:()=>Hn,eFA:()=>ZT,eJc:()=>SI,ekj:()=>G_,eoX:()=>WT,evT:()=>eg,f3M:()=>Jt,g9A:()=>Vf,gHi:()=>Wp,h0i:()=>Hm,hGG:()=>MC,hij:()=>W_,iGM:()=>pT,ifc:()=>sn,ip1:()=>VT,jDz:()=>BE,kEZ:()=>YE,kL8:()=>oE,ktI:()=>bd,lG2:()=>Oa,lnq:()=>iv,lqb:()=>lc,lri:()=>$T,n5z:()=>wl,oAB:()=>zs,oxw:()=>Q0,q4F:()=>zp,qFp:()=>qC,qLn:()=>gc,qOj:()=>Li,qZA:()=>F_,rWj:()=>zT,rg0:()=>et,s9C:()=>Zv,sBO:()=>_C,s_b:()=>T0,soG:()=>w0,tb:()=>VI,tp0:()=>Eu,uIk:()=>xy,vHH:()=>_e,vpe:()=>lu,wAp:()=>Y_,xi3:()=>nT,xp6:()=>og,ynx:()=>L_,z2F:()=>X_,zSh:()=>Wg,zW0:()=>Rv,zs3:()=>Ou});var E=G(8645),me=G(7394),le=G(5592),Oe=G(3019),Ne=G(5619),Te=G(2096),ke=G(3020),T=G(4664),qe=G(3997);function ye(t){for(let r in t)if(t[r]===ye)return r;throw Error("Could not find renamed property on target object.")}function Ie(t,r){for(const s in r)r.hasOwnProperty(s)&&!t.hasOwnProperty(s)&&(t[s]=r[s])}function Ve(t){if("string"==typeof t)return t;if(Array.isArray(t))return"["+t.map(Ve).join(", ")+"]";if(null==t)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;const r=t.toString();if(null==r)return""+r;const s=r.indexOf("\n");return-1===s?r:r.substring(0,s)}function ht(t,r){return null==t||""===t?null===r?"":r:null==r||""===r?t:t+" "+r}const st=ye({__forward_ref__:ye});function Et(t){return t.__forward_ref__=Et,t.toString=function(){return Ve(this())},t}function mt(t){return Ct(t)?t():t}function Ct(t){return"function"==typeof t&&t.hasOwnProperty(st)&&t.__forward_ref__===Et}function bt(t){return t&&!!t.\u0275providers}const Re="https://g.co/ng/security#xss";class _e extends Error{constructor(r,s){super(function He(t,r){return`NG0${Math.abs(t)}${r?": "+r:""}`}(r,s)),this.code=r}}function Pe(t){return"string"==typeof t?t:null==t?"":String(t)}function Ot(t,r){throw new _e(-201,!1)}function Rt(t,r,s,l){throw new Error(`ASSERTION ERROR: ${t}`+(null==l?"":` [Expected=> ${s} ${l} ${r} <=Actual]`))}function Yt(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function An(t){return{providers:t.providers||[],imports:t.imports||[]}}function $n(t){return xe(t,pt)||xe(t,jn)}function Ee(t){return null!==$n(t)}function xe(t,r){return t.hasOwnProperty(r)?t[r]:null}function lt(t){return t&&(t.hasOwnProperty(Lt)||t.hasOwnProperty(zn))?t[Lt]:null}const pt=ye({\u0275prov:ye}),Lt=ye({\u0275inj:ye}),jn=ye({ngInjectableDef:ye}),zn=ye({ngInjectorDef:ye});var Mt=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}(Mt||{});let ln;function mn(){return ln}function or(t){const r=ln;return ln=t,r}function cn(t,r,s){const l=$n(t);return l&&"root"==l.providedIn?void 0===l.value?l.value=l.factory():l.value:s&Mt.Optional?null:void 0!==r?r:void Ot(Ve(t))}const Hn=globalThis;class Xt{constructor(r,s){this._desc=r,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof s?this.__NG_ELEMENT_ID__=s:void 0!==s&&(this.\u0275prov=Yt({token:this,providedIn:s.providedIn||"root",factory:s.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}const xi={},Ui="__NG_DI_FLAG__",ji="ngTempTokenPath",ie=/\n/gm,re="__source";let ue;function _t(t){const r=ue;return ue=t,r}function Pt(t,r=Mt.Default){if(void 0===ue)throw new _e(-203,!1);return null===ue?cn(t,void 0,r):ue.get(t,r&Mt.Optional?null:void 0,r)}function $t(t,r=Mt.Default){return(mn()||Pt)(mt(t),r)}function Jt(t,r=Mt.Default){return $t(t,hn(r))}function hn(t){return typeof t>"u"||"number"==typeof t?t:0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function Br(t){const r=[];for(let s=0;s<t.length;s++){const l=mt(t[s]);if(Array.isArray(l)){if(0===l.length)throw new _e(900,!1);let f,_=Mt.Default;for(let b=0;b<l.length;b++){const N=l[b],F=Gs(N);"number"==typeof F?-1===F?f=N.token:_|=F:f=N}r.push($t(f,_))}else r.push($t(l))}return r}function li(t,r){return t[Ui]=r,t.prototype[Ui]=r,t}function Gs(t){return t[Ui]}function Ge(t){return{toString:t}.toString()}var vt=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}(vt||{}),sn=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}(sn||{});const In={},qt=[],tr=ye({\u0275cmp:ye}),ui=ye({\u0275dir:ye}),Mr=ye({\u0275pipe:ye}),Js=ye({\u0275mod:ye}),Hi=ye({\u0275fac:ye}),Ds=ye({__NG_ELEMENT_ID__:ye}),qa=ye({__NG_ENV_ID__:ye});function Yo(t,r,s){let l=t.length;for(;;){const f=t.indexOf(r,s);if(-1===f)return f;if(0===f||t.charCodeAt(f-1)<=32){const _=r.length;if(f+_===l||t.charCodeAt(f+_)<=32)return f}s=f+1}}function Ka(t,r,s){let l=0;for(;l<s.length;){const f=s[l];if("number"==typeof f){if(0!==f)break;l++;const _=s[l++],b=s[l++],N=s[l++];t.setAttribute(r,b,N,_)}else{const _=f,b=s[++l];Ya(_)?t.setProperty(r,_,b):t.setAttribute(r,_,b),l++}}return l}function Mn(t){return 3===t||4===t||6===t}function Ya(t){return 64===t.charCodeAt(0)}function ro(t,r){if(null!==r&&0!==r.length)if(null===t||0===t.length)t=r.slice();else{let s=-1;for(let l=0;l<r.length;l++){const f=r[l];"number"==typeof f?s=f:0===s||$s(t,s,f,null,-1===s||2===s?r[++l]:null)}}return t}function $s(t,r,s,l,f){let _=0,b=t.length;if(-1===r)b=-1;else for(;_<t.length;){const N=t[_++];if("number"==typeof N){if(N===r){b=-1;break}if(N>r){b=_-1;break}}}for(;_<t.length;){const N=t[_];if("number"==typeof N)break;if(N===s){if(null===l)return void(null!==f&&(t[_+1]=f));if(l===t[_+1])return void(t[_+2]=f)}_++,null!==l&&_++,null!==f&&_++}-1!==b&&(t.splice(b,0,r),_=b+1),t.splice(_++,0,s),null!==l&&t.splice(_++,0,l),null!==f&&t.splice(_++,0,f)}const Zo="ng-template";function mo(t,r,s){let l=0,f=!0;for(;l<t.length;){let _=t[l++];if("string"==typeof _&&f){const b=t[l++];if(s&&"class"===_&&-1!==Yo(b.toLowerCase(),r,0))return!0}else{if(1===_){for(;l<t.length&&"string"==typeof(_=t[l++]);)if(_.toLowerCase()===r)return!0;return!1}"number"==typeof _&&(f=!1)}}return!1}function Xs(t){return 4===t.type&&t.value!==Zo}function Qo(t,r,s){return r===(4!==t.type||s?t.value:Zo)}function Jo(t,r,s){let l=4;const f=t.attrs||[],_=function Cs(t){for(let r=0;r<t.length;r++)if(Mn(t[r]))return r;return t.length}(f);let b=!1;for(let N=0;N<r.length;N++){const F=r[N];if("number"!=typeof F){if(!b)if(4&l){if(l=2|1&l,""!==F&&!Qo(t,F,s)||""===F&&1===r.length){if(fr(l))return!1;b=!0}}else{const z=8&l?F:r[++N];if(8&l&&null!==t.attrs){if(!mo(t.attrs,z,s)){if(fr(l))return!1;b=!0}continue}const ge=Tr(8&l?"class":F,f,Xs(t),s);if(-1===ge){if(fr(l))return!1;b=!0;continue}if(""!==z){let Be;Be=ge>_?"":f[ge+1].toLowerCase();const Ye=8&l?Be:null;if(Ye&&-1!==Yo(Ye,z,0)||2&l&&z!==Be){if(fr(l))return!1;b=!0}}}}else{if(!b&&!fr(l)&&!fr(F))return!1;if(b&&fr(F))continue;b=!1,l=F|1&l}}return fr(l)||b}function fr(t){return 0==(1&t)}function Tr(t,r,s,l){if(null===r)return-1;let f=0;if(l||!s){let _=!1;for(;f<r.length;){const b=r[f];if(b===t)return f;if(3===b||6===b)_=!0;else{if(1===b||2===b){let N=r[++f];for(;"string"==typeof N;)N=r[++f];continue}if(4===b)break;if(0===b){f+=4;continue}}f+=_?1:2}return-1}return function qi(t,r){let s=t.indexOf(4);if(s>-1)for(s++;s<t.length;){const l=t[s];if("number"==typeof l)return-1;if(l===r)return s;s++}return-1}(r,t)}function ci(t,r,s=!1){for(let l=0;l<r.length;l++)if(Jo(t,r[l],s))return!0;return!1}function io(t,r){e:for(let s=0;s<r.length;s++){const l=r[s];if(t.length===l.length){for(let f=0;f<t.length;f++)if(t[f]!==l[f])continue e;return!0}}return!1}function di(t,r){return t?":not("+r.trim()+")":r}function du(t){let r=t[0],s=1,l=2,f="",_=!1;for(;s<t.length;){let b=t[s];if("string"==typeof b)if(2&l){const N=t[++s];f+="["+b+(N.length>0?'="'+N+'"':"")+"]"}else 8&l?f+="."+b:4&l&&(f+=" "+b);else""!==f&&!fr(b)&&(r+=di(_,f),f=""),l=b,_=_||!fr(l);s++}return""!==f&&(r+=di(_,f)),r}function Za(t){return Ge(()=>{const r=rs(t),s={...r,decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===vt.OnPush,directiveDefs:null,pipeDefs:null,dependencies:r.standalone&&t.dependencies||null,getStandaloneInjector:null,signals:t.signals??!1,data:t.data||{},encapsulation:t.encapsulation||sn.Emulated,styles:t.styles||qt,_:null,schemas:t.schemas||null,tView:null,id:""};Yi(s);const l=t.dependencies;return s.directiveDefs=_i(l,!1),s.pipeDefs=_i(l,!0),s.id=function Ss(t){let r=0;const s=[t.selectors,t.ngContentSelectors,t.hostVars,t.hostAttrs,t.consts,t.vars,t.decls,t.encapsulation,t.standalone,t.signals,t.exportAs,JSON.stringify(t.inputs),JSON.stringify(t.outputs),Object.getOwnPropertyNames(t.type.prototype),!!t.contentQueries,!!t.viewQuery].join("|");for(const f of s)r=Math.imul(31,r)+f.charCodeAt(0)<<0;return r+=2147483648,"c"+r}(s),s})}function Po(t){return Yn(t)||bi(t)}function Ja(t){return null!==t}function zs(t){return Ge(()=>({type:t.type,bootstrap:t.bootstrap||qt,declarations:t.declarations||qt,imports:t.imports||qt,exports:t.exports||qt,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function _o(t,r){if(null==t)return In;const s={};for(const l in t)if(t.hasOwnProperty(l)){let f=t[l],_=f;Array.isArray(f)&&(_=f[1],f=f[0]),s[f]=l,r&&(r[f]=_)}return s}function Oa(t){return Ge(()=>{const r=rs(t);return Yi(r),r})}function ks(t){return{type:t.type,name:t.name,factory:null,pure:!1!==t.pure,standalone:!0===t.standalone,onDestroy:t.type.prototype.ngOnDestroy||null}}function Yn(t){return t[tr]||null}function bi(t){return t[ui]||null}function fi(t){return t[Mr]||null}function ns(t){const r=Yn(t)||bi(t)||fi(t);return null!==r&&r.standalone}function Dr(t,r){const s=t[Js]||null;if(!s&&!0===r)throw new Error(`Type ${Ve(t)} does not have '\u0275mod' property.`);return s}function rs(t){const r={};return{type:t.type,providersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:r,inputTransforms:null,inputConfig:t.inputs||In,exportAs:t.exportAs||null,standalone:!0===t.standalone,signals:!0===t.signals,selectors:t.selectors||qt,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:_o(t.inputs,r),outputs:_o(t.outputs)}}function Yi(t){t.features?.forEach(r=>r(t))}function _i(t,r){if(!t)return null;const s=r?fi:Po;return()=>("function"==typeof t?t():t).map(l=>s(l)).filter(Ja)}const xr=0,xt=1,Cn=2,nr=3,ii=4,Zi=5,ei=6,si=7,rr=8,eo=9,Cr=10,En=11,yi=12,so=13,Qi=14,pi=15,ar=16,Oo=17,wi=18,Ji=19,gs=20,to=21,ms=22,_s=23,Xa=24,Vn=25,ys=1,Rs=2,Fs=7,Ws=9,ti=11;function Fr(t){return Array.isArray(t)&&"object"==typeof t[ys]}function Xi(t){return Array.isArray(t)&&!0===t[ys]}function Ns(t){return 0!=(4&t.flags)}function qs(t){return t.componentOffset>-1}function Ur(t){return 1==(1&t.flags)}function Ls(t){return!!t.template}function yl(t){return 0!=(512&t[Cn])}function es(t,r){return t.hasOwnProperty(Hi)?t[Hi]:null}let Ci=null,Vs=!1;function Is(t){const r=Ci;return Ci=t,r}const ma={version:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{}};function Vo(t){if(!oo(t)||t.dirty){if(!t.producerMustRecompute(t)&&!tl(t))return void(t.dirty=!1);t.producerRecomputeValue(t),t.dirty=!1}}function Uu(t){t.dirty=!0,function el(t){if(void 0===t.liveConsumerNode)return;const r=Vs;Vs=!0;try{for(const s of t.liveConsumerNode)s.dirty||Uu(s)}finally{Vs=r}}(t),t.consumerMarkedDirty?.(t)}function Bo(t){return t&&(t.nextProducerIndex=0),Is(t)}function Vl(t,r){if(Is(r),t&&void 0!==t.producerNode&&void 0!==t.producerIndexOfThis&&void 0!==t.producerLastReadVersion){if(oo(t))for(let s=t.nextProducerIndex;s<t.producerNode.length;s++)vl(t.producerNode[s],t.producerIndexOfThis[s]);for(;t.producerNode.length>t.nextProducerIndex;)t.producerNode.pop(),t.producerLastReadVersion.pop(),t.producerIndexOfThis.pop()}}function tl(t){Il(t);for(let r=0;r<t.producerNode.length;r++){const s=t.producerNode[r],l=t.producerLastReadVersion[r];if(l!==s.version||(Vo(s),l!==s.version))return!0}return!1}function Bl(t){if(Il(t),oo(t))for(let r=0;r<t.producerNode.length;r++)vl(t.producerNode[r],t.producerIndexOfThis[r]);t.producerNode.length=t.producerLastReadVersion.length=t.producerIndexOfThis.length=0,t.liveConsumerNode&&(t.liveConsumerNode.length=t.liveConsumerIndexOfThis.length=0)}function vl(t,r){if(function Dc(t){t.liveConsumerNode??=[],t.liveConsumerIndexOfThis??=[]}(t),Il(t),1===t.liveConsumerNode.length)for(let l=0;l<t.producerNode.length;l++)vl(t.producerNode[l],t.producerIndexOfThis[l]);const s=t.liveConsumerNode.length-1;if(t.liveConsumerNode[r]=t.liveConsumerNode[s],t.liveConsumerIndexOfThis[r]=t.liveConsumerIndexOfThis[s],t.liveConsumerNode.length--,t.liveConsumerIndexOfThis.length--,r<t.liveConsumerNode.length){const l=t.liveConsumerIndexOfThis[r],f=t.liveConsumerNode[r];Il(f),f.producerIndexOfThis[l]=r}}function oo(t){return t.consumerIsAlwaysLive||(t?.liveConsumerNode?.length??0)>0}function Il(t){t.producerNode??=[],t.producerIndexOfThis??=[],t.producerLastReadVersion??=[]}let ao=null;function et(t){const r=Is(null);try{return t()}finally{Is(r)}}const dn=()=>{},ir=(()=>({...ma,consumerIsAlwaysLive:!0,consumerAllowSignalWrites:!1,consumerMarkedDirty:t=>{t.schedule(t.ref)},hasRun:!1,cleanupFn:dn}))();class Xn{constructor(r,s,l){this.previousValue=r,this.currentValue=s,this.firstChange=l}isFirstChange(){return this.firstChange}}function bn(){return oi}function oi(t){return t.type.prototype.ngOnChanges&&(t.setInput=Ai),kr}function kr(){const t=ia(this),r=t?.current;if(r){const s=t.previous;if(s===In)t.previous=r;else for(let l in r)s[l]=r[l];t.current=null,this.ngOnChanges(r)}}function Ai(t,r,s,l){const f=this.declaredInputs[s],_=ia(t)||function sa(t,r){return t[Eo]=r}(t,{previous:In,current:null}),b=_.current||(_.current={}),N=_.previous,F=N[f];b[f]=new Xn(F&&F.currentValue,r,N===In),t[l]=r}bn.ngInherit=!0;const Eo="__ngSimpleChanges__";function ia(t){return t[Eo]||null}const ki=function(t,r,s){};function ni(t){for(;Array.isArray(t);)t=t[xr];return t}function pu(t,r){return ni(r[t])}function Ps(t,r){return ni(r[t.index])}function oa(t,r){return t.data[r]}function Os(t,r){return t[r]}function Zr(t,r){const s=r[t];return Fr(s)?s:s[xr]}function rl(t,r){return null==r?null:t[r]}function Tt(t){t[Oo]=0}function Si(t){1024&t[Cn]||(t[Cn]|=1024,il(t,1))}function bo(t){1024&t[Cn]&&(t[Cn]&=-1025,il(t,-1))}function il(t,r){let s=t[nr];if(null===s)return;s[Zi]+=r;let l=s;for(s=s[nr];null!==s&&(1===r&&1===l[Zi]||-1===r&&0===l[Zi]);)s[Zi]+=r,l=s,s=s[nr]}function on(t,r){if(256==(256&t[Cn]))throw new _e(911,!1);null===t[to]&&(t[to]=[]),t[to].push(r)}const qn={lFrame:he(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function ph(){return qn.bindingsEnabled}function Hl(){return null!==qn.skipHydrationRootTNode}function Dt(){return qn.lFrame.lView}function br(){return qn.lFrame.tView}function Ad(t){return qn.lFrame.contextLView=t,t[rr]}function Zn(t){return qn.lFrame.contextLView=null,t}function $i(){let t=Qc();for(;null!==t&&64===t.type;)t=t.parent;return t}function Qc(){return qn.lFrame.currentTNode}function jr(){const t=qn.lFrame,r=t.currentTNode;return t.isParent?r:r.parent}function un(t,r){const s=qn.lFrame;s.currentTNode=t,s.isParent=r}function wo(){return qn.lFrame.isParent}function lr(){qn.lFrame.isParent=!1}function Ri(){const t=qn.lFrame;let r=t.bindingRootIndex;return-1===r&&(r=t.bindingRootIndex=t.tView.bindingStartIndex),r}function ya(){return qn.lFrame.bindingIndex}function Gl(){return qn.lFrame.bindingIndex++}function uo(t){const r=qn.lFrame,s=r.bindingIndex;return r.bindingIndex=r.bindingIndex+t,s}function ju(t){qn.lFrame.inI18n=t}function $l(t,r){const s=qn.lFrame;s.bindingIndex=s.bindingRootIndex=t,Do(r)}function Do(t){qn.lFrame.currentDirectiveIndex=t}function R(){return qn.lFrame.currentQueryIndex}function k(t){qn.lFrame.currentQueryIndex=t}function A(t){const r=t[xt];return 2===r.type?r.declTNode:1===r.type?t[ei]:null}function L(t,r,s){if(s&Mt.SkipSelf){let f=r,_=t;for(;!(f=f.parent,null!==f||s&Mt.Host||(f=A(_),null===f||(_=_[Qi],10&f.type))););if(null===f)return!1;r=f,t=_}const l=qn.lFrame=te();return l.currentTNode=r,l.lView=t,!0}function V(t){const r=te(),s=t[xt];qn.lFrame=r,r.currentTNode=s.firstChild,r.lView=t,r.tView=s,r.contextLView=t,r.bindingIndex=s.bindingStartIndex,r.inI18n=!1}function te(){const t=qn.lFrame,r=null===t?null:t.child;return null===r?he(t):r}function he(t){const r={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return null!==t&&(t.child=r),r}function Qe(){const t=qn.lFrame;return qn.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}const Ze=Qe;function Ht(){const t=Qe();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function kn(){return qn.lFrame.selectedIndex}function zi(t){qn.lFrame.selectedIndex=t}function gi(){const t=qn.lFrame;return oa(t.tView,t.selectedIndex)}let Ts=!0;function gu(){return Ts}function Ni(t){Ts=t}function bl(t,r){for(let s=r.directiveStart,l=r.directiveEnd;s<l;s++){const _=t.data[s].type.prototype,{ngAfterContentInit:b,ngAfterContentChecked:N,ngAfterViewInit:F,ngAfterViewChecked:z,ngOnDestroy:ne}=_;b&&(t.contentHooks??=[]).push(-s,b),N&&((t.contentHooks??=[]).push(s,N),(t.contentCheckHooks??=[]).push(s,N)),F&&(t.viewHooks??=[]).push(-s,F),z&&((t.viewHooks??=[]).push(s,z),(t.viewCheckHooks??=[]).push(s,z)),null!=ne&&(t.destroyHooks??=[]).push(s,ne)}}function zl(t,r,s){Ho(t,r,3,s)}function Ia(t,r,s,l){(3&t[Cn])===s&&Ho(t,r,s,l)}function mu(t,r){let s=t[Cn];(3&s)===r&&(s&=8191,s+=1,t[Cn]=s)}function Ho(t,r,s,l){const _=l??-1,b=r.length-1;let N=0;for(let F=void 0!==l?65535&t[Oo]:0;F<b;F++)if("number"==typeof r[F+1]){if(N=r[F],null!=l&&N>=l)break}else r[F]<0&&(t[Oo]+=65536),(N<_||-1==_)&&(_h(t,s,r,F),t[Oo]=(4294901760&t[Oo])+F+2),F++}function Wl(t,r){ki(4,t,r);const s=Is(null);try{r.call(t)}finally{Is(s),ki(5,t,r)}}function _h(t,r,s,l){const f=s[l]<0,_=s[l+1],N=t[f?-s[l]:s[l]];f?t[Cn]>>13<t[Oo]>>16&&(3&t[Cn])===r&&(t[Cn]+=8192,Wl(N,_)):Wl(N,_)}const _u=-1;class yu{constructor(r,s,l){this.factory=r,this.resolving=!1,this.canSeeViewProviders=s,this.injectImpl=l}}function ql(t){return t!==_u}function ol(t){return 32767&t}function Ms(t,r){let s=function df(t){return t>>16}(t),l=r;for(;s>0;)l=l[Qi],s--;return l}let zu=!0;function Nd(t){const r=zu;return zu=t,r}const as=255,Wu=5;let qu=0;const Go={};function al(t,r){const s=Qr(t,r);if(-1!==s)return s;const l=r[xt];l.firstCreatePass&&(t.injectorIndex=r.length,ls(l.data,t),ls(r,null),ls(l.blueprint,null));const f=Kl(t,r),_=t.injectorIndex;if(ql(f)){const b=ol(f),N=Ms(f,r),F=N[xt].data;for(let z=0;z<8;z++)r[_+z]=N[b+z]|F[b+z]}return r[_+8]=f,_}function ls(t,r){t.push(0,0,0,0,0,0,0,0,r)}function Qr(t,r){return-1===t.injectorIndex||t.parent&&t.parent.injectorIndex===t.injectorIndex||null===r[t.injectorIndex+8]?-1:t.injectorIndex}function Kl(t,r){if(t.parent&&-1!==t.parent.injectorIndex)return t.parent.injectorIndex;let s=0,l=null,f=r;for(;null!==f;){if(l=Cl(f),null===l)return _u;if(s++,f=f[Qi],-1!==l.injectorIndex)return l.injectorIndex|s<<16}return _u}function Ku(t,r,s){!function hi(t,r,s){let l;"string"==typeof s?l=s.charCodeAt(0)||0:s.hasOwnProperty(Ds)&&(l=s[Ds]),null==l&&(l=s[Ds]=qu++);const f=l&as;r.data[t+(f>>Wu)]|=1<<f}(t,r,s)}function Yu(t,r,s){if(s&Mt.Optional||void 0!==t)return t;Ot()}function gp(t,r,s,l){if(s&Mt.Optional&&void 0===l&&(l=null),!(s&(Mt.Self|Mt.Host))){const f=t[eo],_=or(void 0);try{return f?f.get(r,l,s&Mt.Optional):cn(r,l,s&Mt.Optional)}finally{or(_)}}return Yu(l,0,s)}function Bs(t,r,s,l=Mt.Default,f){if(null!==t){if(2048&r[Cn]&&!(l&Mt.Self)){const b=function Dl(t,r,s,l,f){let _=t,b=r;for(;null!==_&&null!==b&&2048&b[Cn]&&!(512&b[Cn]);){const N=Zu(_,b,s,l|Mt.Self,Go);if(N!==Go)return N;let F=_.parent;if(!F){const z=b[gs];if(z){const ne=z.get(s,Go,l);if(ne!==Go)return ne}F=Cl(b),b=b[Qi]}_=F}return f}(t,r,s,l,Go);if(b!==Go)return b}const _=Zu(t,r,s,l,Go);if(_!==Go)return _}return gp(r,s,l,f)}function Zu(t,r,s,l,f){const _=function ua(t){if("string"==typeof t)return t.charCodeAt(0)||0;const r=t.hasOwnProperty(Ds)?t[Ds]:void 0;return"number"==typeof r?r>=0?r&as:Qu:r}(s);if("function"==typeof _){if(!L(r,t,l))return l&Mt.Host?Yu(f,0,l):gp(r,s,l,f);try{let b;if(b=_(l),null!=b||l&Mt.Optional)return b;Ot()}finally{Ze()}}else if("number"==typeof _){let b=null,N=Qr(t,r),F=_u,z=l&Mt.Host?r[pi][ei]:null;for((-1===N||l&Mt.SkipSelf)&&(F=-1===N?Kl(t,r):r[N+8],F!==_u&&ll(l,!1)?(b=r[xt],N=ol(F),r=Ms(F,r)):N=-1);-1!==N;){const ne=r[xt];if(Zl(_,N,ne.data)){const ge=Yl(N,r,s,b,l,z);if(ge!==Go)return ge}F=r[N+8],F!==_u&&ll(l,r[xt].data[N+8]===z)&&Zl(_,N,r)?(b=ne,N=ol(F),r=Ms(F,r)):N=-1}}return f}function Yl(t,r,s,l,f,_){const b=r[xt],N=b.data[t+8],ne=ai(N,b,s,null==l?qs(N)&&zu:l!=b&&0!=(3&N.type),f&Mt.Host&&_===N);return null!==ne?Sr(r,b,ne,N):Go}function ai(t,r,s,l,f){const _=t.providerIndexes,b=r.data,N=1048575&_,F=t.directiveStart,ne=_>>20,Be=f?N+ne:t.directiveEnd;for(let Ye=l?N:N+ne;Ye<Be;Ye++){const yt=b[Ye];if(Ye<F&&s===yt||Ye>=F&&yt.type===s)return Ye}if(f){const Ye=b[F];if(Ye&&Ls(Ye)&&Ye.type===s)return F}return null}function Sr(t,r,s,l){let f=t[s];const _=r.data;if(function Rc(t){return t instanceof yu}(f)){const b=f;b.resolving&&function ot(t,r){const s=r?`. Dependency path: ${r.join(" > ")} > ${t}`:"";throw new _e(-200,`Circular dependency in DI detected for ${t}${s}`)}(function $e(t){return"function"==typeof t?t.name||t.toString():"object"==typeof t&&null!=t&&"function"==typeof t.type?t.type.name||t.type.toString():Pe(t)}(_[s]));const N=Nd(b.canSeeViewProviders);b.resolving=!0;const z=b.injectImpl?or(b.injectImpl):null;L(t,l,Mt.Default);try{f=t[s]=b.factory(void 0,_,t,l),r.firstCreatePass&&s>=l.directiveStart&&function jo(t,r,s){const{ngOnChanges:l,ngOnInit:f,ngDoCheck:_}=r.type.prototype;if(l){const b=oi(r);(s.preOrderHooks??=[]).push(t,b),(s.preOrderCheckHooks??=[]).push(t,b)}f&&(s.preOrderHooks??=[]).push(0-t,f),_&&((s.preOrderHooks??=[]).push(t,_),(s.preOrderCheckHooks??=[]).push(t,_))}(s,_[s],r)}finally{null!==z&&or(z),Nd(N),b.resolving=!1,Ze()}}return f}function Zl(t,r,s){return!!(s[r+(t>>Wu)]&1<<t)}function ll(t,r){return!(t&Mt.Self||t&Mt.Host&&r)}class Pi{constructor(r,s){this._tNode=r,this._lView=s}get(r,s,l){return Bs(this._tNode,this._lView,r,hn(l),s)}}function Qu(){return new Pi($i(),Dt())}function wl(t){return Ge(()=>{const r=t.prototype.constructor,s=r[Hi]||ca(r),l=Object.prototype;let f=Object.getPrototypeOf(t.prototype).constructor;for(;f&&f!==l;){const _=f[Hi]||ca(f);if(_&&_!==s)return _;f=Object.getPrototypeOf(f)}return _=>new _})}function ca(t){return Ct(t)?()=>{const r=ca(mt(t));return r&&r()}:es(t)}function Cl(t){const r=t[xt],s=r.type;return 2===s?r.declTNode:1===s?t[ei]:null}function Xc(t){return function la(t,r){if("class"===r)return t.classes;if("style"===r)return t.styles;const s=t.attrs;if(s){const l=s.length;let f=0;for(;f<l;){const _=s[f];if(Mn(_))break;if(0===_)f+=2;else if("number"==typeof _)for(f++;f<l&&"string"==typeof s[f];)f++;else{if(_===r)return s[f+1];f+=2}}}return null}($i(),t)}const da="__parameters__";function cl(t,r,s){return Ge(()=>{const l=function ul(t){return function(...s){if(t){const l=t(...s);for(const f in l)this[f]=l[f]}}}(r);function f(..._){if(this instanceof f)return l.apply(this,_),this;const b=new f(..._);return N.annotation=b,N;function N(F,z,ne){const ge=F.hasOwnProperty(da)?F[da]:Object.defineProperty(F,da,{value:[]})[da];for(;ge.length<=ne;)ge.push(null);return(ge[ne]=ge[ne]||[]).push(b),F}}return s&&(f.prototype=Object.create(s.prototype)),f.prototype.ngMetadataName=t,f.annotationCls=f,f})}function Xl(t,r){t.forEach(s=>Array.isArray(s)?Xl(s,r):r(s))}function ec(t,r,s){r>=t.length?t.push(s):t.splice(r,0,s)}function vr(t,r){return r>=t.length-1?t.pop():t.splice(r,1)[0]}function Kr(t,r){const s=[];for(let l=0;l<t;l++)s.push(r);return s}function xs(t,r,s){let l=tu(t,r);return l>=0?t[1|l]=s:(l=~l,function eu(t,r,s,l){let f=t.length;if(f==r)t.push(s,l);else if(1===f)t.push(l,t[0]),t[0]=s;else{for(f--,t.push(t[f-1],t[f]);f>r;)t[f]=t[f-2],f--;t[r]=s,t[r+1]=l}}(t,l,r,s)),l}function Md(t,r){const s=tu(t,r);if(s>=0)return t[1|s]}function tu(t,r){return function Pc(t,r,s){let l=0,f=t.length>>s;for(;f!==l;){const _=l+(f-l>>1),b=t[_<<s];if(r===b)return _<<s;b>r?f=_:l=_+1}return~(f<<s)}(t,r,1)}const ja=li(cl("Optional"),8),Eu=li(cl("SkipSelf"),4);function Da(t){return 128==(128&t.flags)}var Ca=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}(Ca||{});const Du=/^>|^->|<!--|-->|--!>|<!-$/g,_f=/(<|>)/g,ad="\u200b$1\u200b";const Aa=new Map;let Fi=0;const Rl="__ngContext__";function zo(t,r){Fr(r)?(t[Rl]=r[Ji],function yf(t){Aa.set(t[Ji],t)}(r)):t[Rl]=r}let Gd;function fl(t,r){return Gd(t,r)}function cd(t){const r=t[nr];return Xi(r)?r[nr]:r}function D(t){return v(t[yi])}function g(t){return v(t[ii])}function v(t){for(;null!==t&&!Xi(t);)t=t[ii];return t}function C(t,r,s,l,f){if(null!=l){let _,b=!1;Xi(l)?_=l:Fr(l)&&(b=!0,l=l[xr]);const N=ni(l);0===t&&null!==s?null==f?dd(r,s,N):Ru(r,s,N,f||null,!0):1===t&&null!==s?Ru(r,s,N,f||null,!0):2===t?function Rp(t,r,s){const l=Lc(t,r);l&&function $d(t,r,s,l){t.removeChild(r,s,l)}(t,l,r,s)}(r,N,b):3===t&&r.destroyNode(N),null!=_&&function zd(t,r,s,l,f){const _=s[Fs];_!==ni(s)&&C(r,t,l,_,f);for(let N=ti;N<s.length;N++){const F=s[N];Np(F[xt],F,t,r,l,_)}}(r,t,_,s,f)}}function $(t,r){return t.createText(r)}function De(t,r){return t.createComment(function Sg(t){return t.replace(Du,r=>r.replace(_f,ad))}(r))}function We(t,r,s){return t.createElement(r,s)}function Au(t,r){const s=t[Ws],l=s.indexOf(r);bo(r),s.splice(l,1)}function ru(t,r){if(t.length<=ti)return;const s=ti+r,l=t[s];if(l){const f=l[ar];null!==f&&f!==t&&Au(f,l),r>0&&(t[s-1][ii]=l[ii]);const _=vr(t,ti+r);!function gt(t,r){Np(t,r,r[En],2,null,null),r[xr]=null,r[ei]=null}(l[xt],l);const b=_[wi];null!==b&&b.detachView(_[xt]),l[nr]=null,l[ii]=null,l[Cn]&=-129}return l}function iu(t,r){if(!(256&r[Cn])){const s=r[En];r[_s]&&Bl(r[_s]),r[Xa]&&Bl(r[Xa]),s.destroyNode&&Np(t,r,s,3,null,null),function yn(t){let r=t[yi];if(!r)return Su(t[xt],t);for(;r;){let s=null;if(Fr(r))s=r[yi];else{const l=r[ti];l&&(s=l)}if(!s){for(;r&&!r[ii]&&r!==t;)Fr(r)&&Su(r[xt],r),r=r[nr];null===r&&(r=t),Fr(r)&&Su(r[xt],r),s=r&&r[ii]}r=s}}(r)}}function Su(t,r){if(!(256&r[Cn])){r[Cn]&=-129,r[Cn]|=256,function Tf(t,r){let s;if(null!=t&&null!=(s=t.destroyHooks))for(let l=0;l<s.length;l+=2){const f=r[s[l]];if(!(f instanceof yu)){const _=s[l+1];if(Array.isArray(_))for(let b=0;b<_.length;b+=2){const N=f[_[b]],F=_[b+1];ki(4,N,F);try{F.call(N)}finally{ki(5,N,F)}}else{ki(4,f,_);try{_.call(f)}finally{ki(5,f,_)}}}}}(t,r),function Ef(t,r){const s=t.cleanup,l=r[si];if(null!==s)for(let _=0;_<s.length-1;_+=2)if("string"==typeof s[_]){const b=s[_+3];b>=0?l[b]():l[-b].unsubscribe(),_+=2}else s[_].call(l[s[_+1]]);null!==l&&(r[si]=null);const f=r[to];if(null!==f){r[to]=null;for(let _=0;_<f.length;_++)(0,f[_])()}}(t,r),1===r[xt].type&&r[En].destroy();const s=r[ar];if(null!==s&&Xi(r[nr])){s!==r[nr]&&Au(s,r);const l=r[wi];null!==l&&l.detachView(t)}!function Ep(t){Aa.delete(t[Ji])}(r)}}function ds(t,r,s){return Fc(t,r.parent,s)}function Fc(t,r,s){let l=r;for(;null!==l&&40&l.type;)l=(r=l).parent;if(null===l)return s[xr];{const{componentOffset:f}=l;if(f>-1){const{encapsulation:_}=t.data[l.directiveStart+f];if(_===sn.None||_===sn.Emulated)return null}return Ps(l,s)}}function Ru(t,r,s,l,f){t.insertBefore(r,s,l,f)}function dd(t,r,s){t.appendChild(r,s)}function pl(t,r,s,l,f){null!==l?Ru(t,r,s,l,f):dd(t,r,s)}function Lc(t,r){return t.parentNode(r)}function Cp(t,r,s){return Ng(t,r,s)}function Ap(t,r,s){return 40&t.type?Ps(t,s):null}let Sp,Pl,hd,Sf,Ng=Ap;function bf(t,r){Ng=t,Sp=r}function wf(t,r,s,l){const f=ds(t,l,r),_=r[En],N=Cp(l.parent||r[ei],l,r);if(null!=f)if(Array.isArray(s))for(let F=0;F<s.length;F++)pl(_,f,s[F],N,!1);else pl(_,f,s,N,!1);void 0!==Sp&&Sp(_,l,r,s,f)}function wh(t,r){if(null!==r){const s=r.type;if(3&s)return Ps(r,t);if(4&s)return Df(-1,t[r.index]);if(8&s){const l=r.child;if(null!==l)return wh(t,l);{const f=t[r.index];return Xi(f)?Df(-1,f):ni(f)}}if(32&s)return fl(r,t)()||ni(t[r.index]);{const l=Pg(t,r);return null!==l?Array.isArray(l)?l[0]:wh(cd(t[pi]),l):wh(t,r.next)}}return null}function Pg(t,r){return null!==r?t[pi][ei].projection[r.projection]:null}function Df(t,r){const s=ti+t+1;if(s<r.length){const l=r[s],f=l[xt].firstChild;if(null!==f)return wh(l,f)}return r[Fs]}function Og(t,r,s,l,f,_,b){for(;null!=s;){const N=l[s.index],F=s.type;if(b&&0===r&&(N&&zo(ni(N),l),s.flags|=2),32!=(32&s.flags))if(8&F)Og(t,r,s.child,l,f,_,!1),C(r,t,f,N,_);else if(32&F){const z=fl(s,l);let ne;for(;ne=z();)C(r,t,f,ne,_);C(r,t,f,N,_)}else 16&F?Mg(t,r,l,s,f,_):C(r,t,f,N,_);s=b?s.projectionNext:s.next}}function Np(t,r,s,l,f,_){Og(s,l,t.firstChild,r,f,_,!1)}function Mg(t,r,s,l,f,_){const b=s[pi],F=b[ei].projection[l.projection];if(Array.isArray(F))for(let z=0;z<F.length;z++)C(r,t,f,F[z],_);else{let z=F;const ne=b[nr];Da(l)&&(z.flags|=128),Og(t,r,z,ne,f,_,!0)}}function ny(t,r,s){""===s?t.removeAttribute(r,"class"):t.setAttribute(r,"class",s)}function $m(t,r,s){const{mergedAttrs:l,classes:f,styles:_}=s;null!==l&&Ka(t,r,l),null!==f&&ny(t,r,f),null!==_&&function xg(t,r,s){t.setAttribute(r,"style",s)}(t,r,_)}function Dh(t){return function Pp(){if(void 0===Pl&&(Pl=null,Hn.trustedTypes))try{Pl=Hn.trustedTypes.createPolicy("angular",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch{}return Pl}()?.createHTML(t)||t}function Op(t){hd=t}function Ah(){if(void 0!==hd)return hd;if(typeof document<"u")return document;throw new _e(210,!1)}function iy(t){return function Sh(){if(void 0===Sf&&(Sf=null,Hn.trustedTypes))try{Sf=Hn.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch{}return Sf}()?.createScriptURL(t)||t}class qm{constructor(r){this.changingThisBreaksApplicationSecurity=r}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${Re})`}}function fd(t){return t instanceof qm?t.changingThisBreaksApplicationSecurity:t}function Rh(t,r){const s=function yv(t){return t instanceof qm&&t.getTypeName()||null}(t);if(null!=s&&s!==r){if("ResourceURL"===s&&"URL"===r)return!0;throw new Error(`Required a safe ${r}, got a ${s} (see ${Re})`)}return s===r}class sy{constructor(r){this.inertDocumentHelper=r}getInertBodyElement(r){r="<body><remove></remove>"+r;try{const s=(new window.DOMParser).parseFromString(Dh(r),"text/html").body;return null===s?this.inertDocumentHelper.getInertBodyElement(r):(s.removeChild(s.firstChild),s)}catch{return null}}}class vv{constructor(r){this.defaultDoc=r,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert")}getInertBodyElement(r){const s=this.inertDocument.createElement("template");return s.innerHTML=Dh(r),s}}const xp=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function Vg(t){return(t=String(t)).match(xp)?t:"unsafe:"+t}function ac(t){const r={};for(const s of t.split(","))r[s]=!0;return r}function Ph(...t){const r={};for(const s of t)for(const l in s)s.hasOwnProperty(l)&&(r[l]=!0);return r}const Jm=ac("area,br,col,hr,img,wbr"),Nf=ac("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),oy=ac("rp,rt"),Pf=Ph(Jm,Ph(Nf,ac("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),Ph(oy,ac("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),Ph(oy,Nf)),qd=ac("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),e_=Ph(qd,ac("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),ac("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext"));var Ol=function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t}(Ol||{});function kp(t){const r=xh();return r?r.sanitize(Ol.URL,t)||"":Rh(t,"URL")?fd(t):Vg(Pe(t))}function Vc(t){const r=xh();if(r)return iy(r.sanitize(Ol.RESOURCE_URL,t)||"");if(Rh(t,"ResourceURL"))return iy(fd(t));throw new _e(904,!1)}function jg(t,r,s){return function fy(t,r){return"src"===r&&("embed"===t||"frame"===t||"iframe"===t||"media"===t||"script"===t)||"href"===r&&("base"===t||"link"===t)?Vc:kp}(r,s)(t)}function xh(){const t=Dt();return t&&t[Cr].sanitizer}const xf=new Xt("ENVIRONMENT_INITIALIZER"),Hg=new Xt("INJECTOR",-1),i_=new Xt("INJECTOR_DEF_TYPES");class Fp{get(r,s=xi){if(s===xi){const l=new Error(`NullInjectorError: No provider for ${Ve(r)}!`);throw l.name="NullInjectorError",l}return s}}function kf(...t){return{\u0275providers:Gg(0,t),\u0275fromNgModule:!0}}function Gg(t,...r){const s=[],l=new Set;let f;const _=b=>{s.push(b)};return Xl(r,b=>{const N=b;Lp(N,_,[],l)&&(f||=[],f.push(N))}),void 0!==f&&$g(f,_),s}function $g(t,r){for(let s=0;s<t.length;s++){const{ngModule:l,providers:f}=t[s];zg(f,_=>{r(_,l)})}}function Lp(t,r,s,l){if(!(t=mt(t)))return!1;let f=null,_=lt(t);const b=!_&&Yn(t);if(_||b){if(b&&!b.standalone)return!1;f=t}else{const F=t.ngModule;if(_=lt(F),!_)return!1;f=F}const N=l.has(f);if(b){if(N)return!1;if(l.add(f),b.dependencies){const F="function"==typeof b.dependencies?b.dependencies():b.dependencies;for(const z of F)Lp(z,r,s,l)}}else{if(!_)return!1;{if(null!=_.imports&&!N){let z;l.add(f);try{Xl(_.imports,ne=>{Lp(ne,r,s,l)&&(z||=[],z.push(ne))})}finally{}void 0!==z&&$g(z,r)}if(!N){const z=es(f)||(()=>new f);r({provide:f,useFactory:z,deps:qt},f),r({provide:i_,useValue:f,multi:!0},f),r({provide:xf,useValue:()=>$t(f),multi:!0},f)}const F=_.providers;if(null!=F&&!N){const z=t;zg(F,ne=>{r(ne,z)})}}}return f!==t&&void 0!==t.providers}function zg(t,r){for(let s of t)bt(s)&&(s=s.\u0275providers),Array.isArray(s)?zg(s,r):r(s)}const gy=ye({provide:String,useValue:ye});function Ff(t){return null!==t&&"object"==typeof t&&gy in t}function Kd(t){return"function"==typeof t}const Wg=new Xt("Set Injector scope."),kh={},_y={};let Fh;function Lh(){return void 0===Fh&&(Fh=new Fp),Fh}class lc{}class Yd extends lc{get destroyed(){return this._destroyed}constructor(r,s,l,f){super(),this.parent=s,this.source=l,this.scopes=f,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Lf(r,b=>this.processProvider(b)),this.records.set(Hg,uc(void 0,this)),f.has("environment")&&this.records.set(lc,uc(void 0,this));const _=this.records.get(Wg);null!=_&&"string"==typeof _.value&&this.scopes.add(_.value),this.injectorDefTypes=new Set(this.get(i_.multi,qt,Mt.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const s of this._ngOnDestroyHooks)s.ngOnDestroy();const r=this._onDestroyHooks;this._onDestroyHooks=[];for(const s of r)s()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear()}}onDestroy(r){return this.assertNotDestroyed(),this._onDestroyHooks.push(r),()=>this.removeOnDestroy(r)}runInContext(r){this.assertNotDestroyed();const s=_t(this),l=or(void 0);try{return r()}finally{_t(s),or(l)}}get(r,s=xi,l=Mt.Default){if(this.assertNotDestroyed(),r.hasOwnProperty(qa))return r[qa](this);l=hn(l);const _=_t(this),b=or(void 0);try{if(!(l&Mt.SkipSelf)){let F=this.records.get(r);if(void 0===F){const z=function a_(t){return"function"==typeof t||"object"==typeof t&&t instanceof Xt}(r)&&$n(r);F=z&&this.injectableDefInScope(z)?uc(su(r),kh):null,this.records.set(r,F)}if(null!=F)return this.hydrate(r,F)}return(l&Mt.Self?Lh():this.parent).get(r,s=l&Mt.Optional&&s===xi?null:s)}catch(N){if("NullInjectorError"===N.name){if((N[ji]=N[ji]||[]).unshift(Ve(r)),_)throw N;return function Qs(t,r,s,l){const f=t[ji];throw r[re]&&f.unshift(r[re]),t.message=function it(t,r,s,l=null){t=t&&"\n"===t.charAt(0)&&"\u0275"==t.charAt(1)?t.slice(2):t;let f=Ve(r);if(Array.isArray(r))f=r.map(Ve).join(" -> ");else if("object"==typeof r){let _=[];for(let b in r)if(r.hasOwnProperty(b)){let N=r[b];_.push(b+":"+("string"==typeof N?JSON.stringify(N):Ve(N)))}f=`{${_.join(", ")}}`}return`${s}${l?"("+l+")":""}[${f}]: ${t.replace(ie,"\n  ")}`}("\n"+t.message,f,s,l),t.ngTokenPath=f,t[ji]=null,t}(N,r,"R3InjectorError",this.source)}throw N}finally{or(b),_t(_)}}resolveInjectorInitializers(){const r=_t(this),s=or(void 0);try{const f=this.get(xf.multi,qt,Mt.Self);for(const _ of f)_()}finally{_t(r),or(s)}}toString(){const r=[],s=this.records;for(const l of s.keys())r.push(Ve(l));return`R3Injector[${r.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new _e(205,!1)}processProvider(r){let s=Kd(r=mt(r))?r:mt(r&&r.provide);const l=function Zd(t){return Ff(t)?uc(void 0,t.useValue):uc(Qd(t),kh)}(r);if(Kd(r)||!0!==r.multi)this.records.get(s);else{let f=this.records.get(s);f||(f=uc(void 0,kh,!0),f.factory=()=>Br(f.multi),this.records.set(s,f)),s=r,f.multi.push(r)}this.records.set(s,l)}hydrate(r,s){return s.value===kh&&(s.value=_y,s.value=s.factory()),"object"==typeof s.value&&s.value&&function o_(t){return null!==t&&"object"==typeof t&&"function"==typeof t.ngOnDestroy}(s.value)&&this._ngOnDestroyHooks.add(s.value),s.value}injectableDefInScope(r){if(!r.providedIn)return!1;const s=mt(r.providedIn);return"string"==typeof s?"any"===s||this.scopes.has(s):this.injectorDefTypes.has(s)}removeOnDestroy(r){const s=this._onDestroyHooks.indexOf(r);-1!==s&&this._onDestroyHooks.splice(s,1)}}function su(t){const r=$n(t),s=null!==r?r.factory:es(t);if(null!==s)return s;if(t instanceof Xt)throw new _e(204,!1);if(t instanceof Function)return function Vp(t){const r=t.length;if(r>0)throw Kr(r,"?"),new _e(204,!1);const s=function ze(t){return t&&(t[pt]||t[jn])||null}(t);return null!==s?()=>s.factory(t):()=>new t}(t);throw new _e(204,!1)}function Qd(t,r,s){let l;if(Kd(t)){const f=mt(t);return es(f)||su(f)}if(Ff(t))l=()=>mt(t.useValue);else if(function s_(t){return!(!t||!t.useFactory)}(t))l=()=>t.useFactory(...Br(t.deps||[]));else if(function So(t){return!(!t||!t.useExisting)}(t))l=()=>$t(mt(t.useExisting));else{const f=mt(t&&(t.useClass||t.provide));if(!function $a(t){return!!t.deps}(t))return es(f)||su(f);l=()=>new f(...Br(t.deps))}return l}function uc(t,r,s=!1){return{factory:t,value:r,multi:s?[]:void 0}}function Lf(t,r){for(const s of t)Array.isArray(s)?Lf(s,r):s&&bt(s)?Lf(s.\u0275providers,r):r(s)}const qg=new Xt("AppId",{providedIn:"root",factory:()=>md}),md="ng",Vf=new Xt("Platform Initializer"),Kg=new Xt("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),yy=new Xt("AnimationModuleType"),Yg=new Xt("CSP nonce",{providedIn:"root",factory:()=>Ah().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});let Uf=(t,r,s)=>null;function fc(t,r,s=!1){return Uf(t,r,s)}class Ml{}class Xg{}class bv{resolveComponentFactory(r){throw function Tv(t){const r=Error(`No component factory found for ${Ve(t)}.`);return r.ngComponent=t,r}(r)}}let em=(()=>{class t{static#e=this.NULL=new bv}return t})();function $p(){return Nu($i(),Dt())}function Nu(t,r){return new pc(Ps(t,r))}let pc=(()=>{class t{constructor(s){this.nativeElement=s}static#e=this.__NG_ELEMENT_ID__=$p}return t})();function tm(t){return t instanceof pc?t.nativeElement:t}class $f{}let Ed=(()=>{class t{constructor(){this.destroyNode=null}static#e=this.__NG_ELEMENT_ID__=()=>function jh(){const t=Dt(),s=Zr($i().index,t);return(Fr(s)?s:t)[En]}()}return t})(),nm=(()=>{class t{static#e=this.\u0275prov=Yt({token:t,providedIn:"root",factory:()=>null})}return t})();class zf{constructor(r){this.full=r,this.major=r.split(".")[0],this.minor=r.split(".")[1],this.patch=r.split(".").slice(2).join(".")}}const zp=new zf("16.2.11"),au={};function Wp(t){if(!mn()&&!function Le(){return ue}())throw new _e(-203,!1)}function Yp(t,r=null,s=null,l){const f=d_(t,r,s,l);return f.resolveInjectorInitializers(),f}function d_(t,r=null,s=null,l,f=new Set){const _=[s||qt,kf(t)];return l=l||("object"==typeof t?void 0:Ve(t)),new Yd(_,r||Lh(),l||null,f)}let Ou=(()=>{class t{static#e=this.THROW_IF_NOT_FOUND=xi;static#t=this.NULL=new Fp;static create(s,l){if(Array.isArray(s))return Yp({name:""},l,s,"");{const f=s.name??"";return Yp({name:f},s.parent,s.providers,f)}}static#n=this.\u0275prov=Yt({token:t,providedIn:"any",factory:()=>$t(Hg)});static#r=this.__NG_ELEMENT_ID__=-1}return t})();function qf(t){return t.ngOriginalError}class gc{constructor(){this._console=console}handleError(r){const s=this._findOriginalError(r);this._console.error("ERROR",r),s&&this._console.error("ORIGINAL ERROR",s)}_findOriginalError(r){let s=r&&qf(r);for(;s&&qf(s);)s=qf(s);return s||null}}let bd=(()=>{class t{static#e=this.__NG_ELEMENT_ID__=Zp;static#t=this.__NG_ENV_ID__=s=>s}return t})();class Kf extends bd{constructor(r){super(),this._lView=r}onDestroy(r){return on(this._lView,r),()=>function vn(t,r){if(null===t[to])return;const s=t[to].indexOf(r);-1!==s&&t[to].splice(s,1)}(this._lView,r)}}function Zp(){return new Kf(Dt())}function Qp(t){return r=>{setTimeout(t,void 0,r)}}const lu=class om extends E.x{constructor(r=!1){super(),this.__isAsync=r}emit(r){super.next(r)}subscribe(r,s,l){let f=r,_=s||(()=>null),b=l;if(r&&"object"==typeof r){const F=r;f=F.next?.bind(F),_=F.error?.bind(F),b=F.complete?.bind(F)}this.__isAsync&&(_=Qp(_),f&&(f=Qp(f)),b&&(b=Qp(b)));const N=super.subscribe({next:f,error:_,complete:b});return r instanceof me.w0&&r.add(N),N}};function h_(...t){}class ho{constructor({enableLongStackTrace:r=!1,shouldCoalesceEventChangeDetection:s=!1,shouldCoalesceRunChangeDetection:l=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new lu(!1),this.onMicrotaskEmpty=new lu(!1),this.onStable=new lu(!1),this.onError=new lu(!1),typeof Zone>"u")throw new _e(908,!1);Zone.assertZonePatched();const f=this;f._nesting=0,f._outer=f._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(f._inner=f._inner.fork(new Zone.TaskTrackingZoneSpec)),r&&Zone.longStackTraceZoneSpec&&(f._inner=f._inner.fork(Zone.longStackTraceZoneSpec)),f.shouldCoalesceEventChangeDetection=!l&&s,f.shouldCoalesceRunChangeDetection=l,f.lastRequestAnimationFrameId=-1,f.nativeRequestAnimationFrame=function Yf(){const t="function"==typeof Hn.requestAnimationFrame;let r=Hn[t?"requestAnimationFrame":"setTimeout"],s=Hn[t?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&r&&s){const l=r[Zone.__symbol__("OriginalDelegate")];l&&(r=l);const f=s[Zone.__symbol__("OriginalDelegate")];f&&(s=f)}return{nativeRequestAnimationFrame:r,nativeCancelAnimationFrame:s}}().nativeRequestAnimationFrame,function th(t){const r=()=>{!function Zf(t){t.isCheckStableRunning||-1!==t.lastRequestAnimationFrameId||(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(Hn,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,nh(t),t.isCheckStableRunning=!0,Mu(t),t.isCheckStableRunning=!1},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),nh(t))}(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(s,l,f,_,b,N)=>{if(function lm(t){return!(!Array.isArray(t)||1!==t.length)&&!0===t[0].data?.__ignore_ng_zone__}(N))return s.invokeTask(f,_,b,N);try{return am(t),s.invokeTask(f,_,b,N)}finally{(t.shouldCoalesceEventChangeDetection&&"eventTask"===_.type||t.shouldCoalesceRunChangeDetection)&&r(),rh(t)}},onInvoke:(s,l,f,_,b,N,F)=>{try{return am(t),s.invoke(f,_,b,N,F)}finally{t.shouldCoalesceRunChangeDetection&&r(),rh(t)}},onHasTask:(s,l,f,_)=>{s.hasTask(f,_),l===f&&("microTask"==_.change?(t._hasPendingMicrotasks=_.microTask,nh(t),Mu(t)):"macroTask"==_.change&&(t.hasPendingMacrotasks=_.macroTask))},onHandleError:(s,l,f,_)=>(s.handleError(f,_),t.runOutsideAngular(()=>t.onError.emit(_)),!1)})}(f)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!ho.isInAngularZone())throw new _e(909,!1)}static assertNotInAngularZone(){if(ho.isInAngularZone())throw new _e(909,!1)}run(r,s,l){return this._inner.run(r,s,l)}runTask(r,s,l,f){const _=this._inner,b=_.scheduleEventTask("NgZoneEvent: "+f,r,Hh,h_,h_);try{return _.runTask(b,s,l)}finally{_.cancelTask(b)}}runGuarded(r,s,l){return this._inner.runGuarded(r,s,l)}runOutsideAngular(r){return this._outer.run(r)}}const Hh={};function Mu(t){if(0==t._nesting&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function nh(t){t.hasPendingMicrotasks=!!(t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&-1!==t.lastRequestAnimationFrameId)}function am(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function rh(t){t._nesting--,Mu(t)}class Dy{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new lu,this.onMicrotaskEmpty=new lu,this.onStable=new lu,this.onError=new lu}run(r,s,l){return r.apply(s,l)}runGuarded(r,s,l){return r.apply(s,l)}runOutsideAngular(r){return r()}runTask(r,s,l,f){return r.apply(s,l)}}const f_=new Xt("",{providedIn:"root",factory:Jp});function Jp(){const t=Jt(ho);let r=!0;const s=new le.y(f=>{r=t.isStable&&!t.hasPendingMacrotasks&&!t.hasPendingMicrotasks,t.runOutsideAngular(()=>{f.next(r),f.complete()})}),l=new le.y(f=>{let _;t.runOutsideAngular(()=>{_=t.onStable.subscribe(()=>{ho.assertNotInAngularZone(),queueMicrotask(()=>{!r&&!t.hasPendingMacrotasks&&!t.hasPendingMicrotasks&&(r=!0,f.next(!0))})})});const b=t.onUnstable.subscribe(()=>{ho.assertInAngularZone(),r&&(r=!1,t.runOutsideAngular(()=>{f.next(!1)}))});return()=>{_.unsubscribe(),b.unsubscribe()}});return(0,Oe.T)(s,l.pipe((0,ke.B)()))}function eg(t){return t.ownerDocument}function xu(t){return t instanceof Function?t():t}let Qf=(()=>{class t{constructor(){this.renderDepth=0,this.handler=null}begin(){this.handler?.validateBegin(),this.renderDepth++}end(){this.renderDepth--,0===this.renderDepth&&this.handler?.execute()}ngOnDestroy(){this.handler?.destroy(),this.handler=null}static#e=this.\u0275prov=Yt({token:t,providedIn:"root",factory:()=>new t})}return t})();function Gh(t){for(;t;){t[Cn]|=64;const r=cd(t);if(yl(t)&&!r)return t;t=r}return null}const $h=new Xt("",{providedIn:"root",factory:()=>!1});let Gc=null;function ig(t,r){return t[r]??ep()}function __(t,r){const s=ep();s.producerNode?.length&&(t[r]=Gc,s.lView=t,Gc=y_())}const sg={...ma,consumerIsAlwaysLive:!0,consumerMarkedDirty:t=>{Gh(t.lView)},lView:null};function y_(){return Object.create(sg)}function ep(){return Gc??=y_(),Gc}const cr={};function og(t){ag(br(),Dt(),kn()+t,!1)}function ag(t,r,s,l){if(!l)if(3==(3&r[Cn])){const _=t.preOrderCheckHooks;null!==_&&zl(r,_,s)}else{const _=t.preOrderHooks;null!==_&&Ia(r,_,0,s)}zi(s)}function _c(t,r=Mt.Default){const s=Dt();return null===s?$t(t,r):Bs($i(),s,mt(t),r)}function sh(){throw new Error("invalid")}function Wh(t,r,s,l,f,_,b,N,F,z,ne){const ge=r.blueprint.slice();return ge[xr]=f,ge[Cn]=140|l,(null!==z||t&&2048&t[Cn])&&(ge[Cn]|=2048),Tt(ge),ge[nr]=ge[Qi]=t,ge[rr]=s,ge[Cr]=b||t&&t[Cr],ge[En]=N||t&&t[En],ge[eo]=F||t&&t[eo]||null,ge[ei]=_,ge[Ji]=function Eh(){return Fi++}(),ge[ms]=ne,ge[gs]=z,ge[pi]=2==r.type?t[pi]:ge,ge}function qh(t,r,s,l,f){let _=t.data[r];if(null===_)_=tp(t,r,s,l,f),function hp(){return qn.lFrame.inI18n}()&&(_.flags|=32);else if(64&_.type){_.type=s,_.value=l,_.attrs=f;const b=jr();_.injectorIndex=null===b?-1:b.injectorIndex}return un(_,!0),_}function tp(t,r,s,l,f){const _=Qc(),b=wo(),F=t.data[r]=function dg(t,r,s,l,f,_){let b=r?r.injectorIndex:-1,N=0;return Hl()&&(N|=128),{type:s,index:l,insertBeforeIndex:null,injectorIndex:b,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:N,providerIndexes:0,value:f,attrs:_,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:r,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,b?_:_&&_.parent,s,r,l,f);return null===t.firstChild&&(t.firstChild=F),null!==_&&(b?null==_.child&&null!==F.parent&&(_.child=F):null===_.next&&(_.next=F,F.prev=_)),F}function xl(t,r,s,l){if(0===s)return-1;const f=r.length;for(let _=0;_<s;_++)r.push(l),t.blueprint.push(l),t.data.push(null);return f}function np(t,r,s,l,f){const _=ig(r,_s),b=kn(),N=2&l;try{zi(-1),N&&r.length>Vn&&ag(t,r,Vn,!1),ki(N?2:0,f);const z=N?_:null,ne=Bo(z);try{null!==z&&(z.dirty=!1),s(l,f)}finally{Vl(z,ne)}}finally{N&&null===r[_s]&&__(r,_s),zi(b),ki(N?3:1,f)}}function Kh(t,r,s){if(Ns(r)){const l=Is(null);try{const _=r.directiveEnd;for(let b=r.directiveStart;b<_;b++){const N=t.data[b];N.contentQueries&&N.contentQueries(1,s[b],b)}}finally{Is(l)}}}function Yh(t,r,s){ph()&&(function m(t,r,s,l){const f=s.directiveStart,_=s.directiveEnd;qs(s)&&function dt(t,r,s){const l=Ps(r,t),f=gm(s);let b=16;s.signals?b=4096:s.onPush&&(b=64);const N=Ir(t,Wh(t,f,null,b,l,r,null,t[Cr].rendererFactory.createRenderer(l,s),null,null,null));t[r.index]=N}(r,s,t.data[f+s.componentOffset]),t.firstCreatePass||al(s,r),zo(l,r);const b=s.initialInputs;for(let N=f;N<_;N++){const F=t.data[N],z=Sr(r,t,N,s);zo(z,r),null!==b&&en(0,N-f,z,F,0,b),Ls(F)&&(Zr(s.index,r)[rr]=Sr(r,t,N,s))}}(t,r,s,Ps(s,r)),64==(64&s.flags)&&S(t,r,s))}function pm(t,r,s=Ps){const l=r.localNames;if(null!==l){let f=r.index+1;for(let _=0;_<l.length;_+=2){const b=l[_+1],N=-1===b?s(r,t):t[b];t[f++]=N}}}function gm(t){const r=t.tView;return null===r||r.incompleteFirstPass?t.tView=rp(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts,t.id):r}function rp(t,r,s,l,f,_,b,N,F,z,ne){const ge=Vn+l,Be=ge+f,Ye=function Sy(t,r){const s=[];for(let l=0;l<r;l++)s.push(l<t?null:cr);return s}(ge,Be),yt="function"==typeof z?z():z;return Ye[xt]={type:t,blueprint:Ye,template:s,queries:null,viewQuery:N,declTNode:r,data:Ye.slice().fill(null,ge),bindingStartIndex:ge,expandoStartIndex:Be,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof _?_():_,pipeRegistry:"function"==typeof b?b():b,firstChild:null,schemas:F,consts:yt,incompleteFirstPass:!1,ssrId:ne}}let lg=t=>null;function _m(t,r,s,l){for(let f in t)if(t.hasOwnProperty(f)){s=null===s?{}:s;const _=t[f];null===l?Py(s,r,f,_):l.hasOwnProperty(f)&&Py(s,r,l[f],_)}return s}function Py(t,r,s,l){t.hasOwnProperty(s)?t[s].push(r,l):t[s]=[r,l]}function kl(t,r,s,l,f,_,b,N){const F=Ps(r,s);let ne,z=r.inputs;!N&&null!=z&&(ne=z[l])?(Ro(t,s,ne,l,f),qs(r)&&function ym(t,r){const s=Zr(r,t);16&s[Cn]||(s[Cn]|=64)}(s,r.index)):3&r.type&&(l=function v_(t){return"class"===t?"className":"for"===t?"htmlFor":"formaction"===t?"formAction":"innerHtml"===t?"innerHTML":"readonly"===t?"readOnly":"tabindex"===t?"tabIndex":t}(l),f=null!=b?b(f,r.value||"",l):f,_.setProperty(F,l,f))}function c(t,r,s,l){if(ph()){const f=null===l?null:{"":-1},_=function Z(t,r){const s=t.directiveRegistry;let l=null,f=null;if(s)for(let _=0;_<s.length;_++){const b=s[_];if(ci(r,b.selectors,!1))if(l||(l=[]),Ls(b))if(null!==b.findHostDirectiveDefs){const N=[];f=f||new Map,b.findHostDirectiveDefs(b,N,f),l.unshift(...N,b),ae(t,r,N.length)}else l.unshift(b),ae(t,r,0);else f=f||new Map,b.findHostDirectiveDefs?.(b,l,f),l.push(b)}return null===l?null:[l,f]}(t,s);let b,N;null===_?b=N=null:[b,N]=_,null!==b&&h(t,r,s,b,f,N),f&&function pe(t,r,s){if(r){const l=t.localNames=[];for(let f=0;f<r.length;f+=2){const _=s[r[f+1]];if(null==_)throw new _e(-301,!1);l.push(r[f],_)}}}(s,l,f)}s.mergedAttrs=ro(s.mergedAttrs,s.attrs)}function h(t,r,s,l,f,_){for(let z=0;z<l.length;z++)Ku(al(s,r),t,l[z].type);!function rt(t,r,s){t.flags|=1,t.directiveStart=r,t.directiveEnd=r+s,t.providerIndexes=r}(s,t.data.length,l.length);for(let z=0;z<l.length;z++){const ne=l[z];ne.providersResolver&&ne.providersResolver(ne)}let b=!1,N=!1,F=xl(t,r,l.length,null);for(let z=0;z<l.length;z++){const ne=l[z];s.mergedAttrs=ro(s.mergedAttrs,ne.hostAttrs),ut(t,s,r,F,ne),Ce(F,ne,f),null!==ne.contentQueries&&(s.flags|=4),(null!==ne.hostBindings||null!==ne.hostAttrs||0!==ne.hostVars)&&(s.flags|=64);const ge=ne.type.prototype;!b&&(ge.ngOnChanges||ge.ngOnInit||ge.ngDoCheck)&&((t.preOrderHooks??=[]).push(s.index),b=!0),!N&&(ge.ngOnChanges||ge.ngDoCheck)&&((t.preOrderCheckHooks??=[]).push(s.index),N=!0),F++}!function Cv(t,r,s){const f=r.directiveEnd,_=t.data,b=r.attrs,N=[];let F=null,z=null;for(let ne=r.directiveStart;ne<f;ne++){const ge=_[ne],Be=s?s.get(ge):null,yt=Be?Be.outputs:null;F=_m(ge.inputs,ne,F,Be?Be.inputs:null),z=_m(ge.outputs,ne,z,yt);const kt=null===F||null===b||Xs(r)?null:xn(F,ne,b);N.push(kt)}null!==F&&(F.hasOwnProperty("class")&&(r.flags|=8),F.hasOwnProperty("style")&&(r.flags|=16)),r.initialInputs=N,r.inputs=F,r.outputs=z}(t,s,_)}function S(t,r,s){const l=s.directiveStart,f=s.directiveEnd,_=s.index,b=function gh(){return qn.lFrame.currentDirectiveIndex}();try{zi(_);for(let N=l;N<f;N++){const F=t.data[N],z=r[N];Do(N),(null!==F.hostBindings||0!==F.hostVars||null!==F.hostAttrs)&&B(F,z)}}finally{zi(-1),Do(b)}}function B(t,r){null!==t.hostBindings&&t.hostBindings(1,r)}function ae(t,r,s){r.componentOffset=s,(t.components??=[]).push(r.index)}function Ce(t,r,s){if(s){if(r.exportAs)for(let l=0;l<r.exportAs.length;l++)s[r.exportAs[l]]=t;Ls(r)&&(s[""]=t)}}function ut(t,r,s,l,f){t.data[l]=f;const _=f.factory||(f.factory=es(f.type)),b=new yu(_,Ls(f),_c);t.blueprint[l]=b,s[l]=b,function a(t,r,s,l,f){const _=f.hostBindings;if(_){let b=t.hostBindingOpCodes;null===b&&(b=t.hostBindingOpCodes=[]);const N=~r.index;(function d(t){let r=t.length;for(;r>0;){const s=t[--r];if("number"==typeof s&&s<0)return s}return 0})(b)!=N&&b.push(N),b.push(s,l,_)}}(t,r,l,xl(t,s,f.hostVars,cr),f)}function At(t,r,s,l,f,_){const b=Ps(t,r);!function Gt(t,r,s,l,f,_,b){if(null==_)t.removeAttribute(r,f,s);else{const N=null==b?Pe(_):b(_,l||"",f);t.setAttribute(r,f,N,s)}}(r[En],b,_,t.value,s,l,f)}function en(t,r,s,l,f,_){const b=_[r];if(null!==b)for(let N=0;N<b.length;)Pn(l,s,b[N++],b[N++],b[N++])}function Pn(t,r,s,l,f){const _=Is(null);try{const b=t.inputTransforms;null!==b&&b.hasOwnProperty(l)&&(f=b[l].call(r,f)),null!==t.setInput?t.setInput(r,f,s,l):r[l]=f}finally{Is(_)}}function xn(t,r,s){let l=null,f=0;for(;f<s.length;){const _=s[f];if(0!==_)if(5!==_){if("number"==typeof _)break;if(t.hasOwnProperty(_)){null===l&&(l=[]);const b=t[_];for(let N=0;N<b.length;N+=2)if(b[N]===r){l.push(_,b[N+1],s[f+1]);break}}f+=2}else f+=2;else f+=4}return l}function mr(t,r,s,l){return[t,!0,!1,r,null,0,l,s,null,null,null]}function Nn(t,r){const s=t.contentQueries;if(null!==s)for(let l=0;l<s.length;l+=2){const _=s[l+1];if(-1!==_){const b=t.data[_];k(s[l]),b.contentQueries(2,r[_],_)}}}function Ir(t,r){return t[yi]?t[so][ii]=r:t[yi]=r,t[so]=r,r}function er(t,r,s){k(0);const l=Is(null);try{r(t,s)}finally{Is(l)}}function Vr(t){return t[si]||(t[si]=[])}function Oi(t){return t.cleanup||(t.cleanup=[])}function Ys(t,r){const s=t[eo],l=s?s.get(gc,null):null;l&&l.handleError(r)}function Ro(t,r,s,l,f){for(let _=0;_<s.length;){const b=s[_++],N=s[_++];Pn(t.data[b],r[b],l,N,f)}}function Ii(t,r,s){const l=pu(r,t);!function X(t,r,s){t.setValue(r,s)}(t[En],l,s)}function yc(t,r){const s=Zr(r,t),l=s[xt];!function ku(t,r){for(let s=r.length;s<t.blueprint.length;s++)r.push(t.blueprint[s])}(l,s);const f=s[xr];null!==f&&null===s[ms]&&(s[ms]=fc(f,s[eo])),an(l,s,s[rr])}function an(t,r,s){V(r);try{const l=t.viewQuery;null!==l&&er(1,l,s);const f=t.template;null!==f&&np(t,r,f,1,s),t.firstCreatePass&&(t.firstCreatePass=!1),t.staticContentQueries&&Nn(t,r),t.staticViewQueries&&er(2,t.viewQuery,s);const _=t.components;null!==_&&function Tn(t,r){for(let s=0;s<r.length;s++)yc(t,r[s])}(r,_)}catch(l){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),l}finally{r[Cn]&=-5,Ht()}}let Bn=(()=>{class t{constructor(){this.all=new Set,this.queue=new Map}create(s,l,f){const _=typeof Zone>"u"?null:Zone.current,b=function ct(t,r,s){const l=Object.create(ir);s&&(l.consumerAllowSignalWrites=!0),l.fn=t,l.schedule=r;const f=b=>{l.cleanupFn=b};return l.ref={notify:()=>Uu(l),run:()=>{if(l.dirty=!1,l.hasRun&&!tl(l))return;l.hasRun=!0;const b=Bo(l);try{l.cleanupFn(),l.cleanupFn=dn,l.fn(f)}finally{Vl(l,b)}},cleanup:()=>l.cleanupFn()},l.ref}(s,z=>{this.all.has(z)&&this.queue.set(z,_)},f);let N;this.all.add(b),b.notify();const F=()=>{b.cleanup(),N?.(),this.all.delete(b),this.queue.delete(b)};return N=l?.onDestroy(F),{destroy:F}}flush(){if(0!==this.queue.size)for(const[s,l]of this.queue)this.queue.delete(s),l?l.run(()=>s.run()):s.run()}get isQueueEmpty(){return 0===this.queue.size}static#e=this.\u0275prov=Yt({token:t,providedIn:"root",factory:()=>new t})}return t})();function hs(t,r,s){let l=s?t.styles:null,f=s?t.classes:null,_=0;if(null!==r)for(let b=0;b<r.length;b++){const N=r[b];"number"==typeof N?_=N:1==_?f=ht(f,N):2==_&&(l=ht(l,N+": "+r[++b]+";"))}s?t.styles=l:t.stylesWithoutHost=l,s?t.classes=f:t.classesWithoutHost=f}function qo(t,r,s,l,f=!1){for(;null!==s;){const _=r[s.index];null!==_&&l.push(ni(_)),Xi(_)&&fo(_,l);const b=s.type;if(8&b)qo(t,r,s.child,l);else if(32&b){const N=fl(s,r);let F;for(;F=N();)l.push(F)}else if(16&b){const N=Pg(r,s);if(Array.isArray(N))l.push(...N);else{const F=cd(r[pi]);qo(F[xt],F,N,l,!0)}}s=f?s.projectionNext:s.next}return l}function fo(t,r){for(let s=ti;s<t.length;s++){const l=t[s],f=l[xt].firstChild;null!==f&&qo(l[xt],l,f,r)}t[Fs]!==t[xr]&&r.push(t[Fs])}function Ra(t,r,s,l=!0){const f=r[Cr],_=f.rendererFactory,b=f.afterRenderEventManager;_.begin?.(),b?.begin();try{vc(t,r,t.template,s)}catch(F){throw l&&Ys(r,F),F}finally{_.end?.(),f.effectManager?.flush(),b?.end()}}function vc(t,r,s,l){const f=r[Cn];if(256!=(256&f)){r[Cr].effectManager?.flush(),V(r);try{Tt(r),function aa(t){return qn.lFrame.bindingIndex=t}(t.bindingStartIndex),null!==s&&np(t,r,s,2,l);const b=3==(3&f);if(b){const z=t.preOrderCheckHooks;null!==z&&zl(r,z,null)}else{const z=t.preOrderHooks;null!==z&&Ia(r,z,0,null),mu(r,0)}if(function Na(t){for(let r=D(t);null!==r;r=g(r)){if(!r[Rs])continue;const s=r[Ws];for(let l=0;l<s.length;l++){Si(s[l])}}}(r),Hs(r,2),null!==t.contentQueries&&Nn(t,r),b){const z=t.contentCheckHooks;null!==z&&zl(r,z)}else{const z=t.contentHooks;null!==z&&Ia(r,z,1),mu(r,1)}!function fm(t,r){const s=t.hostBindingOpCodes;if(null===s)return;const l=ig(r,Xa);try{for(let f=0;f<s.length;f++){const _=s[f];if(_<0)zi(~_);else{const b=_,N=s[++f],F=s[++f];$l(N,b),l.dirty=!1;const z=Bo(l);try{F(2,r[b])}finally{Vl(l,z)}}}}finally{null===r[Xa]&&__(r,Xa),zi(-1)}}(t,r);const N=t.components;null!==N&&Er(r,N,0);const F=t.viewQuery;if(null!==F&&er(2,F,l),b){const z=t.viewCheckHooks;null!==z&&zl(r,z)}else{const z=t.viewHooks;null!==z&&Ia(r,z,2),mu(r,2)}!0===t.firstUpdatePass&&(t.firstUpdatePass=!1),r[Cn]&=-73,bo(r)}finally{Ht()}}}function Hs(t,r){for(let s=D(t);null!==s;s=g(s))for(let l=ti;l<s.length;l++)Ic(s[l],r)}function ha(t,r,s){Ic(Zr(r,t),s)}function Ic(t,r){if(!function La(t){return 128==(128&t[Cn])}(t))return;const s=t[xt],l=t[Cn];if(80&l&&0===r||1024&l||2===r)vc(s,t,s.template,t[rr]);else if(t[Zi]>0){Hs(t,1);const f=s.components;null!==f&&Er(t,f,1)}}function Er(t,r,s){for(let l=0;l<r.length;l++)ha(t,r[l],s)}class Zh{get rootNodes(){const r=this._lView,s=r[xt];return qo(s,r,s.firstChild,[])}constructor(r,s){this._lView=r,this._cdRefInjectingView=s,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[rr]}set context(r){this._lView[rr]=r}get destroyed(){return 256==(256&this._lView[Cn])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const r=this._lView[nr];if(Xi(r)){const s=r[8],l=s?s.indexOf(this):-1;l>-1&&(ru(r,l),vr(s,l))}this._attachedToViewContainer=!1}iu(this._lView[xt],this._lView)}onDestroy(r){on(this._lView,r)}markForCheck(){Gh(this._cdRefInjectingView||this._lView)}detach(){this._lView[Cn]&=-129}reattach(){this._lView[Cn]|=128}detectChanges(){Ra(this._lView[xt],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new _e(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function _n(t,r){Np(t,r,r[En],2,null,null)}(this._lView[xt],this._lView)}attachToAppRef(r){if(this._attachedToViewContainer)throw new _e(902,!1);this._appRef=r}}class Im extends Zh{constructor(r){super(r),this._view=r}detectChanges(){const r=this._view;Ra(r[xt],r,r[rr],!1)}checkNoChanges(){}get context(){return null}}class Qh extends em{constructor(r){super(),this.ngModule=r}resolveComponentFactory(r){const s=Yn(r);return new gl(s,this.ngModule)}}function Em(t){const r=[];for(let s in t)t.hasOwnProperty(s)&&r.push({propName:t[s],templateName:s});return r}class fs{constructor(r,s){this.injector=r,this.parentInjector=s}get(r,s,l){l=hn(l);const f=this.injector.get(r,au,l);return f!==au||s===au?f:this.parentInjector.get(r,s,l)}}class gl extends Xg{get inputs(){const r=this.componentDef,s=r.inputTransforms,l=Em(r.inputs);if(null!==s)for(const f of l)s.hasOwnProperty(f.propName)&&(f.transform=s[f.propName]);return l}get outputs(){return Em(this.componentDef.outputs)}constructor(r,s){super(),this.componentDef=r,this.ngModule=s,this.componentType=r.type,this.selector=function Ki(t){return t.map(du).join(",")}(r.selectors),this.ngContentSelectors=r.ngContentSelectors?r.ngContentSelectors:[],this.isBoundToModule=!!s}create(r,s,l,f){let _=(f=f||this.ngModule)instanceof lc?f:f?.injector;_&&null!==this.componentDef.getStandaloneInjector&&(_=this.componentDef.getStandaloneInjector(_)||_);const b=_?new fs(r,_):r,N=b.get($f,null);if(null===N)throw new _e(407,!1);const ge={rendererFactory:N,sanitizer:b.get(nm,null),effectManager:b.get(Bn,null),afterRenderEventManager:b.get(Qf,null)},Be=N.createRenderer(null,this.componentDef),Ye=this.componentDef.selectors[0][0]||"div",yt=l?function mm(t,r,s,l){const _=l.get($h,!1)||s===sn.ShadowDom,b=t.selectRootElement(r,_);return function Ry(t){lg(t)}(b),b}(Be,l,this.componentDef.encapsulation,b):We(Be,Ye,function Ko(t){const r=t.toLowerCase();return"svg"===r?"svg":"math"===r?"math":null}(Ye)),Un=this.componentDef.signals?4608:this.componentDef.onPush?576:528;let Nt=null;null!==yt&&(Nt=fc(yt,b,!0));const wr=rp(0,null,null,1,0,null,null,null,null,null,null),Xr=Wh(null,wr,null,Un,null,null,ge,Be,b,null,Nt);let ws,wc;V(Xr);try{const dp=this.componentDef;let ey,qI=null;dp.findHostDirectiveDefs?(ey=[],qI=new Map,dp.findHostDirectiveDefs(dp,ey,qI),ey.push(dp)):ey=[dp];const KC=function oh(t,r){const s=t[xt],l=Vn;return t[l]=r,qh(s,l,2,"#host",null)}(Xr,yt),YC=function ah(t,r,s,l,f,_,b){const N=f[xt];!function Tm(t,r,s,l){for(const f of t)r.mergedAttrs=ro(r.mergedAttrs,f.hostAttrs);null!==r.mergedAttrs&&(hs(r,r.mergedAttrs,!0),null!==s&&$m(l,s,r))}(l,t,r,b);let F=null;null!==r&&(F=fc(r,f[eo]));const z=_.rendererFactory.createRenderer(r,s);let ne=16;s.signals?ne=4096:s.onPush&&(ne=64);const ge=Wh(f,gm(s),null,ne,f[t.index],t,_,z,null,null,F);return N.firstCreatePass&&ae(N,t,l.length-1),Ir(f,ge),f[t.index]=ge}(KC,yt,dp,ey,Xr,ge,Be);wc=oa(wr,Vn),yt&&function bm(t,r,s,l){if(l)Ka(t,s,["ng-version",zp.full]);else{const{attrs:f,classes:_}=function Xo(t){const r=[],s=[];let l=1,f=2;for(;l<t.length;){let _=t[l];if("string"==typeof _)2===f?""!==_&&r.push(_,t[++l]):8===f&&s.push(_);else{if(!fr(f))break;f=_}l++}return{attrs:r,classes:s}}(r.selectors[0]);f&&Ka(t,s,f),_&&_.length>0&&ny(t,s,_.join(" "))}}(Be,dp,yt,l),void 0!==s&&function fg(t,r,s){const l=t.projection=[];for(let f=0;f<r.length;f++){const _=s[f];l.push(null!=_?Array.from(_):null)}}(wc,this.ngContentSelectors,s),ws=function hg(t,r,s,l,f,_){const b=$i(),N=f[xt],F=Ps(b,f);h(N,f,b,s,null,l);for(let ne=0;ne<s.length;ne++)zo(Sr(f,N,b.directiveStart+ne,b),f);S(N,f,b),F&&zo(F,f);const z=Sr(f,N,b.directiveStart+b.componentOffset,b);if(t[rr]=f[rr]=z,null!==_)for(const ne of _)ne(z,r);return Kh(N,b,t),z}(YC,dp,ey,qI,Xr,[T_]),an(wr,Xr,null)}finally{Ht()}return new E_(this.componentType,ws,Nu(wc,Xr),Xr,wc)}}class E_ extends Ml{constructor(r,s,l,f,_){super(),this.location=l,this._rootLView=f,this._tNode=_,this.previousInputValues=null,this.instance=s,this.hostView=this.changeDetectorRef=new Im(f),this.componentType=r}setInput(r,s){const l=this._tNode.inputs;let f;if(null!==l&&(f=l[r])){if(this.previousInputValues??=new Map,this.previousInputValues.has(r)&&Object.is(this.previousInputValues.get(r),s))return;const _=this._rootLView;Ro(_[xt],_,f,r,s),this.previousInputValues.set(r,s),Gh(Zr(this._tNode.index,_))}}get injector(){return new Pi(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(r){this.hostView.onDestroy(r)}}function T_(){const t=$i();bl(Dt()[xt],t)}function Li(t){let r=function wm(t){return Object.getPrototypeOf(t.prototype).constructor}(t.type),s=!0;const l=[t];for(;r;){let f;if(Ls(t))f=r.\u0275cmp||r.\u0275dir;else{if(r.\u0275cmp)throw new _e(903,!1);f=r.\u0275dir}if(f){if(s){l.push(f);const b=t;b.inputs=Oy(t.inputs),b.inputTransforms=Oy(t.inputTransforms),b.declaredInputs=Oy(t.declaredInputs),b.outputs=Oy(t.outputs);const N=f.hostBindings;N&&O0(t,N);const F=f.viewQuery,z=f.contentQueries;if(F&&po(t,F),z&&Av(t,z),Ie(t.inputs,f.inputs),Ie(t.declaredInputs,f.declaredInputs),Ie(t.outputs,f.outputs),null!==f.inputTransforms&&(null===b.inputTransforms&&(b.inputTransforms={}),Ie(b.inputTransforms,f.inputTransforms)),Ls(f)&&f.data.animation){const ne=t.data;ne.animation=(ne.animation||[]).concat(f.data.animation)}}const _=f.features;if(_)for(let b=0;b<_.length;b++){const N=_[b];N&&N.ngInherit&&N(t),N===Li&&(s=!1)}}r=Object.getPrototypeOf(r)}!function KI(t){let r=0,s=null;for(let l=t.length-1;l>=0;l--){const f=t[l];f.hostVars=r+=f.hostVars,f.hostAttrs=ro(f.hostAttrs,s=ro(s,f.hostAttrs))}}(l)}function Oy(t){return t===In?{}:t===qt?[]:t}function po(t,r){const s=t.viewQuery;t.viewQuery=s?(l,f)=>{r(l,f),s(l,f)}:r}function Av(t,r){const s=t.contentQueries;t.contentQueries=s?(l,f,_)=>{r(l,f,_),s(l,f,_)}:r}function O0(t,r){const s=t.hostBindings;t.hostBindings=s?(l,f)=>{r(l,f),s(l,f)}:r}function Rv(t){return r=>{r.findHostDirectiveDefs=Nv,r.hostDirectives=(Array.isArray(t)?t:t()).map(s=>"function"==typeof s?{directive:mt(s),inputs:In,outputs:In}:{directive:mt(s.directive),inputs:Pv(s.inputs),outputs:Pv(s.outputs)})}}function Nv(t,r,s){if(null!==t.hostDirectives)for(const l of t.hostDirectives){const f=bi(l.directive);YI(f.declaredInputs,l.inputs),Nv(f,r,s),s.set(f,l),r.push(f)}}function Pv(t){if(void 0===t||0===t.length)return In;const r={};for(let s=0;s<t.length;s+=2)r[t[s]]=t[s+1];return r}function YI(t,r){for(const s in r)r.hasOwnProperty(s)&&(t[r[s]]=t[s])}function My(t){const r=t.inputConfig,s={};for(const l in r)if(r.hasOwnProperty(l)){const f=r[l];Array.isArray(f)&&f[2]&&(s[l]=f[2])}t.inputTransforms=s}function w_(t){return!!Mv(t)&&(Array.isArray(t)||!(t instanceof Map)&&Symbol.iterator in t)}function Mv(t){return null!==t&&("function"==typeof t||"object"==typeof t)}function Fu(t,r,s){return t[r]=s}function ml(t,r,s){return!Object.is(t[r],s)&&(t[r]=s,!0)}function Jh(t,r,s,l){const f=ml(t,r,s);return ml(t,r+1,l)||f}function Cm(t,r,s,l,f){const _=Jh(t,r,s,l);return ml(t,r+2,f)||_}function xy(t,r,s,l){const f=Dt();return ml(f,Gl(),r)&&(br(),At(gi(),f,t,r,s,l)),xy}function uh(t,r,s,l){return ml(t,Gl(),s)?r+Pe(s)+l:cr}function Xh(t,r,s,l,f,_,b,N,F,z){const ge=function Fl(t,r,s,l,f,_){const b=Jh(t,r,s,l);return Jh(t,r+2,f,_)||b}(t,ya(),s,f,b,F);return uo(4),ge?r+Pe(s)+l+Pe(f)+_+Pe(b)+N+Pe(F)+z:cr}function G0(t,r,s,l,f,_,b,N){const F=Dt(),z=br(),ne=t+Vn,ge=z.firstCreatePass?function H0(t,r,s,l,f,_,b,N,F){const z=r.consts,ne=qh(r,t,4,b||null,rl(z,N));c(r,s,ne,rl(z,F)),bl(r,ne);const ge=ne.tView=rp(2,ne,l,f,_,r.directiveRegistry,r.pipeRegistry,null,r.schemas,z,null);return null!==r.queries&&(r.queries.template(r,ne),ge.queries=r.queries.embeddedTView(ne)),ne}(ne,z,F,r,s,l,f,_,b):z.data[ne];un(ge,!1);const Be=$0(z,F,ge,t);gu()&&wf(z,F,Be,ge),zo(Be,F),Ir(F,F[ne]=mr(Be,F,Be,ge)),Ur(ge)&&Yh(z,F,ge),null!=b&&pm(F,ge,N)}let $0=function nf(t,r,s,l){return Ni(!0),r[En].createComment("")};function jv(t){return Os(function Sd(){return qn.lFrame.contextLView}(),Vn+t)}function x_(t,r,s){const l=Dt();return ml(l,Gl(),r)&&kl(br(),gi(),l,t,r,l[En],s,!1),x_}function By(t,r,s,l,f){const b=f?"class":"style";Ro(t,s,r.inputs[b],b,l)}function k_(t,r,s,l){const f=Dt(),_=br(),b=Vn+t,N=f[En],F=_.firstCreatePass?function sf(t,r,s,l,f,_){const b=r.consts,F=qh(r,t,2,l,rl(b,f));return c(r,s,F,rl(b,_)),null!==F.attrs&&hs(F,F.attrs,!1),null!==F.mergedAttrs&&hs(F,F.mergedAttrs,!0),null!==r.queries&&r.queries.elementStart(r,F),F}(b,_,f,r,s,l):_.data[b],z=Hv(_,f,F,N,r,t);f[b]=z;const ne=Ur(F);return un(F,!0),$m(N,z,F),32!=(32&F.flags)&&gu()&&wf(_,f,z,F),0===function It(){return qn.lFrame.elementDepthCount}()&&zo(z,f),function Ks(){qn.lFrame.elementDepthCount++}(),ne&&(Yh(_,f,F),Kh(_,F,f)),null!==l&&pm(f,F),k_}function F_(){let t=$i();wo()?lr():(t=t.parent,un(t,!1));const r=t;(function sl(t){return qn.skipHydrationRootTNode===t})(r)&&function Zc(){qn.skipHydrationRootTNode=null}(),function Va(){qn.lFrame.elementDepthCount--}();const s=br();return s.firstCreatePass&&(bl(s,t),Ns(t)&&s.queries.elementEnd(t)),null!=r.classesWithoutHost&&function $u(t){return 0!=(8&t.flags)}(r)&&By(s,r,Dt(),r.classesWithoutHost,!0),null!=r.stylesWithoutHost&&function fp(t){return 0!=(16&t.flags)}(r)&&By(s,r,Dt(),r.stylesWithoutHost,!1),F_}function Uy(t,r,s,l){return k_(t,r,s,l),F_(),Uy}let Hv=(t,r,s,l,f,_)=>(Ni(!0),We(l,f,function mh(){return qn.lFrame.currentNamespace}()));function L_(t,r,s){const l=Dt(),f=br(),_=t+Vn,b=f.firstCreatePass?function $v(t,r,s,l,f){const _=r.consts,b=rl(_,l),N=qh(r,t,8,"ng-container",b);return null!==b&&hs(N,b,!0),c(r,s,N,rl(_,f)),null!==r.queries&&r.queries.elementStart(r,N),N}(_,f,l,r,s):f.data[_];un(b,!0);const N=zv(f,l,b,t);return l[_]=N,gu()&&wf(f,l,N,b),zo(N,l),Ur(b)&&(Yh(f,l,b),Kh(f,b,l)),null!=s&&pm(l,b),L_}function V_(){let t=$i();const r=br();return wo()?lr():(t=t.parent,un(t,!1)),r.firstCreatePass&&(bl(r,t),Ns(t)&&r.queries.elementEnd(t)),V_}let zv=(t,r,s,l)=>(Ni(!0),De(r[En],""));function W0(){return Dt()}function Gy(t){return!!t&&"function"==typeof t.then}function Wv(t){return!!t&&"function"==typeof t.subscribe}function $y(t,r,s,l){const f=Dt(),_=br(),b=$i();return function K0(t,r,s,l,f,_,b){const N=Ur(l),z=t.firstCreatePass&&Oi(t),ne=r[rr],ge=Vr(r);let Be=!0;if(3&l.type||b){const kt=Ps(l,r),fn=b?b(kt):kt,Un=ge.length,Nt=b?Xr=>b(ni(Xr[l.index])):l.index;let wr=null;if(!b&&N&&(wr=function q0(t,r,s,l){const f=t.cleanup;if(null!=f)for(let _=0;_<f.length-1;_+=2){const b=f[_];if(b===s&&f[_+1]===l){const N=r[si],F=f[_+2];return N.length>F?N[F]:null}"string"==typeof b&&(_+=2)}return null}(t,r,f,l.index)),null!==wr)(wr.__ngLastListenerFn__||wr).__ngNextListenerFn__=_,wr.__ngLastListenerFn__=_,Be=!1;else{_=Z0(l,r,ne,_,!1);const Xr=s.listen(fn,f,_);ge.push(_,Xr),z&&z.push(f,Nt,Un,Un+1)}}else _=Z0(l,r,ne,_,!1);const Ye=l.outputs;let yt;if(Be&&null!==Ye&&(yt=Ye[f])){const kt=yt.length;if(kt)for(let fn=0;fn<kt;fn+=2){const ws=r[yt[fn]][yt[fn+1]].subscribe(_),wc=ge.length;ge.push(_,ws),z&&z.push(f,l.index,wc,-(wc+1))}}}(_,f,f[En],b,t,r,l),$y}function Y0(t,r,s,l){try{return ki(6,r,s),!1!==s(l)}catch(f){return Ys(t,f),!1}finally{ki(7,r,s)}}function Z0(t,r,s,l,f){return function _(b){if(b===Function)return l;Gh(t.componentOffset>-1?Zr(t.index,r):r);let F=Y0(r,s,l,b),z=_.__ngNextListenerFn__;for(;z;)F=Y0(r,s,z,b)&&F,z=z.__ngNextListenerFn__;return f&&!1===F&&b.preventDefault(),F}}function Q0(t=1){return function Qn(t){return(qn.lFrame.contextLView=function Wr(t,r){for(;t>0;)r=r[Qi],t--;return r}(t,qn.lFrame.contextLView))[rr]}(t)}function J0(t,r){let s=null;const l=function zr(t){const r=t.attrs;if(null!=r){const s=r.indexOf(5);if(!(1&s))return r[s+1]}return null}(t);for(let f=0;f<r.length;f++){const _=r[f];if("*"!==_){if(null===l?ci(t,_,!0):io(l,_))return f}else s=f}return s}function Kv(t){const r=Dt()[pi][ei];if(!r.projection){const l=r.projection=Kr(t?t.length:1,null),f=l.slice();let _=r.child;for(;null!==_;){const b=t?J0(_,t):0;null!==b&&(f[b]?f[b].projectionNext=_:l[b]=_,f[b]=_),_=_.next}}}function Yv(t,r=0,s){const l=Dt(),f=br(),_=qh(f,Vn+t,16,null,s||null);null===_.projection&&(_.projection=r),lr(),(!l[ms]||Hl())&&32!=(32&_.flags)&&function mv(t,r,s){Mg(r[En],0,r,s,ds(t,s,r),Cp(s.parent||r[ei],s,r))}(f,l,_)}function Zv(t,r,s){return B_(t,"",r,"",s),Zv}function B_(t,r,s,l,f){const _=Dt(),b=uh(_,r,s,l);return b!==cr&&kl(br(),gi(),_,t,b,_[En],f,!1),B_}function U_(t,r){return t<<17|r<<2}function ap(t){return t>>17&32767}function Wy(t){return 2|t}function Tg(t){return(131068&t)>>2}function s0(t,r){return-131069&t|r<<2}function o0(t){return 1|t}function Lm(t,r,s,l,f){const _=t[s+1],b=null===r;let N=l?ap(_):Tg(_),F=!1;for(;0!==N&&(!1===F||b);){const ne=t[N+1];tI(t[N],r)&&(F=!0,t[N+1]=l?o0(ne):Wy(ne)),N=l?ap(ne):Tg(ne)}F&&(t[s+1]=l?Wy(_):o0(_))}function tI(t,r){return null===t||null==r||(Array.isArray(t)?t[1]:t)===r||!(!Array.isArray(t)||"string"!=typeof r)&&tu(t,r)>=0}const fa={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function j_(t){return t.substring(fa.key,fa.keyEnd)}function bg(t,r){const s=fa.textEnd;return s===r?-1:(r=fa.keyEnd=function H_(t,r,s){for(;r<s&&t.charCodeAt(r)>32;)r++;return r}(t,fa.key=r,s),lp(t,r,s))}function lp(t,r,s){for(;r<s&&t.charCodeAt(r)<=32;)r++;return r}function Wa(t,r,s){return Wc(t,r,s,!1),Wa}function G_(t,r){return Wc(t,r,null,!0),G_}function wg(t){!function Lu(t,r,s,l){const f=br(),_=uo(2);f.firstUpdatePass&&lf(f,null,_,l);const b=Dt();if(s!==cr&&ml(b,_,s)){const N=f.data[kn()];if(z_(N,l)&&!up(f,_)){let F=l?N.classesWithoutHost:N.stylesWithoutHost;null!==F&&(s=ht(F,s||"")),By(f,N,b,s,l)}else!function Xy(t,r,s,l,f,_,b,N){f===cr&&(f=qt);let F=0,z=0,ne=0<f.length?f[0]:null,ge=0<_.length?_[0]:null;for(;null!==ne||null!==ge;){const Be=F<f.length?f[F+1]:void 0,Ye=z<_.length?_[z+1]:void 0;let kt,yt=null;ne===ge?(F+=2,z+=2,Be!==Ye&&(yt=ge,kt=Ye)):null===ge||null!==ne&&ne<ge?(F+=2,yt=ne):(z+=2,yt=ge,kt=Ye),null!==yt&&ev(t,r,s,l,yt,kt,b,N),ne=F<f.length?f[F]:null,ge=z<_.length?_[z]:null}}(f,N,b,b[En],b[_+1],b[_+1]=function sI(t,r,s){if(null==s||""===s)return qt;const l=[],f=fd(s);if(Array.isArray(f))for(let _=0;_<f.length;_++)t(l,f[_],!0);else if("object"==typeof f)for(const _ in f)f.hasOwnProperty(_)&&t(l,_,f[_]);else"string"==typeof f&&r(l,f);return l}(t,r,s),l,_)}}(oI,Zs,t,!0)}function Zs(t,r){for(let s=function l0(t){return function c0(t){fa.key=0,fa.keyEnd=0,fa.value=0,fa.valueEnd=0,fa.textEnd=t.length}(t),bg(t,lp(t,0,fa.textEnd))}(r);s>=0;s=bg(r,s))xs(t,j_(r),!0)}function Wc(t,r,s,l){const f=Dt(),_=br(),b=uo(2);_.firstUpdatePass&&lf(_,t,b,l),r!==cr&&ml(f,b,r)&&ev(_,_.data[kn()],f,f[En],t,f[b+1]=function aI(t,r){return null==t||""===t||("string"==typeof r?t+=r:"object"==typeof t&&(t=Ve(fd(t)))),t}(r,s),l,b)}function up(t,r){return r>=t.expandoStartIndex}function lf(t,r,s,l){const f=t.data;if(null===f[s+1]){const _=f[kn()],b=up(t,s);z_(_,l)&&null===r&&!b&&(r=!1),r=function Zy(t,r,s,l){const f=function Hu(t){const r=qn.lFrame.currentDirectiveIndex;return-1===r?null:t[r]}(t);let _=l?r.residualClasses:r.residualStyles;if(null===f)0===(l?r.classBindings:r.styleBindings)&&(s=$_(s=Qy(null,t,r,s,l),r.attrs,l),_=null);else{const b=r.directiveStylingLast;if(-1===b||t[b]!==f)if(s=Qy(f,t,r,s,l),null===_){let F=function cp(t,r,s){const l=s?r.classBindings:r.styleBindings;if(0!==Tg(l))return t[ap(l)]}(t,r,l);void 0!==F&&Array.isArray(F)&&(F=Qy(null,t,r,F[1],l),F=$_(F,r.attrs,l),function rI(t,r,s,l){t[ap(s?r.classBindings:r.styleBindings)]=l}(t,r,l,F))}else _=function iI(t,r,s){let l;const f=r.directiveEnd;for(let _=1+r.directiveStylingLast;_<f;_++)l=$_(l,t[_].hostAttrs,s);return $_(l,r.attrs,s)}(t,r,l)}return void 0!==_&&(l?r.residualClasses=_:r.residualStyles=_),s}(f,_,r,l),function tE(t,r,s,l,f,_){let b=_?r.classBindings:r.styleBindings,N=ap(b),F=Tg(b);t[l]=s;let ne,z=!1;if(Array.isArray(s)?(ne=s[1],(null===ne||tu(s,ne)>0)&&(z=!0)):ne=s,f)if(0!==F){const Be=ap(t[N+1]);t[l+1]=U_(Be,N),0!==Be&&(t[Be+1]=s0(t[Be+1],l)),t[N+1]=function r0(t,r){return 131071&t|r<<17}(t[N+1],l)}else t[l+1]=U_(N,0),0!==N&&(t[N+1]=s0(t[N+1],l)),N=l;else t[l+1]=U_(F,0),0===N?N=l:t[F+1]=s0(t[F+1],l),F=l;z&&(t[l+1]=Wy(t[l+1])),Lm(t,ne,l,!0),Lm(t,ne,l,!1),function qy(t,r,s,l,f){const _=f?t.residualClasses:t.residualStyles;null!=_&&"string"==typeof r&&tu(_,r)>=0&&(s[l+1]=o0(s[l+1]))}(r,ne,t,l,_),b=U_(N,F),_?r.classBindings=b:r.styleBindings=b}(f,_,r,s,b,l)}}function Qy(t,r,s,l,f){let _=null;const b=s.directiveEnd;let N=s.directiveStylingLast;for(-1===N?N=s.directiveStart:N++;N<b&&(_=r[N],l=$_(l,_.hostAttrs,f),_!==t);)N++;return null!==t&&(s.directiveStylingLast=N),l}function $_(t,r,s){const l=s?1:2;let f=-1;if(null!==r)for(let _=0;_<r.length;_++){const b=r[_];"number"==typeof b?f=b:f===l&&(Array.isArray(t)||(t=void 0===t?[]:["",t]),xs(t,b,!!s||r[++_]))}return void 0===t?null:t}function oI(t,r,s){const l=String(r);""!==l&&!l.includes(" ")&&xs(t,l,s)}function ev(t,r,s,l,f,_,b,N){if(!(3&r.type))return;const F=t.data,z=F[N+1],ne=function eE(t){return 1==(1&t)}(z)?Bm(F,r,s,f,Tg(z),b):void 0;Um(ne)||(Um(_)||function XI(t){return 2==(2&t)}(z)&&(_=Bm(F,null,s,f,N,b)),function Cf(t,r,s,l,f){if(r)f?t.addClass(s,l):t.removeClass(s,l);else{let _=-1===l.indexOf("-")?void 0:Ca.DashCase;null==f?t.removeStyle(s,l,_):("string"==typeof f&&f.endsWith("!important")&&(f=f.slice(0,-10),_|=Ca.Important),t.setStyle(s,l,f,_))}}(l,b,pu(kn(),s),f,_))}function Bm(t,r,s,l,f,_){const b=null===r;let N;for(;f>0;){const F=t[f],z=Array.isArray(F),ne=z?F[1]:F,ge=null===ne;let Be=s[f+1];Be===cr&&(Be=ge?qt:void 0);let Ye=ge?Md(Be,l):ne===l?Be:void 0;if(z&&!Um(Ye)&&(Ye=Md(F,l)),Um(Ye)&&(N=Ye,b))return N;const yt=t[f+1];f=b?ap(yt):Tg(yt)}if(null!==r){let F=_?r.residualClasses:r.residualStyles;null!=F&&(N=Md(F,l))}return N}function Um(t){return void 0!==t}function z_(t,r){return 0!=(t.flags&(r?8:16))}function h0(t,r=""){const s=Dt(),l=br(),f=t+Vn,_=l.firstCreatePass?qh(l,f,1,r,null):l.data[f],b=tv(l,s,_,r,t);s[f]=b,gu()&&wf(l,s,b,_),un(_,!1)}let tv=(t,r,s,l,f)=>(Ni(!0),$(r[En],l));function nv(t){return W_("",t,""),nv}function W_(t,r,s){const l=Dt(),f=uh(l,t,r,s);return f!==cr&&Ii(l,kn(),f),W_}function rv(t,r,s,l,f){const _=Dt(),b=function Dd(t,r,s,l,f,_){const N=Jh(t,ya(),s,f);return uo(2),N?r+Pe(s)+l+Pe(f)+_:cr}(_,t,r,s,l,f);return b!==cr&&Ii(_,kn(),b),rv}function iv(t,r,s,l,f,_,b){const N=Dt(),F=function sp(t,r,s,l,f,_,b,N){const z=Cm(t,ya(),s,f,b);return uo(3),z?r+Pe(s)+l+Pe(f)+_+Pe(b)+N:cr}(N,t,r,s,l,f,_,b);return F!==cr&&Ii(N,kn(),F),iv}function q_(t,r,s,l,f,_,b,N,F){const z=Dt(),ne=Xh(z,t,r,s,l,f,_,b,N,F);return ne!==cr&&Ii(z,kn(),ne),q_}function cI(t,r,s){const l=Dt();return ml(l,Gl(),r)&&kl(br(),gi(),l,t,r,l[En],s,!0),cI}const jm=void 0;var bb=["en",[["a","p"],["AM","PM"],jm],[["AM","PM"],jm,jm],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],jm,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],jm,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",jm,"{1} 'at' {0}",jm],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function Tb(t){const s=Math.floor(Math.abs(t)),l=t.toString().replace(/^[^.]*\.?/,"").length;return 1===s&&0===l?1:5}];let K_={};function dI(t){const r=function wb(t){return t.toLowerCase().replace(/_/g,"-")}(t);let s=aE(r);if(s)return s;const l=r.split("-")[0];if(s=aE(l),s)return s;if("en"===l)return bb;throw new _e(701,!1)}function oE(t){return dI(t)[Y_.PluralCase]}function aE(t){return t in K_||(K_[t]=Hn.ng&&Hn.ng.common&&Hn.ng.common.locales&&Hn.ng.common.locales[t]),K_[t]}var Y_=function(t){return t[t.LocaleId=0]="LocaleId",t[t.DayPeriodsFormat=1]="DayPeriodsFormat",t[t.DayPeriodsStandalone=2]="DayPeriodsStandalone",t[t.DaysFormat=3]="DaysFormat",t[t.DaysStandalone=4]="DaysStandalone",t[t.MonthsFormat=5]="MonthsFormat",t[t.MonthsStandalone=6]="MonthsStandalone",t[t.Eras=7]="Eras",t[t.FirstDayOfWeek=8]="FirstDayOfWeek",t[t.WeekendRange=9]="WeekendRange",t[t.DateFormat=10]="DateFormat",t[t.TimeFormat=11]="TimeFormat",t[t.DateTimeFormat=12]="DateTimeFormat",t[t.NumberSymbols=13]="NumberSymbols",t[t.NumberFormats=14]="NumberFormats",t[t.CurrencyCode=15]="CurrencyCode",t[t.CurrencySymbol=16]="CurrencySymbol",t[t.CurrencyName=17]="CurrencyName",t[t.Currencies=18]="Currencies",t[t.Directionality=19]="Directionality",t[t.PluralCase=20]="PluralCase",t[t.ExtraData=21]="ExtraData",t}(Y_||{});const Z_="en-US",m0={marker:"element"},_0={marker:"ICU"};var Tc=function(t){return t[t.SHIFT=2]="SHIFT",t[t.APPEND_EAGERLY=1]="APPEND_EAGERLY",t[t.COMMENT=2]="COMMENT",t}(Tc||{});let lE=Z_;function uE(t){(function Ft(t,r){null==t&&Rt(r,t,null,"!=")})(t,"Expected localeId to be defined"),"string"==typeof t&&(lE=t.toLowerCase().replace(/_/g,"-"))}function cE(t,r,s){const l=r.insertBeforeIndex,f=Array.isArray(l)?l[0]:l;return null===f?Ap(t,0,s):ni(s[f])}function dE(t,r,s,l,f){const _=r.insertBeforeIndex;if(Array.isArray(_)){let b=l,N=null;if(3&r.type||(N=b,b=f),null!==b&&-1===r.componentOffset)for(let F=1;F<_.length;F++)Ru(t,b,s[_[F]],N,!1)}}function hE(t,r){if(t.push(r),t.length>1)for(let s=t.length-2;s>=0;s--){const l=t[s];fE(l)||Rb(l,r)&&null===Nb(l)&&Pb(l,r.index)}}function fE(t){return!(64&t.type)}function Rb(t,r){return fE(r)||t.index>r.index}function Nb(t){const r=t.insertBeforeIndex;return Array.isArray(r)?r[0]:r}function Pb(t,r){const s=t.insertBeforeIndex;Array.isArray(s)?s[0]=r:(bf(cE,dE),t.insertBeforeIndex=r)}function xb(t,r,s){const l=tp(t,s,64,null,null);return hE(r,l),l}function jb(){const t=[];let s,l,r=-1;function _(N,F){r=0;const z=function y0(t,r){const s=r[t.currentCaseLViewIndex];return null===s?s:s<0?~s:s}(N,F);l=null!==z?N.remove[z]:qt}function b(){if(r<l.length){const N=l[r++];return N>0?s[N]:(t.push(r,l),_(s[xt].data[~N],s),b())}return 0===t.length?null:(l=t.pop(),r=t.pop(),b())}return function f(N,F){for(s=F;t.length;)t.pop();return _(N.value,F),b}}const v0=/\ufffd(\d+):?\d*\ufffd/gi,Gb=/\ufffd(\d+)\ufffd/,TE=/^\s*(\ufffd\d+:?\d*\ufffd)\s*,\s*(select|plural)\s*,/,uv="\ufffd",$b=/\ufffd\/?\*(\d+:\d+)\ufffd/gi,zb=/\ufffd(\/?[#*]\d+):?\d*\ufffd/gi,Wb=/\uE500/g;function bE(t,r,s,l,f,_,b){const N=xl(t,l,1,null);let F=N<<Tc.SHIFT,z=jr();r===z&&(z=null),null===z&&(F|=Tc.APPEND_EAGERLY),b&&(F|=Tc.COMMENT,function If(t){void 0===Gd&&(Gd=t())}(jb)),f.push(F,null===_?"":_);const ne=tp(t,N,b?32:1,null===_?"":_,null);hE(s,ne);const ge=ne.index;return un(ne,!1),null!==z&&r!==z&&function Mb(t,r){let s=t.insertBeforeIndex;null===s?(bf(cE,dE),s=t.insertBeforeIndex=[null,r]):(function _r(t,r,s){t!=r&&Rt(s,t,r,"==")}(Array.isArray(s),!0,"Expecting array here"),s.push(r))}(z,ge),ne}function Yb(t,r,s,l,f,_,b){const N=b.match(v0),F=bE(t,r,s,_,l,N?null:b,!1);N&&cv(f,b,F.index,null,0,null)}function cv(t,r,s,l,f,_){const b=t.length,N=b+1;t.push(null,null);const F=b+2,z=r.split(v0);let ne=0;for(let ge=0;ge<z.length;ge++){const Be=z[ge];if(1&ge){const Ye=f+parseInt(Be,10);t.push(-1-Ye),ne|=wE(Ye)}else""!==Be&&t.push(Be)}return t.push(s<<2|(l?1:0)),l&&t.push(l,_),t[b]=ne,t[N]=t.length-F,ne}function wE(t){return 1<<Math.min(t,31)}function DE(t){let r,_,s="",l=0,f=!1;for(;null!==(r=$b.exec(t));)f?r[0]===`${uv}/*${_}${uv}`&&(l=r.index,f=!1):(s+=t.substring(l,r.index+r[0].length),_=r[1],f=!0);return s+=t.slice(l),s}function CE(t,r,s,l,f,_){let b=0;const N={type:f.type,currentCaseLViewIndex:xl(t,r,1,null),anchorIdx:_,cases:[],create:[],remove:[],update:[]};(function rw(t,r,s){t.push(wE(r.mainBinding),2,-1-r.mainBinding,s<<2|2)})(s,f,_),function Ob(t,r,s){const l=t.data[r];null===l?t.data[r]=s:l.value=s}(t,_,N);const F=f.values;for(let z=0;z<F.length;z++){const ne=F[z],ge=[];for(let Be=0;Be<ne.length;Be++){const Ye=ne[Be];if("string"!=typeof Ye){const yt=ge.push(Ye)-1;ne[Be]=`\x3c!--\ufffd${yt}\ufffd--\x3e`}}b=tw(t,N,r,s,l,f.cases[z],ne.join(""),ge)|b}b&&function iw(t,r,s){t.push(r,1,s<<2|3)}(s,b,_)}function ew(t){const r=[],s=[];let l=1,f=0;const _=hI(t=t.replace(TE,function(b,N,F){return l="select"===F?0:1,f=parseInt(N.slice(1),10),""}));for(let b=0;b<_.length;){let N=_[b++].trim();1===l&&(N=N.replace(/\s*(?:=)?(\w+)\s*/,"$1")),N.length&&r.push(N);const F=hI(_[b++]);r.length>s.length&&s.push(F)}return{type:l,mainBinding:f,cases:r,values:s}}function hI(t){if(!t)return[];let r=0;const s=[],l=[],f=/[{}]/g;let _;for(f.lastIndex=0;_=f.exec(t);){const N=_.index;if("}"==_[0]){if(s.pop(),0==s.length){const F=t.substring(r,N);TE.test(F)?l.push(ew(F)):l.push(F),r=N+1}}else{if(0==s.length){const F=t.substring(r,N);l.push(F),r=N+1}s.push("{")}}const b=t.substring(r);return l.push(b),l}function tw(t,r,s,l,f,_,b,N){const F=[],z=[],ne=[];r.cases.push(_),r.create.push(F),r.remove.push(z),r.update.push(ne);const Be=function Zm(t){const r=new vv(t);return function Qm(){try{return!!(new window.DOMParser).parseFromString(Dh(""),"text/html")}catch{return!1}}()?new sy(r):r}(Ah()).getInertBodyElement(b),Ye=function Fn(t){return"content"in t&&function cy(t){return t.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===t.nodeName}(t)?t.content:null}(Be)||Be;return Ye?AE(t,r,s,l,F,z,ne,Ye,f,N,0):0}function AE(t,r,s,l,f,_,b,N,F,z,ne){let ge=0,Be=N.firstChild;for(;Be;){const Ye=xl(t,s,1,null);switch(Be.nodeType){case Node.ELEMENT_NODE:const yt=Be,kt=yt.tagName.toLowerCase();if(Pf.hasOwnProperty(kt)){fI(f,m0,kt,F,Ye),t.data[Ye]=kt;const wr=yt.attributes;for(let Xr=0;Xr<wr.length;Xr++){const ws=wr.item(Xr),wc=ws.name.toLowerCase();ws.value.match(v0)?e_.hasOwnProperty(wc)&&cv(b,ws.value,Ye,ws.name,0,qd[wc]?Vg:null):sw(f,Ye,ws)}ge=AE(t,r,s,l,f,_,b,Be,Ye,z,ne+1)|ge,SE(_,Ye,ne)}break;case Node.TEXT_NODE:const fn=Be.textContent||"",Un=fn.match(v0);fI(f,null,Un?"":fn,F,Ye),SE(_,Ye,ne),Un&&(ge=cv(b,fn,Ye,null,0,null)|ge);break;case Node.COMMENT_NODE:const Nt=Gb.exec(Be.textContent||"");if(Nt){const Xr=z[parseInt(Nt[1],10)];fI(f,_0,"",F,Ye),CE(t,s,l,F,Xr,Ye),nw(_,Ye,ne)}}Be=Be.nextSibling}return ge}function SE(t,r,s){0===s&&t.push(r)}function nw(t,r,s){0===s&&(t.push(~r),t.push(r))}function fI(t,r,s,l,f){null!==r&&t.push(r),t.push(s,f,function kb(t,r,s){return t|r<<17|s<<1}(0,l,f))}function sw(t,r,s){t.push(r<<1|1,s.name,s.value)}function NE(t,r,s=-1){const l=br(),f=Dt(),_=Vn+t,b=rl(l.consts,r),N=jr();l.firstCreatePass&&function Kb(t,r,s,l,f,_){const b=jr(),N=[],F=[],z=[[]];f=function Xb(t,r){if(function Jb(t){return-1===t}(r))return DE(t);{const s=t.indexOf(`:${r}${uv}`)+2+r.toString().length,l=t.search(new RegExp(`${uv}\\/\\*\\d+:${r}${uv}`));return DE(t.substring(s,l))}}(f,_);const ne=function qb(t){return t.replace(Wb," ")}(f).split(zb);for(let ge=0;ge<ne.length;ge++){let Be=ne[ge];if(1&ge){const Ye=47===Be.charCodeAt(0),kt=(Be.charCodeAt(Ye?1:0),Vn+Number.parseInt(Be.substring(Ye?2:1)));if(Ye)z.shift(),un(jr(),!1);else{const fn=xb(t,z[0],kt);z.unshift([]),un(fn,!0)}}else{const Ye=hI(Be);for(let yt=0;yt<Ye.length;yt++){let kt=Ye[yt];if(1&yt){const fn=kt;if("object"!=typeof fn)throw new Error(`Unable to parse ICU expression in "${f}" message.`);CE(t,s,F,r,fn,bE(t,b,z[0],s,N,"",!0).index)}else""!==kt&&Yb(t,b,z[0],N,F,s,kt)}}}t.data[l]={create:N,update:F}}(l,null===N?0:N.index,f,_,b,s),2===l.type?f[pi][Cn]|=32:f[Cn]|=32;const F=l.data[_],ne=Fc(l,N===f[ei]?null:N,f);(function Vb(t,r,s,l){const f=t[En];for(let _=0;_<r.length;_++){const b=r[_++],N=r[_],z=(b&Tc.APPEND_EAGERLY)===Tc.APPEND_EAGERLY,ne=b>>>Tc.SHIFT;let ge=t[ne];null===ge&&(ge=t[ne]=(b&Tc.COMMENT)===Tc.COMMENT?f.createComment(N):$(f,N)),z&&null!==s&&Ru(f,s,ge,l,!1)}})(f,F.create,ne,N&&8&N.type?f[N.index]:null),ju(!0)}function OE(t,r,s){NE(t,r,s),function PE(){ju(!1)}()}function pI(t,r,s,l,f){if(t=mt(t),Array.isArray(t))for(let _=0;_<t.length;_++)pI(t[_],r,s,l,f);else{const _=br(),b=Dt(),N=$i();let F=Kd(t)?t:mt(t.provide);const z=Qd(t),ne=1048575&N.providerIndexes,ge=N.directiveStart,Be=N.providerIndexes>>20;if(Kd(t)||!t.multi){const Ye=new yu(z,f,_c),yt=mI(F,r,f?ne:ne+Be,ge);-1===yt?(Ku(al(N,b),_,F),gI(_,t,r.length),r.push(F),N.directiveStart++,N.directiveEnd++,f&&(N.providerIndexes+=1048576),s.push(Ye),b.push(Ye)):(s[yt]=Ye,b[yt]=Ye)}else{const Ye=mI(F,r,ne+Be,ge),yt=mI(F,r,ne,ne+Be),fn=yt>=0&&s[yt];if(f&&!fn||!f&&!(Ye>=0&&s[Ye])){Ku(al(N,b),_,F);const Un=function Ew(t,r,s,l,f){const _=new yu(t,s,_c);return _.multi=[],_.index=r,_.componentProviders=0,xE(_,f,l&&!s),_}(f?Iw:vw,s.length,f,l,z);!f&&fn&&(s[yt].providerFactory=Un),gI(_,t,r.length,0),r.push(F),N.directiveStart++,N.directiveEnd++,f&&(N.providerIndexes+=1048576),s.push(Un),b.push(Un)}else gI(_,t,Ye>-1?Ye:yt,xE(s[f?yt:Ye],z,!f&&l));!f&&l&&fn&&s[yt].componentProviders++}}}function gI(t,r,s,l){const f=Kd(r),_=function my(t){return!!t.useClass}(r);if(f||_){const F=(_?mt(r.useClass):r).prototype.ngOnDestroy;if(F){const z=t.destroyHooks||(t.destroyHooks=[]);if(!f&&r.multi){const ne=z.indexOf(s);-1===ne?z.push(s,[l,F]):z[ne+1].push(l,F)}else z.push(s,F)}}}function xE(t,r,s){return s&&t.componentProviders++,t.multi.push(r)-1}function mI(t,r,s,l){for(let f=s;f<l;f++)if(r[f]===t)return f;return-1}function vw(t,r,s,l){return _I(this.multi,[])}function Iw(t,r,s,l){const f=this.multi;let _;if(this.providerFactory){const b=this.providerFactory.componentProviders,N=Sr(s,s[xt],this.providerFactory.index,l);_=N.slice(0,b),_I(f,_);for(let F=b;F<N.length;F++)_.push(N[F])}else _=[],_I(f,_);return _}function _I(t,r){for(let s=0;s<t.length;s++)r.push((0,t[s])());return r}function kE(t,r=[]){return s=>{s.providersResolver=(l,f)=>function yw(t,r,s){const l=br();if(l.firstCreatePass){const f=Ls(t);pI(s,l.data,l.blueprint,f,!0),pI(r,l.data,l.blueprint,f,!1)}}(l,f?f(t):t,r)}}class Hm{}class FE{}function Tw(t,r){return new yI(t,r??null,[])}class yI extends Hm{constructor(r,s,l){super(),this._parent=s,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new Qh(this);const f=Dr(r);this._bootstrapComponents=xu(f.bootstrap),this._r3Injector=d_(r,s,[{provide:Hm,useValue:this},{provide:em,useValue:this.componentFactoryResolver},...l],Ve(r),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(r)}get injector(){return this._r3Injector}destroy(){const r=this._r3Injector;!r.destroyed&&r.destroy(),this.destroyCbs.forEach(s=>s()),this.destroyCbs=null}onDestroy(r){this.destroyCbs.push(r)}}class vI extends FE{constructor(r){super(),this.moduleType=r}create(r){return new yI(this.moduleType,r,[])}}class LE extends Hm{constructor(r){super(),this.componentFactoryResolver=new Qh(this),this.instance=null;const s=new Yd([...r.providers,{provide:Hm,useValue:this},{provide:em,useValue:this.componentFactoryResolver}],r.parent||Lh(),r.debugName,new Set(["environment"]));this.injector=s,r.runEnvironmentInitializers&&s.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(r){this.injector.onDestroy(r)}}function VE(t,r,s=null){return new LE({providers:t,parent:r,debugName:s,runEnvironmentInitializers:!0}).injector}let ww=(()=>{class t{constructor(s){this._injector=s,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(s){if(!s.standalone)return null;if(!this.cachedInjectors.has(s)){const l=Gg(0,s.type),f=l.length>0?VE([l],this._injector,`Standalone[${s.type.name}]`):null;this.cachedInjectors.set(s,f)}return this.cachedInjectors.get(s)}ngOnDestroy(){try{for(const s of this.cachedInjectors.values())null!==s&&s.destroy()}finally{this.cachedInjectors.clear()}}static#e=this.\u0275prov=Yt({token:t,providedIn:"environment",factory:()=>new t($t(lc))})}return t})();function BE(t){t.getStandaloneInjector=r=>r.get(ww).getOrCreateStandaloneInjector(t)}function WE(t,r,s){const l=Ri()+t,f=Dt();return f[l]===cr?Fu(f,l,s?r.call(s):r()):function Dm(t,r){return t[r]}(f,l)}function qE(t,r,s,l){return function ZE(t,r,s,l,f,_){const b=r+s;return ml(t,b,f)?Fu(t,b+1,_?l.call(_,f):l(f)):dv(t,b+1)}(Dt(),Ri(),t,r,s,l)}function KE(t,r,s,l,f){return QE(Dt(),Ri(),t,r,s,l,f)}function YE(t,r,s,l,f,_){return function JE(t,r,s,l,f,_,b,N){const F=r+s;return Cm(t,F,f,_,b)?Fu(t,F+3,N?l.call(N,f,_,b):l(f,_,b)):dv(t,F+3)}(Dt(),Ri(),t,r,s,l,f,_)}function dv(t,r){const s=t[r];return s===cr?void 0:s}function QE(t,r,s,l,f,_,b){const N=r+s;return Jh(t,N,f,_)?Fu(t,N+2,b?l.call(b,f,_):l(f,_)):dv(t,N+2)}function tT(t,r){const s=br();let l;const f=t+Vn;s.firstCreatePass?(l=function Bw(t,r){if(r)for(let s=r.length-1;s>=0;s--){const l=r[s];if(t===l.name)return l}}(r,s.pipeRegistry),s.data[f]=l,l.onDestroy&&(s.destroyHooks??=[]).push(f,l.onDestroy)):l=s.data[f];const _=l.factory||(l.factory=es(l.type)),N=or(_c);try{const F=Nd(!1),z=_();return Nd(F),function rf(t,r,s,l){s>=t.data.length&&(t.data[s]=null,t.blueprint[s]=null),r[s]=l}(s,Dt(),f,z),z}finally{or(N)}}function nT(t,r,s,l){const f=t+Vn,_=Dt(),b=Os(_,f);return function hv(t,r){return t[xt].data[r].pure}(_,f)?QE(_,Ri(),r,b.transform,s,l,b):b.transform(s,l)}function $w(){return this._results[Symbol.iterator]()}class EI{static#e=Symbol.iterator;get changes(){return this._changes||(this._changes=new lu)}constructor(r=!1){this._emitDistinctChangesOnly=r,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const s=EI.prototype;s[Symbol.iterator]||(s[Symbol.iterator]=$w)}get(r){return this._results[r]}map(r){return this._results.map(r)}filter(r){return this._results.filter(r)}find(r){return this._results.find(r)}reduce(r,s){return this._results.reduce(r,s)}forEach(r){this._results.forEach(r)}some(r){return this._results.some(r)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(r,s){const l=this;l.dirty=!1;const f=function Us(t){return t.flat(Number.POSITIVE_INFINITY)}(r);(this._changesDetected=!function Od(t,r,s){if(t.length!==r.length)return!1;for(let l=0;l<t.length;l++){let f=t[l],_=r[l];if(s&&(f=s(f),_=s(_)),_!==f)return!1}return!0}(l._results,f,s))&&(l._results=f,l.length=f.length,l.last=f[this.length-1],l.first=f[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}function Ww(t,r,s,l=!0){const f=r[xt];if(function cs(t,r,s,l){const f=ti+l,_=s.length;l>0&&(s[f-1][ii]=r),l<_-ti?(r[ii]=s[f],ec(s,ti+l,r)):(s.push(r),r[ii]=null),r[nr]=s;const b=r[ar];null!==b&&s!==b&&function Nl(t,r){const s=t[Ws];r[pi]!==r[nr][nr][pi]&&(t[Rs]=!0),null===s?t[Ws]=[r]:s.push(r)}(b,r);const N=r[wi];null!==N&&N.insertView(t),r[Cn]|=128}(f,r,t,s),l){const _=Df(s,t),b=r[En],N=Lc(b,t[Fs]);null!==N&&function rn(t,r,s,l,f,_){l[xr]=f,l[ei]=r,Np(t,l,s,1,f,_)}(f,t[ei],b,r,N,_)}}let fv=(()=>{class t{static#e=this.__NG_ELEMENT_ID__=Yw}return t})();const qw=fv,Kw=class extends qw{constructor(r,s,l){super(),this._declarationLView=r,this._declarationTContainer=s,this.elementRef=l}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(r,s){return this.createEmbeddedViewImpl(r,s)}createEmbeddedViewImpl(r,s,l){const f=function zw(t,r,s,l){const f=r.tView,N=Wh(t,f,s,4096&t[Cn]?4096:16,null,r,null,null,null,l?.injector??null,l?.hydrationInfo??null);N[ar]=t[r.index];const z=t[wi];return null!==z&&(N[wi]=z.createEmbeddedView(f)),an(f,N,s),N}(this._declarationLView,this._declarationTContainer,r,{injector:s,hydrationInfo:l});return new Zh(f)}};function Yw(){return I0($i(),Dt())}function I0(t,r){return 4&t.type?new Kw(r,t,Nu(t,r)):null}let T0=(()=>{class t{static#e=this.__NG_ELEMENT_ID__=tD}return t})();function tD(){return uT($i(),Dt())}const nD=T0,aT=class extends nD{constructor(r,s,l){super(),this._lContainer=r,this._hostTNode=s,this._hostLView=l}get element(){return Nu(this._hostTNode,this._hostLView)}get injector(){return new Pi(this._hostTNode,this._hostLView)}get parentInjector(){const r=Kl(this._hostTNode,this._hostLView);if(ql(r)){const s=Ms(r,this._hostLView),l=ol(r);return new Pi(s[xt].data[l+8],s)}return new Pi(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(r){const s=lT(this._lContainer);return null!==s&&s[r]||null}get length(){return this._lContainer.length-ti}createEmbeddedView(r,s,l){let f,_;"number"==typeof l?f=l:null!=l&&(f=l.index,_=l.injector);const N=r.createEmbeddedViewImpl(s||{},_,null);return this.insertImpl(N,f,false),N}createComponent(r,s,l,f,_){const b=r&&!function Xu(t){return"function"==typeof t}(r);let N;if(b)N=s;else{const kt=s||{};N=kt.index,l=kt.injector,f=kt.projectableNodes,_=kt.environmentInjector||kt.ngModuleRef}const F=b?r:new gl(Yn(r)),z=l||this.parentInjector;if(!_&&null==F.ngModule){const fn=(b?z:this.parentInjector).get(lc,null);fn&&(_=fn)}Yn(F.componentType??{});const Ye=F.create(z,f,null,_);return this.insertImpl(Ye.hostView,N,false),Ye}insert(r,s){return this.insertImpl(r,s,!1)}insertImpl(r,s,l){const f=r._lView;if(function jl(t){return Xi(t[nr])}(f)){const F=this.indexOf(r);if(-1!==F)this.detach(F);else{const z=f[nr],ne=new aT(z,z[ei],z[nr]);ne.detach(ne.indexOf(r))}}const b=this._adjustIndex(s),N=this._lContainer;return Ww(N,f,b,!l),r.attachToViewContainerRef(),ec(TI(N),b,r),r}move(r,s){return this.insert(r,s)}indexOf(r){const s=lT(this._lContainer);return null!==s?s.indexOf(r):-1}remove(r){const s=this._adjustIndex(r,-1),l=ru(this._lContainer,s);l&&(vr(TI(this._lContainer),s),iu(l[xt],l))}detach(r){const s=this._adjustIndex(r,-1),l=ru(this._lContainer,s);return l&&null!=vr(TI(this._lContainer),s)?new Zh(l):null}_adjustIndex(r,s=0){return r??this.length+s}};function lT(t){return t[8]}function TI(t){return t[8]||(t[8]=[])}function uT(t,r){let s;const l=r[t.index];return Xi(l)?s=l:(s=mr(l,r,null,t),r[t.index]=s,Ir(r,s)),cT(s,r,t,l),new aT(s,t,r)}let cT=function dT(t,r,s,l){if(t[Fs])return;let f;f=8&s.type?ni(l):function rD(t,r){const s=t[En],l=s.createComment(""),f=Ps(r,t);return Ru(s,Lc(s,f),l,function Rg(t,r){return t.nextSibling(r)}(s,f),!1),l}(r,s),t[Fs]=f};class bI{constructor(r){this.queryList=r,this.matches=null}clone(){return new bI(this.queryList)}setDirty(){this.queryList.setDirty()}}class wI{constructor(r=[]){this.queries=r}createEmbeddedView(r){const s=r.queries;if(null!==s){const l=null!==r.contentQueries?r.contentQueries[0]:s.length,f=[];for(let _=0;_<l;_++){const b=s.getByIndex(_);f.push(this.queries[b.indexInDeclarationView].clone())}return new wI(f)}return null}insertView(r){this.dirtyQueriesWithMatches(r)}detachView(r){this.dirtyQueriesWithMatches(r)}dirtyQueriesWithMatches(r){for(let s=0;s<this.queries.length;s++)null!==IT(r,s).matches&&this.queries[s].setDirty()}}class hT{constructor(r,s,l=null){this.predicate=r,this.flags=s,this.read=l}}class DI{constructor(r=[]){this.queries=r}elementStart(r,s){for(let l=0;l<this.queries.length;l++)this.queries[l].elementStart(r,s)}elementEnd(r){for(let s=0;s<this.queries.length;s++)this.queries[s].elementEnd(r)}embeddedTView(r){let s=null;for(let l=0;l<this.length;l++){const f=null!==s?s.length:0,_=this.getByIndex(l).embeddedTView(r,f);_&&(_.indexInDeclarationView=l,null!==s?s.push(_):s=[_])}return null!==s?new DI(s):null}template(r,s){for(let l=0;l<this.queries.length;l++)this.queries[l].template(r,s)}getByIndex(r){return this.queries[r]}get length(){return this.queries.length}track(r){this.queries.push(r)}}class CI{constructor(r,s=-1){this.metadata=r,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=s}elementStart(r,s){this.isApplyingToNode(s)&&this.matchTNode(r,s)}elementEnd(r){this._declarationNodeIndex===r.index&&(this._appliesToNextNode=!1)}template(r,s){this.elementStart(r,s)}embeddedTView(r,s){return this.isApplyingToNode(r)?(this.crossesNgTemplate=!0,this.addMatch(-r.index,s),new CI(this.metadata)):null}isApplyingToNode(r){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const s=this._declarationNodeIndex;let l=r.parent;for(;null!==l&&8&l.type&&l.index!==s;)l=l.parent;return s===(null!==l?l.index:-1)}return this._appliesToNextNode}matchTNode(r,s){const l=this.metadata.predicate;if(Array.isArray(l))for(let f=0;f<l.length;f++){const _=l[f];this.matchTNodeWithReadOption(r,s,oD(s,_)),this.matchTNodeWithReadOption(r,s,ai(s,r,_,!1,!1))}else l===fv?4&s.type&&this.matchTNodeWithReadOption(r,s,-1):this.matchTNodeWithReadOption(r,s,ai(s,r,l,!1,!1))}matchTNodeWithReadOption(r,s,l){if(null!==l){const f=this.metadata.read;if(null!==f)if(f===pc||f===T0||f===fv&&4&s.type)this.addMatch(s.index,-2);else{const _=ai(s,r,f,!1,!1);null!==_&&this.addMatch(s.index,_)}else this.addMatch(s.index,l)}}addMatch(r,s){null===this.matches?this.matches=[r,s]:this.matches.push(r,s)}}function oD(t,r){const s=t.localNames;if(null!==s)for(let l=0;l<s.length;l+=2)if(s[l]===r)return s[l+1];return null}function lD(t,r,s,l){return-1===s?function aD(t,r){return 11&t.type?Nu(t,r):4&t.type?I0(t,r):null}(r,t):-2===s?function uD(t,r,s){return s===pc?Nu(r,t):s===fv?I0(r,t):s===T0?uT(r,t):void 0}(t,r,l):Sr(t,t[xt],s,r)}function fT(t,r,s,l){const f=r[wi].queries[l];if(null===f.matches){const _=t.data,b=s.matches,N=[];for(let F=0;F<b.length;F+=2){const z=b[F];N.push(z<0?null:lD(r,_[z],b[F+1],s.metadata.read))}f.matches=N}return f.matches}function AI(t,r,s,l){const f=t.queries.getByIndex(s),_=f.matches;if(null!==_){const b=fT(t,r,f,s);for(let N=0;N<_.length;N+=2){const F=_[N];if(F>0)l.push(b[N/2]);else{const z=_[N+1],ne=r[-F];for(let ge=ti;ge<ne.length;ge++){const Be=ne[ge];Be[ar]===Be[nr]&&AI(Be[xt],Be,z,l)}if(null!==ne[Ws]){const ge=ne[Ws];for(let Be=0;Be<ge.length;Be++){const Ye=ge[Be];AI(Ye[xt],Ye,z,l)}}}}}return l}function pT(t){const r=Dt(),s=br(),l=R();k(l+1);const f=IT(s,l);if(t.dirty&&function Tl(t){return 4==(4&t[Cn])}(r)===(2==(2&f.metadata.flags))){if(null===f.matches)t.reset([]);else{const _=f.crossesNgTemplate?AI(s,r,l,[]):fT(s,r,f,l);t.reset(_,tm),t.notifyOnChanges()}return!0}return!1}function gT(t,r,s){const l=br();l.firstCreatePass&&(vT(l,new hT(t,r,s),-1),2==(2&r)&&(l.staticViewQueries=!0)),yT(l,Dt(),r)}function mT(t,r,s,l){const f=br();if(f.firstCreatePass){const _=$i();vT(f,new hT(r,s,l),_.index),function dD(t,r){const s=t.contentQueries||(t.contentQueries=[]);r!==(s.length?s[s.length-1]:-1)&&s.push(t.queries.length-1,r)}(f,t),2==(2&s)&&(f.staticContentQueries=!0)}yT(f,Dt(),s)}function _T(){return function cD(t,r){return t[wi].queries[r].queryList}(Dt(),R())}function yT(t,r,s){const l=new EI(4==(4&s));(function cg(t,r,s,l){const f=Vr(r);f.push(s),t.firstCreatePass&&Oi(t).push(l,f.length-1)})(t,r,l,l.destroy),null===r[wi]&&(r[wi]=new wI),r[wi].queries.push(new bI(l))}function vT(t,r,s){null===t.queries&&(t.queries=new DI),t.queries.track(new CI(r,s))}function IT(t,r){return t.queries.getByIndex(r)}function ET(t,r){return I0(t,r)}function SI(t){return!!Dr(t)}const VT=new Xt("Application Initializer");let MI=(()=>{class t{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((s,l)=>{this.resolve=s,this.reject=l}),this.appInits=Jt(VT,{optional:!0})??[]}runInitializers(){if(this.initialized)return;const s=[];for(const f of this.appInits){const _=f();if(Gy(_))s.push(_);else if(Wv(_)){const b=new Promise((N,F)=>{_.subscribe({complete:N,error:F})});s.push(b)}}const l=()=>{this.done=!0,this.resolve()};Promise.all(s).then(()=>{l()}).catch(f=>{this.reject(f)}),0===s.length&&l(),this.initialized=!0}static#e=this.\u0275fac=function(l){return new(l||t)};static#t=this.\u0275prov=Yt({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),BT=(()=>{class t{log(s){console.log(s)}warn(s){console.warn(s)}static#e=this.\u0275fac=function(l){return new(l||t)};static#t=this.\u0275prov=Yt({token:t,factory:t.\u0275fac,providedIn:"platform"})}return t})();const w0=new Xt("LocaleId",{providedIn:"root",factory:()=>Jt(w0,Mt.Optional|Mt.SkipSelf)||function OD(){return typeof $localize<"u"&&$localize.locale||Z_}()}),MD=new Xt("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});let UT=(()=>{class t{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new Ne.X(!1)}add(){this.hasPendingTasks.next(!0);const s=this.taskId++;return this.pendingTasks.add(s),s}remove(s){this.pendingTasks.delete(s),0===this.pendingTasks.size&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks.next(!1)}static#e=this.\u0275fac=function(l){return new(l||t)};static#t=this.\u0275prov=Yt({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();class kD{constructor(r,s){this.ngModuleFactory=r,this.componentFactories=s}}let FD=(()=>{class t{compileModuleSync(s){return new vI(s)}compileModuleAsync(s){return Promise.resolve(this.compileModuleSync(s))}compileModuleAndAllComponentsSync(s){const l=this.compileModuleSync(s),_=xu(Dr(s).declarations).reduce((b,N)=>{const F=Yn(N);return F&&b.push(new gl(F)),b},[]);return new kD(l,_)}compileModuleAndAllComponentsAsync(s){return Promise.resolve(this.compileModuleAndAllComponentsSync(s))}clearCache(){}clearCacheFor(s){}getModuleId(s){}static#e=this.\u0275fac=function(l){return new(l||t)};static#t=this.\u0275prov=Yt({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();const $T=new Xt(""),zT=new Xt("");let FI,iC=(()=>{class t{constructor(s,l,f){this._ngZone=s,this.registry=l,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,FI||(function sC(t){FI=t}(f),f.addToWindow(l)),this._watchAngularEvents(),s.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{ho.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;0!==this._callbacks.length;){let s=this._callbacks.pop();clearTimeout(s.timeoutId),s.doneCb(this._didWork)}this._didWork=!1});else{let s=this.getPendingTasks();this._callbacks=this._callbacks.filter(l=>!l.updateCb||!l.updateCb(s)||(clearTimeout(l.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(s=>({source:s.source,creationLocation:s.creationLocation,data:s.data})):[]}addCallback(s,l,f){let _=-1;l&&l>0&&(_=setTimeout(()=>{this._callbacks=this._callbacks.filter(b=>b.timeoutId!==_),s(this._didWork,this.getPendingTasks())},l)),this._callbacks.push({doneCb:s,timeoutId:_,updateCb:f})}whenStable(s,l,f){if(f&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(s,l,f),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(s){this.registry.registerApplication(s,this)}unregisterApplication(s){this.registry.unregisterApplication(s)}findProviders(s,l,f){return[]}static#e=this.\u0275fac=function(l){return new(l||t)($t(ho),$t(WT),$t(zT))};static#t=this.\u0275prov=Yt({token:t,factory:t.\u0275fac})}return t})(),WT=(()=>{class t{constructor(){this._applications=new Map}registerApplication(s,l){this._applications.set(s,l)}unregisterApplication(s){this._applications.delete(s)}unregisterAllApplications(){this._applications.clear()}getTestability(s){return this._applications.get(s)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(s,l=!0){return FI?.findTestabilityInTree(this,s,l)??null}static#e=this.\u0275fac=function(l){return new(l||t)};static#t=this.\u0275prov=Yt({token:t,factory:t.\u0275fac,providedIn:"platform"})}return t})(),Dg=null;const qT=new Xt("AllowMultipleToken"),LI=new Xt("PlatformDestroyListeners"),VI=new Xt("appBootstrapListener");class lC{constructor(r,s){this.name=r,this.token=s}}function ZT(t,r,s=[]){const l=`Platform: ${r}`,f=new Xt(l);return(_=[])=>{let b=BI();if(!b||b.injector.get(qT,!1)){const N=[...s,..._,{provide:f,useValue:!0}];t?t(N):function uC(t){if(Dg&&!Dg.get(qT,!1))throw new _e(400,!1);(function KT(){!function Sc(t){ao=t}(()=>{throw new _e(600,!1)})})(),Dg=t;const r=t.get(JT);(function YT(t){t.get(Vf,null)?.forEach(s=>s())})(t)}(function QT(t=[],r){return Ou.create({name:r,providers:[{provide:Wg,useValue:"platform"},{provide:LI,useValue:new Set([()=>Dg=null])},...t]})}(N,l))}return function dC(t){const r=BI();if(!r)throw new _e(401,!1);return r}()}}function BI(){return Dg?.get(JT)??null}let JT=(()=>{class t{constructor(s){this._injector=s,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(s,l){const f=function hC(t="zone.js",r){return"noop"===t?new Dy:"zone.js"===t?new ho(r):t}(l?.ngZone,function XT(t){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:t?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:t?.runCoalescing??!1}}({eventCoalescing:l?.ngZoneEventCoalescing,runCoalescing:l?.ngZoneRunCoalescing}));return f.run(()=>{const _=function bw(t,r,s){return new yI(t,r,s)}(s.moduleType,this.injector,function ib(t){return[{provide:ho,useFactory:t},{provide:xf,multi:!0,useFactory:()=>{const r=Jt(pC,{optional:!0});return()=>r.initialize()}},{provide:rb,useFactory:fC},{provide:f_,useFactory:Jp}]}(()=>f)),b=_.injector.get(gc,null);return f.runOutsideAngular(()=>{const N=f.onError.subscribe({next:F=>{b.handleError(F)}});_.onDestroy(()=>{C0(this._modules,_),N.unsubscribe()})}),function eb(t,r,s){try{const l=s();return Gy(l)?l.catch(f=>{throw r.runOutsideAngular(()=>t.handleError(f)),f}):l}catch(l){throw r.runOutsideAngular(()=>t.handleError(l)),l}}(b,f,()=>{const N=_.injector.get(MI);return N.runInitializers(),N.donePromise.then(()=>(uE(_.injector.get(w0,Z_)||Z_),this._moduleDoBootstrap(_),_))})})}bootstrapModule(s,l=[]){const f=tb({},l);return function oC(t,r,s){const l=new vI(s);return Promise.resolve(l)}(0,0,s).then(_=>this.bootstrapModuleFactory(_,f))}_moduleDoBootstrap(s){const l=s.injector.get(X_);if(s._bootstrapComponents.length>0)s._bootstrapComponents.forEach(f=>l.bootstrap(f));else{if(!s.instance.ngDoBootstrap)throw new _e(-403,!1);s.instance.ngDoBootstrap(l)}this._modules.push(s)}onDestroy(s){this._destroyListeners.push(s)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new _e(404,!1);this._modules.slice().forEach(l=>l.destroy()),this._destroyListeners.forEach(l=>l());const s=this._injector.get(LI,null);s&&(s.forEach(l=>l()),s.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}static#e=this.\u0275fac=function(l){return new(l||t)($t(Ou))};static#t=this.\u0275prov=Yt({token:t,factory:t.\u0275fac,providedIn:"platform"})}return t})();function tb(t,r){return Array.isArray(r)?r.reduce(tb,t):{...t,...r}}let X_=(()=>{class t{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=Jt(rb),this.zoneIsStable=Jt(f_),this.componentTypes=[],this.components=[],this.isStable=Jt(UT).hasPendingTasks.pipe((0,T.w)(s=>s?(0,Te.of)(!1):this.zoneIsStable),(0,qe.x)(),(0,ke.B)()),this._injector=Jt(lc)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(s,l){const f=s instanceof Xg;if(!this._injector.get(MI).done)throw!f&&ns(s),new _e(405,!1);let b;b=f?s:this._injector.get(em).resolveComponentFactory(s),this.componentTypes.push(b.componentType);const N=function aC(t){return t.isBoundToModule}(b)?void 0:this._injector.get(Hm),z=b.create(Ou.NULL,[],l||b.selector,N),ne=z.location.nativeElement,ge=z.injector.get($T,null);return ge?.registerApplication(ne),z.onDestroy(()=>{this.detachView(z.hostView),C0(this.components,z),ge?.unregisterApplication(ne)}),this._loadComponent(z),z}tick(){if(this._runningTick)throw new _e(101,!1);try{this._runningTick=!0;for(let s of this._views)s.detectChanges()}catch(s){this.internalErrorHandler(s)}finally{this._runningTick=!1}}attachView(s){const l=s;this._views.push(l),l.attachToAppRef(this)}detachView(s){const l=s;C0(this._views,l),l.detachFromAppRef()}_loadComponent(s){this.attachView(s.hostView),this.tick(),this.components.push(s);const l=this._injector.get(VI,[]);l.push(...this._bootstrapListeners),l.forEach(f=>f(s))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(s=>s()),this._views.slice().forEach(s=>s.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(s){return this._destroyListeners.push(s),()=>C0(this._destroyListeners,s)}destroy(){if(this._destroyed)throw new _e(406,!1);const s=this._injector;s.destroy&&!s.destroyed&&s.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static#e=this.\u0275fac=function(l){return new(l||t)};static#t=this.\u0275prov=Yt({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function C0(t,r){const s=t.indexOf(r);s>-1&&t.splice(s,1)}const rb=new Xt("",{providedIn:"root",factory:()=>Jt(gc).handleError.bind(void 0)});function fC(){const t=Jt(ho),r=Jt(gc);return s=>t.runOutsideAngular(()=>r.handleError(s))}let pC=(()=>{class t{constructor(){this.zone=Jt(ho),this.applicationRef=Jt(X_)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static#e=this.\u0275fac=function(l){return new(l||t)};static#t=this.\u0275prov=Yt({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function mC(){return!1}let _C=(()=>{class t{static#e=this.__NG_ELEMENT_ID__=yC}return t})();function yC(t){return function vC(t,r,s){if(qs(t)&&!s){const l=Zr(t.index,r);return new Zh(l,l)}return 47&t.type?new Zh(r[pi],r):null}($i(),Dt(),16==(16&t))}class lb{constructor(){}supports(r){return w_(r)}create(r){return new DC(r)}}const wC=(t,r)=>r;class DC{constructor(r){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=r||wC}forEachItem(r){let s;for(s=this._itHead;null!==s;s=s._next)r(s)}forEachOperation(r){let s=this._itHead,l=this._removalsHead,f=0,_=null;for(;s||l;){const b=!l||s&&s.currentIndex<cb(l,f,_)?s:l,N=cb(b,f,_),F=b.currentIndex;if(b===l)f--,l=l._nextRemoved;else if(s=s._next,null==b.previousIndex)f++;else{_||(_=[]);const z=N-f,ne=F-f;if(z!=ne){for(let Be=0;Be<z;Be++){const Ye=Be<_.length?_[Be]:_[Be]=0,yt=Ye+Be;ne<=yt&&yt<z&&(_[Be]=Ye+1)}_[b.previousIndex]=ne-z}}N!==F&&r(b,N,F)}}forEachPreviousItem(r){let s;for(s=this._previousItHead;null!==s;s=s._nextPrevious)r(s)}forEachAddedItem(r){let s;for(s=this._additionsHead;null!==s;s=s._nextAdded)r(s)}forEachMovedItem(r){let s;for(s=this._movesHead;null!==s;s=s._nextMoved)r(s)}forEachRemovedItem(r){let s;for(s=this._removalsHead;null!==s;s=s._nextRemoved)r(s)}forEachIdentityChange(r){let s;for(s=this._identityChangesHead;null!==s;s=s._nextIdentityChange)r(s)}diff(r){if(null==r&&(r=[]),!w_(r))throw new _e(900,!1);return this.check(r)?this:null}onDestroy(){}check(r){this._reset();let f,_,b,s=this._itHead,l=!1;if(Array.isArray(r)){this.length=r.length;for(let N=0;N<this.length;N++)_=r[N],b=this._trackByFn(N,_),null!==s&&Object.is(s.trackById,b)?(l&&(s=this._verifyReinsertion(s,_,b,N)),Object.is(s.item,_)||this._addIdentityChange(s,_)):(s=this._mismatch(s,_,b,N),l=!0),s=s._next}else f=0,function lh(t,r){if(Array.isArray(t))for(let s=0;s<t.length;s++)r(t[s]);else{const s=t[Symbol.iterator]();let l;for(;!(l=s.next()).done;)r(l.value)}}(r,N=>{b=this._trackByFn(f,N),null!==s&&Object.is(s.trackById,b)?(l&&(s=this._verifyReinsertion(s,N,b,f)),Object.is(s.item,N)||this._addIdentityChange(s,N)):(s=this._mismatch(s,N,b,f),l=!0),s=s._next,f++}),this.length=f;return this._truncate(s),this.collection=r,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let r;for(r=this._previousItHead=this._itHead;null!==r;r=r._next)r._nextPrevious=r._next;for(r=this._additionsHead;null!==r;r=r._nextAdded)r.previousIndex=r.currentIndex;for(this._additionsHead=this._additionsTail=null,r=this._movesHead;null!==r;r=r._nextMoved)r.previousIndex=r.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(r,s,l,f){let _;return null===r?_=this._itTail:(_=r._prev,this._remove(r)),null!==(r=null===this._unlinkedRecords?null:this._unlinkedRecords.get(l,null))?(Object.is(r.item,s)||this._addIdentityChange(r,s),this._reinsertAfter(r,_,f)):null!==(r=null===this._linkedRecords?null:this._linkedRecords.get(l,f))?(Object.is(r.item,s)||this._addIdentityChange(r,s),this._moveAfter(r,_,f)):r=this._addAfter(new CC(s,l),_,f),r}_verifyReinsertion(r,s,l,f){let _=null===this._unlinkedRecords?null:this._unlinkedRecords.get(l,null);return null!==_?r=this._reinsertAfter(_,r._prev,f):r.currentIndex!=f&&(r.currentIndex=f,this._addToMoves(r,f)),r}_truncate(r){for(;null!==r;){const s=r._next;this._addToRemovals(this._unlink(r)),r=s}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(r,s,l){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(r);const f=r._prevRemoved,_=r._nextRemoved;return null===f?this._removalsHead=_:f._nextRemoved=_,null===_?this._removalsTail=f:_._prevRemoved=f,this._insertAfter(r,s,l),this._addToMoves(r,l),r}_moveAfter(r,s,l){return this._unlink(r),this._insertAfter(r,s,l),this._addToMoves(r,l),r}_addAfter(r,s,l){return this._insertAfter(r,s,l),this._additionsTail=null===this._additionsTail?this._additionsHead=r:this._additionsTail._nextAdded=r,r}_insertAfter(r,s,l){const f=null===s?this._itHead:s._next;return r._next=f,r._prev=s,null===f?this._itTail=r:f._prev=r,null===s?this._itHead=r:s._next=r,null===this._linkedRecords&&(this._linkedRecords=new ub),this._linkedRecords.put(r),r.currentIndex=l,r}_remove(r){return this._addToRemovals(this._unlink(r))}_unlink(r){null!==this._linkedRecords&&this._linkedRecords.remove(r);const s=r._prev,l=r._next;return null===s?this._itHead=l:s._next=l,null===l?this._itTail=s:l._prev=s,r}_addToMoves(r,s){return r.previousIndex===s||(this._movesTail=null===this._movesTail?this._movesHead=r:this._movesTail._nextMoved=r),r}_addToRemovals(r){return null===this._unlinkedRecords&&(this._unlinkedRecords=new ub),this._unlinkedRecords.put(r),r.currentIndex=null,r._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=r,r._prevRemoved=null):(r._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=r),r}_addIdentityChange(r,s){return r.item=s,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=r:this._identityChangesTail._nextIdentityChange=r,r}}class CC{constructor(r,s){this.item=r,this.trackById=s,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class AC{constructor(){this._head=null,this._tail=null}add(r){null===this._head?(this._head=this._tail=r,r._nextDup=null,r._prevDup=null):(this._tail._nextDup=r,r._prevDup=this._tail,r._nextDup=null,this._tail=r)}get(r,s){let l;for(l=this._head;null!==l;l=l._nextDup)if((null===s||s<=l.currentIndex)&&Object.is(l.trackById,r))return l;return null}remove(r){const s=r._prevDup,l=r._nextDup;return null===s?this._head=l:s._nextDup=l,null===l?this._tail=s:l._prevDup=s,null===this._head}}class ub{constructor(){this.map=new Map}put(r){const s=r.trackById;let l=this.map.get(s);l||(l=new AC,this.map.set(s,l)),l.add(r)}get(r,s){const f=this.map.get(r);return f?f.get(r,s):null}remove(r){const s=r.trackById;return this.map.get(s).remove(r)&&this.map.delete(s),r}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function cb(t,r,s){const l=t.previousIndex;if(null===l)return l;let f=0;return s&&l<s.length&&(f=s[l]),l+r+f}class db{constructor(){}supports(r){return r instanceof Map||Mv(r)}create(){return new SC}}class SC{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(r){let s;for(s=this._mapHead;null!==s;s=s._next)r(s)}forEachPreviousItem(r){let s;for(s=this._previousMapHead;null!==s;s=s._nextPrevious)r(s)}forEachChangedItem(r){let s;for(s=this._changesHead;null!==s;s=s._nextChanged)r(s)}forEachAddedItem(r){let s;for(s=this._additionsHead;null!==s;s=s._nextAdded)r(s)}forEachRemovedItem(r){let s;for(s=this._removalsHead;null!==s;s=s._nextRemoved)r(s)}diff(r){if(r){if(!(r instanceof Map||Mv(r)))throw new _e(900,!1)}else r=new Map;return this.check(r)?this:null}onDestroy(){}check(r){this._reset();let s=this._mapHead;if(this._appendAfter=null,this._forEach(r,(l,f)=>{if(s&&s.key===f)this._maybeAddToChanges(s,l),this._appendAfter=s,s=s._next;else{const _=this._getOrCreateRecordForKey(f,l);s=this._insertBeforeOrAppend(s,_)}}),s){s._prev&&(s._prev._next=null),this._removalsHead=s;for(let l=s;null!==l;l=l._nextRemoved)l===this._mapHead&&(this._mapHead=null),this._records.delete(l.key),l._nextRemoved=l._next,l.previousValue=l.currentValue,l.currentValue=null,l._prev=null,l._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(r,s){if(r){const l=r._prev;return s._next=r,s._prev=l,r._prev=s,l&&(l._next=s),r===this._mapHead&&(this._mapHead=s),this._appendAfter=r,r}return this._appendAfter?(this._appendAfter._next=s,s._prev=this._appendAfter):this._mapHead=s,this._appendAfter=s,null}_getOrCreateRecordForKey(r,s){if(this._records.has(r)){const f=this._records.get(r);this._maybeAddToChanges(f,s);const _=f._prev,b=f._next;return _&&(_._next=b),b&&(b._prev=_),f._next=null,f._prev=null,f}const l=new RC(r);return this._records.set(r,l),l.currentValue=s,this._addToAdditions(l),l}_reset(){if(this.isDirty){let r;for(this._previousMapHead=this._mapHead,r=this._previousMapHead;null!==r;r=r._next)r._nextPrevious=r._next;for(r=this._changesHead;null!==r;r=r._nextChanged)r.previousValue=r.currentValue;for(r=this._additionsHead;null!=r;r=r._nextAdded)r.previousValue=r.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(r,s){Object.is(s,r.currentValue)||(r.previousValue=r.currentValue,r.currentValue=s,this._addToChanges(r))}_addToAdditions(r){null===this._additionsHead?this._additionsHead=this._additionsTail=r:(this._additionsTail._nextAdded=r,this._additionsTail=r)}_addToChanges(r){null===this._changesHead?this._changesHead=this._changesTail=r:(this._changesTail._nextChanged=r,this._changesTail=r)}_forEach(r,s){r instanceof Map?r.forEach(s):Object.keys(r).forEach(l=>s(r[l],l))}}class RC{constructor(r){this.key=r,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function hb(){return new $I([new lb])}let $I=(()=>{class t{static#e=this.\u0275prov=Yt({token:t,providedIn:"root",factory:hb});constructor(s){this.factories=s}static create(s,l){if(null!=l){const f=l.factories.slice();s=s.concat(f)}return new t(s)}static extend(s){return{provide:t,useFactory:l=>t.create(s,l||hb()),deps:[[t,new Eu,new ja]]}}find(s){const l=this.factories.find(f=>f.supports(s));if(null!=l)return l;throw new _e(901,!1)}}return t})();function fb(){return new zI([new db])}let zI=(()=>{class t{static#e=this.\u0275prov=Yt({token:t,providedIn:"root",factory:fb});constructor(s){this.factories=s}static create(s,l){if(l){const f=l.factories.slice();s=s.concat(f)}return new t(s)}static extend(s){return{provide:t,useFactory:l=>t.create(s,l||fb()),deps:[[t,new Eu,new ja]]}}find(s){const l=this.factories.find(f=>f.supports(s));if(l)return l;throw new _e(901,!1)}}return t})();const OC=ZT(null,"core",[]);let MC=(()=>{class t{constructor(s){}static#e=this.\u0275fac=function(l){return new(l||t)($t(X_))};static#t=this.\u0275mod=zs({type:t});static#n=this.\u0275inj=An({})}return t})();function $C(t){return"boolean"==typeof t?t:null!=t&&"false"!==t}function WC(t,r){const s=Yn(t),l=r.elementInjector||Lh();return new gl(s).create(l,r.projectableNodes,r.hostElement,r.environmentInjector)}function qC(t){const r=Yn(t);if(!r)return null;const s=new gl(r);return{get selector(){return s.selector},get type(){return s.componentType},get inputs(){return s.inputs},get outputs(){return s.outputs},get ngContentSelectors(){return s.ngContentSelectors},get isStandalone(){return r.standalone},get isSignal(){return r.signals}}}},7213:(Wt,Je,G)=>{G.d(Je,{zQ:()=>Or,rT:()=>Ot,f7:()=>Jn,L6:()=>ft,_Q:()=>de,lh:()=>wt,Qv:()=>ot,nw:()=>On}),G(2872);var me=G(6814),le=G(5879),Oe=G(8326),Ne=G(7217),Te=G(8645),ke=G(2096),T=G(5592),qe=G(2459),ye=G(3019),Ie=G(3093),Ve=G(4664),ht=G(7398),st=G(4552);class Et extends Te.x{constructor(Bt=1/0,be=1/0,Se=st.l){super(),this._bufferSize=Bt,this._windowTime=be,this._timestampProvider=Se,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=be===1/0,this._bufferSize=Math.max(1,Bt),this._windowTime=Math.max(1,be)}next(Bt){const{isStopped:be,_buffer:Se,_infiniteTimeWindow:Ke,_timestampProvider:Fe,_windowTime:Ue}=this;be||(Se.push(Bt),!Ke&&Se.push(Fe.now()+Ue)),this._trimBuffer(),super.next(Bt)}_subscribe(Bt){this._throwIfClosed(),this._trimBuffer();const be=this._innerSubscribe(Bt),{_infiniteTimeWindow:Se,_buffer:Ke}=this,Fe=Ke.slice();for(let Ue=0;Ue<Fe.length&&!Bt.closed;Ue+=Se?1:2)Bt.next(Fe[Ue]);return this._checkFinalizedStatuses(Bt),be}_trimBuffer(){const{_bufferSize:Bt,_timestampProvider:be,_buffer:Se,_infiniteTimeWindow:Ke}=this,Fe=(Ke?1:2)*Bt;if(Bt<1/0&&Fe<Se.length&&Se.splice(0,Se.length-Fe),!Ke){const Ue=be.now();let Xe=0;for(let Ft=1;Ft<Se.length&&Se[Ft]<=Ue;Ft+=2)Xe=Ft;Xe&&Se.splice(0,Xe+1)}}}var mt=G(3020);function Ct(tn,Bt,be){let Se,Ke=!1;return tn&&"object"==typeof tn?({bufferSize:Se=1/0,windowTime:Bt=1/0,refCount:Ke=!1,scheduler:be}=tn):Se=tn??1/0,(0,mt.B)({connector:()=>new Et(Se,Bt,be),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:Ke})}var bt=G(1374),jt=G(4674);function Re(tn,Bt){return(0,jt.m)(Bt)?(0,Ve.w)(()=>tn,Bt):(0,Ve.w)(()=>tn)}var _e=G(5137),He=G(2181);G(7142);const ot=new le.OlP("angularfire2.auth.use-emulator"),ft=new le.OlP("angularfire2.auth.settings"),de=new le.OlP("angularfire2.auth.tenant-id"),Ot=new le.OlP("angularfire2.auth.langugage-code"),wt=new le.OlP("angularfire2.auth.use-device-language"),Jn=new le.OlP("angularfire.auth.persistence"),On=(tn,Bt,be,Se,Ke,Fe,Ue,Xe)=>(0,Ne.cc)(`${tn.name}.auth`,"AngularFireAuth",tn.name,()=>{const Ft=Bt.runOutsideAngular(()=>tn.auth());if(be&&Ft.useEmulator(...be),Se&&(Ft.tenantId=Se),Ft.languageCode=Ke,Fe&&Ft.useDeviceLanguage(),Ue)for(const[Rt,hr]of Object.entries(Ue))Ft.settings[Rt]=hr;return Xe&&Ft.setPersistence(Xe),Ft},[be,Se,Ke,Fe,Ue,Xe]);let Or=(()=>{class tn{authState;idToken;user;idTokenResult;credential;constructor(be,Se,Ke,Fe,Ue,Xe,Ft,Rt,hr,Ut,Kn,Yt){const Ln=new Te.x,An=(0,ke.of)(void 0).pipe((0,Ie.Q)(Ue.outsideAngular),(0,Ve.w)(()=>Fe.runOutsideAngular(()=>Promise.resolve().then(G.bind(G,2872)))),(0,ht.U)(()=>(0,Ne.on)(be,Fe,Se)),(0,ht.U)($n=>On($n,Fe,Xe,Rt,hr,Ut,Ft,Kn)),Ct({bufferSize:1,refCount:!1}));if((0,me.PM)(Ke))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=(0,ke.of)(null);else{An.pipe((0,bt.P)()).subscribe();const $n=An.pipe((0,Ve.w)(ze=>ze.getRedirectResult().then(lt=>lt,()=>null)),Oe.iC,Ct({bufferSize:1,refCount:!1})),Ee=An.pipe((0,Ve.w)(ze=>new T.y(lt=>({unsubscribe:Fe.runOutsideAngular(()=>ze.onAuthStateChanged(pt=>lt.next(pt),pt=>lt.error(pt),()=>lt.complete()))})))),xe=An.pipe((0,Ve.w)(ze=>new T.y(lt=>({unsubscribe:Fe.runOutsideAngular(()=>ze.onIdTokenChanged(pt=>lt.next(pt),pt=>lt.error(pt),()=>lt.complete()))}))));this.authState=$n.pipe(Re(Ee),(0,_e.R)(Ue.outsideAngular),(0,Ie.Q)(Ue.insideAngular)),this.user=$n.pipe(Re(xe),(0,_e.R)(Ue.outsideAngular),(0,Ie.Q)(Ue.insideAngular)),this.idToken=this.user.pipe((0,Ve.w)(ze=>ze?(0,qe.D)(ze.getIdToken()):(0,ke.of)(null))),this.idTokenResult=this.user.pipe((0,Ve.w)(ze=>ze?(0,qe.D)(ze.getIdTokenResult()):(0,ke.of)(null))),this.credential=(0,ye.T)($n,Ln,this.authState.pipe((0,He.h)(ze=>!ze))).pipe((0,ht.U)(ze=>ze?.user?ze:null),(0,_e.R)(Ue.outsideAngular),(0,Ie.Q)(Ue.insideAngular))}return(0,Ne.pX)(this,An,Fe,{spy:{apply:($n,Ee,xe)=>{($n.startsWith("signIn")||$n.startsWith("createUser"))&&xe.then(ze=>Ln.next(ze))}}})}static \u0275fac=function(Se){return new(Se||tn)(le.LFG(Ne.Dh),le.LFG(Ne.xv,8),le.LFG(le.Lbi),le.LFG(le.R0b),le.LFG(Oe.HU),le.LFG(ot,8),le.LFG(ft,8),le.LFG(de,8),le.LFG(Ot,8),le.LFG(wt,8),le.LFG(Jn,8),le.LFG(Oe.Rf,8))};static \u0275prov=le.Yz7({token:tn,factory:tn.\u0275fac,providedIn:"any"})}return tn})()},9027:(Wt,Je,G)=>{G.d(Je,{ST:()=>p0});var E=G(6814),me=G(5879),le=G(8326),Oe=G(7217),Ne=G(7213),Te=G(6321),ke=G(5592),T=G(2459),qe=G(2096),ye=G(7921),Ie=G(9360),Ve=G(8251);function ht(){return(0,Ie.e)((i,e)=>{let n,o=!1;i.subscribe((0,Ve.x)(e,u=>{const p=n;n=u,o&&e.next([p,u]),o=!0}))})}var de,st=G(7398),Et=G(6699),mt=G(3997),Ct=G(2181),jt=(G(2872),G(3106)),Re=G(5861),_e=G(534),He=G(4537),Pe=G(7879),$e=G(9058),ot=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},ft={},Ot=Ot||{},wt=ot||self;function Jn(i){var e=typeof i;return"array"==(e="object"!=e?e:i?Array.isArray(i)?"array":e:"null")||"object"==e&&"number"==typeof i.length}function On(i){var e=typeof i;return"object"==e&&null!=i||"function"==e}var _r="closure_uid_"+(1e9*Math.random()>>>0),tn=0;function Bt(i,e,n){return i.call.apply(i.bind,arguments)}function be(i,e,n){if(!i)throw Error();if(2<arguments.length){var o=Array.prototype.slice.call(arguments,2);return function(){var u=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(u,o),i.apply(e,u)}}return function(){return i.apply(e,arguments)}}function Se(i,e,n){return(Se=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Bt:be).apply(null,arguments)}function Ke(i,e){var n=Array.prototype.slice.call(arguments,1);return function(){var o=n.slice();return o.push.apply(o,arguments),i.apply(this,o)}}function Fe(i,e){function n(){}n.prototype=e.prototype,i.$=e.prototype,i.prototype=new n,i.prototype.constructor=i,i.ac=function(o,u,p){for(var I=Array(arguments.length-2),M=2;M<arguments.length;M++)I[M-2]=arguments[M];return e.prototype[u].apply(o,I)}}function Ue(){this.s=this.s,this.o=this.o}Ue.prototype.s=!1,Ue.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),0)&&function Or(i){Object.prototype.hasOwnProperty.call(i,_r)&&i[_r]||(i[_r]=++tn)}(this)},Ue.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const Ft=Array.prototype.indexOf?function(i,e){return Array.prototype.indexOf.call(i,e,void 0)}:function(i,e){if("string"==typeof i)return"string"!=typeof e||1!=e.length?-1:i.indexOf(e,0);for(let n=0;n<i.length;n++)if(n in i&&i[n]===e)return n;return-1};function Rt(i){const e=i.length;if(0<e){const n=Array(e);for(let o=0;o<e;o++)n[o]=i[o];return n}return[]}function hr(i,e){for(let n=1;n<arguments.length;n++){const o=arguments[n];if(Jn(o)){const u=i.length||0,p=o.length||0;i.length=u+p;for(let I=0;I<p;I++)i[u+I]=o[I]}else i.push(o)}}function Ut(i,e){this.type=i,this.g=this.target=e,this.defaultPrevented=!1}Ut.prototype.h=function(){this.defaultPrevented=!0};var Kn=function(){if(!wt.addEventListener||!Object.defineProperty)return!1;var i=!1,e=Object.defineProperty({},"passive",{get:function(){i=!0}});try{wt.addEventListener("test",()=>{},e),wt.removeEventListener("test",()=>{},e)}catch{}return i}();function Yt(i){return/^[\s\xa0]*$/.test(i)}function Ln(){var i=wt.navigator;return i&&(i=i.userAgent)?i:""}function An(i){return-1!=Ln().indexOf(i)}function $n(i){return $n[" "](i),i}$n[" "]=function(){};var Mt,i,xe=An("Opera"),ze=An("Trident")||An("MSIE"),lt=An("Edge"),pt=lt||ze,Lt=An("Gecko")&&!(-1!=Ln().toLowerCase().indexOf("webkit")&&!An("Edge"))&&!(An("Trident")||An("MSIE"))&&!An("Edge"),jn=-1!=Ln().toLowerCase().indexOf("webkit")&&!An("Edge");function zn(){var i=wt.document;return i?i.documentMode:void 0}e:{var ln="",mn=(i=Ln(),Lt?/rv:([^\);]+)(\)|;)/.exec(i):lt?/Edge\/([\d\.]+)/.exec(i):ze?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(i):jn?/WebKit\/(\S+)/.exec(i):xe?/(?:Version)[ \/]?(\S+)/.exec(i):void 0);if(mn&&(ln=mn?mn[1]:""),ze){var or=zn();if(null!=or&&or>parseFloat(ln)){Mt=String(or);break e}}Mt=ln}var Hn=wt.document&&ze&&(zn()||parseInt(Mt,10))||void 0;function $r(i,e){if(Ut.call(this,i?i.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,i){var n=this.type=i.type,o=i.changedTouches&&i.changedTouches.length?i.changedTouches[0]:null;if(this.target=i.target||i.srcElement,this.g=e,e=i.relatedTarget){if(Lt){e:{try{$n(e.nodeName);var u=!0;break e}catch{}u=!1}u||(e=null)}}else"mouseover"==n?e=i.fromElement:"mouseout"==n&&(e=i.toElement);this.relatedTarget=e,o?(this.clientX=void 0!==o.clientX?o.clientX:o.pageX,this.clientY=void 0!==o.clientY?o.clientY:o.pageY,this.screenX=o.screenX||0,this.screenY=o.screenY||0):(this.clientX=void 0!==i.clientX?i.clientX:i.pageX,this.clientY=void 0!==i.clientY?i.clientY:i.pageY,this.screenX=i.screenX||0,this.screenY=i.screenY||0),this.button=i.button,this.key=i.key||"",this.ctrlKey=i.ctrlKey,this.altKey=i.altKey,this.shiftKey=i.shiftKey,this.metaKey=i.metaKey,this.pointerId=i.pointerId||0,this.pointerType="string"==typeof i.pointerType?i.pointerType:Yr[i.pointerType]||"",this.state=i.state,this.i=i,i.defaultPrevented&&$r.$.h.call(this)}}Fe($r,Ut);var Yr={2:"touch",3:"pen",4:"mouse"};$r.prototype.h=function(){$r.$.h.call(this);var i=this.i;i.preventDefault?i.preventDefault():i.returnValue=!1};var Xt="closure_listenable_"+(1e6*Math.random()|0),Wi=0;function wn(i,e,n,o,u){this.listener=i,this.proxy=null,this.src=e,this.type=n,this.capture=!!o,this.la=u,this.key=++Wi,this.fa=this.ia=!1}function Dn(i){i.fa=!0,i.listener=null,i.proxy=null,i.src=null,i.la=null}function Vi(i,e,n){for(const o in i)e.call(n,i[o],o,i)}function ts(i){const e={};for(const n in i)e[n]=i[n];return e}const go="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function dr(i,e){let n,o;for(let u=1;u<arguments.length;u++){for(n in o=arguments[u],o)i[n]=o[n];for(let p=0;p<go.length;p++)n=go[p],Object.prototype.hasOwnProperty.call(o,n)&&(i[n]=o[n])}}function Ti(i){this.src=i,this.g={},this.h=0}function ps(i,e){var n=e.type;if(n in i.g){var p,o=i.g[n],u=Ft(o,e);(p=0<=u)&&Array.prototype.splice.call(o,u,1),p&&(Dn(e),0==i.g[n].length&&(delete i.g[n],i.h--))}}function Bi(i,e,n,o){for(var u=0;u<i.length;++u){var p=i[u];if(!p.fa&&p.listener==e&&p.capture==!!n&&p.la==o)return u}return-1}Ti.prototype.add=function(i,e,n,o,u){var p=i.toString();(i=this.g[p])||(i=this.g[p]=[],this.h++);var I=Bi(i,e,o,u);return-1<I?(e=i[I],n||(e.ia=!1)):((e=new wn(e,this.src,p,!!o,u)).ia=n,i.push(e)),e};var xi="closure_lm_"+(1e6*Math.random()|0),Ui={};function ji(i,e,n,o,u){if(o&&o.once)return se(i,e,n,o,u);if(Array.isArray(e)){for(var p=0;p<e.length;p++)ji(i,e[p],n,o,u);return null}return n=gn(n),i&&i[Xt]?i.O(e,n,On(o)?!!o.capture:!!o,u):we(i,e,n,!1,o,u)}function we(i,e,n,o,u,p){if(!e)throw Error("Invalid event type");var I=On(u)?!!u.capture:!!u,M=Pt(i);if(M||(i[xi]=M=new Ti(i)),(n=M.add(e,n,o,I,p)).proxy)return n;if(o=function ie(){const e=_t;return function i(n){return e.call(i.src,i.listener,n)}}(),n.proxy=o,o.src=i,o.listener=n,i.addEventListener)Kn||(u=I),void 0===u&&(u=!1),i.addEventListener(e.toString(),o,u);else if(i.attachEvent)i.attachEvent(Le(e.toString()),o);else{if(!i.addListener||!i.removeListener)throw Error("addEventListener and attachEvent are unavailable.");i.addListener(o)}return n}function se(i,e,n,o,u){if(Array.isArray(e)){for(var p=0;p<e.length;p++)se(i,e[p],n,o,u);return null}return n=gn(n),i&&i[Xt]?i.P(e,n,On(o)?!!o.capture:!!o,u):we(i,e,n,!0,o,u)}function re(i,e,n,o,u){if(Array.isArray(e))for(var p=0;p<e.length;p++)re(i,e[p],n,o,u);else o=On(o)?!!o.capture:!!o,n=gn(n),i&&i[Xt]?(i=i.i,(e=String(e).toString())in i.g&&-1<(n=Bi(p=i.g[e],n,o,u))&&(Dn(p[n]),Array.prototype.splice.call(p,n,1),0==p.length&&(delete i.g[e],i.h--))):i&&(i=Pt(i))&&(e=i.g[e.toString()],i=-1,e&&(i=Bi(e,n,o,u)),(n=-1<i?e[i]:null)&&ue(n))}function ue(i){if("number"!=typeof i&&i&&!i.fa){var e=i.src;if(e&&e[Xt])ps(e.i,i);else{var n=i.type,o=i.proxy;e.removeEventListener?e.removeEventListener(n,o,i.capture):e.detachEvent?e.detachEvent(Le(n),o):e.addListener&&e.removeListener&&e.removeListener(o),(n=Pt(e))?(ps(n,i),0==n.h&&(n.src=null,e[xi]=null)):Dn(i)}}}function Le(i){return i in Ui?Ui[i]:Ui[i]="on"+i}function _t(i,e){if(i.fa)i=!0;else{e=new $r(e,this);var n=i.listener,o=i.la||i.src;i.ia&&ue(i),i=n.call(o,e)}return i}function Pt(i){return(i=i[xi])instanceof Ti?i:null}var $t="__closure_events_fn_"+(1e9*Math.random()>>>0);function gn(i){return"function"==typeof i?i:(i[$t]||(i[$t]=function(e){return i.handleEvent(e)}),i[$t])}function Jt(){Ue.call(this),this.i=new Ti(this),this.S=this,this.J=null}function hn(i,e){var n,o=i.J;if(o)for(n=[];o;o=o.J)n.push(o);if(i=i.S,o=e.type||e,"string"==typeof e)e=new Ut(e,i);else if(e instanceof Ut)e.target=e.target||i;else{var u=e;dr(e=new Ut(o,i),u)}if(u=!0,n)for(var p=n.length-1;0<=p;p--){var I=e.g=n[p];u=Br(I,o,!0,e)&&u}if(u=Br(I=e.g=i,o,!0,e)&&u,u=Br(I,o,!1,e)&&u,n)for(p=0;p<n.length;p++)u=Br(I=e.g=n[p],o,!1,e)&&u}function Br(i,e,n,o){if(!(e=i.i.g[String(e)]))return!0;e=e.concat();for(var u=!0,p=0;p<e.length;++p){var I=e[p];if(I&&!I.fa&&I.capture==n){var M=I.listener,U=I.la||I.src;I.ia&&ps(i.i,I),u=!1!==M.call(U,o)&&u}}return u&&!o.defaultPrevented}Fe(Jt,Ue),Jt.prototype[Xt]=!0,Jt.prototype.removeEventListener=function(i,e,n,o){re(this,i,e,n,o)},Jt.prototype.N=function(){if(Jt.$.N.call(this),this.i){var e,i=this.i;for(e in i.g){for(var n=i.g[e],o=0;o<n.length;o++)Dn(n[o]);delete i.g[e],i.h--}}this.J=null},Jt.prototype.O=function(i,e,n,o){return this.i.add(String(i),e,!1,n,o)},Jt.prototype.P=function(i,e,n,o){return this.i.add(String(i),e,!0,n,o)};var li=wt.JSON.stringify;function Qs(){var i=ui;let e=null;return i.g&&(e=i.g,i.g=i.g.next,i.g||(i.h=null),e.next=null),e}var Ge=new class Gs{constructor(e,n){this.i=e,this.j=n,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}(()=>new vt,i=>i.reset());class vt{constructor(){this.next=this.g=this.h=null}set(e,n){this.h=e,this.g=n,this.next=null}reset(){this.next=this.g=this.h=null}}function sn(i){var e=1;i=i.split(":");const n=[];for(;0<e&&i.length;)n.push(i.shift()),e--;return i.length&&n.push(i.join(":")),n}function In(i){wt.setTimeout(()=>{throw i},0)}let qt,tr=!1,ui=new class it{constructor(){this.h=this.g=null}add(e,n){const o=Ge.get();o.set(e,n),this.h?this.h.next=o:this.g=o,this.h=o}},Mr=()=>{const i=wt.Promise.resolve(void 0);qt=()=>{i.then(Js)}};var Js=()=>{for(var i;i=Qs();){try{i.h.call(i.g)}catch(n){In(n)}var e=Ge;e.j(i),100>e.h&&(e.h++,i.next=e.g,e.g=i)}tr=!1};function Hi(i,e){Jt.call(this),this.h=i||1,this.g=e||wt,this.j=Se(this.qb,this),this.l=Date.now()}function Ds(i){i.ga=!1,i.T&&(i.g.clearTimeout(i.T),i.T=null)}function qa(i,e,n){if("function"==typeof i)n&&(i=Se(i,n));else{if(!i||"function"!=typeof i.handleEvent)throw Error("Invalid listener argument");i=Se(i.handleEvent,i)}return 2147483647<Number(e)?-1:wt.setTimeout(i,e||0)}function Yo(i){i.g=qa(()=>{i.g=null,i.i&&(i.i=!1,Yo(i))},i.j);const e=i.h;i.h=null,i.m.apply(null,e)}Fe(Hi,Jt),(de=Hi.prototype).ga=!1,de.T=null,de.qb=function(){if(this.ga){var i=Date.now()-this.l;0<i&&i<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-i):(this.T&&(this.g.clearTimeout(this.T),this.T=null),hn(this,"tick"),this.ga&&(Ds(this),this.start()))}},de.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},de.N=function(){Hi.$.N.call(this),Ds(this),delete this.g};class Ka extends Ue{constructor(e,n){super(),this.m=e,this.j=n,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:Yo(this)}N(){super.N(),this.g&&(wt.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Mn(i){Ue.call(this),this.h=i,this.g={}}Fe(Mn,Ue);var Ya=[];function ro(i,e,n,o){Array.isArray(n)||(n&&(Ya[0]=n.toString()),n=Ya);for(var u=0;u<n.length;u++){var p=ji(e,n[u],o||i.handleEvent,!1,i.h||i);if(!p)break;i.g[p.key]=p}}function $s(i){Vi(i.g,function(e,n){this.g.hasOwnProperty(n)&&ue(e)},i),i.g={}}function Zo(){this.g=!0}function Qo(i,e,n,o){i.info(function(){return"XMLHTTP TEXT ("+e+"): "+function fr(i,e){if(!i.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n)for(i=0;i<n.length;i++)if(Array.isArray(n[i])){var o=n[i];if(!(2>o.length)){var u=o[1];if(Array.isArray(u)&&!(1>u.length)){var p=u[0];if("noop"!=p&&"stop"!=p&&"close"!=p)for(var I=1;I<u.length;I++)u[I]=""}}}return li(n)}catch{return e}}(i,n)+(o?" "+o:"")})}Mn.prototype.N=function(){Mn.$.N.call(this),$s(this)},Mn.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Zo.prototype.Ea=function(){this.g=!1},Zo.prototype.info=function(){};var Tr={},ci=null;function zr(){return ci=ci||new Jt}function Cs(i){Ut.call(this,Tr.Ta,i)}function qi(i){const e=zr();hn(e,new Cs(e))}function io(i,e){Ut.call(this,Tr.STAT_EVENT,i),this.stat=e}function di(i){const e=zr();hn(e,new io(e,i))}function du(i,e){Ut.call(this,Tr.Ua,i),this.size=e}function Ki(i,e){if("function"!=typeof i)throw Error("Fn must not be null and must be a function");return wt.setTimeout(function(){i()},e)}Tr.Ta="serverreachability",Fe(Cs,Ut),Tr.STAT_EVENT="statevent",Fe(io,Ut),Tr.Ua="timingevent",Fe(du,Ut);var Xo={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},Za={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function Qa(){}function Ja(){}Qa.prototype.h=null;var Oa,zs={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function ea(){Ut.call(this,"d")}function _o(){Ut.call(this,"c")}function ks(){}function Yn(i,e,n,o){this.l=i,this.j=e,this.m=n,this.W=o||1,this.U=new Mn(this),this.P=fi,this.V=new Hi(i=pt?125:void 0),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new bi}function bi(){this.i=null,this.g="",this.h=!1}Fe(ea,Ut),Fe(_o,Ut),Fe(ks,Qa),ks.prototype.g=function(){return new XMLHttpRequest},ks.prototype.i=function(){return{}},Oa=new ks;var fi=45e3,ns={},Dr={};function rs(i,e,n){i.L=1,i.v=Oo(yi(e)),i.s=n,i.S=!0,Yi(i,null)}function Yi(i,e){i.G=Date.now(),xr(i),i.A=yi(i.v);var n=i.A,o=i.W;Array.isArray(o)||(o=[String(o)]),pa(n.i,"t",o),i.C=0,n=i.l.J,i.h=new bi,i.g=Ul(i.l,n?e:null,!i.s),0<i.O&&(i.M=new Ka(Se(i.Pa,i,i.g),i.O)),ro(i.U,i.g,"readystatechange",i.nb),e=i.I?ts(i.I):{},i.s?(i.u||(i.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",i.g.ha(i.A,i.u,i.s,e)):(i.u="GET",i.g.ha(i.A,i.u,null,e)),qi(),function mo(i,e,n,o,u,p){i.info(function(){if(i.g)if(p)for(var I="",M=p.split("&"),U=0;U<M.length;U++){var W=M[U].split("=");if(1<W.length){var ee=W[0];W=W[1];var fe=ee.split("_");I=2<=fe.length&&"type"==fe[1]?I+(ee+"=")+W+"&":I+(ee+"=redacted&")}}else I=null;else I=p;return"XMLHTTP REQ ("+o+") [attempt "+u+"]: "+e+"\n"+n+"\n"+I})}(i.j,i.u,i.A,i.m,i.W,i.s)}function _i(i){return!!i.g&&"GET"==i.u&&2!=i.L&&i.l.Ha}function As(i,e,n){let u,o=!0;for(;!i.J&&i.C<n.length;){if(u=Ss(i,n),u==Dr){4==e&&(i.o=4,di(14),o=!1),Qo(i.j,i.m,null,"[Incomplete Response]");break}if(u==ns){i.o=4,di(15),Qo(i.j,i.m,n,"[Invalid Chunk]"),o=!1;break}Qo(i.j,i.m,u,null),Zi(i,u)}_i(i)&&u!=Dr&&u!=ns&&(i.h.g="",i.C=0),4!=e||0!=n.length||i.h.h||(i.o=1,di(16),o=!1),i.i=i.i&&o,o?0<n.length&&!i.ba&&(i.ba=!0,(e=i.l).g==i&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),ka(e),e.M=!0,di(11))):(Qo(i.j,i.m,n,"[Invalid Chunked Response]"),ii(i),nr(i))}function Ss(i,e){var n=i.C,o=e.indexOf("\n",n);return-1==o?Dr:(n=Number(e.substring(n,o)),isNaN(n)?ns:(o+=1)+n>e.length?Dr:(e=e.slice(o,o+n),i.C=o+n,e))}function xr(i){i.Y=Date.now()+i.P,xt(i,i.P)}function xt(i,e){if(null!=i.B)throw Error("WatchDog timer not null");i.B=Ki(Se(i.lb,i),e)}function Cn(i){i.B&&(wt.clearTimeout(i.B),i.B=null)}function nr(i){0==i.l.H||i.J||Il(i.l,i)}function ii(i){Cn(i);var e=i.M;e&&"function"==typeof e.sa&&e.sa(),i.M=null,Ds(i.V),$s(i.U),i.g&&(e=i.g,i.g=null,e.abort(),e.sa())}function Zi(i,e){try{var n=i.l;if(0!=n.H&&(n.g==i||qs(n.i,i)))if(!i.K&&qs(n.i,i)&&3==n.H){try{var o=n.Ja.g.parse(e)}catch{o=null}if(Array.isArray(o)&&3==o.length){var u=o;if(0==u[0]){e:if(!n.u){if(n.g){if(!(n.g.G+3e3<i.G))break e;oo(n),hu(n)}Bl(n),di(18)}}else n.Fa=u[1],0<n.Fa-n.V&&37500>u[2]&&n.G&&0==n.A&&!n.v&&(n.v=Ki(Se(n.ib,n),6e3));if(1>=Ns(n.i)&&n.oa){try{n.oa()}catch{}n.oa=void 0}}else Uo(n,11)}else if((i.K||n.g==i)&&oo(n),!Yt(e))for(u=n.Ja.g.parse(e),e=0;e<u.length;e++){let W=u[e];if(n.V=W[0],W=W[1],2==n.H)if("c"==W[0]){n.K=W[1],n.pa=W[2];const ee=W[3];null!=ee&&(n.ra=ee,n.l.info("VER="+n.ra));const fe=W[4];null!=fe&&(n.Ga=fe,n.l.info("SVER="+n.Ga));const Me=W[5];null!=Me&&"number"==typeof Me&&0<Me&&(n.L=o=1.5*Me,n.l.info("backChannelRequestTimeoutMs_="+o)),o=n;const tt=i.g;if(tt){const Vt=tt.g?tt.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Vt){var p=o.i;p.g||-1==Vt.indexOf("spdy")&&-1==Vt.indexOf("quic")&&-1==Vt.indexOf("h2")||(p.j=p.l,p.g=new Set,p.h&&(Ur(p,p.h),p.h=null))}if(o.F){const Kt=tt.g?tt.g.getResponseHeader("X-HTTP-Session-Id"):null;Kt&&(o.Da=Kt,ar(o.I,o.F,Kt))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-i.G,n.l.info("Handshake RTT: "+n.S+"ms"));var I=i;if((o=n).wa=Cc(o,o.J?o.pa:null,o.Y),I.K){Ls(o.i,I);var M=I,U=o.L;U&&M.setTimeout(U),M.B&&(Cn(M),xr(M)),o.g=I}else tl(o);0<n.j.length&&el(n)}else"stop"!=W[0]&&"close"!=W[0]||Uo(n,7);else 3==n.H&&("stop"==W[0]||"close"==W[0]?"stop"==W[0]?Uo(n,7):ma(n):"noop"!=W[0]&&n.h&&n.h.Aa(W),n.A=0)}qi()}catch{}}function rr(i,e){if(i.forEach&&"function"==typeof i.forEach)i.forEach(e,void 0);else if(Jn(i)||"string"==typeof i)Array.prototype.forEach.call(i,e,void 0);else for(var n=function si(i){if(i.ta&&"function"==typeof i.ta)return i.ta();if(!i.Z||"function"!=typeof i.Z){if(typeof Map<"u"&&i instanceof Map)return Array.from(i.keys());if(!(typeof Set<"u"&&i instanceof Set)){if(Jn(i)||"string"==typeof i){var e=[];i=i.length;for(var n=0;n<i;n++)e.push(n);return e}e=[],n=0;for(const o in i)e[n++]=o;return e}}}(i),o=function ei(i){if(i.Z&&"function"==typeof i.Z)return i.Z();if(typeof Map<"u"&&i instanceof Map||typeof Set<"u"&&i instanceof Set)return Array.from(i.values());if("string"==typeof i)return i.split("");if(Jn(i)){for(var e=[],n=i.length,o=0;o<n;o++)e.push(i[o]);return e}for(o in e=[],n=0,i)e[n++]=i[o];return e}(i),u=o.length,p=0;p<u;p++)e.call(void 0,o[p],n&&n[p],i)}(de=Yn.prototype).setTimeout=function(i){this.P=i},de.nb=function(i){i=i.target;const e=this.M;e&&3==es(i)?e.l():this.Pa(i)},de.Pa=function(i){try{if(i==this.g)e:{const ee=es(this.g);var e=this.g.Ia();if(this.g.da(),!(3>ee)&&(3!=ee||pt||this.g&&(this.h.h||this.g.ja()||is(this.g)))){this.J||4!=ee||7==e||qi(),Cn(this);var n=this.g.da();this.ca=n;t:if(_i(this)){var o=is(this.g);i="";var u=o.length,p=4==es(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){ii(this),nr(this);var I="";break t}this.h.i=new wt.TextDecoder}for(e=0;e<u;e++)this.h.h=!0,i+=this.h.i.decode(o[e],{stream:p&&e==u-1});o.splice(0,u),this.h.g+=i,this.C=0,I=this.h.g}else I=this.g.ja();if(this.i=200==n,function Xs(i,e,n,o,u,p,I){i.info(function(){return"XMLHTTP RESP ("+o+") [ attempt "+u+"]: "+e+"\n"+n+"\n"+p+" "+I})}(this.j,this.u,this.A,this.m,this.W,ee,n),this.i){if(this.aa&&!this.K){t:{if(this.g){var M,U=this.g;if((M=U.g?U.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Yt(M)){var W=M;break t}}W=null}if(!(n=W)){this.i=!1,this.o=3,di(12),ii(this),nr(this);break e}Qo(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Zi(this,n)}this.S?(As(this,ee,I),pt&&this.i&&3==ee&&(ro(this.U,this.V,"tick",this.mb),this.V.start())):(Qo(this.j,this.m,I,null),Zi(this,I)),4==ee&&ii(this),this.i&&!this.J&&(4==ee?Il(this.l,this):(this.i=!1,xr(this)))}else(function Lo(i){const e={};i=(i.g&&2<=es(i)&&i.g.getAllResponseHeaders()||"").split("\r\n");for(let o=0;o<i.length;o++){if(Yt(i[o]))continue;var n=sn(i[o]);const u=n[0];if("string"!=typeof(n=n[1]))continue;n=n.trim();const p=e[u]||[];e[u]=p,p.push(n)}!function Pa(i,e){for(const n in i)e.call(void 0,i[n],n,i)}(e,function(o){return o.join(", ")})})(this.g),400==n&&0<I.indexOf("Unknown SID")?(this.o=3,di(12)):(this.o=0,di(13)),ii(this),nr(this)}}}catch{}},de.mb=function(){if(this.g){var i=es(this.g),e=this.g.ja();this.C<e.length&&(Cn(this),As(this,i,e),this.i&&4!=i&&xr(this))}},de.cancel=function(){this.J=!0,ii(this)},de.lb=function(){this.B=null;const i=Date.now();0<=i-this.Y?(function Jo(i,e){i.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.L&&(qi(),di(17)),ii(this),this.o=2,nr(this)):xt(this,this.Y-i)};var eo=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function En(i){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,i instanceof En){this.h=i.h,so(this,i.j),this.s=i.s,this.g=i.g,Qi(this,i.m),this.l=i.l;var e=i.i,n=new Di;n.i=e.i,e.g&&(n.g=new Map(e.g),n.h=e.h),pi(this,n),this.o=i.o}else i&&(e=String(i).match(eo))?(this.h=!1,so(this,e[1]||"",!0),this.s=wi(e[2]||""),this.g=wi(e[3]||"",!0),Qi(this,e[4]),this.l=wi(e[5]||"",!0),pi(this,e[6]||"",!0),this.o=wi(e[7]||"")):(this.h=!1,this.i=new Di(null,this.h))}function yi(i){return new En(i)}function so(i,e,n){i.j=n?wi(e,!0):e,i.j&&(i.j=i.j.replace(/:$/,""))}function Qi(i,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);i.m=e}else i.m=null}function pi(i,e,n){e instanceof Di?(i.i=e,function ga(i,e){e&&!i.j&&(ys(i),i.i=null,i.g.forEach(function(n,o){var u=o.toLowerCase();o!=u&&(Rs(this,o),pa(this,u,n))},i)),i.j=e}(i.i,i.h)):(n||(e=Ji(e,Xa)),i.i=new Di(e,i.h))}function ar(i,e,n){i.i.set(e,n)}function Oo(i){return ar(i,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),i}function wi(i,e){return i?e?decodeURI(i.replace(/%25/g,"%2525")):decodeURIComponent(i):""}function Ji(i,e,n){return"string"==typeof i?(i=encodeURI(i).replace(e,gs),n&&(i=i.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),i):null}function gs(i){return"%"+((i=i.charCodeAt(0))>>4&15).toString(16)+(15&i).toString(16)}En.prototype.toString=function(){var i=[],e=this.j;e&&i.push(Ji(e,to,!0),":");var n=this.g;return(n||"file"==e)&&(i.push("//"),(e=this.s)&&i.push(Ji(e,to,!0),"@"),i.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&i.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&i.push("/"),i.push(Ji(n,"/"==n.charAt(0)?_s:ms,!0))),(n=this.i.toString())&&i.push("?",n),(n=this.o)&&i.push("#",Ji(n,Vn)),i.join("")};var to=/[#\/\?@]/g,ms=/[#\?:]/g,_s=/[#\?]/g,Xa=/[#\?@]/g,Vn=/#/g;function Di(i,e){this.h=this.g=null,this.i=i||null,this.j=!!e}function ys(i){i.g||(i.g=new Map,i.h=0,i.i&&function Cr(i,e){if(i){i=i.split("&");for(var n=0;n<i.length;n++){var o=i[n].indexOf("="),u=null;if(0<=o){var p=i[n].substring(0,o);u=i[n].substring(o+1)}else p=i[n];e(p,u?decodeURIComponent(u.replace(/\+/g," ")):"")}}}(i.i,function(e,n){i.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}function Rs(i,e){ys(i),e=Ws(i,e),i.g.has(e)&&(i.i=null,i.h-=i.g.get(e).length,i.g.delete(e))}function Fs(i,e){return ys(i),e=Ws(i,e),i.g.has(e)}function pa(i,e,n){Rs(i,e),0<n.length&&(i.i=null,i.g.set(Ws(i,e),Rt(n)),i.h+=n.length)}function Ws(i,e){return e=String(e),i.j&&(e=e.toLowerCase()),e}function _l(i){this.l=i||Fr,i=wt.PerformanceNavigationTiming?0<(i=wt.performance.getEntriesByType("navigation")).length&&("hq"==i[0].nextHopProtocol||"h2"==i[0].nextHopProtocol):!!(wt.g&&wt.g.Ka&&wt.g.Ka()&&wt.g.Ka().dc),this.j=i?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(de=Di.prototype).add=function(i,e){ys(this),this.i=null,i=Ws(this,i);var n=this.g.get(i);return n||this.g.set(i,n=[]),n.push(e),this.h+=1,this},de.forEach=function(i,e){ys(this),this.g.forEach(function(n,o){n.forEach(function(u){i.call(e,u,o,this)},this)},this)},de.ta=function(){ys(this);const i=Array.from(this.g.values()),e=Array.from(this.g.keys()),n=[];for(let o=0;o<e.length;o++){const u=i[o];for(let p=0;p<u.length;p++)n.push(e[o])}return n},de.Z=function(i){ys(this);let e=[];if("string"==typeof i)Fs(this,i)&&(e=e.concat(this.g.get(Ws(this,i))));else{i=Array.from(this.g.values());for(let n=0;n<i.length;n++)e=e.concat(i[n])}return e},de.set=function(i,e){return ys(this),this.i=null,Fs(this,i=Ws(this,i))&&(this.h-=this.g.get(i).length),this.g.set(i,[e]),this.h+=1,this},de.get=function(i,e){return i&&0<(i=this.Z(i)).length?String(i[0]):e},de.toString=function(){if(this.i)return this.i;if(!this.g)return"";const i=[],e=Array.from(this.g.keys());for(var n=0;n<e.length;n++){var o=e[n];const p=encodeURIComponent(String(o)),I=this.Z(o);for(o=0;o<I.length;o++){var u=p;""!==I[o]&&(u+="="+encodeURIComponent(String(I[o]))),i.push(u)}}return this.i=i.join("&")};var Fr=10;function Xi(i){return!!i.h||!!i.g&&i.g.size>=i.j}function Ns(i){return i.h?1:i.g?i.g.size:0}function qs(i,e){return i.h?i.h==e:!!i.g&&i.g.has(e)}function Ur(i,e){i.g?i.g.add(e):i.h=e}function Ls(i,e){i.h&&i.h==e?i.h=null:i.g&&i.g.has(e)&&i.g.delete(e)}function yl(i){if(null!=i.h)return i.i.concat(i.h.F);if(null!=i.g&&0!==i.g.size){let e=i.i;for(const n of i.g.values())e=e.concat(n.F);return e}return Rt(i.i)}_l.prototype.cancel=function(){if(this.i=yl(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const i of this.g.values())i.cancel();this.g.clear()}};var yo=class{stringify(i){return wt.JSON.stringify(i,void 0)}parse(i){return wt.JSON.parse(i,void 0)}};function ta(){this.g=new yo}function Bu(i,e,n){const o=n||"";try{rr(i,function(u,p){let I=u;On(u)&&(I=li(u)),e.push(o+p+"="+encodeURIComponent(I))})}catch(u){throw e.push(o+"type="+encodeURIComponent("_badmap")),u}}function Mo(i,e,n,o,u){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,u(o)}catch{}}function xo(i){this.l=i.ec||null,this.j=i.ob||!1}function Ma(i,e){Jt.call(this),this.F=i,this.u=e,this.m=void 0,this.readyState=ko,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Fe(xo,Qa),xo.prototype.g=function(){return new Ma(this.l,this.j)},xo.prototype.i=function(i){return function(){return i}}({}),Fe(Ma,Jt);var ko=0;function Ar(i){i.j.read().then(i.Xa.bind(i)).catch(i.ka.bind(i))}function ra(i){i.readyState=4,i.l=null,i.j=null,i.A=null,xa(i)}function xa(i){i.onreadystatechange&&i.onreadystatechange.call(i)}(de=Ma.prototype).open=function(i,e){if(this.readyState!=ko)throw this.abort(),Error("Error reopening a connection");this.C=i,this.B=e,this.readyState=1,xa(this)},de.send=function(i){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};i&&(e.body=i),(this.F||wt).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))},de.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,ra(this)),this.readyState=ko},de.$a=function(i){if(this.g&&(this.l=i,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=i.headers,this.readyState=2,xa(this)),this.g&&(this.readyState=3,xa(this),this.g)))if("arraybuffer"===this.responseType)i.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof wt.ReadableStream<"u"&&"body"in i){if(this.j=i.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Ar(this)}else i.text().then(this.Za.bind(this),this.ka.bind(this))},de.Xa=function(i){if(this.g){if(this.u&&i.value)this.response.push(i.value);else if(!this.u){var e=i.value?i.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!i.done}))&&(this.response=this.responseText+=e)}i.done?ra(this):xa(this),3==this.readyState&&Ar(this)}},de.Za=function(i){this.g&&(this.response=this.responseText=i,ra(this))},de.Ya=function(i){this.g&&(this.response=i,ra(this))},de.ka=function(){this.g&&ra(this)},de.setRequestHeader=function(i,e){this.v.append(i,e)},de.getResponseHeader=function(i){return this.h&&this.h.get(i.toLowerCase())||""},de.getAllResponseHeaders=function(){if(!this.h)return"";const i=[],e=this.h.entries();for(var n=e.next();!n.done;)i.push((n=n.value)[0]+": "+n[1]),n=e.next();return i.join("\r\n")},Object.defineProperty(Ma.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(i){this.m=i?"include":"same-origin"}});var q=wt.JSON.parse;function K(i){Jt.call(this),this.headers=new Map,this.u=i||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=j,this.L=this.M=!1}Fe(K,Jt);var j="",oe=/^https?$/i,Ae=["POST","PUT"];function Sn(i,e){i.h=!1,i.g&&(i.l=!0,i.g.abort(),i.l=!1),i.j=e,i.m=5,Gi(i),vo(i)}function Gi(i){i.F||(i.F=!0,hn(i,"complete"),hn(i,"error"))}function vs(i){if(i.h&&typeof Ot<"u"&&(!i.C[1]||4!=es(i)||2!=i.da()))if(i.v&&4==es(i))qa(i.La,0,i);else if(hn(i,"readystatechange"),4==es(i)){i.h=!1;try{const I=i.da();e:switch(I){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var n;if(!(n=e)){var o;if(o=0===I){var u=String(i.I).match(eo)[1]||null;!u&&wt.self&&wt.self.location&&(u=wt.self.location.protocol.slice(0,-1)),o=!oe.test(u?u.toLowerCase():"")}n=o}if(n)hn(i,"complete"),hn(i,"success");else{i.m=6;try{var p=2<es(i)?i.g.statusText:""}catch{p=""}i.j=p+" ["+i.da()+"]",Gi(i)}}finally{vo(i)}}}function vo(i,e){if(i.g){Fo(i);const n=i.g,o=i.C[0]?()=>{}:null;i.g=null,i.C=null,e||hn(i,"ready");try{n.onreadystatechange=o}catch{}}}function Fo(i){i.g&&i.L&&(i.g.ontimeout=null),i.A&&(wt.clearTimeout(i.A),i.A=null)}function es(i){return i.g?i.g.readyState:0}function is(i){try{if(!i.g)return null;if("response"in i.g)return i.g.response;switch(i.K){case j:case"text":return i.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in i.g)return i.g.mozResponseArrayBuffer}return null}catch{return null}}function Ll(i){let e="";return Vi(i,function(n,o){e+=o,e+=":",e+=n,e+="\r\n"}),e}function Ci(i,e,n){e:{for(o in n){var o=!1;break e}o=!0}o||(n=Ll(n),"string"==typeof i?null!=n&&encodeURIComponent(String(n)):ar(i,e,n))}function Vs(i,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[i]||e}function Is(i){this.Ga=0,this.j=[],this.l=new Zo,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=Vs("failFast",!1,i),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=Vs("baseRetryDelayMs",5e3,i),this.hb=Vs("retryDelaySeedMs",1e4,i),this.eb=Vs("forwardChannelMaxRetries",2,i),this.xa=Vs("forwardChannelRequestTimeoutMs",2e4,i),this.va=i&&i.xmlHttpFactory||void 0,this.Ha=i&&i.useFetchStreams||!1,this.L=void 0,this.J=i&&i.supportsCrossDomainXhr||!1,this.K="",this.i=new _l(i&&i.concurrentRequestLimit),this.Ja=new ta,this.P=i&&i.fastHandshake||!1,this.O=i&&i.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=i&&i.bc||!1,i&&i.Ea&&this.l.Ea(),i&&i.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&i&&i.detectBufferingProxy||!1,this.qa=void 0,i&&i.longPollingTimeout&&0<i.longPollingTimeout&&(this.qa=i.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}function ma(i){if(Vo(i),3==i.H){var e=i.W++,n=yi(i.I);if(ar(n,"SID",i.K),ar(n,"RID",e),ar(n,"TYPE","terminate"),Bo(i,n),(e=new Yn(i,i.l,e)).L=2,e.v=Oo(yi(n)),n=!1,wt.navigator&&wt.navigator.sendBeacon)try{n=wt.navigator.sendBeacon(e.v.toString(),"")}catch{}!n&&wt.Image&&((new Image).src=e.v,n=!0),n||(e.g=Ul(e.l,null),e.g.ha(e.v)),e.G=Date.now(),xr(e)}hh(i)}function hu(i){i.g&&(ka(i),i.g.cancel(),i.g=null)}function Vo(i){hu(i),i.u&&(wt.clearTimeout(i.u),i.u=null),oo(i),i.i.cancel(),i.m&&("number"==typeof i.m&&wt.clearTimeout(i.m),i.m=null)}function el(i){if(!Xi(i.i)&&!i.m){i.m=!0;var e=i.Na;qt||Mr(),tr||(qt(),tr=!0),ui.add(e,i),i.C=0}}function Uu(i,e){var n;n=e?e.m:i.W++;const o=yi(i.I);ar(o,"SID",i.K),ar(o,"RID",n),ar(o,"AID",i.V),Bo(i,o),i.o&&i.s&&Ci(o,i.o,i.s),n=new Yn(i,i.l,n,i.C+1),null===i.o&&(n.I=i.s),e&&(i.j=e.F.concat(i.j)),e=Vl(i,n,1e3),n.setTimeout(Math.round(.5*i.xa)+Math.round(.5*i.xa*Math.random())),Ur(i.i,n),rs(n,o,e)}function Bo(i,e){i.na&&Vi(i.na,function(n,o){ar(e,o,n)}),i.h&&rr({},function(n,o){ar(e,o,n)})}function Vl(i,e,n){n=Math.min(i.j.length,n);var o=i.h?Se(i.h.Va,i.h,i):null;e:{var u=i.j;let p=-1;for(;;){const I=["count="+n];-1==p?0<n?(p=u[0].g,I.push("ofs="+p)):p=0:I.push("ofs="+p);let M=!0;for(let U=0;U<n;U++){let W=u[U].g;const ee=u[U].map;if(W-=p,0>W)p=Math.max(0,u[U].g-100),M=!1;else try{Bu(ee,I,"req"+W+"_")}catch{o&&o(ee)}}if(M){o=I.join("&");break e}}}return i=i.j.splice(0,n),e.F=i,o}function tl(i){if(!i.g&&!i.u){i.ba=1;var e=i.Ma;qt||Mr(),tr||(qt(),tr=!0),ui.add(e,i),i.A=0}}function Bl(i){return!(i.g||i.u||3<=i.A||(i.ba++,i.u=Ki(Se(i.Ma,i),Dc(i,i.A)),i.A++,0))}function ka(i){null!=i.B&&(wt.clearTimeout(i.B),i.B=null)}function vl(i){i.g=new Yn(i,i.l,"rpc",i.ba),null===i.o&&(i.g.I=i.s),i.g.O=0;var e=yi(i.wa);ar(e,"RID","rpc"),ar(e,"SID",i.K),ar(e,"AID",i.V),ar(e,"CI",i.G?"0":"1"),!i.G&&i.qa&&ar(e,"TO",i.qa),ar(e,"TYPE","xmlhttp"),Bo(i,e),i.o&&i.s&&Ci(e,i.o,i.s),i.L&&i.g.setTimeout(i.L);var n=i.g;i=i.pa,n.L=1,n.v=Oo(yi(e)),n.s=null,n.S=!0,Yi(n,i)}function oo(i){null!=i.v&&(wt.clearTimeout(i.v),i.v=null)}function Il(i,e){var n=null;if(i.g==e){oo(i),ka(i),i.g=null;var o=2}else{if(!qs(i.i,e))return;n=e.F,Ls(i.i,e),o=1}if(0!=i.H)if(e.i)if(1==o){n=e.s?e.s.length:0,e=Date.now()-e.G;var u=i.C;hn(o=zr(),new du(o,n)),el(i)}else tl(i);else if(3==(u=e.o)||0==u&&0<e.ca||!(1==o&&function Io(i,e){return!(Ns(i.i)>=i.i.j-(i.m?1:0)||(i.m?(i.j=e.F.concat(i.j),0):1==i.H||2==i.H||i.C>=(i.cb?0:i.eb)||(i.m=Ki(Se(i.Na,i,e),Dc(i,i.C)),i.C++,0)))}(i,e)||2==o&&Bl(i)))switch(n&&0<n.length&&(e=i.i,e.i=e.i.concat(n)),u){case 1:Uo(i,5);break;case 4:Uo(i,10);break;case 3:Uo(i,6);break;default:Uo(i,2)}}function Dc(i,e){let n=i.ab+Math.floor(Math.random()*i.hb);return i.isActive()||(n*=2),n*e}function Uo(i,e){if(i.l.info("Error code "+e),2==e){var n=null;i.h&&(n=null);var o=Se(i.pb,i);n||(n=new En("//www.google.com/images/cleardot.gif"),wt.location&&"http"==wt.location.protocol||so(n,"https"),Oo(n)),function na(i,e){const n=new Zo;if(wt.Image){const o=new Image;o.onload=Ke(Mo,n,o,"TestLoadImage: loaded",!0,e),o.onerror=Ke(Mo,n,o,"TestLoadImage: error",!1,e),o.onabort=Ke(Mo,n,o,"TestLoadImage: abort",!1,e),o.ontimeout=Ke(Mo,n,o,"TestLoadImage: timeout",!1,e),wt.setTimeout(function(){o.ontimeout&&o.ontimeout()},1e4),o.src=i}else e(!1)}(n.toString(),o)}else di(2);i.H=0,i.h&&i.h.za(e),hh(i),Vo(i)}function hh(i){if(i.H=0,i.ma=[],i.h){const e=yl(i.i);(0!=e.length||0!=i.j.length)&&(hr(i.ma,e),hr(i.ma,i.j),i.i.i.length=0,Rt(i.j),i.j.length=0),i.h.ya()}}function Cc(i,e,n){var o=n instanceof En?yi(n):new En(n);if(""!=o.g)e&&(o.g=e+"."+o.g),Qi(o,o.m);else{var u=wt.location;o=u.protocol,e=e?e+"."+u.hostname:u.hostname,u=+u.port;var p=new En(null);o&&so(p,o),e&&(p.g=e),u&&Qi(p,u),n&&(p.l=n),o=p}return e=i.Da,(n=i.F)&&e&&ar(o,n,e),ar(o,"VER",i.ra),Bo(i,o),o}function Ul(i,e,n){if(e&&!i.J)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new K(n&&i.Ha&&!i.va?new xo({ob:!0}):i.va)).Oa(i.J),e}function Ac(){}function nl(){if(ze&&!(10<=Number(Hn)))throw Error("Environmental error: no available transport.")}function ao(i,e){Jt.call(this),this.g=new Is(e),this.l=i,this.h=e&&e.messageUrlParams||null,i=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(i?i["X-Client-Protocol"]="webchannel":i={"X-Client-Protocol":"webchannel"}),this.g.s=i,i=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(i?i["X-WebChannel-Content-Type"]=e.messageContentType:i={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(i?i["X-WebChannel-Client-Profile"]=e.Ca:i={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=i,(i=e&&e.cc)&&!Yt(i)&&(this.g.o=i),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Yt(e)&&(this.g.F=e,null!==(i=this.h)&&e in i&&e in(i=this.h)&&delete i[e]),this.j=new lo(this)}function Fa(i){ea.call(this),i.__headers__&&(this.headers=i.__headers__,this.statusCode=i.__status__,delete i.__headers__,delete i.__status__);var e=i.__sm__;if(e){e:{for(const n in e){i=n;break e}i=void 0}(this.i=i)&&(i=this.i,e=null!==e&&i in e?e[i]:void 0),this.data=e}else this.data=i}function Sc(){_o.call(this),this.status=1}function lo(i){this.g=i}function ss(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function fu(i,e,n){n||(n=0);var o=Array(16);if("string"==typeof e)for(var u=0;16>u;++u)o[u]=e.charCodeAt(n++)|e.charCodeAt(n++)<<8|e.charCodeAt(n++)<<16|e.charCodeAt(n++)<<24;else for(u=0;16>u;++u)o[u]=e[n++]|e[n++]<<8|e[n++]<<16|e[n++]<<24;var p=i.g[3],I=(e=i.g[0])+(p^(n=i.g[1])&((u=i.g[2])^p))+o[0]+3614090360&4294967295;I=(n=(u=(p=(e=(n=(u=(p=(e=(n=(u=(p=(e=(n=(u=(p=(e=(n=(u=(p=(e=(n=(u=(p=(e=(n=(u=(p=(e=(n=(u=(p=(e=(n=(u=(p=(e=(n=(u=(p=(e=(n=(u=(p=(e=(n=(u=(p=(e=(n=(u=(p=(e=(n=(u=(p=(e=(n=(u=(p=(e=n+(I<<7&4294967295|I>>>25))+((I=p+(u^e&(n^u))+o[1]+3905402710&4294967295)<<12&4294967295|I>>>20))+((I=u+(n^p&(e^n))+o[2]+606105819&4294967295)<<17&4294967295|I>>>15))+((I=n+(e^u&(p^e))+o[3]+3250441966&4294967295)<<22&4294967295|I>>>10))+((I=e+(p^n&(u^p))+o[4]+4118548399&4294967295)<<7&4294967295|I>>>25))+((I=p+(u^e&(n^u))+o[5]+1200080426&4294967295)<<12&4294967295|I>>>20))+((I=u+(n^p&(e^n))+o[6]+2821735955&4294967295)<<17&4294967295|I>>>15))+((I=n+(e^u&(p^e))+o[7]+4249261313&4294967295)<<22&4294967295|I>>>10))+((I=e+(p^n&(u^p))+o[8]+1770035416&4294967295)<<7&4294967295|I>>>25))+((I=p+(u^e&(n^u))+o[9]+2336552879&4294967295)<<12&4294967295|I>>>20))+((I=u+(n^p&(e^n))+o[10]+4294925233&4294967295)<<17&4294967295|I>>>15))+((I=n+(e^u&(p^e))+o[11]+2304563134&4294967295)<<22&4294967295|I>>>10))+((I=e+(p^n&(u^p))+o[12]+1804603682&4294967295)<<7&4294967295|I>>>25))+((I=p+(u^e&(n^u))+o[13]+4254626195&4294967295)<<12&4294967295|I>>>20))+((I=u+(n^p&(e^n))+o[14]+2792965006&4294967295)<<17&4294967295|I>>>15))+((I=n+(e^u&(p^e))+o[15]+1236535329&4294967295)<<22&4294967295|I>>>10))+((I=e+(u^p&(n^u))+o[1]+4129170786&4294967295)<<5&4294967295|I>>>27))+((I=p+(n^u&(e^n))+o[6]+3225465664&4294967295)<<9&4294967295|I>>>23))+((I=u+(e^n&(p^e))+o[11]+643717713&4294967295)<<14&4294967295|I>>>18))+((I=n+(p^e&(u^p))+o[0]+3921069994&4294967295)<<20&4294967295|I>>>12))+((I=e+(u^p&(n^u))+o[5]+3593408605&4294967295)<<5&4294967295|I>>>27))+((I=p+(n^u&(e^n))+o[10]+38016083&4294967295)<<9&4294967295|I>>>23))+((I=u+(e^n&(p^e))+o[15]+3634488961&4294967295)<<14&4294967295|I>>>18))+((I=n+(p^e&(u^p))+o[4]+3889429448&4294967295)<<20&4294967295|I>>>12))+((I=e+(u^p&(n^u))+o[9]+568446438&4294967295)<<5&4294967295|I>>>27))+((I=p+(n^u&(e^n))+o[14]+3275163606&4294967295)<<9&4294967295|I>>>23))+((I=u+(e^n&(p^e))+o[3]+4107603335&4294967295)<<14&4294967295|I>>>18))+((I=n+(p^e&(u^p))+o[8]+1163531501&4294967295)<<20&4294967295|I>>>12))+((I=e+(u^p&(n^u))+o[13]+2850285829&4294967295)<<5&4294967295|I>>>27))+((I=p+(n^u&(e^n))+o[2]+4243563512&4294967295)<<9&4294967295|I>>>23))+((I=u+(e^n&(p^e))+o[7]+1735328473&4294967295)<<14&4294967295|I>>>18))+((I=n+(p^e&(u^p))+o[12]+2368359562&4294967295)<<20&4294967295|I>>>12))+((I=e+(n^u^p)+o[5]+4294588738&4294967295)<<4&4294967295|I>>>28))+((I=p+(e^n^u)+o[8]+2272392833&4294967295)<<11&4294967295|I>>>21))+((I=u+(p^e^n)+o[11]+1839030562&4294967295)<<16&4294967295|I>>>16))+((I=n+(u^p^e)+o[14]+4259657740&4294967295)<<23&4294967295|I>>>9))+((I=e+(n^u^p)+o[1]+2763975236&4294967295)<<4&4294967295|I>>>28))+((I=p+(e^n^u)+o[4]+1272893353&4294967295)<<11&4294967295|I>>>21))+((I=u+(p^e^n)+o[7]+4139469664&4294967295)<<16&4294967295|I>>>16))+((I=n+(u^p^e)+o[10]+3200236656&4294967295)<<23&4294967295|I>>>9))+((I=e+(n^u^p)+o[13]+681279174&4294967295)<<4&4294967295|I>>>28))+((I=p+(e^n^u)+o[0]+3936430074&4294967295)<<11&4294967295|I>>>21))+((I=u+(p^e^n)+o[3]+3572445317&4294967295)<<16&4294967295|I>>>16))+((I=n+(u^p^e)+o[6]+76029189&4294967295)<<23&4294967295|I>>>9))+((I=e+(n^u^p)+o[9]+3654602809&4294967295)<<4&4294967295|I>>>28))+((I=p+(e^n^u)+o[12]+3873151461&4294967295)<<11&4294967295|I>>>21))+((I=u+(p^e^n)+o[15]+530742520&4294967295)<<16&4294967295|I>>>16))+((I=n+(u^p^e)+o[2]+3299628645&4294967295)<<23&4294967295|I>>>9))+((I=e+(u^(n|~p))+o[0]+4096336452&4294967295)<<6&4294967295|I>>>26))+((I=p+(n^(e|~u))+o[7]+1126891415&4294967295)<<10&4294967295|I>>>22))+((I=u+(e^(p|~n))+o[14]+2878612391&4294967295)<<15&4294967295|I>>>17))+((I=n+(p^(u|~e))+o[5]+4237533241&4294967295)<<21&4294967295|I>>>11))+((I=e+(u^(n|~p))+o[12]+1700485571&4294967295)<<6&4294967295|I>>>26))+((I=p+(n^(e|~u))+o[3]+2399980690&4294967295)<<10&4294967295|I>>>22))+((I=u+(e^(p|~n))+o[10]+4293915773&4294967295)<<15&4294967295|I>>>17))+((I=n+(p^(u|~e))+o[1]+2240044497&4294967295)<<21&4294967295|I>>>11))+((I=e+(u^(n|~p))+o[8]+1873313359&4294967295)<<6&4294967295|I>>>26))+((I=p+(n^(e|~u))+o[15]+4264355552&4294967295)<<10&4294967295|I>>>22))+((I=u+(e^(p|~n))+o[6]+2734768916&4294967295)<<15&4294967295|I>>>17))+((I=n+(p^(u|~e))+o[13]+1309151649&4294967295)<<21&4294967295|I>>>11))+((p=(e=n+((I=e+(u^(n|~p))+o[4]+4149444226&4294967295)<<6&4294967295|I>>>26))+((I=p+(n^(e|~u))+o[11]+3174756917&4294967295)<<10&4294967295|I>>>22))^((u=p+((I=u+(e^(p|~n))+o[2]+718787259&4294967295)<<15&4294967295|I>>>17))|~e))+o[9]+3951481745&4294967295,i.g[0]=i.g[0]+e&4294967295,i.g[1]=i.g[1]+(u+(I<<21&4294967295|I>>>11))&4294967295,i.g[2]=i.g[2]+u&4294967295,i.g[3]=i.g[3]+p&4294967295}function O(i,e){this.h=e;for(var n=[],o=!0,u=i.length-1;0<=u;u--){var p=0|i[u];o&&p==e||(n[u]=p,o=!1)}this.g=n}(de=K.prototype).Oa=function(i){this.M=i},de.ha=function(i,e,n,o){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+i);e=e?e.toUpperCase():"GET",this.I=i,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():Oa.g(),this.C=function Po(i){return i.h||(i.h=i.i())}(this.u?this.u:Oa),this.g.onreadystatechange=Se(this.La,this);try{this.G=!0,this.g.open(e,String(i),!0),this.G=!1}catch(p){return void Sn(this,p)}if(i=n||"",n=new Map(this.headers),o)if(Object.getPrototypeOf(o)===Object.prototype)for(var u in o)n.set(u,o[u]);else{if("function"!=typeof o.keys||"function"!=typeof o.get)throw Error("Unknown input type for opt_headers: "+String(o));for(const p of o.keys())n.set(p,o.get(p))}o=Array.from(n.keys()).find(p=>"content-type"==p.toLowerCase()),u=wt.FormData&&i instanceof wt.FormData,!(0<=Ft(Ae,e))||o||u||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[p,I]of n)this.g.setRequestHeader(p,I);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{Fo(this),0<this.B&&((this.L=function nn(i){return ze&&"number"==typeof i.timeout&&void 0!==i.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Se(this.ua,this)):this.A=qa(this.ua,this.B,this)),this.v=!0,this.g.send(i),this.v=!1}catch(p){Sn(this,p)}},de.ua=function(){typeof Ot<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,hn(this,"timeout"),this.abort(8))},de.abort=function(i){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=i||7,hn(this,"complete"),hn(this,"abort"),vo(this))},de.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),vo(this,!0)),K.$.N.call(this)},de.La=function(){this.s||(this.G||this.v||this.l?vs(this):this.kb())},de.kb=function(){vs(this)},de.isActive=function(){return!!this.g},de.da=function(){try{return 2<es(this)?this.g.status:-1}catch{return-1}},de.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}},de.Wa=function(i){if(this.g){var e=this.g.responseText;return i&&0==e.indexOf(i)&&(e=e.substring(i.length)),q(e)}},de.Ia=function(){return this.m},de.Sa=function(){return"string"==typeof this.j?this.j:String(this.j)},(de=Is.prototype).ra=8,de.H=1,de.Na=function(i){if(this.m)if(this.m=null,1==this.H){if(!i){this.W=Math.floor(1e5*Math.random()),i=this.W++;const u=new Yn(this,this.l,i);let p=this.s;if(this.U&&(p?(p=ts(p),dr(p,this.U)):p=this.U),null!==this.o||this.O||(u.I=p,p=null),this.P)e:{for(var e=0,n=0;n<this.j.length;n++){var o=this.j[n];if(void 0===(o="__data__"in o.map&&"string"==typeof(o=o.map.__data__)?o.length:void 0))break;if(4096<(e+=o)){e=n;break e}if(4096===e||n===this.j.length-1){e=n+1;break e}}e=1e3}else e=1e3;e=Vl(this,u,e),ar(n=yi(this.I),"RID",i),ar(n,"CVER",22),this.F&&ar(n,"X-HTTP-Session-Id",this.F),Bo(this,n),p&&(this.O?e="headers="+encodeURIComponent(String(Ll(p)))+"&"+e:this.o&&Ci(n,this.o,p)),Ur(this.i,u),this.bb&&ar(n,"TYPE","init"),this.P?(ar(n,"$req",e),ar(n,"SID","null"),u.aa=!0,rs(u,n,null)):rs(u,n,e),this.H=2}}else 3==this.H&&(i?Uu(this,i):0==this.j.length||Xi(this.i)||Uu(this))},de.Ma=function(){if(this.u=null,vl(this),this.ca&&!(this.M||null==this.g||0>=this.S)){var i=2*this.S;this.l.info("BP detection timer enabled: "+i),this.B=Ki(Se(this.jb,this),i)}},de.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,di(10),hu(this),vl(this))},de.ib=function(){null!=this.v&&(this.v=null,hu(this),Bl(this),di(19))},de.pb=function(i){i?(this.l.info("Successfully pinged google.com"),di(2)):(this.l.info("Failed to ping google.com"),di(1))},de.isActive=function(){return!!this.h&&this.h.isActive(this)},(de=Ac.prototype).Ba=function(){},de.Aa=function(){},de.za=function(){},de.ya=function(){},de.isActive=function(){return!0},de.Va=function(){},nl.prototype.g=function(i,e){return new ao(i,e)},Fe(ao,Jt),ao.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var i=this.g,e=this.l,n=this.h||void 0;di(0),i.Y=e,i.na=n||{},i.G=i.aa,i.I=Cc(i,null,i.Y),el(i)},ao.prototype.close=function(){ma(this.g)},ao.prototype.u=function(i){var e=this.g;if("string"==typeof i){var n={};n.__data__=i,i=n}else this.v&&((n={}).__data__=li(i),i=n);e.j.push(new class{constructor(i,e){this.g=i,this.map=e}}(e.fb++,i)),3==e.H&&el(e)},ao.prototype.N=function(){this.g.h=null,delete this.j,ma(this.g),delete this.g,ao.$.N.call(this)},Fe(Fa,ea),Fe(Sc,_o),Fe(lo,Ac),lo.prototype.Ba=function(){hn(this.g,"a")},lo.prototype.Aa=function(i){hn(this.g,new Fa(i))},lo.prototype.za=function(i){hn(this.g,new Sc)},lo.prototype.ya=function(){hn(this.g,"b")},Fe(ss,function uf(){this.blockSize=-1}),ss.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},ss.prototype.j=function(i,e){void 0===e&&(e=i.length);for(var n=e-this.blockSize,o=this.m,u=this.h,p=0;p<e;){if(0==u)for(;p<=n;)fu(this,i,p),p+=this.blockSize;if("string"==typeof i){for(;p<e;)if(o[u++]=i.charCodeAt(p++),u==this.blockSize){fu(this,o),u=0;break}}else for(;p<e;)if(o[u++]=i[p++],u==this.blockSize){fu(this,o),u=0;break}}this.h=u,this.i+=e},ss.prototype.l=function(){var i=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);i[0]=128;for(var e=1;e<i.length-8;++e)i[e]=0;var n=8*this.i;for(e=i.length-8;e<i.length;++e)i[e]=255&n,n/=256;for(this.j(i),i=Array(16),e=n=0;4>e;++e)for(var o=0;32>o;o+=8)i[n++]=this.g[e]>>>o&255;return i};var J={};function H(i){return-128<=i&&128>i?function Ee(i,e){var n=J;return Object.prototype.hasOwnProperty.call(n,i)?n[i]:n[i]=e(i)}(i,function(e){return new O([0|e],0>e?-1:0)}):new O([0|i],0>i?-1:0)}function Y(i){if(isNaN(i)||!isFinite(i))return ct;if(0>i)return bn(Y(-i));for(var e=[],n=1,o=0;i>=n;o++)e[o]=i/n|0,n*=et;return new O(e,0)}var et=4294967296,ct=H(0),dn=H(1),ir=H(16777216);function yr(i){if(0!=i.h)return!1;for(var e=0;e<i.g.length;e++)if(0!=i.g[e])return!1;return!0}function Xn(i){return-1==i.h}function bn(i){for(var e=i.g.length,n=[],o=0;o<e;o++)n[o]=~i.g[o];return new O(n,~i.h).add(dn)}function oi(i,e){return i.add(bn(e))}function kr(i,e){for(;(65535&i[e])!=i[e];)i[e+1]+=i[e]>>>16,i[e]&=65535,e++}function Ai(i,e){this.g=i,this.h=e}function Eo(i,e){if(yr(e))throw Error("division by zero");if(yr(i))return new Ai(ct,ct);if(Xn(i))return e=Eo(bn(i),e),new Ai(bn(e.g),bn(e.h));if(Xn(e))return e=Eo(i,bn(e)),new Ai(bn(e.g),e.h);if(30<i.g.length){if(Xn(i)||Xn(e))throw Error("slowDivide_ only works with positive integers.");for(var n=dn,o=e;0>=o.X(i);)n=ia(n),o=ia(o);var u=sa(n,1),p=sa(o,1);for(o=sa(o,2),n=sa(n,2);!yr(o);){var I=p.add(o);0>=I.X(i)&&(u=u.add(n),p=I),o=sa(o,1),n=sa(n,1)}return e=oi(i,u.R(e)),new Ai(u,e)}for(u=ct;0<=i.X(e);){for(n=Math.max(1,Math.floor(i.ea()/e.ea())),o=48>=(o=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,o-48),I=(p=Y(n)).R(e);Xn(I)||0<I.X(i);)I=(p=Y(n-=o)).R(e);yr(p)&&(p=dn),u=u.add(p),i=oi(i,I)}return new Ai(u,i)}function ia(i){for(var e=i.g.length+1,n=[],o=0;o<e;o++)n[o]=i.D(o)<<1|i.D(o-1)>>>31;return new O(n,i.h)}function sa(i,e){var n=e>>5;e%=32;for(var o=i.g.length-n,u=[],p=0;p<o;p++)u[p]=0<e?i.D(p+n)>>>e|i.D(p+n+1)<<32-e:i.D(p+n);return new O(u,i.h)}(de=O.prototype).ea=function(){if(Xn(this))return-bn(this).ea();for(var i=0,e=1,n=0;n<this.g.length;n++){var o=this.D(n);i+=(0<=o?o:et+o)*e,e*=et}return i},de.toString=function(i){if(2>(i=i||10)||36<i)throw Error("radix out of range: "+i);if(yr(this))return"0";if(Xn(this))return"-"+bn(this).toString(i);for(var e=Y(Math.pow(i,6)),n=this,o="";;){var u=Eo(n,e).g,p=((0<(n=oi(n,u.R(e))).g.length?n.g[0]:n.h)>>>0).toString(i);if(yr(n=u))return p+o;for(;6>p.length;)p="0"+p;o=p+o}},de.D=function(i){return 0>i?0:i<this.g.length?this.g[i]:this.h},de.X=function(i){return Xn(i=oi(this,i))?-1:yr(i)?0:1},de.abs=function(){return Xn(this)?bn(this):this},de.add=function(i){for(var e=Math.max(this.g.length,i.g.length),n=[],o=0,u=0;u<=e;u++){var p=o+(65535&this.D(u))+(65535&i.D(u)),I=(p>>>16)+(this.D(u)>>>16)+(i.D(u)>>>16);o=I>>>16,n[u]=(I&=65535)<<16|(p&=65535)}return new O(n,-2147483648&n[n.length-1]?-1:0)},de.R=function(i){if(yr(this)||yr(i))return ct;if(Xn(this))return Xn(i)?bn(this).R(bn(i)):bn(bn(this).R(i));if(Xn(i))return bn(this.R(bn(i)));if(0>this.X(ir)&&0>i.X(ir))return Y(this.ea()*i.ea());for(var e=this.g.length+i.g.length,n=[],o=0;o<2*e;o++)n[o]=0;for(o=0;o<this.g.length;o++)for(var u=0;u<i.g.length;u++){var p=this.D(o)>>>16,I=65535&this.D(o),M=i.D(u)>>>16,U=65535&i.D(u);n[2*o+2*u]+=I*U,kr(n,2*o+2*u),n[2*o+2*u+1]+=p*U,kr(n,2*o+2*u+1),n[2*o+2*u+1]+=I*M,kr(n,2*o+2*u+1),n[2*o+2*u+2]+=p*M,kr(n,2*o+2*u+2)}for(o=0;o<e;o++)n[o]=n[2*o+1]<<16|n[2*o];for(o=e;o<2*e;o++)n[o]=0;return new O(n,0)},de.gb=function(i){return Eo(this,i).h},de.and=function(i){for(var e=Math.max(this.g.length,i.g.length),n=[],o=0;o<e;o++)n[o]=this.D(o)&i.D(o);return new O(n,this.h&i.h)},de.or=function(i){for(var e=Math.max(this.g.length,i.g.length),n=[],o=0;o<e;o++)n[o]=this.D(o)|i.D(o);return new O(n,this.h|i.h)},de.xor=function(i){for(var e=Math.max(this.g.length,i.g.length),n=[],o=0;o<e;o++)n[o]=this.D(o)^i.D(o);return new O(n,this.h^i.h)},nl.prototype.createWebChannel=nl.prototype.g,ao.prototype.send=ao.prototype.u,ao.prototype.open=ao.prototype.m,ao.prototype.close=ao.prototype.close,Xo.NO_ERROR=0,Xo.TIMEOUT=8,Xo.HTTP_ERROR=6,Za.COMPLETE="complete",Ja.EventType=zs,zs.OPEN="a",zs.CLOSE="b",zs.ERROR="c",zs.MESSAGE="d",Jt.prototype.listen=Jt.prototype.O,K.prototype.listenOnce=K.prototype.P,K.prototype.getLastError=K.prototype.Sa,K.prototype.getLastErrorCode=K.prototype.Ia,K.prototype.getStatus=K.prototype.da,K.prototype.getResponseJson=K.prototype.Wa,K.prototype.getResponseText=K.prototype.ja,K.prototype.send=K.prototype.ha,K.prototype.setWithCredentials=K.prototype.Oa,ss.prototype.digest=ss.prototype.l,ss.prototype.reset=ss.prototype.reset,ss.prototype.update=ss.prototype.j,O.prototype.add=O.prototype.add,O.prototype.multiply=O.prototype.R,O.prototype.modulo=O.prototype.gb,O.prototype.compare=O.prototype.X,O.prototype.toNumber=O.prototype.ea,O.prototype.toString=O.prototype.toString,O.prototype.getBits=O.prototype.D,O.fromNumber=Y,O.fromString=function ve(i,e){if(0==i.length)throw Error("number format error: empty string");if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if("-"==i.charAt(0))return bn(ve(i.substring(1),e));if(0<=i.indexOf("-"))throw Error('number format error: interior "-" character');for(var n=Y(Math.pow(e,8)),o=ct,u=0;u<i.length;u+=8){var p=Math.min(8,i.length-u),I=parseInt(i.substring(u,u+p),e);8>p?(p=Y(Math.pow(e,p)),o=o.R(p).add(Y(I))):o=(o=o.R(n)).add(Y(I))}return o};var Es=ft.createWebChannelTransport=function(){return new nl},_a=ft.getStatEventTarget=function(){return zr()},ki=ft.ErrorCode=Xo,El=ft.EventType=Za,fh=ft.Event=Tr,ni=ft.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},pu=(ft.FetchXmlHttpFactory=xo,ft.WebChannel=Ja),Ps=ft.XhrIo=K,To=ft.Md5=ss,oa=ft.Integer=O;const Os="@firebase/firestore";class Zr{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Zr.UNAUTHENTICATED=new Zr(null),Zr.GOOGLE_CREDENTIALS=new Zr("google-credentials-uid"),Zr.FIRST_PARTY=new Zr("first-party-uid"),Zr.MOCK_USER=new Zr("mock-user");let Tl="10.5.1";const La=new Pe.Yd("@firebase/firestore");function jl(){return La.logLevel}function Tt(i,...e){if(La.logLevel<=Pe.in.DEBUG){const n=e.map(il);La.debug(`Firestore (${Tl}): ${i}`,...n)}}function Si(i,...e){if(La.logLevel<=Pe.in.ERROR){const n=e.map(il);La.error(`Firestore (${Tl}): ${i}`,...n)}}function bo(i,...e){if(La.logLevel<=Pe.in.WARN){const n=e.map(il);La.warn(`Firestore (${Tl}): ${i}`,...n)}}function il(i){if("string"==typeof i)return i;try{return JSON.stringify(i)}catch{return i}}function on(i="Unexpected state"){const e=`FIRESTORE (${Tl}) INTERNAL ASSERTION FAILED: `+i;throw Si(e),new Error(e)}function vn(i,e){i||on()}function zt(i,e){return i}const nt={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class It extends $e.ZR{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Ks{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}class Va{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class ph{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Zr.UNAUTHENTICATED))}shutdown(){}}class Hl{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class sl{constructor(e){this.t=e,this.currentUser=Zr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){var o=this;let u=this.i;const p=W=>this.i!==u?(u=this.i,n(W)):Promise.resolve();let I=new Ks;this.o=()=>{this.i++,this.currentUser=this.u(),I.resolve(),I=new Ks,e.enqueueRetryable(()=>p(this.currentUser))};const M=()=>{const W=I;e.enqueueRetryable((0,Re.Z)(function*(){yield W.promise,yield p(o.currentUser)}))},U=W=>{Tt("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=W,this.auth.addAuthTokenListener(this.o),M()};this.t.onInit(W=>U(W)),setTimeout(()=>{if(!this.auth){const W=this.t.getImmediate({optional:!0});W?U(W):(Tt("FirebaseAuthCredentialsProvider","Auth not yet detected"),I.resolve(),I=new Ks)}},0),M()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(o=>this.i!==e?(Tt("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):o?(vn("string"==typeof o.accessToken),new Va(o.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return vn(null===e||"string"==typeof e),new Zr(e)}}class Kc{constructor(e,n,o){this.l=e,this.h=n,this.P=o,this.type="FirstParty",this.user=Zr.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class pr{constructor(e,n,o){this.l=e,this.h=n,this.P=o}getToken(){return Promise.resolve(new Kc(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(Zr.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Yc{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Zc{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){const o=p=>{null!=p.error&&Tt("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${p.error.message}`);const I=p.token!==this.R;return this.R=p.token,Tt("FirebaseAppCheckTokenProvider",`Received ${I?"new":"existing"} token.`),I?n(p.token):Promise.resolve()};this.o=p=>{e.enqueueRetryable(()=>o(p))};const u=p=>{Tt("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=p,this.appCheck.addTokenListener(this.o)};this.A.onInit(p=>u(p)),setTimeout(()=>{if(!this.appCheck){const p=this.A.getImmediate({optional:!0});p?u(p):Tt("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(vn("string"==typeof n.token),this.R=n.token,new Yc(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function br(i){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(i);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(n);else for(let o=0;o<i;o++)n[o]=Math.floor(256*Math.random());return n}class Ad{static newId(){const n=62*Math.floor(256/62);let o="";for(;o.length<20;){const u=br(40);for(let p=0;p<u.length;++p)o.length<20&&u[p]<n&&(o+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(u[p]%62))}return o}}function Zn(i,e){return i<e?-1:i>e?1:0}function $i(i,e,n){return i.length===e.length&&i.every((o,u)=>n(o,e[u]))}function Qc(i){return i+"\0"}class jr{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new It(nt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new It(nt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new It(nt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new It(nt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return jr.fromMillis(Date.now())}static fromDate(e){return jr.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),o=Math.floor(1e6*(e-1e3*n));return new jr(n,o)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Zn(this.nanoseconds,e.nanoseconds):Zn(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class un{constructor(e){this.timestamp=e}static fromTimestamp(e){return new un(e)}static min(){return new un(new jr(0,0))}static max(){return new un(new jr(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class wo{constructor(e,n,o){void 0===n?n=0:n>e.length&&on(),void 0===o?o=e.length-n:o>e.length-n&&on(),this.segments=e,this.offset=n,this.len=o}get length(){return this.len}isEqual(e){return 0===wo.comparator(this,e)}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof wo?e.forEach(o=>{n.push(o)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,o=this.limit();n<o;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const o=Math.min(e.length,n.length);for(let u=0;u<o;u++){const p=e.get(u),I=n.get(u);if(p<I)return-1;if(p>I)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class lr extends wo{construct(e,n,o){return new lr(e,n,o)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const n=[];for(const o of e){if(o.indexOf("//")>=0)throw new It(nt.INVALID_ARGUMENT,`Invalid segment (${o}). Paths must not contain // in them.`);n.push(...o.split("/").filter(u=>u.length>0))}return new lr(n)}static emptyPath(){return new lr([])}}const Sd=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class vi extends wo{construct(e,n,o){return new vi(e,n,o)}static isValidIdentifier(e){return Sd.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),vi.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new vi(["__name__"])}static fromServerFormat(e){const n=[];let o="",u=0;const p=()=>{if(0===o.length)throw new It(nt.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(o),o=""};let I=!1;for(;u<e.length;){const M=e[u];if("\\"===M){if(u+1===e.length)throw new It(nt.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const U=e[u+1];if("\\"!==U&&"."!==U&&"`"!==U)throw new It(nt.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);o+=U,u+=2}else"`"===M?(I=!I,u++):"."!==M||I?(o+=M,u++):(p(),u++)}if(p(),I)throw new It(nt.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new vi(n)}static emptyPath(){return new vi([])}}class Zt{constructor(e){this.path=e}static fromPath(e){return new Zt(lr.fromString(e))}static fromName(e){return new Zt(lr.fromString(e).popFirst(5))}static empty(){return new Zt(lr.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===lr.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,n){return lr.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Zt(new lr(e.slice()))}}class Ri{constructor(e,n,o,u){this.indexId=e,this.collectionGroup=n,this.fields=o,this.indexState=u}}function ya(i){return i.fields.find(e=>2===e.kind)}function aa(i){return i.fields.filter(e=>2!==e.kind)}Ri.UNKNOWN_ID=-1;class uo{constructor(e,n){this.fieldPath=e,this.kind=n}}class ju{constructor(e,n){this.sequenceNumber=e,this.offset=n}static empty(){return new ju(0,Do.min())}}function $l(i,e){const n=i.toTimestamp().seconds,o=i.toTimestamp().nanoseconds+1,u=un.fromTimestamp(1e9===o?new jr(n+1,0):new jr(n,o));return new Do(u,Zt.empty(),e)}function gh(i){return new Do(i.readTime,i.key,-1)}class Do{constructor(e,n,o){this.readTime=e,this.documentKey=n,this.largestBatchId=o}static min(){return new Do(un.min(),Zt.empty(),-1)}static max(){return new Do(un.max(),Zt.empty(),-1)}}function Hu(i,e){let n=i.readTime.compareTo(e.readTime);return 0!==n?n:(n=Zt.comparator(i.documentKey,e.documentKey),0!==n?n:Zn(i.largestBatchId,e.largestBatchId))}const R="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class k{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function A(i){return L.apply(this,arguments)}function L(){return L=(0,Re.Z)(function*(i){if(i.code!==nt.FAILED_PRECONDITION||i.message!==R)throw i;Tt("LocalStore","Unexpectedly lost primary lease")}),L.apply(this,arguments)}class V{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&on(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new V((o,u)=>{this.nextCallback=p=>{this.wrapSuccess(e,p).next(o,u)},this.catchCallback=p=>{this.wrapFailure(n,p).next(o,u)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof V?n:V.resolve(n)}catch(n){return V.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):V.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):V.reject(n)}static resolve(e){return new V((n,o)=>{n(e)})}static reject(e){return new V((n,o)=>{o(e)})}static waitFor(e){return new V((n,o)=>{let u=0,p=0,I=!1;e.forEach(M=>{++u,M.next(()=>{++p,I&&p===u&&n()},U=>o(U))}),I=!0,p===u&&n()})}static or(e){let n=V.resolve(!1);for(const o of e)n=n.next(u=>u?V.resolve(u):o());return n}static forEach(e,n){const o=[];return e.forEach((u,p)=>{o.push(n.call(this,u,p))}),this.waitFor(o)}static mapArray(e,n){return new V((o,u)=>{const p=e.length,I=new Array(p);let M=0;for(let U=0;U<p;U++){const W=U;n(e[W]).next(ee=>{I[W]=ee,++M,M===p&&o(I)},ee=>u(ee))}})}static doWhile(e,n){return new V((o,u)=>{const p=()=>{!0===e()?n().next(()=>{p()},u):o()};p()})}}class te{constructor(e,n){this.action=e,this.transaction=n,this.aborted=!1,this.V=new Ks,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{n.error?this.V.reject(new Ze(e,n.error)):this.V.resolve()},this.transaction.onerror=o=>{const u=zi(o.target.error);this.V.reject(new Ze(e,u))}}static open(e,n,o,u){try{return new te(n,e.transaction(u,o))}catch(p){throw new Ze(n,p)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(Tt("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const n=this.transaction.objectStore(e);return new Qn(n)}}class he{constructor(e,n,o){this.name=e,this.version=n,this.p=o,12.2===he.S((0,$e.z$)())&&Si("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Tt("SimpleDb","Removing database:",e),Wr(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!(0,$e.hl)())return!1;if(he.C())return!0;const e=(0,$e.z$)(),n=he.S(e),o=0<n&&n<10,u=he.v(e),p=0<u&&u<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||o||p)}static C(){var e;return typeof process<"u"&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.F)}static M(e,n){return e.store(n)}static S(e){const n=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),o=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(o)}static v(e){const n=e.match(/Android ([\d.]+)/i),o=n?n[1].split(".").slice(0,2).join("."):"-1";return Number(o)}O(e){var n=this;return(0,Re.Z)(function*(){return n.db||(Tt("SimpleDb","Opening database:",n.name),n.db=yield new Promise((o,u)=>{const p=indexedDB.open(n.name,n.version);p.onsuccess=I=>{o(I.target.result)},p.onblocked=()=>{u(new Ze(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},p.onerror=I=>{const M=I.target.error;u("VersionError"===M.name?new It(nt.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===M.name?new It(nt.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+M):new Ze(e,M))},p.onupgradeneeded=I=>{Tt("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',I.oldVersion),n.p.N(I.target.result,p.transaction,I.oldVersion,n.version).next(()=>{Tt("SimpleDb","Database upgrade to version "+n.version+" complete")})}})),n.B&&(n.db.onversionchange=o=>n.B(o)),n.db})()}L(e){this.B=e,this.db&&(this.db.onversionchange=n=>e(n))}runTransaction(e,n,o,u){var p=this;return(0,Re.Z)(function*(){const I="readonly"===n;let M=0;for(;;){++M;try{p.db=yield p.O(e);const U=te.open(p.db,e,I?"readonly":"readwrite",o),W=u(U).next(ee=>(U.g(),ee)).catch(ee=>(U.abort(ee),V.reject(ee))).toPromise();return W.catch(()=>{}),yield U.m,W}catch(U){const W=U,ee="FirebaseError"!==W.name&&M<3;if(Tt("SimpleDb","Transaction failed with error:",W.message,"Retrying:",ee),p.close(),!ee)return Promise.reject(W)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class Qe{constructor(e){this.k=e,this.q=!1,this.K=null}get isDone(){return this.q}get $(){return this.K}set cursor(e){this.k=e}done(){this.q=!0}U(e){this.K=e}delete(){return Wr(this.k.delete())}}class Ze extends It{constructor(e,n){super(nt.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${n}`),this.name="IndexedDbTransactionError"}}function Ht(i){return"IndexedDbTransactionError"===i.name}class Qn{constructor(e){this.store=e}put(e,n){let o;return void 0!==n?(Tt("SimpleDb","PUT",this.store.name,e,n),o=this.store.put(n,e)):(Tt("SimpleDb","PUT",this.store.name,"<auto-key>",e),o=this.store.put(e)),Wr(o)}add(e){return Tt("SimpleDb","ADD",this.store.name,e,e),Wr(this.store.add(e))}get(e){return Wr(this.store.get(e)).next(n=>(void 0===n&&(n=null),Tt("SimpleDb","GET",this.store.name,e,n),n))}delete(e){return Tt("SimpleDb","DELETE",this.store.name,e),Wr(this.store.delete(e))}count(){return Tt("SimpleDb","COUNT",this.store.name),Wr(this.store.count())}W(e,n){const o=this.options(e,n);if(o.index||"function"!=typeof this.store.getAll){const u=this.cursor(o),p=[];return this.G(u,(I,M)=>{p.push(M)}).next(()=>p)}{const u=this.store.getAll(o.range);return new V((p,I)=>{u.onerror=M=>{I(M.target.error)},u.onsuccess=M=>{p(M.target.result)}})}}j(e,n){const o=this.store.getAll(e,null===n?void 0:n);return new V((u,p)=>{o.onerror=I=>{p(I.target.error)},o.onsuccess=I=>{u(I.target.result)}})}H(e,n){Tt("SimpleDb","DELETE ALL",this.store.name);const o=this.options(e,n);o.J=!1;const u=this.cursor(o);return this.G(u,(p,I,M)=>M.delete())}Y(e,n){let o;n?o=e:(o={},n=e);const u=this.cursor(o);return this.G(u,n)}Z(e){const n=this.cursor({});return new V((o,u)=>{n.onerror=p=>{const I=zi(p.target.error);u(I)},n.onsuccess=p=>{const I=p.target.result;I?e(I.primaryKey,I.value).next(M=>{M?I.continue():o()}):o()}})}G(e,n){const o=[];return new V((u,p)=>{e.onerror=I=>{p(I.target.error)},e.onsuccess=I=>{const M=I.target.result;if(!M)return void u();const U=new Qe(M),W=n(M.primaryKey,M.value,U);if(W instanceof V){const ee=W.catch(fe=>(U.done(),V.reject(fe)));o.push(ee)}U.isDone?u():null===U.$?M.continue():M.continue(U.$)}}).next(()=>V.waitFor(o))}options(e,n){let o;return void 0!==e&&("string"==typeof e?o=e:n=e),{index:o,range:n}}cursor(e){let n="next";if(e.reverse&&(n="prev"),e.index){const o=this.store.index(e.index);return e.J?o.openKeyCursor(e.range,n):o.openCursor(e.range,n)}return this.store.openCursor(e.range,n)}}function Wr(i){return new V((e,n)=>{i.onsuccess=o=>{e(o.target.result)},i.onerror=o=>{const u=zi(o.target.error);n(u)}})}let kn=!1;function zi(i){const e=he.S((0,$e.z$)());if(e>=12.2&&e<13){const n="An internal error was encountered in the Indexed Database server";if(i.message.indexOf(n)>=0){const o=new It("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return kn||(kn=!0,setTimeout(()=>{throw o},0)),o}}return i}class gi{constructor(e,n){this.asyncQueue=e,this.X=n,this.task=null}start(){this.ee(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}ee(e){var n=this;Tt("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,Re.Z)(function*(){n.task=null;try{Tt("IndexBackiller",`Documents written: ${yield n.X.te()}`)}catch(o){Ht(o)?Tt("IndexBackiller","Ignoring IndexedDB error during index backfill: ",o):yield A(o)}yield n.ee(6e4)}))}}class Gu{constructor(e,n){this.localStore=e,this.persistence=n}te(e=50){var n=this;return(0,Re.Z)(function*(){return n.persistence.runTransaction("Backfill Indexes","readwrite-primary",o=>n.ne(o,e))})()}ne(e,n){const o=new Set;let u=n,p=!0;return V.doWhile(()=>!0===p&&u>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(I=>{if(null!==I&&!o.has(I))return Tt("IndexBackiller",`Processing collection: ${I}`),this.re(e,I,u).next(M=>{u-=M,o.add(I)});p=!1})).next(()=>n-u)}re(e,n,o){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,n).next(u=>this.localStore.localDocuments.getNextDocuments(e,n,u,o).next(p=>{const I=p.changes;return this.localStore.indexManager.updateIndexEntries(e,I).next(()=>this.ie(u,p)).next(M=>(Tt("IndexBackiller",`Updating offset: ${M}`),this.localStore.indexManager.updateCollectionGroup(e,n,M))).next(()=>I.size)}))}ie(e,n){let o=e;return n.changes.forEach((u,p)=>{const I=gh(p);Hu(I,o)>0&&(o=I)}),new Do(o.readTime,o.documentKey,Math.max(n.batchId,e.largestBatchId))}}let os=(()=>{class i{constructor(n,o){this.previousValue=n,o&&(o.sequenceNumberHandler=u=>this.se(u),this.oe=u=>o.writeSequenceNumber(u))}se(n){return this.previousValue=Math.max(n,this.previousValue),this.previousValue}next(){const n=++this.previousValue;return this.oe&&this.oe(n),n}}return i._e=-1,i})();function Ba(i){return null==i}function va(i){return 0===i&&1/i==-1/0}function mh(i){return"number"==typeof i&&Number.isInteger(i)&&!va(i)&&i<=Number.MAX_SAFE_INTEGER&&i>=Number.MIN_SAFE_INTEGER}function Ts(i){let e="";for(let n=0;n<i.length;n++)e.length>0&&(e=Ni(e)),e=gu(i.get(n),e);return Ni(e)}function gu(i,e){let n=e;const o=i.length;for(let u=0;u<o;u++){const p=i.charAt(u);switch(p){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=p}}return n}function Ni(i){return i+"\x01\x01"}function jo(i){const e=i.length;if(vn(e>=2),2===e)return vn("\x01"===i.charAt(0)&&"\x01"===i.charAt(1)),lr.emptyPath();const n=e-2,o=[];let u="";for(let p=0;p<e;){const I=i.indexOf("\x01",p);switch((I<0||I>n)&&on(),i.charAt(I+1)){case"\x01":const M=i.substring(p,I);let U;0===u.length?U=M:(u+=M,U=u,u=""),o.push(U);break;case"\x10":u+=i.substring(p,I),u+="\0";break;case"\x11":u+=i.substring(p,I+1);break;default:on()}p=I+2}return new lr(o)}const bl=["userId","batchId"];function zl(i,e){return[i,Ts(e)]}function Ia(i,e,n){return[i,Ts(e),n]}const mu={},Ho=["prefixPath","collectionGroup","readTime","documentId"],Wl=["prefixPath","collectionGroup","documentId"],_h=["collectionGroup","readTime","prefixPath","documentId"],_u=["canonicalId","targetId"],yu=["targetId","path"],Rc=["path","targetId"],cf=["collectionId","parent"],Rd=["indexId","uid"],Cg=["uid","sequenceNumber"],$u=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],fp=["indexId","uid","orderedDocumentKey"],Jc=["userId","collectionPath","documentId"],pp=["userId","collectionPath","largestBatchId"],ql=["userId","collectionGroup","largestBatchId"],ol=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],df=[...ol,"documentOverlays"],Ms=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],zu=Ms,Nd=[...zu,"indexConfiguration","indexState","indexEntries"];class vu extends k{constructor(e,n){super(),this.ae=e,this.currentSequenceNumber=n}}function as(i,e){const n=zt(i);return he.M(n.ae,e)}function Wu(i){let e=0;for(const n in i)Object.prototype.hasOwnProperty.call(i,n)&&e++;return e}function qu(i,e){for(const n in i)Object.prototype.hasOwnProperty.call(i,n)&&e(n,i[n])}function Go(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}class hi{constructor(e,n){this.comparator=e,this.root=n||ls.EMPTY}insert(e,n){return new hi(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,ls.BLACK,null,null))}remove(e){return new hi(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ls.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const o=this.comparator(e,n.key);if(0===o)return n.value;o<0?n=n.left:o>0&&(n=n.right)}return null}indexOf(e){let n=0,o=this.root;for(;!o.isEmpty();){const u=this.comparator(e,o.key);if(0===u)return n+o.left.size;u<0?o=o.left:(n+=o.left.size+1,o=o.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,o)=>(e(n,o),!1))}toString(){const e=[];return this.inorderTraversal((n,o)=>(e.push(`${n}:${o}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new al(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new al(this.root,e,this.comparator,!1)}getReverseIterator(){return new al(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new al(this.root,e,this.comparator,!0)}}class al{constructor(e,n,o,u){this.isReverse=u,this.nodeStack=[];let p=1;for(;!e.isEmpty();)if(p=n?o(e.key,n):1,n&&u&&(p*=-1),p<0)e=this.isReverse?e.left:e.right;else{if(0===p){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class ls{constructor(e,n,o,u,p){this.key=e,this.value=n,this.color=o??ls.RED,this.left=u??ls.EMPTY,this.right=p??ls.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,o,u,p){return new ls(e??this.key,n??this.value,o??this.color,u??this.left,p??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,o){let u=this;const p=o(e,u.key);return u=p<0?u.copy(null,null,null,u.left.insert(e,n,o),null):0===p?u.copy(null,n,null,null,null):u.copy(null,null,null,null,u.right.insert(e,n,o)),u.fixUp()}removeMin(){if(this.left.isEmpty())return ls.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let o,u=this;if(n(e,u.key)<0)u.left.isEmpty()||u.left.isRed()||u.left.left.isRed()||(u=u.moveRedLeft()),u=u.copy(null,null,null,u.left.remove(e,n),null);else{if(u.left.isRed()&&(u=u.rotateRight()),u.right.isEmpty()||u.right.isRed()||u.right.left.isRed()||(u=u.moveRedRight()),0===n(e,u.key)){if(u.right.isEmpty())return ls.EMPTY;o=u.right.min(),u=u.copy(o.key,o.value,null,null,u.right.removeMin())}u=u.copy(null,null,null,null,u.right.remove(e,n))}return u.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ls.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ls.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw on();const e=this.left.check();if(e!==this.right.check())throw on();return e+(this.isRed()?0:1)}}ls.EMPTY=null,ls.RED=!0,ls.BLACK=!1,ls.EMPTY=new class{constructor(){this.size=0}get key(){throw on()}get value(){throw on()}get color(){throw on()}get left(){throw on()}get right(){throw on()}copy(e,n,o,u,p){return this}insert(e,n,o){return new ls(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Qr{constructor(e){this.comparator=e,this.data=new hi(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,o)=>(e(n),!1))}forEachInRange(e,n){const o=this.data.getIteratorFrom(e[0]);for(;o.hasNext();){const u=o.getNext();if(this.comparator(u.key,e[1])>=0)return;n(u.key)}}forEachWhile(e,n){let o;for(o=void 0!==n?this.data.getIteratorFrom(n):this.data.getIterator();o.hasNext();)if(!e(o.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Kl(this.data.getIterator())}getIteratorFrom(e){return new Kl(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(o=>{n=n.add(o)}),n}isEqual(e){if(!(e instanceof Qr)||this.size!==e.size)return!1;const n=this.data.getIterator(),o=e.data.getIterator();for(;n.hasNext();){const u=n.getNext().key,p=o.getNext().key;if(0!==this.comparator(u,p))return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Qr(this.comparator);return n.data=e,n}}class Kl{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Ku(i){return i.hasNext()?i.getNext():void 0}class la{constructor(e){this.fields=e,e.sort(vi.comparator)}static empty(){return new la([])}unionWith(e){let n=new Qr(vi.comparator);for(const o of this.fields)n=n.add(o);for(const o of e)n=n.add(o);return new la(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return $i(this.fields,e.fields,(n,o)=>n.isEqual(o))}}class Yu extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Bs{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(u){try{return atob(u)}catch(p){throw typeof DOMException<"u"&&p instanceof DOMException?new Yu("Invalid base64 string: "+p):p}}(e);return new Bs(n)}static fromUint8Array(e){const n=function(u){let p="";for(let I=0;I<u.length;++I)p+=String.fromCharCode(u[I]);return p}(e);return new Bs(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(n){const o=new Uint8Array(n.length);for(let u=0;u<n.length;u++)o[u]=n.charCodeAt(u);return o}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Zn(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Bs.EMPTY_BYTE_STRING=new Bs("");const Zu=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Yl(i){if(vn(!!i),"string"==typeof i){let e=0;const n=Zu.exec(i);if(vn(!!n),n[1]){let u=n[1];u=(u+"000000000").substr(0,9),e=Number(u)}const o=new Date(i);return{seconds:Math.floor(o.getTime()/1e3),nanos:e}}return{seconds:ai(i.seconds),nanos:ai(i.nanos)}}function ai(i){return"number"==typeof i?i:"string"==typeof i?Number(i):0}function Sr(i){return"string"==typeof i?Bs.fromBase64String(i):Bs.fromUint8Array(i)}function ua(i){var e,n;return"server_timestamp"===(null===(n=((null===(e=i?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function Zl(i){const e=i.mapValue.fields.__previous_value__;return ua(e)?Zl(e):e}function ll(i){const e=Yl(i.mapValue.fields.__local_write_time__.timestampValue);return new jr(e.seconds,e.nanos)}class Nc{constructor(e,n,o,u,p,I,M,U,W){this.databaseId=e,this.appId=n,this.persistenceKey=o,this.host=u,this.ssl=p,this.forceLongPolling=I,this.autoDetectLongPolling=M,this.longPollingOptions=U,this.useFetchStreams=W}}class Ea{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new Ea("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Ea&&e.projectId===this.projectId&&e.database===this.database}}const Pi={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Qu={nullValue:"NULL_VALUE"};function wl(i){return"nullValue"in i?0:"booleanValue"in i?1:"integerValue"in i||"doubleValue"in i?2:"timestampValue"in i?3:"stringValue"in i?5:"bytesValue"in i?6:"referenceValue"in i?7:"geoPointValue"in i?8:"arrayValue"in i?9:"mapValue"in i?ua(i)?4:ed(i)?9007199254740991:10:on()}function ca(i,e){if(i===e)return!0;const n=wl(i);if(n!==wl(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return i.booleanValue===e.booleanValue;case 4:return ll(i).isEqual(ll(e));case 3:return function(u,p){if("string"==typeof u.timestampValue&&"string"==typeof p.timestampValue&&u.timestampValue.length===p.timestampValue.length)return u.timestampValue===p.timestampValue;const I=Yl(u.timestampValue),M=Yl(p.timestampValue);return I.seconds===M.seconds&&I.nanos===M.nanos}(i,e);case 5:return i.stringValue===e.stringValue;case 6:return p=e,Sr(i.bytesValue).isEqual(Sr(p.bytesValue));case 7:return i.referenceValue===e.referenceValue;case 8:return function(u,p){return ai(u.geoPointValue.latitude)===ai(p.geoPointValue.latitude)&&ai(u.geoPointValue.longitude)===ai(p.geoPointValue.longitude)}(i,e);case 2:return function(u,p){if("integerValue"in u&&"integerValue"in p)return ai(u.integerValue)===ai(p.integerValue);if("doubleValue"in u&&"doubleValue"in p){const I=ai(u.doubleValue),M=ai(p.doubleValue);return I===M?va(I)===va(M):isNaN(I)&&isNaN(M)}return!1}(i,e);case 9:return $i(i.arrayValue.values||[],e.arrayValue.values||[],ca);case 10:return function(u,p){const I=u.mapValue.fields||{},M=p.mapValue.fields||{};if(Wu(I)!==Wu(M))return!1;for(const U in I)if(I.hasOwnProperty(U)&&(void 0===M[U]||!ca(I[U],M[U])))return!1;return!0}(i,e);default:return on()}var p}function Dl(i,e){return void 0!==(i.values||[]).find(n=>ca(n,e))}function Cl(i,e){if(i===e)return 0;const n=wl(i),o=wl(e);if(n!==o)return Zn(n,o);switch(n){case 0:case 9007199254740991:return 0;case 1:return Zn(i.booleanValue,e.booleanValue);case 2:return function(p,I){const M=ai(p.integerValue||p.doubleValue),U=ai(I.integerValue||I.doubleValue);return M<U?-1:M>U?1:M===U?0:isNaN(M)?isNaN(U)?0:-1:1}(i,e);case 3:return Xc(i.timestampValue,e.timestampValue);case 4:return Xc(ll(i),ll(e));case 5:return Zn(i.stringValue,e.stringValue);case 6:return function(p,I){const M=Sr(p),U=Sr(I);return M.compareTo(U)}(i.bytesValue,e.bytesValue);case 7:return function(p,I){const M=p.split("/"),U=I.split("/");for(let W=0;W<M.length&&W<U.length;W++){const ee=Zn(M[W],U[W]);if(0!==ee)return ee}return Zn(M.length,U.length)}(i.referenceValue,e.referenceValue);case 8:return function(p,I){const M=Zn(ai(p.latitude),ai(I.latitude));return 0!==M?M:Zn(ai(p.longitude),ai(I.longitude))}(i.geoPointValue,e.geoPointValue);case 9:return function(p,I){const M=p.values||[],U=I.values||[];for(let W=0;W<M.length&&W<U.length;++W){const ee=Cl(M[W],U[W]);if(ee)return ee}return Zn(M.length,U.length)}(i.arrayValue,e.arrayValue);case 10:return function(p,I){if(p===Pi.mapValue&&I===Pi.mapValue)return 0;if(p===Pi.mapValue)return 1;if(I===Pi.mapValue)return-1;const M=p.fields||{},U=Object.keys(M),W=I.fields||{},ee=Object.keys(W);U.sort(),ee.sort();for(let fe=0;fe<U.length&&fe<ee.length;++fe){const Me=Zn(U[fe],ee[fe]);if(0!==Me)return Me;const tt=Cl(M[U[fe]],W[ee[fe]]);if(0!==tt)return tt}return Zn(U.length,ee.length)}(i.mapValue,e.mapValue);default:throw on()}}function Xc(i,e){if("string"==typeof i&&"string"==typeof e&&i.length===e.length)return Zn(i,e);const n=Yl(i),o=Yl(e),u=Zn(n.seconds,o.seconds);return 0!==u?u:Zn(n.nanos,o.nanos)}function Ua(i){return da(i)}function da(i){return"nullValue"in i?"null":"booleanValue"in i?""+i.booleanValue:"integerValue"in i?""+i.integerValue:"doubleValue"in i?""+i.doubleValue:"timestampValue"in i?function(n){const o=Yl(n);return`time(${o.seconds},${o.nanos})`}(i.timestampValue):"stringValue"in i?i.stringValue:"bytesValue"in i?Sr(i.bytesValue).toBase64():"referenceValue"in i?Zt.fromName(i.referenceValue).toString():"geoPointValue"in i?function(n){return`geo(${n.latitude},${n.longitude})`}(i.geoPointValue):"arrayValue"in i?function(n){let o="[",u=!0;for(const p of n.values||[])u?u=!1:o+=",",o+=da(p);return o+"]"}(i.arrayValue):"mapValue"in i?function(n){const o=Object.keys(n.fields||{}).sort();let u="{",p=!0;for(const I of o)p?p=!1:u+=",",u+=`${I}:${da(n.fields[I])}`;return u+"}"}(i.mapValue):on()}function Ql(i,e){return{referenceValue:`projects/${i.projectId}/databases/${i.database}/documents/${e.path.canonicalString()}`}}function ul(i){return!!i&&"integerValue"in i}function cl(i){return!!i&&"arrayValue"in i}function Iu(i){return!!i&&"nullValue"in i}function Jl(i){return!!i&&"doubleValue"in i&&isNaN(Number(i.doubleValue))}function Pd(i){return!!i&&"mapValue"in i}function Ju(i){if(i.geoPointValue)return{geoPointValue:Object.assign({},i.geoPointValue)};if(i.timestampValue&&"object"==typeof i.timestampValue)return{timestampValue:Object.assign({},i.timestampValue)};if(i.mapValue){const e={mapValue:{fields:{}}};return qu(i.mapValue.fields,(n,o)=>e.mapValue.fields[n]=Ju(o)),e}if(i.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(i.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Ju(i.arrayValue.values[n]);return e}return Object.assign({},i)}function ed(i){return"__max__"===(((i.mapValue||{}).fields||{}).__type__||{}).stringValue}function mp(i){return"nullValue"in i?Qu:"booleanValue"in i?{booleanValue:!1}:"integerValue"in i||"doubleValue"in i?{doubleValue:NaN}:"timestampValue"in i?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in i?{stringValue:""}:"bytesValue"in i?{bytesValue:""}:"referenceValue"in i?Ql(Ea.empty(),Zt.empty()):"geoPointValue"in i?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in i?{arrayValue:{}}:"mapValue"in i?{mapValue:{}}:on()}function _p(i){return"nullValue"in i?{booleanValue:!1}:"booleanValue"in i?{doubleValue:NaN}:"integerValue"in i||"doubleValue"in i?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in i?{stringValue:""}:"stringValue"in i?{bytesValue:""}:"bytesValue"in i?Ql(Ea.empty(),Zt.empty()):"referenceValue"in i?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in i?{arrayValue:{}}:"arrayValue"in i?{mapValue:{}}:"mapValue"in i?Pi:on()}function hf(i,e){const n=Cl(i.value,e.value);return 0!==n?n:i.inclusive&&!e.inclusive?-1:!i.inclusive&&e.inclusive?1:0}function qr(i,e){const n=Cl(i.value,e.value);return 0!==n?n:i.inclusive&&!e.inclusive?1:!i.inclusive&&e.inclusive?-1:0}class bs{constructor(e){this.value=e}static empty(){return new bs({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let o=0;o<e.length-1;++o)if(n=(n.mapValue.fields||{})[e.get(o)],!Pd(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ju(n)}setAll(e){let n=vi.emptyPath(),o={},u=[];e.forEach((I,M)=>{if(!n.isImmediateParentOf(M)){const U=this.getFieldsMap(n);this.applyChanges(U,o,u),o={},u=[],n=M.popLast()}I?o[M.lastSegment()]=Ju(I):u.push(M.lastSegment())});const p=this.getFieldsMap(n);this.applyChanges(p,o,u)}delete(e){const n=this.field(e.popLast());Pd(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return ca(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let o=0;o<e.length;++o){let u=n.mapValue.fields[e.get(o)];Pd(u)&&u.mapValue.fields||(u={mapValue:{fields:{}}},n.mapValue.fields[e.get(o)]=u),n=u}return n.mapValue.fields}applyChanges(e,n,o){qu(n,(u,p)=>e[u]=p);for(const u of o)delete e[u]}clone(){return new bs(Ju(this.value))}}function td(i){const e=[];return qu(i.fields,(n,o)=>{const u=new vi([n]);if(Pd(o)){const p=td(o.mapValue).fields;if(0===p.length)e.push(u);else for(const I of p)e.push(u.child(I))}else e.push(u)}),new la(e)}class ur{constructor(e,n,o,u,p,I,M){this.key=e,this.documentType=n,this.version=o,this.readTime=u,this.createTime=p,this.data=I,this.documentState=M}static newInvalidDocument(e){return new ur(e,0,un.min(),un.min(),un.min(),bs.empty(),0)}static newFoundDocument(e,n,o,u){return new ur(e,1,n,un.min(),o,u,0)}static newNoDocument(e,n){return new ur(e,2,n,un.min(),un.min(),bs.empty(),0)}static newUnknownDocument(e,n){return new ur(e,3,n,un.min(),un.min(),bs.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(un.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=bs.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=bs.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=un.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof ur&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new ur(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class dl{constructor(e,n){this.position=e,this.inclusive=n}}function Xu(i,e,n){let o=0;for(let u=0;u<i.position.length;u++){const p=e[u],I=i.position[u];if(o=p.field.isKeyField()?Zt.comparator(Zt.fromName(I.referenceValue),n.key):Cl(I,n.data.field(p.field)),"desc"===p.dir&&(o*=-1),0!==o)break}return o}function Od(i,e){if(null===i)return null===e;if(null===e||i.inclusive!==e.inclusive||i.position.length!==e.position.length)return!1;for(let n=0;n<i.position.length;n++)if(!ca(i.position[n],e.position[n]))return!1;return!0}class Us{constructor(e,n="asc"){this.field=e,this.dir=n}}function Xl(i,e){return i.dir===e.dir&&i.field.isEqual(e.field)}class ec{}class vr extends ec{constructor(e,n,o){super(),this.field=e,this.op=n,this.value=o}static create(e,n,o){return e.isKeyField()?"in"===n||"not-in"===n?this.createKeyFieldInFilter(e,n,o):new Pc(e,n,o):"array-contains"===n?new xd(e,o):"in"===n?new nu(e,o):"not-in"===n?new kd(e,o):"array-contains-any"===n?new ic(e,o):new vr(e,n,o)}static createKeyFieldInFilter(e,n,o){return"in"===n?new vp(e,o):new Ag(e,o)}matches(e){const n=e.data.field(this.field);return"!="===this.op?null!==n&&this.matchesComparison(Cl(n,this.value)):null!==n&&wl(this.value)===wl(n)&&this.matchesComparison(Cl(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return on()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Kr extends ec{constructor(e,n){super(),this.filters=e,this.op=n,this.ue=null}static create(e,n){return new Kr(e,n)}matches(e){return tc(this)?void 0===this.filters.find(n=>!n.matches(e)):void 0!==this.filters.find(n=>n.matches(e))}getFlattenedFilters(){return null!==this.ue||(this.ue=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ue}getFilters(){return Object.assign([],this.filters)}}function tc(i){return"and"===i.op}function nc(i){return"or"===i.op}function eu(i){return yh(i)&&tc(i)}function yh(i){for(const e of i.filters)if(e instanceof Kr)return!1;return!0}function xs(i){if(i instanceof vr)return i.field.canonicalString()+i.op.toString()+Ua(i.value);if(eu(i))return i.filters.map(e=>xs(e)).join(",");{const e=i.filters.map(n=>xs(n)).join(",");return`${i.op}(${e})`}}function Md(i,e){return i instanceof vr?(o=i,(u=e)instanceof vr&&o.op===u.op&&o.field.isEqual(u.field)&&ca(o.value,u.value)):i instanceof Kr?function(o,u){return u instanceof Kr&&o.op===u.op&&o.filters.length===u.filters.length&&o.filters.reduce((p,I,M)=>p&&Md(I,u.filters[M]),!0)}(i,e):void on();var o,u}function tu(i,e){const n=i.filters.concat(e);return Kr.create(n,i.op)}function yp(i){return i instanceof vr?`${(n=i).field.canonicalString()} ${n.op} ${Ua(n.value)}`:i instanceof Kr?function(n){return n.op.toString()+" {"+n.getFilters().map(yp).join(" ,")+"}"}(i):"Filter";var n}class Pc extends vr{constructor(e,n,o){super(e,n,o),this.key=Zt.fromName(o.referenceValue)}matches(e){const n=Zt.comparator(e.key,this.key);return this.matchesComparison(n)}}class vp extends vr{constructor(e,n){super(e,"in",n),this.keys=rc(0,n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class Ag extends vr{constructor(e,n){super(e,"not-in",n),this.keys=rc(0,n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function rc(i,e){var n;return((null===(n=e.arrayValue)||void 0===n?void 0:n.values)||[]).map(o=>Zt.fromName(o.referenceValue))}class xd extends vr{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return cl(n)&&Dl(n.arrayValue,this.value)}}class nu extends vr{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return null!==n&&Dl(this.value.arrayValue,n)}}class kd extends vr{constructor(e,n){super(e,"not-in",n)}matches(e){if(Dl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return null!==n&&!Dl(this.value.arrayValue,n)}}class ic extends vr{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!cl(n)||!n.arrayValue.values)&&n.arrayValue.values.some(o=>Dl(this.value.arrayValue,o))}}class Oc{constructor(e,n=null,o=[],u=[],p=null,I=null,M=null){this.path=e,this.collectionGroup=n,this.orderBy=o,this.filters=u,this.limit=p,this.startAt=I,this.endAt=M,this.ce=null}}function nd(i,e=null,n=[],o=[],u=null,p=null,I=null){return new Oc(i,e,n,o,u,p,I)}function ja(i){const e=zt(i);if(null===e.ce){let n=e.path.canonicalString();null!==e.collectionGroup&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(o=>xs(o)).join(","),n+="|ob:",n+=e.orderBy.map(o=>{return(p=o).field.canonicalString()+p.dir;var p}).join(","),Ba(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(o=>Ua(o)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(o=>Ua(o)).join(",")),e.ce=n}return e.ce}function sc(i,e){if(i.limit!==e.limit||i.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<i.orderBy.length;n++)if(!Xl(i.orderBy[n],e.orderBy[n]))return!1;if(i.filters.length!==e.filters.length)return!1;for(let n=0;n<i.filters.length;n++)if(!Md(i.filters[n],e.filters[n]))return!1;return i.collectionGroup===e.collectionGroup&&!!i.path.isEqual(e.path)&&!!Od(i.startAt,e.startAt)&&Od(i.endAt,e.endAt)}function Eu(i){return Zt.isDocumentKey(i.path)&&null===i.collectionGroup&&0===i.filters.length}function Tu(i,e){return i.filters.filter(n=>n instanceof vr&&n.field.isEqual(e))}function Fd(i,e,n){let o=Qu,u=!0;for(const p of Tu(i,e)){let I=Qu,M=!0;switch(p.op){case"<":case"<=":I=mp(p.value);break;case"==":case"in":case">=":I=p.value;break;case">":I=p.value,M=!1;break;case"!=":case"not-in":I=Qu}hf({value:o,inclusive:u},{value:I,inclusive:M})<0&&(o=I,u=M)}if(null!==n)for(let p=0;p<i.orderBy.length;++p)if(i.orderBy[p].field.isEqual(e)){const I=n.position[p];hf({value:o,inclusive:u},{value:I,inclusive:n.inclusive})<0&&(o=I,u=n.inclusive);break}return{value:o,inclusive:u}}function vh(i,e,n){let o=Pi,u=!0;for(const p of Tu(i,e)){let I=Pi,M=!0;switch(p.op){case">=":case">":I=_p(p.value),M=!1;break;case"==":case"in":case"<=":I=p.value;break;case"<":I=p.value,M=!1;break;case"!=":case"not-in":I=Pi}qr({value:o,inclusive:u},{value:I,inclusive:M})>0&&(o=I,u=M)}if(null!==n)for(let p=0;p<i.orderBy.length;++p)if(i.orderBy[p].field.isEqual(e)){const I=n.position[p];qr({value:o,inclusive:u},{value:I,inclusive:n.inclusive})>0&&(o=I,u=n.inclusive);break}return{value:o,inclusive:u}}class js{constructor(e,n=null,o=[],u=[],p=null,I="F",M=null,U=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=o,this.filters=u,this.limit=p,this.limitType=I,this.startAt=M,this.endAt=U,this.le=null,this.he=null,this.Pe=null}}function Ih(i,e,n,o,u,p,I,M){return new js(i,e,n,o,u,p,I,M)}function Mc(i){return new js(i)}function Ld(i){return 0===i.filters.length&&null===i.limit&&null==i.startAt&&null==i.endAt&&(0===i.explicitOrderBy.length||1===i.explicitOrderBy.length&&i.explicitOrderBy[0].field.isKeyField())}function P(i){return null!==i.collectionGroup}function y(i){const e=zt(i);if(null===e.le){e.le=[];const n=new Set;for(const p of e.explicitOrderBy)e.le.push(p),n.add(p.field.canonicalString());const o=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(I){let M=new Qr(vi.comparator);return I.filters.forEach(U=>{U.getFlattenedFilters().forEach(W=>{W.isInequality()&&(M=M.add(W.field))})}),M})(e).forEach(p=>{n.has(p.canonicalString())||p.isKeyField()||e.le.push(new Us(p,o))}),n.has(vi.keyField().canonicalString())||e.le.push(new Us(vi.keyField(),o))}return e.le}function w(i){const e=zt(i);return e.he||(e.he=function x(i,e){if("F"===i.limitType)return nd(i.path,i.collectionGroup,e,i.filters,i.limit,i.startAt,i.endAt);{e=e.map(u=>new Us(u.field,"desc"===u.dir?"asc":"desc"));const n=i.endAt?new dl(i.endAt.position,i.endAt.inclusive):null,o=i.startAt?new dl(i.startAt.position,i.startAt.inclusive):null;return nd(i.path,i.collectionGroup,e,i.filters,i.limit,n,o)}}(e,y(i))),e.he}function Q(i,e){const n=i.filters.concat([e]);return new js(i.path,i.collectionGroup,i.explicitOrderBy.slice(),n,i.limit,i.limitType,i.startAt,i.endAt)}function ce(i,e,n){return new js(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),e,n,i.startAt,i.endAt)}function je(i,e){return sc(w(i),w(e))&&i.limitType===e.limitType}function at(i){return`${ja(w(i))}|lt:${i.limitType}`}function St(i){return`Query(target=${function(n){let o=n.path.canonicalString();return null!==n.collectionGroup&&(o+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(o+=`, filters: [${n.filters.map(u=>yp(u)).join(", ")}]`),Ba(n.limit)||(o+=", limit: "+n.limit),n.orderBy.length>0&&(o+=`, orderBy: [${n.orderBy.map(u=>{return`${(I=u).field.canonicalString()} (${I.dir})`;var I}).join(", ")}]`),n.startAt&&(o+=", startAt: ",o+=n.startAt.inclusive?"b:":"a:",o+=n.startAt.position.map(u=>Ua(u)).join(",")),n.endAt&&(o+=", endAt: ",o+=n.endAt.inclusive?"a:":"b:",o+=n.endAt.position.map(u=>Ua(u)).join(",")),`Target(${o})`}(w(i))}; limitType=${i.limitType})`}function pn(i,e){return e.isFoundDocument()&&function(o,u){const p=u.key.path;return null!==o.collectionGroup?u.key.hasCollectionId(o.collectionGroup)&&o.path.isPrefixOf(p):Zt.isDocumentKey(o.path)?o.path.isEqual(p):o.path.isImmediateParentOf(p)}(i,e)&&function(o,u){for(const p of y(o))if(!p.field.isKeyField()&&null===u.data.field(p.field))return!1;return!0}(i,e)&&function(o,u){for(const p of o.filters)if(!p.matches(u))return!1;return!0}(i,e)&&(u=e,!((o=i).startAt&&!function(I,M,U){const W=Xu(I,M,U);return I.inclusive?W<=0:W<0}(o.startAt,y(o),u)||o.endAt&&!function(I,M,U){const W=Xu(I,M,U);return I.inclusive?W>=0:W>0}(o.endAt,y(o),u)));var o,u}function Rn(i){return i.collectionGroup||(i.path.length%2==1?i.path.lastSegment():i.path.get(i.path.length-2))}function Lr(i){return(e,n)=>{let o=!1;for(const u of y(i)){const p=ba(u,e,n);if(0!==p)return p;o=o||u.field.isKeyField()}return 0}}function ba(i,e,n){const o=i.field.isKeyField()?Zt.comparator(e.key,n.key):function(p,I,M){const U=I.data.field(p),W=M.data.field(p);return null!==U&&null!==W?Cl(U,W):on()}(i.field,e,n);switch(i.dir){case"asc":return o;case"desc":return-1*o;default:return on()}}class no{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),o=this.inner[n];if(void 0!==o)for(const[u,p]of o)if(this.equalsFn(u,e))return p}has(e){return void 0!==this.get(e)}set(e,n){const o=this.mapKeyFn(e),u=this.inner[o];if(void 0===u)return this.inner[o]=[[e,n]],void this.innerSize++;for(let p=0;p<u.length;p++)if(this.equalsFn(u[p][0],e))return void(u[p]=[e,n]);u.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),o=this.inner[n];if(void 0===o)return!1;for(let u=0;u<o.length;u++)if(this.equalsFn(o[u][0],e))return 1===o.length?delete this.inner[n]:o.splice(u,1),this.innerSize--,!0;return!1}forEach(e){qu(this.inner,(n,o)=>{for(const[u,p]of o)e(u,p)})}isEmpty(){return Go(this.inner)}size(){return this.innerSize}}const rd=new hi(Zt.comparator);function Co(){return rd}const id=new hi(Zt.comparator);function bu(...i){let e=id;for(const n of i)e=e.insert(n.key,n);return e}function Ao(i){let e=id;return i.forEach((n,o)=>e=e.insert(n,o.overlayedDocument)),e}function Rr(){return Al()}function sd(){return Al()}function Al(){return new no(i=>i.toString(),(i,e)=>i.isEqual(e))}const wu=new hi(Zt.comparator),ff=new Qr(Zt.comparator);function gr(...i){let e=ff;for(const n of i)e=e.add(n);return e}const xc=new Qr(Zn);function pf(){return xc}function Vd(i,e){if(i.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:va(e)?"-0":e}}function Bd(i){return{integerValue:""+i}}function od(i,e){return mh(e)?Bd(e):Vd(i,e)}class Sl{constructor(){this._=void 0}}function Ip(i,e,n){return i instanceof $o?function(u,p){const I={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:u.seconds,nanos:u.nanoseconds}}}};return p&&ua(p)&&(p=Zl(p)),p&&(I.fields.__previous_value__=p),{mapValue:I}}(n,e):i instanceof wa?kc(i,e):i instanceof Da?oc(i,e):function(u,p){const I=mf(u,p),M=Du(I)+Du(u.Ie);return ul(I)&&ul(u.Ie)?Bd(M):Vd(u.serializer,M)}(i,e)}function gf(i,e,n){return i instanceof wa?kc(i,e):i instanceof Da?oc(i,e):n}function mf(i,e){return i instanceof Ca?ul(o=e)||(p=o)&&"doubleValue"in p?e:{integerValue:0}:null;var o,p}class $o extends Sl{}class wa extends Sl{constructor(e){super(),this.elements=e}}function kc(i,e){const n=_f(e);for(const o of i.elements)n.some(u=>ca(u,o))||n.push(o);return{arrayValue:{values:n}}}class Da extends Sl{constructor(e){super(),this.elements=e}}function oc(i,e){let n=_f(e);for(const o of i.elements)n=n.filter(u=>!ca(u,o));return{arrayValue:{values:n}}}class Ca extends Sl{constructor(e,n){super(),this.serializer=e,this.Ie=n}}function Du(i){return ai(i.integerValue||i.doubleValue)}function _f(i){return cl(i)&&i.arrayValue.values?i.arrayValue.values.slice():[]}class ad{constructor(e,n){this.field=e,this.transform=n}}class Aa{constructor(e,n){this.version=e,this.transformResults=n}}class Fi{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Fi}static exists(e){return new Fi(void 0,e)}static updateTime(e){return new Fi(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Eh(i,e){return void 0!==i.updateTime?e.isFoundDocument()&&e.version.isEqual(i.updateTime):void 0===i.exists||i.exists===e.isFoundDocument()}class yf{}function Th(i,e){if(!i.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return i.isNoDocument()?new Cu(i.key,Fi.none()):new Ha(i.key,i.data,Fi.none());{const n=i.data,o=bs.empty();let u=new Qr(vi.comparator);for(let p of e.fields)if(!u.has(p)){let I=n.field(p);null===I&&p.length>1&&(p=p.popLast(),I=n.field(p)),null===I?o.delete(p):o.set(p,I),u=u.add(p)}return new Rl(i.key,o,new la(u.toArray()),Fi.none())}}function Ep(i,e,n){i instanceof Ha?function(u,p,I){const M=u.value.clone(),U=Ud(u.fieldTransforms,p,I.transformResults);M.setAll(U),p.convertToFoundDocument(I.version,M).setHasCommittedMutations()}(i,e,n):i instanceof Rl?function(u,p,I){if(!Eh(u.precondition,p))return void p.convertToUnknownDocument(I.version);const M=Ud(u.fieldTransforms,p,I.transformResults),U=p.data;U.setAll(zo(u)),U.setAll(M),p.convertToFoundDocument(I.version,U).setHasCommittedMutations()}(i,e,n):e.convertToNoDocument(n.version).setHasCommittedMutations()}function bh(i,e,n,o){return i instanceof Ha?function(p,I,M,U){if(!Eh(p.precondition,I))return M;const W=p.value.clone(),ee=Tp(p.fieldTransforms,U,I);return W.setAll(ee),I.convertToFoundDocument(I.version,W).setHasLocalMutations(),null}(i,e,n,o):i instanceof Rl?function(p,I,M,U){if(!Eh(p.precondition,I))return M;const W=Tp(p.fieldTransforms,U,I),ee=I.data;return ee.setAll(zo(p)),ee.setAll(W),I.convertToFoundDocument(I.version,ee).setHasLocalMutations(),null===M?null:M.unionWith(p.fieldMask.fields).unionWith(p.fieldTransforms.map(fe=>fe.field))}(i,e,n,o):(M=n,Eh(i.precondition,I=e)?(I.convertToNoDocument(I.version).setHasLocalMutations(),null):M);var I,M}function Sa(i,e){let n=null;for(const o of i.fieldTransforms){const u=e.data.field(o.field),p=mf(o.transform,u||null);null!=p&&(null===n&&(n=bs.empty()),n.set(o.field,p))}return n||null}function vf(i,e){return i.type===e.type&&!!i.key.isEqual(e.key)&&!!i.precondition.isEqual(e.precondition)&&(u=e.fieldTransforms,!!(void 0===(o=i.fieldTransforms)&&void 0===u||o&&u&&$i(o,u,(p,I)=>function Sg(i,e){return i.field.isEqual(e.field)&&(u=e.transform,(o=i.transform)instanceof wa&&u instanceof wa||o instanceof Da&&u instanceof Da?$i(o.elements,u.elements,ca):o instanceof Ca&&u instanceof Ca?ca(o.Ie,u.Ie):o instanceof $o&&u instanceof $o);var o,u}(p,I))))&&(0===i.type?i.value.isEqual(e.value):1!==i.type||i.data.isEqual(e.data)&&i.fieldMask.isEqual(e.fieldMask));var o,u}class Ha extends yf{constructor(e,n,o,u=[]){super(),this.key=e,this.value=n,this.precondition=o,this.fieldTransforms=u,this.type=0}getFieldMask(){return null}}class Rl extends yf{constructor(e,n,o,u,p=[]){super(),this.key=e,this.data=n,this.fieldMask=o,this.precondition=u,this.fieldTransforms=p,this.type=1}getFieldMask(){return this.fieldMask}}function zo(i){const e=new Map;return i.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const o=i.data.field(n);e.set(n,o)}}),e}function Ud(i,e,n){const o=new Map;vn(i.length===n.length);for(let u=0;u<n.length;u++){const p=i[u],I=p.transform,M=e.data.field(p.field);o.set(p.field,gf(I,M,n[u]))}return o}function Tp(i,e,n){const o=new Map;for(const u of i){const p=u.transform,I=n.data.field(u.field);o.set(u.field,Ip(p,I,e))}return o}class Cu extends yf{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Wo extends yf{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class jd{constructor(e,n,o,u){this.batchId=e,this.localWriteTime=n,this.baseMutations=o,this.mutations=u}applyToRemoteDocument(e,n){const o=n.mutationResults;for(let u=0;u<this.mutations.length;u++){const p=this.mutations[u];p.key.isEqual(e.key)&&Ep(p,e,o[u])}}applyToLocalView(e,n){for(const o of this.baseMutations)o.key.isEqual(e.key)&&(n=bh(o,e,n,this.localWriteTime));for(const o of this.mutations)o.key.isEqual(e.key)&&(n=bh(o,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const o=sd();return this.mutations.forEach(u=>{const p=e.get(u.key),I=p.overlayedDocument;let M=this.applyToLocalView(I,p.mutatedFields);M=n.has(u.key)?null:M;const U=Th(I,M);null!==U&&o.set(u.key,U),I.isValidDocument()||I.convertToNoDocument(un.min())}),o}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),gr())}isEqual(e){return this.batchId===e.batchId&&$i(this.mutations,e.mutations,(n,o)=>vf(n,o))&&$i(this.baseMutations,e.baseMutations,(n,o)=>vf(n,o))}}class ld{constructor(e,n,o,u){this.batch=e,this.commitVersion=n,this.mutationResults=o,this.docVersions=u}static from(e,n,o){vn(e.mutations.length===o.length);let u=wu;const p=e.mutations;for(let I=0;I<p.length;I++)u=u.insert(p[I].key,o[I].version);return new ld(e,n,o,u)}}class Hd{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class ud{constructor(e,n){this.count=e,this.unchangedNames=n}}var us,Jr;function Gd(i){switch(i){default:return on();case nt.CANCELLED:case nt.UNKNOWN:case nt.DEADLINE_EXCEEDED:case nt.RESOURCE_EXHAUSTED:case nt.INTERNAL:case nt.UNAVAILABLE:case nt.UNAUTHENTICATED:return!1;case nt.INVALID_ARGUMENT:case nt.NOT_FOUND:case nt.ALREADY_EXISTS:case nt.PERMISSION_DENIED:case nt.FAILED_PRECONDITION:case nt.ABORTED:case nt.OUT_OF_RANGE:case nt.UNIMPLEMENTED:case nt.DATA_LOSS:return!0}}function fl(i){if(void 0===i)return Si("GRPC error has no .code"),nt.UNKNOWN;switch(i){case us.OK:return nt.OK;case us.CANCELLED:return nt.CANCELLED;case us.UNKNOWN:return nt.UNKNOWN;case us.DEADLINE_EXCEEDED:return nt.DEADLINE_EXCEEDED;case us.RESOURCE_EXHAUSTED:return nt.RESOURCE_EXHAUSTED;case us.INTERNAL:return nt.INTERNAL;case us.UNAVAILABLE:return nt.UNAVAILABLE;case us.UNAUTHENTICATED:return nt.UNAUTHENTICATED;case us.INVALID_ARGUMENT:return nt.INVALID_ARGUMENT;case us.NOT_FOUND:return nt.NOT_FOUND;case us.ALREADY_EXISTS:return nt.ALREADY_EXISTS;case us.PERMISSION_DENIED:return nt.PERMISSION_DENIED;case us.FAILED_PRECONDITION:return nt.FAILED_PRECONDITION;case us.ABORTED:return nt.ABORTED;case us.OUT_OF_RANGE:return nt.OUT_OF_RANGE;case us.UNIMPLEMENTED:return nt.UNIMPLEMENTED;case us.DATA_LOSS:return nt.DATA_LOSS;default:return on()}}(Jr=us||(us={}))[Jr.OK=0]="OK",Jr[Jr.CANCELLED=1]="CANCELLED",Jr[Jr.UNKNOWN=2]="UNKNOWN",Jr[Jr.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Jr[Jr.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Jr[Jr.NOT_FOUND=5]="NOT_FOUND",Jr[Jr.ALREADY_EXISTS=6]="ALREADY_EXISTS",Jr[Jr.PERMISSION_DENIED=7]="PERMISSION_DENIED",Jr[Jr.UNAUTHENTICATED=16]="UNAUTHENTICATED",Jr[Jr.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Jr[Jr.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Jr[Jr.ABORTED=10]="ABORTED",Jr[Jr.OUT_OF_RANGE=11]="OUT_OF_RANGE",Jr[Jr.UNIMPLEMENTED=12]="UNIMPLEMENTED",Jr[Jr.INTERNAL=13]="INTERNAL",Jr[Jr.UNAVAILABLE=14]="UNAVAILABLE",Jr[Jr.DATA_LOSS=15]="DATA_LOSS";function cd(){return new TextEncoder}const bp=new oa([4294967295,4294967295],0);function wp(i){const e=cd().encode(i),n=new To;return n.update(e),new Uint8Array(n.digest())}function D(i){const e=new DataView(i.buffer),n=e.getUint32(0,!0),o=e.getUint32(4,!0),u=e.getUint32(8,!0),p=e.getUint32(12,!0);return[new oa([n,o],0),new oa([u,p],0)]}class g{constructor(e,n,o){if(this.bitmap=e,this.padding=n,this.hashCount=o,n<0||n>=8)throw new v(`Invalid padding: ${n}`);if(o<0)throw new v(`Invalid hash count: ${o}`);if(e.length>0&&0===this.hashCount)throw new v(`Invalid hash count: ${o}`);if(0===e.length&&0!==n)throw new v(`Invalid padding when bitmap length is 0: ${n}`);this.Te=8*e.length-n,this.Ee=oa.fromNumber(this.Te)}de(e,n,o){let u=e.add(n.multiply(oa.fromNumber(o)));return 1===u.compare(bp)&&(u=new oa([u.getBits(0),u.getBits(1)],0)),u.modulo(this.Ee).toNumber()}Ae(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.Te)return!1;const n=wp(e),[o,u]=D(n);for(let p=0;p<this.hashCount;p++){const I=this.de(o,u,p);if(!this.Ae(I))return!1}return!0}static create(e,n,o){const u=e%8==0?0:8-e%8,p=new Uint8Array(Math.ceil(e/8)),I=new g(p,u,n);return o.forEach(M=>I.insert(M)),I}insert(e){if(0===this.Te)return;const n=wp(e),[o,u]=D(n);for(let p=0;p<this.hashCount;p++){const I=this.de(o,u,p);this.Re(I)}}Re(e){const n=Math.floor(e/8);this.bitmap[n]|=1<<e%8}}class v extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class C{constructor(e,n,o,u,p){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=o,this.documentUpdates=u,this.resolvedLimboDocuments=p}static createSynthesizedRemoteEventForCurrentChange(e,n,o){const u=new Map;return u.set(e,$.createSynthesizedTargetChangeForCurrentChange(e,n,o)),new C(un.min(),u,new hi(Zn),Co(),gr())}}class ${constructor(e,n,o,u,p){this.resumeToken=e,this.current=n,this.addedDocuments=o,this.modifiedDocuments=u,this.removedDocuments=p}static createSynthesizedTargetChangeForCurrentChange(e,n,o){return new $(o,n,gr(),gr(),gr())}}class X{constructor(e,n,o,u){this.Ve=e,this.removedTargetIds=n,this.key=o,this.me=u}}class De{constructor(e,n){this.targetId=e,this.fe=n}}class We{constructor(e,n,o=Bs.EMPTY_BYTE_STRING,u=null){this.state=e,this.targetIds=n,this.resumeToken=o,this.cause=u}}class gt{constructor(){this.ge=0,this.pe=yn(),this.ye=Bs.EMPTY_BYTE_STRING,this.we=!1,this.Se=!0}get current(){return this.we}get resumeToken(){return this.ye}get be(){return 0!==this.ge}get De(){return this.Se}Ce(e){e.approximateByteSize()>0&&(this.Se=!0,this.ye=e)}ve(){let e=gr(),n=gr(),o=gr();return this.pe.forEach((u,p)=>{switch(p){case 0:e=e.add(u);break;case 2:n=n.add(u);break;case 1:o=o.add(u);break;default:on()}}),new $(this.ye,this.we,e,n,o)}Fe(){this.Se=!1,this.pe=yn()}Me(e,n){this.Se=!0,this.pe=this.pe.insert(e,n)}xe(e){this.Se=!0,this.pe=this.pe.remove(e)}Oe(){this.ge+=1}Ne(){this.ge-=1}Be(){this.Se=!0,this.we=!0}}class rn{constructor(e){this.Le=e,this.ke=new Map,this.qe=Co(),this.Qe=_n(),this.Ke=new hi(Zn)}$e(e){for(const n of e.Ve)e.me&&e.me.isFoundDocument()?this.Ue(n,e.me):this.We(n,e.key,e.me);for(const n of e.removedTargetIds)this.We(n,e.key,e.me)}Ge(e){this.forEachTarget(e,n=>{const o=this.ze(n);switch(e.state){case 0:this.je(n)&&o.Ce(e.resumeToken);break;case 1:o.Ne(),o.be||o.Fe(),o.Ce(e.resumeToken);break;case 2:o.Ne(),o.be||this.removeTarget(n);break;case 3:this.je(n)&&(o.Be(),o.Ce(e.resumeToken));break;case 4:this.je(n)&&(this.He(n),o.Ce(e.resumeToken));break;default:on()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ke.forEach((o,u)=>{this.je(u)&&n(u)})}Je(e){const n=e.targetId,o=e.fe.count,u=this.Ye(n);if(u){const p=u.target;if(Eu(p))if(0===o){const I=new Zt(p.path);this.We(n,I,ur.newNoDocument(I,un.min()))}else vn(1===o);else{const I=this.Ze(n);if(I!==o){const M=this.Xe(e),U=M?this.et(M,e,I):1;0!==U&&(this.He(n),this.Ke=this.Ke.insert(n,2===U?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch"))}}}}Xe(e){const n=e.fe.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:o="",padding:u=0},hashCount:p=0}=n;let I,M;try{I=Sr(o).toUint8Array()}catch(U){if(U instanceof Yu)return bo("Decoding the base64 bloom filter in existence filter failed ("+U.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw U}try{M=new g(I,u,p)}catch(U){return bo(U instanceof v?"BloomFilter error: ":"Applying bloom filter failed: ",U),null}return 0===M.Te?null:M}et(e,n,o){return n.fe.count===o-this.rt(e,n.targetId)?0:2}rt(e,n){const o=this.Le.getRemoteKeysForTarget(n);let u=0;return o.forEach(p=>{const I=this.Le.nt(),M=`projects/${I.projectId}/databases/${I.database}/documents/${p.path.canonicalString()}`;e.mightContain(M)||(this.We(n,p,null),u++)}),u}it(e){const n=new Map;this.ke.forEach((p,I)=>{const M=this.Ye(I);if(M){if(p.current&&Eu(M.target)){const U=new Zt(M.target.path);null!==this.qe.get(U)||this.st(I,U)||this.We(I,U,ur.newNoDocument(U,e))}p.De&&(n.set(I,p.ve()),p.Fe())}});let o=gr();this.Qe.forEach((p,I)=>{let M=!0;I.forEachWhile(U=>{const W=this.Ye(U);return!W||"TargetPurposeLimboResolution"===W.purpose||(M=!1,!1)}),M&&(o=o.add(p))}),this.qe.forEach((p,I)=>I.setReadTime(e));const u=new C(e,n,this.Ke,this.qe,o);return this.qe=Co(),this.Qe=_n(),this.Ke=new hi(Zn),u}Ue(e,n){if(!this.je(e))return;const o=this.st(e,n.key)?2:0;this.ze(e).Me(n.key,o),this.qe=this.qe.insert(n.key,n),this.Qe=this.Qe.insert(n.key,this.ot(n.key).add(e))}We(e,n,o){if(!this.je(e))return;const u=this.ze(e);this.st(e,n)?u.Me(n,1):u.xe(n),this.Qe=this.Qe.insert(n,this.ot(n).delete(e)),o&&(this.qe=this.qe.insert(n,o))}removeTarget(e){this.ke.delete(e)}Ze(e){const n=this.ze(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Oe(e){this.ze(e).Oe()}ze(e){let n=this.ke.get(e);return n||(n=new gt,this.ke.set(e,n)),n}ot(e){let n=this.Qe.get(e);return n||(n=new Qr(Zn),this.Qe=this.Qe.insert(e,n)),n}je(e){const n=null!==this.Ye(e);return n||Tt("WatchChangeAggregator","Detected inactive target",e),n}Ye(e){const n=this.ke.get(e);return n&&n.be?null:this.Le._t(e)}He(e){this.ke.set(e,new gt),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.We(e,n,null)})}st(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function _n(){return new hi(Zt.comparator)}function yn(){return new hi(Zt.comparator)}const cs={asc:"ASCENDING",desc:"DESCENDING"},Nl={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Au={and:"AND",or:"OR"};class ru{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function iu(i,e){return i.useProto3Json||Ba(e)?e:{value:e}}function Su(i,e){return i.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Ef(i,e){return i.useProto3Json?e.toBase64():e.toUint8Array()}function Tf(i,e){return Su(i,e.toTimestamp())}function ds(i){return vn(!!i),un.fromTimestamp(function(n){const o=Yl(n);return new jr(o.seconds,o.nanos)}(i))}function Fc(i,e){return(o=i,new lr(["projects",o.projectId,"databases",o.database])).child("documents").child(e).canonicalString();var o}function Ru(i){const e=lr.fromString(i);return vn($m(e)),e}function dd(i,e){return Fc(i.databaseId,e.path)}function pl(i,e){const n=Ru(e);if(n.get(1)!==i.databaseId.projectId)throw new It(nt.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+i.databaseId.projectId);if(n.get(3)!==i.databaseId.database)throw new It(nt.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+i.databaseId.database);return new Zt(Rg(n))}function $d(i,e){return Fc(i.databaseId,e)}function Dp(i){const e=Ru(i);return 4===e.length?lr.emptyPath():Rg(e)}function Lc(i){return new lr(["projects",i.databaseId.projectId,"databases",i.databaseId.database]).canonicalString()}function Rg(i){return vn(i.length>4&&"documents"===i.get(4)),i.popFirst(5)}function Cp(i,e,n){return{name:dd(i,e),fields:n.value.mapValue.fields}}function Ap(i,e,n){const o=pl(i,e.name),u=ds(e.updateTime),p=e.createTime?ds(e.createTime):un.min(),I=new bs({mapValue:{fields:e.fields}}),M=ur.newFoundDocument(o,u,p,I);return n&&M.setHasCommittedMutations(),n?M.setHasCommittedMutations():M}function bf(i,e){let n;if(e instanceof Ha)n={update:Cp(i,e.key,e.value)};else if(e instanceof Cu)n={delete:dd(i,e.key)};else if(e instanceof Rl)n={update:Cp(i,e.key,e.data),updateMask:ny(e.fieldMask)};else{if(!(e instanceof Wo))return on();n={verify:dd(i,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(o=>function(p,I){const M=I.transform;if(M instanceof $o)return{fieldPath:I.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(M instanceof wa)return{fieldPath:I.field.canonicalString(),appendMissingElements:{values:M.elements}};if(M instanceof Da)return{fieldPath:I.field.canonicalString(),removeAllFromArray:{values:M.elements}};if(M instanceof Ca)return{fieldPath:I.field.canonicalString(),increment:M.Ie};throw on()}(0,o))),e.precondition.isNone||(n.currentDocument=void 0!==(p=e.precondition).updateTime?{updateTime:Tf(i,p.updateTime)}:void 0!==p.exists?{exists:p.exists}:on()),n;var p}function wf(i,e){const n=e.currentDocument?void 0!==(p=e.currentDocument).updateTime?Fi.updateTime(ds(p.updateTime)):void 0!==p.exists?Fi.exists(p.exists):Fi.none():Fi.none(),o=e.updateTransforms?e.updateTransforms.map(u=>function(I,M){let U=null;"setToServerValue"in M?(vn("REQUEST_TIME"===M.setToServerValue),U=new $o):"appendMissingElements"in M?U=new wa(M.appendMissingElements.values||[]):"removeAllFromArray"in M?U=new Da(M.removeAllFromArray.values||[]):"increment"in M?U=new Ca(I,M.increment):on();const W=vi.fromServerFormat(M.fieldPath);return new ad(W,U)}(i,u)):[];var p;if(e.update){const u=pl(i,e.update.name),p=new bs({mapValue:{fields:e.update.fields}});if(e.updateMask){const I=new la((e.updateMask.fieldPaths||[]).map(ee=>vi.fromServerFormat(ee)));return new Rl(u,p,I,n,o)}return new Ha(u,p,n,o)}if(e.delete){const u=pl(i,e.delete);return new Cu(u,n)}if(e.verify){const u=pl(i,e.verify);return new Wo(u,n)}return on()}function Pg(i,e){return{documents:[$d(i,e.path)]}}function Df(i,e){const n={structuredQuery:{}},o=e.path;null!==e.collectionGroup?(n.parent=$d(i,o),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=$d(i,o.popLast()),n.structuredQuery.from=[{collectionId:o.lastSegment()}]);const u=function(U){if(0!==U.length)return xg(Kr.create(U,"and"))}(e.filters);u&&(n.structuredQuery.where=u);const p=function(U){if(0!==U.length)return U.map(W=>{return{field:zd((fe=W).field),direction:Np(fe.dir)};var fe})}(e.orderBy);p&&(n.structuredQuery.orderBy=p);const I=iu(i,e.limit);return null!==I&&(n.structuredQuery.limit=I),e.startAt&&(n.structuredQuery.startAt={before:(U=e.startAt).inclusive,values:U.position}),e.endAt&&(n.structuredQuery.endAt=function(U){return{before:!U.inclusive,values:U.position}}(e.endAt)),n;var U}function Rp(i){let e=Dp(i.parent);const n=i.structuredQuery,o=n.from?n.from.length:0;let u=null;if(o>0){vn(1===o);const ee=n.from[0];ee.allDescendants?u=ee.collectionId:e=e.child(ee.collectionId)}let p=[];n.where&&(p=function(fe){const Me=Og(fe);return Me instanceof Kr&&eu(Me)?Me.getFilters():[Me]}(n.where));let I=[];n.orderBy&&(I=n.orderBy.map(Me=>{return new Us(Cf((Vt=Me).field),function(Qt){switch(Qt){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(Vt.direction));var Vt}));let M=null;n.limit&&(M=function(fe){let Me;return Me="object"==typeof fe?fe.value:fe,Ba(Me)?null:Me}(n.limit));let U=null;var fe;n.startAt&&(U=new dl((fe=n.startAt).values||[],!!fe.before));let W=null;return n.endAt&&(W=function(fe){return new dl(fe.values||[],!fe.before)}(n.endAt)),Ih(e,u,I,p,M,"F",U,W)}function Og(i){return void 0!==i.unaryFilter?function(n){switch(n.unaryFilter.op){case"IS_NAN":const o=Cf(n.unaryFilter.field);return vr.create(o,"==",{doubleValue:NaN});case"IS_NULL":const u=Cf(n.unaryFilter.field);return vr.create(u,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const p=Cf(n.unaryFilter.field);return vr.create(p,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const I=Cf(n.unaryFilter.field);return vr.create(I,"!=",{nullValue:"NULL_VALUE"});default:return on()}}(i):void 0!==i.fieldFilter?vr.create(Cf((n=i).fieldFilter.field),function(u){switch(u){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return on()}}(n.fieldFilter.op),n.fieldFilter.value):void 0!==i.compositeFilter?function(n){return Kr.create(n.compositeFilter.filters.map(o=>Og(o)),function(u){switch(u){case"AND":return"and";case"OR":return"or";default:return on()}}(n.compositeFilter.op))}(i):on();var n}function Np(i){return cs[i]}function mv(i){return Nl[i]}function Mg(i){return Au[i]}function zd(i){return{fieldPath:i.canonicalString()}}function Cf(i){return vi.fromServerFormat(i.fieldPath)}function xg(i){return i instanceof vr?function(n){if("=="===n.op){if(Jl(n.value))return{unaryFilter:{field:zd(n.field),op:"IS_NAN"}};if(Iu(n.value))return{unaryFilter:{field:zd(n.field),op:"IS_NULL"}}}else if("!="===n.op){if(Jl(n.value))return{unaryFilter:{field:zd(n.field),op:"IS_NOT_NAN"}};if(Iu(n.value))return{unaryFilter:{field:zd(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:zd(n.field),op:mv(n.op),value:n.value}}}(i):i instanceof Kr?function(n){const o=n.getFilters().map(u=>xg(u));return 1===o.length?o[0]:{compositeFilter:{op:Mg(n.op),filters:o}}}(i):on()}function ny(i){const e=[];return i.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function $m(i){return i.length>=4&&"projects"===i.get(0)&&"databases"===i.get(2)}class Pl{constructor(e,n,o,u,p=un.min(),I=un.min(),M=Bs.EMPTY_BYTE_STRING,U=null){this.target=e,this.targetId=n,this.purpose=o,this.sequenceNumber=u,this.snapshotVersion=p,this.lastLimboFreeSnapshotVersion=I,this.resumeToken=M,this.expectedCount=U}withSequenceNumber(e){return new Pl(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Pl(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Pl(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Pl(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class Pp{constructor(e){this.ut=e}}function ry(i,e){const n=e.key,o={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:kg(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())o.document={name:dd(p=i.ut,(I=e).key),fields:I.data.value.mapValue.fields,updateTime:Su(p,I.version.toTimestamp()),createTime:Su(p,I.createTime.toTimestamp())};else if(e.isNoDocument())o.noDocument={path:n.path.toArray(),readTime:Af(e.version)};else{if(!e.isUnknownDocument())return on();o.unknownDocument={path:n.path.toArray(),version:Af(e.version)}}var p,I;return o}function kg(i){const e=i.toTimestamp();return[e.seconds,e.nanoseconds]}function Af(i){const e=i.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Ch(i){const e=new jr(i.seconds,i.nanoseconds);return un.fromTimestamp(e)}function hd(i,e){const n=(e.baseMutations||[]).map(p=>wf(i.ut,p));for(let p=0;p<e.mutations.length-1;++p)p+1<e.mutations.length&&void 0!==e.mutations[p+1].transform&&(e.mutations[p].updateTransforms=e.mutations[p+1].transform.fieldTransforms,e.mutations.splice(p+1,1),++p);const o=e.mutations.map(p=>wf(i.ut,p)),u=jr.fromMillis(e.localWriteTimeMs);return new jd(e.batchId,u,n,o)}function Op(i){const e=Ch(i.readTime),n=void 0!==i.lastLimboFreeSnapshotVersion?Ch(i.lastLimboFreeSnapshotVersion):un.min();let o;return o=void 0!==i.query.documents?(vn(1===(p=i.query).documents.length),w(Mc(Dp(p.documents[0])))):function(p){return w(Rp(p))}(i.query),new Pl(o,i.targetId,"TargetPurposeListen",i.lastListenSequenceNumber,e,n,Bs.fromBase64String(i.resumeToken));var p}function Ah(i,e){const n=Af(e.snapshotVersion),o=Af(e.lastLimboFreeSnapshotVersion);let u;u=Eu(e.target)?Pg(i.ut,e.target):Df(i.ut,e.target);const p=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:ja(e.target),readTime:n,resumeToken:p,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:o,query:u}}function Sf(i){const e=Rp({parent:i.parent,structuredQuery:i.structuredQuery});return"LAST"===i.limitType?ce(e,e.limit,"L"):e}function Sh(i,e){return new Hd(e.largestBatchId,wf(i.ut,e.overlayMutation))}function zm(i,e){const n=e.path.lastSegment();return[i,Ts(e.path.popLast()),n]}function Wm(i,e,n,o){return{indexId:i,uid:e.uid||"",sequenceNumber:n,readTime:Af(o.readTime),documentKey:Ts(o.documentKey.path),largestBatchId:o.largestBatchId}}class iy{getBundleMetadata(e,n){return qm(e).get(n).next(o=>{if(o)return{id:(p=o).bundleId,createTime:Ch(p.createTime),version:p.version};var p})}saveBundleMetadata(e,n){return qm(e).put({bundleId:(u=n).id,createTime:Af(ds(u.createTime)),version:u.version});var u}getNamedQuery(e,n){return Km(e).get(n).next(o=>{if(o)return{name:(p=o).name,query:Sf(p.bundledQuery),readTime:Ch(p.readTime)};var p})}saveNamedQuery(e,n){return Km(e).put({name:(u=n).name,readTime:Af(ds(u.readTime)),bundledQuery:u.bundledQuery});var u}}function qm(i){return as(i,"bundles")}function Km(i){return as(i,"namedQueries")}class Fg{constructor(e,n){this.serializer=e,this.userId=n}static ct(e,n){return new Fg(e,n.uid||"")}getOverlay(e,n){return Mp(e).get(zm(this.userId,n)).next(o=>o?Sh(this.serializer,o):null)}getOverlays(e,n){const o=Rr();return V.forEach(n,u=>this.getOverlay(e,u).next(p=>{null!==p&&o.set(u,p)})).next(()=>o)}saveOverlays(e,n,o){const u=[];return o.forEach((p,I)=>{const M=new Hd(n,I);u.push(this.lt(e,M))}),V.waitFor(u)}removeOverlaysForBatchId(e,n,o){const u=new Set;n.forEach(I=>u.add(Ts(I.getCollectionPath())));const p=[];return u.forEach(I=>{const M=IDBKeyRange.bound([this.userId,I,o],[this.userId,I,o+1],!1,!0);p.push(Mp(e).H("collectionPathOverlayIndex",M))}),V.waitFor(p)}getOverlaysForCollection(e,n,o){const u=Rr(),p=Ts(n),I=IDBKeyRange.bound([this.userId,p,o],[this.userId,p,Number.POSITIVE_INFINITY],!0);return Mp(e).W("collectionPathOverlayIndex",I).next(M=>{for(const U of M){const W=Sh(this.serializer,U);u.set(W.getKey(),W)}return u})}getOverlaysForCollectionGroup(e,n,o,u){const p=Rr();let I;const M=IDBKeyRange.bound([this.userId,n,o],[this.userId,n,Number.POSITIVE_INFINITY],!0);return Mp(e).Y({index:"collectionGroupOverlayIndex",range:M},(U,W,ee)=>{const fe=Sh(this.serializer,W);p.size()<u||fe.largestBatchId===I?(p.set(fe.getKey(),fe),I=fe.largestBatchId):ee.done()}).next(()=>p)}lt(e,n){return Mp(e).put(function(u,p,I){const[M,U,W]=zm(p,I.mutation.key);return{userId:p,collectionPath:U,documentId:W,collectionGroup:I.mutation.key.getCollectionGroup(),largestBatchId:I.largestBatchId,overlayMutation:bf(u.ut,I.mutation)}}(this.serializer,this.userId,n))}}function Mp(i){return as(i,"documentOverlays")}class Wd{constructor(){}ht(e,n){this.Pt(e,n),n.It()}Pt(e,n){if("nullValue"in e)this.Tt(n,5);else if("booleanValue"in e)this.Tt(n,10),n.Et(e.booleanValue?1:0);else if("integerValue"in e)this.Tt(n,15),n.Et(ai(e.integerValue));else if("doubleValue"in e){const o=ai(e.doubleValue);isNaN(o)?this.Tt(n,13):(this.Tt(n,15),va(o)?n.Et(0):n.Et(o))}else if("timestampValue"in e){const o=e.timestampValue;this.Tt(n,20),"string"==typeof o?n.dt(o):(n.dt(`${o.seconds||""}`),n.Et(o.nanos||0))}else if("stringValue"in e)this.At(e.stringValue,n),this.Rt(n);else if("bytesValue"in e)this.Tt(n,30),n.Vt(Sr(e.bytesValue)),this.Rt(n);else if("referenceValue"in e)this.ft(e.referenceValue,n);else if("geoPointValue"in e){const o=e.geoPointValue;this.Tt(n,45),n.Et(o.latitude||0),n.Et(o.longitude||0)}else"mapValue"in e?ed(e)?this.Tt(n,Number.MAX_SAFE_INTEGER):(this.gt(e.mapValue,n),this.Rt(n)):"arrayValue"in e?(this.yt(e.arrayValue,n),this.Rt(n)):on()}At(e,n){this.Tt(n,25),this.wt(e,n)}wt(e,n){n.dt(e)}gt(e,n){const o=e.fields||{};this.Tt(n,55);for(const u of Object.keys(o))this.At(u,n),this.Pt(o[u],n)}yt(e,n){const o=e.values||[];this.Tt(n,50);for(const u of o)this.Pt(u,n)}ft(e,n){this.Tt(n,37),Zt.fromName(e).path.forEach(o=>{this.Tt(n,60),this.wt(o,n)})}Tt(e,n){e.Et(n)}Rt(e){e.Et(2)}}function _v(i){if(0===i)return 8;let e=0;return!(i>>4)&&(e+=4,i<<=4),!(i>>6)&&(e+=2,i<<=2),!(i>>7)&&(e+=1),e}function fd(i){const e=64-function(o){let u=0;for(let p=0;p<8;++p){const I=_v(255&o[p]);if(u+=I,8!==I)break}return u}(i);return Math.ceil(e/8)}Wd.St=new Wd;class Rh{constructor(){this.buffer=new Uint8Array(1024),this.position=0}bt(e){const n=e[Symbol.iterator]();let o=n.next();for(;!o.done;)this.Dt(o.value),o=n.next();this.Ct()}vt(e){const n=e[Symbol.iterator]();let o=n.next();for(;!o.done;)this.Ft(o.value),o=n.next();this.Mt()}xt(e){for(const n of e){const o=n.charCodeAt(0);if(o<128)this.Dt(o);else if(o<2048)this.Dt(960|o>>>6),this.Dt(128|63&o);else if(n<"\ud800"||"\udbff"<n)this.Dt(480|o>>>12),this.Dt(128|63&o>>>6),this.Dt(128|63&o);else{const u=n.codePointAt(0);this.Dt(240|u>>>18),this.Dt(128|63&u>>>12),this.Dt(128|63&u>>>6),this.Dt(128|63&u)}}this.Ct()}Ot(e){for(const n of e){const o=n.charCodeAt(0);if(o<128)this.Ft(o);else if(o<2048)this.Ft(960|o>>>6),this.Ft(128|63&o);else if(n<"\ud800"||"\udbff"<n)this.Ft(480|o>>>12),this.Ft(128|63&o>>>6),this.Ft(128|63&o);else{const u=n.codePointAt(0);this.Ft(240|u>>>18),this.Ft(128|63&u>>>12),this.Ft(128|63&u>>>6),this.Ft(128|63&u)}}this.Mt()}Nt(e){const n=this.Bt(e),o=fd(n);this.Lt(1+o),this.buffer[this.position++]=255&o;for(let u=n.length-o;u<n.length;++u)this.buffer[this.position++]=255&n[u]}kt(e){const n=this.Bt(e),o=fd(n);this.Lt(1+o),this.buffer[this.position++]=~(255&o);for(let u=n.length-o;u<n.length;++u)this.buffer[this.position++]=~(255&n[u])}qt(){this.Qt(255),this.Qt(255)}Kt(){this.$t(255),this.$t(255)}reset(){this.position=0}seed(e){this.Lt(e.length),this.buffer.set(e,this.position),this.position+=e.length}Ut(){return this.buffer.slice(0,this.position)}Bt(e){const n=function(p){const I=new DataView(new ArrayBuffer(8));return I.setFloat64(0,p,!1),new Uint8Array(I.buffer)}(e),o=0!=(128&n[0]);n[0]^=o?255:128;for(let u=1;u<n.length;++u)n[u]^=o?255:0;return n}Dt(e){const n=255&e;0===n?(this.Qt(0),this.Qt(255)):255===n?(this.Qt(255),this.Qt(0)):this.Qt(n)}Ft(e){const n=255&e;0===n?(this.$t(0),this.$t(255)):255===n?(this.$t(255),this.$t(0)):this.$t(e)}Ct(){this.Qt(0),this.Qt(1)}Mt(){this.$t(0),this.$t(1)}Qt(e){this.Lt(1),this.buffer[this.position++]=e}$t(e){this.Lt(1),this.buffer[this.position++]=~e}Lt(e){const n=e+this.position;if(n<=this.buffer.length)return;let o=2*this.buffer.length;o<n&&(o=n);const u=new Uint8Array(o);u.set(this.buffer),this.buffer=u}}class yv{constructor(e){this.Wt=e}Vt(e){this.Wt.bt(e)}dt(e){this.Wt.xt(e)}Et(e){this.Wt.Nt(e)}It(){this.Wt.qt()}}class N0{constructor(e){this.Wt=e}Vt(e){this.Wt.vt(e)}dt(e){this.Wt.Ot(e)}Et(e){this.Wt.kt(e)}It(){this.Wt.Kt()}}class Lg{constructor(){this.Wt=new Rh,this.Gt=new yv(this.Wt),this.zt=new N0(this.Wt)}seed(e){this.Wt.seed(e)}jt(e){return 0===e?this.Gt:this.zt}Ut(){return this.Wt.Ut()}reset(){this.Wt.reset()}}class Rf{constructor(e,n,o,u){this.indexId=e,this.documentKey=n,this.arrayValue=o,this.directionalValue=u}Ht(){const e=this.directionalValue.length,n=0===e||255===this.directionalValue[e-1]?e+1:e,o=new Uint8Array(n);return o.set(this.directionalValue,0),n!==e?o.set([0],this.directionalValue.length):++o[o.length-1],new Rf(this.indexId,this.documentKey,this.arrayValue,o)}}function Nh(i,e){let n=i.indexId-e.indexId;return 0!==n?n:(n=Ym(i.arrayValue,e.arrayValue),0!==n?n:(n=Ym(i.directionalValue,e.directionalValue),0!==n?n:Zt.comparator(i.documentKey,e.documentKey)))}function Ym(i,e){for(let n=0;n<i.length&&n<e.length;++n){const o=i[n]-e[n];if(0!==o)return o}return i.length-e.length}class Zm{constructor(e){this.Jt=new Qr((n,o)=>vi.comparator(n.field,o.field)),this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Yt=e.orderBy,this.Zt=[];for(const n of e.filters){const o=n;o.isInequality()?this.Jt=this.Jt.add(o):this.Zt.push(o)}}get Xt(){return this.Jt.size>1}en(e){if(vn(e.collectionGroup===this.collectionId),this.Xt)return!1;const n=ya(e);if(void 0!==n&&!this.tn(n))return!1;const o=aa(e);let u=new Set,p=0,I=0;for(;p<o.length&&this.tn(o[p]);++p)u=u.add(o[p].fieldPath.canonicalString());if(p===o.length)return!0;if(this.Jt.size>0){const M=this.Jt.getIterator().getNext();if(!u.has(M.field.canonicalString())){const U=o[p];if(!this.nn(M,U)||!this.rn(this.Yt[I++],U))return!1}++p}for(;p<o.length;++p)if(I>=this.Yt.length||!this.rn(this.Yt[I++],o[p]))return!1;return!0}sn(){if(this.Xt)return null;let e=new Qr(vi.comparator);const n=[];for(const o of this.Zt)if(!o.field.isKeyField())if("array-contains"===o.op||"array-contains-any"===o.op)n.push(new uo(o.field,2));else{if(e.has(o.field))continue;e=e.add(o.field),n.push(new uo(o.field,0))}for(const o of this.Yt)o.field.isKeyField()||e.has(o.field)||(e=e.add(o.field),n.push(new uo(o.field,"asc"===o.dir?0:1)));return new Ri(Ri.UNKNOWN_ID,this.collectionId,n,ju.empty())}tn(e){for(const n of this.Zt)if(this.nn(n,e))return!0;return!1}nn(e,n){return!(void 0===e||!e.field.isEqual(n.fieldPath))&&2===n.kind==("array-contains"===e.op||"array-contains-any"===e.op)}rn(e,n){return!!e.field.isEqual(n.fieldPath)&&(0===n.kind&&"asc"===e.dir||1===n.kind&&"desc"===e.dir)}}function sy(i){var e,n;if(vn(i instanceof vr||i instanceof Kr),i instanceof vr){if(i instanceof nu){const u=(null===(n=null===(e=i.value.arrayValue)||void 0===e?void 0:e.values)||void 0===n?void 0:n.map(p=>vr.create(i.field,"==",p)))||[];return Kr.create(u,"or")}return i}const o=i.filters.map(u=>sy(u));return Kr.create(o,i.op)}function vv(i){if(0===i.getFilters().length)return[];const e=ac(sy(i));return vn(Vg(e)),Qm(e)||xp(e)?[e]:e.getFilters()}function Qm(i){return i instanceof vr}function xp(i){return i instanceof Kr&&eu(i)}function Vg(i){return Qm(i)||xp(i)||function(n){if(n instanceof Kr&&nc(n)){for(const o of n.getFilters())if(!Qm(o)&&!xp(o))return!1;return!0}return!1}(i)}function ac(i){if(vn(i instanceof vr||i instanceof Kr),i instanceof vr)return i;if(1===i.filters.length)return ac(i.filters[0]);const e=i.filters.map(o=>ac(o));let n=Kr.create(e,i.op);return n=Nf(n),Vg(n)?n:(vn(n instanceof Kr),vn(tc(n)),vn(n.filters.length>1),n.filters.reduce((o,u)=>Ph(o,u)))}function Ph(i,e){let n;return vn(i instanceof vr||i instanceof Kr),vn(e instanceof vr||e instanceof Kr),n=i instanceof vr?e instanceof vr?Kr.create([i,e],"and"):Jm(i,e):e instanceof vr?Jm(e,i):function(u,p){if(vn(u.filters.length>0&&p.filters.length>0),tc(u)&&tc(p))return tu(u,p.getFilters());const I=nc(u)?u:p,M=nc(u)?p:u,U=I.filters.map(W=>Ph(W,M));return Kr.create(U,"or")}(i,e),Nf(n)}function Jm(i,e){if(tc(e))return tu(e,i.getFilters());{const n=e.filters.map(o=>Ph(i,o));return Kr.create(n,"or")}}function Nf(i){if(vn(i instanceof vr||i instanceof Kr),i instanceof vr)return i;const e=i.getFilters();if(1===e.length)return Nf(e[0]);if(yh(i))return i;const n=e.map(u=>Nf(u)),o=[];return n.forEach(u=>{u instanceof vr?o.push(u):u instanceof Kr&&(u.op===i.op?o.push(...u.filters):o.push(u))}),1===o.length?o[0]:Kr.create(o,i.op)}class oy{constructor(){this.on=new ay}addToCollectionParentIndex(e,n){return this.on.add(n),V.resolve()}getCollectionParents(e,n){return V.resolve(this.on.getEntries(n))}addFieldIndex(e,n){return V.resolve()}deleteFieldIndex(e,n){return V.resolve()}deleteAllFieldIndexes(e){return V.resolve()}createTargetIndexes(e,n){return V.resolve()}getDocumentsMatchingTarget(e,n){return V.resolve(null)}getIndexType(e,n){return V.resolve(0)}getFieldIndexes(e,n){return V.resolve([])}getNextCollectionGroupToUpdate(e){return V.resolve(null)}getMinOffset(e,n){return V.resolve(Do.min())}getMinOffsetFromCollectionGroup(e,n){return V.resolve(Do.min())}updateCollectionGroup(e,n,o){return V.resolve()}updateIndexEntries(e,n){return V.resolve()}}class ay{constructor(){this.index={}}add(e){const n=e.lastSegment(),o=e.popLast(),u=this.index[n]||new Qr(lr.comparator),p=!u.has(o);return this.index[n]=u.add(o),p}has(e){const n=e.lastSegment(),o=e.popLast(),u=this.index[n];return u&&u.has(o)}getEntries(e){return(this.index[e]||new Qr(lr.comparator)).toArray()}}const Xm=new Uint8Array(0);class P0{constructor(e,n){this.user=e,this.databaseId=n,this._n=new ay,this.an=new no(o=>ja(o),(o,u)=>sc(o,u)),this.uid=e.uid||""}addToCollectionParentIndex(e,n){if(!this._n.has(n)){const o=n.lastSegment(),u=n.popLast();e.addOnCommittedListener(()=>{this._n.add(n)});const p={collectionId:o,parent:Ts(u)};return Pf(e).put(p)}return V.resolve()}getCollectionParents(e,n){const o=[],u=IDBKeyRange.bound([n,""],[Qc(n),""],!1,!0);return Pf(e).W(u).next(p=>{for(const I of p){if(I.collectionId!==n)break;o.push(jo(I.parent))}return o})}addFieldIndex(e,n){const o=Bg(e),u={indexId:(M=n).indexId,collectionGroup:M.collectionGroup,fields:M.fields.map(U=>[U.fieldPath.canonicalString(),U.kind])};var M;delete u.indexId;const p=o.add(u);if(n.indexState){const I=Of(e);return p.next(M=>{I.put(Wm(M,this.user,n.indexState.sequenceNumber,n.indexState.offset))})}return p.next()}deleteFieldIndex(e,n){const o=Bg(e),u=Of(e),p=qd(e);return o.delete(n.indexId).next(()=>u.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0))).next(()=>p.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){const n=Bg(e),o=qd(e),u=Of(e);return n.H().next(()=>o.H()).next(()=>u.H())}createTargetIndexes(e,n){return V.forEach(this.un(n),o=>this.getIndexType(e,o).next(u=>{if(0===u||1===u){const p=new Zm(o).sn();if(null!=p)return this.addFieldIndex(e,p)}}))}getDocumentsMatchingTarget(e,n){const o=qd(e);let u=!0;const p=new Map;return V.forEach(this.un(n),I=>this.cn(e,I).next(M=>{u&&(u=!!M),p.set(I,M)})).next(()=>{if(u){let I=gr();const M=[];return V.forEach(p,(U,W)=>{var Gn;Tt("IndexedDbIndexManager",`Using index ${Gn=U,`id=${Gn.indexId}|cg=${Gn.collectionGroup}|f=${Gn.fields.map(Hr=>`${Hr.fieldPath}:${Hr.kind}`).join(",")}`} to execute ${ja(n)}`);const ee=function(Gn,Hr){const mi=ya(Hr);if(void 0===mi)return null;for(const Ei of Tu(Gn,mi.fieldPath))switch(Ei.op){case"array-contains-any":return Ei.value.arrayValue.values||[];case"array-contains":return[Ei.value]}return null}(W,U),fe=function(Gn,Hr){const mi=new Map;for(const Ei of aa(Hr))for(const No of Tu(Gn,Ei.fieldPath))switch(No.op){case"==":case"in":mi.set(Ei.fieldPath.canonicalString(),No.value);break;case"not-in":case"!=":return mi.set(Ei.fieldPath.canonicalString(),No.value),Array.from(mi.values())}return null}(W,U),Me=function(Gn,Hr){const mi=[];let Ei=!0;for(const No of aa(Hr)){const qc=0===No.kind?Fd(Gn,No.fieldPath,Gn.startAt):vh(Gn,No.fieldPath,Gn.startAt);mi.push(qc.value),Ei&&(Ei=qc.inclusive)}return new dl(mi,Ei)}(W,U),tt=function(Gn,Hr){const mi=[];let Ei=!0;for(const No of aa(Hr)){const qc=0===No.kind?vh(Gn,No.fieldPath,Gn.endAt):Fd(Gn,No.fieldPath,Gn.endAt);mi.push(qc.value),Ei&&(Ei=qc.inclusive)}return new dl(mi,Ei)}(W,U),Vt=this.ln(U,W,Me),Kt=this.ln(U,W,tt),Qt=this.hn(U,W,fe),Wn=this.Pn(U.indexId,ee,Vt,Me.inclusive,Kt,tt.inclusive,Qt);return V.forEach(Wn,sr=>o.j(sr,n.limit).next(Gn=>{Gn.forEach(Hr=>{const mi=Zt.fromSegments(Hr.documentKey);I.has(mi)||(I=I.add(mi),M.push(mi))})}))}).next(()=>M)}return V.resolve(null)})}un(e){let n=this.an.get(e);return n||(n=0===e.filters.length?[e]:vv(Kr.create(e.filters,"and")).map(o=>nd(e.path,e.collectionGroup,e.orderBy,o.getFilters(),e.limit,e.startAt,e.endAt)),this.an.set(e,n),n)}Pn(e,n,o,u,p,I,M){const U=(null!=n?n.length:1)*Math.max(o.length,p.length),W=U/(null!=n?n.length:1),ee=[];for(let fe=0;fe<U;++fe){const Me=n?this.In(n[fe/W]):Xm,tt=this.Tn(e,Me,o[fe%W],u),Vt=this.En(e,Me,p[fe%W],I),Kt=M.map(Qt=>this.Tn(e,Me,Qt,!0));ee.push(...this.createRange(tt,Vt,Kt))}return ee}Tn(e,n,o,u){const p=new Rf(e,Zt.empty(),n,o);return u?p:p.Ht()}En(e,n,o,u){const p=new Rf(e,Zt.empty(),n,o);return u?p.Ht():p}cn(e,n){const o=new Zm(n),u=null!=n.collectionGroup?n.collectionGroup:n.path.lastSegment();return this.getFieldIndexes(e,u).next(p=>{let I=null;for(const M of p)o.en(M)&&(!I||M.fields.length>I.fields.length)&&(I=M);return I})}getIndexType(e,n){let o=2;const u=this.un(n);return V.forEach(u,p=>this.cn(e,p).next(I=>{I?0!==o&&I.fields.length<function(U){let W=new Qr(vi.comparator),ee=!1;for(const fe of U.filters)for(const Me of fe.getFlattenedFilters())Me.field.isKeyField()||("array-contains"===Me.op||"array-contains-any"===Me.op?ee=!0:W=W.add(Me.field));for(const fe of U.orderBy)fe.field.isKeyField()||(W=W.add(fe.field));return W.size+(ee?1:0)}(p)&&(o=1):o=0})).next(()=>null!==n.limit&&u.length>1&&2===o?1:o)}dn(e,n){const o=new Lg;for(const u of aa(e)){const p=n.data.field(u.fieldPath);if(null==p)return null;const I=o.jt(u.kind);Wd.St.ht(p,I)}return o.Ut()}In(e){const n=new Lg;return Wd.St.ht(e,n.jt(0)),n.Ut()}An(e,n){const o=new Lg;return Wd.St.ht(Ql(this.databaseId,n),o.jt(function(p){const I=aa(p);return 0===I.length?0:I[I.length-1].kind}(e))),o.Ut()}hn(e,n,o){if(null===o)return[];let u=[];u.push(new Lg);let p=0;for(const I of aa(e)){const M=o[p++];for(const U of u)if(this.Rn(n,I.fieldPath)&&cl(M))u=this.Vn(u,I,M);else{const W=U.jt(I.kind);Wd.St.ht(M,W)}}return this.mn(u)}ln(e,n,o){return this.hn(e,n,o.position)}mn(e){const n=[];for(let o=0;o<e.length;++o)n[o]=e[o].Ut();return n}Vn(e,n,o){const u=[...e],p=[];for(const I of o.arrayValue.values||[])for(const M of u){const U=new Lg;U.seed(M.Ut()),Wd.St.ht(I,U.jt(n.kind)),p.push(U)}return p}Rn(e,n){return!!e.filters.find(o=>o instanceof vr&&o.field.isEqual(n)&&("in"===o.op||"not-in"===o.op))}getFieldIndexes(e,n){const o=Bg(e),u=Of(e);return(n?o.W("collectionGroupIndex",IDBKeyRange.bound(n,n)):o.W()).next(p=>{const I=[];return V.forEach(p,M=>u.get([M.indexId,this.uid]).next(U=>{I.push(function(ee,fe){const Me=fe?new ju(fe.sequenceNumber,new Do(Ch(fe.readTime),new Zt(jo(fe.documentKey)),fe.largestBatchId)):ju.empty(),tt=ee.fields.map(([Vt,Kt])=>new uo(vi.fromServerFormat(Vt),Kt));return new Ri(ee.indexId,ee.collectionGroup,tt,Me)}(M,U))})).next(()=>I)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(n=>0===n.length?null:(n.sort((o,u)=>{const p=o.indexState.sequenceNumber-u.indexState.sequenceNumber;return 0!==p?p:Zn(o.collectionGroup,u.collectionGroup)}),n[0].collectionGroup))}updateCollectionGroup(e,n,o){const u=Bg(e),p=Of(e);return this.fn(e).next(I=>u.W("collectionGroupIndex",IDBKeyRange.bound(n,n)).next(M=>V.forEach(M,U=>p.put(Wm(U.indexId,this.user,I,o)))))}updateIndexEntries(e,n){const o=new Map;return V.forEach(n,(u,p)=>{const I=o.get(u.collectionGroup);return(I?V.resolve(I):this.getFieldIndexes(e,u.collectionGroup)).next(M=>(o.set(u.collectionGroup,M),V.forEach(M,U=>this.gn(e,u,U).next(W=>{const ee=this.pn(p,U);return W.isEqual(ee)?V.resolve():this.yn(e,p,U,W,ee)}))))})}wn(e,n,o,u){return qd(e).put({indexId:u.indexId,uid:this.uid,arrayValue:u.arrayValue,directionalValue:u.directionalValue,orderedDocumentKey:this.An(o,n.key),documentKey:n.key.path.toArray()})}Sn(e,n,o,u){return qd(e).delete([u.indexId,this.uid,u.arrayValue,u.directionalValue,this.An(o,n.key),n.key.path.toArray()])}gn(e,n,o){const u=qd(e);let p=new Qr(Nh);return u.Y({index:"documentKeyIndex",range:IDBKeyRange.only([o.indexId,this.uid,this.An(o,n)])},(I,M)=>{p=p.add(new Rf(o.indexId,n,M.arrayValue,M.directionalValue))}).next(()=>p)}pn(e,n){let o=new Qr(Nh);const u=this.dn(n,e);if(null==u)return o;const p=ya(n);if(null!=p){const I=e.data.field(p.fieldPath);if(cl(I))for(const M of I.arrayValue.values||[])o=o.add(new Rf(n.indexId,e.key,this.In(M),u))}else o=o.add(new Rf(n.indexId,e.key,Xm,u));return o}yn(e,n,o,u,p){Tt("IndexedDbIndexManager","Updating index entries for document '%s'",n.key);const I=[];return function(U,W,ee,fe,Me){const tt=U.getIterator(),Vt=W.getIterator();let Kt=Ku(tt),Qt=Ku(Vt);for(;Kt||Qt;){let Wn=!1,sr=!1;if(Kt&&Qt){const Gn=ee(Kt,Qt);Gn<0?sr=!0:Gn>0&&(Wn=!0)}else null!=Kt?sr=!0:Wn=!0;Wn?(fe(Qt),Qt=Ku(Vt)):sr?(Me(Kt),Kt=Ku(tt)):(Kt=Ku(tt),Qt=Ku(Vt))}}(u,p,Nh,M=>{I.push(this.wn(e,n,o,M))},M=>{I.push(this.Sn(e,n,o,M))}),V.waitFor(I)}fn(e){let n=1;return Of(e).Y({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(o,u,p)=>{p.done(),n=u.sequenceNumber+1}).next(()=>n)}createRange(e,n,o){o=o.sort((I,M)=>Nh(I,M)).filter((I,M,U)=>!M||0!==Nh(I,U[M-1]));const u=[];u.push(e);for(const I of o){const M=Nh(I,e),U=Nh(I,n);if(0===M)u[0]=e.Ht();else if(M>0&&U<0)u.push(I),u.push(I.Ht());else if(U>0)break}u.push(n);const p=[];for(let I=0;I<u.length;I+=2){if(this.bn(u[I],u[I+1]))return[];p.push(IDBKeyRange.bound([u[I].indexId,this.uid,u[I].arrayValue,u[I].directionalValue,Xm,[]],[u[I+1].indexId,this.uid,u[I+1].arrayValue,u[I+1].directionalValue,Xm,[]]))}return p}bn(e,n){return Nh(e,n)>0}getMinOffsetFromCollectionGroup(e,n){return this.getFieldIndexes(e,n).next(e_)}getMinOffset(e,n){return V.mapArray(this.un(n),o=>this.cn(e,o).next(u=>u||on())).next(e_)}}function Pf(i){return as(i,"collectionParents")}function qd(i){return as(i,"indexEntries")}function Bg(i){return as(i,"indexConfiguration")}function Of(i){return as(i,"indexState")}function e_(i){vn(0!==i.length);let e=i[0].indexState.offset,n=e.largestBatchId;for(let o=1;o<i.length;o++){const u=i[o].indexState.offset;Hu(u,e)<0&&(e=u),n<u.largestBatchId&&(n=u.largestBatchId)}return new Do(e.readTime,e.documentKey,n)}const ly={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Ga{constructor(e,n,o){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=o}static withCacheSize(e){return new Ga(e,Ga.DEFAULT_COLLECTION_PERCENTILE,Ga.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function uy(i,e,n){const o=i.store("mutations"),u=i.store("documentMutations"),p=[],I=IDBKeyRange.only(n.batchId);let M=0;const U=o.Y({range:I},(ee,fe,Me)=>(M++,Me.delete()));p.push(U.next(()=>{vn(1===M)}));const W=[];for(const ee of n.mutations){const fe=Ia(e,ee.key.path,n.batchId);p.push(u.delete(fe)),W.push(ee.key)}return V.waitFor(p).next(()=>W)}function Ug(i){if(!i)return 0;let e;if(i.document)e=i.document;else if(i.unknownDocument)e=i.unknownDocument;else{if(!i.noDocument)throw on();e=i.noDocument}return JSON.stringify(e).length}Ga.DEFAULT_COLLECTION_PERCENTILE=10,Ga.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Ga.DEFAULT=new Ga(41943040,Ga.DEFAULT_COLLECTION_PERCENTILE,Ga.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Ga.DISABLED=new Ga(-1,0,0);class Oh{constructor(e,n,o,u){this.userId=e,this.serializer=n,this.indexManager=o,this.referenceDelegate=u,this.Dn={}}static ct(e,n,o,u){vn(""!==e.uid);const p=e.isAuthenticated()?e.uid:"";return new Oh(p,n,o,u)}checkEmpty(e){let n=!0;const o=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return pd(e).Y({index:"userMutationsIndex",range:o},(u,p,I)=>{n=!1,I.done()}).next(()=>n)}addMutationBatch(e,n,o,u){const p=Fn(e),I=pd(e);return I.add({}).next(M=>{vn("number"==typeof M);const U=new jd(M,n,o,u),W=function(tt,Vt,Kt){const Qt=Kt.baseMutations.map(sr=>bf(tt.ut,sr)),Wn=Kt.mutations.map(sr=>bf(tt.ut,sr));return{userId:Vt,batchId:Kt.batchId,localWriteTimeMs:Kt.localWriteTime.toMillis(),baseMutations:Qt,mutations:Wn}}(this.serializer,this.userId,U),ee=[];let fe=new Qr((Me,tt)=>Zn(Me.canonicalString(),tt.canonicalString()));for(const Me of u){const tt=Ia(this.userId,Me.key.path,M);fe=fe.add(Me.key.path.popLast()),ee.push(I.put(W)),ee.push(p.put(tt,mu))}return fe.forEach(Me=>{ee.push(this.indexManager.addToCollectionParentIndex(e,Me))}),e.addOnCommittedListener(()=>{this.Dn[M]=U.keys()}),V.waitFor(ee).next(()=>U)})}lookupMutationBatch(e,n){return pd(e).get(n).next(o=>o?(vn(o.userId===this.userId),hd(this.serializer,o)):null)}Cn(e,n){return this.Dn[n]?V.resolve(this.Dn[n]):this.lookupMutationBatch(e,n).next(o=>{if(o){const u=o.keys();return this.Dn[n]=u,u}return null})}getNextMutationBatchAfterBatchId(e,n){const o=n+1,u=IDBKeyRange.lowerBound([this.userId,o]);let p=null;return pd(e).Y({index:"userMutationsIndex",range:u},(I,M,U)=>{M.userId===this.userId&&(vn(M.batchId>=o),p=hd(this.serializer,M)),U.done()}).next(()=>p)}getHighestUnacknowledgedBatchId(e){const n=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let o=-1;return pd(e).Y({index:"userMutationsIndex",range:n,reverse:!0},(u,p,I)=>{o=p.batchId,I.done()}).next(()=>o)}getAllMutationBatches(e){const n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return pd(e).W("userMutationsIndex",n).next(o=>o.map(u=>hd(this.serializer,u)))}getAllMutationBatchesAffectingDocumentKey(e,n){const o=zl(this.userId,n.path),u=IDBKeyRange.lowerBound(o),p=[];return Fn(e).Y({range:u},(I,M,U)=>{const[W,ee,fe]=I,Me=jo(ee);if(W===this.userId&&n.path.isEqual(Me))return pd(e).get(fe).next(tt=>{if(!tt)throw on();vn(tt.userId===this.userId),p.push(hd(this.serializer,tt))});U.done()}).next(()=>p)}getAllMutationBatchesAffectingDocumentKeys(e,n){let o=new Qr(Zn);const u=[];return n.forEach(p=>{const I=zl(this.userId,p.path),M=IDBKeyRange.lowerBound(I),U=Fn(e).Y({range:M},(W,ee,fe)=>{const[Me,tt,Vt]=W,Kt=jo(tt);Me===this.userId&&p.path.isEqual(Kt)?o=o.add(Vt):fe.done()});u.push(U)}),V.waitFor(u).next(()=>this.vn(e,o))}getAllMutationBatchesAffectingQuery(e,n){const o=n.path,u=o.length+1,p=zl(this.userId,o),I=IDBKeyRange.lowerBound(p);let M=new Qr(Zn);return Fn(e).Y({range:I},(U,W,ee)=>{const[fe,Me,tt]=U,Vt=jo(Me);fe===this.userId&&o.isPrefixOf(Vt)?Vt.length===u&&(M=M.add(tt)):ee.done()}).next(()=>this.vn(e,M))}vn(e,n){const o=[],u=[];return n.forEach(p=>{u.push(pd(e).get(p).next(I=>{if(null===I)throw on();vn(I.userId===this.userId),o.push(hd(this.serializer,I))}))}),V.waitFor(u).next(()=>o)}removeMutationBatch(e,n){return uy(e.ae,this.userId,n).next(o=>(e.addOnCommittedListener(()=>{this.Fn(n.batchId)}),V.forEach(o,u=>this.referenceDelegate.markPotentiallyOrphaned(e,u))))}Fn(e){delete this.Dn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(n=>{if(!n)return V.resolve();const o=IDBKeyRange.lowerBound([this.userId]),u=[];return Fn(e).Y({range:o},(p,I,M)=>{if(p[0]===this.userId){const U=jo(p[1]);u.push(U)}else M.done()}).next(()=>{vn(0===u.length)})})}containsKey(e,n){return Mf(e,this.userId,n)}Mn(e){return cy(e).get(this.userId).next(n=>n||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function Mf(i,e,n){const o=zl(e,n.path),u=o[1],p=IDBKeyRange.lowerBound(o);let I=!1;return Fn(i).Y({range:p,J:!0},(M,U,W)=>{const[ee,fe,Me]=M;ee===e&&fe===u&&(I=!0),W.done()}).next(()=>I)}function pd(i){return as(i,"mutations")}function Fn(i){return as(i,"documentMutations")}function cy(i){return as(i,"mutationQueues")}class Ol{constructor(e){this.xn=e}next(){return this.xn+=2,this.xn}static On(){return new Ol(0)}static Nn(){return new Ol(-1)}}class dy{constructor(e,n){this.referenceDelegate=e,this.serializer=n}allocateTargetId(e){return this.Bn(e).next(n=>{const o=new Ol(n.highestTargetId);return n.highestTargetId=o.next(),this.Ln(e,n).next(()=>n.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Bn(e).next(n=>un.fromTimestamp(new jr(n.lastRemoteSnapshotVersion.seconds,n.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Bn(e).next(n=>n.highestListenSequenceNumber)}setTargetsMetadata(e,n,o){return this.Bn(e).next(u=>(u.highestListenSequenceNumber=n,o&&(u.lastRemoteSnapshotVersion=o.toTimestamp()),n>u.highestListenSequenceNumber&&(u.highestListenSequenceNumber=n),this.Ln(e,u)))}addTargetData(e,n){return this.kn(e,n).next(()=>this.Bn(e).next(o=>(o.targetCount+=1,this.qn(n,o),this.Ln(e,o))))}updateTargetData(e,n){return this.kn(e,n)}removeTargetData(e,n){return this.removeMatchingKeysForTargetId(e,n.targetId).next(()=>Mh(e).delete(n.targetId)).next(()=>this.Bn(e)).next(o=>(vn(o.targetCount>0),o.targetCount-=1,this.Ln(e,o)))}removeTargets(e,n,o){let u=0;const p=[];return Mh(e).Y((I,M)=>{const U=Op(M);U.sequenceNumber<=n&&null===o.get(U.targetId)&&(u++,p.push(this.removeTargetData(e,U)))}).next(()=>V.waitFor(p)).next(()=>u)}forEachTarget(e,n){return Mh(e).Y((o,u)=>{const p=Op(u);n(p)})}Bn(e){return kp(e).get("targetGlobalKey").next(n=>(vn(null!==n),n))}Ln(e,n){return kp(e).put("targetGlobalKey",n)}kn(e,n){return Mh(e).put(Ah(this.serializer,n))}qn(e,n){let o=!1;return e.targetId>n.highestTargetId&&(n.highestTargetId=e.targetId,o=!0),e.sequenceNumber>n.highestListenSequenceNumber&&(n.highestListenSequenceNumber=e.sequenceNumber,o=!0),o}getTargetCount(e){return this.Bn(e).next(n=>n.targetCount)}getTargetData(e,n){const o=ja(n),u=IDBKeyRange.bound([o,Number.NEGATIVE_INFINITY],[o,Number.POSITIVE_INFINITY]);let p=null;return Mh(e).Y({range:u,index:"queryTargetsIndex"},(I,M,U)=>{const W=Op(M);sc(n,W.target)&&(p=W,U.done())}).next(()=>p)}addMatchingKeys(e,n,o){const u=[],p=Vc(e);return n.forEach(I=>{const M=Ts(I.path);u.push(p.put({targetId:o,path:M})),u.push(this.referenceDelegate.addReference(e,o,I))}),V.waitFor(u)}removeMatchingKeys(e,n,o){const u=Vc(e);return V.forEach(n,p=>{const I=Ts(p.path);return V.waitFor([u.delete([o,I]),this.referenceDelegate.removeReference(e,o,p)])})}removeMatchingKeysForTargetId(e,n){const o=Vc(e),u=IDBKeyRange.bound([n],[n+1],!1,!0);return o.delete(u)}getMatchingKeysForTargetId(e,n){const o=IDBKeyRange.bound([n],[n+1],!1,!0),u=Vc(e);let p=gr();return u.Y({range:o,J:!0},(I,M,U)=>{const W=jo(I[1]),ee=new Zt(W);p=p.add(ee)}).next(()=>p)}containsKey(e,n){const o=Ts(n.path),u=IDBKeyRange.bound([o],[Qc(o)],!1,!0);let p=0;return Vc(e).Y({index:"documentTargetsIndex",J:!0,range:u},([I,M],U,W)=>{0!==I&&(p++,W.done())}).next(()=>p>0)}_t(e,n){return Mh(e).get(n).next(o=>o?Op(o):null)}}function Mh(i){return as(i,"targets")}function kp(i){return as(i,"targetGlobal")}function Vc(i){return as(i,"targetDocuments")}function t_([i,e],[n,o]){const u=Zn(i,n);return 0===u?Zn(e,o):u}class hy{constructor(e){this.Qn=e,this.buffer=new Qr(t_),this.Kn=0}$n(){return++this.Kn}Un(e){const n=[e,this.$n()];if(this.buffer.size<this.Qn)this.buffer=this.buffer.add(n);else{const o=this.buffer.last();t_(n,o)<0&&(this.buffer=this.buffer.delete(o).add(n))}}get maxValue(){return this.buffer.last()[0]}}class n_{constructor(e,n,o){this.garbageCollector=e,this.asyncQueue=n,this.localStore=o,this.Wn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Gn(6e4)}stop(){this.Wn&&(this.Wn.cancel(),this.Wn=null)}get started(){return null!==this.Wn}Gn(e){var n=this;Tt("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Wn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,Re.Z)(function*(){n.Wn=null;try{yield n.localStore.collectGarbage(n.garbageCollector)}catch(o){Ht(o)?Tt("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",o):yield A(o)}yield n.Gn(3e5)}))}}class fy{constructor(e,n){this.zn=e,this.params=n}calculateTargetCount(e,n){return this.zn.jn(e).next(o=>Math.floor(n/100*o))}nthSequenceNumber(e,n){if(0===n)return V.resolve(os._e);const o=new hy(n);return this.zn.forEachTarget(e,u=>o.Un(u.sequenceNumber)).next(()=>this.zn.Hn(e,u=>o.Un(u))).next(()=>o.maxValue)}removeTargets(e,n,o){return this.zn.removeTargets(e,n,o)}removeOrphanedDocuments(e,n){return this.zn.removeOrphanedDocuments(e,n)}collect(e,n){return-1===this.params.cacheSizeCollectionThreshold?(Tt("LruGarbageCollector","Garbage collection skipped; disabled"),V.resolve(ly)):this.getCacheSize(e).next(o=>o<this.params.cacheSizeCollectionThreshold?(Tt("LruGarbageCollector",`Garbage collection skipped; Cache size ${o} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),ly):this.Jn(e,n))}getCacheSize(e){return this.zn.getCacheSize(e)}Jn(e,n){let o,u,p,I,M,U,W;const ee=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(fe=>(fe>this.params.maximumSequenceNumbersToCollect?(Tt("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${fe}`),u=this.params.maximumSequenceNumbersToCollect):u=fe,I=Date.now(),this.nthSequenceNumber(e,u))).next(fe=>(o=fe,M=Date.now(),this.removeTargets(e,o,n))).next(fe=>(p=fe,U=Date.now(),this.removeOrphanedDocuments(e,o))).next(fe=>(W=Date.now(),jl()<=Pe.in.DEBUG&&Tt("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${I-ee}ms\n\tDetermined least recently used ${u} in `+(M-I)+`ms\n\tRemoved ${p} targets in `+(U-M)+`ms\n\tRemoved ${fe} documents in `+(W-U)+`ms\nTotal Duration: ${W-ee}ms`),V.resolve({didRun:!0,sequenceNumbersCollected:u,targetsRemoved:p,documentsRemoved:fe})))}}class Iv{constructor(e,n){this.db=e,this.garbageCollector=function jg(i,e){return new fy(i,e)}(this,n)}jn(e){const n=this.Yn(e);return this.db.getTargetCache().getTargetCount(e).next(o=>n.next(u=>o+u))}Yn(e){let n=0;return this.Hn(e,o=>{n++}).next(()=>n)}forEachTarget(e,n){return this.db.getTargetCache().forEachTarget(e,n)}Hn(e,n){return this.Zn(e,(o,u)=>n(u))}addReference(e,n,o){return r_(e,o)}removeReference(e,n,o){return r_(e,o)}removeTargets(e,n,o){return this.db.getTargetCache().removeTargets(e,n,o)}markPotentiallyOrphaned(e,n){return r_(e,n)}Xn(e,n){return function(u,p){let I=!1;return cy(u).Z(M=>Mf(u,M,p).next(U=>(U&&(I=!0),V.resolve(!U)))).next(()=>I)}(e,n)}removeOrphanedDocuments(e,n){const o=this.db.getRemoteDocumentCache().newChangeBuffer(),u=[];let p=0;return this.Zn(e,(I,M)=>{if(M<=n){const U=this.Xn(e,I).next(W=>{if(!W)return p++,o.getEntry(e,I).next(()=>(o.removeEntry(I,un.min()),Vc(e).delete([0,Ts(I.path)])))});u.push(U)}}).next(()=>V.waitFor(u)).next(()=>o.apply(e)).next(()=>p)}removeTarget(e,n){const o=n.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,o)}updateLimboDocument(e,n){return r_(e,n)}Zn(e,n){const o=Vc(e);let u,p=os._e;return o.Y({index:"documentTargetsIndex"},([I,M],{path:U,sequenceNumber:W})=>{0===I?(p!==os._e&&n(new Zt(jo(u)),p),p=W,u=U):p=os._e}).next(()=>{p!==os._e&&n(new Zt(jo(u)),p)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function r_(i,e){return Vc(i).put((u=i.currentSequenceNumber,{targetId:0,path:Ts(e.path),sequenceNumber:u}));var u}class xh{constructor(){this.changes=new no(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,ur.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const o=this.changes.get(n);return void 0!==o?V.resolve(o):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class xf{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,n,o){return gd(e).put(o)}removeEntry(e,n,o){return gd(e).delete(function(p,I){const M=p.path.toArray();return[M.slice(0,M.length-2),M[M.length-2],kg(I),M[M.length-1]]}(n,o))}updateMetadata(e,n){return this.getMetadata(e).next(o=>(o.byteSize+=n,this.er(e,o)))}getEntry(e,n){let o=ur.newInvalidDocument(n);return gd(e).Y({index:"documentKeyIndex",range:IDBKeyRange.only(kf(n))},(u,p)=>{o=this.tr(n,p)}).next(()=>o)}nr(e,n){let o={size:0,document:ur.newInvalidDocument(n)};return gd(e).Y({index:"documentKeyIndex",range:IDBKeyRange.only(kf(n))},(u,p)=>{o={document:this.tr(n,p),size:Ug(p)}}).next(()=>o)}getEntries(e,n){let o=Co();return this.rr(e,n,(u,p)=>{const I=this.tr(u,p);o=o.insert(u,I)}).next(()=>o)}ir(e,n){let o=Co(),u=new hi(Zt.comparator);return this.rr(e,n,(p,I)=>{const M=this.tr(p,I);o=o.insert(p,M),u=u.insert(p,Ug(I))}).next(()=>({documents:o,sr:u}))}rr(e,n,o){if(n.isEmpty())return V.resolve();let u=new Qr($g);n.forEach(U=>u=u.add(U));const p=IDBKeyRange.bound(kf(u.first()),kf(u.last())),I=u.getIterator();let M=I.getNext();return gd(e).Y({index:"documentKeyIndex",range:p},(U,W,ee)=>{const fe=Zt.fromSegments([...W.prefixPath,W.collectionGroup,W.documentId]);for(;M&&$g(M,fe)<0;)o(M,null),M=I.getNext();M&&M.isEqual(fe)&&(o(M,W),M=I.hasNext()?I.getNext():null),M?ee.U(kf(M)):ee.done()}).next(()=>{for(;M;)o(M,null),M=I.hasNext()?I.getNext():null})}getDocumentsMatchingQuery(e,n,o,u,p){const I=n.path,M=[I.popLast().toArray(),I.lastSegment(),kg(o.readTime),o.documentKey.path.isEmpty()?"":o.documentKey.path.lastSegment()],U=[I.popLast().toArray(),I.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return gd(e).W(IDBKeyRange.bound(M,U,!0)).next(W=>{p?.incrementDocumentReadCount(W.length);let ee=Co();for(const fe of W){const Me=this.tr(Zt.fromSegments(fe.prefixPath.concat(fe.collectionGroup,fe.documentId)),fe);Me.isFoundDocument()&&(pn(n,Me)||u.has(Me.key))&&(ee=ee.insert(Me.key,Me))}return ee})}getAllFromCollectionGroup(e,n,o,u){let p=Co();const I=Gg(n,o),M=Gg(n,Do.max());return gd(e).Y({index:"collectionGroupIndex",range:IDBKeyRange.bound(I,M,!0)},(U,W,ee)=>{const fe=this.tr(Zt.fromSegments(W.prefixPath.concat(W.collectionGroup,W.documentId)),W);p=p.insert(fe.key,fe),p.size===u&&ee.done()}).next(()=>p)}newChangeBuffer(e){return new i_(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(n=>n.byteSize)}getMetadata(e){return Fp(e).get("remoteDocumentGlobalKey").next(n=>(vn(!!n),n))}er(e,n){return Fp(e).put("remoteDocumentGlobalKey",n)}tr(e,n){if(n){const o=function Dh(i,e){let n;if(e.document)n=Ap(i.ut,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const o=Zt.fromSegments(e.noDocument.path),u=Ch(e.noDocument.readTime);n=ur.newNoDocument(o,u),e.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!e.unknownDocument)return on();{const o=Zt.fromSegments(e.unknownDocument.path),u=Ch(e.unknownDocument.version);n=ur.newUnknownDocument(o,u)}}return e.readTime&&n.setReadTime(function(u){const p=new jr(u[0],u[1]);return un.fromTimestamp(p)}(e.readTime)),n}(this.serializer,n);if(!o.isNoDocument()||!o.version.isEqual(un.min()))return o}return ur.newInvalidDocument(e)}}function Hg(i){return new xf(i)}class i_ extends xh{constructor(e,n){super(),this._r=e,this.trackRemovals=n,this.ar=new no(o=>o.toString(),(o,u)=>o.isEqual(u))}applyChanges(e){const n=[];let o=0,u=new Qr((p,I)=>Zn(p.canonicalString(),I.canonicalString()));return this.changes.forEach((p,I)=>{const M=this.ar.get(p);if(n.push(this._r.removeEntry(e,p,M.readTime)),I.isValidDocument()){const U=ry(this._r.serializer,I);u=u.add(p.path.popLast());const W=Ug(U);o+=W-M.size,n.push(this._r.addEntry(e,p,U))}else if(o-=M.size,this.trackRemovals){const U=ry(this._r.serializer,I.convertToNoDocument(un.min()));n.push(this._r.addEntry(e,p,U))}}),u.forEach(p=>{n.push(this._r.indexManager.addToCollectionParentIndex(e,p))}),n.push(this._r.updateMetadata(e,o)),V.waitFor(n)}getFromCache(e,n){return this._r.nr(e,n).next(o=>(this.ar.set(n,{size:o.size,readTime:o.document.readTime}),o.document))}getAllFromCache(e,n){return this._r.ir(e,n).next(({documents:o,sr:u})=>(u.forEach((p,I)=>{this.ar.set(p,{size:I,readTime:o.get(p).readTime})}),o))}}function Fp(i){return as(i,"remoteDocumentGlobal")}function gd(i){return as(i,"remoteDocumentsV14")}function kf(i){const e=i.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function Gg(i,e){const n=e.documentKey.path.toArray();return[i,kg(e.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function $g(i,e){const n=i.path.toArray(),o=e.path.toArray();let u=0;for(let p=0;p<n.length-2&&p<o.length-2;++p)if(u=Zn(n[p],o[p]),u)return u;return u=Zn(n.length,o.length),u||(u=Zn(n[n.length-2],o[o.length-2]),u||Zn(n[n.length-1],o[o.length-1]))}class Lp{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}class py{constructor(e,n,o,u){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=o,this.indexManager=u}getDocument(e,n){let o=null;return this.documentOverlayCache.getOverlay(e,n).next(u=>(o=u,this.remoteDocumentCache.getEntry(e,n))).next(u=>(null!==o&&bh(o.mutation,u,la.empty(),jr.now()),u))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(o=>this.getLocalViewOfDocuments(e,o,gr()).next(()=>o))}getLocalViewOfDocuments(e,n,o=gr()){const u=Rr();return this.populateOverlays(e,u,n).next(()=>this.computeViews(e,n,u,o).next(p=>{let I=bu();return p.forEach((M,U)=>{I=I.insert(M,U.overlayedDocument)}),I}))}getOverlayedDocuments(e,n){const o=Rr();return this.populateOverlays(e,o,n).next(()=>this.computeViews(e,n,o,gr()))}populateOverlays(e,n,o){const u=[];return o.forEach(p=>{n.has(p)||u.push(p)}),this.documentOverlayCache.getOverlays(e,u).next(p=>{p.forEach((I,M)=>{n.set(I,M)})})}computeViews(e,n,o,u){let p=Co();const I=Al(),M=Al();return n.forEach((U,W)=>{const ee=o.get(W.key);u.has(W.key)&&(void 0===ee||ee.mutation instanceof Rl)?p=p.insert(W.key,W):void 0!==ee?(I.set(W.key,ee.mutation.getFieldMask()),bh(ee.mutation,W,ee.mutation.getFieldMask(),jr.now())):I.set(W.key,la.empty())}),this.recalculateAndSaveOverlays(e,p).next(U=>(U.forEach((W,ee)=>I.set(W,ee)),n.forEach((W,ee)=>{var fe;return M.set(W,new Lp(ee,null!==(fe=I.get(W))&&void 0!==fe?fe:null))}),M))}recalculateAndSaveOverlays(e,n){const o=Al();let u=new hi((I,M)=>I-M),p=gr();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(I=>{for(const M of I)M.keys().forEach(U=>{const W=n.get(U);if(null===W)return;let ee=o.get(U)||la.empty();ee=M.applyToLocalView(W,ee),o.set(U,ee);const fe=(u.get(M.batchId)||gr()).add(U);u=u.insert(M.batchId,fe)})}).next(()=>{const I=[],M=u.getReverseIterator();for(;M.hasNext();){const U=M.getNext(),W=U.key,ee=U.value,fe=sd();ee.forEach(Me=>{if(!p.has(Me)){const tt=Th(n.get(Me),o.get(Me));null!==tt&&fe.set(Me,tt),p=p.add(Me)}}),I.push(this.documentOverlayCache.saveOverlays(e,W,fe))}return V.waitFor(I)}).next(()=>o)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(o=>this.recalculateAndSaveOverlays(e,o))}getDocumentsMatchingQuery(e,n,o,u){return Zt.isDocumentKey((I=n).path)&&null===I.collectionGroup&&0===I.filters.length?this.getDocumentsMatchingDocumentQuery(e,n.path):P(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,o,u):this.getDocumentsMatchingCollectionQuery(e,n,o,u);var I}getNextDocuments(e,n,o,u){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,o,u).next(p=>{const I=u-p.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,o.largestBatchId,u-p.size):V.resolve(Rr());let M=-1,U=p;return I.next(W=>V.forEach(W,(ee,fe)=>(M<fe.largestBatchId&&(M=fe.largestBatchId),p.get(ee)?V.resolve():this.remoteDocumentCache.getEntry(e,ee).next(Me=>{U=U.insert(ee,Me)}))).next(()=>this.populateOverlays(e,W,p)).next(()=>this.computeViews(e,U,W,gr())).next(ee=>({batchId:M,changes:Ao(ee)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Zt(n)).next(o=>{let u=bu();return o.isFoundDocument()&&(u=u.insert(o.key,o)),u})}getDocumentsMatchingCollectionGroupQuery(e,n,o,u){const p=n.collectionGroup;let I=bu();return this.indexManager.getCollectionParents(e,p).next(M=>V.forEach(M,U=>{const W=(fe=n,Me=U.child(p),new js(Me,null,fe.explicitOrderBy.slice(),fe.filters.slice(),fe.limit,fe.limitType,fe.startAt,fe.endAt));var fe,Me;return this.getDocumentsMatchingCollectionQuery(e,W,o,u).next(ee=>{ee.forEach((fe,Me)=>{I=I.insert(fe,Me)})})}).next(()=>I))}getDocumentsMatchingCollectionQuery(e,n,o,u){let p;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,o.largestBatchId).next(I=>(p=I,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,o,p,u))).next(I=>{p.forEach((U,W)=>{const ee=W.getKey();null===I.get(ee)&&(I=I.insert(ee,ur.newInvalidDocument(ee)))});let M=bu();return I.forEach((U,W)=>{const ee=p.get(U);void 0!==ee&&bh(ee.mutation,W,la.empty(),jr.now()),pn(n,W)&&(M=M.insert(U,W))}),M})}}class zg{constructor(e){this.serializer=e,this.ur=new Map,this.cr=new Map}getBundleMetadata(e,n){return V.resolve(this.ur.get(n))}saveBundleMetadata(e,n){return this.ur.set(n.id,{id:(u=n).id,version:u.version,createTime:ds(u.createTime)}),V.resolve();var u}getNamedQuery(e,n){return V.resolve(this.cr.get(n))}saveNamedQuery(e,n){return this.cr.set(n.name,{name:(u=n).name,query:Sf(u.bundledQuery),readTime:ds(u.readTime)}),V.resolve();var u}}class gy{constructor(){this.overlays=new hi(Zt.comparator),this.lr=new Map}getOverlay(e,n){return V.resolve(this.overlays.get(n))}getOverlays(e,n){const o=Rr();return V.forEach(n,u=>this.getOverlay(e,u).next(p=>{null!==p&&o.set(u,p)})).next(()=>o)}saveOverlays(e,n,o){return o.forEach((u,p)=>{this.lt(e,n,p)}),V.resolve()}removeOverlaysForBatchId(e,n,o){const u=this.lr.get(o);return void 0!==u&&(u.forEach(p=>this.overlays=this.overlays.remove(p)),this.lr.delete(o)),V.resolve()}getOverlaysForCollection(e,n,o){const u=Rr(),p=n.length+1,I=new Zt(n.child("")),M=this.overlays.getIteratorFrom(I);for(;M.hasNext();){const U=M.getNext().value,W=U.getKey();if(!n.isPrefixOf(W.path))break;W.path.length===p&&U.largestBatchId>o&&u.set(U.getKey(),U)}return V.resolve(u)}getOverlaysForCollectionGroup(e,n,o,u){let p=new hi((W,ee)=>W-ee);const I=this.overlays.getIterator();for(;I.hasNext();){const W=I.getNext().value;if(W.getKey().getCollectionGroup()===n&&W.largestBatchId>o){let ee=p.get(W.largestBatchId);null===ee&&(ee=Rr(),p=p.insert(W.largestBatchId,ee)),ee.set(W.getKey(),W)}}const M=Rr(),U=p.getIterator();for(;U.hasNext()&&(U.getNext().value.forEach((W,ee)=>M.set(W,ee)),!(M.size()>=u)););return V.resolve(M)}lt(e,n,o){const u=this.overlays.get(o.key);if(null!==u){const I=this.lr.get(u.largestBatchId).delete(o.key);this.lr.set(u.largestBatchId,I)}this.overlays=this.overlays.insert(o.key,new Hd(n,o));let p=this.lr.get(n);void 0===p&&(p=gr(),this.lr.set(n,p)),this.lr.set(n,p.add(o.key))}}class Ff{constructor(){this.hr=new Qr(So.Pr),this.Ir=new Qr(So.Tr)}isEmpty(){return this.hr.isEmpty()}addReference(e,n){const o=new So(e,n);this.hr=this.hr.add(o),this.Ir=this.Ir.add(o)}Er(e,n){e.forEach(o=>this.addReference(o,n))}removeReference(e,n){this.dr(new So(e,n))}Ar(e,n){e.forEach(o=>this.removeReference(o,n))}Rr(e){const n=new Zt(new lr([])),o=new So(n,e),u=new So(n,e+1),p=[];return this.Ir.forEachInRange([o,u],I=>{this.dr(I),p.push(I.key)}),p}Vr(){this.hr.forEach(e=>this.dr(e))}dr(e){this.hr=this.hr.delete(e),this.Ir=this.Ir.delete(e)}mr(e){const n=new Zt(new lr([])),o=new So(n,e),u=new So(n,e+1);let p=gr();return this.Ir.forEachInRange([o,u],I=>{p=p.add(I.key)}),p}containsKey(e){const n=new So(e,0),o=this.hr.firstAfterOrEqual(n);return null!==o&&e.isEqual(o.key)}}class So{constructor(e,n){this.key=e,this.gr=n}static Pr(e,n){return Zt.comparator(e.key,n.key)||Zn(e.gr,n.gr)}static Tr(e,n){return Zn(e.gr,n.gr)||Zt.comparator(e.key,n.key)}}class s_{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.pr=1,this.yr=new Qr(So.Pr)}checkEmpty(e){return V.resolve(0===this.mutationQueue.length)}addMutationBatch(e,n,o,u){const p=this.pr;this.pr++;const I=new jd(p,n,o,u);this.mutationQueue.push(I);for(const M of u)this.yr=this.yr.add(new So(M.key,p)),this.indexManager.addToCollectionParentIndex(e,M.key.path.popLast());return V.resolve(I)}lookupMutationBatch(e,n){return V.resolve(this.wr(n))}getNextMutationBatchAfterBatchId(e,n){const u=this.Sr(n+1),p=u<0?0:u;return V.resolve(this.mutationQueue.length>p?this.mutationQueue[p]:null)}getHighestUnacknowledgedBatchId(){return V.resolve(0===this.mutationQueue.length?-1:this.pr-1)}getAllMutationBatches(e){return V.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const o=new So(n,0),u=new So(n,Number.POSITIVE_INFINITY),p=[];return this.yr.forEachInRange([o,u],I=>{const M=this.wr(I.gr);p.push(M)}),V.resolve(p)}getAllMutationBatchesAffectingDocumentKeys(e,n){let o=new Qr(Zn);return n.forEach(u=>{const p=new So(u,0),I=new So(u,Number.POSITIVE_INFINITY);this.yr.forEachInRange([p,I],M=>{o=o.add(M.gr)})}),V.resolve(this.br(o))}getAllMutationBatchesAffectingQuery(e,n){const o=n.path,u=o.length+1;let p=o;Zt.isDocumentKey(p)||(p=p.child(""));const I=new So(new Zt(p),0);let M=new Qr(Zn);return this.yr.forEachWhile(U=>{const W=U.key.path;return!!o.isPrefixOf(W)&&(W.length===u&&(M=M.add(U.gr)),!0)},I),V.resolve(this.br(M))}br(e){const n=[];return e.forEach(o=>{const u=this.wr(o);null!==u&&n.push(u)}),n}removeMutationBatch(e,n){vn(0===this.Dr(n.batchId,"removed")),this.mutationQueue.shift();let o=this.yr;return V.forEach(n.mutations,u=>{const p=new So(u.key,n.batchId);return o=o.delete(p),this.referenceDelegate.markPotentiallyOrphaned(e,u.key)}).next(()=>{this.yr=o})}Fn(e){}containsKey(e,n){const o=new So(n,0),u=this.yr.firstAfterOrEqual(o);return V.resolve(n.isEqual(u&&u.key))}performConsistencyCheck(e){return V.resolve()}Dr(e,n){return this.Sr(e)}Sr(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}wr(e){const n=this.Sr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}class Kd{constructor(e){this.Cr=e,this.docs=new hi(Zt.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const o=n.key,u=this.docs.get(o),p=u?u.size:0,I=this.Cr(n);return this.docs=this.docs.insert(o,{document:n.mutableCopy(),size:I}),this.size+=I-p,this.indexManager.addToCollectionParentIndex(e,o.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const o=this.docs.get(n);return V.resolve(o?o.document.mutableCopy():ur.newInvalidDocument(n))}getEntries(e,n){let o=Co();return n.forEach(u=>{const p=this.docs.get(u);o=o.insert(u,p?p.document.mutableCopy():ur.newInvalidDocument(u))}),V.resolve(o)}getDocumentsMatchingQuery(e,n,o,u){let p=Co();const I=n.path,M=new Zt(I.child("")),U=this.docs.getIteratorFrom(M);for(;U.hasNext();){const{key:W,value:{document:ee}}=U.getNext();if(!I.isPrefixOf(W.path))break;W.path.length>I.length+1||Hu(gh(ee),o)<=0||(u.has(ee.key)||pn(n,ee))&&(p=p.insert(ee.key,ee.mutableCopy()))}return V.resolve(p)}getAllFromCollectionGroup(e,n,o,u){on()}vr(e,n){return V.forEach(this.docs,o=>n(o))}newChangeBuffer(e){return new my(this)}getSize(e){return V.resolve(this.size)}}class my extends xh{constructor(e){super(),this._r=e}applyChanges(e){const n=[];return this.changes.forEach((o,u)=>{u.isValidDocument()?n.push(this._r.addEntry(e,u)):this._r.removeEntry(o)}),V.waitFor(n)}getFromCache(e,n){return this._r.getEntry(e,n)}getAllFromCache(e,n){return this._r.getEntries(e,n)}}class Wg{constructor(e){this.persistence=e,this.Fr=new no(n=>ja(n),sc),this.lastRemoteSnapshotVersion=un.min(),this.highestTargetId=0,this.Mr=0,this.Or=new Ff,this.targetCount=0,this.Nr=Ol.On()}forEachTarget(e,n){return this.Fr.forEach((o,u)=>n(u)),V.resolve()}getLastRemoteSnapshotVersion(e){return V.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return V.resolve(this.Mr)}allocateTargetId(e){return this.highestTargetId=this.Nr.next(),V.resolve(this.highestTargetId)}setTargetsMetadata(e,n,o){return o&&(this.lastRemoteSnapshotVersion=o),n>this.Mr&&(this.Mr=n),V.resolve()}kn(e){this.Fr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.Nr=new Ol(n),this.highestTargetId=n),e.sequenceNumber>this.Mr&&(this.Mr=e.sequenceNumber)}addTargetData(e,n){return this.kn(n),this.targetCount+=1,V.resolve()}updateTargetData(e,n){return this.kn(n),V.resolve()}removeTargetData(e,n){return this.Fr.delete(n.target),this.Or.Rr(n.targetId),this.targetCount-=1,V.resolve()}removeTargets(e,n,o){let u=0;const p=[];return this.Fr.forEach((I,M)=>{M.sequenceNumber<=n&&null===o.get(M.targetId)&&(this.Fr.delete(I),p.push(this.removeMatchingKeysForTargetId(e,M.targetId)),u++)}),V.waitFor(p).next(()=>u)}getTargetCount(e){return V.resolve(this.targetCount)}getTargetData(e,n){const o=this.Fr.get(n)||null;return V.resolve(o)}addMatchingKeys(e,n,o){return this.Or.Er(n,o),V.resolve()}removeMatchingKeys(e,n,o){this.Or.Ar(n,o);const u=this.persistence.referenceDelegate,p=[];return u&&n.forEach(I=>{p.push(u.markPotentiallyOrphaned(e,I))}),V.waitFor(p)}removeMatchingKeysForTargetId(e,n){return this.Or.Rr(n),V.resolve()}getMatchingKeysForTargetId(e,n){const o=this.Or.mr(n);return V.resolve(o)}containsKey(e,n){return V.resolve(this.Or.containsKey(n))}}class kh{constructor(e,n){this.Br={},this.overlays={},this.Lr=new os(0),this.kr=!1,this.kr=!0,this.referenceDelegate=e(this),this.qr=new Wg(this),this.indexManager=new oy,this.remoteDocumentCache=new Kd(o=>this.referenceDelegate.Qr(o)),this.serializer=new Pp(n),this.Kr=new zg(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.kr=!1,Promise.resolve()}get started(){return this.kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new gy,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let o=this.Br[e.toKey()];return o||(o=new s_(n,this.referenceDelegate),this.Br[e.toKey()]=o),o}getTargetCache(){return this.qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Kr}runTransaction(e,n,o){Tt("MemoryPersistence","Starting transaction:",e);const u=new _y(this.Lr.next());return this.referenceDelegate.$r(),o(u).next(p=>this.referenceDelegate.Ur(u).next(()=>p)).toPromise().then(p=>(u.raiseOnCommittedEvent(),p))}Wr(e,n){return V.or(Object.values(this.Br).map(o=>()=>o.containsKey(e,n)))}}class _y extends k{constructor(e){super(),this.currentSequenceNumber=e}}class Fh{constructor(e){this.persistence=e,this.Gr=new Ff,this.zr=null}static jr(e){return new Fh(e)}get Hr(){if(this.zr)return this.zr;throw on()}addReference(e,n,o){return this.Gr.addReference(o,n),this.Hr.delete(o.toString()),V.resolve()}removeReference(e,n,o){return this.Gr.removeReference(o,n),this.Hr.add(o.toString()),V.resolve()}markPotentiallyOrphaned(e,n){return this.Hr.add(n.toString()),V.resolve()}removeTarget(e,n){this.Gr.Rr(n.targetId).forEach(u=>this.Hr.add(u.toString()));const o=this.persistence.getTargetCache();return o.getMatchingKeysForTargetId(e,n.targetId).next(u=>{u.forEach(p=>this.Hr.add(p.toString()))}).next(()=>o.removeTargetData(e,n))}$r(){this.zr=new Set}Ur(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return V.forEach(this.Hr,o=>{const u=Zt.fromPath(o);return this.Jr(e,u).next(p=>{p||n.removeEntry(u,un.min())})}).next(()=>(this.zr=null,n.apply(e)))}updateLimboDocument(e,n){return this.Jr(e,n).next(o=>{o?this.Hr.delete(n.toString()):this.Hr.add(n.toString())})}Qr(e){return 0}Jr(e,n){return V.or([()=>V.resolve(this.Gr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Wr(e,n)])}}class lc{constructor(e){this.serializer=e}N(e,n,o,u){const p=new te("createOrUpgrade",n);var U;o<1&&u>=1&&(e.createObjectStore("owner"),(U=e).createObjectStore("mutationQueues",{keyPath:"userId"}),U.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",bl,{unique:!0}),U.createObjectStore("documentMutations"),Yd(e),function(U){U.createObjectStore("remoteDocuments")}(e));let I=V.resolve();return o<3&&u>=3&&(0!==o&&(function(U){U.deleteObjectStore("targetDocuments"),U.deleteObjectStore("targets"),U.deleteObjectStore("targetGlobal")}(e),Yd(e)),I=I.next(()=>function(U){const W=U.store("targetGlobal"),ee={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:un.min().toTimestamp(),targetCount:0};return W.put("targetGlobalKey",ee)}(p))),o<4&&u>=4&&(0!==o&&(I=I.next(()=>function(U,W){return W.store("mutations").W().next(ee=>{U.deleteObjectStore("mutations"),U.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",bl,{unique:!0});const fe=W.store("mutations"),Me=ee.map(tt=>fe.put(tt));return V.waitFor(Me)})}(e,p))),I=I.next(()=>{!function(U){U.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),o<5&&u>=5&&(I=I.next(()=>this.Zr(p))),o<6&&u>=6&&(I=I.next(()=>(function(U){U.createObjectStore("remoteDocumentGlobal")}(e),this.Xr(p)))),o<7&&u>=7&&(I=I.next(()=>this.ei(p))),o<8&&u>=8&&(I=I.next(()=>this.ti(e,p))),o<9&&u>=9&&(I=I.next(()=>{!function(U){U.objectStoreNames.contains("remoteDocumentChanges")&&U.deleteObjectStore("remoteDocumentChanges")}(e)})),o<10&&u>=10&&(I=I.next(()=>this.ni(p))),o<11&&u>=11&&(I=I.next(()=>{(function(U){U.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(U){U.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),o<12&&u>=12&&(I=I.next(()=>{!function(U){const W=U.createObjectStore("documentOverlays",{keyPath:Jc});W.createIndex("collectionPathOverlayIndex",pp,{unique:!1}),W.createIndex("collectionGroupOverlayIndex",ql,{unique:!1})}(e)})),o<13&&u>=13&&(I=I.next(()=>function(U){const W=U.createObjectStore("remoteDocumentsV14",{keyPath:Ho});W.createIndex("documentKeyIndex",Wl),W.createIndex("collectionGroupIndex",_h)}(e)).next(()=>this.ri(e,p)).next(()=>e.deleteObjectStore("remoteDocuments"))),o<14&&u>=14&&(I=I.next(()=>this.ii(e,p))),o<15&&u>=15&&(I=I.next(()=>function(U){U.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),U.createObjectStore("indexState",{keyPath:Rd}).createIndex("sequenceNumberIndex",Cg,{unique:!1}),U.createObjectStore("indexEntries",{keyPath:$u}).createIndex("documentKeyIndex",fp,{unique:!1})}(e))),I}Xr(e){let n=0;return e.store("remoteDocuments").Y((o,u)=>{n+=Ug(u)}).next(()=>{const o={byteSize:n};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",o)})}Zr(e){const n=e.store("mutationQueues"),o=e.store("mutations");return n.W().next(u=>V.forEach(u,p=>{const I=IDBKeyRange.bound([p.userId,-1],[p.userId,p.lastAcknowledgedBatchId]);return o.W("userMutationsIndex",I).next(M=>V.forEach(M,U=>{vn(U.userId===p.userId);const W=hd(this.serializer,U);return uy(e,p.userId,W).next(()=>{})}))}))}ei(e){const n=e.store("targetDocuments"),o=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(u=>{const p=[];return o.Y((I,M)=>{const U=new lr(I),W=[0,Ts(U)];p.push(n.get(W).next(ee=>ee?V.resolve():n.put({targetId:0,path:Ts(U),sequenceNumber:u.highestListenSequenceNumber})))}).next(()=>V.waitFor(p))})}ti(e,n){e.createObjectStore("collectionParents",{keyPath:cf});const o=n.store("collectionParents"),u=new ay,p=I=>{if(u.add(I)){const M=I.lastSegment(),U=I.popLast();return o.put({collectionId:M,parent:Ts(U)})}};return n.store("remoteDocuments").Y({J:!0},(I,M)=>{const U=new lr(I);return p(U.popLast())}).next(()=>n.store("documentMutations").Y({J:!0},([I,M,U],W)=>{const ee=jo(M);return p(ee.popLast())}))}ni(e){const n=e.store("targets");return n.Y((o,u)=>{const p=Op(u),I=Ah(this.serializer,p);return n.put(I)})}ri(e,n){const o=n.store("remoteDocuments"),u=[];return o.Y((p,I)=>{const M=n.store("remoteDocumentsV14"),U=(fe=I,fe.document?new Zt(lr.fromString(fe.document.name).popFirst(5)):fe.noDocument?Zt.fromSegments(fe.noDocument.path):fe.unknownDocument?Zt.fromSegments(fe.unknownDocument.path):on()).path.toArray(),W={prefixPath:U.slice(0,U.length-2),collectionGroup:U[U.length-2],documentId:U[U.length-1],readTime:I.readTime||[0,0],unknownDocument:I.unknownDocument,noDocument:I.noDocument,document:I.document,hasCommittedMutations:!!I.hasCommittedMutations};var fe;u.push(M.put(W))}).next(()=>V.waitFor(u))}ii(e,n){const o=n.store("mutations"),u=Hg(this.serializer),p=new kh(Fh.jr,this.serializer.ut);return o.W().next(I=>{const M=new Map;return I.forEach(U=>{var W;let ee=null!==(W=M.get(U.userId))&&void 0!==W?W:gr();hd(this.serializer,U).keys().forEach(fe=>ee=ee.add(fe)),M.set(U.userId,ee)}),V.forEach(M,(U,W)=>{const ee=new Zr(W),fe=Fg.ct(this.serializer,ee),Me=p.getIndexManager(ee),tt=Oh.ct(ee,this.serializer,Me,p.referenceDelegate);return new py(u,tt,fe,Me).recalculateAndSaveOverlaysForDocumentKeys(new vu(n,os._e),U).next()})})}}function Yd(i){i.createObjectStore("targetDocuments",{keyPath:yu}).createIndex("documentTargetsIndex",Rc,{unique:!0}),i.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",_u,{unique:!0}),i.createObjectStore("targetGlobal")}const su="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class Vp{constructor(e,n,o,u,p,I,M,U,W,ee,fe=15){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=o,this.si=p,this.window=I,this.document=M,this.oi=W,this._i=ee,this.ai=fe,this.Lr=null,this.kr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ui=null,this.inForeground=!1,this.ci=null,this.li=null,this.hi=Number.NEGATIVE_INFINITY,this.Pi=Me=>Promise.resolve(),!Vp.D())throw new It(nt.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Iv(this,u),this.Ii=n+"main",this.serializer=new Pp(U),this.Ti=new he(this.Ii,this.ai,new lc(this.serializer)),this.qr=new dy(this.referenceDelegate,this.serializer),this.remoteDocumentCache=Hg(this.serializer),this.Kr=new iy,this.window&&this.window.localStorage?this.Ei=this.window.localStorage:(this.Ei=null,!1===ee&&Si("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.di().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new It(nt.FAILED_PRECONDITION,su);return this.Ai(),this.Ri(),this.Vi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.qr.getHighestSequenceNumber(e))}).then(e=>{this.Lr=new os(e,this.oi)}).then(()=>{this.kr=!0}).catch(e=>(this.Ti&&this.Ti.close(),Promise.reject(e)))}mi(e){var n=this;return this.Pi=function(){var o=(0,Re.Z)(function*(u){if(n.started)return e(u)});return function(u){return o.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ti.L(function(){var n=(0,Re.Z)(function*(o){null===o.newVersion&&(yield e())});return function(o){return n.apply(this,arguments)}}())}setNetworkEnabled(e){var n=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.si.enqueueAndForget((0,Re.Z)(function*(){n.started&&(yield n.di())})))}di(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Qd(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.fi(e).next(n=>{n||(this.isPrimary=!1,this.si.enqueueRetryable(()=>this.Pi(!1)))})}).next(()=>this.gi(e)).next(n=>this.isPrimary&&!n?this.pi(e).next(()=>!1):!!n&&this.yi(e).next(()=>!0))).catch(e=>{if(Ht(e))return Tt("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Tt("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.si.enqueueRetryable(()=>this.Pi(e)),this.isPrimary=e})}fi(e){return Zd(e).get("owner").next(n=>V.resolve(this.wi(n)))}Si(e){return Qd(e).delete(this.clientId)}bi(){var e=this;return(0,Re.Z)(function*(){if(e.isPrimary&&!e.Di(e.hi,18e5)){e.hi=Date.now();const n=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",o=>{const u=as(o,"clientMetadata");return u.W().next(p=>{const I=e.Ci(p,18e5),M=p.filter(U=>-1===I.indexOf(U));return V.forEach(M,U=>u.delete(U.clientId)).next(()=>M)})}).catch(()=>[]);if(e.Ei)for(const o of n)e.Ei.removeItem(e.vi(o.clientId))}})()}Vi(){this.li=this.si.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.di().then(()=>this.bi()).then(()=>this.Vi()))}wi(e){return!!e&&e.ownerId===this.clientId}gi(e){return this._i?V.resolve(!0):Zd(e).get("owner").next(n=>{if(null!==n&&this.Di(n.leaseTimestampMs,5e3)&&!this.Fi(n.ownerId)){if(this.wi(n)&&this.networkEnabled)return!0;if(!this.wi(n)){if(!n.allowTabSynchronization)throw new It(nt.FAILED_PRECONDITION,su);return!1}}return!(!this.networkEnabled||!this.inForeground)||Qd(e).W().next(o=>void 0===this.Ci(o,5e3).find(u=>!(this.clientId===u.clientId||!(!this.networkEnabled&&u.networkEnabled||!this.inForeground&&u.inForeground&&this.networkEnabled===u.networkEnabled))))}).next(n=>(this.isPrimary!==n&&Tt("IndexedDbPersistence",`Client ${n?"is":"is not"} eligible for a primary lease.`),n))}shutdown(){var e=this;return(0,Re.Z)(function*(){e.kr=!1,e.Mi(),e.li&&(e.li.cancel(),e.li=null),e.xi(),e.Oi(),yield e.Ti.runTransaction("shutdown","readwrite",["owner","clientMetadata"],n=>{const o=new vu(n,os._e);return e.pi(o).next(()=>e.Si(o))}),e.Ti.close(),e.Ni()})()}Ci(e,n){return e.filter(o=>this.Di(o.updateTimeMs,n)&&!this.Fi(o.clientId))}Bi(){return this.runTransaction("getActiveClients","readonly",e=>Qd(e).W().next(n=>this.Ci(n,18e5).map(o=>o.clientId)))}get started(){return this.kr}getMutationQueue(e,n){return Oh.ct(e,this.serializer,n,this.referenceDelegate)}getTargetCache(){return this.qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new P0(e,this.serializer.ut.databaseId)}getDocumentOverlayCache(e){return Fg.ct(this.serializer,e)}getBundleCache(){return this.Kr}runTransaction(e,n,o){Tt("IndexedDbPersistence","Starting transaction:",e);const u="readonly"===n?"readonly":"readwrite",p=15===(U=this.ai)?Nd:14===U?zu:13===U?Ms:12===U?df:11===U?ol:void on();var U;let I;return this.Ti.runTransaction(e,u,p,M=>(I=new vu(M,this.Lr?this.Lr.next():os._e),"readwrite-primary"===n?this.fi(I).next(U=>!!U||this.gi(I)).next(U=>{if(!U)throw Si(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.si.enqueueRetryable(()=>this.Pi(!1)),new It(nt.FAILED_PRECONDITION,R);return o(I)}).next(U=>this.yi(I).next(()=>U)):this.Li(I).next(()=>o(I)))).then(M=>(I.raiseOnCommittedEvent(),M))}Li(e){return Zd(e).get("owner").next(n=>{if(null!==n&&this.Di(n.leaseTimestampMs,5e3)&&!this.Fi(n.ownerId)&&!this.wi(n)&&!(this._i||this.allowTabSynchronization&&n.allowTabSynchronization))throw new It(nt.FAILED_PRECONDITION,su)})}yi(e){const n={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Zd(e).put("owner",n)}static D(){return he.D()}pi(e){const n=Zd(e);return n.get("owner").next(o=>this.wi(o)?(Tt("IndexedDbPersistence","Releasing primary lease."),n.delete("owner")):V.resolve())}Di(e,n){const o=Date.now();return!(e<o-n||e>o&&(Si(`Detected an update time that is in the future: ${e} > ${o}`),1))}Ai(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ci=()=>{this.si.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.di()))},this.document.addEventListener("visibilitychange",this.ci),this.inForeground="visible"===this.document.visibilityState)}xi(){this.ci&&(this.document.removeEventListener("visibilitychange",this.ci),this.ci=null)}Ri(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ui=()=>{this.Mi();const n=/(?:Version|Mobile)\/1[456]/;(0,$e.G6)()&&(navigator.appVersion.match(n)||navigator.userAgent.match(n))&&this.si.enterRestrictedMode(!0),this.si.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ui))}Oi(){this.ui&&(this.window.removeEventListener("pagehide",this.ui),this.ui=null)}Fi(e){var n;try{const o=null!==(null===(n=this.Ei)||void 0===n?void 0:n.getItem(this.vi(e)));return Tt("IndexedDbPersistence",`Client '${e}' ${o?"is":"is not"} zombied in LocalStorage`),o}catch(o){return Si("IndexedDbPersistence","Failed to get zombied client id.",o),!1}}Mi(){if(this.Ei)try{this.Ei.setItem(this.vi(this.clientId),String(Date.now()))}catch(e){Si("Failed to set zombie client id.",e)}}Ni(){if(this.Ei)try{this.Ei.removeItem(this.vi(this.clientId))}catch{}}vi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Zd(i){return as(i,"owner")}function Qd(i){return as(i,"clientMetadata")}function uc(i,e){let n=i.projectId;return i.isDefaultDatabase||(n+="."+i.database),"firestore/"+e+"/"+n+"/"}class $a{constructor(e,n,o,u){this.targetId=e,this.fromCache=n,this.ki=o,this.qi=u}static Qi(e,n){let o=gr(),u=gr();for(const p of n.docChanges)switch(p.type){case 0:o=o.add(p.doc.key);break;case 1:u=u.add(p.doc.key)}return new $a(e,n.fromCache,o,u)}}class o_{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class a_{constructor(){this.Ki=!1,this.$i=!1,this.Ui=100,this.Wi=8}initialize(e,n){this.Gi=e,this.indexManager=n,this.Ki=!0}getDocumentsMatchingQuery(e,n,o,u){const p={result:null};return this.zi(e,n).next(I=>{p.result=I}).next(()=>{if(!p.result)return this.ji(e,n,u,o).next(I=>{p.result=I})}).next(()=>{if(p.result)return;const I=new o_;return this.Hi(e,n,I).next(M=>{if(p.result=M,this.$i)return this.Ji(e,n,I,M.size)})}).next(()=>p.result)}Ji(e,n,o,u){return o.documentReadCount<this.Ui?(jl()<=Pe.in.DEBUG&&Tt("QueryEngine","SDK will not create cache indexes for query:",St(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Ui,"documents"),V.resolve()):(jl()<=Pe.in.DEBUG&&Tt("QueryEngine","Query:",St(n),"scans",o.documentReadCount,"local documents and returns",u,"documents as results."),o.documentReadCount>this.Wi*u?(jl()<=Pe.in.DEBUG&&Tt("QueryEngine","The SDK decides to create cache indexes for query:",St(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,w(n))):V.resolve())}zi(e,n){if(Ld(n))return V.resolve(null);let o=w(n);return this.indexManager.getIndexType(e,o).next(u=>0===u?null:(null!==n.limit&&1===u&&(n=ce(n,null,"F"),o=w(n)),this.indexManager.getDocumentsMatchingTarget(e,o).next(p=>{const I=gr(...p);return this.Gi.getDocuments(e,I).next(M=>this.indexManager.getMinOffset(e,o).next(U=>{const W=this.Yi(n,M);return this.Zi(n,W,I,U.readTime)?this.zi(e,ce(n,null,"F")):this.Xi(e,W,n,U)}))})))}ji(e,n,o,u){return Ld(n)||u.isEqual(un.min())?V.resolve(null):this.Gi.getDocuments(e,o).next(p=>{const I=this.Yi(n,p);return this.Zi(n,I,o,u)?V.resolve(null):(jl()<=Pe.in.DEBUG&&Tt("QueryEngine","Re-using previous result from %s to execute query: %s",u.toString(),St(n)),this.Xi(e,I,n,$l(u,-1)).next(M=>M))})}Yi(e,n){let o=new Qr(Lr(e));return n.forEach((u,p)=>{pn(e,p)&&(o=o.add(p))}),o}Zi(e,n,o,u){if(null===e.limit)return!1;if(o.size!==n.size)return!0;const p="F"===e.limitType?n.last():n.first();return!!p&&(p.hasPendingWrites||p.version.compareTo(u)>0)}Hi(e,n,o){return jl()<=Pe.in.DEBUG&&Tt("QueryEngine","Using full collection scan to execute query:",St(n)),this.Gi.getDocumentsMatchingQuery(e,n,Do.min(),o)}Xi(e,n,o,u){return this.Gi.getDocumentsMatchingQuery(e,o,u).next(p=>(n.forEach(I=>{p=p.insert(I.key,I)}),p))}}class Lf{constructor(e,n,o,u){this.persistence=e,this.es=n,this.serializer=u,this.ts=new hi(Zn),this.ns=new no(p=>ja(p),sc),this.rs=new Map,this.ss=e.getRemoteDocumentCache(),this.qr=e.getTargetCache(),this.Kr=e.getBundleCache(),this.os(o)}os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new py(this.ss,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ss.setIndexManager(this.indexManager),this.es.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.ts))}}function qg(i,e,n,o){return new Lf(i,e,n,o)}function md(i,e){return Vf.apply(this,arguments)}function Vf(){return Vf=(0,Re.Z)(function*(i,e){const n=zt(i);return yield n.persistence.runTransaction("Handle user change","readonly",o=>{let u;return n.mutationQueue.getAllMutationBatches(o).next(p=>(u=p,n.os(e),n.mutationQueue.getAllMutationBatches(o))).next(p=>{const I=[],M=[];let U=gr();for(const W of u){I.push(W.batchId);for(const ee of W.mutations)U=U.add(ee.key)}for(const W of p){M.push(W.batchId);for(const ee of W.mutations)U=U.add(ee.key)}return n.localDocuments.getDocuments(o,U).next(W=>({_s:W,removedBatchIds:I,addedBatchIds:M}))})})}),Vf.apply(this,arguments)}function Ev(i){const e=zt(i);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.qr.getLastRemoteSnapshotVersion(n))}function Yg(i,e,n){let o=gr(),u=gr();return n.forEach(p=>o=o.add(p)),e.getEntries(i,o).next(p=>{let I=Co();return n.forEach((M,U)=>{const W=p.get(M);U.isFoundDocument()!==W.isFoundDocument()&&(u=u.add(M)),U.isNoDocument()&&U.version.isEqual(un.min())?(e.removeEntry(M,U.readTime),I=I.insert(M,U)):!W.isValidDocument()||U.version.compareTo(W.version)>0||0===U.version.compareTo(W.version)&&W.hasPendingWrites?(e.addEntry(U),I=I.insert(M,U)):Tt("LocalStore","Ignoring outdated watch update for ",M,". Current version:",W.version," Watch version:",U.version)}),{us:I,cs:u}})}function l_(i,e){const n=zt(i);return n.persistence.runTransaction("Get next mutation batch","readonly",o=>(void 0===e&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(o,e)))}function Bp(i,e){const n=zt(i);return n.persistence.runTransaction("Allocate target","readwrite",o=>{let u;return n.qr.getTargetData(o,e).next(p=>p?(u=p,V.resolve(u)):n.qr.allocateTargetId(o).next(I=>(u=new Pl(e,I,"TargetPurposeListen",o.currentSequenceNumber),n.qr.addTargetData(o,u).next(()=>u))))}).then(o=>{const u=n.ts.get(o.targetId);return(null===u||o.snapshotVersion.compareTo(u.snapshotVersion)>0)&&(n.ts=n.ts.insert(o.targetId,o),n.ns.set(e,o.targetId)),o})}function Vh(i,e,n){return _d.apply(this,arguments)}function _d(){return _d=(0,Re.Z)(function*(i,e,n){const o=zt(i),u=o.ts.get(e),p=n?"readwrite":"readwrite-primary";try{n||(yield o.persistence.runTransaction("Release target",p,I=>o.persistence.referenceDelegate.removeTarget(I,u)))}catch(I){if(!Ht(I))throw I;Tt("LocalStore",`Failed to update sequence numbers for target ${e}: ${I}`)}o.ts=o.ts.remove(e),o.ns.delete(u.target)}),_d.apply(this,arguments)}function Up(i,e,n){const o=zt(i);let u=un.min(),p=gr();return o.persistence.runTransaction("Execute query","readwrite",I=>function(U,W,ee){const fe=zt(U),Me=fe.ns.get(ee);return void 0!==Me?V.resolve(fe.ts.get(Me)):fe.qr.getTargetData(W,ee)}(o,I,w(e)).next(M=>{if(M)return u=M.lastLimboFreeSnapshotVersion,o.qr.getMatchingKeysForTargetId(I,M.targetId).next(U=>{p=U})}).next(()=>o.es.getDocumentsMatchingQuery(I,e,n?u:un.min(),n?p:gr())).next(M=>(Bc(o,Rn(e),M),{documents:M,ls:p})))}function Bf(i,e){const n=zt(i),o=zt(n.qr),u=n.ts.get(e);return u?Promise.resolve(u.target):n.persistence.runTransaction("Get target data","readonly",p=>o._t(p,e).next(I=>I?I.target:null))}function jp(i,e){const n=zt(i),o=n.rs.get(e)||un.min();return n.persistence.runTransaction("Get new document changes","readonly",u=>n.ss.getAllFromCollectionGroup(u,e,$l(o,-1),Number.MAX_SAFE_INTEGER)).then(u=>(Bc(n,e,u),u))}function Bc(i,e,n){let o=i.rs.get(e)||un.min();n.forEach((u,p)=>{p.readTime.compareTo(o)>0&&(o=p.readTime)}),i.rs.set(e,o)}function yd(){return yd=(0,Re.Z)(function*(i,e,n,o){const u=zt(i);let p=gr(),I=Co();for(const W of n){const ee=e.hs(W.metadata.name);W.document&&(p=p.add(ee));const fe=e.Ps(W);fe.setReadTime(e.Is(W.metadata.readTime)),I=I.insert(ee,fe)}const M=u.ss.newChangeBuffer({trackRemovals:!0}),U=yield Bp(u,(ee=o,w(Mc(lr.fromString(`__bundle__/docs/${ee}`)))));var ee;return u.persistence.runTransaction("Apply bundle documents","readwrite",W=>Yg(W,M,I).next(ee=>(M.apply(W),ee)).next(ee=>u.qr.removeMatchingKeysForTargetId(W,U.targetId).next(()=>u.qr.addMatchingKeys(W,p,U.targetId)).next(()=>u.localDocuments.getLocalViewOfDocuments(W,ee.us,ee.cs)).next(()=>ee.us)))}),yd.apply(this,arguments)}function vd(i,e){return Jd.apply(this,arguments)}function Jd(){return Jd=(0,Re.Z)(function*(i,e,n=gr()){const o=yield Bp(i,w(Sf(e.bundledQuery))),u=zt(i);return u.persistence.runTransaction("Save named query","readwrite",p=>{const I=ds(e.readTime);if(o.snapshotVersion.compareTo(I)>=0)return u.Kr.saveNamedQuery(p,e);const M=o.withResumeToken(Bs.EMPTY_BYTE_STRING,I);return u.ts=u.ts.insert(M.targetId,M),u.qr.updateTargetData(p,M).next(()=>u.qr.removeMatchingKeysForTargetId(p,o.targetId)).next(()=>u.qr.addMatchingKeys(p,n,o.targetId)).next(()=>u.Kr.saveNamedQuery(p,e))})}),Jd.apply(this,arguments)}function Uc(i,e){return`firestore_clients_${i}_${e}`}function ou(i,e,n){let o=`firestore_mutations_${i}_${n}`;return e.isAuthenticated()&&(o+=`_${e.uid}`),o}function Xd(i,e){return`firestore_targets_${i}_${e}`}class cc{constructor(e,n,o,u){this.user=e,this.batchId=n,this.state=o,this.error=u}static Ts(e,n,o){const u=JSON.parse(o);let p,I="object"==typeof u&&-1!==["pending","acknowledged","rejected"].indexOf(u.state)&&(void 0===u.error||"object"==typeof u.error);return I&&u.error&&(I="string"==typeof u.error.message&&"string"==typeof u.error.code,I&&(p=new It(u.error.code,u.error.message))),I?new cc(e,n,u.state,p):(Si("SharedClientState",`Failed to parse mutation state for ID '${n}': ${o}`),null)}Es(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Hp{constructor(e,n,o){this.targetId=e,this.state=n,this.error=o}static Ts(e,n){const o=JSON.parse(n);let u,p="object"==typeof o&&-1!==["not-current","current","rejected"].indexOf(o.state)&&(void 0===o.error||"object"==typeof o.error);return p&&o.error&&(p="string"==typeof o.error.message&&"string"==typeof o.error.code,p&&(u=new It(o.error.code,o.error.message))),p?new Hp(e,o.state,u):(Si("SharedClientState",`Failed to parse target state for ID '${e}': ${n}`),null)}Es(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class dc{constructor(e,n){this.clientId=e,this.activeTargetIds=n}static Ts(e,n){const o=JSON.parse(n);let u="object"==typeof o&&o.activeTargetIds instanceof Array,p=pf();for(let I=0;u&&I<o.activeTargetIds.length;++I)u=mh(o.activeTargetIds[I]),p=p.add(o.activeTargetIds[I]);return u?new dc(e,p):(Si("SharedClientState",`Failed to parse client data for instance '${e}': ${n}`),null)}}class Id{constructor(e,n){this.clientId=e,this.onlineState=n}static Ts(e){const n=JSON.parse(e);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new Id(n.clientId,n.onlineState):(Si("SharedClientState",`Failed to parse online state: ${e}`),null)}}class Zg{constructor(){this.activeTargetIds=pf()}ds(e){this.activeTargetIds=this.activeTargetIds.add(e)}As(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Es(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Uf{constructor(e,n,o,u,p){this.window=e,this.si=n,this.persistenceKey=o,this.Rs=u,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Vs=this.fs.bind(this),this.gs=new hi(Zn),this.started=!1,this.ps=[];const I=o.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=p,this.ys=Uc(this.persistenceKey,this.Rs),this.ws=`firestore_sequence_number_${this.persistenceKey}`,this.gs=this.gs.insert(this.Rs,new Zg),this.Ss=new RegExp(`^firestore_clients_${I}_([^_]*)$`),this.bs=new RegExp(`^firestore_mutations_${I}_(\\d+)(?:_(.*))?$`),this.Ds=new RegExp(`^firestore_targets_${I}_(\\d+)$`),this.Cs=`firestore_online_state_${this.persistenceKey}`,this.vs=function(U){return`firestore_bundle_loaded_v2_${U}`}(this.persistenceKey),this.window.addEventListener("storage",this.Vs)}static D(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,Re.Z)(function*(){const n=yield e.syncEngine.Bi();for(const u of n){if(u===e.Rs)continue;const p=e.getItem(Uc(e.persistenceKey,u));if(p){const I=dc.Ts(u,p);I&&(e.gs=e.gs.insert(I.clientId,I))}}e.Fs();const o=e.storage.getItem(e.Cs);if(o){const u=e.Ms(o);u&&e.xs(u)}for(const u of e.ps)e.fs(u);e.ps=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.ws,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Os(this.gs)}isActiveQueryTarget(e){let n=!1;return this.gs.forEach((o,u)=>{u.activeTargetIds.has(e)&&(n=!0)}),n}addPendingMutation(e){this.Ns(e,"pending")}updateMutationState(e,n,o){this.Ns(e,n,o),this.Bs(e)}addLocalQueryTarget(e){let n="not-current";if(this.isActiveQueryTarget(e)){const o=this.storage.getItem(Xd(this.persistenceKey,e));if(o){const u=Hp.Ts(e,o);u&&(n=u.state)}}return this.Ls.ds(e),this.Fs(),n}removeLocalQueryTarget(e){this.Ls.As(e),this.Fs()}isLocalQueryTarget(e){return this.Ls.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Xd(this.persistenceKey,e))}updateQueryState(e,n,o){this.ks(e,n,o)}handleUserChange(e,n,o){n.forEach(u=>{this.Bs(u)}),this.currentUser=e,o.forEach(u=>{this.addPendingMutation(u)})}setOnlineState(e){this.qs(e)}notifyBundleLoaded(e){this.Qs(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.Vs),this.removeItem(this.ys),this.started=!1)}getItem(e){const n=this.storage.getItem(e);return Tt("SharedClientState","READ",e,n),n}setItem(e,n){Tt("SharedClientState","SET",e,n),this.storage.setItem(e,n)}removeItem(e){Tt("SharedClientState","REMOVE",e),this.storage.removeItem(e)}fs(e){var n=this;const o=e;if(o.storageArea===this.storage){if(Tt("SharedClientState","EVENT",o.key,o.newValue),o.key===this.ys)return void Si("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.si.enqueueRetryable((0,Re.Z)(function*(){if(n.started){if(null!==o.key)if(n.Ss.test(o.key)){if(null==o.newValue){const u=n.Ks(o.key);return n.$s(u,null)}{const u=n.Us(o.key,o.newValue);if(u)return n.$s(u.clientId,u)}}else if(n.bs.test(o.key)){if(null!==o.newValue){const u=n.Ws(o.key,o.newValue);if(u)return n.Gs(u)}}else if(n.Ds.test(o.key)){if(null!==o.newValue){const u=n.zs(o.key,o.newValue);if(u)return n.js(u)}}else if(o.key===n.Cs){if(null!==o.newValue){const u=n.Ms(o.newValue);if(u)return n.xs(u)}}else if(o.key===n.ws){const u=function(I){let M=os._e;if(null!=I)try{const U=JSON.parse(I);vn("number"==typeof U),M=U}catch(U){Si("SharedClientState","Failed to read sequence number from WebStorage",U)}return M}(o.newValue);u!==os._e&&n.sequenceNumberHandler(u)}else if(o.key===n.vs){const u=n.Hs(o.newValue);yield Promise.all(u.map(p=>n.syncEngine.Js(p)))}}else n.ps.push(o)}))}}get Ls(){return this.gs.get(this.Rs)}Fs(){this.setItem(this.ys,this.Ls.Es())}Ns(e,n,o){const u=new cc(this.currentUser,e,n,o),p=ou(this.persistenceKey,this.currentUser,e);this.setItem(p,u.Es())}Bs(e){const n=ou(this.persistenceKey,this.currentUser,e);this.removeItem(n)}qs(e){this.storage.setItem(this.Cs,JSON.stringify({clientId:this.Rs,onlineState:e}))}ks(e,n,o){const u=Xd(this.persistenceKey,e),p=new Hp(e,n,o);this.setItem(u,p.Es())}Qs(e){const n=JSON.stringify(Array.from(e));this.setItem(this.vs,n)}Ks(e){const n=this.Ss.exec(e);return n?n[1]:null}Us(e,n){const o=this.Ks(e);return dc.Ts(o,n)}Ws(e,n){const o=this.bs.exec(e),u=Number(o[1]);return cc.Ts(new Zr(void 0!==o[2]?o[2]:null),u,n)}zs(e,n){const o=this.Ds.exec(e),u=Number(o[1]);return Hp.Ts(u,n)}Ms(e){return Id.Ts(e)}Hs(e){return JSON.parse(e)}Gs(e){var n=this;return(0,Re.Z)(function*(){if(e.user.uid===n.currentUser.uid)return n.syncEngine.Ys(e.batchId,e.state,e.error);Tt("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}js(e){return this.syncEngine.Zs(e.targetId,e.state,e.error)}$s(e,n){const o=n?this.gs.insert(e,n):this.gs.remove(e),u=this.Os(this.gs),p=this.Os(o),I=[],M=[];return p.forEach(U=>{u.has(U)||I.push(U)}),u.forEach(U=>{p.has(U)||M.push(U)}),this.syncEngine.Xs(I,M).then(()=>{this.gs=o})}xs(e){this.gs.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Os(e){let n=pf();return e.forEach((o,u)=>{n=n.unionWith(u.activeTargetIds)}),n}}class jc{constructor(){this.eo=new Zg,this.no={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,o){}addLocalQueryTarget(e){return this.eo.ds(e),this.no[e]||"not-current"}updateQueryState(e,n,o){this.no[e]=n}removeLocalQueryTarget(e){this.eo.As(e)}isLocalQueryTarget(e){return this.eo.activeTargetIds.has(e)}clearQueryState(e){delete this.no[e]}getAllActiveQueryTargets(){return this.eo.activeTargetIds}isActiveQueryTarget(e){return this.eo.activeTargetIds.has(e)}start(){return this.eo=new Zg,Promise.resolve()}handleUserChange(e,n,o){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class hc{ro(e){}shutdown(){}}class fc{constructor(){this.io=()=>this.so(),this.oo=()=>this._o(),this.ao=[],this.uo()}ro(e){this.ao.push(e)}shutdown(){window.removeEventListener("online",this.io),window.removeEventListener("offline",this.oo)}uo(){window.addEventListener("online",this.io),window.addEventListener("offline",this.oo)}so(){Tt("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ao)e(0)}_o(){Tt("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ao)e(1)}static D(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let Hc=null;function Qg(){return null===Hc?Hc=268435456+Math.round(2147483648*Math.random()):Hc++,"0x"+Hc.toString(16)}const Jg={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class vy{constructor(e){this.co=e.co,this.lo=e.lo}ho(e){this.Po=e}Io(e){this.To=e}onMessage(e){this.Eo=e}close(){this.lo()}send(e){this.co(e)}Ao(){this.Po()}Ro(e){this.To(e)}Vo(e){this.Eo(e)}}const co="WebChannelConnection";class eh extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const o=n.ssl?"https":"http",u=encodeURIComponent(this.databaseId.projectId),p=encodeURIComponent(this.databaseId.database);this.mo=o+"://"+n.host,this.fo=`projects/${u}/databases/${p}`,this.po="(default)"===this.databaseId.database?`project_id=${u}`:`project_id=${u}&database_id=${p}`}get yo(){return!1}wo(n,o,u,p,I){const M=Qg(),U=this.So(n,o);Tt("RestConnection",`Sending RPC '${n}' ${M}:`,U,u);const W={"google-cloud-resource-prefix":this.fo,"x-goog-request-params":this.po};return this.bo(W,p,I),this.Do(n,U,W,u).then(ee=>(Tt("RestConnection",`Received RPC '${n}' ${M}: `,ee),ee),ee=>{throw bo("RestConnection",`RPC '${n}' ${M} failed with error: `,ee,"url: ",U,"request:",u),ee})}Co(n,o,u,p,I,M){return this.wo(n,o,u,p,I)}bo(n,o,u){n["X-Goog-Api-Client"]="gl-js/ fire/"+Tl,n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),o&&o.headers.forEach((p,I)=>n[I]=p),u&&u.headers.forEach((p,I)=>n[I]=p)}So(n,o){return`${this.mo}/v1/${o}:${Jg[n]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Do(e,n,o,u){const p=Qg();return new Promise((I,M)=>{const U=new Ps;U.setWithCredentials(!0),U.listenOnce(El.COMPLETE,()=>{try{switch(U.getLastErrorCode()){case ki.NO_ERROR:const ee=U.getResponseJson();Tt(co,`XHR for RPC '${e}' ${p} received:`,JSON.stringify(ee)),I(ee);break;case ki.TIMEOUT:Tt(co,`RPC '${e}' ${p} timed out`),M(new It(nt.DEADLINE_EXCEEDED,"Request time out"));break;case ki.HTTP_ERROR:const fe=U.getStatus();if(Tt(co,`RPC '${e}' ${p} failed with status:`,fe,"response text:",U.getResponseText()),fe>0){let Me=U.getResponseJson();Array.isArray(Me)&&(Me=Me[0]);const tt=Me?.error;if(tt&&tt.status&&tt.message){const Vt=function(Qt){const Wn=Qt.toLowerCase().replace(/_/g,"-");return Object.values(nt).indexOf(Wn)>=0?Wn:nt.UNKNOWN}(tt.status);M(new It(Vt,tt.message))}else M(new It(nt.UNKNOWN,"Server responded with status "+U.getStatus()))}else M(new It(nt.UNAVAILABLE,"Connection failed."));break;default:on()}}finally{Tt(co,`RPC '${e}' ${p} completed.`)}});const W=JSON.stringify(u);Tt(co,`RPC '${e}' ${p} sending request:`,u),U.send(n,"POST",W,o,15)})}vo(e,n,o){const u=Qg(),p=[this.mo,"/","google.firestore.v1.Firestore","/",e,"/channel"],I=Es(),M=_a(),U={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},W=this.longPollingOptions.timeoutSeconds;void 0!==W&&(U.longPollingTimeout=Math.round(1e3*W)),this.useFetchStreams&&(U.useFetchStreams=!0),this.bo(U.initMessageHeaders,n,o),U.encodeInitMessageHeaders=!0;const ee=p.join("");Tt(co,`Creating RPC '${e}' stream ${u}: ${ee}`,U);const fe=I.createWebChannel(ee,U);let Me=!1,tt=!1;const Vt=new vy({co:Qt=>{tt?Tt(co,`Not sending because RPC '${e}' stream ${u} is closed:`,Qt):(Me||(Tt(co,`Opening RPC '${e}' stream ${u} transport.`),fe.open(),Me=!0),Tt(co,`RPC '${e}' stream ${u} sending:`,Qt),fe.send(Qt))},lo:()=>fe.close()}),Kt=(Qt,Wn,sr)=>{Qt.listen(Wn,Gn=>{try{sr(Gn)}catch(Hr){setTimeout(()=>{throw Hr},0)}})};return Kt(fe,pu.EventType.OPEN,()=>{tt||Tt(co,`RPC '${e}' stream ${u} transport opened.`)}),Kt(fe,pu.EventType.CLOSE,()=>{tt||(tt=!0,Tt(co,`RPC '${e}' stream ${u} transport closed`),Vt.Ro())}),Kt(fe,pu.EventType.ERROR,Qt=>{tt||(tt=!0,bo(co,`RPC '${e}' stream ${u} transport errored:`,Qt),Vt.Ro(new It(nt.UNAVAILABLE,"The operation could not be completed")))}),Kt(fe,pu.EventType.MESSAGE,Qt=>{var Wn;if(!tt){const sr=Qt.data[0];vn(!!sr);const Hr=sr.error||(null===(Wn=sr[0])||void 0===Wn?void 0:Wn.error);if(Hr){Tt(co,`RPC '${e}' stream ${u} received error:`,Hr);const mi=Hr.status;let Ei=function(g0){const sv=us[g0];if(void 0!==sv)return fl(sv)}(mi),No=Hr.message;void 0===Ei&&(Ei=nt.INTERNAL,No="Unknown error status: "+mi+" with message "+Hr.message),tt=!0,Vt.Ro(new It(Ei,No)),fe.close()}else Tt(co,`RPC '${e}' stream ${u} received:`,sr),Vt.Vo(sr)}}),Kt(M,fh.STAT_EVENT,Qt=>{Qt.stat===ni.PROXY?Tt(co,`RPC '${e}' stream ${u} detected buffering proxy`):Qt.stat===ni.NOPROXY&&Tt(co,`RPC '${e}' stream ${u} detected no buffering proxy`)}),setTimeout(()=>{Vt.Ao()},0),Vt}}function Gp(){return typeof window<"u"?window:null}function Uh(){return typeof document<"u"?document:null}function jf(i){return new ru(i,!0)}class Hf{constructor(e,n,o=1e3,u=1.5,p=6e4){this.si=e,this.timerId=n,this.Fo=o,this.Mo=u,this.xo=p,this.Oo=0,this.No=null,this.Bo=Date.now(),this.reset()}reset(){this.Oo=0}Lo(){this.Oo=this.xo}ko(e){this.cancel();const n=Math.floor(this.Oo+this.qo()),o=Math.max(0,Date.now()-this.Bo),u=Math.max(0,n-o);u>0&&Tt("ExponentialBackoff",`Backing off for ${u} ms (base delay: ${this.Oo} ms, delay with jitter: ${n} ms, last attempt: ${o} ms ago)`),this.No=this.si.enqueueAfterDelay(this.timerId,u,()=>(this.Bo=Date.now(),e())),this.Oo*=this.Mo,this.Oo<this.Fo&&(this.Oo=this.Fo),this.Oo>this.xo&&(this.Oo=this.xo)}Qo(){null!==this.No&&(this.No.skipDelay(),this.No=null)}cancel(){null!==this.No&&(this.No.cancel(),this.No=null)}qo(){return(Math.random()-.5)*this.Oo}}class Gf{constructor(e,n,o,u,p,I,M,U){this.si=e,this.Ko=o,this.$o=u,this.connection=p,this.authCredentialsProvider=I,this.appCheckCredentialsProvider=M,this.listener=U,this.state=0,this.Uo=0,this.Wo=null,this.Go=null,this.stream=null,this.zo=new Hf(e,n)}jo(){return 1===this.state||5===this.state||this.Ho()}Ho(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Jo()}stop(){var e=this;return(0,Re.Z)(function*(){e.jo()&&(yield e.close(0))})()}Yo(){this.state=0,this.zo.reset()}Zo(){this.Ho()&&null===this.Wo&&(this.Wo=this.si.enqueueAfterDelay(this.Ko,6e4,()=>this.Xo()))}e_(e){this.t_(),this.stream.send(e)}Xo(){var e=this;return(0,Re.Z)(function*(){if(e.Ho())return e.close(0)})()}t_(){this.Wo&&(this.Wo.cancel(),this.Wo=null)}n_(){this.Go&&(this.Go.cancel(),this.Go=null)}close(e,n){var o=this;return(0,Re.Z)(function*(){o.t_(),o.n_(),o.zo.cancel(),o.Uo++,4!==e?o.zo.reset():n&&n.code===nt.RESOURCE_EXHAUSTED?(Si(n.toString()),Si("Using maximum backoff delay to prevent overloading the backend."),o.zo.Lo()):n&&n.code===nt.UNAUTHENTICATED&&3!==o.state&&(o.authCredentialsProvider.invalidateToken(),o.appCheckCredentialsProvider.invalidateToken()),null!==o.stream&&(o.r_(),o.stream.close(),o.stream=null),o.state=e,yield o.listener.Io(n)})()}r_(){}auth(){this.state=1;const e=this.i_(this.Uo),n=this.Uo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([o,u])=>{this.Uo===n&&this.s_(o,u)},o=>{e(()=>{const u=new It(nt.UNKNOWN,"Fetching auth token failed: "+o.message);return this.o_(u)})})}s_(e,n){const o=this.i_(this.Uo);this.stream=this.__(e,n),this.stream.ho(()=>{o(()=>(this.state=2,this.Go=this.si.enqueueAfterDelay(this.$o,1e4,()=>(this.Ho()&&(this.state=3),Promise.resolve())),this.listener.ho()))}),this.stream.Io(u=>{o(()=>this.o_(u))}),this.stream.onMessage(u=>{o(()=>this.onMessage(u))})}Jo(){var e=this;this.state=5,this.zo.ko((0,Re.Z)(function*(){e.state=0,e.start()}))}o_(e){return Tt("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}i_(e){return n=>{this.si.enqueueAndForget(()=>this.Uo===e?n():(Tt("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Ml extends Gf{constructor(e,n,o,u,p,I){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,o,u,I),this.serializer=p}__(e,n){return this.connection.vo("Listen",e,n)}onMessage(e){this.zo.reset();const n=function Sp(i,e){let n;if("targetChange"in e){const o="NO_CHANGE"===(W=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===W?1:"REMOVE"===W?2:"CURRENT"===W?3:"RESET"===W?4:on(),u=e.targetChange.targetIds||[],p=function(W,ee){return W.useProto3Json?(vn(void 0===ee||"string"==typeof ee),Bs.fromBase64String(ee||"")):(vn(void 0===ee||ee instanceof Uint8Array),Bs.fromUint8Array(ee||new Uint8Array))}(i,e.targetChange.resumeToken),I=e.targetChange.cause,M=I&&function(W){const ee=void 0===W.code?nt.UNKNOWN:fl(W.code);return new It(ee,W.message||"")}(I);n=new We(o,u,p,M||null)}else if("documentChange"in e){const o=e.documentChange,u=pl(i,o.document.name),p=ds(o.document.updateTime),I=o.document.createTime?ds(o.document.createTime):un.min(),M=new bs({mapValue:{fields:o.document.fields}}),U=ur.newFoundDocument(u,p,I,M);n=new X(o.targetIds||[],o.removedTargetIds||[],U.key,U)}else if("documentDelete"in e){const o=e.documentDelete,u=pl(i,o.document),p=o.readTime?ds(o.readTime):un.min(),I=ur.newNoDocument(u,p);n=new X([],o.removedTargetIds||[],I.key,I)}else if("documentRemove"in e){const o=e.documentRemove,u=pl(i,o.document);n=new X([],o.removedTargetIds||[],u,null)}else{if(!("filter"in e))return on();{const o=e.filter,{count:u=0,unchangedNames:p}=o,I=new ud(u,p);n=new De(o.targetId,I)}}var W;return n}(this.serializer,e),o=function(p){if(!("targetChange"in p))return un.min();const I=p.targetChange;return I.targetIds&&I.targetIds.length?un.min():I.readTime?ds(I.readTime):un.min()}(e);return this.listener.a_(n,o)}u_(e){const n={};n.database=Lc(this.serializer),n.addTarget=function(p,I){let M;const U=I.target;if(M=Eu(U)?{documents:Pg(p,U)}:{query:Df(p,U)},M.targetId=I.targetId,I.resumeToken.approximateByteSize()>0){M.resumeToken=Ef(p,I.resumeToken);const W=iu(p,I.expectedCount);null!==W&&(M.expectedCount=W)}else if(I.snapshotVersion.compareTo(un.min())>0){M.readTime=Su(p,I.snapshotVersion.toTimestamp());const W=iu(p,I.expectedCount);null!==W&&(M.expectedCount=W)}return M}(this.serializer,e);const o=function ty(i,e){const n=function(u){switch(u){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return on()}}(e.purpose);return null==n?null:{"goog-listen-tags":n}}(0,e);o&&(n.labels=o),this.e_(n)}c_(e){const n={};n.database=Lc(this.serializer),n.removeTarget=e,this.e_(n)}}class Xg extends Gf{constructor(e,n,o,u,p,I){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,o,u,I),this.serializer=p,this.l_=!1}get h_(){return this.l_}start(){this.l_=!1,this.lastStreamToken=void 0,super.start()}r_(){this.l_&&this.P_([])}__(e,n){return this.connection.vo("Write",e,n)}onMessage(e){if(vn(!!e.streamToken),this.lastStreamToken=e.streamToken,this.l_){this.zo.reset();const n=function wh(i,e){return i&&i.length>0?(vn(void 0!==e),i.map(n=>function(u,p){let I=ds(u.updateTime?u.updateTime:p);return I.isEqual(un.min())&&(I=ds(p)),new Aa(I,u.transformResults||[])}(n,e))):[]}(e.writeResults,e.commitTime),o=ds(e.commitTime);return this.listener.I_(o,n)}return vn(!e.writeResults||0===e.writeResults.length),this.l_=!0,this.listener.T_()}E_(){const e={};e.database=Lc(this.serializer),this.e_(e)}P_(e){const n={streamToken:this.lastStreamToken,writes:e.map(o=>bf(this.serializer,o))};this.e_(n)}}class Tv extends class{}{constructor(e,n,o,u){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=o,this.serializer=u,this.d_=!1}A_(){if(this.d_)throw new It(nt.FAILED_PRECONDITION,"The client has already been terminated.")}wo(e,n,o){return this.A_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([u,p])=>this.connection.wo(e,n,o,u,p)).catch(u=>{throw"FirebaseError"===u.name?(u.code===nt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new It(nt.UNKNOWN,u.toString())})}Co(e,n,o,u){return this.A_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([p,I])=>this.connection.Co(e,n,o,p,I,u)).catch(p=>{throw"FirebaseError"===p.name?(p.code===nt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),p):new It(nt.UNKNOWN,p.toString())})}terminate(){this.d_=!0}}class bv{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.V_=0,this.m_=null,this.f_=!0}g_(){0===this.V_&&(this.p_("Unknown"),this.m_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.m_=null,this.y_("Backend didn't respond within 10 seconds."),this.p_("Offline"),Promise.resolve())))}w_(e){"Online"===this.state?this.p_("Unknown"):(this.V_++,this.V_>=1&&(this.S_(),this.y_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.p_("Offline")))}set(e){this.S_(),this.V_=0,"Online"===e&&(this.f_=!1),this.p_(e)}p_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}y_(e){const n=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.f_?(Si(n),this.f_=!1):Tt("OnlineStateTracker",n)}S_(){null!==this.m_&&(this.m_.cancel(),this.m_=null)}}class em{constructor(e,n,o,u,p){var I=this;this.localStore=e,this.datastore=n,this.asyncQueue=o,this.remoteSyncer={},this.b_=[],this.D_=new Map,this.C_=new Set,this.v_=[],this.F_=p,this.F_.ro(M=>{o.enqueueAndForget((0,Re.Z)(function*(){var U;au(I)&&(Tt("RemoteStore","Restarting streams for network reachability change."),yield(U=(0,Re.Z)(function*(ee){const fe=zt(ee);fe.C_.add(4),yield pc(fe),fe.M_.set("Unknown"),fe.C_.delete(4),yield $p(fe)}),function W(ee){return U.apply(this,arguments)})(I))}))}),this.M_=new bv(o,u)}}function $p(i){return Nu.apply(this,arguments)}function Nu(){return Nu=(0,Re.Z)(function*(i){if(au(i))for(const e of i.v_)yield e(!0)}),Nu.apply(this,arguments)}function pc(i){return tm.apply(this,arguments)}function tm(){return tm=(0,Re.Z)(function*(i){for(const e of i.v_)yield e(!1)}),tm.apply(this,arguments)}function $f(i,e){const n=zt(i);n.D_.has(e.targetId)||(n.D_.set(e.targetId,e),zp(n)?zf(n):Hh(n).Ho()&&jh(n,e))}function Ed(i,e){const n=zt(i),o=Hh(n);n.D_.delete(e),o.Ho()&&nm(n,e),0===n.D_.size&&(o.Ho()?o.Zo():au(n)&&n.M_.set("Unknown"))}function jh(i,e){if(i.x_.Oe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(un.min())>0){const n=i.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Hh(i).u_(e)}function nm(i,e){i.x_.Oe(e),Hh(i).c_(e)}function zf(i){i.x_=new rn({getRemoteKeysForTarget:e=>i.remoteSyncer.getRemoteKeysForTarget(e),_t:e=>i.D_.get(e)||null,nt:()=>i.datastore.serializer.databaseId}),Hh(i).start(),i.M_.g_()}function zp(i){return au(i)&&!Hh(i).jo()&&i.D_.size>0}function au(i){return 0===zt(i).C_.size}function u_(i){i.x_=void 0}function Wp(i){return qp.apply(this,arguments)}function qp(){return qp=(0,Re.Z)(function*(i){i.D_.forEach((e,n)=>{jh(i,e)})}),qp.apply(this,arguments)}function Ty(i,e){return rm.apply(this,arguments)}function rm(){return rm=(0,Re.Z)(function*(i,e){u_(i),zp(i)?(i.M_.w_(e),zf(i)):i.M_.set("Unknown")}),rm.apply(this,arguments)}function c_(i,e,n){return im.apply(this,arguments)}function im(){return im=(0,Re.Z)(function*(i,e,n){if(i.M_.set("Online"),e instanceof We&&2===e.state&&e.cause)try{yield(o=(0,Re.Z)(function*(p,I){const M=I.cause;for(const U of I.targetIds)p.D_.has(U)&&(yield p.remoteSyncer.rejectListen(U,M),p.D_.delete(U),p.x_.removeTarget(U))}),function u(p,I){return o.apply(this,arguments)})(i,e)}catch(o){Tt("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),o),yield Pu(i,o)}else if(e instanceof X?i.x_.$e(e):e instanceof De?i.x_.Je(e):i.x_.Ge(e),!n.isEqual(un.min()))try{const o=yield Ev(i.localStore);n.compareTo(o)>=0&&(yield function(p,I){const M=p.x_.it(I);return M.targetChanges.forEach((U,W)=>{if(U.resumeToken.approximateByteSize()>0){const ee=p.D_.get(W);ee&&p.D_.set(W,ee.withResumeToken(U.resumeToken,I))}}),M.targetMismatches.forEach((U,W)=>{const ee=p.D_.get(U);if(!ee)return;p.D_.set(U,ee.withResumeToken(Bs.EMPTY_BYTE_STRING,ee.snapshotVersion)),nm(p,U);const fe=new Pl(ee.target,U,W,ee.sequenceNumber);jh(p,fe)}),p.remoteSyncer.applyRemoteEvent(M)}(i,n))}catch(o){Tt("RemoteStore","Failed to raise snapshot:",o),yield Pu(i,o)}var o}),im.apply(this,arguments)}function Pu(i,e,n){return Wf.apply(this,arguments)}function Wf(){return Wf=(0,Re.Z)(function*(i,e,n){if(!Ht(e))throw e;i.C_.add(1),yield pc(i),i.M_.set("Offline"),n||(n=()=>Ev(i.localStore)),i.asyncQueue.enqueueRetryable((0,Re.Z)(function*(){Tt("RemoteStore","Retrying IndexedDB access"),yield n(),i.C_.delete(1),yield $p(i)}))}),Wf.apply(this,arguments)}function Kp(i,e){return e().catch(n=>Pu(i,n,e))}function Td(i){return Yp.apply(this,arguments)}function Yp(){return Yp=(0,Re.Z)(function*(i){const e=zt(i),n=Mu(e);let o=e.b_.length>0?e.b_[e.b_.length-1].batchId:-1;for(;d_(e);)try{const u=yield l_(e.localStore,o);if(null===u){0===e.b_.length&&n.Zo();break}o=u.batchId,Ou(e,u)}catch(u){yield Pu(e,u)}sm(e)&&by(e)}),Yp.apply(this,arguments)}function d_(i){return au(i)&&i.b_.length<10}function Ou(i,e){i.b_.push(e);const n=Mu(i);n.Ho()&&n.h_&&n.P_(e.mutations)}function sm(i){return au(i)&&!Mu(i).jo()&&i.b_.length>0}function by(i){Mu(i).start()}function qf(i){return gc.apply(this,arguments)}function gc(){return gc=(0,Re.Z)(function*(i){Mu(i).E_()}),gc.apply(this,arguments)}function bd(i){return Kf.apply(this,arguments)}function Kf(){return Kf=(0,Re.Z)(function*(i){const e=Mu(i);for(const n of i.b_)e.P_(n.mutations)}),Kf.apply(this,arguments)}function Zp(i,e,n){return om.apply(this,arguments)}function om(){return om=(0,Re.Z)(function*(i,e,n){const o=i.b_.shift(),u=ld.from(o,e,n);yield Kp(i,()=>i.remoteSyncer.applySuccessfulWrite(u)),yield Td(i)}),om.apply(this,arguments)}function Qp(i,e){return lu.apply(this,arguments)}function lu(){return lu=(0,Re.Z)(function*(i,e){var n;e&&Mu(i).h_&&(yield(n=(0,Re.Z)(function*(u,p){if(Gd(M=p.code)&&M!==nt.ABORTED){const I=u.b_.shift();Mu(u).Yo(),yield Kp(u,()=>u.remoteSyncer.rejectFailedWrite(I.batchId,p)),yield Td(u)}var M}),function o(u,p){return n.apply(this,arguments)})(i,e)),sm(i)&&by(i)}),lu.apply(this,arguments)}function h_(i,e){return Yf.apply(this,arguments)}function Yf(){return Yf=(0,Re.Z)(function*(i,e){const n=zt(i);n.asyncQueue.verifyOperationInProgress(),Tt("RemoteStore","RemoteStore received new credentials");const o=au(n);n.C_.add(3),yield pc(n),o&&n.M_.set("Unknown"),yield n.remoteSyncer.handleCredentialChange(e),n.C_.delete(3),yield $p(n)}),Yf.apply(this,arguments)}function wy(i,e){return ho.apply(this,arguments)}function ho(){return ho=(0,Re.Z)(function*(i,e){const n=zt(i);e?(n.C_.delete(2),yield $p(n)):e||(n.C_.add(2),yield pc(n),n.M_.set("Unknown"))}),ho.apply(this,arguments)}function Hh(i){return i.O_||(i.O_=function(n,o,u){const p=zt(n);return p.A_(),new Ml(o,p.connection,p.authCredentials,p.appCheckCredentials,p.serializer,u)}(i.datastore,i.asyncQueue,{ho:Wp.bind(null,i),Io:Ty.bind(null,i),a_:c_.bind(null,i)}),i.v_.push(function(){var e=(0,Re.Z)(function*(n){n?(i.O_.Yo(),zp(i)?zf(i):i.M_.set("Unknown")):(yield i.O_.stop(),u_(i))});return function(n){return e.apply(this,arguments)}}())),i.O_}function Mu(i){return i.N_||(i.N_=function(n,o,u){const p=zt(n);return p.A_(),new Xg(o,p.connection,p.authCredentials,p.appCheckCredentials,p.serializer,u)}(i.datastore,i.asyncQueue,{ho:qf.bind(null,i),Io:Qp.bind(null,i),T_:bd.bind(null,i),I_:Zp.bind(null,i)}),i.v_.push(function(){var e=(0,Re.Z)(function*(n){n?(i.N_.Yo(),yield Td(i)):(yield i.N_.stop(),i.b_.length>0&&(Tt("RemoteStore",`Stopping write stream with ${i.b_.length} pending writes`),i.b_=[]))});return function(n){return e.apply(this,arguments)}}())),i.N_}class Zf{constructor(e,n,o,u,p){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=o,this.op=u,this.removalCallback=p,this.deferred=new Ks,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(I=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,o,u,p){const I=Date.now()+o,M=new Zf(e,n,I,u,p);return M.start(o),M}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new It(nt.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function th(i,e){if(Si("AsyncQueue",`${e}: ${i}`),Ht(i))return new It(nt.UNAVAILABLE,`${e}: ${i}`);throw i}class nh{constructor(e){this.comparator=e?(n,o)=>e(n,o)||Zt.comparator(n.key,o.key):(n,o)=>Zt.comparator(n.key,o.key),this.keyedMap=bu(),this.sortedSet=new hi(this.comparator)}static emptySet(e){return new nh(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,o)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof nh)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),o=e.sortedSet.getIterator();for(;n.hasNext();){const u=n.getNext().key,p=o.getNext().key;if(!u.isEqual(p))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,n){const o=new nh;return o.comparator=this.comparator,o.keyedMap=e,o.sortedSet=n,o}}class am{constructor(){this.B_=new hi(Zt.comparator)}track(e){const n=e.doc.key,o=this.B_.get(n);o?0!==e.type&&3===o.type?this.B_=this.B_.insert(n,e):3===e.type&&1!==o.type?this.B_=this.B_.insert(n,{type:o.type,doc:e.doc}):2===e.type&&2===o.type?this.B_=this.B_.insert(n,{type:2,doc:e.doc}):2===e.type&&0===o.type?this.B_=this.B_.insert(n,{type:0,doc:e.doc}):1===e.type&&0===o.type?this.B_=this.B_.remove(n):1===e.type&&2===o.type?this.B_=this.B_.insert(n,{type:1,doc:o.doc}):0===e.type&&1===o.type?this.B_=this.B_.insert(n,{type:2,doc:e.doc}):on():this.B_=this.B_.insert(n,e)}L_(){const e=[];return this.B_.inorderTraversal((n,o)=>{e.push(o)}),e}}class rh{constructor(e,n,o,u,p,I,M,U,W){this.query=e,this.docs=n,this.oldDocs=o,this.docChanges=u,this.mutatedKeys=p,this.fromCache=I,this.syncStateChanged=M,this.excludesMetadataChanges=U,this.hasCachedResults=W}static fromInitialDocuments(e,n,o,u,p){const I=[];return n.forEach(M=>{I.push({type:0,doc:M})}),new rh(e,n,nh.emptySet(n),I,o,u,!0,!1,p)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&je(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,o=e.docChanges;if(n.length!==o.length)return!1;for(let u=0;u<n.length;u++)if(n[u].type!==o[u].type||!n[u].doc.isEqual(o[u].doc))return!1;return!0}}class Dy{constructor(){this.k_=void 0,this.listeners=[]}}class f_{constructor(){this.queries=new no(e=>at(e),je),this.onlineState="Unknown",this.q_=new Set}}function Jp(i,e){return lm.apply(this,arguments)}function lm(){return lm=(0,Re.Z)(function*(i,e){const n=zt(i),o=e.query;let u=!1,p=n.queries.get(o);if(p||(u=!0,p=new Dy),u)try{p.k_=yield n.onListen(o)}catch(I){const M=th(I,`Initialization of query '${St(e.query)}' failed`);return void e.onError(M)}n.queries.set(o,p),p.listeners.push(e),e.Q_(n.onlineState),p.k_&&e.K_(p.k_)&&xu(n)}),lm.apply(this,arguments)}function Xp(i,e){return eg.apply(this,arguments)}function eg(){return eg=(0,Re.Z)(function*(i,e){const n=zt(i),o=e.query;let u=!1;const p=n.queries.get(o);if(p){const I=p.listeners.indexOf(e);I>=0&&(p.listeners.splice(I,1),u=0===p.listeners.length)}if(u)return n.queries.delete(o),n.onUnlisten(o)}),eg.apply(this,arguments)}function p_(i,e){const n=zt(i);let o=!1;for(const u of e){const I=n.queries.get(u.query);if(I){for(const M of I.listeners)M.K_(u)&&(o=!0);I.k_=u}}o&&xu(n)}function ih(i,e,n){const o=zt(i),u=o.queries.get(e);if(u)for(const p of u.listeners)p.onError(n);o.queries.delete(e)}function xu(i){i.q_.forEach(e=>{e.next()})}class mc{constructor(e,n,o){this.query=e,this.U_=n,this.W_=!1,this.G_=null,this.onlineState="Unknown",this.options=o||{}}K_(e){if(!this.options.includeMetadataChanges){const o=[];for(const u of e.docChanges)3!==u.type&&o.push(u);e=new rh(e.query,e.docs,e.oldDocs,o,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.W_?this.z_(e)&&(this.U_.next(e),n=!0):this.j_(e,this.onlineState)&&(this.H_(e),n=!0),this.G_=e,n}onError(e){this.U_.error(e)}Q_(e){this.onlineState=e;let n=!1;return this.G_&&!this.W_&&this.j_(this.G_,e)&&(this.H_(this.G_),n=!0),n}j_(e,n){return!e.fromCache||(!this.options.J_||!("Offline"!==n))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===n)}z_(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.G_&&this.G_.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}H_(e){e=rh.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.W_=!0,this.U_.next(e)}}class Cy{constructor(e,n){this.Y_=e,this.byteLength=n}Z_(){return"metadata"in this.Y_}}class g_{constructor(e){this.serializer=e}hs(e){return pl(this.serializer,e)}Ps(e){return e.metadata.exists?Ap(this.serializer,e.document,!1):ur.newNoDocument(this.hs(e.metadata.name),this.Is(e.metadata.readTime))}Is(e){return ds(e)}}class m_{constructor(e,n,o){this.X_=e,this.localStore=n,this.serializer=o,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=um(e)}ea(e){this.progress.bytesLoaded+=e.byteLength;let n=this.progress.documentsLoaded;if(e.Y_.namedQuery)this.queries.push(e.Y_.namedQuery);else if(e.Y_.documentMetadata){this.documents.push({metadata:e.Y_.documentMetadata}),e.Y_.documentMetadata.exists||++n;const o=lr.fromString(e.Y_.documentMetadata.name);this.collectionGroups.add(o.get(o.length-2))}else e.Y_.document&&(this.documents[this.documents.length-1].document=e.Y_.document,++n);return n!==this.progress.documentsLoaded?(this.progress.documentsLoaded=n,Object.assign({},this.progress)):null}ta(e){const n=new Map,o=new g_(this.serializer);for(const u of e)if(u.metadata.queries){const p=o.hs(u.metadata.name);for(const I of u.metadata.queries){const M=(n.get(I)||gr()).add(p);n.set(I,M)}}return n}complete(){var e=this;return(0,Re.Z)(function*(){const n=yield function Bh(i,e,n,o){return yd.apply(this,arguments)}(e.localStore,new g_(e.serializer),e.documents,e.X_.id),o=e.ta(e.documents);for(const u of e.queries)yield vd(e.localStore,u,o.get(u.name));return e.progress.taskState="Success",{progress:e.progress,na:e.collectionGroups,ra:n}})()}}function um(i){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:i.totalDocuments,totalBytes:i.totalBytes}}class Qf{constructor(e){this.key=e}}class Gh{constructor(e){this.key=e}}class za{constructor(e,n){this.query=e,this.ia=n,this.sa=null,this.hasCachedResults=!1,this.current=!1,this.oa=gr(),this.mutatedKeys=gr(),this._a=Lr(e),this.aa=new nh(this._a)}get ua(){return this.ia}ca(e,n){const o=n?n.la:new am,u=n?n.aa:this.aa;let p=n?n.mutatedKeys:this.mutatedKeys,I=u,M=!1;const U="F"===this.query.limitType&&u.size===this.query.limit?u.last():null,W="L"===this.query.limitType&&u.size===this.query.limit?u.first():null;if(e.inorderTraversal((ee,fe)=>{const Me=u.get(ee),tt=pn(this.query,fe)?fe:null,Vt=!!Me&&this.mutatedKeys.has(Me.key),Kt=!!tt&&(tt.hasLocalMutations||this.mutatedKeys.has(tt.key)&&tt.hasCommittedMutations);let Qt=!1;Me&&tt?Me.data.isEqual(tt.data)?Vt!==Kt&&(o.track({type:3,doc:tt}),Qt=!0):this.ha(Me,tt)||(o.track({type:2,doc:tt}),Qt=!0,(U&&this._a(tt,U)>0||W&&this._a(tt,W)<0)&&(M=!0)):!Me&&tt?(o.track({type:0,doc:tt}),Qt=!0):Me&&!tt&&(o.track({type:1,doc:Me}),Qt=!0,(U||W)&&(M=!0)),Qt&&(tt?(I=I.add(tt),p=Kt?p.add(ee):p.delete(ee)):(I=I.delete(ee),p=p.delete(ee)))}),null!==this.query.limit)for(;I.size>this.query.limit;){const ee="F"===this.query.limitType?I.last():I.first();I=I.delete(ee.key),p=p.delete(ee.key),o.track({type:1,doc:ee})}return{aa:I,la:o,Zi:M,mutatedKeys:p}}ha(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,o){const u=this.aa;this.aa=e.aa,this.mutatedKeys=e.mutatedKeys;const p=e.la.L_();p.sort((W,ee)=>function(Me,tt){const Vt=Kt=>{switch(Kt){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return on()}};return Vt(Me)-Vt(tt)}(W.type,ee.type)||this._a(W.doc,ee.doc)),this.Pa(o);const I=n?this.Ia():[],M=0===this.oa.size&&this.current?1:0,U=M!==this.sa;return this.sa=M,0!==p.length||U?{snapshot:new rh(this.query,e.aa,u,p,e.mutatedKeys,0===M,U,!1,!!o&&o.resumeToken.approximateByteSize()>0),Ta:I}:{Ta:I}}Q_(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({aa:this.aa,la:new am,mutatedKeys:this.mutatedKeys,Zi:!1},!1)):{Ta:[]}}Ea(e){return!this.ia.has(e)&&!!this.aa.has(e)&&!this.aa.get(e).hasLocalMutations}Pa(e){e&&(e.addedDocuments.forEach(n=>this.ia=this.ia.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.ia=this.ia.delete(n)),this.current=e.current)}Ia(){if(!this.current)return[];const e=this.oa;this.oa=gr(),this.aa.forEach(o=>{this.Ea(o.key)&&(this.oa=this.oa.add(o.key))});const n=[];return e.forEach(o=>{this.oa.has(o)||n.push(new Gh(o))}),this.oa.forEach(o=>{e.has(o)||n.push(new Qf(o))}),n}da(e){this.ia=e.ls,this.oa=gr();const n=this.ca(e.documents);return this.applyChanges(n,!0)}Aa(){return rh.fromInitialDocuments(this.query,this.aa,this.mutatedKeys,0===this.sa,this.hasCachedResults)}}class tg{constructor(e,n,o){this.query=e,this.targetId=n,this.view=o}}class $h{constructor(e){this.key=e,this.Ra=!1}}class cm{constructor(e,n,o,u,p,I){this.localStore=e,this.remoteStore=n,this.eventManager=o,this.sharedClientState=u,this.currentUser=p,this.maxConcurrentLimboResolutions=I,this.Va={},this.ma=new no(M=>at(M),je),this.fa=new Map,this.ga=new Set,this.pa=new hi(Zt.comparator),this.ya=new Map,this.wa=new Ff,this.Sa={},this.ba=new Map,this.Da=Ol.Nn(),this.onlineState="Unknown",this.Ca=void 0}get isPrimaryClient(){return!0===this.Ca}}function Ay(i,e){return dm.apply(this,arguments)}function dm(){return dm=(0,Re.Z)(function*(i,e){const n=vm(i);let o,u;const p=n.ma.get(e);if(p)o=p.targetId,n.sharedClientState.addLocalQueryTarget(o),u=p.view.Aa();else{const I=yield Bp(n.localStore,w(e)),M=n.sharedClientState.addLocalQueryTarget(I.targetId);o=I.targetId,u=yield Jf(n,e,o,"current"===M,I.resumeToken),n.isPrimaryClient&&$f(n.remoteStore,I)}return u}),dm.apply(this,arguments)}function Jf(i,e,n,o,u){return ng.apply(this,arguments)}function ng(){return ng=(0,Re.Z)(function*(i,e,n,o,u){i.va=(fe,Me,tt)=>{return(Vt=(0,Re.Z)(function*(Qt,Wn,sr,Gn){let Hr=Wn.view.ca(sr);Hr.Zi&&(Hr=yield Up(Qt.localStore,Wn.query,!1).then(({documents:No})=>Wn.view.ca(No,Hr)));const mi=Gn&&Gn.targetChanges.get(Wn.targetId),Ei=Wn.view.applyChanges(Hr,Qt.isPrimaryClient,mi);return Wh(Qt,Wn.targetId,Ei.Ta),Ei.snapshot}),function Kt(Qt,Wn,sr,Gn){return Vt.apply(this,arguments)})(i,fe,Me,tt);var Vt};const p=yield Up(i.localStore,e,!0),I=new za(e,p.ls),M=I.ca(p.documents),U=$.createSynthesizedTargetChangeForCurrentChange(n,o&&"Offline"!==i.onlineState,u),W=I.applyChanges(M,i.isPrimaryClient,U);Wh(i,n,W.Ta);const ee=new tg(e,n,I);return i.ma.set(e,ee),i.fa.has(n)?i.fa.get(n).push(e):i.fa.set(n,[e]),W.snapshot}),ng.apply(this,arguments)}function wv(i,e){return zh.apply(this,arguments)}function zh(){return zh=(0,Re.Z)(function*(i,e){const n=zt(i),o=n.ma.get(e),u=n.fa.get(o.targetId);if(u.length>1)return n.fa.set(o.targetId,u.filter(p=>!je(p,e))),void n.ma.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(o.targetId),n.sharedClientState.isActiveQueryTarget(o.targetId)||(yield Vh(n.localStore,o.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(o.targetId),Ed(n.remoteStore,o.targetId),sh(n,o.targetId)}).catch(A))):(sh(n,o.targetId),yield Vh(n.localStore,o.targetId,!0))}),zh.apply(this,arguments)}function hm(){return hm=(0,Re.Z)(function*(i,e,n){const o=I_(i);try{const u=yield function(I,M){const U=zt(I),W=jr.now(),ee=M.reduce((tt,Vt)=>tt.add(Vt.key),gr());let fe,Me;return U.persistence.runTransaction("Locally write mutations","readwrite",tt=>{let Vt=Co(),Kt=gr();return U.ss.getEntries(tt,ee).next(Qt=>{Vt=Qt,Vt.forEach((Wn,sr)=>{sr.isValidDocument()||(Kt=Kt.add(Wn))})}).next(()=>U.localDocuments.getOverlayedDocuments(tt,Vt)).next(Qt=>{fe=Qt;const Wn=[];for(const sr of M){const Gn=Sa(sr,fe.get(sr.key).overlayedDocument);null!=Gn&&Wn.push(new Rl(sr.key,Gn,td(Gn.value.mapValue),Fi.exists(!0)))}return U.mutationQueue.addMutationBatch(tt,W,Wn,M)}).next(Qt=>{Me=Qt;const Wn=Qt.applyToLocalDocumentSet(fe,Kt);return U.documentOverlayCache.saveOverlays(tt,Qt.batchId,Wn)})}).then(()=>({batchId:Me.batchId,changes:Ao(fe)}))}(o.localStore,e);o.sharedClientState.addPendingMutation(u.batchId),function(I,M,U){let W=I.Sa[I.currentUser.toKey()];W||(W=new hi(Zn)),W=W.insert(M,U),I.Sa[I.currentUser.toKey()]=W}(o,u.batchId,n),yield xl(o,u.changes),yield Td(o.remoteStore)}catch(u){const p=th(u,"Failed to persist write");n.reject(p)}}),hm.apply(this,arguments)}function rg(i,e){return Xf.apply(this,arguments)}function Xf(){return Xf=(0,Re.Z)(function*(i,e){const n=zt(i);try{const o=yield function yy(i,e){const n=zt(i),o=e.snapshotVersion;let u=n.ts;return n.persistence.runTransaction("Apply remote event","readwrite-primary",p=>{const I=n.ss.newChangeBuffer({trackRemovals:!0});u=n.ts;const M=[];e.targetChanges.forEach((ee,fe)=>{const Me=u.get(fe);if(!Me)return;M.push(n.qr.removeMatchingKeys(p,ee.removedDocuments,fe).next(()=>n.qr.addMatchingKeys(p,ee.addedDocuments,fe)));let tt=Me.withSequenceNumber(p.currentSequenceNumber);var Kt,Qt,Wn;null!==e.targetMismatches.get(fe)?tt=tt.withResumeToken(Bs.EMPTY_BYTE_STRING,un.min()).withLastLimboFreeSnapshotVersion(un.min()):ee.resumeToken.approximateByteSize()>0&&(tt=tt.withResumeToken(ee.resumeToken,o)),u=u.insert(fe,tt),Qt=tt,Wn=ee,(0===(Kt=Me).resumeToken.approximateByteSize()||Qt.snapshotVersion.toMicroseconds()-Kt.snapshotVersion.toMicroseconds()>=3e8||Wn.addedDocuments.size+Wn.modifiedDocuments.size+Wn.removedDocuments.size>0)&&M.push(n.qr.updateTargetData(p,tt))});let U=Co(),W=gr();if(e.documentUpdates.forEach(ee=>{e.resolvedLimboDocuments.has(ee)&&M.push(n.persistence.referenceDelegate.updateLimboDocument(p,ee))}),M.push(Yg(p,I,e.documentUpdates).next(ee=>{U=ee.us,W=ee.cs})),!o.isEqual(un.min())){const ee=n.qr.getLastRemoteSnapshotVersion(p).next(fe=>n.qr.setTargetsMetadata(p,p.currentSequenceNumber,o));M.push(ee)}return V.waitFor(M).next(()=>I.apply(p)).next(()=>n.localDocuments.getLocalViewOfDocuments(p,U,W)).next(()=>U)}).then(p=>(n.ts=u,p))}(n.localStore,e);e.targetChanges.forEach((u,p)=>{const I=n.ya.get(p);I&&(vn(u.addedDocuments.size+u.modifiedDocuments.size+u.removedDocuments.size<=1),u.addedDocuments.size>0?I.Ra=!0:u.modifiedDocuments.size>0?vn(I.Ra):u.removedDocuments.size>0&&(vn(I.Ra),I.Ra=!1))}),yield xl(n,o,e)}catch(o){yield A(o)}}),Xf.apply(this,arguments)}function uu(i,e,n){const o=zt(i);if(o.isPrimaryClient&&0===n||!o.isPrimaryClient&&1===n){const u=[];o.ma.forEach((p,I)=>{const M=I.view.Q_(e);M.snapshot&&u.push(M.snapshot)}),function(I,M){const U=zt(I);U.onlineState=M;let W=!1;U.queries.forEach((ee,fe)=>{for(const Me of fe.listeners)Me.Q_(M)&&(W=!0)}),W&&xu(U)}(o.eventManager,e),u.length&&o.Va.a_(u),o.onlineState=e,o.isPrimaryClient&&o.sharedClientState.setOnlineState(e)}}function Gc(i,e,n){return ig.apply(this,arguments)}function ig(){return ig=(0,Re.Z)(function*(i,e,n){const o=zt(i);o.sharedClientState.updateQueryState(e,"rejected",n);const u=o.ya.get(e),p=u&&u.key;if(p){let I=new hi(Zt.comparator);I=I.insert(p,ur.newNoDocument(p,un.min()));const M=gr().add(p),U=new C(un.min(),new Map,new hi(Zn),I,M);yield rg(o,U),o.pa=o.pa.remove(p),o.ya.delete(e),tp(o)}else yield Vh(o.localStore,e,!1).then(()=>sh(o,e,n)).catch(A)}),ig.apply(this,arguments)}function __(i,e){return sg.apply(this,arguments)}function sg(){return sg=(0,Re.Z)(function*(i,e){const n=zt(i),o=e.batch.batchId;try{const u=yield function Kg(i,e){const n=zt(i);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",o=>{const u=e.batch.keys(),p=n.ss.newChangeBuffer({trackRemovals:!0});return function(M,U,W,ee){const fe=W.batch,Me=fe.keys();let tt=V.resolve();return Me.forEach(Vt=>{tt=tt.next(()=>ee.getEntry(U,Vt)).next(Kt=>{const Qt=W.docVersions.get(Vt);vn(null!==Qt),Kt.version.compareTo(Qt)<0&&(fe.applyToRemoteDocument(Kt,W),Kt.isValidDocument()&&(Kt.setReadTime(W.commitVersion),ee.addEntry(Kt)))})}),tt.next(()=>M.mutationQueue.removeMutationBatch(U,fe))}(n,o,e,p).next(()=>p.apply(o)).next(()=>n.mutationQueue.performConsistencyCheck(o)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(o,u,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(o,function(M){let U=gr();for(let W=0;W<M.mutationResults.length;++W)M.mutationResults[W].transformResults.length>0&&(U=U.add(M.batch.mutations[W].key));return U}(e))).next(()=>n.localDocuments.getDocuments(o,u))})}(n.localStore,e);_c(n,o,null),ag(n,o),n.sharedClientState.updateMutationState(o,"acknowledged"),yield xl(n,u)}catch(u){yield A(u)}}),sg.apply(this,arguments)}function y_(i,e,n){return ep.apply(this,arguments)}function ep(){return ep=(0,Re.Z)(function*(i,e,n){const o=zt(i);try{const u=yield function(I,M){const U=zt(I);return U.persistence.runTransaction("Reject batch","readwrite-primary",W=>{let ee;return U.mutationQueue.lookupMutationBatch(W,M).next(fe=>(vn(null!==fe),ee=fe.keys(),U.mutationQueue.removeMutationBatch(W,fe))).next(()=>U.mutationQueue.performConsistencyCheck(W)).next(()=>U.documentOverlayCache.removeOverlaysForBatchId(W,ee,M)).next(()=>U.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(W,ee)).next(()=>U.localDocuments.getDocuments(W,ee))})}(o.localStore,e);_c(o,e,n),ag(o,e),o.sharedClientState.updateMutationState(e,"rejected",n),yield xl(o,u)}catch(u){yield A(u)}}),ep.apply(this,arguments)}function og(){return og=(0,Re.Z)(function*(i,e){const n=zt(i);au(n.remoteStore)||Tt("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const o=yield function(I){const M=zt(I);return M.persistence.runTransaction("Get highest unacknowledged batch id","readonly",U=>M.mutationQueue.getHighestUnacknowledgedBatchId(U))}(n.localStore);if(-1===o)return void e.resolve();const u=n.ba.get(o)||[];u.push(e),n.ba.set(o,u)}catch(o){const u=th(o,"Initialization of waitForPendingWrites() operation failed");e.reject(u)}}),og.apply(this,arguments)}function ag(i,e){(i.ba.get(e)||[]).forEach(n=>{n.resolve()}),i.ba.delete(e)}function _c(i,e,n){const o=zt(i);let u=o.Sa[o.currentUser.toKey()];if(u){const p=u.get(e);p&&(n?p.reject(n):p.resolve(),u=u.remove(e)),o.Sa[o.currentUser.toKey()]=u}}function sh(i,e,n=null){i.sharedClientState.removeLocalQueryTarget(e);for(const o of i.fa.get(e))i.ma.delete(o),n&&i.Va.Fa(o,n);i.fa.delete(e),i.isPrimaryClient&&i.wa.Rr(e).forEach(o=>{i.wa.containsKey(o)||fm(i,o)})}function fm(i,e){i.ga.delete(e.path.canonicalString());const n=i.pa.get(e);null!==n&&(Ed(i.remoteStore,n),i.pa=i.pa.remove(e),i.ya.delete(n),tp(i))}function Wh(i,e,n){for(const o of n)o instanceof Qf?(i.wa.addReference(o.key,e),qh(i,o)):o instanceof Gh?(Tt("SyncEngine","Document no longer in limbo: "+o.key),i.wa.removeReference(o.key,e),i.wa.containsKey(o.key)||fm(i,o.key)):on()}function qh(i,e){const n=e.key,o=n.path.canonicalString();i.pa.get(n)||i.ga.has(o)||(Tt("SyncEngine","New document in limbo: "+n),i.ga.add(o),tp(i))}function tp(i){for(;i.ga.size>0&&i.pa.size<i.maxConcurrentLimboResolutions;){const e=i.ga.values().next().value;i.ga.delete(e);const n=new Zt(lr.fromString(e)),o=i.Da.next();i.ya.set(o,new $h(n)),i.pa=i.pa.insert(n,o),$f(i.remoteStore,new Pl(w(Mc(n.path)),o,"TargetPurposeLimboResolution",os._e))}}function xl(i,e,n){return np.apply(this,arguments)}function np(){return np=(0,Re.Z)(function*(i,e,n){const o=zt(i),u=[],p=[],I=[];var M;o.ma.isEmpty()||(o.ma.forEach((M,U)=>{I.push(o.va(U,e,n).then(W=>{if((W||n)&&o.isPrimaryClient&&o.sharedClientState.updateQueryState(U.targetId,W?.fromCache?"not-current":"current"),W){u.push(W);const ee=$a.Qi(U.targetId,W);p.push(ee)}}))}),yield Promise.all(I),o.Va.a_(u),yield(M=(0,Re.Z)(function*(W,ee){const fe=zt(W);try{yield fe.persistence.runTransaction("notifyLocalViewChanges","readwrite",Me=>V.forEach(ee,tt=>V.forEach(tt.ki,Vt=>fe.persistence.referenceDelegate.addReference(Me,tt.targetId,Vt)).next(()=>V.forEach(tt.qi,Vt=>fe.persistence.referenceDelegate.removeReference(Me,tt.targetId,Vt)))))}catch(Me){if(!Ht(Me))throw Me;Tt("LocalStore","Failed to update sequence numbers: "+Me)}for(const Me of ee){const tt=Me.targetId;if(!Me.fromCache){const Vt=fe.ts.get(tt),Qt=Vt.withLastLimboFreeSnapshotVersion(Vt.snapshotVersion);fe.ts=fe.ts.insert(tt,Qt)}}}),function U(W,ee){return M.apply(this,arguments)})(o.localStore,p))}),np.apply(this,arguments)}function Kh(i,e){return Yh.apply(this,arguments)}function Yh(){return Yh=(0,Re.Z)(function*(i,e){const n=zt(i);if(!n.currentUser.isEqual(e)){Tt("SyncEngine","User change. New user:",e.toKey());const o=yield md(n.localStore,e);n.currentUser=e,(p=n).ba.forEach(M=>{M.forEach(U=>{U.reject(new It(nt.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),p.ba.clear(),n.sharedClientState.handleUserChange(e,o.removedBatchIds,o.addedBatchIds),yield xl(n,o._s)}var p}),Yh.apply(this,arguments)}function pm(i,e){const n=zt(i),o=n.ya.get(e);if(o&&o.Ra)return gr().add(o.key);{let u=gr();const p=n.fa.get(e);if(!p)return u;for(const I of p){const M=n.ma.get(I);u=u.unionWith(M.view.ua)}return u}}function gm(i,e){return rp.apply(this,arguments)}function rp(){return rp=(0,Re.Z)(function*(i,e){const n=zt(i),o=yield Up(n.localStore,e.query,!0),u=e.view.da(o);return n.isPrimaryClient&&Wh(n,e.targetId,u.Ta),u}),rp.apply(this,arguments)}function Sy(i,e){return mm.apply(this,arguments)}function mm(){return mm=(0,Re.Z)(function*(i,e){const n=zt(i);return jp(n.localStore,e).then(o=>xl(n,o))}),mm.apply(this,arguments)}function Ry(i,e,n,o){return lg.apply(this,arguments)}function lg(){return lg=(0,Re.Z)(function*(i,e,n,o){const u=zt(i),p=yield function(M,U){const W=zt(M),ee=zt(W.mutationQueue);return W.persistence.runTransaction("Lookup mutation documents","readonly",fe=>ee.Cn(fe,U).next(Me=>Me?W.localDocuments.getDocuments(fe,Me):V.resolve(null)))}(u.localStore,e);var U;null!==p?("pending"===n?yield Td(u.remoteStore):"acknowledged"===n||"rejected"===n?(_c(u,e,o||null),ag(u,e),U=e,zt(zt(u.localStore).mutationQueue).Fn(U)):on(),yield xl(u,p)):Tt("SyncEngine","Cannot apply mutation batch with id: "+e)}),lg.apply(this,arguments)}function ug(){return ug=(0,Re.Z)(function*(i,e){const n=zt(i);if(vm(n),I_(n),!0===e&&!0!==n.Ca){const o=n.sharedClientState.getAllActiveQueryTargets(),u=yield cg(n,o.toArray());n.Ca=!0,yield wy(n.remoteStore,!0);for(const p of u)$f(n.remoteStore,p)}else if(!1===e&&!1!==n.Ca){const o=[];let u=Promise.resolve();n.fa.forEach((p,I)=>{n.sharedClientState.isLocalQueryTarget(I)?o.push(I):u=u.then(()=>(sh(n,I),Vh(n.localStore,I,!0))),Ed(n.remoteStore,I)}),yield u,yield cg(n,o),function(I){const M=zt(I);M.ya.forEach((U,W)=>{Ed(M.remoteStore,W)}),M.wa.Vr(),M.ya=new Map,M.pa=new hi(Zt.comparator)}(n),n.Ca=!1,yield wy(n.remoteStore,!1)}}),ug.apply(this,arguments)}function cg(i,e,n){return dg.apply(this,arguments)}function dg(){return dg=(0,Re.Z)(function*(i,e,n){const o=zt(i),u=[],p=[];for(const I of e){let M;const U=o.fa.get(I);if(U&&0!==U.length){M=yield Bp(o.localStore,w(U[0]));for(const W of U){const ee=o.ma.get(W),fe=yield gm(o,ee);fe.snapshot&&p.push(fe.snapshot)}}else{const W=yield Bf(o.localStore,I);M=yield Bp(o.localStore,W),yield Jf(o,_m(W),I,!1,M.resumeToken)}u.push(M)}return o.Va.a_(p),u}),dg.apply(this,arguments)}function _m(i){return Ih(i.path,i.collectionGroup,i.orderBy,i.filters,i.limit,"F",i.startAt,i.endAt)}function Py(i){return n=zt(i).localStore,zt(zt(n).persistence).Bi();var n}function Cv(i,e,n,o){return v_.apply(this,arguments)}function v_(){return v_=(0,Re.Z)(function*(i,e,n,o){const u=zt(i);if(u.Ca)return void Tt("SyncEngine","Ignoring unexpected query state notification.");const p=u.fa.get(e);if(p&&p.length>0)switch(n){case"current":case"not-current":{const I=yield jp(u.localStore,Rn(p[0])),M=C.createSynthesizedRemoteEventForCurrentChange(e,"current"===n,Bs.EMPTY_BYTE_STRING);yield xl(u,I,M);break}case"rejected":yield Vh(u.localStore,e,!0),sh(u,e,o);break;default:on()}}),v_.apply(this,arguments)}function kl(i,e,n){return ym.apply(this,arguments)}function ym(){return ym=(0,Re.Z)(function*(i,e,n){const o=vm(i);if(o.Ca){for(const u of e){if(o.fa.has(u)){Tt("SyncEngine","Adding an already active target "+u);continue}const p=yield Bf(o.localStore,u),I=yield Bp(o.localStore,p);yield Jf(o,_m(p),I.targetId,!1,I.resumeToken),$f(o.remoteStore,I)}for(const u of n)o.fa.has(u)&&(yield Vh(o.localStore,u,!1).then(()=>{Ed(o.remoteStore,u),sh(o,u)}).catch(A))}}),ym.apply(this,arguments)}function vm(i){const e=zt(i);return e.remoteStore.remoteSyncer.applyRemoteEvent=rg.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=pm.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Gc.bind(null,e),e.Va.a_=p_.bind(null,e.eventManager),e.Va.Fa=ih.bind(null,e.eventManager),e}function I_(i){const e=zt(i);return e.remoteStore.remoteSyncer.applySuccessfulWrite=__.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=y_.bind(null,e),e}class h{constructor(){this.synchronizeTabs=!1}initialize(e){var n=this;return(0,Re.Z)(function*(){n.serializer=jf(e.databaseInfo.databaseId),n.sharedClientState=n.createSharedClientState(e),n.persistence=n.createPersistence(e),yield n.persistence.start(),n.localStore=n.createLocalStore(e),n.gcScheduler=n.createGarbageCollectionScheduler(e,n.localStore),n.indexBackfillerScheduler=n.createIndexBackfillerScheduler(e,n.localStore)})()}createGarbageCollectionScheduler(e,n){return null}createIndexBackfillerScheduler(e,n){return null}createLocalStore(e){return qg(this.persistence,new a_,e.initialUser,this.serializer)}createPersistence(e){return new kh(Fh.jr,this.serializer)}createSharedClientState(e){return new jc}terminate(){var e=this;return(0,Re.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class d extends h{constructor(e,n,o){super(),this.xa=e,this.cacheSizeBytes=n,this.forceOwnership=o,this.synchronizeTabs=!1}initialize(e){var n=()=>super.initialize,o=this;return(0,Re.Z)(function*(){yield n().call(o,e),yield o.xa.initialize(o,e),yield I_(o.xa.syncEngine),yield Td(o.xa.remoteStore),yield o.persistence.mi(()=>(o.gcScheduler&&!o.gcScheduler.started&&o.gcScheduler.start(),o.indexBackfillerScheduler&&!o.indexBackfillerScheduler.started&&o.indexBackfillerScheduler.start(),Promise.resolve()))})()}createLocalStore(e){return qg(this.persistence,new a_,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,n){return new n_(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,n)}createIndexBackfillerScheduler(e,n){const o=new Gu(n,this.persistence);return new gi(e.asyncQueue,o)}createPersistence(e){const n=uc(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),o=void 0!==this.cacheSizeBytes?Ga.withCacheSize(this.cacheSizeBytes):Ga.DEFAULT;return new Vp(this.synchronizeTabs,n,e.clientId,o,e.asyncQueue,Gp(),Uh(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new jc}}class m extends d{constructor(e,n){super(e,n,!1),this.xa=e,this.cacheSizeBytes=n,this.synchronizeTabs=!0}initialize(e){var n=()=>super.initialize,o=this;return(0,Re.Z)(function*(){yield n().call(o,e);const u=o.xa.syncEngine;o.sharedClientState instanceof Uf&&(o.sharedClientState.syncEngine={Ys:Ry.bind(null,u),Zs:Cv.bind(null,u),Xs:kl.bind(null,u),Bi:Py.bind(null,u),Js:Sy.bind(null,u)},yield o.sharedClientState.start()),yield o.persistence.mi(function(){var p=(0,Re.Z)(function*(I){yield function Ny(i,e){return ug.apply(this,arguments)}(o.xa.syncEngine,I),o.gcScheduler&&(I&&!o.gcScheduler.started?o.gcScheduler.start():I||o.gcScheduler.stop()),o.indexBackfillerScheduler&&(I&&!o.indexBackfillerScheduler.started?o.indexBackfillerScheduler.start():I||o.indexBackfillerScheduler.stop())});return function(I){return p.apply(this,arguments)}}())})()}createSharedClientState(e){const n=Gp();if(!Uf.D(n))throw new It(nt.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const o=uc(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Uf(n,e.asyncQueue,o,e.clientId,e.initialUser)}}class S{initialize(e,n){var o=this;return(0,Re.Z)(function*(){o.localStore||(o.localStore=e.localStore,o.sharedClientState=e.sharedClientState,o.datastore=o.createDatastore(n),o.remoteStore=o.createRemoteStore(n),o.eventManager=o.createEventManager(n),o.syncEngine=o.createSyncEngine(n,!e.synchronizeTabs),o.sharedClientState.onlineStateHandler=u=>uu(o.syncEngine,u,1),o.remoteStore.remoteSyncer.handleCredentialChange=Kh.bind(null,o.syncEngine),yield wy(o.remoteStore,o.syncEngine.isPrimaryClient))})()}createEventManager(e){return new f_}createDatastore(e){const n=jf(e.databaseInfo.databaseId),o=new eh(e.databaseInfo);return new Tv(e.authCredentials,e.appCheckCredentials,o,n)}createRemoteStore(e){return o=this.localStore,u=this.datastore,p=e.asyncQueue,I=n=>uu(this.syncEngine,n,0),M=fc.D()?new fc:new hc,new em(o,u,p,I,M);var o,u,p,I,M}createSyncEngine(e,n){return function(u,p,I,M,U,W,ee){const fe=new cm(u,p,I,M,U,W);return ee&&(fe.Ca=!0),fe}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}terminate(){return(e=(0,Re.Z)(function*(o){const u=zt(o);Tt("RemoteStore","RemoteStore shutting down."),u.C_.add(5),yield pc(u),u.F_.shutdown(),u.M_.set("Unknown")}),function n(o){return e.apply(this,arguments)})(this.remoteStore);var e}}function B(i,e=10240){let n=0;return{read:()=>(0,Re.Z)(function*(){if(n<i.byteLength){const o={value:i.slice(n,n+e),done:!1};return n+=e,o}return{done:!0}})(),cancel:()=>(0,Re.Z)(function*(){})(),releaseLock(){},closed:Promise.resolve()}}class Z{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Oa(this.observer.next,e)}error(e){this.observer.error?this.Oa(this.observer.error,e):Si("Uncaught Error in snapshot listener:",e.toString())}Na(){this.muted=!0}Oa(e,n){this.muted||setTimeout(()=>{this.muted||e(n)},0)}}class ae{constructor(e,n){this.Ba=e,this.serializer=n,this.metadata=new Ks,this.buffer=new Uint8Array,this.La=new TextDecoder("utf-8"),this.ka().then(o=>{o&&o.Z_()?this.metadata.resolve(o.Y_.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(o?.Y_)}`))},o=>this.metadata.reject(o))}close(){return this.Ba.cancel()}getMetadata(){var e=this;return(0,Re.Z)(function*(){return e.metadata.promise})()}Ma(){var e=this;return(0,Re.Z)(function*(){return yield e.getMetadata(),e.ka()})()}ka(){var e=this;return(0,Re.Z)(function*(){const n=yield e.qa();if(null===n)return null;const o=e.La.decode(n),u=Number(o);isNaN(u)&&e.Qa(`length string (${o}) is not valid number`);const p=yield e.Ka(u);return new Cy(JSON.parse(p),n.length+u)})()}$a(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}qa(){var e=this;return(0,Re.Z)(function*(){for(;e.$a()<0&&!(yield e.Ua()););if(0===e.buffer.length)return null;const n=e.$a();n<0&&e.Qa("Reached the end of bundle when a length string is expected.");const o=e.buffer.slice(0,n);return e.buffer=e.buffer.slice(n),o})()}Ka(e){var n=this;return(0,Re.Z)(function*(){for(;n.buffer.length<e;)(yield n.Ua())&&n.Qa("Reached the end of bundle when more is expected.");const o=n.La.decode(n.buffer.slice(0,e));return n.buffer=n.buffer.slice(e),o})()}Qa(e){throw this.Ba.cancel(),new Error(`Invalid bundle format: ${e}`)}Ua(){var e=this;return(0,Re.Z)(function*(){const n=yield e.Ba.read();if(!n.done){const o=new Uint8Array(e.buffer.length+n.value.length);o.set(e.buffer),o.set(n.value,e.buffer.length),e.buffer=o}return n.done})()}}class pe{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var n=this;return(0,Re.Z)(function*(){if(n.ensureCommitNotCalled(),n.mutations.length>0)throw new It(nt.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const o=yield(u=(0,Re.Z)(function*(I,M){const U=zt(I),W=Lc(U.serializer)+"/documents",ee={documents:M.map(Vt=>dd(U.serializer,Vt))},fe=yield U.Co("BatchGetDocuments",W,ee,M.length),Me=new Map;fe.forEach(Vt=>{const Kt=function Ng(i,e){return"found"in e?function(o,u){vn(!!u.found);const p=pl(o,u.found.name),I=ds(u.found.updateTime),M=u.found.createTime?ds(u.found.createTime):un.min(),U=new bs({mapValue:{fields:u.found.fields}});return ur.newFoundDocument(p,I,M,U)}(i,e):"missing"in e?function(o,u){vn(!!u.missing),vn(!!u.readTime);const p=pl(o,u.missing),I=ds(u.readTime);return ur.newNoDocument(p,I)}(i,e):on()}(U.serializer,Vt);Me.set(Kt.key.toString(),Kt)});const tt=[];return M.forEach(Vt=>{const Kt=Me.get(Vt.toString());vn(!!Kt),tt.push(Kt)}),tt}),function p(I,M){return u.apply(this,arguments)})(n.datastore,e);var u;return o.forEach(u=>n.recordVersion(u)),o})()}set(e,n){this.write(n.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,n){try{this.write(n.toMutation(e,this.preconditionForUpdate(e)))}catch(o){this.lastWriteError=o}this.writtenDocs.add(e.toString())}delete(e){this.write(new Cu(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,Re.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const n=e.readVersions;var o;e.mutations.forEach(o=>{n.delete(o.key.toString())}),n.forEach((o,u)=>{const p=Zt.fromPath(u);e.mutations.push(new Wo(p,e.precondition(p)))}),yield(o=(0,Re.Z)(function*(p,I){const M=zt(p),U=Lc(M.serializer)+"/documents",W={writes:I.map(ee=>bf(M.serializer,ee))};yield M.wo("Commit",U,W)}),function u(p,I){return o.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let n;if(e.isFoundDocument())n=e.version;else{if(!e.isNoDocument())throw on();n=un.min()}const o=this.readVersions.get(e.key.toString());if(o){if(!n.isEqual(o))throw new It(nt.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),n)}precondition(e){const n=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&n?n.isEqual(un.min())?Fi.exists(!1):Fi.updateTime(n):Fi.none()}preconditionForUpdate(e){const n=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&n){if(n.isEqual(un.min()))throw new It(nt.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Fi.updateTime(n)}return Fi.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class Ce{constructor(e,n,o,u,p){this.asyncQueue=e,this.datastore=n,this.options=o,this.updateFunction=u,this.deferred=p,this.Wa=o.maxAttempts,this.zo=new Hf(this.asyncQueue,"transaction_retry")}run(){this.Wa-=1,this.Ga()}Ga(){var e=this;this.zo.ko((0,Re.Z)(function*(){const n=new pe(e.datastore),o=e.za(n);o&&o.then(u=>{e.asyncQueue.enqueueAndForget(()=>n.commit().then(()=>{e.deferred.resolve(u)}).catch(p=>{e.ja(p)}))}).catch(u=>{e.ja(u)})}))}za(e){try{const n=this.updateFunction(e);return!Ba(n)&&n.catch&&n.then?n:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(n){return this.deferred.reject(n),null}}ja(e){this.Wa>0&&this.Ha(e)?(this.Wa-=1,this.asyncQueue.enqueueAndForget(()=>(this.Ga(),Promise.resolve()))):this.deferred.reject(e)}Ha(e){if("FirebaseError"===e.name){const n=e.code;return"aborted"===n||"failed-precondition"===n||"already-exists"===n||!Gd(n)}return!1}}class rt{constructor(e,n,o,u){var p=this;this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=o,this.databaseInfo=u,this.user=Zr.UNAUTHENTICATED,this.clientId=Ad.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(o,function(){var I=(0,Re.Z)(function*(M){Tt("FirestoreClient","Received user=",M.uid),yield p.authCredentialListener(M),p.user=M});return function(M){return I.apply(this,arguments)}}()),this.appCheckCredentials.start(o,I=>(Tt("FirestoreClient","Received new app check token=",I),this.appCheckCredentialListener(I,this.user)))}getConfiguration(){var e=this;return(0,Re.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new It(nt.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const n=new Ks;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,Re.Z)(function*(){try{e._onlineComponents&&(yield e._onlineComponents.terminate()),e._offlineComponents&&(yield e._offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),n.resolve()}catch(o){const u=th(o,"Failed to shutdown persistence");n.reject(u)}})),n.promise}}function ut(i,e){return dt.apply(this,arguments)}function dt(){return dt=(0,Re.Z)(function*(i,e){i.asyncQueue.verifyOperationInProgress(),Tt("FirestoreClient","Initializing OfflineComponentProvider");const n=yield i.getConfiguration();yield e.initialize(n);let o=n.initialUser;i.setCredentialChangeListener(function(){var u=(0,Re.Z)(function*(p){o.isEqual(p)||(yield md(e.localStore,p),o=p)});return function(p){return u.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>i.terminate()),i._offlineComponents=e}),dt.apply(this,arguments)}function At(i,e){return Gt.apply(this,arguments)}function Gt(){return Gt=(0,Re.Z)(function*(i,e){i.asyncQueue.verifyOperationInProgress();const n=yield Pn(i);Tt("FirestoreClient","Initializing OnlineComponentProvider");const o=yield i.getConfiguration();yield e.initialize(n,o),i.setCredentialChangeListener(u=>h_(e.remoteStore,u)),i.setAppCheckTokenChangeListener((u,p)=>h_(e.remoteStore,p)),i._onlineComponents=e}),Gt.apply(this,arguments)}function en(i){return"FirebaseError"===i.name?i.code===nt.FAILED_PRECONDITION||i.code===nt.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||22===i.code||20===i.code||11===i.code}function Pn(i){return xn.apply(this,arguments)}function xn(){return xn=(0,Re.Z)(function*(i){if(!i._offlineComponents)if(i._uninitializedComponentsProvider){Tt("FirestoreClient","Using user provided OfflineComponentProvider");try{yield ut(i,i._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!en(n))throw n;bo("Error using user provided cache. Falling back to memory cache: "+n),yield ut(i,new h)}}else Tt("FirestoreClient","Using default OfflineComponentProvider"),yield ut(i,new h);return i._offlineComponents}),xn.apply(this,arguments)}function mr(i){return Nn.apply(this,arguments)}function Nn(){return Nn=(0,Re.Z)(function*(i){return i._onlineComponents||(i._uninitializedComponentsProvider?(Tt("FirestoreClient","Using user provided OnlineComponentProvider"),yield At(i,i._uninitializedComponentsProvider._online)):(Tt("FirestoreClient","Using default OnlineComponentProvider"),yield At(i,new S))),i._onlineComponents}),Nn.apply(this,arguments)}function Ir(i){return Pn(i).then(e=>e.persistence)}function er(i){return Pn(i).then(e=>e.localStore)}function Nr(i){return mr(i).then(e=>e.remoteStore)}function Vr(i){return mr(i).then(e=>e.syncEngine)}function ri(i){return Ys.apply(this,arguments)}function Ys(){return Ys=(0,Re.Z)(function*(i){const e=yield mr(i),n=e.eventManager;return n.onListen=Ay.bind(null,e.syncEngine),n.onUnlisten=wv.bind(null,e.syncEngine),n}),Ys.apply(this,arguments)}function ku(i,e,n={}){const o=new Ks;return i.asyncQueue.enqueueAndForget((0,Re.Z)(function*(){return function(p,I,M,U,W){const ee=new Z({next:Me=>{I.enqueueAndForget(()=>Xp(p,fe));const tt=Me.docs.has(M);!tt&&Me.fromCache?W.reject(new It(nt.UNAVAILABLE,"Failed to get document because the client is offline.")):tt&&Me.fromCache&&U&&"server"===U.source?W.reject(new It(nt.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):W.resolve(Me)},error:Me=>W.reject(Me)}),fe=new mc(Mc(M.path),ee,{includeMetadataChanges:!0,J_:!0});return Jp(p,fe)}(yield ri(i),i.asyncQueue,e,n,o)})),o.promise}function Tn(i,e,n={}){const o=new Ks;return i.asyncQueue.enqueueAndForget((0,Re.Z)(function*(){return function(p,I,M,U,W){const ee=new Z({next:Me=>{I.enqueueAndForget(()=>Xp(p,fe)),Me.fromCache&&"server"===U.source?W.reject(new It(nt.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):W.resolve(Me)},error:Me=>W.reject(Me)}),fe=new mc(M,ee,{includeMetadataChanges:!0,J_:!0});return Jp(p,fe)}(yield ri(i),i.asyncQueue,e,n,o)})),o.promise}function Mi(i){const e={};return void 0!==i.timeoutSeconds&&(e.timeoutSeconds=i.timeoutSeconds),e}const cu=new Map;function vc(i,e,n){if(!n)throw new It(nt.INVALID_ARGUMENT,`Function ${i}() cannot be called with an empty ${e}.`)}function Hs(i,e,n,o){if(!0===e&&!0===o)throw new It(nt.INVALID_ARGUMENT,`${i} and ${n} cannot be used together.`)}function Na(i){if(!Zt.isDocumentKey(i))throw new It(nt.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${i} has ${i.length}.`)}function ha(i){if(Zt.isDocumentKey(i))throw new It(nt.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${i} has ${i.length}.`)}function Ic(i){if(void 0===i)return"undefined";if(null===i)return"null";if("string"==typeof i)return i.length>20&&(i=`${i.substring(0,20)}...`),JSON.stringify(i);if("number"==typeof i||"boolean"==typeof i)return""+i;if("object"==typeof i){if(i instanceof Array)return"an array";{const e=(o=i).constructor?o.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var o;return"function"==typeof i?"a function":on()}function Er(i,e){if("_delegate"in i&&(i=i._delegate),!(i instanceof e)){if(e.name===i.constructor.name)throw new It(nt.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Ic(i);throw new It(nt.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return i}function Zh(i,e){if(e<=0)throw new It(nt.INVALID_ARGUMENT,`Function ${i}() requires a positive number, but it was: ${e}.`)}class Im{constructor(e){var n,o;if(void 0===e.host){if(void 0!==e.ssl)throw new It(nt.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(n=e.ssl)||void 0===n||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new It(nt.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Hs("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!(this.experimentalForceLongPolling||void 0!==e.experimentalAutoDetectLongPolling&&!e.experimentalAutoDetectLongPolling),this.experimentalLongPollingOptions=Mi(null!==(o=e.experimentalLongPollingOptions)&&void 0!==o?o:{}),function(p){if(void 0!==p.timeoutSeconds){if(isNaN(p.timeoutSeconds))throw new It(nt.INVALID_ARGUMENT,`invalid long polling timeout: ${p.timeoutSeconds} (must not be NaN)`);if(p.timeoutSeconds<5)throw new It(nt.INVALID_ARGUMENT,`invalid long polling timeout: ${p.timeoutSeconds} (minimum allowed value is 5)`);if(p.timeoutSeconds>30)throw new It(nt.INVALID_ARGUMENT,`invalid long polling timeout: ${p.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.experimentalLongPollingOptions.timeoutSeconds===e.experimentalLongPollingOptions.timeoutSeconds&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Qh{constructor(e,n,o,u){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=o,this._app=u,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Im({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new It(nt.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new It(nt.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Im(e),void 0!==e.credentials&&(this._authCredentials=function(o){if(!o)return new ph;switch(o.type){case"firstParty":return new pr(o.sessionIndex||"0",o.iamToken||null,o.authTokenFactory||null);case"provider":return o.client;default:throw new It(nt.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const o=cu.get(n);o&&(Tt("ComponentProvider","Removing Datastore"),cu.delete(n),o.terminate())}(this),Promise.resolve()}}class Ko{constructor(e,n,o){this.converter=n,this._query=o,this.type="query",this.firestore=e}withConverter(e){return new Ko(this.firestore,e,this._query)}}class fs{constructor(e,n,o){this.converter=n,this._key=o,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new gl(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new fs(this.firestore,e,this._key)}}class gl extends Ko{constructor(e,n,o){super(e,n,Mc(o)),this._path=o,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new fs(this.firestore,null,new Zt(e))}withConverter(e){return new gl(this.firestore,e,this._path)}}function E_(i,e,...n){if(i=(0,$e.m9)(i),vc("collection","path",e),i instanceof Qh){const o=lr.fromString(e,...n);return ha(o),new gl(i,null,o)}{if(!(i instanceof fs||i instanceof gl))throw new It(nt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const o=i._path.child(lr.fromString(e,...n));return ha(o),new gl(i.firestore,null,o)}}function ah(i,e,...n){if(i=(0,$e.m9)(i),1===arguments.length&&(e=Ad.newId()),vc("doc","path",e),i instanceof Qh){const o=lr.fromString(e,...n);return Na(o),new fs(i,null,new Zt(o))}{if(!(i instanceof fs||i instanceof gl))throw new It(nt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const o=i._path.child(lr.fromString(e,...n));return Na(o),new fs(i.firestore,i instanceof gl?i.converter:null,new Zt(o))}}function Tm(i,e){return i=(0,$e.m9)(i),e=(0,$e.m9)(e),(i instanceof fs||i instanceof gl)&&(e instanceof fs||e instanceof gl)&&i.firestore===e.firestore&&i.path===e.path&&i.converter===e.converter}function hg(i,e){return i=(0,$e.m9)(i),e=(0,$e.m9)(e),i instanceof Ko&&e instanceof Ko&&i.firestore===e.firestore&&je(i._query,e._query)&&i.converter===e.converter}class bm{constructor(){this.Ja=Promise.resolve(),this.Ya=[],this.Za=!1,this.Xa=[],this.eu=null,this.tu=!1,this.nu=!1,this.ru=[],this.zo=new Hf(this,"async_queue_retry"),this.iu=()=>{const n=Uh();n&&Tt("AsyncQueue","Visibility state changed to "+n.visibilityState),this.zo.Qo()};const e=Uh();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.iu)}get isShuttingDown(){return this.Za}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.su(),this.ou(e)}enterRestrictedMode(e){if(!this.Za){this.Za=!0,this.nu=e||!1;const n=Uh();n&&"function"==typeof n.removeEventListener&&n.removeEventListener("visibilitychange",this.iu)}}enqueue(e){if(this.su(),this.Za)return new Promise(()=>{});const n=new Ks;return this.ou(()=>this.Za&&this.nu?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Ya.push(e),this._u()))}_u(){var e=this;return(0,Re.Z)(function*(){if(0!==e.Ya.length){try{yield e.Ya[0](),e.Ya.shift(),e.zo.reset()}catch(n){if(!Ht(n))throw n;Tt("AsyncQueue","Operation failed with retryable error: "+n)}e.Ya.length>0&&e.zo.ko(()=>e._u())}})()}ou(e){const n=this.Ja.then(()=>(this.tu=!0,e().catch(o=>{throw this.eu=o,this.tu=!1,Si("INTERNAL UNHANDLED ERROR: ",function(I){let M=I.message||"";return I.stack&&(M=I.stack.includes(I.message)?I.stack:I.message+"\n"+I.stack),M}(o)),o}).then(o=>(this.tu=!1,o))));return this.Ja=n,n}enqueueAfterDelay(e,n,o){this.su(),this.ru.indexOf(e)>-1&&(n=0);const u=Zf.createAndSchedule(this,e,n,o,p=>this.au(p));return this.Xa.push(u),u}su(){this.eu&&on()}verifyOperationInProgress(){}uu(){var e=this;return(0,Re.Z)(function*(){let n;do{n=e.Ja,yield n}while(n!==e.Ja)})()}cu(e){for(const n of this.Xa)if(n.timerId===e)return!0;return!1}lu(e){return this.uu().then(()=>{this.Xa.sort((n,o)=>n.targetTimeMs-o.targetTimeMs);for(const n of this.Xa)if(n.skipDelay(),"all"!==e&&n.timerId===e)break;return this.uu()})}hu(e){this.ru.push(e)}au(e){const n=this.Xa.indexOf(e);this.Xa.splice(n,1)}}function fg(i){return function(n,o){if("object"!=typeof n||null===n)return!1;const u=n;for(const p of["next","error","complete"])if(p in u&&"function"==typeof u[p])return!0;return!1}(i)}class T_{constructor(){this._progressObserver={},this._taskCompletionResolver=new Ks,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,n,o){this._progressObserver={next:e,error:n,complete:o}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,n){return this._taskCompletionResolver.promise.then(e,n)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class Li extends Qh{constructor(e,n,o,u){super(e,n,o,u),this.type="firestore",this._queue=new bm,this._persistenceKey=u?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||Av(this),this._firestoreClient.terminate()}}function po(i){return i._firestoreClient||Av(i),i._firestoreClient.verifyNotTerminated(),i._firestoreClient}function Av(i){var e,n,o;const u=i._freezeSettings(),p=(U=(null===(e=i._app)||void 0===e?void 0:e.options.appId)||"",new Nc(i._databaseId,U,i._persistenceKey,(ee=u).host,ee.ssl,ee.experimentalForceLongPolling,ee.experimentalAutoDetectLongPolling,Mi(ee.experimentalLongPollingOptions),ee.useFetchStreams));var U,ee;i._firestoreClient=new rt(i._authCredentials,i._appCheckCredentials,i._queue,p),null!==(n=u.localCache)&&void 0!==n&&n._offlineComponentProvider&&null!==(o=u.localCache)&&void 0!==o&&o._onlineComponentProvider&&(i._firestoreClient._uninitializedComponentsProvider={_offlineKind:u.localCache.kind,_offline:u.localCache._offlineComponentProvider,_online:u.localCache._onlineComponentProvider})}function Sv(i,e,n){const o=new Ks;return i.asyncQueue.enqueue((0,Re.Z)(function*(){try{yield ut(i,n),yield At(i,e),o.resolve()}catch(u){const p=u;if(!en(p))throw p;bo("Error enabling indexeddb cache. Falling back to memory cache: "+p),o.reject(p)}})).then(()=>o.promise)}function My(i){if(i._initialized||i._terminated)throw new It(nt.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class wd{constructor(e){this._byteString=e}static fromBase64String(e){try{return new wd(Bs.fromBase64String(e))}catch(n){throw new It(nt.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new wd(Bs.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class lh{constructor(...e){for(let n=0;n<e.length;++n)if(0===e[n].length)throw new It(nt.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new vi(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class ip{constructor(e){this._methodName=e}}class Fu{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new It(nt.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new It(nt.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Zn(this._lat,e._lat)||Zn(this._long,e._long)}}const Dm=/^__.*__$/;class ml{constructor(e,n,o){this.data=e,this.fieldMask=n,this.fieldTransforms=o}toMutation(e,n){return null!==this.fieldMask?new Rl(e,this.data,this.fieldMask,n,this.fieldTransforms):new Ha(e,this.data,n,this.fieldTransforms)}}class Jh{constructor(e,n,o){this.data=e,this.fieldMask=n,this.fieldTransforms=o}toMutation(e,n){return new Rl(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function Cm(i){switch(i){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw on()}}class Fl{constructor(e,n,o,u,p,I){this.settings=e,this.databaseId=n,this.serializer=o,this.ignoreUndefinedProperties=u,void 0===p&&this.Pu(),this.fieldTransforms=p||[],this.fieldMask=I||[]}get path(){return this.settings.path}get Iu(){return this.settings.Iu}Tu(e){return new Fl(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Eu(e){var n;const o=null===(n=this.path)||void 0===n?void 0:n.child(e),u=this.Tu({path:o,du:!1});return u.Au(e),u}Ru(e){var n;const o=null===(n=this.path)||void 0===n?void 0:n.child(e),u=this.Tu({path:o,du:!1});return u.Pu(),u}Vu(e){return this.Tu({path:void 0,du:!0})}mu(e){return yg(e,this.settings.methodName,this.settings.fu||!1,this.path,this.settings.gu)}contains(e){return void 0!==this.fieldMask.find(n=>e.isPrefixOf(n))||void 0!==this.fieldTransforms.find(n=>e.isPrefixOf(n.field))}Pu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Au(this.path.get(e))}Au(e){if(0===e.length)throw this.mu("Document fields must not be empty");if(Cm(this.Iu)&&Dm.test(e))throw this.mu('Document fields cannot begin and end with "__"')}}class xy{constructor(e,n,o){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=o||jf(e)}pu(e,n,o,u=!1){return new Fl({Iu:e,methodName:n,gu:o,path:vi.emptyPath(),du:!1,fu:u},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Ec(i){const e=i._freezeSettings(),n=jf(i._databaseId);return new xy(i._databaseId,!!e.ignoreUndefinedProperties,n)}function uh(i,e,n,o,u,p={}){const I=i.pu(p.merge||p.mergeFields?2:0,e,n,u);C_("Data must be an object, but it was:",I,o);const M=Fy(o,I);let U,W;if(p.merge)U=new la(I.fieldMask),W=I.fieldTransforms;else if(p.mergeFields){const ee=[];for(const fe of p.mergeFields){const Me=_g(e,fe,n);if(!I.contains(Me))throw new It(nt.INVALID_ARGUMENT,`Field '${Me}' is specified in your field mask but missing from your input data.`);kv(ee,Me)||ee.push(Me)}U=new la(ee),W=I.fieldTransforms.filter(fe=>U.covers(fe.field))}else U=null,W=I.fieldTransforms;return new ml(new bs(M),U,W)}class Dd extends ip{_toFieldTransform(e){if(2!==e.Iu)throw e.mu(1===e.Iu?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Dd}}function sp(i,e,n){return new Fl({Iu:3,gu:e.settings.gu,methodName:i._methodName,du:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class Xh extends ip{_toFieldTransform(e){return new ad(e.path,new $o)}isEqual(e){return e instanceof Xh}}class pg extends ip{constructor(e,n){super(e),this.yu=n}_toFieldTransform(e){const n=sp(this,e,!0),o=this.yu.map(p=>tf(p,n)),u=new wa(o);return new ad(e.path,u)}isEqual(e){return this===e}}class gg extends ip{constructor(e,n){super(e),this.yu=n}_toFieldTransform(e){const n=sp(this,e,!0),o=this.yu.map(p=>tf(p,n)),u=new Da(o);return new ad(e.path,u)}isEqual(e){return this===e}}class mg extends ip{constructor(e,n){super(e),this.wu=n}_toFieldTransform(e){const n=new Ca(e.serializer,od(e.serializer,this.wu));return new ad(e.path,n)}isEqual(e){return this===e}}function ef(i,e,n,o){const u=i.pu(1,e,n);C_("Data must be an object, but it was:",u,o);const p=[],I=bs.empty();qu(o,(U,W)=>{const ee=Am(e,U,n);W=(0,$e.m9)(W);const fe=u.Ru(ee);if(W instanceof Dd)p.push(ee);else{const Me=tf(W,fe);null!=Me&&(p.push(ee),I.set(ee,Me))}});const M=new la(p);return new Jh(I,M,u.fieldTransforms)}function D_(i,e,n,o,u,p){const I=i.pu(1,e,n),M=[_g(e,o,n)],U=[u];if(p.length%2!=0)throw new It(nt.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let Me=0;Me<p.length;Me+=2)M.push(_g(e,p[Me])),U.push(p[Me+1]);const W=[],ee=bs.empty();for(let Me=M.length-1;Me>=0;--Me)if(!kv(W,M[Me])){const tt=M[Me];let Vt=U[Me];Vt=(0,$e.m9)(Vt);const Kt=I.Ru(tt);if(Vt instanceof Dd)W.push(tt);else{const Qt=tf(Vt,Kt);null!=Qt&&(W.push(tt),ee.set(tt,Qt))}}const fe=new la(W);return new Jh(ee,fe,I.fieldTransforms)}function ky(i,e,n,o=!1){return tf(n,i.pu(o?4:3,e))}function tf(i,e){if(Ly(i=(0,$e.m9)(i)))return C_("Unsupported field value:",e,i),Fy(i,e);if(i instanceof ip)return function(o,u){if(!Cm(u.Iu))throw u.mu(`${o._methodName}() can only be used with update() and set()`);if(!u.path)throw u.mu(`${o._methodName}() is not currently supported inside arrays`);const p=o._toFieldTransform(u);p&&u.fieldTransforms.push(p)}(i,e),null;if(void 0===i&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),i instanceof Array){if(e.settings.du&&4!==e.Iu)throw e.mu("Nested arrays are not supported");return function(o,u){const p=[];let I=0;for(const M of o){let U=tf(M,u.Vu(I));null==U&&(U={nullValue:"NULL_VALUE"}),p.push(U),I++}return{arrayValue:{values:p}}}(i,e)}return function(o,u){if(null===(o=(0,$e.m9)(o)))return{nullValue:"NULL_VALUE"};if("number"==typeof o)return od(u.serializer,o);if("boolean"==typeof o)return{booleanValue:o};if("string"==typeof o)return{stringValue:o};if(o instanceof Date){const p=jr.fromDate(o);return{timestampValue:Su(u.serializer,p)}}if(o instanceof jr){const p=new jr(o.seconds,1e3*Math.floor(o.nanoseconds/1e3));return{timestampValue:Su(u.serializer,p)}}if(o instanceof Fu)return{geoPointValue:{latitude:o.latitude,longitude:o.longitude}};if(o instanceof wd)return{bytesValue:Ef(u.serializer,o._byteString)};if(o instanceof fs){const p=u.databaseId,I=o.firestore._databaseId;if(!I.isEqual(p))throw u.mu(`Document reference is for database ${I.projectId}/${I.database} but should be for database ${p.projectId}/${p.database}`);return{referenceValue:Fc(o.firestore._databaseId||u.databaseId,o._key.path)}}throw u.mu(`Unsupported field value: ${Ic(o)}`)}(i,e)}function Fy(i,e){const n={};return Go(i)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):qu(i,(o,u)=>{const p=tf(u,e.Eu(o));null!=p&&(n[o]=p)}),{mapValue:{fields:n}}}function Ly(i){return!("object"!=typeof i||null===i||i instanceof Array||i instanceof Date||i instanceof jr||i instanceof Fu||i instanceof wd||i instanceof fs||i instanceof ip)}function C_(i,e,n){if(!Ly(n)||"object"!=typeof(u=n)||null===u||Object.getPrototypeOf(u)!==Object.prototype&&null!==Object.getPrototypeOf(u)){const o=Ic(n);throw e.mu("an object"===o?i+" a custom object":i+" "+o)}var u}function _g(i,e,n){if((e=(0,$e.m9)(e))instanceof lh)return e._internalPath;if("string"==typeof e)return Am(i,e);throw yg("Field path arguments must be of type string or ",i,!1,void 0,n)}const xv=new RegExp("[~\\*/\\[\\]]");function Am(i,e,n){if(e.search(xv)>=0)throw yg(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,i,!1,void 0,n);try{return new lh(...e.split("."))._internalPath}catch{throw yg(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,i,!1,void 0,n)}}function yg(i,e,n,o,u){const p=o&&!o.isEmpty(),I=void 0!==u;let M=`Function ${e}() called with invalid data`;n&&(M+=" (via `toFirestore()`)"),M+=". ";let U="";return(p||I)&&(U+=" (found",p&&(U+=` in field ${o}`),I&&(U+=` in document ${u}`),U+=")"),new It(nt.INVALID_ARGUMENT,M+i+U)}function kv(i,e){return i.some(n=>n.isEqual(e))}class A_{constructor(e,n,o,u,p){this._firestore=e,this._userDataWriter=n,this._key=o,this._document=u,this._converter=p}get id(){return this._key.path.lastSegment()}get ref(){return new fs(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new QI(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(S_("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n)}}}class QI extends A_{data(){return super.data()}}function S_(i,e){return"string"==typeof e?Am(i,e):e instanceof lh?e._internalPath:e._delegate._internalPath}function Fv(i){if("L"===i.limitType&&0===i.explicitOrderBy.length)throw new It(nt.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Lv{}class Sm extends Lv{}function op(i,e,...n){let o=[];e instanceof Lv&&o.push(e),o=o.concat(n),function(p){const I=p.filter(U=>U instanceof vg).length,M=p.filter(U=>U instanceof Rm).length;if(I>1||I>0&&M>0)throw new It(nt.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(o);for(const u of o)i=u._apply(i);return i}class Rm extends Sm{constructor(e,n,o){super(),this._field=e,this._op=n,this._value=o,this.type="where"}static _create(e,n,o){return new Rm(e,n,o)}_apply(e){const n=this._parse(e);return B0(e._query,n),new Ko(e.firestore,e.converter,Q(e._query,n))}_parse(e){const n=Ec(e.firestore);return function(p,I,M,U,W,ee,fe){let Me;if(W.isKeyField()){if("array-contains"===ee||"array-contains-any"===ee)throw new It(nt.INVALID_ARGUMENT,`Invalid Query. You can't perform '${ee}' queries on documentId().`);if("in"===ee||"not-in"===ee){km(fe,ee);const tt=[];for(const Vt of fe)tt.push(xm(U,p,Vt));Me={arrayValue:{values:tt}}}else Me=xm(U,p,fe)}else"in"!==ee&&"not-in"!==ee&&"array-contains-any"!==ee||km(fe,ee),Me=ky(M,"where",fe,"in"===ee||"not-in"===ee);return vr.create(W,ee,Me)}(e._query,0,n,e.firestore._databaseId,this._field,this._op,this._value)}}class vg extends Lv{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new vg(e,n)}_parse(e){const n=this._queryConstraints.map(o=>o._parse(e)).filter(o=>o.getFilters().length>0);return 1===n.length?n[0]:Kr.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return 0===n.getFilters().length?e:(function(u,p){let I=u;const M=p.getFlattenedFilters();for(const U of M)B0(I,U),I=Q(I,U)}(e._query,n),new Ko(e.firestore,e.converter,Q(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class Nm extends Sm{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new Nm(e,n)}_apply(e){const n=function(u,p,I){if(null!==u.startAt)throw new It(nt.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==u.endAt)throw new It(nt.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Us(p,I)}(e._query,this._field,this._direction);return new Ko(e.firestore,e.converter,function(u,p){const I=u.explicitOrderBy.concat([p]);return new js(u.path,u.collectionGroup,I,u.filters.slice(),u.limit,u.limitType,u.startAt,u.endAt)}(e._query,n))}}class Pm extends Sm{constructor(e,n,o){super(),this.type=e,this._limit=n,this._limitType=o}static _create(e,n,o){return new Pm(e,n,o)}_apply(e){return new Ko(e.firestore,e.converter,ce(e._query,this._limit,this._limitType))}}class P_ extends Sm{constructor(e,n,o){super(),this.type=e,this._docOrFields=n,this._inclusive=o}static _create(e,n,o){return new P_(e,n,o)}_apply(e){const n=M_(e,this.type,this._docOrFields,this._inclusive);return new Ko(e.firestore,e.converter,(p=n,new js((u=e._query).path,u.collectionGroup,u.explicitOrderBy.slice(),u.filters.slice(),u.limit,u.limitType,p,u.endAt)));var u,p}}class O_ extends Sm{constructor(e,n,o){super(),this.type=e,this._docOrFields=n,this._inclusive=o}static _create(e,n,o){return new O_(e,n,o)}_apply(e){const n=M_(e,this.type,this._docOrFields,this._inclusive);return new Ko(e.firestore,e.converter,(p=n,new js((u=e._query).path,u.collectionGroup,u.explicitOrderBy.slice(),u.filters.slice(),u.limit,u.limitType,u.startAt,p)));var u,p}}function M_(i,e,n,o){if(n[0]=(0,$e.m9)(n[0]),n[0]instanceof A_)return function(p,I,M,U,W){if(!U)throw new It(nt.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${M}().`);const ee=[];for(const fe of y(p))if(fe.field.isKeyField())ee.push(Ql(I,U.key));else{const Me=U.data.field(fe.field);if(ua(Me))throw new It(nt.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+fe.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===Me){const tt=fe.field.canonicalString();throw new It(nt.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${tt}' (used as the orderBy) does not exist.`)}ee.push(Me)}return new dl(ee,W)}(i._query,i.firestore._databaseId,e,n[0]._document,o);{const u=Ec(i.firestore);return function(I,M,U,W,ee,fe){const Me=I.explicitOrderBy;if(ee.length>Me.length)throw new It(nt.INVALID_ARGUMENT,`Too many arguments provided to ${W}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const tt=[];for(let Vt=0;Vt<ee.length;Vt++){const Kt=ee[Vt];if(Me[Vt].field.isKeyField()){if("string"!=typeof Kt)throw new It(nt.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${W}(), but got a ${typeof Kt}`);if(!P(I)&&-1!==Kt.indexOf("/"))throw new It(nt.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${W}() must be a plain document ID, but '${Kt}' contains a slash.`);const Qt=I.path.child(lr.fromString(Kt));if(!Zt.isDocumentKey(Qt))throw new It(nt.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${W}() must result in a valid document path, but '${Qt}' is not because it contains an odd number of segments.`);const Wn=new Zt(Qt);tt.push(Ql(M,Wn))}else{const Qt=ky(U,W,Kt);tt.push(Qt)}}return new dl(tt,fe)}(i._query,i.firestore._databaseId,u,e,n,o)}}function xm(i,e,n){if("string"==typeof(n=(0,$e.m9)(n))){if(""===n)throw new It(nt.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!P(e)&&-1!==n.indexOf("/"))throw new It(nt.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const o=e.path.child(lr.fromString(n));if(!Zt.isDocumentKey(o))throw new It(nt.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${o}' is not because it has an odd number of segments (${o.length}).`);return Ql(i,new Zt(o))}if(n instanceof fs)return Ql(i,n._key);throw new It(nt.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Ic(n)}.`)}function km(i,e){if(!Array.isArray(i)||0===i.length)throw new It(nt.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function B0(i,e){const n=function(u,p){for(const I of u)for(const M of I.getFlattenedFilters())if(p.indexOf(M.op)>=0)return M.op;return null}(i.filters,function(u){switch(u){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==n)throw new It(nt.INVALID_ARGUMENT,n===e.op?`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`:`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class Vy{convertValue(e,n="none"){switch(wl(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ai(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Sr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 10:return this.convertObject(e.mapValue,n);default:throw on()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const o={};return qu(e,(u,p)=>{o[u]=this.convertValue(p,n)}),o}convertGeoPoint(e){return new Fu(ai(e.latitude),ai(e.longitude))}convertArray(e,n){return(e.values||[]).map(o=>this.convertValue(o,n))}convertServerTimestamp(e,n){switch(n){case"previous":const o=Zl(e);return null==o?null:this.convertValue(o,n);case"estimate":return this.convertTimestamp(ll(e));default:return null}}convertTimestamp(e){const n=Yl(e);return new jr(n.seconds,n.nanos)}convertDocumentKey(e,n){const o=lr.fromString(e);vn($m(o));const u=new Ea(o.get(1),o.get(3)),p=new Zt(o.popFirst(5));return u.isEqual(n)||Si(`Document ${p} contains a document reference within a different database (${u.projectId}/${u.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),p}}function Ig(i,e,n){let o;return o=i?n&&(n.merge||n.mergeFields)?i.toFirestore(e,n):i.toFirestore(e):e,o}class U0 extends Vy{constructor(e){super(),this.firestore=e}convertBytes(e){return new wd(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new fs(this.firestore,null,n)}}class nf{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class ch extends A_{constructor(e,n,o,u,p,I){super(e,n,o,u,I),this._firestore=e,this._firestoreImpl=e,this.metadata=p}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Fm(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const o=this._document.data.field(S_("DocumentSnapshot.get",e));if(null!==o)return this._userDataWriter.convertValue(o,n.serverTimestamps)}}}class Fm extends ch{data(e={}){return super.data(e)}}class rf{constructor(e,n,o,u){this._firestore=e,this._userDataWriter=n,this._snapshot=u,this.metadata=new nf(u.hasPendingWrites,u.fromCache),this.query=o}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,n){this._snapshot.docs.forEach(o=>{e.call(n,new Fm(this._firestore,this._userDataWriter,o.key,o,new nf(this._snapshot.mutatedKeys.has(o.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new It(nt.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(u,p){if(u._snapshot.oldDocs.isEmpty()){let I=0;return u._snapshot.docChanges.map(M=>({type:"added",doc:new Fm(u._firestore,u._userDataWriter,M.doc.key,M.doc,new nf(u._snapshot.mutatedKeys.has(M.doc.key),u._snapshot.fromCache),u.query.converter),oldIndex:-1,newIndex:I++}))}{let I=u._snapshot.oldDocs;return u._snapshot.docChanges.filter(M=>p||3!==M.type).map(M=>{const U=new Fm(u._firestore,u._userDataWriter,M.doc.key,M.doc,new nf(u._snapshot.mutatedKeys.has(M.doc.key),u._snapshot.fromCache),u.query.converter);let W=-1,ee=-1;return 0!==M.type&&(W=I.indexOf(M.doc.key),I=I.delete(M.doc.key)),1!==M.type&&(I=I.add(M.doc),ee=I.indexOf(M.doc.key)),{type:jv(M.type),doc:U,oldIndex:W,newIndex:ee}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function jv(i){switch(i){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return on()}}function x_(i,e){return i instanceof ch&&e instanceof ch?i._firestore===e._firestore&&i._key.isEqual(e._key)&&(null===i._document?null===e._document:i._document.isEqual(e._document))&&i._converter===e._converter:i instanceof rf&&e instanceof rf&&i._firestore===e._firestore&&hg(i.query,e.query)&&i.metadata.isEqual(e.metadata)&&i._snapshot.isEqual(e._snapshot)}class sf extends Vy{constructor(e){super(),this.firestore=e}convertBytes(e){return new wd(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new fs(this.firestore,null,n)}}function Gv(i,e,n){i=Er(i,fs);const o=Er(i.firestore,Li),u=Ig(i.converter,e,n);return Eg(o,[uh(Ec(o),"setDoc",i._key,u,null!==i.converter,n).toMutation(i._key,Fi.none())])}function $v(i,e,n,...o){i=Er(i,fs);const u=Er(i.firestore,Li),p=Ec(u);let I;return I="string"==typeof(e=(0,$e.m9)(e))||e instanceof lh?D_(p,"updateDoc",i._key,e,n,o):ef(p,"updateDoc",i._key,e),Eg(u,[I.toMutation(i._key,Fi.exists(!0))])}function jy(i,...e){var n,o,u;i=(0,$e.m9)(i);let p={includeMetadataChanges:!1},I=0;"object"!=typeof e[I]||fg(e[I])||(p=e[I],I++);const M={includeMetadataChanges:p.includeMetadataChanges};if(fg(e[I])){const fe=e[I];e[I]=null===(n=fe.next)||void 0===n?void 0:n.bind(fe),e[I+1]=null===(o=fe.error)||void 0===o?void 0:o.bind(fe),e[I+2]=null===(u=fe.complete)||void 0===u?void 0:u.bind(fe)}let U,W,ee;if(i instanceof fs)W=Er(i.firestore,Li),ee=Mc(i._key.path),U={next:fe=>{e[I]&&e[I](Hy(W,i,fe))},error:e[I+1],complete:e[I+2]};else{const fe=Er(i,Ko);W=Er(fe.firestore,Li),ee=fe._query;const Me=new sf(W);U={next:tt=>{e[I]&&e[I](new rf(W,Me,fe,tt))},error:e[I+1],complete:e[I+2]},Fv(i._query)}return function(Me,tt,Vt,Kt){const Qt=new Z(Kt),Wn=new mc(tt,Qt,Vt);return Me.asyncQueue.enqueueAndForget((0,Re.Z)(function*(){return Jp(yield ri(Me),Wn)})),()=>{Qt.Na(),Me.asyncQueue.enqueueAndForget((0,Re.Z)(function*(){return Xp(yield ri(Me),Wn)}))}}(po(W),ee,M,U)}function Eg(i,e){return function(o,u){const p=new Ks;return o.asyncQueue.enqueueAndForget((0,Re.Z)(function*(){return function Dv(i,e,n){return hm.apply(this,arguments)}(yield Vr(o),u,p)})),p.promise}(po(i),e)}function Hy(i,e,n){const o=n.docs.get(e._key),u=new sf(i);return new ch(i,u,e._key,o,new nf(n.hasPendingWrites,n.fromCache),e.converter)}const B_={maxAttempts:5};class zy{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=Ec(e)}set(e,n,o){this._verifyNotCommitted();const u=dh(e,this._firestore),p=Ig(u.converter,n,o),I=uh(this._dataReader,"WriteBatch.set",u._key,p,null!==u.converter,o);return this._mutations.push(I.toMutation(u._key,Fi.none())),this}update(e,n,o,...u){this._verifyNotCommitted();const p=dh(e,this._firestore);let I;return I="string"==typeof(n=(0,$e.m9)(n))||n instanceof lh?D_(this._dataReader,"WriteBatch.update",p._key,n,o,u):ef(this._dataReader,"WriteBatch.update",p._key,n),this._mutations.push(I.toMutation(p._key,Fi.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=dh(e,this._firestore);return this._mutations=this._mutations.concat(new Cu(n._key,Fi.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new It(nt.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function dh(i,e){if((i=(0,$e.m9)(i)).firestore!==e)throw new It(nt.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return i}class Qv extends class{constructor(n,o){this._firestore=n,this._transaction=o,this._dataReader=Ec(n)}get(n){const o=dh(n,this._firestore),u=new U0(this._firestore);return this._transaction.lookup([o._key]).then(p=>{if(!p||1!==p.length)return on();const I=p[0];if(I.isFoundDocument())return new A_(this._firestore,u,I.key,I,o.converter);if(I.isNoDocument())return new A_(this._firestore,u,o._key,null,o.converter);throw on()})}set(n,o,u){const p=dh(n,this._firestore),I=Ig(p.converter,o,u),M=uh(this._dataReader,"Transaction.set",p._key,I,null!==p.converter,u);return this._transaction.set(p._key,M),this}update(n,o,u,...p){const I=dh(n,this._firestore);let M;return M="string"==typeof(o=(0,$e.m9)(o))||o instanceof lh?D_(this._dataReader,"Transaction.update",I._key,o,u,p):ef(this._dataReader,"Transaction.update",I._key,o),this._transaction.update(I._key,M),this}delete(n){const o=dh(n,this._firestore);return this._transaction.delete(o._key),this}}{constructor(e,n){super(e,n),this._firestore=e}get(e){const n=dh(e,this._firestore),o=new sf(this._firestore);return super.get(e).then(u=>new ch(this._firestore,o,n._key,u._document,new nf(!1,!1),n.converter))}}function j_(i,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new It("invalid-argument",`Invalid options passed to function ${i}(): You cannot specify both "merge" and "mergeFields".`);return e}function a0(){if(typeof Uint8Array>"u")throw new It("unimplemented","Uint8Arrays are not available in this environment.")}function l0(){if(!function gp(){return typeof atob<"u"}())throw new It("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(e,n=!0){Tl=_e.SDK_VERSION,(0,_e._registerComponent)(new He.wA("firestore",(o,{instanceIdentifier:u,options:p})=>{const I=o.getProvider("app").getImmediate(),M=new Li(new sl(o.getProvider("auth-internal")),new Zc(o.getProvider("app-check-internal")),function(W,ee){if(!Object.prototype.hasOwnProperty.apply(W.options,["projectId"]))throw new It(nt.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ea(W.options.projectId,ee)}(I,u),I);return p=Object.assign({useFetchStreams:n},p),M._setSettings(p),M},"PUBLIC").setMultipleInstances(!0)),(0,_e.registerVersion)(Os,"4.3.1",e),(0,_e.registerVersion)(Os,"4.3.1","esm2017")}();class bg{constructor(e){this._delegate=e}static fromBase64String(e){return l0(),new bg(wd.fromBase64String(e))}static fromUint8Array(e){return a0(),new bg(wd.fromUint8Array(e))}toBase64(){return l0(),this._delegate.toBase64()}toUint8Array(){return a0(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function Ky(i){return function u0(i,e){if("object"!=typeof i||null===i)return!1;const n=i;for(const o of e)if(o in n&&"function"==typeof n[o])return!0;return!1}(i,["next","error","complete"])}class c0{enableIndexedDbPersistence(e,n){return function O0(i,e){My(i=Er(i,Li));const n=po(i);if(n._uninitializedComponentsProvider)throw new It(nt.FAILED_PRECONDITION,"SDK cache is already specified.");bo("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const o=i._freezeSettings(),u=new S;return Sv(n,u,new d(u,o.cacheSizeBytes,e?.forceOwnership))}(e._delegate,{forceOwnership:n})}enableMultiTabIndexedDbPersistence(e){return function M0(i){My(i=Er(i,Li));const e=po(i);if(e._uninitializedComponentsProvider)throw new It(nt.FAILED_PRECONDITION,"SDK cache is already specified.");bo("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const n=i._freezeSettings(),o=new S;return Sv(e,o,new m(o,n.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function x0(i){if(i._initialized&&!i._terminated)throw new It(nt.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Ks;return i._queue.enqueueAndForgetEvenWhileRestricted((0,Re.Z)(function*(){try{yield(n=(0,Re.Z)(function*(u){if(!he.D())return Promise.resolve();const p=u+"main";yield he.delete(p)}),function o(u){return n.apply(this,arguments)})(uc(i._databaseId,i._persistenceKey)),e.resolve()}catch(n){e.reject(n)}var n})),e.promise}(e._delegate)}}class lp{constructor(e,n,o){this._delegate=n,this._persistenceProvider=o,this.INTERNAL={delete:()=>this.terminate()},e instanceof Ea||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const n=this._delegate._getSettings();!e.merge&&n.host!==e.host&&bo("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},n),e)).merge,this._delegate._setSettings(e)}useEmulator(e,n,o={}){!function Em(i,e,n,o={}){var u;const p=(i=Er(i,Qh))._getSettings(),I=`${e}:${n}`;if("firestore.googleapis.com"!==p.host&&p.host!==I&&bo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),i._setSettings(Object.assign(Object.assign({},p),{host:I,ssl:!1})),o.mockUserToken){let M,U;if("string"==typeof o.mockUserToken)M=o.mockUserToken,U=Zr.MOCK_USER;else{M=(0,$e.Sg)(o.mockUserToken,null===(u=i._app)||void 0===u?void 0:u.options.projectId);const W=o.mockUserToken.sub||o.mockUserToken.user_id;if(!W)throw new It(nt.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");U=new Zr(W)}i._authCredentials=new Hl(new Va(M,U))}}(this._delegate,e,n,o)}enableNetwork(){return function Nv(i){return function Ro(i){return i.asyncQueue.enqueue((0,Re.Z)(function*(){const e=yield Ir(i),n=yield Nr(i);return e.setNetworkEnabled(!0),function(u){const p=zt(u);return p.C_.delete(0),$p(p)}(n)}))}(po(i=Er(i,Li)))}(this._delegate)}disableNetwork(){return function Pv(i){return function Ii(i){return i.asyncQueue.enqueue((0,Re.Z)(function*(){const e=yield Ir(i),n=yield Nr(i);return e.setNetworkEnabled(!1),(o=(0,Re.Z)(function*(p){const I=zt(p);I.C_.add(0),yield pc(I),I.M_.set("Offline")}),function u(p){return o.apply(this,arguments)})(n);var o}))}(po(i=Er(i,Li)))}(this._delegate)}enablePersistence(e){let n=!1,o=!1;return e&&(n=!!e.synchronizeTabs,o=!!e.experimentalForceOwningTab,Hs("synchronizeTabs",n,"experimentalForceOwningTab",o)),n?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,o)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function Rv(i){return function(n){const o=new Ks;return n.asyncQueue.enqueueAndForget((0,Re.Z)(function*(){return function cr(i,e){return og.apply(this,arguments)}(yield Vr(n),o)})),o.promise}(po(i=Er(i,Li)))}(this._delegate)}onSnapshotsInSync(e){return function zv(i,e){return function Bn(i,e){const n=new Z(e);return i.asyncQueue.enqueueAndForget((0,Re.Z)(function*(){return u=yield ri(i),p=n,zt(u).q_.add(p),void p.next();var u,p})),()=>{n.Na(),i.asyncQueue.enqueueAndForget((0,Re.Z)(function*(){return u=yield ri(i),p=n,void zt(u).q_.delete(p);var u,p}))}}(po(i=Er(i,Li)),fg(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new It("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new up(this,E_(this._delegate,e))}catch(n){throw Wa(n,"collection()","Firestore.collection()")}}doc(e){try{return new $c(this,ah(this._delegate,e))}catch(n){throw Wa(n,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Zs(this,function oh(i,e){if(i=Er(i,Qh),vc("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new It(nt.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Ko(i,null,(o=e,new js(lr.emptyPath(),o)));var o}(this._delegate,e))}catch(n){throw Wa(n,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function Jv(i,e,n){i=Er(i,Li);const o=Object.assign(Object.assign({},B_),n);return function(p){if(p.maxAttempts<1)throw new It(nt.INVALID_ARGUMENT,"Max attempts must be at least 1")}(o),function(p,I,M){const U=new Ks;return p.asyncQueue.enqueueAndForget((0,Re.Z)(function*(){const W=yield function Oi(i){return mr(i).then(e=>e.datastore)}(p);new Ce(p.asyncQueue,W,M,I,U).run()})),U.promise}(po(i),u=>e(new Qv(i,u)),o)}(this._delegate,n=>e(new Yy(this,n)))}batch(){return po(this._delegate),new d0(new zy(this._delegate,e=>Eg(this._delegate,e)))}loadBundle(e){return function ZI(i,e){const n=po(i=Er(i,Li)),o=new T_;return function Pr(i,e,n,o){const u=function(I,M){let U;return U="string"==typeof I?cd().encode(I):I,ee=function(ee,fe){if(ee instanceof Uint8Array)return B(ee,void 0);if(ee instanceof ArrayBuffer)return B(new Uint8Array(ee),void 0);if(ee instanceof ReadableStream)return ee.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(U),new ae(ee,M);var ee}(n,jf(e));i.asyncQueue.enqueueAndForget((0,Re.Z)(function*(){!function c(i,e,n){const o=zt(i);var u;(u=(0,Re.Z)(function*(I,M,U){try{const W=yield M.getMetadata();if(yield function(Vt,Kt){const Qt=zt(Vt),Wn=ds(Kt.createTime);return Qt.persistence.runTransaction("hasNewerBundle","readonly",sr=>Qt.Kr.getBundleMetadata(sr,Kt.id)).then(sr=>!!sr&&sr.createTime.compareTo(Wn)>=0)}(I.localStore,W))return yield M.close(),U._completeWith({taskState:"Success",documentsLoaded:(Vt=W).totalDocuments,bytesLoaded:Vt.totalBytes,totalDocuments:Vt.totalDocuments,totalBytes:Vt.totalBytes}),Promise.resolve(new Set);U._updateProgress(um(W));const ee=new m_(W,I.localStore,M.serializer);let fe=yield M.Ma();for(;fe;){const tt=yield ee.ea(fe);tt&&U._updateProgress(tt),fe=yield M.Ma()}const Me=yield ee.complete();return yield xl(I,Me.ra,void 0),yield function(Vt,Kt){const Qt=zt(Vt);return Qt.persistence.runTransaction("Save bundle","readwrite",Wn=>Qt.Kr.saveBundleMetadata(Wn,Kt))}(I.localStore,W),U._completeWith(Me.progress),Promise.resolve(Me.na)}catch(W){return bo("SyncEngine",`Loading bundle failed with ${W}`),U._failWith(W),Promise.resolve(new Set)}var Vt}),function p(I,M,U){return u.apply(this,arguments)})(o,e,n).then(u=>{o.sharedClientState.notifyBundleLoaded(u)})}(yield Vr(i),u,o)}))}(n,i._databaseId,e,o),o}(this._delegate,e)}namedQuery(e){return function Ov(i,e){return function hs(i,e){return i.asyncQueue.enqueue((0,Re.Z)(function*(){return function(o,u){const p=zt(o);return p.persistence.runTransaction("Get named query","readonly",I=>p.Kr.getNamedQuery(I,u))}(yield er(i),e)}))}(po(i=Er(i,Li)),e).then(n=>n?new Ko(i,null,n.query):null)}(this._delegate,e).then(n=>n?new Zs(this,n):null)}}class H_ extends Vy{constructor(e){super(),this.firestore=e}convertBytes(e){return new bg(new wd(e))}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return $c.forKey(n,this.firestore,null)}}class Yy{constructor(e,n){this._firestore=e,this._delegate=n,this._userDataWriter=new H_(e)}get(e){const n=lf(e);return this._delegate.get(n).then(o=>new Vm(this._firestore,new ch(this._firestore._delegate,this._userDataWriter,o._key,o._document,o.metadata,n.converter)))}set(e,n,o){const u=lf(e);return o?(j_("Transaction.set",o),this._delegate.set(u,n,o)):this._delegate.set(u,n),this}update(e,n,o,...u){const p=lf(e);return 2===arguments.length?this._delegate.update(p,n):this._delegate.update(p,n,o,...u),this}delete(e){const n=lf(e);return this._delegate.delete(n),this}}class d0{constructor(e){this._delegate=e}set(e,n,o){const u=lf(e);return o?(j_("WriteBatch.set",o),this._delegate.set(u,n,o)):this._delegate.set(u,n),this}update(e,n,o,...u){const p=lf(e);return 2===arguments.length?this._delegate.update(p,n):this._delegate.update(p,n,o,...u),this}delete(e){const n=lf(e);return this._delegate.delete(n),this}commit(){return this._delegate.commit()}}class af{constructor(e,n,o){this._firestore=e,this._userDataWriter=n,this._delegate=o}fromFirestore(e,n){const o=new Fm(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new wg(this._firestore,o),n??{})}toFirestore(e,n){return n?this._delegate.toFirestore(e,n):this._delegate.toFirestore(e)}static getInstance(e,n){const o=af.INSTANCES;let u=o.get(e);u||(u=new WeakMap,o.set(e,u));let p=u.get(n);return p||(p=new af(e,new H_(e),n),u.set(n,p)),p}}af.INSTANCES=new WeakMap;class $c{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new H_(e)}static forPath(e,n,o){if(e.length%2!=0)throw new It("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new $c(n,new fs(n._delegate,o,new Zt(e)))}static forKey(e,n,o){return new $c(n,new fs(n._delegate,o,e))}get id(){return this._delegate.id}get parent(){return new up(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new up(this.firestore,E_(this._delegate,e))}catch(n){throw Wa(n,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,$e.m9)(e))instanceof fs&&Tm(this._delegate,e)}set(e,n){n=j_("DocumentReference.set",n);try{return n?Gv(this._delegate,e,n):Gv(this._delegate,e)}catch(o){throw Wa(o,"setDoc()","DocumentReference.set()")}}update(e,n,...o){try{return 1===arguments.length?$v(this._delegate,e):$v(this._delegate,e,n,...o)}catch(u){throw Wa(u,"updateDoc()","DocumentReference.update()")}}delete(){return function L_(i){return Eg(Er(i.firestore,Li),[new Cu(i._key,Fi.none())])}(this._delegate)}onSnapshot(...e){const n=G_(e),o=zc(e,u=>new Vm(this.firestore,new ch(this.firestore._delegate,this._userDataWriter,u._key,u._document,u.metadata,this._delegate.converter)));return jy(this._delegate,n,o)}get(e){let n;return n="cache"===e?.source?function k_(i){i=Er(i,fs);const e=Er(i.firestore,Li),n=po(e),o=new sf(e);return function yc(i,e){const n=new Ks;return i.asyncQueue.enqueueAndForget((0,Re.Z)(function*(){return(o=(0,Re.Z)(function*(p,I,M){try{const U=yield function(ee,fe){const Me=zt(ee);return Me.persistence.runTransaction("read document","readonly",tt=>Me.localDocuments.getDocument(tt,fe))}(p,I);U.isFoundDocument()?M.resolve(U):U.isNoDocument()?M.resolve(null):M.reject(new It(nt.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(U){const W=th(U,`Failed to get document '${I} from cache`);M.reject(W)}}),function u(p,I,M){return o.apply(this,arguments)})(yield er(i),e,n);var o})),n.promise}(n,i._key).then(u=>new ch(e,o,i._key,u,new nf(null!==u&&u.hasLocalMutations,!0),i.converter))}(this._delegate):"server"===e?.source?function F_(i){i=Er(i,fs);const e=Er(i.firestore,Li);return ku(po(e),i._key,{source:"server"}).then(n=>Hy(e,i,n))}(this._delegate):function By(i){i=Er(i,fs);const e=Er(i.firestore,Li);return ku(po(e),i._key).then(n=>Hy(e,i,n))}(this._delegate),n.then(o=>new Vm(this.firestore,new ch(this.firestore._delegate,this._userDataWriter,o._key,o._document,o.metadata,this._delegate.converter)))}withConverter(e){return new $c(this.firestore,this._delegate.withConverter(e?af.getInstance(this.firestore,e):null))}}function Wa(i,e,n){return i.message=i.message.replace(e,n),i}function G_(i){for(const e of i)if("object"==typeof e&&!Ky(e))return e;return{}}function zc(i,e){var n,o;let u;return u=Ky(i[0])?i[0]:Ky(i[1])?i[1]:"function"==typeof i[0]?{next:i[0],error:i[1],complete:i[2]}:{next:i[1],error:i[2],complete:i[3]},{next:p=>{u.next&&u.next(e(p))},error:null===(n=u.error)||void 0===n?void 0:n.bind(u),complete:null===(o=u.complete)||void 0===o?void 0:o.bind(u)}}class Vm{constructor(e,n){this._firestore=e,this._delegate=n}get ref(){return new $c(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,n){return this._delegate.get(e,n)}isEqual(e){return x_(this._delegate,e._delegate)}}class wg extends Vm{data(e){const n=this._delegate.data(e);return function qn(i,e){i||on()}(void 0!==n),n}}class Zs{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new H_(e)}where(e,n,o){try{return new Zs(this.firestore,op(this._delegate,function k0(i,e,n){const o=e,u=S_("where",i);return Rm._create(u,o,n)}(e,n,o)))}catch(u){throw Wa(u,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,n){try{return new Zs(this.firestore,op(this._delegate,function N_(i,e="asc"){const n=e,o=S_("orderBy",i);return Nm._create(o,n)}(e,n)))}catch(o){throw Wa(o,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Zs(this.firestore,op(this._delegate,function Om(i){return Zh("limit",i),Pm._create("limit",i,"F")}(e)))}catch(n){throw Wa(n,"limit()","Query.limit()")}}limitToLast(e){try{return new Zs(this.firestore,op(this._delegate,function Bv(i){return Zh("limitToLast",i),Pm._create("limitToLast",i,"L")}(e)))}catch(n){throw Wa(n,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new Zs(this.firestore,op(this._delegate,function Mm(...i){return P_._create("startAt",i,!0)}(...e)))}catch(n){throw Wa(n,"startAt()","Query.startAt()")}}startAfter(...e){try{return new Zs(this.firestore,op(this._delegate,function F0(...i){return P_._create("startAfter",i,!1)}(...e)))}catch(n){throw Wa(n,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new Zs(this.firestore,op(this._delegate,function L0(...i){return O_._create("endBefore",i,!1)}(...e)))}catch(n){throw Wa(n,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new Zs(this.firestore,op(this._delegate,function V0(...i){return O_._create("endAt",i,!0)}(...e)))}catch(n){throw Wa(n,"endAt()","Query.endAt()")}}isEqual(e){return hg(this._delegate,e._delegate)}get(e){let n;return n="cache"===e?.source?function Hv(i){i=Er(i,Ko);const e=Er(i.firestore,Li),n=po(e),o=new sf(e);return function an(i,e){const n=new Ks;return i.asyncQueue.enqueueAndForget((0,Re.Z)(function*(){return(o=(0,Re.Z)(function*(p,I,M){try{const U=yield Up(p,I,!0),W=new za(I,U.ls),ee=W.ca(U.documents),fe=W.applyChanges(ee,!1);M.resolve(fe.snapshot)}catch(U){const W=th(U,`Failed to execute query '${I} against cache`);M.reject(W)}}),function u(p,I,M){return o.apply(this,arguments)})(yield er(i),e,n);var o})),n.promise}(n,i._query).then(u=>new rf(e,o,i,u))}(this._delegate):"server"===e?.source?function z0(i){i=Er(i,Ko);const e=Er(i.firestore,Li),n=po(e),o=new sf(e);return Tn(n,i._query,{source:"server"}).then(u=>new rf(e,o,i,u))}(this._delegate):function Uy(i){i=Er(i,Ko);const e=Er(i.firestore,Li),n=po(e),o=new sf(e);return Fv(i._query),Tn(n,i._query).then(u=>new rf(e,o,i,u))}(this._delegate),n.then(o=>new Lu(this.firestore,new rf(this.firestore._delegate,this._userDataWriter,this._delegate,o._snapshot)))}onSnapshot(...e){const n=G_(e),o=zc(e,u=>new Lu(this.firestore,new rf(this.firestore._delegate,this._userDataWriter,this._delegate,u._snapshot)));return jy(this._delegate,n,o)}withConverter(e){return new Zs(this.firestore,this._delegate.withConverter(e?af.getInstance(this.firestore,e):null))}}class Wc{constructor(e,n){this._firestore=e,this._delegate=n}get type(){return this._delegate.type}get doc(){return new wg(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class Lu{constructor(e,n){this._firestore=e,this._delegate=n}get query(){return new Zs(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new wg(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(n=>new Wc(this._firestore,n))}forEach(e,n){this._delegate.forEach(o=>{e.call(n,new wg(this._firestore,o))})}isEqual(e){return x_(this._delegate,e._delegate)}}class up extends Zs{constructor(e,n){super(e,n),this.firestore=e,this._delegate=n}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new $c(this.firestore,e):null}doc(e){try{return new $c(this.firestore,void 0===e?ah(this._delegate):ah(this._delegate,e))}catch(n){throw Wa(n,"doc()","CollectionReference.doc()")}}add(e){return function V_(i,e){const n=Er(i.firestore,Li),o=ah(i),u=Ig(i.converter,e);return Eg(n,[uh(Ec(i.firestore),"addDoc",o._key,u,null!==i.converter,{}).toMutation(o._key,Fi.exists(!1))]).then(()=>o)}(this._delegate,e).then(n=>new $c(this.firestore,n))}isEqual(e){return Tm(this._delegate,e._delegate)}withConverter(e){return new up(this.firestore,this._delegate.withConverter(e?af.getInstance(this.firestore,e):null))}}function lf(i){return Er(i,fs)}class Zy{constructor(...e){this._delegate=new lh(...e)}static documentId(){return new Zy(vi.keyField().canonicalString())}isEqual(e){return(e=(0,$e.m9)(e))instanceof lh&&this._delegate._internalPath.isEqual(e._internalPath)}}class cp{constructor(e){this._delegate=e}static serverTimestamp(){const e=function e0(){return new Xh("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new cp(e)}static delete(){const e=function Xv(){return new Dd("deleteField")}();return e._methodName="FieldValue.delete",new cp(e)}static arrayUnion(...e){const n=function t0(...i){return new pg("arrayUnion",i)}(...e);return n._methodName="FieldValue.arrayUnion",new cp(n)}static arrayRemove(...e){const n=function n0(...i){return new gg("arrayRemove",i)}(...e);return n._methodName="FieldValue.arrayRemove",new cp(n)}static increment(e){const n=function U_(i){return new mg("increment",i)}(e);return n._methodName="FieldValue.increment",new cp(n)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const rI={Firestore:lp,GeoPoint:Fu,Timestamp:jr,Blob:bg,Transaction:Yy,WriteBatch:d0,DocumentReference:$c,DocumentSnapshot:Vm,Query:Zs,QueryDocumentSnapshot:wg,QuerySnapshot:Lu,CollectionReference:up,FieldPath:Zy,FieldValue:cp,setLogLevel:function nI(i){!function rl(i){La.setLogLevel(i)}(i)},CACHE_SIZE_UNLIMITED:-1};function Jy(i,e){return function sI(i,e=Te.z){return new ke.y(n=>{let o;return null!=e?e.schedule(()=>{o=i.onSnapshot({includeMetadataChanges:!0},n)}):o=i.onSnapshot({includeMetadataChanges:!0},n),()=>{o?.()}})}(i,e)}function Xy(i,e){return Jy(i,e).pipe((0,st.U)(n=>({payload:n,type:"query"})))}!function Qy(i){(function iI(i,e){i.INTERNAL.registerComponent(new He.wA("firestore-compat",n=>{const o=n.getProvider("app-compat").getImmediate(),u=n.getProvider("firestore").getImmediate();return e(o,u)},"PUBLIC").setServiceProps(Object.assign({},rI)))})(i,(e,n)=>new lp(e,n,new c0)),i.registerVersion("@firebase/firestore-compat","0.3.20")}(jt.Z),G(7142);class ev{ref;afs;constructor(e,n){this.ref=e,this.afs=n}set(e,n){return this.ref.set(e,n)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,n){const o=this.ref.collection(e),{ref:u,query:p}=q_(o,n);return new f0(u,p,this.afs)}snapshotChanges(){return function oI(i,e){return Jy(i,e).pipe((0,ye.O)(void 0),ht(),(0,st.U)(n=>{const[o,u]=n;return u.exists?o?.exists?{payload:u,type:"modified"}:{payload:u,type:"added"}:{payload:u,type:"removed"}}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(le.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,st.U)(({payload:n})=>e.idField?{...n.data(),[e.idField]:n.id}:n.data()))}get(e){return(0,T.D)(this.ref.get(e)).pipe(le.iC)}}function Bm(i,e){return Xy(i,e).pipe((0,ye.O)(void 0),ht(),(0,st.U)(n=>{const[o,u]=n,p=u.payload.docChanges(),I=p.map(M=>({type:M.type,payload:M}));return o&&JSON.stringify(o.payload.metadata)!==JSON.stringify(u.payload.metadata)&&u.payload.docs.forEach((M,U)=>{const W=p.find(fe=>fe.doc.ref.isEqual(M.ref)),ee=o?.payload.docs.find(fe=>fe.ref.isEqual(M.ref));W&&JSON.stringify(W.doc.metadata)===JSON.stringify(M.metadata)||!W&&ee&&JSON.stringify(ee.metadata)===JSON.stringify(M.metadata)||I.push({type:"modified",payload:{oldIndex:U,newIndex:U,type:"modified",doc:M}})}),I}))}function Um(i,e,n){return Bm(i,n).pipe((0,Et.R)((o,u)=>function aI(i,e,n){return e.forEach(o=>{n.indexOf(o.type)>-1&&(i=function h0(i,e){switch(e.type){case"added":if(!i[e.newIndex]||!i[e.newIndex].doc.ref.isEqual(e.doc.ref))return z_(i,e.newIndex,0,e);break;case"modified":if(null==i[e.oldIndex]||i[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const n=i.slice();return n.splice(e.oldIndex,1),n.splice(e.newIndex,0,e),n}return z_(i,e.newIndex,1,e)}break;case"removed":if(i[e.oldIndex]&&i[e.oldIndex].doc.ref.isEqual(e.doc.ref))return z_(i,e.oldIndex,1)}return i}(i,o))}),i}(o,u.map(p=>p.payload),e),[]),(0,mt.x)(),(0,st.U)(o=>o.map(u=>({type:u.type,payload:u}))))}function z_(i,e,n,...o){const u=i.slice();return u.splice(e,n,...o),u}function tv(i){return(!i||0===i.length)&&(i=["added","removed","modified"]),i}class f0{ref;query;afs;constructor(e,n,o){this.ref=e,this.query=n,this.afs=o}stateChanges(e){let n=Bm(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(n=n.pipe((0,st.U)(o=>o.filter(u=>e.indexOf(u.type)>-1)))),n.pipe((0,ye.O)(void 0),ht(),(0,Ct.h)(([o,u])=>u.length>0||!o),(0,st.U)(([,o])=>o),le.iC)}auditTrail(e){return this.stateChanges(e).pipe((0,Et.R)((n,o)=>[...n,...o],[]))}snapshotChanges(e){const n=tv(e);return Um(this.query,n,this.afs.schedulers.outsideAngular).pipe(le.iC)}valueChanges(e={}){return Xy(this.query,this.afs.schedulers.outsideAngular).pipe((0,st.U)(n=>n.payload.docs.map(o=>e.idField?{...o.data(),[e.idField]:o.id}:o.data())),le.iC)}get(e){return(0,T.D)(this.query.get(e)).pipe(le.iC)}add(e){return this.ref.add(e)}doc(e){return new ev(this.ref.doc(e),this.afs)}}class lI{query;afs;constructor(e,n){this.query=e,this.afs=n}stateChanges(e){return e&&0!==e.length?Bm(this.query,this.afs.schedulers.outsideAngular).pipe((0,st.U)(n=>n.filter(o=>e.indexOf(o.type)>-1)),(0,Ct.h)(n=>n.length>0),le.iC):Bm(this.query,this.afs.schedulers.outsideAngular).pipe(le.iC)}auditTrail(e){return this.stateChanges(e).pipe((0,Et.R)((n,o)=>[...n,...o],[]))}snapshotChanges(e){const n=tv(e);return Um(this.query,n,this.afs.schedulers.outsideAngular).pipe(le.iC)}valueChanges(e={}){return Xy(this.query,this.afs.schedulers.outsideAngular).pipe((0,st.U)(o=>o.payload.docs.map(u=>e.idField?{[e.idField]:u.id,...u.data()}:u.data())),le.iC)}get(e){return(0,T.D)(this.query.get(e)).pipe(le.iC)}}const nv=new me.OlP("angularfire2.enableFirestorePersistence"),W_=new me.OlP("angularfire2.firestore.persistenceSettings"),rv=new me.OlP("angularfire2.firestore.settings"),iv=new me.OlP("angularfire2.firestore.use-emulator");function q_(i,e=(n=>n)){return{query:e(i),ref:i}}let p0=(()=>{class i{schedulers;firestore;persistenceEnabled$;constructor(n,o,u,p,I,M,U,W,ee,fe,Me,tt,Vt,Kt,Qt,Wn,sr){this.schedulers=U;const Gn=(0,Oe.on)(n,M,o),Hr=ee;fe&&(0,Ne.nw)(Gn,M,Me,Vt,Kt,Qt,tt,Wn),[this.firestore,this.persistenceEnabled$]=(0,Oe.cc)(`${Gn.name}.firestore`,"AngularFirestore",Gn.name,()=>{const mi=M.runOutsideAngular(()=>Gn.firestore());if(p&&mi.settings(p),Hr&&mi.useEmulator(...Hr),u&&!(0,E.PM)(I)){const Ei=()=>{try{return(0,T.D)(mi.enablePersistence(W||void 0).then(()=>!0,()=>!1))}catch(No){return typeof console<"u"&&console.warn(No),(0,qe.of)(!1)}};return[mi,M.runOutsideAngular(Ei)]}return[mi,(0,qe.of)(!1)]},[p,Hr,u])}collection(n,o){let u;u="string"==typeof n?this.firestore.collection(n):n;const{ref:p,query:I}=q_(u,o),M=this.schedulers.ngZone.run(()=>p);return new f0(M,I,this)}collectionGroup(n,o){const u=o||(I=>I),p=this.firestore.collectionGroup(n);return new lI(u(p),this)}doc(n){let o;o="string"==typeof n?this.firestore.doc(n):n;const u=this.schedulers.ngZone.run(()=>o);return new ev(u,this)}createId(){return this.firestore.collection("_").doc().id}static \u0275fac=function(o){return new(o||i)(me.LFG(Oe.Dh),me.LFG(Oe.xv,8),me.LFG(nv,8),me.LFG(rv,8),me.LFG(me.Lbi),me.LFG(me.R0b),me.LFG(le.HU),me.LFG(W_,8),me.LFG(iv,8),me.LFG(Ne.zQ,8),me.LFG(Ne.Qv,8),me.LFG(Ne.L6,8),me.LFG(Ne._Q,8),me.LFG(Ne.rT,8),me.LFG(Ne.lh,8),me.LFG(Ne.f7,8),me.LFG(le.Rf,8))};static \u0275prov=me.Yz7({token:i,factory:i.\u0275fac,providedIn:"any"})}return i})()},7217:(Wt,Je,G)=>{G.d(Je,{Dh:()=>T,GT:()=>Te,cc:()=>st,hO:()=>ht,on:()=>ye,pX:()=>Ne,xv:()=>qe});var E=G(5879),me=G(8326),le=G(7142);const Oe=["ngOnDestroy"],Ne=(bt,jt,Re,_e={})=>new Proxy(bt,{get:(He,Pe)=>Re.runOutsideAngular(()=>{if(bt[Pe])return _e?.spy?.get&&_e.spy.get(Pe,bt[Pe]),bt[Pe];if(Oe.indexOf(Pe)>-1)return()=>{};const $e=jt.toPromise().then(ot=>{const ft=ot?.[Pe];return"function"==typeof ft?ft.bind(ot):ft?.then?ft.then(de=>Re.run(()=>de)):Re.run(()=>ft)});return new Proxy(()=>{},{get:(ot,ft)=>$e[ft],apply:(ot,ft,de)=>$e.then(Ot=>{const wt=Ot?.(...de);return _e?.spy?.apply&&_e.spy.apply(Pe,de,wt),wt})})})}),Te=(bt,jt)=>{jt.forEach(Re=>{Object.getOwnPropertyNames(Re.prototype||Re).forEach(_e=>{Object.defineProperty(bt.prototype,_e,Object.getOwnPropertyDescriptor(Re.prototype||Re,_e))})})};class ke{constructor(jt){return jt}}const T=new E.OlP("angularfire2.app.options"),qe=new E.OlP("angularfire2.app.name");function ye(bt,jt,Re){const He="object"==typeof Re&&Re||{};He.name=He.name||"string"==typeof Re&&Re||"[DEFAULT]";const $e=le.Z.apps.filter(ot=>ot&&ot.name===He.name)[0]||jt.runOutsideAngular(()=>le.Z.initializeApp(bt,He));try{if(JSON.stringify(bt)!==JSON.stringify($e.options)){const ot=!!module.hot;Ie("error",`${$e.name} Firebase App already initialized with different options${ot?", you may need to reload as Firebase is not HMR aware.":"."}`)}}catch{}return new ke($e)}const Ie=(bt,...jt)=>{(0,E.X6Q)()&&typeof console<"u"&&console[bt](...jt)},Ve={provide:ke,useFactory:ye,deps:[T,E.R0b,[new E.FiY,qe]]};let ht=(()=>{class bt{static initializeApp(Re,_e){return{ngModule:bt,providers:[{provide:T,useValue:Re},{provide:qe,useValue:_e}]}}constructor(Re){le.Z.registerVersion("angularfire",me.q4.full,"core"),le.Z.registerVersion("angularfire",me.q4.full,"app-compat"),le.Z.registerVersion("angular",E.q4F.full,Re.toString())}static \u0275fac=function(_e){return new(_e||bt)(E.LFG(E.Lbi))};static \u0275mod=E.oAB({type:bt});static \u0275inj=E.cJS({providers:[Ve]})}return bt})();function st(bt,jt,Re,_e,He){const[,Pe,$e]=globalThis.\u0275AngularfireInstanceCache.find(ot=>ot[0]===bt)||[];if(Pe)return function Et(bt,jt){try{return bt.toString()===jt.toString()}catch{return bt===jt}}(He,$e)||(Ct("error",`${jt} was already initialized on the ${Re} Firebase App with different settings.${mt?" You may need to reload as Firebase is not HMR aware.":""}`),Ct("warn",{is:He,was:$e})),Pe;{const ot=_e();return globalThis.\u0275AngularfireInstanceCache.push([bt,ot,He]),ot}}const mt=typeof module<"u"&&!!module.hot,Ct=(bt,...jt)=>{(0,E.X6Q)()&&typeof console<"u"&&console[bt](...jt)};globalThis.\u0275AngularfireInstanceCache||=[]},8326:(Wt,Je,G)=>{G.d(Je,{q4:()=>Et,iC:()=>Jn,HU:()=>$e,Rf:()=>jt});var E=G(5879),me=G(534);(0,me.registerVersion)("firebase","10.5.1","app");var Ne=G(1954),ke=G(2631);const qe=new class T extends ke.v{}(class Te extends Ne.o{constructor(Bt,be){super(Bt,be),this.scheduler=Bt,this.work=be}schedule(Bt,be=0){return be>0?super.schedule(Bt,be):(this.delay=be,this.state=Bt,this.scheduler.flush(this),this)}execute(Bt,be){return be>0||this.closed?super.execute(Bt,be):this._execute(Bt,be)}requestAsyncId(Bt,be,Se=0){return null!=Se&&Se>0||null==Se&&this.delay>0?super.requestAsyncId(Bt,be,Se):(Bt.flush(this),0)}});var Ie=G(6321),Ve=G(9397),ht=G(5137),st=G(3093);const Et=new E.GfV("ANGULARFIRE2_VERSION");class jt{constructor(){return((tn,Bt)=>{const be=(0,me.getApps)(),Se=[];return be.forEach(Ke=>{Ke.container.getProvider(tn).instances.forEach(Ue=>{Se.includes(Ue)||Se.push(Ue)})}),Se})(Re)}}const Re="app-check";function _e(){}class He{zone;delegate;constructor(Bt,be=qe){this.zone=Bt,this.delegate=be}now(){return this.delegate.now()}schedule(Bt,be,Se){const Ke=this.zone;return this.delegate.schedule(function(Ue){Ke.runGuarded(()=>{Bt.apply(this,[Ue])})},be,Se)}}class Pe{zone;task=null;constructor(Bt){this.zone=Bt}call(Bt,be){const Se=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",_e,{},_e,_e)),be.pipe((0,Ve.b)({next:Se,complete:Se,error:Se})).subscribe(Bt).add(Se)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let $e=(()=>{class tn{ngZone;outsideAngular;insideAngular;constructor(be){this.ngZone=be,this.outsideAngular=be.runOutsideAngular(()=>new He(Zone.current)),this.insideAngular=be.run(()=>new He(Zone.current,Ie.z)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(Se){return new(Se||tn)(E.LFG(E.R0b))};static \u0275prov=E.Yz7({token:tn,factory:tn.\u0275fac,providedIn:"root"})}return tn})();function Jn(tn){return function On(tn){return function(be){return(be=be.lift(new Pe(tn.ngZone))).pipe((0,ht.R)(tn.outsideAngular),(0,st.Q)(tn.insideAngular))}}(function ot(){const tn=globalThis.\u0275AngularFireScheduler;if(!tn)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return tn}())(tn)}},95:(Wt,Je,G)=>{G.d(Je,{Wl:()=>Ct,Fj:()=>_e,qu:()=>xo,NI:()=>Cs,u:()=>rr,sg:()=>xt,u5:()=>ra,Cf:()=>$e,JU:()=>Et,JJ:()=>ln,JL:()=>mn,F:()=>Tr,On:()=>ea,YN:()=>so,wV:()=>ks,_:()=>Dr,UX:()=>xa,EJ:()=>yi,kI:()=>de,_Y:()=>_o,Kr:()=>Ji});var E=G(5879),me=G(6814),le=G(2459),Oe=G(5592),Ne=G(7453),Te=G(4829),ke=G(9940),T=G(8251),qe=G(7400),ye=G(2714),Ve=G(7398);let ht=(()=>{class q{constructor(j,oe){this._renderer=j,this._elementRef=oe,this.onChange=Ae=>{},this.onTouched=()=>{}}setProperty(j,oe){this._renderer.setProperty(this._elementRef.nativeElement,j,oe)}registerOnTouched(j){this.onTouched=j}registerOnChange(j){this.onChange=j}setDisabledState(j){this.setProperty("disabled",j)}static#e=this.\u0275fac=function(oe){return new(oe||q)(E.Y36(E.Qsj),E.Y36(E.SBq))};static#t=this.\u0275dir=E.lG2({type:q})}return q})(),st=(()=>{class q extends ht{static#e=this.\u0275fac=function(){let j;return function(Ae){return(j||(j=E.n5z(q)))(Ae||q)}}();static#t=this.\u0275dir=E.lG2({type:q,features:[E.qOj]})}return q})();const Et=new E.OlP("NgValueAccessor"),mt={provide:Et,useExisting:(0,E.Gpc)(()=>Ct),multi:!0};let Ct=(()=>{class q extends st{writeValue(j){this.setProperty("checked",j)}static#e=this.\u0275fac=function(){let j;return function(Ae){return(j||(j=E.n5z(q)))(Ae||q)}}();static#t=this.\u0275dir=E.lG2({type:q,selectors:[["input","type","checkbox","formControlName",""],["input","type","checkbox","formControl",""],["input","type","checkbox","ngModel",""]],hostBindings:function(oe,Ae){1&oe&&E.NdJ("change",function(Sn){return Ae.onChange(Sn.target.checked)})("blur",function(){return Ae.onTouched()})},features:[E._Bn([mt]),E.qOj]})}return q})();const bt={provide:Et,useExisting:(0,E.Gpc)(()=>_e),multi:!0},Re=new E.OlP("CompositionEventMode");let _e=(()=>{class q extends ht{constructor(j,oe,Ae){super(j,oe),this._compositionMode=Ae,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function jt(){const q=(0,me.q)()?(0,me.q)().getUserAgent():"";return/android (\d+)/.test(q.toLowerCase())}())}writeValue(j){this.setProperty("value",j??"")}_handleInput(j){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(j)}_compositionStart(){this._composing=!0}_compositionEnd(j){this._composing=!1,this._compositionMode&&this.onChange(j)}static#e=this.\u0275fac=function(oe){return new(oe||q)(E.Y36(E.Qsj),E.Y36(E.SBq),E.Y36(Re,8))};static#t=this.\u0275dir=E.lG2({type:q,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(oe,Ae){1&oe&&E.NdJ("input",function(Sn){return Ae._handleInput(Sn.target.value)})("blur",function(){return Ae.onTouched()})("compositionstart",function(){return Ae._compositionStart()})("compositionend",function(Sn){return Ae._compositionEnd(Sn.target.value)})},features:[E._Bn([bt]),E.qOj]})}return q})();function He(q){return null==q||("string"==typeof q||Array.isArray(q))&&0===q.length}function Pe(q){return null!=q&&"number"==typeof q.length}const $e=new E.OlP("NgValidators"),ot=new E.OlP("NgAsyncValidators"),ft=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class de{static min(K){return function Ot(q){return K=>{if(He(K.value)||He(q))return null;const j=parseFloat(K.value);return!isNaN(j)&&j<q?{min:{min:q,actual:K.value}}:null}}(K)}static max(K){return function wt(q){return K=>{if(He(K.value)||He(q))return null;const j=parseFloat(K.value);return!isNaN(j)&&j>q?{max:{max:q,actual:K.value}}:null}}(K)}static required(K){return function Jn(q){return He(q.value)?{required:!0}:null}(K)}static requiredTrue(K){return function On(q){return!0===q.value?null:{required:!0}}(K)}static email(K){return function Or(q){return He(q.value)||ft.test(q.value)?null:{email:!0}}(K)}static minLength(K){return function _r(q){return K=>He(K.value)||!Pe(K.value)?null:K.value.length<q?{minlength:{requiredLength:q,actualLength:K.value.length}}:null}(K)}static maxLength(K){return function tn(q){return K=>Pe(K.value)&&K.value.length>q?{maxlength:{requiredLength:q,actualLength:K.value.length}}:null}(K)}static pattern(K){return function Bt(q){if(!q)return be;let K,j;return"string"==typeof q?(j="","^"!==q.charAt(0)&&(j+="^"),j+=q,"$"!==q.charAt(q.length-1)&&(j+="$"),K=new RegExp(j)):(j=q.toString(),K=q),oe=>{if(He(oe.value))return null;const Ae=oe.value;return K.test(Ae)?null:{pattern:{requiredPattern:j,actualValue:Ae}}}}(K)}static nullValidator(K){return null}static compose(K){return Rt(K)}static composeAsync(K){return Ut(K)}}function be(q){return null}function Se(q){return null!=q}function Ke(q){return(0,E.QGY)(q)?(0,le.D)(q):q}function Fe(q){let K={};return q.forEach(j=>{K=null!=j?{...K,...j}:K}),0===Object.keys(K).length?null:K}function Ue(q,K){return K.map(j=>j(q))}function Ft(q){return q.map(K=>function Xe(q){return!q.validate}(K)?K:j=>K.validate(j))}function Rt(q){if(!q)return null;const K=q.filter(Se);return 0==K.length?null:function(j){return Fe(Ue(j,K))}}function hr(q){return null!=q?Rt(Ft(q)):null}function Ut(q){if(!q)return null;const K=q.filter(Se);return 0==K.length?null:function(j){return function Ie(...q){const K=(0,ke.jO)(q),{args:j,keys:oe}=(0,Ne.D)(q),Ae=new Oe.y(nn=>{const{length:Sn}=j;if(!Sn)return void nn.complete();const Gi=new Array(Sn);let vs=Sn,vo=Sn;for(let Fo=0;Fo<Sn;Fo++){let es=!1;(0,Te.Xf)(j[Fo]).subscribe((0,T.x)(nn,is=>{es||(es=!0,vo--),Gi[Fo]=is},()=>vs--,void 0,()=>{(!vs||!es)&&(vo||nn.next(oe?(0,ye.n)(oe,Gi):Gi),nn.complete())}))}});return K?Ae.pipe((0,qe.Z)(K)):Ae}(Ue(j,K).map(Ke)).pipe((0,Ve.U)(Fe))}}function Kn(q){return null!=q?Ut(Ft(q)):null}function Yt(q,K){return null===q?[K]:Array.isArray(q)?[...q,K]:[q,K]}function Ln(q){return q._rawValidators}function An(q){return q._rawAsyncValidators}function $n(q){return q?Array.isArray(q)?q:[q]:[]}function Ee(q,K){return Array.isArray(q)?q.includes(K):q===K}function xe(q,K){const j=$n(K);return $n(q).forEach(Ae=>{Ee(j,Ae)||j.push(Ae)}),j}function ze(q,K){return $n(K).filter(j=>!Ee(q,j))}class lt{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(K){this._rawValidators=K||[],this._composedValidatorFn=hr(this._rawValidators)}_setAsyncValidators(K){this._rawAsyncValidators=K||[],this._composedAsyncValidatorFn=Kn(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(K){this._onDestroyCallbacks.push(K)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(K=>K()),this._onDestroyCallbacks=[]}reset(K=void 0){this.control&&this.control.reset(K)}hasError(K,j){return!!this.control&&this.control.hasError(K,j)}getError(K,j){return this.control?this.control.getError(K,j):null}}class pt extends lt{get formDirective(){return null}get path(){return null}}class Lt extends lt{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class jn{constructor(K){this._cd=K}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let ln=(()=>{class q extends jn{constructor(j){super(j)}static#e=this.\u0275fac=function(oe){return new(oe||q)(E.Y36(Lt,2))};static#t=this.\u0275dir=E.lG2({type:q,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(oe,Ae){2&oe&&E.ekj("ng-untouched",Ae.isUntouched)("ng-touched",Ae.isTouched)("ng-pristine",Ae.isPristine)("ng-dirty",Ae.isDirty)("ng-valid",Ae.isValid)("ng-invalid",Ae.isInvalid)("ng-pending",Ae.isPending)},features:[E.qOj]})}return q})(),mn=(()=>{class q extends jn{constructor(j){super(j)}static#e=this.\u0275fac=function(oe){return new(oe||q)(E.Y36(pt,10))};static#t=this.\u0275dir=E.lG2({type:q,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(oe,Ae){2&oe&&E.ekj("ng-untouched",Ae.isUntouched)("ng-touched",Ae.isTouched)("ng-pristine",Ae.isPristine)("ng-dirty",Ae.isDirty)("ng-valid",Ae.isValid)("ng-invalid",Ae.isInvalid)("ng-pending",Ae.isPending)("ng-submitted",Ae.isSubmitted)},features:[E.qOj]})}return q})();const Bi="VALID",xi="INVALID",Ui="PENDING",ji="DISABLED";function we(q){return(ue(q)?q.validators:q)||null}function se(q,K){return(ue(K)?K.asyncValidators:q)||null}function ue(q){return null!=q&&!Array.isArray(q)&&"object"==typeof q}function Le(q,K,j){const oe=q.controls;if(!(K?Object.keys(oe):oe).length)throw new E.vHH(1e3,"");if(!oe[j])throw new E.vHH(1001,"")}function _t(q,K,j){q._forEachChild((oe,Ae)=>{if(void 0===j[Ae])throw new E.vHH(1002,"")})}class Pt{constructor(K,j){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(K),this._assignAsyncValidators(j)}get validator(){return this._composedValidatorFn}set validator(K){this._rawValidators=this._composedValidatorFn=K}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(K){this._rawAsyncValidators=this._composedAsyncValidatorFn=K}get parent(){return this._parent}get valid(){return this.status===Bi}get invalid(){return this.status===xi}get pending(){return this.status==Ui}get disabled(){return this.status===ji}get enabled(){return this.status!==ji}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(K){this._assignValidators(K)}setAsyncValidators(K){this._assignAsyncValidators(K)}addValidators(K){this.setValidators(xe(K,this._rawValidators))}addAsyncValidators(K){this.setAsyncValidators(xe(K,this._rawAsyncValidators))}removeValidators(K){this.setValidators(ze(K,this._rawValidators))}removeAsyncValidators(K){this.setAsyncValidators(ze(K,this._rawAsyncValidators))}hasValidator(K){return Ee(this._rawValidators,K)}hasAsyncValidator(K){return Ee(this._rawAsyncValidators,K)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(K={}){this.touched=!0,this._parent&&!K.onlySelf&&this._parent.markAsTouched(K)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(K=>K.markAllAsTouched())}markAsUntouched(K={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(j=>{j.markAsUntouched({onlySelf:!0})}),this._parent&&!K.onlySelf&&this._parent._updateTouched(K)}markAsDirty(K={}){this.pristine=!1,this._parent&&!K.onlySelf&&this._parent.markAsDirty(K)}markAsPristine(K={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(j=>{j.markAsPristine({onlySelf:!0})}),this._parent&&!K.onlySelf&&this._parent._updatePristine(K)}markAsPending(K={}){this.status=Ui,!1!==K.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!K.onlySelf&&this._parent.markAsPending(K)}disable(K={}){const j=this._parentMarkedDirty(K.onlySelf);this.status=ji,this.errors=null,this._forEachChild(oe=>{oe.disable({...K,onlySelf:!0})}),this._updateValue(),!1!==K.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...K,skipPristineCheck:j}),this._onDisabledChange.forEach(oe=>oe(!0))}enable(K={}){const j=this._parentMarkedDirty(K.onlySelf);this.status=Bi,this._forEachChild(oe=>{oe.enable({...K,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:K.emitEvent}),this._updateAncestors({...K,skipPristineCheck:j}),this._onDisabledChange.forEach(oe=>oe(!1))}_updateAncestors(K){this._parent&&!K.onlySelf&&(this._parent.updateValueAndValidity(K),K.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(K){this._parent=K}getRawValue(){return this.value}updateValueAndValidity(K={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Bi||this.status===Ui)&&this._runAsyncValidator(K.emitEvent)),!1!==K.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!K.onlySelf&&this._parent.updateValueAndValidity(K)}_updateTreeValidity(K={emitEvent:!0}){this._forEachChild(j=>j._updateTreeValidity(K)),this.updateValueAndValidity({onlySelf:!0,emitEvent:K.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?ji:Bi}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(K){if(this.asyncValidator){this.status=Ui,this._hasOwnPendingAsyncValidator=!0;const j=Ke(this.asyncValidator(this));this._asyncValidationSubscription=j.subscribe(oe=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(oe,{emitEvent:K})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(K,j={}){this.errors=K,this._updateControlsErrors(!1!==j.emitEvent)}get(K){let j=K;return null==j||(Array.isArray(j)||(j=j.split(".")),0===j.length)?null:j.reduce((oe,Ae)=>oe&&oe._find(Ae),this)}getError(K,j){const oe=j?this.get(j):this;return oe&&oe.errors?oe.errors[K]:null}hasError(K,j){return!!this.getError(K,j)}get root(){let K=this;for(;K._parent;)K=K._parent;return K}_updateControlsErrors(K){this.status=this._calculateStatus(),K&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(K)}_initObservables(){this.valueChanges=new E.vpe,this.statusChanges=new E.vpe}_calculateStatus(){return this._allControlsDisabled()?ji:this.errors?xi:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Ui)?Ui:this._anyControlsHaveStatus(xi)?xi:Bi}_anyControlsHaveStatus(K){return this._anyControls(j=>j.status===K)}_anyControlsDirty(){return this._anyControls(K=>K.dirty)}_anyControlsTouched(){return this._anyControls(K=>K.touched)}_updatePristine(K={}){this.pristine=!this._anyControlsDirty(),this._parent&&!K.onlySelf&&this._parent._updatePristine(K)}_updateTouched(K={}){this.touched=this._anyControlsTouched(),this._parent&&!K.onlySelf&&this._parent._updateTouched(K)}_registerOnCollectionChange(K){this._onCollectionChange=K}_setUpdateStrategy(K){ue(K)&&null!=K.updateOn&&(this._updateOn=K.updateOn)}_parentMarkedDirty(K){return!K&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(K){return null}_assignValidators(K){this._rawValidators=Array.isArray(K)?K.slice():K,this._composedValidatorFn=function ie(q){return Array.isArray(q)?hr(q):q||null}(this._rawValidators)}_assignAsyncValidators(K){this._rawAsyncValidators=Array.isArray(K)?K.slice():K,this._composedAsyncValidatorFn=function re(q){return Array.isArray(q)?Kn(q):q||null}(this._rawAsyncValidators)}}class $t extends Pt{constructor(K,j,oe){super(we(j),se(oe,j)),this.controls=K,this._initObservables(),this._setUpdateStrategy(j),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(K,j){return this.controls[K]?this.controls[K]:(this.controls[K]=j,j.setParent(this),j._registerOnCollectionChange(this._onCollectionChange),j)}addControl(K,j,oe={}){this.registerControl(K,j),this.updateValueAndValidity({emitEvent:oe.emitEvent}),this._onCollectionChange()}removeControl(K,j={}){this.controls[K]&&this.controls[K]._registerOnCollectionChange(()=>{}),delete this.controls[K],this.updateValueAndValidity({emitEvent:j.emitEvent}),this._onCollectionChange()}setControl(K,j,oe={}){this.controls[K]&&this.controls[K]._registerOnCollectionChange(()=>{}),delete this.controls[K],j&&this.registerControl(K,j),this.updateValueAndValidity({emitEvent:oe.emitEvent}),this._onCollectionChange()}contains(K){return this.controls.hasOwnProperty(K)&&this.controls[K].enabled}setValue(K,j={}){_t(this,0,K),Object.keys(K).forEach(oe=>{Le(this,!0,oe),this.controls[oe].setValue(K[oe],{onlySelf:!0,emitEvent:j.emitEvent})}),this.updateValueAndValidity(j)}patchValue(K,j={}){null!=K&&(Object.keys(K).forEach(oe=>{const Ae=this.controls[oe];Ae&&Ae.patchValue(K[oe],{onlySelf:!0,emitEvent:j.emitEvent})}),this.updateValueAndValidity(j))}reset(K={},j={}){this._forEachChild((oe,Ae)=>{oe.reset(K?K[Ae]:null,{onlySelf:!0,emitEvent:j.emitEvent})}),this._updatePristine(j),this._updateTouched(j),this.updateValueAndValidity(j)}getRawValue(){return this._reduceChildren({},(K,j,oe)=>(K[oe]=j.getRawValue(),K))}_syncPendingControls(){let K=this._reduceChildren(!1,(j,oe)=>!!oe._syncPendingControls()||j);return K&&this.updateValueAndValidity({onlySelf:!0}),K}_forEachChild(K){Object.keys(this.controls).forEach(j=>{const oe=this.controls[j];oe&&K(oe,j)})}_setUpControls(){this._forEachChild(K=>{K.setParent(this),K._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(K){for(const[j,oe]of Object.entries(this.controls))if(this.contains(j)&&K(oe))return!0;return!1}_reduceValue(){return this._reduceChildren({},(j,oe,Ae)=>((oe.enabled||this.disabled)&&(j[Ae]=oe.value),j))}_reduceChildren(K,j){let oe=K;return this._forEachChild((Ae,nn)=>{oe=j(oe,Ae,nn)}),oe}_allControlsDisabled(){for(const K of Object.keys(this.controls))if(this.controls[K].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(K){return this.controls.hasOwnProperty(K)?this.controls[K]:null}}class hn extends $t{}const li=new E.OlP("CallSetDisabledState",{providedIn:"root",factory:()=>Gs}),Gs="always";function Qs(q,K){return[...K.path,q]}function it(q,K,j=Gs){In(q,K),K.valueAccessor.writeValue(q.value),(q.disabled||"always"===j)&&K.valueAccessor.setDisabledState?.(q.disabled),function tr(q,K){K.valueAccessor.registerOnChange(j=>{q._pendingValue=j,q._pendingChange=!0,q._pendingDirty=!0,"change"===q.updateOn&&Mr(q,K)})}(q,K),function Js(q,K){const j=(oe,Ae)=>{K.valueAccessor.writeValue(oe),Ae&&K.viewToModelUpdate(oe)};q.registerOnChange(j),K._registerOnDestroy(()=>{q._unregisterOnChange(j)})}(q,K),function ui(q,K){K.valueAccessor.registerOnTouched(()=>{q._pendingTouched=!0,"blur"===q.updateOn&&q._pendingChange&&Mr(q,K),"submit"!==q.updateOn&&q.markAsTouched()})}(q,K),function sn(q,K){if(K.valueAccessor.setDisabledState){const j=oe=>{K.valueAccessor.setDisabledState(oe)};q.registerOnDisabledChange(j),K._registerOnDestroy(()=>{q._unregisterOnDisabledChange(j)})}}(q,K)}function Ge(q,K,j=!0){const oe=()=>{};K.valueAccessor&&(K.valueAccessor.registerOnChange(oe),K.valueAccessor.registerOnTouched(oe)),qt(q,K),q&&(K._invokeOnDestroyCallbacks(),q._registerOnCollectionChange(()=>{}))}function vt(q,K){q.forEach(j=>{j.registerOnValidatorChange&&j.registerOnValidatorChange(K)})}function In(q,K){const j=Ln(q);null!==K.validator?q.setValidators(Yt(j,K.validator)):"function"==typeof j&&q.setValidators([j]);const oe=An(q);null!==K.asyncValidator?q.setAsyncValidators(Yt(oe,K.asyncValidator)):"function"==typeof oe&&q.setAsyncValidators([oe]);const Ae=()=>q.updateValueAndValidity();vt(K._rawValidators,Ae),vt(K._rawAsyncValidators,Ae)}function qt(q,K){let j=!1;if(null!==q){if(null!==K.validator){const Ae=Ln(q);if(Array.isArray(Ae)&&Ae.length>0){const nn=Ae.filter(Sn=>Sn!==K.validator);nn.length!==Ae.length&&(j=!0,q.setValidators(nn))}}if(null!==K.asyncValidator){const Ae=An(q);if(Array.isArray(Ae)&&Ae.length>0){const nn=Ae.filter(Sn=>Sn!==K.asyncValidator);nn.length!==Ae.length&&(j=!0,q.setAsyncValidators(nn))}}}const oe=()=>{};return vt(K._rawValidators,oe),vt(K._rawAsyncValidators,oe),j}function Mr(q,K){q._pendingDirty&&q.markAsDirty(),q.setValue(q._pendingValue,{emitModelToViewChange:!1}),K.viewToModelUpdate(q._pendingValue),q._pendingChange=!1}function Hi(q,K){In(q,K)}function ro(q,K){if(!q.hasOwnProperty("model"))return!1;const j=q.model;return!!j.isFirstChange()||!Object.is(K,j.currentValue)}function Zo(q,K){q._syncPendingControls(),K.forEach(j=>{const oe=j.control;"submit"===oe.updateOn&&oe._pendingChange&&(j.viewToModelUpdate(oe._pendingValue),oe._pendingChange=!1)})}function mo(q,K){if(!K)return null;let j,oe,Ae;return Array.isArray(K),K.forEach(nn=>{nn.constructor===_e?j=nn:function $s(q){return Object.getPrototypeOf(q.constructor)===st}(nn)?oe=nn:Ae=nn}),Ae||oe||j||null}const Jo={provide:pt,useExisting:(0,E.Gpc)(()=>Tr)},fr=(()=>Promise.resolve())();let Tr=(()=>{class q extends pt{constructor(j,oe,Ae){super(),this.callSetDisabledState=Ae,this.submitted=!1,this._directives=new Set,this.ngSubmit=new E.vpe,this.form=new $t({},hr(j),Kn(oe))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(j){fr.then(()=>{const oe=this._findContainer(j.path);j.control=oe.registerControl(j.name,j.control),it(j.control,j,this.callSetDisabledState),j.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(j)})}getControl(j){return this.form.get(j.path)}removeControl(j){fr.then(()=>{const oe=this._findContainer(j.path);oe&&oe.removeControl(j.name),this._directives.delete(j)})}addFormGroup(j){fr.then(()=>{const oe=this._findContainer(j.path),Ae=new $t({});Hi(Ae,j),oe.registerControl(j.name,Ae),Ae.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(j){fr.then(()=>{const oe=this._findContainer(j.path);oe&&oe.removeControl(j.name)})}getFormGroup(j){return this.form.get(j.path)}updateModel(j,oe){fr.then(()=>{this.form.get(j.path).setValue(oe)})}setValue(j){this.control.setValue(j)}onSubmit(j){return this.submitted=!0,Zo(this.form,this._directives),this.ngSubmit.emit(j),"dialog"===j?.target?.method}onReset(){this.resetForm()}resetForm(j=void 0){this.form.reset(j),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(j){return j.pop(),j.length?this.form.get(j):this.form}static#e=this.\u0275fac=function(oe){return new(oe||q)(E.Y36($e,10),E.Y36(ot,10),E.Y36(li,8))};static#t=this.\u0275dir=E.lG2({type:q,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(oe,Ae){1&oe&&E.NdJ("submit",function(Sn){return Ae.onSubmit(Sn)})("reset",function(){return Ae.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[E._Bn([Jo]),E.qOj]})}return q})();function ci(q,K){const j=q.indexOf(K);j>-1&&q.splice(j,1)}function zr(q){return"object"==typeof q&&null!==q&&2===Object.keys(q).length&&"value"in q&&"disabled"in q}const Cs=class extends Pt{constructor(K=null,j,oe){super(we(j),se(oe,j)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(K),this._setUpdateStrategy(j),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),ue(j)&&(j.nonNullable||j.initialValueIsDefault)&&(this.defaultValue=zr(K)?K.value:K)}setValue(K,j={}){this.value=this._pendingValue=K,this._onChange.length&&!1!==j.emitModelToViewChange&&this._onChange.forEach(oe=>oe(this.value,!1!==j.emitViewToModelChange)),this.updateValueAndValidity(j)}patchValue(K,j={}){this.setValue(K,j)}reset(K=this.defaultValue,j={}){this._applyFormState(K),this.markAsPristine(j),this.markAsUntouched(j),this.setValue(this.value,j),this._pendingChange=!1}_updateValue(){}_anyControls(K){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(K){this._onChange.push(K)}_unregisterOnChange(K){ci(this._onChange,K)}registerOnDisabledChange(K){this._onDisabledChange.push(K)}_unregisterOnDisabledChange(K){ci(this._onDisabledChange,K)}_forEachChild(K){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(K){zr(K)?(this.value=this._pendingValue=K.value,K.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=K}},Ja={provide:Lt,useExisting:(0,E.Gpc)(()=>ea)},zs=(()=>Promise.resolve())();let ea=(()=>{class q extends Lt{constructor(j,oe,Ae,nn,Sn,Gi){super(),this._changeDetectorRef=Sn,this.callSetDisabledState=Gi,this.control=new Cs,this._registered=!1,this.name="",this.update=new E.vpe,this._parent=j,this._setValidators(oe),this._setAsyncValidators(Ae),this.valueAccessor=mo(0,nn)}ngOnChanges(j){if(this._checkForErrors(),!this._registered||"name"in j){if(this._registered&&(this._checkName(),this.formDirective)){const oe=j.name.previousValue;this.formDirective.removeControl({name:oe,path:this._getPath(oe)})}this._setUpControl()}"isDisabled"in j&&this._updateDisabled(j),ro(j,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(j){this.viewModel=j,this.update.emit(j)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){it(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(j){zs.then(()=>{this.control.setValue(j,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(j){const oe=j.isDisabled.currentValue,Ae=0!==oe&&(0,E.VuI)(oe);zs.then(()=>{Ae&&!this.control.disabled?this.control.disable():!Ae&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(j){return this._parent?Qs(j,this._parent):[j]}static#e=this.\u0275fac=function(oe){return new(oe||q)(E.Y36(pt,9),E.Y36($e,10),E.Y36(ot,10),E.Y36(Et,10),E.Y36(E.sBO,8),E.Y36(li,8))};static#t=this.\u0275dir=E.lG2({type:q,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[E._Bn([Ja]),E.qOj,E.TTD]})}return q})(),_o=(()=>{class q{static#e=this.\u0275fac=function(oe){return new(oe||q)};static#t=this.\u0275dir=E.lG2({type:q,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]})}return q})();const Oa={provide:Et,useExisting:(0,E.Gpc)(()=>ks),multi:!0};let ks=(()=>{class q extends st{writeValue(j){this.setProperty("value",j??"")}registerOnChange(j){this.onChange=oe=>{j(""==oe?null:parseFloat(oe))}}static#e=this.\u0275fac=function(){let j;return function(Ae){return(j||(j=E.n5z(q)))(Ae||q)}}();static#t=this.\u0275dir=E.lG2({type:q,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(oe,Ae){1&oe&&E.NdJ("input",function(Sn){return Ae.onChange(Sn.target.value)})("blur",function(){return Ae.onTouched()})},features:[E._Bn([Oa]),E.qOj]})}return q})();const Yn={provide:Et,useExisting:(0,E.Gpc)(()=>Dr),multi:!0};let fi=(()=>{class q{static#e=this.\u0275fac=function(oe){return new(oe||q)};static#t=this.\u0275mod=E.oAB({type:q});static#n=this.\u0275inj=E.cJS({})}return q})(),ns=(()=>{class q{constructor(){this._accessors=[]}add(j,oe){this._accessors.push([j,oe])}remove(j){for(let oe=this._accessors.length-1;oe>=0;--oe)if(this._accessors[oe][1]===j)return void this._accessors.splice(oe,1)}select(j){this._accessors.forEach(oe=>{this._isSameGroup(oe,j)&&oe[1]!==j&&oe[1].fireUncheck(j.value)})}_isSameGroup(j,oe){return!!j[0].control&&j[0]._parent===oe._control._parent&&j[1].name===oe.name}static#e=this.\u0275fac=function(oe){return new(oe||q)};static#t=this.\u0275prov=E.Yz7({token:q,factory:q.\u0275fac,providedIn:fi})}return q})(),Dr=(()=>{class q extends st{constructor(j,oe,Ae,nn){super(j,oe),this._registry=Ae,this._injector=nn,this.setDisabledStateFired=!1,this.onChange=()=>{},this.callSetDisabledState=(0,E.f3M)(li,{optional:!0})??Gs}ngOnInit(){this._control=this._injector.get(Lt),this._checkName(),this._registry.add(this._control,this)}ngOnDestroy(){this._registry.remove(this)}writeValue(j){this._state=j===this.value,this.setProperty("checked",this._state)}registerOnChange(j){this._fn=j,this.onChange=()=>{j(this.value),this._registry.select(this)}}setDisabledState(j){(this.setDisabledStateFired||j||"whenDisabledForLegacyCode"===this.callSetDisabledState)&&this.setProperty("disabled",j),this.setDisabledStateFired=!0}fireUncheck(j){this.writeValue(j)}_checkName(){!this.name&&this.formControlName&&(this.name=this.formControlName)}static#e=this.\u0275fac=function(oe){return new(oe||q)(E.Y36(E.Qsj),E.Y36(E.SBq),E.Y36(ns),E.Y36(E.zs3))};static#t=this.\u0275dir=E.lG2({type:q,selectors:[["input","type","radio","formControlName",""],["input","type","radio","formControl",""],["input","type","radio","ngModel",""]],hostBindings:function(oe,Ae){1&oe&&E.NdJ("change",function(){return Ae.onChange()})("blur",function(){return Ae.onTouched()})},inputs:{name:"name",formControlName:"formControlName",value:"value"},features:[E._Bn([Yn]),E.qOj]})}return q})();const _i=new E.OlP("NgModelWithFormControlWarning"),xr={provide:pt,useExisting:(0,E.Gpc)(()=>xt)};let xt=(()=>{class q extends pt{constructor(j,oe,Ae){super(),this.callSetDisabledState=Ae,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new E.vpe,this._setValidators(j),this._setAsyncValidators(oe)}ngOnChanges(j){this._checkFormPresent(),j.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(qt(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(j){const oe=this.form.get(j.path);return it(oe,j,this.callSetDisabledState),oe.updateValueAndValidity({emitEvent:!1}),this.directives.push(j),oe}getControl(j){return this.form.get(j.path)}removeControl(j){Ge(j.control||null,j,!1),function Xs(q,K){const j=q.indexOf(K);j>-1&&q.splice(j,1)}(this.directives,j)}addFormGroup(j){this._setUpFormContainer(j)}removeFormGroup(j){this._cleanUpFormContainer(j)}getFormGroup(j){return this.form.get(j.path)}addFormArray(j){this._setUpFormContainer(j)}removeFormArray(j){this._cleanUpFormContainer(j)}getFormArray(j){return this.form.get(j.path)}updateModel(j,oe){this.form.get(j.path).setValue(oe)}onSubmit(j){return this.submitted=!0,Zo(this.form,this.directives),this.ngSubmit.emit(j),"dialog"===j?.target?.method}onReset(){this.resetForm()}resetForm(j=void 0){this.form.reset(j),this.submitted=!1}_updateDomValue(){this.directives.forEach(j=>{const oe=j.control,Ae=this.form.get(j.path);oe!==Ae&&(Ge(oe||null,j),(q=>q instanceof Cs)(Ae)&&(it(Ae,j,this.callSetDisabledState),j.control=Ae))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(j){const oe=this.form.get(j.path);Hi(oe,j),oe.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(j){if(this.form){const oe=this.form.get(j.path);oe&&function Ds(q,K){return qt(q,K)}(oe,j)&&oe.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){In(this.form,this),this._oldForm&&qt(this._oldForm,this)}_checkFormPresent(){}static#e=this.\u0275fac=function(oe){return new(oe||q)(E.Y36($e,10),E.Y36(ot,10),E.Y36(li,8))};static#t=this.\u0275dir=E.lG2({type:q,selectors:[["","formGroup",""]],hostBindings:function(oe,Ae){1&oe&&E.NdJ("submit",function(Sn){return Ae.onSubmit(Sn)})("reset",function(){return Ae.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[E._Bn([xr]),E.qOj,E.TTD]})}return q})();const si={provide:Lt,useExisting:(0,E.Gpc)(()=>rr)};let rr=(()=>{class q extends Lt{set isDisabled(j){}static#e=this._ngModelWarningSentOnce=!1;constructor(j,oe,Ae,nn,Sn){super(),this._ngModelWarningConfig=Sn,this._added=!1,this.name=null,this.update=new E.vpe,this._ngModelWarningSent=!1,this._parent=j,this._setValidators(oe),this._setAsyncValidators(Ae),this.valueAccessor=mo(0,nn)}ngOnChanges(j){this._added||this._setUpControl(),ro(j,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(j){this.viewModel=j,this.update.emit(j)}get path(){return Qs(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}static#t=this.\u0275fac=function(oe){return new(oe||q)(E.Y36(pt,13),E.Y36($e,10),E.Y36(ot,10),E.Y36(Et,10),E.Y36(_i,8))};static#n=this.\u0275dir=E.lG2({type:q,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[E._Bn([si]),E.qOj,E.TTD]})}return q})();const eo={provide:Et,useExisting:(0,E.Gpc)(()=>yi),multi:!0};function Cr(q,K){return null==q?`${K}`:(K&&"object"==typeof K&&(K="Object"),`${q}: ${K}`.slice(0,50))}let yi=(()=>{class q extends st{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(j){this._compareWith=j}writeValue(j){this.value=j;const Ae=Cr(this._getOptionId(j),j);this.setProperty("value",Ae)}registerOnChange(j){this.onChange=oe=>{this.value=this._getOptionValue(oe),j(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(j){for(const oe of this._optionMap.keys())if(this._compareWith(this._optionMap.get(oe),j))return oe;return null}_getOptionValue(j){const oe=function En(q){return q.split(":")[0]}(j);return this._optionMap.has(oe)?this._optionMap.get(oe):j}static#e=this.\u0275fac=function(){let j;return function(Ae){return(j||(j=E.n5z(q)))(Ae||q)}}();static#t=this.\u0275dir=E.lG2({type:q,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(oe,Ae){1&oe&&E.NdJ("change",function(Sn){return Ae.onChange(Sn.target.value)})("blur",function(){return Ae.onTouched()})},inputs:{compareWith:"compareWith"},features:[E._Bn([eo]),E.qOj]})}return q})(),so=(()=>{class q{constructor(j,oe,Ae){this._element=j,this._renderer=oe,this._select=Ae,this._select&&(this.id=this._select._registerOption())}set ngValue(j){null!=this._select&&(this._select._optionMap.set(this.id,j),this._setElementValue(Cr(this.id,j)),this._select.writeValue(this._select.value))}set value(j){this._setElementValue(j),this._select&&this._select.writeValue(this._select.value)}_setElementValue(j){this._renderer.setProperty(this._element.nativeElement,"value",j)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static#e=this.\u0275fac=function(oe){return new(oe||q)(E.Y36(E.SBq),E.Y36(E.Qsj),E.Y36(yi,9))};static#t=this.\u0275dir=E.lG2({type:q,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}})}return q})();const Qi={provide:Et,useExisting:(0,E.Gpc)(()=>wi),multi:!0};function pi(q,K){return null==q?`${K}`:("string"==typeof K&&(K=`'${K}'`),K&&"object"==typeof K&&(K="Object"),`${q}: ${K}`.slice(0,50))}let wi=(()=>{class q extends st{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(j){this._compareWith=j}writeValue(j){let oe;if(this.value=j,Array.isArray(j)){const Ae=j.map(nn=>this._getOptionId(nn));oe=(nn,Sn)=>{nn._setSelected(Ae.indexOf(Sn.toString())>-1)}}else oe=(Ae,nn)=>{Ae._setSelected(!1)};this._optionMap.forEach(oe)}registerOnChange(j){this.onChange=oe=>{const Ae=[],nn=oe.selectedOptions;if(void 0!==nn){const Sn=nn;for(let Gi=0;Gi<Sn.length;Gi++){const vo=this._getOptionValue(Sn[Gi].value);Ae.push(vo)}}else{const Sn=oe.options;for(let Gi=0;Gi<Sn.length;Gi++){const vs=Sn[Gi];if(vs.selected){const vo=this._getOptionValue(vs.value);Ae.push(vo)}}}this.value=Ae,j(Ae)}}_registerOption(j){const oe=(this._idCounter++).toString();return this._optionMap.set(oe,j),oe}_getOptionId(j){for(const oe of this._optionMap.keys())if(this._compareWith(this._optionMap.get(oe)._value,j))return oe;return null}_getOptionValue(j){const oe=function ar(q){return q.split(":")[0]}(j);return this._optionMap.has(oe)?this._optionMap.get(oe)._value:j}static#e=this.\u0275fac=function(){let j;return function(Ae){return(j||(j=E.n5z(q)))(Ae||q)}}();static#t=this.\u0275dir=E.lG2({type:q,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(oe,Ae){1&oe&&E.NdJ("change",function(Sn){return Ae.onChange(Sn.target)})("blur",function(){return Ae.onTouched()})},inputs:{compareWith:"compareWith"},features:[E._Bn([Qi]),E.qOj]})}return q})(),Ji=(()=>{class q{constructor(j,oe,Ae){this._element=j,this._renderer=oe,this._select=Ae,this._select&&(this.id=this._select._registerOption(this))}set ngValue(j){null!=this._select&&(this._value=j,this._setElementValue(pi(this.id,j)),this._select.writeValue(this._select.value))}set value(j){this._select?(this._value=j,this._setElementValue(pi(this.id,j)),this._select.writeValue(this._select.value)):this._setElementValue(j)}_setElementValue(j){this._renderer.setProperty(this._element.nativeElement,"value",j)}_setSelected(j){this._renderer.setProperty(this._element.nativeElement,"selected",j)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static#e=this.\u0275fac=function(oe){return new(oe||q)(E.Y36(E.SBq),E.Y36(E.Qsj),E.Y36(wi,9))};static#t=this.\u0275dir=E.lG2({type:q,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}})}return q})(),yo=(()=>{class q{static#e=this.\u0275fac=function(oe){return new(oe||q)};static#t=this.\u0275mod=E.oAB({type:q});static#n=this.\u0275inj=E.cJS({imports:[fi]})}return q})();class ta extends Pt{constructor(K,j,oe){super(we(j),se(oe,j)),this.controls=K,this._initObservables(),this._setUpdateStrategy(j),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(K){return this.controls[this._adjustIndex(K)]}push(K,j={}){this.controls.push(K),this._registerControl(K),this.updateValueAndValidity({emitEvent:j.emitEvent}),this._onCollectionChange()}insert(K,j,oe={}){this.controls.splice(K,0,j),this._registerControl(j),this.updateValueAndValidity({emitEvent:oe.emitEvent})}removeAt(K,j={}){let oe=this._adjustIndex(K);oe<0&&(oe=0),this.controls[oe]&&this.controls[oe]._registerOnCollectionChange(()=>{}),this.controls.splice(oe,1),this.updateValueAndValidity({emitEvent:j.emitEvent})}setControl(K,j,oe={}){let Ae=this._adjustIndex(K);Ae<0&&(Ae=0),this.controls[Ae]&&this.controls[Ae]._registerOnCollectionChange(()=>{}),this.controls.splice(Ae,1),j&&(this.controls.splice(Ae,0,j),this._registerControl(j)),this.updateValueAndValidity({emitEvent:oe.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(K,j={}){_t(this,0,K),K.forEach((oe,Ae)=>{Le(this,!1,Ae),this.at(Ae).setValue(oe,{onlySelf:!0,emitEvent:j.emitEvent})}),this.updateValueAndValidity(j)}patchValue(K,j={}){null!=K&&(K.forEach((oe,Ae)=>{this.at(Ae)&&this.at(Ae).patchValue(oe,{onlySelf:!0,emitEvent:j.emitEvent})}),this.updateValueAndValidity(j))}reset(K=[],j={}){this._forEachChild((oe,Ae)=>{oe.reset(K[Ae],{onlySelf:!0,emitEvent:j.emitEvent})}),this._updatePristine(j),this._updateTouched(j),this.updateValueAndValidity(j)}getRawValue(){return this.controls.map(K=>K.getRawValue())}clear(K={}){this.controls.length<1||(this._forEachChild(j=>j._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:K.emitEvent}))}_adjustIndex(K){return K<0?K+this.length:K}_syncPendingControls(){let K=this.controls.reduce((j,oe)=>!!oe._syncPendingControls()||j,!1);return K&&this.updateValueAndValidity({onlySelf:!0}),K}_forEachChild(K){this.controls.forEach((j,oe)=>{K(j,oe)})}_updateValue(){this.value=this.controls.filter(K=>K.enabled||this.disabled).map(K=>K.value)}_anyControls(K){return this.controls.some(j=>j.enabled&&K(j))}_setUpControls(){this._forEachChild(K=>this._registerControl(K))}_allControlsDisabled(){for(const K of this.controls)if(K.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(K){K.setParent(this),K._registerOnCollectionChange(this._onCollectionChange)}_find(K){return this.at(K)??null}}function Mo(q){return!!q&&(void 0!==q.asyncValidators||void 0!==q.validators||void 0!==q.updateOn)}let xo=(()=>{class q{constructor(){this.useNonNullable=!1}get nonNullable(){const j=new q;return j.useNonNullable=!0,j}group(j,oe=null){const Ae=this._reduceControls(j);let nn={};return Mo(oe)?nn=oe:null!==oe&&(nn.validators=oe.validator,nn.asyncValidators=oe.asyncValidator),new $t(Ae,nn)}record(j,oe=null){const Ae=this._reduceControls(j);return new hn(Ae,oe)}control(j,oe,Ae){let nn={};return this.useNonNullable?(Mo(oe)?nn=oe:(nn.validators=oe,nn.asyncValidators=Ae),new Cs(j,{...nn,nonNullable:!0})):new Cs(j,oe,Ae)}array(j,oe,Ae){const nn=j.map(Sn=>this._createControl(Sn));return new ta(nn,oe,Ae)}_reduceControls(j){const oe={};return Object.keys(j).forEach(Ae=>{oe[Ae]=this._createControl(j[Ae])}),oe}_createControl(j){return j instanceof Cs||j instanceof Pt?j:Array.isArray(j)?this.control(j[0],j.length>1?j[1]:null,j.length>2?j[2]:null):this.control(j)}static#e=this.\u0275fac=function(oe){return new(oe||q)};static#t=this.\u0275prov=E.Yz7({token:q,factory:q.\u0275fac,providedIn:"root"})}return q})(),ra=(()=>{class q{static withConfig(j){return{ngModule:q,providers:[{provide:li,useValue:j.callSetDisabledState??Gs}]}}static#e=this.\u0275fac=function(oe){return new(oe||q)};static#t=this.\u0275mod=E.oAB({type:q});static#n=this.\u0275inj=E.cJS({imports:[yo]})}return q})(),xa=(()=>{class q{static withConfig(j){return{ngModule:q,providers:[{provide:_i,useValue:j.warnOnNgModelWithFormControl??"always"},{provide:li,useValue:j.callSetDisabledState??Gs}]}}static#e=this.\u0275fac=function(oe){return new(oe||q)};static#t=this.\u0275mod=E.oAB({type:q});static#n=this.\u0275inj=E.cJS({imports:[yo]})}return q})()},2614:()=>{const Wt=":";const Ln=function(Ee,...xe){if(Ln.translate){const lt=Ln.translate(Ee,xe);Ee=lt[0],xe=lt[1]}let ze=$n(Ee[0],Ee.raw[0]);for(let lt=1;lt<Ee.length;lt++)ze+=xe[lt-1]+$n(Ee[lt],Ee.raw[lt]);return ze},An=":";function $n(Ee,xe){return xe.charAt(0)===An?Ee.substring(function Se(Ee,xe){for(let ze=1,lt=1;ze<Ee.length;ze++,lt++)if("\\"===xe[lt])lt++;else if(Ee[ze]===Wt)return ze;throw new Error(`Unterminated $localize metadata block in "${xe}".`)}(Ee,xe)+1):Ee}globalThis.$localize=Ln},6593:(Wt,Je,G)=>{G.d(Je,{Dx:()=>Lt,b2:()=>Ee,q6:()=>Yt,se:()=>ft});var E=G(5879),me=G(6814);class le extends me.w_{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class Oe extends le{static makeCurrent(){(0,me.HT)(new Oe)}onAndCancel(se,re,ue){return se.addEventListener(re,ue),()=>{se.removeEventListener(re,ue)}}dispatchEvent(se,re){se.dispatchEvent(re)}remove(se){se.parentNode&&se.parentNode.removeChild(se)}createElement(se,re){return(re=re||this.getDefaultDocument()).createElement(se)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(se){return se.nodeType===Node.ELEMENT_NODE}isShadowRoot(se){return se instanceof DocumentFragment}getGlobalEventTarget(se,re){return"window"===re?window:"document"===re?se:"body"===re?se.body:null}getBaseHref(se){const re=function Te(){return Ne=Ne||document.querySelector("base"),Ne?Ne.getAttribute("href"):null}();return null==re?null:function T(ie){ke=ke||document.createElement("a"),ke.setAttribute("href",ie);const se=ke.pathname;return"/"===se.charAt(0)?se:`/${se}`}(re)}resetBaseElement(){Ne=null}getUserAgent(){return window.navigator.userAgent}getCookie(se){return(0,me.Mx)(document.cookie,se)}}let ke,Ne=null,ye=(()=>{class ie{build(){return new XMLHttpRequest}static#e=this.\u0275fac=function(ue){return new(ue||ie)};static#t=this.\u0275prov=E.Yz7({token:ie,factory:ie.\u0275fac})}return ie})();const Ie=new E.OlP("EventManagerPlugins");let Ve=(()=>{class ie{constructor(re,ue){this._zone=ue,this._eventNameToPlugin=new Map,re.forEach(Le=>{Le.manager=this}),this._plugins=re.slice().reverse()}addEventListener(re,ue,Le){return this._findPluginFor(ue).addEventListener(re,ue,Le)}getZone(){return this._zone}_findPluginFor(re){let ue=this._eventNameToPlugin.get(re);if(ue)return ue;if(ue=this._plugins.find(_t=>_t.supports(re)),!ue)throw new E.vHH(5101,!1);return this._eventNameToPlugin.set(re,ue),ue}static#e=this.\u0275fac=function(ue){return new(ue||ie)(E.LFG(Ie),E.LFG(E.R0b))};static#t=this.\u0275prov=E.Yz7({token:ie,factory:ie.\u0275fac})}return ie})();class ht{constructor(se){this._doc=se}}const st="ng-app-id";let Et=(()=>{class ie{constructor(re,ue,Le,_t={}){this.doc=re,this.appId=ue,this.nonce=Le,this.platformId=_t,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=(0,me.PM)(_t),this.resetHostNodes()}addStyles(re){for(const ue of re)1===this.changeUsageCount(ue,1)&&this.onStyleAdded(ue)}removeStyles(re){for(const ue of re)this.changeUsageCount(ue,-1)<=0&&this.onStyleRemoved(ue)}ngOnDestroy(){const re=this.styleNodesInDOM;re&&(re.forEach(ue=>ue.remove()),re.clear());for(const ue of this.getAllStyles())this.onStyleRemoved(ue);this.resetHostNodes()}addHost(re){this.hostNodes.add(re);for(const ue of this.getAllStyles())this.addStyleToHost(re,ue)}removeHost(re){this.hostNodes.delete(re)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(re){for(const ue of this.hostNodes)this.addStyleToHost(ue,re)}onStyleRemoved(re){const ue=this.styleRef;ue.get(re)?.elements?.forEach(Le=>Le.remove()),ue.delete(re)}collectServerRenderedStyles(){const re=this.doc.head?.querySelectorAll(`style[${st}="${this.appId}"]`);if(re?.length){const ue=new Map;return re.forEach(Le=>{null!=Le.textContent&&ue.set(Le.textContent,Le)}),ue}return null}changeUsageCount(re,ue){const Le=this.styleRef;if(Le.has(re)){const _t=Le.get(re);return _t.usage+=ue,_t.usage}return Le.set(re,{usage:ue,elements:[]}),ue}getStyleElement(re,ue){const Le=this.styleNodesInDOM,_t=Le?.get(ue);if(_t?.parentNode===re)return Le.delete(ue),_t.removeAttribute(st),_t;{const Pt=this.doc.createElement("style");return this.nonce&&Pt.setAttribute("nonce",this.nonce),Pt.textContent=ue,this.platformIsServer&&Pt.setAttribute(st,this.appId),Pt}}addStyleToHost(re,ue){const Le=this.getStyleElement(re,ue);re.appendChild(Le);const _t=this.styleRef,Pt=_t.get(ue)?.elements;Pt?Pt.push(Le):_t.set(ue,{elements:[Le],usage:1})}resetHostNodes(){const re=this.hostNodes;re.clear(),re.add(this.doc.head)}static#e=this.\u0275fac=function(ue){return new(ue||ie)(E.LFG(me.K0),E.LFG(E.AFp),E.LFG(E.Ojb,8),E.LFG(E.Lbi))};static#t=this.\u0275prov=E.Yz7({token:ie,factory:ie.\u0275fac})}return ie})();const mt={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Ct=/%COMP%/g,He=new E.OlP("RemoveStylesOnCompDestroy",{providedIn:"root",factory:()=>!1});function ot(ie,se){return se.map(re=>re.replace(Ct,ie))}let ft=(()=>{class ie{constructor(re,ue,Le,_t,Pt,$t,gn,Jt=null){this.eventManager=re,this.sharedStylesHost=ue,this.appId=Le,this.removeStylesOnCompDestroy=_t,this.doc=Pt,this.platformId=$t,this.ngZone=gn,this.nonce=Jt,this.rendererByCompId=new Map,this.platformIsServer=(0,me.PM)($t),this.defaultRenderer=new de(re,Pt,gn,this.platformIsServer)}createRenderer(re,ue){if(!re||!ue)return this.defaultRenderer;this.platformIsServer&&ue.encapsulation===E.ifc.ShadowDom&&(ue={...ue,encapsulation:E.ifc.Emulated});const Le=this.getOrCreateRenderer(re,ue);return Le instanceof _r?Le.applyToHost(re):Le instanceof Or&&Le.applyStyles(),Le}getOrCreateRenderer(re,ue){const Le=this.rendererByCompId;let _t=Le.get(ue.id);if(!_t){const Pt=this.doc,$t=this.ngZone,gn=this.eventManager,Jt=this.sharedStylesHost,hn=this.removeStylesOnCompDestroy,Br=this.platformIsServer;switch(ue.encapsulation){case E.ifc.Emulated:_t=new _r(gn,Jt,ue,this.appId,hn,Pt,$t,Br);break;case E.ifc.ShadowDom:return new On(gn,Jt,re,ue,Pt,$t,this.nonce,Br);default:_t=new Or(gn,Jt,ue,hn,Pt,$t,Br)}Le.set(ue.id,_t)}return _t}ngOnDestroy(){this.rendererByCompId.clear()}static#e=this.\u0275fac=function(ue){return new(ue||ie)(E.LFG(Ve),E.LFG(Et),E.LFG(E.AFp),E.LFG(He),E.LFG(me.K0),E.LFG(E.Lbi),E.LFG(E.R0b),E.LFG(E.Ojb))};static#t=this.\u0275prov=E.Yz7({token:ie,factory:ie.\u0275fac})}return ie})();class de{constructor(se,re,ue,Le){this.eventManager=se,this.doc=re,this.ngZone=ue,this.platformIsServer=Le,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(se,re){return re?this.doc.createElementNS(mt[re]||re,se):this.doc.createElement(se)}createComment(se){return this.doc.createComment(se)}createText(se){return this.doc.createTextNode(se)}appendChild(se,re){(Jn(se)?se.content:se).appendChild(re)}insertBefore(se,re,ue){se&&(Jn(se)?se.content:se).insertBefore(re,ue)}removeChild(se,re){se&&se.removeChild(re)}selectRootElement(se,re){let ue="string"==typeof se?this.doc.querySelector(se):se;if(!ue)throw new E.vHH(-5104,!1);return re||(ue.textContent=""),ue}parentNode(se){return se.parentNode}nextSibling(se){return se.nextSibling}setAttribute(se,re,ue,Le){if(Le){re=Le+":"+re;const _t=mt[Le];_t?se.setAttributeNS(_t,re,ue):se.setAttribute(re,ue)}else se.setAttribute(re,ue)}removeAttribute(se,re,ue){if(ue){const Le=mt[ue];Le?se.removeAttributeNS(Le,re):se.removeAttribute(`${ue}:${re}`)}else se.removeAttribute(re)}addClass(se,re){se.classList.add(re)}removeClass(se,re){se.classList.remove(re)}setStyle(se,re,ue,Le){Le&(E.JOm.DashCase|E.JOm.Important)?se.style.setProperty(re,ue,Le&E.JOm.Important?"important":""):se.style[re]=ue}removeStyle(se,re,ue){ue&E.JOm.DashCase?se.style.removeProperty(re):se.style[re]=""}setProperty(se,re,ue){se[re]=ue}setValue(se,re){se.nodeValue=re}listen(se,re,ue){if("string"==typeof se&&!(se=(0,me.q)().getGlobalEventTarget(this.doc,se)))throw new Error(`Unsupported event target ${se} for event ${re}`);return this.eventManager.addEventListener(se,re,this.decoratePreventDefault(ue))}decoratePreventDefault(se){return re=>{if("__ngUnwrap__"===re)return se;!1===(this.platformIsServer?this.ngZone.runGuarded(()=>se(re)):se(re))&&re.preventDefault()}}}function Jn(ie){return"TEMPLATE"===ie.tagName&&void 0!==ie.content}class On extends de{constructor(se,re,ue,Le,_t,Pt,$t,gn){super(se,_t,Pt,gn),this.sharedStylesHost=re,this.hostEl=ue,this.shadowRoot=ue.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const Jt=ot(Le.id,Le.styles);for(const hn of Jt){const Br=document.createElement("style");$t&&Br.setAttribute("nonce",$t),Br.textContent=hn,this.shadowRoot.appendChild(Br)}}nodeOrShadowRoot(se){return se===this.hostEl?this.shadowRoot:se}appendChild(se,re){return super.appendChild(this.nodeOrShadowRoot(se),re)}insertBefore(se,re,ue){return super.insertBefore(this.nodeOrShadowRoot(se),re,ue)}removeChild(se,re){return super.removeChild(this.nodeOrShadowRoot(se),re)}parentNode(se){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(se)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class Or extends de{constructor(se,re,ue,Le,_t,Pt,$t,gn){super(se,_t,Pt,$t),this.sharedStylesHost=re,this.removeStylesOnCompDestroy=Le,this.styles=gn?ot(gn,ue.styles):ue.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}}class _r extends Or{constructor(se,re,ue,Le,_t,Pt,$t,gn){const Jt=Le+"-"+ue.id;super(se,re,ue,_t,Pt,$t,gn,Jt),this.contentAttr=function Pe(ie){return"_ngcontent-%COMP%".replace(Ct,ie)}(Jt),this.hostAttr=function $e(ie){return"_nghost-%COMP%".replace(Ct,ie)}(Jt)}applyToHost(se){this.applyStyles(),this.setAttribute(se,this.hostAttr,"")}createElement(se,re){const ue=super.createElement(se,re);return super.setAttribute(ue,this.contentAttr,""),ue}}let tn=(()=>{class ie extends ht{constructor(re){super(re)}supports(re){return!0}addEventListener(re,ue,Le){return re.addEventListener(ue,Le,!1),()=>this.removeEventListener(re,ue,Le)}removeEventListener(re,ue,Le){return re.removeEventListener(ue,Le)}static#e=this.\u0275fac=function(ue){return new(ue||ie)(E.LFG(me.K0))};static#t=this.\u0275prov=E.Yz7({token:ie,factory:ie.\u0275fac})}return ie})();const Bt=["alt","control","meta","shift"],be={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Se={alt:ie=>ie.altKey,control:ie=>ie.ctrlKey,meta:ie=>ie.metaKey,shift:ie=>ie.shiftKey};let Ke=(()=>{class ie extends ht{constructor(re){super(re)}supports(re){return null!=ie.parseEventName(re)}addEventListener(re,ue,Le){const _t=ie.parseEventName(ue),Pt=ie.eventCallback(_t.fullKey,Le,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>(0,me.q)().onAndCancel(re,_t.domEventName,Pt))}static parseEventName(re){const ue=re.toLowerCase().split("."),Le=ue.shift();if(0===ue.length||"keydown"!==Le&&"keyup"!==Le)return null;const _t=ie._normalizeKey(ue.pop());let Pt="",$t=ue.indexOf("code");if($t>-1&&(ue.splice($t,1),Pt="code."),Bt.forEach(Jt=>{const hn=ue.indexOf(Jt);hn>-1&&(ue.splice(hn,1),Pt+=Jt+".")}),Pt+=_t,0!=ue.length||0===_t.length)return null;const gn={};return gn.domEventName=Le,gn.fullKey=Pt,gn}static matchEventFullKeyCode(re,ue){let Le=be[re.key]||re.key,_t="";return ue.indexOf("code.")>-1&&(Le=re.code,_t="code."),!(null==Le||!Le)&&(Le=Le.toLowerCase()," "===Le?Le="space":"."===Le&&(Le="dot"),Bt.forEach(Pt=>{Pt!==Le&&(0,Se[Pt])(re)&&(_t+=Pt+".")}),_t+=Le,_t===ue)}static eventCallback(re,ue,Le){return _t=>{ie.matchEventFullKeyCode(_t,re)&&Le.runGuarded(()=>ue(_t))}}static _normalizeKey(re){return"esc"===re?"escape":re}static#e=this.\u0275fac=function(ue){return new(ue||ie)(E.LFG(me.K0))};static#t=this.\u0275prov=E.Yz7({token:ie,factory:ie.\u0275fac})}return ie})();const Yt=(0,E.eFA)(E._c5,"browser",[{provide:E.Lbi,useValue:me.bD},{provide:E.g9A,useValue:function Rt(){Oe.makeCurrent()},multi:!0},{provide:me.K0,useFactory:function Ut(){return(0,E.RDi)(document),document},deps:[]}]),Ln=new E.OlP(""),An=[{provide:E.rWj,useClass:class qe{addToWindow(se){E.dqk.getAngularTestability=(ue,Le=!0)=>{const _t=se.findTestabilityInTree(ue,Le);if(null==_t)throw new E.vHH(5103,!1);return _t},E.dqk.getAllAngularTestabilities=()=>se.getAllTestabilities(),E.dqk.getAllAngularRootElements=()=>se.getAllRootElements(),E.dqk.frameworkStabilizers||(E.dqk.frameworkStabilizers=[]),E.dqk.frameworkStabilizers.push(ue=>{const Le=E.dqk.getAllAngularTestabilities();let _t=Le.length,Pt=!1;const $t=function(gn){Pt=Pt||gn,_t--,0==_t&&ue(Pt)};Le.forEach(gn=>{gn.whenStable($t)})})}findTestabilityInTree(se,re,ue){return null==re?null:se.getTestability(re)??(ue?(0,me.q)().isShadowRoot(re)?this.findTestabilityInTree(se,re.host,!0):this.findTestabilityInTree(se,re.parentElement,!0):null)}},deps:[]},{provide:E.lri,useClass:E.dDg,deps:[E.R0b,E.eoX,E.rWj]},{provide:E.dDg,useClass:E.dDg,deps:[E.R0b,E.eoX,E.rWj]}],$n=[{provide:E.zSh,useValue:"root"},{provide:E.qLn,useFactory:function hr(){return new E.qLn},deps:[]},{provide:Ie,useClass:tn,multi:!0,deps:[me.K0,E.R0b,E.Lbi]},{provide:Ie,useClass:Ke,multi:!0,deps:[me.K0]},ft,Et,Ve,{provide:E.FYo,useExisting:ft},{provide:me.JF,useClass:ye,deps:[]},[]];let Ee=(()=>{class ie{constructor(re){}static withServerTransition(re){return{ngModule:ie,providers:[{provide:E.AFp,useValue:re.appId}]}}static#e=this.\u0275fac=function(ue){return new(ue||ie)(E.LFG(Ln,12))};static#t=this.\u0275mod=E.oAB({type:ie});static#n=this.\u0275inj=E.cJS({providers:[...$n,...An],imports:[me.ez,E.hGG]})}return ie})(),Lt=(()=>{class ie{constructor(re){this._doc=re}getTitle(){return this._doc.title}setTitle(re){this._doc.title=re||""}static#e=this.\u0275fac=function(ue){return new(ue||ie)(E.LFG(me.K0))};static#t=this.\u0275prov=E.Yz7({token:ie,factory:function(ue){let Le=null;return Le=ue?new ue:function pt(){return new Lt((0,E.LFG)(me.K0))}(),Le},providedIn:"root"})}return ie})();typeof window<"u"&&window},1826:(Wt,Je,G)=>{G.d(Je,{F0:()=>Os,rH:()=>La,Bz:()=>Sd,lC:()=>En});var E=G(5879),me=G(5592),le=G(4674),Ne=G(2459),Te=G(2096),ke=G(5619),T=G(7453),qe=G(2737),ye=G(7400),Ie=G(9940),Ve=G(2714),ht=G(8251),st=G(7103);function Et(...R){const k=(0,Ie.yG)(R),A=(0,Ie.jO)(R),{args:L,keys:V}=(0,T.D)(R);if(0===L.length)return(0,Ne.D)([],k);const te=new me.y(function mt(R,k,A=qe.y){return L=>{Ct(k,()=>{const{length:V}=R,te=new Array(V);let he=V,Qe=V;for(let Ze=0;Ze<V;Ze++)Ct(k,()=>{const Ht=(0,Ne.D)(R[Ze],k);let Qn=!1;Ht.subscribe((0,ht.x)(L,Wr=>{te[Ze]=Wr,Qn||(Qn=!0,Qe--),Qe||L.next(A(te.slice()))},()=>{--he||L.complete()}))},L)},L)}}(L,k,V?he=>(0,Ve.n)(V,he):qe.y));return A?te.pipe((0,ye.Z)(A)):te}function Ct(R,k,A){R?(0,st.f)(A,R,k):k()}var bt=G(6973),jt=G(5211),Re=G(4829);function _e(R){return new me.y(k=>{(0,Re.Xf)(R()).subscribe(k)})}var He=G(8407);function Pe(R,k){const A=(0,le.m)(R)?R:()=>R,L=V=>V.error(A());return new me.y(k?V=>k.schedule(L,0,V):L)}var $e=G(6232),ot=G(7394),ft=G(9360);function de(){return(0,ft.e)((R,k)=>{let A=null;R._refCount++;const L=(0,ht.x)(k,void 0,void 0,void 0,()=>{if(!R||R._refCount<=0||0<--R._refCount)return void(A=null);const V=R._connection,te=A;A=null,V&&(!te||V===te)&&V.unsubscribe(),k.unsubscribe()});R.subscribe(L),L.closed||(A=R.connect())})}class Ot extends me.y{constructor(k,A){super(),this.source=k,this.subjectFactory=A,this._subject=null,this._refCount=0,this._connection=null,(0,ft.A)(k)&&(this.lift=k.lift)}_subscribe(k){return this.getSubject().subscribe(k)}getSubject(){const k=this._subject;return(!k||k.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:k}=this;this._subject=this._connection=null,k?.unsubscribe()}connect(){let k=this._connection;if(!k){k=this._connection=new ot.w0;const A=this.getSubject();k.add(this.source.subscribe((0,ht.x)(A,void 0,()=>{this._teardown(),A.complete()},L=>{this._teardown(),A.error(L)},()=>this._teardown()))),k.closed&&(this._connection=null,k=ot.w0.EMPTY)}return k}refCount(){return de()(this)}}var wt=G(8645),Jn=G(6814),On=G(7398),Or=G(4664),_r=G(8180),tn=G(7921),Bt=G(2181),be=G(1631),Se=G(1374);function Ke(R,k){return(0,le.m)(k)?(0,be.z)(R,k,1):(0,be.z)(R,1)}var Fe=G(9397);function Ue(R){return(0,ft.e)((k,A)=>{let te,L=null,V=!1;L=k.subscribe((0,ht.x)(A,void 0,void 0,he=>{te=(0,Re.Xf)(R(he,Ue(R)(k))),L?(L.unsubscribe(),L=null,te.subscribe(A)):V=!0})),V&&(L.unsubscribe(),L=null,te.subscribe(A))})}var Xe=G(6699),Ft=G(3572);function Rt(R){return R<=0?()=>$e.E:(0,ft.e)((k,A)=>{let L=[];k.subscribe((0,ht.x)(A,V=>{L.push(V),R<L.length&&L.shift()},()=>{for(const V of L)A.next(V);A.complete()},void 0,()=>{L=null}))})}var hr=G(3026),Kn=G(975);function Yt(R){return(0,ft.e)((k,A)=>{try{k.subscribe(A)}finally{A.add(R)}})}var Ln=G(9773),An=G(7537),$n=G(6593);const Ee="primary",xe=Symbol("RouteTitle");class ze{constructor(k){this.params=k||{}}has(k){return Object.prototype.hasOwnProperty.call(this.params,k)}get(k){if(this.has(k)){const A=this.params[k];return Array.isArray(A)?A[0]:A}return null}getAll(k){if(this.has(k)){const A=this.params[k];return Array.isArray(A)?A:[A]}return[]}get keys(){return Object.keys(this.params)}}function lt(R){return new ze(R)}function pt(R,k,A){const L=A.path.split("/");if(L.length>R.length||"full"===A.pathMatch&&(k.hasChildren()||L.length<R.length))return null;const V={};for(let te=0;te<L.length;te++){const he=L[te],Qe=R[te];if(he.startsWith(":"))V[he.substring(1)]=Qe;else if(he!==Qe.path)return null}return{consumed:R.slice(0,L.length),posParams:V}}function jn(R,k){const A=R?Object.keys(R):void 0,L=k?Object.keys(k):void 0;if(!A||!L||A.length!=L.length)return!1;let V;for(let te=0;te<A.length;te++)if(V=A[te],!zn(R[V],k[V]))return!1;return!0}function zn(R,k){if(Array.isArray(R)&&Array.isArray(k)){if(R.length!==k.length)return!1;const A=[...R].sort(),L=[...k].sort();return A.every((V,te)=>L[te]===V)}return R===k}function Mt(R){return R.length>0?R[R.length-1]:null}function ln(R){return function Oe(R){return!!R&&(R instanceof me.y||(0,le.m)(R.lift)&&(0,le.m)(R.subscribe))}(R)?R:(0,E.QGY)(R)?(0,Ne.D)(Promise.resolve(R)):(0,Te.of)(R)}const mn={exact:function Hn(R,k,A){if(!ts(R.segments,k.segments)||!Wi(R.segments,k.segments,A)||R.numberOfChildren!==k.numberOfChildren)return!1;for(const L in k.children)if(!R.children[L]||!Hn(R.children[L],k.children[L],A))return!1;return!0},subset:Yr},or={exact:function Gr(R,k){return jn(R,k)},subset:function $r(R,k){return Object.keys(k).length<=Object.keys(R).length&&Object.keys(k).every(A=>zn(R[A],k[A]))},ignored:()=>!0};function cn(R,k,A){return mn[A.paths](R.root,k.root,A.matrixParams)&&or[A.queryParams](R.queryParams,k.queryParams)&&!("exact"===A.fragment&&R.fragment!==k.fragment)}function Yr(R,k,A){return Xt(R,k,k.segments,A)}function Xt(R,k,A,L){if(R.segments.length>A.length){const V=R.segments.slice(0,A.length);return!(!ts(V,A)||k.hasChildren()||!Wi(V,A,L))}if(R.segments.length===A.length){if(!ts(R.segments,A)||!Wi(R.segments,A,L))return!1;for(const V in k.children)if(!R.children[V]||!Yr(R.children[V],k.children[V],L))return!1;return!0}{const V=A.slice(0,R.segments.length),te=A.slice(R.segments.length);return!!(ts(R.segments,V)&&Wi(R.segments,V,L)&&R.children[Ee])&&Xt(R.children[Ee],k,te,L)}}function Wi(R,k,A){return k.every((L,V)=>or[A](R[V].parameters,L.parameters))}class wn{constructor(k=new Dn([],{}),A={},L=null){this.root=k,this.queryParams=A,this.fragment=L}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=lt(this.queryParams)),this._queryParamMap}toString(){return ps.serialize(this)}}class Dn{constructor(k,A){this.segments=k,this.children=A,this.parent=null,Object.values(A).forEach(L=>L.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Bi(this)}}class Vi{constructor(k,A){this.path=k,this.parameters=A}get parameterMap(){return this._parameterMap||(this._parameterMap=lt(this.parameters)),this._parameterMap}toString(){return ue(this)}}function ts(R,k){return R.length===k.length&&R.every((A,L)=>A.path===k[L].path)}let dr=(()=>{class R{static#e=this.\u0275fac=function(L){return new(L||R)};static#t=this.\u0275prov=E.Yz7({token:R,factory:function(){return new Ti},providedIn:"root"})}return R})();class Ti{parse(k){const A=new Qs(k);return new wn(A.parseRootSegment(),A.parseQueryParams(),A.parseFragment())}serialize(k){const A=`/${xi(k.root,!0)}`,L=function _t(R){const k=Object.keys(R).map(A=>{const L=R[A];return Array.isArray(L)?L.map(V=>`${ji(A)}=${ji(V)}`).join("&"):`${ji(A)}=${ji(L)}`}).filter(A=>!!A);return k.length?`?${k.join("&")}`:""}(k.queryParams);return`${A}${L}${"string"==typeof k.fragment?`#${function we(R){return encodeURI(R)}(k.fragment)}`:""}`}}const ps=new Ti;function Bi(R){return R.segments.map(k=>ue(k)).join("/")}function xi(R,k){if(!R.hasChildren())return Bi(R);if(k){const A=R.children[Ee]?xi(R.children[Ee],!1):"",L=[];return Object.entries(R.children).forEach(([V,te])=>{V!==Ee&&L.push(`${V}:${xi(te,!1)}`)}),L.length>0?`${A}(${L.join("//")})`:A}{const A=function go(R,k){let A=[];return Object.entries(R.children).forEach(([L,V])=>{L===Ee&&(A=A.concat(k(V,L)))}),Object.entries(R.children).forEach(([L,V])=>{L!==Ee&&(A=A.concat(k(V,L)))}),A}(R,(L,V)=>V===Ee?[xi(R.children[Ee],!1)]:[`${V}:${xi(L,!1)}`]);return 1===Object.keys(R.children).length&&null!=R.children[Ee]?`${Bi(R)}/${A[0]}`:`${Bi(R)}/(${A.join("//")})`}}function Ui(R){return encodeURIComponent(R).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function ji(R){return Ui(R).replace(/%3B/gi,";")}function ie(R){return Ui(R).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function se(R){return decodeURIComponent(R)}function re(R){return se(R.replace(/\+/g,"%20"))}function ue(R){return`${ie(R.path)}${function Le(R){return Object.keys(R).map(k=>`;${ie(k)}=${ie(R[k])}`).join("")}(R.parameters)}`}const Pt=/^[^\/()?;#]+/;function $t(R){const k=R.match(Pt);return k?k[0]:""}const gn=/^[^\/()?;=#]+/,hn=/^[^=?&#]+/,li=/^[^&#]+/;class Qs{constructor(k){this.url=k,this.remaining=k}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Dn([],{}):new Dn([],this.parseChildren())}parseQueryParams(){const k={};if(this.consumeOptional("?"))do{this.parseQueryParam(k)}while(this.consumeOptional("&"));return k}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const k=[];for(this.peekStartsWith("(")||k.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),k.push(this.parseSegment());let A={};this.peekStartsWith("/(")&&(this.capture("/"),A=this.parseParens(!0));let L={};return this.peekStartsWith("(")&&(L=this.parseParens(!1)),(k.length>0||Object.keys(A).length>0)&&(L[Ee]=new Dn(k,A)),L}parseSegment(){const k=$t(this.remaining);if(""===k&&this.peekStartsWith(";"))throw new E.vHH(4009,!1);return this.capture(k),new Vi(se(k),this.parseMatrixParams())}parseMatrixParams(){const k={};for(;this.consumeOptional(";");)this.parseParam(k);return k}parseParam(k){const A=function Jt(R){const k=R.match(gn);return k?k[0]:""}(this.remaining);if(!A)return;this.capture(A);let L="";if(this.consumeOptional("=")){const V=$t(this.remaining);V&&(L=V,this.capture(L))}k[se(A)]=se(L)}parseQueryParam(k){const A=function Br(R){const k=R.match(hn);return k?k[0]:""}(this.remaining);if(!A)return;this.capture(A);let L="";if(this.consumeOptional("=")){const he=function Gs(R){const k=R.match(li);return k?k[0]:""}(this.remaining);he&&(L=he,this.capture(L))}const V=re(A),te=re(L);if(k.hasOwnProperty(V)){let he=k[V];Array.isArray(he)||(he=[he],k[V]=he),he.push(te)}else k[V]=te}parseParens(k){const A={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const L=$t(this.remaining),V=this.remaining[L.length];if("/"!==V&&")"!==V&&";"!==V)throw new E.vHH(4010,!1);let te;L.indexOf(":")>-1?(te=L.slice(0,L.indexOf(":")),this.capture(te),this.capture(":")):k&&(te=Ee);const he=this.parseChildren();A[te]=1===Object.keys(he).length?he[Ee]:new Dn([],he),this.consumeOptional("//")}return A}peekStartsWith(k){return this.remaining.startsWith(k)}consumeOptional(k){return!!this.peekStartsWith(k)&&(this.remaining=this.remaining.substring(k.length),!0)}capture(k){if(!this.consumeOptional(k))throw new E.vHH(4011,!1)}}function it(R){return R.segments.length>0?new Dn([],{[Ee]:R}):R}function Ge(R){const k={};for(const L of Object.keys(R.children)){const te=Ge(R.children[L]);if(L===Ee&&0===te.segments.length&&te.hasChildren())for(const[he,Qe]of Object.entries(te.children))k[he]=Qe;else(te.segments.length>0||te.hasChildren())&&(k[L]=te)}return function vt(R){if(1===R.numberOfChildren&&R.children[Ee]){const k=R.children[Ee];return new Dn(R.segments.concat(k.segments),k.children)}return R}(new Dn(R.segments,k))}function sn(R){return R instanceof wn}function qt(R){let k;const V=it(function A(te){const he={};for(const Ze of te.children){const Ht=A(Ze);he[Ze.outlet]=Ht}const Qe=new Dn(te.url,he);return te===R&&(k=Qe),Qe}(R.root));return k??V}function tr(R,k,A,L){let V=R;for(;V.parent;)V=V.parent;if(0===k.length)return Js(V,V,V,A,L);const te=function qa(R){if("string"==typeof R[0]&&1===R.length&&"/"===R[0])return new Ds(!0,0,R);let k=0,A=!1;const L=R.reduce((V,te,he)=>{if("object"==typeof te&&null!=te){if(te.outlets){const Qe={};return Object.entries(te.outlets).forEach(([Ze,Ht])=>{Qe[Ze]="string"==typeof Ht?Ht.split("/"):Ht}),[...V,{outlets:Qe}]}if(te.segmentPath)return[...V,te.segmentPath]}return"string"!=typeof te?[...V,te]:0===he?(te.split("/").forEach((Qe,Ze)=>{0==Ze&&"."===Qe||(0==Ze&&""===Qe?A=!0:".."===Qe?k++:""!=Qe&&V.push(Qe))}),V):[...V,te]},[]);return new Ds(A,k,L)}(k);if(te.toRoot())return Js(V,V,new Dn([],{}),A,L);const he=function Ka(R,k,A){if(R.isAbsolute)return new Yo(k,!0,0);if(!A)return new Yo(k,!1,NaN);if(null===A.parent)return new Yo(A,!0,0);const L=ui(R.commands[0])?0:1;return function Mn(R,k,A){let L=R,V=k,te=A;for(;te>V;){if(te-=V,L=L.parent,!L)throw new E.vHH(4005,!1);V=L.segments.length}return new Yo(L,!1,V-te)}(A,A.segments.length-1+L,R.numberOfDoubleDots)}(te,V,R),Qe=he.processChildren?$s(he.segmentGroup,he.index,te.commands):ro(he.segmentGroup,he.index,te.commands);return Js(V,he.segmentGroup,Qe,A,L)}function ui(R){return"object"==typeof R&&null!=R&&!R.outlets&&!R.segmentPath}function Mr(R){return"object"==typeof R&&null!=R&&R.outlets}function Js(R,k,A,L,V){let he,te={};L&&Object.entries(L).forEach(([Ze,Ht])=>{te[Ze]=Array.isArray(Ht)?Ht.map(Qn=>`${Qn}`):`${Ht}`}),he=R===k?A:Hi(R,k,A);const Qe=it(Ge(he));return new wn(Qe,te,V)}function Hi(R,k,A){const L={};return Object.entries(R.children).forEach(([V,te])=>{L[V]=te===k?A:Hi(te,k,A)}),new Dn(R.segments,L)}class Ds{constructor(k,A,L){if(this.isAbsolute=k,this.numberOfDoubleDots=A,this.commands=L,k&&L.length>0&&ui(L[0]))throw new E.vHH(4003,!1);const V=L.find(Mr);if(V&&V!==Mt(L))throw new E.vHH(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Yo{constructor(k,A,L){this.segmentGroup=k,this.processChildren=A,this.index=L}}function ro(R,k,A){if(R||(R=new Dn([],{})),0===R.segments.length&&R.hasChildren())return $s(R,k,A);const L=function Zo(R,k,A){let L=0,V=k;const te={match:!1,pathIndex:0,commandIndex:0};for(;V<R.segments.length;){if(L>=A.length)return te;const he=R.segments[V],Qe=A[L];if(Mr(Qe))break;const Ze=`${Qe}`,Ht=L<A.length-1?A[L+1]:null;if(V>0&&void 0===Ze)break;if(Ze&&Ht&&"object"==typeof Ht&&void 0===Ht.outlets){if(!Jo(Ze,Ht,he))return te;L+=2}else{if(!Jo(Ze,{},he))return te;L++}V++}return{match:!0,pathIndex:V,commandIndex:L}}(R,k,A),V=A.slice(L.commandIndex);if(L.match&&L.pathIndex<R.segments.length){const te=new Dn(R.segments.slice(0,L.pathIndex),{});return te.children[Ee]=new Dn(R.segments.slice(L.pathIndex),R.children),$s(te,0,V)}return L.match&&0===V.length?new Dn(R.segments,{}):L.match&&!R.hasChildren()?mo(R,k,A):L.match?$s(R,0,V):mo(R,k,A)}function $s(R,k,A){if(0===A.length)return new Dn(R.segments,{});{const L=function Ya(R){return Mr(R[0])?R[0].outlets:{[Ee]:R}}(A),V={};if(Object.keys(L).some(te=>te!==Ee)&&R.children[Ee]&&1===R.numberOfChildren&&0===R.children[Ee].segments.length){const te=$s(R.children[Ee],k,A);return new Dn(R.segments,te.children)}return Object.entries(L).forEach(([te,he])=>{"string"==typeof he&&(he=[he]),null!==he&&(V[te]=ro(R.children[te],k,he))}),Object.entries(R.children).forEach(([te,he])=>{void 0===L[te]&&(V[te]=he)}),new Dn(R.segments,V)}}function mo(R,k,A){const L=R.segments.slice(0,k);let V=0;for(;V<A.length;){const te=A[V];if(Mr(te)){const Ze=Xs(te.outlets);return new Dn(L,Ze)}if(0===V&&ui(A[0])){L.push(new Vi(R.segments[k].path,Qo(A[0]))),V++;continue}const he=Mr(te)?te.outlets[Ee]:`${te}`,Qe=V<A.length-1?A[V+1]:null;he&&Qe&&ui(Qe)?(L.push(new Vi(he,Qo(Qe))),V+=2):(L.push(new Vi(he,{})),V++)}return new Dn(L,{})}function Xs(R){const k={};return Object.entries(R).forEach(([A,L])=>{"string"==typeof L&&(L=[L]),null!==L&&(k[A]=mo(new Dn([],{}),0,L))}),k}function Qo(R){const k={};return Object.entries(R).forEach(([A,L])=>k[A]=`${L}`),k}function Jo(R,k,A){return R==A.path&&jn(k,A.parameters)}const fr="imperative";class Tr{constructor(k,A){this.id=k,this.url=A}}class ci extends Tr{constructor(k,A,L="imperative",V=null){super(k,A),this.type=0,this.navigationTrigger=L,this.restoredState=V}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class zr extends Tr{constructor(k,A,L){super(k,A),this.urlAfterRedirects=L,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Cs extends Tr{constructor(k,A,L,V){super(k,A),this.reason=L,this.code=V,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class qi extends Tr{constructor(k,A,L,V){super(k,A),this.reason=L,this.code=V,this.type=16}}class io extends Tr{constructor(k,A,L,V){super(k,A),this.error=L,this.target=V,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class di extends Tr{constructor(k,A,L,V){super(k,A),this.urlAfterRedirects=L,this.state=V,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class du extends Tr{constructor(k,A,L,V){super(k,A),this.urlAfterRedirects=L,this.state=V,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Ki extends Tr{constructor(k,A,L,V,te){super(k,A),this.urlAfterRedirects=L,this.state=V,this.shouldActivate=te,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Xo extends Tr{constructor(k,A,L,V){super(k,A),this.urlAfterRedirects=L,this.state=V,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Za extends Tr{constructor(k,A,L,V){super(k,A),this.urlAfterRedirects=L,this.state=V,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Qa{constructor(k){this.route=k,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Po{constructor(k){this.route=k,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Ja{constructor(k){this.snapshot=k,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class zs{constructor(k){this.snapshot=k,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class ea{constructor(k){this.snapshot=k,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class _o{constructor(k){this.snapshot=k,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Oa{constructor(k,A,L){this.routerEvent=k,this.position=A,this.anchor=L,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class ks{}class Yn{constructor(k){this.url=k}}class fi{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new ns,this.attachRef=null}}let ns=(()=>{class R{constructor(){this.contexts=new Map}onChildOutletCreated(A,L){const V=this.getOrCreateContext(A);V.outlet=L,this.contexts.set(A,V)}onChildOutletDestroyed(A){const L=this.getContext(A);L&&(L.outlet=null,L.attachRef=null)}onOutletDeactivated(){const A=this.contexts;return this.contexts=new Map,A}onOutletReAttached(A){this.contexts=A}getOrCreateContext(A){let L=this.getContext(A);return L||(L=new fi,this.contexts.set(A,L)),L}getContext(A){return this.contexts.get(A)||null}static#e=this.\u0275fac=function(L){return new(L||R)};static#t=this.\u0275prov=E.Yz7({token:R,factory:R.\u0275fac,providedIn:"root"})}return R})();class Dr{constructor(k){this._root=k}get root(){return this._root.value}parent(k){const A=this.pathFromRoot(k);return A.length>1?A[A.length-2]:null}children(k){const A=rs(k,this._root);return A?A.children.map(L=>L.value):[]}firstChild(k){const A=rs(k,this._root);return A&&A.children.length>0?A.children[0].value:null}siblings(k){const A=Yi(k,this._root);return A.length<2?[]:A[A.length-2].children.map(V=>V.value).filter(V=>V!==k)}pathFromRoot(k){return Yi(k,this._root).map(A=>A.value)}}function rs(R,k){if(R===k.value)return k;for(const A of k.children){const L=rs(R,A);if(L)return L}return null}function Yi(R,k){if(R===k.value)return[k];for(const A of k.children){const L=Yi(R,A);if(L.length)return L.unshift(k),L}return[]}class _i{constructor(k,A){this.value=k,this.children=A}toString(){return`TreeNode(${this.value})`}}function As(R){const k={};return R&&R.children.forEach(A=>k[A.value.outlet]=A),k}class Ss extends Dr{constructor(k,A){super(k),this.snapshot=A,si(this,k)}toString(){return this.snapshot.toString()}}function xr(R,k){const A=function xt(R,k){const he=new Zi([],{},{},"",{},Ee,k,null,{});return new ei("",new _i(he,[]))}(0,k),L=new ke.X([new Vi("",{})]),V=new ke.X({}),te=new ke.X({}),he=new ke.X({}),Qe=new ke.X(""),Ze=new Cn(L,V,he,Qe,te,Ee,k,A.root);return Ze.snapshot=A.root,new Ss(new _i(Ze,[]),A)}class Cn{constructor(k,A,L,V,te,he,Qe,Ze){this.urlSubject=k,this.paramsSubject=A,this.queryParamsSubject=L,this.fragmentSubject=V,this.dataSubject=te,this.outlet=he,this.component=Qe,this._futureSnapshot=Ze,this.title=this.dataSubject?.pipe((0,On.U)(Ht=>Ht[xe]))??(0,Te.of)(void 0),this.url=k,this.params=A,this.queryParams=L,this.fragment=V,this.data=te}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,On.U)(k=>lt(k)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,On.U)(k=>lt(k)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function nr(R,k="emptyOnly"){const A=R.pathFromRoot;let L=0;if("always"!==k)for(L=A.length-1;L>=1;){const V=A[L],te=A[L-1];if(V.routeConfig&&""===V.routeConfig.path)L--;else{if(te.component)break;L--}}return function ii(R){return R.reduce((k,A)=>({params:{...k.params,...A.params},data:{...k.data,...A.data},resolve:{...A.data,...k.resolve,...A.routeConfig?.data,...A._resolvedData}}),{params:{},data:{},resolve:{}})}(A.slice(L))}class Zi{get title(){return this.data?.[xe]}constructor(k,A,L,V,te,he,Qe,Ze,Ht){this.url=k,this.params=A,this.queryParams=L,this.fragment=V,this.data=te,this.outlet=he,this.component=Qe,this.routeConfig=Ze,this._resolve=Ht}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=lt(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=lt(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(L=>L.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class ei extends Dr{constructor(k,A){super(A),this.url=k,si(this,A)}toString(){return rr(this._root)}}function si(R,k){k.value._routerState=R,k.children.forEach(A=>si(R,A))}function rr(R){const k=R.children.length>0?` { ${R.children.map(rr).join(", ")} } `:"";return`${R.value}${k}`}function eo(R){if(R.snapshot){const k=R.snapshot,A=R._futureSnapshot;R.snapshot=A,jn(k.queryParams,A.queryParams)||R.queryParamsSubject.next(A.queryParams),k.fragment!==A.fragment&&R.fragmentSubject.next(A.fragment),jn(k.params,A.params)||R.paramsSubject.next(A.params),function Lt(R,k){if(R.length!==k.length)return!1;for(let A=0;A<R.length;++A)if(!jn(R[A],k[A]))return!1;return!0}(k.url,A.url)||R.urlSubject.next(A.url),jn(k.data,A.data)||R.dataSubject.next(A.data)}else R.snapshot=R._futureSnapshot,R.dataSubject.next(R._futureSnapshot.data)}function Cr(R,k){const A=jn(R.params,k.params)&&function Pa(R,k){return ts(R,k)&&R.every((A,L)=>jn(A.parameters,k[L].parameters))}(R.url,k.url);return A&&!(!R.parent!=!k.parent)&&(!R.parent||Cr(R.parent,k.parent))}let En=(()=>{class R{constructor(){this.activated=null,this._activatedRoute=null,this.name=Ee,this.activateEvents=new E.vpe,this.deactivateEvents=new E.vpe,this.attachEvents=new E.vpe,this.detachEvents=new E.vpe,this.parentContexts=(0,E.f3M)(ns),this.location=(0,E.f3M)(E.s_b),this.changeDetector=(0,E.f3M)(E.sBO),this.environmentInjector=(0,E.f3M)(E.lqb),this.inputBinder=(0,E.f3M)(so,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(A){if(A.name){const{firstChange:L,previousValue:V}=A.name;if(L)return;this.isTrackedInParentContexts(V)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(V)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(A){return this.parentContexts.getContext(A)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const A=this.parentContexts.getContext(this.name);A?.route&&(A.attachRef?this.attach(A.attachRef,A.route):this.activateWith(A.route,A.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new E.vHH(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new E.vHH(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new E.vHH(4012,!1);this.location.detach();const A=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(A.instance),A}attach(A,L){this.activated=A,this._activatedRoute=L,this.location.insert(A.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(A.instance)}deactivate(){if(this.activated){const A=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(A)}}activateWith(A,L){if(this.isActivated)throw new E.vHH(4013,!1);this._activatedRoute=A;const V=this.location,he=A.snapshot.component,Qe=this.parentContexts.getOrCreateContext(this.name).children,Ze=new yi(A,Qe,V.injector);this.activated=V.createComponent(he,{index:V.length,injector:Ze,environmentInjector:L??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static#e=this.\u0275fac=function(L){return new(L||R)};static#t=this.\u0275dir=E.lG2({type:R,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[E.TTD]})}return R})();class yi{constructor(k,A,L){this.route=k,this.childContexts=A,this.parent=L}get(k,A){return k===Cn?this.route:k===ns?this.childContexts:this.parent.get(k,A)}}const so=new E.OlP("");let Qi=(()=>{class R{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(A){this.unsubscribeFromRouteData(A),this.subscribeToRouteData(A)}unsubscribeFromRouteData(A){this.outletDataSubscriptions.get(A)?.unsubscribe(),this.outletDataSubscriptions.delete(A)}subscribeToRouteData(A){const{activatedRoute:L}=A,V=Et([L.queryParams,L.params,L.data]).pipe((0,Or.w)(([te,he,Qe],Ze)=>(Qe={...te,...he,...Qe},0===Ze?(0,Te.of)(Qe):Promise.resolve(Qe)))).subscribe(te=>{if(!A.isActivated||!A.activatedComponentRef||A.activatedRoute!==L||null===L.component)return void this.unsubscribeFromRouteData(A);const he=(0,E.qFp)(L.component);if(he)for(const{templateName:Qe}of he.inputs)A.activatedComponentRef.setInput(Qe,te[Qe]);else this.unsubscribeFromRouteData(A)});this.outletDataSubscriptions.set(A,V)}static#e=this.\u0275fac=function(L){return new(L||R)};static#t=this.\u0275prov=E.Yz7({token:R,factory:R.\u0275fac})}return R})();function ar(R,k,A){if(A&&R.shouldReuseRoute(k.value,A.value.snapshot)){const L=A.value;L._futureSnapshot=k.value;const V=function Oo(R,k,A){return k.children.map(L=>{for(const V of A.children)if(R.shouldReuseRoute(L.value,V.value.snapshot))return ar(R,L,V);return ar(R,L)})}(R,k,A);return new _i(L,V)}{if(R.shouldAttach(k.value)){const te=R.retrieve(k.value);if(null!==te){const he=te.route;return he.value._futureSnapshot=k.value,he.children=k.children.map(Qe=>ar(R,Qe)),he}}const L=function wi(R){return new Cn(new ke.X(R.url),new ke.X(R.params),new ke.X(R.queryParams),new ke.X(R.fragment),new ke.X(R.data),R.outlet,R.component,R)}(k.value),V=k.children.map(te=>ar(R,te));return new _i(L,V)}}const Ji="ngNavigationCancelingError";function gs(R,k){const{redirectTo:A,navigationBehaviorOptions:L}=sn(k)?{redirectTo:k,navigationBehaviorOptions:void 0}:k,V=to(!1,0,k);return V.url=A,V.navigationBehaviorOptions=L,V}function to(R,k,A){const L=new Error("NavigationCancelingError: "+(R||""));return L[Ji]=!0,L.cancellationCode=k,A&&(L.url=A),L}function _s(R){return R&&R[Ji]}let Xa=(()=>{class R{static#e=this.\u0275fac=function(L){return new(L||R)};static#t=this.\u0275cmp=E.Xpm({type:R,selectors:[["ng-component"]],standalone:!0,features:[E.jDz],decls:1,vars:0,template:function(L,V){1&L&&E._UZ(0,"router-outlet")},dependencies:[En],encapsulation:2})}return R})();function _l(R){const k=R.children&&R.children.map(_l),A=k?{...R,children:k}:{...R};return!A.component&&!A.loadComponent&&(k||A.loadChildren)&&A.outlet&&A.outlet!==Ee&&(A.component=Xa),A}function Fr(R){return R.outlet||Ee}function Ns(R){if(!R)return null;if(R.routeConfig?._injector)return R.routeConfig._injector;for(let k=R.parent;k;k=k.parent){const A=k.routeConfig;if(A?._loadedInjector)return A._loadedInjector;if(A?._injector)return A._injector}return null}class Ls{constructor(k,A,L,V,te){this.routeReuseStrategy=k,this.futureState=A,this.currState=L,this.forwardEvent=V,this.inputBindingEnabled=te}activate(k){const A=this.futureState._root,L=this.currState?this.currState._root:null;this.deactivateChildRoutes(A,L,k),eo(this.futureState.root),this.activateChildRoutes(A,L,k)}deactivateChildRoutes(k,A,L){const V=As(A);k.children.forEach(te=>{const he=te.value.outlet;this.deactivateRoutes(te,V[he],L),delete V[he]}),Object.values(V).forEach(te=>{this.deactivateRouteAndItsChildren(te,L)})}deactivateRoutes(k,A,L){const V=k.value,te=A?A.value:null;if(V===te)if(V.component){const he=L.getContext(V.outlet);he&&this.deactivateChildRoutes(k,A,he.children)}else this.deactivateChildRoutes(k,A,L);else te&&this.deactivateRouteAndItsChildren(A,L)}deactivateRouteAndItsChildren(k,A){k.value.component&&this.routeReuseStrategy.shouldDetach(k.value.snapshot)?this.detachAndStoreRouteSubtree(k,A):this.deactivateRouteAndOutlet(k,A)}detachAndStoreRouteSubtree(k,A){const L=A.getContext(k.value.outlet),V=L&&k.value.component?L.children:A,te=As(k);for(const he of Object.keys(te))this.deactivateRouteAndItsChildren(te[he],V);if(L&&L.outlet){const he=L.outlet.detach(),Qe=L.children.onOutletDeactivated();this.routeReuseStrategy.store(k.value.snapshot,{componentRef:he,route:k,contexts:Qe})}}deactivateRouteAndOutlet(k,A){const L=A.getContext(k.value.outlet),V=L&&k.value.component?L.children:A,te=As(k);for(const he of Object.keys(te))this.deactivateRouteAndItsChildren(te[he],V);L&&(L.outlet&&(L.outlet.deactivate(),L.children.onOutletDeactivated()),L.attachRef=null,L.route=null)}activateChildRoutes(k,A,L){const V=As(A);k.children.forEach(te=>{this.activateRoutes(te,V[te.value.outlet],L),this.forwardEvent(new _o(te.value.snapshot))}),k.children.length&&this.forwardEvent(new zs(k.value.snapshot))}activateRoutes(k,A,L){const V=k.value,te=A?A.value:null;if(eo(V),V===te)if(V.component){const he=L.getOrCreateContext(V.outlet);this.activateChildRoutes(k,A,he.children)}else this.activateChildRoutes(k,A,L);else if(V.component){const he=L.getOrCreateContext(V.outlet);if(this.routeReuseStrategy.shouldAttach(V.snapshot)){const Qe=this.routeReuseStrategy.retrieve(V.snapshot);this.routeReuseStrategy.store(V.snapshot,null),he.children.onOutletReAttached(Qe.contexts),he.attachRef=Qe.componentRef,he.route=Qe.route.value,he.outlet&&he.outlet.attach(Qe.componentRef,Qe.route.value),eo(Qe.route.value),this.activateChildRoutes(k,null,he.children)}else{const Qe=Ns(V.snapshot);he.attachRef=null,he.route=V,he.injector=Qe,he.outlet&&he.outlet.activateWith(V,he.injector),this.activateChildRoutes(k,null,he.children)}}else this.activateChildRoutes(k,null,L)}}class yl{constructor(k){this.path=k,this.route=this.path[this.path.length-1]}}class yo{constructor(k,A){this.component=k,this.route=A}}function ta(R,k,A){const L=R._root;return Mo(L,k?k._root:null,A,[L.value])}function na(R,k){const A=Symbol(),L=k.get(R,A);return L===A?"function"!=typeof R||(0,E.Z0I)(R)?k.get(R):R:L}function Mo(R,k,A,L,V={canDeactivateChecks:[],canActivateChecks:[]}){const te=As(k);return R.children.forEach(he=>{(function xo(R,k,A,L,V={canDeactivateChecks:[],canActivateChecks:[]}){const te=R.value,he=k?k.value:null,Qe=A?A.getContext(R.value.outlet):null;if(he&&te.routeConfig===he.routeConfig){const Ze=function Ma(R,k,A){if("function"==typeof A)return A(R,k);switch(A){case"pathParamsChange":return!ts(R.url,k.url);case"pathParamsOrQueryParamsChange":return!ts(R.url,k.url)||!jn(R.queryParams,k.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Cr(R,k)||!jn(R.queryParams,k.queryParams);default:return!Cr(R,k)}}(he,te,te.routeConfig.runGuardsAndResolvers);Ze?V.canActivateChecks.push(new yl(L)):(te.data=he.data,te._resolvedData=he._resolvedData),Mo(R,k,te.component?Qe?Qe.children:null:A,L,V),Ze&&Qe&&Qe.outlet&&Qe.outlet.isActivated&&V.canDeactivateChecks.push(new yo(Qe.outlet.component,he))}else he&&ko(k,Qe,V),V.canActivateChecks.push(new yl(L)),Mo(R,null,te.component?Qe?Qe.children:null:A,L,V)})(he,te[he.value.outlet],A,L.concat([he.value]),V),delete te[he.value.outlet]}),Object.entries(te).forEach(([he,Qe])=>ko(Qe,A.getContext(he),V)),V}function ko(R,k,A){const L=As(R),V=R.value;Object.entries(L).forEach(([te,he])=>{ko(he,V.component?k?k.children.getContext(te):null:k,A)}),A.canDeactivateChecks.push(new yo(V.component&&k&&k.outlet&&k.outlet.isActivated?k.outlet.component:null,V))}function Ar(R){return"function"==typeof R}function Sn(R){return R instanceof bt.K||"EmptyError"===R?.name}const Gi=Symbol("INITIAL_VALUE");function vs(){return(0,Or.w)(R=>Et(R.map(k=>k.pipe((0,_r.q)(1),(0,tn.O)(Gi)))).pipe((0,On.U)(k=>{for(const A of k)if(!0!==A){if(A===Gi)return Gi;if(!1===A||A instanceof wn)return A}return!0}),(0,Bt.h)(k=>k!==Gi),(0,_r.q)(1)))}function ma(R){return(0,He.z)((0,Fe.b)(k=>{if(sn(k))throw gs(0,k)}),(0,On.U)(k=>!0===k))}class Vo{constructor(k){this.segmentGroup=k||null}}class el{constructor(k){this.urlTree=k}}function Io(R){return Pe(new Vo(R))}function Uu(R){return Pe(new el(R))}class tl{constructor(k,A){this.urlSerializer=k,this.urlTree=A}noMatchError(k){return new E.vHH(4002,!1)}lineralizeSegments(k,A){let L=[],V=A.root;for(;;){if(L=L.concat(V.segments),0===V.numberOfChildren)return(0,Te.of)(L);if(V.numberOfChildren>1||!V.children[Ee])return Pe(new E.vHH(4e3,!1));V=V.children[Ee]}}applyRedirectCommands(k,A,L){return this.applyRedirectCreateUrlTree(A,this.urlSerializer.parse(A),k,L)}applyRedirectCreateUrlTree(k,A,L,V){const te=this.createSegmentGroup(k,A.root,L,V);return new wn(te,this.createQueryParams(A.queryParams,this.urlTree.queryParams),A.fragment)}createQueryParams(k,A){const L={};return Object.entries(k).forEach(([V,te])=>{if("string"==typeof te&&te.startsWith(":")){const Qe=te.substring(1);L[V]=A[Qe]}else L[V]=te}),L}createSegmentGroup(k,A,L,V){const te=this.createSegments(k,A.segments,L,V);let he={};return Object.entries(A.children).forEach(([Qe,Ze])=>{he[Qe]=this.createSegmentGroup(k,Ze,L,V)}),new Dn(te,he)}createSegments(k,A,L,V){return A.map(te=>te.path.startsWith(":")?this.findPosParam(k,te,V):this.findOrReturn(te,L))}findPosParam(k,A,L){const V=L[A.path.substring(1)];if(!V)throw new E.vHH(4001,!1);return V}findOrReturn(k,A){let L=0;for(const V of A){if(V.path===k.path)return A.splice(L),V;L++}return k}}const Bl={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function ka(R,k,A,L,V){const te=vl(R,k,A);return te.matched?(L=function Vn(R,k){return R.providers&&!R._injector&&(R._injector=(0,E.MMx)(R.providers,k,`Route: ${R.path}`)),R._injector??k}(k,L),function hu(R,k,A,L){const V=k.canMatch;if(!V||0===V.length)return(0,Te.of)(!0);const te=V.map(he=>{const Qe=na(he,R);return ln(function oe(R){return R&&Ar(R.canMatch)}(Qe)?Qe.canMatch(k,A):R.runInContext(()=>Qe(k,A)))});return(0,Te.of)(te).pipe(vs(),ma())}(L,k,A).pipe((0,On.U)(he=>!0===he?te:{...Bl}))):(0,Te.of)(te)}function vl(R,k,A){if(""===k.path)return"full"===k.pathMatch&&(R.hasChildren()||A.length>0)?{...Bl}:{matched:!0,consumedSegments:[],remainingSegments:A,parameters:{},positionalParamSegments:{}};const V=(k.matcher||pt)(A,R,k);if(!V)return{...Bl};const te={};Object.entries(V.posParams??{}).forEach(([Qe,Ze])=>{te[Qe]=Ze.path});const he=V.consumed.length>0?{...te,...V.consumed[V.consumed.length-1].parameters}:te;return{matched:!0,consumedSegments:V.consumed,remainingSegments:A.slice(V.consumed.length),parameters:he,positionalParamSegments:V.posParams??{}}}function oo(R,k,A,L){return A.length>0&&function Uo(R,k,A){return A.some(L=>Cc(R,k,L)&&Fr(L)!==Ee)}(R,A,L)?{segmentGroup:new Dn(k,Dc(L,new Dn(A,R.children))),slicedSegments:[]}:0===A.length&&function hh(R,k,A){return A.some(L=>Cc(R,k,L))}(R,A,L)?{segmentGroup:new Dn(R.segments,Il(R,0,A,L,R.children)),slicedSegments:A}:{segmentGroup:new Dn(R.segments,R.children),slicedSegments:A}}function Il(R,k,A,L,V){const te={};for(const he of L)if(Cc(R,A,he)&&!V[Fr(he)]){const Qe=new Dn([],{});te[Fr(he)]=Qe}return{...V,...te}}function Dc(R,k){const A={};A[Ee]=k;for(const L of R)if(""===L.path&&Fr(L)!==Ee){const V=new Dn([],{});A[Fr(L)]=V}return A}function Cc(R,k,A){return(!(R.hasChildren()||k.length>0)||"full"!==A.pathMatch)&&""===A.path}class ao{constructor(k,A,L,V,te,he,Qe){this.injector=k,this.configLoader=A,this.rootComponentType=L,this.config=V,this.urlTree=te,this.paramsInheritanceStrategy=he,this.urlSerializer=Qe,this.allowRedirects=!0,this.applyRedirects=new tl(this.urlSerializer,this.urlTree)}noMatchError(k){return new E.vHH(4002,!1)}recognize(){const k=oo(this.urlTree.root,[],[],this.config).segmentGroup;return this.processSegmentGroup(this.injector,this.config,k,Ee).pipe(Ue(A=>{if(A instanceof el)return this.allowRedirects=!1,this.urlTree=A.urlTree,this.match(A.urlTree);throw A instanceof Vo?this.noMatchError(A):A}),(0,On.U)(A=>{const L=new Zi([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},Ee,this.rootComponentType,null,{}),V=new _i(L,A),te=new ei("",V),he=function In(R,k,A=null,L=null){return tr(qt(R),k,A,L)}(L,[],this.urlTree.queryParams,this.urlTree.fragment);return he.queryParams=this.urlTree.queryParams,te.url=this.urlSerializer.serialize(he),this.inheritParamsAndData(te._root),{state:te,tree:he}}))}match(k){return this.processSegmentGroup(this.injector,this.config,k.root,Ee).pipe(Ue(L=>{throw L instanceof Vo?this.noMatchError(L):L}))}inheritParamsAndData(k){const A=k.value,L=nr(A,this.paramsInheritanceStrategy);A.params=Object.freeze(L.params),A.data=Object.freeze(L.data),k.children.forEach(V=>this.inheritParamsAndData(V))}processSegmentGroup(k,A,L,V){return 0===L.segments.length&&L.hasChildren()?this.processChildren(k,A,L):this.processSegment(k,A,L,L.segments,V,!0)}processChildren(k,A,L){const V=[];for(const te of Object.keys(L.children))"primary"===te?V.unshift(te):V.push(te);return(0,Ne.D)(V).pipe(Ke(te=>{const he=L.children[te],Qe=function Xi(R,k){const A=R.filter(L=>Fr(L)===k);return A.push(...R.filter(L=>Fr(L)!==k)),A}(A,te);return this.processSegmentGroup(k,Qe,he,te)}),(0,Xe.R)((te,he)=>(te.push(...he),te)),(0,Ft.d)(null),function Ut(R,k){const A=arguments.length>=2;return L=>L.pipe(R?(0,Bt.h)((V,te)=>R(V,te,L)):qe.y,Rt(1),A?(0,Ft.d)(k):(0,hr.T)(()=>new bt.K))}(),(0,be.z)(te=>{if(null===te)return Io(L);const he=lo(te);return function Fa(R){R.sort((k,A)=>k.value.outlet===Ee?-1:A.value.outlet===Ee?1:k.value.outlet.localeCompare(A.value.outlet))}(he),(0,Te.of)(he)}))}processSegment(k,A,L,V,te,he){return(0,Ne.D)(A).pipe(Ke(Qe=>this.processSegmentAgainstRoute(Qe._injector??k,A,Qe,L,V,te,he).pipe(Ue(Ze=>{if(Ze instanceof Vo)return(0,Te.of)(null);throw Ze}))),(0,Se.P)(Qe=>!!Qe),Ue(Qe=>{if(Sn(Qe))return function Ac(R,k,A){return 0===k.length&&!R.children[A]}(L,V,te)?(0,Te.of)([]):Io(L);throw Qe}))}processSegmentAgainstRoute(k,A,L,V,te,he,Qe){return function Ul(R,k,A,L){return!!(Fr(R)===L||L!==Ee&&Cc(k,A,R))&&("**"===R.path||vl(k,R,A).matched)}(L,V,te,he)?void 0===L.redirectTo?this.matchSegmentAgainstRoute(k,V,L,te,he,Qe):Qe&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(k,V,A,L,te,he):Io(V):Io(V)}expandSegmentAgainstRouteUsingRedirect(k,A,L,V,te,he){return"**"===V.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(k,L,V,he):this.expandRegularSegmentAgainstRouteUsingRedirect(k,A,L,V,te,he)}expandWildCardWithParamsAgainstRouteUsingRedirect(k,A,L,V){const te=this.applyRedirects.applyRedirectCommands([],L.redirectTo,{});return L.redirectTo.startsWith("/")?Uu(te):this.applyRedirects.lineralizeSegments(L,te).pipe((0,be.z)(he=>{const Qe=new Dn(he,{});return this.processSegment(k,A,Qe,he,V,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(k,A,L,V,te,he){const{matched:Qe,consumedSegments:Ze,remainingSegments:Ht,positionalParamSegments:Qn}=vl(A,V,te);if(!Qe)return Io(A);const Wr=this.applyRedirects.applyRedirectCommands(Ze,V.redirectTo,Qn);return V.redirectTo.startsWith("/")?Uu(Wr):this.applyRedirects.lineralizeSegments(V,Wr).pipe((0,be.z)(kn=>this.processSegment(k,L,A,kn.concat(Ht),he,!1)))}matchSegmentAgainstRoute(k,A,L,V,te,he){let Qe;if("**"===L.path){const Ze=V.length>0?Mt(V).parameters:{},Ht=new Zi(V,Ze,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,ss(L),Fr(L),L.component??L._loadedComponent??null,L,fu(L));Qe=(0,Te.of)({snapshot:Ht,consumedSegments:[],remainingSegments:[]}),A.children={}}else Qe=ka(A,L,V,k).pipe((0,On.U)(({matched:Ze,consumedSegments:Ht,remainingSegments:Qn,parameters:Wr})=>Ze?{snapshot:new Zi(Ht,Wr,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,ss(L),Fr(L),L.component??L._loadedComponent??null,L,fu(L)),consumedSegments:Ht,remainingSegments:Qn}:null));return Qe.pipe((0,Or.w)(Ze=>null===Ze?Io(A):this.getChildConfig(k=L._injector??k,L,V).pipe((0,Or.w)(({routes:Ht})=>{const Qn=L._loadedInjector??k,{snapshot:Wr,consumedSegments:kn,remainingSegments:zi}=Ze,{segmentGroup:gi,slicedSegments:Gu}=oo(A,kn,zi,Ht);if(0===Gu.length&&gi.hasChildren())return this.processChildren(Qn,Ht,gi).pipe((0,On.U)(Ba=>null===Ba?null:[new _i(Wr,Ba)]));if(0===Ht.length&&0===Gu.length)return(0,Te.of)([new _i(Wr,[])]);const os=Fr(L)===te;return this.processSegment(Qn,Ht,gi,Gu,os?Ee:te,!0).pipe((0,On.U)(Ba=>[new _i(Wr,Ba)]))}))))}getChildConfig(k,A,L){return A.children?(0,Te.of)({routes:A.children,injector:k}):A.loadChildren?void 0!==A._loadedRoutes?(0,Te.of)({routes:A._loadedRoutes,injector:A._loadedInjector}):function Is(R,k,A,L){const V=k.canLoad;if(void 0===V||0===V.length)return(0,Te.of)(!0);const te=V.map(he=>{const Qe=na(he,R);return ln(function xa(R){return R&&Ar(R.canLoad)}(Qe)?Qe.canLoad(k,A):R.runInContext(()=>Qe(k,A)))});return(0,Te.of)(te).pipe(vs(),ma())}(k,A,L).pipe((0,be.z)(V=>V?this.configLoader.loadChildren(k,A).pipe((0,Fe.b)(te=>{A._loadedRoutes=te.routes,A._loadedInjector=te.injector})):function Vl(R){return Pe(to(!1,3))}())):(0,Te.of)({routes:[],injector:k})}}function Sc(R){const k=R.value.routeConfig;return k&&""===k.path}function lo(R){const k=[],A=new Set;for(const L of R){if(!Sc(L)){k.push(L);continue}const V=k.find(te=>L.value.routeConfig===te.value.routeConfig);void 0!==V?(V.children.push(...L.children),A.add(V)):k.push(L)}for(const L of A){const V=lo(L.children);k.push(new _i(L.value,V))}return k.filter(L=>!A.has(L))}function ss(R){return R.data||{}}function fu(R){return R.resolve||{}}function ct(R){return"string"==typeof R.title||null===R.title}function dn(R){return(0,Or.w)(k=>{const A=R(k);return A?(0,Ne.D)(A).pipe((0,On.U)(()=>k)):(0,Te.of)(k)})}const ir=new E.OlP("ROUTES");let yr=(()=>{class R{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=(0,E.f3M)(E.Sil)}loadComponent(A){if(this.componentLoaders.get(A))return this.componentLoaders.get(A);if(A._loadedComponent)return(0,Te.of)(A._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(A);const L=ln(A.loadComponent()).pipe((0,On.U)(oi),(0,Fe.b)(te=>{this.onLoadEndListener&&this.onLoadEndListener(A),A._loadedComponent=te}),Yt(()=>{this.componentLoaders.delete(A)})),V=new Ot(L,()=>new wt.x).pipe(de());return this.componentLoaders.set(A,V),V}loadChildren(A,L){if(this.childrenLoaders.get(L))return this.childrenLoaders.get(L);if(L._loadedRoutes)return(0,Te.of)({routes:L._loadedRoutes,injector:L._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(L);const te=function Xn(R,k,A,L){return ln(R.loadChildren()).pipe((0,On.U)(oi),(0,be.z)(V=>V instanceof E.YKP||Array.isArray(V)?(0,Te.of)(V):(0,Ne.D)(k.compileModuleAsync(V))),(0,On.U)(V=>{L&&L(R);let te,he,Qe=!1;return Array.isArray(V)?(he=V,!0):(te=V.create(A).injector,he=te.get(ir,[],{optional:!0,self:!0}).flat()),{routes:he.map(_l),injector:te}}))}(L,this.compiler,A,this.onLoadEndListener).pipe(Yt(()=>{this.childrenLoaders.delete(L)})),he=new Ot(te,()=>new wt.x).pipe(de());return this.childrenLoaders.set(L,he),he}static#e=this.\u0275fac=function(L){return new(L||R)};static#t=this.\u0275prov=E.Yz7({token:R,factory:R.\u0275fac,providedIn:"root"})}return R})();function oi(R){return function bn(R){return R&&"object"==typeof R&&"default"in R}(R)?R.default:R}let kr=(()=>{class R{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new wt.x,this.transitionAbortSubject=new wt.x,this.configLoader=(0,E.f3M)(yr),this.environmentInjector=(0,E.f3M)(E.lqb),this.urlSerializer=(0,E.f3M)(dr),this.rootContexts=(0,E.f3M)(ns),this.inputBindingEnabled=null!==(0,E.f3M)(so,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>(0,Te.of)(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=V=>this.events.next(new Po(V)),this.configLoader.onLoadStartListener=V=>this.events.next(new Qa(V))}complete(){this.transitions?.complete()}handleNavigationRequest(A){const L=++this.navigationId;this.transitions?.next({...this.transitions.value,...A,id:L})}setupNavigations(A,L,V){return this.transitions=new ke.X({id:0,currentUrlTree:L,currentRawUrl:L,currentBrowserUrl:L,extractedUrl:A.urlHandlingStrategy.extract(L),urlAfterRedirects:A.urlHandlingStrategy.extract(L),rawUrl:L,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:fr,restoredState:null,currentSnapshot:V.snapshot,targetSnapshot:null,currentRouterState:V,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe((0,Bt.h)(te=>0!==te.id),(0,On.U)(te=>({...te,extractedUrl:A.urlHandlingStrategy.extract(te.rawUrl)})),(0,Or.w)(te=>{this.currentTransition=te;let he=!1,Qe=!1;return(0,Te.of)(te).pipe((0,Fe.b)(Ze=>{this.currentNavigation={id:Ze.id,initialUrl:Ze.rawUrl,extractedUrl:Ze.extractedUrl,trigger:Ze.source,extras:Ze.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),(0,Or.w)(Ze=>{const Ht=Ze.currentBrowserUrl.toString(),Qn=!A.navigated||Ze.extractedUrl.toString()!==Ht||Ht!==Ze.currentUrlTree.toString();if(!Qn&&"reload"!==(Ze.extras.onSameUrlNavigation??A.onSameUrlNavigation)){const kn="";return this.events.next(new qi(Ze.id,this.urlSerializer.serialize(Ze.rawUrl),kn,0)),Ze.resolve(null),$e.E}if(A.urlHandlingStrategy.shouldProcessUrl(Ze.rawUrl))return(0,Te.of)(Ze).pipe((0,Or.w)(kn=>{const zi=this.transitions?.getValue();return this.events.next(new ci(kn.id,this.urlSerializer.serialize(kn.extractedUrl),kn.source,kn.restoredState)),zi!==this.transitions?.getValue()?$e.E:Promise.resolve(kn)}),function O(R,k,A,L,V,te){return(0,be.z)(he=>function nl(R,k,A,L,V,te,he="emptyOnly"){return new ao(R,k,A,L,V,he,te).recognize()}(R,k,A,L,he.extractedUrl,V,te).pipe((0,On.U)(({state:Qe,tree:Ze})=>({...he,targetSnapshot:Qe,urlAfterRedirects:Ze}))))}(this.environmentInjector,this.configLoader,this.rootComponentType,A.config,this.urlSerializer,A.paramsInheritanceStrategy),(0,Fe.b)(kn=>{te.targetSnapshot=kn.targetSnapshot,te.urlAfterRedirects=kn.urlAfterRedirects,this.currentNavigation={...this.currentNavigation,finalUrl:kn.urlAfterRedirects};const zi=new di(kn.id,this.urlSerializer.serialize(kn.extractedUrl),this.urlSerializer.serialize(kn.urlAfterRedirects),kn.targetSnapshot);this.events.next(zi)}));if(Qn&&A.urlHandlingStrategy.shouldProcessUrl(Ze.currentRawUrl)){const{id:kn,extractedUrl:zi,source:gi,restoredState:Gu,extras:os}=Ze,Ba=new ci(kn,this.urlSerializer.serialize(zi),gi,Gu);this.events.next(Ba);const va=xr(0,this.rootComponentType).snapshot;return this.currentTransition=te={...Ze,targetSnapshot:va,urlAfterRedirects:zi,extras:{...os,skipLocationChange:!1,replaceUrl:!1}},(0,Te.of)(te)}{const kn="";return this.events.next(new qi(Ze.id,this.urlSerializer.serialize(Ze.extractedUrl),kn,1)),Ze.resolve(null),$e.E}}),(0,Fe.b)(Ze=>{const Ht=new du(Ze.id,this.urlSerializer.serialize(Ze.extractedUrl),this.urlSerializer.serialize(Ze.urlAfterRedirects),Ze.targetSnapshot);this.events.next(Ht)}),(0,On.U)(Ze=>(this.currentTransition=te={...Ze,guards:ta(Ze.targetSnapshot,Ze.currentSnapshot,this.rootContexts)},te)),function vo(R,k){return(0,be.z)(A=>{const{targetSnapshot:L,currentSnapshot:V,guards:{canActivateChecks:te,canDeactivateChecks:he}}=A;return 0===he.length&&0===te.length?(0,Te.of)({...A,guardsResult:!0}):function Fo(R,k,A,L){return(0,Ne.D)(R).pipe((0,be.z)(V=>function Vs(R,k,A,L,V){const te=k&&k.routeConfig?k.routeConfig.canDeactivate:null;if(!te||0===te.length)return(0,Te.of)(!0);const he=te.map(Qe=>{const Ze=Ns(k)??V,Ht=na(Qe,Ze);return ln(function j(R){return R&&Ar(R.canDeactivate)}(Ht)?Ht.canDeactivate(R,k,A,L):Ze.runInContext(()=>Ht(R,k,A,L))).pipe((0,Se.P)())});return(0,Te.of)(he).pipe(vs())}(V.component,V.route,A,k,L)),(0,Se.P)(V=>!0!==V,!0))}(he,L,V,R).pipe((0,be.z)(Qe=>Qe&&function ra(R){return"boolean"==typeof R}(Qe)?function es(R,k,A,L){return(0,Ne.D)(k).pipe(Ke(V=>(0,jt.z)(function Lo(R,k){return null!==R&&k&&k(new Ja(R)),(0,Te.of)(!0)}(V.route.parent,L),function is(R,k){return null!==R&&k&&k(new ea(R)),(0,Te.of)(!0)}(V.route,L),function Ci(R,k,A){const L=k[k.length-1],te=k.slice(0,k.length-1).reverse().map(he=>function Bu(R){const k=R.routeConfig?R.routeConfig.canActivateChild:null;return k&&0!==k.length?{node:R,guards:k}:null}(he)).filter(he=>null!==he).map(he=>_e(()=>{const Qe=he.guards.map(Ze=>{const Ht=Ns(he.node)??A,Qn=na(Ze,Ht);return ln(function K(R){return R&&Ar(R.canActivateChild)}(Qn)?Qn.canActivateChild(L,R):Ht.runInContext(()=>Qn(L,R))).pipe((0,Se.P)())});return(0,Te.of)(Qe).pipe(vs())}));return(0,Te.of)(te).pipe(vs())}(R,V.path,A),function Ll(R,k,A){const L=k.routeConfig?k.routeConfig.canActivate:null;if(!L||0===L.length)return(0,Te.of)(!0);const V=L.map(te=>_e(()=>{const he=Ns(k)??A,Qe=na(te,he);return ln(function q(R){return R&&Ar(R.canActivate)}(Qe)?Qe.canActivate(k,R):he.runInContext(()=>Qe(k,R))).pipe((0,Se.P)())}));return(0,Te.of)(V).pipe(vs())}(R,V.route,A))),(0,Se.P)(V=>!0!==V,!0))}(L,te,R,k):(0,Te.of)(Qe)),(0,On.U)(Qe=>({...A,guardsResult:Qe})))})}(this.environmentInjector,Ze=>this.events.next(Ze)),(0,Fe.b)(Ze=>{if(te.guardsResult=Ze.guardsResult,sn(Ze.guardsResult))throw gs(0,Ze.guardsResult);const Ht=new Ki(Ze.id,this.urlSerializer.serialize(Ze.extractedUrl),this.urlSerializer.serialize(Ze.urlAfterRedirects),Ze.targetSnapshot,!!Ze.guardsResult);this.events.next(Ht)}),(0,Bt.h)(Ze=>!!Ze.guardsResult||(this.cancelNavigationTransition(Ze,"",3),!1)),dn(Ze=>{if(Ze.guards.canActivateChecks.length)return(0,Te.of)(Ze).pipe((0,Fe.b)(Ht=>{const Qn=new Xo(Ht.id,this.urlSerializer.serialize(Ht.extractedUrl),this.urlSerializer.serialize(Ht.urlAfterRedirects),Ht.targetSnapshot);this.events.next(Qn)}),(0,Or.w)(Ht=>{let Qn=!1;return(0,Te.of)(Ht).pipe(function J(R,k){return(0,be.z)(A=>{const{targetSnapshot:L,guards:{canActivateChecks:V}}=A;if(!V.length)return(0,Te.of)(A);let te=0;return(0,Ne.D)(V).pipe(Ke(he=>function H(R,k,A,L){const V=R.routeConfig,te=R._resolve;return void 0!==V?.title&&!ct(V)&&(te[xe]=V.title),function Y(R,k,A,L){const V=function ve(R){return[...Object.keys(R),...Object.getOwnPropertySymbols(R)]}(R);if(0===V.length)return(0,Te.of)({});const te={};return(0,Ne.D)(V).pipe((0,be.z)(he=>function et(R,k,A,L){const V=Ns(k)??L,te=na(R,V);return ln(te.resolve?te.resolve(k,A):V.runInContext(()=>te(k,A)))}(R[he],k,A,L).pipe((0,Se.P)(),(0,Fe.b)(Qe=>{te[he]=Qe}))),Rt(1),(0,Kn.h)(te),Ue(he=>Sn(he)?$e.E:Pe(he)))}(te,R,k,L).pipe((0,On.U)(he=>(R._resolvedData=he,R.data=nr(R,A).resolve,V&&ct(V)&&(R.data[xe]=V.title),null)))}(he.route,L,R,k)),(0,Fe.b)(()=>te++),Rt(1),(0,be.z)(he=>te===V.length?(0,Te.of)(A):$e.E))})}(A.paramsInheritanceStrategy,this.environmentInjector),(0,Fe.b)({next:()=>Qn=!0,complete:()=>{Qn||this.cancelNavigationTransition(Ht,"",2)}}))}),(0,Fe.b)(Ht=>{const Qn=new Za(Ht.id,this.urlSerializer.serialize(Ht.extractedUrl),this.urlSerializer.serialize(Ht.urlAfterRedirects),Ht.targetSnapshot);this.events.next(Qn)}))}),dn(Ze=>{const Ht=Qn=>{const Wr=[];Qn.routeConfig?.loadComponent&&!Qn.routeConfig._loadedComponent&&Wr.push(this.configLoader.loadComponent(Qn.routeConfig).pipe((0,Fe.b)(kn=>{Qn.component=kn}),(0,On.U)(()=>{})));for(const kn of Qn.children)Wr.push(...Ht(kn));return Wr};return Et(Ht(Ze.targetSnapshot.root)).pipe((0,Ft.d)(),(0,_r.q)(1))}),dn(()=>this.afterPreactivation()),(0,On.U)(Ze=>{const Ht=function pi(R,k,A){const L=ar(R,k._root,A?A._root:void 0);return new Ss(L,k)}(A.routeReuseStrategy,Ze.targetSnapshot,Ze.currentRouterState);return this.currentTransition=te={...Ze,targetRouterState:Ht},te}),(0,Fe.b)(()=>{this.events.next(new ks)}),((R,k,A,L)=>(0,On.U)(V=>(new Ls(k,V.targetRouterState,V.currentRouterState,A,L).activate(R),V)))(this.rootContexts,A.routeReuseStrategy,Ze=>this.events.next(Ze),this.inputBindingEnabled),(0,_r.q)(1),(0,Fe.b)({next:Ze=>{he=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new zr(Ze.id,this.urlSerializer.serialize(Ze.extractedUrl),this.urlSerializer.serialize(Ze.urlAfterRedirects))),A.titleStrategy?.updateTitle(Ze.targetRouterState.snapshot),Ze.resolve(!0)},complete:()=>{he=!0}}),(0,Ln.R)(this.transitionAbortSubject.pipe((0,Fe.b)(Ze=>{throw Ze}))),Yt(()=>{he||Qe||this.cancelNavigationTransition(te,"",1),this.currentNavigation?.id===te.id&&(this.currentNavigation=null)}),Ue(Ze=>{if(Qe=!0,_s(Ze))this.events.next(new Cs(te.id,this.urlSerializer.serialize(te.extractedUrl),Ze.message,Ze.cancellationCode)),function ms(R){return _s(R)&&sn(R.url)}(Ze)?this.events.next(new Yn(Ze.url)):te.resolve(!1);else{this.events.next(new io(te.id,this.urlSerializer.serialize(te.extractedUrl),Ze,te.targetSnapshot??void 0));try{te.resolve(A.errorHandler(Ze))}catch(Ht){te.reject(Ht)}}return $e.E}))}))}cancelNavigationTransition(A,L,V){const te=new Cs(A.id,this.urlSerializer.serialize(A.extractedUrl),L,V);this.events.next(te),A.resolve(!1)}static#e=this.\u0275fac=function(L){return new(L||R)};static#t=this.\u0275prov=E.Yz7({token:R,factory:R.\u0275fac,providedIn:"root"})}return R})();function Ai(R){return R!==fr}let Eo=(()=>{class R{buildTitle(A){let L,V=A.root;for(;void 0!==V;)L=this.getResolvedTitleForRoute(V)??L,V=V.children.find(te=>te.outlet===Ee);return L}getResolvedTitleForRoute(A){return A.data[xe]}static#e=this.\u0275fac=function(L){return new(L||R)};static#t=this.\u0275prov=E.Yz7({token:R,factory:function(){return(0,E.f3M)(ia)},providedIn:"root"})}return R})(),ia=(()=>{class R extends Eo{constructor(A){super(),this.title=A}updateTitle(A){const L=this.buildTitle(A);void 0!==L&&this.title.setTitle(L)}static#e=this.\u0275fac=function(L){return new(L||R)(E.LFG($n.Dx))};static#t=this.\u0275prov=E.Yz7({token:R,factory:R.\u0275fac,providedIn:"root"})}return R})(),sa=(()=>{class R{static#e=this.\u0275fac=function(L){return new(L||R)};static#t=this.\u0275prov=E.Yz7({token:R,factory:function(){return(0,E.f3M)(_a)},providedIn:"root"})}return R})();class Es{shouldDetach(k){return!1}store(k,A){}shouldAttach(k){return!1}retrieve(k){return null}shouldReuseRoute(k,A){return k.routeConfig===A.routeConfig}}let _a=(()=>{class R extends Es{static#e=this.\u0275fac=function(){let A;return function(V){return(A||(A=E.n5z(R)))(V||R)}}();static#t=this.\u0275prov=E.Yz7({token:R,factory:R.\u0275fac,providedIn:"root"})}return R})();const ki=new E.OlP("",{providedIn:"root",factory:()=>({})});let El=(()=>{class R{static#e=this.\u0275fac=function(L){return new(L||R)};static#t=this.\u0275prov=E.Yz7({token:R,factory:function(){return(0,E.f3M)(fh)},providedIn:"root"})}return R})(),fh=(()=>{class R{shouldProcessUrl(A){return!0}extract(A){return A}merge(A,L){return A}static#e=this.\u0275fac=function(L){return new(L||R)};static#t=this.\u0275prov=E.Yz7({token:R,factory:R.\u0275fac,providedIn:"root"})}return R})();var ni=function(R){return R[R.COMPLETE=0]="COMPLETE",R[R.FAILED=1]="FAILED",R[R.REDIRECTING=2]="REDIRECTING",R}(ni||{});function Cd(R,k){R.events.pipe((0,Bt.h)(A=>A instanceof zr||A instanceof Cs||A instanceof io||A instanceof qi),(0,On.U)(A=>A instanceof zr||A instanceof qi?ni.COMPLETE:A instanceof Cs&&(0===A.code||1===A.code)?ni.REDIRECTING:ni.FAILED),(0,Bt.h)(A=>A!==ni.REDIRECTING),(0,_r.q)(1)).subscribe(()=>{k()})}function pu(R){throw R}function Ps(R,k,A){return k.parse("/")}const To={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},oa={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Os=(()=>{class R{get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){return"computed"!==this.canceledNavigationResolution?this.currentPageId:this.location.getState()?.\u0275routerPageId??this.currentPageId}get events(){return this._events}constructor(){this.disposed=!1,this.currentPageId=0,this.console=(0,E.f3M)(E.c2e),this.isNgZoneEnabled=!1,this._events=new wt.x,this.options=(0,E.f3M)(ki,{optional:!0})||{},this.pendingTasks=(0,E.f3M)(E.HDt),this.errorHandler=this.options.errorHandler||pu,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||Ps,this.navigated=!1,this.lastSuccessfulId=-1,this.urlHandlingStrategy=(0,E.f3M)(El),this.routeReuseStrategy=(0,E.f3M)(sa),this.titleStrategy=(0,E.f3M)(Eo),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=(0,E.f3M)(ir,{optional:!0})?.flat()??[],this.navigationTransitions=(0,E.f3M)(kr),this.urlSerializer=(0,E.f3M)(dr),this.location=(0,E.f3M)(Jn.Ye),this.componentInputBindingEnabled=!!(0,E.f3M)(so,{optional:!0}),this.eventsSubscription=new ot.w0,this.isNgZoneEnabled=(0,E.f3M)(E.R0b)instanceof E.R0b&&E.R0b.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new wn,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=xr(0,null),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe(A=>{this.lastSuccessfulId=A.id,this.currentPageId=this.browserPageId},A=>{this.console.warn(`Unhandled Navigation Error: ${A}`)}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){const A=this.navigationTransitions.events.subscribe(L=>{try{const{currentTransition:V}=this.navigationTransitions;if(null===V)return void(Tl(L)&&this._events.next(L));if(L instanceof ci)Ai(V.source)&&(this.browserUrlTree=V.extractedUrl);else if(L instanceof qi)this.rawUrlTree=V.rawUrl;else if(L instanceof di){if("eager"===this.urlUpdateStrategy){if(!V.extras.skipLocationChange){const te=this.urlHandlingStrategy.merge(V.urlAfterRedirects,V.rawUrl);this.setBrowserUrl(te,V)}this.browserUrlTree=V.urlAfterRedirects}}else if(L instanceof ks)this.currentUrlTree=V.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(V.urlAfterRedirects,V.rawUrl),this.routerState=V.targetRouterState,"deferred"===this.urlUpdateStrategy&&(V.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,V),this.browserUrlTree=V.urlAfterRedirects);else if(L instanceof Cs)0!==L.code&&1!==L.code&&(this.navigated=!0),(3===L.code||2===L.code)&&this.restoreHistory(V);else if(L instanceof Yn){const te=this.urlHandlingStrategy.merge(L.url,V.currentRawUrl),he={skipLocationChange:V.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||Ai(V.source)};this.scheduleNavigation(te,fr,null,he,{resolve:V.resolve,reject:V.reject,promise:V.promise})}L instanceof io&&this.restoreHistory(V,!0),L instanceof zr&&(this.navigated=!0),Tl(L)&&this._events.next(L)}catch(V){this.navigationTransitions.transitionAbortSubject.next(V)}});this.eventsSubscription.add(A)}resetRootComponentType(A){this.routerState.root.component=A,this.navigationTransitions.rootComponentType=A}initialNavigation(){if(this.setUpLocationChangeListener(),!this.navigationTransitions.hasRequestedNavigation){const A=this.location.getState();this.navigateToSyncWithBrowser(this.location.path(!0),fr,A)}}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(A=>{const L="popstate"===A.type?"popstate":"hashchange";"popstate"===L&&setTimeout(()=>{this.navigateToSyncWithBrowser(A.url,L,A.state)},0)}))}navigateToSyncWithBrowser(A,L,V){const te={replaceUrl:!0},he=V?.navigationId?V:null;if(V){const Ze={...V};delete Ze.navigationId,delete Ze.\u0275routerPageId,0!==Object.keys(Ze).length&&(te.state=Ze)}const Qe=this.parseUrl(A);this.scheduleNavigation(Qe,L,he,te)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(A){this.config=A.map(_l),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(A,L={}){const{relativeTo:V,queryParams:te,fragment:he,queryParamsHandling:Qe,preserveFragment:Ze}=L,Ht=Ze?this.currentUrlTree.fragment:he;let Wr,Qn=null;switch(Qe){case"merge":Qn={...this.currentUrlTree.queryParams,...te};break;case"preserve":Qn=this.currentUrlTree.queryParams;break;default:Qn=te||null}null!==Qn&&(Qn=this.removeEmptyProps(Qn));try{Wr=qt(V?V.snapshot:this.routerState.snapshot.root)}catch{("string"!=typeof A[0]||!A[0].startsWith("/"))&&(A=[]),Wr=this.currentUrlTree.root}return tr(Wr,A,Qn,Ht??null)}navigateByUrl(A,L={skipLocationChange:!1}){const V=sn(A)?A:this.parseUrl(A),te=this.urlHandlingStrategy.merge(V,this.rawUrlTree);return this.scheduleNavigation(te,fr,null,L)}navigate(A,L={skipLocationChange:!1}){return function Zr(R){for(let k=0;k<R.length;k++)if(null==R[k])throw new E.vHH(4008,!1)}(A),this.navigateByUrl(this.createUrlTree(A,L),L)}serializeUrl(A){return this.urlSerializer.serialize(A)}parseUrl(A){let L;try{L=this.urlSerializer.parse(A)}catch(V){L=this.malformedUriErrorHandler(V,this.urlSerializer,A)}return L}isActive(A,L){let V;if(V=!0===L?{...To}:!1===L?{...oa}:L,sn(A))return cn(this.currentUrlTree,A,V);const te=this.parseUrl(A);return cn(this.currentUrlTree,te,V)}removeEmptyProps(A){return Object.keys(A).reduce((L,V)=>{const te=A[V];return null!=te&&(L[V]=te),L},{})}scheduleNavigation(A,L,V,te,he){if(this.disposed)return Promise.resolve(!1);let Qe,Ze,Ht;he?(Qe=he.resolve,Ze=he.reject,Ht=he.promise):Ht=new Promise((Wr,kn)=>{Qe=Wr,Ze=kn});const Qn=this.pendingTasks.add();return Cd(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(Qn))}),this.navigationTransitions.handleNavigationRequest({source:L,restoredState:V,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,currentBrowserUrl:this.browserUrlTree,rawUrl:A,extras:te,resolve:Qe,reject:Ze,promise:Ht,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),Ht.catch(Wr=>Promise.reject(Wr))}setBrowserUrl(A,L){const V=this.urlSerializer.serialize(A);if(this.location.isCurrentPathEqualTo(V)||L.extras.replaceUrl){const he={...L.extras.state,...this.generateNgRouterState(L.id,this.browserPageId)};this.location.replaceState(V,"",he)}else{const te={...L.extras.state,...this.generateNgRouterState(L.id,this.browserPageId+1)};this.location.go(V,"",te)}}restoreHistory(A,L=!1){if("computed"===this.canceledNavigationResolution){const te=this.currentPageId-this.browserPageId;0!==te?this.location.historyGo(te):this.currentUrlTree===this.getCurrentNavigation()?.finalUrl&&0===te&&(this.resetState(A),this.browserUrlTree=A.currentUrlTree,this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(L&&this.resetState(A),this.resetUrlToCurrentUrlTree())}resetState(A){this.routerState=A.currentRouterState,this.currentUrlTree=A.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,A.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(A,L){return"computed"===this.canceledNavigationResolution?{navigationId:A,\u0275routerPageId:L}:{navigationId:A}}static#e=this.\u0275fac=function(L){return new(L||R)};static#t=this.\u0275prov=E.Yz7({token:R,factory:R.\u0275fac,providedIn:"root"})}return R})();function Tl(R){return!(R instanceof ks||R instanceof Yn)}let La=(()=>{class R{constructor(A,L,V,te,he,Qe){this.router=A,this.route=L,this.tabIndexAttribute=V,this.renderer=te,this.el=he,this.locationStrategy=Qe,this.href=null,this.commands=null,this.onChanges=new wt.x,this.preserveFragment=!1,this.skipLocationChange=!1,this.replaceUrl=!1;const Ze=he.nativeElement.tagName?.toLowerCase();this.isAnchorElement="a"===Ze||"area"===Ze,this.isAnchorElement?this.subscription=A.events.subscribe(Ht=>{Ht instanceof zr&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(A){null!=this.tabIndexAttribute||this.isAnchorElement||this.applyAttributeValue("tabindex",A)}ngOnChanges(A){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(A){null!=A?(this.commands=Array.isArray(A)?A:[A],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(A,L,V,te,he){return!!(null===this.urlTree||this.isAnchorElement&&(0!==A||L||V||te||he||"string"==typeof this.target&&"_self"!=this.target))||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!this.isAnchorElement)}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){this.href=null!==this.urlTree&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null;const A=null===this.href?null:(0,E.P3R)(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",A)}applyAttributeValue(A,L){const V=this.renderer,te=this.el.nativeElement;null!==L?V.setAttribute(te,A,L):V.removeAttribute(te,A)}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static#e=this.\u0275fac=function(L){return new(L||R)(E.Y36(Os),E.Y36(Cn),E.$8M("tabindex"),E.Y36(E.Qsj),E.Y36(E.SBq),E.Y36(Jn.S$))};static#t=this.\u0275dir=E.lG2({type:R,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(L,V){1&L&&E.NdJ("click",function(he){return V.onClick(he.button,he.ctrlKey,he.shiftKey,he.altKey,he.metaKey)}),2&L&&E.uIk("target",V.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:["preserveFragment","preserveFragment",E.VuI],skipLocationChange:["skipLocationChange","skipLocationChange",E.VuI],replaceUrl:["replaceUrl","replaceUrl",E.VuI],routerLink:"routerLink"},standalone:!0,features:[E.Xq5,E.TTD]})}return R})();class Tt{}let il=(()=>{class R{constructor(A,L,V,te,he){this.router=A,this.injector=V,this.preloadingStrategy=te,this.loader=he}setUpPreloading(){this.subscription=this.router.events.pipe((0,Bt.h)(A=>A instanceof zr),Ke(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(A,L){const V=[];for(const te of L){te.providers&&!te._injector&&(te._injector=(0,E.MMx)(te.providers,A,`Route: ${te.path}`));const he=te._injector??A,Qe=te._loadedInjector??he;(te.loadChildren&&!te._loadedRoutes&&void 0===te.canLoad||te.loadComponent&&!te._loadedComponent)&&V.push(this.preloadConfig(he,te)),(te.children||te._loadedRoutes)&&V.push(this.processRoutes(Qe,te.children??te._loadedRoutes))}return(0,Ne.D)(V).pipe((0,An.J)())}preloadConfig(A,L){return this.preloadingStrategy.preload(L,()=>{let V;V=L.loadChildren&&void 0===L.canLoad?this.loader.loadChildren(A,L):(0,Te.of)(null);const te=V.pipe((0,be.z)(he=>null===he?(0,Te.of)(void 0):(L._loadedRoutes=he.routes,L._loadedInjector=he.injector,this.processRoutes(he.injector??A,he.routes))));if(L.loadComponent&&!L._loadedComponent){const he=this.loader.loadComponent(L);return(0,Ne.D)([te,he]).pipe((0,An.J)())}return te})}static#e=this.\u0275fac=function(L){return new(L||R)(E.LFG(Os),E.LFG(E.Sil),E.LFG(E.lqb),E.LFG(Tt),E.LFG(yr))};static#t=this.\u0275prov=E.Yz7({token:R,factory:R.\u0275fac,providedIn:"root"})}return R})();const on=new E.OlP("");let vn=(()=>{class R{constructor(A,L,V,te,he={}){this.urlSerializer=A,this.transitions=L,this.viewportScroller=V,this.zone=te,this.options=he,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},he.scrollPositionRestoration=he.scrollPositionRestoration||"disabled",he.anchorScrolling=he.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(A=>{A instanceof ci?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=A.navigationTrigger,this.restoredId=A.restoredState?A.restoredState.navigationId:0):A instanceof zr?(this.lastId=A.id,this.scheduleScrollEvent(A,this.urlSerializer.parse(A.urlAfterRedirects).fragment)):A instanceof qi&&0===A.code&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(A,this.urlSerializer.parse(A.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(A=>{A instanceof Oa&&(A.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(A.position):A.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(A.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(A,L){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new Oa(A,"popstate"===this.lastSource?this.store[this.restoredId]:null,L))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static#e=this.\u0275fac=function(L){E.$Z()};static#t=this.\u0275prov=E.Yz7({token:R,factory:R.\u0275fac})}return R})();function nt(R,k){return{\u0275kind:R,\u0275providers:k}}function Hl(){const R=(0,E.f3M)(E.zs3);return k=>{const A=R.get(E.z2F);if(k!==A.components[0])return;const L=R.get(Os),V=R.get(sl);1===R.get(Kc)&&L.initialNavigation(),R.get(Dt,null,E.XFs.Optional)?.setUpPreloading(),R.get(on,null,E.XFs.Optional)?.init(),L.resetRootComponentType(A.componentTypes[0]),V.closed||(V.next(),V.complete(),V.unsubscribe())}}const sl=new E.OlP("",{factory:()=>new wt.x}),Kc=new E.OlP("",{providedIn:"root",factory:()=>1}),Dt=new E.OlP("");function br(R){return nt(0,[{provide:Dt,useExisting:il},{provide:Tt,useExisting:R}])}const un=new E.OlP("ROUTER_FORROOT_GUARD"),wo=[Jn.Ye,{provide:dr,useClass:Ti},Os,ns,{provide:Cn,useFactory:function zt(R){return R.routerState.root},deps:[Os]},yr,[]];function lr(){return new E.PXZ("Router",Os)}let Sd=(()=>{class R{constructor(A){}static forRoot(A,L){return{ngModule:R,providers:[wo,[],{provide:ir,multi:!0,useValue:A},{provide:un,useFactory:ya,deps:[[Os,new E.FiY,new E.tp0]]},{provide:ki,useValue:L||{}},L?.useHash?{provide:Jn.S$,useClass:Jn.Do}:{provide:Jn.S$,useClass:Jn.b0},{provide:on,useFactory:()=>{const R=(0,E.f3M)(Jn.EM),k=(0,E.f3M)(E.R0b),A=(0,E.f3M)(ki),L=(0,E.f3M)(kr),V=(0,E.f3M)(dr);return A.scrollOffset&&R.setOffset(A.scrollOffset),new vn(V,L,R,k,A)}},L?.preloadingStrategy?br(L.preloadingStrategy).\u0275providers:[],{provide:E.PXZ,multi:!0,useFactory:lr},L?.initialNavigation?aa(L):[],L?.bindToComponentInputs?nt(8,[Qi,{provide:so,useExisting:Qi}]).\u0275providers:[],[{provide:Gl,useFactory:Hl},{provide:E.tb,multi:!0,useExisting:Gl}]]}}static forChild(A){return{ngModule:R,providers:[{provide:ir,multi:!0,useValue:A}]}}static#e=this.\u0275fac=function(L){return new(L||R)(E.LFG(un,8))};static#t=this.\u0275mod=E.oAB({type:R});static#n=this.\u0275inj=E.cJS({})}return R})();function ya(R){return"guarded"}function aa(R){return["disabled"===R.initialNavigation?nt(3,[{provide:E.ip1,multi:!0,useFactory:()=>{const k=(0,E.f3M)(Os);return()=>{k.setUpLocationChangeListener()}}},{provide:Kc,useValue:2}]).\u0275providers:[],"enabledBlocking"===R.initialNavigation?nt(2,[{provide:Kc,useValue:0},{provide:E.ip1,multi:!0,deps:[E.zs3],useFactory:k=>{const A=k.get(Jn.V_,Promise.resolve());return()=>A.then(()=>new Promise(L=>{const V=k.get(Os),te=k.get(sl);Cd(V,()=>{L(!0)}),k.get(kr).afterPreactivation=()=>(L(!0),te.closed?(0,Te.of)(void 0):te),V.initialNavigation()}))}}]).\u0275providers:[]]}const Gl=new E.OlP("")},3106:(Wt,Je,G)=>{G.d(Je,{Z:()=>Et});var E=G(9058),me=G(4537),le=G(534),Oe=G(7879);class Ne{constructor(Ct,bt){this._delegate=Ct,this.firebase=bt,(0,le._addComponent)(Ct,new me.wA("app-compat",()=>this,"PUBLIC")),this.container=Ct.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Ct){this._delegate.automaticDataCollectionEnabled=Ct}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(Ct=>{this._delegate.checkDestroyed(),Ct()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,le.deleteApp)(this._delegate)))}_getService(Ct,bt=le._DEFAULT_ENTRY_NAME){var jt;this._delegate.checkDestroyed();const Re=this._delegate.container.getProvider(Ct);return!Re.isInitialized()&&"EXPLICIT"===(null===(jt=Re.getComponent())||void 0===jt?void 0:jt.instantiationMode)&&Re.initialize(),Re.getImmediate({identifier:bt})}_removeServiceInstance(Ct,bt=le._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(Ct).clearInstance(bt)}_addComponent(Ct){(0,le._addComponent)(this._delegate,Ct)}_addOrOverwriteComponent(Ct){(0,le._addOrOverwriteComponent)(this._delegate,Ct)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const ke=new E.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),ye=function qe(){const mt=function T(mt){const Ct={},bt={__esModule:!0,initializeApp:function _e(ot,ft={}){const de=le.initializeApp(ot,ft);if((0,E.r3)(Ct,de.name))return Ct[de.name];const Ot=new mt(de,bt);return Ct[de.name]=Ot,Ot},app:Re,registerVersion:le.registerVersion,setLogLevel:le.setLogLevel,onLog:le.onLog,apps:null,SDK_VERSION:le.SDK_VERSION,INTERNAL:{registerComponent:function Pe(ot){const ft=ot.name,de=ft.replace("-compat","");if(le._registerComponent(ot)&&"PUBLIC"===ot.type){const Ot=(wt=Re())=>{if("function"!=typeof wt[de])throw ke.create("invalid-app-argument",{appName:ft});return wt[de]()};void 0!==ot.serviceProps&&(0,E.ZB)(Ot,ot.serviceProps),bt[de]=Ot,mt.prototype[de]=function(...wt){return this._getService.bind(this,ft).apply(this,ot.multipleInstances?wt:[])}}return"PUBLIC"===ot.type?bt[de]:null},removeApp:function jt(ot){delete Ct[ot]},useAsService:function $e(ot,ft){return"serverAuth"===ft?null:ft},modularAPIs:le}};function Re(ot){if(!(0,E.r3)(Ct,ot=ot||le._DEFAULT_ENTRY_NAME))throw ke.create("no-app",{appName:ot});return Ct[ot]}return bt.default=bt,Object.defineProperty(bt,"apps",{get:function He(){return Object.keys(Ct).map(ot=>Ct[ot])}}),Re.App=mt,bt}(Ne);return mt.INTERNAL=Object.assign(Object.assign({},mt.INTERNAL),{createFirebaseNamespace:qe,extendNamespace:function Ct(bt){(0,E.ZB)(mt,bt)},createSubscribe:E.ne,ErrorFactory:E.LL,deepExtend:E.ZB}),mt}(),Ie=new Oe.Yd("@firebase/app-compat");if((0,E.jU)()&&void 0!==self.firebase){Ie.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const mt=self.firebase.SDK_VERSION;mt&&mt.indexOf("LITE")>=0&&Ie.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Et=ye;!function st(mt){(0,le.registerVersion)("@firebase/app-compat","0.2.21",mt)}()},534:(Wt,Je,G)=>{G.r(Je),G.d(Je,{FirebaseError:()=>Oe.ZR,SDK_VERSION:()=>Vi,_DEFAULT_ENTRY_NAME:()=>Mt,_addComponent:()=>cn,_addOrOverwriteComponent:()=>Gr,_apps:()=>mn,_clearComponents:()=>Xt,_components:()=>or,_getProvider:()=>$r,_registerComponent:()=>Hn,_removeServiceInstance:()=>Yr,deleteApp:()=>dr,getApp:()=>ts,getApps:()=>go,initializeApp:()=>Pa,onLog:()=>Bi,registerVersion:()=>ps,setLogLevel:()=>xi});var E=G(5861),me=G(4537),le=G(7879),Oe=G(9058);const Ne=(it,Ge)=>Ge.some(vt=>it instanceof vt);let Te,ke;const ye=new WeakMap,Ie=new WeakMap,Ve=new WeakMap,ht=new WeakMap,st=new WeakMap;let Ct={get(it,Ge,vt){if(it instanceof IDBTransaction){if("done"===Ge)return Ie.get(it);if("objectStoreNames"===Ge)return it.objectStoreNames||Ve.get(it);if("store"===Ge)return vt.objectStoreNames[1]?void 0:vt.objectStore(vt.objectStoreNames[0])}return _e(it[Ge])},set:(it,Ge,vt)=>(it[Ge]=vt,!0),has:(it,Ge)=>it instanceof IDBTransaction&&("done"===Ge||"store"===Ge)||Ge in it};function Re(it){return"function"==typeof it?function jt(it){return it!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function qe(){return ke||(ke=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(it)?function(...Ge){return it.apply(He(this),Ge),_e(ye.get(this))}:function(...Ge){return _e(it.apply(He(this),Ge))}:function(Ge,...vt){const sn=it.call(He(this),Ge,...vt);return Ve.set(sn,Ge.sort?Ge.sort():[Ge]),_e(sn)}}(it):(it instanceof IDBTransaction&&function mt(it){if(Ie.has(it))return;const Ge=new Promise((vt,sn)=>{const In=()=>{it.removeEventListener("complete",qt),it.removeEventListener("error",tr),it.removeEventListener("abort",tr)},qt=()=>{vt(),In()},tr=()=>{sn(it.error||new DOMException("AbortError","AbortError")),In()};it.addEventListener("complete",qt),it.addEventListener("error",tr),it.addEventListener("abort",tr)});Ie.set(it,Ge)}(it),Ne(it,function T(){return Te||(Te=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(it,Ct):it)}function _e(it){if(it instanceof IDBRequest)return function Et(it){const Ge=new Promise((vt,sn)=>{const In=()=>{it.removeEventListener("success",qt),it.removeEventListener("error",tr)},qt=()=>{vt(_e(it.result)),In()},tr=()=>{sn(it.error),In()};it.addEventListener("success",qt),it.addEventListener("error",tr)});return Ge.then(vt=>{vt instanceof IDBCursor&&ye.set(vt,it)}).catch(()=>{}),st.set(Ge,it),Ge}(it);if(ht.has(it))return ht.get(it);const Ge=Re(it);return Ge!==it&&(ht.set(it,Ge),st.set(Ge,it)),Ge}const He=it=>st.get(it),ot=["get","getKey","getAll","getAllKeys","count"],ft=["put","add","delete","clear"],de=new Map;function Ot(it,Ge){if(!(it instanceof IDBDatabase)||Ge in it||"string"!=typeof Ge)return;if(de.get(Ge))return de.get(Ge);const vt=Ge.replace(/FromIndex$/,""),sn=Ge!==vt,In=ft.includes(vt);if(!(vt in(sn?IDBIndex:IDBObjectStore).prototype)||!In&&!ot.includes(vt))return;const qt=function(){var tr=(0,E.Z)(function*(ui,...Mr){const Js=this.transaction(ui,In?"readwrite":"readonly");let Hi=Js.store;return sn&&(Hi=Hi.index(Mr.shift())),(yield Promise.all([Hi[vt](...Mr),In&&Js.done]))[0]});return function(Mr){return tr.apply(this,arguments)}}();return de.set(Ge,qt),qt}!function bt(it){Ct=it(Ct)}(it=>({...it,get:(Ge,vt,sn)=>Ot(Ge,vt)||it.get(Ge,vt,sn),has:(Ge,vt)=>!!Ot(Ge,vt)||it.has(Ge,vt)}));class wt{constructor(Ge){this.container=Ge}getPlatformInfoString(){return this.container.getProviders().map(vt=>{if(function Jn(it){const Ge=it.getComponent();return"VERSION"===Ge?.type}(vt)){const sn=vt.getImmediate();return`${sn.library}/${sn.version}`}return null}).filter(vt=>vt).join(" ")}}const On="@firebase/app",_r=new le.Yd("@firebase/app"),Mt="[DEFAULT]",ln={[On]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},mn=new Map,or=new Map;function cn(it,Ge){try{it.container.addComponent(Ge)}catch(vt){_r.debug(`Component ${Ge.name} failed to register with FirebaseApp ${it.name}`,vt)}}function Gr(it,Ge){it.container.addOrOverwriteComponent(Ge)}function Hn(it){const Ge=it.name;if(or.has(Ge))return _r.debug(`There were multiple attempts to register component ${Ge}.`),!1;or.set(Ge,it);for(const vt of mn.values())cn(vt,it);return!0}function $r(it,Ge){const vt=it.container.getProvider("heartbeat").getImmediate({optional:!0});return vt&&vt.triggerHeartbeat(),it.container.getProvider(Ge)}function Yr(it,Ge,vt=Mt){$r(it,Ge).clearInstance(vt)}function Xt(){or.clear()}const wn=new Oe.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class Dn{constructor(Ge,vt,sn){this._isDeleted=!1,this._options=Object.assign({},Ge),this._config=Object.assign({},vt),this._name=vt.name,this._automaticDataCollectionEnabled=vt.automaticDataCollectionEnabled,this._container=sn,this.container.addComponent(new me.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Ge){this.checkDestroyed(),this._automaticDataCollectionEnabled=Ge}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(Ge){this._isDeleted=Ge}checkDestroyed(){if(this.isDeleted)throw wn.create("app-deleted",{appName:this._name})}}const Vi="10.5.1";function Pa(it,Ge={}){let vt=it;"object"!=typeof Ge&&(Ge={name:Ge});const sn=Object.assign({name:Mt,automaticDataCollectionEnabled:!1},Ge),In=sn.name;if("string"!=typeof In||!In)throw wn.create("bad-app-name",{appName:String(In)});if(vt||(vt=(0,Oe.aH)()),!vt)throw wn.create("no-options");const qt=mn.get(In);if(qt){if((0,Oe.vZ)(vt,qt.options)&&(0,Oe.vZ)(sn,qt.config))return qt;throw wn.create("duplicate-app",{appName:In})}const tr=new me.H0(In);for(const Mr of or.values())tr.addComponent(Mr);const ui=new Dn(vt,sn,tr);return mn.set(In,ui),ui}function ts(it=Mt){const Ge=mn.get(it);if(!Ge&&it===Mt&&(0,Oe.aH)())return Pa();if(!Ge)throw wn.create("no-app",{appName:it});return Ge}function go(){return Array.from(mn.values())}function dr(it){return Ti.apply(this,arguments)}function Ti(){return(Ti=(0,E.Z)(function*(it){const Ge=it.name;mn.has(Ge)&&(mn.delete(Ge),yield Promise.all(it.container.getProviders().map(vt=>vt.delete())),it.isDeleted=!0)})).apply(this,arguments)}function ps(it,Ge,vt){var sn;let In=null!==(sn=ln[it])&&void 0!==sn?sn:it;vt&&(In+=`-${vt}`);const qt=In.match(/\s|\//),tr=Ge.match(/\s|\//);if(qt||tr){const ui=[`Unable to register library "${In}" with version "${Ge}":`];return qt&&ui.push(`library name "${In}" contains illegal characters (whitespace or "/")`),qt&&tr&&ui.push("and"),tr&&ui.push(`version name "${Ge}" contains illegal characters (whitespace or "/")`),void _r.warn(ui.join(" "))}Hn(new me.wA(`${In}-version`,()=>({library:In,version:Ge}),"VERSION"))}function Bi(it,Ge){if(null!==it&&"function"!=typeof it)throw wn.create("invalid-log-argument");(0,le.Am)(it,Ge)}function xi(it){(0,le.Ub)(it)}const Ui="firebase-heartbeat-database",ji=1,we="firebase-heartbeat-store";let ie=null;function se(){return ie||(ie=function Pe(it,Ge,{blocked:vt,upgrade:sn,blocking:In,terminated:qt}={}){const tr=indexedDB.open(it,Ge),ui=_e(tr);return sn&&tr.addEventListener("upgradeneeded",Mr=>{sn(_e(tr.result),Mr.oldVersion,Mr.newVersion,_e(tr.transaction),Mr)}),vt&&tr.addEventListener("blocked",Mr=>vt(Mr.oldVersion,Mr.newVersion,Mr)),ui.then(Mr=>{qt&&Mr.addEventListener("close",()=>qt()),In&&Mr.addEventListener("versionchange",Js=>In(Js.oldVersion,Js.newVersion,Js))}).catch(()=>{}),ui}(Ui,ji,{upgrade:(it,Ge)=>{0===Ge&&it.createObjectStore(we)}}).catch(it=>{throw wn.create("idb-open",{originalErrorMessage:it.message})})),ie}function ue(){return(ue=(0,E.Z)(function*(it){try{return yield(yield se()).transaction(we).objectStore(we).get(Pt(it))}catch(Ge){if(Ge instanceof Oe.ZR)_r.warn(Ge.message);else{const vt=wn.create("idb-get",{originalErrorMessage:Ge?.message});_r.warn(vt.message)}}})).apply(this,arguments)}function Le(it,Ge){return _t.apply(this,arguments)}function _t(){return(_t=(0,E.Z)(function*(it,Ge){try{const sn=(yield se()).transaction(we,"readwrite");yield sn.objectStore(we).put(Ge,Pt(it)),yield sn.done}catch(vt){if(vt instanceof Oe.ZR)_r.warn(vt.message);else{const sn=wn.create("idb-set",{originalErrorMessage:vt?.message});_r.warn(sn.message)}}})).apply(this,arguments)}function Pt(it){return`${it.name}!${it.options.appId}`}class Jt{constructor(Ge){this.container=Ge,this._heartbeatsCache=null;const vt=this.container.getProvider("app").getImmediate();this._storage=new li(vt),this._heartbeatsCachePromise=this._storage.read().then(sn=>(this._heartbeatsCache=sn,sn))}triggerHeartbeat(){var Ge=this;return(0,E.Z)(function*(){const sn=Ge.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),In=hn();if(null===Ge._heartbeatsCache&&(Ge._heartbeatsCache=yield Ge._heartbeatsCachePromise),Ge._heartbeatsCache.lastSentHeartbeatDate!==In&&!Ge._heartbeatsCache.heartbeats.some(qt=>qt.date===In))return Ge._heartbeatsCache.heartbeats.push({date:In,agent:sn}),Ge._heartbeatsCache.heartbeats=Ge._heartbeatsCache.heartbeats.filter(qt=>{const tr=new Date(qt.date).valueOf();return Date.now()-tr<=2592e6}),Ge._storage.overwrite(Ge._heartbeatsCache)})()}getHeartbeatsHeader(){var Ge=this;return(0,E.Z)(function*(){if(null===Ge._heartbeatsCache&&(yield Ge._heartbeatsCachePromise),null===Ge._heartbeatsCache||0===Ge._heartbeatsCache.heartbeats.length)return"";const vt=hn(),{heartbeatsToSend:sn,unsentEntries:In}=function Br(it,Ge=1024){const vt=[];let sn=it.slice();for(const In of it){const qt=vt.find(tr=>tr.agent===In.agent);if(qt){if(qt.dates.push(In.date),Gs(vt)>Ge){qt.dates.pop();break}}else if(vt.push({agent:In.agent,dates:[In.date]}),Gs(vt)>Ge){vt.pop();break}sn=sn.slice(1)}return{heartbeatsToSend:vt,unsentEntries:sn}}(Ge._heartbeatsCache.heartbeats),qt=(0,Oe.L)(JSON.stringify({version:2,heartbeats:sn}));return Ge._heartbeatsCache.lastSentHeartbeatDate=vt,In.length>0?(Ge._heartbeatsCache.heartbeats=In,yield Ge._storage.overwrite(Ge._heartbeatsCache)):(Ge._heartbeatsCache.heartbeats=[],Ge._storage.overwrite(Ge._heartbeatsCache)),qt})()}}function hn(){return(new Date).toISOString().substring(0,10)}class li{constructor(Ge){this.app=Ge,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,E.Z)(function*(){return!!(0,Oe.hl)()&&(0,Oe.eu)().then(()=>!0).catch(()=>!1)})()}read(){var Ge=this;return(0,E.Z)(function*(){return(yield Ge._canUseIndexedDBPromise)&&(yield function re(it){return ue.apply(this,arguments)}(Ge.app))||{heartbeats:[]}})()}overwrite(Ge){var vt=this;return(0,E.Z)(function*(){var sn;if(yield vt._canUseIndexedDBPromise){const qt=yield vt.read();return Le(vt.app,{lastSentHeartbeatDate:null!==(sn=Ge.lastSentHeartbeatDate)&&void 0!==sn?sn:qt.lastSentHeartbeatDate,heartbeats:Ge.heartbeats})}})()}add(Ge){var vt=this;return(0,E.Z)(function*(){var sn;if(yield vt._canUseIndexedDBPromise){const qt=yield vt.read();return Le(vt.app,{lastSentHeartbeatDate:null!==(sn=Ge.lastSentHeartbeatDate)&&void 0!==sn?sn:qt.lastSentHeartbeatDate,heartbeats:[...qt.heartbeats,...Ge.heartbeats]})}})()}}function Gs(it){return(0,Oe.L)(JSON.stringify({version:2,heartbeats:it})).length}!function Qs(it){Hn(new me.wA("platform-logger",Ge=>new wt(Ge),"PRIVATE")),Hn(new me.wA("heartbeat",Ge=>new Jt(Ge),"PRIVATE")),ps(On,"0.9.21",it),ps(On,"0.9.21","esm2017"),ps("fire-js","")}("")},4537:(Wt,Je,G)=>{G.d(Je,{H0:()=>T,wA:()=>le});var E=G(5861),me=G(9058);class le{constructor(ye,Ie,Ve){this.name=ye,this.instanceFactory=Ie,this.type=Ve,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(ye){return this.instantiationMode=ye,this}setMultipleInstances(ye){return this.multipleInstances=ye,this}setServiceProps(ye){return this.serviceProps=ye,this}setInstanceCreatedCallback(ye){return this.onInstanceCreated=ye,this}}const Oe="[DEFAULT]";class Ne{constructor(ye,Ie){this.name=ye,this.container=Ie,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(ye){const Ie=this.normalizeInstanceIdentifier(ye);if(!this.instancesDeferred.has(Ie)){const Ve=new me.BH;if(this.instancesDeferred.set(Ie,Ve),this.isInitialized(Ie)||this.shouldAutoInitialize())try{const ht=this.getOrInitializeService({instanceIdentifier:Ie});ht&&Ve.resolve(ht)}catch{}}return this.instancesDeferred.get(Ie).promise}getImmediate(ye){var Ie;const Ve=this.normalizeInstanceIdentifier(ye?.identifier),ht=null!==(Ie=ye?.optional)&&void 0!==Ie&&Ie;if(!this.isInitialized(Ve)&&!this.shouldAutoInitialize()){if(ht)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:Ve})}catch(st){if(ht)return null;throw st}}getComponent(){return this.component}setComponent(ye){if(ye.name!==this.name)throw Error(`Mismatching Component ${ye.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=ye,this.shouldAutoInitialize()){if(function ke(qe){return"EAGER"===qe.instantiationMode}(ye))try{this.getOrInitializeService({instanceIdentifier:Oe})}catch{}for(const[Ie,Ve]of this.instancesDeferred.entries()){const ht=this.normalizeInstanceIdentifier(Ie);try{const st=this.getOrInitializeService({instanceIdentifier:ht});Ve.resolve(st)}catch{}}}}clearInstance(ye=Oe){this.instancesDeferred.delete(ye),this.instancesOptions.delete(ye),this.instances.delete(ye)}delete(){var ye=this;return(0,E.Z)(function*(){const Ie=Array.from(ye.instances.values());yield Promise.all([...Ie.filter(Ve=>"INTERNAL"in Ve).map(Ve=>Ve.INTERNAL.delete()),...Ie.filter(Ve=>"_delete"in Ve).map(Ve=>Ve._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(ye=Oe){return this.instances.has(ye)}getOptions(ye=Oe){return this.instancesOptions.get(ye)||{}}initialize(ye={}){const{options:Ie={}}=ye,Ve=this.normalizeInstanceIdentifier(ye.instanceIdentifier);if(this.isInitialized(Ve))throw Error(`${this.name}(${Ve}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const ht=this.getOrInitializeService({instanceIdentifier:Ve,options:Ie});for(const[st,Et]of this.instancesDeferred.entries())Ve===this.normalizeInstanceIdentifier(st)&&Et.resolve(ht);return ht}onInit(ye,Ie){var Ve;const ht=this.normalizeInstanceIdentifier(Ie),st=null!==(Ve=this.onInitCallbacks.get(ht))&&void 0!==Ve?Ve:new Set;st.add(ye),this.onInitCallbacks.set(ht,st);const Et=this.instances.get(ht);return Et&&ye(Et,ht),()=>{st.delete(ye)}}invokeOnInitCallbacks(ye,Ie){const Ve=this.onInitCallbacks.get(Ie);if(Ve)for(const ht of Ve)try{ht(ye,Ie)}catch{}}getOrInitializeService({instanceIdentifier:ye,options:Ie={}}){let Ve=this.instances.get(ye);if(!Ve&&this.component&&(Ve=this.component.instanceFactory(this.container,{instanceIdentifier:(qe=ye,qe===Oe?void 0:qe),options:Ie}),this.instances.set(ye,Ve),this.instancesOptions.set(ye,Ie),this.invokeOnInitCallbacks(Ve,ye),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,ye,Ve)}catch{}var qe;return Ve||null}normalizeInstanceIdentifier(ye=Oe){return this.component?this.component.multipleInstances?ye:Oe:ye}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class T{constructor(ye){this.name=ye,this.providers=new Map}addComponent(ye){const Ie=this.getProvider(ye.name);if(Ie.isComponentSet())throw new Error(`Component ${ye.name} has already been registered with ${this.name}`);Ie.setComponent(ye)}addOrOverwriteComponent(ye){this.getProvider(ye.name).isComponentSet()&&this.providers.delete(ye.name),this.addComponent(ye)}getProvider(ye){if(this.providers.has(ye))return this.providers.get(ye);const Ie=new Ne(ye,this);return this.providers.set(ye,Ie),Ie}getProviders(){return Array.from(this.providers.values())}}},7879:(Wt,Je,G)=>{G.d(Je,{Am:()=>qe,Ub:()=>T,Yd:()=>ke,in:()=>me});const E=[];var me=function(ye){return ye[ye.DEBUG=0]="DEBUG",ye[ye.VERBOSE=1]="VERBOSE",ye[ye.INFO=2]="INFO",ye[ye.WARN=3]="WARN",ye[ye.ERROR=4]="ERROR",ye[ye.SILENT=5]="SILENT",ye}(me||{});const le={debug:me.DEBUG,verbose:me.VERBOSE,info:me.INFO,warn:me.WARN,error:me.ERROR,silent:me.SILENT},Oe=me.INFO,Ne={[me.DEBUG]:"log",[me.VERBOSE]:"log",[me.INFO]:"info",[me.WARN]:"warn",[me.ERROR]:"error"},Te=(ye,Ie,...Ve)=>{if(Ie<ye.logLevel)return;const ht=(new Date).toISOString(),st=Ne[Ie];if(!st)throw new Error(`Attempted to log a message with an invalid logType (value: ${Ie})`);console[st](`[${ht}]  ${ye.name}:`,...Ve)};class ke{constructor(Ie){this.name=Ie,this._logLevel=Oe,this._logHandler=Te,this._userLogHandler=null,E.push(this)}get logLevel(){return this._logLevel}set logLevel(Ie){if(!(Ie in me))throw new TypeError(`Invalid value "${Ie}" assigned to \`logLevel\``);this._logLevel=Ie}setLogLevel(Ie){this._logLevel="string"==typeof Ie?le[Ie]:Ie}get logHandler(){return this._logHandler}set logHandler(Ie){if("function"!=typeof Ie)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=Ie}get userLogHandler(){return this._userLogHandler}set userLogHandler(Ie){this._userLogHandler=Ie}debug(...Ie){this._userLogHandler&&this._userLogHandler(this,me.DEBUG,...Ie),this._logHandler(this,me.DEBUG,...Ie)}log(...Ie){this._userLogHandler&&this._userLogHandler(this,me.VERBOSE,...Ie),this._logHandler(this,me.VERBOSE,...Ie)}info(...Ie){this._userLogHandler&&this._userLogHandler(this,me.INFO,...Ie),this._logHandler(this,me.INFO,...Ie)}warn(...Ie){this._userLogHandler&&this._userLogHandler(this,me.WARN,...Ie),this._logHandler(this,me.WARN,...Ie)}error(...Ie){this._userLogHandler&&this._userLogHandler(this,me.ERROR,...Ie),this._logHandler(this,me.ERROR,...Ie)}}function T(ye){E.forEach(Ie=>{Ie.setLogLevel(ye)})}function qe(ye,Ie){for(const Ve of E){let ht=null;Ie&&Ie.level&&(ht=le[Ie.level]),Ve.userLogHandler=null===ye?null:(st,Et,...mt)=>{const Ct=mt.map(bt=>{if(null==bt)return null;if("string"==typeof bt)return bt;if("number"==typeof bt||"boolean"==typeof bt)return bt.toString();if(bt instanceof Error)return bt.message;try{return JSON.stringify(bt)}catch{return null}}).filter(bt=>bt).join(" ");Et>=(ht??st.logLevel)&&ye({level:me[Et].toLowerCase(),message:Ct,args:mt,type:st.name})}}}},7142:(Wt,Je,G)=>{G.d(Je,{Z:()=>E.Z});var E=G(3106);E.Z.registerVersion("firebase","10.5.1","app-compat")},2872:(Wt,Je,G)=>{G.r(Je);var E=G(5861),me=G(3106),le=G(9058),Oe=G(534),Ne=G(7879),Te=G(7582),ke=G(4537);const qe={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"};const Et=function ht(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend.","unsupported-password-policy-schema-version":"The password policy received from the backend uses a schema version that is not supported by this version of the Firebase SDK.","password-does-not-meet-requirements":"The password does not meet the requirements."}},mt=function st(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},Ct=new le.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),jt=new Ne.Yd("@firebase/auth");function _e(D,...g){jt.logLevel<=Ne.in.ERROR&&jt.error(`Auth (${Oe.SDK_VERSION}): ${D}`,...g)}function He(D,...g){throw ft(D,...g)}function Pe(D,...g){return ft(D,...g)}function $e(D,g,v){const C=Object.assign(Object.assign({},mt()),{[g]:v});return new le.LL("auth","Firebase",C).create(g,{appName:D.name})}function ot(D,g,v){if(!(g instanceof v))throw v.name!==g.constructor.name&&He(D,"argument-error"),$e(D,"argument-error",`Type of ${g.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function ft(D,...g){if("string"!=typeof D){const v=g[0],C=[...g.slice(1)];return C[0]&&(C[0].appName=D.name),D._errorFactory.create(v,...C)}return Ct.create(D,...g)}function de(D,g,...v){if(!D)throw ft(g,...v)}function Ot(D){const g="INTERNAL ASSERTION FAILED: "+D;throw _e(g),new Error(g)}function wt(D,g){D||Ot(g)}function Jn(){var D;return typeof self<"u"&&(null===(D=self.location)||void 0===D?void 0:D.href)||""}function On(){return"http:"===Or()||"https:"===Or()}function Or(){var D;return typeof self<"u"&&(null===(D=self.location)||void 0===D?void 0:D.protocol)||null}class Bt{constructor(g,v){this.shortDelay=g,this.longDelay=v,wt(v>g,"Short delay should be less than long delay!"),this.isMobile=(0,le.uI)()||(0,le.b$)()}get(){return function _r(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(On()||(0,le.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function be(D,g){wt(D.emulator,"Emulator should always be set here");const{url:v}=D.emulator;return g?`${v}${g.startsWith("/")?g.slice(1):g}`:v}class Se{static initialize(g,v,C){this.fetchImpl=g,v&&(this.headersImpl=v),C&&(this.responseImpl=C)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:typeof globalThis<"u"&&globalThis.fetch?globalThis.fetch:typeof fetch<"u"?fetch:void Ot("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:typeof globalThis<"u"&&globalThis.Headers?globalThis.Headers:typeof Headers<"u"?Headers:void Ot("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:typeof globalThis<"u"&&globalThis.Response?globalThis.Response:typeof Response<"u"?Response:void Ot("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Ke={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},Fe=new Bt(3e4,6e4);function Ue(D,g){return D.tenantId&&!g.tenantId?Object.assign(Object.assign({},g),{tenantId:D.tenantId}):g}function Xe(D,g,v,C){return Ft.apply(this,arguments)}function Ft(){return(Ft=(0,E.Z)(function*(D,g,v,C,$={}){return Rt(D,$,(0,E.Z)(function*(){let X={},De={};C&&("GET"===g?De=C:X={body:JSON.stringify(C)});const We=(0,le.xO)(Object.assign({key:D.config.apiKey},De)).slice(1),gt=yield D._getAdditionalHeaders();return gt["Content-Type"]="application/json",D.languageCode&&(gt["X-Firebase-Locale"]=D.languageCode),Se.fetch()(Yt(D,D.config.apiHost,v,We),Object.assign({method:g,headers:gt,referrerPolicy:"no-referrer"},X))}))})).apply(this,arguments)}function Rt(D,g,v){return hr.apply(this,arguments)}function hr(){return(hr=(0,E.Z)(function*(D,g,v){D._canInitEmulator=!1;const C=Object.assign(Object.assign({},Ke),g);try{const $=new An(D),X=yield Promise.race([v(),$.promise]);$.clearNetworkTimeout();const De=yield X.json();if("needConfirmation"in De)throw $n(D,"account-exists-with-different-credential",De);if(X.ok&&!("errorMessage"in De))return De;{const We=X.ok?De.errorMessage:De.error.message,[gt,rn]=We.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===gt)throw $n(D,"credential-already-in-use",De);if("EMAIL_EXISTS"===gt)throw $n(D,"email-already-in-use",De);if("USER_DISABLED"===gt)throw $n(D,"user-disabled",De);const _n=C[gt]||gt.toLowerCase().replace(/[_\s]+/g,"-");if(rn)throw $e(D,_n,rn);He(D,_n)}}catch($){if($ instanceof le.ZR)throw $;He(D,"network-request-failed",{message:String($)})}})).apply(this,arguments)}function Ut(D,g,v,C){return Kn.apply(this,arguments)}function Kn(){return(Kn=(0,E.Z)(function*(D,g,v,C,$={}){const X=yield Xe(D,g,v,C,$);return"mfaPendingCredential"in X&&He(D,"multi-factor-auth-required",{_serverResponse:X}),X})).apply(this,arguments)}function Yt(D,g,v,C){const $=`${g}${v}?${C}`;return D.config.emulator?be(D.config,$):`${D.config.apiScheme}://${$}`}function Ln(D){switch(D){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class An{constructor(g){this.auth=g,this.timer=null,this.promise=new Promise((v,C)=>{this.timer=setTimeout(()=>C(Pe(this.auth,"network-request-failed")),Fe.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function $n(D,g,v){const C={appName:D.name};v.email&&(C.email=v.email),v.phoneNumber&&(C.phoneNumber=v.phoneNumber);const $=Pe(D,g,C);return $.customData._tokenResponse=v,$}function Ee(D){return void 0!==D&&void 0!==D.getResponse}function xe(D){return void 0!==D&&void 0!==D.enterprise}class ze{constructor(g){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===g.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=g.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=g.recaptchaEnforcementState}getProviderEnforcementState(g){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const v of this.recaptchaEnforcementState)if(v.provider&&v.provider===g)return Ln(v.enforcementState);return null}isProviderEnabled(g){return"ENFORCE"===this.getProviderEnforcementState(g)||"AUDIT"===this.getProviderEnforcementState(g)}}function pt(){return(pt=(0,E.Z)(function*(D){return(yield Xe(D,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function Lt(D,g){return jn.apply(this,arguments)}function jn(){return(jn=(0,E.Z)(function*(D,g){return Xe(D,"GET","/v2/recaptchaConfig",Ue(D,g))})).apply(this,arguments)}function Mt(){return(Mt=(0,E.Z)(function*(D,g){return Xe(D,"POST","/v1/accounts:delete",g)})).apply(this,arguments)}function mn(){return(mn=(0,E.Z)(function*(D,g){return Xe(D,"POST","/v1/accounts:update",g)})).apply(this,arguments)}function cn(){return(cn=(0,E.Z)(function*(D,g){return Xe(D,"POST","/v1/accounts:lookup",g)})).apply(this,arguments)}function Gr(D){if(D)try{const g=new Date(Number(D));if(!isNaN(g.getTime()))return g.toUTCString()}catch{}}function Yr(){return(Yr=(0,E.Z)(function*(D,g=!1){const v=(0,le.m9)(D),C=yield v.getIdToken(g),$=Wi(C);de($&&$.exp&&$.auth_time&&$.iat,v.auth,"internal-error");const X="object"==typeof $.firebase?$.firebase:void 0,De=X?.sign_in_provider;return{claims:$,token:C,authTime:Gr(Xt($.auth_time)),issuedAtTime:Gr(Xt($.iat)),expirationTime:Gr(Xt($.exp)),signInProvider:De||null,signInSecondFactor:X?.sign_in_second_factor||null}})).apply(this,arguments)}function Xt(D){return 1e3*Number(D)}function Wi(D){const[g,v,C]=D.split(".");if(void 0===g||void 0===v||void 0===C)return _e("JWT malformed, contained fewer than 3 sections"),null;try{const $=(0,le.tV)(v);return $?JSON.parse($):(_e("Failed to decode base64 JWT payload"),null)}catch($){return _e("Caught error parsing JWT payload as JSON",$?.toString()),null}}function Dn(D,g){return Vi.apply(this,arguments)}function Vi(){return(Vi=(0,E.Z)(function*(D,g,v=!1){if(v)return g;try{return yield g}catch(C){throw C instanceof le.ZR&&function Pa({code:D}){return"auth/user-disabled"===D||"auth/user-token-expired"===D}(C)&&D.auth.currentUser===D&&(yield D.auth.signOut()),C}})).apply(this,arguments)}class ts{constructor(g){this.user=g,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(g){var v;if(g){const C=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),C}{this.errorBackoff=3e4;const $=(null!==(v=this.user.stsTokenManager.expirationTime)&&void 0!==v?v:0)-Date.now()-3e5;return Math.max(0,$)}}schedule(g=!1){var v=this;if(!this.isRunning)return;const C=this.getInterval(g);this.timerId=setTimeout((0,E.Z)(function*(){yield v.iteration()}),C)}iteration(){var g=this;return(0,E.Z)(function*(){try{yield g.user.getIdToken(!0)}catch(v){return void("auth/network-request-failed"===v?.code&&g.schedule(!0))}g.schedule()})()}}class go{constructor(g,v){this.createdAt=g,this.lastLoginAt=v,this._initializeTime()}_initializeTime(){this.lastSignInTime=Gr(this.lastLoginAt),this.creationTime=Gr(this.createdAt)}_copy(g){this.createdAt=g.createdAt,this.lastLoginAt=g.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function dr(D){return Ti.apply(this,arguments)}function Ti(){return Ti=(0,E.Z)(function*(D){var g;const v=D.auth,C=yield D.getIdToken(),$=yield Dn(D,function or(D,g){return cn.apply(this,arguments)}(v,{idToken:C}));de($?.users.length,v,"internal-error");const X=$.users[0];D._notifyReloadListener(X);const De=null!==(g=X.providerUserInfo)&&void 0!==g&&g.length?function Ui(D){return D.map(g=>{var{providerId:v}=g,C=(0,Te._T)(g,["providerId"]);return{providerId:v,uid:C.rawId||"",displayName:C.displayName||null,email:C.email||null,phoneNumber:C.phoneNumber||null,photoURL:C.photoUrl||null}})}(X.providerUserInfo):[],We=function xi(D,g){return[...D.filter(C=>!g.some($=>$.providerId===C.providerId)),...g]}(D.providerData,De),_n=!!D.isAnonymous&&!(D.email&&X.passwordHash||We?.length),yn={uid:X.localId,displayName:X.displayName||null,photoURL:X.photoUrl||null,email:X.email||null,emailVerified:X.emailVerified||!1,phoneNumber:X.phoneNumber||null,tenantId:X.tenantId||null,providerData:We,metadata:new go(X.createdAt,X.lastLoginAt),isAnonymous:_n};Object.assign(D,yn)}),Ti.apply(this,arguments)}function Bi(){return(Bi=(0,E.Z)(function*(D){const g=(0,le.m9)(D);yield dr(g),yield g.auth._persistUserIfCurrent(g),g.auth._notifyListenersIfCurrent(g)})).apply(this,arguments)}function we(){return(we=(0,E.Z)(function*(D,g){const v=yield Rt(D,{},(0,E.Z)(function*(){const C=(0,le.xO)({grant_type:"refresh_token",refresh_token:g}).slice(1),{tokenApiHost:$,apiKey:X}=D.config,De=Yt(D,$,"/v1/token",`key=${X}`),We=yield D._getAdditionalHeaders();return We["Content-Type"]="application/x-www-form-urlencoded",Se.fetch()(De,{method:"POST",headers:We,body:C})}));return{accessToken:v.access_token,expiresIn:v.expires_in,refreshToken:v.refresh_token}})).apply(this,arguments)}class ie{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(g){de(g.idToken,"internal-error"),de(typeof g.idToken<"u","internal-error"),de(typeof g.refreshToken<"u","internal-error");const v="expiresIn"in g&&typeof g.expiresIn<"u"?Number(g.expiresIn):function wn(D){const g=Wi(D);return de(g,"internal-error"),de(typeof g.exp<"u","internal-error"),de(typeof g.iat<"u","internal-error"),Number(g.exp)-Number(g.iat)}(g.idToken);this.updateTokensAndExpiration(g.idToken,g.refreshToken,v)}getToken(g,v=!1){var C=this;return(0,E.Z)(function*(){return de(!C.accessToken||C.refreshToken,g,"user-token-expired"),v||!C.accessToken||C.isExpired?C.refreshToken?(yield C.refresh(g,C.refreshToken),C.accessToken):null:C.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(g,v){var C=this;return(0,E.Z)(function*(){const{accessToken:$,refreshToken:X,expiresIn:De}=yield function ji(D,g){return we.apply(this,arguments)}(g,v);C.updateTokensAndExpiration($,X,Number(De))})()}updateTokensAndExpiration(g,v,C){this.refreshToken=v||null,this.accessToken=g||null,this.expirationTime=Date.now()+1e3*C}static fromJSON(g,v){const{refreshToken:C,accessToken:$,expirationTime:X}=v,De=new ie;return C&&(de("string"==typeof C,"internal-error",{appName:g}),De.refreshToken=C),$&&(de("string"==typeof $,"internal-error",{appName:g}),De.accessToken=$),X&&(de("number"==typeof X,"internal-error",{appName:g}),De.expirationTime=X),De}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(g){this.accessToken=g.accessToken,this.refreshToken=g.refreshToken,this.expirationTime=g.expirationTime}_clone(){return Object.assign(new ie,this.toJSON())}_performRefresh(){return Ot("not implemented")}}function se(D,g){de("string"==typeof D||typeof D>"u","internal-error",{appName:g})}class re{constructor(g){var{uid:v,auth:C,stsTokenManager:$}=g,X=(0,Te._T)(g,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new ts(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=v,this.auth=C,this.stsTokenManager=$,this.accessToken=$.accessToken,this.displayName=X.displayName||null,this.email=X.email||null,this.emailVerified=X.emailVerified||!1,this.phoneNumber=X.phoneNumber||null,this.photoURL=X.photoURL||null,this.isAnonymous=X.isAnonymous||!1,this.tenantId=X.tenantId||null,this.providerData=X.providerData?[...X.providerData]:[],this.metadata=new go(X.createdAt||void 0,X.lastLoginAt||void 0)}getIdToken(g){var v=this;return(0,E.Z)(function*(){const C=yield Dn(v,v.stsTokenManager.getToken(v.auth,g));return de(C,v.auth,"internal-error"),v.accessToken!==C&&(v.accessToken=C,yield v.auth._persistUserIfCurrent(v),v.auth._notifyListenersIfCurrent(v)),C})()}getIdTokenResult(g){return function $r(D){return Yr.apply(this,arguments)}(this,g)}reload(){return function ps(D){return Bi.apply(this,arguments)}(this)}_assign(g){this!==g&&(de(this.uid===g.uid,this.auth,"internal-error"),this.displayName=g.displayName,this.photoURL=g.photoURL,this.email=g.email,this.emailVerified=g.emailVerified,this.phoneNumber=g.phoneNumber,this.isAnonymous=g.isAnonymous,this.tenantId=g.tenantId,this.providerData=g.providerData.map(v=>Object.assign({},v)),this.metadata._copy(g.metadata),this.stsTokenManager._assign(g.stsTokenManager))}_clone(g){const v=new re(Object.assign(Object.assign({},this),{auth:g,stsTokenManager:this.stsTokenManager._clone()}));return v.metadata._copy(this.metadata),v}_onReload(g){de(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=g,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(g){this.reloadListener?this.reloadListener(g):this.reloadUserInfo=g}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(g,v=!1){var C=this;return(0,E.Z)(function*(){let $=!1;g.idToken&&g.idToken!==C.stsTokenManager.accessToken&&(C.stsTokenManager.updateFromServerResponse(g),$=!0),v&&(yield dr(C)),yield C.auth._persistUserIfCurrent(C),$&&C.auth._notifyListenersIfCurrent(C)})()}delete(){var g=this;return(0,E.Z)(function*(){const v=yield g.getIdToken();return yield Dn(g,function zn(D,g){return Mt.apply(this,arguments)}(g.auth,{idToken:v})),g.stsTokenManager.clearRefreshToken(),g.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(g=>Object.assign({},g)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(g,v){var C,$,X,De,We,gt,rn,_n;const yn=null!==(C=v.displayName)&&void 0!==C?C:void 0,cs=null!==($=v.email)&&void 0!==$?$:void 0,Nl=null!==(X=v.phoneNumber)&&void 0!==X?X:void 0,Au=null!==(De=v.photoURL)&&void 0!==De?De:void 0,ru=null!==(We=v.tenantId)&&void 0!==We?We:void 0,iu=null!==(gt=v._redirectEventId)&&void 0!==gt?gt:void 0,Su=null!==(rn=v.createdAt)&&void 0!==rn?rn:void 0,Ef=null!==(_n=v.lastLoginAt)&&void 0!==_n?_n:void 0,{uid:Tf,emailVerified:ds,isAnonymous:Fc,providerData:Ru,stsTokenManager:dd}=v;de(Tf&&dd,g,"internal-error");const pl=ie.fromJSON(this.name,dd);de("string"==typeof Tf,g,"internal-error"),se(yn,g.name),se(cs,g.name),de("boolean"==typeof ds,g,"internal-error"),de("boolean"==typeof Fc,g,"internal-error"),se(Nl,g.name),se(Au,g.name),se(ru,g.name),se(iu,g.name),se(Su,g.name),se(Ef,g.name);const $d=new re({uid:Tf,auth:g,email:cs,emailVerified:ds,displayName:yn,isAnonymous:Fc,photoURL:Au,phoneNumber:Nl,tenantId:ru,stsTokenManager:pl,createdAt:Su,lastLoginAt:Ef});return Ru&&Array.isArray(Ru)&&($d.providerData=Ru.map(Dp=>Object.assign({},Dp))),iu&&($d._redirectEventId=iu),$d}static _fromIdTokenResponse(g,v,C=!1){return(0,E.Z)(function*(){const $=new ie;$.updateFromServerResponse(v);const X=new re({uid:v.localId,auth:g,stsTokenManager:$,isAnonymous:C});return yield dr(X),X})()}}const ue=new Map;function Le(D){wt(D instanceof Function,"Expected a class definition");let g=ue.get(D);return g?(wt(g instanceof D,"Instance stored in cache mismatched with class"),g):(g=new D,ue.set(D,g),g)}const Pt=(()=>{class D{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,E.Z)(function*(){return!0})()}_set(v,C){var $=this;return(0,E.Z)(function*(){$.storage[v]=C})()}_get(v){var C=this;return(0,E.Z)(function*(){const $=C.storage[v];return void 0===$?null:$})()}_remove(v){var C=this;return(0,E.Z)(function*(){delete C.storage[v]})()}_addListener(v,C){}_removeListener(v,C){}}return D.type="NONE",D})();function $t(D,g,v){return`firebase:${D}:${g}:${v}`}class gn{constructor(g,v,C){this.persistence=g,this.auth=v,this.userKey=C;const{config:$,name:X}=this.auth;this.fullUserKey=$t(this.userKey,$.apiKey,X),this.fullPersistenceKey=$t("persistence",$.apiKey,X),this.boundEventHandler=v._onStorageEvent.bind(v),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(g){return this.persistence._set(this.fullUserKey,g.toJSON())}getCurrentUser(){var g=this;return(0,E.Z)(function*(){const v=yield g.persistence._get(g.fullUserKey);return v?re._fromJSON(g.auth,v):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(g){var v=this;return(0,E.Z)(function*(){if(v.persistence===g)return;const C=yield v.getCurrentUser();return yield v.removeCurrentUser(),v.persistence=g,C?v.setCurrentUser(C):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(g,v,C="authUser"){return(0,E.Z)(function*(){if(!v.length)return new gn(Le(Pt),g,C);const $=(yield Promise.all(v.map(function(){var rn=(0,E.Z)(function*(_n){if(yield _n._isAvailable())return _n});return function(_n){return rn.apply(this,arguments)}}()))).filter(rn=>rn);let X=$[0]||Le(Pt);const De=$t(C,g.config.apiKey,g.name);let We=null;for(const rn of v)try{const _n=yield rn._get(De);if(_n){const yn=re._fromJSON(g,_n);rn!==X&&(We=yn),X=rn;break}}catch{}const gt=$.filter(rn=>rn._shouldAllowMigration);return X._shouldAllowMigration&&gt.length?(X=gt[0],We&&(yield X._set(De,We.toJSON())),yield Promise.all(v.map(function(){var rn=(0,E.Z)(function*(_n){if(_n!==X)try{yield _n._remove(De)}catch{}});return function(_n){return rn.apply(this,arguments)}}())),new gn(X,g,C)):new gn(X,g,C)})()}}function Jt(D){const g=D.toLowerCase();if(g.includes("opera/")||g.includes("opr/")||g.includes("opios/"))return"Opera";if(Gs(g))return"IEMobile";if(g.includes("msie")||g.includes("trident/"))return"IE";if(g.includes("edge/"))return"Edge";if(hn(g))return"Firefox";if(g.includes("silk/"))return"Silk";if(it(g))return"Blackberry";if(Ge(g))return"Webos";if(Br(g))return"Safari";if((g.includes("chrome/")||li(g))&&!g.includes("edge/"))return"Chrome";if(Qs(g))return"Android";{const C=D.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===C?.length)return C[1]}return"Other"}function hn(D=(0,le.z$)()){return/firefox\//i.test(D)}function Br(D=(0,le.z$)()){const g=D.toLowerCase();return g.includes("safari/")&&!g.includes("chrome/")&&!g.includes("crios/")&&!g.includes("android")}function li(D=(0,le.z$)()){return/crios\//i.test(D)}function Gs(D=(0,le.z$)()){return/iemobile/i.test(D)}function Qs(D=(0,le.z$)()){return/android/i.test(D)}function it(D=(0,le.z$)()){return/blackberry/i.test(D)}function Ge(D=(0,le.z$)()){return/webos/i.test(D)}function vt(D=(0,le.z$)()){return/iphone|ipad|ipod/i.test(D)||/macintosh/i.test(D)&&/mobile/i.test(D)}function tr(D=(0,le.z$)()){return vt(D)||Qs(D)||Ge(D)||it(D)||/windows phone/i.test(D)||Gs(D)}function Mr(D,g=[]){let v;switch(D){case"Browser":v=Jt((0,le.z$)());break;case"Worker":v=`${Jt((0,le.z$)())}-${D}`;break;default:v=D}const C=g.length?g.join(","):"FirebaseCore-web";return`${v}/JsCore/${Oe.SDK_VERSION}/${C}`}class Js{constructor(g){this.auth=g,this.queue=[]}pushCallback(g,v){const C=X=>new Promise((De,We)=>{try{De(g(X))}catch(gt){We(gt)}});C.onAbort=v,this.queue.push(C);const $=this.queue.length-1;return()=>{this.queue[$]=()=>Promise.resolve()}}runMiddleware(g){var v=this;return(0,E.Z)(function*(){if(v.auth.currentUser===g)return;const C=[];try{for(const $ of v.queue)yield $(g),$.onAbort&&C.push($.onAbort)}catch($){C.reverse();for(const X of C)try{X()}catch{}throw v.auth._errorFactory.create("login-blocked",{originalMessage:$?.message})}})()}}function Ds(){return(Ds=(0,E.Z)(function*(D,g={}){return Xe(D,"GET","/v2/passwordPolicy",Ue(D,g))})).apply(this,arguments)}class Yo{constructor(g){var v,C,$,X;const De=g.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(v=De.minPasswordLength)&&void 0!==v?v:6,De.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=De.maxPasswordLength),void 0!==De.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=De.containsLowercaseCharacter),void 0!==De.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=De.containsUppercaseCharacter),void 0!==De.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=De.containsNumericCharacter),void 0!==De.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=De.containsNonAlphanumericCharacter),this.enforcementState=g.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==($=null===(C=g.allowedNonAlphanumericCharacters)||void 0===C?void 0:C.join(""))&&void 0!==$?$:"",this.forceUpgradeOnSignin=null!==(X=g.forceUpgradeOnSignin)&&void 0!==X&&X,this.schemaVersion=g.schemaVersion}validatePassword(g){var v,C,$,X,De,We;const gt={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(g,gt),this.validatePasswordCharacterOptions(g,gt),gt.isValid&&(gt.isValid=null===(v=gt.meetsMinPasswordLength)||void 0===v||v),gt.isValid&&(gt.isValid=null===(C=gt.meetsMaxPasswordLength)||void 0===C||C),gt.isValid&&(gt.isValid=null===($=gt.containsLowercaseLetter)||void 0===$||$),gt.isValid&&(gt.isValid=null===(X=gt.containsUppercaseLetter)||void 0===X||X),gt.isValid&&(gt.isValid=null===(De=gt.containsNumericCharacter)||void 0===De||De),gt.isValid&&(gt.isValid=null===(We=gt.containsNonAlphanumericCharacter)||void 0===We||We),gt}validatePasswordLengthOptions(g,v){const C=this.customStrengthOptions.minPasswordLength,$=this.customStrengthOptions.maxPasswordLength;C&&(v.meetsMinPasswordLength=g.length>=C),$&&(v.meetsMaxPasswordLength=g.length<=$)}validatePasswordCharacterOptions(g,v){let C;this.updatePasswordCharacterOptionsStatuses(v,!1,!1,!1,!1);for(let $=0;$<g.length;$++)C=g.charAt($),this.updatePasswordCharacterOptionsStatuses(v,C>="a"&&C<="z",C>="A"&&C<="Z",C>="0"&&C<="9",this.allowedNonAlphanumericCharacters.includes(C))}updatePasswordCharacterOptionsStatuses(g,v,C,$,X){this.customStrengthOptions.containsLowercaseLetter&&(g.containsLowercaseLetter||(g.containsLowercaseLetter=v)),this.customStrengthOptions.containsUppercaseLetter&&(g.containsUppercaseLetter||(g.containsUppercaseLetter=C)),this.customStrengthOptions.containsNumericCharacter&&(g.containsNumericCharacter||(g.containsNumericCharacter=$)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(g.containsNonAlphanumericCharacter||(g.containsNonAlphanumericCharacter=X))}}class Ka{constructor(g,v,C,$){this.app=g,this.heartbeatServiceProvider=v,this.appCheckServiceProvider=C,this.config=$,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Ya(this),this.idTokenSubscription=new Ya(this),this.beforeStateQueue=new Js(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Ct,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=g.name,this.clientVersion=$.sdkClientVersion}_initializeWithPersistence(g,v){var C=this;return v&&(this._popupRedirectResolver=Le(v)),this._initializationPromise=this.queue((0,E.Z)(function*(){var $,X;if(!C._deleted&&(C.persistenceManager=yield gn.create(C,g),!C._deleted)){if(null!==($=C._popupRedirectResolver)&&void 0!==$&&$._shouldInitProactively)try{yield C._popupRedirectResolver._initialize(C)}catch{}yield C.initializeCurrentUser(v),C.lastNotifiedUid=(null===(X=C.currentUser)||void 0===X?void 0:X.uid)||null,!C._deleted&&(C._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var g=this;return(0,E.Z)(function*(){if(g._deleted)return;const v=yield g.assertedPersistence.getCurrentUser();if(g.currentUser||v){if(g.currentUser&&v&&g.currentUser.uid===v.uid)return g._currentUser._assign(v),void(yield g.currentUser.getIdToken());yield g._updateCurrentUser(v,!0)}})()}initializeCurrentUser(g){var v=this;return(0,E.Z)(function*(){var C;const $=yield v.assertedPersistence.getCurrentUser();let X=$,De=!1;if(g&&v.config.authDomain){yield v.getOrInitRedirectPersistenceManager();const We=null===(C=v.redirectUser)||void 0===C?void 0:C._redirectEventId,gt=X?._redirectEventId,rn=yield v.tryRedirectSignIn(g);(!We||We===gt)&&rn?.user&&(X=rn.user,De=!0)}if(!X)return v.directlySetCurrentUser(null);if(!X._redirectEventId){if(De)try{yield v.beforeStateQueue.runMiddleware(X)}catch(We){X=$,v._popupRedirectResolver._overrideRedirectResult(v,()=>Promise.reject(We))}return X?v.reloadAndSetCurrentUserOrClear(X):v.directlySetCurrentUser(null)}return de(v._popupRedirectResolver,v,"argument-error"),yield v.getOrInitRedirectPersistenceManager(),v.redirectUser&&v.redirectUser._redirectEventId===X._redirectEventId?v.directlySetCurrentUser(X):v.reloadAndSetCurrentUserOrClear(X)})()}tryRedirectSignIn(g){var v=this;return(0,E.Z)(function*(){let C=null;try{C=yield v._popupRedirectResolver._completeRedirectFn(v,g,!0)}catch{yield v._setRedirectUser(null)}return C})()}reloadAndSetCurrentUserOrClear(g){var v=this;return(0,E.Z)(function*(){try{yield dr(g)}catch(C){if("auth/network-request-failed"!==C?.code)return v.directlySetCurrentUser(null)}return v.directlySetCurrentUser(g)})()}useDeviceLanguage(){this.languageCode=function tn(){if(typeof navigator>"u")return null;const D=navigator;return D.languages&&D.languages[0]||D.language||null}()}_delete(){var g=this;return(0,E.Z)(function*(){g._deleted=!0})()}updateCurrentUser(g){var v=this;return(0,E.Z)(function*(){const C=g?(0,le.m9)(g):null;return C&&de(C.auth.config.apiKey===v.config.apiKey,v,"invalid-user-token"),v._updateCurrentUser(C&&C._clone(v))})()}_updateCurrentUser(g,v=!1){var C=this;return(0,E.Z)(function*(){if(!C._deleted)return g&&de(C.tenantId===g.tenantId,C,"tenant-id-mismatch"),v||(yield C.beforeStateQueue.runMiddleware(g)),C.queue((0,E.Z)(function*(){yield C.directlySetCurrentUser(g),C.notifyAuthListeners()}))})()}signOut(){var g=this;return(0,E.Z)(function*(){return yield g.beforeStateQueue.runMiddleware(null),(g.redirectPersistenceManager||g._popupRedirectResolver)&&(yield g._setRedirectUser(null)),g._updateCurrentUser(null,!0)})()}setPersistence(g){var v=this;return this.queue((0,E.Z)(function*(){yield v.assertedPersistence.setPersistence(Le(g))}))}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(g){var v=this;return(0,E.Z)(function*(){v._getPasswordPolicyInternal()||(yield v._updatePasswordPolicy());const C=v._getPasswordPolicyInternal();return C.schemaVersion!==v.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(v._errorFactory.create("unsupported-password-policy-schema-version",{})):C.validatePassword(g)})()}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){var g=this;return(0,E.Z)(function*(){const v=yield function Hi(D){return Ds.apply(this,arguments)}(g),C=new Yo(v);null===g.tenantId?g._projectPasswordPolicy=C:g._tenantPasswordPolicies[g.tenantId]=C})()}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(g){this._errorFactory=new le.LL("auth","Firebase",g())}onAuthStateChanged(g,v,C){return this.registerStateListener(this.authStateSubscription,g,v,C)}beforeAuthStateChanged(g,v){return this.beforeStateQueue.pushCallback(g,v)}onIdTokenChanged(g,v,C){return this.registerStateListener(this.idTokenSubscription,g,v,C)}authStateReady(){return new Promise((g,v)=>{if(this.currentUser)g();else{const C=this.onAuthStateChanged(()=>{C(),g()},v)}})}toJSON(){var g;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(g=this._currentUser)||void 0===g?void 0:g.toJSON()}}_setRedirectUser(g,v){var C=this;return(0,E.Z)(function*(){const $=yield C.getOrInitRedirectPersistenceManager(v);return null===g?$.removeCurrentUser():$.setCurrentUser(g)})()}getOrInitRedirectPersistenceManager(g){var v=this;return(0,E.Z)(function*(){if(!v.redirectPersistenceManager){const C=g&&Le(g)||v._popupRedirectResolver;de(C,v,"argument-error"),v.redirectPersistenceManager=yield gn.create(v,[Le(C._redirectPersistence)],"redirectUser"),v.redirectUser=yield v.redirectPersistenceManager.getCurrentUser()}return v.redirectPersistenceManager})()}_redirectUserForId(g){var v=this;return(0,E.Z)(function*(){var C,$;return v._isInitialized&&(yield v.queue((0,E.Z)(function*(){}))),(null===(C=v._currentUser)||void 0===C?void 0:C._redirectEventId)===g?v._currentUser:(null===($=v.redirectUser)||void 0===$?void 0:$._redirectEventId)===g?v.redirectUser:null})()}_persistUserIfCurrent(g){var v=this;return(0,E.Z)(function*(){if(g===v.currentUser)return v.queue((0,E.Z)(function*(){return v.directlySetCurrentUser(g)}))})()}_notifyListenersIfCurrent(g){g===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var g,v;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const C=null!==(v=null===(g=this.currentUser)||void 0===g?void 0:g.uid)&&void 0!==v?v:null;this.lastNotifiedUid!==C&&(this.lastNotifiedUid=C,this.authStateSubscription.next(this.currentUser))}registerStateListener(g,v,C,$){if(this._deleted)return()=>{};const X="function"==typeof v?v:v.next.bind(v);let De=!1;const We=this._isInitialized?Promise.resolve():this._initializationPromise;if(de(We,this,"internal-error"),We.then(()=>{De||X(this.currentUser)}),"function"==typeof v){const gt=g.addObserver(v,C,$);return()=>{De=!0,gt()}}{const gt=g.addObserver(v);return()=>{De=!0,gt()}}}directlySetCurrentUser(g){var v=this;return(0,E.Z)(function*(){v.currentUser&&v.currentUser!==g&&v._currentUser._stopProactiveRefresh(),g&&v.isProactiveRefreshEnabled&&g._startProactiveRefresh(),v.currentUser=g,g?yield v.assertedPersistence.setCurrentUser(g):yield v.assertedPersistence.removeCurrentUser()})()}queue(g){return this.operations=this.operations.then(g,g),this.operations}get assertedPersistence(){return de(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(g){!g||this.frameworks.includes(g)||(this.frameworks.push(g),this.frameworks.sort(),this.clientVersion=Mr(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var g=this;return(0,E.Z)(function*(){var v;const C={"X-Client-Version":g.clientVersion};g.app.options.appId&&(C["X-Firebase-gmpid"]=g.app.options.appId);const $=yield null===(v=g.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===v?void 0:v.getHeartbeatsHeader();$&&(C["X-Firebase-Client"]=$);const X=yield g._getAppCheckToken();return X&&(C["X-Firebase-AppCheck"]=X),C})()}_getAppCheckToken(){var g=this;return(0,E.Z)(function*(){var v;const C=yield null===(v=g.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===v?void 0:v.getToken();return C?.error&&function Re(D,...g){jt.logLevel<=Ne.in.WARN&&jt.warn(`Auth (${Oe.SDK_VERSION}): ${D}`,...g)}(`Error while retrieving App Check token: ${C.error}`),C?.token})()}}function Mn(D){return(0,le.m9)(D)}class Ya{constructor(g){this.auth=g,this.observer=null,this.addObserver=(0,le.ne)(v=>this.observer=v)}get next(){return de(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function $s(D){return new Promise((g,v)=>{const C=document.createElement("script");C.setAttribute("src",D),C.onload=g,C.onerror=$=>{const X=Pe("internal-error");X.customData=$,v(X)},C.type="text/javascript",C.charset="UTF-8",function ro(){var D,g;return null!==(g=null===(D=document.getElementsByTagName("head"))||void 0===D?void 0:D[0])&&void 0!==g?g:document}().appendChild(C)})}function Zo(D){return`__${D}${Math.floor(1e6*Math.random())}`}class Jo{constructor(g){this.type="recaptcha-enterprise",this.auth=Mn(g)}verify(g="verify",v=!1){var C=this;return(0,E.Z)(function*(){function X(){return X=(0,E.Z)(function*(We){if(!v){if(null==We.tenantId&&null!=We._agentRecaptchaConfig)return We._agentRecaptchaConfig.siteKey;if(null!=We.tenantId&&void 0!==We._tenantRecaptchaConfigs[We.tenantId])return We._tenantRecaptchaConfigs[We.tenantId].siteKey}return new Promise(function(){var gt=(0,E.Z)(function*(rn,_n){Lt(We,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(yn=>{if(void 0!==yn.recaptchaKey){const cs=new ze(yn);return null==We.tenantId?We._agentRecaptchaConfig=cs:We._tenantRecaptchaConfigs[We.tenantId]=cs,rn(cs.siteKey)}_n(new Error("recaptcha Enterprise site key undefined"))}).catch(yn=>{_n(yn)})});return function(rn,_n){return gt.apply(this,arguments)}}())}),X.apply(this,arguments)}function De(We,gt,rn){const _n=window.grecaptcha;xe(_n)?_n.enterprise.ready(()=>{_n.enterprise.execute(We,{action:g}).then(yn=>{gt(yn)}).catch(()=>{gt("NO_RECAPTCHA")})}):rn(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((We,gt)=>{(function $(We){return X.apply(this,arguments)})(C.auth).then(rn=>{if(!v&&xe(window.grecaptcha))De(rn,We,gt);else{if(typeof window>"u")return void gt(new Error("RecaptchaVerifier is only supported in browser"));$s("https://www.google.com/recaptcha/enterprise.js?render="+rn).then(()=>{De(rn,We,gt)}).catch(_n=>{gt(_n)})}}).catch(rn=>{gt(rn)})})})()}}function fr(D,g,v){return Tr.apply(this,arguments)}function Tr(){return(Tr=(0,E.Z)(function*(D,g,v,C=!1){const $=new Jo(D);let X;try{X=yield $.verify(v)}catch{X=yield $.verify(v,!0)}const De=Object.assign({},g);return Object.assign(De,C?{captchaResp:X}:{captchaResponse:X}),Object.assign(De,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(De,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),De})).apply(this,arguments)}function ci(D,g,v,C){return zr.apply(this,arguments)}function zr(){return zr=(0,E.Z)(function*(D,g,v,C){var $;if(null!==($=D._getRecaptchaConfig())&&void 0!==$&&$.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const X=yield fr(D,g,v,"getOobCode"===v);return C(D,X)}return C(D,g).catch(function(){var X=(0,E.Z)(function*(De){if("auth/missing-recaptcha-token"===De.code){console.log(`${v} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const We=yield fr(D,g,v,"getOobCode"===v);return C(D,We)}return Promise.reject(De)});return function(De){return X.apply(this,arguments)}}())}),zr.apply(this,arguments)}function Ki(D){const g=D.indexOf(":");return g<0?"":D.substr(0,g+1)}function Za(D){if(!D)return null;const g=Number(D);return isNaN(g)?null:g}class Po{constructor(g,v){this.providerId=g,this.signInMethod=v}toJSON(){return Ot("not implemented")}_getIdTokenResponse(g){return Ot("not implemented")}_linkToIdToken(g,v){return Ot("not implemented")}_getReauthenticationResolver(g){return Ot("not implemented")}}function Ja(D,g){return zs.apply(this,arguments)}function zs(){return(zs=(0,E.Z)(function*(D,g){return Xe(D,"POST","/v1/accounts:resetPassword",Ue(D,g))})).apply(this,arguments)}function ea(D,g){return _o.apply(this,arguments)}function _o(){return(_o=(0,E.Z)(function*(D,g){return Xe(D,"POST","/v1/accounts:update",g)})).apply(this,arguments)}function ks(){return(ks=(0,E.Z)(function*(D,g){return Xe(D,"POST","/v1/accounts:update",Ue(D,g))})).apply(this,arguments)}function Yn(D,g){return bi.apply(this,arguments)}function bi(){return(bi=(0,E.Z)(function*(D,g){return Ut(D,"POST","/v1/accounts:signInWithPassword",Ue(D,g))})).apply(this,arguments)}function fi(D,g){return ns.apply(this,arguments)}function ns(){return(ns=(0,E.Z)(function*(D,g){return Xe(D,"POST","/v1/accounts:sendOobCode",Ue(D,g))})).apply(this,arguments)}function rs(){return(rs=(0,E.Z)(function*(D,g){return fi(D,g)})).apply(this,arguments)}function Yi(D,g){return _i.apply(this,arguments)}function _i(){return(_i=(0,E.Z)(function*(D,g){return fi(D,g)})).apply(this,arguments)}function As(D,g){return Ss.apply(this,arguments)}function Ss(){return(Ss=(0,E.Z)(function*(D,g){return fi(D,g)})).apply(this,arguments)}function xt(){return(xt=(0,E.Z)(function*(D,g){return fi(D,g)})).apply(this,arguments)}function nr(){return(nr=(0,E.Z)(function*(D,g){return Ut(D,"POST","/v1/accounts:signInWithEmailLink",Ue(D,g))})).apply(this,arguments)}function Zi(){return(Zi=(0,E.Z)(function*(D,g){return Ut(D,"POST","/v1/accounts:signInWithEmailLink",Ue(D,g))})).apply(this,arguments)}class ei extends Po{constructor(g,v,C,$=null){super("password",C),this._email=g,this._password=v,this._tenantId=$}static _fromEmailAndPassword(g,v){return new ei(g,v,"password")}static _fromEmailAndCode(g,v,C=null){return new ei(g,v,"emailLink",C)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(g){const v="string"==typeof g?JSON.parse(g):g;if(v?.email&&v?.password){if("password"===v.signInMethod)return this._fromEmailAndPassword(v.email,v.password);if("emailLink"===v.signInMethod)return this._fromEmailAndCode(v.email,v.password,v.tenantId)}return null}_getIdTokenResponse(g){var v=this;return(0,E.Z)(function*(){switch(v.signInMethod){case"password":return ci(g,{returnSecureToken:!0,email:v._email,password:v._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",Yn);case"emailLink":return function Cn(D,g){return nr.apply(this,arguments)}(g,{email:v._email,oobCode:v._password});default:He(g,"internal-error")}})()}_linkToIdToken(g,v){var C=this;return(0,E.Z)(function*(){switch(C.signInMethod){case"password":return ea(g,{idToken:v,returnSecureToken:!0,email:C._email,password:C._password});case"emailLink":return function ii(D,g){return Zi.apply(this,arguments)}(g,{idToken:v,email:C._email,oobCode:C._password});default:He(g,"internal-error")}})()}_getReauthenticationResolver(g){return this._getIdTokenResponse(g)}}function si(D,g){return rr.apply(this,arguments)}function rr(){return(rr=(0,E.Z)(function*(D,g){return Ut(D,"POST","/v1/accounts:signInWithIdp",Ue(D,g))})).apply(this,arguments)}class Cr extends Po{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(g){const v=new Cr(g.providerId,g.signInMethod);return g.idToken||g.accessToken?(g.idToken&&(v.idToken=g.idToken),g.accessToken&&(v.accessToken=g.accessToken),g.nonce&&!g.pendingToken&&(v.nonce=g.nonce),g.pendingToken&&(v.pendingToken=g.pendingToken)):g.oauthToken&&g.oauthTokenSecret?(v.accessToken=g.oauthToken,v.secret=g.oauthTokenSecret):He("argument-error"),v}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(g){const v="string"==typeof g?JSON.parse(g):g,{providerId:C,signInMethod:$}=v,X=(0,Te._T)(v,["providerId","signInMethod"]);if(!C||!$)return null;const De=new Cr(C,$);return De.idToken=X.idToken||void 0,De.accessToken=X.accessToken||void 0,De.secret=X.secret,De.nonce=X.nonce,De.pendingToken=X.pendingToken||null,De}_getIdTokenResponse(g){return si(g,this.buildRequest())}_linkToIdToken(g,v){const C=this.buildRequest();return C.idToken=v,si(g,C)}_getReauthenticationResolver(g){const v=this.buildRequest();return v.autoCreate=!1,si(g,v)}buildRequest(){const g={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)g.pendingToken=this.pendingToken;else{const v={};this.idToken&&(v.id_token=this.idToken),this.accessToken&&(v.access_token=this.accessToken),this.secret&&(v.oauth_token_secret=this.secret),v.providerId=this.providerId,this.nonce&&!this.pendingToken&&(v.nonce=this.nonce),g.postBody=(0,le.xO)(v)}return g}}function yi(){return(yi=(0,E.Z)(function*(D,g){return Xe(D,"POST","/v1/accounts:sendVerificationCode",Ue(D,g))})).apply(this,arguments)}function Qi(){return(Qi=(0,E.Z)(function*(D,g){return Ut(D,"POST","/v1/accounts:signInWithPhoneNumber",Ue(D,g))})).apply(this,arguments)}function ar(){return(ar=(0,E.Z)(function*(D,g){const v=yield Ut(D,"POST","/v1/accounts:signInWithPhoneNumber",Ue(D,g));if(v.temporaryProof)throw $n(D,"account-exists-with-different-credential",v);return v})).apply(this,arguments)}const Oo={USER_NOT_FOUND:"user-not-found"};function Ji(){return(Ji=(0,E.Z)(function*(D,g){return Ut(D,"POST","/v1/accounts:signInWithPhoneNumber",Ue(D,Object.assign(Object.assign({},g),{operation:"REAUTH"})),Oo)})).apply(this,arguments)}class gs extends Po{constructor(g){super("phone","phone"),this.params=g}static _fromVerification(g,v){return new gs({verificationId:g,verificationCode:v})}static _fromTokenResponse(g,v){return new gs({phoneNumber:g,temporaryProof:v})}_getIdTokenResponse(g){return function so(D,g){return Qi.apply(this,arguments)}(g,this._makeVerificationRequest())}_linkToIdToken(g,v){return function pi(D,g){return ar.apply(this,arguments)}(g,Object.assign({idToken:v},this._makeVerificationRequest()))}_getReauthenticationResolver(g){return function wi(D,g){return Ji.apply(this,arguments)}(g,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:g,phoneNumber:v,verificationId:C,verificationCode:$}=this.params;return g&&v?{temporaryProof:g,phoneNumber:v}:{sessionInfo:C,code:$}}toJSON(){const g={providerId:this.providerId};return this.params.phoneNumber&&(g.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(g.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(g.verificationCode=this.params.verificationCode),this.params.verificationId&&(g.verificationId=this.params.verificationId),g}static fromJSON(g){"string"==typeof g&&(g=JSON.parse(g));const{verificationId:v,verificationCode:C,phoneNumber:$,temporaryProof:X}=g;return C||v||$||X?new gs({verificationId:v,verificationCode:C,phoneNumber:$,temporaryProof:X}):null}}class _s{constructor(g){var v,C,$,X,De,We;const gt=(0,le.zd)((0,le.pd)(g)),rn=null!==(v=gt.apiKey)&&void 0!==v?v:null,_n=null!==(C=gt.oobCode)&&void 0!==C?C:null,yn=function to(D){switch(D){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==($=gt.mode)&&void 0!==$?$:null);de(rn&&_n&&yn,"argument-error"),this.apiKey=rn,this.operation=yn,this.code=_n,this.continueUrl=null!==(X=gt.continueUrl)&&void 0!==X?X:null,this.languageCode=null!==(De=gt.languageCode)&&void 0!==De?De:null,this.tenantId=null!==(We=gt.tenantId)&&void 0!==We?We:null}static parseLink(g){const v=function ms(D){const g=(0,le.zd)((0,le.pd)(D)).link,v=g?(0,le.zd)((0,le.pd)(g)).deep_link_id:null,C=(0,le.zd)((0,le.pd)(D)).deep_link_id;return(C?(0,le.zd)((0,le.pd)(C)).link:null)||C||v||g||D}(g);try{return new _s(v)}catch{return null}}}let Vn=(()=>{class D{constructor(){this.providerId=D.PROVIDER_ID}static credential(v,C){return ei._fromEmailAndPassword(v,C)}static credentialWithLink(v,C){const $=_s.parseLink(C);return de($,"argument-error"),ei._fromEmailAndCode(v,$.code,$.tenantId)}}return D.PROVIDER_ID="password",D.EMAIL_PASSWORD_SIGN_IN_METHOD="password",D.EMAIL_LINK_SIGN_IN_METHOD="emailLink",D})();class Di{constructor(g){this.providerId=g,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(g){this.defaultLanguageCode=g}setCustomParameters(g){return this.customParameters=g,this}getCustomParameters(){return this.customParameters}}class ys extends Di{constructor(){super(...arguments),this.scopes=[]}addScope(g){return this.scopes.includes(g)||this.scopes.push(g),this}getScopes(){return[...this.scopes]}}class Rs extends ys{static credentialFromJSON(g){const v="string"==typeof g?JSON.parse(g):g;return de("providerId"in v&&"signInMethod"in v,"argument-error"),Cr._fromParams(v)}credential(g){return this._credential(Object.assign(Object.assign({},g),{nonce:g.rawNonce}))}_credential(g){return de(g.idToken||g.accessToken,"argument-error"),Cr._fromParams(Object.assign(Object.assign({},g),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(g){return Rs.oauthCredentialFromTaggedObject(g)}static credentialFromError(g){return Rs.oauthCredentialFromTaggedObject(g.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{oauthIdToken:v,oauthAccessToken:C,oauthTokenSecret:$,pendingToken:X,nonce:De,providerId:We}=g;if(!C&&!$&&!v&&!X||!We)return null;try{return new Rs(We)._credential({idToken:v,accessToken:C,nonce:De,pendingToken:X})}catch{return null}}}let Fs=(()=>{class D extends ys{constructor(){super("facebook.com")}static credential(v){return Cr._fromParams({providerId:D.PROVIDER_ID,signInMethod:D.FACEBOOK_SIGN_IN_METHOD,accessToken:v})}static credentialFromResult(v){return D.credentialFromTaggedObject(v)}static credentialFromError(v){return D.credentialFromTaggedObject(v.customData||{})}static credentialFromTaggedObject({_tokenResponse:v}){if(!v||!("oauthAccessToken"in v)||!v.oauthAccessToken)return null;try{return D.credential(v.oauthAccessToken)}catch{return null}}}return D.FACEBOOK_SIGN_IN_METHOD="facebook.com",D.PROVIDER_ID="facebook.com",D})(),pa=(()=>{class D extends ys{constructor(){super("google.com"),this.addScope("profile")}static credential(v,C){return Cr._fromParams({providerId:D.PROVIDER_ID,signInMethod:D.GOOGLE_SIGN_IN_METHOD,idToken:v,accessToken:C})}static credentialFromResult(v){return D.credentialFromTaggedObject(v)}static credentialFromError(v){return D.credentialFromTaggedObject(v.customData||{})}static credentialFromTaggedObject({_tokenResponse:v}){if(!v)return null;const{oauthIdToken:C,oauthAccessToken:$}=v;if(!C&&!$)return null;try{return D.credential(C,$)}catch{return null}}}return D.GOOGLE_SIGN_IN_METHOD="google.com",D.PROVIDER_ID="google.com",D})(),Ws=(()=>{class D extends ys{constructor(){super("github.com")}static credential(v){return Cr._fromParams({providerId:D.PROVIDER_ID,signInMethod:D.GITHUB_SIGN_IN_METHOD,accessToken:v})}static credentialFromResult(v){return D.credentialFromTaggedObject(v)}static credentialFromError(v){return D.credentialFromTaggedObject(v.customData||{})}static credentialFromTaggedObject({_tokenResponse:v}){if(!v||!("oauthAccessToken"in v)||!v.oauthAccessToken)return null;try{return D.credential(v.oauthAccessToken)}catch{return null}}}return D.GITHUB_SIGN_IN_METHOD="github.com",D.PROVIDER_ID="github.com",D})();class ti extends Po{constructor(g,v){super(g,g),this.pendingToken=v}_getIdTokenResponse(g){return si(g,this.buildRequest())}_linkToIdToken(g,v){const C=this.buildRequest();return C.idToken=v,si(g,C)}_getReauthenticationResolver(g){const v=this.buildRequest();return v.autoCreate=!1,si(g,v)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(g){const v="string"==typeof g?JSON.parse(g):g,{providerId:C,signInMethod:$,pendingToken:X}=v;return C&&$&&X&&C===$?new ti(C,X):null}static _create(g,v){return new ti(g,v)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class Fr extends Di{constructor(g){de(g.startsWith("saml."),"argument-error"),super(g)}static credentialFromResult(g){return Fr.samlCredentialFromTaggedObject(g)}static credentialFromError(g){return Fr.samlCredentialFromTaggedObject(g.customData||{})}static credentialFromJSON(g){const v=ti.fromJSON(g);return de(v,"argument-error"),v}static samlCredentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{pendingToken:v,providerId:C}=g;if(!v||!C)return null;try{return ti._create(C,v)}catch{return null}}}let Xi=(()=>{class D extends ys{constructor(){super("twitter.com")}static credential(v,C){return Cr._fromParams({providerId:D.PROVIDER_ID,signInMethod:D.TWITTER_SIGN_IN_METHOD,oauthToken:v,oauthTokenSecret:C})}static credentialFromResult(v){return D.credentialFromTaggedObject(v)}static credentialFromError(v){return D.credentialFromTaggedObject(v.customData||{})}static credentialFromTaggedObject({_tokenResponse:v}){if(!v)return null;const{oauthAccessToken:C,oauthTokenSecret:$}=v;if(!C||!$)return null;try{return D.credential(C,$)}catch{return null}}}return D.TWITTER_SIGN_IN_METHOD="twitter.com",D.PROVIDER_ID="twitter.com",D})();function Ns(D,g){return qs.apply(this,arguments)}function qs(){return(qs=(0,E.Z)(function*(D,g){return Ut(D,"POST","/v1/accounts:signUp",Ue(D,g))})).apply(this,arguments)}class Ur{constructor(g){this.user=g.user,this.providerId=g.providerId,this._tokenResponse=g._tokenResponse,this.operationType=g.operationType}static _fromIdTokenResponse(g,v,C,$=!1){return(0,E.Z)(function*(){const X=yield re._fromIdTokenResponse(g,C,$),De=Ls(C);return new Ur({user:X,providerId:De,_tokenResponse:C,operationType:v})})()}static _forOperation(g,v,C){return(0,E.Z)(function*(){yield g._updateTokensIfNecessary(C,!0);const $=Ls(C);return new Ur({user:g,providerId:$,_tokenResponse:C,operationType:v})})()}}function Ls(D){return D.providerId?D.providerId:"phoneNumber"in D?"phone":null}function yo(){return(yo=(0,E.Z)(function*(D){var g;const v=Mn(D);if(yield v._initializationPromise,null!==(g=v.currentUser)&&void 0!==g&&g.isAnonymous)return new Ur({user:v.currentUser,providerId:null,operationType:"signIn"});const C=yield Ns(v,{returnSecureToken:!0}),$=yield Ur._fromIdTokenResponse(v,"signIn",C,!0);return yield v._updateCurrentUser($.user),$})).apply(this,arguments)}class ta extends le.ZR{constructor(g,v,C,$){var X;super(v.code,v.message),this.operationType=C,this.user=$,Object.setPrototypeOf(this,ta.prototype),this.customData={appName:g.name,tenantId:null!==(X=g.tenantId)&&void 0!==X?X:void 0,_serverResponse:v.customData._serverResponse,operationType:C}}static _fromErrorAndOperation(g,v,C,$){return new ta(g,v,C,$)}}function Bu(D,g,v,C){return("reauthenticate"===g?v._getReauthenticationResolver(D):v._getIdTokenResponse(D)).catch(X=>{throw"auth/multi-factor-auth-required"===X.code?ta._fromErrorAndOperation(D,X,g,C):X})}function na(D){return new Set(D.map(({providerId:g})=>g).filter(g=>!!g))}function xo(){return xo=(0,E.Z)(function*(D,g){const v=(0,le.m9)(D);yield Ar(!0,v,g);const{providerUserInfo:C}=yield function ln(D,g){return mn.apply(this,arguments)}(v.auth,{idToken:yield v.getIdToken(),deleteProvider:[g]}),$=na(C||[]);return v.providerData=v.providerData.filter(X=>$.has(X.providerId)),$.has("phone")||(v.phoneNumber=null),yield v.auth._persistUserIfCurrent(v),v}),xo.apply(this,arguments)}function Ma(D,g){return ko.apply(this,arguments)}function ko(){return(ko=(0,E.Z)(function*(D,g,v=!1){const C=yield Dn(D,g._linkToIdToken(D.auth,yield D.getIdToken()),v);return Ur._forOperation(D,"link",C)})).apply(this,arguments)}function Ar(D,g,v){return ra.apply(this,arguments)}function ra(){return(ra=(0,E.Z)(function*(D,g,v){yield dr(g);const $=!1===D?"provider-already-linked":"no-such-provider";de(na(g.providerData).has(v)===D,g.auth,$)})).apply(this,arguments)}function xa(D,g){return q.apply(this,arguments)}function q(){return(q=(0,E.Z)(function*(D,g,v=!1){const{auth:C}=D,$="reauthenticate";try{const X=yield Dn(D,Bu(C,$,g,D),v);de(X.idToken,C,"internal-error");const De=Wi(X.idToken);de(De,C,"internal-error");const{sub:We}=De;return de(D.uid===We,C,"user-mismatch"),Ur._forOperation(D,$,X)}catch(X){throw"auth/user-not-found"===X?.code&&He(C,"user-mismatch"),X}})).apply(this,arguments)}function K(D,g){return j.apply(this,arguments)}function j(){return(j=(0,E.Z)(function*(D,g,v=!1){const C="signIn",$=yield Bu(D,C,g),X=yield Ur._fromIdTokenResponse(D,C,$);return v||(yield D._updateCurrentUser(X.user)),X})).apply(this,arguments)}function oe(D,g){return Ae.apply(this,arguments)}function Ae(){return(Ae=(0,E.Z)(function*(D,g){return K(Mn(D),g)})).apply(this,arguments)}function nn(D,g){return Sn.apply(this,arguments)}function Sn(){return(Sn=(0,E.Z)(function*(D,g){const v=(0,le.m9)(D);return yield Ar(!1,v,g.providerId),Ma(v,g)})).apply(this,arguments)}function Gi(D,g){return vs.apply(this,arguments)}function vs(){return(vs=(0,E.Z)(function*(D,g){return xa((0,le.m9)(D),g)})).apply(this,arguments)}function Fo(){return(Fo=(0,E.Z)(function*(D,g){return Ut(D,"POST","/v1/accounts:signInWithCustomToken",Ue(D,g))})).apply(this,arguments)}function is(){return is=(0,E.Z)(function*(D,g){const v=Mn(D),C=yield function vo(D,g){return Fo.apply(this,arguments)}(v,{token:g,returnSecureToken:!0}),$=yield Ur._fromIdTokenResponse(v,"signIn",C);return yield v._updateCurrentUser($.user),$}),is.apply(this,arguments)}class Lo{constructor(g,v){this.factorId=g,this.uid=v.mfaEnrollmentId,this.enrollmentTime=new Date(v.enrolledAt).toUTCString(),this.displayName=v.displayName}static _fromServerResponse(g,v){return"phoneInfo"in v?Ll._fromServerResponse(g,v):"totpInfo"in v?Ci._fromServerResponse(g,v):He(g,"internal-error")}}class Ll extends Lo{constructor(g){super("phone",g),this.phoneNumber=g.phoneInfo}static _fromServerResponse(g,v){return new Ll(v)}}class Ci extends Lo{constructor(g){super("totp",g)}static _fromServerResponse(g,v){return new Ci(v)}}function Vs(D,g,v){var C;de((null===(C=v.url)||void 0===C?void 0:C.length)>0,D,"invalid-continue-uri"),de(typeof v.dynamicLinkDomain>"u"||v.dynamicLinkDomain.length>0,D,"invalid-dynamic-link-domain"),g.continueUrl=v.url,g.dynamicLinkDomain=v.dynamicLinkDomain,g.canHandleCodeInApp=v.handleCodeInApp,v.iOS&&(de(v.iOS.bundleId.length>0,D,"missing-ios-bundle-id"),g.iOSBundleId=v.iOS.bundleId),v.android&&(de(v.android.packageName.length>0,D,"missing-android-pkg-name"),g.androidInstallApp=v.android.installApp,g.androidMinimumVersionCode=v.android.minimumVersion,g.androidPackageName=v.android.packageName)}function Is(D){return ma.apply(this,arguments)}function ma(){return(ma=(0,E.Z)(function*(D){const g=Mn(D);g._getPasswordPolicyInternal()&&(yield g._updatePasswordPolicy())})).apply(this,arguments)}function Vo(){return(Vo=(0,E.Z)(function*(D,g,v){const C=Mn(D),$={requestType:"PASSWORD_RESET",email:g,clientType:"CLIENT_TYPE_WEB"};v&&Vs(C,$,v),yield ci(C,$,"getOobCode",Yi)})).apply(this,arguments)}function Io(){return Io=(0,E.Z)(function*(D,g,v){yield Ja((0,le.m9)(D),{oobCode:g,newPassword:v}).catch(function(){var C=(0,E.Z)(function*($){throw"auth/password-does-not-meet-requirements"===$.code&&Is(D),$});return function($){return C.apply(this,arguments)}}())}),Io.apply(this,arguments)}function Bo(){return Bo=(0,E.Z)(function*(D,g){yield function Oa(D,g){return ks.apply(this,arguments)}((0,le.m9)(D),{oobCode:g})}),Bo.apply(this,arguments)}function Vl(D,g){return tl.apply(this,arguments)}function tl(){return(tl=(0,E.Z)(function*(D,g){const v=(0,le.m9)(D),C=yield Ja(v,{oobCode:g}),$=C.requestType;switch(de($,v,"internal-error"),$){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":de(C.newEmail,v,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":de(C.mfaInfo,v,"internal-error");default:de(C.email,v,"internal-error")}let X=null;return C.mfaInfo&&(X=Lo._fromServerResponse(Mn(v),C.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===C.requestType?C.newEmail:C.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===C.requestType?C.email:C.newEmail)||null,multiFactorInfo:X},operation:$}})).apply(this,arguments)}function ka(){return(ka=(0,E.Z)(function*(D,g){const{data:v}=yield Vl((0,le.m9)(D),g);return v.email})).apply(this,arguments)}function oo(){return(oo=(0,E.Z)(function*(D,g,v){const C=Mn(D),De=yield ci(C,{returnSecureToken:!0,email:g,password:v,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Ns).catch(gt=>{throw"auth/password-does-not-meet-requirements"===gt.code&&Is(D),gt}),We=yield Ur._fromIdTokenResponse(C,"signIn",De);return yield C._updateCurrentUser(We.user),We})).apply(this,arguments)}function Uo(){return(Uo=(0,E.Z)(function*(D,g,v){const C=Mn(D),$={requestType:"EMAIL_SIGNIN",email:g,clientType:"CLIENT_TYPE_WEB"};(function X(De,We){de(We.handleCodeInApp,C,"argument-error"),We&&Vs(C,De,We)})($,v),yield ci(C,$,"getOobCode",As)})).apply(this,arguments)}function Ul(){return(Ul=(0,E.Z)(function*(D,g,v){const C=(0,le.m9)(D),$=Vn.credentialWithLink(g,v||Jn());return de($._tenantId===(C.tenantId||null),C,"tenant-id-mismatch"),oe(C,$)})).apply(this,arguments)}function nl(){return(nl=(0,E.Z)(function*(D,g){return Xe(D,"POST","/v1/accounts:createAuthUri",Ue(D,g))})).apply(this,arguments)}function Fa(){return Fa=(0,E.Z)(function*(D,g){const C={identifier:g,continueUri:On()?Jn():"http://localhost"},{signinMethods:$}=yield function Ac(D,g){return nl.apply(this,arguments)}((0,le.m9)(D),C);return $||[]}),Fa.apply(this,arguments)}function lo(){return lo=(0,E.Z)(function*(D,g){const v=(0,le.m9)(D),$={requestType:"VERIFY_EMAIL",idToken:yield D.getIdToken()};g&&Vs(v.auth,$,g);const{email:X}=yield function Dr(D,g){return rs.apply(this,arguments)}(v.auth,$);X!==D.email&&(yield D.reload())}),lo.apply(this,arguments)}function ss(){return ss=(0,E.Z)(function*(D,g,v){const C=(0,le.m9)(D),X={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield D.getIdToken(),newEmail:g};v&&Vs(C.auth,X,v);const{email:De}=yield function xr(D,g){return xt.apply(this,arguments)}(C.auth,X);De!==D.email&&(yield D.reload())}),ss.apply(this,arguments)}function O(){return(O=(0,E.Z)(function*(D,g){return Xe(D,"POST","/v1/accounts:update",g)})).apply(this,arguments)}function H(){return H=(0,E.Z)(function*(D,{displayName:g,photoURL:v}){if(void 0===g&&void 0===v)return;const C=(0,le.m9)(D),X={idToken:yield C.getIdToken(),displayName:g,photoUrl:v,returnSecureToken:!0},De=yield Dn(C,function fu(D,g){return O.apply(this,arguments)}(C.auth,X));C.displayName=De.displayName||null,C.photoURL=De.photoUrl||null;const We=C.providerData.find(({providerId:gt})=>"password"===gt);We&&(We.displayName=C.displayName,We.photoURL=C.photoURL),yield C._updateTokensIfNecessary(De)}),H.apply(this,arguments)}function et(D,g,v){return ct.apply(this,arguments)}function ct(){return(ct=(0,E.Z)(function*(D,g,v){const{auth:C}=D,X={idToken:yield D.getIdToken(),returnSecureToken:!0};g&&(X.email=g),v&&(X.password=v);const De=yield Dn(D,ea(C,X));yield D._updateTokensIfNecessary(De,!0)})).apply(this,arguments)}class ir{constructor(g,v,C={}){this.isNewUser=g,this.providerId=v,this.profile=C}}class yr extends ir{constructor(g,v,C,$){super(g,v,C),this.username=$}}class Xn extends ir{constructor(g,v){super(g,"facebook.com",v)}}class bn extends yr{constructor(g,v){super(g,"github.com",v,"string"==typeof v?.login?v?.login:null)}}class oi extends ir{constructor(g,v){super(g,"google.com",v)}}class kr extends yr{constructor(g,v,C){super(g,"twitter.com",v,C)}}function Ai(D){const{user:g,_tokenResponse:v}=D;return g.isAnonymous&&!v?{providerId:null,isNewUser:!1,profile:null}:function dn(D){var g,v;if(!D)return null;const{providerId:C}=D,$=D.rawUserInfo?JSON.parse(D.rawUserInfo):{},X=D.isNewUser||"identitytoolkit#SignupNewUserResponse"===D.kind;if(!C&&D?.idToken){const De=null===(v=null===(g=Wi(D.idToken))||void 0===g?void 0:g.firebase)||void 0===v?void 0:v.sign_in_provider;if(De)return new ir(X,"anonymous"!==De&&"custom"!==De?De:null)}if(!C)return null;switch(C){case"facebook.com":return new Xn(X,$);case"github.com":return new bn(X,$);case"google.com":return new oi(X,$);case"twitter.com":return new kr(X,$,D.screenName||null);case"custom":case"anonymous":return new ir(X,null);default:return new ir(X,C,$)}}(v)}class To{constructor(g,v,C){this.type=g,this.credential=v,this.user=C}static _fromIdtoken(g,v){return new To("enroll",g,v)}static _fromMfaPendingCredential(g){return new To("signin",g)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(g){var v,C;if(g?.multiFactorSession){if(null!==(v=g.multiFactorSession)&&void 0!==v&&v.pendingCredential)return To._fromMfaPendingCredential(g.multiFactorSession.pendingCredential);if(null!==(C=g.multiFactorSession)&&void 0!==C&&C.idToken)return To._fromIdtoken(g.multiFactorSession.idToken)}return null}}class oa{constructor(g,v,C){this.session=g,this.hints=v,this.signInResolver=C}static _fromError(g,v){const C=Mn(g),$=v.customData._serverResponse,X=($.mfaInfo||[]).map(We=>Lo._fromServerResponse(C,We));de($.mfaPendingCredential,C,"internal-error");const De=To._fromMfaPendingCredential($.mfaPendingCredential);return new oa(De,X,function(){var We=(0,E.Z)(function*(gt){const rn=yield gt._process(C,De);delete $.mfaInfo,delete $.mfaPendingCredential;const _n=Object.assign(Object.assign({},$),{idToken:rn.idToken,refreshToken:rn.refreshToken});switch(v.operationType){case"signIn":const yn=yield Ur._fromIdTokenResponse(C,v.operationType,_n);return yield C._updateCurrentUser(yn.user),yn;case"reauthenticate":return de(v.user,C,"internal-error"),Ur._forOperation(v.user,v.operationType,_n);default:He(C,"internal-error")}});return function(gt){return We.apply(this,arguments)}}())}resolveSignIn(g){var v=this;return(0,E.Z)(function*(){return v.signInResolver(g)})()}}class Tt{constructor(g){this.user=g,this.enrolledFactors=[],g._onReload(v=>{v.mfaInfo&&(this.enrolledFactors=v.mfaInfo.map(C=>Lo._fromServerResponse(g.auth,C)))})}static _fromUser(g){return new Tt(g)}getSession(){var g=this;return(0,E.Z)(function*(){return To._fromIdtoken(yield g.user.getIdToken(),g.user)})()}enroll(g,v){var C=this;return(0,E.Z)(function*(){const $=g,X=yield C.getSession(),De=yield Dn(C.user,$._process(C.user.auth,X,v));return yield C.user._updateTokensIfNecessary(De),C.user.reload()})()}unenroll(g){var v=this;return(0,E.Z)(function*(){const C="string"==typeof g?g:g.uid,$=yield v.user.getIdToken();try{const X=yield Dn(v.user,function rl(D,g){return Xe(D,"POST","/v2/accounts/mfaEnrollment:withdraw",Ue(D,g))}(v.user.auth,{idToken:$,mfaEnrollmentId:C}));v.enrolledFactors=v.enrolledFactors.filter(({uid:De})=>De!==C),yield v.user._updateTokensIfNecessary(X),yield v.user.reload()}catch(X){throw X}})()}}const Si=new WeakMap,il="__sak";class on{constructor(g,v){this.storageRetriever=g,this.type=v}_isAvailable(){try{return this.storage?(this.storage.setItem(il,"1"),this.storage.removeItem(il),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(g,v){return this.storage.setItem(g,JSON.stringify(v)),Promise.resolve()}_get(g){const v=this.storage.getItem(g);return Promise.resolve(v?JSON.parse(v):null)}_remove(g){return this.storage.removeItem(g),Promise.resolve()}get storage(){return this.storageRetriever()}}const It=(()=>{class D extends on{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(v,C)=>this.onStorageEvent(v,C),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function vn(){const D=(0,le.z$)();return Br(D)||vt(D)}()&&function ui(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=tr(),this._shouldAllowMigration=!0}forAllChangedKeys(v){for(const C of Object.keys(this.listeners)){const $=this.storage.getItem(C),X=this.localCache[C];$!==X&&v(C,X,$)}}onStorageEvent(v,C=!1){if(!v.key)return void this.forAllChangedKeys((We,gt,rn)=>{this.notifyListeners(We,rn)});const $=v.key;if(C?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const We=this.storage.getItem($);if(v.newValue!==We)null!==v.newValue?this.storage.setItem($,v.newValue):this.storage.removeItem($);else if(this.localCache[$]===v.newValue&&!C)return}const X=()=>{const We=this.storage.getItem($);!C&&this.localCache[$]===We||this.notifyListeners($,We)},De=this.storage.getItem($);!function qt(){return(0,le.w1)()&&10===document.documentMode}()||De===v.newValue||v.newValue===v.oldValue?X():setTimeout(X,10)}notifyListeners(v,C){this.localCache[v]=C;const $=this.listeners[v];if($)for(const X of Array.from($))X(C&&JSON.parse(C))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((v,C,$)=>{this.onStorageEvent(new StorageEvent("storage",{key:v,oldValue:C,newValue:$}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(v,C){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[v]||(this.listeners[v]=new Set,this.localCache[v]=this.storage.getItem(v)),this.listeners[v].add(C)}_removeListener(v,C){this.listeners[v]&&(this.listeners[v].delete(C),0===this.listeners[v].size&&delete this.listeners[v]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(v,C){var $=()=>super._set,X=this;return(0,E.Z)(function*(){yield $().call(X,v,C),X.localCache[v]=JSON.stringify(C)})()}_get(v){var C=()=>super._get,$=this;return(0,E.Z)(function*(){const X=yield C().call($,v);return $.localCache[v]=JSON.stringify(X),X})()}_remove(v){var C=()=>super._remove,$=this;return(0,E.Z)(function*(){yield C().call($,v),delete $.localCache[v]})()}}return D.type="LOCAL",D})(),Va=(()=>{class D extends on{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(v,C){}_removeListener(v,C){}}return D.type="SESSION",D})();let Hl=(()=>{class D{constructor(v){this.eventTarget=v,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(v){const C=this.receivers.find(X=>X.isListeningto(v));if(C)return C;const $=new D(v);return this.receivers.push($),$}isListeningto(v){return this.eventTarget===v}handleEvent(v){var C=this;return(0,E.Z)(function*(){const $=v,{eventId:X,eventType:De,data:We}=$.data,gt=C.handlersMap[De];if(!gt?.size)return;$.ports[0].postMessage({status:"ack",eventId:X,eventType:De});const rn=Array.from(gt).map(function(){var yn=(0,E.Z)(function*(cs){return cs($.origin,We)});return function(cs){return yn.apply(this,arguments)}}()),_n=yield function ph(D){return Promise.all(D.map(function(){var g=(0,E.Z)(function*(v){try{return{fulfilled:!0,value:yield v}}catch(C){return{fulfilled:!1,reason:C}}});return function(v){return g.apply(this,arguments)}}()))}(rn);$.ports[0].postMessage({status:"done",eventId:X,eventType:De,response:_n})})()}_subscribe(v,C){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[v]||(this.handlersMap[v]=new Set),this.handlersMap[v].add(C)}_unsubscribe(v,C){this.handlersMap[v]&&C&&this.handlersMap[v].delete(C),(!C||0===this.handlersMap[v].size)&&delete this.handlersMap[v],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return D.receivers=[],D})();function sl(D="",g=10){let v="";for(let C=0;C<g;C++)v+=Math.floor(10*Math.random());return D+v}class Kc{constructor(g){this.target=g,this.handlers=new Set}removeMessageHandler(g){g.messageChannel&&(g.messageChannel.port1.removeEventListener("message",g.onMessage),g.messageChannel.port1.close()),this.handlers.delete(g)}_send(g,v,C=50){var $=this;return(0,E.Z)(function*(){const X=typeof MessageChannel<"u"?new MessageChannel:null;if(!X)throw new Error("connection_unavailable");let De,We;return new Promise((gt,rn)=>{const _n=sl("",20);X.port1.start();const yn=setTimeout(()=>{rn(new Error("unsupported_event"))},C);We={messageChannel:X,onMessage(cs){const Nl=cs;if(Nl.data.eventId===_n)switch(Nl.data.status){case"ack":clearTimeout(yn),De=setTimeout(()=>{rn(new Error("timeout"))},3e3);break;case"done":clearTimeout(De),gt(Nl.data.response);break;default:clearTimeout(yn),clearTimeout(De),rn(new Error("invalid_response"))}}},$.handlers.add(We),X.port1.addEventListener("message",We.onMessage),$.target.postMessage({eventType:g,eventId:_n,data:v},[X.port2])}).finally(()=>{We&&$.removeMessageHandler(We)})})()}}function pr(){return window}function Zc(){return typeof pr().WorkerGlobalScope<"u"&&"function"==typeof pr().importScripts}function br(){return(br=(0,E.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const $i="firebaseLocalStorageDb",jr="firebaseLocalStorage",un="fbase_key";class wo{constructor(g){this.request=g}toPromise(){return new Promise((g,v)=>{this.request.addEventListener("success",()=>{g(this.request.result)}),this.request.addEventListener("error",()=>{v(this.request.error)})})}}function lr(D,g){return D.transaction([jr],g?"readwrite":"readonly").objectStore(jr)}function vi(){const D=indexedDB.open($i,1);return new Promise((g,v)=>{D.addEventListener("error",()=>{v(D.error)}),D.addEventListener("upgradeneeded",()=>{const C=D.result;try{C.createObjectStore(jr,{keyPath:un})}catch($){v($)}}),D.addEventListener("success",(0,E.Z)(function*(){const C=D.result;C.objectStoreNames.contains(jr)?g(C):(C.close(),yield function Sd(){const D=indexedDB.deleteDatabase($i);return new wo(D).toPromise()}(),g(yield vi()))}))})}function Zt(D,g,v){return Ri.apply(this,arguments)}function Ri(){return(Ri=(0,E.Z)(function*(D,g,v){const C=lr(D,!0).put({[un]:g,value:v});return new wo(C).toPromise()})).apply(this,arguments)}function aa(){return(aa=(0,E.Z)(function*(D,g){const v=lr(D,!1).get(g),C=yield new wo(v).toPromise();return void 0===C?null:C.value})).apply(this,arguments)}function Gl(D,g){const v=lr(D,!0).delete(g);return new wo(v).toPromise()}const $l=(()=>{class D{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var v=this;return(0,E.Z)(function*(){return v.db||(v.db=yield vi()),v.db})()}_withRetries(v){var C=this;return(0,E.Z)(function*(){let $=0;for(;;)try{const X=yield C._openDb();return yield v(X)}catch(X){if($++>3)throw X;C.db&&(C.db.close(),C.db=void 0)}})()}initializeServiceWorkerMessaging(){var v=this;return(0,E.Z)(function*(){return Zc()?v.initializeReceiver():v.initializeSender()})()}initializeReceiver(){var v=this;return(0,E.Z)(function*(){v.receiver=Hl._getInstance(function Zn(){return Zc()?self:null}()),v.receiver._subscribe("keyChanged",function(){var C=(0,E.Z)(function*($,X){return{keyProcessed:(yield v._poll()).includes(X.key)}});return function($,X){return C.apply(this,arguments)}}()),v.receiver._subscribe("ping",function(){var C=(0,E.Z)(function*($,X){return["keyChanged"]});return function($,X){return C.apply(this,arguments)}}())})()}initializeSender(){var v=this;return(0,E.Z)(function*(){var C,$;if(v.activeServiceWorker=yield function Dt(){return br.apply(this,arguments)}(),!v.activeServiceWorker)return;v.sender=new Kc(v.activeServiceWorker);const X=yield v.sender._send("ping",{},800);X&&null!==(C=X[0])&&void 0!==C&&C.fulfilled&&null!==($=X[0])&&void 0!==$&&$.value.includes("keyChanged")&&(v.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(v){var C=this;return(0,E.Z)(function*(){if(C.sender&&C.activeServiceWorker&&function Ad(){var D;return(null===(D=navigator?.serviceWorker)||void 0===D?void 0:D.controller)||null}()===C.activeServiceWorker)try{yield C.sender._send("keyChanged",{key:v},C.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,E.Z)(function*(){try{if(!indexedDB)return!1;const v=yield vi();return yield Zt(v,il,"1"),yield Gl(v,il),!0}catch{}return!1})()}_withPendingWrite(v){var C=this;return(0,E.Z)(function*(){C.pendingWrites++;try{yield v()}finally{C.pendingWrites--}})()}_set(v,C){var $=this;return(0,E.Z)(function*(){return $._withPendingWrite((0,E.Z)(function*(){return yield $._withRetries(X=>Zt(X,v,C)),$.localCache[v]=C,$.notifyServiceWorker(v)}))})()}_get(v){var C=this;return(0,E.Z)(function*(){const $=yield C._withRetries(X=>function ya(D,g){return aa.apply(this,arguments)}(X,v));return C.localCache[v]=$,$})()}_remove(v){var C=this;return(0,E.Z)(function*(){return C._withPendingWrite((0,E.Z)(function*(){return yield C._withRetries($=>Gl($,v)),delete C.localCache[v],C.notifyServiceWorker(v)}))})()}_poll(){var v=this;return(0,E.Z)(function*(){const C=yield v._withRetries(De=>{const We=lr(De,!1).getAll();return new wo(We).toPromise()});if(!C)return[];if(0!==v.pendingWrites)return[];const $=[],X=new Set;for(const{fbase_key:De,value:We}of C)X.add(De),JSON.stringify(v.localCache[De])!==JSON.stringify(We)&&(v.notifyListeners(De,We),$.push(De));for(const De of Object.keys(v.localCache))v.localCache[De]&&!X.has(De)&&(v.notifyListeners(De,null),$.push(De));return $})()}notifyListeners(v,C){this.localCache[v]=C;const $=this.listeners[v];if($)for(const X of Array.from($))X(C)}startPolling(){var v=this;this.stopPolling(),this.pollTimer=setInterval((0,E.Z)(function*(){return v._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(v,C){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[v]||(this.listeners[v]=new Set,this._get(v)),this.listeners[v].add(C)}_removeListener(v,C){this.listeners[v]&&(this.listeners[v].delete(C),0===this.listeners[v].size&&delete this.listeners[v]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return D.type="LOCAL",D})(),A=1e12;class L{constructor(g){this.auth=g,this.counter=A,this._widgets=new Map}render(g,v){const C=this.counter;return this._widgets.set(C,new V(g,this.auth.name,v||{})),this.counter++,C}reset(g){var v;const C=g||A;null===(v=this._widgets.get(C))||void 0===v||v.delete(),this._widgets.delete(C)}getResponse(g){var v;return(null===(v=this._widgets.get(g||A))||void 0===v?void 0:v.getResponse())||""}execute(g){var v=this;return(0,E.Z)(function*(){var C;return null===(C=v._widgets.get(g||A))||void 0===C||C.execute(),""})()}}class V{constructor(g,v,C){this.params=C,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const $="string"==typeof g?document.getElementById(g):g;de($,"argument-error",{appName:v}),this.container=$,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function te(D){const g=[],v="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let C=0;C<D;C++)g.push(v.charAt(Math.floor(62*Math.random())));return g.join("")}(50);const{callback:g,"expired-callback":v}=this.params;if(g)try{g(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,v)try{v()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const he=Zo("rcb"),Qe=new Bt(3e4,6e4);class Ht{constructor(){var g;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(g=pr().grecaptcha)||void 0===g||!g.render)}load(g,v=""){return de(function Qn(D){return D.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(D)}(v),g,"argument-error"),this.shouldResolveImmediately(v)&&Ee(pr().grecaptcha)?Promise.resolve(pr().grecaptcha):new Promise((C,$)=>{const X=pr().setTimeout(()=>{$(Pe(g,"network-request-failed"))},Qe.get());pr()[he]=()=>{pr().clearTimeout(X),delete pr()[he];const We=pr().grecaptcha;if(!We||!Ee(We))return void $(Pe(g,"internal-error"));const gt=We.render;We.render=(rn,_n)=>{const yn=gt(rn,_n);return this.counter++,yn},this.hostLanguage=v,C(We)},$s(`https://www.google.com/recaptcha/api.js??${(0,le.xO)({onload:he,render:"explicit",hl:v})}`).catch(()=>{clearTimeout(X),$(Pe(g,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(g){var v;return!(null===(v=pr().grecaptcha)||void 0===v||!v.render)&&(g===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class Wr{load(g){return(0,E.Z)(function*(){return new L(g)})()}clearedOneInstance(){}}const kn="recaptcha",zi={theme:"light",type:"image"};class gi{constructor(g,v,C=Object.assign({},zi)){this.parameters=C,this.type=kn,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Mn(g),this.isInvisible="invisible"===this.parameters.size,de(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const $="string"==typeof v?document.getElementById(v):v;de($,this.auth,"argument-error"),this.container=$,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Wr:new Ht,this.validateStartingState()}verify(){var g=this;return(0,E.Z)(function*(){g.assertNotDestroyed();const v=yield g.render(),C=g.getAssertedRecaptcha();return C.getResponse(v)||new Promise(X=>{const De=We=>{We&&(g.tokenChangeListeners.delete(De),X(We))};g.tokenChangeListeners.add(De),g.isInvisible&&C.execute(v)})})()}render(){try{this.assertNotDestroyed()}catch(g){return Promise.reject(g)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(g=>{throw this.renderPromise=null,g})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(g=>{this.container.removeChild(g)})}validateStartingState(){de(!this.parameters.sitekey,this.auth,"argument-error"),de(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),de(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(g){return v=>{if(this.tokenChangeListeners.forEach(C=>C(v)),"function"==typeof g)g(v);else if("string"==typeof g){const C=pr()[g];"function"==typeof C&&C(v)}}}assertNotDestroyed(){de(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var g=this;return(0,E.Z)(function*(){if(yield g.init(),!g.widgetId){let v=g.container;if(!g.isInvisible){const C=document.createElement("div");v.appendChild(C),v=C}g.widgetId=g.getAssertedRecaptcha().render(v,g.parameters)}return g.widgetId})()}init(){var g=this;return(0,E.Z)(function*(){de(On()&&!Zc(),g.auth,"internal-error"),yield function Gu(){let D=null;return new Promise(g=>{"complete"!==document.readyState?(D=()=>g(),window.addEventListener("load",D)):g()}).catch(g=>{throw D&&window.removeEventListener("load",D),g})}(),g.recaptcha=yield g._recaptchaLoader.load(g.auth,g.auth.languageCode||void 0);const v=yield function lt(D){return pt.apply(this,arguments)}(g.auth);de(v,g.auth,"internal-error"),g.parameters.sitekey=v})()}getAssertedRecaptcha(){return de(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class os{constructor(g,v){this.verificationId=g,this.onConfirmation=v}confirm(g){const v=gs._fromVerification(this.verificationId,g);return this.onConfirmation(v)}}function va(){return(va=(0,E.Z)(function*(D,g,v){const C=Mn(D),$=yield jo(C,g,(0,le.m9)(v));return new os($,X=>oe(C,X))})).apply(this,arguments)}function Ts(){return(Ts=(0,E.Z)(function*(D,g,v){const C=(0,le.m9)(D);yield Ar(!1,C,"phone");const $=yield jo(C.auth,g,(0,le.m9)(v));return new os($,X=>nn(C,X))})).apply(this,arguments)}function Ni(){return(Ni=(0,E.Z)(function*(D,g,v){const C=(0,le.m9)(D),$=yield jo(C.auth,g,(0,le.m9)(v));return new os($,X=>Gi(C,X))})).apply(this,arguments)}function jo(D,g,v){return bl.apply(this,arguments)}function bl(){return bl=(0,E.Z)(function*(D,g,v){var C;const $=yield v.verify();try{let X;if(de("string"==typeof $,D,"argument-error"),de(v.type===kn,D,"argument-error"),X="string"==typeof g?{phoneNumber:g}:g,"session"in X){const De=X.session;if("phoneNumber"in X)return de("enroll"===De.type,D,"internal-error"),(yield function Zr(D,g){return Xe(D,"POST","/v2/accounts/mfaEnrollment:start",Ue(D,g))}(D,{idToken:De.credential,phoneEnrollmentInfo:{phoneNumber:X.phoneNumber,recaptchaToken:$}})).phoneSessionInfo.sessionInfo;{de("signin"===De.type,D,"internal-error");const We=(null===(C=X.multiFactorHint)||void 0===C?void 0:C.uid)||X.multiFactorUid;return de(We,D,"missing-multi-factor-info"),(yield function gh(D,g){return Xe(D,"POST","/v2/accounts/mfaSignIn:start",Ue(D,g))}(D,{mfaPendingCredential:De.credential,mfaEnrollmentId:We,phoneSignInInfo:{recaptchaToken:$}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:De}=yield function En(D,g){return yi.apply(this,arguments)}(D,{phoneNumber:X.phoneNumber,recaptchaToken:$});return De}}finally{v._reset()}}),bl.apply(this,arguments)}function Ia(){return(Ia=(0,E.Z)(function*(D,g){yield Ma((0,le.m9)(D),g)})).apply(this,arguments)}let mu=(()=>{class D{constructor(v){this.providerId=D.PROVIDER_ID,this.auth=Mn(v)}verifyPhoneNumber(v,C){return jo(this.auth,v,(0,le.m9)(C))}static credential(v,C){return gs._fromVerification(v,C)}static credentialFromResult(v){return D.credentialFromTaggedObject(v)}static credentialFromError(v){return D.credentialFromTaggedObject(v.customData||{})}static credentialFromTaggedObject({_tokenResponse:v}){if(!v)return null;const{phoneNumber:C,temporaryProof:$}=v;return C&&$?gs._fromTokenResponse(C,$):null}}return D.PROVIDER_ID="phone",D.PHONE_SIGN_IN_METHOD="phone",D})();function Ho(D,g){return g?Le(g):(de(D._popupRedirectResolver,D,"argument-error"),D._popupRedirectResolver)}class Wl extends Po{constructor(g){super("custom","custom"),this.params=g}_getIdTokenResponse(g){return si(g,this._buildIdpRequest())}_linkToIdToken(g,v){return si(g,this._buildIdpRequest(v))}_getReauthenticationResolver(g){return si(g,this._buildIdpRequest())}_buildIdpRequest(g){const v={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return g&&(v.idToken=g),v}}function _h(D){return K(D.auth,new Wl(D),D.bypassAuthState)}function _u(D){const{auth:g,user:v}=D;return de(v,g,"internal-error"),xa(v,new Wl(D),D.bypassAuthState)}function yu(D){return Rc.apply(this,arguments)}function Rc(){return(Rc=(0,E.Z)(function*(D){const{auth:g,user:v}=D;return de(v,g,"internal-error"),Ma(v,new Wl(D),D.bypassAuthState)})).apply(this,arguments)}class cf{constructor(g,v,C,$,X=!1){this.auth=g,this.resolver=C,this.user=$,this.bypassAuthState=X,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(v)?v:[v]}execute(){var g=this;return new Promise(function(){var v=(0,E.Z)(function*(C,$){g.pendingPromise={resolve:C,reject:$};try{g.eventManager=yield g.resolver._initialize(g.auth),yield g.onExecution(),g.eventManager.registerConsumer(g)}catch(X){g.reject(X)}});return function(C,$){return v.apply(this,arguments)}}())}onAuthEvent(g){var v=this;return(0,E.Z)(function*(){const{urlResponse:C,sessionId:$,postBody:X,tenantId:De,error:We,type:gt}=g;if(We)return void v.reject(We);const rn={auth:v.auth,requestUri:C,sessionId:$,tenantId:De||void 0,postBody:X||void 0,user:v.user,bypassAuthState:v.bypassAuthState};try{v.resolve(yield v.getIdpTask(gt)(rn))}catch(_n){v.reject(_n)}})()}onError(g){this.reject(g)}getIdpTask(g){switch(g){case"signInViaPopup":case"signInViaRedirect":return _h;case"linkViaPopup":case"linkViaRedirect":return yu;case"reauthViaPopup":case"reauthViaRedirect":return _u;default:He(this.auth,"internal-error")}}resolve(g){wt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(g),this.unregisterAndCleanUp()}reject(g){wt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(g),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Rd=new Bt(2e3,1e4);function $u(){return($u=(0,E.Z)(function*(D,g,v){const C=Mn(D);ot(D,g,Di);const $=Ho(C,v);return new ol(C,"signInViaPopup",g,$).executeNotNull()})).apply(this,arguments)}function Jc(){return(Jc=(0,E.Z)(function*(D,g,v){const C=(0,le.m9)(D);ot(C.auth,g,Di);const $=Ho(C.auth,v);return new ol(C.auth,"reauthViaPopup",g,$,C).executeNotNull()})).apply(this,arguments)}function ql(){return(ql=(0,E.Z)(function*(D,g,v){const C=(0,le.m9)(D);ot(C.auth,g,Di);const $=Ho(C.auth,v);return new ol(C.auth,"linkViaPopup",g,$,C).executeNotNull()})).apply(this,arguments)}let ol=(()=>{class D extends cf{constructor(v,C,$,X,De){super(v,C,X,De),this.provider=$,this.authWindow=null,this.pollId=null,D.currentPopupAction&&D.currentPopupAction.cancel(),D.currentPopupAction=this}executeNotNull(){var v=this;return(0,E.Z)(function*(){const C=yield v.execute();return de(C,v.auth,"internal-error"),C})()}onExecution(){var v=this;return(0,E.Z)(function*(){wt(1===v.filter.length,"Popup operations only handle one event");const C=sl();v.authWindow=yield v.resolver._openPopup(v.auth,v.provider,v.filter[0],C),v.authWindow.associatedEvent=C,v.resolver._originValidation(v.auth).catch($=>{v.reject($)}),v.resolver._isIframeWebStorageSupported(v.auth,$=>{$||v.reject(Pe(v.auth,"web-storage-unsupported"))}),v.pollUserCancellation()})()}get eventId(){var v;return(null===(v=this.authWindow)||void 0===v?void 0:v.associatedEvent)||null}cancel(){this.reject(Pe(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,D.currentPopupAction=null}pollUserCancellation(){const v=()=>{var C,$;this.pollId=null!==($=null===(C=this.authWindow)||void 0===C?void 0:C.window)&&void 0!==$&&$.closed?window.setTimeout(()=>{this.pollId=null,this.reject(Pe(this.auth,"popup-closed-by-user"))},8e3):window.setTimeout(v,Rd.get())};v()}}return D.currentPopupAction=null,D})();const df="pendingRedirect",Ms=new Map;class zu extends cf{constructor(g,v,C=!1){super(g,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],v,void 0,C),this.eventId=null}execute(){var g=()=>super.execute,v=this;return(0,E.Z)(function*(){let C=Ms.get(v.auth._key());if(!C){try{const X=(yield function Nd(D,g){return vu.apply(this,arguments)}(v.resolver,v.auth))?yield g().call(v):null;C=()=>Promise.resolve(X)}catch($){C=()=>Promise.reject($)}Ms.set(v.auth._key(),C)}return v.bypassAuthState||Ms.set(v.auth._key(),()=>Promise.resolve(null)),C()})()}onAuthEvent(g){var v=()=>super.onAuthEvent,C=this;return(0,E.Z)(function*(){if("signInViaRedirect"===g.type)return v().call(C,g);if("unknown"!==g.type){if(g.eventId){const $=yield C.auth._redirectUserForId(g.eventId);if($)return C.user=$,v().call(C,g);C.resolve(null)}}else C.resolve(null)})()}onExecution(){return(0,E.Z)(function*(){})()}cleanUp(){}}function vu(){return(vu=(0,E.Z)(function*(D,g){const v=al(g),C=hi(D);if(!(yield C._isAvailable()))return!1;const $="true"===(yield C._get(v));return yield C._remove(v),$})).apply(this,arguments)}function as(D,g){return Wu.apply(this,arguments)}function Wu(){return(Wu=(0,E.Z)(function*(D,g){return hi(D)._set(al(g),"true")})).apply(this,arguments)}function Go(D,g){Ms.set(D._key(),g)}function hi(D){return Le(D._redirectPersistence)}function al(D){return $t(df,D.config.apiKey,D.name)}function ls(D,g,v){return function Qr(D,g,v){return Kl.apply(this,arguments)}(D,g,v)}function Kl(){return(Kl=(0,E.Z)(function*(D,g,v){const C=Mn(D);ot(D,g,Di),yield C._initializationPromise;const $=Ho(C,v);return yield as($,C),$._openRedirect(C,g,"signInViaRedirect")})).apply(this,arguments)}function Ku(D,g,v){return function la(D,g,v){return Yu.apply(this,arguments)}(D,g,v)}function Yu(){return(Yu=(0,E.Z)(function*(D,g,v){const C=(0,le.m9)(D);ot(C.auth,g,Di),yield C.auth._initializationPromise;const $=Ho(C.auth,v);yield as($,C.auth);const X=yield Zl(C);return $._openRedirect(C.auth,g,"reauthViaRedirect",X)})).apply(this,arguments)}function gp(D,g,v){return function Bs(D,g,v){return Zu.apply(this,arguments)}(D,g,v)}function Zu(){return(Zu=(0,E.Z)(function*(D,g,v){const C=(0,le.m9)(D);ot(C.auth,g,Di),yield C.auth._initializationPromise;const $=Ho(C.auth,v);yield Ar(!1,C,g.providerId),yield as($,C.auth);const X=yield Zl(C);return $._openRedirect(C.auth,g,"linkViaRedirect",X)})).apply(this,arguments)}function ai(){return(ai=(0,E.Z)(function*(D,g){return yield Mn(D)._initializationPromise,Sr(D,g,!1)})).apply(this,arguments)}function Sr(D,g){return ua.apply(this,arguments)}function ua(){return(ua=(0,E.Z)(function*(D,g,v=!1){const C=Mn(D),$=Ho(C,g),De=yield new zu(C,$,v).execute();return De&&!v&&(delete De.user._redirectEventId,yield C._persistUserIfCurrent(De.user),yield C._setRedirectUser(null,g)),De})).apply(this,arguments)}function Zl(D){return ll.apply(this,arguments)}function ll(){return(ll=(0,E.Z)(function*(D){const g=sl(`${D.uid}:::`);return D._redirectEventId=g,yield D.auth._setRedirectUser(D),yield D.auth._persistUserIfCurrent(D),g})).apply(this,arguments)}class Ea{constructor(g){this.auth=g,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(g){this.consumers.add(g),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,g)&&(this.sendToConsumer(this.queuedRedirectEvent,g),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(g){this.consumers.delete(g)}onEvent(g){if(this.hasEventBeenHandled(g))return!1;let v=!1;return this.consumers.forEach(C=>{this.isEventForConsumer(g,C)&&(v=!0,this.sendToConsumer(g,C),this.saveEventToCache(g))}),this.hasHandledPotentialRedirect||!function wl(D){switch(D.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Qu(D);default:return!1}}(g)||(this.hasHandledPotentialRedirect=!0,v||(this.queuedRedirectEvent=g,v=!0)),v}sendToConsumer(g,v){var C;if(g.error&&!Qu(g)){const $=(null===(C=g.error.code)||void 0===C?void 0:C.split("auth/")[1])||"internal-error";v.onError(Pe(this.auth,$))}else v.onAuthEvent(g)}isEventForConsumer(g,v){const C=null===v.eventId||!!g.eventId&&g.eventId===v.eventId;return v.filter.includes(g.type)&&C}hasEventBeenHandled(g){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Pi(g))}saveEventToCache(g){this.cachedEventUids.add(Pi(g)),this.lastProcessedEventTime=Date.now()}}function Pi(D){return[D.type,D.eventId,D.sessionId,D.tenantId].filter(g=>g).join("-")}function Qu({type:D,error:g}){return"unknown"===D&&"auth/no-auth-event"===g?.code}function ca(D){return Dl.apply(this,arguments)}function Dl(){return(Dl=(0,E.Z)(function*(D,g={}){return Xe(D,"GET","/v1/projects",g)})).apply(this,arguments)}const Cl=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Xc=/^https?/;function da(){return(da=(0,E.Z)(function*(D){if(D.config.emulator)return;const{authorizedDomains:g}=yield ca(D);for(const v of g)try{if(Ta(v))return}catch{}He(D,"unauthorized-domain")})).apply(this,arguments)}function Ta(D){const g=Jn(),{protocol:v,hostname:C}=new URL(g);if(D.startsWith("chrome-extension://")){const De=new URL(D);return""===De.hostname&&""===C?"chrome-extension:"===v&&D.replace("chrome-extension://","")===g.replace("chrome-extension://",""):"chrome-extension:"===v&&De.hostname===C}if(!Xc.test(v))return!1;if(Cl.test(D))return C===D;const $=D.replace(/\./g,"\\.");return new RegExp("^(.+\\."+$+"|"+$+")$","i").test(C)}const Ql=new Bt(3e4,6e4);function ul(){const D=pr().___jsl;if(D?.H)for(const g of Object.keys(D.H))if(D.H[g].r=D.H[g].r||[],D.H[g].L=D.H[g].L||[],D.H[g].r=[...D.H[g].L],D.CP)for(let v=0;v<D.CP.length;v++)D.CP[v]=null}let Iu=null;const Pd=new Bt(5e3,15e3),Ju="__/auth/iframe",ed="emulator/auth/iframe",mp={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},_p=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function hf(D){const g=D.config;de(g.authDomain,D,"auth-domain-config-required");const v=g.emulator?be(g,ed):`https://${D.config.authDomain}/${Ju}`,C={apiKey:g.apiKey,appName:D.name,v:Oe.SDK_VERSION},$=_p.get(D.config.apiHost);$&&(C.eid=$);const X=D._getFrameworks();return X.length&&(C.fw=X.join(",")),`${v}?${(0,le.xO)(C).slice(1)}`}function bs(){return bs=(0,E.Z)(function*(D){const g=yield function Jl(D){return Iu=Iu||function cl(D){return new Promise((g,v)=>{var C,$,X;function De(){ul(),gapi.load("gapi.iframes",{callback:()=>{g(gapi.iframes.getContext())},ontimeout:()=>{ul(),v(Pe(D,"network-request-failed"))},timeout:Ql.get()})}if(null!==($=null===(C=pr().gapi)||void 0===C?void 0:C.iframes)&&void 0!==$&&$.Iframe)g(gapi.iframes.getContext());else{if(null===(X=pr().gapi)||void 0===X||!X.load){const We=Zo("iframefcb");return pr()[We]=()=>{gapi.load?De():v(Pe(D,"network-request-failed"))},$s(`https://apis.google.com/js/api.js?onload=${We}`).catch(gt=>v(gt))}De()}}).catch(g=>{throw Iu=null,g})}(D),Iu}(D),v=pr().gapi;return de(v,D,"internal-error"),g.open({where:document.body,url:hf(D),messageHandlersFilter:v.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:mp,dontclear:!0},C=>new Promise(function(){var $=(0,E.Z)(function*(X,De){yield C.restyle({setHideOnLeave:!1});const We=Pe(D,"network-request-failed"),gt=pr().setTimeout(()=>{De(We)},Pd.get());function rn(){pr().clearTimeout(gt),X(C)}C.ping(rn).then(rn,()=>{De(We)})});return function(X,De){return $.apply(this,arguments)}}()))}),bs.apply(this,arguments)}const td={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Us{constructor(g){this.window=g,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}const vr="__/auth/handler",Kr="emulator/auth/handler",tc=encodeURIComponent("fac");function nc(D,g,v,C,$,X){return eu.apply(this,arguments)}function eu(){return(eu=(0,E.Z)(function*(D,g,v,C,$,X){de(D.config.authDomain,D,"auth-domain-config-required"),de(D.config.apiKey,D,"invalid-api-key");const De={apiKey:D.config.apiKey,appName:D.name,authType:v,redirectUrl:C,v:Oe.SDK_VERSION,eventId:$};if(g instanceof Di){g.setDefaultLanguage(D.languageCode),De.providerId=g.providerId||"",(0,le.xb)(g.getCustomParameters())||(De.customParameters=JSON.stringify(g.getCustomParameters()));for(const[_n,yn]of Object.entries(X||{}))De[_n]=yn}if(g instanceof ys){const _n=g.getScopes().filter(yn=>""!==yn);_n.length>0&&(De.scopes=_n.join(","))}D.tenantId&&(De.tid=D.tenantId);const We=De;for(const _n of Object.keys(We))void 0===We[_n]&&delete We[_n];const gt=yield D._getAppCheckToken(),rn=gt?`#${tc}=${encodeURIComponent(gt)}`:"";return`${function yh({config:D}){return D.emulator?be(D,Kr):`https://${D.authDomain}/${vr}`}(D)}?${(0,le.xO)(We).slice(1)}${rn}`})).apply(this,arguments)}const xs="webStorageSupport",tu=class Md{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Va,this._completeRedirectFn=Sr,this._overrideRedirectResult=Go}_openPopup(g,v,C,$){var X=this;return(0,E.Z)(function*(){var De;wt(null===(De=X.eventManagers[g._key()])||void 0===De?void 0:De.manager,"_initialize() not called before _openPopup()");const We=yield nc(g,v,C,Jn(),$);return function Xl(D,g,v,C=500,$=600){const X=Math.max((window.screen.availHeight-$)/2,0).toString(),De=Math.max((window.screen.availWidth-C)/2,0).toString();let We="";const gt=Object.assign(Object.assign({},td),{width:C.toString(),height:$.toString(),top:X,left:De}),rn=(0,le.z$)().toLowerCase();v&&(We=li(rn)?"_blank":v),hn(rn)&&(g=g||"http://localhost",gt.scrollbars="yes");const _n=Object.entries(gt).reduce((cs,[Nl,Au])=>`${cs}${Nl}=${Au},`,"");if(function In(D=(0,le.z$)()){var g;return vt(D)&&!(null===(g=window.navigator)||void 0===g||!g.standalone)}(rn)&&"_self"!==We)return function ec(D,g){const v=document.createElement("a");v.href=D,v.target=g;const C=document.createEvent("MouseEvent");C.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),v.dispatchEvent(C)}(g||"",We),new Us(null);const yn=window.open(g||"",We,_n);de(yn,D,"popup-blocked");try{yn.focus()}catch{}return new Us(yn)}(g,We,sl())})()}_openRedirect(g,v,C,$){var X=this;return(0,E.Z)(function*(){return yield X._originValidation(g),function Yc(D){pr().location.href=D}(yield nc(g,v,C,Jn(),$)),new Promise(()=>{})})()}_initialize(g){const v=g._key();if(this.eventManagers[v]){const{manager:$,promise:X}=this.eventManagers[v];return $?Promise.resolve($):(wt(X,"If manager is not set, promise should be"),X)}const C=this.initAndGetManager(g);return this.eventManagers[v]={promise:C},C.catch(()=>{delete this.eventManagers[v]}),C}initAndGetManager(g){var v=this;return(0,E.Z)(function*(){const C=yield function qr(D){return bs.apply(this,arguments)}(g),$=new Ea(g);return C.register("authEvent",X=>(de(X?.authEvent,g,"invalid-auth-event"),{status:$.onEvent(X.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),v.eventManagers[g._key()]={manager:$},v.iframes[g._key()]=C,$})()}_isIframeWebStorageSupported(g,v){this.iframes[g._key()].send(xs,{type:xs},$=>{var X;const De=null===(X=$?.[0])||void 0===X?void 0:X[xs];void 0!==De&&v(!!De),He(g,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(g){const v=g._key();return this.originValidationPromises[v]||(this.originValidationPromises[v]=function Ua(D){return da.apply(this,arguments)}(g)),this.originValidationPromises[v]}get _shouldInitProactively(){return tr()||Br()||vt()}};class yp{constructor(g){this.factorId=g}_process(g,v,C){switch(v.type){case"enroll":return this._finalizeEnroll(g,v.credential,C);case"signin":return this._finalizeSignIn(g,v.credential);default:return Ot("unexpected MultiFactorSessionType")}}}class Pc extends yp{constructor(g){super("phone"),this.credential=g}static _fromCredential(g){return new Pc(g)}_finalizeEnroll(g,v,C){return function Tl(D,g){return Xe(D,"POST","/v2/accounts/mfaEnrollment:finalize",Ue(D,g))}(g,{idToken:v,displayName:C,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(g,v){return function Do(D,g){return Xe(D,"POST","/v2/accounts/mfaSignIn:finalize",Ue(D,g))}(g,{mfaPendingCredential:v,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let vp=(()=>{class D{constructor(){}static assertion(v){return Pc._fromCredential(v)}}return D.FACTOR_ID="phone",D})();var kd="@firebase/auth";class Oc{constructor(g){this.auth=g,this.internalListeners=new Map}getUid(){var g;return this.assertAuthConfigured(),(null===(g=this.auth.currentUser)||void 0===g?void 0:g.uid)||null}getToken(g){var v=this;return(0,E.Z)(function*(){return v.assertAuthConfigured(),yield v.auth._initializationPromise,v.auth.currentUser?{accessToken:yield v.auth.currentUser.getIdToken(g)}:null})()}addAuthTokenListener(g){if(this.assertAuthConfigured(),this.internalListeners.has(g))return;const v=this.auth.onIdTokenChanged(C=>{g(C?.stsTokenManager.accessToken||null)});this.internalListeners.set(g,v),this.updateProactiveRefresh()}removeAuthTokenListener(g){this.assertAuthConfigured();const v=this.internalListeners.get(g);v&&(this.internalListeners.delete(g),v(),this.updateProactiveRefresh())}assertAuthConfigured(){de(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function js(){return window}(0,le.Pz)("authIdTokenMaxAge"),function ja(D){(0,Oe._registerComponent)(new ke.wA("auth",(g,{options:v})=>{const C=g.getProvider("app").getImmediate(),$=g.getProvider("heartbeat"),X=g.getProvider("app-check-internal"),{apiKey:De,authDomain:We}=C.options;de(De&&!De.includes(":"),"invalid-api-key",{appName:C.name});const gt={apiKey:De,authDomain:We,clientPlatform:D,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Mr(D)},rn=new Ka(C,$,X,gt);return function di(D,g){const v=g?.persistence||[],C=(Array.isArray(v)?v:[v]).map(Le);g?.errorMap&&D._updateErrorMap(g.errorMap),D._initializeWithPersistence(C,g?.popupRedirectResolver)}(rn,v),rn},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((g,v,C)=>{g.getProvider("auth-internal").initialize()})),(0,Oe._registerComponent)(new ke.wA("auth-internal",g=>{const v=Mn(g.getProvider("auth").getImmediate());return new Oc(v)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,Oe.registerVersion)(kd,"1.3.1",function nd(D){switch(D){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(D)),(0,Oe.registerVersion)(kd,"1.3.1","esm2017")}("Browser");function Ld(){return Ld=(0,E.Z)(function*(D,g,v){var C;const{BuildInfo:$}=js();wt(g.sessionId,"AuthEvent did not contain a session ID");const X=yield function je(D){return at.apply(this,arguments)}(g.sessionId),De={};return vt()?De.ibi=$.packageName:Qs()?De.apn=$.packageName:He(D,"operation-not-supported-in-this-environment"),$.displayName&&(De.appDisplayName=$.displayName),De.sessionId=X,nc(D,v,g.type,void 0,null!==(C=g.eventId)&&void 0!==C?C:void 0,De)}),Ld.apply(this,arguments)}function y(){return(y=(0,E.Z)(function*(D){const{BuildInfo:g}=js(),v={};vt()?v.iosBundleId=g.packageName:Qs()?v.androidPackageName=g.packageName:He(D,"operation-not-supported-in-this-environment"),yield ca(D,v)})).apply(this,arguments)}function Q(){return(Q=(0,E.Z)(function*(D,g,v){const{cordova:C}=js();let $=()=>{};try{yield new Promise((X,De)=>{let We=null;function gt(){var yn;X();const cs=null===(yn=C.plugins.browsertab)||void 0===yn?void 0:yn.close;"function"==typeof cs&&cs(),"function"==typeof v?.close&&v.close()}function rn(){We||(We=window.setTimeout(()=>{De(Pe(D,"redirect-cancelled-by-user"))},2e3))}function _n(){"visible"===document?.visibilityState&&rn()}g.addPassiveListener(gt),document.addEventListener("resume",rn,!1),Qs()&&document.addEventListener("visibilitychange",_n,!1),$=()=>{g.removePassiveListener(gt),document.removeEventListener("resume",rn,!1),document.removeEventListener("visibilitychange",_n,!1),We&&window.clearTimeout(We)}})}finally{$()}})).apply(this,arguments)}function at(){return(at=(0,E.Z)(function*(D){const g=function St(D){if(wt(/[0-9a-zA-Z]+/.test(D),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(D);const g=new ArrayBuffer(D.length),v=new Uint8Array(g);for(let C=0;C<D.length;C++)v[C]=D.charCodeAt(C);return v}(D),v=yield crypto.subtle.digest("SHA-256",g);return Array.from(new Uint8Array(v)).map($=>$.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}class Rn extends Ea{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(g=>{this.resolveInialized=g})}addPassiveListener(g){this.passiveListeners.add(g)}removePassiveListener(g){this.passiveListeners.delete(g)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(g){return this.resolveInialized(),this.passiveListeners.forEach(v=>v(g)),super.onEvent(g)}initialized(){var g=this;return(0,E.Z)(function*(){yield g.initPromise})()}}function no(D){return rd.apply(this,arguments)}function rd(){return(rd=(0,E.Z)(function*(D){const g=yield bu()._get(Ao(D));return g&&(yield bu()._remove(Ao(D))),g})).apply(this,arguments)}function id(){const D=[];for(let v=0;v<20;v++){const C=Math.floor(62*Math.random());D.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(C))}return D.join("")}function bu(){return Le(It)}function Ao(D){return $t("authEvent",D.config.apiKey,D.name)}function Al(D){if(!D?.includes("?"))return{};const[g,...v]=D.split("?");return(0,le.zd)(v.join("?"))}const gr=class ff{constructor(){this._redirectPersistence=Va,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=Sr,this._overrideRedirectResult=Go}_initialize(g){var v=this;return(0,E.Z)(function*(){const C=g._key();let $=v.eventManagers.get(C);return $||($=new Rn(g),v.eventManagers.set(C,$),v.attachCallbackListeners(g,$)),$})()}_openPopup(g){He(g,"operation-not-supported-in-this-environment")}_openRedirect(g,v,C,$){var X=this;return(0,E.Z)(function*(){!function ce(D){var g,v,C,$,X,De,We,gt,rn,_n;const yn=js();de("function"==typeof(null===(g=yn?.universalLinks)||void 0===g?void 0:g.subscribe),D,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),de(typeof(null===(v=yn?.BuildInfo)||void 0===v?void 0:v.packageName)<"u",D,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),de("function"==typeof(null===(X=null===($=null===(C=yn?.cordova)||void 0===C?void 0:C.plugins)||void 0===$?void 0:$.browsertab)||void 0===X?void 0:X.openUrl),D,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),de("function"==typeof(null===(gt=null===(We=null===(De=yn?.cordova)||void 0===De?void 0:De.plugins)||void 0===We?void 0:We.browsertab)||void 0===gt?void 0:gt.isAvailable),D,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),de("function"==typeof(null===(_n=null===(rn=yn?.cordova)||void 0===rn?void 0:rn.InAppBrowser)||void 0===_n?void 0:_n.open),D,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(g);const De=yield X._initialize(g);yield De.initialized(),De.resetRedirect(),function qu(){Ms.clear()}(),yield X._originValidation(g);const We=function Lr(D,g,v=null){return{type:g,eventId:v,urlResponse:null,sessionId:id(),postBody:null,tenantId:D.tenantId,error:Pe(D,"no-auth-event")}}(g,C,$);yield function ba(D,g){return bu()._set(Ao(D),g)}(g,We);const gt=yield function Mc(D,g,v){return Ld.apply(this,arguments)}(g,We,v),rn=yield function w(D){const{cordova:g}=js();return new Promise(v=>{g.plugins.browsertab.isAvailable(C=>{let $=null;C?g.plugins.browsertab.openUrl(D):$=g.InAppBrowser.open(D,function sn(D=(0,le.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(D)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(D)}()?"_blank":"_system","location=yes"),v($)})})}(gt);return function x(D,g,v){return Q.apply(this,arguments)}(g,De,rn)})()}_isIframeWebStorageSupported(g,v){throw new Error("Method not implemented.")}_originValidation(g){const v=g._key();return this.originValidationPromises[v]||(this.originValidationPromises[v]=function P(D){return y.apply(this,arguments)}(g)),this.originValidationPromises[v]}attachCallbackListeners(g,v){const{universalLinks:C,handleOpenURL:$,BuildInfo:X}=js(),De=setTimeout((0,E.Z)(function*(){yield no(g),v.onEvent(xc())}),500),We=function(){var _n=(0,E.Z)(function*(yn){clearTimeout(De);const cs=yield no(g);let Nl=null;cs&&yn?.url&&(Nl=function Co(D,g){var v,C;const $=function sd(D){const g=Al(D),v=g.link?decodeURIComponent(g.link):void 0,C=Al(v).link,$=g.deep_link_id?decodeURIComponent(g.deep_link_id):void 0;return Al($).link||$||C||v||D}(g);if($.includes("/__/auth/callback")){const X=Al($),De=X.firebaseError?function Rr(D){try{return JSON.parse(D)}catch{return null}}(decodeURIComponent(X.firebaseError)):null,We=null===(C=null===(v=De?.code)||void 0===v?void 0:v.split("auth/"))||void 0===C?void 0:C[1],gt=We?Pe(We):null;return gt?{type:D.type,eventId:D.eventId,tenantId:D.tenantId,error:gt,urlResponse:null,sessionId:null,postBody:null}:{type:D.type,eventId:D.eventId,tenantId:D.tenantId,sessionId:D.sessionId,urlResponse:$,postBody:null}}return null}(cs,yn.url)),v.onEvent(Nl||xc())});return function(cs){return _n.apply(this,arguments)}}();typeof C<"u"&&"function"==typeof C.subscribe&&C.subscribe(null,We);const gt=$,rn=`${X.packageName.toLowerCase()}://`;js().handleOpenURL=function(){var _n=(0,E.Z)(function*(yn){if(yn.toLowerCase().startsWith(rn)&&We({url:yn}),"function"==typeof gt)try{gt(yn)}catch(cs){console.error(cs)}});return function(yn){return _n.apply(this,arguments)}}()}};function xc(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:Pe("no-auth-event")}}function Sl(){var D;return(null===(D=self?.location)||void 0===D?void 0:D.protocol)||null}function gf(D=(0,le.z$)()){return!("file:"!==Sl()&&"ionic:"!==Sl()&&"capacitor:"!==Sl()||!D.toLowerCase().match(/iphone|ipad|ipod|android/))}function Da(){try{const D=self.localStorage,g=sl();if(D)return D.setItem(g,"1"),D.removeItem(g),!function kc(D=(0,le.z$)()){return function $o(){return(0,le.w1)()&&11===document?.documentMode}()||function wa(D=(0,le.z$)()){return/Edge\/\d+/.test(D)}(D)}()||(0,le.hl)()}catch{return oc()&&(0,le.hl)()}return!1}function oc(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function Ca(){return(function Ip(){return"http:"===Sl()||"https:"===Sl()}()||(0,le.ru)()||gf())&&!function mf(){return(0,le.b$)()||(0,le.UG)()}()&&Da()&&!oc()}function Du(){return gf()&&typeof document<"u"}function ad(){return(ad=(0,E.Z)(function*(){return!!Du()&&new Promise(D=>{const g=setTimeout(()=>{D(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(g),D(!0)})})})).apply(this,arguments)}const Aa={LOCAL:"local",NONE:"none",SESSION:"session"},Fi=de,Eh="persistence";function Th(D){return Ep.apply(this,arguments)}function Ep(){return(Ep=(0,E.Z)(function*(D){yield D._initializationPromise;const g=Sa(),v=$t(Eh,D.config.apiKey,D.name);g&&g.setItem(v,D._getPersistence())})).apply(this,arguments)}function Sa(){var D;try{return(null===(D=function Sg(){return typeof window<"u"?window:null}())||void 0===D?void 0:D.sessionStorage)||null}catch{return null}}const vf=de;class Ha{constructor(){this.browserResolver=Le(tu),this.cordovaResolver=Le(gr),this.underlyingResolver=null,this._redirectPersistence=Va,this._completeRedirectFn=Sr,this._overrideRedirectResult=Go}_initialize(g){var v=this;return(0,E.Z)(function*(){return yield v.selectUnderlyingResolver(),v.assertedUnderlyingResolver._initialize(g)})()}_openPopup(g,v,C,$){var X=this;return(0,E.Z)(function*(){return yield X.selectUnderlyingResolver(),X.assertedUnderlyingResolver._openPopup(g,v,C,$)})()}_openRedirect(g,v,C,$){var X=this;return(0,E.Z)(function*(){return yield X.selectUnderlyingResolver(),X.assertedUnderlyingResolver._openRedirect(g,v,C,$)})()}_isIframeWebStorageSupported(g,v){this.assertedUnderlyingResolver._isIframeWebStorageSupported(g,v)}_originValidation(g){return this.assertedUnderlyingResolver._originValidation(g)}get _shouldInitProactively(){return Du()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return vf(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var g=this;return(0,E.Z)(function*(){if(g.underlyingResolver)return;const v=yield function _f(){return ad.apply(this,arguments)}();g.underlyingResolver=v?g.cordovaResolver:g.browserResolver})()}}function Rl(D){return D.unwrap()}function Ud(D){return Cu(D)}function Cu(D){const{_tokenResponse:g}=D instanceof le.ZR?D.customData:D;if(!g)return null;if(!(D instanceof le.ZR)&&"temporaryProof"in g&&"phoneNumber"in g)return mu.credentialFromResult(D);const v=g.providerId;if(!v||v===qe.PASSWORD)return null;let C;switch(v){case qe.GOOGLE:C=pa;break;case qe.FACEBOOK:C=Fs;break;case qe.GITHUB:C=Ws;break;case qe.TWITTER:C=Xi;break;default:const{oauthIdToken:$,oauthAccessToken:X,oauthTokenSecret:De,pendingToken:We,nonce:gt}=g;return X||De||$||We?We?v.startsWith("saml.")?ti._create(v,We):Cr._fromParams({providerId:v,signInMethod:v,pendingToken:We,idToken:$,accessToken:X}):new Rs(v).credential({idToken:$,accessToken:X,rawNonce:gt}):null}return D instanceof le.ZR?C.credentialFromError(D):C.credentialFromResult(D)}function Wo(D,g){return g.catch(v=>{throw v instanceof le.ZR&&function Tp(D,g){var v;const C=null===(v=g.customData)||void 0===v?void 0:v._tokenResponse;if("auth/multi-factor-auth-required"===g?.code)g.resolver=new Hd(D,function Os(D,g){var v;const C=(0,le.m9)(D),$=g;return de(g.customData.operationType,C,"argument-error"),de(null===(v=$.customData._serverResponse)||void 0===v?void 0:v.mfaPendingCredential,C,"argument-error"),oa._fromError(C,$)}(D,g));else if(C){const $=Cu(g),X=g;$&&(X.credential=$,X.tenantId=C.tenantId||void 0,X.email=C.email||void 0,X.phoneNumber=C.phoneNumber||void 0)}}(D,v),v}).then(v=>{const $=v.user;return{operationType:v.operationType,credential:Ud(v),additionalUserInfo:Ai(v),user:hl.getOrCreate($)}})}function jd(D,g){return ld.apply(this,arguments)}function ld(){return(ld=(0,E.Z)(function*(D,g){const v=yield g;return{verificationId:v.verificationId,confirm:C=>Wo(D,v.confirm(C))}})).apply(this,arguments)}class Hd{constructor(g,v){this.resolver=v,this.auth=function zo(D){return D.wrapped()}(g)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(g){return Wo(Rl(this.auth),this.resolver.resolveSignIn(g))}}class hl{constructor(g){this._delegate=g,this.multiFactor=function bo(D){const g=(0,le.m9)(D);return Si.has(g)||Si.set(g,Tt._fromUser(g)),Si.get(g)}(g)}static getOrCreate(g){return hl.USER_MAP.has(g)||hl.USER_MAP.set(g,new hl(g)),hl.USER_MAP.get(g)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(g){return this._delegate.getIdTokenResult(g)}getIdToken(g){return this._delegate.getIdToken(g)}linkAndRetrieveDataWithCredential(g){return this.linkWithCredential(g)}linkWithCredential(g){var v=this;return(0,E.Z)(function*(){return Wo(v.auth,nn(v._delegate,g))})()}linkWithPhoneNumber(g,v){var C=this;return(0,E.Z)(function*(){return jd(C.auth,function mh(D,g,v){return Ts.apply(this,arguments)}(C._delegate,g,v))})()}linkWithPopup(g){var v=this;return(0,E.Z)(function*(){return Wo(v.auth,function pp(D,g,v){return ql.apply(this,arguments)}(v._delegate,g,Ha))})()}linkWithRedirect(g){var v=this;return(0,E.Z)(function*(){return yield Th(Mn(v.auth)),gp(v._delegate,g,Ha)})()}reauthenticateAndRetrieveDataWithCredential(g){return this.reauthenticateWithCredential(g)}reauthenticateWithCredential(g){var v=this;return(0,E.Z)(function*(){return Wo(v.auth,Gi(v._delegate,g))})()}reauthenticateWithPhoneNumber(g,v){return jd(this.auth,function gu(D,g,v){return Ni.apply(this,arguments)}(this._delegate,g,v))}reauthenticateWithPopup(g){return Wo(this.auth,function fp(D,g,v){return Jc.apply(this,arguments)}(this._delegate,g,Ha))}reauthenticateWithRedirect(g){var v=this;return(0,E.Z)(function*(){return yield Th(Mn(v.auth)),Ku(v._delegate,g,Ha)})()}sendEmailVerification(g){return function Sc(D,g){return lo.apply(this,arguments)}(this._delegate,g)}unlink(g){var v=this;return(0,E.Z)(function*(){return yield function Mo(D,g){return xo.apply(this,arguments)}(v._delegate,g),v})()}updateEmail(g){return function Y(D,g){return et((0,le.m9)(D),g,null)}(this._delegate,g)}updatePassword(g){return function ve(D,g){return et((0,le.m9)(D),null,g)}(this._delegate,g)}updatePhoneNumber(g){return function zl(D,g){return Ia.apply(this,arguments)}(this._delegate,g)}updateProfile(g){return function J(D,g){return H.apply(this,arguments)}(this._delegate,g)}verifyBeforeUpdateEmail(g,v){return function uf(D,g,v){return ss.apply(this,arguments)}(this._delegate,g,v)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}hl.USER_MAP=new WeakMap;const ud=de;let us=(()=>{class D{constructor(v,C){if(this.app=v,C.isInitialized())return this._delegate=C.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:$}=v.options;ud($,"invalid-api-key",{appName:v.name}),ud($,"invalid-api-key",{appName:v.name});const X=typeof window<"u"?Ha:void 0;this._delegate=C.initialize({options:{persistence:Gd($,v.name),popupRedirectResolver:X}}),this._delegate._updateErrorMap(Et),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?hl.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(v){this._delegate.languageCode=v}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(v){this._delegate.tenantId=v}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(v,C){!function du(D,g,v){const C=Mn(D);de(C._canInitEmulator,C,"emulator-config-failed"),de(/^https?:\/\//.test(g),C,"invalid-emulator-scheme");const $=!!v?.disableWarnings,X=Ki(g),{host:De,port:We}=function Xo(D){const g=Ki(D),v=/(\/\/)?([^?#/]+)/.exec(D.substr(g.length));if(!v)return{host:"",port:null};const C=v[2].split("@").pop()||"",$=/^(\[[^\]]+\])(:|$)/.exec(C);if($){const X=$[1];return{host:X,port:Za(C.substr(X.length+1))}}{const[X,De]=C.split(":");return{host:X,port:Za(De)}}}(g);C.config.emulator={url:`${X}//${De}${null===We?"":`:${We}`}/`},C.settings.appVerificationDisabledForTesting=!0,C.emulatorConfig=Object.freeze({host:De,port:We,protocol:X.replace(":",""),options:Object.freeze({disableWarnings:$})}),$||function Qa(){function D(){const g=document.createElement("p"),v=g.style;g.innerText="Running in emulator mode. Do not use with production credentials.",v.position="fixed",v.width="100%",v.backgroundColor="#ffffff",v.border=".1em solid #000000",v.color="#b50000",v.bottom="0px",v.left="0px",v.margin="0px",v.zIndex="10000",v.textAlign="center",g.classList.add("firebase-emulator-warning"),document.body.appendChild(g)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",D):D())}()}(this._delegate,v,C)}applyActionCode(v){return function Uu(D,g){return Bo.apply(this,arguments)}(this._delegate,v)}checkActionCode(v){return Vl(this._delegate,v)}confirmPasswordReset(v,C){return function el(D,g,v){return Io.apply(this,arguments)}(this._delegate,v,C)}createUserWithEmailAndPassword(v,C){var $=this;return(0,E.Z)(function*(){return Wo($._delegate,function vl(D,g,v){return oo.apply(this,arguments)}($._delegate,v,C))})()}fetchProvidersForEmail(v){return this.fetchSignInMethodsForEmail(v)}fetchSignInMethodsForEmail(v){return function ao(D,g){return Fa.apply(this,arguments)}(this._delegate,v)}isSignInWithEmailLink(v){return function hh(D,g){const v=_s.parseLink(g);return"EMAIL_SIGNIN"===v?.operation}(0,v)}getRedirectResult(){var v=this;return(0,E.Z)(function*(){ud(Ca(),v._delegate,"operation-not-supported-in-this-environment");const C=yield function Yl(D,g){return ai.apply(this,arguments)}(v._delegate,Ha);return C?Wo(v._delegate,Promise.resolve(C)):{credential:null,user:null}})()}addFrameworkForLogging(v){!function pf(D,g){Mn(D)._logFramework(g)}(this._delegate,v)}onAuthStateChanged(v,C,$){const{next:X,error:De,complete:We}=Jr(v,C,$);return this._delegate.onAuthStateChanged(X,De,We)}onIdTokenChanged(v,C,$){const{next:X,error:De,complete:We}=Jr(v,C,$);return this._delegate.onIdTokenChanged(X,De,We)}sendSignInLinkToEmail(v,C){return function Dc(D,g,v){return Uo.apply(this,arguments)}(this._delegate,v,C)}sendPasswordResetEmail(v,C){return function hu(D,g,v){return Vo.apply(this,arguments)}(this._delegate,v,C||void 0)}setPersistence(v){var C=this;return(0,E.Z)(function*(){let $;switch(function yf(D,g){Fi(Object.values(Aa).includes(g),D,"invalid-persistence-type"),(0,le.b$)()?Fi(g!==Aa.SESSION,D,"unsupported-persistence-type"):(0,le.UG)()?Fi(g===Aa.NONE,D,"unsupported-persistence-type"):oc()?Fi(g===Aa.NONE||g===Aa.LOCAL&&(0,le.hl)(),D,"unsupported-persistence-type"):Fi(g===Aa.NONE||Da(),D,"unsupported-persistence-type")}(C._delegate,v),v){case Aa.SESSION:$=Va;break;case Aa.LOCAL:$=(yield Le($l)._isAvailable())?$l:It;break;case Aa.NONE:$=Pt;break;default:return He("argument-error",{appName:C._delegate.name})}return C._delegate.setPersistence($)})()}signInAndRetrieveDataWithCredential(v){return this.signInWithCredential(v)}signInAnonymously(){return Wo(this._delegate,function yl(D){return yo.apply(this,arguments)}(this._delegate))}signInWithCredential(v){return Wo(this._delegate,oe(this._delegate,v))}signInWithCustomToken(v){return Wo(this._delegate,function es(D,g){return is.apply(this,arguments)}(this._delegate,v))}signInWithEmailAndPassword(v,C){return Wo(this._delegate,function Il(D,g,v){return oe((0,le.m9)(D),Vn.credential(g,v)).catch(function(){var C=(0,E.Z)(function*($){throw"auth/password-does-not-meet-requirements"===$.code&&Is(D),$});return function($){return C.apply(this,arguments)}}())}(this._delegate,v,C))}signInWithEmailLink(v,C){return Wo(this._delegate,function Cc(D,g,v){return Ul.apply(this,arguments)}(this._delegate,v,C))}signInWithPhoneNumber(v,C){return jd(this._delegate,function Ba(D,g,v){return va.apply(this,arguments)}(this._delegate,v,C))}signInWithPopup(v){var C=this;return(0,E.Z)(function*(){return ud(Ca(),C._delegate,"operation-not-supported-in-this-environment"),Wo(C._delegate,function Cg(D,g,v){return $u.apply(this,arguments)}(C._delegate,v,Ha))})()}signInWithRedirect(v){var C=this;return(0,E.Z)(function*(){return ud(Ca(),C._delegate,"operation-not-supported-in-this-environment"),yield Th(C._delegate),ls(C._delegate,v,Ha)})()}updateCurrentUser(v){return this._delegate.updateCurrentUser(v)}verifyPasswordResetCode(v){return function Bl(D,g){return ka.apply(this,arguments)}(this._delegate,v)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return D.Persistence=Aa,D})();function Jr(D,g,v){let C=D;"function"!=typeof D&&({next:C,error:g,complete:v}=D);const $=C;return{next:De=>$(De&&hl.getOrCreate(De)),error:g,complete:v}}function Gd(D,g){const v=function bh(D,g){const v=Sa();if(!v)return[];const C=$t(Eh,D,g);switch(v.getItem(C)){case Aa.NONE:return[Pt];case Aa.LOCAL:return[$l,Va];case Aa.SESSION:return[Va];default:return[]}}(D,g);if(typeof self<"u"&&!v.includes($l)&&v.push($l),typeof window<"u")for(const C of[It,Va])v.includes(C)||v.push(C);return v.includes(Pt)||v.push(Pt),v}class fl{constructor(){this.providerId="phone",this._delegate=new mu(Rl(me.Z.auth()))}static credential(g,v){return mu.credential(g,v)}verifyPhoneNumber(g,v){return this._delegate.verifyPhoneNumber(g,v)}unwrap(){return this._delegate}}fl.PHONE_SIGN_IN_METHOD=mu.PHONE_SIGN_IN_METHOD,fl.PROVIDER_ID=mu.PROVIDER_ID;const If=de;class cd{constructor(g,v,C=me.Z.app()){var $;If(null===($=C.options)||void 0===$?void 0:$.apiKey,"invalid-api-key",{appName:C.name}),this._delegate=new gi(C.auth(),g,v),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function wp(D){D.INTERNAL.registerComponent(new ke.wA("auth-compat",g=>{const v=g.getProvider("app-compat").getImmediate(),C=g.getProvider("auth");return new us(v,C)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:Vn,FacebookAuthProvider:Fs,GithubAuthProvider:Ws,GoogleAuthProvider:pa,OAuthProvider:Rs,SAMLAuthProvider:Fr,PhoneAuthProvider:fl,PhoneMultiFactorGenerator:vp,RecaptchaVerifier:cd,TwitterAuthProvider:Xi,Auth:us,AuthCredential:Po,Error:le.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),D.registerVersion("@firebase/auth-compat","0.4.7")}(me.Z)},5861:(Wt,Je,G)=>{function E(le,Oe,Ne,Te,ke,T,qe){try{var ye=le[T](qe),Ie=ye.value}catch(Ve){return void Ne(Ve)}ye.done?Oe(Ie):Promise.resolve(Ie).then(Te,ke)}function me(le){return function(){var Oe=this,Ne=arguments;return new Promise(function(Te,ke){var T=le.apply(Oe,Ne);function qe(Ie){E(T,Te,ke,qe,ye,"next",Ie)}function ye(Ie){E(T,Te,ke,qe,ye,"throw",Ie)}qe(void 0)})}}G.d(Je,{Z:()=>me})},7582:(Wt,Je,G)=>{function Oe(be,Se){var Ke={};for(var Fe in be)Object.prototype.hasOwnProperty.call(be,Fe)&&Se.indexOf(Fe)<0&&(Ke[Fe]=be[Fe]);if(null!=be&&"function"==typeof Object.getOwnPropertySymbols){var Ue=0;for(Fe=Object.getOwnPropertySymbols(be);Ue<Fe.length;Ue++)Se.indexOf(Fe[Ue])<0&&Object.prototype.propertyIsEnumerable.call(be,Fe[Ue])&&(Ke[Fe[Ue]]=be[Fe[Ue]])}return Ke}function Ve(be,Se,Ke,Fe){return new(Ke||(Ke=Promise))(function(Xe,Ft){function Rt(Kn){try{Ut(Fe.next(Kn))}catch(Yt){Ft(Yt)}}function hr(Kn){try{Ut(Fe.throw(Kn))}catch(Yt){Ft(Yt)}}function Ut(Kn){Kn.done?Xe(Kn.value):function Ue(Xe){return Xe instanceof Ke?Xe:new Ke(function(Ft){Ft(Xe)})}(Kn.value).then(Rt,hr)}Ut((Fe=Fe.apply(be,Se||[])).next())})}function _e(be){return this instanceof _e?(this.v=be,this):new _e(be)}function He(be,Se,Ke){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Ue,Fe=Ke.apply(be,Se||[]),Xe=[];return Ue={},Ft("next"),Ft("throw"),Ft("return"),Ue[Symbol.asyncIterator]=function(){return this},Ue;function Ft(Ln){Fe[Ln]&&(Ue[Ln]=function(An){return new Promise(function($n,Ee){Xe.push([Ln,An,$n,Ee])>1||Rt(Ln,An)})})}function Rt(Ln,An){try{!function hr(Ln){Ln.value instanceof _e?Promise.resolve(Ln.value.v).then(Ut,Kn):Yt(Xe[0][2],Ln)}(Fe[Ln](An))}catch($n){Yt(Xe[0][3],$n)}}function Ut(Ln){Rt("next",Ln)}function Kn(Ln){Rt("throw",Ln)}function Yt(Ln,An){Ln(An),Xe.shift(),Xe.length&&Rt(Xe[0][0],Xe[0][1])}}function $e(be){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Ke,Se=be[Symbol.asyncIterator];return Se?Se.call(be):(be=function mt(be){var Se="function"==typeof Symbol&&Symbol.iterator,Ke=Se&&be[Se],Fe=0;if(Ke)return Ke.call(be);if(be&&"number"==typeof be.length)return{next:function(){return be&&Fe>=be.length&&(be=void 0),{value:be&&be[Fe++],done:!be}}};throw new TypeError(Se?"Object is not iterable.":"Symbol.iterator is not defined.")}(be),Ke={},Fe("next"),Fe("throw"),Fe("return"),Ke[Symbol.asyncIterator]=function(){return this},Ke);function Fe(Xe){Ke[Xe]=be[Xe]&&function(Ft){return new Promise(function(Rt,hr){!function Ue(Xe,Ft,Rt,hr){Promise.resolve(hr).then(function(Ut){Xe({value:Ut,done:Rt})},Ft)}(Rt,hr,(Ft=be[Xe](Ft)).done,Ft.value)})}}}G.d(Je,{FC:()=>He,KL:()=>$e,_T:()=>Oe,mG:()=>Ve,qq:()=>_e}),"function"==typeof SuppressedError&&SuppressedError}},Wt=>{var Je=E=>Wt(Wt.s=E);Je(2614),Je(4913)}]);