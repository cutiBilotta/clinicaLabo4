"use strict";(self.webpackChunkclinica=self.webpackChunkclinica||[]).push([[227],{4227:(Y,f,c)=>{c.r(f),c.d(f,{MiPerfilModule:()=>O});var p=c(6814),g=c(1826),b=c(3519),Z=c.n(b),i=c(5879),h=c(4108),x=c(6751),_=c(6700),u=c(95),T=c(7045);function U(o,r){if(1&o&&i._UZ(0,"img",20),2&o){const e=i.oxw(2);i.Q6J("src",e.imagenUrl,i.LSH)}}function A(o,r){if(1&o&&(i.TgZ(0,"p",11),i._uU(1),i.qZA()),2&o){const e=i.oxw(2);i.xp6(1),i.Oqu(e.usuarioBD.especialidad)}}function D(o,r){if(1&o&&(i.TgZ(0,"section")(1,"div",3)(2,"h2",4),i._uU(3,"Mi Perfil"),i.qZA(),i._UZ(4,"br")(5,"br"),i.TgZ(6,"div",5)(7,"div",6)(8,"div",7)(9,"div",8),i.YNc(10,U,1,1,"img",9),i.TgZ(11,"h5",10),i._uU(12),i.qZA(),i.TgZ(13,"p",11),i._uU(14),i.qZA(),i.YNc(15,A,2,1,"p",12),i.qZA()()(),i.TgZ(16,"div",13)(17,"div",7)(18,"div",14)(19,"div",15)(20,"div",16)(21,"p",17),i._uU(22,"Nombre Completo"),i.qZA()(),i.TgZ(23,"div",18)(24,"p",19),i._uU(25),i.qZA()()(),i._UZ(26,"hr"),i.TgZ(27,"div",15)(28,"div",16)(29,"p",17),i._uU(30,"Email"),i.qZA()(),i.TgZ(31,"div",18)(32,"p",19),i._uU(33),i.qZA()()(),i._UZ(34,"hr"),i.TgZ(35,"div",15)(36,"div",16)(37,"p",17),i._uU(38,"Edad"),i.qZA()(),i.TgZ(39,"div",18)(40,"p",19),i._uU(41),i.qZA()()(),i._UZ(42,"hr"),i.TgZ(43,"div",15)(44,"div",16)(45,"p",17),i._uU(46,"Dni"),i.qZA()(),i.TgZ(47,"div",18)(48,"p",19),i._uU(49),i.qZA()()()()(),i._UZ(50,"div",15),i.qZA()()()()),2&o){const e=i.oxw();i.xp6(10),i.Q6J("ngIf",null!=e.imagenUrl),i.xp6(2),i.Oqu(e.usuarioBD.nombre),i.xp6(2),i.Oqu(e.usuarioBD.perfil),i.xp6(1),i.Q6J("ngIf","Especialista"==e.usuarioBD.perfil),i.xp6(10),i.AsE("",e.usuarioBD.nombre," ",e.usuarioBD.apellido,""),i.xp6(8),i.Oqu(e.usuarioBD.email),i.xp6(8),i.Oqu(e.usuarioBD.edad),i.xp6(8),i.Oqu(e.usuarioBD.dni)}}function C(o,r){if(1&o&&(i.TgZ(0,"p",4),i._uU(1),i.qZA()),2&o){const e=i.oxw(2);i.xp6(1),i.hij("Su especialidad: ",e.usuarioBD.especialidad,"")}}function B(o,r){if(1&o&&(i.TgZ(0,"option",33),i._uU(1),i.qZA()),2&o){const e=r.$implicit;i.Q6J("value",e),i.xp6(1),i.Oqu(e)}}function M(o,r){if(1&o&&(i.TgZ(0,"div")(1,"label",42),i._uU(2,"Horario Ingreso \xa0\xa0"),i.qZA(),i._UZ(3,"input",43)(4,"br")(5,"br"),i.TgZ(6,"label",42),i._uU(7,"Horario Egreso \xa0\xa0"),i.qZA(),i._UZ(8,"input",44),i.qZA()),2&o){const e=i.oxw().$implicit;i.xp6(1),i.MGl("for","inputIngreso_",e,""),i.xp6(2),i.MGl("id","inputIngreso_",e,""),i.xp6(3),i.MGl("for","inputEgreso_",e,""),i.xp6(2),i.MGl("id","inputEgreso_",e,"")}}function q(o,r){if(1&o){const e=i.EpF();i.TgZ(0,"div")(1,"div",39)(2,"input",40),i.NdJ("ngModelChange",function(t){const n=i.CHM(e).$implicit,d=i.oxw(3);return i.KtG(d.diasSeleccionados[n]=t)}),i.qZA(),i.TgZ(3,"label",41),i._uU(4,"\xa0\t\xa0"),i.TgZ(5,"b"),i._uU(6),i.qZA()()(),i._UZ(7,"br"),i.YNc(8,M,9,4,"div",1),i._UZ(9,"hr"),i.qZA()}if(2&o){const e=r.$implicit,s=r.index,t=i.oxw(3);i.xp6(2),i.Q6J("value",e)("id","checkDia"+s)("ngModel",t.diasSeleccionados[e]),i.xp6(4),i.Oqu(e),i.xp6(2),i.Q6J("ngIf",t.diasSeleccionados[e])}}function E(o,r){if(1&o){const e=i.EpF();i.TgZ(0,"div",34),i.YNc(1,q,10,5,"div",35),i.TgZ(2,"p",36)(3,"b"),i._uU(4),i.qZA()(),i.TgZ(5,"div",37)(6,"button",38),i.NdJ("click",function(){i.CHM(e);const t=i.oxw(2);return i.KtG(t.definirDisponibilidad())}),i._uU(7,"Aceptar"),i.qZA()()()}if(2&o){const e=i.oxw(2);i.xp6(1),i.Q6J("ngForOf",e.diasHabiles),i.xp6(3),i.Oqu(e.mensajeError)}}function y(o,r){if(1&o){const e=i.EpF();i.TgZ(0,"div",21)(1,"div",22)(2,"div",23)(3,"h5",24),i._uU(4,"Defina su Disponibilidad Horaria"),i.qZA(),i.TgZ(5,"div",25),i._UZ(6,"div",26),i.TgZ(7,"div",27)(8,"div",15)(9,"div"),i.YNc(10,C,2,1,"p",28),i.TgZ(11,"select",29),i.NdJ("change",function(t){i.CHM(e);const a=i.oxw();return i.KtG(a.seleccionarEspecialidad(t))}),i.TgZ(12,"option",30),i._uU(13,"Seleccione una Especialidad - sin disponibilidad definida"),i.qZA(),i.YNc(14,B,2,2,"option",31),i.qZA()()(),i._UZ(15,"hr"),i.YNc(16,E,8,2,"div",32),i.qZA(),i._UZ(17,"div",26),i.qZA(),i._UZ(18,"br")(19,"br"),i.qZA()()()}if(2&o){const e=i.oxw();i.xp6(10),i.Q6J("ngIf",null!=e.usuarioBD),i.xp6(4),i.Q6J("ngForOf",e.especialidadesSelect),i.xp6(2),i.Q6J("ngIf",e.mostrarForm)}}function I(o,r){if(1&o&&(i.TgZ(0,"li"),i._uU(1),i.qZA()),2&o){const e=r.$implicit;i.xp6(1),i.AsE(" ",e.dato," - ",e.descripcion," ")}}function S(o,r){if(1&o&&(i.TgZ(0,"div",46)(1,"div",47)(2,"h5",48),i._uU(3,"Historia Cl\xednica"),i.qZA(),i.TgZ(4,"div",49)(5,"ul",50)(6,"li"),i._uU(7),i.qZA(),i.TgZ(8,"li"),i._uU(9),i.qZA(),i.TgZ(10,"li"),i._uU(11),i.qZA(),i.TgZ(12,"li"),i._uU(13),i.qZA(),i.YNc(14,I,2,2,"li",35),i.qZA()()()()),2&o){const e=r.$implicit;i.xp6(7),i.hij("Altura: ",e.altura,""),i.xp6(2),i.hij("Peso: ",e.peso,""),i.xp6(2),i.hij("Presi\xf3n: ",e.presion,""),i.xp6(2),i.hij("Temperatura: ",e.temperatura,""),i.xp6(1),i.Q6J("ngForOf",e.detalles)}}function P(o,r){if(1&o&&(i.TgZ(0,"div")(1,"div",15),i.YNc(2,S,15,5,"div",45),i.qZA()()),2&o){const e=i.oxw();i.xp6(2),i.Q6J("ngForOf",e.historiaClinica)}}const J=[{path:"",component:(()=>{class o{constructor(e,s,t,a,n){this.router=e,this.authService=s,this.database=t,this.storageService=a,this.formBuilder=n,this.diasHabiles=["Lunes","Martes","Mi\xe9rcoles","Jueves","Viernes","S\xe1bado"],this.diasSeleccionados={},this.especialidadSeleccionada="",this.mostrarForm=!1,this.mensajeError="",this.usuarios=[],this.mostrarHistoriaClinica=!1}ngOnInit(){this.authService.getUserLogged().subscribe(e=>{if(e){this.usuarioLoggeado=e;const s=e.email;console.log("Email del usuario loggeado:",s),this.database.obtenerTodos("usuarios").subscribe(t=>{if(this.usuarios=t.map(a=>{let n=a.payload.doc.data();return n.id=a.payload.doc.id,n}),console.log(this.usuarios),this.usuarioBD=this.usuarios.find(a=>a.email==s),this.usuarioBD)if(console.log("Usuario encontrado en el array de usuarios:",this.usuarioBD),"paciente"==this.usuarioBD.perfil.toLowerCase())this.storageService.obtenerImagen("users",this.usuarioBD.imgPerfil[0]).then(n=>{this.imagenUrl=n,console.log(this.imagenUrl)}),this.mostrarHistoriaClinica=!0,this.historiaClinica=this.usuarioBD.historiaClinica,console.log(this.historiaClinica);else if("administrador"==this.usuarioBD.perfil.toLowerCase())this.storageService.obtenerImagen("users",this.usuarioBD.imgPerfil).then(n=>{this.imagenUrl=n,console.log(this.imagenUrl)});else if("especialista"==this.usuarioBD.perfil.toLowerCase()){this.storageService.obtenerImagen("users",this.usuarioBD.imgPerfil).then(d=>{this.imagenUrl=d,console.log(this.imagenUrl)});const n=this.usuarioBD.especialidad;if(console.log(n),console.log(this.usuarioBD),!1!==this.usuarioBD.disponibilidad){const d=this.usuarioBD.disponibilidad.map(m=>m.especialidad),l=n.filter(m=>!d.includes(m));this.especialidadesSelect=l.length>0?l:[]}else this.especialidadesSelect=n,console.log(this.especialidadesSelect)}})}})}seleccionarEspecialidad(e){this.especialidadSeleccionada=e.target.value,this.mostrarForm=!0}definirDisponibilidad(){let e=!0;const s={especialidad:this.especialidadSeleccionada,horarios:{}};for(const t in this.diasSeleccionados)if(e=!1,this.diasSeleccionados[t]){const a=document.getElementById(`inputIngreso_${t}`),n=document.getElementById(`inputEgreso_${t}`),d=+a.value,l=+n.value;if(console.log(l),console.log(d),""==a.value||""==n.value)return void(this.mensajeError=`Debe ingresar horarios para ${t}`);if(!(d>=8&&d<=19&&l>=8&&l<=19))return void(this.mensajeError="Los horarios ingresados no son v\xe1lidos");if("S\xe1bado"==t&&l>14)return void(this.mensajeError="El horario de egreso no puede ser mayor a 14 los s\xe1bados");s.horarios[t]={inicio:d,egreso:l}}e?this.mensajeError="Debe definir su disponibilidad":(this.usuarioBD.disponibilidad||(this.usuarioBD.disponibilidad=[]),this.usuarioBD.disponibilidad.push(s),this.database.actualizar("usuarios",this.usuarioBD,this.usuarioBD.id),console.log(this.usuarioBD),Z().fire({title:"Disponibilidad Actualizada",confirmButtonColor:"#caff42",confirmButtonText:"Entendido"}).then(()=>{this.router.navigateByUrl("/home")}))}static#i=this.\u0275fac=function(s){return new(s||o)(i.Y36(g.F0),i.Y36(h.e),i.Y36(x.T),i.Y36(_.V),i.Y36(u.qu))};static#e=this.\u0275cmp=i.Xpm({type:o,selectors:[["app-mi-perfil"]],decls:6,vars:3,consts:[[1,"container"],[4,"ngIf"],["class","mt-4",4,"ngIf"],[1,"container","py-5"],[1,"text-center"],[1,"row",2,"background-color","#d0e0eb"],[1,"col-lg-4",2,"background-color","#b7d1e2"],[1,"card","mb-4","mt-4",2,"background-color","#d0e0eb"],[1,"card-body","text-center"],["alt","avatar","class","rounded-circle img-fluid","style","width: 150px;",3,"src",4,"ngIf"],[1,"my-3"],[1,"text-muted","mb-1"],["class","text-muted mb-1",4,"ngIf"],[1,"col-lg-8",2,"background-color","#b7d1e2"],[1,"card-body"],[1,"row"],[1,"col-sm-3"],[1,"mb-0"],[1,"col-sm-9"],[1,"text-muted","mb-0"],["alt","avatar",1,"rounded-circle","img-fluid",2,"width","150px",3,"src"],[1,"mt-4"],[1,"card"],[1,"card-body",2,"background-color","#d0e0eb"],[1,"card-title","text-center"],[1,"input-group","mb-3"],[1,"col"],[1,"col-6"],["class","text-center",4,"ngIf"],["name","especialidad","id","",1,"form-select",3,"change"],["value","","disabled","","selected",""],[3,"value",4,"ngFor","ngForOf"],["class","form-check","style","align-items: center; justify-content: center;",4,"ngIf"],[3,"value"],[1,"form-check",2,"align-items","center","justify-content","center"],[4,"ngFor","ngForOf"],[1,"text-danger"],[2,"text-align","center"],[1,"btn","mt-4","text-center","btn-lg",2,"background-color","#caff42",3,"click"],[1,"d-flex","align-items-center"],["type","checkbox","name","diasSeleccionados",1,"form-check-input",3,"value","id","ngModel","ngModelChange"],["for","'checkDia' + i",1,"form-check-label"],[3,"for"],["type","number","min","8","max","19","width","50",1,"form-control",2,"background-color","#bbc8d0",3,"id"],["type","number","min","8","max","19",1,"form-control",2,"background-color","#bbc8d0",3,"id"],["class","col-4",4,"ngFor","ngForOf"],[1,"col-4"],[1,"card","mt-2"],[1,"card-header",2,"background-color","#397c9e"],[1,"card-body",2,"background-color","#ddd"],[1,"card-text"]],template:function(s,t){1&s&&(i.TgZ(0,"body")(1,"div",0),i._UZ(2,"app-navbar"),i.YNc(3,D,51,9,"section",1),i.YNc(4,y,20,3,"div",2),i.YNc(5,P,3,1,"div",1),i.qZA()()),2&s&&(i.xp6(3),i.Q6J("ngIf",null!=t.usuarioBD),i.xp6(1),i.Q6J("ngIf",null!=t.usuarioBD&&"Especialista"==t.usuarioBD.perfil),i.xp6(1),i.Q6J("ngIf",t.mostrarHistoriaClinica))},dependencies:[p.sg,p.O5,u.YN,u.Kr,u.Wl,u.JJ,u.On,T.S],styles:['@charset "UTF-8";body[_ngcontent-%COMP%]:before{content:"";position:fixed;top:0;left:0;width:100%;height:100%;background-image:url(back3.0785549b999bc1f3.jpg);background-size:100%;opacity:.6;z-index:-1}body[_ngcontent-%COMP%]{background:none}']})}return o})()}];let F=(()=>{class o{static#i=this.\u0275fac=function(s){return new(s||o)};static#e=this.\u0275mod=i.oAB({type:o});static#o=this.\u0275inj=i.cJS({imports:[g.Bz.forChild(J),g.Bz]})}return o})();var v=c(5383);let O=(()=>{class o{static#i=this.\u0275fac=function(s){return new(s||o)};static#e=this.\u0275mod=i.oAB({type:o});static#o=this.\u0275inj=i.cJS({providers:[_.V,h.e],imports:[p.ez,F,u.u5,v.W,v.W]})}return o})()}}]);