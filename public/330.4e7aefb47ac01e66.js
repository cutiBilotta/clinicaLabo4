"use strict";(self.webpackChunkclinica=self.webpackChunkclinica||[]).push([[330],{7330:(Z,u,s)=>{s.r(u),s.d(u,{LoginModule:()=>b});var d=s(6814),a=s(95),c=s(1826);class h{constructor(l,o,e){this.email=l,this.contrase\u00f1a=o,this.perfil=e}toJSON(){return{email:this.email,password:this.contrase\u00f1a,perfil:this.perfil}}}var t=s(5879),m=s(4108),p=s(6751);function g(i,l){if(1&i){const o=t.EpF();t.TgZ(0,"div")(1,"form")(2,"label",11),t._uU(3,"Usuario"),t.qZA(),t.TgZ(4,"input",12),t.NdJ("ngModelChange",function(n){t.CHM(o);const r=t.oxw();return t.KtG(r.email=n)}),t.qZA(),t.TgZ(5,"label",13),t._uU(6,"Password"),t.qZA(),t.TgZ(7,"input",14),t.NdJ("ngModelChange",function(n){t.CHM(o);const r=t.oxw();return t.KtG(r.password=n)}),t.qZA(),t.TgZ(8,"button",15),t.NdJ("click",function(){t.CHM(o);const n=t.oxw();return t.KtG(n.ingresar())}),t._uU(9,"Ingresar"),t.qZA()()()}if(2&i){const o=t.oxw();t.xp6(4),t.Q6J("ngModel",o.email),t.xp6(3),t.Q6J("ngModel",o.password)}}function f(i,l){1&i&&(t.TgZ(0,"div",16),t._UZ(1,"img",17),t.qZA())}const v=[{path:"",component:(()=>{class i{constructor(o,e,n){this.authService=o,this.database=e,this.router=n,this.email="",this.password="",this.perfil="",this.usuarios=[],this.mensajeError=""}ngOnInit(){this.database.obtenerTodos("usuarios").subscribe(o=>{this.usuarios=o.map(e=>{let n=e.payload.doc.data();return n.id=e.payload.doc.id,n}),console.log(this.usuarios)})}autocompletarPaciente(){this.email="july.bilotta@gmail.com",this.password="juliana"}autocompletarEspecialista(){this.email="adoamaral@hotmail.com",this.password="analiado"}ingresar(){this.user=new h(this.email,this.password,"indefinido");let o=this.usuarios.find(e=>e.email==this.email);if(o){if(this.perfil=o.perfil,"especialista"==this.perfil||"Especialista"==this.perfil){if(0==o.habilitacion)return void(this.mensajeError="Usted no se encuentra habilitado");this.authService.login(this.user.email,this.password).then(e=>{e?.user&&e.user.emailVerified?(console.log("Ingreso exitoso"),this.router.navigate(["/home"])):this.mensajeError="El usuario a\xfan no ha verificado su correo electr\xf3nico."}).catch(e=>{console.log("Error al iniciar sesi\xf3n:",e)})}this.authService.login(this.user.email,this.password).then(e=>{e?.user&&e.user.emailVerified?(console.log("Ingreso exitoso"),this.router.navigate(["/home"])):this.mensajeError="El usuario a\xfan no ha verificado su correo electr\xf3nico."}).catch(e=>{console.log("Error al iniciar sesi\xf3n:",e)})}else this.mensajeError="Antes de ingresar debe registrarse"}static#t=this.\u0275fac=function(e){return new(e||i)(t.Y36(m.e),t.Y36(p.T),t.Y36(c.F0))};static#e=this.\u0275cmp=t.Xpm({type:i,selectors:[["app-login"]],decls:22,vars:3,consts:[[1,"container"],[1,"row"],[1,"col"],[1,"col-6"],[1,"card","text-center","mx-2","mt-5"],[1,"card-header","text-white",2,"background-color","#49708a"],[1,"card-body","p-4","bg-light"],[4,"ngIf"],["class","spinner-container text-center",4,"ngIf"],["type","button",1,"btn","m-2",2,"background-color","#88abc2",3,"click"],[1,"text-danger"],["for","email",2,"float","left"],["type","email","id","email","name","email","placeholder","Email","autocomplete","off",1,"form-control","m-2",3,"ngModel","ngModelChange"],["for","password",2,"float","left"],["type","password","id","password","name","password","placeholder","Password","autocomplete","off",1,"form-control","m-2",3,"ngModel","ngModelChange"],["type","submit",1,"btn","m-2",2,"background-color","#caff42",3,"click"],[1,"spinner-container","text-center"],["src","../../../../assets/img/spinner.png","alt","spinner"]],template:function(e,n){1&e&&(t.TgZ(0,"body")(1,"div",0)(2,"div",0)(3,"div",1),t._UZ(4,"div",2),t.TgZ(5,"div",3)(6,"div",4)(7,"div",5)(8,"b"),t._uU(9,"Ya tienes cuenta?"),t.qZA()(),t.TgZ(10,"div",6),t.YNc(11,g,10,2,"div",7),t.YNc(12,f,2,0,"div",8),t.TgZ(13,"p"),t._uU(14,"Ingresar como:"),t.qZA(),t.TgZ(15,"button",9),t.NdJ("click",function(){return n.autocompletarPaciente()}),t._uU(16,"Paciente"),t.qZA(),t.TgZ(17,"button",9),t.NdJ("click",function(){return n.autocompletarEspecialista()}),t._uU(18,"Especialista"),t.qZA(),t.TgZ(19,"p",10),t._uU(20),t.qZA()()()(),t._UZ(21,"div",2),t.qZA()()()()),2&e&&(t.xp6(11),t.Q6J("ngIf",null!=n.usuarios&&n.usuarios.length>0),t.xp6(1),t.Q6J("ngIf",0==n.usuarios.length),t.xp6(8),t.Oqu(n.mensajeError))},dependencies:[d.O5,a._Y,a.Fj,a.JJ,a.JL,a.On,a.F],styles:['@charset "UTF-8";body[_ngcontent-%COMP%]{background-color:#d0e0eb;height:100vh;width:100vw}.spinner-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:100%}.spinner-container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:50px;height:50px;animation:_ngcontent-%COMP%_spin 1s linear infinite}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}']})}return i})()}];let _=(()=>{class i{static#t=this.\u0275fac=function(e){return new(e||i)};static#e=this.\u0275mod=t.oAB({type:i});static#i=this.\u0275inj=t.cJS({imports:[c.Bz.forChild(v),c.Bz]})}return i})(),b=(()=>{class i{static#t=this.\u0275fac=function(e){return new(e||i)};static#e=this.\u0275mod=t.oAB({type:i});static#i=this.\u0275inj=t.cJS({imports:[d.ez,_,a.u5]})}return i})()}}]);