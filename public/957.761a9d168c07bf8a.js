"use strict";(self.webpackChunkclinica=self.webpackChunkclinica||[]).push([[957],{2957:(D,u,c)=>{c.r(u),c.d(u,{CargaHistClinicaModule:()=>E});var d=c(6814),p=c(1826),m=c(3519),h=c.n(m),t=c(5879),_=c(6751),b=c(4108),C=c(7045),l=c(95);function f(n,r){if(1&n&&(t.TgZ(0,"th",25),t._uU(1),t.qZA()),2&n){const i=r.$implicit;t.xp6(1),t.Oqu(i)}}function x(n,r){if(1&n&&(t.ynx(0),t.TgZ(1,"b"),t._uU(2),t.qZA(),t.BQk()),2&n){const i=t.oxw().$implicit,o=t.oxw().$implicit;t.xp6(2),t.Oqu(o[i])}}function T(n,r){if(1&n&&(t.ynx(0),t._uU(1),t.BQk()),2&n){const i=t.oxw(2).$implicit,o=t.oxw(2);t.xp6(1),t.hij(" ",o.obtenerNombrePaciente(i.pacienteId)," ")}}function Z(n,r){if(1&n&&(t.ynx(0),t._uU(1),t.BQk()),2&n){const i=t.oxw(2).$implicit,o=t.oxw(2);t.xp6(1),t.hij(" ",o.obtenerApellidoPaciente(i.pacienteId)," ")}}function y(n,r){if(1&n&&(t.ynx(0),t._uU(1),t.BQk()),2&n){const i=t.oxw().$implicit,o=t.oxw().$implicit;t.xp6(1),t.hij(" ",o[i]," ")}}function M(n,r){if(1&n&&(t.TgZ(0,"td"),t.YNc(1,x,3,1,"ng-container",5),t.YNc(2,T,2,1,"ng-container",5),t.YNc(3,Z,2,1,"ng-container",5),t.YNc(4,y,2,1,"ng-container",5),t.qZA()),2&n){const i=r.$implicit;t.xp6(1),t.Q6J("ngIf","estado"==i),t.xp6(1),t.Q6J("ngIf","nombre"===i),t.xp6(1),t.Q6J("ngIf","apellido"===i),t.xp6(1),t.Q6J("ngIf","estado"!==i&&"nombre"!==i&&"apellido"!==i)}}function v(n,r){if(1&n){const i=t.EpF();t.TgZ(0,"tr",27),t.NdJ("click",function(){const a=t.CHM(i).$implicit,s=t.oxw(2);return t.KtG(s.seleccionarTurno(a))}),t.TgZ(1,"th",28),t._uU(2),t.qZA(),t.YNc(3,M,5,4,"td",29),t.qZA()}if(2&n){const i=r.index,o=t.oxw(2);t.xp6(2),t.Oqu(i+1),t.xp6(1),t.Q6J("ngForOf",o.turnosKeys)}}function A(n,r){if(1&n&&(t.TgZ(0,"tbody"),t.YNc(1,v,4,2,"tr",26),t.qZA()),2&n){const i=t.oxw();t.xp6(1),t.Q6J("ngForOf",i.turnosFiltrados)}}function H(n,r){if(1&n&&(t.TgZ(0,"div",30)(1,"h3",31)(2,"b"),t._uU(3),t.qZA()()()),2&n){const i=t.oxw();t.xp6(3),t.lnq(" Paciente Seleccionado: ",i.pacienteSeleccionado.nombre," ",i.pacienteSeleccionado.apellido," - Se atendi\xf3 por ",i.turnoSeleccionado.especialidad,"")}}function J(n,r){if(1&n){const i=t.EpF();t.TgZ(0,"div",20),t._UZ(1,"hr"),t.TgZ(2,"div",11)(3,"div",12)(4,"span",13)(5,"b"),t._uU(6,"Dato"),t.qZA()()(),t.TgZ(7,"input",32),t.NdJ("ngModelChange",function(e){t.CHM(i);const a=t.oxw();return t.KtG(a.datoDos=e)}),t.qZA(),t.TgZ(8,"div",12)(9,"span",13)(10,"b"),t._uU(11,"Descripcion"),t.qZA()()(),t.TgZ(12,"input",33),t.NdJ("ngModelChange",function(e){t.CHM(i);const a=t.oxw();return t.KtG(a.descDos=e)}),t.qZA()()()}if(2&n){const i=t.oxw();t.xp6(7),t.Q6J("ngModel",i.datoDos),t.xp6(5),t.Q6J("ngModel",i.descDos)}}function U(n,r){if(1&n){const i=t.EpF();t.TgZ(0,"div",20),t._UZ(1,"hr"),t.TgZ(2,"div",11)(3,"div",12)(4,"span",13)(5,"b"),t._uU(6,"Dato"),t.qZA()()(),t.TgZ(7,"input",34),t.NdJ("ngModelChange",function(e){t.CHM(i);const a=t.oxw();return t.KtG(a.datoTres=e)}),t.qZA(),t.TgZ(8,"div",12)(9,"span",13)(10,"b"),t._uU(11,"Descripcion"),t.qZA()()(),t.TgZ(12,"input",35),t.NdJ("ngModelChange",function(e){t.CHM(i);const a=t.oxw();return t.KtG(a.descTres=e)}),t.qZA()()()}if(2&n){const i=t.oxw();t.xp6(7),t.Q6J("ngModel",i.datoTres),t.xp6(5),t.Q6J("ngModel",i.descTres)}}function F(n,r){if(1&n){const i=t.EpF();t.TgZ(0,"div",36)(1,"button",37),t.NdJ("click",function(){t.CHM(i);const e=t.oxw();return t.KtG(e.enviarHistoriaClinica())}),t._uU(2,"Enviar Historia Clinica"),t.qZA()()}}const q=[{path:"",component:(()=>{class n{constructor(i,o,e){this.database=i,this.afauth=o,this.router=e,this.usuarios=[],this.especialistas=[],this.pacientes=[],this.turnos=[],this.turnosFiltrados=[],this.turnosKeys=[],this.pacientesFiltrados=[],this.camposVisibles=1,this.mensajeError="",this.mensajeErrorHist=""}ngOnInit(){this.afauth.getAuthState().subscribe(i=>{if(i){const o=i.email?.toString();console.log(o),this.database.obtenerTodos("usuarios").subscribe(e=>{this.usuarios=e.map(a=>{let s=a.payload.doc.data();return s.id=a.payload.doc.id,s}),this.especialistas=this.usuarios.filter(a=>"Especialista"==a.perfil),this.pacientes=this.usuarios.filter(a=>"Paciente"==a.perfil),this.usuarioActualBd=this.usuarios.find(a=>a.email==o),console.log(this.usuarioActualBd.id)})}this.database.obtenerTodos("turnos").subscribe(o=>{this.turnos=o.map(e=>{let a=e.payload.doc.data();return a.id=e.payload.doc.id,a}),this.turnos.forEach(e=>{e.especialistaId==this.usuarioActualBd.id&&"finalizado"==e.estado.toLowerCase()&&this.turnosFiltrados.push(e)}),0==this.turnosKeys.length&&this.turnosKeys.push("especialidad","dia","horario","nombre","apellido"),this.turnosFiltrados.forEach(e=>{const a=e.pacienteId,s=this.usuarios.find(S=>S.id===a);s&&!this.pacientesFiltrados.includes(s)&&this.pacientesFiltrados.push(s)}),console.log(this.pacientesFiltrados)})})}obtenerNombrePaciente(i){const o=this.pacientesFiltrados.find(e=>e.id===i);return o?o.nombre:""}obtenerApellidoPaciente(i){const o=this.pacientesFiltrados.find(e=>e.id===i);return o?o.apellido:""}obtenerPaciente(i){const o=this.pacientesFiltrados.find(e=>e.id===i);this.pacienteSeleccionado=o,console.log(this.pacienteSeleccionado)}seleccionarTurno(i){this.turnoSeleccionado=i,console.log(this.turnoSeleccionado),this.obtenerPaciente(i.pacienteId)}enviarHistoriaClinica(){if(!(this.altura&&this.peso&&this.temperatura&&this.presion))return void(this.mensajeError="Todos los campos son obligatorios");if(this.altura<=30||this.altura>=250)return void(this.mensajeError="La altura debe estar entre 30 y 250 cent\xedmetros");if(this.peso<=1||this.peso>=300)return void(this.mensajeError="El peso debe estar entre 1 y 300 gramos");if(isNaN(this.temperatura)||this.temperatura<=30||this.temperatura>=45)return void(this.mensajeError="La temperatura debe ser un n\xfamero v\xe1lido y estar entre 30 y 45 grados.");if(this.camposVisibles>=1&&(!this.datoUno||!this.descUno))return void(this.mensajeError="Los campos Dato y Descripci\xf3n son obligatorios.");if(this.camposVisibles>=2&&(!this.datoDos||!this.descDos))return void(this.mensajeError="Los campos Dato y Descripci\xf3n son obligatorios.");if(!(3!==this.camposVisibles||this.datoTres&&this.descTres))return void(this.mensajeError="Los campos Dato y Descripci\xf3n son obligatorios.");if(this.camposVisibles>=1&&!/^[a-zA-Z\s]+$/.test(this.datoUno))return void(this.mensajeErrorHist="El campo Dato solo puede contener letras y espacios.");if(this.camposVisibles>=2&&!/^[a-zA-Z\s]+$/.test(this.datoDos))return void(this.mensajeErrorHist="El campo Dato solo puede contener letras y espacios.");if(3===this.camposVisibles&&!/^[a-zA-Z\s]+$/.test(this.datoTres))return void(this.mensajeErrorHist="El campo Dato solo puede contener letras y espacios.");const i=this.presion.split("/");if(2!==i.length||isNaN(+i[0])||isNaN(+i[1])||+i[0]<10||+i[0]>300||+i[1]<10||+i[1]>300)return void(this.mensajeError="El formato de presi\xf3n no es v\xe1lido. Debe ser XX/YY donde ambos n\xfameros est\xe1n entre 10 y 300");const a=[];a.push({dato:this.datoUno,descripcion:this.descUno}),this.camposVisibles>=2&&this.datoDos&&this.descDos&&a.push({dato:this.datoDos,descripcion:this.descDos}),3===this.camposVisibles&&this.datoTres&&this.descTres&&a.push({dato:this.datoTres,descripcion:this.descTres});const s={presion:this.presion,altura:this.altura,peso:this.peso,temperatura:this.temperatura,detalles:a};this.pacienteSeleccionado.hasOwnProperty("historiaClinica")||(this.pacienteSeleccionado.historiaClinica=[]),this.pacienteSeleccionado.historiaClinica.push(s),console.log("Paciente con historia cl\xednica:",this.pacienteSeleccionado),this.database.actualizar("usuarios",this.pacienteSeleccionado,this.pacienteSeleccionado.id),h().fire({title:"Historia Clinica cargada con \xe9xito",confirmButtonColor:"#caff42",confirmButtonText:"Entendido"}).then(()=>{this.router.navigateByUrl("/home")})}agregarCampo(){this.camposVisibles<3&&this.camposVisibles++}eliminarCampo(){this.camposVisibles>1&&this.camposVisibles--}static#t=this.\u0275fac=function(o){return new(o||n)(t.Y36(_.T),t.Y36(b.e),t.Y36(p.F0))};static#i=this.\u0275cmp=t.Xpm({type:n,selectors:[["app-carga-hist-clinica"]],decls:68,vars:16,consts:[[1,"container"],[1,"text-center","text-dark","my-3"],[1,"table","table-bordered","table-light","table-striped"],["scope","col",2,"background-color","#49708a"],["class","text-center","style","background-color: #49708a;","scope","col",4,"ngFor","ngForOf"],[4,"ngIf"],["class"," mx-3 my-3 ",4,"ngIf"],[1,"px-3","py-3",2,"background-color","#ddd"],[1,"text-center"],[1,"text-danger"],[1,"px-5","py-5",2,"background-color","#bbb"],[1,"input-group","input-group-sm","mb-3"],[1,"input-group-prepend"],["id","rese\xf1a",1,"input-group-text",2,"background-color","#88abc2"],["type","text","placeholder","altura","aria-label","Small","aria-describedby","inputGroup-sizing-sm",1,"form-control","pr-5",3,"ngModel","ngModelChange"],["type","text","placeholder","peso","aria-label","Small","aria-describedby","inputGroup-sizing-sm",1,"form-control",3,"ngModel","ngModelChange"],["type","text","placeholder","temperatura","aria-label","Small","aria-describedby","inputGroup-sizing-sm",1,"form-control",3,"ngModel","ngModelChange"],["type","text","placeholder","presion","aria-label","Small","aria-describedby","inputGroup-sizing-sm",1,"form-control",3,"ngModel","ngModelChange"],[1,"btn","btn-sm","btn-success","mx-3","mb-3",3,"disabled","click"],[1,"btn","btn-sm","btn-danger","mb-3",3,"disabled","click"],[1,"px-3","py-3",2,"background-color","#bbb"],["type","text","placeholder","caries","aria-label","Small","aria-describedby","inputGroup-sizing-sm",1,"form-control",3,"ngModel","ngModelChange"],["type","text","placeholder","4","aria-label","Small","aria-describedby","inputGroup-sizing-sm",1,"form-control",3,"ngModel","ngModelChange"],["style","background-color: #bbb;","class","px-3 py-3",4,"ngIf"],["class","mt-3 mb-5","style","text-align: center;",4,"ngIf"],["scope","col",1,"text-center",2,"background-color","#49708a"],[3,"click",4,"ngFor","ngForOf"],[3,"click"],["scope","row"],[4,"ngFor","ngForOf"],[1,"mx-3","my-3"],[1,"text-primary","text-center"],["type","text","placeholder","hipertension","aria-label","Small","aria-describedby","inputGroup-sizing-sm",1,"form-control",3,"ngModel","ngModelChange"],["type","text","placeholder","controlada","aria-label","Small","aria-describedby","inputGroup-sizing-sm",1,"form-control",3,"ngModel","ngModelChange"],["type","text","placeholder","migra\xf1a","aria-label","Small","aria-describedby","inputGroup-sizing-sm",1,"form-control",3,"ngModel","ngModelChange"],["type","text","placeholder","grave","aria-label","Small","aria-describedby","inputGroup-sizing-sm",1,"form-control",3,"ngModel","ngModelChange"],[1,"mt-3","mb-5",2,"text-align","center"],[1,"btn","btn-lg","btn-success",3,"click"]],template:function(o,e){1&o&&(t.TgZ(0,"body")(1,"div",0),t._UZ(2,"app-navbar"),t.TgZ(3,"h3",1),t._uU(4,"Carga de Historia Clinica"),t.qZA(),t.TgZ(5,"table",2)(6,"thead")(7,"tr")(8,"th",3),t._uU(9,"#"),t.qZA(),t.YNc(10,f,2,1,"th",4),t.qZA()(),t.YNc(11,A,2,1,"tbody",5),t.qZA(),t.YNc(12,H,4,3,"div",6),t.TgZ(13,"div",7)(14,"h3",8),t._uU(15,"Datos Personales"),t.qZA(),t.TgZ(16,"p",9)(17,"b"),t._uU(18),t.qZA()()(),t.TgZ(19,"div",10)(20,"div",11)(21,"div",12)(22,"span",13)(23,"b"),t._uU(24,"Altura - cent\xedmetros: "),t.qZA()()(),t.TgZ(25,"input",14),t.NdJ("ngModelChange",function(s){return e.altura=s}),t.qZA(),t.TgZ(26,"div",12)(27,"span",13)(28,"b"),t._uU(29,"Peso - kilos: "),t.qZA()()(),t.TgZ(30,"input",15),t.NdJ("ngModelChange",function(s){return e.peso=s}),t.qZA()(),t.TgZ(31,"div",11)(32,"div",12)(33,"span",13)(34,"b"),t._uU(35,"Temperatura - grados: "),t.qZA()()(),t.TgZ(36,"input",16),t.NdJ("ngModelChange",function(s){return e.temperatura=s}),t.qZA(),t.TgZ(37,"div",12)(38,"span",13)(39,"b"),t._uU(40,"Presi\xf3n - XX/YY: "),t.qZA()()(),t.TgZ(41,"input",17),t.NdJ("ngModelChange",function(s){return e.presion=s}),t.qZA()()(),t._UZ(42,"hr"),t.TgZ(43,"div",7)(44,"h3",8),t._uU(45,"Ingreso de Historia clinica"),t.qZA(),t.TgZ(46,"button",18),t.NdJ("click",function(){return e.agregarCampo()}),t._uU(47,"+ Agregar Campo"),t.qZA(),t.TgZ(48,"button",19),t.NdJ("click",function(){return e.eliminarCampo()}),t._uU(49,"- Eliminar Campo"),t.qZA(),t.TgZ(50,"p",9)(51,"b"),t._uU(52),t.qZA()()(),t.TgZ(53,"div",20)(54,"div",11)(55,"div",12)(56,"span",13)(57,"b"),t._uU(58,"Dato"),t.qZA()()(),t.TgZ(59,"input",21),t.NdJ("ngModelChange",function(s){return e.datoUno=s}),t.qZA(),t.TgZ(60,"div",12)(61,"span",13)(62,"b"),t._uU(63,"Descripcion"),t.qZA()()(),t.TgZ(64,"input",22),t.NdJ("ngModelChange",function(s){return e.descUno=s}),t.qZA()()(),t.YNc(65,J,13,2,"div",23),t.YNc(66,U,13,2,"div",23),t.YNc(67,F,3,0,"div",24),t.qZA()()),2&o&&(t.xp6(10),t.Q6J("ngForOf",e.turnosKeys),t.xp6(1),t.Q6J("ngIf",void 0!==e.turnosFiltrados&&e.turnosFiltrados.length>0),t.xp6(1),t.Q6J("ngIf",null!=e.pacienteSeleccionado),t.xp6(6),t.Oqu(e.mensajeError),t.xp6(7),t.Q6J("ngModel",e.altura),t.xp6(5),t.Q6J("ngModel",e.peso),t.xp6(6),t.Q6J("ngModel",e.temperatura),t.xp6(5),t.Q6J("ngModel",e.presion),t.xp6(5),t.Q6J("disabled",3===e.camposVisibles),t.xp6(2),t.Q6J("disabled",1===e.camposVisibles),t.xp6(4),t.Oqu(e.mensajeErrorHist),t.xp6(7),t.Q6J("ngModel",e.datoUno),t.xp6(5),t.Q6J("ngModel",e.descUno),t.xp6(1),t.Q6J("ngIf",e.camposVisibles>=2),t.xp6(1),t.Q6J("ngIf",e.camposVisibles>=3),t.xp6(1),t.Q6J("ngIf",null!=e.pacienteSeleccionado))},dependencies:[d.sg,d.O5,C.S,l.Fj,l.JJ,l.On],styles:['@charset "UTF-8";body[_ngcontent-%COMP%]:before{content:"";position:fixed;top:0;left:0;width:100%;height:100%;background-image:url(back1.efcfdc6209eb7238.jpg);background-size:100%;opacity:.2;z-index:-1}body[_ngcontent-%COMP%]{background:none}']})}return n})()}];let N=(()=>{class n{static#t=this.\u0275fac=function(o){return new(o||n)};static#i=this.\u0275mod=t.oAB({type:n});static#e=this.\u0275inj=t.cJS({imports:[p.Bz.forChild(q),p.Bz]})}return n})();var g=c(5383);let E=(()=>{class n{static#t=this.\u0275fac=function(o){return new(o||n)};static#i=this.\u0275mod=t.oAB({type:n});static#e=this.\u0275inj=t.cJS({imports:[d.ez,N,g.W,l.u5,g.W]})}return n})()}}]);