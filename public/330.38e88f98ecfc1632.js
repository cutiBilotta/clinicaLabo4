"use strict";(self.webpackChunkclinica=self.webpackChunkclinica||[]).push([[330],{7330:(L,p,s)=>{s.r(p),s.d(p,{LoginModule:()=>y});var d=s(6814),a=s(95),m=s(1826),g=s(5861);class u{constructor(c,t,o){this.email=c,this.contrase\u00f1a=t,this.perfil=o}toJSON(){return{email:this.email,password:this.contrase\u00f1a,perfil:this.perfil}}}var e=s(5879),f=s(4108),h=s(6751),v=s(6700);function b(n,c){if(1&n){const t=e.EpF();e.TgZ(0,"div")(1,"form")(2,"label",12),e._uU(3,"Usuario"),e.qZA(),e.TgZ(4,"input",13),e.NdJ("ngModelChange",function(r){e.CHM(t);const i=e.oxw();return e.KtG(i.email=r)}),e.qZA(),e.TgZ(5,"label",14),e._uU(6,"Password"),e.qZA(),e.TgZ(7,"input",15),e.NdJ("ngModelChange",function(r){e.CHM(t);const i=e.oxw();return e.KtG(i.password=r)}),e.qZA()()()}if(2&n){const t=e.oxw();e.xp6(4),e.Q6J("ngModel",t.email),e.xp6(3),e.Q6J("ngModel",t.password)}}function _(n,c){if(1&n&&e._UZ(0,"img",19),2&n){const t=e.oxw().$implicit;e.Q6J("src",t.imagenURL,e.LSH)}}function x(n,c){if(1&n){const t=e.EpF();e.TgZ(0,"div")(1,"button",17),e.NdJ("click",function(){const i=e.CHM(t).$implicit,l=e.oxw(2);return e.KtG(l.autocompletar(i))}),e._uU(2),e.YNc(3,_,1,1,"img",18),e.qZA(),e._UZ(4,"br"),e.qZA()}if(2&n){const t=c.$implicit;e.xp6(2),e.AsE(" ",t.nombre," - ",t.perfil," "),e.xp6(1),e.Q6J("ngIf","Paciente"===t.perfil||"Administrador"===t.perfil)}}function Z(n,c){if(1&n&&(e.TgZ(0,"div"),e.YNc(1,x,5,3,"div",16),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("ngForOf",t.usuariosAcceso)}}function w(n,c){1&n&&(e.TgZ(0,"div",20),e._UZ(1,"img",21),e.qZA())}const C=[{path:"",component:(()=>{class n{constructor(t,o,r,i){this.authService=t,this.database=o,this.router=r,this.storageService=i,this.email="",this.password="",this.perfil="",this.usuarios=[],this.mensajeError="",this.usuariosAcceso=["jmkeixwzrgmlvbkgxm@cazlv.com","dvzbjkhmoexktcouuj@cazlq.com","orkjqizsbgtagpdena@cazlq.com","haazgxzjipavfpigda@cazlv.com","aadxlldlzqamkjrpsx@cwmxc.com","hokiocithgxwlwybri@cazlg.com"],this.spinner=!0}ngOnInit(){var t=this;this.database.obtenerTodos("usuarios").subscribe(function(){var o=(0,g.Z)(function*(r){t.usuarios=r.map(i=>{let l=i.payload.doc.data();return l.id=i.payload.doc.id,l}),console.log(t.usuarios);for(const i of t.usuarios)if(i.imgPerfil&&i.imgPerfil.length>0){const l=i.imgPerfil[0],A=yield t.storageService.obtenerImagen(l);i.imagenURL=A}t.usuariosAcceso=t.usuarios.map(i=>t.usuariosAcceso.includes(i.email)?"Especialista"===i.perfil?{nombre:i.nombre,email:i.email,perfil:i.perfil,password:i.password}:{nombre:i.nombre,email:i.email,perfil:i.perfil,password:i.password,imagenURL:"Paciente"===i.perfil||"Administrador"===i.perfil?i.imagenURL:null}:null).filter(i=>null!==i),t.spinner=!1});return function(r){return o.apply(this,arguments)}}())}autocompletar(t){this.email=t.email,this.password=t.password}ingresar(){this.user=new u(this.email,this.password,"indefinido");let t=this.usuarios.find(o=>o.email==this.email);if(t){if(this.perfil=t.perfil,"especialista"==this.perfil.toLocaleLowerCase()&&0==t.habilitacion)return void(this.mensajeError="Usted no se encuentra habilitado");this.authService.login(this.user.email,this.password).then(o=>{o?.user?o?.user?.emailVerified?o?.user&&o.user.emailVerified&&this.router.navigate(["/home"]):this.mensajeError="El usuario no ha verificado el email":this.mensajeError="Contrase\xf1a incorrecta"}).catch(o=>{console.log("Error al iniciar sesi\xf3n:",o)})}}static#e=this.\u0275fac=function(o){return new(o||n)(e.Y36(f.e),e.Y36(h.T),e.Y36(m.F0),e.Y36(v.V))};static#t=this.\u0275cmp=e.Xpm({type:n,selectors:[["app-login"]],decls:32,vars:4,consts:[[1,"container"],[1,"row","justify-content-center"],[1,"col-4"],[1,"card"],[1,"card-header","text-center"],[1,"card-body","p-4","bg-light"],[4,"ngIf"],[1,"text-danger","text-center"],[2,"text-align","center"],["type","submit",1,"btn","m-2",2,"background-color","#caff42",3,"click"],[1,"card-body",2,"text-align","center"],["class","spinner-container text-center mb-4",4,"ngIf"],["for","email",2,"float","left"],["type","email","id","email","name","email","placeholder","Email","autocomplete","off",1,"form-control","m-2",3,"ngModel","ngModelChange"],["for","password",2,"float","left"],["type","password","id","password","name","password","placeholder","Password","autocomplete","off",1,"form-control","m-2",3,"ngModel","ngModelChange"],[4,"ngFor","ngForOf"],["type","button",1,"btn","m-2","btn-lg",2,"background-color","#88abc2",3,"click"],["style","width: 40px; height: 40px; border-radius: 50%;",3,"src",4,"ngIf"],[2,"width","40px","height","40px","border-radius","50%",3,"src"],[1,"spinner-container","text-center","mb-4"],["src","../../../../assets/img/spinner.png","alt","spinner"]],template:function(o,r){1&o&&(e.TgZ(0,"body")(1,"div",0)(2,"div",1)(3,"div",2),e._UZ(4,"br")(5,"br")(6,"br")(7,"br")(8,"br"),e.TgZ(9,"div",3)(10,"h5",4),e._uU(11,"Ya tienes cuenta?"),e.qZA(),e.TgZ(12,"div",5),e.YNc(13,b,8,2,"div",6),e.TgZ(14,"p",7)(15,"b"),e._uU(16),e.qZA()(),e.TgZ(17,"div",8)(18,"button",9),e.NdJ("click",function(){return r.ingresar()}),e._uU(19,"Ingresar"),e.qZA()()()()(),e.TgZ(20,"div",2),e._UZ(21,"br")(22,"br")(23,"br")(24,"br")(25,"br"),e.TgZ(26,"div",3)(27,"h5",4),e._uU(28,"Elige el perfil"),e.qZA(),e.TgZ(29,"div",10),e.YNc(30,Z,2,1,"div",6),e.qZA(),e.YNc(31,w,2,0,"div",11),e.qZA()()()()()),2&o&&(e.xp6(13),e.Q6J("ngIf",null!=r.usuarios&&r.usuarios.length>0),e.xp6(3),e.Oqu(r.mensajeError),e.xp6(14),e.Q6J("ngIf",!r.spinner),e.xp6(1),e.Q6J("ngIf",r.spinner))},dependencies:[d.sg,d.O5,a._Y,a.Fj,a.JJ,a.JL,a.On,a.F],styles:['@charset "UTF-8";body[_ngcontent-%COMP%]{background-color:#d0e0eb;height:100vh;width:100vw}.spinner-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:100%}.spinner-container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:50px;height:50px;animation:_ngcontent-%COMP%_spin 1s linear infinite}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}']})}return n})()}];let T=(()=>{class n{static#e=this.\u0275fac=function(o){return new(o||n)};static#t=this.\u0275mod=e.oAB({type:n});static#i=this.\u0275inj=e.cJS({imports:[m.Bz.forChild(C),m.Bz]})}return n})(),y=(()=>{class n{static#e=this.\u0275fac=function(o){return new(o||n)};static#t=this.\u0275mod=e.oAB({type:n});static#i=this.\u0275inj=e.cJS({imports:[d.ez,T,a.u5]})}return n})()}}]);